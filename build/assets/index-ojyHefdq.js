function YL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qx={exports:{}},dd={},Zx={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function XL(){if(G_)return tr;G_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function v(G,L,ee){this.props=G,this.context=L,this.refs=y,this.updater=ee||x}v.prototype.isReactComponent={},v.prototype.setState=function(G,L){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,L,"setState")},v.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function N(){}N.prototype=v.prototype;function k(G,L,ee){this.props=G,this.context=L,this.refs=y,this.updater=ee||x}var j=k.prototype=new N;j.constructor=k,b(j,v.prototype),j.isPureReactComponent=!0;var A=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function T(G,L,ee){var te,J={},he=null,Se=null;if(L!=null)for(te in L.ref!==void 0&&(Se=L.ref),L.key!==void 0&&(he=""+L.key),L)S.call(L,te)&&!_.hasOwnProperty(te)&&(J[te]=L[te]);var Oe=arguments.length-2;if(Oe===1)J.children=ee;else if(1<Oe){for(var pe=Array(Oe),xe=0;xe<Oe;xe++)pe[xe]=arguments[xe+2];J.children=pe}if(G&&G.defaultProps)for(te in Oe=G.defaultProps,Oe)J[te]===void 0&&(J[te]=Oe[te]);return{$$typeof:e,type:G,key:he,ref:Se,props:J,_owner:E.current}}function D(G,L){return{$$typeof:e,type:G.type,key:L,ref:G.ref,props:G.props,_owner:G._owner}}function F(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function P(G){var L={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ee){return L[ee]})}var I=/\/+/g;function B(G,L){return typeof G=="object"&&G!==null&&G.key!=null?P(""+G.key):L.toString(36)}function z(G,L,ee,te,J){var he=typeof G;(he==="undefined"||he==="boolean")&&(G=null);var Se=!1;if(G===null)Se=!0;else switch(he){case"string":case"number":Se=!0;break;case"object":switch(G.$$typeof){case e:case t:Se=!0}}if(Se)return Se=G,J=J(Se),G=te===""?"."+B(Se,0):te,A(J)?(ee="",G!=null&&(ee=G.replace(I,"$&/")+"/"),z(J,L,ee,"",function(xe){return xe})):J!=null&&(F(J)&&(J=D(J,ee+(!J.key||Se&&Se.key===J.key?"":(""+J.key).replace(I,"$&/")+"/")+G)),L.push(J)),1;if(Se=0,te=te===""?".":te+":",A(G))for(var Oe=0;Oe<G.length;Oe++){he=G[Oe];var pe=te+B(he,Oe);Se+=z(he,L,ee,pe,J)}else if(pe=m(G),typeof pe=="function")for(G=pe.call(G),Oe=0;!(he=G.next()).done;)he=he.value,pe=te+B(he,Oe++),Se+=z(he,L,ee,pe,J);else if(he==="object")throw L=String(G),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Se}function Y(G,L,ee){if(G==null)return G;var te=[],J=0;return z(G,te,"","",function(he){return L.call(ee,he,J++)}),te}function re(G){if(G._status===-1){var L=G._result;L=L(),L.then(function(ee){(G._status===0||G._status===-1)&&(G._status=1,G._result=ee)},function(ee){(G._status===0||G._status===-1)&&(G._status=2,G._result=ee)}),G._status===-1&&(G._status=0,G._result=L)}if(G._status===1)return G._result.default;throw G._result}var X={current:null},ne={transition:null},Z={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:ne,ReactCurrentOwner:E};function me(){throw Error("act(...) is not supported in production builds of React.")}return tr.Children={map:Y,forEach:function(G,L,ee){Y(G,function(){L.apply(this,arguments)},ee)},count:function(G){var L=0;return Y(G,function(){L++}),L},toArray:function(G){return Y(G,function(L){return L})||[]},only:function(G){if(!F(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},tr.Component=v,tr.Fragment=r,tr.Profiler=s,tr.PureComponent=k,tr.StrictMode=n,tr.Suspense=u,tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,tr.act=me,tr.cloneElement=function(G,L,ee){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var te=b({},G.props),J=G.key,he=G.ref,Se=G._owner;if(L!=null){if(L.ref!==void 0&&(he=L.ref,Se=E.current),L.key!==void 0&&(J=""+L.key),G.type&&G.type.defaultProps)var Oe=G.type.defaultProps;for(pe in L)S.call(L,pe)&&!_.hasOwnProperty(pe)&&(te[pe]=L[pe]===void 0&&Oe!==void 0?Oe[pe]:L[pe])}var pe=arguments.length-2;if(pe===1)te.children=ee;else if(1<pe){Oe=Array(pe);for(var xe=0;xe<pe;xe++)Oe[xe]=arguments[xe+2];te.children=Oe}return{$$typeof:e,type:G.type,key:J,ref:he,props:te,_owner:Se}},tr.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:i,_context:G},G.Consumer=G},tr.createElement=T,tr.createFactory=function(G){var L=T.bind(null,G);return L.type=G,L},tr.createRef=function(){return{current:null}},tr.forwardRef=function(G){return{$$typeof:l,render:G}},tr.isValidElement=F,tr.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:re}},tr.memo=function(G,L){return{$$typeof:d,type:G,compare:L===void 0?null:L}},tr.startTransition=function(G){var L=ne.transition;ne.transition={};try{G()}finally{ne.transition=L}},tr.unstable_act=me,tr.useCallback=function(G,L){return X.current.useCallback(G,L)},tr.useContext=function(G){return X.current.useContext(G)},tr.useDebugValue=function(){},tr.useDeferredValue=function(G){return X.current.useDeferredValue(G)},tr.useEffect=function(G,L){return X.current.useEffect(G,L)},tr.useId=function(){return X.current.useId()},tr.useImperativeHandle=function(G,L,ee){return X.current.useImperativeHandle(G,L,ee)},tr.useInsertionEffect=function(G,L){return X.current.useInsertionEffect(G,L)},tr.useLayoutEffect=function(G,L){return X.current.useLayoutEffect(G,L)},tr.useMemo=function(G,L){return X.current.useMemo(G,L)},tr.useReducer=function(G,L,ee){return X.current.useReducer(G,L,ee)},tr.useRef=function(G){return X.current.useRef(G)},tr.useState=function(G){return X.current.useState(G)},tr.useSyncExternalStore=function(G,L,ee){return X.current.useSyncExternalStore(G,L,ee)},tr.useTransition=function(){return X.current.useTransition()},tr.version="18.3.1",tr}var Y_;function A2(){return Y_||(Y_=1,Zx.exports=XL()),Zx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function JL(){if(X_)return dd;X_=1;var e=A2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var f,p={},m=null,x=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:t,type:l,key:m,ref:x,props:p,_owner:s.current}}return dd.Fragment=r,dd.jsx=o,dd.jsxs=o,dd}var J_;function QL(){return J_||(J_=1,Qx.exports=JL()),Qx.exports}var a=QL(),x0={},ey={exports:{}},ka={},ty={exports:{}},ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function ZL(){return Q_||(Q_=1,(function(e){function t(ne,Z){var me=ne.length;ne.push(Z);e:for(;0<me;){var G=me-1>>>1,L=ne[G];if(0<s(L,Z))ne[G]=Z,ne[me]=L,me=G;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var Z=ne[0],me=ne.pop();if(me!==Z){ne[0]=me;e:for(var G=0,L=ne.length,ee=L>>>1;G<ee;){var te=2*(G+1)-1,J=ne[te],he=te+1,Se=ne[he];if(0>s(J,me))he<L&&0>s(Se,J)?(ne[G]=Se,ne[he]=me,G=he):(ne[G]=J,ne[te]=me,G=te);else if(he<L&&0>s(Se,me))ne[G]=Se,ne[he]=me,G=he;else break e}}return Z}function s(ne,Z){var me=ne.sortIndex-Z.sortIndex;return me!==0?me:ne.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,x=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ne){for(var Z=r(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=ne)n(d),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=r(d)}}function A(ne){if(y=!1,j(ne),!b)if(r(u)!==null)b=!0,re(S);else{var Z=r(d);Z!==null&&X(A,Z.startTime-ne)}}function S(ne,Z){b=!1,y&&(y=!1,N(T),T=-1),x=!0;var me=m;try{for(j(Z),p=r(u);p!==null&&(!(p.expirationTime>Z)||ne&&!P());){var G=p.callback;if(typeof G=="function"){p.callback=null,m=p.priorityLevel;var L=G(p.expirationTime<=Z);Z=e.unstable_now(),typeof L=="function"?p.callback=L:p===r(u)&&n(u),j(Z)}else n(u);p=r(u)}if(p!==null)var ee=!0;else{var te=r(d);te!==null&&X(A,te.startTime-Z),ee=!1}return ee}finally{p=null,m=me,x=!1}}var E=!1,_=null,T=-1,D=5,F=-1;function P(){return!(e.unstable_now()-F<D)}function I(){if(_!==null){var ne=e.unstable_now();F=ne;var Z=!0;try{Z=_(!0,ne)}finally{Z?B():(E=!1,_=null)}}else E=!1}var B;if(typeof k=="function")B=function(){k(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Y=z.port2;z.port1.onmessage=I,B=function(){Y.postMessage(null)}}else B=function(){v(I,0)};function re(ne){_=ne,E||(E=!0,B())}function X(ne,Z){T=v(function(){ne(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,re(S))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var me=m;m=Z;try{return ne()}finally{m=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,Z){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var me=m;m=ne;try{return Z()}finally{m=me}},e.unstable_scheduleCallback=function(ne,Z,me){var G=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?G+me:G):me=G,ne){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=me+L,ne={id:f++,callback:Z,priorityLevel:ne,startTime:me,expirationTime:L,sortIndex:-1},me>G?(ne.sortIndex=me,t(d,ne),r(u)===null&&ne===r(d)&&(y?(N(T),T=-1):y=!0,X(A,me-G))):(ne.sortIndex=L,t(u,ne),b||x||(b=!0,re(S))),ne},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(ne){var Z=m;return function(){var me=m;m=Z;try{return ne.apply(this,arguments)}finally{m=me}}}})(ry)),ry}var Z_;function e7(){return Z_||(Z_=1,ty.exports=ZL()),ty.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function t7(){if(eE)return ka;eE=1;var e=A2(),t=e7();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)n.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(c){return u.call(p,c)?!0:u.call(f,c)?!1:d.test(c)?p[c]=!0:(f[c]=!0,!1)}function x(c,h,g,w){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function b(c,h,g,w){if(h===null||typeof h>"u"||x(c,h,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,g,w,C,M,V){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=c,this.type=h,this.sanitizeURL=M,this.removeEmptyString=V}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];v[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function j(c,h,g,w){var C=v.hasOwnProperty(h)?v[h]:null;(C!==null?C.type!==0:w||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(b(h,g,C,w)&&(g=null),w||C===null?m(h)&&(g===null?c.removeAttribute(h):c.setAttribute(h,""+g)):C.mustUseProperty?c[C.propertyName]=g===null?C.type===3?!1:"":g:(h=C.attributeName,w=C.attributeNamespace,g===null?c.removeAttribute(h):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,w?c.setAttributeNS(w,h,g):c.setAttribute(h,g))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),ne=Symbol.iterator;function Z(c){return c===null||typeof c!="object"?null:(c=ne&&c[ne]||c["@@iterator"],typeof c=="function"?c:null)}var me=Object.assign,G;function L(c){if(G===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);G=h&&h[1]||""}return`
`+G+c}var ee=!1;function te(c,h){if(!c||ee)return"";ee=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Pe){var w=Pe}Reflect.construct(c,[],h)}else{try{h.call()}catch(Pe){w=Pe}c.call(h.prototype)}else{try{throw Error()}catch(Pe){w=Pe}c()}}catch(Pe){if(Pe&&w&&typeof Pe.stack=="string"){for(var C=Pe.stack.split(`
`),M=w.stack.split(`
`),V=C.length-1,ue=M.length-1;1<=V&&0<=ue&&C[V]!==M[ue];)ue--;for(;1<=V&&0<=ue;V--,ue--)if(C[V]!==M[ue]){if(V!==1||ue!==1)do if(V--,ue--,0>ue||C[V]!==M[ue]){var ye=`
`+C[V].replace(" at new "," at ");return c.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",c.displayName)),ye}while(1<=V&&0<=ue);break}}}finally{ee=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?L(c):""}function J(c){switch(c.tag){case 5:return L(c.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function he(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case _:return"Fragment";case E:return"Portal";case D:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case P:return(c.displayName||"Context")+".Consumer";case F:return(c._context.displayName||"Context")+".Provider";case I:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Y:return h=c.displayName||null,h!==null?h:he(c.type)||"Memo";case re:h=c._payload,c=c._init;try{return he(c(h))}catch{}}return null}function Se(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(h);case 8:return h===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Oe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function pe(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function xe(c){var h=pe(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),w=""+c[h];if(!c.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,M=g.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return C.call(this)},set:function(V){w=""+V,M.call(this,V)}}),Object.defineProperty(c,h,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(V){w=""+V},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Fe(c){c._valueTracker||(c._valueTracker=xe(c))}function O(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var g=h.getValue(),w="";return c&&(w=pe(c)?c.checked?"true":"false":c.value),c=w,c!==g?(h.setValue(c),!0):!1}function be(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function De(c,h){var g=h.checked;return me({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function qe(c,h){var g=h.defaultValue==null?"":h.defaultValue,w=h.checked!=null?h.checked:h.defaultChecked;g=Oe(h.value!=null?h.value:g),c._wrapperState={initialChecked:w,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function rt(c,h){h=h.checked,h!=null&&j(c,"checked",h,!1)}function Be(c,h){rt(c,h);var g=Oe(h.value),w=h.type;if(g!=null)w==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(w==="submit"||w==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?Xt(c,h.type,g):h.hasOwnProperty("defaultValue")&&Xt(c,h.type,Oe(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Je(c,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var w=h.type;if(!(w!=="submit"&&w!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,g||h===c.value||(c.value=h),c.defaultValue=h}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Xt(c,h,g){(h!=="number"||be(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var Ce=Array.isArray;function Me(c,h,g,w){if(c=c.options,h){h={};for(var C=0;C<g.length;C++)h["$"+g[C]]=!0;for(g=0;g<c.length;g++)C=h.hasOwnProperty("$"+c[g].value),c[g].selected!==C&&(c[g].selected=C),C&&w&&(c[g].defaultSelected=!0)}else{for(g=""+Oe(g),h=null,C=0;C<c.length;C++){if(c[C].value===g){c[C].selected=!0,w&&(c[C].defaultSelected=!0);return}h!==null||c[C].disabled||(h=c[C])}h!==null&&(h.selected=!0)}}function Pt(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return me({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function We(c,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(r(92));if(Ce(g)){if(1<g.length)throw Error(r(93));g=g[0]}h=g}h==null&&(h=""),g=h}c._wrapperState={initialValue:Oe(g)}}function ut(c,h){var g=Oe(h.value),w=Oe(h.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),h.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),w!=null&&(c.defaultValue=""+w)}function nt(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function qt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?qt(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var dt,ur=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,w,C){MSApp.execUnsafeLocalFunction(function(){return c(h,g,w,C)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(dt=dt||document.createElement("div"),dt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=dt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function xt(c,h){if(h){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=h;return}}c.textContent=h}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nr=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(c){Nr.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Qt[h]=Qt[c]})});function or(c,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||Qt.hasOwnProperty(c)&&Qt[c]?(""+h).trim():h+"px"}function kr(c,h){c=c.style;for(var g in h)if(h.hasOwnProperty(g)){var w=g.indexOf("--")===0,C=or(g,h[g],w);g==="float"&&(g="cssFloat"),w?c.setProperty(g,C):c[g]=C}}var _r=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(c,h){if(h){if(_r[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Mr(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ht=null;function Er(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ne=null,ze=null,it=null;function tt(c){if(c=Xu(c)){if(typeof Ne!="function")throw Error(r(280));var h=c.stateNode;h&&(h=Of(h),Ne(c.stateNode,c.type,h))}}function It(c){ze?it?it.push(c):it=[c]:ze=c}function Ue(){if(ze){var c=ze,h=it;if(it=ze=null,tt(c),h)for(c=0;c<h.length;c++)tt(h[c])}}function St(c,h){return c(h)}function Kt(){}var Qe=!1;function Ie(c,h,g){if(Qe)return c(h,g);Qe=!0;try{return St(c,h,g)}finally{Qe=!1,(ze!==null||it!==null)&&(Kt(),Ue())}}function wt(c,h){var g=c.stateNode;if(g===null)return null;var w=Of(g);if(w===null)return null;g=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var ft=!1;if(l)try{var je={};Object.defineProperty(je,"passive",{get:function(){ft=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{ft=!1}function ke(c,h,g,w,C,M,V,ue,ye){var Pe=Array.prototype.slice.call(arguments,3);try{h.apply(g,Pe)}catch(Ge){this.onError(Ge)}}var Le=!1,jt=null,W=!1,ae=null,Q={onError:function(c){Le=!0,jt=c}};function se(c,h,g,w,C,M,V,ue,ye){Le=!1,jt=null,ke.apply(Q,arguments)}function ie(c,h,g,w,C,M,V,ue,ye){if(se.apply(this,arguments),Le){if(Le){var Pe=jt;Le=!1,jt=null}else throw Error(r(198));W||(W=!0,ae=Pe)}}function oe(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function _e(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function H(c){if(oe(c)!==c)throw Error(r(188))}function R(c){var h=c.alternate;if(!h){if(h=oe(c),h===null)throw Error(r(188));return h!==c?null:c}for(var g=c,w=h;;){var C=g.return;if(C===null)break;var M=C.alternate;if(M===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===M.child){for(M=C.child;M;){if(M===g)return H(C),c;if(M===w)return H(C),h;M=M.sibling}throw Error(r(188))}if(g.return!==w.return)g=C,w=M;else{for(var V=!1,ue=C.child;ue;){if(ue===g){V=!0,g=C,w=M;break}if(ue===w){V=!0,w=C,g=M;break}ue=ue.sibling}if(!V){for(ue=M.child;ue;){if(ue===g){V=!0,g=M,w=C;break}if(ue===w){V=!0,w=M,g=C;break}ue=ue.sibling}if(!V)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:h}function q(c){return c=R(c),c!==null?K(c):null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=K(c);if(h!==null)return h;c=c.sibling}return null}var le=t.unstable_scheduleCallback,ce=t.unstable_cancelCallback,fe=t.unstable_shouldYield,ge=t.unstable_requestPaint,ve=t.unstable_now,Te=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,st=t.unstable_UserBlockingPriority,He=t.unstable_NormalPriority,Ot=t.unstable_LowPriority,ot=t.unstable_IdlePriority,pt=null,Ct=null;function Nt(c){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(pt,c,void 0,(c.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:$s,ar=Math.log,Wt=Math.LN2;function $s(c){return c>>>=0,c===0?32:31-(ar(c)/Wt|0)|0}var oi=64,pf=4194304;function Pu(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function mf(c,h){var g=c.pendingLanes;if(g===0)return 0;var w=0,C=c.suspendedLanes,M=c.pingedLanes,V=g&268435455;if(V!==0){var ue=V&~C;ue!==0?w=Pu(ue):(M&=V,M!==0&&(w=Pu(M)))}else V=g&~C,V!==0?w=Pu(V):M!==0&&(w=Pu(M));if(w===0)return 0;if(h!==0&&h!==w&&(h&C)===0&&(C=w&-w,M=h&-h,C>=M||C===16&&(M&4194240)!==0))return h;if((w&4)!==0&&(w|=g&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=w;0<h;)g=31-_t(h),C=1<<g,w|=c[g],h&=~C;return w}function p$(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m$(c,h){for(var g=c.suspendedLanes,w=c.pingedLanes,C=c.expirationTimes,M=c.pendingLanes;0<M;){var V=31-_t(M),ue=1<<V,ye=C[V];ye===-1?((ue&g)===0||(ue&w)!==0)&&(C[V]=p$(ue,h)):ye<=h&&(c.expiredLanes|=ue),M&=~ue}}function vg(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Sk(){var c=oi;return oi<<=1,(oi&4194240)===0&&(oi=64),c}function bg(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function Iu(c,h,g){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-_t(h),c[h]=g}function g$(c,h){var g=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<g;){var C=31-_t(g),M=1<<C;h[C]=0,w[C]=-1,c[C]=-1,g&=~M}}function wg(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var w=31-_t(g),C=1<<w;C&h|c[w]&h&&(c[w]|=h),g&=~C}}var br=0;function _k(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Ek,jg,Ck,Tk,Ak,Ng=!1,gf=[],qi=null,zi=null,Ki=null,Du=new Map,Mu=new Map,Wi=[],x$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ok(c,h){switch(c){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Du.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(h.pointerId)}}function Ru(c,h,g,w,C,M){return c===null||c.nativeEvent!==M?(c={blockedOn:h,domEventName:g,eventSystemFlags:w,nativeEvent:M,targetContainers:[C]},h!==null&&(h=Xu(h),h!==null&&jg(h)),c):(c.eventSystemFlags|=w,h=c.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),c)}function y$(c,h,g,w,C){switch(h){case"focusin":return qi=Ru(qi,c,h,g,w,C),!0;case"dragenter":return zi=Ru(zi,c,h,g,w,C),!0;case"mouseover":return Ki=Ru(Ki,c,h,g,w,C),!0;case"pointerover":var M=C.pointerId;return Du.set(M,Ru(Du.get(M)||null,c,h,g,w,C)),!0;case"gotpointercapture":return M=C.pointerId,Mu.set(M,Ru(Mu.get(M)||null,c,h,g,w,C)),!0}return!1}function Pk(c){var h=Do(c.target);if(h!==null){var g=oe(h);if(g!==null){if(h=g.tag,h===13){if(h=_e(g),h!==null){c.blockedOn=h,Ak(c.priority,function(){Ck(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function xf(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var g=Sg(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var w=new g.constructor(g.type,g);ht=w,g.target.dispatchEvent(w),ht=null}else return h=Xu(g),h!==null&&jg(h),c.blockedOn=g,!1;h.shift()}return!0}function Ik(c,h,g){xf(c)&&g.delete(h)}function v$(){Ng=!1,qi!==null&&xf(qi)&&(qi=null),zi!==null&&xf(zi)&&(zi=null),Ki!==null&&xf(Ki)&&(Ki=null),Du.forEach(Ik),Mu.forEach(Ik)}function Fu(c,h){c.blockedOn===h&&(c.blockedOn=null,Ng||(Ng=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,v$)))}function $u(c){function h(C){return Fu(C,c)}if(0<gf.length){Fu(gf[0],c);for(var g=1;g<gf.length;g++){var w=gf[g];w.blockedOn===c&&(w.blockedOn=null)}}for(qi!==null&&Fu(qi,c),zi!==null&&Fu(zi,c),Ki!==null&&Fu(Ki,c),Du.forEach(h),Mu.forEach(h),g=0;g<Wi.length;g++)w=Wi[g],w.blockedOn===c&&(w.blockedOn=null);for(;0<Wi.length&&(g=Wi[0],g.blockedOn===null);)Pk(g),g.blockedOn===null&&Wi.shift()}var Ll=A.ReactCurrentBatchConfig,yf=!0;function b$(c,h,g,w){var C=br,M=Ll.transition;Ll.transition=null;try{br=1,kg(c,h,g,w)}finally{br=C,Ll.transition=M}}function w$(c,h,g,w){var C=br,M=Ll.transition;Ll.transition=null;try{br=4,kg(c,h,g,w)}finally{br=C,Ll.transition=M}}function kg(c,h,g,w){if(yf){var C=Sg(c,h,g,w);if(C===null)Hg(c,h,w,vf,g),Ok(c,w);else if(y$(C,c,h,g,w))w.stopPropagation();else if(Ok(c,w),h&4&&-1<x$.indexOf(c)){for(;C!==null;){var M=Xu(C);if(M!==null&&Ek(M),M=Sg(c,h,g,w),M===null&&Hg(c,h,w,vf,g),M===C)break;C=M}C!==null&&w.stopPropagation()}else Hg(c,h,w,null,g)}}var vf=null;function Sg(c,h,g,w){if(vf=null,c=Er(w),c=Do(c),c!==null)if(h=oe(c),h===null)c=null;else if(g=h.tag,g===13){if(c=_e(h),c!==null)return c;c=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return vf=c,null}function Dk(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Te()){case Re:return 1;case st:return 4;case He:case Ot:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Vi=null,_g=null,bf=null;function Mk(){if(bf)return bf;var c,h=_g,g=h.length,w,C="value"in Vi?Vi.value:Vi.textContent,M=C.length;for(c=0;c<g&&h[c]===C[c];c++);var V=g-c;for(w=1;w<=V&&h[g-w]===C[M-w];w++);return bf=C.slice(c,1<w?1-w:void 0)}function wf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function jf(){return!0}function Rk(){return!1}function Ta(c){function h(g,w,C,M,V){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=M,this.target=V,this.currentTarget=null;for(var ue in c)c.hasOwnProperty(ue)&&(g=c[ue],this[ue]=g?g(M):M[ue]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?jf:Rk,this.isPropagationStopped=Rk,this}return me(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),h}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eg=Ta(Bl),Lu=me({},Bl,{view:0,detail:0}),j$=Ta(Lu),Cg,Tg,Bu,Nf=me({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Og,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Bu&&(Bu&&c.type==="mousemove"?(Cg=c.screenX-Bu.screenX,Tg=c.screenY-Bu.screenY):Tg=Cg=0,Bu=c),Cg)},movementY:function(c){return"movementY"in c?c.movementY:Tg}}),Fk=Ta(Nf),N$=me({},Nf,{dataTransfer:0}),k$=Ta(N$),S$=me({},Lu,{relatedTarget:0}),Ag=Ta(S$),_$=me({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),E$=Ta(_$),C$=me({},Bl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),T$=Ta(C$),A$=me({},Bl,{data:0}),$k=Ta(A$),O$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D$(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=I$[c])?!!h[c]:!1}function Og(){return D$}var M$=me({},Lu,{key:function(c){if(c.key){var h=O$[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=wf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?P$[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Og,charCode:function(c){return c.type==="keypress"?wf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?wf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),R$=Ta(M$),F$=me({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lk=Ta(F$),$$=me({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Og}),L$=Ta($$),B$=me({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),U$=Ta(B$),H$=me({},Nf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),q$=Ta(H$),z$=[9,13,27,32],Pg=l&&"CompositionEvent"in window,Uu=null;l&&"documentMode"in document&&(Uu=document.documentMode);var K$=l&&"TextEvent"in window&&!Uu,Bk=l&&(!Pg||Uu&&8<Uu&&11>=Uu),Uk=" ",Hk=!1;function qk(c,h){switch(c){case"keyup":return z$.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zk(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Ul=!1;function W$(c,h){switch(c){case"compositionend":return zk(h);case"keypress":return h.which!==32?null:(Hk=!0,Uk);case"textInput":return c=h.data,c===Uk&&Hk?null:c;default:return null}}function V$(c,h){if(Ul)return c==="compositionend"||!Pg&&qk(c,h)?(c=Mk(),bf=_g=Vi=null,Ul=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Bk&&h.locale!=="ko"?null:h.data;default:return null}}var G$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kk(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!G$[c.type]:h==="textarea"}function Wk(c,h,g,w){It(w),h=Cf(h,"onChange"),0<h.length&&(g=new Eg("onChange","change",null,g,w),c.push({event:g,listeners:h}))}var Hu=null,qu=null;function Y$(c){uS(c,0)}function kf(c){var h=Wl(c);if(O(h))return c}function X$(c,h){if(c==="change")return h}var Vk=!1;if(l){var Ig;if(l){var Dg="oninput"in document;if(!Dg){var Gk=document.createElement("div");Gk.setAttribute("oninput","return;"),Dg=typeof Gk.oninput=="function"}Ig=Dg}else Ig=!1;Vk=Ig&&(!document.documentMode||9<document.documentMode)}function Yk(){Hu&&(Hu.detachEvent("onpropertychange",Xk),qu=Hu=null)}function Xk(c){if(c.propertyName==="value"&&kf(qu)){var h=[];Wk(h,qu,c,Er(c)),Ie(Y$,h)}}function J$(c,h,g){c==="focusin"?(Yk(),Hu=h,qu=g,Hu.attachEvent("onpropertychange",Xk)):c==="focusout"&&Yk()}function Q$(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return kf(qu)}function Z$(c,h){if(c==="click")return kf(h)}function eL(c,h){if(c==="input"||c==="change")return kf(h)}function tL(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var fs=typeof Object.is=="function"?Object.is:tL;function zu(c,h){if(fs(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),w=Object.keys(h);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!u.call(h,C)||!fs(c[C],h[C]))return!1}return!0}function Jk(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Qk(c,h){var g=Jk(c);c=0;for(var w;g;){if(g.nodeType===3){if(w=c+g.textContent.length,c<=h&&w>=h)return{node:g,offset:h-c};c=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Jk(g)}}function Zk(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?Zk(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function eS(){for(var c=window,h=be();h instanceof c.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)c=h.contentWindow;else break;h=be(c.document)}return h}function Mg(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function rL(c){var h=eS(),g=c.focusedElem,w=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&Zk(g.ownerDocument.documentElement,g)){if(w!==null&&Mg(g)){if(h=w.start,c=w.end,c===void 0&&(c=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(c,g.value.length);else if(c=(h=g.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var C=g.textContent.length,M=Math.min(w.start,C);w=w.end===void 0?M:Math.min(w.end,C),!c.extend&&M>w&&(C=w,w=M,M=C),C=Qk(g,M);var V=Qk(g,w);C&&V&&(c.rangeCount!==1||c.anchorNode!==C.node||c.anchorOffset!==C.offset||c.focusNode!==V.node||c.focusOffset!==V.offset)&&(h=h.createRange(),h.setStart(C.node,C.offset),c.removeAllRanges(),M>w?(c.addRange(h),c.extend(V.node,V.offset)):(h.setEnd(V.node,V.offset),c.addRange(h)))}}for(h=[],c=g;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)c=h[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var nL=l&&"documentMode"in document&&11>=document.documentMode,Hl=null,Rg=null,Ku=null,Fg=!1;function tS(c,h,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Fg||Hl==null||Hl!==be(w)||(w=Hl,"selectionStart"in w&&Mg(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ku&&zu(Ku,w)||(Ku=w,w=Cf(Rg,"onSelect"),0<w.length&&(h=new Eg("onSelect","select",null,h,g),c.push({event:h,listeners:w}),h.target=Hl)))}function Sf(c,h){var g={};return g[c.toLowerCase()]=h.toLowerCase(),g["Webkit"+c]="webkit"+h,g["Moz"+c]="moz"+h,g}var ql={animationend:Sf("Animation","AnimationEnd"),animationiteration:Sf("Animation","AnimationIteration"),animationstart:Sf("Animation","AnimationStart"),transitionend:Sf("Transition","TransitionEnd")},$g={},rS={};l&&(rS=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function _f(c){if($g[c])return $g[c];if(!ql[c])return c;var h=ql[c],g;for(g in h)if(h.hasOwnProperty(g)&&g in rS)return $g[c]=h[g];return c}var nS=_f("animationend"),aS=_f("animationiteration"),sS=_f("animationstart"),iS=_f("transitionend"),oS=new Map,lS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(c,h){oS.set(c,h),i(h,[c])}for(var Lg=0;Lg<lS.length;Lg++){var Bg=lS[Lg],aL=Bg.toLowerCase(),sL=Bg[0].toUpperCase()+Bg.slice(1);Gi(aL,"on"+sL)}Gi(nS,"onAnimationEnd"),Gi(aS,"onAnimationIteration"),Gi(sS,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(iS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wu));function cS(c,h,g){var w=c.type||"unknown-event";c.currentTarget=g,ie(w,h,void 0,c),c.currentTarget=null}function uS(c,h){h=(h&4)!==0;for(var g=0;g<c.length;g++){var w=c[g],C=w.event;w=w.listeners;e:{var M=void 0;if(h)for(var V=w.length-1;0<=V;V--){var ue=w[V],ye=ue.instance,Pe=ue.currentTarget;if(ue=ue.listener,ye!==M&&C.isPropagationStopped())break e;cS(C,ue,Pe),M=ye}else for(V=0;V<w.length;V++){if(ue=w[V],ye=ue.instance,Pe=ue.currentTarget,ue=ue.listener,ye!==M&&C.isPropagationStopped())break e;cS(C,ue,Pe),M=ye}}}if(W)throw c=ae,W=!1,ae=null,c}function Rr(c,h){var g=h[Gg];g===void 0&&(g=h[Gg]=new Set);var w=c+"__bubble";g.has(w)||(dS(h,c,2,!1),g.add(w))}function Ug(c,h,g){var w=0;h&&(w|=4),dS(g,c,w,h)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function Vu(c){if(!c[Ef]){c[Ef]=!0,n.forEach(function(g){g!=="selectionchange"&&(iL.has(g)||Ug(g,!1,c),Ug(g,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Ef]||(h[Ef]=!0,Ug("selectionchange",!1,h))}}function dS(c,h,g,w){switch(Dk(h)){case 1:var C=b$;break;case 4:C=w$;break;default:C=kg}g=C.bind(null,h,g,c),C=void 0,!ft||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),w?C!==void 0?c.addEventListener(h,g,{capture:!0,passive:C}):c.addEventListener(h,g,!0):C!==void 0?c.addEventListener(h,g,{passive:C}):c.addEventListener(h,g,!1)}function Hg(c,h,g,w,C){var M=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var V=w.tag;if(V===3||V===4){var ue=w.stateNode.containerInfo;if(ue===C||ue.nodeType===8&&ue.parentNode===C)break;if(V===4)for(V=w.return;V!==null;){var ye=V.tag;if((ye===3||ye===4)&&(ye=V.stateNode.containerInfo,ye===C||ye.nodeType===8&&ye.parentNode===C))return;V=V.return}for(;ue!==null;){if(V=Do(ue),V===null)return;if(ye=V.tag,ye===5||ye===6){w=M=V;continue e}ue=ue.parentNode}}w=w.return}Ie(function(){var Pe=M,Ge=Er(g),Ye=[];e:{var Ve=oS.get(c);if(Ve!==void 0){var lt=Eg,yt=c;switch(c){case"keypress":if(wf(g)===0)break e;case"keydown":case"keyup":lt=R$;break;case"focusin":yt="focus",lt=Ag;break;case"focusout":yt="blur",lt=Ag;break;case"beforeblur":case"afterblur":lt=Ag;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Fk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=k$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=L$;break;case nS:case aS:case sS:lt=E$;break;case iS:lt=U$;break;case"scroll":lt=j$;break;case"wheel":lt=q$;break;case"copy":case"cut":case"paste":lt=T$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Lk}var kt=(h&4)!==0,Xr=!kt&&c==="scroll",Ee=kt?Ve!==null?Ve+"Capture":null:Ve;kt=[];for(var we=Pe,Ae;we!==null;){Ae=we;var Ze=Ae.stateNode;if(Ae.tag===5&&Ze!==null&&(Ae=Ze,Ee!==null&&(Ze=wt(we,Ee),Ze!=null&&kt.push(Gu(we,Ze,Ae)))),Xr)break;we=we.return}0<kt.length&&(Ve=new lt(Ve,yt,null,g,Ge),Ye.push({event:Ve,listeners:kt}))}}if((h&7)===0){e:{if(Ve=c==="mouseover"||c==="pointerover",lt=c==="mouseout"||c==="pointerout",Ve&&g!==ht&&(yt=g.relatedTarget||g.fromElement)&&(Do(yt)||yt[li]))break e;if((lt||Ve)&&(Ve=Ge.window===Ge?Ge:(Ve=Ge.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,lt?(yt=g.relatedTarget||g.toElement,lt=Pe,yt=yt?Do(yt):null,yt!==null&&(Xr=oe(yt),yt!==Xr||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(lt=null,yt=Pe),lt!==yt)){if(kt=Fk,Ze="onMouseLeave",Ee="onMouseEnter",we="mouse",(c==="pointerout"||c==="pointerover")&&(kt=Lk,Ze="onPointerLeave",Ee="onPointerEnter",we="pointer"),Xr=lt==null?Ve:Wl(lt),Ae=yt==null?Ve:Wl(yt),Ve=new kt(Ze,we+"leave",lt,g,Ge),Ve.target=Xr,Ve.relatedTarget=Ae,Ze=null,Do(Ge)===Pe&&(kt=new kt(Ee,we+"enter",yt,g,Ge),kt.target=Ae,kt.relatedTarget=Xr,Ze=kt),Xr=Ze,lt&&yt)t:{for(kt=lt,Ee=yt,we=0,Ae=kt;Ae;Ae=zl(Ae))we++;for(Ae=0,Ze=Ee;Ze;Ze=zl(Ze))Ae++;for(;0<we-Ae;)kt=zl(kt),we--;for(;0<Ae-we;)Ee=zl(Ee),Ae--;for(;we--;){if(kt===Ee||Ee!==null&&kt===Ee.alternate)break t;kt=zl(kt),Ee=zl(Ee)}kt=null}else kt=null;lt!==null&&hS(Ye,Ve,lt,kt,!1),yt!==null&&Xr!==null&&hS(Ye,Xr,yt,kt,!0)}}e:{if(Ve=Pe?Wl(Pe):window,lt=Ve.nodeName&&Ve.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Ve.type==="file")var Et=X$;else if(Kk(Ve))if(Vk)Et=eL;else{Et=Q$;var Dt=J$}else(lt=Ve.nodeName)&&lt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Et=Z$);if(Et&&(Et=Et(c,Pe))){Wk(Ye,Et,g,Ge);break e}Dt&&Dt(c,Ve,Pe),c==="focusout"&&(Dt=Ve._wrapperState)&&Dt.controlled&&Ve.type==="number"&&Xt(Ve,"number",Ve.value)}switch(Dt=Pe?Wl(Pe):window,c){case"focusin":(Kk(Dt)||Dt.contentEditable==="true")&&(Hl=Dt,Rg=Pe,Ku=null);break;case"focusout":Ku=Rg=Hl=null;break;case"mousedown":Fg=!0;break;case"contextmenu":case"mouseup":case"dragend":Fg=!1,tS(Ye,g,Ge);break;case"selectionchange":if(nL)break;case"keydown":case"keyup":tS(Ye,g,Ge)}var Mt;if(Pg)e:{switch(c){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else Ul?qk(c,g)&&(Ut="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(Ut="onCompositionStart");Ut&&(Bk&&g.locale!=="ko"&&(Ul||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Ul&&(Mt=Mk()):(Vi=Ge,_g="value"in Vi?Vi.value:Vi.textContent,Ul=!0)),Dt=Cf(Pe,Ut),0<Dt.length&&(Ut=new $k(Ut,c,null,g,Ge),Ye.push({event:Ut,listeners:Dt}),Mt?Ut.data=Mt:(Mt=zk(g),Mt!==null&&(Ut.data=Mt)))),(Mt=K$?W$(c,g):V$(c,g))&&(Pe=Cf(Pe,"onBeforeInput"),0<Pe.length&&(Ge=new $k("onBeforeInput","beforeinput",null,g,Ge),Ye.push({event:Ge,listeners:Pe}),Ge.data=Mt))}uS(Ye,h)})}function Gu(c,h,g){return{instance:c,listener:h,currentTarget:g}}function Cf(c,h){for(var g=h+"Capture",w=[];c!==null;){var C=c,M=C.stateNode;C.tag===5&&M!==null&&(C=M,M=wt(c,g),M!=null&&w.unshift(Gu(c,M,C)),M=wt(c,h),M!=null&&w.push(Gu(c,M,C))),c=c.return}return w}function zl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function hS(c,h,g,w,C){for(var M=h._reactName,V=[];g!==null&&g!==w;){var ue=g,ye=ue.alternate,Pe=ue.stateNode;if(ye!==null&&ye===w)break;ue.tag===5&&Pe!==null&&(ue=Pe,C?(ye=wt(g,M),ye!=null&&V.unshift(Gu(g,ye,ue))):C||(ye=wt(g,M),ye!=null&&V.push(Gu(g,ye,ue)))),g=g.return}V.length!==0&&c.push({event:h,listeners:V})}var oL=/\r\n?/g,lL=/\u0000|\uFFFD/g;function fS(c){return(typeof c=="string"?c:""+c).replace(oL,`
`).replace(lL,"")}function Tf(c,h,g){if(h=fS(h),fS(c)!==h&&g)throw Error(r(425))}function Af(){}var qg=null,zg=null;function Kg(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Wg=typeof setTimeout=="function"?setTimeout:void 0,cL=typeof clearTimeout=="function"?clearTimeout:void 0,pS=typeof Promise=="function"?Promise:void 0,uL=typeof queueMicrotask=="function"?queueMicrotask:typeof pS<"u"?function(c){return pS.resolve(null).then(c).catch(dL)}:Wg;function dL(c){setTimeout(function(){throw c})}function Vg(c,h){var g=h,w=0;do{var C=g.nextSibling;if(c.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(w===0){c.removeChild(C),$u(h);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=C}while(g);$u(h)}function Yi(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function mS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return c;h--}else g==="/$"&&h++}c=c.previousSibling}return null}var Kl=Math.random().toString(36).slice(2),Ls="__reactFiber$"+Kl,Yu="__reactProps$"+Kl,li="__reactContainer$"+Kl,Gg="__reactEvents$"+Kl,hL="__reactListeners$"+Kl,fL="__reactHandles$"+Kl;function Do(c){var h=c[Ls];if(h)return h;for(var g=c.parentNode;g;){if(h=g[li]||g[Ls]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(c=mS(c);c!==null;){if(g=c[Ls])return g;c=mS(c)}return h}c=g,g=c.parentNode}return null}function Xu(c){return c=c[Ls]||c[li],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Wl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Of(c){return c[Yu]||null}var Yg=[],Vl=-1;function Xi(c){return{current:c}}function Fr(c){0>Vl||(c.current=Yg[Vl],Yg[Vl]=null,Vl--)}function Cr(c,h){Vl++,Yg[Vl]=c.current,c.current=h}var Ji={},Wn=Xi(Ji),va=Xi(!1),Mo=Ji;function Gl(c,h){var g=c.type.contextTypes;if(!g)return Ji;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===h)return w.__reactInternalMemoizedMaskedChildContext;var C={},M;for(M in g)C[M]=h[M];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=C),C}function ba(c){return c=c.childContextTypes,c!=null}function Pf(){Fr(va),Fr(Wn)}function gS(c,h,g){if(Wn.current!==Ji)throw Error(r(168));Cr(Wn,h),Cr(va,g)}function xS(c,h,g){var w=c.stateNode;if(h=h.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var C in w)if(!(C in h))throw Error(r(108,Se(c)||"Unknown",C));return me({},g,w)}function If(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ji,Mo=Wn.current,Cr(Wn,c),Cr(va,va.current),!0}function yS(c,h,g){var w=c.stateNode;if(!w)throw Error(r(169));g?(c=xS(c,h,Mo),w.__reactInternalMemoizedMergedChildContext=c,Fr(va),Fr(Wn),Cr(Wn,c)):Fr(va),Cr(va,g)}var ci=null,Df=!1,Xg=!1;function vS(c){ci===null?ci=[c]:ci.push(c)}function pL(c){Df=!0,vS(c)}function Qi(){if(!Xg&&ci!==null){Xg=!0;var c=0,h=br;try{var g=ci;for(br=1;c<g.length;c++){var w=g[c];do w=w(!0);while(w!==null)}ci=null,Df=!1}catch(C){throw ci!==null&&(ci=ci.slice(c+1)),le(Re,Qi),C}finally{br=h,Xg=!1}}return null}var Yl=[],Xl=0,Mf=null,Rf=0,Wa=[],Va=0,Ro=null,ui=1,di="";function Fo(c,h){Yl[Xl++]=Rf,Yl[Xl++]=Mf,Mf=c,Rf=h}function bS(c,h,g){Wa[Va++]=ui,Wa[Va++]=di,Wa[Va++]=Ro,Ro=c;var w=ui;c=di;var C=32-_t(w)-1;w&=~(1<<C),g+=1;var M=32-_t(h)+C;if(30<M){var V=C-C%5;M=(w&(1<<V)-1).toString(32),w>>=V,C-=V,ui=1<<32-_t(h)+C|g<<C|w,di=M+c}else ui=1<<M|g<<C|w,di=c}function Jg(c){c.return!==null&&(Fo(c,1),bS(c,1,0))}function Qg(c){for(;c===Mf;)Mf=Yl[--Xl],Yl[Xl]=null,Rf=Yl[--Xl],Yl[Xl]=null;for(;c===Ro;)Ro=Wa[--Va],Wa[Va]=null,di=Wa[--Va],Wa[Va]=null,ui=Wa[--Va],Wa[Va]=null}var Aa=null,Oa=null,Lr=!1,ps=null;function wS(c,h){var g=Ja(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=c,h=c.deletions,h===null?(c.deletions=[g],c.flags|=16):h.push(g)}function jS(c,h){switch(c.tag){case 5:var g=c.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Aa=c,Oa=Yi(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Aa=c,Oa=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=Ro!==null?{id:ui,overflow:di}:null,c.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Ja(18,null,null,0),g.stateNode=h,g.return=c,c.child=g,Aa=c,Oa=null,!0):!1;default:return!1}}function Zg(c){return(c.mode&1)!==0&&(c.flags&128)===0}function ex(c){if(Lr){var h=Oa;if(h){var g=h;if(!jS(c,h)){if(Zg(c))throw Error(r(418));h=Yi(g.nextSibling);var w=Aa;h&&jS(c,h)?wS(w,g):(c.flags=c.flags&-4097|2,Lr=!1,Aa=c)}}else{if(Zg(c))throw Error(r(418));c.flags=c.flags&-4097|2,Lr=!1,Aa=c}}}function NS(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Aa=c}function Ff(c){if(c!==Aa)return!1;if(!Lr)return NS(c),Lr=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!Kg(c.type,c.memoizedProps)),h&&(h=Oa)){if(Zg(c))throw kS(),Error(r(418));for(;h;)wS(c,h),h=Yi(h.nextSibling)}if(NS(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(h===0){Oa=Yi(c.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}c=c.nextSibling}Oa=null}}else Oa=Aa?Yi(c.stateNode.nextSibling):null;return!0}function kS(){for(var c=Oa;c;)c=Yi(c.nextSibling)}function Jl(){Oa=Aa=null,Lr=!1}function tx(c){ps===null?ps=[c]:ps.push(c)}var mL=A.ReactCurrentBatchConfig;function Ju(c,h,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var w=g.stateNode}if(!w)throw Error(r(147,c));var C=w,M=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===M?h.ref:(h=function(V){var ue=C.refs;V===null?delete ue[M]:ue[M]=V},h._stringRef=M,h)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function $f(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function SS(c){var h=c._init;return h(c._payload)}function _S(c){function h(Ee,we){if(c){var Ae=Ee.deletions;Ae===null?(Ee.deletions=[we],Ee.flags|=16):Ae.push(we)}}function g(Ee,we){if(!c)return null;for(;we!==null;)h(Ee,we),we=we.sibling;return null}function w(Ee,we){for(Ee=new Map;we!==null;)we.key!==null?Ee.set(we.key,we):Ee.set(we.index,we),we=we.sibling;return Ee}function C(Ee,we){return Ee=io(Ee,we),Ee.index=0,Ee.sibling=null,Ee}function M(Ee,we,Ae){return Ee.index=Ae,c?(Ae=Ee.alternate,Ae!==null?(Ae=Ae.index,Ae<we?(Ee.flags|=2,we):Ae):(Ee.flags|=2,we)):(Ee.flags|=1048576,we)}function V(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ue(Ee,we,Ae,Ze){return we===null||we.tag!==6?(we=Wx(Ae,Ee.mode,Ze),we.return=Ee,we):(we=C(we,Ae),we.return=Ee,we)}function ye(Ee,we,Ae,Ze){var Et=Ae.type;return Et===_?Ge(Ee,we,Ae.props.children,Ze,Ae.key):we!==null&&(we.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===re&&SS(Et)===we.type)?(Ze=C(we,Ae.props),Ze.ref=Ju(Ee,we,Ae),Ze.return=Ee,Ze):(Ze=l0(Ae.type,Ae.key,Ae.props,null,Ee.mode,Ze),Ze.ref=Ju(Ee,we,Ae),Ze.return=Ee,Ze)}function Pe(Ee,we,Ae,Ze){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ae.containerInfo||we.stateNode.implementation!==Ae.implementation?(we=Vx(Ae,Ee.mode,Ze),we.return=Ee,we):(we=C(we,Ae.children||[]),we.return=Ee,we)}function Ge(Ee,we,Ae,Ze,Et){return we===null||we.tag!==7?(we=Ko(Ae,Ee.mode,Ze,Et),we.return=Ee,we):(we=C(we,Ae),we.return=Ee,we)}function Ye(Ee,we,Ae){if(typeof we=="string"&&we!==""||typeof we=="number")return we=Wx(""+we,Ee.mode,Ae),we.return=Ee,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case S:return Ae=l0(we.type,we.key,we.props,null,Ee.mode,Ae),Ae.ref=Ju(Ee,null,we),Ae.return=Ee,Ae;case E:return we=Vx(we,Ee.mode,Ae),we.return=Ee,we;case re:var Ze=we._init;return Ye(Ee,Ze(we._payload),Ae)}if(Ce(we)||Z(we))return we=Ko(we,Ee.mode,Ae,null),we.return=Ee,we;$f(Ee,we)}return null}function Ve(Ee,we,Ae,Ze){var Et=we!==null?we.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Et!==null?null:ue(Ee,we,""+Ae,Ze);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:return Ae.key===Et?ye(Ee,we,Ae,Ze):null;case E:return Ae.key===Et?Pe(Ee,we,Ae,Ze):null;case re:return Et=Ae._init,Ve(Ee,we,Et(Ae._payload),Ze)}if(Ce(Ae)||Z(Ae))return Et!==null?null:Ge(Ee,we,Ae,Ze,null);$f(Ee,Ae)}return null}function lt(Ee,we,Ae,Ze,Et){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ee=Ee.get(Ae)||null,ue(we,Ee,""+Ze,Et);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case S:return Ee=Ee.get(Ze.key===null?Ae:Ze.key)||null,ye(we,Ee,Ze,Et);case E:return Ee=Ee.get(Ze.key===null?Ae:Ze.key)||null,Pe(we,Ee,Ze,Et);case re:var Dt=Ze._init;return lt(Ee,we,Ae,Dt(Ze._payload),Et)}if(Ce(Ze)||Z(Ze))return Ee=Ee.get(Ae)||null,Ge(we,Ee,Ze,Et,null);$f(we,Ze)}return null}function yt(Ee,we,Ae,Ze){for(var Et=null,Dt=null,Mt=we,Ut=we=0,_n=null;Mt!==null&&Ut<Ae.length;Ut++){Mt.index>Ut?(_n=Mt,Mt=null):_n=Mt.sibling;var fr=Ve(Ee,Mt,Ae[Ut],Ze);if(fr===null){Mt===null&&(Mt=_n);break}c&&Mt&&fr.alternate===null&&h(Ee,Mt),we=M(fr,we,Ut),Dt===null?Et=fr:Dt.sibling=fr,Dt=fr,Mt=_n}if(Ut===Ae.length)return g(Ee,Mt),Lr&&Fo(Ee,Ut),Et;if(Mt===null){for(;Ut<Ae.length;Ut++)Mt=Ye(Ee,Ae[Ut],Ze),Mt!==null&&(we=M(Mt,we,Ut),Dt===null?Et=Mt:Dt.sibling=Mt,Dt=Mt);return Lr&&Fo(Ee,Ut),Et}for(Mt=w(Ee,Mt);Ut<Ae.length;Ut++)_n=lt(Mt,Ee,Ut,Ae[Ut],Ze),_n!==null&&(c&&_n.alternate!==null&&Mt.delete(_n.key===null?Ut:_n.key),we=M(_n,we,Ut),Dt===null?Et=_n:Dt.sibling=_n,Dt=_n);return c&&Mt.forEach(function(oo){return h(Ee,oo)}),Lr&&Fo(Ee,Ut),Et}function kt(Ee,we,Ae,Ze){var Et=Z(Ae);if(typeof Et!="function")throw Error(r(150));if(Ae=Et.call(Ae),Ae==null)throw Error(r(151));for(var Dt=Et=null,Mt=we,Ut=we=0,_n=null,fr=Ae.next();Mt!==null&&!fr.done;Ut++,fr=Ae.next()){Mt.index>Ut?(_n=Mt,Mt=null):_n=Mt.sibling;var oo=Ve(Ee,Mt,fr.value,Ze);if(oo===null){Mt===null&&(Mt=_n);break}c&&Mt&&oo.alternate===null&&h(Ee,Mt),we=M(oo,we,Ut),Dt===null?Et=oo:Dt.sibling=oo,Dt=oo,Mt=_n}if(fr.done)return g(Ee,Mt),Lr&&Fo(Ee,Ut),Et;if(Mt===null){for(;!fr.done;Ut++,fr=Ae.next())fr=Ye(Ee,fr.value,Ze),fr!==null&&(we=M(fr,we,Ut),Dt===null?Et=fr:Dt.sibling=fr,Dt=fr);return Lr&&Fo(Ee,Ut),Et}for(Mt=w(Ee,Mt);!fr.done;Ut++,fr=Ae.next())fr=lt(Mt,Ee,Ut,fr.value,Ze),fr!==null&&(c&&fr.alternate!==null&&Mt.delete(fr.key===null?Ut:fr.key),we=M(fr,we,Ut),Dt===null?Et=fr:Dt.sibling=fr,Dt=fr);return c&&Mt.forEach(function(GL){return h(Ee,GL)}),Lr&&Fo(Ee,Ut),Et}function Xr(Ee,we,Ae,Ze){if(typeof Ae=="object"&&Ae!==null&&Ae.type===_&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:e:{for(var Et=Ae.key,Dt=we;Dt!==null;){if(Dt.key===Et){if(Et=Ae.type,Et===_){if(Dt.tag===7){g(Ee,Dt.sibling),we=C(Dt,Ae.props.children),we.return=Ee,Ee=we;break e}}else if(Dt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===re&&SS(Et)===Dt.type){g(Ee,Dt.sibling),we=C(Dt,Ae.props),we.ref=Ju(Ee,Dt,Ae),we.return=Ee,Ee=we;break e}g(Ee,Dt);break}else h(Ee,Dt);Dt=Dt.sibling}Ae.type===_?(we=Ko(Ae.props.children,Ee.mode,Ze,Ae.key),we.return=Ee,Ee=we):(Ze=l0(Ae.type,Ae.key,Ae.props,null,Ee.mode,Ze),Ze.ref=Ju(Ee,we,Ae),Ze.return=Ee,Ee=Ze)}return V(Ee);case E:e:{for(Dt=Ae.key;we!==null;){if(we.key===Dt)if(we.tag===4&&we.stateNode.containerInfo===Ae.containerInfo&&we.stateNode.implementation===Ae.implementation){g(Ee,we.sibling),we=C(we,Ae.children||[]),we.return=Ee,Ee=we;break e}else{g(Ee,we);break}else h(Ee,we);we=we.sibling}we=Vx(Ae,Ee.mode,Ze),we.return=Ee,Ee=we}return V(Ee);case re:return Dt=Ae._init,Xr(Ee,we,Dt(Ae._payload),Ze)}if(Ce(Ae))return yt(Ee,we,Ae,Ze);if(Z(Ae))return kt(Ee,we,Ae,Ze);$f(Ee,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,we!==null&&we.tag===6?(g(Ee,we.sibling),we=C(we,Ae),we.return=Ee,Ee=we):(g(Ee,we),we=Wx(Ae,Ee.mode,Ze),we.return=Ee,Ee=we),V(Ee)):g(Ee,we)}return Xr}var Ql=_S(!0),ES=_S(!1),Lf=Xi(null),Bf=null,Zl=null,rx=null;function nx(){rx=Zl=Bf=null}function ax(c){var h=Lf.current;Fr(Lf),c._currentValue=h}function sx(c,h,g){for(;c!==null;){var w=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),c===g)break;c=c.return}}function ec(c,h){Bf=c,rx=Zl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(wa=!0),c.firstContext=null)}function Ga(c){var h=c._currentValue;if(rx!==c)if(c={context:c,memoizedValue:h,next:null},Zl===null){if(Bf===null)throw Error(r(308));Zl=c,Bf.dependencies={lanes:0,firstContext:c}}else Zl=Zl.next=c;return h}var $o=null;function ix(c){$o===null?$o=[c]:$o.push(c)}function CS(c,h,g,w){var C=h.interleaved;return C===null?(g.next=g,ix(h)):(g.next=C.next,C.next=g),h.interleaved=g,hi(c,w)}function hi(c,h){c.lanes|=h;var g=c.alternate;for(g!==null&&(g.lanes|=h),g=c,c=c.return;c!==null;)c.childLanes|=h,g=c.alternate,g!==null&&(g.childLanes|=h),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Zi=!1;function ox(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TS(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function fi(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function eo(c,h,g){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(dr&2)!==0){var C=w.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),w.pending=h,hi(c,g)}return C=w.interleaved,C===null?(h.next=h,ix(w)):(h.next=C.next,C.next=h),w.interleaved=h,hi(c,g)}function Uf(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var w=h.lanes;w&=c.pendingLanes,g|=w,h.lanes=g,wg(c,g)}}function AS(c,h){var g=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,M=null;if(g=g.firstBaseUpdate,g!==null){do{var V={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};M===null?C=M=V:M=M.next=V,g=g.next}while(g!==null);M===null?C=M=h:M=M.next=h}else C=M=h;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:M,shared:w.shared,effects:w.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function Hf(c,h,g,w){var C=c.updateQueue;Zi=!1;var M=C.firstBaseUpdate,V=C.lastBaseUpdate,ue=C.shared.pending;if(ue!==null){C.shared.pending=null;var ye=ue,Pe=ye.next;ye.next=null,V===null?M=Pe:V.next=Pe,V=ye;var Ge=c.alternate;Ge!==null&&(Ge=Ge.updateQueue,ue=Ge.lastBaseUpdate,ue!==V&&(ue===null?Ge.firstBaseUpdate=Pe:ue.next=Pe,Ge.lastBaseUpdate=ye))}if(M!==null){var Ye=C.baseState;V=0,Ge=Pe=ye=null,ue=M;do{var Ve=ue.lane,lt=ue.eventTime;if((w&Ve)===Ve){Ge!==null&&(Ge=Ge.next={eventTime:lt,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var yt=c,kt=ue;switch(Ve=h,lt=g,kt.tag){case 1:if(yt=kt.payload,typeof yt=="function"){Ye=yt.call(lt,Ye,Ve);break e}Ye=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=kt.payload,Ve=typeof yt=="function"?yt.call(lt,Ye,Ve):yt,Ve==null)break e;Ye=me({},Ye,Ve);break e;case 2:Zi=!0}}ue.callback!==null&&ue.lane!==0&&(c.flags|=64,Ve=C.effects,Ve===null?C.effects=[ue]:Ve.push(ue))}else lt={eventTime:lt,lane:Ve,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ge===null?(Pe=Ge=lt,ye=Ye):Ge=Ge.next=lt,V|=Ve;if(ue=ue.next,ue===null){if(ue=C.shared.pending,ue===null)break;Ve=ue,ue=Ve.next,Ve.next=null,C.lastBaseUpdate=Ve,C.shared.pending=null}}while(!0);if(Ge===null&&(ye=Ye),C.baseState=ye,C.firstBaseUpdate=Pe,C.lastBaseUpdate=Ge,h=C.shared.interleaved,h!==null){C=h;do V|=C.lane,C=C.next;while(C!==h)}else M===null&&(C.shared.lanes=0);Uo|=V,c.lanes=V,c.memoizedState=Ye}}function OS(c,h,g){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var w=c[h],C=w.callback;if(C!==null){if(w.callback=null,w=g,typeof C!="function")throw Error(r(191,C));C.call(w)}}}var Qu={},Bs=Xi(Qu),Zu=Xi(Qu),ed=Xi(Qu);function Lo(c){if(c===Qu)throw Error(r(174));return c}function lx(c,h){switch(Cr(ed,h),Cr(Zu,c),Cr(Bs,Qu),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:ct(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=ct(h,c)}Fr(Bs),Cr(Bs,h)}function tc(){Fr(Bs),Fr(Zu),Fr(ed)}function PS(c){Lo(ed.current);var h=Lo(Bs.current),g=ct(h,c.type);h!==g&&(Cr(Zu,c),Cr(Bs,g))}function cx(c){Zu.current===c&&(Fr(Bs),Fr(Zu))}var Hr=Xi(0);function qf(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var ux=[];function dx(){for(var c=0;c<ux.length;c++)ux[c]._workInProgressVersionPrimary=null;ux.length=0}var zf=A.ReactCurrentDispatcher,hx=A.ReactCurrentBatchConfig,Bo=0,qr=null,cn=null,kn=null,Kf=!1,td=!1,rd=0,gL=0;function Vn(){throw Error(r(321))}function fx(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!fs(c[g],h[g]))return!1;return!0}function px(c,h,g,w,C,M){if(Bo=M,qr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,zf.current=c===null||c.memoizedState===null?bL:wL,c=g(w,C),td){M=0;do{if(td=!1,rd=0,25<=M)throw Error(r(301));M+=1,kn=cn=null,h.updateQueue=null,zf.current=jL,c=g(w,C)}while(td)}if(zf.current=Gf,h=cn!==null&&cn.next!==null,Bo=0,kn=cn=qr=null,Kf=!1,h)throw Error(r(300));return c}function mx(){var c=rd!==0;return rd=0,c}function Us(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?qr.memoizedState=kn=c:kn=kn.next=c,kn}function Ya(){if(cn===null){var c=qr.alternate;c=c!==null?c.memoizedState:null}else c=cn.next;var h=kn===null?qr.memoizedState:kn.next;if(h!==null)kn=h,cn=c;else{if(c===null)throw Error(r(310));cn=c,c={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},kn===null?qr.memoizedState=kn=c:kn=kn.next=c}return kn}function nd(c,h){return typeof h=="function"?h(c):h}function gx(c){var h=Ya(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var w=cn,C=w.baseQueue,M=g.pending;if(M!==null){if(C!==null){var V=C.next;C.next=M.next,M.next=V}w.baseQueue=C=M,g.pending=null}if(C!==null){M=C.next,w=w.baseState;var ue=V=null,ye=null,Pe=M;do{var Ge=Pe.lane;if((Bo&Ge)===Ge)ye!==null&&(ye=ye.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),w=Pe.hasEagerState?Pe.eagerState:c(w,Pe.action);else{var Ye={lane:Ge,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ye===null?(ue=ye=Ye,V=w):ye=ye.next=Ye,qr.lanes|=Ge,Uo|=Ge}Pe=Pe.next}while(Pe!==null&&Pe!==M);ye===null?V=w:ye.next=ue,fs(w,h.memoizedState)||(wa=!0),h.memoizedState=w,h.baseState=V,h.baseQueue=ye,g.lastRenderedState=w}if(c=g.interleaved,c!==null){C=c;do M=C.lane,qr.lanes|=M,Uo|=M,C=C.next;while(C!==c)}else C===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function xx(c){var h=Ya(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var w=g.dispatch,C=g.pending,M=h.memoizedState;if(C!==null){g.pending=null;var V=C=C.next;do M=c(M,V.action),V=V.next;while(V!==C);fs(M,h.memoizedState)||(wa=!0),h.memoizedState=M,h.baseQueue===null&&(h.baseState=M),g.lastRenderedState=M}return[M,w]}function IS(){}function DS(c,h){var g=qr,w=Ya(),C=h(),M=!fs(w.memoizedState,C);if(M&&(w.memoizedState=C,wa=!0),w=w.queue,yx(FS.bind(null,g,w,c),[c]),w.getSnapshot!==h||M||kn!==null&&kn.memoizedState.tag&1){if(g.flags|=2048,ad(9,RS.bind(null,g,w,C,h),void 0,null),Sn===null)throw Error(r(349));(Bo&30)!==0||MS(g,h,C)}return C}function MS(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=qr.updateQueue,h===null?(h={lastEffect:null,stores:null},qr.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function RS(c,h,g,w){h.value=g,h.getSnapshot=w,$S(h)&&LS(c)}function FS(c,h,g){return g(function(){$S(h)&&LS(c)})}function $S(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!fs(c,g)}catch{return!0}}function LS(c){var h=hi(c,1);h!==null&&ys(h,c,1,-1)}function BS(c){var h=Us();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:c},h.queue=c,c=c.dispatch=vL.bind(null,qr,c),[h.memoizedState,c]}function ad(c,h,g,w){return c={tag:c,create:h,destroy:g,deps:w,next:null},h=qr.updateQueue,h===null?(h={lastEffect:null,stores:null},qr.updateQueue=h,h.lastEffect=c.next=c):(g=h.lastEffect,g===null?h.lastEffect=c.next=c:(w=g.next,g.next=c,c.next=w,h.lastEffect=c)),c}function US(){return Ya().memoizedState}function Wf(c,h,g,w){var C=Us();qr.flags|=c,C.memoizedState=ad(1|h,g,void 0,w===void 0?null:w)}function Vf(c,h,g,w){var C=Ya();w=w===void 0?null:w;var M=void 0;if(cn!==null){var V=cn.memoizedState;if(M=V.destroy,w!==null&&fx(w,V.deps)){C.memoizedState=ad(h,g,M,w);return}}qr.flags|=c,C.memoizedState=ad(1|h,g,M,w)}function HS(c,h){return Wf(8390656,8,c,h)}function yx(c,h){return Vf(2048,8,c,h)}function qS(c,h){return Vf(4,2,c,h)}function zS(c,h){return Vf(4,4,c,h)}function KS(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function WS(c,h,g){return g=g!=null?g.concat([c]):null,Vf(4,4,KS.bind(null,h,c),g)}function vx(){}function VS(c,h){var g=Ya();h=h===void 0?null:h;var w=g.memoizedState;return w!==null&&h!==null&&fx(h,w[1])?w[0]:(g.memoizedState=[c,h],c)}function GS(c,h){var g=Ya();h=h===void 0?null:h;var w=g.memoizedState;return w!==null&&h!==null&&fx(h,w[1])?w[0]:(c=c(),g.memoizedState=[c,h],c)}function YS(c,h,g){return(Bo&21)===0?(c.baseState&&(c.baseState=!1,wa=!0),c.memoizedState=g):(fs(g,h)||(g=Sk(),qr.lanes|=g,Uo|=g,c.baseState=!0),h)}function xL(c,h){var g=br;br=g!==0&&4>g?g:4,c(!0);var w=hx.transition;hx.transition={};try{c(!1),h()}finally{br=g,hx.transition=w}}function XS(){return Ya().memoizedState}function yL(c,h,g){var w=ao(c);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},JS(c))QS(h,g);else if(g=CS(c,h,g,w),g!==null){var C=la();ys(g,c,w,C),ZS(g,h,w)}}function vL(c,h,g){var w=ao(c),C={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(JS(c))QS(h,C);else{var M=c.alternate;if(c.lanes===0&&(M===null||M.lanes===0)&&(M=h.lastRenderedReducer,M!==null))try{var V=h.lastRenderedState,ue=M(V,g);if(C.hasEagerState=!0,C.eagerState=ue,fs(ue,V)){var ye=h.interleaved;ye===null?(C.next=C,ix(h)):(C.next=ye.next,ye.next=C),h.interleaved=C;return}}catch{}finally{}g=CS(c,h,C,w),g!==null&&(C=la(),ys(g,c,w,C),ZS(g,h,w))}}function JS(c){var h=c.alternate;return c===qr||h!==null&&h===qr}function QS(c,h){td=Kf=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function ZS(c,h,g){if((g&4194240)!==0){var w=h.lanes;w&=c.pendingLanes,g|=w,h.lanes=g,wg(c,g)}}var Gf={readContext:Ga,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},bL={readContext:Ga,useCallback:function(c,h){return Us().memoizedState=[c,h===void 0?null:h],c},useContext:Ga,useEffect:HS,useImperativeHandle:function(c,h,g){return g=g!=null?g.concat([c]):null,Wf(4194308,4,KS.bind(null,h,c),g)},useLayoutEffect:function(c,h){return Wf(4194308,4,c,h)},useInsertionEffect:function(c,h){return Wf(4,2,c,h)},useMemo:function(c,h){var g=Us();return h=h===void 0?null:h,c=c(),g.memoizedState=[c,h],c},useReducer:function(c,h,g){var w=Us();return h=g!==void 0?g(h):h,w.memoizedState=w.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},w.queue=c,c=c.dispatch=yL.bind(null,qr,c),[w.memoizedState,c]},useRef:function(c){var h=Us();return c={current:c},h.memoizedState=c},useState:BS,useDebugValue:vx,useDeferredValue:function(c){return Us().memoizedState=c},useTransition:function(){var c=BS(!1),h=c[0];return c=xL.bind(null,c[1]),Us().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,g){var w=qr,C=Us();if(Lr){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Sn===null)throw Error(r(349));(Bo&30)!==0||MS(w,h,g)}C.memoizedState=g;var M={value:g,getSnapshot:h};return C.queue=M,HS(FS.bind(null,w,M,c),[c]),w.flags|=2048,ad(9,RS.bind(null,w,M,g,h),void 0,null),g},useId:function(){var c=Us(),h=Sn.identifierPrefix;if(Lr){var g=di,w=ui;g=(w&~(1<<32-_t(w)-1)).toString(32)+g,h=":"+h+"R"+g,g=rd++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=gL++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},wL={readContext:Ga,useCallback:VS,useContext:Ga,useEffect:yx,useImperativeHandle:WS,useInsertionEffect:qS,useLayoutEffect:zS,useMemo:GS,useReducer:gx,useRef:US,useState:function(){return gx(nd)},useDebugValue:vx,useDeferredValue:function(c){var h=Ya();return YS(h,cn.memoizedState,c)},useTransition:function(){var c=gx(nd)[0],h=Ya().memoizedState;return[c,h]},useMutableSource:IS,useSyncExternalStore:DS,useId:XS,unstable_isNewReconciler:!1},jL={readContext:Ga,useCallback:VS,useContext:Ga,useEffect:yx,useImperativeHandle:WS,useInsertionEffect:qS,useLayoutEffect:zS,useMemo:GS,useReducer:xx,useRef:US,useState:function(){return xx(nd)},useDebugValue:vx,useDeferredValue:function(c){var h=Ya();return cn===null?h.memoizedState=c:YS(h,cn.memoizedState,c)},useTransition:function(){var c=xx(nd)[0],h=Ya().memoizedState;return[c,h]},useMutableSource:IS,useSyncExternalStore:DS,useId:XS,unstable_isNewReconciler:!1};function ms(c,h){if(c&&c.defaultProps){h=me({},h),c=c.defaultProps;for(var g in c)h[g]===void 0&&(h[g]=c[g]);return h}return h}function bx(c,h,g,w){h=c.memoizedState,g=g(w,h),g=g==null?h:me({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Yf={isMounted:function(c){return(c=c._reactInternals)?oe(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var w=la(),C=ao(c),M=fi(w,C);M.payload=h,g!=null&&(M.callback=g),h=eo(c,M,C),h!==null&&(ys(h,c,C,w),Uf(h,c,C))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var w=la(),C=ao(c),M=fi(w,C);M.tag=1,M.payload=h,g!=null&&(M.callback=g),h=eo(c,M,C),h!==null&&(ys(h,c,C,w),Uf(h,c,C))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=la(),w=ao(c),C=fi(g,w);C.tag=2,h!=null&&(C.callback=h),h=eo(c,C,w),h!==null&&(ys(h,c,w,g),Uf(h,c,w))}};function e_(c,h,g,w,C,M,V){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,M,V):h.prototype&&h.prototype.isPureReactComponent?!zu(g,w)||!zu(C,M):!0}function t_(c,h,g){var w=!1,C=Ji,M=h.contextType;return typeof M=="object"&&M!==null?M=Ga(M):(C=ba(h)?Mo:Wn.current,w=h.contextTypes,M=(w=w!=null)?Gl(c,C):Ji),h=new h(g,M),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Yf,c.stateNode=h,h._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=C,c.__reactInternalMemoizedMaskedChildContext=M),h}function r_(c,h,g,w){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,w),h.state!==c&&Yf.enqueueReplaceState(h,h.state,null)}function wx(c,h,g,w){var C=c.stateNode;C.props=g,C.state=c.memoizedState,C.refs={},ox(c);var M=h.contextType;typeof M=="object"&&M!==null?C.context=Ga(M):(M=ba(h)?Mo:Wn.current,C.context=Gl(c,M)),C.state=c.memoizedState,M=h.getDerivedStateFromProps,typeof M=="function"&&(bx(c,h,M,g),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(h=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),h!==C.state&&Yf.enqueueReplaceState(C,C.state,null),Hf(c,g,C,w),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308)}function rc(c,h){try{var g="",w=h;do g+=J(w),w=w.return;while(w);var C=g}catch(M){C=`
Error generating stack: `+M.message+`
`+M.stack}return{value:c,source:h,stack:C,digest:null}}function jx(c,h,g){return{value:c,source:null,stack:g??null,digest:h??null}}function Nx(c,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var NL=typeof WeakMap=="function"?WeakMap:Map;function n_(c,h,g){g=fi(-1,g),g.tag=3,g.payload={element:null};var w=h.value;return g.callback=function(){r0||(r0=!0,$x=w),Nx(c,h)},g}function a_(c,h,g){g=fi(-1,g),g.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var C=h.value;g.payload=function(){return w(C)},g.callback=function(){Nx(c,h)}}var M=c.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(g.callback=function(){Nx(c,h),typeof w!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),g}function s_(c,h,g){var w=c.pingCache;if(w===null){w=c.pingCache=new NL;var C=new Set;w.set(h,C)}else C=w.get(h),C===void 0&&(C=new Set,w.set(h,C));C.has(g)||(C.add(g),c=FL.bind(null,c,h,g),h.then(c,c))}function i_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function o_(c,h,g,w,C){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=fi(-1,1),h.tag=2,eo(g,h,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=C,c)}var kL=A.ReactCurrentOwner,wa=!1;function oa(c,h,g,w){h.child=c===null?ES(h,null,g,w):Ql(h,c.child,g,w)}function l_(c,h,g,w,C){g=g.render;var M=h.ref;return ec(h,C),w=px(c,h,g,w,M,C),g=mx(),c!==null&&!wa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~C,pi(c,h,C)):(Lr&&g&&Jg(h),h.flags|=1,oa(c,h,w,C),h.child)}function c_(c,h,g,w,C){if(c===null){var M=g.type;return typeof M=="function"&&!Kx(M)&&M.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=M,u_(c,h,M,w,C)):(c=l0(g.type,null,w,h,h.mode,C),c.ref=h.ref,c.return=h,h.child=c)}if(M=c.child,(c.lanes&C)===0){var V=M.memoizedProps;if(g=g.compare,g=g!==null?g:zu,g(V,w)&&c.ref===h.ref)return pi(c,h,C)}return h.flags|=1,c=io(M,w),c.ref=h.ref,c.return=h,h.child=c}function u_(c,h,g,w,C){if(c!==null){var M=c.memoizedProps;if(zu(M,w)&&c.ref===h.ref)if(wa=!1,h.pendingProps=w=M,(c.lanes&C)!==0)(c.flags&131072)!==0&&(wa=!0);else return h.lanes=c.lanes,pi(c,h,C)}return kx(c,h,g,w,C)}function d_(c,h,g){var w=h.pendingProps,C=w.children,M=c!==null?c.memoizedState:null;if(w.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(ac,Pa),Pa|=g;else{if((g&1073741824)===0)return c=M!==null?M.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Cr(ac,Pa),Pa|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=M!==null?M.baseLanes:g,Cr(ac,Pa),Pa|=w}else M!==null?(w=M.baseLanes|g,h.memoizedState=null):w=g,Cr(ac,Pa),Pa|=w;return oa(c,h,C,g),h.child}function h_(c,h){var g=h.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function kx(c,h,g,w,C){var M=ba(g)?Mo:Wn.current;return M=Gl(h,M),ec(h,C),g=px(c,h,g,w,M,C),w=mx(),c!==null&&!wa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~C,pi(c,h,C)):(Lr&&w&&Jg(h),h.flags|=1,oa(c,h,g,C),h.child)}function f_(c,h,g,w,C){if(ba(g)){var M=!0;If(h)}else M=!1;if(ec(h,C),h.stateNode===null)Jf(c,h),t_(h,g,w),wx(h,g,w,C),w=!0;else if(c===null){var V=h.stateNode,ue=h.memoizedProps;V.props=ue;var ye=V.context,Pe=g.contextType;typeof Pe=="object"&&Pe!==null?Pe=Ga(Pe):(Pe=ba(g)?Mo:Wn.current,Pe=Gl(h,Pe));var Ge=g.getDerivedStateFromProps,Ye=typeof Ge=="function"||typeof V.getSnapshotBeforeUpdate=="function";Ye||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ue!==w||ye!==Pe)&&r_(h,V,w,Pe),Zi=!1;var Ve=h.memoizedState;V.state=Ve,Hf(h,w,V,C),ye=h.memoizedState,ue!==w||Ve!==ye||va.current||Zi?(typeof Ge=="function"&&(bx(h,g,Ge,w),ye=h.memoizedState),(ue=Zi||e_(h,g,ue,w,Ve,ye,Pe))?(Ye||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=ye),V.props=w,V.state=ye,V.context=Pe,w=ue):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{V=h.stateNode,TS(c,h),ue=h.memoizedProps,Pe=h.type===h.elementType?ue:ms(h.type,ue),V.props=Pe,Ye=h.pendingProps,Ve=V.context,ye=g.contextType,typeof ye=="object"&&ye!==null?ye=Ga(ye):(ye=ba(g)?Mo:Wn.current,ye=Gl(h,ye));var lt=g.getDerivedStateFromProps;(Ge=typeof lt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ue!==Ye||Ve!==ye)&&r_(h,V,w,ye),Zi=!1,Ve=h.memoizedState,V.state=Ve,Hf(h,w,V,C);var yt=h.memoizedState;ue!==Ye||Ve!==yt||va.current||Zi?(typeof lt=="function"&&(bx(h,g,lt,w),yt=h.memoizedState),(Pe=Zi||e_(h,g,Pe,w,Ve,yt,ye)||!1)?(Ge||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(w,yt,ye),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(w,yt,ye)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||ue===c.memoizedProps&&Ve===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Ve===c.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=yt),V.props=w,V.state=yt,V.context=ye,w=Pe):(typeof V.componentDidUpdate!="function"||ue===c.memoizedProps&&Ve===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Ve===c.memoizedState||(h.flags|=1024),w=!1)}return Sx(c,h,g,w,M,C)}function Sx(c,h,g,w,C,M){h_(c,h);var V=(h.flags&128)!==0;if(!w&&!V)return C&&yS(h,g,!1),pi(c,h,M);w=h.stateNode,kL.current=h;var ue=V&&typeof g.getDerivedStateFromError!="function"?null:w.render();return h.flags|=1,c!==null&&V?(h.child=Ql(h,c.child,null,M),h.child=Ql(h,null,ue,M)):oa(c,h,ue,M),h.memoizedState=w.state,C&&yS(h,g,!0),h.child}function p_(c){var h=c.stateNode;h.pendingContext?gS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&gS(c,h.context,!1),lx(c,h.containerInfo)}function m_(c,h,g,w,C){return Jl(),tx(C),h.flags|=256,oa(c,h,g,w),h.child}var _x={dehydrated:null,treeContext:null,retryLane:0};function Ex(c){return{baseLanes:c,cachePool:null,transitions:null}}function g_(c,h,g){var w=h.pendingProps,C=Hr.current,M=!1,V=(h.flags&128)!==0,ue;if((ue=V)||(ue=c!==null&&c.memoizedState===null?!1:(C&2)!==0),ue?(M=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(C|=1),Cr(Hr,C&1),c===null)return ex(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(V=w.children,c=w.fallback,M?(w=h.mode,M=h.child,V={mode:"hidden",children:V},(w&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=V):M=c0(V,w,0,null),c=Ko(c,w,g,null),M.return=h,c.return=h,M.sibling=c,h.child=M,h.child.memoizedState=Ex(g),h.memoizedState=_x,c):Cx(h,V));if(C=c.memoizedState,C!==null&&(ue=C.dehydrated,ue!==null))return SL(c,h,V,w,ue,C,g);if(M){M=w.fallback,V=h.mode,C=c.child,ue=C.sibling;var ye={mode:"hidden",children:w.children};return(V&1)===0&&h.child!==C?(w=h.child,w.childLanes=0,w.pendingProps=ye,h.deletions=null):(w=io(C,ye),w.subtreeFlags=C.subtreeFlags&14680064),ue!==null?M=io(ue,M):(M=Ko(M,V,g,null),M.flags|=2),M.return=h,w.return=h,w.sibling=M,h.child=w,w=M,M=h.child,V=c.child.memoizedState,V=V===null?Ex(g):{baseLanes:V.baseLanes|g,cachePool:null,transitions:V.transitions},M.memoizedState=V,M.childLanes=c.childLanes&~g,h.memoizedState=_x,w}return M=c.child,c=M.sibling,w=io(M,{mode:"visible",children:w.children}),(h.mode&1)===0&&(w.lanes=g),w.return=h,w.sibling=null,c!==null&&(g=h.deletions,g===null?(h.deletions=[c],h.flags|=16):g.push(c)),h.child=w,h.memoizedState=null,w}function Cx(c,h){return h=c0({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Xf(c,h,g,w){return w!==null&&tx(w),Ql(h,c.child,null,g),c=Cx(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function SL(c,h,g,w,C,M,V){if(g)return h.flags&256?(h.flags&=-257,w=jx(Error(r(422))),Xf(c,h,V,w)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(M=w.fallback,C=h.mode,w=c0({mode:"visible",children:w.children},C,0,null),M=Ko(M,C,V,null),M.flags|=2,w.return=h,M.return=h,w.sibling=M,h.child=w,(h.mode&1)!==0&&Ql(h,c.child,null,V),h.child.memoizedState=Ex(V),h.memoizedState=_x,M);if((h.mode&1)===0)return Xf(c,h,V,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var ue=w.dgst;return w=ue,M=Error(r(419)),w=jx(M,w,void 0),Xf(c,h,V,w)}if(ue=(V&c.childLanes)!==0,wa||ue){if(w=Sn,w!==null){switch(V&-V){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(w.suspendedLanes|V))!==0?0:C,C!==0&&C!==M.retryLane&&(M.retryLane=C,hi(c,C),ys(w,c,C,-1))}return zx(),w=jx(Error(r(421))),Xf(c,h,V,w)}return C.data==="$?"?(h.flags|=128,h.child=c.child,h=$L.bind(null,c),C._reactRetry=h,null):(c=M.treeContext,Oa=Yi(C.nextSibling),Aa=h,Lr=!0,ps=null,c!==null&&(Wa[Va++]=ui,Wa[Va++]=di,Wa[Va++]=Ro,ui=c.id,di=c.overflow,Ro=h),h=Cx(h,w.children),h.flags|=4096,h)}function x_(c,h,g){c.lanes|=h;var w=c.alternate;w!==null&&(w.lanes|=h),sx(c.return,h,g)}function Tx(c,h,g,w,C){var M=c.memoizedState;M===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C}:(M.isBackwards=h,M.rendering=null,M.renderingStartTime=0,M.last=w,M.tail=g,M.tailMode=C)}function y_(c,h,g){var w=h.pendingProps,C=w.revealOrder,M=w.tail;if(oa(c,h,w.children,g),w=Hr.current,(w&2)!==0)w=w&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&x_(c,g,h);else if(c.tag===19)x_(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(Cr(Hr,w),(h.mode&1)===0)h.memoizedState=null;else switch(C){case"forwards":for(g=h.child,C=null;g!==null;)c=g.alternate,c!==null&&qf(c)===null&&(C=g),g=g.sibling;g=C,g===null?(C=h.child,h.child=null):(C=g.sibling,g.sibling=null),Tx(h,!1,C,g,M);break;case"backwards":for(g=null,C=h.child,h.child=null;C!==null;){if(c=C.alternate,c!==null&&qf(c)===null){h.child=C;break}c=C.sibling,C.sibling=g,g=C,C=c}Tx(h,!0,g,null,M);break;case"together":Tx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Jf(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function pi(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),Uo|=h.lanes,(g&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,g=io(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=io(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function _L(c,h,g){switch(h.tag){case 3:p_(h),Jl();break;case 5:PS(h);break;case 1:ba(h.type)&&If(h);break;case 4:lx(h,h.stateNode.containerInfo);break;case 10:var w=h.type._context,C=h.memoizedProps.value;Cr(Lf,w._currentValue),w._currentValue=C;break;case 13:if(w=h.memoizedState,w!==null)return w.dehydrated!==null?(Cr(Hr,Hr.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?g_(c,h,g):(Cr(Hr,Hr.current&1),c=pi(c,h,g),c!==null?c.sibling:null);Cr(Hr,Hr.current&1);break;case 19:if(w=(g&h.childLanes)!==0,(c.flags&128)!==0){if(w)return y_(c,h,g);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Cr(Hr,Hr.current),w)break;return null;case 22:case 23:return h.lanes=0,d_(c,h,g)}return pi(c,h,g)}var v_,Ax,b_,w_;v_=function(c,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ax=function(){},b_=function(c,h,g,w){var C=c.memoizedProps;if(C!==w){c=h.stateNode,Lo(Bs.current);var M=null;switch(g){case"input":C=De(c,C),w=De(c,w),M=[];break;case"select":C=me({},C,{value:void 0}),w=me({},w,{value:void 0}),M=[];break;case"textarea":C=Pt(c,C),w=Pt(c,w),M=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(c.onclick=Af)}nr(g,w);var V;g=null;for(Pe in C)if(!w.hasOwnProperty(Pe)&&C.hasOwnProperty(Pe)&&C[Pe]!=null)if(Pe==="style"){var ue=C[Pe];for(V in ue)ue.hasOwnProperty(V)&&(g||(g={}),g[V]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(s.hasOwnProperty(Pe)?M||(M=[]):(M=M||[]).push(Pe,null));for(Pe in w){var ye=w[Pe];if(ue=C?.[Pe],w.hasOwnProperty(Pe)&&ye!==ue&&(ye!=null||ue!=null))if(Pe==="style")if(ue){for(V in ue)!ue.hasOwnProperty(V)||ye&&ye.hasOwnProperty(V)||(g||(g={}),g[V]="");for(V in ye)ye.hasOwnProperty(V)&&ue[V]!==ye[V]&&(g||(g={}),g[V]=ye[V])}else g||(M||(M=[]),M.push(Pe,g)),g=ye;else Pe==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ue=ue?ue.__html:void 0,ye!=null&&ue!==ye&&(M=M||[]).push(Pe,ye)):Pe==="children"?typeof ye!="string"&&typeof ye!="number"||(M=M||[]).push(Pe,""+ye):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(s.hasOwnProperty(Pe)?(ye!=null&&Pe==="onScroll"&&Rr("scroll",c),M||ue===ye||(M=[])):(M=M||[]).push(Pe,ye))}g&&(M=M||[]).push("style",g);var Pe=M;(h.updateQueue=Pe)&&(h.flags|=4)}},w_=function(c,h,g,w){g!==w&&(h.flags|=4)};function sd(c,h){if(!Lr)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function Gn(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,w=0;if(h)for(var C=c.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=w,c.childLanes=g,h}function EL(c,h,g){var w=h.pendingProps;switch(Qg(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(h),null;case 1:return ba(h.type)&&Pf(),Gn(h),null;case 3:return w=h.stateNode,tc(),Fr(va),Fr(Wn),dx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(Ff(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ps!==null&&(Ux(ps),ps=null))),Ax(c,h),Gn(h),null;case 5:cx(h);var C=Lo(ed.current);if(g=h.type,c!==null&&h.stateNode!=null)b_(c,h,g,w,C),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!w){if(h.stateNode===null)throw Error(r(166));return Gn(h),null}if(c=Lo(Bs.current),Ff(h)){w=h.stateNode,g=h.type;var M=h.memoizedProps;switch(w[Ls]=h,w[Yu]=M,c=(h.mode&1)!==0,g){case"dialog":Rr("cancel",w),Rr("close",w);break;case"iframe":case"object":case"embed":Rr("load",w);break;case"video":case"audio":for(C=0;C<Wu.length;C++)Rr(Wu[C],w);break;case"source":Rr("error",w);break;case"img":case"image":case"link":Rr("error",w),Rr("load",w);break;case"details":Rr("toggle",w);break;case"input":qe(w,M),Rr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!M.multiple},Rr("invalid",w);break;case"textarea":We(w,M),Rr("invalid",w)}nr(g,M),C=null;for(var V in M)if(M.hasOwnProperty(V)){var ue=M[V];V==="children"?typeof ue=="string"?w.textContent!==ue&&(M.suppressHydrationWarning!==!0&&Tf(w.textContent,ue,c),C=["children",ue]):typeof ue=="number"&&w.textContent!==""+ue&&(M.suppressHydrationWarning!==!0&&Tf(w.textContent,ue,c),C=["children",""+ue]):s.hasOwnProperty(V)&&ue!=null&&V==="onScroll"&&Rr("scroll",w)}switch(g){case"input":Fe(w),Je(w,M,!0);break;case"textarea":Fe(w),nt(w);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(w.onclick=Af)}w=C,h.updateQueue=w,w!==null&&(h.flags|=4)}else{V=C.nodeType===9?C:C.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=qt(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=V.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof w.is=="string"?c=V.createElement(g,{is:w.is}):(c=V.createElement(g),g==="select"&&(V=c,w.multiple?V.multiple=!0:w.size&&(V.size=w.size))):c=V.createElementNS(c,g),c[Ls]=h,c[Yu]=w,v_(c,h,!1,!1),h.stateNode=c;e:{switch(V=Mr(g,w),g){case"dialog":Rr("cancel",c),Rr("close",c),C=w;break;case"iframe":case"object":case"embed":Rr("load",c),C=w;break;case"video":case"audio":for(C=0;C<Wu.length;C++)Rr(Wu[C],c);C=w;break;case"source":Rr("error",c),C=w;break;case"img":case"image":case"link":Rr("error",c),Rr("load",c),C=w;break;case"details":Rr("toggle",c),C=w;break;case"input":qe(c,w),C=De(c,w),Rr("invalid",c);break;case"option":C=w;break;case"select":c._wrapperState={wasMultiple:!!w.multiple},C=me({},w,{value:void 0}),Rr("invalid",c);break;case"textarea":We(c,w),C=Pt(c,w),Rr("invalid",c);break;default:C=w}nr(g,C),ue=C;for(M in ue)if(ue.hasOwnProperty(M)){var ye=ue[M];M==="style"?kr(c,ye):M==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&ur(c,ye)):M==="children"?typeof ye=="string"?(g!=="textarea"||ye!=="")&&xt(c,ye):typeof ye=="number"&&xt(c,""+ye):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?ye!=null&&M==="onScroll"&&Rr("scroll",c):ye!=null&&j(c,M,ye,V))}switch(g){case"input":Fe(c),Je(c,w,!1);break;case"textarea":Fe(c),nt(c);break;case"option":w.value!=null&&c.setAttribute("value",""+Oe(w.value));break;case"select":c.multiple=!!w.multiple,M=w.value,M!=null?Me(c,!!w.multiple,M,!1):w.defaultValue!=null&&Me(c,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(c.onclick=Af)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Gn(h),null;case 6:if(c&&h.stateNode!=null)w_(c,h,c.memoizedProps,w);else{if(typeof w!="string"&&h.stateNode===null)throw Error(r(166));if(g=Lo(ed.current),Lo(Bs.current),Ff(h)){if(w=h.stateNode,g=h.memoizedProps,w[Ls]=h,(M=w.nodeValue!==g)&&(c=Aa,c!==null))switch(c.tag){case 3:Tf(w.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Tf(w.nodeValue,g,(c.mode&1)!==0)}M&&(h.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[Ls]=h,h.stateNode=w}return Gn(h),null;case 13:if(Fr(Hr),w=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Lr&&Oa!==null&&(h.mode&1)!==0&&(h.flags&128)===0)kS(),Jl(),h.flags|=98560,M=!1;else if(M=Ff(h),w!==null&&w.dehydrated!==null){if(c===null){if(!M)throw Error(r(318));if(M=h.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));M[Ls]=h}else Jl(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Gn(h),M=!1}else ps!==null&&(Ux(ps),ps=null),M=!0;if(!M)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=g,h):(w=w!==null,w!==(c!==null&&c.memoizedState!==null)&&w&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Hr.current&1)!==0?un===0&&(un=3):zx())),h.updateQueue!==null&&(h.flags|=4),Gn(h),null);case 4:return tc(),Ax(c,h),c===null&&Vu(h.stateNode.containerInfo),Gn(h),null;case 10:return ax(h.type._context),Gn(h),null;case 17:return ba(h.type)&&Pf(),Gn(h),null;case 19:if(Fr(Hr),M=h.memoizedState,M===null)return Gn(h),null;if(w=(h.flags&128)!==0,V=M.rendering,V===null)if(w)sd(M,!1);else{if(un!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(V=qf(c),V!==null){for(h.flags|=128,sd(M,!1),w=V.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),h.subtreeFlags=0,w=g,g=h.child;g!==null;)M=g,c=w,M.flags&=14680066,V=M.alternate,V===null?(M.childLanes=0,M.lanes=c,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=V.childLanes,M.lanes=V.lanes,M.child=V.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=V.memoizedProps,M.memoizedState=V.memoizedState,M.updateQueue=V.updateQueue,M.type=V.type,c=V.dependencies,M.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Cr(Hr,Hr.current&1|2),h.child}c=c.sibling}M.tail!==null&&ve()>sc&&(h.flags|=128,w=!0,sd(M,!1),h.lanes=4194304)}else{if(!w)if(c=qf(V),c!==null){if(h.flags|=128,w=!0,g=c.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),sd(M,!0),M.tail===null&&M.tailMode==="hidden"&&!V.alternate&&!Lr)return Gn(h),null}else 2*ve()-M.renderingStartTime>sc&&g!==1073741824&&(h.flags|=128,w=!0,sd(M,!1),h.lanes=4194304);M.isBackwards?(V.sibling=h.child,h.child=V):(g=M.last,g!==null?g.sibling=V:h.child=V,M.last=V)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=ve(),h.sibling=null,g=Hr.current,Cr(Hr,w?g&1|2:g&1),h):(Gn(h),null);case 22:case 23:return qx(),w=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(h.flags|=8192),w&&(h.mode&1)!==0?(Pa&1073741824)!==0&&(Gn(h),h.subtreeFlags&6&&(h.flags|=8192)):Gn(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function CL(c,h){switch(Qg(h),h.tag){case 1:return ba(h.type)&&Pf(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return tc(),Fr(va),Fr(Wn),dx(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return cx(h),null;case 13:if(Fr(Hr),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Jl()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Fr(Hr),null;case 4:return tc(),null;case 10:return ax(h.type._context),null;case 22:case 23:return qx(),null;case 24:return null;default:return null}}var Qf=!1,Yn=!1,TL=typeof WeakSet=="function"?WeakSet:Set,mt=null;function nc(c,h){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Kr(c,h,w)}else g.current=null}function Ox(c,h,g){try{g()}catch(w){Kr(c,h,w)}}var j_=!1;function AL(c,h){if(qg=yf,c=eS(),Mg(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,M=w.focusNode;w=w.focusOffset;try{g.nodeType,M.nodeType}catch{g=null;break e}var V=0,ue=-1,ye=-1,Pe=0,Ge=0,Ye=c,Ve=null;t:for(;;){for(var lt;Ye!==g||C!==0&&Ye.nodeType!==3||(ue=V+C),Ye!==M||w!==0&&Ye.nodeType!==3||(ye=V+w),Ye.nodeType===3&&(V+=Ye.nodeValue.length),(lt=Ye.firstChild)!==null;)Ve=Ye,Ye=lt;for(;;){if(Ye===c)break t;if(Ve===g&&++Pe===C&&(ue=V),Ve===M&&++Ge===w&&(ye=V),(lt=Ye.nextSibling)!==null)break;Ye=Ve,Ve=Ye.parentNode}Ye=lt}g=ue===-1||ye===-1?null:{start:ue,end:ye}}else g=null}g=g||{start:0,end:0}}else g=null;for(zg={focusedElem:c,selectionRange:g},yf=!1,mt=h;mt!==null;)if(h=mt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,mt=c;else for(;mt!==null;){h=mt;try{var yt=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var kt=yt.memoizedProps,Xr=yt.memoizedState,Ee=h.stateNode,we=Ee.getSnapshotBeforeUpdate(h.elementType===h.type?kt:ms(h.type,kt),Xr);Ee.__reactInternalSnapshotBeforeUpdate=we}break;case 3:var Ae=h.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ze){Kr(h,h.return,Ze)}if(c=h.sibling,c!==null){c.return=h.return,mt=c;break}mt=h.return}return yt=j_,j_=!1,yt}function id(c,h,g){var w=h.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&c)===c){var M=C.destroy;C.destroy=void 0,M!==void 0&&Ox(h,g,M)}C=C.next}while(C!==w)}}function Zf(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&c)===c){var w=g.create;g.destroy=w()}g=g.next}while(g!==h)}}function Px(c){var h=c.ref;if(h!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof h=="function"?h(c):h.current=c}}function N_(c){var h=c.alternate;h!==null&&(c.alternate=null,N_(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Ls],delete h[Yu],delete h[Gg],delete h[hL],delete h[fL])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function k_(c){return c.tag===5||c.tag===3||c.tag===4}function S_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||k_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ix(c,h,g){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(c,h):g.insertBefore(c,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(c,g)):(h=g,h.appendChild(c)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Af));else if(w!==4&&(c=c.child,c!==null))for(Ix(c,h,g),c=c.sibling;c!==null;)Ix(c,h,g),c=c.sibling}function Dx(c,h,g){var w=c.tag;if(w===5||w===6)c=c.stateNode,h?g.insertBefore(c,h):g.appendChild(c);else if(w!==4&&(c=c.child,c!==null))for(Dx(c,h,g),c=c.sibling;c!==null;)Dx(c,h,g),c=c.sibling}var Mn=null,gs=!1;function to(c,h,g){for(g=g.child;g!==null;)__(c,h,g),g=g.sibling}function __(c,h,g){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(pt,g)}catch{}switch(g.tag){case 5:Yn||nc(g,h);case 6:var w=Mn,C=gs;Mn=null,to(c,h,g),Mn=w,gs=C,Mn!==null&&(gs?(c=Mn,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):Mn.removeChild(g.stateNode));break;case 18:Mn!==null&&(gs?(c=Mn,g=g.stateNode,c.nodeType===8?Vg(c.parentNode,g):c.nodeType===1&&Vg(c,g),$u(c)):Vg(Mn,g.stateNode));break;case 4:w=Mn,C=gs,Mn=g.stateNode.containerInfo,gs=!0,to(c,h,g),Mn=w,gs=C;break;case 0:case 11:case 14:case 15:if(!Yn&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var M=C,V=M.destroy;M=M.tag,V!==void 0&&((M&2)!==0||(M&4)!==0)&&Ox(g,h,V),C=C.next}while(C!==w)}to(c,h,g);break;case 1:if(!Yn&&(nc(g,h),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(ue){Kr(g,h,ue)}to(c,h,g);break;case 21:to(c,h,g);break;case 22:g.mode&1?(Yn=(w=Yn)||g.memoizedState!==null,to(c,h,g),Yn=w):to(c,h,g);break;default:to(c,h,g)}}function E_(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new TL),h.forEach(function(w){var C=LL.bind(null,c,w);g.has(w)||(g.add(w),w.then(C,C))})}}function xs(c,h){var g=h.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w];try{var M=c,V=h,ue=V;e:for(;ue!==null;){switch(ue.tag){case 5:Mn=ue.stateNode,gs=!1;break e;case 3:Mn=ue.stateNode.containerInfo,gs=!0;break e;case 4:Mn=ue.stateNode.containerInfo,gs=!0;break e}ue=ue.return}if(Mn===null)throw Error(r(160));__(M,V,C),Mn=null,gs=!1;var ye=C.alternate;ye!==null&&(ye.return=null),C.return=null}catch(Pe){Kr(C,h,Pe)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)C_(h,c),h=h.sibling}function C_(c,h){var g=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(xs(h,c),Hs(c),w&4){try{id(3,c,c.return),Zf(3,c)}catch(kt){Kr(c,c.return,kt)}try{id(5,c,c.return)}catch(kt){Kr(c,c.return,kt)}}break;case 1:xs(h,c),Hs(c),w&512&&g!==null&&nc(g,g.return);break;case 5:if(xs(h,c),Hs(c),w&512&&g!==null&&nc(g,g.return),c.flags&32){var C=c.stateNode;try{xt(C,"")}catch(kt){Kr(c,c.return,kt)}}if(w&4&&(C=c.stateNode,C!=null)){var M=c.memoizedProps,V=g!==null?g.memoizedProps:M,ue=c.type,ye=c.updateQueue;if(c.updateQueue=null,ye!==null)try{ue==="input"&&M.type==="radio"&&M.name!=null&&rt(C,M),Mr(ue,V);var Pe=Mr(ue,M);for(V=0;V<ye.length;V+=2){var Ge=ye[V],Ye=ye[V+1];Ge==="style"?kr(C,Ye):Ge==="dangerouslySetInnerHTML"?ur(C,Ye):Ge==="children"?xt(C,Ye):j(C,Ge,Ye,Pe)}switch(ue){case"input":Be(C,M);break;case"textarea":ut(C,M);break;case"select":var Ve=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!M.multiple;var lt=M.value;lt!=null?Me(C,!!M.multiple,lt,!1):Ve!==!!M.multiple&&(M.defaultValue!=null?Me(C,!!M.multiple,M.defaultValue,!0):Me(C,!!M.multiple,M.multiple?[]:"",!1))}C[Yu]=M}catch(kt){Kr(c,c.return,kt)}}break;case 6:if(xs(h,c),Hs(c),w&4){if(c.stateNode===null)throw Error(r(162));C=c.stateNode,M=c.memoizedProps;try{C.nodeValue=M}catch(kt){Kr(c,c.return,kt)}}break;case 3:if(xs(h,c),Hs(c),w&4&&g!==null&&g.memoizedState.isDehydrated)try{$u(h.containerInfo)}catch(kt){Kr(c,c.return,kt)}break;case 4:xs(h,c),Hs(c);break;case 13:xs(h,c),Hs(c),C=c.child,C.flags&8192&&(M=C.memoizedState!==null,C.stateNode.isHidden=M,!M||C.alternate!==null&&C.alternate.memoizedState!==null||(Fx=ve())),w&4&&E_(c);break;case 22:if(Ge=g!==null&&g.memoizedState!==null,c.mode&1?(Yn=(Pe=Yn)||Ge,xs(h,c),Yn=Pe):xs(h,c),Hs(c),w&8192){if(Pe=c.memoizedState!==null,(c.stateNode.isHidden=Pe)&&!Ge&&(c.mode&1)!==0)for(mt=c,Ge=c.child;Ge!==null;){for(Ye=mt=Ge;mt!==null;){switch(Ve=mt,lt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:id(4,Ve,Ve.return);break;case 1:nc(Ve,Ve.return);var yt=Ve.stateNode;if(typeof yt.componentWillUnmount=="function"){w=Ve,g=Ve.return;try{h=w,yt.props=h.memoizedProps,yt.state=h.memoizedState,yt.componentWillUnmount()}catch(kt){Kr(w,g,kt)}}break;case 5:nc(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){O_(Ye);continue}}lt!==null?(lt.return=Ve,mt=lt):O_(Ye)}Ge=Ge.sibling}e:for(Ge=null,Ye=c;;){if(Ye.tag===5){if(Ge===null){Ge=Ye;try{C=Ye.stateNode,Pe?(M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(ue=Ye.stateNode,ye=Ye.memoizedProps.style,V=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,ue.style.display=or("display",V))}catch(kt){Kr(c,c.return,kt)}}}else if(Ye.tag===6){if(Ge===null)try{Ye.stateNode.nodeValue=Pe?"":Ye.memoizedProps}catch(kt){Kr(c,c.return,kt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===c)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===c)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===c)break e;Ge===Ye&&(Ge=null),Ye=Ye.return}Ge===Ye&&(Ge=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:xs(h,c),Hs(c),w&4&&E_(c);break;case 21:break;default:xs(h,c),Hs(c)}}function Hs(c){var h=c.flags;if(h&2){try{e:{for(var g=c.return;g!==null;){if(k_(g)){var w=g;break e}g=g.return}throw Error(r(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(xt(C,""),w.flags&=-33);var M=S_(c);Dx(c,M,C);break;case 3:case 4:var V=w.stateNode.containerInfo,ue=S_(c);Ix(c,ue,V);break;default:throw Error(r(161))}}catch(ye){Kr(c,c.return,ye)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function OL(c,h,g){mt=c,T_(c)}function T_(c,h,g){for(var w=(c.mode&1)!==0;mt!==null;){var C=mt,M=C.child;if(C.tag===22&&w){var V=C.memoizedState!==null||Qf;if(!V){var ue=C.alternate,ye=ue!==null&&ue.memoizedState!==null||Yn;ue=Qf;var Pe=Yn;if(Qf=V,(Yn=ye)&&!Pe)for(mt=C;mt!==null;)V=mt,ye=V.child,V.tag===22&&V.memoizedState!==null?P_(C):ye!==null?(ye.return=V,mt=ye):P_(C);for(;M!==null;)mt=M,T_(M),M=M.sibling;mt=C,Qf=ue,Yn=Pe}A_(c)}else(C.subtreeFlags&8772)!==0&&M!==null?(M.return=C,mt=M):A_(c)}}function A_(c){for(;mt!==null;){var h=mt;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Yn||Zf(5,h);break;case 1:var w=h.stateNode;if(h.flags&4&&!Yn)if(g===null)w.componentDidMount();else{var C=h.elementType===h.type?g.memoizedProps:ms(h.type,g.memoizedProps);w.componentDidUpdate(C,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var M=h.updateQueue;M!==null&&OS(h,M,w);break;case 3:var V=h.updateQueue;if(V!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}OS(h,V,g)}break;case 5:var ue=h.stateNode;if(g===null&&h.flags&4){g=ue;var ye=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&g.focus();break;case"img":ye.src&&(g.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Pe=h.alternate;if(Pe!==null){var Ge=Pe.memoizedState;if(Ge!==null){var Ye=Ge.dehydrated;Ye!==null&&$u(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Yn||h.flags&512&&Px(h)}catch(Ve){Kr(h,h.return,Ve)}}if(h===c){mt=null;break}if(g=h.sibling,g!==null){g.return=h.return,mt=g;break}mt=h.return}}function O_(c){for(;mt!==null;){var h=mt;if(h===c){mt=null;break}var g=h.sibling;if(g!==null){g.return=h.return,mt=g;break}mt=h.return}}function P_(c){for(;mt!==null;){var h=mt;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{Zf(4,h)}catch(ye){Kr(h,g,ye)}break;case 1:var w=h.stateNode;if(typeof w.componentDidMount=="function"){var C=h.return;try{w.componentDidMount()}catch(ye){Kr(h,C,ye)}}var M=h.return;try{Px(h)}catch(ye){Kr(h,M,ye)}break;case 5:var V=h.return;try{Px(h)}catch(ye){Kr(h,V,ye)}}}catch(ye){Kr(h,h.return,ye)}if(h===c){mt=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,mt=ue;break}mt=h.return}}var PL=Math.ceil,e0=A.ReactCurrentDispatcher,Mx=A.ReactCurrentOwner,Xa=A.ReactCurrentBatchConfig,dr=0,Sn=null,en=null,Rn=0,Pa=0,ac=Xi(0),un=0,od=null,Uo=0,t0=0,Rx=0,ld=null,ja=null,Fx=0,sc=1/0,mi=null,r0=!1,$x=null,ro=null,n0=!1,no=null,a0=0,cd=0,Lx=null,s0=-1,i0=0;function la(){return(dr&6)!==0?ve():s0!==-1?s0:s0=ve()}function ao(c){return(c.mode&1)===0?1:(dr&2)!==0&&Rn!==0?Rn&-Rn:mL.transition!==null?(i0===0&&(i0=Sk()),i0):(c=br,c!==0||(c=window.event,c=c===void 0?16:Dk(c.type)),c)}function ys(c,h,g,w){if(50<cd)throw cd=0,Lx=null,Error(r(185));Iu(c,g,w),((dr&2)===0||c!==Sn)&&(c===Sn&&((dr&2)===0&&(t0|=g),un===4&&so(c,Rn)),Na(c,w),g===1&&dr===0&&(h.mode&1)===0&&(sc=ve()+500,Df&&Qi()))}function Na(c,h){var g=c.callbackNode;m$(c,h);var w=mf(c,c===Sn?Rn:0);if(w===0)g!==null&&ce(g),c.callbackNode=null,c.callbackPriority=0;else if(h=w&-w,c.callbackPriority!==h){if(g!=null&&ce(g),h===1)c.tag===0?pL(D_.bind(null,c)):vS(D_.bind(null,c)),uL(function(){(dr&6)===0&&Qi()}),g=null;else{switch(_k(w)){case 1:g=Re;break;case 4:g=st;break;case 16:g=He;break;case 536870912:g=ot;break;default:g=He}g=H_(g,I_.bind(null,c))}c.callbackPriority=h,c.callbackNode=g}}function I_(c,h){if(s0=-1,i0=0,(dr&6)!==0)throw Error(r(327));var g=c.callbackNode;if(ic()&&c.callbackNode!==g)return null;var w=mf(c,c===Sn?Rn:0);if(w===0)return null;if((w&30)!==0||(w&c.expiredLanes)!==0||h)h=o0(c,w);else{h=w;var C=dr;dr|=2;var M=R_();(Sn!==c||Rn!==h)&&(mi=null,sc=ve()+500,qo(c,h));do try{ML();break}catch(ue){M_(c,ue)}while(!0);nx(),e0.current=M,dr=C,en!==null?h=0:(Sn=null,Rn=0,h=un)}if(h!==0){if(h===2&&(C=vg(c),C!==0&&(w=C,h=Bx(c,C))),h===1)throw g=od,qo(c,0),so(c,w),Na(c,ve()),g;if(h===6)so(c,w);else{if(C=c.current.alternate,(w&30)===0&&!IL(C)&&(h=o0(c,w),h===2&&(M=vg(c),M!==0&&(w=M,h=Bx(c,M))),h===1))throw g=od,qo(c,0),so(c,w),Na(c,ve()),g;switch(c.finishedWork=C,c.finishedLanes=w,h){case 0:case 1:throw Error(r(345));case 2:zo(c,ja,mi);break;case 3:if(so(c,w),(w&130023424)===w&&(h=Fx+500-ve(),10<h)){if(mf(c,0)!==0)break;if(C=c.suspendedLanes,(C&w)!==w){la(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=Wg(zo.bind(null,c,ja,mi),h);break}zo(c,ja,mi);break;case 4:if(so(c,w),(w&4194240)===w)break;for(h=c.eventTimes,C=-1;0<w;){var V=31-_t(w);M=1<<V,V=h[V],V>C&&(C=V),w&=~M}if(w=C,w=ve()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*PL(w/1960))-w,10<w){c.timeoutHandle=Wg(zo.bind(null,c,ja,mi),w);break}zo(c,ja,mi);break;case 5:zo(c,ja,mi);break;default:throw Error(r(329))}}}return Na(c,ve()),c.callbackNode===g?I_.bind(null,c):null}function Bx(c,h){var g=ld;return c.current.memoizedState.isDehydrated&&(qo(c,h).flags|=256),c=o0(c,h),c!==2&&(h=ja,ja=g,h!==null&&Ux(h)),c}function Ux(c){ja===null?ja=c:ja.push.apply(ja,c)}function IL(c){for(var h=c;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var C=g[w],M=C.getSnapshot;C=C.value;try{if(!fs(M(),C))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function so(c,h){for(h&=~Rx,h&=~t0,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var g=31-_t(h),w=1<<g;c[g]=-1,h&=~w}}function D_(c){if((dr&6)!==0)throw Error(r(327));ic();var h=mf(c,0);if((h&1)===0)return Na(c,ve()),null;var g=o0(c,h);if(c.tag!==0&&g===2){var w=vg(c);w!==0&&(h=w,g=Bx(c,w))}if(g===1)throw g=od,qo(c,0),so(c,h),Na(c,ve()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,zo(c,ja,mi),Na(c,ve()),null}function Hx(c,h){var g=dr;dr|=1;try{return c(h)}finally{dr=g,dr===0&&(sc=ve()+500,Df&&Qi())}}function Ho(c){no!==null&&no.tag===0&&(dr&6)===0&&ic();var h=dr;dr|=1;var g=Xa.transition,w=br;try{if(Xa.transition=null,br=1,c)return c()}finally{br=w,Xa.transition=g,dr=h,(dr&6)===0&&Qi()}}function qx(){Pa=ac.current,Fr(ac)}function qo(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,cL(g)),en!==null)for(g=en.return;g!==null;){var w=g;switch(Qg(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Pf();break;case 3:tc(),Fr(va),Fr(Wn),dx();break;case 5:cx(w);break;case 4:tc();break;case 13:Fr(Hr);break;case 19:Fr(Hr);break;case 10:ax(w.type._context);break;case 22:case 23:qx()}g=g.return}if(Sn=c,en=c=io(c.current,null),Rn=Pa=h,un=0,od=null,Rx=t0=Uo=0,ja=ld=null,$o!==null){for(h=0;h<$o.length;h++)if(g=$o[h],w=g.interleaved,w!==null){g.interleaved=null;var C=w.next,M=g.pending;if(M!==null){var V=M.next;M.next=C,w.next=V}g.pending=w}$o=null}return c}function M_(c,h){do{var g=en;try{if(nx(),zf.current=Gf,Kf){for(var w=qr.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}Kf=!1}if(Bo=0,kn=cn=qr=null,td=!1,rd=0,Mx.current=null,g===null||g.return===null){un=1,od=h,en=null;break}e:{var M=c,V=g.return,ue=g,ye=h;if(h=Rn,ue.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Pe=ye,Ge=ue,Ye=Ge.tag;if((Ge.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ve=Ge.alternate;Ve?(Ge.updateQueue=Ve.updateQueue,Ge.memoizedState=Ve.memoizedState,Ge.lanes=Ve.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var lt=i_(V);if(lt!==null){lt.flags&=-257,o_(lt,V,ue,M,h),lt.mode&1&&s_(M,Pe,h),h=lt,ye=Pe;var yt=h.updateQueue;if(yt===null){var kt=new Set;kt.add(ye),h.updateQueue=kt}else yt.add(ye);break e}else{if((h&1)===0){s_(M,Pe,h),zx();break e}ye=Error(r(426))}}else if(Lr&&ue.mode&1){var Xr=i_(V);if(Xr!==null){(Xr.flags&65536)===0&&(Xr.flags|=256),o_(Xr,V,ue,M,h),tx(rc(ye,ue));break e}}M=ye=rc(ye,ue),un!==4&&(un=2),ld===null?ld=[M]:ld.push(M),M=V;do{switch(M.tag){case 3:M.flags|=65536,h&=-h,M.lanes|=h;var Ee=n_(M,ye,h);AS(M,Ee);break e;case 1:ue=ye;var we=M.type,Ae=M.stateNode;if((M.flags&128)===0&&(typeof we.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(ro===null||!ro.has(Ae)))){M.flags|=65536,h&=-h,M.lanes|=h;var Ze=a_(M,ue,h);AS(M,Ze);break e}}M=M.return}while(M!==null)}$_(g)}catch(Et){h=Et,en===g&&g!==null&&(en=g=g.return);continue}break}while(!0)}function R_(){var c=e0.current;return e0.current=Gf,c===null?Gf:c}function zx(){(un===0||un===3||un===2)&&(un=4),Sn===null||(Uo&268435455)===0&&(t0&268435455)===0||so(Sn,Rn)}function o0(c,h){var g=dr;dr|=2;var w=R_();(Sn!==c||Rn!==h)&&(mi=null,qo(c,h));do try{DL();break}catch(C){M_(c,C)}while(!0);if(nx(),dr=g,e0.current=w,en!==null)throw Error(r(261));return Sn=null,Rn=0,un}function DL(){for(;en!==null;)F_(en)}function ML(){for(;en!==null&&!fe();)F_(en)}function F_(c){var h=U_(c.alternate,c,Pa);c.memoizedProps=c.pendingProps,h===null?$_(c):en=h,Mx.current=null}function $_(c){var h=c;do{var g=h.alternate;if(c=h.return,(h.flags&32768)===0){if(g=EL(g,h,Pa),g!==null){en=g;return}}else{if(g=CL(g,h),g!==null){g.flags&=32767,en=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{un=6,en=null;return}}if(h=h.sibling,h!==null){en=h;return}en=h=c}while(h!==null);un===0&&(un=5)}function zo(c,h,g){var w=br,C=Xa.transition;try{Xa.transition=null,br=1,RL(c,h,g,w)}finally{Xa.transition=C,br=w}return null}function RL(c,h,g,w){do ic();while(no!==null);if((dr&6)!==0)throw Error(r(327));g=c.finishedWork;var C=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var M=g.lanes|g.childLanes;if(g$(c,M),c===Sn&&(en=Sn=null,Rn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||n0||(n0=!0,H_(He,function(){return ic(),null})),M=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||M){M=Xa.transition,Xa.transition=null;var V=br;br=1;var ue=dr;dr|=4,Mx.current=null,AL(c,g),C_(g,c),rL(zg),yf=!!qg,zg=qg=null,c.current=g,OL(g),ge(),dr=ue,br=V,Xa.transition=M}else c.current=g;if(n0&&(n0=!1,no=c,a0=C),M=c.pendingLanes,M===0&&(ro=null),Nt(g.stateNode),Na(c,ve()),h!==null)for(w=c.onRecoverableError,g=0;g<h.length;g++)C=h[g],w(C.value,{componentStack:C.stack,digest:C.digest});if(r0)throw r0=!1,c=$x,$x=null,c;return(a0&1)!==0&&c.tag!==0&&ic(),M=c.pendingLanes,(M&1)!==0?c===Lx?cd++:(cd=0,Lx=c):cd=0,Qi(),null}function ic(){if(no!==null){var c=_k(a0),h=Xa.transition,g=br;try{if(Xa.transition=null,br=16>c?16:c,no===null)var w=!1;else{if(c=no,no=null,a0=0,(dr&6)!==0)throw Error(r(331));var C=dr;for(dr|=4,mt=c.current;mt!==null;){var M=mt,V=M.child;if((mt.flags&16)!==0){var ue=M.deletions;if(ue!==null){for(var ye=0;ye<ue.length;ye++){var Pe=ue[ye];for(mt=Pe;mt!==null;){var Ge=mt;switch(Ge.tag){case 0:case 11:case 15:id(8,Ge,M)}var Ye=Ge.child;if(Ye!==null)Ye.return=Ge,mt=Ye;else for(;mt!==null;){Ge=mt;var Ve=Ge.sibling,lt=Ge.return;if(N_(Ge),Ge===Pe){mt=null;break}if(Ve!==null){Ve.return=lt,mt=Ve;break}mt=lt}}}var yt=M.alternate;if(yt!==null){var kt=yt.child;if(kt!==null){yt.child=null;do{var Xr=kt.sibling;kt.sibling=null,kt=Xr}while(kt!==null)}}mt=M}}if((M.subtreeFlags&2064)!==0&&V!==null)V.return=M,mt=V;else e:for(;mt!==null;){if(M=mt,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:id(9,M,M.return)}var Ee=M.sibling;if(Ee!==null){Ee.return=M.return,mt=Ee;break e}mt=M.return}}var we=c.current;for(mt=we;mt!==null;){V=mt;var Ae=V.child;if((V.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=V,mt=Ae;else e:for(V=we;mt!==null;){if(ue=mt,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Zf(9,ue)}}catch(Et){Kr(ue,ue.return,Et)}if(ue===V){mt=null;break e}var Ze=ue.sibling;if(Ze!==null){Ze.return=ue.return,mt=Ze;break e}mt=ue.return}}if(dr=C,Qi(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(pt,c)}catch{}w=!0}return w}finally{br=g,Xa.transition=h}}return!1}function L_(c,h,g){h=rc(g,h),h=n_(c,h,1),c=eo(c,h,1),h=la(),c!==null&&(Iu(c,1,h),Na(c,h))}function Kr(c,h,g){if(c.tag===3)L_(c,c,g);else for(;h!==null;){if(h.tag===3){L_(h,c,g);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ro===null||!ro.has(w))){c=rc(g,c),c=a_(h,c,1),h=eo(h,c,1),c=la(),h!==null&&(Iu(h,1,c),Na(h,c));break}}h=h.return}}function FL(c,h,g){var w=c.pingCache;w!==null&&w.delete(h),h=la(),c.pingedLanes|=c.suspendedLanes&g,Sn===c&&(Rn&g)===g&&(un===4||un===3&&(Rn&130023424)===Rn&&500>ve()-Fx?qo(c,0):Rx|=g),Na(c,h)}function B_(c,h){h===0&&((c.mode&1)===0?h=1:(h=pf,pf<<=1,(pf&130023424)===0&&(pf=4194304)));var g=la();c=hi(c,h),c!==null&&(Iu(c,h,g),Na(c,g))}function $L(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),B_(c,g)}function LL(c,h){var g=0;switch(c.tag){case 13:var w=c.stateNode,C=c.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(r(314))}w!==null&&w.delete(h),B_(c,g)}var U_;U_=function(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps||va.current)wa=!0;else{if((c.lanes&g)===0&&(h.flags&128)===0)return wa=!1,_L(c,h,g);wa=(c.flags&131072)!==0}else wa=!1,Lr&&(h.flags&1048576)!==0&&bS(h,Rf,h.index);switch(h.lanes=0,h.tag){case 2:var w=h.type;Jf(c,h),c=h.pendingProps;var C=Gl(h,Wn.current);ec(h,g),C=px(null,h,w,c,C,g);var M=mx();return h.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ba(w)?(M=!0,If(h)):M=!1,h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ox(h),C.updater=Yf,h.stateNode=C,C._reactInternals=h,wx(h,w,c,g),h=Sx(null,h,w,!0,M,g)):(h.tag=0,Lr&&M&&Jg(h),oa(null,h,C,g),h=h.child),h;case 16:w=h.elementType;e:{switch(Jf(c,h),c=h.pendingProps,C=w._init,w=C(w._payload),h.type=w,C=h.tag=UL(w),c=ms(w,c),C){case 0:h=kx(null,h,w,c,g);break e;case 1:h=f_(null,h,w,c,g);break e;case 11:h=l_(null,h,w,c,g);break e;case 14:h=c_(null,h,w,ms(w.type,c),g);break e}throw Error(r(306,w,""))}return h;case 0:return w=h.type,C=h.pendingProps,C=h.elementType===w?C:ms(w,C),kx(c,h,w,C,g);case 1:return w=h.type,C=h.pendingProps,C=h.elementType===w?C:ms(w,C),f_(c,h,w,C,g);case 3:e:{if(p_(h),c===null)throw Error(r(387));w=h.pendingProps,M=h.memoizedState,C=M.element,TS(c,h),Hf(h,w,null,g);var V=h.memoizedState;if(w=V.element,M.isDehydrated)if(M={element:w,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},h.updateQueue.baseState=M,h.memoizedState=M,h.flags&256){C=rc(Error(r(423)),h),h=m_(c,h,w,g,C);break e}else if(w!==C){C=rc(Error(r(424)),h),h=m_(c,h,w,g,C);break e}else for(Oa=Yi(h.stateNode.containerInfo.firstChild),Aa=h,Lr=!0,ps=null,g=ES(h,null,w,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Jl(),w===C){h=pi(c,h,g);break e}oa(c,h,w,g)}h=h.child}return h;case 5:return PS(h),c===null&&ex(h),w=h.type,C=h.pendingProps,M=c!==null?c.memoizedProps:null,V=C.children,Kg(w,C)?V=null:M!==null&&Kg(w,M)&&(h.flags|=32),h_(c,h),oa(c,h,V,g),h.child;case 6:return c===null&&ex(h),null;case 13:return g_(c,h,g);case 4:return lx(h,h.stateNode.containerInfo),w=h.pendingProps,c===null?h.child=Ql(h,null,w,g):oa(c,h,w,g),h.child;case 11:return w=h.type,C=h.pendingProps,C=h.elementType===w?C:ms(w,C),l_(c,h,w,C,g);case 7:return oa(c,h,h.pendingProps,g),h.child;case 8:return oa(c,h,h.pendingProps.children,g),h.child;case 12:return oa(c,h,h.pendingProps.children,g),h.child;case 10:e:{if(w=h.type._context,C=h.pendingProps,M=h.memoizedProps,V=C.value,Cr(Lf,w._currentValue),w._currentValue=V,M!==null)if(fs(M.value,V)){if(M.children===C.children&&!va.current){h=pi(c,h,g);break e}}else for(M=h.child,M!==null&&(M.return=h);M!==null;){var ue=M.dependencies;if(ue!==null){V=M.child;for(var ye=ue.firstContext;ye!==null;){if(ye.context===w){if(M.tag===1){ye=fi(-1,g&-g),ye.tag=2;var Pe=M.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ge=Pe.pending;Ge===null?ye.next=ye:(ye.next=Ge.next,Ge.next=ye),Pe.pending=ye}}M.lanes|=g,ye=M.alternate,ye!==null&&(ye.lanes|=g),sx(M.return,g,h),ue.lanes|=g;break}ye=ye.next}}else if(M.tag===10)V=M.type===h.type?null:M.child;else if(M.tag===18){if(V=M.return,V===null)throw Error(r(341));V.lanes|=g,ue=V.alternate,ue!==null&&(ue.lanes|=g),sx(V,g,h),V=M.sibling}else V=M.child;if(V!==null)V.return=M;else for(V=M;V!==null;){if(V===h){V=null;break}if(M=V.sibling,M!==null){M.return=V.return,V=M;break}V=V.return}M=V}oa(c,h,C.children,g),h=h.child}return h;case 9:return C=h.type,w=h.pendingProps.children,ec(h,g),C=Ga(C),w=w(C),h.flags|=1,oa(c,h,w,g),h.child;case 14:return w=h.type,C=ms(w,h.pendingProps),C=ms(w.type,C),c_(c,h,w,C,g);case 15:return u_(c,h,h.type,h.pendingProps,g);case 17:return w=h.type,C=h.pendingProps,C=h.elementType===w?C:ms(w,C),Jf(c,h),h.tag=1,ba(w)?(c=!0,If(h)):c=!1,ec(h,g),t_(h,w,C),wx(h,w,C,g),Sx(null,h,w,!0,c,g);case 19:return y_(c,h,g);case 22:return d_(c,h,g)}throw Error(r(156,h.tag))};function H_(c,h){return le(c,h)}function BL(c,h,g,w){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(c,h,g,w){return new BL(c,h,g,w)}function Kx(c){return c=c.prototype,!(!c||!c.isReactComponent)}function UL(c){if(typeof c=="function")return Kx(c)?1:0;if(c!=null){if(c=c.$$typeof,c===I)return 11;if(c===Y)return 14}return 2}function io(c,h){var g=c.alternate;return g===null?(g=Ja(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function l0(c,h,g,w,C,M){var V=2;if(w=c,typeof c=="function")Kx(c)&&(V=1);else if(typeof c=="string")V=5;else e:switch(c){case _:return Ko(g.children,C,M,h);case T:V=8,C|=8;break;case D:return c=Ja(12,g,h,C|2),c.elementType=D,c.lanes=M,c;case B:return c=Ja(13,g,h,C),c.elementType=B,c.lanes=M,c;case z:return c=Ja(19,g,h,C),c.elementType=z,c.lanes=M,c;case X:return c0(g,C,M,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case F:V=10;break e;case P:V=9;break e;case I:V=11;break e;case Y:V=14;break e;case re:V=16,w=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Ja(V,g,h,C),h.elementType=c,h.type=w,h.lanes=M,h}function Ko(c,h,g,w){return c=Ja(7,c,w,h),c.lanes=g,c}function c0(c,h,g,w){return c=Ja(22,c,w,h),c.elementType=X,c.lanes=g,c.stateNode={isHidden:!1},c}function Wx(c,h,g){return c=Ja(6,c,null,h),c.lanes=g,c}function Vx(c,h,g){return h=Ja(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function HL(c,h,g,w,C){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bg(0),this.expirationTimes=bg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bg(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Gx(c,h,g,w,C,M,V,ue,ye){return c=new HL(c,h,g,ue,ye),h===1?(h=1,M===!0&&(h|=8)):h=0,M=Ja(3,null,null,h),c.current=M,M.stateNode=c,M.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},ox(M),c}function qL(c,h,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:w==null?null:""+w,children:c,containerInfo:h,implementation:g}}function q_(c){if(!c)return Ji;c=c._reactInternals;e:{if(oe(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ba(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(ba(g))return xS(c,g,h)}return h}function z_(c,h,g,w,C,M,V,ue,ye){return c=Gx(g,w,!0,c,C,M,V,ue,ye),c.context=q_(null),g=c.current,w=la(),C=ao(g),M=fi(w,C),M.callback=h??null,eo(g,M,C),c.current.lanes=C,Iu(c,C,w),Na(c,w),c}function u0(c,h,g,w){var C=h.current,M=la(),V=ao(C);return g=q_(g),h.context===null?h.context=g:h.pendingContext=g,h=fi(M,V),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=eo(C,h,V),c!==null&&(ys(c,C,V,M),Uf(c,C,V)),V}function d0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function K_(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function Yx(c,h){K_(c,h),(c=c.alternate)&&K_(c,h)}function zL(){return null}var W_=typeof reportError=="function"?reportError:function(c){console.error(c)};function Xx(c){this._internalRoot=c}h0.prototype.render=Xx.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));u0(c,h,null,null)},h0.prototype.unmount=Xx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Ho(function(){u0(null,c,null,null)}),h[li]=null}};function h0(c){this._internalRoot=c}h0.prototype.unstable_scheduleHydration=function(c){if(c){var h=Tk();c={blockedOn:null,target:c,priority:h};for(var g=0;g<Wi.length&&h!==0&&h<Wi[g].priority;g++);Wi.splice(g,0,c),g===0&&Pk(c)}};function Jx(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function f0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function V_(){}function KL(c,h,g,w,C){if(C){if(typeof w=="function"){var M=w;w=function(){var Pe=d0(V);M.call(Pe)}}var V=z_(h,w,c,0,null,!1,!1,"",V_);return c._reactRootContainer=V,c[li]=V.current,Vu(c.nodeType===8?c.parentNode:c),Ho(),V}for(;C=c.lastChild;)c.removeChild(C);if(typeof w=="function"){var ue=w;w=function(){var Pe=d0(ye);ue.call(Pe)}}var ye=Gx(c,0,!1,null,null,!1,!1,"",V_);return c._reactRootContainer=ye,c[li]=ye.current,Vu(c.nodeType===8?c.parentNode:c),Ho(function(){u0(h,ye,g,w)}),ye}function p0(c,h,g,w,C){var M=g._reactRootContainer;if(M){var V=M;if(typeof C=="function"){var ue=C;C=function(){var ye=d0(V);ue.call(ye)}}u0(h,V,c,C)}else V=KL(g,h,c,C,w);return d0(V)}Ek=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var g=Pu(h.pendingLanes);g!==0&&(wg(h,g|1),Na(h,ve()),(dr&6)===0&&(sc=ve()+500,Qi()))}break;case 13:Ho(function(){var w=hi(c,1);if(w!==null){var C=la();ys(w,c,1,C)}}),Yx(c,1)}},jg=function(c){if(c.tag===13){var h=hi(c,134217728);if(h!==null){var g=la();ys(h,c,134217728,g)}Yx(c,134217728)}},Ck=function(c){if(c.tag===13){var h=ao(c),g=hi(c,h);if(g!==null){var w=la();ys(g,c,h,w)}Yx(c,h)}},Tk=function(){return br},Ak=function(c,h){var g=br;try{return br=c,h()}finally{br=g}},Ne=function(c,h,g){switch(h){case"input":if(Be(c,g),h=g.name,g.type==="radio"&&h!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var w=g[h];if(w!==c&&w.form===c.form){var C=Of(w);if(!C)throw Error(r(90));O(w),Be(w,C)}}}break;case"textarea":ut(c,g);break;case"select":h=g.value,h!=null&&Me(c,!!g.multiple,h,!1)}},St=Hx,Kt=Ho;var WL={usingClientEntryPoint:!1,Events:[Xu,Wl,Of,It,Ue,Hx]},ud={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VL={bundleType:ud.bundleType,version:ud.version,rendererPackageName:ud.rendererPackageName,rendererConfig:ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=q(c),c===null?null:c.stateNode},findFiberByHostInstance:ud.findFiberByHostInstance||zL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{pt=m0.inject(VL),Ct=m0}catch{}}return ka.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WL,ka.createPortal=function(c,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jx(h))throw Error(r(200));return qL(c,h,null,g)},ka.createRoot=function(c,h){if(!Jx(c))throw Error(r(299));var g=!1,w="",C=W_;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(C=h.onRecoverableError)),h=Gx(c,1,!1,null,null,g,!1,w,C),c[li]=h.current,Vu(c.nodeType===8?c.parentNode:c),new Xx(h)},ka.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=q(h),c=c===null?null:c.stateNode,c},ka.flushSync=function(c){return Ho(c)},ka.hydrate=function(c,h,g){if(!f0(h))throw Error(r(200));return p0(null,c,h,!0,g)},ka.hydrateRoot=function(c,h,g){if(!Jx(c))throw Error(r(405));var w=g!=null&&g.hydratedSources||null,C=!1,M="",V=W_;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onRecoverableError!==void 0&&(V=g.onRecoverableError)),h=z_(h,null,c,1,g??null,C,!1,M,V),c[li]=h.current,Vu(c),w)for(c=0;c<w.length;c++)g=w[c],C=g._getVersion,C=C(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,C]:h.mutableSourceEagerHydrationData.push(g,C);return new h0(h)},ka.render=function(c,h,g){if(!f0(h))throw Error(r(200));return p0(null,c,h,!1,g)},ka.unmountComponentAtNode=function(c){if(!f0(c))throw Error(r(40));return c._reactRootContainer?(Ho(function(){p0(null,null,c,!1,function(){c._reactRootContainer=null,c[li]=null})}),!0):!1},ka.unstable_batchedUpdates=Hx,ka.unstable_renderSubtreeIntoContainer=function(c,h,g,w){if(!f0(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return p0(c,h,g,!1,w)},ka.version="18.3.1-next-f1338f8080-20240426",ka}var tE;function eI(){if(tE)return ey.exports;tE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ey.exports=t7(),ey.exports}var rE;function r7(){if(rE)return x0;rE=1;var e=eI();return x0.createRoot=e.createRoot,x0.hydrateRoot=e.hydrateRoot,x0}var n7=r7(),U=A2();const de=vr(U),a7=YL({__proto__:null,default:de},[U]),wm={fresh_produce:" Fresh Produce",spices_seasonings:" Spices & Seasonings",dairy:" Dairy Products",meat:" Meat & Protein",packaging:" Packaging Materials",gas_utilities:" Gas & Utilities",production:" Production Ingredients",staff_essentials:" Staff Essentials"},nE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],gas_utilities:["LPG Gas"],production:["Dough","Batter","Stuffing"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},O2={fuel:" Fuel Cost",travel:" Travel Cost",transportation:" Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",miscellaneous:" Miscellaneous Cost"},P2={electricity:" Electricity",rent:" Rent"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),aE=e=>{const t=i7(e);return t.charAt(0).toUpperCase()+t.slice(1)},tI=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},u)=>U.createElement("svg",{ref:u,...o7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:tI("lucide",s),...l},[...o.map(([d,f])=>U.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(e,t)=>{const r=U.forwardRef(({className:n,...s},i)=>U.createElement(l7,{ref:i,iconNode:t,className:tI(`lucide-${s7(aE(e))}`,`lucide-${e}`,n),...s}));return r.displayName=aE(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Aw=at("activity",c7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],d7=at("arrow-right",u7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],sE=at("award",h7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Y0=at("bell",f7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],X0=at("briefcase",p7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],J0=at("bug",m7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],vo=at("building-2",g7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wr=at("calendar",x7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],v7=at("chart-column",y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xd=at("check",b7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],j7=at("chef-hat",w7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jm=at("chevron-down",N7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ow=at("chevron-left",k7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bo=at("chevron-right",S7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rI=at("chevron-up",_7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],C7=at("circle-arrow-down",E7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ir=at("circle-alert",T7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],iE=at("circle-arrow-up",A7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],er=at("circle-check-big",O7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ms=at("circle-x",P7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ny=at("clipboard-check",I7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],M7=at("clipboard-list",D7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Pn=at("clock",R7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$7=at("copy",F7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],An=at("dollar-sign",L7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ks=at("download",B7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pw=at("eye",U7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Un=at("factory",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Q0=at("file-spreadsheet",q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ei=at("file-text",z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],W7=at("hash",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],G7=at("key-round",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],X7=at("key",Y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Q7=at("layers",J7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],e9=at("loader",Z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Iw=at("lock",t9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],n9=at("log-in",r9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],y0=at("log-out",a9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Jd=at("mail",s9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],I2=at("map-pin",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],oE=at("menu",o9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],nI=at("network",l9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rr=at("package",c9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ji=at("pen",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],v0=at("phone",d9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wo=at("plus",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],p9=at("receipt",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Z0=at("refresh-cw",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gl=at("save",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],y9=at("search",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ep=at("send",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nm=at("settings",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],j9=at("shopping-bag",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],vc=at("shopping-cart",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],S9=at("smartphone",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],E9=at("soup",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fa=at("square-check-big",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Dw=at("square-pen",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Pi=at("store",A9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],P9=at("table",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],D2=at("target",I9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],is=at("trash-2",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],M2=at("trending-down",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Qr=at("trending-up",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gn=at("triangle-alert",F9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Mw=at("trophy",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],lE=at("truck",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],jd=at("upload",B9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],H9=at("user-check",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Es=at("user-cog",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vs=at("user-plus",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],W9=at("user-x",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ra=at("user",V9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],yn=at("users",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],bi=at("wallet",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wn=at("x",X9),Ys="xssxnhrzxvtejavoqgwg",Xs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function km(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function J9(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(n.next(f))}catch(p){o(p)}}function u(f){try{d(n.throw(f))}catch(p){o(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,u)}d((n=n.apply(e,t||[])).next())})}const Q9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class R2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Z9 extends R2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cE extends R2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class uE extends R2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Rw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Rw||(Rw={}));class eB{constructor(t,{headers:r={},customFetch:n,region:s=Rw.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Q9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return J9(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:u,body:d,signal:f,timeout:p}=n;let m={},{region:x}=n;x||(x=this.region);const b=new URL(`${this.url}/${r}`);x&&x!=="any"&&(m["x-region"]=x,b.searchParams.set("forceFunctionRegion",x));let y;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;let v=f;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),f?(v=o.signal,f.addEventListener("abort",()=>o.abort())):v=o.signal);const N=yield this.fetch(b.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y,signal:v}).catch(S=>{throw new Z9(S)}),k=N.headers.get("x-relay-error");if(k&&k==="true")throw new cE(N);if(!N.ok)throw new uE(N);let j=((s=N.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),A;return j==="application/json"?A=yield N.json():j==="application/octet-stream"||j==="application/pdf"?A=yield N.blob():j==="text/event-stream"?A=N:j==="multipart/form-data"?A=yield N.formData():A=yield N.text(),{data:A,error:null,response:N}}catch(l){return{data:null,error:l,response:l instanceof uE||l instanceof cE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var tB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},rB=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,u=null,d=i.status,f=i.statusText;if(i.ok){var p,m;if(r.method!=="HEAD"){var x;const N=await i.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=N:l=JSON.parse(N))}const y=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),v=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");y&&v&&v.length>1&&(u=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,d=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,f="OK")}catch{i.status===404&&y===""?(d=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,d=200,f="OK"),o&&r.shouldThrowOnError)throw new tB(o)}return{error:o,data:l,count:u,status:d,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const u=i?.cause;if(u){var d,f,p,m;const b=(d=u?.message)!==null&&d!==void 0?d:"",y=(f=u?.code)!==null&&f!==void 0?f:"";l=`${(p=i?.name)!==null&&p!==void 0?p:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(m=u?.name)!==null&&m!==void 0?m:"Error"}: ${b}`,y&&(l+=` (${y})`),u?.stack&&(l+=`
${u.stack}`)}else{var x;l=(x=i?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},nB=class extends rB{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const dE=new RegExp("[,()]");var bc=class extends nB{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&dE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&dE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},aB=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new bc({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new bc({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new bc({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new bc({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new bc({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},sB=class aI{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new aB(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new aI(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${t}`);let d;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{u.searchParams.append(p,m)})):(l="POST",d=r);const f=new Headers(this.headers);return i&&f.set("Prefer",`count=${i}`),new bc({method:l,url:u,headers:f,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class iB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oB="2.89.0",lB=`realtime-js/${oB}`,sI="1.0.0",cB="2.0.0",hE=sI,Fw=1e4,uB=1e3,dB=100;var uo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(uo||(uo={}));var pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pn||(pn={}));var ks;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ks||(ks={}));var $w;(function(e){e.websocket="websocket"})($w||($w={}));var tl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tl||(tl={}));class hB{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(f).length===0?"":JSON.stringify(f);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+p.length,x=new ArrayBuffer(this.HEADER_LENGTH+m);let b=new DataView(x),y=0;b.setUint8(y++,this.KINDS.userBroadcastPush),b.setUint8(y++,u.length),b.setUint8(y++,l.length),b.setUint8(y++,o.length),b.setUint8(y++,d.length),b.setUint8(y++,p.length),b.setUint8(y++,r),Array.from(u,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(l,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(o,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(d,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(p,N=>b.setUint8(y++,N.charCodeAt(0)));var v=new Uint8Array(x.byteLength+n.byteLength);return v.set(new Uint8Array(x),0),v.set(new Uint8Array(n),x.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,u]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const d=n.decode(t.slice(u,u+s));u=u+s;const f=n.decode(t.slice(u,u+i));u=u+i;const p=n.decode(t.slice(u,u+o));u=u+o;const m=t.slice(u,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,b={type:this.BROADCAST_EVENT,event:f,payload:x};return o>0&&(b.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class iI{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Tr||(Tr={}));const fE=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=fB(o,e,t,s),i),{}):{}},fB=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!n.includes(i)?oI(i,o):Lw(o)},oI=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return xB(t,r)}switch(e){case Tr.bool:return pB(t);case Tr.float4:case Tr.float8:case Tr.int2:case Tr.int4:case Tr.int8:case Tr.numeric:case Tr.oid:return mB(t);case Tr.json:case Tr.jsonb:return gB(t);case Tr.timestamp:return yB(t);case Tr.abstime:case Tr.date:case Tr.daterange:case Tr.int4range:case Tr.int8range:case Tr.money:case Tr.reltime:case Tr.text:case Tr.time:case Tr.timestamptz:case Tr.timetz:case Tr.tsrange:case Tr.tstzrange:return Lw(t);default:return Lw(t)}},Lw=e=>e,pB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},mB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},xB=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>oI(t,l))}return e},yB=e=>typeof e=="string"?e.replace(" ","T"):e,lI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ay{constructor(t,r,n={},s=Fw){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var pE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(pE||(pE={}));class Od{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Od.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=Od.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Od.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(d,f)=>{o[d]||(u[d]=f)}),this.map(o,(d,f)=>{const p=i[d];if(p){const m=f.map(v=>v.presence_ref),x=p.map(v=>v.presence_ref),b=f.filter(v=>x.indexOf(v.presence_ref)<0),y=p.filter(v=>m.indexOf(v.presence_ref)<0);b.length>0&&(l[d]=b),y.length>0&&(u[d]=y)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),f.length>0){const p=t[l].map(x=>x.presence_ref),m=f.filter(x=>p.indexOf(x.presence_ref)<0);t[l].unshift(...m)}n(l,f,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const f=u.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),t[l]=d,s(l,d,u),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mE||(mE={}));var Pd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Pd||(Pd={}));var yi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yi||(yi={}));class kc{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ay(this,ks.join,this.params,this.timeout),this.rejoinTimer=new iI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ks.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Od(this),this.broadcastEndpointURL=lI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pn.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Pd.PRESENCE]&&this.bindings[Pd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t?.(yi.CHANNEL_ERROR,x)),this._onClose(()=>t?.(yi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t?.(yi.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(b=y?.length)!==null&&b!==void 0?b:0,N=[];for(let k=0;k<v;k++){const j=y[k],{filter:{event:A,schema:S,table:E,filter:_}}=j,T=x&&x[k];if(T&&T.event===A&&kc.isFilterValueEqual(T.schema,S)&&kc.isFilterValueEqual(T.table,E)&&kc.isFilterValueEqual(T.filter,_))N.push(Object.assign(Object.assign({},j),{id:T.id}));else{this.unsubscribe(),this.state=pn.errored,t?.(yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(yi.SUBSCRIBED);return}}).receive("error",x=>{this.state=pn.errored,t?.(yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t?.(yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===pn.joined&&t===Pd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ks.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ay(this,ks.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ay(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>dB){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:f}=ks;if(n&&[l,u,d,f].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,y,v;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(y=x.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(x=>x.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var b,y,v,N,k,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const A=x.id,S=(b=x.filter)===null||b===void 0?void 0:b.event;return A&&((y=r.ids)===null||y===void 0?void 0:y.includes(A))&&(S==="*"||S?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const A=(k=(N=x?.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((j=r?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const b=m.data,{schema:y,table:v,commit_timestamp:N,type:k,errors:j}=b;m=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:N,eventType:k,new:{},old:{},errors:j}),this._getPayloadRecords(b))}x.callback(m,n)})}_isClosed(){return this.state===pn.closed}_isJoined(){return this.state===pn.joined}_isJoining(){return this.state===pn.joining}_isLeaving(){return this.state===pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&kc.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ks.close,{},t)}_onError(t){this._on(ks.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=fE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=fE(t.columns,t.old_record)),r}}const sy=()=>{},b0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vB=[1e3,2e3,5e3,1e4],bB=1e4,wB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jB{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fw,this.transport=null,this.heartbeatIntervalMs=b0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sy,this.ref=0,this.reconnectTimer=null,this.vsn=hE,this.logger=sy,this.conn=null,this.sendBuffer=[],this.serializer=new hB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${$w.websocket}`,this.httpEndpoint=lI(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case uo.connecting:return tl.Connecting;case uo.open:return tl.Open;case uo.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new kc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(uB,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},b0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===uo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===uo.open||this.conn.readyState===uo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ks.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([wB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:lB};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(ks.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new iI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},b0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,u,d,f,p,m,x;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:Fw,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:b0.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:sy,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:hE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(b=>vB[b-1]||bB),this.vsn){case sI:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((b,y)=>y(JSON.stringify(b))),this.decode=(p=t?.decode)!==null&&p!==void 0?p:((b,y)=>y(JSON.parse(b)));break;case cB:this.encode=(m=t?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Qd=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function NB(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function kB(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function SB(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=NB(e.baseUrl,n,s),u=await kB(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),f=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),m=p&&f?JSON.parse(f):f;if(!d.ok){const x=p?m:void 0,b=x?.error;throw new Qd(b?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:b?.type,icebergCode:b?.code,details:x})}return{status:d.status,headers:d.headers,data:m}}}}function w0(e){return e.join("")}var _B=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:w0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${w0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${w0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${w0(e.namespace)}`}),!0}catch(t){if(t instanceof Qd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Qd&&r.status===409)return;throw r}}};function oc(e){return e.join("")}var EB=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Qd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Qd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},CB=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=SB({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new _B(this.client,t),this.tableOps=new EB(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Sm=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function zr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var TB=class extends Sm{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bw=class extends Sm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const F2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),AB=()=>Response,Uw=e=>{if(Array.isArray(e))return e.map(r=>Uw(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Uw(n)}),t},OB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},PB=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function IB(e,t){if(Zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DB(e){var t=IB(e,"string");return Zd(t)=="symbol"?t:t+""}function MB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(r),!0).forEach(function(n){MB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const iy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},RB=async(e,t,r)=>{e instanceof await AB()&&!r?.noResolveJson?e.json().then(n=>{const s=e.status||500,i=n?.statusCode||s+"";t(new TB(iy(n),s,i))}).catch(n=>{t(new Bw(iy(n),n))}):t(new Bw(iy(e),e))},FB=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||!n?s:(OB(n)?(s.headers=Lt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,t?.duplex&&(s.duplex=t.duplex),Lt(Lt({},s),r))};async function Jh(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,FB(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>RB(u,l,n))})}async function eh(e,t,r,n){return Jh(e,"GET",t,r,n)}async function Ns(e,t,r,n,s){return Jh(e,"POST",t,n,s,r)}async function Hw(e,t,r,n,s){return Jh(e,"PUT",t,n,s,r)}async function $B(e,t,r,n){return Jh(e,"HEAD",t,Lt(Lt({},r),{},{noResolveJson:!0}),n)}async function $2(e,t,r,n,s){return Jh(e,"DELETE",t,n,s,r)}var LB=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zr(t))return{data:null,error:t};throw t}}};let cI;cI=Symbol.toStringTag;var BB=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[cI]="BlobDownloadBuilder",this.promise=null}asStream(){return new LB(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zr(t))return{data:null,error:t};throw t}}};const UB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var HB=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=F2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=Lt(Lt({},xE),n);let l=Lt(Lt({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(l=Lt(Lt({},l),n.headers));const d=s._removeEmptyFolders(t),f=s._getFinalPath(d),p=await(e=="PUT"?Hw:Ns)(s.fetch,`${s.url}/object/${f}`,i,Lt({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(zr(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let u;const d=Lt({upsert:xE.upsert},n),f=Lt(Lt({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType),{data:{path:i,fullPath:(await Hw(s.fetch,l.toString(),u,{headers:f})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(zr(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=Lt({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await Ns(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Sm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Ns(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zr(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Ns(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zr(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Ns(n.fetch,`${n.url}/object/sign/${s}`,Lt({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zr(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Ns(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Lt(Lt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zr(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>eh(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new BB(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Uw(await eh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await $B(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zr(n)&&n instanceof Bw){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await $2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=Lt(Lt(Lt({},UB),t),{},{prefix:e||""});return{data:await Ns(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zr(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=Lt({},e);return{data:await Ns(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const uI="2.89.0",dI={"X-Client-Info":`storage-js/${uI}`};var qB=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Lt(Lt({},dI),t),this.fetch=F2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await eh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await eh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Ns(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Hw(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Ns(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await $2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},zB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Lt(Lt({},dI),t),this.fetch=F2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ns(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await eh(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await $2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!PB(e))throw new Sm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new CB({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const L2={"X-Client-Info":`storage-js/${uI}`,"Content-Type":"application/json"};var hI=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function La(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var oy=class extends hI{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},KB=class extends hI{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const B2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),WB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yE=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VB=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=i?.statusCode||i?.code||n+"";t(new oy(yE(i),n,o))}).catch(()=>{const i=n+"";t(new oy(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new oy(s.statusText||`HTTP ${n} error`,n,i))}}else t(new KB(yE(e),e))},GB=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return n?(WB(n)?(s.headers=Lt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,Lt(Lt({},s),r)):s};async function YB(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,GB(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>VB(u,l,n))})}async function Ba(e,t,r,n,s){return YB(e,"POST",t,n,s,r)}var XB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Lt(Lt({},L2),t),this.fetch=B2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Ba(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Ba(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}},JB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Lt(Lt({},L2),t),this.fetch=B2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ba(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Ba(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ba(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}},QB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Lt(Lt({},L2),t),this.fetch=B2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Ba(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}},ZB=class extends QB{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new eU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},eU=class extends XB{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new tU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},tU=class extends JB{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Lt(Lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},rU=class extends qB{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new HB(this.url,this.headers,e,this.fetch)}get vectors(){return new ZB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zB(this.url+"/iceberg",this.headers,this.fetch)}};const fI="2.89.0",wc=30*1e3,qw=3,ly=qw*wc,nU="http://localhost:9999",aU="supabase.auth.token",sU={"X-Client-Info":`gotrue-js/${fI}`},zw="X-Supabase-Api-Version",pI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oU=600*1e3;class th extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Tt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lU extends th{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cU(e){return Tt(e)&&e.name==="AuthApiError"}class rl extends th{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class $i extends th{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ia extends $i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uU(e){return Tt(e)&&e.name==="AuthSessionMissingError"}class lc extends $i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class j0 extends $i{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class N0 extends $i{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dU(e){return Tt(e)&&e.name==="AuthImplicitGrantRedirectError"}class vE extends $i{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hU extends $i{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Kw extends $i{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function cy(e){return Tt(e)&&e.name==="AuthRetryableFetchError"}class bE extends $i{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Ww extends $i{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wE=` 	
\r=`.split(""),fU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<wE.length;t+=1)e[wE[t].charCodeAt(0)]=-2;for(let t=0;t<tp.length;t+=1)e[tp[t].charCodeAt(0)]=t;return e})();function jE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tp[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(tp[n]),t.queuedBits-=6}}function mI(e,t,r){const n=fU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function NE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{gU(o,n,r)};for(let o=0;o<e.length;o+=1)mI(e.charCodeAt(o),s,i);return t.join("")}function pU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}pU(n,t)}}function gU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Oc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)mI(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xU(e){const t=[];return mU(e,r=>t.push(r)),new Uint8Array(t)}function sl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>jE(s,r,n)),jE(null,r,n),t.join("")}function yU(e){return Math.round(Date.now()/1e3)+e}function vU(){return Symbol("auth-callback")}const $n=()=>typeof window<"u"&&typeof document<"u",Wo={tested:!1,writable:!1},gI=()=>{if(!$n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wo.tested)return Wo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wo.tested=!0,Wo.writable=!0}catch{Wo.tested=!0,Wo.writable=!1}return Wo.writable};function bU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const xI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Vo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fn=async(e,t)=>{await e.removeItem(t)};class _m{constructor(){this.promise=new _m.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}_m.promiseConstructor=Promise;function uy(e){const t=e.split(".");if(t.length!==3)throw new Ww("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!iU.test(t[n]))throw new Ww("JWT not in base64url format");return{header:JSON.parse(NE(t[0])),payload:JSON.parse(NE(t[1])),signature:Oc(t[2]),raw:{header:t[0],payload:t[1]}}}async function jU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function NU(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function kU(e){return("0"+e.toString(16)).substr(-2)}function SU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,kU).join("")}async function _U(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function EU(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await _U(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cc(e,t,r=!1){const n=SU();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await jc(e,`${t}-code-verifier`,s);const i=await EU(n);return[i,n===i?"plain":"s256"]}const CU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TU(e){const t=e.headers.get(zw);if(!t||!t.match(CU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AU(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function OU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function uc(e){if(!PU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IU(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function kE(e){return JSON.parse(JSON.stringify(e))}const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DU=[502,503,504];async function SE(e){var t;if(!wU(e))throw new Kw(Qo(e),0);if(DU.includes(e.status))throw new Kw(Qo(e),e.status);let r;try{r=await e.json()}catch(i){throw new rl(Qo(i),i)}let n;const s=TU(e);if(s&&s.getTime()>=pI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new bE(Qo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ia}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new bE(Qo(r),e.status,r.weak_password.reasons);throw new lU(Qo(r),e.status||500,n)}const MU=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function $t(e,t,r,n){var s;const i=Object.assign({},n?.headers);i[zw]||(i[zw]=pI["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await RU(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function RU(e,t,r,n,s,i){const o=MU(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new Kw(Qo(u),0)}if(l.ok||await SE(l),n?.noResolveJson)return l;try{return await l.json()}catch(u){await SE(u)}}function js(e){var t;let r=null;LU(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=yU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function _E(e){const t=js(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FU(e){return{data:e,error:null}}function $U(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=km(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function EE(e){return e}function LU(e){return e.access_token&&e.refresh_token&&e.expires_in}const hy=["global","local","others"];class BU{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xI(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=hy[0]){if(hy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hy.join(", ")}`);try{return await $t(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Tt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await $t(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fo})}catch(n){if(Tt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=km(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await $t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$U,redirectTo:r?.redirectTo})}catch(r){if(Tt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fo})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await $t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:EE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);d[`${v}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Tt(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){uc(t);try{return await $t(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fo})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){uc(t);try{return await $t(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fo})}catch(n){if(Tt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){uc(t);try{return await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fo})}catch(n){if(Tt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){uc(t.userId);try{const{data:r,error:n}=await $t(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){uc(t.userId),uc(t.id);try{return{data:await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:EE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);d[`${v}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Tt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await $t(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Tt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await $t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Tt(r))return{data:null,error:r};throw r}}}function CE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const dc={debug:!!(globalThis&&gI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yI extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class UU extends yI{}async function HU(e,t,r){dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),dc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw dc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new UU(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(dc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function qU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vI(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function zU(e){return parseInt(e,16)}function KU(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function WU(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:f,uri:p,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=vI(e.address),b=f?`${f}://${n}`:n,y=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${x}

${y}`;let N=`URI: ${p}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),l&&(N+=`
Not Before: ${l.toISOString()}`),u&&(N+=`
Request ID: ${u}`),d){let k=`
Resources:`;for(const j of d){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);k+=`
- ${j}`}N+=k}return`${v}
${N}`}class sn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class rp extends sn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function VU({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(bI(o)){if(i.rp.id!==o)return new sn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function GU({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(bI(n)){if(r.rpId!==n)return new sn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class YU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const XU=new YU;function JU(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=km(e,["challenge","user","excludeCredentials"]),i=Oc(t).buffer,o=Object.assign(Object.assign({},r),{id:Oc(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Oc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function QU(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=km(e,["challenge","allowCredentials"]),s=Oc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Oc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function ZU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:sl(new Uint8Array(e.response.attestationObject)),clientDataJSON:sl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:sl(new Uint8Array(s.authenticatorData)),clientDataJSON:sl(new Uint8Array(s.clientDataJSON)),signature:sl(new Uint8Array(s.signature)),userHandle:s.userHandle?sl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bI(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function TE(){var e,t;return!!($n()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tH(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rp("Browser returned unexpected credential type",t)}:{data:null,error:new rp("Empty credential response",t)}}catch(t){return{data:null,error:VU({error:t,options:e})}}}async function rH(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rp("Browser returned unexpected credential type",t)}:{data:null,error:new rp("Empty credential response",t)}}catch(t){return{data:null,error:GU({error:t,options:e})}}}const nH={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},aH={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function np(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=np(l,o):n[i]=np(o)}else n[i]=o}return n}function sH(e,t){return np(nH,e,t||{})}function iH(e,t){return np(aH,e,t||{})}class oH{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=s??XU.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=sH(o.webauthn.credential_options.publicKey,i?.create),{data:f,error:p}=await tH({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const d=iH(o.webauthn.credential_options.publicKey,i?.request),{data:f,error:p}=await rH(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(o){return Tt(o)?{data:null,error:o}:{data:null,error:new rl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new th("rpId is required for WebAuthn authentication")};try{if(!TE())return{data:null,error:new rl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return Tt(o)?{data:null,error:o}:{data:null,error:new rl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new th("rpId is required for WebAuthn registration")};try{if(!TE())return{data:null,error:new rl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Tt(o)?{data:null,error:o}:{data:null,error:new rl("Unexpected error in register",o)}}}}qU();const lH={url:nU,storageKey:aU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function AE(e,t,r){return await r()}const hc={};class rh{get jwks(){var t,r;return(r=(t=hc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){hc[this.storageKey]=Object.assign(Object.assign({},hc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=hc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){hc[this.storageKey]=Object.assign(Object.assign({},hc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},lH),t);if(this.storageKey=i.storageKey,this.instanceID=(r=rh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,rh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&$n()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new BU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xI(i.fetch),this.lock=i.lock||AE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&$n()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=HU:this.lock=AE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oH(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:gI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=CE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=CE(this.memoryStorage)),$n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${fI}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if($n()&&(r=bU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),$n()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),dU(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Tt(r)?this._returnResult({error:r}):this._returnResult({error:new rl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:js}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:m}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await cc(this.storage,this.storageKey)),i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:f,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:x,code_challenge_method:b},xform:js})}else if("phone"in t){const{phone:f,password:p,options:m}=t;i=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:js})}else throw new j0("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_E})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_E})}else throw new j0("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new lc;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,u,d,f,p,m;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:y,wallet:v,statement:N,options:k}=t;let j;if($n())if(typeof v=="object")j=v;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")j=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const A=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),S=await j.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=vI(S[0]);let _=(n=k?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!_){const D=await j.request({method:"eth_chainId"});_=zU(D)}const T={domain:A.host,address:E,statement:N,uri:A.href,version:"1",chainId:_,nonce:(s=k?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=k?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=k?.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=WU(T),b=await j.request({method:"personal_sign",params:[KU(x),E]})}try{const{data:y,error:v}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:js});if(v)throw v;if(!y||!y.session||!y.user){const N=new lc;return this._returnResult({data:{user:null,session:null},error:N})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Tt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,u,d,f,p,m,x;let b,y;if("message"in t)b=t.message,y=t.signature;else{const{chain:v,wallet:N,statement:k,options:j}=t;let A;if($n())if(typeof N=="object")A=N;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))A=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const S=new URL((r=j?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const E=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),k?{statement:k}:null));let _;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")_=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)_=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=j?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=j?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(f=j?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const E=await A.signMessage(new TextEncoder().encode(b),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:v,error:N}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:sl(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:js});if(N)throw N;if(!v||!v.session||!v.user){const k=new lc;return this._returnResult({data:{user:null,session:null},error:k})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:N})}catch(v){if(Tt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Vo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new hU;const{data:i,error:o}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:js});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new lc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:js}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const f=new lc;return this._returnResult({data:{user:null,session:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(r){if(Tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await cc(this.storage,this.storageKey));const{error:p}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:f}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u?.data)!==null&&s!==void 0?s:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new j0("You must provide either an email or phone number.")}catch(l){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await $t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:js});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if(Tt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await cc(this.storage,this.storageKey));const d=await $t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:FU});return!((i=d.data)===null||i===void 0)&&i.url&&$n()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ia;const{error:s}=await $t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Tt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await $t(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await $t(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new j0("You must provide either an email or phone number and a type")}catch(r){if(Tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ly:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Vo(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=dy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=IU(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fo}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ia}:await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:fo})})}catch(r){if(Tt(r))return uU(r)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ia;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await cc(this.storage,this.storageKey));const{data:d,error:f}=await $t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:fo});if(f)throw f;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ia;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=uy(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Tt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Ia;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Tt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!$n())throw new N0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new N0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new N0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new vE("No code detected.");const{data:k,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!i||!l||!o||!d)throw new N0("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(l);let m=f+p;u&&(m=parseInt(u));const x=m-f;x*1e3<=wc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=m-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,f);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const N={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(Tt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cU(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=vU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await cc(this.storage,this.storageKey,!0));try{return await $t(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,d,f;const{data:p,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await $t(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return $n()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if(Tt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:u,access_token:d,nonce:f}=t,p=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:js}),{data:m,error:x}=p;return x?this._returnResult({data:{user:null,session:null},error:x}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new lc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:x}))}catch(s){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Tt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await $t(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await NU(async s=>(s>0&&await jU(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await $t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:js})),(s,i)=>{const o=200*Math.pow(2,s);return i&&cy(i)&&Date.now()+o-n<wc})}catch(n){if(this._debug(r,"error",n),Tt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),$n()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Vo(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await jc(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:dy()}else if(s&&!s.user&&!s.user){const o=await Vo(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Fn(this.storage,this.storageKey+"-user"),await jc(this.storage,this.storageKey,s)):s.user=dy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ly;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ly}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),cy(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new _m;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ia;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Tt(i)){const o={data:null,error:i};return cy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Fn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await jc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=kE(s);await jc(this.storage,this.storageKey,i)}else{const s=kE(r);await jc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wc}ms, refresh threshold is ${qw} ticks`),s<=qw&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yI)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await cc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await $t(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await $t(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u?.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?ZU(t.webauthn.credential_response):eH(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:JU(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:QU(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=uy(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await $t(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ia})})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ia});const o=await $t(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&$n()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Tt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ia});const o=await $t(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&$n()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Tt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await $t(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ia})})}catch(t){if(Tt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await $t(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ia})})}catch(r){if(Tt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+oU>s)return n;const{data:i,error:o}=await $t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return this._returnResult({data:null,error:b});n=x.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=uy(n);r?.allowExpired||AU(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:o},error:null}}const f=OU(s.alg),p=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,o,xU(`${l}.${u}`)))throw new Ww("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Tt(n))return this._returnResult({data:null,error:n});throw n}}}rh.nextInstanceID={};const cH=rh,uH="2.89.0";let Nd="";typeof Deno<"u"?Nd="deno":typeof document<"u"?Nd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nd="react-native":Nd="node";const dH={"X-Client-Info":`supabase-js-${Nd}/${uH}`},hH={headers:dH},fH={schema:"public"},pH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mH={};function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function gH(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xH(e){var t=gH(e,"string");return nh(t)=="symbol"?t:t+""}function yH(e,t,r){return(t=xH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(r),!0).forEach(function(n){yH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const vH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bH=()=>Headers,wH=(e,t,r)=>{const n=vH(r),s=bH();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let d=new s(o?.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(i,Wr(Wr({},o),{},{headers:d}))}};function jH(e){return e.endsWith("/")?e:e+"/"}function NH(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:d,realtime:f,global:p}=t,m={db:Wr(Wr({},u),s),auth:Wr(Wr({},d),i),realtime:Wr(Wr({},f),o),storage:{},global:Wr(Wr(Wr({},p),l),{},{headers:Wr(Wr({},(r=p?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function kH(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jH(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SH=class extends cH{constructor(e){super(e)}},_H=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=kH(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:fH,realtime:mH,auth:Wr(Wr({},pH),{},{storageKey:o}),global:hH},u=NH(r??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=wH(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Wr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new sB(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new rU(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new eB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:u,throwOnError:d},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SH({url:this.authUrl.href,headers:Wr(Wr({},m),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jB(this.realtimeUrl.href,Wr(Wr({},e),{},{params:Wr(Wr({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const EH=(e,t,r)=>new _H(e,t,r);function CH(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}CH()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function pu(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=EH(`https://${Ys}.supabase.co`,Xs,{auth:{storageKey:`sb-${Ys}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const Ke=`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d`;function Jt(){return pu()}async function El(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();return t}async function Xe(e,t,r){const n=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!n.ok){let s="Request failed";try{const i=await n.json();s=i.error||i.message||`HTTP ${n.status}: ${n.statusText}`}catch{s=`HTTP ${n.status}: ${n.statusText}`}throw console.error(`API Error [${e}]:`,s),n.status===401&&(console.error("Session expired or invalid. Please log in again."),await Jt().auth.signOut(),window.location.reload()),new Error(s)}return n.json()}async function Em(e){return(await Xe(`${Ke}/inventory`,e)).inventory||[]}async function wI(e,t){return(await Xe(`${Ke}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function jI(e,t,r){return(await Xe(`${Ke}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function NI(e,t){await Xe(`${Ke}/inventory/${t}`,e,{method:"DELETE"})}async function U2(e){return(await Xe(`${Ke}/overheads`,e)).overheads||[]}async function kI(e,t){return(await Xe(`${Ke}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function SI(e,t,r){return(await Xe(`${Ke}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function _I(e,t){await Xe(`${Ke}/overheads/${t}`,e,{method:"DELETE"})}async function EI(e){return(await Xe(`${Ke}/fixed-costs`,e)).fixedCosts||[]}async function CI(e,t){return(await Xe(`${Ke}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function TI(e,t,r){return(await Xe(`${Ke}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function AI(e,t){await Xe(`${Ke}/fixed-costs/${t}`,e,{method:"DELETE"})}async function H2(e){return await Xe(`${Ke}/cleanup-duplicates`,e,{method:"POST"})}async function TH(e,t,r,n){return await Xe(`${Ke}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:n})})}async function q2(e){return(await Xe(`${Ke}/sales`,e)).sales||[]}async function OI(e,t){return(await Xe(`${Ke}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function PI(e,t,r){return(await Xe(`${Ke}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function II(e,t){return(await Xe(`${Ke}/sales/${t}/approve`,e,{method:"POST"})).item}async function DI(e,t,r,n){return(await Xe(`${Ke}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:n})})).item}async function MI(e,t){return(await Xe(`${Ke}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function RI(e,t,r){return(await Xe(`${Ke}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function z2(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/production`,t.access_token)).production||[]}async function FI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function $I(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/production/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function LI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function BI(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await Xe(`${Ke}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function AH(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/clear-data`,t.access_token,{method:"DELETE"})}async function UI(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await Xe(`${Ke}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function HI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function qI(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/notifications/read-all`,t.access_token,{method:"PUT"})}async function Cl(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/stores`,t.access_token)).stores}async function zI(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/stores`,n.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function KI(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/stores/${e}/assign-manager`,n.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function OH(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/stores/${e}/assign-production-house`,n.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function WI(e,t,r){const n=Jt(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function VI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await Xe(`${Ke}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function PH(e){return await Xe(`${Ke}/cleanup-duplicates`,e,{method:"POST"})}async function IH(e){return await Xe(`${Ke}/migrate-production-house-system`,e,{method:"POST"})}async function os(e){if(e)return(await Xe(`${Ke}/employees`,e)).employees||[];const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/employees`,r.access_token)).employees||[]}async function So(){return os()}async function GI(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/archived-employees`,t.access_token)).employees||[]}async function YI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create employee")}return await n.json()}async function XI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function JI(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function QI(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");const s=await fetch(`${Ke}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function xl(e,t){if(t)return(await Xe(`${Ke}/unified-employees/manager/${e}`,t)).employees||[];const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/unified-employees/manager/${e}`,n.access_token)).employees||[]}async function Cm(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function ZI(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Ke}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to run migration")}return await r.json()}async function Tm(e,t){const r=await El();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign manager")}return await n.json()}async function eD(e,t){const r=await El();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update role")}return await n.json()}async function tD(e,t){const r=await El();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update store")}return await n.json()}async function rD(e,t,r){const n=await El();if(!n)throw new Error("Not authenticated");const s=await fetch(`${Ke}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function nD(e,t){const r=await El();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign incharge")}return await n.json()}async function K2(e){const t=await El();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Ke}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to fetch employees")}return await r.json()}async function aD(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Ke}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to sync designations")}return await r.json()}async function Am(e,t){const r=await El();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update employee")}return await n.json()}async function jo(){const e=Jt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/payouts`,t.access_token)).payouts||[]}async function W2(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function sD(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/payouts/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function ap(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function DH(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function iD(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=e?`${Ke}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${Ke}/organizational-hierarchy`,s=await Xe(n,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function ah(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/timesheets/${e}`,r.access_token)).timesheets||[]}async function mu(e,t){if(t)return(await Xe(`${Ke}/leaves/${e}`,t)).leaves||[];const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/leaves/${e}`,n.access_token)).leaves||[]}async function oD(e){if(e)return(await Xe(`${Ke}/leaves/all`,e)).leaves||[];const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/leaves/all`,r.access_token)).leaves||[]}async function lD(e){const t=Jt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function cD(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/leaves/${e}/balance?joiningDate=${t}`,n.access_token)).balance||0}async function Vw(e,t,r){const n=Jt(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function uD(e,t,r,n){const s=Jt(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await Xe(`${Ke}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:n})})}async function dD(){try{const e=await fetch(`${Ke}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function hD(e,t){const r=Jt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await Xe(`${Ke}/custom-items`,n.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function Om(e){return(await Xe(`${Ke}/production-requests`,e)).requests||[]}async function fD(e,t){return(await Xe(`${Ke}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function pD(e,t,r,n){return(await Xe(`${Ke}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:n})})).request}async function Pm(e){return await Xe(`${Ke}/sales-data`,e)}async function mD(e,t){return(await Xe(`${Ke}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function gD(e,t){await Xe(`${Ke}/sales-data/${e}`,t,{method:"DELETE"})}async function sp(e){return(await Xe(`${Ke}/production-houses`,e)).productionHouses||[]}async function xD(e,t){return(await Xe(`${Ke}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function yD(e,t,r){return(await Xe(`${Ke}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function vD(e,t,r){return(await Xe(`${Ke}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function bD(e,t,r){return(await Xe(`${Ke}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function wD(e,t,r){return(await Xe(`${Ke}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function jD(e,t,r){return await Xe(`${Ke}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function ND(e,t){await Xe(`${Ke}/production-houses/${t}`,e,{method:"DELETE"})}async function kD(e,t,r,n){const s=await Xe(`${Ke}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:n})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function SD(e){return(await Xe(`${Ke}/stock-requests`,e)).stockRequests||[]}async function _D(e,t){return(await Xe(`${Ke}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function ED(e,t,r,n,s,i){return(await Xe(`${Ke}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:n,fulfilledByName:s,notes:i})})).stockRequest}async function CD(e,t){return(await Xe(`${Ke}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function TD(e){return await Xe(`${Ke}/fix-stock-requests`,e,{method:"POST"})}async function AD(e,t){return await Xe(`${Ke}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function $c(e,t,r){const n=r?`${Ke}/stock-recalibration/latest/${t}?locationType=${r}`:`${Ke}/stock-recalibration/latest/${t}`;return await Xe(n,e)}const Gw=$c;async function OD(e,t,r){const n=r?`${Ke}/stock-recalibration/history/${t}?locationType=${r}`:`${Ke}/stock-recalibration/history/${t}`;return await Xe(n,e)}async function PD(e){return await Xe(`${Ke}/stock-recalibration/pending-approval`,e)}async function ID(e,t){return await Xe(`${Ke}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function DD(e,t,r){return await Xe(`${Ke}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function MD(e,t){return(await Xe(`${Ke}/stock-thresholds/${t}`,e)).thresholds}async function RD(e,t,r){return await Xe(`${Ke}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function FD(e,t,r,n){let s=`${Ke}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),n&&(s+=`&locationType=${n}`),await Xe(s,e)}async function $D(e){return await Xe(`${Ke}/cluster/info`,e)}async function LD(e,t,r,n){return await Xe(`${Ke}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:n})})}async function BD(e){return await Xe(`${Ke}/cluster/all-cluster-heads`,e)}const MH=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:hD,addFixedCost:CI,addInventory:wI,addOverhead:kI,addPayouts:W2,addProductionData:FI,addSalesData:OI,applyLeave:lD,approveDiscrepancy:MI,approveLeave:Vw,approveProductionData:LI,approveRecalibration:ID,approveSalesData:II,assignInchargeToEmployee:nD,assignManagerToEmployee:Tm,assignManagerToStore:KI,assignProductionHeadToHouse:bD,assignProductionHouseToStore:OH,assignStoreToProductionHouse:wD,cancelStockRequest:CD,cleanDuplicates:PH,cleanupDuplicates:H2,clearAllData:AH,createProductionHouse:xD,createProductionRequest:fD,createStockRequest:_D,createStore:zI,createUnifiedEmployee:YI,deleteClusterHeadByEmail:DH,deleteEmployee:JI,deleteFixedCost:AI,deleteInventory:NI,deleteOverhead:_I,deletePayout:ap,deleteProductionHouse:ND,deleteSalesData:gD,deleteUnifiedEmployee:XI,fetchFixedCosts:EI,fetchInventory:Em,fetchLatestRecalibration:Gw,fetchOverheads:U2,fetchProductionData:z2,fetchProductionRequests:Om,fetchSalesData:q2,fixOrphanedStoreData:TH,fixProductionRecords:jD,fixStockRequests:TD,fulfillStockRequest:ED,getAllClusterHeads:BD,getAllEmployees:os,getAllLeaves:oD,getAllRecalibrationsForApproval:PD,getArchivedEmployees:GI,getClusterInfo:$D,getCustomItems:dD,getEmployees:So,getEmployeesByIncharge:K2,getEmployeesByManager:xl,getLastRecalibration:$c,getLeaveBalance:cD,getLeaves:mu,getManagersByClusterHead:Cm,getMonthlyWastageReport:FD,getNotifications:UI,getOrganizationalHierarchy:iD,getPayouts:jo,getProductionHouses:sp,getRecalibrationHistory:OD,getSalesData:Pm,getStockRequests:SD,getStockThresholds:MD,getStores:Cl,getTimesheets:ah,markAllNotificationsAsRead:qI,markNotificationAsRead:HI,migrateDataToStore:VI,migrateEmployeeStores:ZI,migrateProductionHouseSystem:IH,migrateProductionNotifications:BI,rejectDiscrepancy:RI,rejectLeave:uD,rejectRecalibration:DD,requestSalesApproval:DI,resetEmployeePassword:QI,saveSalesData:mD,saveStockThresholds:RD,submitStockRecalibration:AD,syncDesignations:aD,transferInventoryBetweenHouses:kD,updateClusterAssignments:LD,updateEmployeeDesignation:rD,updateEmployeeRole:eD,updateEmployeeStore:tD,updateFixedCost:TI,updateInventory:jI,updateOverhead:SI,updatePayout:sD,updateProductionData:$I,updateProductionHouse:yD,updateProductionHouseInventory:vD,updateProductionRequestStatus:pD,updateSalesData:PI,updateStore:WI,updateUnifiedEmployee:Am},Symbol.toStringTag,{value:"Module"}));function RH({selectedDate:e,editingItem:t,onSubmit:r,onClose:n}){const[s,i]=U.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!nE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||""}),[o,l]=U.useState({}),[u,d]=U.useState(!0);U.useEffect(()=>{f()},[]);const f=async()=>{try{const x=await dD(),b={};x.forEach(y=>{b[y.category]||(b[y.category]=[]),b[y.category].push(y.itemName)}),l(b)}catch(x){console.log("Could not load custom items:",x)}finally{d(!1)}},p=async x=>{x.preventDefault();const b=parseFloat(s.quantity),y=parseFloat(s.totalCost),v=b>0?y/b:0;if(s.customItem&&s.itemName)try{await hD(s.category,s.itemName),console.log("Custom item saved:",s.itemName),await f()}catch(N){console.error("Error saving custom item:",N)}r({date:e,category:s.category,itemName:s.itemName,quantity:b,unit:s.unit,costPerUnit:v,totalCost:y})},m=[...nE[s.category],...o[s.category]||[]];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(wn,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:x=>i({...s,category:x.target.value,itemName:"",customItem:!1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(wm).map(([x,b])=>a.jsx("option",{value:x,children:b},x))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),s.customItem?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:s.itemName,onChange:x=>i({...s,itemName:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),a.jsx("button",{type:"button",onClick:()=>i({...s,customItem:!1,itemName:""}),className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):a.jsx("div",{className:"space-y-2",children:a.jsxs("select",{value:s.itemName,onChange:x=>{x.target.value==="__custom__"?i({...s,customItem:!0,itemName:""}):i({...s,itemName:x.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select an item"}),m.map(x=>a.jsx("option",{value:x,children:x},x)),a.jsx("option",{value:"__custom__",children:"+ Add Custom Item"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",step:"0.01",value:s.quantity,onChange:x=>i({...s,quantity:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),a.jsxs("select",{value:s.unit,onChange:x=>i({...s,unit:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"mL",children:"mL"}),a.jsx("option",{value:"pcs",children:"pcs"}),a.jsx("option",{value:"units",children:"units"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.totalCost,onChange:x=>i({...s,totalCost:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),s.quantity&&s.totalCost&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),a.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(s.totalCost)/parseFloat(s.quantity)).toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t?"Update":"Add"," Item"]})]})]})]})})}const FH=[{value:"fuel",label:"Fuel Cost"},{value:"travel",label:"Travel Cost"},{value:"transportation",label:"Transportation Cost"},{value:"marketing",label:"Marketing Cost"},{value:"service_charge",label:"Service Charge (Food Aggregators)"},{value:"repair",label:"Repair Cost"},{value:"party",label:"Party Cost"},{value:"lunch",label:"Lunch Cost"},{value:"miscellaneous",label:"Miscellaneous Cost"}];function $H({selectedDate:e,onSubmit:t,onClose:r,editingItem:n}){const[s,i]=U.useState({category:n?n.category:"fuel",description:n?n.description:"",amount:n?n.amount.toString():""}),o=l=>{l.preventDefault(),t({date:e,category:s.category,description:s.description,amount:parseFloat(s.amount)})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Overhead Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(wn,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:l=>i({...s,category:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:FH.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:l=>i({...s,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:l=>i({...s,amount:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add Overhead"})]})]})]})})}function LH({selectedDate:e,onSubmit:t,onClose:r,editingItem:n}){const[s,i]=U.useState({category:n?n.category:"electricity",description:n?n.description:"",amount:n?n.amount.toString():""}),o=l=>{l.preventDefault(),t({date:e,category:s.category,description:s.description,amount:parseFloat(s.amount)})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Fixed Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(wn,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:l=>i({...s,category:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(P2).map(([l,u])=>a.jsx("option",{value:l,children:u},l))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:l=>i({...s,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:l=>i({...s,amount:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n?"Update":"Add"," Fixed Cost"]})]})]})]})})}function BH({inventory:e,overheads:t,fixedCosts:r,onEditInventory:n,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:u,isManager:d=!0}){const[f,p]=U.useState(null),m=e.reduce((b,y)=>(b[y.category]||(b[y.category]=[]),b[y.category].push(y),b),{}),x=(b,y)=>{b==="inventory"?s(y):b==="overhead"?o(y):u(y),p(null)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):a.jsx("div",{className:"space-y-6",children:Object.entries(m).map(([b,y])=>a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:wm[b]}),a.jsx("div",{className:"space-y-2",children:y.map(v=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-gray-900",children:v.itemName})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-blue-600",children:["",v.totalCost.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>n(v),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"inventory",id:v.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(is,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[v.quantity," ",v.unit]}),a.jsxs("span",{children:["",v.costPerUnit,"/",v.unit]})]})]},v.id))})]},b))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(p9,{className:"w-5 h-5 text-orange-600"}),a.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):a.jsx("div",{className:"space-y-3",children:t.map(b=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:O2[b.category]}),a.jsx("p",{className:"text-sm text-gray-500",children:b.description})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-orange-600",children:["",b.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>i(b),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"overhead",id:b.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(is,{className:"w-4 h-4"})})]})]})]})},b.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(bi,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):a.jsx("div",{className:"space-y-3",children:r.map(b=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:P2[b.category]}),a.jsx("p",{className:"text-sm text-gray-500",children:b.description})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-green-600",children:["",b.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>l(b),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"fixedcost",id:b.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(is,{className:"w-4 h-4"})})]})]})]})},b.id))})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>x(f.type,f.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function Im({selectedDate:e,onDateChange:t}){const[r,n]=U.useState(0),[s,i]=U.useState(!1);U.useEffect(()=>{const u=()=>{i(window.innerWidth<768)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const o=U.useMemo(()=>{const u=new Date,d=new Date(u);d.setDate(d.getDate()+r*7);const f=[];for(let p=-3;p<=3;p++){const m=new Date(d);m.setDate(m.getDate()+p),f.push(m.toISOString().split("T")[0])}return f},[r]);U.useEffect(()=>{if(!o.includes(e)){const u=new Date(e),d=new Date,f=Math.floor((u.getTime()-d.getTime())/(1e3*60*60*24)),p=Math.floor(f/7);n(p)}},[e,o]);const l=()=>{n(0),t(new Date().toISOString().split("T")[0])};return s?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),r!==0&&a.jsx("button",{type:"button",onClick:l,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"date",value:e,onChange:u=>t(u.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("button",{type:"button",onClick:()=>n(r-1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx(Ow,{className:"w-4 h-4"}),a.jsx("span",{children:"Prev Week"})]}),a.jsxs("button",{type:"button",onClick:()=>n(r+1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx("span",{children:"Next Week"}),a.jsx(bo,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:a.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:o.map(u=>{const d=new Date(u),f=u===new Date().toISOString().split("T")[0],p=u===e;return a.jsxs("button",{type:"button",onClick:()=>t(u),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${p?"bg-orange-600 text-white shadow-lg":f?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:d.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-base font-medium",children:d.getDate()}),a.jsx("div",{className:"text-xs",children:d.toLocaleDateString("en-US",{month:"short"})})]},u)})})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),r!==0&&a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>n(r-1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[a.jsx(Ow,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Prev"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:o.map(u=>{const d=new Date(u),f=u===new Date().toISOString().split("T")[0],p=u===e;return a.jsxs("button",{type:"button",onClick:()=>t(u),className:`p-3 rounded-lg text-center transition-all ${p?"bg-orange-600 text-white shadow-lg transform scale-105":f?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:d.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-lg font-medium",children:d.getDate()}),a.jsx("div",{className:"text-xs",children:d.toLocaleDateString("en-US",{month:"short"})})]},u)})}),a.jsxs("button",{type:"button",onClick:()=>n(r+1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[a.jsx("span",{className:"text-sm",children:"Next"}),a.jsx(bo,{className:"w-5 h-5"})]})]})]})}function UH({context:e,selectedStoreId:t}){const[r,n]=U.useState(new Date().toISOString().split("T")[0]),[s,i]=U.useState(!1),[o,l]=U.useState(!1),[u,d]=U.useState(!1),[f,p]=U.useState(null),[m,x]=U.useState(null),[b,y]=U.useState(null),v=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",v),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const N=e.inventory.filter(_=>{const T=_.date===r,D=v?_.storeId===v:!0;return T&&D}),k=e.overheads.filter(_=>{const T=_.date===r,D=v?_.storeId===v:!0;return T&&D}),j=e.fixedCosts.filter(_=>{const T=_.date===r,D=v?_.storeId===v:!0;return T&&D}),A=N.reduce((_,T)=>_+T.totalCost,0),S=k.reduce((_,T)=>_+T.amount,0),E=j.reduce((_,T)=>_+T.amount,0);return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Im,{selectedDate:r,onDateChange:n}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",A.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",S.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(A+S+E).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>i(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add inventory items",children:[a.jsx(wo,{className:"w-4 h-4"}),"Add Inventory Item"]}),a.jsxs("button",{onClick:()=>l(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add overhead costs",children:[a.jsx(wo,{className:"w-4 h-4"}),"Add Overhead"]}),a.jsxs("button",{onClick:()=>d(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add fixed costs",children:[a.jsx(wo,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),a.jsx(BH,{inventory:N,overheads:k,fixedCosts:j,onEditInventory:_=>{p(_),i(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:_=>{x(_),l(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:_=>{y(_),d(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),s&&a.jsx(RH,{selectedDate:r,editingItem:f,onSubmit:async _=>{try{f?await e.updateInventoryItem(f.id,_):await e.addInventoryItem(_),i(!1),p(null)}catch{alert("Failed to save inventory item. Please try again.")}},onClose:()=>{i(!1),p(null)}}),o&&a.jsx($H,{selectedDate:r,editingItem:m,onSubmit:async _=>{try{m?await e.updateOverheadItem(m.id,_):await e.addOverheadItem(_),l(!1),x(null)}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{l(!1),x(null)}}),u&&a.jsx(LH,{selectedDate:r,editingItem:b,onSubmit:async _=>{try{b?await e.updateFixedCostItem(b.id,_):await e.addFixedCostItem(_),d(!1),y(null)}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{d(!1),y(null)}})]})}function V2({context:e,selectedStoreId:t,onClose:r,isProductionHouse:n,isStoreFinishedProducts:s=!1}){const[i,o]=U.useState([]),[l,u]=U.useState(!0),[d,f]=U.useState(!1),[p,m]=U.useState(null),[x,b]=U.useState(null),[y,v]=U.useState(!1),N=t||e.user?.storeId,k=e.stores?.find(G=>G.id===N),j=t||e.user?.storeId,A=n?e.productionHouses?.find(G=>G.id===j):e.stores?.find(G=>G.id===j),S=A?.name,E=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),_=new Date().getDate(),T=_>=1&&_<=5;U.useEffect(()=>{D(),B()},[]);async function D(){try{if(u(!0),n||s)await F();else{const L=(await Em(e.user?.accessToken||"")).filter(J=>N?J.storeId===N:!1),ee=new Map;L.forEach(J=>{ee.has(J.id)||ee.set(J.id,J)});const te=Array.from(ee.values()).map(J=>({itemId:J.id,itemName:J.itemName,category:J.category,unit:J.unit,systemQuantity:J.quantity,actualQuantity:J.quantity,difference:0,adjustmentType:null,notes:""}));o(te)}}catch(G){console.error("Error loading inventory:",G),b("Failed to load inventory data")}finally{u(!1)}}async function F(){const G=e.productionData||[],L=new Date().toISOString().substring(0,7);let ee=N,te=N;if(s)te=N;else if(N&&N.startsWith("STORE-")){const xe=e.stores?.find(Fe=>Fe.id===N);xe?.productionHouseId&&(ee=xe.productionHouseId,te=ee)}else te=N;let J,he;s?(J=(e.productionRequests||[]).filter(O=>{if(O.status!=="delivered"||O.storeId!==N)return!1;const be=O.deliveredDate||O.requestDate||O.createdAt;return be&&be.startsWith(L)}).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos||0),veg:O.veg+(be.vegMomos||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos||0),paneer:O.paneer+(be.paneerMomos||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),he=(e.salesData||[]).filter(O=>O.storeId!==N?!1:O.date&&O.date.startsWith(L)).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos||0),veg:O.veg+(be.vegMomos||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos||0),paneer:O.paneer+(be.paneerMomos||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})):(J=G.filter(O=>{if(!O.date.startsWith(L))return!1;const be=O.storeId===ee||O.storeId===N,De=O.productionHouseId===ee;return be||De}).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos?.final||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos?.final||0),veg:O.veg+(be.vegMomos?.final||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos?.final||0),paneer:O.paneer+(be.paneerMomos?.final||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos?.final||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),he=(e.productionRequests||[]).filter(O=>{if(O.status!=="delivered")return!1;const be=O.deliveredDate||O.requestDate||O.createdAt;return!be||!be.startsWith(L)?!1:e.stores?.find(qe=>qe.id===O.storeId)?.productionHouseId===ee}).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos||0),veg:O.veg+(be.vegMomos||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos||0),paneer:O.paneer+(be.paneerMomos||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}));const Se=await P(te,L,s);console.log(" Recalibration - Location ID:",te),console.log(" Recalibration - Is Store Finished Products:",s),console.log(" Recalibration - Opening Balance:",Se),console.log(" Recalibration - Total Received/Produced:",J),console.log(" Recalibration - Total Sent/Sold:",he);const pe=[{id:"chicken",name:"Chicken Momos",category:"Regular Momos"},{id:"chickenCheese",name:"Chicken Cheese Momos",category:"Regular Momos"},{id:"veg",name:"Veg Momos",category:"Regular Momos"},{id:"cheeseCorn",name:"Cheese Corn Momos",category:"Regular Momos"},{id:"paneer",name:"Paneer Momos",category:"Regular Momos"},{id:"vegKurkure",name:"Veg Kurkure Momos",category:"Kurkure Momos"},{id:"chickenKurkure",name:"Chicken Kurkure Momos",category:"Kurkure Momos"}].map(xe=>{const Fe=Se[xe.id]||0,O=J[xe.id],be=he[xe.id],De=Fe+O-be;return{itemId:xe.id,itemName:xe.name,category:xe.category,unit:"pcs",systemQuantity:De,actualQuantity:De,difference:0,adjustmentType:null,notes:""}});o(pe)}async function P(G,L,ee){if(!G)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const te=ee?"store":"production_house",[J,he]=L.split("-").map(Number);let Se=J,Oe=he-1;Oe===0&&(Oe=12,Se=J-1);const pe=`${Se}-${String(Oe).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",G),console.log(" fetchOpeningBalance - Location Type:",te),console.log(" fetchOpeningBalance - Current Month:",L),console.log(" fetchOpeningBalance - Looking for recalibration from:",pe);const xe=await $c(e.user?.accessToken||"",G,te);if(xe?.record){const Fe=xe.record.date.substring(0,7);if(console.log(" fetchOpeningBalance - Found recalibration from:",Fe),console.log(" fetchOpeningBalance - Recalibration data:",xe.record),Fe===pe||Fe<pe){const O={};return xe.record.items.forEach(be=>{O[be.itemId]=be.actualQuantity}),console.log(" fetchOpeningBalance - Using recalibration as opening balance:",O),O}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await I(G,L,ee)}catch(te){return console.error("Error fetching opening balance:",te),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function I(G,L,ee){const[te,J]=L.split("-").map(Number);let he=te,Se=J-1;Se===0&&(Se=12,he=te-1);const Oe=`${he}-${String(Se).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",Oe),console.log(" calculatePreviousMonthStock - Is Store:",ee),ee){const pe=(e.productionRequests||[]).filter(O=>{if(O.status!=="delivered"||O.storeId!==G)return!1;const be=O.deliveredDate||O.requestDate||O.createdAt;return be&&be.startsWith(Oe)}).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos||0),veg:O.veg+(be.vegMomos||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos||0),paneer:O.paneer+(be.paneerMomos||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",pe),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const xe=(e.categorySalesData||[]).filter(O=>O.storeId!==G?!1:O.date&&O.date.startsWith(Oe)).reduce((O,be)=>({chicken:O.chicken+(be.data["Chicken Momos"]||0),chickenCheese:O.chickenCheese+(be.data["Chicken Cheese Momos"]||0),veg:O.veg+(be.data["Veg Momos"]||0),cheeseCorn:O.cheeseCorn+(be.data["Corn Cheese Momos"]||0),paneer:O.paneer+(be.data["Paneer Momos"]||0),vegKurkure:O.vegKurkure+(be.data["Veg Kurkure Momos"]||0),chickenKurkure:O.chickenKurkure+(be.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",xe);const Fe={chicken:pe.chicken-xe.chicken,chickenCheese:pe.chickenCheese-xe.chickenCheese,veg:pe.veg-xe.veg,cheeseCorn:pe.cheeseCorn-xe.cheeseCorn,paneer:pe.paneer-xe.paneer,vegKurkure:pe.vegKurkure-xe.vegKurkure,chickenKurkure:pe.chickenKurkure-xe.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",Fe),Fe}else{const xe=(e.productionData||[]).filter(O=>O.date.startsWith(Oe)?O.storeId===G||O.productionHouseId===G:!1).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos?.final||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos?.final||0),veg:O.veg+(be.vegMomos?.final||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos?.final||0),paneer:O.paneer+(be.paneerMomos?.final||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos?.final||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Fe=(e.productionRequests||[]).filter(O=>{if(O.status!=="delivered")return!1;const be=O.deliveredDate||O.requestDate||O.createdAt;return!be||!be.startsWith(Oe)?!1:e.stores?.find(qe=>qe.id===O.storeId)?.productionHouseId===G}).reduce((O,be)=>({chicken:O.chicken+(be.chickenMomos||0),chickenCheese:O.chickenCheese+(be.chickenCheeseMomos||0),veg:O.veg+(be.vegMomos||0),cheeseCorn:O.cheeseCorn+(be.cheeseCornMomos||0),paneer:O.paneer+(be.paneerMomos||0),vegKurkure:O.vegKurkure+(be.vegKurkureMomos||0),chickenKurkure:O.chickenKurkure+(be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});return{chicken:xe.chicken-Fe.chicken,chickenCheese:xe.chickenCheese-Fe.chickenCheese,veg:xe.veg-Fe.veg,cheeseCorn:xe.cheeseCorn-Fe.cheeseCorn,paneer:xe.paneer-Fe.paneer,vegKurkure:xe.vegKurkure-Fe.vegKurkure,chickenKurkure:xe.chickenKurkure-Fe.chickenKurkure}}}async function B(){try{const G=N;if(!G)return;const L=n?"production_house":"store",ee=await $c(e.user?.accessToken||"",G,L);ee.lastRecalibration&&m(ee.lastRecalibration)}catch(G){console.error("Error checking last recalibration:",G)}}function z(G,L){const ee=parseFloat(L)||0;o(i.map(te=>{if(te.itemId===G){const J=ee-te.systemQuantity;return{...te,actualQuantity:ee,difference:J,adjustmentType:J===0?null:te.adjustmentType}}return te}))}function Y(G,L){o(i.map(ee=>ee.itemId===G?{...ee,adjustmentType:L}:ee))}function re(G,L){o(i.map(ee=>ee.itemId===G?{...ee,notes:L}:ee))}async function X(){if(i.filter(L=>L.difference!==0&&!L.adjustmentType).length>0){b("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{f(!0),b(null),console.log(` Submitting recalibration:
        - locationId: ${j}
        - locationType: ${n?"production_house":"store"}
        - locationName: ${S}
        - isProductionHouse: ${n}`);const L={locationId:j,locationType:n?"production_house":"store",locationName:S,items:i.map(ee=>({itemId:ee.itemId,itemName:ee.itemName,category:ee.category,unit:ee.unit,systemQuantity:ee.systemQuantity,actualQuantity:ee.actualQuantity,difference:ee.difference,adjustmentType:ee.adjustmentType,notes:ee.notes}))};await AD(e.user?.accessToken||"",L),v(!0),setTimeout(()=>{r()},2e3)}catch(L){console.error("Error submitting recalibration:",L),b(L instanceof Error?L.message:"Failed to submit recalibration")}finally{f(!1)}}const ne=i.length,Z=i.filter(G=>G.difference!==0).length,me=i.filter(G=>G.adjustmentType==="wastage"&&G.difference<0).reduce((G,L)=>G+Math.abs(L.difference),0);return l?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Z0,{className:"w-6 h-6 animate-spin text-purple-600"}),a.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):y?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(er,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),a.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(wr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[S||k?.name," - ",E]})]})]}),a.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(Ms,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),a.jsx("div",{className:"text-2xl text-purple-600",children:ne})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),a.jsx("div",{className:"text-2xl text-orange-600",children:Z})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsx("div",{className:"text-2xl text-red-600",children:me.toFixed(2)})]})]}),p&&a.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(gn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-blue-900",children:"Last recalibration was performed on:"}),a.jsx("div",{className:"text-sm text-blue-700",children:new Date(p).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!T&&a.jsxs("div",{className:"mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(gn,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-yellow-900",children:"Stock recalibration is typically performed on the 1st to 5th day of each month. You can still perform it now if needed."})]})]}),a.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:a.jsx("div",{className:"space-y-4",children:i.map((G,L)=>a.jsxs("div",{className:`bg-gradient-to-r ${G.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",L+1]}),a.jsx("div",{className:"text-gray-900",children:G.itemName}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[G.category.replace(/_/g," "),"  ",G.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"System Stock"}),a.jsxs("div",{className:"text-gray-900",children:[G.systemQuantity," ",G.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),a.jsx("input",{type:"number",step:"0.01",value:G.actualQuantity,onChange:ee=>z(G.itemId,ee.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),a.jsxs("div",{className:`text-lg ${G.difference>0?"text-green-600":G.difference<0?"text-red-600":"text-gray-600"}`,children:[G.difference>0?"+":"",G.difference.toFixed(2)]})]}),a.jsx("div",{className:"md:col-span-3",children:G.difference!==0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(G.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${G.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),a.jsx("button",{onClick:()=>Y(G.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${G.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),G.difference!==0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:G.notes,onChange:ee=>re(G.itemId,ee.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},G.itemId))})}),x&&a.jsx("div",{className:"px-6 pb-4",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(gn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-red-900",children:x})]})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:X,disabled:d,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(Z0,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gl,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function PE({context:e,selectedStoreId:t}){const[r,n]=U.useState(new Date().toISOString().split("T")[0]),[s,i]=U.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(N=>{const k=N.date===r,j=o?N.storeId===o:!0;return k&&j}),u=e.overheads.filter(N=>{const k=N.date===r,j=o?N.storeId===o:!0;return k&&j}),d=e.fixedCosts.filter(N=>{const k=N.date===r,j=o?N.storeId===o:!0;return k&&j}),f=l.reduce((N,k)=>N+k.totalCost,0),p=u.reduce((N,k)=>N+k.amount,0),m=d.reduce((N,k)=>N+k.amount,0),x=l.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),b=u.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),y={fresh_produce:"Fresh Produce",spices_seasonings:"Spices & Seasonings",dairy:"Dairy Products",meat:"Meat Products",packaging:"Packaging Materials",gas_utilities:"Gas & Utilities",production:"Production Items",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},v=e.user?.role==="cluster_head";return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pw,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[a.jsx(Iw,{className:"w-4 h-4 text-amber-600"}),a.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),a.jsx(Im,{selectedDate:r,onDateChange:n}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+p+m).toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(x).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(x).map(([N,k])=>a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:j.itemName}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[j.quantity," ",j.unit]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",j.costPerUnit.toLocaleString()]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",j.totalCost.toLocaleString()]})]},j.id))})]})})]},N))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(rr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No inventory items for this date"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(An,{className:"w-5 h-5 text-orange-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(b).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([N,k])=>a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:j.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",j.amount.toLocaleString()]})]},j.id))})]})})]},N))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(An,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No overhead costs for this date"})]})]}),d.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Qr,{className:"w-5 h-5 text-green-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[N.category]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",N.amount.toLocaleString()]})]},N.id))})]})})]}),v&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[a.jsx(wr,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&a.jsx(V2,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Iw,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-blue-800",children:v?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function UD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=UD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ht(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=UD(e))&&(n&&(n+=" "),n+=t);return n}var fy,IE;function Ca(){if(IE)return fy;IE=1;var e=Array.isArray;return fy=e,fy}var py,DE;function HD(){if(DE)return py;DE=1;var e=typeof g0=="object"&&g0&&g0.Object===Object&&g0;return py=e,py}var my,ME;function ri(){if(ME)return my;ME=1;var e=HD(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return my=r,my}var gy,RE;function Qh(){if(RE)return gy;RE=1;var e=ri(),t=e.Symbol;return gy=t,gy}var xy,FE;function HH(){if(FE)return xy;FE=1;var e=Qh(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),u=o[s];try{o[s]=void 0;var d=!0}catch{}var f=n.call(o);return d&&(l?o[s]=u:delete o[s]),f}return xy=i,xy}var yy,$E;function qH(){if($E)return yy;$E=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return yy=r,yy}var vy,LE;function Li(){if(LE)return vy;LE=1;var e=Qh(),t=HH(),r=qH(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return vy=o,vy}var by,BE;function Bi(){if(BE)return by;BE=1;function e(t){return t!=null&&typeof t=="object"}return by=e,by}var wy,UE;function gu(){if(UE)return wy;UE=1;var e=Li(),t=Bi(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return wy=n,wy}var jy,HE;function G2(){if(HE)return jy;HE=1;var e=Ca(),t=gu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return jy=s,jy}var Ny,qE;function Co(){if(qE)return Ny;qE=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Ny=e,Ny}var ky,zE;function Y2(){if(zE)return ky;zE=1;var e=Li(),t=Co(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==n||u==s||u==r||u==i}return ky=o,ky}var Sy,KE;function zH(){if(KE)return Sy;KE=1;var e=ri(),t=e["__core-js_shared__"];return Sy=t,Sy}var _y,WE;function KH(){if(WE)return _y;WE=1;var e=zH(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return _y=r,_y}var Ey,VE;function qD(){if(VE)return Ey;VE=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Ey=r,Ey}var Cy,GE;function WH(){if(GE)return Cy;GE=1;var e=Y2(),t=KH(),r=Co(),n=qD(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!r(m)||t(m))return!1;var x=e(m)?f:i;return x.test(n(m))}return Cy=p,Cy}var Ty,YE;function VH(){if(YE)return Ty;YE=1;function e(t,r){return t?.[r]}return Ty=e,Ty}var Ay,XE;function Tl(){if(XE)return Ay;XE=1;var e=WH(),t=VH();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return Ay=r,Ay}var Oy,JE;function Dm(){if(JE)return Oy;JE=1;var e=Tl(),t=e(Object,"create");return Oy=t,Oy}var Py,QE;function GH(){if(QE)return Py;QE=1;var e=Dm();function t(){this.__data__=e?e(null):{},this.size=0}return Py=t,Py}var Iy,ZE;function YH(){if(ZE)return Iy;ZE=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Iy=e,Iy}var Dy,eC;function XH(){if(eC)return Dy;eC=1;var e=Dm(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return Dy=s,Dy}var My,tC;function JH(){if(tC)return My;tC=1;var e=Dm(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return My=n,My}var Ry,rC;function QH(){if(rC)return Ry;rC=1;var e=Dm(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return Ry=r,Ry}var Fy,nC;function ZH(){if(nC)return Fy;nC=1;var e=GH(),t=YH(),r=XH(),n=JH(),s=QH();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Fy=i,Fy}var $y,aC;function eq(){if(aC)return $y;aC=1;function e(){this.__data__=[],this.size=0}return $y=e,$y}var Ly,sC;function X2(){if(sC)return Ly;sC=1;function e(t,r){return t===r||t!==t&&r!==r}return Ly=e,Ly}var By,iC;function Mm(){if(iC)return By;iC=1;var e=X2();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return By=t,By}var Uy,oC;function tq(){if(oC)return Uy;oC=1;var e=Mm(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return Uy=n,Uy}var Hy,lC;function rq(){if(lC)return Hy;lC=1;var e=Mm();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return Hy=t,Hy}var qy,cC;function nq(){if(cC)return qy;cC=1;var e=Mm();function t(r){return e(this.__data__,r)>-1}return qy=t,qy}var zy,uC;function aq(){if(uC)return zy;uC=1;var e=Mm();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return zy=t,zy}var Ky,dC;function Rm(){if(dC)return Ky;dC=1;var e=eq(),t=tq(),r=rq(),n=nq(),s=aq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Ky=i,Ky}var Wy,hC;function J2(){if(hC)return Wy;hC=1;var e=Tl(),t=ri(),r=e(t,"Map");return Wy=r,Wy}var Vy,fC;function sq(){if(fC)return Vy;fC=1;var e=ZH(),t=Rm(),r=J2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Vy=n,Vy}var Gy,pC;function iq(){if(pC)return Gy;pC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Gy=e,Gy}var Yy,mC;function Fm(){if(mC)return Yy;mC=1;var e=iq();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return Yy=t,Yy}var Xy,gC;function oq(){if(gC)return Xy;gC=1;var e=Fm();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Xy=t,Xy}var Jy,xC;function lq(){if(xC)return Jy;xC=1;var e=Fm();function t(r){return e(this,r).get(r)}return Jy=t,Jy}var Qy,yC;function cq(){if(yC)return Qy;yC=1;var e=Fm();function t(r){return e(this,r).has(r)}return Qy=t,Qy}var Zy,vC;function uq(){if(vC)return Zy;vC=1;var e=Fm();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return Zy=t,Zy}var ev,bC;function Q2(){if(bC)return ev;bC=1;var e=sq(),t=oq(),r=lq(),n=cq(),s=uq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,ev=i,ev}var tv,wC;function zD(){if(wC)return tv;wC=1;var e=Q2(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var d=n.apply(this,o);return i.cache=u.set(l,d)||u,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,tv=r,tv}var rv,jC;function dq(){if(jC)return rv;jC=1;var e=zD(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return rv=r,rv}var nv,NC;function hq(){if(NC)return nv;NC=1;var e=dq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,u,d){i.push(u?d.replace(r,"$1"):l||o)}),i});return nv=n,nv}var av,kC;function Z2(){if(kC)return av;kC=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return av=e,av}var sv,SC;function fq(){if(SC)return sv;SC=1;var e=Qh(),t=Z2(),r=Ca(),n=gu(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return sv=o,sv}var iv,_C;function KD(){if(_C)return iv;_C=1;var e=fq();function t(r){return r==null?"":e(r)}return iv=t,iv}var ov,EC;function WD(){if(EC)return ov;EC=1;var e=Ca(),t=G2(),r=hq(),n=KD();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return ov=s,ov}var lv,CC;function $m(){if(CC)return lv;CC=1;var e=gu();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return lv=t,lv}var cv,TC;function eN(){if(TC)return cv;TC=1;var e=WD(),t=$m();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return cv=r,cv}var uv,AC;function VD(){if(AC)return uv;AC=1;var e=eN();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return uv=t,uv}var pq=VD();const qa=vr(pq);var dv,OC;function mq(){if(OC)return dv;OC=1;function e(t){return t==null}return dv=e,dv}var gq=mq();const zt=vr(gq);var hv,PC;function xq(){if(PC)return hv;PC=1;var e=Li(),t=Ca(),r=Bi(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return hv=s,hv}var yq=xq();const yl=vr(yq);var vq=Y2();const Rt=vr(vq);var bq=Co();const xu=vr(bq);var fv={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC;function wq(){if(IC)return xr;IC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var N=v.$$typeof;switch(N){case e:switch(v=v.type,v){case r:case s:case n:case d:case f:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case u:case m:case p:case i:return v;default:return N}}case t:return N}}}return xr.ContextConsumer=o,xr.ContextProvider=i,xr.Element=e,xr.ForwardRef=u,xr.Fragment=r,xr.Lazy=m,xr.Memo=p,xr.Portal=t,xr.Profiler=s,xr.StrictMode=n,xr.Suspense=d,xr.SuspenseList=f,xr.isAsyncMode=function(){return!1},xr.isConcurrentMode=function(){return!1},xr.isContextConsumer=function(v){return y(v)===o},xr.isContextProvider=function(v){return y(v)===i},xr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},xr.isForwardRef=function(v){return y(v)===u},xr.isFragment=function(v){return y(v)===r},xr.isLazy=function(v){return y(v)===m},xr.isMemo=function(v){return y(v)===p},xr.isPortal=function(v){return y(v)===t},xr.isProfiler=function(v){return y(v)===s},xr.isStrictMode=function(v){return y(v)===n},xr.isSuspense=function(v){return y(v)===d},xr.isSuspenseList=function(v){return y(v)===f},xr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===n||v===d||v===f||v===x||typeof v=="object"&&v!==null&&(v.$$typeof===m||v.$$typeof===p||v.$$typeof===i||v.$$typeof===o||v.$$typeof===u||v.$$typeof===b||v.getModuleId!==void 0)},xr.typeOf=y,xr}var DC;function jq(){return DC||(DC=1,fv.exports=wq()),fv.exports}var Nq=jq(),pv,MC;function GD(){if(MC)return pv;MC=1;var e=Li(),t=Bi(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return pv=n,pv}var mv,RC;function kq(){if(RC)return mv;RC=1;var e=GD();function t(r){return e(r)&&r!=+r}return mv=t,mv}var Sq=kq();const Zh=vr(Sq);var _q=GD();const Eq=vr(_q);var fa=function(t){return t===0?0:t>0?1:-1},il=function(t){return yl(t)&&t.indexOf("%")===t.length-1},et=function(t){return Eq(t)&&!Zh(t)},Cq=function(t){return zt(t)},vn=function(t){return et(t)||yl(t)},Tq=0,yu=function(t){var r=++Tq;return"".concat(t||"").concat(r)},pa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(t)&&!yl(t))return n;var i;if(il(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Zh(i)&&(i=n),s&&i>r&&(i=r),i},po=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Aq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},Hn=function(t,r){return et(t)&&et(r)?function(n){return t+n*(r-t)}:function(){return r}};function ip(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):qa(n,t))===r})}var Oq=function(t,r){return et(t)&&et(r)?t-r:yl(t)&&yl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Pc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Yw(e){"@babel/helpers - typeof";return Yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yw(e)}var Pq=["viewBox","children"],Iq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],FC=["points","pathLength"],gv={svg:Pq,polygon:FC,polyline:FC},tN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],op=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(U.isValidElement(t)&&(n=t.props),!xu(n))return null;var s={};return Object.keys(n).forEach(function(i){tN.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},Dq=function(t,r,n){return function(s){return t(r,n,s),null}},vl=function(t,r,n){if(!xu(t)||Yw(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];tN.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Dq(o,r,n))}),s},Mq=["children"],Rq=["children"];function $C(e,t){if(e==null)return{};var r=Fq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xw(e){"@babel/helpers - typeof";return Xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xw(e)}var LC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ci=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},BC=null,xv=null,rN=function e(t){if(t===BC&&Array.isArray(xv))return xv;var r=[];return U.Children.forEach(t,function(n){zt(n)||(Nq.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),xv=r,BC=t,r};function za(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Ci(s)}):n=[Ci(t)],rN(e).forEach(function(s){var i=qa(s,"type.displayName")||qa(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function Ra(e,t){var r=za(e,t);return r&&r[0]}var UC=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!et(n)||n<=0||!et(s)||s<=0)},$q=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lq=function(t){return t&&t.type&&yl(t.type)&&$q.indexOf(t.type)>=0},Bq=function(t){return t&&Xw(t)==="object"&&"clipDot"in t},Uq=function(t,r,n,s){var i,o=(i=gv?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Rt(t)&&(s&&o.includes(r)||Iq.includes(r))||n&&tN.includes(r)},At=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(U.isValidElement(t)&&(s=t.props),!xu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Uq((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Jw=function e(t,r){if(t===r)return!0;var n=U.Children.count(t);if(n!==U.Children.count(r))return!1;if(n===0)return!0;if(n===1)return HC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!HC(i,o))return!1}return!0},HC=function(t,r){if(zt(t)&&zt(r))return!0;if(!zt(t)&&!zt(r)){var n=t.props||{},s=n.children,i=$C(n,Mq),o=r.props||{},l=o.children,u=$C(o,Rq);return s&&l?Pc(i,u)&&Jw(s,l):!s&&!l?Pc(i,u):!1}return!1},qC=function(t,r){var n=[],s={};return rN(t).forEach(function(i,o){if(Lq(i))n.push(i);else if(i){var l=Ci(i.type),u=r[l]||{},d=u.handler,f=u.once;if(d&&(!f||!s[l])){var p=d(i,l,o);n.push(p),s[l]=!0}}}),n},Hq=function(t){var r=t&&t.type;return r&&LC[r]?LC[r]:null},qq=function(t,r){return rN(r).indexOf(t)},zq=["children","width","height","viewBox","className","style","title","desc"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qw.apply(this,arguments)}function Kq(e,t){if(e==null)return{};var r=Wq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Zw(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,u=e.desc,d=Kq(e,zq),f=s||{width:r,height:n,x:0,y:0},p=Ht("recharts-surface",i);return de.createElement("svg",Qw({},At(d,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),de.createElement("title",null,l),de.createElement("desc",null,u),t)}var Vq=["children","className"];function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ej.apply(this,arguments)}function Gq(e,t){if(e==null)return{};var r=Yq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ir=de.forwardRef(function(e,t){var r=e.children,n=e.className,s=Gq(e,Vq),i=Ht("recharts-layer",n);return de.createElement("g",ej({className:i},At(s,!0),{ref:t}),r)}),Ps=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},yv,zC;function Xq(){if(zC)return yv;zC=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return yv=e,yv}var vv,KC;function Jq(){if(KC)return vv;KC=1;var e=Xq();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return vv=t,vv}var bv,WC;function YD(){if(WC)return bv;WC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function u(d){return l.test(d)}return bv=u,bv}var wv,VC;function Qq(){if(VC)return wv;VC=1;function e(t){return t.split("")}return wv=e,wv}var jv,GC;function Zq(){if(GC)return jv;GC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=d+"?",y="["+i+"]?",v="(?:"+x+"(?:"+[f,p,m].join("|")+")"+y+b+")*",N=y+b+v,k="(?:"+[f+l+"?",l,p,m,o].join("|")+")",j=RegExp(u+"(?="+u+")|"+k+N,"g");function A(S){return S.match(j)||[]}return jv=A,jv}var Nv,YC;function ez(){if(YC)return Nv;YC=1;var e=Qq(),t=YD(),r=Zq();function n(s){return t(s)?r(s):e(s)}return Nv=n,Nv}var kv,XC;function tz(){if(XC)return kv;XC=1;var e=Jq(),t=YD(),r=ez(),n=KD();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,u=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return u[i]()+d}}return kv=s,kv}var Sv,JC;function rz(){if(JC)return Sv;JC=1;var e=tz(),t=e("toUpperCase");return Sv=t,Sv}var nz=rz();const Lm=vr(nz);function Or(e){return function(){return e}}const XD=Math.cos,lp=Math.sin,Fs=Math.sqrt,cp=Math.PI,Bm=2*cp,tj=Math.PI,rj=2*tj,Zo=1e-6,az=rj-Zo;function JD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function sz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return JD;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class iz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?JD:sz(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=n-t,d=s-r,f=o-t,p=l-r,m=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Zo)if(!(Math.abs(p*u-d*f)>Zo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,b=s-l,y=u*u+d*d,v=x*x+b*b,N=Math.sqrt(y),k=Math.sqrt(m),j=i*Math.tan((tj-Math.acos((y+m-v)/(2*N*k)))/2),A=j/k,S=j/N;Math.abs(A-1)>Zo&&this._append`L${t+A*f},${r+A*p}`,this._append`A${i},${i},0,0,${+(p*x>f*b)},${this._x1=t+S*u},${this._y1=r+S*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),u=n*Math.sin(s),d=t+l,f=r+u,p=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Zo||Math.abs(this._y1-f)>Zo)&&this._append`L${d},${f}`,n&&(m<0&&(m=m%rj+rj),m>az?this._append`A${n},${n},0,1,${p},${t-l},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:m>Zo&&this._append`A${n},${n},0,${+(m>=tj)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function nN(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new iz(t)}function aN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QD(e){this._context=e}QD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Um(e){return new QD(e)}function ZD(e){return e[0]}function e5(e){return e[1]}function t5(e,t){var r=Or(!0),n=null,s=Um,i=null,o=nN(l);e=typeof e=="function"?e:e===void 0?ZD:Or(e),t=typeof t=="function"?t:t===void 0?e5:Or(t);function l(u){var d,f=(u=aN(u)).length,p,m=!1,x;for(n==null&&(i=s(x=o())),d=0;d<=f;++d)!(d<f&&r(p=u[d],d,u))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(p,d,u),+t(p,d,u));if(x)return i=null,x+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Or(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Or(+u),l):t},l.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Or(!!u),l):r},l.curve=function(u){return arguments.length?(s=u,n!=null&&(i=s(n)),l):s},l.context=function(u){return arguments.length?(u==null?n=i=null:i=s(n=u),l):n},l}function k0(e,t,r){var n=null,s=Or(!0),i=null,o=Um,l=null,u=nN(d);e=typeof e=="function"?e:e===void 0?ZD:Or(+e),t=typeof t=="function"?t:Or(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?e5:Or(+r);function d(p){var m,x,b,y=(p=aN(p)).length,v,N=!1,k,j=new Array(y),A=new Array(y);for(i==null&&(l=o(k=u())),m=0;m<=y;++m){if(!(m<y&&s(v=p[m],m,p))===N)if(N=!N)x=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=m-1;b>=x;--b)l.point(j[b],A[b]);l.lineEnd(),l.areaEnd()}N&&(j[m]=+e(v,m,p),A[m]=+t(v,m,p),l.point(n?+n(v,m,p):j[m],r?+r(v,m,p):A[m]))}if(k)return l=null,k+""||null}function f(){return t5().defined(s).curve(o).context(i)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Or(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Or(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Or(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Or(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Or(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Or(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Or(!!p),d):s},d.curve=function(p){return arguments.length?(o=p,i!=null&&(l=o(i)),d):o},d.context=function(p){return arguments.length?(p==null?i=l=null:l=o(i=p),d):i},d}class r5{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function oz(e){return new r5(e,!0)}function lz(e){return new r5(e,!1)}const sN={draw(e,t){const r=Fs(t/cp);e.moveTo(r,0),e.arc(0,0,r,0,Bm)}},cz={draw(e,t){const r=Fs(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},n5=Fs(1/3),uz=n5*2,dz={draw(e,t){const r=Fs(t/uz),n=r*n5;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},hz={draw(e,t){const r=Fs(t),n=-r/2;e.rect(n,n,r,r)}},fz=.8908130915292852,a5=lp(cp/10)/lp(7*cp/10),pz=lp(Bm/10)*a5,mz=-XD(Bm/10)*a5,gz={draw(e,t){const r=Fs(t*fz),n=pz*r,s=mz*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Bm*i/5,l=XD(o),u=lp(o);e.lineTo(u*r,-l*r),e.lineTo(l*n-u*s,u*n+l*s)}e.closePath()}},_v=Fs(3),xz={draw(e,t){const r=-Fs(t/(_v*3));e.moveTo(0,r*2),e.lineTo(-_v*r,-r),e.lineTo(_v*r,-r),e.closePath()}},Qa=-.5,Za=Fs(3)/2,nj=1/Fs(12),yz=(nj/2+1)*3,vz={draw(e,t){const r=Fs(t/yz),n=r/2,s=r*nj,i=n,o=r*nj+r,l=-i,u=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,u),e.lineTo(Qa*n-Za*s,Za*n+Qa*s),e.lineTo(Qa*i-Za*o,Za*i+Qa*o),e.lineTo(Qa*l-Za*u,Za*l+Qa*u),e.lineTo(Qa*n+Za*s,Qa*s-Za*n),e.lineTo(Qa*i+Za*o,Qa*o-Za*i),e.lineTo(Qa*l+Za*u,Qa*u-Za*l),e.closePath()}};function bz(e,t){let r=null,n=nN(s);e=typeof e=="function"?e:Or(e||sN),t=typeof t=="function"?t:Or(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Or(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Or(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function up(){}function dp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function s5(e){this._context=e}s5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wz(e){return new s5(e)}function i5(e){this._context=e}i5.prototype={areaStart:up,areaEnd:up,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jz(e){return new i5(e)}function o5(e){this._context=e}o5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nz(e){return new o5(e)}function l5(e){this._context=e}l5.prototype={areaStart:up,areaEnd:up,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function kz(e){return new l5(e)}function QC(e){return e<0?-1:1}function ZC(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(QC(i)+QC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function eT(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ev(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function hp(e){this._context=e}hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ev(this,this._t0,eT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ev(this,eT(this,r=ZC(this,e,t)),r);break;default:Ev(this,this._t0,r=ZC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function c5(e){this._context=new u5(e)}(c5.prototype=Object.create(hp.prototype)).point=function(e,t){hp.prototype.point.call(this,t,e)};function u5(e){this._context=e}u5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function Sz(e){return new hp(e)}function _z(e){return new c5(e)}function d5(e){this._context=e}d5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=tT(e),s=tT(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tT(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Ez(e){return new d5(e)}function Hm(e,t){this._context=e,this._t=t}Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Cz(e){return new Hm(e,.5)}function Tz(e){return new Hm(e,0)}function Az(e){return new Hm(e,1)}function Lc(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function aj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Oz(e,t){return e[t]}function Pz(e){const t=[];return t.key=e,t}function Iz(){var e=Or([]),t=aj,r=Lc,n=Oz;function s(i){var o=Array.from(e.apply(this,arguments),Pz),l,u=o.length,d=-1,f;for(const p of i)for(l=0,++d;l<u;++l)(o[l][d]=[0,+n(p,o[l].key,d,i)]).data=p;for(l=0,f=aN(t(o));l<u;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Or(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Or(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?aj:typeof i=="function"?i:Or(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Lc,s):r},s}function Dz(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Lc(e,t)}}function Mz(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Lc(e,t)}}function Rz(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,u=0,d=0;l<o;++l){for(var f=e[t[l]],p=f[n][1]||0,m=f[n-1][1]||0,x=(p-m)/2,b=0;b<l;++b){var y=e[t[b]],v=y[n][1]||0,N=y[n-1][1]||0;x+=v-N}u+=p,d+=x*p}s[n-1][1]+=s[n-1][0]=r,u&&(r-=d/u)}s[n-1][1]+=s[n-1][0]=r,Lc(e,t)}}function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}var Fz=["type","size","sizeType"];function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sj.apply(this,arguments)}function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(r),!0).forEach(function(n){$z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $z(e,t,r){return t=Lz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lz(e){var t=Bz(e,"string");return sh(t)=="symbol"?t:t+""}function Bz(e,t){if(sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uz(e,t){if(e==null)return{};var r=Hz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var h5={symbolCircle:sN,symbolCross:cz,symbolDiamond:dz,symbolSquare:hz,symbolStar:gz,symbolTriangle:xz,symbolWye:vz},qz=Math.PI/180,zz=function(t){var r="symbol".concat(Lm(t));return h5[r]||sN},Kz=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*qz;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Wz=function(t,r){h5["symbol".concat(Lm(t))]=r},iN=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,u=Uz(t,Fz),d=nT(nT({},u),{},{type:n,size:i,sizeType:l}),f=function(){var v=zz(n),N=bz().type(v).size(Kz(i,l,n));return N()},p=d.className,m=d.cx,x=d.cy,b=At(d,!0);return m===+m&&x===+x&&i===+i?de.createElement("path",sj({},b,{className:Ht("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(x,")"),d:f()})):null};iN.registerSymbol=Wz;function Bc(e){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(e)}function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ij.apply(this,arguments)}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(r),!0).forEach(function(n){ih(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p5(n.key),n)}}function Xz(e,t,r){return t&&Yz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jz(e,t,r){return t=fp(t),Qz(e,f5()?Reflect.construct(t,r||[],fp(e).constructor):t.apply(e,r))}function Qz(e,t){if(t&&(Bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zz(e)}function Zz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f5=function(){return!!e})()}function fp(e){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fp(e)}function eK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oj(e,t)}function oj(e,t){return oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},oj(e,t)}function ih(e,t,r){return t=p5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p5(e){var t=tK(e,"string");return Bc(t)=="symbol"?t:t+""}function tK(e,t){if(Bc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var es=32,oN=(function(e){function t(){return Gz(this,t),Jz(this,t,arguments)}return eK(t,e),Xz(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=es/2,o=es/6,l=es/3,u=n.inactive?s:n.color;if(n.type==="plainline")return de.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:es,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return de.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(es,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return de.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(es/8,"h").concat(es,"v").concat(es*3/4,"h").concat(-es,"z"),className:"recharts-legend-icon"});if(de.isValidElement(n.legendIcon)){var d=Vz({},n);return delete d.legendIcon,de.cloneElement(n.legendIcon,d)}return de.createElement(iN,{fill:u,cx:i,cy:i,size:es,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,u=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:es,height:es},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,b){var y=x.formatter||u,v=Ht(ih(ih({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var N=Rt(x.value)?null:x.value;Ps(!Rt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=x.inactive?d:x.color;return de.createElement("li",ij({className:v,style:p,key:"legend-item-".concat(b)},vl(n.props,x,b)),de.createElement(Zw,{width:o,height:o,viewBox:f,style:m},n.renderIcon(x)),de.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},y?y(N,x,b):N))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return de.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(U.PureComponent);ih(oN,"displayName","Legend");ih(oN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Cv,sT;function rK(){if(sT)return Cv;sT=1;var e=Rm();function t(){this.__data__=new e,this.size=0}return Cv=t,Cv}var Tv,iT;function nK(){if(iT)return Tv;iT=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Tv=e,Tv}var Av,oT;function aK(){if(oT)return Av;oT=1;function e(t){return this.__data__.get(t)}return Av=e,Av}var Ov,lT;function sK(){if(lT)return Ov;lT=1;function e(t){return this.__data__.has(t)}return Ov=e,Ov}var Pv,cT;function iK(){if(cT)return Pv;cT=1;var e=Rm(),t=J2(),r=Q2(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<n-1)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(i,o),this.size=l.size,this}return Pv=s,Pv}var Iv,uT;function m5(){if(uT)return Iv;uT=1;var e=Rm(),t=rK(),r=nK(),n=aK(),s=sK(),i=iK();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,Iv=o,Iv}var Dv,dT;function oK(){if(dT)return Dv;dT=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Dv=t,Dv}var Mv,hT;function lK(){if(hT)return Mv;hT=1;function e(t){return this.__data__.has(t)}return Mv=e,Mv}var Rv,fT;function g5(){if(fT)return Rv;fT=1;var e=Q2(),t=oK(),r=lK();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Rv=n,Rv}var Fv,pT;function x5(){if(pT)return Fv;pT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return Fv=e,Fv}var $v,mT;function y5(){if(mT)return $v;mT=1;function e(t,r){return t.has(r)}return $v=e,$v}var Lv,gT;function v5(){if(gT)return Lv;gT=1;var e=g5(),t=x5(),r=y5(),n=1,s=2;function i(o,l,u,d,f,p){var m=u&n,x=o.length,b=l.length;if(x!=b&&!(m&&b>x))return!1;var y=p.get(o),v=p.get(l);if(y&&v)return y==l&&v==o;var N=-1,k=!0,j=u&s?new e:void 0;for(p.set(o,l),p.set(l,o);++N<x;){var A=o[N],S=l[N];if(d)var E=m?d(S,A,N,l,o,p):d(A,S,N,o,l,p);if(E!==void 0){if(E)continue;k=!1;break}if(j){if(!t(l,function(_,T){if(!r(j,T)&&(A===_||f(A,_,u,d,p)))return j.push(T)})){k=!1;break}}else if(!(A===S||f(A,S,u,d,p))){k=!1;break}}return p.delete(o),p.delete(l),k}return Lv=i,Lv}var Bv,xT;function cK(){if(xT)return Bv;xT=1;var e=ri(),t=e.Uint8Array;return Bv=t,Bv}var Uv,yT;function uK(){if(yT)return Uv;yT=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return Uv=e,Uv}var Hv,vT;function lN(){if(vT)return Hv;vT=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return Hv=e,Hv}var qv,bT;function dK(){if(bT)return qv;bT=1;var e=Qh(),t=cK(),r=X2(),n=v5(),s=uK(),i=lN(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",x="[object RegExp]",b="[object Set]",y="[object String]",v="[object Symbol]",N="[object ArrayBuffer]",k="[object DataView]",j=e?e.prototype:void 0,A=j?j.valueOf:void 0;function S(E,_,T,D,F,P,I){switch(T){case k:if(E.byteLength!=_.byteLength||E.byteOffset!=_.byteOffset)return!1;E=E.buffer,_=_.buffer;case N:return!(E.byteLength!=_.byteLength||!P(new t(E),new t(_)));case u:case d:case m:return r(+E,+_);case f:return E.name==_.name&&E.message==_.message;case x:case y:return E==_+"";case p:var B=s;case b:var z=D&o;if(B||(B=i),E.size!=_.size&&!z)return!1;var Y=I.get(E);if(Y)return Y==_;D|=l,I.set(E,_);var re=n(B(E),B(_),D,F,P,I);return I.delete(E),re;case v:if(A)return A.call(E)==A.call(_)}return!1}return qv=S,qv}var zv,wT;function b5(){if(wT)return zv;wT=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return zv=e,zv}var Kv,jT;function hK(){if(jT)return Kv;jT=1;var e=b5(),t=Ca();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return Kv=r,Kv}var Wv,NT;function fK(){if(NT)return Wv;NT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return Wv=e,Wv}var Vv,kT;function pK(){if(kT)return Vv;kT=1;function e(){return[]}return Vv=e,Vv}var Gv,ST;function mK(){if(ST)return Gv;ST=1;var e=fK(),t=pK(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return Gv=i,Gv}var Yv,_T;function gK(){if(_T)return Yv;_T=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return Yv=e,Yv}var Xv,ET;function xK(){if(ET)return Xv;ET=1;var e=Li(),t=Bi(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Xv=n,Xv}var Jv,CT;function cN(){if(CT)return Jv;CT=1;var e=xK(),t=Bi(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return Jv=i,Jv}var kd={exports:{}},Qv,TT;function yK(){if(TT)return Qv;TT=1;function e(){return!1}return Qv=e,Qv}kd.exports;var AT;function w5(){return AT||(AT=1,(function(e,t){var r=ri(),n=yK(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||n;e.exports=d})(kd,kd.exports)),kd.exports}var Zv,OT;function uN(){if(OT)return Zv;OT=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Zv=r,Zv}var eb,PT;function dN(){if(PT)return eb;PT=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return eb=t,eb}var tb,IT;function vK(){if(IT)return tb;IT=1;var e=Li(),t=dN(),r=Bi(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",x="[object Set]",b="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",j="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",_="[object Uint8Array]",T="[object Uint8ClampedArray]",D="[object Uint16Array]",F="[object Uint32Array]",P={};P[k]=P[j]=P[A]=P[S]=P[E]=P[_]=P[T]=P[D]=P[F]=!0,P[n]=P[s]=P[v]=P[i]=P[N]=P[o]=P[l]=P[u]=P[d]=P[f]=P[p]=P[m]=P[x]=P[b]=P[y]=!1;function I(B){return r(B)&&t(B.length)&&!!P[e(B)]}return tb=I,tb}var rb,DT;function j5(){if(DT)return rb;DT=1;function e(t){return function(r){return t(r)}}return rb=e,rb}var Sd={exports:{}};Sd.exports;var MT;function bK(){return MT||(MT=1,(function(e,t){var r=HD(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var u=s&&s.require&&s.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Sd,Sd.exports)),Sd.exports}var nb,RT;function N5(){if(RT)return nb;RT=1;var e=vK(),t=j5(),r=bK(),n=r&&r.isTypedArray,s=n?t(n):e;return nb=s,nb}var ab,FT;function wK(){if(FT)return ab;FT=1;var e=gK(),t=cN(),r=Ca(),n=w5(),s=uN(),i=N5(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=r(d),m=!p&&t(d),x=!p&&!m&&n(d),b=!p&&!m&&!x&&i(d),y=p||m||x||b,v=y?e(d.length,String):[],N=v.length;for(var k in d)(f||l.call(d,k))&&!(y&&(k=="length"||x&&(k=="offset"||k=="parent")||b&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||s(k,N)))&&v.push(k);return v}return ab=u,ab}var sb,$T;function jK(){if($T)return sb;$T=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return sb=t,sb}var ib,LT;function k5(){if(LT)return ib;LT=1;function e(t,r){return function(n){return t(r(n))}}return ib=e,ib}var ob,BT;function NK(){if(BT)return ob;BT=1;var e=k5(),t=e(Object.keys,Object);return ob=t,ob}var lb,UT;function kK(){if(UT)return lb;UT=1;var e=jK(),t=NK(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return lb=s,lb}var cb,HT;function ef(){if(HT)return cb;HT=1;var e=Y2(),t=dN();function r(n){return n!=null&&t(n.length)&&!e(n)}return cb=r,cb}var ub,qT;function qm(){if(qT)return ub;qT=1;var e=wK(),t=kK(),r=ef();function n(s){return r(s)?e(s):t(s)}return ub=n,ub}var db,zT;function SK(){if(zT)return db;zT=1;var e=hK(),t=mK(),r=qm();function n(s){return e(s,r,t)}return db=n,db}var hb,KT;function _K(){if(KT)return hb;KT=1;var e=SK(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,u,d,f){var p=l&t,m=e(i),x=m.length,b=e(o),y=b.length;if(x!=y&&!p)return!1;for(var v=x;v--;){var N=m[v];if(!(p?N in o:n.call(o,N)))return!1}var k=f.get(i),j=f.get(o);if(k&&j)return k==o&&j==i;var A=!0;f.set(i,o),f.set(o,i);for(var S=p;++v<x;){N=m[v];var E=i[N],_=o[N];if(u)var T=p?u(_,E,N,o,i,f):u(E,_,N,i,o,f);if(!(T===void 0?E===_||d(E,_,l,u,f):T)){A=!1;break}S||(S=N=="constructor")}if(A&&!S){var D=i.constructor,F=o.constructor;D!=F&&"constructor"in i&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof F=="function"&&F instanceof F)&&(A=!1)}return f.delete(i),f.delete(o),A}return hb=s,hb}var fb,WT;function EK(){if(WT)return fb;WT=1;var e=Tl(),t=ri(),r=e(t,"DataView");return fb=r,fb}var pb,VT;function CK(){if(VT)return pb;VT=1;var e=Tl(),t=ri(),r=e(t,"Promise");return pb=r,pb}var mb,GT;function S5(){if(GT)return mb;GT=1;var e=Tl(),t=ri(),r=e(t,"Set");return mb=r,mb}var gb,YT;function TK(){if(YT)return gb;YT=1;var e=Tl(),t=ri(),r=e(t,"WeakMap");return gb=r,gb}var xb,XT;function AK(){if(XT)return xb;XT=1;var e=EK(),t=J2(),r=CK(),n=S5(),s=TK(),i=Li(),o=qD(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",x=o(e),b=o(t),y=o(r),v=o(n),N=o(s),k=i;return(e&&k(new e(new ArrayBuffer(1)))!=m||t&&k(new t)!=l||r&&k(r.resolve())!=d||n&&k(new n)!=f||s&&k(new s)!=p)&&(k=function(j){var A=i(j),S=A==u?j.constructor:void 0,E=S?o(S):"";if(E)switch(E){case x:return m;case b:return l;case y:return d;case v:return f;case N:return p}return A}),xb=k,xb}var yb,JT;function OK(){if(JT)return yb;JT=1;var e=m5(),t=v5(),r=dK(),n=_K(),s=AK(),i=Ca(),o=w5(),l=N5(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function b(y,v,N,k,j,A){var S=i(y),E=i(v),_=S?f:s(y),T=E?f:s(v);_=_==d?p:_,T=T==d?p:T;var D=_==p,F=T==p,P=_==T;if(P&&o(y)){if(!o(v))return!1;S=!0,D=!1}if(P&&!D)return A||(A=new e),S||l(y)?t(y,v,N,k,j,A):r(y,v,_,N,k,j,A);if(!(N&u)){var I=D&&x.call(y,"__wrapped__"),B=F&&x.call(v,"__wrapped__");if(I||B){var z=I?y.value():y,Y=B?v.value():v;return A||(A=new e),j(z,Y,N,k,A)}}return P?(A||(A=new e),n(y,v,N,k,j,A)):!1}return yb=b,yb}var vb,QT;function hN(){if(QT)return vb;QT=1;var e=OK(),t=Bi();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return vb=r,vb}var bb,ZT;function PK(){if(ZT)return bb;ZT=1;var e=m5(),t=hN(),r=1,n=2;function s(i,o,l,u){var d=l.length,f=d,p=!u;if(i==null)return!f;for(i=Object(i);d--;){var m=l[d];if(p&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<f;){m=l[d];var x=m[0],b=i[x],y=m[1];if(p&&m[2]){if(b===void 0&&!(x in i))return!1}else{var v=new e;if(u)var N=u(b,y,x,i,o,v);if(!(N===void 0?t(y,b,r|n,u,v):N))return!1}}return!0}return bb=s,bb}var wb,eA;function _5(){if(eA)return wb;eA=1;var e=Co();function t(r){return r===r&&!e(r)}return wb=t,wb}var jb,tA;function IK(){if(tA)return jb;tA=1;var e=_5(),t=qm();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return jb=r,jb}var Nb,rA;function E5(){if(rA)return Nb;rA=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Nb=e,Nb}var kb,nA;function DK(){if(nA)return kb;nA=1;var e=PK(),t=IK(),r=E5();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return kb=n,kb}var Sb,aA;function MK(){if(aA)return Sb;aA=1;function e(t,r){return t!=null&&r in Object(t)}return Sb=e,Sb}var _b,sA;function RK(){if(sA)return _b;sA=1;var e=WD(),t=cN(),r=Ca(),n=uN(),s=dN(),i=$m();function o(l,u,d){u=e(u,l);for(var f=-1,p=u.length,m=!1;++f<p;){var x=i(u[f]);if(!(m=l!=null&&d(l,x)))break;l=l[x]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&s(p)&&n(x,p)&&(r(l)||t(l)))}return _b=o,_b}var Eb,iA;function FK(){if(iA)return Eb;iA=1;var e=MK(),t=RK();function r(n,s){return n!=null&&t(n,s,e)}return Eb=r,Eb}var Cb,oA;function $K(){if(oA)return Cb;oA=1;var e=hN(),t=VD(),r=FK(),n=G2(),s=_5(),i=E5(),o=$m(),l=1,u=2;function d(f,p){return n(f)&&s(p)?i(o(f),p):function(m){var x=t(m,f);return x===void 0&&x===p?r(m,f):e(p,x,l|u)}}return Cb=d,Cb}var Tb,lA;function vu(){if(lA)return Tb;lA=1;function e(t){return t}return Tb=e,Tb}var Ab,cA;function LK(){if(cA)return Ab;cA=1;function e(t){return function(r){return r?.[t]}}return Ab=e,Ab}var Ob,uA;function BK(){if(uA)return Ob;uA=1;var e=eN();function t(r){return function(n){return e(n,r)}}return Ob=t,Ob}var Pb,dA;function UK(){if(dA)return Pb;dA=1;var e=LK(),t=BK(),r=G2(),n=$m();function s(i){return r(i)?e(n(i)):t(i)}return Pb=s,Pb}var Ib,hA;function ni(){if(hA)return Ib;hA=1;var e=DK(),t=$K(),r=vu(),n=Ca(),s=UK();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return Ib=i,Ib}var Db,fA;function C5(){if(fA)return Db;fA=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Db=e,Db}var Mb,pA;function HK(){if(pA)return Mb;pA=1;function e(t){return t!==t}return Mb=e,Mb}var Rb,mA;function qK(){if(mA)return Rb;mA=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return Rb=e,Rb}var Fb,gA;function zK(){if(gA)return Fb;gA=1;var e=C5(),t=HK(),r=qK();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Fb=n,Fb}var $b,xA;function KK(){if(xA)return $b;xA=1;var e=zK();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return $b=t,$b}var Lb,yA;function WK(){if(yA)return Lb;yA=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return Lb=e,Lb}var Bb,vA;function VK(){if(vA)return Bb;vA=1;function e(){}return Bb=e,Bb}var Ub,bA;function GK(){if(bA)return Ub;bA=1;var e=S5(),t=VK(),r=lN(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return Ub=s,Ub}var Hb,wA;function YK(){if(wA)return Hb;wA=1;var e=g5(),t=KK(),r=WK(),n=y5(),s=GK(),i=lN(),o=200;function l(u,d,f){var p=-1,m=t,x=u.length,b=!0,y=[],v=y;if(f)b=!1,m=r;else if(x>=o){var N=d?null:s(u);if(N)return i(N);b=!1,m=n,v=new e}else v=d?[]:y;e:for(;++p<x;){var k=u[p],j=d?d(k):k;if(k=f||k!==0?k:0,b&&j===j){for(var A=v.length;A--;)if(v[A]===j)continue e;d&&v.push(j),y.push(k)}else m(v,j,f)||(v!==y&&v.push(j),y.push(k))}return y}return Hb=l,Hb}var qb,jA;function XK(){if(jA)return qb;jA=1;var e=ni(),t=YK();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return qb=r,qb}var JK=XK();const NA=vr(JK);function T5(e,t,r){return t===!0?NA(e,r):Rt(t)?NA(e,t):e}function Uc(e){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(e)}var QK=["ref"];function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(n){zm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O5(n.key),n)}}function eW(e,t,r){return t&&SA(e.prototype,t),r&&SA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tW(e,t,r){return t=pp(t),rW(e,A5()?Reflect.construct(t,r||[],pp(e).constructor):t.apply(e,r))}function rW(e,t){if(t&&(Uc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nW(e)}function nW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A5=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pp(e)}function aW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lj(e,t)}function lj(e,t){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},lj(e,t)}function zm(e,t,r){return t=O5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O5(e){var t=sW(e,"string");return Uc(t)=="symbol"?t:t+""}function sW(e,t){if(Uc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iW(e,t){if(e==null)return{};var r=oW(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lW(e){return e.value}function cW(e,t){if(de.isValidElement(e))return de.cloneElement(e,t);if(typeof e=="function")return de.createElement(e,t);t.ref;var r=iW(t,QK);return de.createElement(oN,r)}var _A=1,qn=(function(e){function t(){var r;ZK(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=tW(this,t,[].concat(s)),zm(r,"lastBoundingBox",{width:-1,height:-1}),r}return aW(t,e),eW(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>_A||Math.abs(s.height-this.lastBoundingBox.height)>_A)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,u=s.margin,d=s.chartWidth,f=s.chartHeight,p,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();m={top:((f||0)-b.height)/2}}else m=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return gi(gi({},p),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,u=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,p=gi(gi({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return de.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){n.wrapperNode=x}},cW(i,gi(gi({},this.props),{},{payload:T5(f,d,lW)})))}}],[{key:"getWithHeight",value:function(n,s){var i=gi(gi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&et(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(U.PureComponent);zm(qn,"displayName","Legend");zm(qn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var zb,EA;function uW(){if(EA)return zb;EA=1;var e=Qh(),t=cN(),r=Ca(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return zb=s,zb}var Kb,CA;function P5(){if(CA)return Kb;CA=1;var e=b5(),t=uW();function r(n,s,i,o,l){var u=-1,d=n.length;for(i||(i=t),l||(l=[]);++u<d;){var f=n[u];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return Kb=r,Kb}var Wb,TA;function dW(){if(TA)return Wb;TA=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),u=l.length;u--;){var d=l[t?u:++i];if(n(o[d],d,o)===!1)break}return r}}return Wb=e,Wb}var Vb,AA;function hW(){if(AA)return Vb;AA=1;var e=dW(),t=e();return Vb=t,Vb}var Gb,OA;function I5(){if(OA)return Gb;OA=1;var e=hW(),t=qm();function r(n,s){return n&&e(n,s,t)}return Gb=r,Gb}var Yb,PA;function fW(){if(PA)return Yb;PA=1;var e=ef();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,u=Object(s);(n?l--:++l<o)&&i(u[l],l,u)!==!1;);return s}}return Yb=t,Yb}var Xb,IA;function fN(){if(IA)return Xb;IA=1;var e=I5(),t=fW(),r=t(e);return Xb=r,Xb}var Jb,DA;function D5(){if(DA)return Jb;DA=1;var e=fN(),t=ef();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,u,d){o[++i]=s(l,u,d)}),o}return Jb=r,Jb}var Qb,MA;function pW(){if(MA)return Qb;MA=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Qb=e,Qb}var Zb,RA;function mW(){if(RA)return Zb;RA=1;var e=gu();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),u=n!==void 0,d=n===null,f=n===n,p=e(n);if(!d&&!p&&!l&&r>n||l&&u&&f&&!d&&!p||i&&u&&f||!s&&f||!o)return 1;if(!i&&!l&&!p&&r<n||p&&s&&o&&!i&&!l||d&&s&&o||!u&&o||!f)return-1}return 0}return Zb=t,Zb}var e1,FA;function gW(){if(FA)return e1;FA=1;var e=mW();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,u=o.length,d=s.length;++i<u;){var f=e(o[i],l[i]);if(f){if(i>=d)return f;var p=s[i];return f*(p=="desc"?-1:1)}}return r.index-n.index}return e1=t,e1}var t1,$A;function xW(){if($A)return t1;$A=1;var e=Z2(),t=eN(),r=ni(),n=D5(),s=pW(),i=j5(),o=gW(),l=vu(),u=Ca();function d(f,p,m){p.length?p=e(p,function(y){return u(y)?function(v){return t(v,y.length===1?y[0]:y)}:y}):p=[l];var x=-1;p=e(p,i(r));var b=n(f,function(y,v,N){var k=e(p,function(j){return j(y)});return{criteria:k,index:++x,value:y}});return s(b,function(y,v){return o(y,v,m)})}return t1=d,t1}var r1,LA;function yW(){if(LA)return r1;LA=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return r1=e,r1}var n1,BA;function vW(){if(BA)return n1;BA=1;var e=yW(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,u=t(o.length-s,0),d=Array(u);++l<u;)d[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(d),e(n,this,f)}}return n1=r,n1}var a1,UA;function bW(){if(UA)return a1;UA=1;function e(t){return function(){return t}}return a1=e,a1}var s1,HA;function M5(){if(HA)return s1;HA=1;var e=Tl(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return s1=t,s1}var i1,qA;function wW(){if(qA)return i1;qA=1;var e=bW(),t=M5(),r=vu(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return i1=n,i1}var o1,zA;function jW(){if(zA)return o1;zA=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),u=t-(l-o);if(o=l,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return o1=n,o1}var l1,KA;function NW(){if(KA)return l1;KA=1;var e=wW(),t=jW(),r=t(e);return l1=r,l1}var c1,WA;function kW(){if(WA)return c1;WA=1;var e=vu(),t=vW(),r=NW();function n(s,i){return r(t(s,i,e),s+"")}return c1=n,c1}var u1,VA;function Km(){if(VA)return u1;VA=1;var e=X2(),t=ef(),r=uN(),n=Co();function s(i,o,l){if(!n(l))return!1;var u=typeof o;return(u=="number"?t(l)&&r(o,l.length):u=="string"&&o in l)?e(l[o],i):!1}return u1=s,u1}var d1,GA;function SW(){if(GA)return d1;GA=1;var e=P5(),t=xW(),r=kW(),n=Km(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return d1=s,d1}var _W=SW();const pN=vr(_W);function oh(e){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oh(e)}function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cj.apply(this,arguments)}function EW(e,t){return OW(e)||AW(e,t)||TW(e,t)||CW()}function CW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TW(e,t){if(e){if(typeof e=="string")return YA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YA(e,t)}}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function OW(e){if(Array.isArray(e))return e}function XA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function h1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(r),!0).forEach(function(n){PW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PW(e,t,r){return t=IW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IW(e){var t=DW(e,"string");return oh(t)=="symbol"?t:t+""}function DW(e,t){if(oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MW(e){return Array.isArray(e)&&vn(e[0])&&vn(e[1])?e.join(" ~ "):e}var RW=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,u=t.labelStyle,d=u===void 0?{}:u,f=t.payload,p=t.formatter,m=t.itemSorter,x=t.wrapperClassName,b=t.labelClassName,y=t.label,v=t.labelFormatter,N=t.accessibilityLayer,k=N===void 0?!1:N,j=function(){if(f&&f.length){var I={padding:0,margin:0},B=(m?pN(f,m):f).map(function(z,Y){if(z.type==="none")return null;var re=h1({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),X=z.formatter||p||MW,ne=z.value,Z=z.name,me=ne,G=Z;if(X&&me!=null&&G!=null){var L=X(ne,Z,z,Y,f);if(Array.isArray(L)){var ee=EW(L,2);me=ee[0],G=ee[1]}else me=L}return de.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:re},vn(G)?de.createElement("span",{className:"recharts-tooltip-item-name"},G):null,vn(G)?de.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,de.createElement("span",{className:"recharts-tooltip-item-value"},me),de.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return de.createElement("ul",{className:"recharts-tooltip-item-list",style:I},B)}return null},A=h1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=h1({margin:0},d),E=!zt(y),_=E?y:"",T=Ht("recharts-default-tooltip",x),D=Ht("recharts-tooltip-label",b);E&&v&&f!==void 0&&f!==null&&(_=v(y,f));var F=k?{role:"status","aria-live":"assertive"}:{};return de.createElement("div",cj({className:T,style:A},F),de.createElement("p",{className:D,style:S},de.isValidElement(_)?_:"".concat(_)),j())};function lh(e){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function S0(e,t,r){return t=FW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FW(e){var t=$W(e,"string");return lh(t)=="symbol"?t:t+""}function $W(e,t){if(lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hd="recharts-tooltip-wrapper",LW={visibility:"hidden"};function BW(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Ht(hd,S0(S0(S0(S0({},"".concat(hd,"-right"),et(r)&&t&&et(t.x)&&r>=t.x),"".concat(hd,"-left"),et(r)&&t&&et(t.x)&&r<t.x),"".concat(hd,"-bottom"),et(n)&&t&&et(t.y)&&n>=t.y),"".concat(hd,"-top"),et(n)&&t&&et(t.y)&&n<t.y))}function JA(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,u=e.viewBox,d=e.viewBoxDimension;if(i&&et(i[n]))return i[n];var f=r[n]-l-s,p=r[n]+s;if(t[n])return o[n]?f:p;if(o[n]){var m=f,x=u[n];return m<x?Math.max(p,u[n]):Math.max(f,u[n])}var b=p+l,y=u[n]+d;return b>y?Math.max(f,u[n]):Math.max(p,u[n])}function UW(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function HW(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,u=e.viewBox,d,f,p;return o.height>0&&o.width>0&&r?(f=JA({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=JA({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=UW({translateX:f,translateY:p,useTranslate3d:l})):d=LW,{cssProperties:d,cssClasses:BW({translateX:f,translateY:p,coordinate:r})}}function Hc(e){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){dj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F5(n.key),n)}}function KW(e,t,r){return t&&zW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WW(e,t,r){return t=mp(t),VW(e,R5()?Reflect.construct(t,r||[],mp(e).constructor):t.apply(e,r))}function VW(e,t){if(t&&(Hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GW(e)}function GW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R5=function(){return!!e})()}function mp(e){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mp(e)}function YW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uj(e,t)}function uj(e,t){return uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},uj(e,t)}function dj(e,t,r){return t=F5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F5(e){var t=XW(e,"string");return Hc(t)=="symbol"?t:t+""}function XW(e,t){if(Hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var e4=1,JW=(function(e){function t(){var r;qW(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=WW(this,t,[].concat(s)),dj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,u,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return YW(t,e),KW(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>e4||Math.abs(n.height-this.state.lastBoundingBox.height)>e4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.children,f=s.coordinate,p=s.hasPayload,m=s.isAnimationActive,x=s.offset,b=s.position,y=s.reverseDirection,v=s.useTranslate3d,N=s.viewBox,k=s.wrapperStyle,j=HW({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:N}),A=j.cssClasses,S=j.cssProperties,E=ZA(ZA({transition:m&&i?"transform ".concat(l,"ms ").concat(u):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},k);return de.createElement("div",{tabIndex:-1,className:A,style:E,ref:function(T){n.wrapperNode=T}},d)}}])})(U.PureComponent),QW=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},To={isSsr:QW()};function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function t4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t4(Object(r),!0).forEach(function(n){mN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L5(n.key),n)}}function tV(e,t,r){return t&&eV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rV(e,t,r){return t=gp(t),nV(e,$5()?Reflect.construct(t,r||[],gp(e).constructor):t.apply(e,r))}function nV(e,t){if(t&&(qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aV(e)}function aV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($5=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(e)}function sV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hj(e,t)}function hj(e,t){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},hj(e,t)}function mN(e,t,r){return t=L5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L5(e){var t=iV(e,"string");return qc(t)=="symbol"?t:t+""}function iV(e,t){if(qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function oV(e){return e.dataKey}function lV(e,t){return de.isValidElement(e)?de.cloneElement(e,t):typeof e=="function"?de.createElement(e,t):de.createElement(RW,t)}var Pr=(function(e){function t(){return ZW(this,t),rV(this,t,arguments)}return sV(t,e),tV(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.content,f=s.coordinate,p=s.filterNull,m=s.isAnimationActive,x=s.offset,b=s.payload,y=s.payloadUniqBy,v=s.position,N=s.reverseDirection,k=s.useTranslate3d,j=s.viewBox,A=s.wrapperStyle,S=b??[];p&&S.length&&(S=T5(b.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),y,oV));var E=S.length>0;return de.createElement(JW,{allowEscapeViewBox:o,animationDuration:l,animationEasing:u,isAnimationActive:m,active:i,coordinate:f,hasPayload:E,offset:x,position:v,reverseDirection:N,useTranslate3d:k,viewBox:j,wrapperStyle:A},lV(d,r4(r4({},this.props),{},{payload:S})))}}])})(U.PureComponent);mN(Pr,"displayName","Tooltip");mN(Pr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!To.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var f1,n4;function cV(){if(n4)return f1;n4=1;var e=ri(),t=function(){return e.Date.now()};return f1=t,f1}var p1,a4;function uV(){if(a4)return p1;a4=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return p1=t,p1}var m1,s4;function dV(){if(s4)return m1;s4=1;var e=uV(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return m1=r,m1}var g1,i4;function B5(){if(i4)return g1;i4=1;var e=dV(),t=Co(),r=gu(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(r(d))return n;if(t(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=t(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=i.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):s.test(d)?n:+d}return g1=u,g1}var x1,o4;function hV(){if(o4)return x1;o4=1;var e=Co(),t=cV(),r=B5(),n="Expected a function",s=Math.max,i=Math.min;function o(l,u,d){var f,p,m,x,b,y,v=0,N=!1,k=!1,j=!0;if(typeof l!="function")throw new TypeError(n);u=r(u)||0,e(d)&&(N=!!d.leading,k="maxWait"in d,m=k?s(r(d.maxWait)||0,u):m,j="trailing"in d?!!d.trailing:j);function A(B){var z=f,Y=p;return f=p=void 0,v=B,x=l.apply(Y,z),x}function S(B){return v=B,b=setTimeout(T,u),N?A(B):x}function E(B){var z=B-y,Y=B-v,re=u-z;return k?i(re,m-Y):re}function _(B){var z=B-y,Y=B-v;return y===void 0||z>=u||z<0||k&&Y>=m}function T(){var B=t();if(_(B))return D(B);b=setTimeout(T,E(B))}function D(B){return b=void 0,j&&f?A(B):(f=p=void 0,x)}function F(){b!==void 0&&clearTimeout(b),v=0,f=y=p=b=void 0}function P(){return b===void 0?x:D(t())}function I(){var B=t(),z=_(B);if(f=arguments,p=this,y=B,z){if(b===void 0)return S(y);if(k)return clearTimeout(b),b=setTimeout(T,u),A(y)}return b===void 0&&(b=setTimeout(T,u)),x}return I.cancel=F,I.flush=P,I}return x1=o,x1}var y1,l4;function fV(){if(l4)return y1;l4=1;var e=hV(),t=Co(),r="Expected a function";function n(s,i,o){var l=!0,u=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,u="trailing"in o?!!o.trailing:u),e(s,i,{leading:l,maxWait:i,trailing:u})}return y1=n,y1}var pV=fV();const U5=vr(pV);function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function c4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(r),!0).forEach(function(n){mV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mV(e,t,r){return t=gV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e){var t=xV(e,"string");return ch(t)=="symbol"?t:t+""}function xV(e,t){if(ch(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yV(e,t){return jV(e)||wV(e,t)||bV(e,t)||vV()}function vV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bV(e,t){if(e){if(typeof e=="string")return u4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u4(e,t)}}function u4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function jV(e){if(Array.isArray(e))return e}var En=U.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,u=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,p=e.minHeight,m=e.maxHeight,x=e.children,b=e.debounce,y=b===void 0?0:b,v=e.id,N=e.className,k=e.onResize,j=e.style,A=j===void 0?{}:j,S=U.useRef(null),E=U.useRef();E.current=k,U.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var _=U.useState({containerWidth:s.width,containerHeight:s.height}),T=yV(_,2),D=T[0],F=T[1],P=U.useCallback(function(B,z){F(function(Y){var re=Math.round(B),X=Math.round(z);return Y.containerWidth===re&&Y.containerHeight===X?Y:{containerWidth:re,containerHeight:X}})},[]);U.useEffect(function(){var B=function(Z){var me,G=Z[0].contentRect,L=G.width,ee=G.height;P(L,ee),(me=E.current)===null||me===void 0||me.call(E,L,ee)};y>0&&(B=U5(B,y,{trailing:!0,leading:!1}));var z=new ResizeObserver(B),Y=S.current.getBoundingClientRect(),re=Y.width,X=Y.height;return P(re,X),z.observe(S.current),function(){z.disconnect()}},[P,y]);var I=U.useMemo(function(){var B=D.containerWidth,z=D.containerHeight;if(B<0||z<0)return null;Ps(il(o)||il(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,u),Ps(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=il(o)?B:o,re=il(u)?z:u;r&&r>0&&(Y?re=Y/r:re&&(Y=re*r),m&&re>m&&(re=m)),Ps(Y>0||re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,re,o,u,f,p,r);var X=!Array.isArray(x)&&Ci(x.type).endsWith("Chart");return de.Children.map(x,function(ne){return de.isValidElement(ne)?U.cloneElement(ne,_0({width:Y,height:re},X?{style:_0({height:"100%",width:"100%",maxHeight:re,maxWidth:Y},ne.props.style)}:{})):ne})},[r,x,u,m,p,f,D,o]);return de.createElement("div",{id:v?"".concat(v):void 0,className:Ht("recharts-responsive-container",N),style:_0(_0({},A),{},{width:o,height:u,minWidth:f,minHeight:p,maxHeight:m}),ref:S},I)}),zc=function(t){return null};zc.displayName="Cell";function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(n){NV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NV(e,t,r){return t=kV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kV(e){var t=SV(e,"string");return uh(t)=="symbol"?t:t+""}function SV(e,t){if(uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fc={widthCache:{},cacheCount:0},_V=2e3,EV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h4="recharts_measurement_span";function CV(e){var t=fj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Id=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||To.isSsr)return{width:0,height:0};var n=CV(r),s=JSON.stringify({text:t,copyStyle:n});if(fc.widthCache[s])return fc.widthCache[s];try{var i=document.getElementById(h4);i||(i=document.createElement("span"),i.setAttribute("id",h4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=fj(fj({},EV),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),u={width:l.width,height:l.height};return fc.widthCache[s]=u,++fc.cacheCount>_V&&(fc.cacheCount=0,fc.widthCache={}),u}catch{return{width:0,height:0}}},TV=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dh(e){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dh(e)}function xp(e,t){return IV(e)||PV(e,t)||OV(e,t)||AV()}function AV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OV(e,t){if(e){if(typeof e=="string")return f4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f4(e,t)}}function f4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function IV(e){if(Array.isArray(e))return e}function DV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RV(n.key),n)}}function MV(e,t,r){return t&&p4(e.prototype,t),r&&p4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RV(e){var t=FV(e,"string");return dh(t)=="symbol"?t:t+""}function FV(e,t){if(dh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var m4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$V=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,H5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BV=Object.keys(H5),Sc="NaN";function UV(e,t){return e*H5[t]}var E0=(function(){function e(t,r){DV(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!$V.test(r)&&(this.num=NaN,this.unit=""),BV.includes(r)&&(this.num=UV(t,r),this.unit="px")}return MV(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=LV.exec(r))!==null&&n!==void 0?n:[],i=xp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function q5(e){if(e.includes(Sc))return Sc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=m4.exec(t))!==null&&r!==void 0?r:[],s=xp(n,4),i=s[1],o=s[2],l=s[3],u=E0.parse(i??""),d=E0.parse(l??""),f=o==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return Sc;t=t.replace(m4,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,m=(p=g4.exec(t))!==null&&p!==void 0?p:[],x=xp(m,4),b=x[1],y=x[2],v=x[3],N=E0.parse(b??""),k=E0.parse(v??""),j=y==="+"?N.add(k):N.subtract(k);if(j.isNaN())return Sc;t=t.replace(g4,j.toString())}return t}var x4=/\(([^()]*)\)/;function HV(e){for(var t=e;t.includes("(");){var r=x4.exec(t),n=xp(r,2),s=n[1];t=t.replace(x4,q5(s))}return t}function qV(e){var t=e.replace(/\s+/g,"");return t=HV(t),t=q5(t),t}function zV(e){try{return qV(e)}catch{return Sc}}function v1(e){var t=zV(e.slice(5,-1));return t===Sc?"":t}var KV=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],WV=["dx","dy","angle","className","breakAll"];function pj(){return pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pj.apply(this,arguments)}function y4(e,t){if(e==null)return{};var r=VV(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v4(e,t){return JV(e)||XV(e,t)||YV(e,t)||GV()}function GV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YV(e,t){if(e){if(typeof e=="string")return b4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b4(e,t)}}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function JV(e){if(Array.isArray(e))return e}var z5=/[ \f\n\r\t\v\u2028\u2029]+/,K5=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];zt(r)||(n?i=r.toString().split(""):i=r.toString().split(z5));var o=i.map(function(u){return{word:u,width:Id(u,s).width}}),l=n?0:Id("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},QV=function(t,r,n,s,i){var o=t.maxLines,l=t.children,u=t.style,d=t.breakAll,f=et(o),p=l,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(re,X){var ne=X.word,Z=X.width,me=re[re.length-1];if(me&&(s==null||i||me.width+Z+n<Number(s)))me.words.push(ne),me.width+=Z+n;else{var G={words:[ne],width:Z};re.push(G)}return re},[])},x=m(r),b=function(Y){return Y.reduce(function(re,X){return re.width>X.width?re:X})};if(!f)return x;for(var y="",v=function(Y){var re=p.slice(0,Y),X=K5({breakAll:d,style:u,children:re+y}).wordsWithComputedWidth,ne=m(X),Z=ne.length>o||b(ne).width>Number(s);return[Z,ne]},N=0,k=p.length-1,j=0,A;N<=k&&j<=p.length-1;){var S=Math.floor((N+k)/2),E=S-1,_=v(E),T=v4(_,2),D=T[0],F=T[1],P=v(S),I=v4(P,1),B=I[0];if(!D&&!B&&(N=S+1),D&&B&&(k=S-1),!D&&B){A=F;break}j++}return A||x},w4=function(t){var r=zt(t)?[]:t.toString().split(z5);return[{words:r}]},ZV=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!To.isSsr){var u,d,f=K5({breakAll:o,children:s,style:i});if(f){var p=f.wordsWithComputedWidth,m=f.spaceWidth;u=p,d=m}else return w4(s);return QV({breakAll:o,children:s,maxLines:l,style:i},u,d,r,n)}return w4(s)},j4="#808080",bl=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,u=t.capHeight,d=u===void 0?"0.71em":u,f=t.scaleToFit,p=f===void 0?!1:f,m=t.textAnchor,x=m===void 0?"start":m,b=t.verticalAnchor,y=b===void 0?"end":b,v=t.fill,N=v===void 0?j4:v,k=y4(t,KV),j=U.useMemo(function(){return ZV({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:p,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,p,k.style,k.width]),A=k.dx,S=k.dy,E=k.angle,_=k.className,T=k.breakAll,D=y4(k,WV);if(!vn(n)||!vn(i))return null;var F=n+(et(A)?A:0),P=i+(et(S)?S:0),I;switch(y){case"start":I=v1("calc(".concat(d,")"));break;case"middle":I=v1("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:I=v1("calc(".concat(j.length-1," * -").concat(l,")"));break}var B=[];if(p){var z=j[0].width,Y=k.width;B.push("scale(".concat((et(Y)?Y/z:1)/z,")"))}return E&&B.push("rotate(".concat(E,", ").concat(F,", ").concat(P,")")),B.length&&(D.transform=B.join(" ")),de.createElement("text",pj({},At(D,!0),{x:F,y:P,className:Ht("recharts-text",_),textAnchor:x,fill:N.includes("url")?j4:N}),j.map(function(re,X){var ne=re.words.join(T?"":" ");return de.createElement("tspan",{x:F,dy:X===0?I:l,key:"".concat(ne,"-").concat(X)},ne)}))};function No(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gN(e){let t,r,n;e.length!==2?(t=No,r=(l,u)=>No(e(l),u),n=(l,u)=>e(l)-u):(t=e===No||e===eG?e:tG,r=e,n=e);function s(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<0?d=p+1:f=p}while(d<f)}return d}function i(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,u,d=0,f=l.length){const p=s(l,u,d,f-1);return p>d&&n(l[p-1],u)>-n(l[p],u)?p-1:p}return{left:s,center:o,right:i}}function tG(){return 0}function W5(e){return e===null?NaN:+e}function*rG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const nG=gN(No),tf=nG.right;gN(W5).center;class N4 extends Map{constructor(t,r=iG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(k4(this,t))}has(t){return super.has(k4(this,t))}set(t,r){return super.set(aG(this,t),r)}delete(t){return super.delete(sG(this,t))}}function k4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function aG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function sG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function iG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oG(e=No){if(e===No)return V5;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function V5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lG=Math.sqrt(50),cG=Math.sqrt(10),uG=Math.sqrt(2);function yp(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=lG?10:i>=cG?5:i>=uG?2:1;let l,u,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=r&&r<2?yp(e,t,r*2):[l,u,d]}function mj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?yp(t,e,r):yp(e,t,r);if(!(i>=s))return[];const l=i-s+1,u=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)u[d]=(i-d)/-o;else for(let d=0;d<l;++d)u[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(s+d)/-o;else for(let d=0;d<l;++d)u[d]=(s+d)*o;return u}function gj(e,t,r){return t=+t,e=+e,r=+r,yp(e,t,r)[2]}function xj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?gj(t,e,r):gj(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function S4(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function _4(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function G5(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?V5:oG(s);n>r;){if(n-r>600){const u=n-r+1,d=t-r+1,f=Math.log(u),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),x=Math.max(r,Math.floor(t-d*p/u+m)),b=Math.min(n,Math.floor(t+(u-d)*p/u+m));G5(e,t,x,b,s)}const i=e[t];let o=r,l=n;for(fd(e,r,t),s(e[n],i)>0&&fd(e,r,n);o<l;){for(fd(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?fd(e,r,l):(++l,fd(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function fd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function dG(e,t,r){if(e=Float64Array.from(rG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return _4(e);if(t>=1)return S4(e);var n,s=(n-1)*t,i=Math.floor(s),o=S4(G5(e,i).subarray(0,i+1)),l=_4(e.subarray(i+1));return o+(l-o)*(s-i)}}function hG(e,t,r=W5){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function fG(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ds(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ui(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const yj=Symbol("implicit");function xN(){var e=new N4,t=[],r=[],n=yj;function s(i){let o=e.get(i);if(o===void 0){if(n!==yj)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new N4;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return xN(t,r).unknown(n)},ds.apply(s,arguments),s}function hh(){var e=xN().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,u=0,d=0,f=.5;delete e.unknown;function p(){var m=t().length,x=s<n,b=x?s:n,y=x?n:s;i=(y-b)/Math.max(1,m-u+d*2),l&&(i=Math.floor(i)),b+=(y-b-i*(m-u))*f,o=i*(1-u),l&&(b=Math.round(b),o=Math.round(o));var v=fG(m).map(function(N){return b+i*N});return r(x?v.reverse():v)}return e.domain=function(m){return arguments.length?(t(m),p()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,p()):l},e.padding=function(m){return arguments.length?(u=Math.min(1,d=+m),p()):u},e.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),p()):u},e.paddingOuter=function(m){return arguments.length?(d=+m,p()):d},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),p()):f},e.copy=function(){return hh(t(),[n,s]).round(l).paddingInner(u).paddingOuter(d).align(f)},ds.apply(p(),arguments)}function Y5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Y5(t())},e}function Dd(){return Y5(hh.apply(null,arguments).paddingInner(1))}function yN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function X5(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function rf(){}var fh=.7,vp=1/fh,Ic="\\s*([+-]?\\d+)\\s*",ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pG=/^#([0-9a-f]{3,8})$/,mG=new RegExp(`^rgb\\(${Ic},${Ic},${Ic}\\)$`),gG=new RegExp(`^rgb\\(${Js},${Js},${Js}\\)$`),xG=new RegExp(`^rgba\\(${Ic},${Ic},${Ic},${ph}\\)$`),yG=new RegExp(`^rgba\\(${Js},${Js},${Js},${ph}\\)$`),vG=new RegExp(`^hsl\\(${ph},${Js},${Js}\\)$`),bG=new RegExp(`^hsla\\(${ph},${Js},${Js},${ph}\\)$`),E4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yN(rf,mh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:C4,formatHex:C4,formatHex8:wG,formatHsl:jG,formatRgb:T4,toString:T4});function C4(){return this.rgb().formatHex()}function wG(){return this.rgb().formatHex8()}function jG(){return J5(this).formatHsl()}function T4(){return this.rgb().formatRgb()}function mh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=pG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?A4(t):r===3?new _a(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?C0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?C0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mG.exec(e))?new _a(t[1],t[2],t[3],1):(t=gG.exec(e))?new _a(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xG.exec(e))?C0(t[1],t[2],t[3],t[4]):(t=yG.exec(e))?C0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vG.exec(e))?I4(t[1],t[2]/100,t[3]/100,1):(t=bG.exec(e))?I4(t[1],t[2]/100,t[3]/100,t[4]):E4.hasOwnProperty(e)?A4(E4[e]):e==="transparent"?new _a(NaN,NaN,NaN,0):null}function A4(e){return new _a(e>>16&255,e>>8&255,e&255,1)}function C0(e,t,r,n){return n<=0&&(e=t=r=NaN),new _a(e,t,r,n)}function NG(e){return e instanceof rf||(e=mh(e)),e?(e=e.rgb(),new _a(e.r,e.g,e.b,e.opacity)):new _a}function vj(e,t,r,n){return arguments.length===1?NG(e):new _a(e,t,r,n??1)}function _a(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}yN(_a,vj,X5(rf,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new _a(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fh:Math.pow(fh,e),new _a(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _a(dl(this.r),dl(this.g),dl(this.b),bp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:O4,formatHex:O4,formatHex8:kG,formatRgb:P4,toString:P4}));function O4(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}`}function kG(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}${ol((isNaN(this.opacity)?1:this.opacity)*255)}`}function P4(){const e=bp(this.opacity);return`${e===1?"rgb(":"rgba("}${dl(this.r)}, ${dl(this.g)}, ${dl(this.b)}${e===1?")":`, ${e})`}`}function bp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ol(e){return e=dl(e),(e<16?"0":"")+e.toString(16)}function I4(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Cs(e,t,r,n)}function J5(e){if(e instanceof Cs)return new Cs(e.h,e.s,e.l,e.opacity);if(e instanceof rf||(e=mh(e)),!e)return new Cs;if(e instanceof Cs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,u=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=u<.5?i+s:2-i-s,o*=60):l=u>0&&u<1?0:o,new Cs(o,l,u,e.opacity)}function SG(e,t,r,n){return arguments.length===1?J5(e):new Cs(e,t,r,n??1)}function Cs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}yN(Cs,SG,X5(rf,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new Cs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fh:Math.pow(fh,e),new Cs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new _a(b1(e>=240?e-240:e+120,s,n),b1(e,s,n),b1(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Cs(D4(this.h),T0(this.s),T0(this.l),bp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bp(this.opacity);return`${e===1?"hsl(":"hsla("}${D4(this.h)}, ${T0(this.s)*100}%, ${T0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function D4(e){return e=(e||0)%360,e<0?e+360:e}function T0(e){return Math.max(0,Math.min(1,e||0))}function b1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const vN=e=>()=>e;function _G(e,t){return function(r){return e+r*t}}function EG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function CG(e){return(e=+e)==1?Q5:function(t,r){return r-t?EG(t,r,e):vN(isNaN(t)?r:t)}}function Q5(e,t){var r=t-e;return r?_G(e,r):vN(isNaN(e)?t:e)}const M4=(function e(t){var r=CG(t);function n(s,i){var o=r((s=vj(s)).r,(i=vj(i)).r),l=r(s.g,i.g),u=r(s.b,i.b),d=Q5(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=u(f),s.opacity=d(f),s+""}}return n.gamma=e,n})(1);function TG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function AG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=bu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function PG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function wp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function IG(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=bu(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var bj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w1=new RegExp(bj.source,"g");function DG(e){return function(){return e}}function MG(e){return function(t){return e(t)+""}}function RG(e,t){var r=bj.lastIndex=w1.lastIndex=0,n,s,i,o=-1,l=[],u=[];for(e=e+"",t=t+"";(n=bj.exec(e))&&(s=w1.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:wp(n,s)})),r=w1.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?MG(u[0].x):DG(t):(t=u.length,function(d){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function bu(e,t){var r=typeof t,n;return t==null||r==="boolean"?vN(t):(r==="number"?wp:r==="string"?(n=mh(t))?(t=n,M4):RG:t instanceof mh?M4:t instanceof Date?PG:AG(t)?TG:Array.isArray(t)?OG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?IG:wp)(e,t)}function bN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function FG(e,t){t===void 0&&(t=e,e=bu);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function $G(e){return function(){return e}}function jp(e){return+e}var R4=[0,1];function ma(e){return e}function wj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:$G(isNaN(t)?NaN:.5)}function LG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function BG(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=wj(s,n),i=r(o,i)):(n=wj(n,s),i=r(i,o)),function(l){return i(n(l))}}function UG(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=wj(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var u=tf(e,l,1,n)-1;return i[u](s[u](l))}}function nf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wm(){var e=R4,t=R4,r=bu,n,s,i,o=ma,l,u,d;function f(){var m=Math.min(e.length,t.length);return o!==ma&&(o=LG(e[0],e[m-1])),l=m>2?UG:BG,u=d=null,p}function p(m){return m==null||isNaN(m=+m)?i:(u||(u=l(e.map(n),t,r)))(n(o(m)))}return p.invert=function(m){return o(s((d||(d=l(t,e.map(n),wp)))(m)))},p.domain=function(m){return arguments.length?(e=Array.from(m,jp),f()):e.slice()},p.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},p.rangeRound=function(m){return t=Array.from(m),r=bN,f()},p.clamp=function(m){return arguments.length?(o=m?!0:ma,f()):o!==ma},p.interpolate=function(m){return arguments.length?(r=m,f()):r},p.unknown=function(m){return arguments.length?(i=m,p):i},function(m,x){return n=m,s=x,f()}}function wN(){return Wm()(ma,ma)}function HG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Np(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Kc(e){return e=Np(Math.abs(e)),e?e[1]:NaN}function qG(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],u=0;s>0&&l>0&&(u+l+1>n&&(l=Math.max(1,n-u)),i.push(r.substring(s-=l,s+l)),!((u+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function zG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var KG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gh(e){if(!(t=KG.exec(e)))throw new Error("invalid format: "+e);var t;return new jN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gh.prototype=jN.prototype;function jN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WG(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var Z5;function VG(e,t){var r=Np(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(Z5=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Np(e,Math.max(0,t+i-1))[0]}function F4(e,t){var r=Np(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const $4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:HG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F4(e*100,t),r:F4,s:VG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function L4(e){return e}var B4=Array.prototype.map,U4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GG(e){var t=e.grouping===void 0||e.thousands===void 0?L4:qG(B4.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?L4:zG(B4.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=gh(p);var m=p.fill,x=p.align,b=p.sign,y=p.symbol,v=p.zero,N=p.width,k=p.comma,j=p.precision,A=p.trim,S=p.type;S==="n"?(k=!0,S="g"):$4[S]||(j===void 0&&(j=12),A=!0,S="g"),(v||m==="0"&&x==="=")&&(v=!0,m="0",x="=");var E=y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",_=y==="$"?n:/[%p]/.test(S)?o:"",T=$4[S],D=/[defgprs%]/.test(S);j=j===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function F(P){var I=E,B=_,z,Y,re;if(S==="c")B=T(P)+B,P="";else{P=+P;var X=P<0||1/P<0;if(P=isNaN(P)?u:T(Math.abs(P),j),A&&(P=WG(P)),X&&+P==0&&b!=="+"&&(X=!1),I=(X?b==="("?b:l:b==="-"||b==="("?"":b)+I,B=(S==="s"?U4[8+Z5/3]:"")+B+(X&&b==="("?")":""),D){for(z=-1,Y=P.length;++z<Y;)if(re=P.charCodeAt(z),48>re||re>57){B=(re===46?s+P.slice(z+1):P.slice(z))+B,P=P.slice(0,z);break}}}k&&!v&&(P=t(P,1/0));var ne=I.length+P.length+B.length,Z=ne<N?new Array(N-ne+1).join(m):"";switch(k&&v&&(P=t(Z+P,Z.length?N-B.length:1/0),Z=""),x){case"<":P=I+P+B+Z;break;case"=":P=I+Z+P+B;break;case"^":P=Z.slice(0,ne=Z.length>>1)+I+P+B+Z.slice(ne);break;default:P=Z+I+P+B;break}return i(P)}return F.toString=function(){return p+""},F}function f(p,m){var x=d((p=gh(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Kc(m)/3)))*3,y=Math.pow(10,-b),v=U4[8+b/3];return function(N){return x(y*N)+v}}return{format:d,formatPrefix:f}}var A0,NN,eM;YG({thousands:",",grouping:[3],currency:["$",""]});function YG(e){return A0=GG(e),NN=A0.format,eM=A0.formatPrefix,A0}function XG(e){return Math.max(0,-Kc(Math.abs(e)))}function JG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kc(t)/3)))*3-Kc(Math.abs(e)))}function QG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kc(t)-Kc(e))+1}function tM(e,t,r,n){var s=xj(e,t,r),i;switch(n=gh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=JG(s,o))&&(n.precision=i),eM(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=QG(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=XG(s))&&(n.precision=i-(n.type==="%")*2);break}}return NN(n)}function Ao(e){var t=e.domain;return e.ticks=function(r){var n=t();return mj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return tM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],u,d,f=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=gj(o,l,r),d===u)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function kp(){var e=wN();return e.copy=function(){return nf(e,kp())},ds.apply(e,arguments),Ao(e)}function rM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return rM(e).unknown(t)},e=arguments.length?Array.from(e,jp):[0,1],Ao(r)}function nM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function H4(e){return Math.log(e)}function q4(e){return Math.exp(e)}function ZG(e){return-Math.log(-e)}function eY(e){return-Math.exp(-e)}function tY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function rY(e){return e===10?tY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function z4(e){return(t,r)=>-e(-t,r)}function kN(e){const t=e(H4,q4),r=t.domain;let n=10,s,i;function o(){return s=nY(n),i=rY(n),r()[0]<0?(s=z4(s),i=z4(i),e(ZG,eY)):e(H4,q4),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const u=r();let d=u[0],f=u[u.length-1];const p=f<d;p&&([d,f]=[f,d]);let m=s(d),x=s(f),b,y;const v=l==null?10:+l;let N=[];if(!(n%1)&&x-m<v){if(m=Math.floor(m),x=Math.ceil(x),d>0){for(;m<=x;++m)for(b=1;b<n;++b)if(y=m<0?b/i(-m):b*i(m),!(y<d)){if(y>f)break;N.push(y)}}else for(;m<=x;++m)for(b=n-1;b>=1;--b)if(y=m>0?b/i(-m):b*i(m),!(y<d)){if(y>f)break;N.push(y)}N.length*2<v&&(N=mj(d,f,v))}else N=mj(m,x,Math.min(x-m,v)).map(i);return p?N.reverse():N},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=gh(u)).precision==null&&(u.trim=!0),u=NN(u)),l===1/0)return u;const d=Math.max(1,n*l/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=d?u(f):""}},t.nice=()=>r(nM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function aM(){const e=kN(Wm()).domain([1,10]);return e.copy=()=>nf(e,aM()).base(e.base()),ds.apply(e,arguments),e}function K4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function W4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SN(e){var t=1,r=e(K4(t),W4(t));return r.constant=function(n){return arguments.length?e(K4(t=+n),W4(t)):t},Ao(r)}function sM(){var e=SN(Wm());return e.copy=function(){return nf(e,sM()).constant(e.constant())},ds.apply(e,arguments)}function V4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function aY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sY(e){return e<0?-e*e:e*e}function _N(e){var t=e(ma,ma),r=1;function n(){return r===1?e(ma,ma):r===.5?e(aY,sY):e(V4(r),V4(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Ao(t)}function EN(){var e=_N(Wm());return e.copy=function(){return nf(e,EN()).exponent(e.exponent())},ds.apply(e,arguments),e}function iY(){return EN.apply(null,arguments).exponent(.5)}function G4(e){return Math.sign(e)*e*e}function oY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iM(){var e=wN(),t=[0,1],r=!1,n;function s(i){var o=oY(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(G4(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,jp)).map(G4)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return iM(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ds.apply(s,arguments),Ao(s)}function oM(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=hG(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[tf(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(No),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return oM().domain(e).range(t).unknown(n)},ds.apply(i,arguments)}function lM(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(u){return u!=null&&u<=u?s[tf(n,u,0,r)]:i}function l(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*t-(u-r)*e)/(r+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(r=(s=Array.from(u)).length-1,l()):s.slice()},o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return lM().domain([e,t]).range(s).unknown(i)},ds.apply(Ao(o),arguments)}function cM(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[tf(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return cM().domain(e).range(t).unknown(r)},ds.apply(s,arguments)}const j1=new Date,N1=new Date;function Nn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const u=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let d;do u.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return u},s.filter=i=>Nn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(j1.setTime(+i),N1.setTime(+o),e(j1),e(N1),Math.floor(r(j1,N1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Sp=Nn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Sp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Sp);Sp.range;const Ni=1e3,ls=Ni*60,ki=ls*60,Ii=ki*24,CN=Ii*7,Y4=Ii*30,k1=Ii*365,ll=Nn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ni)},(e,t)=>(t-e)/Ni,e=>e.getUTCSeconds());ll.range;const TN=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getMinutes());TN.range;const AN=Nn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCMinutes());AN.range;const ON=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ni-e.getMinutes()*ls)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getHours());ON.range;const PN=Nn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCHours());PN.range;const af=Nn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ls)/Ii,e=>e.getDate()-1);af.range;const Vm=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ii,e=>e.getUTCDate()-1);Vm.range;const uM=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ii,e=>Math.floor(e/Ii));uM.range;function Al(e){return Nn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ls)/CN)}const Gm=Al(0),_p=Al(1),lY=Al(2),cY=Al(3),Wc=Al(4),uY=Al(5),dY=Al(6);Gm.range;_p.range;lY.range;cY.range;Wc.range;uY.range;dY.range;function Ol(e){return Nn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/CN)}const Ym=Ol(0),Ep=Ol(1),hY=Ol(2),fY=Ol(3),Vc=Ol(4),pY=Ol(5),mY=Ol(6);Ym.range;Ep.range;hY.range;fY.range;Vc.range;pY.range;mY.range;const IN=Nn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IN.range;const DN=Nn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());DN.range;const Di=Nn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Di.range;const Mi=Nn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Mi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Mi.range;function dM(e,t,r,n,s,i){const o=[[ll,1,Ni],[ll,5,5*Ni],[ll,15,15*Ni],[ll,30,30*Ni],[i,1,ls],[i,5,5*ls],[i,15,15*ls],[i,30,30*ls],[s,1,ki],[s,3,3*ki],[s,6,6*ki],[s,12,12*ki],[n,1,Ii],[n,2,2*Ii],[r,1,CN],[t,1,Y4],[t,3,3*Y4],[e,1,k1]];function l(d,f,p){const m=f<d;m&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:u(d,f,p),b=x?x.range(d,+f+1):[];return m?b.reverse():b}function u(d,f,p){const m=Math.abs(f-d)/p,x=gN(([,,v])=>v).right(o,m);if(x===o.length)return e.every(xj(d/k1,f/k1,p));if(x===0)return Sp.every(Math.max(xj(d,f,p),1));const[b,y]=o[m/o[x-1][2]<o[x][2]/m?x-1:x];return b.every(y)}return[l,u]}const[gY,xY]=dM(Mi,DN,Ym,uM,PN,AN),[yY,vY]=dM(Di,IN,Gm,af,ON,TN);function S1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function bY(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=md(s),f=gd(s),p=md(i),m=gd(i),x=md(o),b=gd(o),y=md(l),v=gd(l),N=md(u),k=gd(u),j={a:X,A:ne,b:Z,B:me,c:null,d:tO,e:tO,f:qY,g:ZY,G:tX,H:BY,I:UY,j:HY,L:hM,m:zY,M:KY,p:G,q:L,Q:aO,s:sO,S:WY,u:VY,U:GY,V:YY,w:XY,W:JY,x:null,X:null,y:QY,Y:eX,Z:rX,"%":nO},A={a:ee,A:te,b:J,B:he,c:null,d:rO,e:rO,f:iX,g:gX,G:yX,H:nX,I:aX,j:sX,L:pM,m:oX,M:lX,p:Se,q:Oe,Q:aO,s:sO,S:cX,u:uX,U:dX,V:hX,w:fX,W:pX,x:null,X:null,y:mX,Y:xX,Z:vX,"%":nO},S={a:F,A:P,b:I,B,c:z,d:Z4,e:Z4,f:RY,g:Q4,G:J4,H:eO,I:eO,j:PY,L:MY,m:OY,M:IY,p:D,q:AY,Q:$Y,s:LY,S:DY,u:SY,U:_Y,V:EY,w:kY,W:CY,x:Y,X:re,y:Q4,Y:J4,Z:TY,"%":FY};j.x=E(r,j),j.X=E(n,j),j.c=E(t,j),A.x=E(r,A),A.X=E(n,A),A.c=E(t,A);function E(pe,xe){return function(Fe){var O=[],be=-1,De=0,qe=pe.length,rt,Be,Je;for(Fe instanceof Date||(Fe=new Date(+Fe));++be<qe;)pe.charCodeAt(be)===37&&(O.push(pe.slice(De,be)),(Be=X4[rt=pe.charAt(++be)])!=null?rt=pe.charAt(++be):Be=rt==="e"?" ":"0",(Je=xe[rt])&&(rt=Je(Fe,Be)),O.push(rt),De=be+1);return O.push(pe.slice(De,be)),O.join("")}}function _(pe,xe){return function(Fe){var O=pd(1900,void 0,1),be=T(O,pe,Fe+="",0),De,qe;if(be!=Fe.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(xe&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(De=_1(pd(O.y,0,1)),qe=De.getUTCDay(),De=qe>4||qe===0?Ep.ceil(De):Ep(De),De=Vm.offset(De,(O.V-1)*7),O.y=De.getUTCFullYear(),O.m=De.getUTCMonth(),O.d=De.getUTCDate()+(O.w+6)%7):(De=S1(pd(O.y,0,1)),qe=De.getDay(),De=qe>4||qe===0?_p.ceil(De):_p(De),De=af.offset(De,(O.V-1)*7),O.y=De.getFullYear(),O.m=De.getMonth(),O.d=De.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),qe="Z"in O?_1(pd(O.y,0,1)).getUTCDay():S1(pd(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(qe+5)%7:O.w+O.U*7-(qe+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,_1(O)):S1(O)}}function T(pe,xe,Fe,O){for(var be=0,De=xe.length,qe=Fe.length,rt,Be;be<De;){if(O>=qe)return-1;if(rt=xe.charCodeAt(be++),rt===37){if(rt=xe.charAt(be++),Be=S[rt in X4?xe.charAt(be++):rt],!Be||(O=Be(pe,Fe,O))<0)return-1}else if(rt!=Fe.charCodeAt(O++))return-1}return O}function D(pe,xe,Fe){var O=d.exec(xe.slice(Fe));return O?(pe.p=f.get(O[0].toLowerCase()),Fe+O[0].length):-1}function F(pe,xe,Fe){var O=x.exec(xe.slice(Fe));return O?(pe.w=b.get(O[0].toLowerCase()),Fe+O[0].length):-1}function P(pe,xe,Fe){var O=p.exec(xe.slice(Fe));return O?(pe.w=m.get(O[0].toLowerCase()),Fe+O[0].length):-1}function I(pe,xe,Fe){var O=N.exec(xe.slice(Fe));return O?(pe.m=k.get(O[0].toLowerCase()),Fe+O[0].length):-1}function B(pe,xe,Fe){var O=y.exec(xe.slice(Fe));return O?(pe.m=v.get(O[0].toLowerCase()),Fe+O[0].length):-1}function z(pe,xe,Fe){return T(pe,t,xe,Fe)}function Y(pe,xe,Fe){return T(pe,r,xe,Fe)}function re(pe,xe,Fe){return T(pe,n,xe,Fe)}function X(pe){return o[pe.getDay()]}function ne(pe){return i[pe.getDay()]}function Z(pe){return u[pe.getMonth()]}function me(pe){return l[pe.getMonth()]}function G(pe){return s[+(pe.getHours()>=12)]}function L(pe){return 1+~~(pe.getMonth()/3)}function ee(pe){return o[pe.getUTCDay()]}function te(pe){return i[pe.getUTCDay()]}function J(pe){return u[pe.getUTCMonth()]}function he(pe){return l[pe.getUTCMonth()]}function Se(pe){return s[+(pe.getUTCHours()>=12)]}function Oe(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var xe=E(pe+="",j);return xe.toString=function(){return pe},xe},parse:function(pe){var xe=_(pe+="",!1);return xe.toString=function(){return pe},xe},utcFormat:function(pe){var xe=E(pe+="",A);return xe.toString=function(){return pe},xe},utcParse:function(pe){var xe=_(pe+="",!0);return xe.toString=function(){return pe},xe}}}var X4={"-":"",_:" ",0:"0"},Dn=/^\s*\d+/,wY=/^%/,jY=/[\\^$*+?|[\]().{}]/g;function pr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function NY(e){return e.replace(jY,"\\$&")}function md(e){return new RegExp("^(?:"+e.map(NY).join("|")+")","i")}function gd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function kY(e,t,r){var n=Dn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function SY(e,t,r){var n=Dn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _Y(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function EY(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function CY(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function J4(e,t,r){var n=Dn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Q4(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function TY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function AY(e,t,r){var n=Dn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function OY(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Z4(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function PY(e,t,r){var n=Dn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function eO(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function IY(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function DY(e,t,r){var n=Dn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function MY(e,t,r){var n=Dn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function RY(e,t,r){var n=Dn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function FY(e,t,r){var n=wY.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $Y(e,t,r){var n=Dn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function LY(e,t,r){var n=Dn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function tO(e,t){return pr(e.getDate(),t,2)}function BY(e,t){return pr(e.getHours(),t,2)}function UY(e,t){return pr(e.getHours()%12||12,t,2)}function HY(e,t){return pr(1+af.count(Di(e),e),t,3)}function hM(e,t){return pr(e.getMilliseconds(),t,3)}function qY(e,t){return hM(e,t)+"000"}function zY(e,t){return pr(e.getMonth()+1,t,2)}function KY(e,t){return pr(e.getMinutes(),t,2)}function WY(e,t){return pr(e.getSeconds(),t,2)}function VY(e){var t=e.getDay();return t===0?7:t}function GY(e,t){return pr(Gm.count(Di(e)-1,e),t,2)}function fM(e){var t=e.getDay();return t>=4||t===0?Wc(e):Wc.ceil(e)}function YY(e,t){return e=fM(e),pr(Wc.count(Di(e),e)+(Di(e).getDay()===4),t,2)}function XY(e){return e.getDay()}function JY(e,t){return pr(_p.count(Di(e)-1,e),t,2)}function QY(e,t){return pr(e.getFullYear()%100,t,2)}function ZY(e,t){return e=fM(e),pr(e.getFullYear()%100,t,2)}function eX(e,t){return pr(e.getFullYear()%1e4,t,4)}function tX(e,t){var r=e.getDay();return e=r>=4||r===0?Wc(e):Wc.ceil(e),pr(e.getFullYear()%1e4,t,4)}function rX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pr(t/60|0,"0",2)+pr(t%60,"0",2)}function rO(e,t){return pr(e.getUTCDate(),t,2)}function nX(e,t){return pr(e.getUTCHours(),t,2)}function aX(e,t){return pr(e.getUTCHours()%12||12,t,2)}function sX(e,t){return pr(1+Vm.count(Mi(e),e),t,3)}function pM(e,t){return pr(e.getUTCMilliseconds(),t,3)}function iX(e,t){return pM(e,t)+"000"}function oX(e,t){return pr(e.getUTCMonth()+1,t,2)}function lX(e,t){return pr(e.getUTCMinutes(),t,2)}function cX(e,t){return pr(e.getUTCSeconds(),t,2)}function uX(e){var t=e.getUTCDay();return t===0?7:t}function dX(e,t){return pr(Ym.count(Mi(e)-1,e),t,2)}function mM(e){var t=e.getUTCDay();return t>=4||t===0?Vc(e):Vc.ceil(e)}function hX(e,t){return e=mM(e),pr(Vc.count(Mi(e),e)+(Mi(e).getUTCDay()===4),t,2)}function fX(e){return e.getUTCDay()}function pX(e,t){return pr(Ep.count(Mi(e)-1,e),t,2)}function mX(e,t){return pr(e.getUTCFullYear()%100,t,2)}function gX(e,t){return e=mM(e),pr(e.getUTCFullYear()%100,t,2)}function xX(e,t){return pr(e.getUTCFullYear()%1e4,t,4)}function yX(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vc(e):Vc.ceil(e),pr(e.getUTCFullYear()%1e4,t,4)}function vX(){return"+0000"}function nO(){return"%"}function aO(e){return+e}function sO(e){return Math.floor(+e/1e3)}var pc,gM,xM;bX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bX(e){return pc=bY(e),gM=pc.format,pc.parse,xM=pc.utcFormat,pc.utcParse,pc}function wX(e){return new Date(e)}function jX(e){return e instanceof Date?+e:+new Date(+e)}function MN(e,t,r,n,s,i,o,l,u,d){var f=wN(),p=f.invert,m=f.domain,x=d(".%L"),b=d(":%S"),y=d("%I:%M"),v=d("%I %p"),N=d("%a %d"),k=d("%b %d"),j=d("%B"),A=d("%Y");function S(E){return(u(E)<E?x:l(E)<E?b:o(E)<E?y:i(E)<E?v:n(E)<E?s(E)<E?N:k:r(E)<E?j:A)(E)}return f.invert=function(E){return new Date(p(E))},f.domain=function(E){return arguments.length?m(Array.from(E,jX)):m().map(wX)},f.ticks=function(E){var _=m();return e(_[0],_[_.length-1],E??10)},f.tickFormat=function(E,_){return _==null?S:d(_)},f.nice=function(E){var _=m();return(!E||typeof E.range!="function")&&(E=t(_[0],_[_.length-1],E??10)),E?m(nM(_,E)):f},f.copy=function(){return nf(f,MN(e,t,r,n,s,i,o,l,u,d))},f}function NX(){return ds.apply(MN(yY,vY,Di,IN,Gm,af,ON,TN,ll,gM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kX(){return ds.apply(MN(gY,xY,Mi,DN,Ym,Vm,PN,AN,ll,xM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xm(){var e=0,t=1,r,n,s,i,o=ma,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(s===0?.5:(p=(i(p)-r)*s,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(m){var x,b;return arguments.length?([x,b]=m,o=p(x,b),d):[o(0),o(1)]}}return d.range=f(bu),d.rangeRound=f(bN),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),d}}function Oo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yM(){var e=Ao(Xm()(ma));return e.copy=function(){return Oo(e,yM())},Ui.apply(e,arguments)}function vM(){var e=kN(Xm()).domain([1,10]);return e.copy=function(){return Oo(e,vM()).base(e.base())},Ui.apply(e,arguments)}function bM(){var e=SN(Xm());return e.copy=function(){return Oo(e,bM()).constant(e.constant())},Ui.apply(e,arguments)}function RN(){var e=_N(Xm());return e.copy=function(){return Oo(e,RN()).exponent(e.exponent())},Ui.apply(e,arguments)}function SX(){return RN.apply(null,arguments).exponent(.5)}function wM(){var e=[],t=ma;function r(n){if(n!=null&&!isNaN(n=+n))return t((tf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(No),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>dG(e,i/n))},r.copy=function(){return wM(t).domain(e)},Ui.apply(r,arguments)}function Jm(){var e=0,t=.5,r=1,n=1,s,i,o,l,u,d=ma,f,p=!1,m;function x(y){return isNaN(y=+y)?m:(y=.5+((y=+f(y))-i)*(n*y<n*i?l:u),d(p?Math.max(0,Math.min(1,y)):y))}x.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(y){return arguments.length?(p=!!y,x):p},x.interpolator=function(y){return arguments.length?(d=y,x):d};function b(y){return function(v){var N,k,j;return arguments.length?([N,k,j]=v,d=FG(y,[N,k,j]),x):[d(0),d(.5),d(1)]}}return x.range=b(bu),x.rangeRound=b(bN),x.unknown=function(y){return arguments.length?(m=y,x):m},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function jM(){var e=Ao(Jm()(ma));return e.copy=function(){return Oo(e,jM())},Ui.apply(e,arguments)}function NM(){var e=kN(Jm()).domain([.1,1,10]);return e.copy=function(){return Oo(e,NM()).base(e.base())},Ui.apply(e,arguments)}function kM(){var e=SN(Jm());return e.copy=function(){return Oo(e,kM()).constant(e.constant())},Ui.apply(e,arguments)}function FN(){var e=_N(Jm());return e.copy=function(){return Oo(e,FN()).exponent(e.exponent())},Ui.apply(e,arguments)}function _X(){return FN.apply(null,arguments).exponent(.5)}const iO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hh,scaleDiverging:jM,scaleDivergingLog:NM,scaleDivergingPow:FN,scaleDivergingSqrt:_X,scaleDivergingSymlog:kM,scaleIdentity:rM,scaleImplicit:yj,scaleLinear:kp,scaleLog:aM,scaleOrdinal:xN,scalePoint:Dd,scalePow:EN,scaleQuantile:oM,scaleQuantize:lM,scaleRadial:iM,scaleSequential:yM,scaleSequentialLog:vM,scaleSequentialPow:RN,scaleSequentialQuantile:wM,scaleSequentialSqrt:SX,scaleSequentialSymlog:bM,scaleSqrt:iY,scaleSymlog:sM,scaleThreshold:cM,scaleTime:NX,scaleUtc:kX,tickFormat:tM},Symbol.toStringTag,{value:"Module"}));var E1,oO;function Qm(){if(oO)return E1;oO=1;var e=gu();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],u=n(l);if(u!=null&&(d===void 0?u===u&&!e(u):s(u,d)))var d=u,f=l}return f}return E1=t,E1}var C1,lO;function SM(){if(lO)return C1;lO=1;function e(t,r){return t>r}return C1=e,C1}var T1,cO;function EX(){if(cO)return T1;cO=1;var e=Qm(),t=SM(),r=vu();function n(s){return s&&s.length?e(s,r,t):void 0}return T1=n,T1}var CX=EX();const Zm=vr(CX);var A1,uO;function _M(){if(uO)return A1;uO=1;function e(t,r){return t<r}return A1=e,A1}var O1,dO;function TX(){if(dO)return O1;dO=1;var e=Qm(),t=_M(),r=vu();function n(s){return s&&s.length?e(s,r,t):void 0}return O1=n,O1}var AX=TX();const eg=vr(AX);var P1,hO;function OX(){if(hO)return P1;hO=1;var e=Z2(),t=ni(),r=D5(),n=Ca();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return P1=s,P1}var I1,fO;function PX(){if(fO)return I1;fO=1;var e=P5(),t=OX();function r(n,s){return e(t(n,s),1)}return I1=r,I1}var IX=PX();const DX=vr(IX);var D1,pO;function MX(){if(pO)return D1;pO=1;var e=hN();function t(r,n){return e(r,n)}return D1=t,D1}var RX=MX();const wu=vr(RX);var ju=1e9,FX={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},LN,Ur=!0,cs="[DecimalError] ",hl=cs+"Invalid argument: ",$N=cs+"Exponent out of range: ",Nu=Math.floor,el=Math.pow,$X=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ua,Cn=1e7,$r=7,EM=9007199254740991,Cp=Nu(EM/$r),gt={};gt.absoluteValue=gt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};gt.comparedTo=gt.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};gt.decimalPlaces=gt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*$r;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};gt.dividedBy=gt.div=function(e){return Ti(this,new this.constructor(e))};gt.dividedToIntegerBy=gt.idiv=function(e){var t=this,r=t.constructor;return Sr(Ti(t,new r(e),0,1),r.precision)};gt.equals=gt.eq=function(e){return!this.cmp(e)};gt.exponent=function(){return ln(this)};gt.greaterThan=gt.gt=function(e){return this.cmp(e)>0};gt.greaterThanOrEqualTo=gt.gte=function(e){return this.cmp(e)>=0};gt.isInteger=gt.isint=function(){return this.e>this.d.length-2};gt.isNegative=gt.isneg=function(){return this.s<0};gt.isPositive=gt.ispos=function(){return this.s>0};gt.isZero=function(){return this.s===0};gt.lessThan=gt.lt=function(e){return this.cmp(e)<0};gt.lessThanOrEqualTo=gt.lte=function(e){return this.cmp(e)<1};gt.logarithm=gt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ua))throw Error(cs+"NaN");if(r.s<1)throw Error(cs+(r.s?"NaN":"-Infinity"));return r.eq(Ua)?new n(0):(Ur=!1,t=Ti(xh(r,i),xh(e,i),i),Ur=!0,Sr(t,s))};gt.minus=gt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AM(t,e):CM(t,(e.s=-e.s,e))};gt.modulo=gt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(cs+"NaN");return r.s?(Ur=!1,t=Ti(r,e,0,1).times(e),Ur=!0,r.minus(t)):Sr(new n(r),s)};gt.naturalExponential=gt.exp=function(){return TM(this)};gt.naturalLogarithm=gt.ln=function(){return xh(this)};gt.negated=gt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};gt.plus=gt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CM(t,e):AM(t,(e.s=-e.s,e))};gt.precision=gt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hl+e);if(t=ln(s)+1,n=s.d.length-1,r=n*$r+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};gt.squareRoot=gt.sqrt=function(){var e,t,r,n,s,i,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(cs+"NaN")}for(e=ln(l),Ur=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Gs(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Nu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new u(t)):n=new u(s.toString()),r=u.precision,s=o=r+3;;)if(i=n,n=i.plus(Ti(l,i,o+2)).times(.5),Gs(i.d).slice(0,o)===(t=Gs(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Sr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ur=!0,Sr(n,r)};gt.times=gt.mul=function(e){var t,r,n,s,i,o,l,u,d,f=this,p=f.constructor,m=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,u=m.length,d=x.length,u<d&&(i=m,m=x,x=i,o=u,u=d,d=o),i=[],o=u+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=u+n;s>n;)l=i[s]+x[n]*m[s-n-1]+t,i[s--]=l%Cn|0,t=l/Cn|0;i[s]=(i[s]+t)%Cn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ur?Sr(e,p.precision):e};gt.toDecimalPlaces=gt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ei(e,0,ju),t===void 0?t=n.rounding:ei(t,0,8),Sr(r,e+ln(r)+1,t))};gt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=wl(n,!0):(ei(e,0,ju),t===void 0?t=s.rounding:ei(t,0,8),n=Sr(new s(n),e+1,t),r=wl(n,!0,e+1)),r};gt.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?wl(s):(ei(e,0,ju),t===void 0?t=i.rounding:ei(t,0,8),n=Sr(new i(s),e+ln(s)+1,t),r=wl(n.abs(),!1,e+ln(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};gt.toInteger=gt.toint=function(){var e=this,t=e.constructor;return Sr(new t(e),ln(e)+1,t.rounding)};gt.toNumber=function(){return+this};gt.toPower=gt.pow=function(e){var t,r,n,s,i,o,l=this,u=l.constructor,d=12,f=+(e=new u(e));if(!e.s)return new u(Ua);if(l=new u(l),!l.s){if(e.s<1)throw Error(cs+"Infinity");return l}if(l.eq(Ua))return l;if(n=u.precision,e.eq(Ua))return Sr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=EM){for(s=new u(Ua),t=Math.ceil(n/$r+4),Ur=!1;r%2&&(s=s.times(l),gO(s.d,t)),r=Nu(r/2),r!==0;)l=l.times(l),gO(l.d,t);return Ur=!0,e.s<0?new u(Ua).div(s):Sr(s,n)}}else if(i<0)throw Error(cs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ur=!1,s=e.times(xh(l,n+d)),Ur=!0,s=TM(s),s.s=i,s};gt.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ln(s),n=wl(s,r<=i.toExpNeg||r>=i.toExpPos)):(ei(e,1,ju),t===void 0?t=i.rounding:ei(t,0,8),s=Sr(new i(s),e,t),r=ln(s),n=wl(s,e<=r||r<=i.toExpNeg,e)),n};gt.toSignificantDigits=gt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ei(e,1,ju),t===void 0?t=n.rounding:ei(t,0,8)),Sr(new n(r),e,t)};gt.toString=gt.valueOf=gt.val=gt.toJSON=gt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ln(e),r=e.constructor;return wl(e,t<=r.toExpNeg||t>=r.toExpPos)};function CM(e,t){var r,n,s,i,o,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ur?Sr(t,p):t;if(u=e.d,d=t.d,o=e.e,s=t.e,u=u.slice(),i=o-s,i){for(i<0?(n=u,i=-i,l=d.length):(n=d,s=o,l=u.length),o=Math.ceil(p/$r),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=u.length,i=d.length,l-i<0&&(i=l,n=d,d=u,u=n),r=0;i;)r=(u[--i]=u[i]+d[i]+r)/Cn|0,u[i]%=Cn;for(r&&(u.unshift(r),++s),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=s,Ur?Sr(t,p):t}function ei(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hl+e)}function Gs(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=$r-n.length,r&&(i+=ho(r)),i+=n;o=e[t],n=o+"",r=$r-n.length,r&&(i+=ho(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ti=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Cn|0,o=i/Cn|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,u;if(i!=o)u=i>o?1:-1;else for(l=u=0;l<i;l++)if(n[l]!=s[l]){u=n[l]>s[l]?1:-1;break}return u}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Cn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,u,d,f,p,m,x,b,y,v,N,k,j,A,S,E,_,T,D=n.constructor,F=n.s==s.s?1:-1,P=n.d,I=s.d;if(!n.s)return new D(n);if(!s.s)throw Error(cs+"Division by zero");for(u=n.e-s.e,_=I.length,S=P.length,x=new D(F),b=x.d=[],d=0;I[d]==(P[d]||0);)++d;if(I[d]>(P[d]||0)&&--u,i==null?k=i=D.precision:o?k=i+(ln(n)-ln(s))+1:k=i,k<0)return new D(0);if(k=k/$r+2|0,d=0,_==1)for(f=0,I=I[0],k++;(d<S||f)&&k--;d++)j=f*Cn+(P[d]||0),b[d]=j/I|0,f=j%I|0;else{for(f=Cn/(I[0]+1)|0,f>1&&(I=e(I,f),P=e(P,f),_=I.length,S=P.length),A=_,y=P.slice(0,_),v=y.length;v<_;)y[v++]=0;T=I.slice(),T.unshift(0),E=I[0],I[1]>=Cn/2&&++E;do f=0,l=t(I,y,_,v),l<0?(N=y[0],_!=v&&(N=N*Cn+(y[1]||0)),f=N/E|0,f>1?(f>=Cn&&(f=Cn-1),p=e(I,f),m=p.length,v=y.length,l=t(p,y,m,v),l==1&&(f--,r(p,_<m?T:I,m))):(f==0&&(l=f=1),p=I.slice()),m=p.length,m<v&&p.unshift(0),r(y,p,v),l==-1&&(v=y.length,l=t(I,y,_,v),l<1&&(f++,r(y,_<v?T:I,v))),v=y.length):l===0&&(f++,y=[0]),b[d++]=f,l&&y[0]?y[v++]=P[A]||0:(y=[P[A]],v=1);while((A++<S||y[0]!==void 0)&&k--)}return b[0]||b.shift(),x.e=u,Sr(x,o?i+ln(x)+1:i)}})();function TM(e,t){var r,n,s,i,o,l,u=0,d=0,f=e.constructor,p=f.precision;if(ln(e)>16)throw Error($N+ln(e));if(!e.s)return new f(Ua);for(Ur=!1,l=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(el(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new f(Ua),f.precision=l;;){if(s=Sr(s.times(e),l),r=r.times(++u),o=i.plus(Ti(s,r,l)),Gs(o.d).slice(0,l)===Gs(i.d).slice(0,l)){for(;d--;)i=Sr(i.times(i),l);return f.precision=p,t==null?(Ur=!0,Sr(i,p)):i}i=o}}function ln(e){for(var t=e.e*$r,r=e.d[0];r>=10;r/=10)t++;return t}function M1(e,t,r){if(t>e.LN10.sd())throw Ur=!0,r&&(e.precision=r),Error(cs+"LN10 precision limit exceeded");return Sr(new e(e.LN10),t)}function ho(e){for(var t="";e--;)t+="0";return t}function xh(e,t){var r,n,s,i,o,l,u,d,f,p=1,m=10,x=e,b=x.d,y=x.constructor,v=y.precision;if(x.s<1)throw Error(cs+(x.s?"NaN":"-Infinity"));if(x.eq(Ua))return new y(0);if(t==null?(Ur=!1,d=v):d=t,x.eq(10))return t==null&&(Ur=!0),M1(y,d);if(d+=m,y.precision=d,r=Gs(b),n=r.charAt(0),i=ln(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Gs(x.d),n=r.charAt(0),p++;i=ln(x),n>1?(x=new y("0."+r),i++):x=new y(n+"."+r.slice(1))}else return u=M1(y,d+2,v).times(i+""),x=xh(new y(n+"."+r.slice(1)),d-m).plus(u),y.precision=v,t==null?(Ur=!0,Sr(x,v)):x;for(l=o=x=Ti(x.minus(Ua),x.plus(Ua),d),f=Sr(x.times(x),d),s=3;;){if(o=Sr(o.times(f),d),u=l.plus(Ti(o,new y(s),d)),Gs(u.d).slice(0,d)===Gs(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(M1(y,d+2,v).times(i+""))),l=Ti(l,new y(p),d),y.precision=v,t==null?(Ur=!0,Sr(l,v)):l;l=u,s+=2}}function mO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Nu(r/$r),e.d=[],n=(r+1)%$r,r<0&&(n+=$r),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=$r;n<s;)e.d.push(+t.slice(n,n+=$r));t=t.slice(n),n=$r-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ur&&(e.e>Cp||e.e<-Cp))throw Error($N+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sr(e,t,r){var n,s,i,o,l,u,d,f,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=$r,s=t,d=p[f=0];else{if(f=Math.ceil((n+1)/$r),i=p.length,f>=i)return e;for(d=i=p[f],o=1;i>=10;i/=10)o++;n%=$r,s=n-$r+o}if(r!==void 0&&(i=el(10,o-s-1),l=d/i%10|0,u=t<0||p[f+1]!==void 0||d%i,u=r<4?(l||u)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||u||r==6&&(n>0?s>0?d/el(10,o-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return u?(i=ln(e),p.length=1,t=t-i-1,p[0]=el(10,($r-t%$r)%$r),e.e=Nu(-t/$r)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=el(10,$r-n),p[f]=s>0?(d/el(10,o-s)%el(10,s)|0)*i:0),u)for(;;)if(f==0){(p[0]+=i)==Cn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Cn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Ur&&(e.e>Cp||e.e<-Cp))throw Error($N+ln(e));return e}function AM(e,t){var r,n,s,i,o,l,u,d,f,p,m=e.constructor,x=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ur?Sr(t,x):t;if(u=e.d,p=t.d,n=t.e,d=e.e,u=u.slice(),o=d-n,o){for(f=o<0,f?(r=u,o=-o,l=p.length):(r=p,n=d,l=u.length),s=Math.max(Math.ceil(x/$r),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=u.length,l=p.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(u[s]!=p[s]){f=u[s]<p[s];break}o=0}for(f&&(r=u,u=p,p=r,t.s=-t.s),l=u.length,s=p.length-l;s>0;--s)u[l++]=0;for(s=p.length;s>o;){if(u[--s]<p[s]){for(i=s;i&&u[--i]===0;)u[i]=Cn-1;--u[i],u[s]+=Cn}u[s]-=p[s]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=n,Ur?Sr(t,x):t):new m(0)}function wl(e,t,r){var n,s=ln(e),i=Gs(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ho(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+ho(-s-1)+i,r&&(n=r-o)>0&&(i+=ho(n))):s>=o?(i+=ho(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+ho(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=ho(n))),e.s<0?"-"+i:i}function gO(e,t){if(e.length>t)return e.length=t,!0}function OM(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(hl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return mO(o,i.toString())}else if(typeof i!="string")throw Error(hl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,$X.test(i))mO(o,i);else throw Error(hl+i)}if(s.prototype=gt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=OM,s.config=s.set=LX,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function LX(e){if(!e||typeof e!="object")throw Error(cs+"Object expected");var t,r,n,s=["precision",1,ju,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Nu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(hl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(hl+r+": "+n);return this}var LN=OM(FX);Ua=new LN(1);const jr=LN;function BX(e){return zX(e)||qX(e)||HX(e)||UX()}function UX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HX(e,t){if(e){if(typeof e=="string")return jj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jj(e,t)}}function qX(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zX(e){if(Array.isArray(e))return jj(e)}function jj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var KX=function(t){return t},PM={},IM=function(t){return t===PM},xO=function(t){return function r(){return arguments.length===0||arguments.length===1&&IM(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},WX=function e(t,r){return t===1?r:xO(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==PM}).length;return o>=t?r.apply(void 0,s):e(t-o,xO(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=s.map(function(p){return IM(p)?u.shift():p});return r.apply(void 0,BX(f).concat(u))}))})},tg=function(t){return WX(t.length,t)},Nj=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},VX=tg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),GX=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return KX;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,u){return u(l)},i.apply(void 0,arguments))}},kj=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},DM=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,u){return l===r[u]})||(r=i,n=t.apply(void 0,i)),n}};function YX(e){var t;return e===0?t=1:t=Math.floor(new jr(e).abs().log(10).toNumber())+1,t}function XX(e,t,r){for(var n=new jr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var JX=tg(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),QX=tg(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),ZX=tg(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const rg={rangeStep:XX,getDigitCount:YX,interpolateNumber:JX,uninterpolateNumber:QX,uninterpolateTruncation:ZX};function Sj(e){return rJ(e)||tJ(e)||MM(e)||eJ()}function eJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rJ(e){if(Array.isArray(e))return _j(e)}function yh(e,t){return sJ(e)||aJ(e,t)||MM(e,t)||nJ()}function nJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MM(e,t){if(e){if(typeof e=="string")return _j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _j(e,t)}}function _j(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aJ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(u){s=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function sJ(e){if(Array.isArray(e))return e}function RM(e){var t=yh(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function FM(e,t,r){if(e.lte(0))return new jr(0);var n=rg.getDigitCount(e.toNumber()),s=new jr(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new jr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=l.mul(s);return t?u:new jr(Math.ceil(u))}function iJ(e,t,r){var n=1,s=new jr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new jr(10).pow(rg.getDigitCount(e)-1),s=new jr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new jr(Math.floor(e)))}else e===0?s=new jr(Math.floor((t-1)/2)):r||(s=new jr(Math.floor(e)));var o=Math.floor((t-1)/2),l=GX(VX(function(u){return s.add(new jr(u-o).mul(n)).toNumber()}),Nj);return l(0,t)}function $M(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new jr(0),tickMin:new jr(0),tickMax:new jr(0)};var i=FM(new jr(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new jr(0):(o=new jr(e).add(t).div(2),o=o.sub(new jr(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),u=Math.ceil(new jr(t).sub(o).div(i).toNumber()),d=l+u+1;return d>r?$M(e,t,r,n,s+1):(d<r&&(u=t>0?u+(r-d):u,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new jr(l).mul(i)),tickMax:o.add(new jr(u).mul(i))})}function oJ(e){var t=yh(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=RM([r,n]),u=yh(l,2),d=u[0],f=u[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(Sj(Nj(0,s-1).map(function(){return 1/0}))):[].concat(Sj(Nj(0,s-1).map(function(){return-1/0})),[f]);return r>n?kj(p):p}if(d===f)return iJ(d,s,i);var m=$M(d,f,o,i),x=m.step,b=m.tickMin,y=m.tickMax,v=rg.rangeStep(b,y.add(new jr(.1).mul(x)),x);return r>n?kj(v):v}function lJ(e,t){var r=yh(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=RM([n,s]),l=yh(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0)return[n,s];if(u===d)return[u];var f=Math.max(t,2),p=FM(new jr(d).sub(u).div(f-1),i,0),m=[].concat(Sj(rg.rangeStep(new jr(u),new jr(d).sub(new jr(.99).mul(p)),p)),[d]);return n>s?kj(m):m}var cJ=DM(oJ),uJ=DM(lJ),dJ="Invariant failed";function jl(e,t){throw new Error(dJ)}var hJ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Gc(e){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gc(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tp.apply(this,arguments)}function fJ(e,t){return xJ(e)||gJ(e,t)||mJ(e,t)||pJ()}function pJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mJ(e,t){if(e){if(typeof e=="string")return yO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yO(e,t)}}function yO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function xJ(e){if(Array.isArray(e))return e}function yJ(e,t){if(e==null)return{};var r=vJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UM(n.key),n)}}function jJ(e,t,r){return t&&wJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NJ(e,t,r){return t=Ap(t),kJ(e,LM()?Reflect.construct(t,r||[],Ap(e).constructor):t.apply(e,r))}function kJ(e,t){if(t&&(Gc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SJ(e)}function SJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LM=function(){return!!e})()}function Ap(e){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ap(e)}function _J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ej(e,t)}function Ej(e,t){return Ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ej(e,t)}function BM(e,t,r){return t=UM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UM(e){var t=EJ(e,"string");return Gc(t)=="symbol"?t:t+""}function EJ(e,t){if(Gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sf=(function(e){function t(){return bJ(this,t),NJ(this,t,arguments)}return _J(t,e),jJ(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,u=n.data,d=n.dataPointFormatter,f=n.xAxis,p=n.yAxis,m=yJ(n,hJ),x=At(m,!1);this.props.direction==="x"&&f.type!=="number"&&jl();var b=u.map(function(y){var v=d(y,l),N=v.x,k=v.y,j=v.value,A=v.errorVal;if(!A)return null;var S=[],E,_;if(Array.isArray(A)){var T=fJ(A,2);E=T[0],_=T[1]}else E=_=A;if(i==="vertical"){var D=f.scale,F=k+s,P=F+o,I=F-o,B=D(j-E),z=D(j+_);S.push({x1:z,y1:P,x2:z,y2:I}),S.push({x1:B,y1:F,x2:z,y2:F}),S.push({x1:B,y1:P,x2:B,y2:I})}else if(i==="horizontal"){var Y=p.scale,re=N+s,X=re-o,ne=re+o,Z=Y(j-E),me=Y(j+_);S.push({x1:X,y1:me,x2:ne,y2:me}),S.push({x1:re,y1:Z,x2:re,y2:me}),S.push({x1:X,y1:Z,x2:ne,y2:Z})}return de.createElement(ir,Tp({className:"recharts-errorBar",key:"bar-".concat(S.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},x),S.map(function(G){return de.createElement("line",Tp({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return de.createElement(ir,{className:"recharts-errorBars"},b)}}])})(de.Component);BM(sf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});BM(sf,"displayName","ErrorBar");function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(n){CJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CJ(e,t,r){return t=TJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TJ(e){var t=AJ(e,"string");return vh(t)=="symbol"?t:t+""}function AJ(e,t){if(vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HM=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ra(r,qn);if(!o)return null;var l=qn.defaultProps,u=l!==void 0?Go(Go({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(f,p){var m=p.item,x=p.props,b=x.sectors||x.data||[];return f.concat(b.map(function(y){return{type:o.props.iconType||m.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(n||[]).map(function(f){var p=f.item,m=p.type.defaultProps,x=m!==void 0?Go(Go({},m),p.props):{},b=x.dataKey,y=x.name,v=x.legendType,N=x.hide;return{inactive:N,dataKey:b,type:u.iconType||v||"square",color:BN(p),value:y||b,payload:x}}),Go(Go(Go({},u),qn.getWithHeight(o,s)),{},{payload:d,item:o})};function bh(e){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(e)}function bO(e){return DJ(e)||IJ(e)||PJ(e)||OJ()}function OJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PJ(e,t){if(e){if(typeof e=="string")return Cj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cj(e,t)}}function IJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DJ(e){if(Array.isArray(e))return Cj(e)}function Cj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(n){Dc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dc(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=RJ(e,"string");return bh(t)=="symbol"?t:t+""}function RJ(e,t){if(bh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zr(e,t,r){return zt(e)||zt(t)?r:vn(t)?qa(e,t,r):Rt(t)?t(e):r}function Md(e,t,r,n){var s=DX(e,function(l){return Zr(l,t)});if(r==="number"){var i=s.filter(function(l){return et(l)||parseFloat(l)});return i.length?[eg(i),Zm(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!zt(l)}):s;return o.map(function(l){return vn(l)||l instanceof Date?l:""})}var FJ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,p=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,x=void 0;if(fa(p-f)!==fa(m-p)){var b=[];if(fa(m-p)===fa(u[1]-u[0])){x=m;var y=p+u[1]-u[0];b[0]=Math.min(y,(y+f)/2),b[1]=Math.max(y,(y+f)/2)}else{x=f;var v=m+u[1]-u[0];b[0]=Math.min(p,(v+p)/2),b[1]=Math.max(p,(v+p)/2)}var N=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>N[0]&&t<=N[1]||t>=b[0]&&t<=b[1]){o=s[d].index;break}}else{var k=Math.min(f,m),j=Math.max(f,m);if(t>(k+p)/2&&t<=(j+p)/2){o=s[d].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<l-1&&t>(n[A].coordinate+n[A-1].coordinate)/2&&t<=(n[A].coordinate+n[A+1].coordinate)/2||A===l-1&&t>(n[A].coordinate+n[A-1].coordinate)/2){o=n[A].index;break}return o},BN=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Vr(Vr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,u;switch(s){case"Line":u=o;break;case"Area":case"Radar":u=o&&o!=="none"?o:l;break;default:u=l;break}return u},$J=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),u=0,d=l.length;u<d;u++)for(var f=i[l[u]].stackGroups,p=Object.keys(f),m=0,x=p.length;m<x;m++){var b=f[p[m]],y=b.items,v=b.cateAxisId,N=y.filter(function(_){return Ci(_.type).indexOf("Bar")>=0});if(N&&N.length){var k=N[0].type.defaultProps,j=k!==void 0?Vr(Vr({},k),N[0].props):N[0].props,A=j.barSize,S=j[v];o[S]||(o[S]=[]);var E=zt(A)?r:A;o[S].push({item:N[0],stackList:N.slice(1),barSize:zt(E)?void 0:pa(E,n,0)})}}return o},LJ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,u=o.length;if(u<1)return null;var d=pa(r,s,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var m=!1,x=s/u,b=o.reduce(function(A,S){return A+S.barSize||0},0);b+=(u-1)*d,b>=s&&(b-=(u-1)*d,d=0),b>=s&&x>0&&(m=!0,x*=.9,b=u*x);var y=(s-b)/2>>0,v={offset:y-d,size:0};f=o.reduce(function(A,S){var E={item:S.item,position:{offset:v.offset+v.size+d,size:m?x:S.barSize}},_=[].concat(bO(A),[E]);return v=_[_.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){_.push({item:T,position:v})}),_},p)}else{var N=pa(n,s,0,!0);s-2*N-(u-1)*d<=0&&(d=0);var k=(s-2*N-(u-1)*d)/u;k>1&&(k>>=0);var j=l===+l?Math.min(k,l):k;f=o.reduce(function(A,S,E){var _=[].concat(bO(A),[{item:S.item,position:{offset:N+(k+d)*E+(k-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){_.push({item:T,position:_[_.length-1].position})}),_},p)}return f},BJ=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,u=o-(l.left||0)-(l.right||0),d=HM({children:i,legendWidth:u});if(d){var f=s||{},p=f.width,m=f.height,x=d.align,b=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&x!=="center"&&et(t[x]))return Vr(Vr({},t),{},Dc({},x,t[x]+(p||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&b!=="middle"&&et(t[b]))return Vr(Vr({},t),{},Dc({},b,t[b]+(m||0)))}return t},UJ=function(t,r,n){return zt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},qM=function(t,r,n,s,i){var o=r.props.children,l=za(o,sf).filter(function(d){return UJ(s,i,d.props.direction)});if(l&&l.length){var u=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var p=Zr(f,n);if(zt(p))return d;var m=Array.isArray(p)?[eg(p),Zm(p)]:[p,p],x=u.reduce(function(b,y){var v=Zr(f,y,0),N=m[0]-Math.abs(Array.isArray(v)?v[0]:v),k=m[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(N,b[0]),Math.max(k,b[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},HJ=function(t,r,n,s,i){var o=r.map(function(l){return qM(t,l,n,i,s)}).filter(function(l){return!zt(l)});return o&&o.length?o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]):null},zM=function(t,r,n,s,i){var o=r.map(function(u){var d=u.props.dataKey;return n==="number"&&d&&qM(t,u,d,s)||Md(t,d,n,i)});if(n==="number")return o.reduce(function(u,d){return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(u,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,u.push(d[f]));return u},[])},KM=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},WM=function(t,r,n,s){if(s)return t.map(function(u){return u.coordinate});var i,o,l=t.map(function(u){return u.coordinate===r&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate});return i||l.push(r),o||l.push(n),l},Si=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/u:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?fa(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(p){var m=i?i.indexOf(p):p;return{coordinate:s(m)+d,value:p,offset:d}});return f.filter(function(p){return!Zh(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,m){return{coordinate:s(p)+d,value:p,index:m,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(p){return{coordinate:s(p)+d,value:p,offset:d}}):s.domain().map(function(p,m){return{coordinate:s(p)+d,value:i?i[p]:p,index:m,offset:d}})},R1=new WeakMap,O0=function(t,r){if(typeof r!="function")return t;R1.has(t)||R1.set(t,new WeakMap);var n=R1.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},VM=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:hh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:kp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Dd(),realScaleType:"point"}:i==="category"?{scale:hh(),realScaleType:"band"}:{scale:kp(),realScaleType:"linear"};if(yl(s)){var u="scale".concat(Lm(s));return{scale:(iO[u]||Dd)(),realScaleType:iO[u]?u:"point"}}return Rt(s)?{scale:s}:{scale:Dd(),realScaleType:"point"}},jO=1e-4,GM=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-jO,o=Math.max(s[0],s[1])+jO,l=t(r[0]),u=t(r[n-1]);(l<i||l>o||u<i||u>o)&&t.domain([r[0],r[n-1]])}},qJ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},zJ=function(t,r){if(!r||r.length!==2||!et(r[0])||!et(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!et(t[0])||t[0]<n)&&(i[0]=n),(!et(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},KJ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var u=Zh(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+u,o=t[l][n][1])}},WJ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Zh(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},VJ={sign:KJ,expand:Dz,none:Lc,silhouette:Mz,wiggle:Rz,positive:WJ},GJ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=VJ[n],o=Iz().keys(s).value(function(l,u){return+Zr(l,u,0)}).order(aj).offset(i);return o(t)},YJ=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,u={},d=l.reduce(function(p,m){var x,b=(x=m.type)!==null&&x!==void 0&&x.defaultProps?Vr(Vr({},m.type.defaultProps),m.props):m.props,y=b.stackId,v=b.hide;if(v)return p;var N=b[n],k=p[N]||{hasStack:!1,stackGroups:{}};if(vn(y)){var j=k.stackGroups[y]||{numericAxisId:n,cateAxisId:s,items:[]};j.items.push(m),k.hasStack=!0,k.stackGroups[y]=j}else k.stackGroups[yu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return Vr(Vr({},p),{},Dc({},N,k))},u),f={};return Object.keys(d).reduce(function(p,m){var x=d[m];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,v){var N=x.stackGroups[v];return Vr(Vr({},y),{},Dc({},v,{numericAxisId:n,cateAxisId:s,items:N.items,stackedData:GJ(t,N.items,i)}))},b)}return Vr(Vr({},p),{},Dc({},m,x))},f)},YM=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,u=n||r.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=cJ(d,i,l);return t.domain([eg(f),Zm(f)]),{niceTicks:f}}if(i&&s==="number"){var p=t.domain(),m=uJ(p,i,l);return{niceTicks:m}}return null};function NO(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!zt(s[t.dataKey])){var l=ip(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var u=Zr(s,zt(o)?t.dataKey:o);return zt(u)?null:t.scale(u)}var kO=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var u=Zr(o,r.dataKey,r.domain[l]);return zt(u)?null:r.scale(u)-i/2+s},XJ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},JJ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Vr(Vr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(vn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},QJ=function(t){return t.reduce(function(r,n){return[eg(n.concat([r[0]]).filter(et)),Zm(n.concat([r[1]]).filter(et))]},[1/0,-1/0])},XM=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,u=l.reduce(function(d,f){var p=QJ(f.slice(r,n+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},SO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_O=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tj=function(t,r,n){if(Rt(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(et(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(SO.test(t[0])){var i=+SO.exec(t[0])[1];s[0]=r[0]-i}else Rt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(et(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(_O.test(t[1])){var o=+_O.exec(t[1])[1];s[1]=r[1]+o}else Rt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},Op=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=pN(r,function(p){return p.coordinate}),o=1/0,l=1,u=i.length;l<u;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},EO=function(t,r,n){return!t||!t.length||wu(t,qa(n,"type.defaultProps.domain"))?r:t},JM=function(t,r){var n=t.type.defaultProps?Vr(Vr({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,u=n.tooltipType,d=n.chartType,f=n.hide;return Vr(Vr({},At(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:BN(t),value:Zr(r,s),type:u,payload:r,chartType:d,hide:f})};function wh(e){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(e)}function CO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(r),!0).forEach(function(n){QM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QM(e,t,r){return t=ZJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZJ(e){var t=eQ(e,"string");return wh(t)=="symbol"?t:t+""}function eQ(e,t){if(wh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tQ(e,t){return sQ(e)||aQ(e,t)||nQ(e,t)||rQ()}function rQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nQ(e,t){if(e){if(typeof e=="string")return TO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TO(e,t)}}function TO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function sQ(e){if(Array.isArray(e))return e}var Pp=Math.PI/180,iQ=function(t){return t*180/Math.PI},gr=function(t,r,n,s){return{x:t+Math.cos(-Pp*s)*n,y:r+Math.sin(-Pp*s)*n}},ZM=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},eR=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.startAngle,d=t.endAngle,f=pa(t.cx,o,o/2),p=pa(t.cy,l,l/2),m=ZM(o,l,n),x=pa(t.innerRadius,m,0),b=pa(t.outerRadius,m,m*.8),y=Object.keys(r);return y.reduce(function(v,N){var k=r[N],j=k.domain,A=k.reversed,S;if(zt(k.range))s==="angleAxis"?S=[u,d]:s==="radiusAxis"&&(S=[x,b]),A&&(S=[S[1],S[0]]);else{S=k.range;var E=S,_=tQ(E,2);u=_[0],d=_[1]}var T=VM(k,i),D=T.realScaleType,F=T.scale;F.domain(j).range(S),GM(F);var P=YM(F,vi(vi({},k),{},{realScaleType:D})),I=vi(vi(vi({},k),P),{},{range:S,radius:b,realScaleType:D,scale:F,cx:f,cy:p,innerRadius:x,outerRadius:b,startAngle:u,endAngle:d});return vi(vi({},v),{},QM({},N,I))},{})},oQ=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},lQ=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=oQ({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var u=(n-i)/l,d=Math.acos(u);return s>o&&(d=2*Math.PI-d),{radius:l,angle:iQ(d),angleInRadian:d}},cQ=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},uQ=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},AO=function(t,r){var n=t.x,s=t.y,i=lQ({x:n,y:s},r),o=i.radius,l=i.angle,u=r.innerRadius,d=r.outerRadius;if(o<u||o>d)return!1;if(o===0)return!0;var f=cQ(r),p=f.startAngle,m=f.endAngle,x=l,b;if(p<=m){for(;x>m;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=m}else{for(;x>p;)x-=360;for(;x<m;)x+=360;b=x>=m&&x<=p}return b?vi(vi({},r),{},{radius:o,angle:uQ(x,r)}):null},tR=function(t){return!U.isValidElement(t)&&!Rt(t)&&typeof t!="boolean"?t.className:""};function jh(e){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}var dQ=["offset"];function hQ(e){return gQ(e)||mQ(e)||pQ(e)||fQ()}function fQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pQ(e,t){if(e){if(typeof e=="string")return Aj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aj(e,t)}}function mQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gQ(e){if(Array.isArray(e))return Aj(e)}function Aj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xQ(e,t){if(e==null)return{};var r=yQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return t=bQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bQ(e){var t=wQ(e,"string");return jh(t)=="symbol"?t:t+""}function wQ(e,t){if(jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nh.apply(this,arguments)}var jQ=function(t){var r=t.value,n=t.formatter,s=zt(t.children)?r:t.children;return Rt(n)?n(s):s},NQ=function(t,r){var n=fa(r-t),s=Math.min(Math.abs(r-t),360);return n*s},kQ=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,u=i,d=u.cx,f=u.cy,p=u.innerRadius,m=u.outerRadius,x=u.startAngle,b=u.endAngle,y=u.clockWise,v=(p+m)/2,N=NQ(x,b),k=N>=0?1:-1,j,A;s==="insideStart"?(j=x+k*o,A=y):s==="insideEnd"?(j=b-k*o,A=!y):s==="end"&&(j=b+k*o,A=y),A=N<=0?A:!A;var S=gr(d,f,v,j),E=gr(d,f,v,j+(A?1:-1)*359),_="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(E.x,",").concat(E.y),T=zt(t.id)?yu("recharts-radial-line-"):t.id;return de.createElement("text",Nh({},n,{dominantBaseline:"central",className:Ht("recharts-radial-bar-label",l)}),de.createElement("defs",null,de.createElement("path",{id:T,d:_})),de.createElement("textPath",{xlinkHref:"#".concat(T)},r))},SQ=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,u=i.innerRadius,d=i.outerRadius,f=i.startAngle,p=i.endAngle,m=(f+p)/2;if(s==="outside"){var x=gr(o,l,d+n,m),b=x.x,y=x.y;return{x:b,y,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(u+d)/2,N=gr(o,l,v,m),k=N.x,j=N.y;return{x:k,y:j,textAnchor:"middle",verticalAnchor:"middle"}},_Q=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,u=o.y,d=o.width,f=o.height,p=f>=0?1:-1,m=p*s,x=p>0?"end":"start",b=p>0?"start":"end",y=d>=0?1:-1,v=y*s,N=y>0?"end":"start",k=y>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:u-p*s,textAnchor:"middle",verticalAnchor:x};return fn(fn({},j),n?{height:Math.max(u-n.y,0),width:d}:{})}if(i==="bottom"){var A={x:l+d/2,y:u+f+m,textAnchor:"middle",verticalAnchor:b};return fn(fn({},A),n?{height:Math.max(n.y+n.height-(u+f),0),width:d}:{})}if(i==="left"){var S={x:l-v,y:u+f/2,textAnchor:N,verticalAnchor:"middle"};return fn(fn({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(i==="right"){var E={x:l+d+v,y:u+f/2,textAnchor:k,verticalAnchor:"middle"};return fn(fn({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:f}:{})}var _=n?{width:d,height:f}:{};return i==="insideLeft"?fn({x:l+v,y:u+f/2,textAnchor:k,verticalAnchor:"middle"},_):i==="insideRight"?fn({x:l+d-v,y:u+f/2,textAnchor:N,verticalAnchor:"middle"},_):i==="insideTop"?fn({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:b},_):i==="insideBottom"?fn({x:l+d/2,y:u+f-m,textAnchor:"middle",verticalAnchor:x},_):i==="insideTopLeft"?fn({x:l+v,y:u+m,textAnchor:k,verticalAnchor:b},_):i==="insideTopRight"?fn({x:l+d-v,y:u+m,textAnchor:N,verticalAnchor:b},_):i==="insideBottomLeft"?fn({x:l+v,y:u+f-m,textAnchor:k,verticalAnchor:x},_):i==="insideBottomRight"?fn({x:l+d-v,y:u+f-m,textAnchor:N,verticalAnchor:x},_):xu(i)&&(et(i.x)||il(i.x))&&(et(i.y)||il(i.y))?fn({x:l+pa(i.x,d),y:u+pa(i.y,f),textAnchor:"end",verticalAnchor:"end"},_):fn({x:l+d/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},_)},EQ=function(t){return"cx"in t&&et(t.cx)};function On(e){var t=e.offset,r=t===void 0?5:t,n=xQ(e,dQ),s=fn({offset:r},n),i=s.viewBox,o=s.position,l=s.value,u=s.children,d=s.content,f=s.className,p=f===void 0?"":f,m=s.textBreakAll;if(!i||zt(l)&&zt(u)&&!U.isValidElement(d)&&!Rt(d))return null;if(U.isValidElement(d))return U.cloneElement(d,s);var x;if(Rt(d)){if(x=U.createElement(d,s),U.isValidElement(x))return x}else x=jQ(s);var b=EQ(i),y=At(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return kQ(s,x,y);var v=b?SQ(s):_Q(s);return de.createElement(bl,Nh({className:Ht("recharts-label",p)},y,v,{breakAll:m}),x)}On.displayName="Label";var rR=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,u=t.radius,d=t.innerRadius,f=t.outerRadius,p=t.x,m=t.y,x=t.top,b=t.left,y=t.width,v=t.height,N=t.clockWise,k=t.labelViewBox;if(k)return k;if(et(y)&&et(v)){if(et(p)&&et(m))return{x:p,y:m,width:y,height:v};if(et(x)&&et(b))return{x,y:b,width:y,height:v}}return et(p)&&et(m)?{x:p,y:m,width:0,height:0}:et(r)&&et(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:N}:t.viewBox?t.viewBox:{}},CQ=function(t,r){return t?t===!0?de.createElement(On,{key:"label-implicit",viewBox:r}):vn(t)?de.createElement(On,{key:"label-implicit",viewBox:r,value:t}):U.isValidElement(t)?t.type===On?U.cloneElement(t,{key:"label-implicit",viewBox:r}):de.createElement(On,{key:"label-implicit",content:t,viewBox:r}):Rt(t)?de.createElement(On,{key:"label-implicit",content:t,viewBox:r}):xu(t)?de.createElement(On,Nh({viewBox:r},t,{key:"label-implicit"})):null:null},TQ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=rR(t),o=za(s,On).map(function(u,d){return U.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=CQ(t.label,r||i);return[l].concat(hQ(o))};On.parseViewBox=rR;On.renderCallByParent=TQ;var F1,PO;function AQ(){if(PO)return F1;PO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return F1=e,F1}var OQ=AQ();const nR=vr(OQ);function kh(e){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}var PQ=["valueAccessor"],IQ=["data","dataKey","clockWise","id","textBreakAll"];function DQ(e){return $Q(e)||FQ(e)||RQ(e)||MQ()}function MQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RQ(e,t){if(e){if(typeof e=="string")return Oj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oj(e,t)}}function FQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Q(e){if(Array.isArray(e))return Oj(e)}function Oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ip.apply(this,arguments)}function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(n){LQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LQ(e,t,r){return t=BQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BQ(e){var t=UQ(e,"string");return kh(t)=="symbol"?t:t+""}function UQ(e,t){if(kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MO(e,t){if(e==null)return{};var r=HQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qQ=function(t){return Array.isArray(t.value)?nR(t.value):t.value};function Qs(e){var t=e.valueAccessor,r=t===void 0?qQ:t,n=MO(e,PQ),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,u=n.textBreakAll,d=MO(n,IQ);return!s||!s.length?null:de.createElement(ir,{className:"recharts-label-list"},s.map(function(f,p){var m=zt(i)?r(f,p):Zr(f&&f.payload,i),x=zt(l)?{}:{id:"".concat(l,"-").concat(p)};return de.createElement(On,Ip({},At(f,!0),d,x,{parentViewBox:f.parentViewBox,value:m,textBreakAll:u,viewBox:On.parseViewBox(zt(o)?f:DO(DO({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Qs.displayName="LabelList";function zQ(e,t){return e?e===!0?de.createElement(Qs,{key:"labelList-implicit",data:t}):de.isValidElement(e)||Rt(e)?de.createElement(Qs,{key:"labelList-implicit",data:t,content:e}):xu(e)?de.createElement(Qs,Ip({data:t},e,{key:"labelList-implicit"})):null:null}function KQ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=za(n,Qs).map(function(o,l){return U.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=zQ(e.label,t);return[i].concat(DQ(s))}Qs.renderCallByParent=KQ;function Sh(e){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sh(e)}function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pj.apply(this,arguments)}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(n){WQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WQ(e,t,r){return t=VQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VQ(e){var t=GQ(e,"string");return Sh(t)=="symbol"?t:t+""}function GQ(e,t){if(Sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YQ=function(t,r){var n=fa(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},P0=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,u=t.cornerRadius,d=t.cornerIsExternal,f=u*(l?1:-1)+s,p=Math.asin(u/f)/Pp,m=d?i:i+o*p,x=gr(r,n,f,m),b=gr(r,n,s,m),y=d?i-o*p:i,v=gr(r,n,f*Math.cos(p*Pp),y);return{center:x,circleTangency:b,lineTangency:v,theta:p}},aR=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,u=YQ(o,l),d=o+u,f=gr(r,n,i,o),p=gr(r,n,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var x=gr(r,n,s,o),b=gr(r,n,s,d);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},XQ=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,p=fa(f-d),m=P0({cx:r,cy:n,radius:i,angle:d,sign:p,cornerRadius:o,cornerIsExternal:u}),x=m.circleTangency,b=m.lineTangency,y=m.theta,v=P0({cx:r,cy:n,radius:i,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:u}),N=v.circleTangency,k=v.lineTangency,j=v.theta,A=u?Math.abs(d-f):Math.abs(d-f)-y-j;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):aR({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(s>0){var E=P0({cx:r,cy:n,radius:s,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),_=E.circleTangency,T=E.lineTangency,D=E.theta,F=P0({cx:r,cy:n,radius:s,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),P=F.circleTangency,I=F.lineTangency,B=F.theta,z=u?Math.abs(d-f):Math.abs(d-f)-D-B;if(z<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(z>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},JQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},sR=function(t){var r=FO(FO({},JQ),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,u=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,p=r.endAngle,m=r.className;if(o<i||f===p)return null;var x=Ht("recharts-sector",m),b=o-i,y=pa(l,b,0,!0),v;return y>0&&Math.abs(f-p)<360?v=XQ({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,b/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:p}):v=aR({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:p}),de.createElement("path",Pj({},At(r,!0),{className:x,d:v,role:"img"}))};function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function Ij(){return Ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ij.apply(this,arguments)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){QQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QQ(e,t,r){return t=ZQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZQ(e){var t=eZ(e,"string");return _h(t)=="symbol"?t:t+""}function eZ(e,t){if(_h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BO={curveBasisClosed:jz,curveBasisOpen:Nz,curveBasis:wz,curveBumpX:oz,curveBumpY:lz,curveLinearClosed:kz,curveLinear:Um,curveMonotoneX:Sz,curveMonotoneY:_z,curveNatural:Ez,curveStep:Cz,curveStepAfter:Az,curveStepBefore:Tz},I0=function(t){return t.x===+t.x&&t.y===+t.y},xd=function(t){return t.x},yd=function(t){return t.y},tZ=function(t,r){if(Rt(t))return t;var n="curve".concat(Lm(t));return(n==="curveMonotone"||n==="curveBump")&&r?BO["".concat(n).concat(r==="vertical"?"Y":"X")]:BO[n]||Um},rZ=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,u=t.connectNulls,d=u===void 0?!1:u,f=tZ(n,l),p=d?i.filter(function(y){return I0(y)}):i,m;if(Array.isArray(o)){var x=d?o.filter(function(y){return I0(y)}):o,b=p.map(function(y,v){return LO(LO({},y),{},{base:x[v]})});return l==="vertical"?m=k0().y(yd).x1(xd).x0(function(y){return y.base.x}):m=k0().x(xd).y1(yd).y0(function(y){return y.base.y}),m.defined(I0).curve(f),m(b)}return l==="vertical"&&et(o)?m=k0().y(yd).x1(xd).x0(o):et(o)?m=k0().x(xd).y1(yd).y0(o):m=t5().x(xd).y(yd),m.defined(I0).curve(f),m(p)},Dp=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?rZ(t):s;return U.createElement("path",Ij({},At(t,!1),op(t),{className:Ht("recharts-curve",r),d:o,ref:i}))},$1={exports:{}},L1,UO;function nZ(){if(UO)return L1;UO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return L1=e,L1}var B1,HO;function aZ(){if(HO)return B1;HO=1;var e=nZ();function t(){}function r(){}return r.resetWarningCache=t,B1=function(){function n(o,l,u,d,f,p){if(p!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},B1}var qO;function sZ(){return qO||(qO=1,$1.exports=aZ()()),$1.exports}var iZ=sZ();const yr=vr(iZ),{getOwnPropertyNames:oZ,getOwnPropertySymbols:lZ}=Object,{hasOwnProperty:cZ}=Object.prototype;function U1(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function D0(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const u=e(r,n,s);return i.delete(r),i.delete(n),u}}function uZ(e){return e?.[Symbol.toStringTag]}function zO(e){return oZ(e).concat(lZ(e))}const dZ=Object.hasOwn||((e,t)=>cZ.call(e,t));function Pl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const hZ="__v",fZ="__o",pZ="_owner",{getOwnPropertyDescriptor:KO,keys:WO}=Object;function mZ(e,t){return e.byteLength===t.byteLength&&Mp(new Uint8Array(e),new Uint8Array(t))}function gZ(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function xZ(e,t){return e.byteLength===t.byteLength&&Mp(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function yZ(e,t){return Pl(e.getTime(),t.getTime())}function vZ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function bZ(e,t){return e===t}function VO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,u=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let f=!1,p=0;for(;(l=d.next())&&!l.done;){if(s[p]){p++;continue}const m=o.value,x=l.value;if(r.equals(m[0],x[0],u,p,e,t,r)&&r.equals(m[1],x[1],m[0],x[0],e,t,r)){f=s[p]=!0;break}p++}if(!f)return!1;u++}return!0}const wZ=Pl;function jZ(e,t,r){const n=WO(e);let s=n.length;if(WO(t).length!==s)return!1;for(;s-- >0;)if(!iR(e,t,r,n[s]))return!1;return!0}function vd(e,t,r){const n=zO(e);let s=n.length;if(zO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!iR(e,t,r,i)||(o=KO(e,i),l=KO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function NZ(e,t){return Pl(e.valueOf(),t.valueOf())}function kZ(e,t){return e.source===t.source&&e.flags===t.flags}function GO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const u=t.values();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function Mp(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function SZ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function iR(e,t,r,n){return(n===pZ||n===fZ||n===hZ)&&(e.$$typeof||t.$$typeof)?!0:dZ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const _Z="[object ArrayBuffer]",EZ="[object Arguments]",CZ="[object Boolean]",TZ="[object DataView]",AZ="[object Date]",OZ="[object Error]",PZ="[object Map]",IZ="[object Number]",DZ="[object Object]",MZ="[object RegExp]",RZ="[object Set]",FZ="[object String]",$Z={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},LZ="[object URL]",BZ=Object.prototype.toString;function UZ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:u,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:x,unknownTagComparators:b}){return function(v,N,k){if(v===N)return!0;if(v==null||N==null)return!1;const j=typeof v;if(j!==typeof N)return!1;if(j!=="object")return j==="number"?l(v,N,k):j==="function"?i(v,N,k):!1;const A=v.constructor;if(A!==N.constructor)return!1;if(A===Object)return u(v,N,k);if(Array.isArray(v))return t(v,N,k);if(A===Date)return n(v,N,k);if(A===RegExp)return f(v,N,k);if(A===Map)return o(v,N,k);if(A===Set)return p(v,N,k);const S=BZ.call(v);if(S===AZ)return n(v,N,k);if(S===MZ)return f(v,N,k);if(S===PZ)return o(v,N,k);if(S===RZ)return p(v,N,k);if(S===DZ)return typeof v.then!="function"&&typeof N.then!="function"&&u(v,N,k);if(S===LZ)return x(v,N,k);if(S===OZ)return s(v,N,k);if(S===EZ)return u(v,N,k);if($Z[S])return m(v,N,k);if(S===_Z)return e(v,N,k);if(S===TZ)return r(v,N,k);if(S===CZ||S===IZ||S===FZ)return d(v,N,k);if(b){let E=b[S];if(!E){const _=uZ(v);_&&(E=b[_])}if(E)return E(v,N,k)}return!1}}function HZ({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:mZ,areArraysEqual:r?vd:gZ,areDataViewsEqual:xZ,areDatesEqual:yZ,areErrorsEqual:vZ,areFunctionsEqual:bZ,areMapsEqual:r?U1(VO,vd):VO,areNumbersEqual:wZ,areObjectsEqual:r?vd:jZ,arePrimitiveWrappersEqual:NZ,areRegExpsEqual:kZ,areSetsEqual:r?U1(GO,vd):GO,areTypedArraysEqual:r?U1(Mp,vd):Mp,areUrlsEqual:SZ,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=D0(n.areArraysEqual),i=D0(n.areMapsEqual),o=D0(n.areObjectsEqual),l=D0(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function qZ(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function zZ({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,u){const{cache:d=e?new WeakMap:void 0,meta:f}=r();return t(l,u,{cache:d,equals:n,meta:f,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,u){return t(l,u,i)}}const KZ=Po();Po({strict:!0});Po({circular:!0});Po({circular:!0,strict:!0});Po({createInternalComparator:()=>Pl});Po({strict:!0,createInternalComparator:()=>Pl});Po({circular:!0,createInternalComparator:()=>Pl});Po({circular:!0,createInternalComparator:()=>Pl,strict:!0});function Po(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=HZ(e),o=UZ(i),l=r?r(o):qZ(o);return zZ({circular:t,comparator:o,createState:n,equals:l,strict:s})}function WZ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function YO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):WZ(s)};requestAnimationFrame(n)}function Dj(e){"@babel/helpers - typeof";return Dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dj(e)}function VZ(e){return JZ(e)||XZ(e)||YZ(e)||GZ()}function GZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YZ(e,t){if(e){if(typeof e=="string")return XO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XO(e,t)}}function XO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JZ(e){if(Array.isArray(e))return e}function QZ(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=VZ(o),u=l[0],d=l.slice(1);if(typeof u=="number"){YO(s.bind(null,d),u);return}s(u),YO(s.bind(null,d));return}Dj(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Eh(e){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh(e)}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(n){oR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oR(e,t,r){return t=ZZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZZ(e){var t=eee(e,"string");return Eh(t)==="symbol"?t:String(t)}function eee(e,t){if(Eh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tee=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},ree=function(t){return t},nee=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Rd=function(t,r){return Object.keys(r).reduce(function(n,s){return QO(QO({},n),{},oR({},s,t(s,r[s])))},{})},ZO=function(t,r,n){return t.map(function(s){return"".concat(nee(s)," ").concat(r,"ms ").concat(n)}).join(",")};function aee(e,t){return oee(e)||iee(e,t)||lR(e,t)||see()}function see(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function oee(e){if(Array.isArray(e))return e}function lee(e){return dee(e)||uee(e)||lR(e)||cee()}function cee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lR(e,t){if(e){if(typeof e=="string")return Mj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mj(e,t)}}function uee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dee(e){if(Array.isArray(e))return Mj(e)}function Mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rp=1e-4,cR=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},uR=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},e3=function(t,r){return function(n){var s=cR(t,r);return uR(s,n)}},hee=function(t,r){return function(n){var s=cR(t,r),i=[].concat(lee(s.map(function(o,l){return o*l}).slice(1)),[0]);return uR(i,n)}},t3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var d=u[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=aee(d,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var p=e3(s,o),m=e3(i,l),x=hee(s,o),b=function(N){return N>1?1:N<0?0:N},y=function(N){for(var k=N>1?1:N,j=k,A=0;A<8;++A){var S=p(j)-k,E=x(j);if(Math.abs(S-k)<Rp||E<Rp)return m(j);j=b(j-S/E)}return m(j)};return y.isStepper=!1,y},fee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,u=function(f,p,m){var x=-(f-p)*n,b=m*i,y=m+(x-b)*l/1e3,v=m*l/1e3+f;return Math.abs(v-p)<Rp&&Math.abs(y)<Rp?[p,0]:[v,y]};return u.isStepper=!0,u.dt=l,u},pee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return t3(s);case"spring":return fee();default:if(s.split("(")[0]==="cubic-bezier")return t3(s)}return typeof s=="function"?s:null};function Ch(e){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}function r3(e){return xee(e)||gee(e)||dR(e)||mee()}function mee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xee(e){if(Array.isArray(e))return Fj(e)}function n3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n3(Object(r),!0).forEach(function(n){Rj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rj(e,t,r){return t=yee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yee(e){var t=vee(e,"string");return Ch(t)==="symbol"?t:String(t)}function vee(e,t){if(Ch(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ch(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bee(e,t){return Nee(e)||jee(e,t)||dR(e,t)||wee()}function wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dR(e,t){if(e){if(typeof e=="string")return Fj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fj(e,t)}}function Fj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Nee(e){if(Array.isArray(e))return e}var Fp=function(t,r,n){return t+(r-t)*n},$j=function(t){var r=t.from,n=t.to;return r!==n},kee=function e(t,r,n){var s=Rd(function(i,o){if($j(o)){var l=t(o.from,o.to,o.velocity),u=bee(l,2),d=u[0],f=u[1];return Ln(Ln({},o),{},{from:d,velocity:f})}return o},r);return n<1?Rd(function(i,o){return $j(o)?Ln(Ln({},o),{},{velocity:Fp(o.velocity,s[i].velocity,n),from:Fp(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const See=(function(e,t,r,n,s){var i=tee(e,t),o=i.reduce(function(v,N){return Ln(Ln({},v),{},Rj({},N,[e[N],t[N]]))},{}),l=i.reduce(function(v,N){return Ln(Ln({},v),{},Rj({},N,{from:e[N],velocity:0,to:t[N]}))},{}),u=-1,d,f,p=function(){return null},m=function(){return Rd(function(N,k){return k.from},l)},x=function(){return!Object.values(l).filter($j).length},b=function(N){d||(d=N);var k=N-d,j=k/r.dt;l=kee(r,l,j),s(Ln(Ln(Ln({},e),t),m())),d=N,x()||(u=requestAnimationFrame(p))},y=function(N){f||(f=N);var k=(N-f)/n,j=Rd(function(S,E){return Fp.apply(void 0,r3(E).concat([r(k)]))},o);if(s(Ln(Ln(Ln({},e),t),j)),k<1)u=requestAnimationFrame(p);else{var A=Rd(function(S,E){return Fp.apply(void 0,r3(E).concat([r(1)]))},o);s(Ln(Ln(Ln({},e),t),A))}};return p=r.isStepper?b:y,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(u)}}});function Yc(e){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}var _ee=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Eee(e,t){if(e==null)return{};var r=Cee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cee(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function H1(e){return Pee(e)||Oee(e)||Aee(e)||Tee()}function Tee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(e,t){if(e){if(typeof e=="string")return Lj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lj(e,t)}}function Oee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pee(e){if(Array.isArray(e))return Lj(e)}function Lj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(r),!0).forEach(function(n){_d(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _d(e,t,r){return t=hR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hR(n.key),n)}}function Mee(e,t,r){return t&&Dee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hR(e){var t=Ree(e,"string");return Yc(t)==="symbol"?t:String(t)}function Ree(e,t){if(Yc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Bj(e,t)}function $ee(e){var t=Lee();return function(){var n=$p(e),s;if(t){var i=$p(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return Uj(this,s)}}function Uj(e,t){if(t&&(Yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hj(e)}function Hj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(e)}var Rs=(function(e){Fee(r,e);var t=$ee(r);function r(n,s){var i;Iee(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,u=o.attributeName,d=o.from,f=o.to,p=o.steps,m=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Hj(i)),i.changeStyle=i.changeStyle.bind(Hj(i)),!l||x<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),Uj(i);if(p&&p.length)i.state={style:p[0].style};else if(d){if(typeof m=="function")return i.state={style:d},Uj(i);i.state={style:u?_d({},u,d):d}}else i.state={style:{}};return i}return Mee(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,u=i.attributeName,d=i.shouldReAnimate,f=i.to,p=i.from,m=this.state.style;if(l){if(!o){var x={style:u?_d({},u,f):f};this.state&&m&&(u&&m[u]!==f||!u&&m!==f)&&this.setState(x);return}if(!(KZ(s.to,f)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||d?p:s.to;if(this.state&&m){var v={style:u?_d({},u,y):y};(u&&m[u]!==y||!u&&m!==y)&&this.setState(v)}this.runAnimation(vs(vs({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,u=s.duration,d=s.easing,f=s.begin,p=s.onAnimationEnd,m=s.onAnimationStart,x=See(o,l,pee(d),u,this.changeStyle),b=function(){i.stopJSAnimation=x()};this.manager.start([m,f,b,u,p])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,u=s.onAnimationStart,d=o[0],f=d.style,p=d.duration,m=p===void 0?0:p,x=function(y,v,N){if(N===0)return y;var k=v.duration,j=v.easing,A=j===void 0?"ease":j,S=v.style,E=v.properties,_=v.onAnimationEnd,T=N>0?o[N-1]:v,D=E||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(H1(y),[i.runJSAnimation.bind(i,{from:T.style,to:S,duration:k,easing:A}),k]);var F=ZO(D,k,A),P=vs(vs(vs({},T.style),S),{},{transition:F});return[].concat(H1(y),[P,k,_]).filter(ree)};return this.manager.start([u].concat(H1(o.reduce(x,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=QZ());var i=s.begin,o=s.duration,l=s.attributeName,u=s.to,d=s.easing,f=s.onAnimationStart,p=s.onAnimationEnd,m=s.steps,x=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var y=l?_d({},l,u):u,v=ZO(Object.keys(y),o,d);b.start([f,i,vs(vs({},y),{},{transition:v}),o,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=Eee(s,_ee),d=U.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var p=function(x){var b=x.props,y=b.style,v=y===void 0?{}:y,N=b.className,k=U.cloneElement(x,vs(vs({},u),{},{style:vs(vs({},v),f),className:N}));return k};return d===1?p(U.Children.only(i)):de.createElement("div",null,U.Children.map(i,function(m){return p(m)}))}}]),r})(U.PureComponent);Rs.displayName="Animate";Rs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Rs.propTypes={from:yr.oneOfType([yr.object,yr.string]),to:yr.oneOfType([yr.object,yr.string]),attributeName:yr.string,duration:yr.number,begin:yr.number,easing:yr.oneOfType([yr.string,yr.func]),steps:yr.arrayOf(yr.shape({duration:yr.number.isRequired,style:yr.object.isRequired,easing:yr.oneOfType([yr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),yr.func]),properties:yr.arrayOf("string"),onAnimationEnd:yr.func})),children:yr.oneOfType([yr.node,yr.func]),isActive:yr.bool,canBegin:yr.bool,onAnimationEnd:yr.func,shouldReAnimate:yr.bool,onAnimationStart:yr.func,onAnimationReStart:yr.func};eI();function Th(e){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Th(e)}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lp.apply(this,arguments)}function Bee(e,t){return zee(e)||qee(e,t)||Hee(e,t)||Uee()}function Uee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hee(e,t){if(e){if(typeof e=="string")return s3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s3(e,t)}}function s3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function zee(e){if(Array.isArray(e))return e}function i3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function o3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i3(Object(r),!0).forEach(function(n){Kee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kee(e,t,r){return t=Wee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wee(e){var t=Vee(e,"string");return Th(t)=="symbol"?t:t+""}function Vee(e,t){if(Th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l3=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,u=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,x=4;m<x;m++)p[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(t+u*p[0],",").concat(r)),f+="L ".concat(t+n-u*p[1],",").concat(r),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+l*p[1])),f+="L ".concat(t+n,",").concat(r+s-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(t+n-u*p[2],",").concat(r+s)),f+="L ".concat(t+u*p[3],",").concat(r+s),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+u*b,",").concat(r,`
            L `).concat(t+n-u*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+n-u*b,",").concat(r+s,`
            L `).concat(t+u*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Gee=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,u=r.height;if(Math.abs(l)>0&&Math.abs(u)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),p=Math.min(o,o+u),m=Math.max(o,o+u);return n>=d&&n<=f&&s>=p&&s<=m}return!1},Yee={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UN=function(t){var r=o3(o3({},Yee),t),n=U.useRef(),s=U.useState(-1),i=Bee(s,2),o=i[0],l=i[1];U.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var A=n.current.getTotalLength();A&&l(A)}catch{}},[]);var u=r.x,d=r.y,f=r.width,p=r.height,m=r.radius,x=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,N=r.isAnimationActive,k=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var j=Ht("recharts-rectangle",x);return k?de.createElement(Rs,{canBegin:o>0,from:{width:f,height:p,x:u,y:d},to:{width:f,height:p,x:u,y:d},duration:y,animationEasing:b,isActive:k},function(A){var S=A.width,E=A.height,_=A.x,T=A.y;return de.createElement(Rs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:N,easing:b},de.createElement("path",Lp({},At(r,!0),{className:j,d:l3(_,T,S,E,m),ref:n})))}):de.createElement("path",Lp({},At(r,!0),{className:j,d:l3(u,d,f,p,m)}))},Xee=["points","className","baseLinePoints","connectNulls"];function _c(){return _c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_c.apply(this,arguments)}function Jee(e,t){if(e==null)return{};var r=Qee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function c3(e){return rte(e)||tte(e)||ete(e)||Zee()}function Zee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ete(e,t){if(e){if(typeof e=="string")return qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(e,t)}}function tte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rte(e){if(Array.isArray(e))return qj(e)}function qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u3=function(t){return t&&t.x===+t.x&&t.y===+t.y},nte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){u3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),u3(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Fd=function(t,r){var n=nte(t);r&&(n=[n.reduce(function(i,o){return[].concat(c3(i),c3(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,u){return"".concat(o).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},ate=function(t,r,n){var s=Fd(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Fd(r.reverse(),n).slice(1))},fR=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Jee(t,Xee);if(!r||!r.length)return null;var l=Ht("recharts-polygon",n);if(s&&s.length){var u=o.stroke&&o.stroke!=="none",d=ate(r,s,i);return de.createElement("g",{className:l},de.createElement("path",_c({},At(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),u?de.createElement("path",_c({},At(o,!0),{fill:"none",d:Fd(r,i)})):null,u?de.createElement("path",_c({},At(o,!0),{fill:"none",d:Fd(s,i)})):null)}var f=Fd(r,i);return de.createElement("path",_c({},At(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function zj(){return zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zj.apply(this,arguments)}var of=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=Ht("recharts-dot",i);return r===+r&&n===+n&&s===+s?U.createElement("circle",zj({},At(t,!1),op(t),{className:o,cx:r,cy:n,r:s})):null};function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var ste=["x","y","top","left","width","height","className"];function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kj.apply(this,arguments)}function d3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ite(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(r),!0).forEach(function(n){ote(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ote(e,t,r){return t=lte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lte(e){var t=cte(e,"string");return Ah(t)=="symbol"?t:t+""}function cte(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ute(e,t){if(e==null)return{};var r=dte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var hte=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},fte=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,u=t.left,d=u===void 0?0:u,f=t.width,p=f===void 0?0:f,m=t.height,x=m===void 0?0:m,b=t.className,y=ute(t,ste),v=ite({x:n,y:i,top:l,left:d,width:p,height:x},y);return!et(n)||!et(i)||!et(p)||!et(x)||!et(l)||!et(d)?null:de.createElement("path",Kj({},At(v,!0),{className:Ht("recharts-cross",b),d:hte(n,i,p,x,l,d)}))},pte=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Oh(e){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}function mte(e,t){if(e==null)return{};var r=gte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ri.apply(this,arguments)}function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xte(e,t,r){return t=yte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yte(e){var t=vte(e,"string");return Oh(t)=="symbol"?t:t+""}function vte(e,t){if(Oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bte=function(t,r,n,s){var i="";return s.forEach(function(o,l){var u=gr(r,n,t,o);l?i+="L ".concat(u.x,",").concat(u.y):i+="M ".concat(u.x,",").concat(u.y)}),i+="Z",i},wte=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var u=Ph({stroke:"#ccc"},At(t,!1));return de.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(d){var f=gr(r,n,s,d),p=gr(r,n,i,d);return de.createElement("line",Ri({},u,{key:"line-".concat(d),x1:f.x,y1:f.y,x2:p.x,y2:p.y}))}))},jte=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.index,o=Ph(Ph({stroke:"#ccc"},At(t,!1)),{},{fill:"none"});return de.createElement("circle",Ri({},o,{className:Ht("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:s}))},Nte=function(t){var r=t.radius,n=t.index,s=Ph(Ph({stroke:"#ccc"},At(t,!1)),{},{fill:"none"});return de.createElement("path",Ri({},s,{className:Ht("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:bte(r,t.cx,t.cy,t.polarAngles)}))},kte=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:de.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return n==="circle"?de.createElement(jte,Ri({key:o},t,{radius:s,index:i})):de.createElement(Nte,Ri({key:o},t,{radius:s,index:i}))}))},pR=function(t){var r=t.cx,n=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,u=t.outerRadius,d=u===void 0?0:u,f=t.gridType,p=f===void 0?"polygon":f,m=t.radialLines,x=m===void 0?!0:m,b=mte(t,pte);return d<=0?null:de.createElement("g",{className:"recharts-polar-grid"},de.createElement(wte,Ri({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},b)),de.createElement(kte,Ri({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},b)))};pR.displayName="PolarGrid";var q1,f3;function Ste(){if(f3)return q1;f3=1;var e=Qm(),t=SM(),r=ni();function n(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return q1=n,q1}var _te=Ste();const Ete=vr(_te);var z1,p3;function Cte(){if(p3)return z1;p3=1;var e=Qm(),t=ni(),r=_M();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return z1=n,z1}var Tte=Cte();const Ate=vr(Tte);var Ote=["cx","cy","angle","ticks","axisLine"],Pte=["ticks","tick","angle","tickFormatter","stroke"];function Xc(e){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(e)}function $d(){return $d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$d.apply(this,arguments)}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(n){ng(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g3(e,t){if(e==null)return{};var r=Ite(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ite(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gR(n.key),n)}}function Mte(e,t,r){return t&&x3(e.prototype,t),r&&x3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rte(e,t,r){return t=Bp(t),Fte(e,mR()?Reflect.construct(t,r||[],Bp(e).constructor):t.apply(e,r))}function Fte(e,t){if(t&&(Xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $te(e)}function $te(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mR=function(){return!!e})()}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bp(e)}function Lte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}function Wj(e,t){return Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Wj(e,t)}function ng(e,t,r){return t=gR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gR(e){var t=Bte(e,"string");return Xc(t)=="symbol"?t:t+""}function Bte(e,t){if(Xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ku=(function(e){function t(){return Dte(this,t),Rte(this,t,arguments)}return Lte(t,e),Mte(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,u=i.cy;return gr(l,u,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=Ete(l,function(f){return f.coordinate||0}),d=Ate(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=n.axisLine,d=g3(n,Ote),f=l.reduce(function(b,y){return[Math.min(b[0],y.coordinate),Math.max(b[1],y.coordinate)]},[1/0,-1/0]),p=gr(s,i,f[0],o),m=gr(s,i,f[1],o),x=Yo(Yo(Yo({},At(d,!1)),{},{fill:"none"},At(u,!1)),{},{x1:p.x,y1:p.y,x2:m.x,y2:m.y});return de.createElement("line",$d({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,u=s.tickFormatter,d=s.stroke,f=g3(s,Pte),p=this.getTickTextAnchor(),m=At(f,!1),x=At(o,!1),b=i.map(function(y,v){var N=n.getTickValueCoord(y),k=Yo(Yo(Yo(Yo({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(N.x,", ").concat(N.y,")")},m),{},{stroke:"none",fill:d},x),{},{index:v},N),{},{payload:y});return de.createElement(ir,$d({className:Ht("recharts-polar-radius-axis-tick",tR(o)),key:"tick-".concat(y.coordinate)},vl(n.props,y,v)),t.renderTickItem(o,k,u?u(y.value,v):y.value))});return de.createElement(ir,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:de.createElement(ir,{className:Ht("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),On.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return de.isValidElement(n)?o=de.cloneElement(n,s):Rt(n)?o=n(s):o=de.createElement(bl,$d({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(U.PureComponent);ng(ku,"displayName","PolarRadiusAxis");ng(ku,"axisType","radiusAxis");ng(ku,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Jc(e){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nl.apply(this,arguments)}function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(n){ag(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ute(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yR(n.key),n)}}function Hte(e,t,r){return t&&v3(e.prototype,t),r&&v3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qte(e,t,r){return t=Up(t),zte(e,xR()?Reflect.construct(t,r||[],Up(e).constructor):t.apply(e,r))}function zte(e,t){if(t&&(Jc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kte(e)}function Kte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xR=function(){return!!e})()}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Up(e)}function Wte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Vj(e,t)}function ag(e,t,r){return t=yR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yR(e){var t=Vte(e,"string");return Jc(t)=="symbol"?t:t+""}function Vte(e,t){if(Jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gte=Math.PI/180,b3=1e-5,Su=(function(e){function t(){return Ute(this,t),qte(this,t,arguments)}return Wte(t,e),Hte(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,u=s.orientation,d=s.tickSize,f=d||8,p=gr(i,o,l,n.coordinate),m=gr(i,o,l+(u==="inner"?-1:1)*f,n.coordinate);return{x1:p.x,y1:p.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*Gte),o;return i>b3?o=s==="outer"?"start":"end":i<-b3?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,u=n.axisLineType,d=Xo(Xo({},At(this.props,!1)),{},{fill:"none"},At(l,!1));if(u==="circle")return de.createElement(of,nl({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var f=this.props.ticks,p=f.map(function(m){return gr(s,i,o,m.coordinate)});return de.createElement(fR,nl({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,u=s.tickFormatter,d=s.stroke,f=At(this.props,!1),p=At(o,!1),m=Xo(Xo({},f),{},{fill:"none"},At(l,!1)),x=i.map(function(b,y){var v=n.getTickLineCoord(b),N=n.getTickTextAnchor(b),k=Xo(Xo(Xo({textAnchor:N},f),{},{stroke:"none",fill:d},p),{},{index:y,payload:b,x:v.x2,y:v.y2});return de.createElement(ir,nl({className:Ht("recharts-polar-angle-axis-tick",tR(o)),key:"tick-".concat(b.coordinate)},vl(n.props,b,y)),l&&de.createElement("line",nl({className:"recharts-polar-angle-axis-tick-line"},m,v)),o&&t.renderTickItem(o,k,u?u(b.value,y):b.value))});return de.createElement(ir,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:de.createElement(ir,{className:Ht("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return de.isValidElement(n)?o=de.cloneElement(n,s):Rt(n)?o=n(s):o=de.createElement(bl,nl({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(U.PureComponent);ag(Su,"displayName","PolarAngleAxis");ag(Su,"axisType","angleAxis");ag(Su,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var K1,w3;function Yte(){if(w3)return K1;w3=1;var e=k5(),t=e(Object.getPrototypeOf,Object);return K1=t,K1}var W1,j3;function Xte(){if(j3)return W1;j3=1;var e=Li(),t=Yte(),r=Bi(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,u=o.call(Object);function d(f){if(!r(f)||e(f)!=n)return!1;var p=t(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return W1=d,W1}var Jte=Xte();const Qte=vr(Jte);var V1,N3;function Zte(){if(N3)return V1;N3=1;var e=Li(),t=Bi(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return V1=n,V1}var ere=Zte();const tre=vr(ere);function Ih(e){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ih(e)}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hp.apply(this,arguments)}function rre(e,t){return ire(e)||sre(e,t)||are(e,t)||nre()}function nre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function are(e,t){if(e){if(typeof e=="string")return k3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k3(e,t)}}function k3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function ire(e){if(Array.isArray(e))return e}function S3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S3(Object(r),!0).forEach(function(n){ore(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ore(e,t,r){return t=lre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lre(e){var t=cre(e,"string");return Ih(t)=="symbol"?t:t+""}function cre(e,t){if(Ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E3=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},ure={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dre=function(t){var r=_3(_3({},ure),t),n=U.useRef(),s=U.useState(-1),i=rre(s,2),o=i[0],l=i[1];U.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var u=r.x,d=r.y,f=r.upperWidth,p=r.lowerWidth,m=r.height,x=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,N=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||m!==+m||f===0&&p===0||m===0)return null;var k=Ht("recharts-trapezoid",x);return N?de.createElement(Rs,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:u,y:d},to:{upperWidth:f,lowerWidth:p,height:m,x:u,y:d},duration:y,animationEasing:b,isActive:N},function(j){var A=j.upperWidth,S=j.lowerWidth,E=j.height,_=j.x,T=j.y;return de.createElement(Rs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:b},de.createElement("path",Hp({},At(r,!0),{className:k,d:E3(_,T,A,S,E),ref:n})))}):de.createElement("g",null,de.createElement("path",Hp({},At(r,!0),{className:k,d:E3(u,d,f,p,m)})))},hre=["option","shapeType","propTransformer","activeClassName","isActive"];function Dh(e){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}function fre(e,t){if(e==null)return{};var r=pre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function C3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C3(Object(r),!0).forEach(function(n){mre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mre(e,t,r){return t=gre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gre(e){var t=xre(e,"string");return Dh(t)=="symbol"?t:t+""}function xre(e,t){if(Dh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yre(e,t){return qp(qp({},t),e)}function vre(e,t){return e==="symbols"}function T3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return de.createElement(UN,r);case"trapezoid":return de.createElement(dre,r);case"sector":return de.createElement(sR,r);case"symbols":if(vre(t))return de.createElement(iN,r);break;default:return null}}function bre(e){return U.isValidElement(e)?e.props:e}function vR(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?yre:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,u=fre(e,hre),d;if(U.isValidElement(t))d=U.cloneElement(t,qp(qp({},u),bre(t)));else if(Rt(t))d=t(u);else if(Qte(t)&&!tre(t)){var f=s(t,u);d=de.createElement(T3,{shapeType:r,elementProps:f})}else{var p=u;d=de.createElement(T3,{shapeType:r,elementProps:p})}return l?de.createElement(ir,{className:o},d):d}function sg(e,t){return t!=null&&"trapezoids"in e.props}function ig(e,t){return t!=null&&"sectors"in e.props}function Mh(e,t){return t!=null&&"points"in e.props}function wre(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function jre(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Nre(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function kre(e,t){var r;return sg(e,t)?r=wre:ig(e,t)?r=jre:Mh(e,t)&&(r=Nre),r}function Sre(e,t){var r;return sg(e,t)?r="trapezoids":ig(e,t)?r="sectors":Mh(e,t)&&(r="points"),r}function _re(e,t){if(sg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ig(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Mh(e,t)?t.payload:{}}function Ere(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=Sre(r,t),i=_re(r,t),o=n.filter(function(u,d){var f=wu(i,u),p=r.props[s].filter(function(b){var y=kre(r,t);return y(b,t)}),m=r.props[s].indexOf(p[p.length-1]),x=d===m;return f&&x}),l=n.indexOf(o[o.length-1]);return l}var G0;function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ec.apply(this,arguments)}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){ss(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wR(n.key),n)}}function Tre(e,t,r){return t&&O3(e.prototype,t),r&&O3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Are(e,t,r){return t=zp(t),Ore(e,bR()?Reflect.construct(t,r||[],zp(e).constructor):t.apply(e,r))}function Ore(e,t){if(t&&(Qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pre(e)}function Pre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bR=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zp(e)}function Ire(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gj(e,t)}function ss(e,t,r){return t=wR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wR(e){var t=Dre(e,"string");return Qc(t)=="symbol"?t:t+""}function Dre(e,t){if(Qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ai=(function(e){function t(r){var n;return Cre(this,t),n=Are(this,t,[r]),ss(n,"pieRef",null),ss(n,"sectorRefs",[]),ss(n,"id",yu("recharts-pie-")),ss(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Rt(s)&&s()}),ss(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Rt(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Ire(t,e),Tre(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,u=i.dataKey,d=i.valueKey,f=At(this.props,!1),p=At(o,!1),m=At(l,!1),x=o&&o.offsetRadius||20,b=n.map(function(y,v){var N=(y.startAngle+y.endAngle)/2,k=gr(y.cx,y.cy,y.outerRadius+x,N),j=Ar(Ar(Ar(Ar({},f),y),{},{stroke:"none"},p),{},{index:v,textAnchor:t.getTextAnchor(k.x,y.cx)},k),A=Ar(Ar(Ar(Ar({},f),y),{},{fill:"none",stroke:y.fill},m),{},{index:v,points:[gr(y.cx,y.cy,y.outerRadius,N),k]}),S=u;return zt(u)&&zt(d)?S="value":zt(u)&&(S=d),de.createElement(ir,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,j,Zr(y,S)))});return de.createElement(ir,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,u=i.inactiveShape;return n.map(function(d,f){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var p=s.isActiveIndex(f),m=u&&s.hasActiveIndex()?u:null,x=p?o:m,b=Ar(Ar({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return de.createElement(ir,Ec({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},vl(s.props,d,f),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(f)}),de.createElement(vR,Ec({option:x,isActive:p,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state,m=p.prevSectors,x=p.prevIsAnimationActive;return de.createElement(Rs,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var y=b.t,v=[],N=i&&i[0],k=N.startAngle;return i.forEach(function(j,A){var S=m&&m[A],E=A>0?qa(j,"paddingAngle",0):0;if(S){var _=Hn(S.endAngle-S.startAngle,j.endAngle-j.startAngle),T=Ar(Ar({},j),{},{startAngle:k+E,endAngle:k+_(y)+E});v.push(T),k=T.endAngle}else{var D=j.endAngle,F=j.startAngle,P=Hn(0,D-F),I=P(y),B=Ar(Ar({},j),{},{startAngle:k+E,endAngle:k+I+E});v.push(B),k=B.endAngle}}),de.createElement(ir,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!wu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,u=s.label,d=s.cx,f=s.cy,p=s.innerRadius,m=s.outerRadius,x=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!et(d)||!et(f)||!et(p)||!et(m))return null;var y=Ht("recharts-pie",l);return de.createElement(ir,{tabIndex:this.props.rootTabIndex,className:y,ref:function(N){n.pieRef=N}},this.renderSectors(),u&&this.renderLabels(o),On.renderCallByParent(this.props,null,!1),(!x||b)&&Qs.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(de.isValidElement(n))return de.cloneElement(n,s);if(Rt(n))return n(s);var o=Ht("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return de.createElement(Dp,Ec({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(de.isValidElement(n))return de.cloneElement(n,s);var o=i;if(Rt(n)&&(o=n(s),de.isValidElement(o)))return o;var l=Ht("recharts-pie-label-text",typeof n!="boolean"&&!Rt(n)?n.className:"");return de.createElement(bl,Ec({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(U.PureComponent);G0=ai;ss(ai,"displayName","Pie");ss(ai,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!To.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ss(ai,"parseDeltaAngle",function(e,t){var r=fa(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ss(ai,"getRealPieData",function(e){var t=e.data,r=e.children,n=At(e,!1),s=za(r,zc);return t&&t.length?t.map(function(i,o){return Ar(Ar(Ar({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Ar(Ar({},n),i.props)}):[]});ss(ai,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=ZM(s,i),l=n+pa(e.cx,s,s/2),u=r+pa(e.cy,i,i/2),d=pa(e.innerRadius,o,0),f=pa(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}});ss(ai,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Ar(Ar({},t.type.defaultProps),t.props):t.props,s=G0.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,u=n.paddingAngle,d=n.dataKey,f=n.nameKey,p=n.valueKey,m=n.tooltipType,x=Math.abs(n.minAngle),b=G0.parseCoordinateOfPie(n,r),y=G0.parseDeltaAngle(o,l),v=Math.abs(y),N=d;zt(d)&&zt(p)?(Ps(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):zt(d)&&(Ps(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=p);var k=s.filter(function(T){return Zr(T,N,0)!==0}).length,j=(v>=360?k:k-1)*u,A=v-k*x-j,S=s.reduce(function(T,D){var F=Zr(D,N,0);return T+(et(F)?F:0)},0),E;if(S>0){var _;E=s.map(function(T,D){var F=Zr(T,N,0),P=Zr(T,f,D),I=(et(F)?F:0)/S,B;D?B=_.endAngle+fa(y)*u*(F!==0?1:0):B=o;var z=B+fa(y)*((F!==0?x:0)+I*A),Y=(B+z)/2,re=(b.innerRadius+b.outerRadius)/2,X=[{name:P,value:F,payload:T,dataKey:N,type:m}],ne=gr(b.cx,b.cy,re,Y);return _=Ar(Ar(Ar({percent:I,cornerRadius:i,name:P,tooltipPayload:X,midAngle:Y,middleRadius:re,tooltipPosition:ne},T),b),{},{value:Zr(T,N),startAngle:B,endAngle:z,payload:T,paddingAngle:fa(y)*u}),_})}return Ar(Ar({},b),{},{sectors:E,data:s})});var G1,P3;function Mre(){if(P3)return G1;P3=1;function e(t){return t&&t.length?t[0]:void 0}return G1=e,G1}var Y1,I3;function Rre(){return I3||(I3=1,Y1=Mre()),Y1}var Fre=Rre();const $re=vr(Fre);var Lre=["key"];function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function Bre(e,t){if(e==null)return{};var r=Ure(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ure(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(r),!0).forEach(function(n){wi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NR(n.key),n)}}function qre(e,t,r){return t&&M3(e.prototype,t),r&&M3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zre(e,t,r){return t=Wp(t),Kre(e,jR()?Reflect.construct(t,r||[],Wp(e).constructor):t.apply(e,r))}function Kre(e,t){if(t&&(Zc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wre(e)}function Wre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jR=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wp(e)}function Vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yj(e,t)}function Yj(e,t){return Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Yj(e,t)}function wi(e,t,r){return t=NR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NR(e){var t=Gre(e,"string");return Zc(t)=="symbol"?t:t+""}function Gre(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fl=(function(e){function t(){var r;Hre(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=zre(this,t,[].concat(s)),wi(r,"state",{isAnimationFinished:!1}),wi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Rt(o)&&o()}),wi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Rt(o)&&o()}),wi(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),wi(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return Vre(t,e),qre(t,[{key:"renderDots",value:function(n){var s=this.props,i=s.dot,o=s.dataKey,l=At(this.props,!1),u=At(i,!0),d=n.map(function(f,p){var m=ca(ca(ca({key:"dot-".concat(p),r:3},l),u),{},{dataKey:o,cx:f.x,cy:f.y,index:p,payload:f});return t.renderDotItem(i,m)});return de.createElement(ir,{className:"recharts-radar-dots"},d)}},{key:"renderPolygonStatically",value:function(n){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,u=s.baseLinePoints,d=s.connectNulls,f;return de.isValidElement(i)?f=de.cloneElement(i,ca(ca({},this.props),{},{points:n})):Rt(i)?f=i(ca(ca({},this.props),{},{points:n})):f=de.createElement(fR,Kp({},At(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?u:null,connectNulls:d})),de.createElement(ir,{className:"recharts-radar-polygon"},f,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state.prevPoints;return de.createElement(Rs,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,b=p&&p.length/i.length,y=i.map(function(v,N){var k=p&&p[Math.floor(N*b)];if(k){var j=Hn(k.x,v.x),A=Hn(k.y,v.y);return ca(ca({},v),{},{x:j(x),y:A(x)})}var S=Hn(v.cx,v.x),E=Hn(v.cy,v.y);return ca(ca({},v),{},{x:S(x),y:E(x)})});return n.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!wu(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(s||!o||!o.length)return null;var u=this.state.isAnimationFinished,d=Ht("recharts-radar",i);return de.createElement(ir,{className:d},this.renderPolygon(),(!l||u)&&Qs.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,s){var i;if(de.isValidElement(n))i=de.cloneElement(n,s);else if(Rt(n))i=n(s);else{var o=s.key,l=Bre(s,Lre);i=de.createElement(of,Kp({},l,{key:o,className:Ht("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(U.PureComponent);wi(fl,"displayName","Radar");wi(fl,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!To.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});wi(fl,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,u=!1,d=[],f=r.type!=="number"?i??0:0;n.forEach(function(m,x){var b=Zr(m,r.dataKey,x),y=Zr(m,s),v=r.scale(b)+f,N=Array.isArray(y)?nR(y):y,k=zt(N)?void 0:t.scale(N);Array.isArray(y)&&y.length>=2&&(u=!0),d.push(ca(ca({},gr(o,l,k,v)),{},{name:b,value:y,cx:o,cy:l,radius:k,angle:v,payload:m}))});var p=[];return u&&d.forEach(function(m){if(Array.isArray(m.value)){var x=$re(m.value),b=zt(x)?void 0:t.scale(x);p.push(ca(ca({},m),{},{radius:b},gr(o,l,b,m.angle)))}else p.push(m)}),{points:d,isRange:u,baseLinePoints:p}});var X1,R3;function Yre(){if(R3)return X1;R3=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,u=t(e((s-n)/(i||1)),0),d=Array(u);u--;)d[o?u:++l]=n,n+=i;return d}return X1=r,X1}var J1,F3;function kR(){if(F3)return J1;F3=1;var e=B5(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return J1=n,J1}var Q1,$3;function Xre(){if($3)return Q1;$3=1;var e=Yre(),t=Km(),r=kR();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return Q1=n,Q1}var Z1,L3;function Jre(){if(L3)return Z1;L3=1;var e=Xre(),t=e();return Z1=t,Z1}var Qre=Jre();const Vp=vr(Qre);function Rh(e){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){SR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SR(e,t,r){return t=Zre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zre(e){var t=ene(e,"string");return Rh(t)=="symbol"?t:t+""}function ene(e,t){if(Rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tne=["Webkit","Moz","O","ms"],rne=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=tne.reduce(function(i,o){return U3(U3({},i),{},SR({},o+n,r))},{});return s[t]=r,s};function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gp.apply(this,arguments)}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ew(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){Ma(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ER(n.key),n)}}function ane(e,t,r){return t&&q3(e.prototype,t),r&&q3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sne(e,t,r){return t=Yp(t),ine(e,_R()?Reflect.construct(t,r||[],Yp(e).constructor):t.apply(e,r))}function ine(e,t){if(t&&(eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return one(e)}function one(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_R=function(){return!!e})()}function Yp(e){return Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yp(e)}function lne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xj(e,t)}function Ma(e,t,r){return t=ER(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ER(e){var t=cne(e,"string");return eu(t)=="symbol"?t:t+""}function cne(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var une=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var u=r.length,d=Dd().domain(Vp(0,u)).range([i,i+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:f}},z3=function(t){return t.changedTouches&&!!t.changedTouches.length},tu=(function(e){function t(r){var n;return nne(this,t),n=sne(this,t,[r]),Ma(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Ma(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Ma(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Ma(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ma(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ma(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ma(n,"handleSlideDragStart",function(s){var i=z3(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return lne(t,e),ane(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,u=l.gap,d=l.data,f=d.length-1,p=Math.min(s,i),m=Math.max(s,i),x=t.getIndexInRange(o,p),b=t.getIndexInRange(o,m);return{startIndex:x-x%u,endIndex:b===f?f:b-b%u}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,u=Zr(i[n],l,n);return Rt(o)?o(u,n):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,u=this.props,d=u.x,f=u.width,p=u.travellerWidth,m=u.startIndex,x=u.endIndex,b=u.onChange,y=n.pageX-i;y>0?y=Math.min(y,d+f-p-l,d+f-p-o):y<0&&(y=Math.max(y,d-o,d-l));var v=this.getIndex({startX:o+y,endX:l+y});(v.startIndex!==m||v.endIndex!==x)&&b&&b(v),this.setState({startX:o+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=z3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,u=s.startX,d=this.state[o],f=this.props,p=f.x,m=f.width,x=f.travellerWidth,b=f.onChange,y=f.gap,v=f.data,N={startX:this.state.startX,endX:this.state.endX},k=n.pageX-i;k>0?k=Math.min(k,p+m-x-d):k<0&&(k=Math.max(k,p-d)),N[o]=d+k;var j=this.getIndex(N),A=j.startIndex,S=j.endIndex,E=function(){var T=v.length-1;return o==="startX"&&(l>u?A%y===0:S%y===0)||l<u&&S===T||o==="endX"&&(l>u?S%y===0:A%y===0)||l>u&&S===T};this.setState(Ma(Ma({},o,d+k),"brushMoveStartX",n.pageX),function(){b&&E()&&b(j)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,u=o.startX,d=o.endX,f=this.state[s],p=l.indexOf(f);if(p!==-1){var m=p+n;if(!(m===-1||m>=l.length)){var x=l[m];s==="startX"&&x>=d||s==="endX"&&x<=u||this.setState(Ma({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.fill,d=n.stroke;return de.createElement("rect",{stroke:d,fill:u,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.data,d=n.children,f=n.padding,p=U.Children.only(d);return p?de.cloneElement(p,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,u=this.props,d=u.y,f=u.travellerWidth,p=u.height,m=u.traveller,x=u.ariaLabel,b=u.data,y=u.startIndex,v=u.endIndex,N=Math.max(n,this.props.x),k=ew(ew({},At(this.props,!1)),{},{x:N,y:d,width:f,height:p}),j=x||"Min value: ".concat((i=b[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[v])===null||o===void 0?void 0:o.name);return de.createElement(ir,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,k))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,u=i.stroke,d=i.travellerWidth,f=Math.min(n,s)+d,p=Math.max(Math.abs(s-n)-d,0);return de.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,u=n.travellerWidth,d=n.stroke,f=this.state,p=f.startX,m=f.endX,x=5,b={pointerEvents:"none",fill:d};return de.createElement(ir,{className:"recharts-brush-texts"},de.createElement(bl,Gp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,m)-x,y:o+l/2},b),this.getTextOfTick(s)),de.createElement(bl,Gp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,m)+u+x,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,u=n.y,d=n.width,f=n.height,p=n.alwaysShowText,m=this.state,x=m.startX,b=m.endX,y=m.isTextActive,v=m.isSlideMoving,N=m.isTravellerMoving,k=m.isTravellerFocused;if(!s||!s.length||!et(l)||!et(u)||!et(d)||!et(f)||d<=0||f<=0)return null;var j=Ht("recharts-brush",i),A=de.Children.count(o)===1,S=rne("userSelect","none");return de.createElement(ir,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(y||v||N||k||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,u=n.stroke,d=Math.floor(i+l/2)-1;return de.createElement(de.Fragment,null,de.createElement("rect",{x:s,y:i,width:o,height:l,fill:u,stroke:"none"}),de.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),de.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return de.isValidElement(n)?i=de.cloneElement(n,s):Rt(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,u=n.travellerWidth,d=n.updateId,f=n.startIndex,p=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return ew({prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?une({data:i,width:o,x:l,travellerWidth:u,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([l,l+o-u]);var m=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var u=Math.floor((o+l)/2);n[u]>s?l=u:o=u}return s>=n[l]?l:o}}])})(U.PureComponent);Ma(tu,"displayName","Brush");Ma(tu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tw,K3;function dne(){if(K3)return tw;K3=1;var e=fN();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return tw=t,tw}var rw,W3;function hne(){if(W3)return rw;W3=1;var e=x5(),t=ni(),r=dne(),n=Ca(),s=Km();function i(o,l,u){var d=n(o)?e:r;return u&&s(o,l,u)&&(l=void 0),d(o,t(l,3))}return rw=i,rw}var fne=hne();const pne=vr(fne);var Zs=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},nw,V3;function mne(){if(V3)return nw;V3=1;var e=M5();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return nw=t,nw}var aw,G3;function gne(){if(G3)return aw;G3=1;var e=mne(),t=I5(),r=ni();function n(s,i){var o={};return i=r(i,3),t(s,function(l,u,d){e(o,u,i(l,u,d))}),o}return aw=n,aw}var xne=gne();const yne=vr(xne);var sw,Y3;function vne(){if(Y3)return sw;Y3=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return sw=e,sw}var iw,X3;function bne(){if(X3)return iw;X3=1;var e=fN();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return iw=t,iw}var ow,J3;function wne(){if(J3)return ow;J3=1;var e=vne(),t=bne(),r=ni(),n=Ca(),s=Km();function i(o,l,u){var d=n(o)?e:t;return u&&s(o,l,u)&&(l=void 0),d(o,r(l,3))}return ow=i,ow}var jne=wne();const CR=vr(jne);var Nne=["x","y"];function Fh(e){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(e)}function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jj.apply(this,arguments)}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){kne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kne(e,t,r){return t=Sne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sne(e){var t=_ne(e,"string");return Fh(t)=="symbol"?t:t+""}function _ne(e,t){if(Fh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ene(e,t){if(e==null)return{};var r=Cne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tne(e,t){var r=e.x,n=e.y,s=Ene(e,Nne),i="".concat(r),o=parseInt(i,10),l="".concat(n),u=parseInt(l,10),d="".concat(t.height||s.height),f=parseInt(d,10),p="".concat(t.width||s.width),m=parseInt(p,10);return bd(bd(bd(bd(bd({},t),s),o?{x:o}:{}),u?{y:u}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function Z3(e){return de.createElement(vR,Jj({shapeType:"rectangle",propTransformer:Tne,activeClassName:"recharts-active-bar"},e))}var Ane=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=et(n)||Cq(n);return i?t(n,s):(i||jl(),r)}},One=["value","background"],TR;function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function Pne(e,t){if(e==null)return{};var r=Ine(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ine(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xp.apply(this,arguments)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(n){go(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OR(n.key),n)}}function Mne(e,t,r){return t&&tP(e.prototype,t),r&&tP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rne(e,t,r){return t=Jp(t),Fne(e,AR()?Reflect.construct(t,r||[],Jp(e).constructor):t.apply(e,r))}function Fne(e,t){if(t&&(ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ne(e)}function $ne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AR=function(){return!!e})()}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jp(e)}function Lne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qj(e,t)}function Qj(e,t){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Qj(e,t)}function go(e,t,r){return t=OR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OR(e){var t=Bne(e,"string");return ru(t)=="symbol"?t:t+""}function Bne(e,t){if(ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gt=(function(e){function t(){var r;Dne(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Rne(this,t,[].concat(s)),go(r,"state",{isAnimationFinished:!1}),go(r,"id",yu("recharts-bar-")),go(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),go(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Lne(t,e),Mne(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,u=i.activeIndex,d=i.activeBar,f=At(this.props,!1);return n&&n.map(function(p,m){var x=m===u,b=x?d:o,y=rn(rn(rn({},f),p),{},{isActive:x,option:b,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return de.createElement(ir,Xp({className:"recharts-bar-rectangle"},vl(s.props,p,m),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(m)}),de.createElement(Z3,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,p=s.animationId,m=this.state.prevData;return de.createElement(Rs,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,y=i.map(function(v,N){var k=m&&m[N];if(k){var j=Hn(k.x,v.x),A=Hn(k.y,v.y),S=Hn(k.width,v.width),E=Hn(k.height,v.height);return rn(rn({},v),{},{x:j(b),y:A(b),width:S(b),height:E(b)})}if(o==="horizontal"){var _=Hn(0,v.height),T=_(b);return rn(rn({},v),{},{y:v.y+v.height-T,height:T})}var D=Hn(0,v.width),F=D(b);return rn(rn({},v),{},{width:F})});return de.createElement(ir,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!wu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,u=At(this.props.background,!1);return i.map(function(d,f){d.value;var p=d.background,m=Pne(d,One);if(!p)return null;var x=rn(rn(rn(rn(rn({},m),{},{fill:"#eee"},p),u),vl(n.props,d,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return de.createElement(Z3,Xp({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=za(f,sf);if(!p)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,x=function(v,N){var k=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:k,errorVal:Zr(v,N)}},b={clipPath:n?"url(#clipPath-".concat(s,")"):null};return de.createElement(ir,b,p.map(function(y){return de.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,offset:m,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,u=n.yAxis,d=n.left,f=n.top,p=n.width,m=n.height,x=n.isAnimationActive,b=n.background,y=n.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,N=Ht("recharts-bar",o),k=l&&l.allowDataOverflow,j=u&&u.allowDataOverflow,A=k||j,S=zt(y)?this.id:y;return de.createElement(ir,{className:N},k||j?de.createElement("defs",null,de.createElement("clipPath",{id:"clipPath-".concat(S)},de.createElement("rect",{x:k?d:d-p/2,y:j?f:f-m/2,width:k?p:p*2,height:j?m:m*2}))):null,de.createElement(ir,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!x||v)&&Qs.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(U.PureComponent);TR=Gt;go(Gt,"displayName","Bar");go(Gt,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!To.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});go(Gt,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,u=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,p=e.displayedData,m=e.offset,x=qJ(n,r);if(!x)return null;var b=t.layout,y=r.type.defaultProps,v=y!==void 0?rn(rn({},y),r.props):r.props,N=v.dataKey,k=v.children,j=v.minPointSize,A=b==="horizontal"?o:i,S=d?A.scale.domain():null,E=XJ({numericAxis:A}),_=za(k,zc),T=p.map(function(D,F){var P,I,B,z,Y,re;d?P=zJ(d[f+F],S):(P=Zr(D,N),Array.isArray(P)||(P=[E,P]));var X=Ane(j,TR.defaultProps.minPointSize)(P[1],F);if(b==="horizontal"){var ne,Z=[o.scale(P[0]),o.scale(P[1])],me=Z[0],G=Z[1];I=kO({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:D,index:F}),B=(ne=G??me)!==null&&ne!==void 0?ne:void 0,z=x.size;var L=me-G;if(Y=Number.isNaN(L)?0:L,re={x:I,y:o.y,width:z,height:o.height},Math.abs(X)>0&&Math.abs(Y)<Math.abs(X)){var ee=fa(Y||X)*(Math.abs(X)-Math.abs(Y));B-=ee,Y+=ee}}else{var te=[i.scale(P[0]),i.scale(P[1])],J=te[0],he=te[1];if(I=J,B=kO({axis:o,ticks:u,bandSize:s,offset:x.offset,entry:D,index:F}),z=he-J,Y=x.size,re={x:i.x,y:B,width:i.width,height:Y},Math.abs(X)>0&&Math.abs(z)<Math.abs(X)){var Se=fa(z||X)*(Math.abs(X)-Math.abs(z));z+=Se}}return rn(rn(rn({},D),{},{x:I,y:B,width:z,height:Y,value:d?P:P[1],payload:D,background:re},_&&_[F]&&_[F].props),{},{tooltipPayload:[JM(r,D)],tooltipPosition:{x:I+z/2,y:B+Y/2}})});return rn({data:T,layout:b},m)});function $h(e){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}function Une(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PR(n.key),n)}}function Hne(e,t,r){return t&&rP(e.prototype,t),r&&rP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(n){og(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function og(e,t,r){return t=PR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PR(e){var t=qne(e,"string");return $h(t)=="symbol"?t:t+""}function qne(e,t){if($h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IR=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.layout,d=t.children,f=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!Ra(d,Gt);return f.reduce(function(x,b){var y=r[b],v=y.orientation,N=y.domain,k=y.padding,j=k===void 0?{}:k,A=y.mirror,S=y.reversed,E="".concat(v).concat(A?"Mirror":""),_,T,D,F,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var I=N[1]-N[0],B=1/0,z=y.categoricalDomain.sort(Oq);if(z.forEach(function(te,J){J>0&&(B=Math.min((te||0)-(z[J-1]||0),B))}),Number.isFinite(B)){var Y=B/I,re=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(_=Y*re/2),y.padding==="no-gap"){var X=pa(t.barCategoryGap,Y*re),ne=Y*re/2;_=ne-X-(ne-X)/re*X}}}s==="xAxis"?T=[n.left+(j.left||0)+(_||0),n.left+n.width-(j.right||0)-(_||0)]:s==="yAxis"?T=u==="horizontal"?[n.top+n.height-(j.bottom||0),n.top+(j.top||0)]:[n.top+(j.top||0)+(_||0),n.top+n.height-(j.bottom||0)-(_||0)]:T=y.range,S&&(T=[T[1],T[0]]);var Z=VM(y,i,m),me=Z.scale,G=Z.realScaleType;me.domain(N).range(T),GM(me);var L=YM(me,Ss(Ss({},y),{},{realScaleType:G}));s==="xAxis"?(P=v==="top"&&!A||v==="bottom"&&A,D=n.left,F=p[E]-P*y.height):s==="yAxis"&&(P=v==="left"&&!A||v==="right"&&A,D=p[E]-P*y.width,F=n.top);var ee=Ss(Ss(Ss({},y),L),{},{realScaleType:G,x:D,y:F,scale:me,width:s==="xAxis"?n.width:y.width,height:s==="yAxis"?n.height:y.height});return ee.bandSize=Op(ee,L),!y.hide&&s==="xAxis"?p[E]+=(P?-1:1)*ee.height:y.hide||(p[E]+=(P?-1:1)*ee.width),Ss(Ss({},x),{},og({},b,ee))},{})},DR=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},zne=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return DR({x:r,y:n},{x:s,y:i})},MR=(function(){function e(t){Une(this,e),this.scale=t}return Hne(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();og(MR,"EPS",1e-4);var HN=function(t){var r=Object.keys(t).reduce(function(n,s){return Ss(Ss({},n),{},og({},s,MR.create(t[s])))},{});return Ss(Ss({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return yne(s,function(u,d){return r[d].apply(u,{bandAware:o,position:l})})},isInRange:function(s){return CR(s,function(i,o){return r[o].isInRange(i)})}})};function Kne(e){return(e%180+180)%180}var Wne=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Kne(s),o=i*Math.PI/180,l=Math.atan(n/r),u=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},lw,aP;function Vne(){if(aP)return lw;aP=1;var e=ni(),t=ef(),r=qm();function n(s){return function(i,o,l){var u=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(p){return d(u[p],p,u)}}var f=s(i,o,l);return f>-1?u[d?i[f]:f]:void 0}}return lw=n,lw}var cw,sP;function Gne(){if(sP)return cw;sP=1;var e=kR();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return cw=t,cw}var uw,iP;function Yne(){if(iP)return uw;iP=1;var e=C5(),t=ni(),r=Gne(),n=Math.max;function s(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:r(l);return d<0&&(d=n(u+d,0)),e(i,t(o,3),d)}return uw=s,uw}var dw,oP;function Xne(){if(oP)return dw;oP=1;var e=Vne(),t=Yne(),r=e(t);return dw=r,dw}var Jne=Xne();const Qne=vr(Jne);var Zne=zD();const eae=vr(Zne);var tae=eae(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),qN=U.createContext(void 0),zN=U.createContext(void 0),RR=U.createContext(void 0),FR=U.createContext({}),$R=U.createContext(void 0),LR=U.createContext(0),BR=U.createContext(0),lP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,u=t.width,d=t.height,f=tae(i);return de.createElement(qN.Provider,{value:n},de.createElement(zN.Provider,{value:s},de.createElement(FR.Provider,{value:i},de.createElement(RR.Provider,{value:f},de.createElement($R.Provider,{value:o},de.createElement(LR.Provider,{value:d},de.createElement(BR.Provider,{value:u},l)))))))},rae=function(){return U.useContext($R)},UR=function(t){var r=U.useContext(qN);r==null&&jl();var n=r[t];return n==null&&jl(),n},nae=function(){var t=U.useContext(qN);return po(t)},aae=function(){var t=U.useContext(zN),r=Qne(t,function(n){return CR(n.domain,Number.isFinite)});return r||po(t)},HR=function(t){var r=U.useContext(zN);r==null&&jl();var n=r[t];return n==null&&jl(),n},sae=function(){var t=U.useContext(RR);return t},iae=function(){return U.useContext(FR)},KN=function(){return U.useContext(BR)},WN=function(){return U.useContext(LR)};function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function oae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zR(n.key),n)}}function cae(e,t,r){return t&&lae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uae(e,t,r){return t=Qp(t),dae(e,qR()?Reflect.construct(t,r||[],Qp(e).constructor):t.apply(e,r))}function dae(e,t){if(t&&(nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hae(e)}function hae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qR=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(e)}function fae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Zj(e,t)}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(n){VN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VN(e,t,r){return t=zR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zR(e){var t=pae(e,"string");return nu(t)=="symbol"?t:t+""}function pae(e,t){if(nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mae(e,t){return vae(e)||yae(e,t)||xae(e,t)||gae()}function gae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xae(e,t){if(e){if(typeof e=="string")return dP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dP(e,t)}}function dP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function vae(e){if(Array.isArray(e))return e}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e2.apply(this,arguments)}var bae=function(t,r){var n;return de.isValidElement(t)?n=de.cloneElement(t,r):Rt(t)?n=t(r):n=de.createElement("line",e2({},r,{className:"recharts-reference-line-line"})),n},wae=function(t,r,n,s,i,o,l,u,d){var f=i.x,p=i.y,m=i.width,x=i.height;if(n){var b=d.y,y=t.y.apply(b,{position:o});if(Zs(d,"discard")&&!t.y.isInRange(y))return null;var v=[{x:f+m,y},{x:f,y}];return u==="left"?v.reverse():v}if(r){var N=d.x,k=t.x.apply(N,{position:o});if(Zs(d,"discard")&&!t.x.isInRange(k))return null;var j=[{x:k,y:p+x},{x:k,y:p}];return l==="top"?j.reverse():j}if(s){var A=d.segment,S=A.map(function(E){return t.apply(E,{position:o})});return Zs(d,"discard")&&pne(S,function(E){return!t.isInRange(E)})?null:S}return null};function jae(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,u=e.alwaysShow,d=rae(),f=UR(s),p=HR(i),m=sae();if(!d||!m)return null;Ps(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=HN({x:f.scale,y:p.scale}),b=vn(t),y=vn(r),v=n&&n.length===2,N=wae(x,b,y,v,m,e.position,f.orientation,p.orientation,e);if(!N)return null;var k=mae(N,2),j=k[0],A=j.x,S=j.y,E=k[1],_=E.x,T=E.y,D=Zs(e,"hidden")?"url(#".concat(d,")"):void 0,F=uP(uP({clipPath:D},At(e,!0)),{},{x1:A,y1:S,x2:_,y2:T});return de.createElement(ir,{className:Ht("recharts-reference-line",l)},bae(o,F),On.renderCallByParent(e,zne({x1:A,y1:S,x2:_,y2:T})))}var GN=(function(e){function t(){return oae(this,t),uae(this,t,arguments)}return fae(t,e),cae(t,[{key:"render",value:function(){return de.createElement(jae,this.props)}}])})(de.Component);VN(GN,"displayName","ReferenceLine");VN(GN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function t2(){return t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t2.apply(this,arguments)}function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(n){lg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WR(n.key),n)}}function Sae(e,t,r){return t&&kae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ae(e,t,r){return t=Zp(t),Eae(e,KR()?Reflect.construct(t,r||[],Zp(e).constructor):t.apply(e,r))}function Eae(e,t){if(t&&(au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cae(e)}function Cae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!e})()}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zp(e)}function Tae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}function r2(e,t){return r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},r2(e,t)}function lg(e,t,r){return t=WR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e){var t=Aae(e,"string");return au(t)=="symbol"?t:t+""}function Aae(e,t){if(au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oae=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=HN({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Zs(t,"discard")&&!o.isInRange(l)?null:l},cg=(function(e){function t(){return Nae(this,t),_ae(this,t,arguments)}return Tae(t,e),Sae(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,u=n.clipPathId,d=vn(s),f=vn(i);if(Ps(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=Oae(this.props);if(!p)return null;var m=p.x,x=p.y,b=this.props,y=b.shape,v=b.className,N=Zs(this.props,"hidden")?"url(#".concat(u,")"):void 0,k=fP(fP({clipPath:N},At(this.props,!0)),{},{cx:m,cy:x});return de.createElement(ir,{className:Ht("recharts-reference-dot",v)},t.renderDot(y,k),On.renderCallByParent(this.props,{x:m-o,y:x-o,width:2*o,height:2*o}))}}])})(de.Component);lg(cg,"displayName","ReferenceDot");lg(cg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});lg(cg,"renderDot",function(e,t){var r;return de.isValidElement(e)?r=de.cloneElement(e,t):Rt(e)?r=e(t):r=de.createElement(of,t2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n2.apply(this,arguments)}function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(n){ug(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GR(n.key),n)}}function Dae(e,t,r){return t&&Iae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mae(e,t,r){return t=em(t),Rae(e,VR()?Reflect.construct(t,r||[],em(e).constructor):t.apply(e,r))}function Rae(e,t){if(t&&(su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fae(e)}function Fae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VR=function(){return!!e})()}function em(e){return em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},em(e)}function $ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a2(e,t)}function a2(e,t){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},a2(e,t)}function ug(e,t,r){return t=GR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GR(e){var t=Lae(e,"string");return su(t)=="symbol"?t:t+""}function Lae(e,t){if(su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bae=function(t,r,n,s,i){var o=i.x1,l=i.x2,u=i.y1,d=i.y2,f=i.xAxis,p=i.yAxis;if(!f||!p)return null;var m=HN({x:f.scale,y:p.scale}),x={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(u,{position:"start"}):m.y.rangeMin},b={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Zs(i,"discard")&&(!m.isInRange(x)||!m.isInRange(b))?null:DR(x,b)},dg=(function(e){function t(){return Pae(this,t),Mae(this,t,arguments)}return $ae(t,e),Dae(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,u=n.className,d=n.alwaysShow,f=n.clipPathId;Ps(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=vn(s),m=vn(i),x=vn(o),b=vn(l),y=this.props.shape;if(!p&&!m&&!x&&!b&&!y)return null;var v=Bae(p,m,x,b,this.props);if(!v&&!y)return null;var N=Zs(this.props,"hidden")?"url(#".concat(f,")"):void 0;return de.createElement(ir,{className:Ht("recharts-reference-area",u)},t.renderRect(y,mP(mP({clipPath:N},At(this.props,!0)),v)),On.renderCallByParent(this.props,v))}}])})(de.Component);ug(dg,"displayName","ReferenceArea");ug(dg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ug(dg,"renderRect",function(e,t){var r;return de.isValidElement(e)?r=de.cloneElement(e,t):Rt(e)?r=e(t):r=de.createElement(UN,n2({},t,{className:"recharts-reference-area-rect"})),r});function YR(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Uae(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Wne(n,r)}function Hae(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function tm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function qae(e,t){return YR(e,t+1)}function zae(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,u=0,d=1,f=o,p=function(){var b=n?.[u];if(b===void 0)return{v:YR(n,d)};var y=u,v,N=function(){return v===void 0&&(v=r(b,y)),v},k=b.coordinate,j=u===0||tm(e,k,N,f,l);j||(u=0,f=o,d+=1),j&&(f=k+e*(N()/2+s),u+=d)},m;d<=i.length;)if(m=p(),m)return m.v;return[]}function Lh(e){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){Kae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kae(e,t,r){return t=Wae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wae(e){var t=Vae(e,"string");return Lh(t)=="symbol"?t:t+""}function Vae(e,t){if(Lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gae(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,u=t.end,d=function(m){var x=i[m],b,y=function(){return b===void 0&&(b=r(x,m)),b};if(m===o-1){var v=e*(x.coordinate+e*y()/2-u);i[m]=x=Jn(Jn({},x),{},{tickCoord:v>0?x.coordinate-v*e:x.coordinate})}else i[m]=x=Jn(Jn({},x),{},{tickCoord:x.coordinate});var N=tm(e,x.tickCoord,y,l,u);N&&(u=x.tickCoord-e*(y()/2+s),i[m]=Jn(Jn({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function Yae(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,u=t.start,d=t.end;if(i){var f=n[l-1],p=r(f,l-1),m=e*(f.coordinate+e*p/2-d);o[l-1]=f=Jn(Jn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var x=tm(e,f.tickCoord,function(){return p},u,d);x&&(d=f.tickCoord-e*(p/2+s),o[l-1]=Jn(Jn({},f),{},{isShow:!0}))}for(var b=i?l-1:l,y=function(k){var j=o[k],A,S=function(){return A===void 0&&(A=r(j,k)),A};if(k===0){var E=e*(j.coordinate-e*S()/2-u);o[k]=j=Jn(Jn({},j),{},{tickCoord:E<0?j.coordinate-E*e:j.coordinate})}else o[k]=j=Jn(Jn({},j),{},{tickCoord:j.coordinate});var _=tm(e,j.tickCoord,S,u,d);_&&(u=j.tickCoord+e*(S()/2+s),o[k]=Jn(Jn({},j),{},{isShow:!0}))},v=0;v<b;v++)y(v);return o}function YN(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,u=e.interval,d=e.tickFormatter,f=e.unit,p=e.angle;if(!s||!s.length||!n)return[];if(et(u)||To.isSsr)return qae(s,typeof u=="number"&&et(u)?u:0);var m=[],x=l==="top"||l==="bottom"?"width":"height",b=f&&x==="width"?Id(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(j,A){var S=Rt(d)?d(j.value,A):j.value;return x==="width"?Uae(Id(S,{fontSize:t,letterSpacing:r}),b,p):Id(S,{fontSize:t,letterSpacing:r})[x]},v=s.length>=2?fa(s[1].coordinate-s[0].coordinate):1,N=Hae(i,v,x);return u==="equidistantPreserveStart"?zae(v,N,y,s,o):(u==="preserveStart"||u==="preserveStartEnd"?m=Yae(v,N,y,s,o,u==="preserveStartEnd"):m=Gae(v,N,y,s,o),m.filter(function(k){return k.isShow}))}var Xae=["viewBox"],Jae=["viewBox"],Qae=["ticks"];function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cc.apply(this,arguments)}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){XN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hw(e,t){if(e==null)return{};var r=Zae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ese(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JR(n.key),n)}}function tse(e,t,r){return t&&yP(e.prototype,t),r&&yP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rse(e,t,r){return t=rm(t),nse(e,XR()?Reflect.construct(t,r||[],rm(e).constructor):t.apply(e,r))}function nse(e,t){if(t&&(iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ase(e)}function ase(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!e})()}function rm(e){return rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rm(e)}function sse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s2(e,t)}function s2(e,t){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},s2(e,t)}function XN(e,t,r){return t=JR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JR(e){var t=ise(e,"string");return iu(t)=="symbol"?t:t+""}function ise(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _u=(function(e){function t(r){var n;return ese(this,t),n=rse(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return sse(t,e),tse(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=hw(n,Xae),l=this.props,u=l.viewBox,d=hw(l,Jae);return!Pc(i,u)||!Pc(o,d)||!Pc(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,u=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,x,b,y,v,N,k,j=p?-1:1,A=n.tickSize||f,S=et(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":x=b=n.coordinate,v=o+ +!p*u,y=v-j*A,k=y-j*m,N=S;break;case"left":y=v=n.coordinate,b=i+ +!p*l,x=b-j*A,N=x-j*m,k=S;break;case"right":y=v=n.coordinate,b=i+ +p*l,x=b+j*A,N=x+j*m,k=S;break;default:x=b=n.coordinate,v=o+ +p*u,y=v+j*A,k=y+j*m,N=S;break}return{line:{x1:x,y1:y,x2:b,y2:v},tick:{x:N,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.orientation,d=n.mirror,f=n.axisLine,p=dn(dn(dn({},At(this.props,!1)),At(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var m=+(u==="top"&&!d||u==="bottom"&&d);p=dn(dn({},p),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var x=+(u==="left"&&!d||u==="right"&&d);p=dn(dn({},p),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return de.createElement("line",Cc({},p,{className:Ht("recharts-cartesian-axis-line",qa(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,u=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,m=l.unit,x=YN(dn(dn({},this.props),{},{ticks:n}),s,i),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=At(this.props,!1),N=At(f,!1),k=dn(dn({},v),{},{fill:"none"},At(u,!1)),j=x.map(function(A,S){var E=o.getTickLineCoord(A),_=E.line,T=E.tick,D=dn(dn(dn(dn({textAnchor:b,verticalAnchor:y},v),{},{stroke:"none",fill:d},N),T),{},{index:S,payload:A,visibleTicksCount:x.length,tickFormatter:p});return de.createElement(ir,Cc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},vl(o.props,A,S)),u&&de.createElement("line",Cc({},k,_,{className:Ht("recharts-cartesian-axis-tick-line",qa(u,"className"))})),f&&t.renderTickItem(f,D,"".concat(Rt(p)?p(A.value,S):A.value).concat(m||"")))});return de.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,u=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var p=this.props,m=p.ticks,x=hw(p,Qae),b=m;return Rt(u)&&(b=m&&m.length>0?u(this.props):u(x)),o<=0||l<=0||!b||!b.length?null:de.createElement(ir,{className:Ht("recharts-cartesian-axis",d),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),On.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=Ht(s.className,"recharts-cartesian-axis-tick-value");return de.isValidElement(n)?o=de.cloneElement(n,dn(dn({},s),{},{className:l})):Rt(n)?o=n(dn(dn({},s),{},{className:l})):o=de.createElement(bl,Cc({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(U.Component);XN(_u,"displayName","CartesianAxis");XN(_u,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ose=["x1","y1","x2","y2","key"],lse=["offset"];function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){cse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cse(e,t,r){return t=use(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function use(e){var t=dse(e,"string");return Nl(t)=="symbol"?t:t+""}function dse(e,t){if(Nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cl.apply(this,arguments)}function bP(e,t){if(e==null)return{};var r=hse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fse=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,u=t.ry;return de.createElement("rect",{x:s,y:i,ry:u,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function QR(e,t){var r;if(de.isValidElement(e))r=de.cloneElement(e,t);else if(Rt(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,u=bP(t,ose),d=At(u,!1);d.offset;var f=bP(d,lse);r=de.createElement("line",cl({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function pse(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=ea(ea({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(u),index:u});return QR(s,d)});return de.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function mse(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=ea(ea({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(u),index:u});return QR(s,d)});return de.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function gse(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,u=e.horizontal,d=u===void 0?!0:u;if(!d||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,x){return m-x});s!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var b=!f[x+1],y=b?s+o-m:f[x+1]-m;if(y<=0)return null;var v=x%t.length;return de.createElement("rect",{key:"react-".concat(x),y:m,x:n,height:y,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return de.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function xse(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,u=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var f=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,x){return m-x});i!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var b=!f[x+1],y=b?i+l-m:f[x+1]-m;if(y<=0)return null;var v=x%n.length;return de.createElement("rect",{key:"react-".concat(x),x:m,y:o,width:y,height:u,stroke:"none",fill:n[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return de.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var yse=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return WM(YN(ea(ea(ea({},_u.defaultProps),n),{},{ticks:Si(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},vse=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return WM(YN(ea(ea(ea({},_u.defaultProps),n),{},{ticks:Si(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},mc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Qn(e){var t,r,n,s,i,o,l=KN(),u=WN(),d=iae(),f=ea(ea({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:mc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:mc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:mc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:mc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:mc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:mc.verticalFill,x:et(e.x)?e.x:d.left,y:et(e.y)?e.y:d.top,width:et(e.width)?e.width:d.width,height:et(e.height)?e.height:d.height}),p=f.x,m=f.y,x=f.width,b=f.height,y=f.syncWithTicks,v=f.horizontalValues,N=f.verticalValues,k=nae(),j=aae();if(!et(x)||x<=0||!et(b)||b<=0||!et(p)||p!==+p||!et(m)||m!==+m)return null;var A=f.verticalCoordinatesGenerator||yse,S=f.horizontalCoordinatesGenerator||vse,E=f.horizontalPoints,_=f.verticalPoints;if((!E||!E.length)&&Rt(S)){var T=v&&v.length,D=S({yAxis:j?ea(ea({},j),{},{ticks:T?v:j.ticks}):void 0,width:l,height:u,offset:d},T?!0:y);Ps(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Nl(D),"]")),Array.isArray(D)&&(E=D)}if((!_||!_.length)&&Rt(A)){var F=N&&N.length,P=A({xAxis:k?ea(ea({},k),{},{ticks:F?N:k.ticks}):void 0,width:l,height:u,offset:d},F?!0:y);Ps(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Nl(P),"]")),Array.isArray(P)&&(_=P)}return de.createElement("g",{className:"recharts-cartesian-grid"},de.createElement(fse,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),de.createElement(pse,cl({},f,{offset:d,horizontalPoints:E,xAxis:k,yAxis:j})),de.createElement(mse,cl({},f,{offset:d,verticalPoints:_,xAxis:k,yAxis:j})),de.createElement(gse,cl({},f,{horizontalPoints:E})),de.createElement(xse,cl({},f,{verticalPoints:_})))}Qn.displayName="CartesianGrid";var bse=["type","layout","connectNulls","ref"],wse=["key"];function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function wP(e,t){if(e==null)return{};var r=jse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(this,arguments)}function jP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jP(Object(r),!0).forEach(function(n){_s(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gc(e){return _se(e)||Sse(e)||kse(e)||Nse()}function Nse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kse(e,t){if(e){if(typeof e=="string")return i2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i2(e,t)}}function Sse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _se(e){if(Array.isArray(e))return i2(e)}function i2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ese(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eF(n.key),n)}}function Cse(e,t,r){return t&&NP(e.prototype,t),r&&NP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tse(e,t,r){return t=nm(t),Ase(e,ZR()?Reflect.construct(t,r||[],nm(e).constructor):t.apply(e,r))}function Ase(e,t){if(t&&(ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ose(e)}function Ose(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZR=function(){return!!e})()}function nm(e){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nm(e)}function Pse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o2(e,t)}function o2(e,t){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},o2(e,t)}function _s(e,t,r){return t=eF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=Ise(e,"string");return ou(t)=="symbol"?t:t+""}function Ise(e,t){if(ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Is=(function(e){function t(){var r;Ese(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Tse(this,t,[].concat(s)),_s(r,"state",{isAnimationFinished:!0,totalLength:0}),_s(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),_s(r,"getStrokeDasharray",function(o,l,u){var d=u.reduce(function(N,k){return N+k});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,m=l-o,x=[],b=0,y=0;b<u.length;y+=u[b],++b)if(y+u[b]>p){x=[].concat(gc(u.slice(0,b)),[p-y]);break}var v=x.length%2===0?[0,m]:[m];return[].concat(gc(t.repeat(u,f)),gc(x),v).map(function(N){return"".concat(N,"px")}).join(", ")}),_s(r,"id",yu("recharts-line-")),_s(r,"pathRef",function(o){r.mainCurve=o}),_s(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),_s(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Pse(t,e),Cse(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=za(f,sf);if(!p)return null;var m=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:Zr(y.payload,v)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return de.createElement(ir,x,p.map(function(b){return de.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,p=At(this.props,!1),m=At(u,!0),x=d.map(function(y,v){var N=Da(Da(Da({key:"dot-".concat(v),r:3},p),m),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:d});return t.renderDotItem(u,N)}),b={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return de.createElement(ir,Ld({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,u=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=wP(l,bse),m=Da(Da(Da({},At(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:u,layout:d,connectNulls:f});return de.createElement(Dp,Ld({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,u=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,m=o.animationEasing,x=o.animationId,b=o.animateNewValues,y=o.width,v=o.height,N=this.state,k=N.prevPoints,j=N.totalLength;return de.createElement(Rs,{begin:f,duration:p,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(k){var E=k.length/l.length,_=l.map(function(I,B){var z=Math.floor(B*E);if(k[z]){var Y=k[z],re=Hn(Y.x,I.x),X=Hn(Y.y,I.y);return Da(Da({},I),{},{x:re(S),y:X(S)})}if(b){var ne=Hn(y*2,I.x),Z=Hn(v/2,I.y);return Da(Da({},I),{},{x:ne(S),y:Z(S)})}return Da(Da({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(_,n,s)}var T=Hn(0,j),D=T(S),F;if(u){var P="".concat(u).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});F=i.getStrokeDasharray(D,j,P)}else F=i.generateSimpleStrokeDasharray(j,D);return i.renderCurveStatically(l,n,s,{strokeDasharray:F})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.totalLength;return l&&o&&o.length&&(!d&&f>0||!wu(d,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,u=s.className,d=s.xAxis,f=s.yAxis,p=s.top,m=s.left,x=s.width,b=s.height,y=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var N=this.state.isAnimationFinished,k=l.length===1,j=Ht("recharts-line",u),A=d&&d.allowDataOverflow,S=f&&f.allowDataOverflow,E=A||S,_=zt(v)?this.id:v,T=(n=At(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},D=T.r,F=D===void 0?3:D,P=T.strokeWidth,I=P===void 0?2:P,B=Bq(o)?o:{},z=B.clipDot,Y=z===void 0?!0:z,re=F*2+I;return de.createElement(ir,{className:j},A||S?de.createElement("defs",null,de.createElement("clipPath",{id:"clipPath-".concat(_)},de.createElement("rect",{x:A?m:m-x/2,y:S?p:p-b/2,width:A?x:x*2,height:S?b:b*2})),!Y&&de.createElement("clipPath",{id:"clipPath-dots-".concat(_)},de.createElement("rect",{x:m-re/2,y:p-re/2,width:x+re,height:b+re}))):null,!k&&this.renderCurve(E,_),this.renderErrorBar(E,_),(k||o)&&this.renderDots(E,Y,_),(!y||N)&&Qs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(gc(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(gc(o),gc(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(de.isValidElement(n))i=de.cloneElement(n,s);else if(Rt(n))i=n(s);else{var o=s.key,l=wP(s,wse),u=Ht("recharts-line-dot",typeof n!="boolean"?n.className:"");i=de.createElement(of,Ld({key:o},l,{className:u}))}return i}}])})(U.PureComponent);_s(Is,"displayName","Line");_s(Is,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!To.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_s(Is,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,u=e.displayedData,d=e.offset,f=t.layout,p=u.map(function(m,x){var b=Zr(m,o);return f==="horizontal"?{x:NO({axis:r,ticks:s,bandSize:l,entry:m,index:x}),y:zt(b)?null:n.scale(b),value:b,payload:m}:{x:zt(b)?null:r.scale(b),y:NO({axis:n,ticks:i,bandSize:l,entry:m,index:x}),value:b,payload:m}});return Da({points:p,layout:f},d)});function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function Dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nF(n.key),n)}}function Rse(e,t,r){return t&&Mse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fse(e,t,r){return t=am(t),$se(e,tF()?Reflect.construct(t,r||[],am(e).constructor):t.apply(e,r))}function $se(e,t){if(t&&(lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lse(e)}function Lse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tF=function(){return!!e})()}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},am(e)}function Bse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l2(e,t)}function l2(e,t){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},l2(e,t)}function rF(e,t,r){return t=nF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=Use(e,"string");return lu(t)=="symbol"?t:t+""}function Use(e,t){if(lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c2.apply(this,arguments)}function Hse(e){var t=e.xAxisId,r=KN(),n=WN(),s=UR(t);return s==null?null:U.createElement(_u,c2({},s,{className:Ht("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Si(o,!0)}}))}var xn=(function(e){function t(){return Dse(this,t),Fse(this,t,arguments)}return Bse(t,e),Rse(t,[{key:"render",value:function(){return U.createElement(Hse,this.props)}}])})(U.Component);rF(xn,"displayName","XAxis");rF(xn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function qse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iF(n.key),n)}}function Kse(e,t,r){return t&&zse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wse(e,t,r){return t=sm(t),Vse(e,aF()?Reflect.construct(t,r||[],sm(e).constructor):t.apply(e,r))}function Vse(e,t){if(t&&(cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gse(e)}function Gse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!e})()}function sm(e){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sm(e)}function Yse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u2(e,t)}function u2(e,t){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},u2(e,t)}function sF(e,t,r){return t=iF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=Xse(e,"string");return cu(t)=="symbol"?t:t+""}function Xse(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d2.apply(this,arguments)}var Jse=function(t){var r=t.yAxisId,n=KN(),s=WN(),i=HR(r);return i==null?null:U.createElement(_u,d2({},i,{className:Ht("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Si(l,!0)}}))},on=(function(e){function t(){return qse(this,t),Wse(this,t,arguments)}return Yse(t,e),Kse(t,[{key:"render",value:function(){return U.createElement(Jse,this.props)}}])})(U.Component);sF(on,"displayName","YAxis");sF(on,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kP(e){return tie(e)||eie(e)||Zse(e)||Qse()}function Qse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zse(e,t){if(e){if(typeof e=="string")return h2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(e,t)}}function eie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tie(e){if(Array.isArray(e))return h2(e)}function h2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f2=function(t,r,n,s,i){var o=za(t,GN),l=za(t,cg),u=[].concat(kP(o),kP(l)),d=za(t,dg),f="".concat(s,"Id"),p=s[0],m=r;if(u.length&&(m=u.reduce(function(y,v){if(v.props[f]===n&&Zs(v.props,"extendDomain")&&et(v.props[p])){var N=v.props[p];return[Math.min(y[0],N),Math.max(y[1],N)]}return y},m)),d.length){var x="".concat(p,"1"),b="".concat(p,"2");m=d.reduce(function(y,v){if(v.props[f]===n&&Zs(v.props,"extendDomain")&&et(v.props[x])&&et(v.props[b])){var N=v.props[x],k=v.props[b];return[Math.min(y[0],N,k),Math.max(y[1],N,k)]}return y},m)}return i&&i.length&&(m=i.reduce(function(y,v){return et(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},m)),m},fw={exports:{}},SP;function rie(){return SP||(SP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function i(u,d,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||u,m),b=r?r+d:d;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],x]:u._events[b].push(x):(u._events[b]=x,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)t.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,x=p.length,b=new Array(x);m<x;m++)b[m]=p[m].fn;return b},l.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,m,x,b){var y=r?r+d:d;if(!this._events[y])return!1;var v=this._events[y],N=arguments.length,k,j;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),N){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,p),!0;case 4:return v.fn.call(v.context,f,p,m),!0;case 5:return v.fn.call(v.context,f,p,m,x),!0;case 6:return v.fn.call(v.context,f,p,m,x,b),!0}for(j=1,k=new Array(N-1);j<N;j++)k[j-1]=arguments[j];v.fn.apply(v.context,k)}else{var A=v.length,S;for(j=0;j<A;j++)switch(v[j].once&&this.removeListener(d,v[j].fn,void 0,!0),N){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,f);break;case 3:v[j].fn.call(v[j].context,f,p);break;case 4:v[j].fn.call(v[j].context,f,p,m);break;default:if(!k)for(S=1,k=new Array(N-1);S<N;S++)k[S-1]=arguments[S];v[j].fn.apply(v[j].context,k)}}return!0},l.prototype.on=function(d,f,p){return i(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return i(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,m){var x=r?r+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!m||b.once)&&(!p||b.context===p)&&o(this,x);else{for(var y=0,v=[],N=b.length;y<N;y++)(b[y].fn!==f||m&&!b[y].once||p&&b[y].context!==p)&&v.push(b[y]);v.length?this._events[x]=v.length===1?v[0]:v:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(fw)),fw.exports}var nie=rie();const aie=vr(nie);var pw=new aie,mw="recharts.syncMouseEvents";function Bh(e){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}function sie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oF(n.key),n)}}function oie(e,t,r){return t&&iie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gw(e,t,r){return t=oF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oF(e){var t=lie(e,"string");return Bh(t)=="symbol"?t:t+""}function lie(e,t){if(Bh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cie=(function(){function e(){sie(this,e),gw(this,"activeIndex",0),gw(this,"coordinateList",[]),gw(this,"layout","horizontal")}return oie(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,u=r.layout,d=u===void 0?null:u,f=r.offset,p=f===void 0?null:f,m=r.mouseHandlerCallback,x=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,u=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+u+d,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:m})}}}])})();function uie(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&et(n)&&et(s))return!0}return!1}function die(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lF(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=gr(t,r,n,s),l=gr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function hie(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,u=t.cy,d=t.innerRadius,f=t.outerRadius,p=t.angle,m=gr(l,u,d,p),x=gr(l,u,f,p);n=m.x,s=m.y,i=x.x,o=x.y}else return lF(t);return[{x:n,y:s},{x:i,y:o}]}function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function M0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){fie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fie(e,t,r){return t=pie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pie(e){var t=mie(e,"string");return Uh(t)=="symbol"?t:t+""}function mie(e,t){if(Uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gie(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,u=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,x=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var b,y=Dp;if(m==="ScatterChart")b=o,y=fte;else if(m==="BarChart")b=die(p,o,u,f),y=UN;else if(p==="radial"){var v=lF(o),N=v.cx,k=v.cy,j=v.radius,A=v.startAngle,S=v.endAngle;b={cx:N,cy:k,startAngle:A,endAngle:S,innerRadius:j,outerRadius:j},y=sR}else b={points:hie(p,o,u)},y=Dp;var E=M0(M0(M0(M0({stroke:"#ccc",pointerEvents:"none"},u),b),At(x,!1)),{},{payload:l,payloadIndex:d,className:Ht("recharts-tooltip-cursor",x.className)});return U.isValidElement(x)?U.cloneElement(x,E):U.createElement(y,E)}var xie=["item"],yie=["children","className","width","height","style","compact","title","desc"];function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function Tc(){return Tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tc.apply(this,arguments)}function EP(e,t){return wie(e)||bie(e,t)||uF(e,t)||vie()}function vie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function wie(e){if(Array.isArray(e))return e}function CP(e,t){if(e==null)return{};var r=jie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dF(n.key),n)}}function Sie(e,t,r){return t&&kie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ie(e,t,r){return t=im(t),Eie(e,cF()?Reflect.construct(t,r||[],im(e).constructor):t.apply(e,r))}function Eie(e,t){if(t&&(uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cie(e)}function Cie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!e})()}function im(e){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},im(e)}function Tie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p2(e,t)}function p2(e,t){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},p2(e,t)}function du(e){return Pie(e)||Oie(e)||uF(e)||Aie()}function Aie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(e,t){if(e){if(typeof e=="string")return m2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m2(e,t)}}function Oie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pie(e){if(Array.isArray(e))return m2(e)}function m2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(r),!0).forEach(function(n){Ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ft(e,t,r){return t=dF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=Iie(e,"string");return uu(t)=="symbol"?t:t+""}function Iie(e,t){if(uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Die={xAxis:["bottom","top"],yAxis:["left","right"]},Mie={width:"100%",height:"100%"},hF={x:0,y:0};function R0(e){return e}var Rie=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Fie=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return $e($e($e({},s),gr(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var u=i.coordinate,d=s.angle;return $e($e($e({},s),gr(s.cx,s.cy,u,d)),{},{angle:d,radius:u})}return hF},hg=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,u){var d=u.props.data;return d&&d.length?[].concat(du(l),du(d)):l},[]);return o.length>0?o:t&&t.length&&et(s)&&et(i)?t.slice(s,i+1):[]};function fF(e){return e==="number"?[0,"auto"]:void 0}var g2=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=hg(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(u,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:r;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;m=ip(x,o.dataKey,s)}else m=p&&p[n]||l[n];return m?[].concat(du(u),[JM(d,m)]):u},[])},AP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Rie(i,n),l=t.orderedTooltipTicks,u=t.tooltipAxis,d=t.tooltipTicks,f=FJ(o,l,d,u);if(f>=0&&d){var p=d[f]&&d[f].value,m=g2(t,r,f,p),x=Fie(n,l,f,i);return{activeTooltipIndex:f,activeLabel:p,activePayload:m,activeCoordinate:x}}return null},$ie=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=t.stackOffset,x=KM(f,i);return n.reduce(function(b,y){var v,N=y.type.defaultProps!==void 0?$e($e({},y.type.defaultProps),y.props):y.props,k=N.type,j=N.dataKey,A=N.allowDataOverflow,S=N.allowDuplicatedCategory,E=N.scale,_=N.ticks,T=N.includeHidden,D=N[o];if(b[D])return b;var F=hg(t.data,{graphicalItems:s.filter(function(L){var ee,te=o in L.props?L.props[o]:(ee=L.type.defaultProps)===null||ee===void 0?void 0:ee[o];return te===D}),dataStartIndex:u,dataEndIndex:d}),P=F.length,I,B,z;uie(N.domain,A,k)&&(I=Tj(N.domain,null,A),x&&(k==="number"||E!=="auto")&&(z=Md(F,j,"category")));var Y=fF(k);if(!I||I.length===0){var re,X=(re=N.domain)!==null&&re!==void 0?re:Y;if(j){if(I=Md(F,j,k),k==="category"&&x){var ne=Aq(I);S&&ne?(B=I,I=Vp(0,P)):S||(I=EO(X,I,y).reduce(function(L,ee){return L.indexOf(ee)>=0?L:[].concat(du(L),[ee])},[]))}else if(k==="category")S?I=I.filter(function(L){return L!==""&&!zt(L)}):I=EO(X,I,y).reduce(function(L,ee){return L.indexOf(ee)>=0||ee===""||zt(ee)?L:[].concat(du(L),[ee])},[]);else if(k==="number"){var Z=HJ(F,s.filter(function(L){var ee,te,J=o in L.props?L.props[o]:(ee=L.type.defaultProps)===null||ee===void 0?void 0:ee[o],he="hide"in L.props?L.props.hide:(te=L.type.defaultProps)===null||te===void 0?void 0:te.hide;return J===D&&(T||!he)}),j,i,f);Z&&(I=Z)}x&&(k==="number"||E!=="auto")&&(z=Md(F,j,"category"))}else x?I=Vp(0,P):l&&l[D]&&l[D].hasStack&&k==="number"?I=m==="expand"?[0,1]:XM(l[D].stackGroups,u,d):I=zM(F,s.filter(function(L){var ee=o in L.props?L.props[o]:L.type.defaultProps[o],te="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return ee===D&&(T||!te)}),k,f,!0);if(k==="number")I=f2(p,I,D,i,_),X&&(I=Tj(X,I,A));else if(k==="category"&&X){var me=X,G=I.every(function(L){return me.indexOf(L)>=0});G&&(I=me)}}return $e($e({},b),{},Ft({},D,$e($e({},N),{},{axisType:i,domain:I,categoricalDomain:z,duplicateDomain:B,originalDomain:(v=N.domain)!==null&&v!==void 0?v:Y,isCategorical:x,layout:f})))},{})},Lie=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=hg(t.data,{graphicalItems:n,dataStartIndex:u,dataEndIndex:d}),x=m.length,b=KM(f,i),y=-1;return n.reduce(function(v,N){var k=N.type.defaultProps!==void 0?$e($e({},N.type.defaultProps),N.props):N.props,j=k[o],A=fF("number");if(!v[j]){y++;var S;return b?S=Vp(0,x):l&&l[j]&&l[j].hasStack?(S=XM(l[j].stackGroups,u,d),S=f2(p,S,j,i)):(S=Tj(A,zM(m,n.filter(function(E){var _,T,D=o in E.props?E.props[o]:(_=E.type.defaultProps)===null||_===void 0?void 0:_[o],F="hide"in E.props?E.props.hide:(T=E.type.defaultProps)===null||T===void 0?void 0:T.hide;return D===j&&!F}),"number",f),s.defaultProps.allowDataOverflow),S=f2(p,S,j,i)),$e($e({},v),{},Ft({},j,$e($e({axisType:i},s.defaultProps),{},{hide:!0,orientation:qa(Die,"".concat(i,".").concat(y%2),null),domain:S,originalDomain:A,isCategorical:b,layout:f})))}return v},{})},Bie=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.children,p="".concat(s,"Id"),m=za(f,i),x={};return m&&m.length?x=$ie(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d}):o&&o.length&&(x=Lie(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d})),x},Uie=function(t){var r=po(t),n=Si(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:pN(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Op(r,n)}},OP=function(t){var r=t.children,n=t.defaultShowTooltip,s=Ra(r,tu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Hie=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ci(r&&r.type);return n&&n.indexOf("Bar")>=0})},PP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qie=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,u=l===void 0?{}:l,d=n.width,f=n.height,p=n.children,m=n.margin||{},x=Ra(p,tu),b=Ra(p,qn),y=Object.keys(u).reduce(function(S,E){var _=u[E],T=_.orientation;return!_.mirror&&!_.hide?$e($e({},S),{},Ft({},T,S[T]+_.width)):S},{left:m.left||0,right:m.right||0}),v=Object.keys(o).reduce(function(S,E){var _=o[E],T=_.orientation;return!_.mirror&&!_.hide?$e($e({},S),{},Ft({},T,qa(S,"".concat(T))+_.height)):S},{top:m.top||0,bottom:m.bottom||0}),N=$e($e({},v),y),k=N.bottom;x&&(N.bottom+=x.props.height||tu.defaultProps.height),b&&r&&(N=BJ(N,s,n,r));var j=d-N.left-N.right,A=f-N.top-N.bottom;return $e($e({brushBottom:k},N),{},{width:Math.max(j,0),height:Math.max(A,0)})},zie=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},fg=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,u=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,p=t.defaultProps,m=function(N,k){var j=k.graphicalItems,A=k.stackGroups,S=k.offset,E=k.updateId,_=k.dataStartIndex,T=k.dataEndIndex,D=N.barSize,F=N.layout,P=N.barGap,I=N.barCategoryGap,B=N.maxBarSize,z=PP(F),Y=z.numericAxisName,re=z.cateAxisName,X=Hie(j),ne=[];return j.forEach(function(Z,me){var G=hg(N.data,{graphicalItems:[Z],dataStartIndex:_,dataEndIndex:T}),L=Z.type.defaultProps!==void 0?$e($e({},Z.type.defaultProps),Z.props):Z.props,ee=L.dataKey,te=L.maxBarSize,J=L["".concat(Y,"Id")],he=L["".concat(re,"Id")],Se={},Oe=u.reduce(function(Me,Pt){var We=k["".concat(Pt.axisType,"Map")],ut=L["".concat(Pt.axisType,"Id")];We&&We[ut]||Pt.axisType==="zAxis"||jl();var nt=We[ut];return $e($e({},Me),{},Ft(Ft({},Pt.axisType,nt),"".concat(Pt.axisType,"Ticks"),Si(nt)))},Se),pe=Oe[re],xe=Oe["".concat(re,"Ticks")],Fe=A&&A[J]&&A[J].hasStack&&JJ(Z,A[J].stackGroups),O=Ci(Z.type).indexOf("Bar")>=0,be=Op(pe,xe),De=[],qe=X&&$J({barSize:D,stackGroups:A,totalSize:zie(Oe,re)});if(O){var rt,Be,Je=zt(te)?B:te,Xt=(rt=(Be=Op(pe,xe,!0))!==null&&Be!==void 0?Be:Je)!==null&&rt!==void 0?rt:0;De=LJ({barGap:P,barCategoryGap:I,bandSize:Xt!==be?Xt:be,sizeList:qe[he],maxBarSize:Je}),Xt!==be&&(De=De.map(function(Me){return $e($e({},Me),{},{position:$e($e({},Me.position),{},{offset:Me.position.offset-Xt/2})})}))}var Ce=Z&&Z.type&&Z.type.getComposedData;Ce&&ne.push({props:$e($e({},Ce($e($e({},Oe),{},{displayedData:G,props:N,dataKey:ee,item:Z,bandSize:be,barPosition:De,offset:S,stackedData:Fe,layout:F,dataStartIndex:_,dataEndIndex:T}))),{},Ft(Ft(Ft({key:Z.key||"item-".concat(me)},Y,Oe[Y]),re,Oe[re]),"animationId",E)),childIndex:qq(Z,N.children),item:Z})}),ne},x=function(N,k){var j=N.props,A=N.dataStartIndex,S=N.dataEndIndex,E=N.updateId;if(!UC({props:j}))return null;var _=j.children,T=j.layout,D=j.stackOffset,F=j.data,P=j.reverseStackOrder,I=PP(T),B=I.numericAxisName,z=I.cateAxisName,Y=za(_,n),re=YJ(F,Y,"".concat(B,"Id"),"".concat(z,"Id"),D,P),X=u.reduce(function(L,ee){var te="".concat(ee.axisType,"Map");return $e($e({},L),{},Ft({},te,Bie(j,$e($e({},ee),{},{graphicalItems:Y,stackGroups:ee.axisType===B&&re,dataStartIndex:A,dataEndIndex:S}))))},{}),ne=qie($e($e({},X),{},{props:j,graphicalItems:Y}),k?.legendBBox);Object.keys(X).forEach(function(L){X[L]=f(j,X[L],ne,L.replace("Map",""),r)});var Z=X["".concat(z,"Map")],me=Uie(Z),G=m(j,$e($e({},X),{},{dataStartIndex:A,dataEndIndex:S,updateId:E,graphicalItems:Y,stackGroups:re,offset:ne}));return $e($e({formattedGraphicalItems:G,graphicalItems:Y,offset:ne,stackGroups:re},me),X)},b=(function(v){function N(k){var j,A,S;return Nie(this,N),S=_ie(this,N,[k]),Ft(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ft(S,"accessibilityManager",new cie),Ft(S,"handleLegendBBoxUpdate",function(E){if(E){var _=S.state,T=_.dataStartIndex,D=_.dataEndIndex,F=_.updateId;S.setState($e({legendBBox:E},x({props:S.props,dataStartIndex:T,dataEndIndex:D,updateId:F},$e($e({},S.state),{},{legendBBox:E}))))}}),Ft(S,"handleReceiveSyncEvent",function(E,_,T){if(S.props.syncId===E){if(T===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(_)}}),Ft(S,"handleBrushChange",function(E){var _=E.startIndex,T=E.endIndex;if(_!==S.state.dataStartIndex||T!==S.state.dataEndIndex){var D=S.state.updateId;S.setState(function(){return $e({dataStartIndex:_,dataEndIndex:T},x({props:S.props,dataStartIndex:_,dataEndIndex:T,updateId:D},S.state))}),S.triggerSyncEvent({dataStartIndex:_,dataEndIndex:T})}}),Ft(S,"handleMouseEnter",function(E){var _=S.getMouseInfo(E);if(_){var T=$e($e({},_),{},{isTooltipActive:!0});S.setState(T),S.triggerSyncEvent(T);var D=S.props.onMouseEnter;Rt(D)&&D(T,E)}}),Ft(S,"triggeredAfterMouseMove",function(E){var _=S.getMouseInfo(E),T=_?$e($e({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(T),S.triggerSyncEvent(T);var D=S.props.onMouseMove;Rt(D)&&D(T,E)}),Ft(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ft(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Ft(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),Ft(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};S.setState(_),S.triggerSyncEvent(_);var T=S.props.onMouseLeave;Rt(T)&&T(_,E)}),Ft(S,"handleOuterEvent",function(E){var _=Hq(E),T=qa(S.props,"".concat(_));if(_&&Rt(T)){var D,F;/.*touch.*/i.test(_)?F=S.getMouseInfo(E.changedTouches[0]):F=S.getMouseInfo(E),T((D=F)!==null&&D!==void 0?D:{},E)}}),Ft(S,"handleClick",function(E){var _=S.getMouseInfo(E);if(_){var T=$e($e({},_),{},{isTooltipActive:!0});S.setState(T),S.triggerSyncEvent(T);var D=S.props.onClick;Rt(D)&&D(T,E)}}),Ft(S,"handleMouseDown",function(E){var _=S.props.onMouseDown;if(Rt(_)){var T=S.getMouseInfo(E);_(T,E)}}),Ft(S,"handleMouseUp",function(E){var _=S.props.onMouseUp;if(Rt(_)){var T=S.getMouseInfo(E);_(T,E)}}),Ft(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ft(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),Ft(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),Ft(S,"handleDoubleClick",function(E){var _=S.props.onDoubleClick;if(Rt(_)){var T=S.getMouseInfo(E);_(T,E)}}),Ft(S,"handleContextMenu",function(E){var _=S.props.onContextMenu;if(Rt(_)){var T=S.getMouseInfo(E);_(T,E)}}),Ft(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&pw.emit(mw,S.props.syncId,E,S.eventEmitterSymbol)}),Ft(S,"applySyncEvent",function(E){var _=S.props,T=_.layout,D=_.syncMethod,F=S.state.updateId,P=E.dataStartIndex,I=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState($e({dataStartIndex:P,dataEndIndex:I},x({props:S.props,dataStartIndex:P,dataEndIndex:I,updateId:F},S.state)));else if(E.activeTooltipIndex!==void 0){var B=E.chartX,z=E.chartY,Y=E.activeTooltipIndex,re=S.state,X=re.offset,ne=re.tooltipTicks;if(!X)return;if(typeof D=="function")Y=D(ne,E);else if(D==="value"){Y=-1;for(var Z=0;Z<ne.length;Z++)if(ne[Z].value===E.activeLabel){Y=Z;break}}var me=$e($e({},X),{},{x:X.left,y:X.top}),G=Math.min(B,me.x+me.width),L=Math.min(z,me.y+me.height),ee=ne[Y]&&ne[Y].value,te=g2(S.state,S.props.data,Y),J=ne[Y]?{x:T==="horizontal"?ne[Y].coordinate:G,y:T==="horizontal"?L:ne[Y].coordinate}:hF;S.setState($e($e({},E),{},{activeLabel:ee,activeCoordinate:J,activePayload:te,activeTooltipIndex:Y}))}else S.setState(E)}),Ft(S,"renderCursor",function(E){var _,T=S.state,D=T.isTooltipActive,F=T.activeCoordinate,P=T.activePayload,I=T.offset,B=T.activeTooltipIndex,z=T.tooltipAxisBandSize,Y=S.getTooltipEventType(),re=(_=E.props.active)!==null&&_!==void 0?_:D,X=S.props.layout,ne=E.key||"_recharts-cursor";return de.createElement(gie,{key:ne,activeCoordinate:F,activePayload:P,activeTooltipIndex:B,chartName:r,element:E,isActive:re,layout:X,offset:I,tooltipAxisBandSize:z,tooltipEventType:Y})}),Ft(S,"renderPolarAxis",function(E,_,T){var D=qa(E,"type.axisType"),F=qa(S.state,"".concat(D,"Map")),P=E.type.defaultProps,I=P!==void 0?$e($e({},P),E.props):E.props,B=F&&F[I["".concat(D,"Id")]];return U.cloneElement(E,$e($e({},B),{},{className:Ht(D,B.className),key:E.key||"".concat(_,"-").concat(T),ticks:Si(B,!0)}))}),Ft(S,"renderPolarGrid",function(E){var _=E.props,T=_.radialLines,D=_.polarAngles,F=_.polarRadius,P=S.state,I=P.radiusAxisMap,B=P.angleAxisMap,z=po(I),Y=po(B),re=Y.cx,X=Y.cy,ne=Y.innerRadius,Z=Y.outerRadius;return U.cloneElement(E,{polarAngles:Array.isArray(D)?D:Si(Y,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray(F)?F:Si(z,!0).map(function(me){return me.coordinate}),cx:re,cy:X,innerRadius:ne,outerRadius:Z,key:E.key||"polar-grid",radialLines:T})}),Ft(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,_=S.props,T=_.children,D=_.width,F=_.height,P=S.props.margin||{},I=D-(P.left||0)-(P.right||0),B=HM({children:T,formattedGraphicalItems:E,legendWidth:I,legendContent:d});if(!B)return null;var z=B.item,Y=CP(B,xie);return U.cloneElement(z,$e($e({},Y),{},{chartWidth:D,chartHeight:F,margin:P,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Ft(S,"renderTooltip",function(){var E,_=S.props,T=_.children,D=_.accessibilityLayer,F=Ra(T,Pr);if(!F)return null;var P=S.state,I=P.isTooltipActive,B=P.activeCoordinate,z=P.activePayload,Y=P.activeLabel,re=P.offset,X=(E=F.props.active)!==null&&E!==void 0?E:I;return U.cloneElement(F,{viewBox:$e($e({},re),{},{x:re.left,y:re.top}),active:X,label:Y,payload:X?z:[],coordinate:B,accessibilityLayer:D})}),Ft(S,"renderBrush",function(E){var _=S.props,T=_.margin,D=_.data,F=S.state,P=F.offset,I=F.dataStartIndex,B=F.dataEndIndex,z=F.updateId;return U.cloneElement(E,{key:E.key||"_recharts-brush",onChange:O0(S.handleBrushChange,E.props.onChange),data:D,x:et(E.props.x)?E.props.x:P.left,y:et(E.props.y)?E.props.y:P.top+P.height+P.brushBottom-(T.bottom||0),width:et(E.props.width)?E.props.width:P.width,startIndex:I,endIndex:B,updateId:"brush-".concat(z)})}),Ft(S,"renderReferenceElement",function(E,_,T){if(!E)return null;var D=S,F=D.clipPathId,P=S.state,I=P.xAxisMap,B=P.yAxisMap,z=P.offset,Y=E.type.defaultProps||{},re=E.props,X=re.xAxisId,ne=X===void 0?Y.xAxisId:X,Z=re.yAxisId,me=Z===void 0?Y.yAxisId:Z;return U.cloneElement(E,{key:E.key||"".concat(_,"-").concat(T),xAxis:I[ne],yAxis:B[me],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:F})}),Ft(S,"renderActivePoints",function(E){var _=E.item,T=E.activePoint,D=E.basePoint,F=E.childIndex,P=E.isRange,I=[],B=_.props.key,z=_.item.type.defaultProps!==void 0?$e($e({},_.item.type.defaultProps),_.item.props):_.item.props,Y=z.activeDot,re=z.dataKey,X=$e($e({index:F,dataKey:re,cx:T.x,cy:T.y,r:4,fill:BN(_.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},At(Y,!1)),op(Y));return I.push(N.renderActiveDot(Y,X,"".concat(B,"-activePoint-").concat(F))),D?I.push(N.renderActiveDot(Y,$e($e({},X),{},{cx:D.x,cy:D.y}),"".concat(B,"-basePoint-").concat(F))):P&&I.push(null),I}),Ft(S,"renderGraphicChild",function(E,_,T){var D=S.filterFormatItem(E,_,T);if(!D)return null;var F=S.getTooltipEventType(),P=S.state,I=P.isTooltipActive,B=P.tooltipAxis,z=P.activeTooltipIndex,Y=P.activeLabel,re=S.props.children,X=Ra(re,Pr),ne=D.props,Z=ne.points,me=ne.isRange,G=ne.baseLine,L=D.item.type.defaultProps!==void 0?$e($e({},D.item.type.defaultProps),D.item.props):D.item.props,ee=L.activeDot,te=L.hide,J=L.activeBar,he=L.activeShape,Se=!!(!te&&I&&X&&(ee||J||he)),Oe={};F!=="axis"&&X&&X.props.trigger==="click"?Oe={onClick:O0(S.handleItemMouseEnter,E.props.onClick)}:F!=="axis"&&(Oe={onMouseLeave:O0(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:O0(S.handleItemMouseEnter,E.props.onMouseEnter)});var pe=U.cloneElement(E,$e($e({},D.props),Oe));function xe(Pt){return typeof B.dataKey=="function"?B.dataKey(Pt.payload):null}if(Se)if(z>=0){var Fe,O;if(B.dataKey&&!B.allowDuplicatedCategory){var be=typeof B.dataKey=="function"?xe:"payload.".concat(B.dataKey.toString());Fe=ip(Z,be,Y),O=me&&G&&ip(G,be,Y)}else Fe=Z?.[z],O=me&&G&&G[z];if(he||J){var De=E.props.activeIndex!==void 0?E.props.activeIndex:z;return[U.cloneElement(E,$e($e($e({},D.props),Oe),{},{activeIndex:De})),null,null]}if(!zt(Fe))return[pe].concat(du(S.renderActivePoints({item:D,activePoint:Fe,basePoint:O,childIndex:z,isRange:me})))}else{var qe,rt=(qe=S.getItemByXY(S.state.activeCoordinate))!==null&&qe!==void 0?qe:{graphicalItem:pe},Be=rt.graphicalItem,Je=Be.item,Xt=Je===void 0?E:Je,Ce=Be.childIndex,Me=$e($e($e({},D.props),Oe),{},{activeIndex:Ce});return[U.cloneElement(Xt,Me),null,null]}return me?[pe,null,null]:[pe,null]}),Ft(S,"renderCustomized",function(E,_,T){return U.cloneElement(E,$e($e({key:"recharts-customized-".concat(T)},S.props),S.state))}),Ft(S,"renderMap",{CartesianGrid:{handler:R0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:R0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:R0},YAxis:{handler:R0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((j=k.id)!==null&&j!==void 0?j:yu("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=U5(S.triggeredAfterMouseMove,(A=k.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return Tie(N,v),Sie(N,[{key:"componentDidMount",value:function(){var j,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,A=j.children,S=j.data,E=j.height,_=j.layout,T=Ra(A,Pr);if(T){var D=T.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,P=g2(this.state,S,D,F),I=this.state.tooltipTicks[D].coordinate,B=(this.state.offset.top+E)/2,z=_==="horizontal",Y=z?{x:I,y:B}:{y:I,x:B},re=this.state.formattedGraphicalItems.find(function(ne){var Z=ne.item;return Z.type.name==="Scatter"});re&&(Y=$e($e({},Y),re.props.points[D].tooltipPosition),P=re.props.points[D].tooltipPayload);var X={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:F,activePayload:P,activeCoordinate:Y};this.setState(X),this.renderCursor(T),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(j){Jw([Ra(j.children,Pr)],[Ra(this.props.children,Pr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=Ra(this.props.children,Pr);if(j&&typeof j.props.shared=="boolean"){var A=j.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),E=TV(S),_={chartX:Math.round(j.pageX-E.left),chartY:Math.round(j.pageY-E.top)},T=S.width/A.offsetWidth||1,D=this.inRange(_.chartX,_.chartY,T);if(!D)return null;var F=this.state,P=F.xAxisMap,I=F.yAxisMap,B=this.getTooltipEventType(),z=AP(this.state,this.props.data,this.props.layout,D);if(B!=="axis"&&P&&I){var Y=po(P).scale,re=po(I).scale,X=Y&&Y.invert?Y.invert(_.chartX):null,ne=re&&re.invert?re.invert(_.chartY):null;return $e($e({},_),{},{xValue:X,yValue:ne},z)}return z?$e($e({},_),z):null}},{key:"inRange",value:function(j,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,_=j/S,T=A/S;if(E==="horizontal"||E==="vertical"){var D=this.state.offset,F=_>=D.left&&_<=D.left+D.width&&T>=D.top&&T<=D.top+D.height;return F?{x:_,y:T}:null}var P=this.state,I=P.angleAxisMap,B=P.radiusAxisMap;if(I&&B){var z=po(I);return AO({x:_,y:T},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,A=this.getTooltipEventType(),S=Ra(j,Pr),E={};S&&A==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=op(this.props,this.handleOuterEvent);return $e($e({},_),E)}},{key:"addListener",value:function(){pw.on(mw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){pw.removeListener(mw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,A,S){for(var E=this.state.formattedGraphicalItems,_=0,T=E.length;_<T;_++){var D=E[_];if(D.item===j||D.props.key===j.key||A===Ci(D.item.type)&&S===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,A=this.state.offset,S=A.left,E=A.top,_=A.height,T=A.width;return de.createElement("defs",null,de.createElement("clipPath",{id:j},de.createElement("rect",{x:S,y:E,height:_,width:T})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(A,S){var E=EP(S,2),_=E[0],T=E[1];return $e($e({},A),{},Ft({},_,T.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(A,S){var E=EP(S,2),_=E[0],T=E[1];return $e($e({},A),{},Ft({},_,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[j])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(j){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[j])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(j){var A=this.state,S=A.formattedGraphicalItems,E=A.activeItem;if(S&&S.length)for(var _=0,T=S.length;_<T;_++){var D=S[_],F=D.props,P=D.item,I=P.type.defaultProps!==void 0?$e($e({},P.type.defaultProps),P.props):P.props,B=Ci(P.type);if(B==="Bar"){var z=(F.data||[]).find(function(ne){return Gee(j,ne)});if(z)return{graphicalItem:D,payload:z}}else if(B==="RadialBar"){var Y=(F.data||[]).find(function(ne){return AO(j,ne)});if(Y)return{graphicalItem:D,payload:Y}}else if(sg(D,E)||ig(D,E)||Mh(D,E)){var re=Ere({graphicalItem:D,activeTooltipItem:E,itemData:I.data}),X=I.activeIndex===void 0?re:I.activeIndex;return{graphicalItem:$e($e({},D),{},{childIndex:X}),payload:Mh(D,E)?I.data[re]:D.props.data[re]}}}return null}},{key:"render",value:function(){var j=this;if(!UC(this))return null;var A=this.props,S=A.children,E=A.className,_=A.width,T=A.height,D=A.style,F=A.compact,P=A.title,I=A.desc,B=CP(A,yie),z=At(B,!1);if(F)return de.createElement(lP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},de.createElement(Zw,Tc({},z,{width:_,height:T,title:P,desc:I}),this.renderClipPath(),qC(S,this.renderMap)));if(this.props.accessibilityLayer){var Y,re;z.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,z.role=(re=this.props.role)!==null&&re!==void 0?re:"application",z.onKeyDown=function(ne){j.accessibilityManager.keyboardEvent(ne)},z.onFocus=function(){j.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return de.createElement(lP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},de.createElement("div",Tc({className:Ht("recharts-wrapper",E),style:$e({position:"relative",cursor:"default",width:_,height:T},D)},X,{ref:function(Z){j.container=Z}}),de.createElement(Zw,Tc({},z,{width:_,height:T,title:P,desc:I,style:Mie}),this.renderClipPath(),qC(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(U.Component);Ft(b,"displayName",r),Ft(b,"defaultProps",$e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Ft(b,"getDerivedStateFromProps",function(v,N){var k=v.dataKey,j=v.data,A=v.children,S=v.width,E=v.height,_=v.layout,T=v.stackOffset,D=v.margin,F=N.dataStartIndex,P=N.dataEndIndex;if(N.updateId===void 0){var I=OP(v);return $e($e($e({},I),{},{updateId:0},x($e($e({props:v},I),{},{updateId:0}),N)),{},{prevDataKey:k,prevData:j,prevWidth:S,prevHeight:E,prevLayout:_,prevStackOffset:T,prevMargin:D,prevChildren:A})}if(k!==N.prevDataKey||j!==N.prevData||S!==N.prevWidth||E!==N.prevHeight||_!==N.prevLayout||T!==N.prevStackOffset||!Pc(D,N.prevMargin)){var B=OP(v),z={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Y=$e($e({},AP(N,j,_)),{},{updateId:N.updateId+1}),re=$e($e($e({},B),z),Y);return $e($e($e({},re),x($e({props:v},re),N)),{},{prevDataKey:k,prevData:j,prevWidth:S,prevHeight:E,prevLayout:_,prevStackOffset:T,prevMargin:D,prevChildren:A})}if(!Jw(A,N.prevChildren)){var X,ne,Z,me,G=Ra(A,tu),L=G&&(X=(ne=G.props)===null||ne===void 0?void 0:ne.startIndex)!==null&&X!==void 0?X:F,ee=G&&(Z=(me=G.props)===null||me===void 0?void 0:me.endIndex)!==null&&Z!==void 0?Z:P,te=L!==F||ee!==P,J=!zt(j),he=J&&!te?N.updateId:N.updateId+1;return $e($e({updateId:he},x($e($e({props:v},N),{},{updateId:he,dataStartIndex:L,dataEndIndex:ee}),N)),{},{prevChildren:A,dataStartIndex:L,dataEndIndex:ee})}return null}),Ft(b,"renderActiveDot",function(v,N,k){var j;return U.isValidElement(v)?j=U.cloneElement(v,N):Rt(v)?j=v(N):j=de.createElement(of,N),de.createElement(ir,{className:"recharts-active-dot",key:k},j)});var y=U.forwardRef(function(N,k){return de.createElement(b,Tc({},N,{ref:k}))});return y.displayName=b.displayName,y},Bd=fg({chartName:"LineChart",GraphicalChild:Is,axisComponents:[{axisType:"xAxis",AxisComp:xn},{axisType:"yAxis",AxisComp:on}],formatAxisMap:IR}),Ws=fg({chartName:"BarChart",GraphicalChild:Gt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:xn},{axisType:"yAxis",AxisComp:on}],formatAxisMap:IR}),pF=fg({chartName:"PieChart",GraphicalChild:ai,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Su},{axisType:"radiusAxis",AxisComp:ku}],formatAxisMap:eR,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Kie=fg({chartName:"RadarChart",GraphicalChild:fl,axisComponents:[{axisType:"angleAxis",AxisComp:Su},{axisType:"radiusAxis",AxisComp:ku}],formatAxisMap:eR,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const IP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function Wie({context:e}){const t=U.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,inventory:d.inventory+u.totalCost})}),e.overheads.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,overhead:d.overhead+u.amount})}),Array.from(l.entries()).map(([u,d])=>({date:new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:u,inventory:d.inventory,overhead:d.overhead,total:d.inventory+d.overhead})).sort((u,d)=>u.fullDate.localeCompare(d.fullDate))},[e.inventory,e.overheads]),r=U.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.totalCost)}),e.overheads.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.amount)}),Array.from(l.entries()).map(([u,d])=>({name:wm[u]||O2[u]||u,value:d})).sort((u,d)=>d.value-u.value)},[e.inventory,e.overheads]),n=U.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.itemName)||0;l.set(u.itemName,d+u.totalCost)}),Array.from(l.entries()).map(([u,d])=>({name:u,value:d})).sort((u,d)=>d.value-u.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,u)=>l+u.totalCost,0),i=e.overheads.reduce((l,u)=>l+u.amount,0),o=s+i;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(vc,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Q7,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Qr,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),a.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),a.jsx(En,{width:"100%",height:300,children:a.jsxs(Bd,{data:t,children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{dataKey:"date"}),a.jsx(on,{}),a.jsx(Pr,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(qn,{}),a.jsx(Is,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),a.jsx(Is,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),a.jsx(Is,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),a.jsx(En,{width:"100%",height:300,children:a.jsxs(pF,{children:[a.jsx(ai,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:u})=>`${l} (${(u*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,u)=>a.jsx(zc,{fill:IP[u%IP.length]},`cell-${u}`))}),a.jsx(Pr,{formatter:l=>`${l.toLocaleString()}`})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),a.jsx(En,{width:"100%",height:300,children:a.jsxs(Ws,{data:n,layout:"vertical",children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{type:"number"}),a.jsx(on,{dataKey:"name",type:"category",width:100}),a.jsx(Pr,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(Gt,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function DP({context:e,selectedStoreId:t}){const[r,n]=U.useState(new Date().toISOString().split("T")[0]),[s,i]=U.useState({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:""}),[o,l]=U.useState(!1),[u,d]=U.useState(null),f=e.user?.role==="cluster_head",p=e.user?.role==="manager",m=e.user?.designation==="store_incharge",x=p&&!m,b=m,[y,v]=U.useState([]),[N,k]=U.useState([]),[j,A]=U.useState(!1);U.useEffect(()=>{S()},[]);const S=async()=>{A(!0);try{const be=(await So()).filter(De=>De.type==="contract");v(be)}catch(O){console.error("Error loading contract workers:",O)}finally{A(!1)}};U.useEffect(()=>{E()},[r,y]);const E=async()=>{if(y.length!==0)try{const be=(await jo()).filter(Je=>Je.date===r),De=y.map(Je=>Je.id),qe=be.filter(Je=>De.includes(Je.employeeId)),rt=new Map;qe.forEach(Je=>{const Xt=rt.get(Je.employeeId);(!Xt||new Date(Je.createdAt)>new Date(Xt.createdAt))&&rt.set(Je.employeeId,Je)});const Be=Array.from(rt.values()).map(Je=>({employeeId:Je.employeeId,amount:Je.amount.toString()}));k(Be)}catch(O){console.error("Error loading payouts for date:",O)}},_=()=>{k([...N,{employeeId:"",amount:""}])},T=O=>{k(N.filter((be,De)=>De!==O))},D=(O,be,De)=>{const qe=[...N];qe[O][be]=De,k(qe)},F=U.useMemo(()=>N.reduce((O,be)=>O+(parseFloat(be.amount)||0),0),[N]),P=U.useMemo(()=>{const O=t||e.user?.storeId;console.log(" SalesManagement - effectiveStoreId:",O),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",r),console.log(" SalesManagement - all sales data:",e.salesData.map(qe=>({id:qe.id.substring(0,8),date:qe.date,storeId:qe.storeId,offlineSales:qe.offlineSales})));const be=O?e.salesData.filter(qe=>qe.storeId===O):e.salesData;console.log(" SalesManagement - filtered sales:",be.map(qe=>({id:qe.id.substring(0,8),date:qe.date,storeId:qe.storeId})));const De=be.find(qe=>qe.date===r);return console.log(" SalesManagement - salesForDate result:",De?{id:De.id.substring(0,8),date:De.date,storeId:De.storeId}:"NOT FOUND"),De},[e.salesData,r,t,e.user?.storeId]),I=U.useMemo(()=>e.salesData.length===0||!P&&e.salesData.every(O=>O.date>r),[e.salesData,r,P]),B=U.useMemo(()=>new Date(r).getDate()===1,[r]),z=U.useMemo(()=>new Date(r).getDay()===5,[r]),Y=U.useMemo(()=>{const O=new Date(r);O.setDate(O.getDate()-1);const be=O.toISOString().split("T")[0];return e.salesData.find(De=>De.date===be)},[e.salesData,r]),re=U.useMemo(()=>{const O=e.inventory.filter(De=>De.date===r).reduce((De,qe)=>De+qe.totalCost,0),be=e.overheads.filter(De=>De.date===r).reduce((De,qe)=>De+qe.amount,0);return O+be},[e.inventory,e.overheads,r]),X=(O,be,De,qe)=>O+be-De-qe,ne=U.useMemo(()=>{const O=parseFloat(s.previousCashInHand)||0,be=parseFloat(s.cashAmount)||0;return X(O,be,re,F)},[s.previousCashInHand,s.cashAmount,F,re]),Z=U.useMemo(()=>{const O=parseFloat(s.actualCashInHand)||0;return O===0?0:O-ne},[s.actualCashInHand,ne]),me=Math.abs(Z)>500,G=U.useMemo(()=>{const O=e.salesData.filter(De=>De.date<=r).reduce((De,qe)=>De+(qe.paytmAmount??0),0),be=e.salesData.filter(De=>De.date<=r).reduce((De,qe)=>De+(qe.usedOnlineMoney??0),0);return O-be},[e.salesData,r]);U.useEffect(()=>{if(P)i({offlineSales:(P.offlineSales??0).toString(),paytmAmount:(P.paytmAmount??0).toString(),cashAmount:(P.cashAmount??0).toString(),onlineSales:(P.onlineSales??0).toString(),employeeSalary:(P.employeeSalary??0).toString(),previousCashInHand:(P.previousCashInHand??0).toString(),usedOnlineMoney:(P.usedOnlineMoney??0).toString(),actualCashInHand:(P.actualCashInHand??0).toString()}),l(!0),d(P.id);else{let O=0;Y&&(O=Y.actualCashInHand??0),i({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"0",previousCashInHand:O.toString(),usedOnlineMoney:"0",actualCashInHand:""}),l(!1),d(null)}},[r,P,Y]);const L=async O=>{O.preventDefault();const be=parseFloat(s.actualCashInHand)||0,De=be-ne,qe=m,rt={date:r,offlineSales:parseFloat(s.offlineSales)||0,paytmAmount:parseFloat(s.paytmAmount)||0,cashAmount:parseFloat(s.cashAmount)||0,onlineSales:parseFloat(s.onlineSales)||0,employeeSalary:F,previousCashInHand:parseFloat(s.previousCashInHand)||0,usedOnlineMoney:parseFloat(s.usedOnlineMoney)||0,actualCashInHand:be,cashOffset:De,approvalRequired:me,approvalStatus:qe?"pending":"approved",createdBy:e.user?.employeeId||e.user?.email||"unknown",approvedBy:qe?P?.approvedBy||null:e.user?.employeeId||e.user?.email||"self",approvedAt:qe?P?.approvedAt||null:new Date().toISOString(),approvalRequested:P?.approvalRequested||!1,approvalRequestedAt:P?.approvalRequestedAt||null,requestedCashInHand:P?.requestedCashInHand||null,requestedOffset:P?.requestedOffset||null,rejectedBy:P?.rejectedBy||null,rejectedAt:P?.rejectedAt||null,rejectionReason:P?.rejectionReason||null,storeId:t||e.user?.storeId||void 0};try{if(o&&u?await e.updateSalesData(u,rt):await e.addSalesData(rt),N.length>0){const Be=await jo(),Je=y.map(Me=>Me.id),Xt=Be.filter(Me=>Me.date===r&&Je.includes(Me.employeeId));for(const Me of Xt)await ap(Me.id),console.log("Deleted old payout:",Me.id);const Ce=N.filter(Me=>Me.employeeId&&Me.amount).map(Me=>{const Pt=y.find(We=>We.id===Me.employeeId);return{id:crypto.randomUUID(),employeeId:Me.employeeId,employeeName:Pt?.name||"",amount:parseFloat(Me.amount),date:r,createdAt:new Date().toISOString()}});Ce.length>0&&(await W2(Ce),console.log("Contract worker payouts synced to payroll:",Ce))}else{const Be=await jo(),Je=y.map(Ce=>Ce.id),Xt=Be.filter(Ce=>Ce.date===r&&Je.includes(Ce.employeeId));for(const Ce of Xt)await ap(Ce.id),console.log("Deleted payout (no workers entered):",Ce.id)}alert("Sales data and contract worker payouts saved successfully!")}catch(Be){console.error("Error saving sales data:",Be),alert("Failed to save sales data. Please try again.")}},ee=async()=>{if(!u)return;const O=parseFloat(s.actualCashInHand)||0,be=O-ne;if(confirm(`Request approval for cash discrepancy of ${Math.abs(be).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(u,O,be),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},te=async O=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(O),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},J=async O=>{const be=prompt("Please enter reason for rejection:");if(be)try{await e.rejectDiscrepancy(O,be),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},he=parseFloat(s.onlineSales)||0,Se=parseFloat(s.offlineSales)||0,Oe=parseFloat(s.paytmAmount)||0,pe=parseFloat(s.cashAmount)||0,xe=Oe+pe,Fe=Math.abs(Se-xe)>.01;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Im,{selectedDate:r,onDateChange:n}),z&&e.isManager&&a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gn,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),f&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(O=>O.approvalRequested&&!O.approvedBy&&!O.rejectedBy).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gn,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Discrepancy Approval Requests"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(O=>O.approvalRequested&&!O.approvedBy&&!O.rejectedBy).map(O=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(O.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Expected Cash: ",(O.actualCashInHand-O.cashOffset).toFixed(2)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested Cash: ",(O.requestedCashInHand||0).toFixed(2)]}),a.jsxs("p",{className:"text-sm mt-1",children:["Discrepancy: ",a.jsxs("span",{className:(O.requestedOffset||0)>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[(O.requestedOffset||0)>0?"+":"","",(O.requestedOffset||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>te(O.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>J(O.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(wn,{className:"w-4 h-4"}),"Reject"]})]})]},O.id))})]}),e.salesData.filter(O=>O.approvalRequired&&!O.approvedBy&&!O.approvalRequested).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gn,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(O=>O.approvalRequired&&!O.approvedBy&&!O.approvalRequested).map(O=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900",children:new Date(O.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",a.jsxs("span",{className:O.cashOffset>0?"text-green-600":"text-red-600",children:[O.cashOffset>0?"+":"","",O.cashOffset.toFixed(2)]})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(O.actualCashInHand-O.cashOffset).toFixed(2)," | Actual: ",O.actualCashInHand.toFixed(2)]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveSalesData(O.id),alert("Approved successfully!")}catch{alert("Failed to approve")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve"]})]},O.id))})]}),e.salesData.filter(O=>O.approvalRequired&&!O.approvedBy||O.approvalRequested&&!O.approvedBy&&!O.rejectedBy).length===0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gn,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."})]})]}),x&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(O=>O.approvalStatus==="pending"&&O.createdBy!==e.user?.employeeId).length>0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Fa,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(O=>O.approvalStatus==="pending"&&O.createdBy!==e.user?.employeeId).map(O=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(O.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",O.createdBy]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",(O.offlineSales+O.onlineSales).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",O.actualCashInHand.toFixed(2)]})]})]}),Math.abs(O.cashOffset)>0&&a.jsxs("p",{className:"text-sm mt-1",children:["Cash Offset: ",a.jsxs("span",{className:O.cashOffset>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[O.cashOffset>0?"+":"","",O.cashOffset.toFixed(2)]})]})]}),a.jsxs("button",{onClick:async()=>{if(confirm(`Approve sales data for ${new Date(O.date).toLocaleDateString()}?`))try{await e.approveSalesData(O.id),alert("Sales data approved successfully!")}catch{alert("Failed to approve sales data")}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve Sales Data"]})]},O.id))})]}),e.salesData.filter(O=>O.approvalStatus==="pending"&&O.createdBy!==e.user?.employeeId).length===0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Fa,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]}),m&&P&&P.approvalStatus==="pending"&&a.jsxs("div",{className:"mt-6 bg-[#FFF9E6] border-2 border-[#FFD54F] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gn,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsxs("p",{className:"text-gray-700",children:["Your sales entry for ",new Date(P.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from the Operations Manager."]})]}),m&&P&&P.approvalStatus==="approved"&&a.jsxs("div",{className:"mt-6 bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(er,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Approved"})]}),a.jsxs("p",{className:"text-gray-700",children:[" Your sales entry for ",new Date(P.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," has been approved by ",P.approvedBy,"."]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(An,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Entry"})]}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#D4E6F1] to-[#AED6F1] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(j9,{className:"w-5 h-5 text-[#5499C7]"}),"Offline Sales"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Offline Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.offlineSales,onChange:O=>i({...s,offlineSales:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.paytmAmount,onChange:O=>i({...s,paytmAmount:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.cashAmount,onChange:O=>i({...s,cashAmount:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]})]}),Fe&&a.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg text-sm",children:[" Payment mode total (",xe.toFixed(2),") doesn't match offline sales (",Se.toFixed(2),")"]}),!Fe&&Se>0&&a.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[a.jsx(er,{className:"w-4 h-4"}),"Payment modes match total sales"]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#FFE6CC] to-[#FFDAB9] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-[#E8A87C]"}),"Online Sales"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Online Sales (Zomato + Swiggy) ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.onlineSales,onChange:O=>i({...s,onlineSales:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E0F2F7] to-[#B3E5FC] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(C7,{className:"w-5 h-5 text-[#4FC3F7]"}),"Used Online Money"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount Used from Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.usedOnlineMoney,onChange:O=>i({...s,usedOnlineMoney:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!b}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter amount if Paytm balance was used for expenses"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[a.jsx(yn,{className:"w-5 h-5 text-purple-600"}),"Contract Worker Payouts"]}),e.isManager&&a.jsxs("button",{type:"button",onClick:_,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[a.jsx(wo,{className:"w-4 h-4"}),"Add Worker"]})]}),j?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):y.length===0?a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-gray-700",children:a.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):a.jsxs("div",{className:"space-y-3",children:[N.length===0?a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):N.map((O,be)=>{const De=y.find(qe=>qe.id===O.employeeId);return a.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-3 space-y-2",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Worker"}),a.jsxs("select",{value:O.employeeId,onChange:qe=>D(be,"employeeId",qe.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",disabled:!e.isManager,required:!0,children:[a.jsx("option",{value:"",children:"Choose a worker..."}),y.map(qe=>a.jsxs("option",{value:qe.id,children:[qe.name," (",qe.employeeId,")"]},qe.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount Paid ()"}),a.jsx("input",{type:"number",step:"0.01",value:O.amount,onChange:qe=>D(be,"amount",qe.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",placeholder:De?.dailyRate?`Suggested: ${De.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),De?.dailyRate&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",De.dailyRate]})]})]}),e.isManager&&a.jsx("button",{type:"button",onClick:()=>T(be),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:a.jsx(wn,{className:"w-4 h-4"})})]})},be)}),N.length>0&&a.jsxs("div",{className:"bg-purple-600 text-white rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Total Contract Payouts:"}),a.jsxs("span",{className:"text-lg",children:["",F.toFixed(2)]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50 p-2 rounded border border-purple-200",children:[" ",a.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),F>0&&a.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100 p-2 rounded border border-purple-300 flex items-center gap-1",children:[" ",a.jsx("strong",{children:"Cash Impact:"})," ",F.toFixed(2)," will be deducted from offline cash when calculating cash in hand."]})]}),(I||B)&&a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(bi,{className:"w-5 h-5 text-amber-600"}),I?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Left ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.previousCashInHand,onChange:O=>i({...s,previousCashInHand:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!b,required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!I&&!B&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[a.jsxs("h3",{className:"text-gray-900 mb-2 flex items-center gap-2",children:[a.jsx(bi,{className:"w-5 h-5 text-gray-600"}),"Cash Left from Previous Day (Auto-Calculated)"]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("p",{className:"text-2xl text-gray-900",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" This is automatically calculated from previous day's cash left after deducting expenses and salaries.",B&&" You can edit this only on the 1st of the month."]})]})]}),!I&&a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(bi,{className:"w-5 h-5 text-teal-600"}),"Cash Reconciliation"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Expected Cash in Hand"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",ne.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous Cash: ",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + Cash Received: ",pe.toFixed(2)," - Expenses: ",re.toFixed(2)," - Contract Payouts: ",F.toFixed(2)]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View expense breakdown"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[a.jsxs("p",{children:["Inventory Cost: ",e.inventory.filter(O=>O.date===r).reduce((O,be)=>O+be.totalCost,0).toFixed(2)," (",e.inventory.filter(O=>O.date===r).length," items)"]}),a.jsxs("p",{children:["Overhead Cost: ",e.overheads.filter(O=>O.date===r).reduce((O,be)=>O+be.amount,0).toFixed(2)," (",e.overheads.filter(O=>O.date===r).length," items)"]}),a.jsxs("p",{className:"font-medium mt-1",children:["Total: ",re.toFixed(2)]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Actual Cash in Hand ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.actualCashInHand,onChange:O=>i({...s,actualCashInHand:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),s.actualCashInHand&&a.jsxs("div",{className:`rounded-lg p-3 border-2 ${Math.abs(Z)===0?"bg-green-100 border-green-300":me?"bg-red-100 border-red-300":"bg-yellow-100 border-yellow-300"}`,children:[a.jsx("p",{className:"text-sm font-medium",children:Math.abs(Z)===0?a.jsxs("span",{className:"text-green-700 flex items-center gap-2",children:[a.jsx(er,{className:"w-4 h-4"}),"Perfect Match! No discrepancy."]}):me?a.jsxs("span",{className:"text-red-700 flex items-center gap-2",children:[a.jsx(gn,{className:"w-4 h-4"}),"High Discrepancy: ",Z>0?"+":"","",Z.toFixed(2)]}):a.jsxs("span",{className:"text-yellow-700",children:["Small Offset: ",Z>0?"+":"","",Z.toFixed(2)]})}),me&&!P?.approvedBy&&!P?.approvalRequested&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Exceeds 500 limit - Save first, then request cluster head approval"}),P?.approvalRequested&&!P?.approvedBy&&!P?.rejectedBy&&a.jsxs("p",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[a.jsx(gn,{className:"w-3 h-3"}),"Approval pending from cluster head"]}),P?.approvedBy&&a.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[a.jsx(Fa,{className:"w-3 h-3"}),"Approved by: ",P.approvedBy]}),P?.rejectedBy&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[a.jsxs("p",{className:"flex items-center gap-1",children:[a.jsx(wn,{className:"w-3 h-3"}),"Rejected by: ",P.rejectedBy]}),P.rejectionReason&&a.jsxs("p",{className:"mt-1 italic",children:["Reason: ",P.rejectionReason]}),a.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})]})]})]}),b&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{type:"submit",disabled:Fe,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Update Sales Data":"Save Sales Data"}),o&&u&&me&&!P?.approvedBy&&!P?.approvalRequested&&a.jsxs("button",{type:"button",onClick:ee,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(gn,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),o&&P?.approvalRequested&&!P?.approvedBy&&!P?.rejectedBy&&a.jsx("div",{className:"w-full px-6 py-3 bg-orange-100 border-2 border-orange-300 text-orange-800 rounded-lg text-center",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#B8E6B8] to-[#A3D9A5] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(An,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Total Sales"})]}),a.jsxs("p",{className:"text-4xl",children:["",(Se+he).toLocaleString()]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/20 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Offline Sales:"}),a.jsxs("span",{children:["",Se.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{children:["",he.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#A8D8EA] to-[#93C5FD] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bi,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Payment Breakdown"})]}),a.jsxs("div",{className:"space-y-3 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Cash Received:"}),a.jsxs("span",{className:"text-2xl",children:["",pe.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Paytm Received:"}),a.jsxs("span",{className:"text-2xl",children:["",Oe.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/20",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{className:"text-xl",children:["",he.toLocaleString()]})]})]})]}),!I&&a.jsxs("div",{className:"bg-gradient-to-br from-[#D8B5FF] to-[#C7A7FF] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bi,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Cash Status"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:"Expected Cash"}),a.jsxs("p",{className:"text-3xl",children:["",ne.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + ",pe.toFixed(2)," - ",re.toFixed(2)," - ",F.toFixed(2)]})]}),s.actualCashInHand&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Actual Cash"}),a.jsxs("p",{className:"text-3xl",children:["",(parseFloat(s.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(Z)>0&&a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Difference"}),a.jsxs("p",{className:`text-2xl ${Z>0?"text-green-700":"text-red-700"}`,children:[Z>0?"+":"","",Z.toFixed(2)]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#C7A7FF] to-[#B794F4] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(S9,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),a.jsxs("p",{className:"text-4xl mb-4",children:["",G.toLocaleString()]}),a.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between text-green-700",children:[a.jsx("span",{children:"Total Paytm Received:"}),a.jsxs("span",{children:["",e.salesData.filter(O=>O.date<=r).reduce((O,be)=>O+(be.paytmAmount??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Total Used:"}),a.jsxs("span",{children:["",e.salesData.filter(O=>O.date<=r).reduce((O,be)=>O+(be.usedOnlineMoney??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[a.jsx("span",{children:"Used Today:"}),a.jsxs("span",{children:["",(parseFloat(s.usedOnlineMoney)||0).toLocaleString()]})]})]})]})]})]})]})}function mF({onClose:e,employees:t}){const[r,n]=U.useState([]),[s,i]=U.useState({}),[o,l]=U.useState(!1),[u,d]=U.useState(null);U.useEffect(()=>{const x=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");n(x);const b={};x.forEach(y=>{const v=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,N=`Bhandar@${y.employeeId}`;b[y.id]={email:v,password:N}}),i(b)},[t]);const f=(x,b,y)=>{i(v=>({...v,[x]:{...v[x],[b]:y}}))},p=async()=>{l(!0),d(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const x=r.map(v=>({name:v.name,email:s[v.id].email,password:s[v.id].password,employeeId:v.employeeId}));console.log("Creating accounts for employees:",x);const b=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`},body:JSON.stringify({employees:x})}),y=await b.json();if(console.log("Server response:",y),!b.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${b.status})`);d({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(x){console.error("Error creating employee accounts:",x),alert(`Failed to create employee accounts: ${x instanceof Error?x.message:String(x)}`)}finally{l(!1)}},m=()=>{const x=r.map(k=>({"Employee ID":k.employeeId,Name:k.name,Email:s[k.id].email,Password:s[k.id].password,"Monthly Salary":k.monthlySalary||0})),b=[Object.keys(x[0]).join(","),...x.map(k=>Object.values(k).join(","))].join(`
`),y=new Blob([b],{type:"text/csv"}),v=window.URL.createObjectURL(y),N=document.createElement("a");N.href=v,N.download="employee-credentials.csv",N.click(),window.URL.revokeObjectURL(v)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Vs,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[a.jsx(Ir,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:u.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),a.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[a.jsx(Xd,{className:"w-5 h-5"}),a.jsx("span",{children:"Accounts Prepared"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.deleted})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(Ir,{className:"w-5 h-5"}),a.jsx("span",{children:"Failed"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.failed})]})]}),a.jsx("div",{className:"space-y-2",children:u.details.map((x,b)=>a.jsx("div",{className:`p-3 rounded-lg border ${x.status==="created"?"bg-green-50 border-green-200":x.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:x.email}),a.jsxs("span",{className:"text-sm",children:[x.status==="created"&&a.jsx("span",{className:"text-green-700",children:" Created"}),x.status==="updated"&&a.jsx("span",{className:"text-blue-700",children:" Updated"}),x.error&&a.jsxs("span",{className:"text-red-700",children:[" ",x.error]})]})]})},b))}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),a.jsx("div",{className:"space-y-3",children:r.map(x=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm",children:x.name}),a.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",x.employeeId]})]}),x.email&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(Jd,{className:"w-3 h-3"}),"Email Address"]}),a.jsx("input",{type:"email",value:s[x.id]?.email||"",onChange:b=>f(x.id,"email",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(Iw,{className:"w-3 h-3"}),"Password"]}),a.jsx("input",{type:"text",value:s[x.id]?.password||"",onChange:b=>f(x.id,"password",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},x.id))})]})}),a.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!u&&a.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function Ea({value:e,onChange:t,label:r,className:n="",min:s,max:i}){const o=U.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},u=f=>f?new Date(f+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"Select date",d=n.includes("w-full");return a.jsxs("div",{className:d?"w-full":`flex items-center gap-2 ${n}`,children:[r&&a.jsx("label",{className:`text-sm text-gray-600 ${d?"block mb-2":"whitespace-nowrap"}`,children:r}),a.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${d?"w-full":"min-w-[160px]"}`,children:[a.jsx(wr,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0 pointer-events-none"}),a.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1 pointer-events-none",children:u(e)}),a.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})]})}const Vie=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Salary Payment</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function gF({userRole:e,selectedDate:t,userEmployeeId:r,userName:n,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,u]=U.useState("contract"),[d,f]=U.useState([]),[p,m]=U.useState([]),[x,b]=U.useState(!0),[y,v]=U.useState(!1),[N,k]=U.useState("current"),[j,A]=U.useState(""),[S,E]=U.useState(""),_=()=>{const Ce=new Date,Me=Ce.getFullYear(),Pt=Ce.getMonth(),We=new Date(Me,Pt+1,0),ut=`${Me}-${String(Pt+1).padStart(2,"0")}-01`,nt=We.getDate(),qt=`${Me}-${String(Pt+1).padStart(2,"0")}-${String(nt).padStart(2,"0")}`;return{start:ut,end:qt,monthName:Ce.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},T=()=>{const Ce=new Date,Me=Ce.getMonth()===0?Ce.getFullYear()-1:Ce.getFullYear(),Pt=Ce.getMonth()===0?11:Ce.getMonth()-1,We=new Date(Me,Pt,1),ut=new Date(Me,Pt+1,0),nt=`${Me}-${String(Pt+1).padStart(2,"0")}-01`,qt=ut.getDate(),ct=`${Me}-${String(Pt+1).padStart(2,"0")}-${String(qt).padStart(2,"0")}`;return{start:nt,end:ct,monthName:We.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},D=_(),F=T(),[P,I]=U.useState(!1),[B,z]=U.useState(null),[Y,re]=U.useState(!1),[X,ne]=U.useState({employeeIds:[],amount:"",date:t}),[Z,me]=U.useState(!1),[G,L]=U.useState(null),[ee,te]=U.useState(!1),J=U.useMemo(()=>{let Ce=d;return s&&(Ce=Ce.filter(Me=>Me.storeId===s||Me.storeId===null||Me.storeId===void 0)),i&&r&&(Ce=Ce.filter(Me=>Me.type==="contract"?!0:Me.type==="fulltime"?Me.inchargeId===r:!1)),Ce},[d,s,i,r]),he=U.useMemo(()=>{if(!s)return p;const Ce=J.map(Me=>Me.id);return p.filter(Me=>Ce.includes(Me.employeeId))},[p,J,s]),Se=U.useMemo(()=>{let Ce;if(N==="current")Ce=he.filter(Me=>Me.date>=D.start&&Me.date<=D.end);else if(N==="last")Ce=he.filter(Me=>Me.date>=F.start&&Me.date<=F.end);else{if(!j||!S)return[];Ce=he.filter(Me=>Me.date>=j&&Me.date<=S)}return Ce},[he,N,D,F,j,S]);U.useEffect(()=>{Oe()},[]);const Oe=async()=>{b(!0);try{console.log("Loading employees and payouts from server...");const[Ce,Me]=await Promise.all([So(),jo()]);console.log("Loaded employees:",Ce),console.log("Loaded payouts:",Me),f(Ce||[]),m(Me||[])}catch(Ce){console.error("Error loading payroll data:",Ce)}finally{b(!1)}},pe=async()=>{if(X.employeeIds.length===0||!X.amount){alert("Please select employees and enter amount");return}if(!y)try{v(!0);const Ce=X.employeeIds.map(Pt=>{const We=d.find(ut=>ut.id===Pt);return{id:crypto.randomUUID(),employeeId:Pt,employeeName:We?.name||"",amount:parseFloat(X.amount),date:X.date,createdAt:new Date().toISOString()}});console.log("Adding payouts:",Ce);const Me=await W2(Ce);console.log("Payouts added successfully:",Me),m([...p,...Ce]),re(!1),ne({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch(Ce){console.error("Error adding payout:",Ce);const Me=Ce instanceof Error?Ce.message:"Unknown error occurred";alert(`Failed to add payout: ${Me}`)}finally{v(!1)}},xe=async()=>{if(B)try{console.log("PayrollManagement: Updating employee:",B),await(void 0)(B.id,B),f(d.map(Ce=>Ce.id===B.id?B:Ce)),I(!1),z(null),alert("Employee updated successfully!")}catch(Ce){console.error("PayrollManagement: Error updating employee:",Ce);const Me=Ce instanceof Error?Ce.message:"Unknown error";alert(`Failed to update employee: ${Me}`)}},Fe=async Ce=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await JI(Ce),f(d.filter(Me=>Me.id!==Ce)),m(p.filter(Me=>Me.employeeId!==Ce)),alert("Employee deleted successfully!")}catch(Me){console.error("Error deleting employee:",Me),alert("Failed to delete employee")}},O=async()=>{if(G)try{await sD(G.id,{amount:G.amount,date:G.date}),m(p.map(Ce=>Ce.id===G.id?G:Ce)),me(!1),L(null),alert("Payout updated successfully!")}catch(Ce){console.error("Error updating payout:",Ce),alert("Failed to update payout")}},be=async Ce=>{if(confirm("Are you sure you want to delete this payout?"))try{await ap(Ce),m(p.filter(Me=>Me.id!==Ce)),alert("Payout deleted successfully!")}catch(Me){console.error("Error deleting payout:",Me),alert("Failed to delete payout")}},De=()=>{const Ce=J.filter(nt=>nt.type==="contract"),Me=Se.filter(nt=>J.find(ct=>ct.id===nt.employeeId)?.type==="contract"),Pt=Me.reduce((nt,qt)=>nt+qt.amount,0),We=Ce.map(nt=>{const qt=Me.filter(dt=>dt.employeeId===nt.id),ct=new Set(qt.map(dt=>dt.date));return{...nt,daysWorked:ct.size,totalPay:qt.reduce((dt,ur)=>dt+ur.amount,0)}}),ut=We.reduce((nt,qt)=>nt+qt.daysWorked,0);return{totalPayout:Pt,employeeWorkDays:We,totalDaysWorked:ut}},qe=()=>{const Ce=J.filter(ut=>ut.type==="fulltime"),Me=Se.filter(ut=>J.find(qt=>qt.id===ut.employeeId)?.type==="fulltime"),Pt=Me.reduce((ut,nt)=>ut+nt.amount,0),We=Ce.map(ut=>{const nt=Me.filter(qt=>qt.employeeId===ut.id);return{...ut,totalPaid:nt.reduce((qt,ct)=>qt+ct.amount,0),lastPayout:nt.length>0?nt[nt.length-1]:null}});return{totalPayout:Pt,employeePayouts:We}},rt=Ce=>Ce.split(" ").map(Me=>Me[0]).join("").toUpperCase().slice(0,2),Be=Ce=>{const Me=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return Me[Ce%Me.length]};De(),qe();const Je=l==="contract"?J.filter(Ce=>Ce.type==="contract"):J.filter(Ce=>Ce.type==="fulltime"),Xt=()=>l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return x?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&a.jsx("button",{onClick:()=>u("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),a.jsx("button",{onClick:()=>u("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),e==="cluster_head"&&a.jsx("button",{onClick:()=>u("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"})]})}),a.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[a.jsx("div",{className:"flex gap-4 flex-wrap",children:Xt()&&a.jsxs("button",{onClick:()=>re(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(An,{className:"w-4 h-4"}),"Add Payout"]})}),a.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-5 h-5 text-purple-700"}),a.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>k("current"),className:`px-4 py-2 rounded-lg transition-colors ${N==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),a.jsx("button",{onClick:()=>k("last"),className:`px-4 py-2 rounded-lg transition-colors ${N==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),a.jsx("button",{onClick:()=>k("custom"),className:`px-4 py-2 rounded-lg transition-colors ${N==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),N==="current"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:D.monthName})}):N==="last"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:F.monthName})}):a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsx(Ea,{label:"From:",value:j,onChange:A}),a.jsx(Ea,{label:"To:",value:S,onChange:E})]})]})})]}),l==="contract"&&(()=>{const Ce=d.filter(We=>We.type==="contract"),Me=Se.filter(We=>d.find(nt=>nt.id===We.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",d.length),console.log("Contract employees:",Ce.length,Ce),console.log("Contract payouts:",Me.length,Me);const Pt=Me.reduce((We,ut)=>We+ut.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Ce.length})]})]}),Ce.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(yn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No contract employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ce.map((We,ut)=>{const nt=Me.filter(dt=>dt.employeeId===We.id),qt=nt.reduce((dt,ur)=>dt+ur.amount,0),ct=new Set(nt.map(dt=>dt.date)).size;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${Be(ut)} flex items-center justify-center text-white`,children:rt(We.name)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:We.name}),a.jsx("div",{className:"text-xs text-gray-500",children:We.employeeId})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{z(We),I(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Fe(We.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:a.jsx(is,{className:"w-4 h-4"})})]})]}),We.role&&a.jsx("div",{className:"mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:We.role})}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Phone:"}),a.jsx("span",{className:"text-gray-900",children:We.phone})]}),We.dailyRate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),a.jsxs("span",{className:"text-green-600",children:["",We.dailyRate]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),a.jsx("span",{className:"text-gray-900",children:ct})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),a.jsxs("span",{className:"text-gray-900",children:["",qt.toLocaleString()]})]})]})]},We.id)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",N==="current"?D.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",Pt.toLocaleString()]})]})]}),Me.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(An,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Me.sort((We,ut)=>new Date(ut.date).getTime()-new Date(We.date).getTime()).map((We,ut)=>{const nt=d.find(qt=>qt.id===We.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Be(ut)} flex items-center justify-center text-white text-sm`,children:rt(We.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:We.employeeName}),nt?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:nt.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:nt?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(We.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",We.amount.toLocaleString()]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{L(We),me(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>be(We.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(is,{className:"w-4 h-4"})})]})})]},We.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const Ce=p.filter(ct=>ct.employeeId===r),Pt=d.find(ct=>ct.employeeId===r)?.type||"fulltime",We=new Date;We.getDate();const ut=[];for(let ct=0;ct<12;ct++){const dt=new Date(We.getFullYear(),We.getMonth()-ct,1),ur=dt.toLocaleDateString("en-US",{month:"long"}),xt=dt.getFullYear().toString(),Qt=dt.getMonth()+1,Nr=new Date(dt.getFullYear(),dt.getMonth()+1,5),or=We>=Nr,kr=Ce.filter(nr=>{const Mr=new Date(nr.date);return Mr.getMonth()+1===Qt&&Mr.getFullYear()===dt.getFullYear()}),_r=kr.reduce((nr,Mr)=>nr+Mr.amount,0);ut.push({month:ur,year:xt,payouts:kr,total:_r,isAvailable:or})}const nt=Se.filter(ct=>ct.employeeId===r),qt=nt.reduce((ct,dt)=>ct+dt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),a.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Received"}),a.jsx("p",{className:"text-sm text-gray-500",children:N==="current"?`for ${D.monthName}`:N==="last"?`for ${F.monthName}`:`from ${j} to ${S}`})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-3xl text-green-600",children:["",qt.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[nt.length," payment",nt.length!==1?"s":""]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ei,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ut.map((ct,dt)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${ct.isAvailable&&ct.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[ct.month," ",ct.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ct.payouts.length," payment",ct.payouts.length!==1?"s":""]})]}),ct.isAvailable&&ct.payouts.length>0?a.jsxs("button",{onClick:()=>Vie(n||"Employee",r,ct.month,ct.year,ct.payouts,Pt),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(Ks,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:ct.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",ct.total.toLocaleString("en-IN")]})]})]},dt))})]}),a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),nt.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(An,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts found for the selected period"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),a.jsx("tbody",{children:nt.sort((ct,dt)=>new Date(dt.date).getTime()-new Date(ct.date).getTime()).map(ct=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:new Date(ct.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:r})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-green-600",children:["",ct.amount.toLocaleString()]})})]},ct.id))})]})})]})})(),l==="permanent"&&(()=>{const Ce=d.filter(We=>We.type==="fulltime"),Me=Se.filter(We=>d.find(nt=>nt.id===We.employeeId)?.type==="fulltime"),Pt=Me.reduce((We,ut)=>We+ut.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Ce.length})]})]}),Ce.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(yn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No permanent employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),a.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",N==="current"?"This Month":N==="last"?"Last Month":"Period",")"]}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Ce.map((We,ut)=>{const nt=Me.filter(dt=>dt.employeeId===We.id),qt=nt.reduce((dt,ur)=>dt+ur.amount,0),ct=nt.length>0?nt.sort((dt,ur)=>new Date(ur.date).getTime()-new Date(dt.date).getTime())[0]:null;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Be(ut)} flex items-center justify-center text-white text-sm`,children:rt(We.name)}),a.jsx("div",{className:"text-gray-900",children:We.name})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:We.employeeId})}),a.jsx("td",{className:"py-4 px-4",children:We.role&&a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:We.role})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:We.phone})}),a.jsx("td",{className:"py-4 px-4",children:ct?a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:new Date(ct.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",ct.amount.toLocaleString()]})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",qt.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{z(We),I(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Fe(We.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:a.jsx(is,{className:"w-4 h-4"})})]})})]},We.id)})})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",N==="current"?D.monthName:N==="last"?F.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",Pt.toLocaleString()]})]})]}),Me.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(An,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Me.sort((We,ut)=>new Date(ut.date).getTime()-new Date(We.date).getTime()).map((We,ut)=>{const nt=d.find(qt=>qt.id===We.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Be(ut)} flex items-center justify-center text-white text-sm`,children:rt(We.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:We.employeeName}),nt?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:nt.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:nt?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(We.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",We.amount.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{L(We),me(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>be(We.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(is,{className:"w-4 h-4"})})]})})]},We.id)})})]})})]})]})})()]})]}),P&&B&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),a.jsx("input",{type:"text",value:B.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:B.name,onChange:Ce=>z({...B,name:Ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),a.jsx("input",{type:"tel",value:B.phone,onChange:Ce=>z({...B,phone:Ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),a.jsx("input",{type:"text",value:B.role||"",onChange:Ce=>z({...B,role:Ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),B.type==="contract"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),a.jsx("input",{type:"number",value:B.dailyRate||"",onChange:Ce=>z({...B,dailyRate:parseFloat(Ce.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>I(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:xe,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),Y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),a.jsx("button",{onClick:()=>re(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),a.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:Je.map(Ce=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[a.jsx("input",{type:"checkbox",checked:X.employeeIds.includes(Ce.id),onChange:Me=>{Me.target.checked?ne({...X,employeeIds:[...X.employeeIds,Ce.id]}):ne({...X,employeeIds:X.employeeIds.filter(Pt=>Pt!==Ce.id)})},className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[Ce.name," (",Ce.employeeId,")"]})]},Ce.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[X.employeeIds.length," employee(s) selected"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:X.amount,onChange:Ce=>ne({...X,amount:Ce.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),a.jsx(Ea,{label:"Date *",value:X.date,onChange:Ce=>ne({...X,date:Ce}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>re(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:pe,disabled:y,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:y?"Adding...":"Add Payout"})]})]})}),Z&&G&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),a.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),a.jsx("input",{type:"text",value:G.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:G.amount,onChange:Ce=>L({...G,amount:parseFloat(Ce.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsx(Ea,{label:"Date *",value:G.date,onChange:Ce=>L({...G,date:Ce}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>me(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:O,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),ee&&a.jsx(mF,{onClose:()=>te(!1),employees:d})]})}function Gie(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let x2=1;class Yie{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:x2++,o=this.toasts.find(u=>u.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:n}),{...u,...t,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async d=>{if(o=["resolve",d],de.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Jie(d)&&!d.ok){i=!1;const p=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,b=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...b})}else if(d instanceof Error){i=!1;const p=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description,b=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...b})}else if(r.success!==void 0){i=!1;const p=typeof r.success=="function"?await r.success(d):r.success,m=typeof r.description=="function"?await r.description(d):r.description,b=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"success",description:m,...b})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(d):r.error,p=typeof r.description=="function"?await r.description(d):r.description,x=typeof f=="object"&&!de.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:p,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(t,r)=>{const n=r?.id||x2++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ns=new Yie,Xie=(e,t)=>{const r=t?.id||x2++;return ns.addToast({title:e,...t,id:r}),r},Jie=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Qie=Xie,Zie=()=>ns.toasts,eoe=()=>ns.getActiveToasts(),mr=Object.assign(Qie,{success:ns.success,info:ns.info,warning:ns.warning,error:ns.error,custom:ns.custom,message:ns.message,promise:ns.promise,dismiss:ns.dismiss,loading:ns.loading},{getHistory:Zie,getToasts:eoe});Gie("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function toe({context:e,selectedStoreId:t}){const[r,n]=U.useState("week"),[s,i]=U.useState(""),[o,l]=U.useState(""),[u,d]=U.useState([]),[f,p]=U.useState(null),[m,x]=U.useState(!0),b=t||e.user?.storeId;U.useEffect(()=>{v()},[e.inventory,e.salesData,r,s,o,b]);const y=()=>{const S=new Date;let E=new Date;switch(r){case"day":E=new Date(S);break;case"week":E=new Date(S),E.setDate(S.getDate()-7);break;case"month":E=new Date(S),E.setMonth(S.getMonth()-1);break;case"custom":if(s&&o)return{startDate:new Date(s),endDate:new Date(o)};E=new Date(S),E.setDate(S.getDate()-7);break}return{startDate:E,endDate:S}},v=()=>{x(!0);const{startDate:S,endDate:E}=y(),_=new Map,T=new Date(S);for(;T<=E;){const z=T.getFullYear(),Y=String(T.getMonth()+1).padStart(2,"0"),re=String(T.getDate()).padStart(2,"0"),X=`${z}-${Y}-${re}`;_.set(X,{date:X,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),T.setDate(T.getDate()+1)}const D=new Map;(b?e.inventory.filter(z=>z.storeId===b):e.inventory).forEach(z=>{D.has(z.date)||D.set(z.date,[]),D.get(z.date)?.push(z)}),D.forEach((z,Y)=>{if(_.has(Y)){const re=_.get(Y);if(re.inventoryLogged=!0,re.inventoryCount=z.length,z.length>0){const X=z[0],Z=X.id.split("-")[0];if(X.createdByName?re.inventoryLoggedBy=X.createdByName:X.createdByEmail?re.inventoryLoggedBy=X.createdByEmail:X.createdBy?typeof X.createdBy=="string"&&X.createdBy.includes("-")?re.inventoryLoggedBy=X.userId?`User ${X.userId.substring(0,8)}`:"Manager":re.inventoryLoggedBy=X.createdBy:X.userId?re.inventoryLoggedBy=`User ${X.userId.substring(0,8)}`:re.inventoryLoggedBy="Unknown User",Z){re.inventoryLoggedAt=new Date(parseInt(Z)).toISOString();const me=new Date(parseInt(Z)),G=new Date(Y+"T23:59:59");re.lateEntry=me>G}}}}),(b?e.salesData.filter(z=>z.storeId===b):e.salesData).forEach(z=>{if(_.has(z.date)){const Y=_.get(z.date);Y.salesLogged=!0,Y.cashDiscrepancy=Math.abs(z.cashOffset||0),z.createdByName?Y.salesLoggedBy=z.createdByName:z.createdByEmail?Y.salesLoggedBy=z.createdByEmail:z.createdBy?typeof z.createdBy=="string"&&z.createdBy.includes("-")?Y.salesLoggedBy="Manager":Y.salesLoggedBy=z.createdBy:Y.salesLoggedBy="Unknown User",e.user&&(Y.managerEmail=e.user.email,Y.managerName=e.user.name);const re=z.id.split("-")[0];if(re){Y.salesLoggedAt=new Date(parseInt(re)).toISOString();const X=new Date(parseInt(re)),ne=new Date(z.date+"T23:59:59");X>ne&&(Y.lateEntry=!0)}}}),_.forEach(z=>{z.inventoryLogged&&z.salesLogged?z.status="complete":z.inventoryLogged||z.salesLogged?z.status="partial":z.status="missing"});const I=Array.from(_.values()).sort((z,Y)=>new Date(Y.date).getTime()-new Date(z.date).getTime());d(I);const B={totalDays:I.length,daysWithData:I.filter(z=>z.status!=="missing").length,totalDiscrepancy:I.reduce((z,Y)=>z+Y.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};B.avgDiscrepancy=B.totalDiscrepancy/(I.filter(z=>z.salesLogged).length||1),B.completionRate=I.filter(z=>z.status==="complete").length/B.totalDays*100,B.onTimeRate=I.filter(z=>z.status==="complete"&&!z.lateEntry).length/B.totalDays*100,p(B),x(!1)},N=S=>{if(!S)return"-";const E=new Date(S),_=E.toLocaleDateString("en-US",{month:"short",day:"numeric"}),T=E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${_}, ${T}`},k=S=>new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),j=S=>{switch(S){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=S=>{switch(S){case"complete":return a.jsx(er,{className:"w-5 h-5 text-green-600"});case"partial":return a.jsx(gn,{className:"w-5 h-5 text-yellow-600"});case"missing":return a.jsx(Ms,{className:"w-5 h-5 text-red-600"});default:return a.jsx(Pn,{className:"w-5 h-5 text-gray-600"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>n("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:()=>n("week"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r==="week"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"7 Days"}),a.jsx("button",{onClick:()=>n("month"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r==="month"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"30 Days"}),a.jsx("button",{onClick:()=>n("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${r==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),r==="custom"&&a.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[a.jsx(Ea,{label:"Start Date",value:s,onChange:i}),a.jsx(Ea,{label:"End Date",value:o,onChange:l})]})]}),f&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(wr,{className:"w-5 h-5 text-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:f.totalDays})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(er,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[f.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Pn,{className:"w-5 h-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[f.onTimeRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(M2,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",f.totalDiscrepancy.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-purple-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",f.avgDiscrepancy.toFixed(2)]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Inventory"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:m?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):u.map(S=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[S.lateEntry&&a.jsx(gn,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),a.jsx("span",{className:"text-sm text-gray-900",children:k(S.date)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[A(S.status),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j(S.status)}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.inventoryLogged?a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[S.inventoryCount," items"]}),a.jsx("p",{className:"text-gray-500",children:N(S.inventoryLoggedAt)}),S.inventoryLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",S.inventoryLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.salesLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:N(S.salesLoggedAt)}),S.salesLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",S.salesLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.salesLogged?a.jsxs("span",{className:`text-sm ${S.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",S.cashDiscrepancy.toFixed(2)]}):a.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},S.date))})]})})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(er,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-gray-600",children:"Complete - Both inventory & sales logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gn,{className:"w-4 h-4 text-yellow-600"}),a.jsx("span",{className:"text-gray-600",children:"Partial - Only one type logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gn,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (after midnight)"})]})]})]})]})}function roe({storeId:e,accessToken:t,thresholds:r,onClose:n,onSave:s}){const[i,o]=U.useState(r),[l,u]=U.useState(!1),d=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(m,x,b)=>{const y=parseInt(b)||0;o({...i,[m]:{...i[m],[x]:y}})},p=async()=>{try{u(!0),await RD(t,e,i),s(i),mr.success("Stock thresholds saved successfully"),n()}catch(m){console.error("Error saving thresholds:",m),mr.error("Failed to save thresholds")}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:a.jsx(Nm,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:a.jsx(wn,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"space-y-4",children:d.map(({key:m,label:x})=>{const b=i[m]||{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:x}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:b.high,onChange:y=>f(m,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:b.medium,onChange:y=>f(m,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:b.low,onChange:y=>f(m,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},m)})})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:p,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gl,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function noe({context:e,highlightRequestId:t,selectedStoreId:r}){const[n,s]=U.useState([]),[i,o]=U.useState(!0),[l,u]=U.useState(!1),[d,f]=U.useState(""),[p,m]=U.useState("all"),[x,b]=U.useState("daily"),[y,v]=U.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[N,k]=U.useState([]),[j,A]=U.useState(0),[S,E]=U.useState(0),[_,T]=U.useState(0),[D,F]=U.useState(0),[P,I]=U.useState(0),[B,z]=U.useState(0),[Y,re]=U.useState(0),[X,ne]=U.useState(""),[Z,me]=U.useState(new Date().toISOString().split("T")[0]),[G,L]=U.useState({}),[ee,te]=U.useState({}),[J,he]=U.useState({}),[Se,Oe]=U.useState({}),[pe,xe]=U.useState(!1),[Fe,O]=U.useState(null),[be,De]=U.useState(!1),[qe,rt]=U.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:600,medium:300,low:150},chickenKurkure:{high:600,medium:300,low:150}}),Be=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],Je=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],Xt=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],Ce=e.user?.designation==="store_incharge",Me=e.user?.designation==="production_incharge",Pt=e.user?.role==="manager",We=e.user?.role==="cluster_head",ut=Pt||We||Me,nt=async()=>{try{const Ne=pu(),{data:{session:ze}}=await Ne.auth.getSession();return ze?.access_token||null}catch(Ne){return console.error("Error getting fresh token:",Ne),null}};U.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:Ce,isProductionHead:Me,isOperationsHead:Pt,isClusterHead:We,canViewAll:ut})},[e.user,Ce,Me,Pt,We,ut]),U.useEffect(()=>{ct(),dt(),qt()},[e.user,r]),U.useEffect(()=>{N.length>=0&&ur()},[N,e.user,r]);const qt=async()=>{if(e.user)try{const Ne=r||e.user.storeId;if(!Ne)return;const ze=await nt();if(!ze)return;const it=await MD(ze,Ne);it&&rt(it)}catch{console.log("No saved thresholds, using defaults")}},ct=async()=>{if(e.user)try{o(!0);const Ne=await nt();if(!Ne){console.error("No valid access token available");return}const ze=await Om(Ne),it=r||e.user.storeId;let tt=ze;it?tt=ze.filter(It=>It.storeId===it):Ce&&e.user.storeId?tt=ze.filter(It=>It.storeId===e.user.storeId):Pt&&e.user.storeId&&!We&&(tt=ze.filter(It=>It.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:ze.length,filteredRequests:tt.length,userRole:e.user.role,userDesignation:e.user.designation}),s(tt)}catch(Ne){console.error("Error loading production requests:",Ne),mr.error("Failed to load production requests")}finally{o(!1)}},dt=async()=>{if(e.user)try{const Ne=await nt();if(!Ne){console.error("No valid access token available");return}let it=(await Pm(Ne)).data||[];const tt=r||e.user.storeId;tt&&(it=it.filter(It=>It?.storeId===tt)),k(it)}catch(Ne){console.error("Error loading sales data:",Ne)}},ur=async()=>{const Ne=r||e.user?.storeId,ze=!Ne||Ne==="all";if(e.user?.accessToken){console.log(" loadStoreOpeningBalance called"),console.log("  effectiveStoreId:",Ne),console.log("  isAllStores:",ze),console.log("  Current salesData length:",N.length);try{const it=new Date().toISOString().substring(0,7);if(ze){console.log("   Calculating aggregate opening balance for all stores");const Ue=e.stores||[];let St={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};for(const Kt of Ue){const Qe=await $c(e.user.accessToken,Kt.id,"store");if(Qe?.record)if(Qe.record.date.substring(0,7)===it)Qe.record.items.forEach(wt=>{St[wt.itemId]+=wt.actualQuantity});else{const wt=xt(Kt.id,it);Object.keys(wt).forEach(ft=>{St[ft]+=wt[ft]})}else{const Ie=xt(Kt.id,it);Object.keys(Ie).forEach(wt=>{St[wt]+=Ie[wt]})}}console.log("   Aggregated opening balance for all stores:",St),O(St);return}const tt=await $c(e.user.accessToken,Ne,"store");if(console.log(" Recalibration Check:"),console.log("  Recalibration response:",tt),tt?.record){const Ue=tt.record.date.substring(0,7);if(console.log("  Recalibration date:",tt.record.date),console.log("  Recalibration month:",Ue),console.log("  Recalibration locationType:",tt.record.locationType),console.log("  Recalibration locationName:",tt.record.locationName),console.log("  Current month:",it),Ue===it){const St={};tt.record.items.forEach(Kt=>{St[Kt.itemId]=Kt.actualQuantity}),console.log("   Using current month recalibration as opening balance:",St),O(St);return}else console.log("   Recalibration is from",Ue,"- calculating from previous month instead")}else console.log("   No recalibration record found");const It=xt(Ne,it);O(It)}catch(it){console.error("Error loading opening balance:",it),O({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}}},xt=(Ne,ze)=>{const[it,tt]=ze.split("-").map(Number);let It=it,Ue=tt-1;Ue===0&&(Ue=12,It=it-1);const St=`${It}-${String(Ue).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",Ne),console.log("  Previous Month:",St),console.log("  Total salesData records:",N.length),console.log("  Sample salesData:",N.slice(0,2));const Kt=(e.productionRequests||[]).filter(ft=>{if(ft.status!=="delivered"||ft.storeId!==Ne)return!1;const je=ft.deliveredDate||ft.requestDate||ft.createdAt;return je&&je.startsWith(St)}).reduce((ft,je)=>({chicken:ft.chicken+(je.chickenMomos||0),chickenCheese:ft.chickenCheese+(je.chickenCheeseMomos||0),veg:ft.veg+(je.vegMomos||0),cheeseCorn:ft.cheeseCorn+(je.cheeseCornMomos||0),paneer:ft.paneer+(je.paneerMomos||0),vegKurkure:ft.vegKurkure+(je.vegKurkureMomos||0),chickenKurkure:ft.chickenKurkure+(je.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Qe=(N||[]).filter(ft=>ft.storeId!==Ne?!1:ft.date&&ft.date.startsWith(St));console.log("  Filtered sales records for previous month:",Qe.length),console.log("  Sample filtered sales:",Qe.slice(0,2));const Ie=Qe.reduce((ft,je)=>({chicken:ft.chicken+(je.data?.["Chicken Momos"]||0),chickenCheese:ft.chickenCheese+(je.data?.["Chicken Cheese Momos"]||0),veg:ft.veg+(je.data?.["Veg Momos"]||0),cheeseCorn:ft.cheeseCorn+(je.data?.["Corn Cheese Momos"]||0),paneer:ft.paneer+(je.data?.["Paneer Momos"]||0),vegKurkure:ft.vegKurkure+(je.data?.["Veg Kurkure Momos"]||0),chickenKurkure:ft.chickenKurkure+(je.data?.["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),wt={chicken:Kt.chicken-Ie.chicken,chickenCheese:Kt.chickenCheese-Ie.chickenCheese,veg:Kt.veg-Ie.veg,cheeseCorn:Kt.cheeseCorn-Ie.cheeseCorn,paneer:Kt.paneer-Ie.paneer,vegKurkure:Kt.vegKurkure-Ie.vegKurkure,chickenKurkure:Kt.chickenKurkure-Ie.chickenKurkure};return console.log("  Previous Month Received:",Kt),console.log("  Previous Month Sold:",Ie),console.log("  Calculated Opening Balance (Closing Stock):",wt),wt},Qt=async Ne=>{if(Ne.preventDefault(),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error("Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),mr.error("Missing user information. Please ensure you are assigned to a store.");return}if(j+S+_+D+P+B+Y===0){mr.error("Please specify at least one item quantity");return}const it=new Date,tt=it.getHours();if(new Date(Z).toDateString()===it.toDateString()&&tt>=9){mr.error("Production requests must be submitted before 9:00 AM");return}try{u(!0),await fD(e.user.accessToken,{requestDate:Z,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,chickenMomos:j,chickenCheeseMomos:S,vegMomos:_,cheeseCornMomos:D,paneerMomos:P,vegKurkureMomos:B,chickenKurkureMomos:Y,kitchenUtilities:Object.keys(G).length>0?G:void 0,sauces:Object.keys(ee).length>0?ee:void 0,utilities:Object.keys(J).length>0?J:void 0,notes:X}),mr.success("Production request submitted successfully"),A(0),E(0),T(0),F(0),I(0),z(0),re(0),L({}),te({}),he({}),ne(""),me(new Date().toISOString().split("T")[0]),await ct()}catch(St){console.error("Error submitting production request:",St),mr.error(St.message||"Failed to submit request")}finally{u(!1)}},Nr=async(Ne,ze)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await pD(e.user.accessToken,Ne,ze,e.user.employeeId),mr.success(`Request marked as ${ze.replace("-"," ")}`),await ct()}catch(it){console.error("Error updating status:",it),mr.error("Failed to update status")}},or=Ne=>{switch(Ne){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},kr=Ne=>{switch(Ne){case"pending":return a.jsx(Pn,{className:"w-4 h-4"});case"accepted":return a.jsx(er,{className:"w-4 h-4"});case"in-preparation":return a.jsx(rr,{className:"w-4 h-4"});case"prepared":return a.jsx(er,{className:"w-4 h-4"});case"shipped":return a.jsx(lE,{className:"w-4 h-4"});case"delivered":return a.jsx(er,{className:"w-4 h-4"});default:return a.jsx(Pn,{className:"w-4 h-4"})}},_r=n.filter(Ne=>!(d&&Ne.requestDate!==d||p!=="all"&&Ne.status!==p)),nr={pending:_r.filter(Ne=>Ne.status==="pending"),accepted:_r.filter(Ne=>Ne.status==="accepted"),"in-preparation":_r.filter(Ne=>Ne.status==="in-preparation"),prepared:_r.filter(Ne=>Ne.status==="prepared"),shipped:_r.filter(Ne=>Ne.status==="shipped"),delivered:_r.filter(Ne=>Ne.status==="delivered")},Mr=_r.reduce((Ne,ze)=>{const it=ze.requestDate;return Ne[it]||(Ne[it]=[]),Ne[it].push(ze),Ne},{}),ht=Object.keys(Mr).sort((Ne,ze)=>new Date(ze).getTime()-new Date(Ne).getTime()),Er=()=>{const Ne=new Date;let ze=[],it,tt=Ne;const It=(Qe,Ie)=>{if(Ie==="day")return Qe.toLocaleDateString("en-US",{month:"short",day:"numeric"});if(Ie==="week"){const wt=new Date(Qe);wt.setDate(Qe.getDate()-Qe.getDay());const ft=new Date(wt);return ft.setDate(wt.getDate()+6),`${wt.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ft.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{if(Ie==="month")return Qe.toLocaleDateString("en-US",{month:"short",year:"numeric"});if(Ie==="year")return Qe.getFullYear().toString()}return Qe.toLocaleDateString()},Ue=(Qe,Ie)=>{const wt=ft=>{const je=ft.getFullYear(),ke=String(ft.getMonth()+1).padStart(2,"0"),Le=String(ft.getDate()).padStart(2,"0");return`${je}-${ke}-${Le}`};if(Ie==="day")return wt(Qe);if(Ie==="week"){const ft=new Date(Qe),je=ft.getDay();return ft.setDate(ft.getDate()-je),wt(ft)}else{if(Ie==="month")return`${Qe.getFullYear()}-${String(Qe.getMonth()+1).padStart(2,"0")}`;if(Ie==="year")return Qe.getFullYear().toString()}return wt(Qe)};if(x==="daily")for(let Qe=4;Qe>=0;Qe--){const Ie=new Date(Ne);Ie.setDate(Ne.getDate()-Qe),ze.push(Ue(Ie,"day"))}else if(x==="weekly")for(let Qe=4;Qe>=0;Qe--){const Ie=new Date(Ne);Ie.setDate(Ne.getDate()-Qe*7);const wt=Ue(Ie,"week");ze.includes(wt)||ze.push(wt)}else if(x==="monthly")for(let Qe=4;Qe>=0;Qe--){const Ie=new Date(Ne);Ie.setMonth(Ne.getMonth()-Qe),ze.push(Ue(Ie,"month"))}else if(x==="yearly")for(let Qe=4;Qe>=0;Qe--){const Ie=new Date(Ne);Ie.setFullYear(Ne.getFullYear()-Qe),ze.push(Ue(Ie,"year"))}else if(x==="custom"){it=new Date(y.from),tt=new Date(y.to);const Qe=Math.ceil((tt.getTime()-it.getTime())/(1e3*60*60*24));for(let Ie=0;Ie<=Qe;Ie++){const wt=new Date(it);wt.setDate(it.getDate()+Ie),ze.push(Ue(wt,"day"))}}console.log(" Chart Periods:",{filter:x,periods:ze,today:Ne.toISOString().split("T")[0]});const St={};ze.forEach(Qe=>{St[Qe]={period:Qe,Chicken:0,"Chicken Cheese":0,Veg:0,"Cheese Corn":0,Paneer:0,"Veg Kurkure":0,"Chicken Kurkure":0}}),n.forEach(Qe=>{const Ie=new Date(Qe.requestDate);let wt;x==="daily"||x==="custom"?wt=Ue(Ie,"day"):x==="weekly"?wt=Ue(Ie,"week"):x==="monthly"?wt=Ue(Ie,"month"):x==="yearly"&&(wt=Ue(Ie,"year")),St[wt]?(St[wt].Chicken+=Qe.chickenMomos,St[wt]["Chicken Cheese"]+=Qe.chickenCheeseMomos,St[wt].Veg+=Qe.vegMomos,St[wt]["Cheese Corn"]+=Qe.cheeseCornMomos,St[wt].Paneer+=Qe.paneerMomos,St[wt]["Veg Kurkure"]+=Qe.vegKurkureMomos,St[wt]["Chicken Kurkure"]+=Qe.chickenKurkureMomos):console.log(" Request not matching any period:",{requestDate:Qe.requestDate,periodKey:wt,availablePeriods:ze})}),console.log(" Aggregated Period Data:",St);const Kt=ze.map(Qe=>{const Ie=St[Qe],wt=new Date(Qe);let ft;return x==="daily"||x==="custom"?ft=It(wt,"day"):x==="weekly"?ft=It(wt,"week"):x==="monthly"?ft=It(wt,"month"):x==="yearly"&&(ft=It(wt,"year")),{name:ft,...Ie}});return console.log(" Final Chart Data:",Kt),Kt};return U.useEffect(()=>{if(t&&!i){const Ne=document.getElementById(`request-${t}`);Ne&&setTimeout(()=>{Ne.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,i]),U.useEffect(()=>{ht.length>0&&Object.keys(Se).length===0&&Oe({[ht[0]]:!0})},[ht,Se]),i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),a.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[Ce&&"Submit your daily stock requirements before 9:00 AM",Me&&"Manage incoming stock requests and track fulfillment",(Pt||We)&&"Monitor stock request workflow across stores"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),Ce&&(()=>{const ze=new Date().getDate(),it=ze>=1&&ze<=5;return a.jsxs("button",{onClick:()=>xe(!0),disabled:!it,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${it?"bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:it?"Recalibrate store stock":"Recalibration only available from 1st to 5th of each month",children:[a.jsx(er,{className:"w-5 h-5"}),"Recalibrate Stock"]})})()]}),(r||e.user?.storeId,a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),a.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),a.jsxs("button",{onClick:()=>De(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[a.jsx(Nm,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]})]})})),(()=>{const Ne=r||e.user?.storeId,ze=new Date().toISOString().substring(0,7),tt=(e.productionRequests?.filter(je=>{if(je.status!=="delivered")return!1;const ke=je.deliveredDate||je.requestDate||je.createdAt;return!ke||!ke.startsWith(ze)?!1:!Ne||Ne==="all"?!0:je.storeId===Ne})||[]).reduce((je,ke)=>({chicken:je.chicken+(ke.chickenMomos||0),chickenCheese:je.chickenCheese+(ke.chickenCheeseMomos||0),veg:je.veg+(ke.vegMomos||0),cheeseCorn:je.cheeseCorn+(ke.cheeseCornMomos||0),paneer:je.paneer+(ke.paneerMomos||0),vegKurkure:je.vegKurkure+(ke.vegKurkureMomos||0),chickenKurkure:je.chickenKurkure+(ke.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Ue=N.filter(je=>!je.date||!je.date.startsWith(ze)?!1:!Ne||Ne==="all"?!0:je.storeId===Ne).reduce((je,ke)=>({chicken:je.chicken+(ke.data?.["Chicken Momos"]||0),chickenCheese:je.chickenCheese+(ke.data?.["Chicken Cheese Momos"]||0),veg:je.veg+(ke.data?.["Veg Momos"]||0),cheeseCorn:je.cheeseCorn+(ke.data?.["Corn Cheese Momos"]||0),paneer:je.paneer+(ke.data?.["Paneer Momos"]||0),vegKurkure:je.vegKurkure+(ke.data?.["Veg Kurkure Momos"]||0),chickenKurkure:je.chickenKurkure+(ke.data?.["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),St=Fe||{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},Kt={chicken:St.chicken+tt.chicken-Ue.chicken,chickenCheese:St.chickenCheese+tt.chickenCheese-Ue.chickenCheese,veg:St.veg+tt.veg-Ue.veg,cheeseCorn:St.cheeseCorn+tt.cheeseCorn-Ue.cheeseCorn,paneer:St.paneer+tt.paneer-Ue.paneer,vegKurkure:St.vegKurkure+tt.vegKurkure-Ue.vegKurkure,chickenKurkure:St.chickenKurkure+tt.chickenKurkure-Ue.chickenKurkure},Qe=[{key:"chicken",label:"Chicken",color:"purple"},{key:"chickenCheese",label:"Chicken Cheese",color:"pink"},{key:"veg",label:"Veg",color:"green"},{key:"cheeseCorn",label:"Cheese Corn",color:"yellow"},{key:"paneer",label:"Paneer",color:"blue"},{key:"vegKurkure",label:"Veg Kurkure",color:"teal"},{key:"chickenKurkure",label:"Chicken Kurkure",color:"red"}],Ie=Object.values(tt).reduce((je,ke)=>je+ke,0),wt=Object.values(St).reduce((je,ke)=>je+ke,0);return Ie+wt===0?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No inventory available"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once your requests are fulfilled or recalibration is performed"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Qe.map(({key:je,label:ke,color:Le})=>{const jt=tt[je],W=Ue[je],ae=Kt[je],Q=qe[je]||{high:600,medium:300,low:150};let se="high",ie="",oe="",_e="",H="";ae<=0?(se="critical",ie="bg-red-100",oe="text-red-700",_e="border-red-300",H="CRITICAL"):ae<=Q.low?(se="low",ie="bg-red-100",oe="text-red-700",_e="border-red-300",H="LOW"):ae<=Q.medium?(se="medium",ie="bg-orange-100",oe="text-orange-700",_e="border-orange-300",H="MEDIUM"):ae<Q.high&&(se="medium",ie="bg-yellow-100",oe="text-yellow-700",_e="border-yellow-300",H="MEDIUM");const R=jt>0?(ae/jt*100).toFixed(0):"0",q=ae<jt*.2&&jt>0;return a.jsxs("div",{className:`bg-gradient-to-br from-${Le}-50 to-${Le}-100 border-2 border-${Le}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[se!=="high"&&a.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${ie} border ${_e}`,children:[a.jsx(gn,{className:`w-4 h-4 ${oe}`}),a.jsx("span",{className:`text-xs font-semibold ${oe} uppercase`,children:H})]}),a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:[ke," Momos"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),a.jsx("span",{className:`text-lg font-bold text-${Le}-600`,children:jt})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),a.jsx("span",{className:`text-lg font-bold text-${Le}-700`,children:W})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("span",{className:`text-2xl font-bold ${q||ae<0?"text-red-600":`text-${Le}-800`}`,children:ae})]}),jt>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[R,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${q||ae<0?"bg-red-500":`bg-${Le}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(R)))}%`}})})]})]}),(q||ae<0)&&a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-red-800 font-semibold",children:ae<0?" Oversold":" Low Stock"})})]})]},je)})})})()]}),Ce&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ep,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),a.jsxs("form",{onSubmit:Qt,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ea,{label:"Request Date",value:Z,onChange:me,className:"w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requests for today must be submitted before 9:00 AM"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),a.jsxs("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Chicken Momos"}),a.jsx("input",{type:"number",min:"0",value:j||0,onChange:Ne=>A(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[150,300,450,600].map(Ne=>a.jsx("button",{type:"button",onClick:()=>A(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Chicken Cheese Momos"}),a.jsx("input",{type:"number",min:"0",value:S||0,onChange:Ne=>E(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>E(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Veg Momos"}),a.jsx("input",{type:"number",min:"0",value:_||0,onChange:Ne=>T(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>T(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Cheese Corn Momos"}),a.jsx("input",{type:"number",min:"0",value:D||0,onChange:Ne=>F(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>F(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Paneer Momos"}),a.jsx("input",{type:"number",min:"0",value:P||0,onChange:Ne=>I(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>I(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Veg Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:B||0,onChange:Ne=>z(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>z(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Chicken Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:Y||0,onChange:Ne=>re(parseInt(Ne.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:[60,120,180,300].map(Ne=>a.jsx("button",{type:"button",onClick:()=>re(Ne),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ne},Ne))})]})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),a.jsx("div",{className:"space-y-3",children:Be.map(Ne=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[Ne.name," ",a.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",Ne.unit,")"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"0",step:"0.01",value:G[Ne.name]?.quantity!==void 0?G[Ne.name].quantity:"",onChange:ze=>{const it=parseFloat(ze.target.value)||0;if(it>0)L({...G,[Ne.name]:{quantity:it,unit:Ne.unit}});else{const tt={...G};delete tt[Ne.name],L(tt)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${Ne.unit}`}),a.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:Ne.unit})]})]},Ne.name))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),a.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Je.map(Ne=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[a.jsx("input",{type:"checkbox",checked:ee[Ne]||!1,onChange:ze=>{if(ze.target.checked)te({...ee,[Ne]:!0});else{const it={...ee};delete it[Ne],te(it)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700",children:Ne})]},Ne))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Xt.map(Ne=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:Ne}),a.jsx("input",{type:"number",min:"0",value:J[Ne]!==void 0?J[Ne]:"",onChange:ze=>{const it=parseInt(ze.target.value)||0;if(it>0)he({...J,[Ne]:it});else{const tt={...J};delete tt[Ne],he(tt)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:X,onChange:Ne=>ne(Ne.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Submitting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(ep,{className:"w-5 h-5"}),a.jsx("span",{children:"Submit Request"})]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[a.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:a.jsx(Ea,{label:"Filter by Date",value:d,onChange:f,className:"w-full"})}),a.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:p,onChange:Ne=>m(Ne.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"in-preparation",children:"In Preparation"}),a.jsx("option",{value:"prepared",children:"Prepared"}),a.jsx("option",{value:"shipped",children:"Shipped"}),a.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(d||p!=="all")&&a.jsx("div",{className:"flex sm:items-end",children:a.jsx("button",{onClick:()=>{f(""),m("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),ut&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),a.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr.pending.length})})}),a.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Pn,{className:"w-3 h-3 text-yellow-600"}),a.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr.accepted.length})})}),a.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(er,{className:"w-3 h-3 text-blue-600"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr["in-preparation"].length})})}),a.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(rr,{className:"w-3 h-3 text-purple-600"}),a.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr.prepared.length})})}),a.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(er,{className:"w-3 h-3 text-indigo-600"}),a.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr.shipped.length})})}),a.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(lE,{className:"w-3 h-3 text-orange-600"}),a.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:nr.delivered.length})})}),a.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(er,{className:"w-3 h-3 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-gray-900",children:_r.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-yellow-600",children:nr.pending.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-purple-600",children:nr.accepted.length+nr["in-preparation"].length+nr.prepared.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-green-600",children:nr.delivered.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-purple-600"}),a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Momo Orders by Type"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"daily",label:"5 Days"},{filter:"weekly",label:"5 Weeks"},{filter:"monthly",label:"5 Months"},{filter:"yearly",label:"5 Years"},{filter:"custom",label:"Custom"}].map(({filter:Ne,label:ze})=>a.jsx("button",{onClick:()=>b(Ne),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${x===Ne?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ze},Ne))})]}),x==="custom"&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsx(Ea,{label:"From Date",value:y.from,onChange:Ne=>v({...y,from:Ne})}),a.jsx(Ea,{label:"To Date",value:y.to,onChange:Ne=>v({...y,to:Ne})})]}),a.jsx(En,{width:"100%",height:400,children:a.jsxs(Ws,{data:Er(),children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{dataKey:"name"}),a.jsx(on,{}),a.jsx(Pr,{}),a.jsx(qn,{}),a.jsx(Gt,{dataKey:"Chicken",name:"Chicken",fill:"#8b5cf6"}),a.jsx(Gt,{dataKey:"Chicken Cheese",name:"Chicken Cheese",fill:"#ec4899"}),a.jsx(Gt,{dataKey:"Veg",name:"Veg",fill:"#10b981"}),a.jsx(Gt,{dataKey:"Cheese Corn",name:"Cheese Corn",fill:"#f59e0b"}),a.jsx(Gt,{dataKey:"Paneer",name:"Paneer",fill:"#3b82f6"}),a.jsx(Gt,{dataKey:"Veg Kurkure",name:"Veg Kurkure",fill:"#14b8a6"}),a.jsx(Gt,{dataKey:"Chicken Kurkure",name:"Chicken Kurkure",fill:"#ef4444"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-xl text-gray-900",children:[ht.length," Date",ht.length!==1?"s":""," with Requests"]}),ht.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):ht.map(Ne=>{const ze=Mr[Ne],it=Se[Ne],tt=new Set(ze.map(Ue=>Ue.storeName)).size,It=ze.reduce((Ue,St)=>({chicken:Ue.chicken+St.chickenMomos,chickenCheese:Ue.chickenCheese+St.chickenCheeseMomos,veg:Ue.veg+St.vegMomos,cheeseCorn:Ue.cheeseCorn+St.cheeseCornMomos,paneer:Ue.paneer+St.paneerMomos,vegKurkure:Ue.vegKurkure+St.vegKurkureMomos,chickenKurkure:Ue.chickenKurkure+St.chickenKurkureMomos}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[a.jsxs("button",{onClick:()=>Oe({...Se,[Ne]:!it}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(wr,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:new Date(Ne).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[ze.length," Request",ze.length!==1?"s":""," from"," ",tt," Store",tt!==1?"s":""]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:it?a.jsx(rI,{className:"w-5 h-5 text-gray-400"}):a.jsx(jm,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[a.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),a.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[It.chicken>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:It.chicken}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),It.chickenCheese>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:It.chickenCheese}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),It.veg>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:It.veg}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),It.cheeseCorn>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:It.cheeseCorn}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),It.paneer>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:It.paneer}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),It.vegKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:It.vegKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),It.chickenKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:It.chickenKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),it&&a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-sm text-gray-700",children:"Requests by Store"}),ze.map(Ue=>{const St=t===Ue.id;return a.jsxs("div",{id:`request-${Ue.id}`,className:`border rounded-lg p-4 transition-all duration-300 ${St?"border-purple-500 bg-purple-50 shadow-lg ring-2 ring-purple-300":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"bg-gray-100 px-3 py-1 rounded-full",children:a.jsxs("span",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Request ID:"})," ",Ue.id.slice(0,8).toUpperCase()]})}),St&&a.jsx("div",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-xs animate-pulse",children:"New Notification"})]}),a.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs sm:text-sm flex items-center gap-2 border-2 ${or(Ue.status)} w-fit`,children:[kr(Ue.status),a.jsx("span",{className:"capitalize",children:Ue.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[a.jsx(Pi,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:Ue.storeName||"Unknown Store"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[Me&&Ue.status==="pending"&&a.jsx("button",{onClick:()=>Nr(Ue.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),Me&&Ue.status==="accepted"&&a.jsx("button",{onClick:()=>Nr(Ue.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),Me&&Ue.status==="in-preparation"&&a.jsx("button",{onClick:()=>Nr(Ue.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),Me&&Ue.status==="prepared"&&a.jsx("button",{onClick:()=>Nr(Ue.id,"shipped"),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),Ce&&Ue.status==="shipped"&&a.jsx("button",{onClick:()=>Nr(Ue.id,"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[a.jsx(ra,{className:"w-4 h-4"}),a.jsxs("span",{children:["Requested by: ",Ue.requestedByName||Ue.requestedBy]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Momos Quantities"}),a.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[Ue.chickenMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.chickenMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),Ue.chickenCheeseMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.chickenCheeseMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),Ue.vegMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.vegMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),Ue.cheeseCornMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.cheeseCornMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),Ue.paneerMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.paneerMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),Ue.vegKurkureMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.vegKurkureMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),Ue.chickenKurkureMomos>0&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:Ue.chickenKurkureMomos}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]}),Ue.kitchenUtilities&&Object.keys(Ue.kitchenUtilities).length>0&&a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-purple-700 mb-3",children:"Kitchen Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(Ue.kitchenUtilities).map(([Kt,Qe])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[Qe.quantity," ",Qe.unit]}),a.jsx("p",{className:"text-xs text-gray-600",children:Kt})]},Kt))})]}),Ue.sauces&&Object.keys(Ue.sauces).length>0&&a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-pink-700 mb-3",children:"Sauces Requested"}),a.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:Object.keys(Ue.sauces).map(Kt=>a.jsx("span",{className:"px-3 py-1 bg-pink-200 text-pink-900 rounded-full text-xs",children:Kt},Kt))})]}),Ue.utilities&&Object.keys(Ue.utilities).length>0&&a.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-indigo-700 mb-3",children:"Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(Ue.utilities).map(([Kt,Qe])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[Qe," pcs"]}),a.jsx("p",{className:"text-xs text-gray-600",children:Kt})]},Kt))})]}),Ue.notes&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-2 rounded mb-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Notes:"})," ",Ue.notes]})}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[a.jsxs("div",{children:["Created: ",new Date(Ue.createdAt).toLocaleString()]}),Ue.acceptedAt&&a.jsxs("div",{children:["Accepted: ",new Date(Ue.acceptedAt).toLocaleString()]}),Ue.preparedAt&&a.jsxs("div",{children:["Prepared: ",new Date(Ue.preparedAt).toLocaleString()]}),Ue.shippedAt&&a.jsxs("div",{children:["Shipped: ",new Date(Ue.shippedAt).toLocaleString()]}),Ue.deliveredAt&&a.jsxs("div",{children:["Delivered: ",new Date(Ue.deliveredAt).toLocaleString()]})]})})]},Ue.id)})]})})]},Ne)})]}),pe&&a.jsx(V2,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>xe(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),be&&a.jsx(roe,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:qe,onClose:()=>De(!1),onSave:Ne=>{rt(Ne),De(!1)}})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var xF=1252,aoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],JN={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},QN=function(e){aoe.indexOf(e)!=-1&&(xF=JN[0]=e)};function soe(){QN(1252)}var As=function(e){QN(e)};function yF(){As(1200),soe()}function MP(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function ioe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function vF(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ed=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?ioe(e.slice(2)):t==254&&r==255?vF(e.slice(2)):t==65279?e.slice(1):e},F0=function(t){return String.fromCharCode(t)},RP=function(t){return String.fromCharCode(t)},Hh,xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function FP(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,u=s&63,isNaN(n)?l=u=64:isNaN(s)&&(u=64),t+=xo.charAt(i)+xo.charAt(o)+xo.charAt(l)+xo.charAt(u);return t}function Ka(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=xo.indexOf(e.charAt(d++)),o=xo.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=xo.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),u=xo.indexOf(e.charAt(d++)),s=(l&3)<<6|u,u!==64&&(t+=String.fromCharCode(s));return t}var sr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Il=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function _o(e){return sr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function $P(e){return sr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ts=function(t){return sr?Il(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Dl(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function ZN(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return ZN(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var mo=sr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Il(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function ooe(e){for(var t=[],r=0,n=e.length+250,s=_o(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=_o(65535),n=65530)}return t.push(s.slice(0,r)),mo(t)}var xa=/\u0000/g,Cd=/[\u0001-\u0006]/g;function Mc(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Os(e,t){var r=""+e;return r.length>=t?r:Gr("0",t-r.length)+r}function ek(e,t){var r=""+e;return r.length>=t?r:Gr(" ",t-r.length)+r}function om(e,t){var r=""+e;return r.length>=t?r:r+Gr(" ",t-r.length)}function loe(e,t){var r=""+Math.round(e);return r.length>=t?r:Gr("0",t-r.length)+r}function coe(e,t){var r=""+e;return r.length>=t?r:Gr("0",t-r.length)+r}var LP=Math.pow(2,32);function xc(e,t){if(e>LP||e<-LP)return loe(e,t);var r=Math.round(e);return coe(r,t)}function lm(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var BP=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],xw=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function uoe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Yt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},UP={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},doe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function cm(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,u=1,d=0,f=0,p=Math.floor(s);d<t&&(p=Math.floor(s),l=p*o+i,f=p*d+u,!(s-p<5e-8));)s=1/(s-p),i=o,o=l,u=d,d=f;if(f>t&&(d>t?(f=u,l=i):(f=d,l=o)),!r)return[0,n*l,f];var m=Math.floor(n*l/f);return[m,n*l-m*f,f]}function ul(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),n<60&&(i=(i+6)%7),r&&(i=xoe(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var bF=new Date(1899,11,31,0,0,0),hoe=bF.getTime(),foe=new Date(1900,2,1,0,0,0);function wF(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=foe&&(r+=1440*60*1e3),(r-(hoe+(e.getTimezoneOffset()-bF.getTimezoneOffset())*6e4))/(1440*60*1e3)}function tk(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function poe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function moe(e){var t=e<0?12:11,r=tk(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function goe(e){var t=tk(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function qh(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=moe(e):t===10?r=e.toFixed(10).substr(0,12):r=goe(e),tk(poe(r.toUpperCase()))}function kl(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):qh(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return us(14,wF(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function xoe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function yoe(e,t,r,n){var s="",i=0,o=0,l=r.y,u,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:u=l%100,d=2;break;default:u=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:u=r.m,d=t.length;break;case 3:return xw[r.m-1][1];case 5:return xw[r.m-1][0];default:return xw[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=r.d,d=t.length;break;case 3:return BP[r.q][0];default:return BP[r.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Os(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Os(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:u=l,d=1;break}var f=d>0?Os(u,d):"";return f}function yo(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var jF=/%/g;function voe(e,t,r){var n=t.replace(jF,""),s=t.length-n.length;return Ai(e,n,r*Math.pow(10,2*s))+Gr("%",s)}function boe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ai(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function NF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+NF(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var kF=/# (\?+)( ?)\/( ?)(\d+)/;function woe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?Gr(" ",e[1].length+1+e[4].length):ek(o,e[1].length)+e[2]+"/"+e[3]+Os(l,e[4].length))}function joe(e,t,r){return r+(t===0?"":""+t)+Gr(" ",e[1].length+2+e[4].length)}var SF=/^#*0*\.([0#]+)/,_F=/\).*[0#]/,EF=/\(###\) ###\\?-####/;function ua(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function HP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function qP(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Noe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function koe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function rs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(_F)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?rs("n",n,r):"("+rs("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return boe(e,t,r);if(t.indexOf("%")!==-1)return voe(e,t,r);if(t.indexOf("E")!==-1)return NF(t,r);if(t.charCodeAt(0)===36)return"$"+rs(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+xc(u,t.length);if(t.match(/^[#?]+$/))return s=xc(r,0),s==="0"&&(s=""),s.length>t.length?s:ua(t.substr(0,t.length-s.length))+s;if(i=t.match(kF))return woe(i,u,d);if(t.match(/^#+0+$/))return d+xc(u,t.length-t.indexOf("0"));if(i=t.match(SF))return s=HP(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ua(i[1])).replace(/\.$/,"."+ua(i[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+Gr("0",ua(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+HP(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+yo(xc(u,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+rs(e,t,-r):yo(""+(Math.floor(r)+Noe(r,i[1].length)))+"."+Os(qP(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return rs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Mc(rs(e,t.replace(/[\\-]/g,""),r)),o=0,Mc(Mc(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(EF))return s=rs(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=cm(u,Math.pow(10,o)-1,!1),s=""+d,f=Ai("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=om(l[2],o),f.length<i[4].length&&(f=ua(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=cm(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?ek(l[1],o)+i[2]+"/"+i[3]+om(l[2],o):Gr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=xc(r,0),t.length<=s.length?s:ua(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return ua(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=qP(r,i[1].length),r<0?"-"+rs(e,t,-r):yo(koe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Os(0,3-b.length):"")+b})+"."+Os(o,i[1].length);switch(t){case"###,##0.00":return rs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var x=yo(xc(u,0));return x!=="0"?d+x:"";case"###,###.00":return rs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return rs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Soe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Ai(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function _oe(e,t,r){var n=t.replace(jF,""),s=t.length-n.length;return Ai(e,n,r*Math.pow(10,2*s))+Gr("%",s)}function CF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+CF(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function zs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(_F)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?zs("n",n,r):"("+zs("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Soe(e,t,r);if(t.indexOf("%")!==-1)return _oe(e,t,r);if(t.indexOf("E")!==-1)return CF(t,r);if(t.charCodeAt(0)===36)return"$"+zs(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Os(u,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ua(t.substr(0,t.length-s.length))+s;if(i=t.match(kF))return joe(i,u,d);if(t.match(/^#+0+$/))return d+Os(u,t.length-t.indexOf("0"));if(i=t.match(SF))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ua(i[1])).replace(/\.$/,"."+ua(i[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+Gr("0",ua(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+yo(""+u);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+zs(e,t,-r):yo(""+r)+"."+Gr("0",i[1].length);if(i=t.match(/^#,#*,#0/))return zs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Mc(zs(e,t.replace(/[\\-]/g,""),r)),o=0,Mc(Mc(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(EF))return s=zs(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=cm(u,Math.pow(10,o)-1,!1),s=""+d,f=Ai("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=om(l[2],o),f.length<i[4].length&&(f=ua(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=cm(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?ek(l[1],o)+i[2]+"/"+i[3]+om(l[2],o):Gr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ua(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return ua(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+zs(e,t,-r):yo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Os(0,3-b.length):"")+b})+"."+Os(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var x=yo(""+u);return x!=="0"?d+x:"";default:if(t.match(/\.[0#?]*$/))return zs(e,t.slice(0,t.lastIndexOf(".")),r)+ua(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Ai(e,t,r){return(r|0)===r?zs(e,t,r):rs(e,t,r)}function Eoe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var TF=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Eu(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":lm(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(TF))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Coe(e,t,r,n){for(var s=[],i="",o=0,l="",u="t",d,f,p,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!lm(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(p=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++o;break;case"\\":var x=e.charAt(++o),b=x==="("||x===")"?x:"t";s[s.length]={t:b,v:x},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=ul(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=ul(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},u=l;break;case"A":case"a":case"":var y={t:l,v:l};if(d==null&&(d=ul(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(y.v=d.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(y.v=d.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(y.v=d.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),d==null&&y.t==="T")return"";s[s.length]=y,u=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(TF)){if(d==null&&(d=ul(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Eu(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},u=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var v=0,N=0,k;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,u="h",v<1&&(v=1);break;case"s":(k=s[o].v.match(/\.0+$/))&&(N=Math.max(N,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[o].v.match(/[Hh]/)&&(v=1),v<2&&s[o].v.match(/[Mm]/)&&(v=2),v<3&&s[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",A;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=yoe(s[o].t.charCodeAt(0),s[o].v,d,N),s[o].t="t";break;case"n":case"?":for(A=o+1;s[A]!=null&&((l=s[A].t)==="?"||l==="D"||(l===" "||l==="t")&&s[A+1]!=null&&(s[A+1].t==="?"||s[A+1].t==="t"&&s[A+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[A].v==="/"||s[A].v===" "&&s[A+1]!=null&&s[A+1].t=="?"));)s[o].v+=s[A].v,s[A]={v:"",t:";"},++A;j+=s[o].v,o=A-1;break;case"G":s[o].t="t",s[o].v=kl(t,r);break}var S="",E,_;if(j.length>0){j.charCodeAt(0)==40?(E=t<0&&j.charCodeAt(0)===45?-t:t,_=Ai("n",j,E)):(E=t<0&&n>1?-t:t,_=Ai("n",j,E),E<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),A=_.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var D=s.length;if(T===s.length&&_.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(A>=s[o].v.length-1?(A-=s[o].v.length,s[o].v=_.substr(A+1,s[o].v.length)):A<0?s[o].v="":(s[o].v=_.substr(0,A+1),A=-1),s[o].t="t",D=o);A>=0&&D<s.length&&(s[D].v=_.substr(0,A+1)+s[D].v)}else if(T!==s.length&&_.indexOf("E")===-1){for(A=_.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(f+1);f>=0;--f)A>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(S=_.charAt(A--)+S);s[o].v=S,s[o].t="t",D=o}for(A>=0&&D<s.length&&(s[D].v=_.substr(0,A+1)+s[D].v),A=_.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,f);f<s[o].v.length;++f)A<_.length&&(S+=_.charAt(A++));s[o].v=S,s[o].t="t",D=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(E=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Ai(s[o].t,s[o].v,E),s[o].t="t");var F="";for(o=0;o!==s.length;++o)s[o]!=null&&(F+=s[o].v);return F}var zP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function KP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Toe(e,t){var r=Eoe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(zP),l=r[1].match(zP);return KP(t,o)?[n,r[0]]:KP(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function us(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Yt)[e],n==null&&(n=r.table&&r.table[UP[e]]||Yt[UP[e]]),n==null&&(n=doe[e]||"General");break}if(lm(n,0))return kl(t,r);t instanceof Date&&(t=wF(t,r.date1904));var s=Toe(n,t);if(lm(s[1]))return kl(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Coe(s[1],t,r,s[0])}function pl(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Yt[r]==null){t<0&&(t=r);continue}if(Yt[r]==e){t=r;break}}t<0&&(t=391)}return Yt[t]=e,t}function AF(){Yt=uoe()}var Aoe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},OF=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Ooe(e){var t=typeof e=="number"?Yt[e]:e;return t=t.replace(OF,"(\\d+)"),new RegExp("^"+t+"$")}function Poe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,u=-1;(t.match(OF)||[]).forEach(function(p,m){var x=parseInt(r[m+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=x;break;case"d":i=x;break;case"h":o=x;break;case"s":u=x;break;case"m":o>=0?l=x:s=x;break}}),u>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?d:n==-1&&s==-1&&i==-1?f:d+"T"+f}var Ioe=(function(){var e={};e.version="1.2.0";function t(){for(var _=0,T=new Array(256),D=0;D!=256;++D)_=D,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,T[D]=_;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(_){var T=0,D=0,F=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)P[F]=_[F];for(F=0;F!=256;++F)for(D=_[F],T=256+F;T<4096;T+=256)D=P[T]=D>>>8^_[D&255];var I=[];for(F=1;F!=16;++F)I[F-1]=typeof Int32Array<"u"?P.subarray(F*256,F*256+256):P.slice(F*256,F*256+256);return I}var s=n(r),i=s[0],o=s[1],l=s[2],u=s[3],d=s[4],f=s[5],p=s[6],m=s[7],x=s[8],b=s[9],y=s[10],v=s[11],N=s[12],k=s[13],j=s[14];function A(_,T){for(var D=T^-1,F=0,P=_.length;F<P;)D=D>>>8^r[(D^_.charCodeAt(F++))&255];return~D}function S(_,T){for(var D=T^-1,F=_.length-15,P=0;P<F;)D=j[_[P++]^D&255]^k[_[P++]^D>>8&255]^N[_[P++]^D>>16&255]^v[_[P++]^D>>>24]^y[_[P++]]^b[_[P++]]^x[_[P++]]^m[_[P++]]^p[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^l[_[P++]]^o[_[P++]]^i[_[P++]]^r[_[P++]];for(F+=15;P<F;)D=D>>>8^r[(D^_[P++])&255];return~D}function E(_,T){for(var D=T^-1,F=0,P=_.length,I=0,B=0;F<P;)I=_.charCodeAt(F++),I<128?D=D>>>8^r[(D^I)&255]:I<2048?(D=D>>>8^r[(D^(192|I>>6&31))&255],D=D>>>8^r[(D^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,B=_.charCodeAt(F++)&1023,D=D>>>8^r[(D^(240|I>>8&7))&255],D=D>>>8^r[(D^(128|I>>2&63))&255],D=D>>>8^r[(D^(128|B>>6&15|(I&3)<<4))&255],D=D>>>8^r[(D^(128|B&63))&255]):(D=D>>>8^r[(D^(224|I>>12&15))&255],D=D>>>8^r[(D^(128|I>>6&63))&255],D=D>>>8^r[(D^(128|I&63))&255]);return~D}return e.table=r,e.bstr=A,e.buf=S,e.str=E,e})(),lr=(function(){var t={};t.version="1.2.1";function r(W,ae){for(var Q=W.split("/"),se=ae.split("/"),ie=0,oe=0,_e=Math.min(Q.length,se.length);ie<_e;++ie){if(oe=Q[ie].length-se[ie].length)return oe;if(Q[ie]!=se[ie])return Q[ie]<se[ie]?-1:1}return Q.length-se.length}function n(W){if(W.charAt(W.length-1)=="/")return W.slice(0,-1).indexOf("/")===-1?W:n(W.slice(0,-1));var ae=W.lastIndexOf("/");return ae===-1?W:W.slice(0,ae+1)}function s(W){if(W.charAt(W.length-1)=="/")return s(W.slice(0,-1));var ae=W.lastIndexOf("/");return ae===-1?W:W.slice(ae+1)}function i(W,ae){typeof ae=="string"&&(ae=new Date(ae));var Q=ae.getHours();Q=Q<<6|ae.getMinutes(),Q=Q<<5|ae.getSeconds()>>>1,W.write_shift(2,Q);var se=ae.getFullYear()-1980;se=se<<4|ae.getMonth()+1,se=se<<5|ae.getDate(),W.write_shift(2,se)}function o(W){var ae=W.read_shift(2)&65535,Q=W.read_shift(2)&65535,se=new Date,ie=Q&31;Q>>>=5;var oe=Q&15;Q>>>=4,se.setMilliseconds(0),se.setFullYear(Q+1980),se.setMonth(oe-1),se.setDate(ie);var _e=ae&31;ae>>>=5;var H=ae&63;return ae>>>=6,se.setHours(ae),se.setMinutes(H),se.setSeconds(_e<<1),se}function l(W){Bn(W,0);for(var ae={},Q=0;W.l<=W.length-4;){var se=W.read_shift(2),ie=W.read_shift(2),oe=W.l+ie,_e={};switch(se){case 21589:Q=W.read_shift(1),Q&1&&(_e.mtime=W.read_shift(4)),ie>5&&(Q&2&&(_e.atime=W.read_shift(4)),Q&4&&(_e.ctime=W.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}W.l=oe,ae[se]=_e}return ae}var u;function d(){return u||(u={})}function f(W,ae){if(W[0]==80&&W[1]==75)return Ne(W,ae);if((W[0]|32)==109&&(W[1]|32)==105)return Ie(W,ae);if(W.length<512)throw new Error("CFB file size "+W.length+" < 512");var Q=3,se=512,ie=0,oe=0,_e=0,H=0,R=0,q=[],K=W.slice(0,512);Bn(K,0);var le=p(K);switch(Q=le[0],Q){case 3:se=512;break;case 4:se=4096;break;case 0:if(le[1]==0)return Ne(W,ae);default:throw new Error("Major Version: Expected 3 or 4 saw "+Q)}se!==512&&(K=W.slice(0,se),Bn(K,28));var ce=W.slice(0,se);m(K,Q);var fe=K.read_shift(4,"i");if(Q===3&&fe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+fe);K.l+=4,_e=K.read_shift(4,"i"),K.l+=4,K.chk("00100000","Mini Stream Cutoff Size: "),H=K.read_shift(4,"i"),ie=K.read_shift(4,"i"),R=K.read_shift(4,"i"),oe=K.read_shift(4,"i");for(var ge=-1,ve=0;ve<109&&(ge=K.read_shift(4,"i"),!(ge<0));++ve)q[ve]=ge;var Te=x(W,se);v(R,oe,Te,se,q);var Re=k(Te,_e,q,se);Re[_e].name="!Directory",ie>0&&H!==B&&(Re[H].name="!MiniFAT"),Re[q[0]].name="!FAT",Re.fat_addrs=q,Re.ssz=se;var st={},He=[],Ot=[],ot=[];j(_e,Re,Te,He,ie,st,Ot,H),b(Ot,ot,He),He.shift();var pt={FileIndex:Ot,FullPaths:ot};return ae&&ae.raw&&(pt.raw={header:ce,sectors:Te}),pt}function p(W){if(W[W.l]==80&&W[W.l+1]==75)return[0,0];W.chk(z,"Header Signature: "),W.l+=16;var ae=W.read_shift(2,"u");return[W.read_shift(2,"u"),ae]}function m(W,ae){var Q=9;switch(W.l+=2,Q=W.read_shift(2)){case 9:if(ae!=3)throw new Error("Sector Shift: Expected 9 saw "+Q);break;case 12:if(ae!=4)throw new Error("Sector Shift: Expected 12 saw "+Q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Q)}W.chk("0600","Mini Sector Shift: "),W.chk("000000000000","Reserved: ")}function x(W,ae){for(var Q=Math.ceil(W.length/ae)-1,se=[],ie=1;ie<Q;++ie)se[ie-1]=W.slice(ie*ae,(ie+1)*ae);return se[Q-1]=W.slice(Q*ae),se}function b(W,ae,Q){for(var se=0,ie=0,oe=0,_e=0,H=0,R=Q.length,q=[],K=[];se<R;++se)q[se]=K[se]=se,ae[se]=Q[se];for(;H<K.length;++H)se=K[H],ie=W[se].L,oe=W[se].R,_e=W[se].C,q[se]===se&&(ie!==-1&&q[ie]!==ie&&(q[se]=q[ie]),oe!==-1&&q[oe]!==oe&&(q[se]=q[oe])),_e!==-1&&(q[_e]=se),ie!==-1&&se!=q[se]&&(q[ie]=q[se],K.lastIndexOf(ie)<H&&K.push(ie)),oe!==-1&&se!=q[se]&&(q[oe]=q[se],K.lastIndexOf(oe)<H&&K.push(oe));for(se=1;se<R;++se)q[se]===se&&(oe!==-1&&q[oe]!==oe?q[se]=q[oe]:ie!==-1&&q[ie]!==ie&&(q[se]=q[ie]));for(se=1;se<R;++se)if(W[se].type!==0){if(H=se,H!=q[H])do H=q[H],ae[se]=ae[H]+"/"+ae[se];while(H!==0&&q[H]!==-1&&H!=q[H]);q[se]=-1}for(ae[0]+="/",se=1;se<R;++se)W[se].type!==2&&(ae[se]+="/")}function y(W,ae,Q){for(var se=W.start,ie=W.size,oe=[],_e=se;Q&&ie>0&&_e>=0;)oe.push(ae.slice(_e*I,_e*I+I)),ie-=I,_e=al(Q,_e*4);return oe.length===0?mn(0):mo(oe).slice(0,W.size)}function v(W,ae,Q,se,ie){var oe=B;if(W===B){if(ae!==0)throw new Error("DIFAT chain shorter than expected")}else if(W!==-1){var _e=Q[W],H=(se>>>2)-1;if(!_e)return;for(var R=0;R<H&&(oe=al(_e,R*4))!==B;++R)ie.push(oe);v(al(_e,se-4),ae-1,Q,se,ie)}}function N(W,ae,Q,se,ie){var oe=[],_e=[];ie||(ie=[]);var H=se-1,R=0,q=0;for(R=ae;R>=0;){ie[R]=!0,oe[oe.length]=R,_e.push(W[R]);var K=Q[Math.floor(R*4/se)];if(q=R*4&H,se<4+q)throw new Error("FAT boundary crossed: "+R+" 4 "+se);if(!W[K])break;R=al(W[K],q)}return{nodes:oe,data:t6([_e])}}function k(W,ae,Q,se){var ie=W.length,oe=[],_e=[],H=[],R=[],q=se-1,K=0,le=0,ce=0,fe=0;for(K=0;K<ie;++K)if(H=[],ce=K+ae,ce>=ie&&(ce-=ie),!_e[ce]){R=[];var ge=[];for(le=ce;le>=0;){ge[le]=!0,_e[le]=!0,H[H.length]=le,R.push(W[le]);var ve=Q[Math.floor(le*4/se)];if(fe=le*4&q,se<4+fe)throw new Error("FAT boundary crossed: "+le+" 4 "+se);if(!W[ve]||(le=al(W[ve],fe),ge[le]))break}oe[ce]={nodes:H,data:t6([R])}}return oe}function j(W,ae,Q,se,ie,oe,_e,H){for(var R=0,q=se.length?2:0,K=ae[W].data,le=0,ce=0,fe;le<K.length;le+=128){var ge=K.slice(le,le+128);Bn(ge,64),ce=ge.read_shift(2),fe=ik(ge,0,ce-q),se.push(fe);var ve={name:fe,type:ge.read_shift(1),color:ge.read_shift(1),L:ge.read_shift(4,"i"),R:ge.read_shift(4,"i"),C:ge.read_shift(4,"i"),clsid:ge.read_shift(16),state:ge.read_shift(4,"i"),start:0,size:0},Te=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);Te!==0&&(ve.ct=A(ge,ge.l-8));var Re=ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2)+ge.read_shift(2);Re!==0&&(ve.mt=A(ge,ge.l-8)),ve.start=ge.read_shift(4,"i"),ve.size=ge.read_shift(4,"i"),ve.size<0&&ve.start<0&&(ve.size=ve.type=0,ve.start=B,ve.name=""),ve.type===5?(R=ve.start,ie>0&&R!==B&&(ae[R].name="!StreamData")):ve.size>=4096?(ve.storage="fat",ae[ve.start]===void 0&&(ae[ve.start]=N(Q,ve.start,ae.fat_addrs,ae.ssz)),ae[ve.start].name=ve.name,ve.content=ae[ve.start].data.slice(0,ve.size)):(ve.storage="minifat",ve.size<0?ve.size=0:R!==B&&ve.start!==B&&ae[R]&&(ve.content=y(ve,ae[R].data,(ae[H]||{}).data))),ve.content&&Bn(ve.content,0),oe[fe]=ve,_e.push(ve)}}function A(W,ae){return new Date(($a(W,ae+4)/1e7*Math.pow(2,32)+$a(W,ae)/1e7-11644473600)*1e3)}function S(W,ae){return d(),f(u.readFileSync(W),ae)}function E(W,ae){var Q=ae&&ae.type;switch(Q||sr&&Buffer.isBuffer(W)&&(Q="buffer"),Q||"base64"){case"file":return S(W,ae);case"base64":return f(Ts(Ka(W)),ae);case"binary":return f(Ts(W),ae)}return f(W,ae)}function _(W,ae){var Q=ae||{},se=Q.root||"Root Entry";if(W.FullPaths||(W.FullPaths=[]),W.FileIndex||(W.FileIndex=[]),W.FullPaths.length!==W.FileIndex.length)throw new Error("inconsistent CFB structure");W.FullPaths.length===0&&(W.FullPaths[0]=se+"/",W.FileIndex[0]={name:se,type:5}),Q.CLSID&&(W.FileIndex[0].clsid=Q.CLSID),T(W)}function T(W){var ae="Sh33tJ5";if(!lr.find(W,"/"+ae)){var Q=mn(4);Q[0]=55,Q[1]=Q[3]=50,Q[2]=54,W.FileIndex.push({name:ae,type:2,content:Q,size:4,L:69,R:69,C:69}),W.FullPaths.push(W.FullPaths[0]+ae),D(W)}}function D(W,ae){_(W);for(var Q=!1,se=!1,ie=W.FullPaths.length-1;ie>=0;--ie){var oe=W.FileIndex[ie];switch(oe.type){case 0:se?Q=!0:(W.FileIndex.pop(),W.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(oe.R*oe.L*oe.C)&&(Q=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(Q=!0);break;default:Q=!0;break}}if(!(!Q&&!ae)){var _e=new Date(1987,1,19),H=0,R=Object.create?Object.create(null):{},q=[];for(ie=0;ie<W.FullPaths.length;++ie)R[W.FullPaths[ie]]=!0,W.FileIndex[ie].type!==0&&q.push([W.FullPaths[ie],W.FileIndex[ie]]);for(ie=0;ie<q.length;++ie){var K=n(q[ie][0]);se=R[K],se||(q.push([K,{name:s(K).replace("/",""),type:1,clsid:re,ct:_e,mt:_e,content:null}]),R[K]=!0)}for(q.sort(function(fe,ge){return r(fe[0],ge[0])}),W.FullPaths=[],W.FileIndex=[],ie=0;ie<q.length;++ie)W.FullPaths[ie]=q[ie][0],W.FileIndex[ie]=q[ie][1];for(ie=0;ie<q.length;++ie){var le=W.FileIndex[ie],ce=W.FullPaths[ie];if(le.name=s(ce).replace("/",""),le.L=le.R=le.C=-(le.color=1),le.size=le.content?le.content.length:0,le.start=0,le.clsid=le.clsid||re,ie===0)le.C=q.length>1?1:-1,le.size=0,le.type=5;else if(ce.slice(-1)=="/"){for(H=ie+1;H<q.length&&n(W.FullPaths[H])!=ce;++H);for(le.C=H>=q.length?-1:H,H=ie+1;H<q.length&&n(W.FullPaths[H])!=n(ce);++H);le.R=H>=q.length?-1:H,le.type=1}else n(W.FullPaths[ie+1]||"")==n(ce)&&(le.R=ie+1),le.type=2}}}function F(W,ae){var Q=ae||{};if(Q.fileType=="mad")return wt(W,Q);switch(D(W),Q.fileType){case"zip":return it(W,Q)}var se=(function(fe){for(var ge=0,ve=0,Te=0;Te<fe.FileIndex.length;++Te){var Re=fe.FileIndex[Te];if(Re.content){var st=Re.content.length;st>0&&(st<4096?ge+=st+63>>6:ve+=st+511>>9)}}for(var He=fe.FullPaths.length+3>>2,Ot=ge+7>>3,ot=ge+127>>7,pt=Ot+ve+He+ot,Ct=pt+127>>7,Nt=Ct<=109?0:Math.ceil((Ct-109)/127);pt+Ct+Nt+127>>7>Ct;)Nt=++Ct<=109?0:Math.ceil((Ct-109)/127);var _t=[1,Nt,Ct,ot,He,ve,ge,0];return fe.FileIndex[0].size=ge<<6,_t[7]=(fe.FileIndex[0].start=_t[0]+_t[1]+_t[2]+_t[3]+_t[4]+_t[5])+(_t[6]+7>>3),_t})(W),ie=mn(se[7]<<9),oe=0,_e=0;{for(oe=0;oe<8;++oe)ie.write_shift(1,Y[oe]);for(oe=0;oe<8;++oe)ie.write_shift(2,0);for(ie.write_shift(2,62),ie.write_shift(2,3),ie.write_shift(2,65534),ie.write_shift(2,9),ie.write_shift(2,6),oe=0;oe<3;++oe)ie.write_shift(2,0);for(ie.write_shift(4,0),ie.write_shift(4,se[2]),ie.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),ie.write_shift(4,0),ie.write_shift(4,4096),ie.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:B),ie.write_shift(4,se[3]),ie.write_shift(-4,se[1]?se[0]-1:B),ie.write_shift(4,se[1]),oe=0;oe<109;++oe)ie.write_shift(-4,oe<se[2]?se[1]+oe:-1)}if(se[1])for(_e=0;_e<se[1];++_e){for(;oe<236+_e*127;++oe)ie.write_shift(-4,oe<se[2]?se[1]+oe:-1);ie.write_shift(-4,_e===se[1]-1?B:_e+1)}var H=function(fe){for(_e+=fe;oe<_e-1;++oe)ie.write_shift(-4,oe+1);fe&&(++oe,ie.write_shift(-4,B))};for(_e=oe=0,_e+=se[1];oe<_e;++oe)ie.write_shift(-4,X.DIFSECT);for(_e+=se[2];oe<_e;++oe)ie.write_shift(-4,X.FATSECT);H(se[3]),H(se[4]);for(var R=0,q=0,K=W.FileIndex[0];R<W.FileIndex.length;++R)K=W.FileIndex[R],K.content&&(q=K.content.length,!(q<4096)&&(K.start=_e,H(q+511>>9)));for(H(se[6]+7>>3);ie.l&511;)ie.write_shift(-4,X.ENDOFCHAIN);for(_e=oe=0,R=0;R<W.FileIndex.length;++R)K=W.FileIndex[R],K.content&&(q=K.content.length,!(!q||q>=4096)&&(K.start=_e,H(q+63>>6)));for(;ie.l&511;)ie.write_shift(-4,X.ENDOFCHAIN);for(oe=0;oe<se[4]<<2;++oe){var le=W.FullPaths[oe];if(!le||le.length===0){for(R=0;R<17;++R)ie.write_shift(4,0);for(R=0;R<3;++R)ie.write_shift(4,-1);for(R=0;R<12;++R)ie.write_shift(4,0);continue}K=W.FileIndex[oe],oe===0&&(K.start=K.size?K.start-1:B);var ce=oe===0&&Q.root||K.name;if(q=2*(ce.length+1),ie.write_shift(64,ce,"utf16le"),ie.write_shift(2,q),ie.write_shift(1,K.type),ie.write_shift(1,K.color),ie.write_shift(-4,K.L),ie.write_shift(-4,K.R),ie.write_shift(-4,K.C),K.clsid)ie.write_shift(16,K.clsid,"hex");else for(R=0;R<4;++R)ie.write_shift(4,0);ie.write_shift(4,K.state||0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(4,K.start),ie.write_shift(4,K.size),ie.write_shift(4,0)}for(oe=1;oe<W.FileIndex.length;++oe)if(K=W.FileIndex[oe],K.size>=4096)if(ie.l=K.start+1<<9,sr&&Buffer.isBuffer(K.content))K.content.copy(ie,ie.l,0,K.size),ie.l+=K.size+511&-512;else{for(R=0;R<K.size;++R)ie.write_shift(1,K.content[R]);for(;R&511;++R)ie.write_shift(1,0)}for(oe=1;oe<W.FileIndex.length;++oe)if(K=W.FileIndex[oe],K.size>0&&K.size<4096)if(sr&&Buffer.isBuffer(K.content))K.content.copy(ie,ie.l,0,K.size),ie.l+=K.size+63&-64;else{for(R=0;R<K.size;++R)ie.write_shift(1,K.content[R]);for(;R&63;++R)ie.write_shift(1,0)}if(sr)ie.l=ie.length;else for(;ie.l<ie.length;)ie.write_shift(1,0);return ie}function P(W,ae){var Q=W.FullPaths.map(function(R){return R.toUpperCase()}),se=Q.map(function(R){var q=R.split("/");return q[q.length-(R.slice(-1)=="/"?2:1)]}),ie=!1;ae.charCodeAt(0)===47?(ie=!0,ae=Q[0].slice(0,-1)+ae):ie=ae.indexOf("/")!==-1;var oe=ae.toUpperCase(),_e=ie===!0?Q.indexOf(oe):se.indexOf(oe);if(_e!==-1)return W.FileIndex[_e];var H=!oe.match(Cd);for(oe=oe.replace(xa,""),H&&(oe=oe.replace(Cd,"!")),_e=0;_e<Q.length;++_e)if((H?Q[_e].replace(Cd,"!"):Q[_e]).replace(xa,"")==oe||(H?se[_e].replace(Cd,"!"):se[_e]).replace(xa,"")==oe)return W.FileIndex[_e];return null}var I=64,B=-2,z="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ne(W,ae,Q){d();var se=F(W,Q);u.writeFileSync(ae,se)}function Z(W){for(var ae=new Array(W.length),Q=0;Q<W.length;++Q)ae[Q]=String.fromCharCode(W[Q]);return ae.join("")}function me(W,ae){var Q=F(W,ae);switch(ae&&ae.type||"buffer"){case"file":return d(),u.writeFileSync(ae.filename,Q),Q;case"binary":return typeof Q=="string"?Q:Z(Q);case"base64":return FP(typeof Q=="string"?Q:Z(Q));case"buffer":if(sr)return Buffer.isBuffer(Q)?Q:Il(Q);case"array":return typeof Q=="string"?Ts(Q):Q}return Q}var G;function L(W){try{var ae=W.InflateRaw,Q=new ae;if(Q._processChunk(new Uint8Array([3,0]),Q._finishFlushFlag),Q.bytesRead)G=W;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function ee(W,ae){if(!G)return ht(W,ae);var Q=G.InflateRaw,se=new Q,ie=se._processChunk(W.slice(W.l),se._finishFlushFlag);return W.l+=se.bytesRead,ie}function te(W){return G?G.deflateRawSync(W):xt(W)}var J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Oe(W){var ae=(W<<1|W<<11)&139536|(W<<5|W<<15)&558144;return(ae>>16|ae>>8|ae)&255}for(var pe=typeof Uint8Array<"u",xe=pe?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)xe[Fe]=Oe(Fe);function O(W,ae){var Q=xe[W&255];return ae<=8?Q>>>8-ae:(Q=Q<<8|xe[W>>8&255],ae<=16?Q>>>16-ae:(Q=Q<<8|xe[W>>16&255],Q>>>24-ae))}function be(W,ae){var Q=ae&7,se=ae>>>3;return(W[se]|(Q<=6?0:W[se+1]<<8))>>>Q&3}function De(W,ae){var Q=ae&7,se=ae>>>3;return(W[se]|(Q<=5?0:W[se+1]<<8))>>>Q&7}function qe(W,ae){var Q=ae&7,se=ae>>>3;return(W[se]|(Q<=4?0:W[se+1]<<8))>>>Q&15}function rt(W,ae){var Q=ae&7,se=ae>>>3;return(W[se]|(Q<=3?0:W[se+1]<<8))>>>Q&31}function Be(W,ae){var Q=ae&7,se=ae>>>3;return(W[se]|(Q<=1?0:W[se+1]<<8))>>>Q&127}function Je(W,ae,Q){var se=ae&7,ie=ae>>>3,oe=(1<<Q)-1,_e=W[ie]>>>se;return Q<8-se||(_e|=W[ie+1]<<8-se,Q<16-se)||(_e|=W[ie+2]<<16-se,Q<24-se)||(_e|=W[ie+3]<<24-se),_e&oe}function Xt(W,ae,Q){var se=ae&7,ie=ae>>>3;return se<=5?W[ie]|=(Q&7)<<se:(W[ie]|=Q<<se&255,W[ie+1]=(Q&7)>>8-se),ae+3}function Ce(W,ae,Q){var se=ae&7,ie=ae>>>3;return Q=(Q&1)<<se,W[ie]|=Q,ae+1}function Me(W,ae,Q){var se=ae&7,ie=ae>>>3;return Q<<=se,W[ie]|=Q&255,Q>>>=8,W[ie+1]=Q,ae+8}function Pt(W,ae,Q){var se=ae&7,ie=ae>>>3;return Q<<=se,W[ie]|=Q&255,Q>>>=8,W[ie+1]=Q&255,W[ie+2]=Q>>>8,ae+16}function We(W,ae){var Q=W.length,se=2*Q>ae?2*Q:ae+5,ie=0;if(Q>=ae)return W;if(sr){var oe=$P(se);if(W.copy)W.copy(oe);else for(;ie<W.length;++ie)oe[ie]=W[ie];return oe}else if(pe){var _e=new Uint8Array(se);if(_e.set)_e.set(W);else for(;ie<Q;++ie)_e[ie]=W[ie];return _e}return W.length=se,W}function ut(W){for(var ae=new Array(W),Q=0;Q<W;++Q)ae[Q]=0;return ae}function nt(W,ae,Q){var se=1,ie=0,oe=0,_e=0,H=0,R=W.length,q=pe?new Uint16Array(32):ut(32);for(oe=0;oe<32;++oe)q[oe]=0;for(oe=R;oe<Q;++oe)W[oe]=0;R=W.length;var K=pe?new Uint16Array(R):ut(R);for(oe=0;oe<R;++oe)q[ie=W[oe]]++,se<ie&&(se=ie),K[oe]=0;for(q[0]=0,oe=1;oe<=se;++oe)q[oe+16]=H=H+q[oe-1]<<1;for(oe=0;oe<R;++oe)H=W[oe],H!=0&&(K[oe]=q[H+16]++);var le=0;for(oe=0;oe<R;++oe)if(le=W[oe],le!=0)for(H=O(K[oe],se)>>se-le,_e=(1<<se+4-le)-1;_e>=0;--_e)ae[H|_e<<le]=le&15|oe<<4;return se}var qt=pe?new Uint16Array(512):ut(512),ct=pe?new Uint16Array(32):ut(32);if(!pe){for(var dt=0;dt<512;++dt)qt[dt]=0;for(dt=0;dt<32;++dt)ct[dt]=0}(function(){for(var W=[],ae=0;ae<32;ae++)W.push(5);nt(W,ct,32);var Q=[];for(ae=0;ae<=143;ae++)Q.push(8);for(;ae<=255;ae++)Q.push(9);for(;ae<=279;ae++)Q.push(7);for(;ae<=287;ae++)Q.push(8);nt(Q,qt,288)})();var ur=(function(){for(var ae=pe?new Uint8Array(32768):[],Q=0,se=0;Q<Se.length-1;++Q)for(;se<Se[Q+1];++se)ae[se]=Q;for(;se<32768;++se)ae[se]=29;var ie=pe?new Uint8Array(259):[];for(Q=0,se=0;Q<he.length-1;++Q)for(;se<he[Q+1];++se)ie[se]=Q;function oe(H,R){for(var q=0;q<H.length;){var K=Math.min(65535,H.length-q),le=q+K==H.length;for(R.write_shift(1,+le),R.write_shift(2,K),R.write_shift(2,~K&65535);K-- >0;)R[R.l++]=H[q++]}return R.l}function _e(H,R){for(var q=0,K=0,le=pe?new Uint16Array(32768):[];K<H.length;){var ce=Math.min(65535,H.length-K);if(ce<10){for(q=Xt(R,q,+(K+ce==H.length)),q&7&&(q+=8-(q&7)),R.l=q/8|0,R.write_shift(2,ce),R.write_shift(2,~ce&65535);ce-- >0;)R[R.l++]=H[K++];q=R.l*8;continue}q=Xt(R,q,+(K+ce==H.length)+2);for(var fe=0;ce-- >0;){var ge=H[K];fe=(fe<<5^ge)&32767;var ve=-1,Te=0;if((ve=le[fe])&&(ve|=K&-32768,ve>K&&(ve-=32768),ve<K))for(;H[ve+Te]==H[K+Te]&&Te<250;)++Te;if(Te>2){ge=ie[Te],ge<=22?q=Me(R,q,xe[ge+1]>>1)-1:(Me(R,q,3),q+=5,Me(R,q,xe[ge-23]>>5),q+=3);var Re=ge<8?0:ge-4>>2;Re>0&&(Pt(R,q,Te-he[ge]),q+=Re),ge=ae[K-ve],q=Me(R,q,xe[ge]>>3),q-=3;var st=ge<4?0:ge-2>>1;st>0&&(Pt(R,q,K-ve-Se[ge]),q+=st);for(var He=0;He<Te;++He)le[fe]=K&32767,fe=(fe<<5^H[K])&32767,++K;ce-=Te-1}else ge<=143?ge=ge+48:q=Ce(R,q,1),q=Me(R,q,xe[ge]),le[fe]=K&32767,++K}q=Me(R,q,0)-1}return R.l=(q+7)/8|0,R.l}return function(R,q){return R.length<8?oe(R,q):_e(R,q)}})();function xt(W){var ae=mn(50+Math.floor(W.length*1.1)),Q=ur(W,ae);return ae.slice(0,Q)}var Qt=pe?new Uint16Array(32768):ut(32768),Nr=pe?new Uint16Array(32768):ut(32768),or=pe?new Uint16Array(128):ut(128),kr=1,_r=1;function nr(W,ae){var Q=rt(W,ae)+257;ae+=5;var se=rt(W,ae)+1;ae+=5;var ie=qe(W,ae)+4;ae+=4;for(var oe=0,_e=pe?new Uint8Array(19):ut(19),H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=1,q=pe?new Uint8Array(8):ut(8),K=pe?new Uint8Array(8):ut(8),le=_e.length,ce=0;ce<ie;++ce)_e[J[ce]]=oe=De(W,ae),R<oe&&(R=oe),q[oe]++,ae+=3;var fe=0;for(q[0]=0,ce=1;ce<=R;++ce)K[ce]=fe=fe+q[ce-1]<<1;for(ce=0;ce<le;++ce)(fe=_e[ce])!=0&&(H[ce]=K[fe]++);var ge=0;for(ce=0;ce<le;++ce)if(ge=_e[ce],ge!=0){fe=xe[H[ce]]>>8-ge;for(var ve=(1<<7-ge)-1;ve>=0;--ve)or[fe|ve<<ge]=ge&7|ce<<3}var Te=[];for(R=1;Te.length<Q+se;)switch(fe=or[Be(W,ae)],ae+=fe&7,fe>>>=3){case 16:for(oe=3+be(W,ae),ae+=2,fe=Te[Te.length-1];oe-- >0;)Te.push(fe);break;case 17:for(oe=3+De(W,ae),ae+=3;oe-- >0;)Te.push(0);break;case 18:for(oe=11+Be(W,ae),ae+=7;oe-- >0;)Te.push(0);break;default:Te.push(fe),R<fe&&(R=fe);break}var Re=Te.slice(0,Q),st=Te.slice(Q);for(ce=Q;ce<286;++ce)Re[ce]=0;for(ce=se;ce<30;++ce)st[ce]=0;return kr=nt(Re,Qt,286),_r=nt(st,Nr,30),ae}function Mr(W,ae){if(W[0]==3&&!(W[1]&3))return[_o(ae),2];for(var Q=0,se=0,ie=$P(ae||1<<18),oe=0,_e=ie.length>>>0,H=0,R=0;(se&1)==0;){if(se=De(W,Q),Q+=3,se>>>1)se>>1==1?(H=9,R=5):(Q=nr(W,Q),H=kr,R=_r);else{Q&7&&(Q+=8-(Q&7));var q=W[Q>>>3]|W[(Q>>>3)+1]<<8;if(Q+=32,q>0)for(!ae&&_e<oe+q&&(ie=We(ie,oe+q),_e=ie.length);q-- >0;)ie[oe++]=W[Q>>>3],Q+=8;continue}for(;;){!ae&&_e<oe+32767&&(ie=We(ie,oe+32767),_e=ie.length);var K=Je(W,Q,H),le=se>>>1==1?qt[K]:Qt[K];if(Q+=le&15,le>>>=4,(le>>>8&255)===0)ie[oe++]=le;else{if(le==256)break;le-=257;var ce=le<8?0:le-4>>2;ce>5&&(ce=0);var fe=oe+he[le];ce>0&&(fe+=Je(W,Q,ce),Q+=ce),K=Je(W,Q,R),le=se>>>1==1?ct[K]:Nr[K],Q+=le&15,le>>>=4;var ge=le<4?0:le-2>>1,ve=Se[le];for(ge>0&&(ve+=Je(W,Q,ge),Q+=ge),!ae&&_e<fe&&(ie=We(ie,fe+100),_e=ie.length);oe<fe;)ie[oe]=ie[oe-ve],++oe}}}return ae?[ie,Q+7>>>3]:[ie.slice(0,oe),Q+7>>>3]}function ht(W,ae){var Q=W.slice(W.l||0),se=Mr(Q,ae);return W.l+=se[1],se[0]}function Er(W,ae){if(W)typeof console<"u"&&console.error(ae);else throw new Error(ae)}function Ne(W,ae){var Q=W;Bn(Q,0);var se=[],ie=[],oe={FileIndex:se,FullPaths:ie};_(oe,{root:ae.root});for(var _e=Q.length-4;(Q[_e]!=80||Q[_e+1]!=75||Q[_e+2]!=5||Q[_e+3]!=6)&&_e>=0;)--_e;Q.l=_e+4,Q.l+=4;var H=Q.read_shift(2);Q.l+=6;var R=Q.read_shift(4);for(Q.l=R,_e=0;_e<H;++_e){Q.l+=20;var q=Q.read_shift(4),K=Q.read_shift(4),le=Q.read_shift(2),ce=Q.read_shift(2),fe=Q.read_shift(2);Q.l+=8;var ge=Q.read_shift(4),ve=l(Q.slice(Q.l+le,Q.l+le+ce));Q.l+=le+ce+fe;var Te=Q.l;Q.l=ge+4,ze(Q,q,K,oe,ve),Q.l=Te}return oe}function ze(W,ae,Q,se,ie){W.l+=2;var oe=W.read_shift(2),_e=W.read_shift(2),H=o(W);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var R=W.read_shift(4),q=W.read_shift(4),K=W.read_shift(4),le=W.read_shift(2),ce=W.read_shift(2),fe="",ge=0;ge<le;++ge)fe+=String.fromCharCode(W[W.l++]);if(ce){var ve=l(W.slice(W.l,W.l+ce));(ve[21589]||{}).mt&&(H=ve[21589].mt),((ie||{})[21589]||{}).mt&&(H=ie[21589].mt)}W.l+=ce;var Te=W.slice(W.l,W.l+q);switch(_e){case 8:Te=ee(W,K);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var Re=!1;oe&8&&(R=W.read_shift(4),R==134695760&&(R=W.read_shift(4),Re=!0),q=W.read_shift(4),K=W.read_shift(4)),q!=ae&&Er(Re,"Bad compressed size: "+ae+" != "+q),K!=Q&&Er(Re,"Bad uncompressed size: "+Q+" != "+K),je(se,fe,Te,{unsafe:!0,mt:H})}function it(W,ae){var Q=ae||{},se=[],ie=[],oe=mn(1),_e=Q.compression?8:0,H=0,R=0,q=0,K=0,le=0,ce=W.FullPaths[0],fe=ce,ge=W.FileIndex[0],ve=[],Te=0;for(R=1;R<W.FullPaths.length;++R)if(fe=W.FullPaths[R].slice(ce.length),ge=W.FileIndex[R],!(!ge.size||!ge.content||fe=="Sh33tJ5")){var Re=K,st=mn(fe.length);for(q=0;q<fe.length;++q)st.write_shift(1,fe.charCodeAt(q)&127);st=st.slice(0,st.l),ve[le]=Ioe.buf(ge.content,0);var He=ge.content;_e==8&&(He=te(He)),oe=mn(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,H),oe.write_shift(2,_e),ge.mt?i(oe,ge.mt):oe.write_shift(4,0),oe.write_shift(-4,ve[le]),oe.write_shift(4,He.length),oe.write_shift(4,ge.content.length),oe.write_shift(2,st.length),oe.write_shift(2,0),K+=oe.length,se.push(oe),K+=st.length,se.push(st),K+=He.length,se.push(He),oe=mn(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,H),oe.write_shift(2,_e),oe.write_shift(4,0),oe.write_shift(-4,ve[le]),oe.write_shift(4,He.length),oe.write_shift(4,ge.content.length),oe.write_shift(2,st.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Re),Te+=oe.l,ie.push(oe),Te+=st.length,ie.push(st),++le}return oe=mn(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,le),oe.write_shift(2,le),oe.write_shift(4,Te),oe.write_shift(4,K),oe.write_shift(2,0),mo([mo(se),mo(ie),oe])}var tt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function It(W,ae){if(W.ctype)return W.ctype;var Q=W.name||"",se=Q.match(/\.([^\.]+)$/);return se&&tt[se[1]]||ae&&(se=(Q=ae).match(/[\.\\]([^\.\\])+$/),se&&tt[se[1]])?tt[se[1]]:"application/octet-stream"}function Ue(W){for(var ae=FP(W),Q=[],se=0;se<ae.length;se+=76)Q.push(ae.slice(se,se+76));return Q.join(`\r
`)+`\r
`}function St(W){var ae=W.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(q){var K=q.charCodeAt(0).toString(16).toUpperCase();return"="+(K.length==1?"0"+K:K)});ae=ae.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ae.charAt(0)==`
`&&(ae="=0D"+ae.slice(1)),ae=ae.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Q=[],se=ae.split(`\r
`),ie=0;ie<se.length;++ie){var oe=se[ie];if(oe.length==0){Q.push("");continue}for(var _e=0;_e<oe.length;){var H=76,R=oe.slice(_e,_e+H);R.charAt(H-1)=="="?H--:R.charAt(H-2)=="="?H-=2:R.charAt(H-3)=="="&&(H-=3),R=oe.slice(_e,_e+H),_e+=H,_e<oe.length&&(R+="="),Q.push(R)}}return Q.join(`\r
`)}function Kt(W){for(var ae=[],Q=0;Q<W.length;++Q){for(var se=W[Q];Q<=W.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+W[++Q];ae.push(se)}for(var ie=0;ie<ae.length;++ie)ae[ie]=ae[ie].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return Ts(ae.join(`\r
`))}function Qe(W,ae,Q){for(var se="",ie="",oe="",_e,H=0;H<10;++H){var R=ae[H];if(!R||R.match(/^\s*$/))break;var q=R.match(/^(.*?):\s*([^\s].*)$/);if(q)switch(q[1].toLowerCase()){case"content-location":se=q[2].trim();break;case"content-type":oe=q[2].trim();break;case"content-transfer-encoding":ie=q[2].trim();break}}switch(++H,ie.toLowerCase()){case"base64":_e=Ts(Ka(ae.slice(H).join("")));break;case"quoted-printable":_e=Kt(ae.slice(H));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ie)}var K=je(W,se.slice(Q.length),_e,{unsafe:!0});oe&&(K.ctype=oe)}function Ie(W,ae){if(Z(W.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Q=ae&&ae.root||"",se=(sr&&Buffer.isBuffer(W)?W.toString("binary"):Z(W)).split(`\r
`),ie=0,oe="";for(ie=0;ie<se.length;++ie)if(oe=se[ie],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),Q||(Q=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,Q.length)!=Q))for(;Q.length>0&&(Q=Q.slice(0,Q.length-1),Q=Q.slice(0,Q.lastIndexOf("/")+1),oe.slice(0,Q.length)!=Q););var _e=(se[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var H="--"+(_e[1]||""),R=[],q=[],K={FileIndex:R,FullPaths:q};_(K);var le,ce=0;for(ie=0;ie<se.length;++ie){var fe=se[ie];fe!==H&&fe!==H+"--"||(ce++&&Qe(K,se.slice(le,ie),Q),le=ie)}return K}function wt(W,ae){var Q=ae||{},se=Q.boundary||"SheetJS";se="------="+se;for(var ie=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],oe=W.FullPaths[0],_e=oe,H=W.FileIndex[0],R=1;R<W.FullPaths.length;++R)if(_e=W.FullPaths[R].slice(oe.length),H=W.FileIndex[R],!(!H.size||!H.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Te){return"_x"+Te.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Te){return"_u"+Te.charCodeAt(0).toString(16)+"_"});for(var q=H.content,K=sr&&Buffer.isBuffer(q)?q.toString("binary"):Z(q),le=0,ce=Math.min(1024,K.length),fe=0,ge=0;ge<=ce;++ge)(fe=K.charCodeAt(ge))>=32&&fe<128&&++le;var ve=le>=ce*4/5;ie.push(se),ie.push("Content-Location: "+(Q.root||"file:///C:/SheetJS/")+_e),ie.push("Content-Transfer-Encoding: "+(ve?"quoted-printable":"base64")),ie.push("Content-Type: "+It(H,_e)),ie.push(""),ie.push(ve?St(K):Ue(K))}return ie.push(se+`--\r
`),ie.join(`\r
`)}function ft(W){var ae={};return _(ae,W),ae}function je(W,ae,Q,se){var ie=se&&se.unsafe;ie||_(W);var oe=!ie&&lr.find(W,ae);if(!oe){var _e=W.FullPaths[0];ae.slice(0,_e.length)==_e?_e=ae:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+ae).replace("//","/")),oe={name:s(ae),type:2},W.FileIndex.push(oe),W.FullPaths.push(_e),ie||lr.utils.cfb_gc(W)}return oe.content=Q,oe.size=Q?Q.length:0,se&&(se.CLSID&&(oe.clsid=se.CLSID),se.mt&&(oe.mt=se.mt),se.ct&&(oe.ct=se.ct)),oe}function ke(W,ae){_(W);var Q=lr.find(W,ae);if(Q){for(var se=0;se<W.FileIndex.length;++se)if(W.FileIndex[se]==Q)return W.FileIndex.splice(se,1),W.FullPaths.splice(se,1),!0}return!1}function Le(W,ae,Q){_(W);var se=lr.find(W,ae);if(se){for(var ie=0;ie<W.FileIndex.length;++ie)if(W.FileIndex[ie]==se)return W.FileIndex[ie].name=s(Q),W.FullPaths[ie]=Q,!0}return!1}function jt(W){D(W,!0)}return t.find=P,t.read=E,t.parse=f,t.write=me,t.writeFile=ne,t.utils={cfb_new:ft,cfb_add:je,cfb_del:ke,cfb_mov:Le,cfb_gc:jt,ReadShift:Ud,CheckField:ZF,prep_blob:Bn,bconcat:mo,use_zlib:L,_deflateRaw:xt,_inflateRaw:ht,consts:X},t})();function Doe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ti(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function rk(e){for(var t=[],r=ti(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var um=new Date(1899,11,30,0,0,0);function ya(e,t){var r=e.getTime(),n=um.getTime()+(e.getTimezoneOffset()-um.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var PF=new Date,Moe=um.getTime()+(PF.getTimezoneOffset()-um.getTimezoneOffset())*6e4,WP=PF.getTimezoneOffset();function pg(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Moe),t.getTimezoneOffset()!==WP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-WP)*6e4),t}function Roe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var VP=new Date("2017-02-19T19:06:09.000Z"),IF=isNaN(VP.getFullYear())?new Date("2/19/17"):VP,Foe=IF.getFullYear()==2017;function In(e,t){var r=new Date(e);if(Foe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(IF.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Sl(e,t){if(sr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Ad(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Ad(vF(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Ad(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Ad(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function zn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=zn(e[r]));return t}function Gr(e,t){for(var r="";r.length<t;)r+=e;return r}function Ds(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var $oe=["january","february","march","april","may","june","july","august","september","october","november","december"];function hu(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&$oe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Loe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function DF(e){return e?e.content&&e.type?Sl(e.content,!0):e.data?Ed(e.data):e.asNodeBuffer&&sr?Ed(e.asNodeBuffer().toString("binary")):e.asBinary?Ed(e.asBinary()):e._data&&e._data.getContent?Ed(Sl(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function MF(e){if(!e)return null;if(e.data)return MP(e.data);if(e.asNodeBuffer&&sr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?MP(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Boe(e){return e&&e.name.slice(-4)===".bin"?MF(e):DF(e)}function as(e,t){for(var r=e.FullPaths||ti(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function nk(e,t){var r=as(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function nn(e,t,r){if(!r)return Boe(nk(e,t));if(!t)return null;try{return nn(e,t)}catch{return null}}function Ha(e,t,r){if(!r)return DF(nk(e,t));if(!t)return null;try{return Ha(e,t)}catch{return null}}function Uoe(e,t,r){return MF(nk(e,t))}function GP(e){for(var t=e.FullPaths||ti(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Hoe(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return sr?n=Il(r):n=ooe(r),lr.utils.cfb_add(e,t,n)}lr.utils.cfb_add(e,t,r)}else e.file(t,r)}function RF(e,t){switch(t.type){case"base64":return lr.read(e,{type:"base64"});case"binary":return lr.read(e,{type:"binary"});case"buffer":case"array":return lr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Td(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var FF=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,qoe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,YP=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,zoe=/<[^>]*>/g,ia=FF.match(YP)?YP:zoe,Koe=/<\w*:/,Woe=/<(\/?)\w+:/;function Bt(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(qoe),l=0,u="",d=0,f="",p="",m=1;if(o)for(d=0;d!=o.length;++d){for(p=o[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(m=(s=p.charCodeAt(i+1))==34||s==39?1:0,u=p.slice(i+1+m,p.length-m),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=u,n[f.toLowerCase()]=u;else{var x=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[x]&&f.slice(l-3,l)=="ext")continue;n[x]=u,n[x.toLowerCase()]=u}}return n}function si(e){return e.replace(Woe,"<$1")}var $F={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Voe=rk($F),hr=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,u){return $F[l]||String.fromCharCode(parseInt(u,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),Goe=/[&<>'"]/g,Yoe=/[\u0000-\u001f]/g;function ak(e){var t=e+"";return t.replace(Goe,function(r){return Voe[r]}).replace(/\n/g,"<br/>").replace(Yoe,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var XP=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Br(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function yw(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function JP(e){var t=_o(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function QP(e){return Il(e,"binary").toString("utf8")}var $0="foo bar baz",Dr=sr&&(QP($0)==yw($0)&&QP||JP($0)==yw($0)&&JP)||yw,Ad=sr?function(e){return Il(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},zh=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),LF=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Xoe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Joe=/<\/?(?:vt:)?variant>/g,Qoe=/<(?:vt:)([^>]*)>([\s\S]*)</;function ZP(e,t){var r=Bt(e),n=e.match(Xoe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Joe,"").match(Qoe);o&&s.push({v:Dr(o[2]),t:o[1]})}),s}var Zoe=/(^\s|\s$|\n)/;function ele(e){return ti(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function tle(e,t,r){return"<"+e+(r!=null?ele(r):"")+(t!=null?(t.match(Zoe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function sk(e){if(sr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Dr(Dl(ZN(e)));throw new Error("Bad input format: expected Buffer or string")}var Kh=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,rle={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},nle=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function ale(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function sle(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var e6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},t6=sr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Il(t)})):e6(e)}:e6,r6=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(_i(e,s)));return n.join("").replace(xa,"")},ik=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(xa,""):r6(e,t,r)}:r6,n6=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},BF=sr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):n6(e,t,r)}:n6,a6=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Nc(e,s)));return n.join("")},lf=sr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):a6(t,r,n)}:a6,UF=function(e,t){var r=$a(e,t);return r>0?lf(e,t+4,t+4+r-1):""},HF=UF,qF=function(e,t){var r=$a(e,t);return r>0?lf(e,t+4,t+4+r-1):""},zF=qF,KF=function(e,t){var r=2*$a(e,t);return r>0?lf(e,t+4,t+4+r-1):""},WF=KF,VF=function(t,r){var n=$a(t,r);return n>0?ik(t,r+4,r+4+n):""},GF=VF,YF=function(e,t){var r=$a(e,t);return r>0?lf(e,t+4,t+4+r):""},XF=YF,JF=function(e,t){return ale(e,t)},dm=JF,QF=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};sr&&(HF=function(t,r){if(!Buffer.isBuffer(t))return UF(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zF=function(t,r){if(!Buffer.isBuffer(t))return qF(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},WF=function(t,r){if(!Buffer.isBuffer(t))return KF(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},GF=function(t,r){if(!Buffer.isBuffer(t))return VF(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},XF=function(t,r){if(!Buffer.isBuffer(t))return YF(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},dm=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):JF(t,r)},QF=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Nc=function(e,t){return e[t]},_i=function(e,t){return e[t+1]*256+e[t]},ile=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},$a=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},al=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},ole=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ud(e,t){var r="",n,s,i=[],o,l,u,d;switch(t){case"dbcs":if(d=this.l,sr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)r+=String.fromCharCode(_i(this,d)),d+=2;e*=2;break;case"utf8":r=lf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=ik(this,this.l,this.l+e);break;case"wstr":return Ud.call(this,e,"dbcs");case"lpstr-ansi":r=HF(this,this.l),e=4+$a(this,this.l);break;case"lpstr-cp":r=zF(this,this.l),e=4+$a(this,this.l);break;case"lpwstr":r=WF(this,this.l),e=4+2*$a(this,this.l);break;case"lpp4":e=4+$a(this,this.l),r=GF(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+$a(this,this.l),r=XF(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Nc(this,this.l+e++))!==0;)i.push(F0(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=_i(this,this.l+e))!==0;)i.push(F0(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Nc(this,d),this.l=d+1,l=Ud.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(F0(_i(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Nc(this,d),this.l=d+1,l=Ud.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(F0(Nc(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=Nc(this,this.l),this.l++,n;case 2:return n=(t==="i"?ile:_i)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?al:ole)(this,this.l),this.l+=4,n):(s=$a(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=dm(this,this.l):s=dm([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=BF(this,this.l,e);break}}return this.l+=e,r}var lle=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},cle=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ule=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function dle(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)ule(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,lle(this,t,this.l);break;case 8:if(n=8,r==="f"){sle(this,t,this.l);break}case 16:break;case-4:n=4,cle(this,t,this.l);break}return this.l+=n,this}function ZF(e,t){var r=BF(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Bn(e,t){e.l=t,e.read_shift=Ud,e.chk=ZF,e.write_shift=dle}function sa(e,t){e.l+=t}function mn(e){var t=_o(e);return Bn(t,0),t}function Hi(e,t,r){if(e){var n,s,i;Bn(e,e.l||0);for(var o=e.length,l=0,u=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=xm[l]||xm[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;u=e.l+i;var f=d.f&&d.f(e,i,r);if(e.l=u,t(f,d,l))return}}}function y2(){var e=[],t=sr?256:2048,r=function(d){var f=mn(d);return Bn(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),mo(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Hd(e,t,r){var n=zn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function s6(e,t,r){var n=zn(e);return n.s=Hd(n.s,t.s,r),n.e=Hd(n.e,t.s,r),n}function qd(e,t){if(e.cRel&&e.c<0)for(e=zn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=zn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Vt(e);return!e.cRel&&e.cRel!=null&&(r=ple(r)),!e.rRel&&e.rRel!=null&&(r=hle(r)),r}function vw(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+bn(e.s.c)+":"+(e.e.cRel?"":"$")+bn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Kn(e.s.r)+":"+(e.e.rRel?"":"$")+Kn(e.e.r):qd(e.s,t.biff)+":"+qd(e.e,t.biff)}function ok(e){return parseInt(fle(e),10)-1}function Kn(e){return""+(e+1)}function hle(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function fle(e){return e.replace(/\$(\d+)$/,"$1")}function lk(e){for(var t=mle(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function bn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function ple(e){return e.replace(/^([A-Z])/,"$$$1")}function mle(e){return e.replace(/^\$([A-Z])/,"$1")}function gle(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ga(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Vt(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Cu(e){var t=e.indexOf(":");return t==-1?{s:ga(e),e:ga(e)}:{s:ga(e.slice(0,t)),e:ga(e.slice(t+1))}}function cr(e,t){return typeof t>"u"||typeof t=="number"?cr(e.s,e.e):(typeof e!="string"&&(e=Vt(e)),typeof t!="string"&&(t=Vt(t)),e==t?e:e+":"+t)}function Yr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function i6(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=us(e.z,r?ya(t):t)}catch{}try{return e.w=us((e.XF||{}).numFmtId||(r?14:0),r?ya(t):t)}catch{return""+t}}function Fi(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Fl[e.v]||e.v:t==null?i6(e,e.v):i6(e,t))}function Io(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function e8(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?ga(n.origin):n.origin;o=u.r,l=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Yr(i["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(d.e.r=o=f.e.r+1)}for(var p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[p].length;++m)if(!(typeof t[p][m]>"u")){var x={v:t[p][m]},b=o+p,y=l+m;if(d.s.r>b&&(d.s.r=b),d.s.c>y&&(d.s.c=y),d.e.r<b&&(d.e.r=b),d.e.c<y&&(d.e.c=y),t[p][m]&&typeof t[p][m]=="object"&&!Array.isArray(t[p][m])&&!(t[p][m]instanceof Date))x=t[p][m];else if(Array.isArray(x.v)&&(x.f=t[p][m][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(n.nullError)x.t="e",x.v=0;else if(n.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=n.dateNF||Yt[14],n.cellDates?(x.t="d",x.w=us(x.z,ya(x.v))):(x.t="n",x.v=ya(x.v),x.w=us(x.z,x.v))):x.t="s";if(s)i[b]||(i[b]=[]),i[b][y]&&i[b][y].z&&(x.z=i[b][y].z),i[b][y]=x;else{var v=Vt({c:y,r:b});i[v]&&i[v].z&&(x.z=i[v].z),i[v]=x}}}return d.s.c<1e7&&(i["!ref"]=cr(d)),i}function Tu(e,t){return e8(null,e,t)}function xle(e){return e.read_shift(4,"i")}function aa(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function yle(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ck(e,t){var r=e.l,n=e.read_shift(1),s=aa(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),u=0;u!=l;++u)i.push(yle(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var vle=ck;function hs(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Ml(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var ble=aa;function uk(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var wle=aa,v2=uk;function dk(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?dm([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):al(t,0)>>2;return r?s/100:s}function t8(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Rl=t8;function ta(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function jle(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),u=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=ml[s];d&&(t.rgb=Vh(d));break;case 2:t.rgb=Vh([o,l,u]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Nle(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function r8(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function kle(e){return r8(e,1)}function Sle(e){return r8(e,2)}var hk=2,Sa=3,L0=11,o6=12,hm=19,B0=64,_le=65,Ele=71,Cle=4108,Tle=4126,Tn=80,n8=81,Ale=[Tn,n8],Ole={1:{n:"CodePage",t:hk},2:{n:"Category",t:Tn},3:{n:"PresentationFormat",t:Tn},4:{n:"ByteCount",t:Sa},5:{n:"LineCount",t:Sa},6:{n:"ParagraphCount",t:Sa},7:{n:"SlideCount",t:Sa},8:{n:"NoteCount",t:Sa},9:{n:"HiddenCount",t:Sa},10:{n:"MultimediaClipCount",t:Sa},11:{n:"ScaleCrop",t:L0},12:{n:"HeadingPairs",t:Cle},13:{n:"TitlesOfParts",t:Tle},14:{n:"Manager",t:Tn},15:{n:"Company",t:Tn},16:{n:"LinksUpToDate",t:L0},17:{n:"CharacterCount",t:Sa},19:{n:"SharedDoc",t:L0},22:{n:"HyperlinksChanged",t:L0},23:{n:"AppVersion",t:Sa,p:"version"},24:{n:"DigSig",t:_le},26:{n:"ContentType",t:Tn},27:{n:"ContentStatus",t:Tn},28:{n:"Language",t:Tn},29:{n:"Version",t:Tn},255:{},2147483648:{n:"Locale",t:hm},2147483651:{n:"Behavior",t:hm},1919054434:{}},Ple={1:{n:"CodePage",t:hk},2:{n:"Title",t:Tn},3:{n:"Subject",t:Tn},4:{n:"Author",t:Tn},5:{n:"Keywords",t:Tn},6:{n:"Comments",t:Tn},7:{n:"Template",t:Tn},8:{n:"LastAuthor",t:Tn},9:{n:"RevNumber",t:Tn},10:{n:"EditTime",t:B0},11:{n:"LastPrinted",t:B0},12:{n:"CreatedDate",t:B0},13:{n:"ModifiedDate",t:B0},14:{n:"PageCount",t:Sa},15:{n:"WordCount",t:Sa},16:{n:"CharCount",t:Sa},17:{n:"Thumbnail",t:Ele},18:{n:"Application",t:Tn},19:{n:"DocSecurity",t:Sa},255:{},2147483648:{n:"Locale",t:hm},2147483651:{n:"Behavior",t:hm},1919054434:{}},l6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Ile=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Dle(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Mle=Dle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ml=zn(Mle),Fl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},a8={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},c6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Rle(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Fle(e){var t=Rle();if(!e||!e.match)return t;var r={};if((e.match(ia)||[]).forEach(function(n){var s=Bt(n);switch(s[0].replace(Koe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[c6[s.ContentType]]!==void 0&&t[c6[s.ContentType]].push(s.PartName);break}}),t.xmlns!==rle.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var Ac={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function b2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function zd(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ia)||[]).forEach(function(s){var i=Bt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Td(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}var $le="application/vnd.oasis.opendocument.spreadsheet";function Lle(e,t){for(var r=sk(e),n,s;n=Kh.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Bt(n[0],!1),s.path=="/"&&s.type!==$le)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var Kd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Ble=(function(){for(var e=new Array(Kd.length),t=0;t<Kd.length;++t){var r=Kd[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function s8(e){var t={};e=Dr(e);for(var r=0;r<Kd.length;++r){var n=Kd[r],s=e.match(Ble[r]);s!=null&&s.length>0&&(t[n[1]]=hr(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=In(t[n[1]]))}return t}var Ule=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function i8(e,t,r,n){var s=[];if(typeof e=="string")s=ZP(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?ZP(t,n).map(function(f){return f.v}):t,l=0,u=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(u=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=u,r.SheetNames=o.slice(l,l+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=u,r.DefinedNames=o.slice(l,l+u);break;case"Charts":case"Diagramme":r.Chartsheets=u,r.ChartNames=o.slice(l,l+u);break}l+=u}}function Hle(e,t,r){var n={};return t||(t={}),e=Dr(e),Ule.forEach(function(s){var i=(e.match(zh(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=hr(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&i8(n.HeadingPairs,n.TitlesOfParts,t,r),t}var qle=/<[^>]+>[^<]*/g;function zle(e,t){var r={},n="",s=e.match(qle);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Bt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=hr(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),d=u[0].slice(4),f=u[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=hr(f);break;case"bool":r[n]=Br(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=In(f);break;case"cy":case"error":r[n]=hr(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,u)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var Kle={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},bw;function Wle(e,t,r){bw||(bw=rk(Kle)),t=bw[t]||t,e[t]=r}function fk(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function o8(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function l8(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function c8(e,t,r){return t===31?l8(e):o8(e,t,r)}function w2(e,t,r){return c8(e,t,r===!1?0:4)}function Vle(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return c8(e,t,0)}function Gle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(xa,""),e.l-s&2&&(e.l+=2)}return r}function Yle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(xa,"");return r}function Xle(e){var t=e.l,r=fm(e,n8);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=fm(e,Sa);return[r,n]}function Jle(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Xle(e));return r}function u6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(xa,"").replace(Cd,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function u8(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Qle(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function fm(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==o6&&n!==t&&Ale.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===o6?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return o8(e,n,4).replace(xa,"");case 31:return l8(e);case 64:return fk(e);case 65:return u8(e);case 71:return Qle(e);case 80:return w2(e,n,!i.raw).replace(xa,"");case 81:return Vle(e,n).replace(xa,"");case 4108:return Jle(e);case 4126:case 4127:return n==4127?Gle(e):Yle(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function d6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,u=-1,d={};for(o=0;o!=s;++o){var f=e.read_shift(4),p=e.read_shift(4);i[o]=[f,p+r]}i.sort(function(k,j){return k[1]-j[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var x=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,x=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(x=!1,e.l=i[o][1]),x)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(m[b.n]=fm(e,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:As(l=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(i[o][0]===1){if(l=m.CodePage=fm(e,hk),As(l),u!==-1){var y=e.l;e.l=i[u][1],d=u6(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){u=o,e.l=i[o+1][1];continue}d=u6(e,l)}else{var v=d[i[o][0]],N;switch(e[e.l]){case 65:e.l+=4,N=u8(e);break;case 30:e.l+=4,N=w2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,N=w2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,N=e.read_shift(4,"i");break;case 19:e.l+=4,N=e.read_shift(4);break;case 5:e.l+=4,N=e.read_shift(8,"f");break;case 11:e.l+=4,N=Jr(e,4);break;case 64:e.l+=4,N=In(fk(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[v]=N}}return e.l=r+n,m}function h6(e,t,r){var n=e.content;if(!n)return{};Bn(n,0);var s,i,o,l,u=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==lr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),u=n.read_shift(4));var p=d6(n,t),m={SystemIdentifier:d};for(var x in p)m[x]=p[x];if(m.FMTID=i,s===1)return m;if(u-n.l==2&&(n.l+=2),n.l!==u)throw new Error("Length mismatch 2: "+n.l+" !== "+u);var b;try{b=d6(n,null)}catch{}for(x in b)m[x]=b[x];return m.FMTID=[i,o],m}function lo(e,t){return e.read_shift(t),null}function Zle(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Jr(e,t){return e.read_shift(t)===1}function an(e){return e.read_shift(2,"u")}function d8(e,t){return Zle(e,t,an)}function ece(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function cf(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function tce(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,u={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function _l(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function uf(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):_l(e,n,r)}function $l(e,t,r){if(r.biff>5)return uf(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function rce(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function nce(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(xa,"");return n&&(e.l+=24),s}function ace(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(xa,"");return r+o}function sce(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return nce(e);case"0303000000000000c000000000000046":return ace(e);default:throw new Error("Unsupported Moniker "+r)}}function U0(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(xa,""):"";return r}function ice(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,u,d="",f,p;s&16&&(i=U0(e,r-e.l)),s&128&&(o=U0(e,r-e.l)),(s&257)===257&&(l=U0(e,r-e.l)),(s&257)===1&&(u=sce(e,r-e.l)),s&8&&(d=U0(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(p=fk(e)),e.l=r;var m=o||l||u||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var x={Target:m};return f&&(x.guid=f),p&&(x.time=p),i&&(x.Tooltip=i),x}function h8(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function f8(e,t){var r=h8(e);return r[3]=0,r}function ii(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function oce(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function lce(e,t,r){return t===0?"":$l(e,t,r)}function cce(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function p8(e){var t=e.read_shift(2),r=dk(e);return[t,r]}function uce(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=cf(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function mg(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function m8(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var dce=m8;function g8(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function hce(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function fce(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Xn(e){e.l+=2,e.l+=e.read_shift(2)}var pce={0:Xn,4:Xn,5:Xn,6:Xn,7:fce,8:Xn,9:Xn,10:Xn,11:Xn,12:Xn,13:hce,14:Xn,15:Xn,16:Xn,17:Xn,18:Xn,19:Xn,20:Xn,21:g8};function mce(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(pce[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function H0(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function gce(e,t){return t===0||e.read_shift(2),1200}function xce(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=$l(e,0,r);return e.read_shift(t+n-e.l),s}function yce(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function vce(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=cf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function bce(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(tce(e));return i.Count=n,i.Unique=s,i}function wce(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function jce(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Nce(e){var t=oce(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function kce(e){return e.read_shift(2),e.read_shift(4)}function f6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Sce(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:u,TabRatio:d}}function _ce(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Ece(){}function Cce(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=cf(e,0,r),n}function Tce(e){var t=ii(e);return t.isst=e.read_shift(4),t}function Ace(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=ii(e);r.biff==2&&e.l++;var i=uf(e,n-e.l,r);return s.val=i,s}function Oce(e,t,r){var n=e.read_shift(2),s=$l(e,0,r);return[n,s]}var Pce=$l;function p6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),u=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c:u}}}function Ice(e){var t=e.read_shift(2),r=e.read_shift(2),n=p8(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Dce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(p8(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function Mce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Rce(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),u=e.read_shift(2);return s.patternType=Ile[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function Fce(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Rce(e,t,n.fStyle,r),n}function $ce(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function m6(e,t,r){var n=ii(e);(r.biff==2||t==9)&&++e.l;var s=ece(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Lce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ii(e),s=ta(e);return n.val=s,n}var g6=lce;function Bce(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=_l(e,i),l=[];n>e.l;)l.push(uf(e));return[i,s,o,l]}function x6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=uce(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var Uce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function y6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),u=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),u=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=_l(e,o,r);s&32&&(d=Uce[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var p=n==e.l||l===0||!(f>0)?[]:jfe(e,f,r,l);return{chKey:i,Name:d,itab:u,rgce:p}}function x8(e,t,r){if(r.biff<8)return Hce(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(cce(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Hce(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=cf(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function qce(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=_l(e,n,r),o=_l(e,s,r);return[i,o]}function zce(e,t,r){var n=m8(e);e.l++;var s=e.read_shift(1);return t-=8,[Nfe(e,t,r),s,n]}function v6(e,t,r){var n=dce(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,bfe(e,t,r)]}function Kce(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Wce(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=$l(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function Vce(e,t,r){return Wce(e,t,r)}function Gce(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(mg(e));return r}function Yce(e,t,r){if(r&&r.biff<8)return Jce(e,t,r);var n=g8(e),s=mce(e,t-22,n[1]);return{cmo:n,ft:s}}var Xce={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Jce(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Xce[n]||sa)(e,t,r)),{cmo:[s,n,i],ft:o}}function Qce(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=rce(e,6,r);var l=e.read_shift(2);e.read_shift(2),an(e,2);var u=e.read_shift(2);e.l+=u;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],p=_l(e,e.lens[d+1]-e.lens[d]-1);if(s+=p,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Zce(e,t){var r=mg(e);e.l+=16;var n=ice(e,t-24);return[r,n]}function eue(e,t){e.read_shift(2);var r=mg(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(xa,""),[r,n]}function tue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=l6[r]||r,r=e.read_shift(2),t[1]=l6[r]||r,t}function rue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(f8(e));return r}function nue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(f8(e));return r}function aue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function y8(e,t,r){if(!r.cellStyles)return sa(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),u=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:u};return(r.biff>=5||!r.biff)&&(d.level=u>>8&7),d}function sue(e,t){var r={};return t<32||(e.l+=16,r.header=ta(e),r.footer=ta(e),e.l+=2),r}function iue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}var oue=ii,lue=d8,cue=uf;function uue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function due(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ii(e);++e.l;var s=$l(e,t-7,r);return n.t="str",n.val=s,n}function hue(e){var t=ii(e);++e.l;var r=ta(e);return t.t="n",t.val=r,t}function fue(e){var t=ii(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function pue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function mue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function gue(e,t,r){var n=e.l+t,s=ii(e),i=e.read_shift(2),o=_l(e,i,r);return e.l=n,s.t="str",s.val=o,s}var xue=[2,3,48,49,131,139,140,245],b6=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=rk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,u){var d=[],f=_o(1);switch(u.type){case"base64":f=Ts(Ka(l));break;case"binary":f=Ts(l);break;case"buffer":case"array":f=l;break}Bn(f,0);var p=f.read_shift(1),m=!!(p&136),x=!1,b=!1;switch(p){case 2:break;case 3:break;case 48:x=!0,m=!0;break;case 49:x=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,v=521;p==2&&(y=f.read_shift(2)),f.l+=3,p!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(v=f.read_shift(2));var N=f.read_shift(2),k=u.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(k=e[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var j=[],A={},S=Math.min(f.length,p==2?521:v-10-(x?264:0)),E=b?32:11;f.l<S&&f[f.l]!=13;)switch(A={},A.name=Hh.utils.decode(k,f.slice(f.l,f.l+E)).replace(/[\u0000\r\n].*$/g,""),f.l+=E,A.type=String.fromCharCode(f.read_shift(1)),p!=2&&!b&&(A.offset=f.read_shift(4)),A.len=f.read_shift(1),p==2&&(A.offset=f.read_shift(2)),A.dec=f.read_shift(1),A.name.length&&j.push(A),p!=2&&(f.l+=b?13:14),A.type){case"B":(!x||A.len!=8)&&u.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(f[f.l]!==13&&(f.l=v-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=v;var _=0,T=0;for(d[0]=[],T=0;T!=j.length;++T)d[0][T]=j[T].name;for(;y-- >0;){if(f[f.l]===42){f.l+=N;continue}for(++f.l,d[++_]=[],T=0,T=0;T!=j.length;++T){var D=f.slice(f.l,f.l+j[T].len);f.l+=j[T].len,Bn(D,0);var F=Hh.utils.decode(k,D);switch(j[T].type){case"C":F.trim().length&&(d[_][T]=F.replace(/\s+$/,""));break;case"D":F.length===8?d[_][T]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):d[_][T]=F;break;case"F":d[_][T]=parseFloat(F.trim());break;case"+":case"I":d[_][T]=b?D.read_shift(-4,"i")^2147483648:D.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":d[_][T]=!0;break;case"N":case"F":d[_][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[_][T]="##MEMO##"+(b?parseInt(F.trim(),10):D.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(d[_][T]=+F||0);break;case"@":d[_][T]=new Date(D.read_shift(-8,"f")-621356832e5);break;case"T":d[_][T]=new Date((D.read_shift(4)-2440588)*864e5+D.read_shift(4));break;case"Y":d[_][T]=D.read_shift(4,"i")/1e4+D.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[_][T]=-D.read_shift(-8,"f");break;case"B":if(x&&j[T].len==8){d[_][T]=D.read_shift(8,"f");break}case"G":case"P":D.l+=j[T].len;break;case"0":if(j[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[T].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return u&&u.sheetRows&&(d=d.slice(0,u.sheetRows)),u.DBF=j,d}function n(l,u){var d=u||{};d.dateNF||(d.dateNF="yyyymmdd");var f=Tu(r(l,d),d);return f["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,f}function s(l,u){try{return Io(n(l,u),u)}catch(d){if(u&&u.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var d=u||{};if(+d.codepage>=0&&As(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=y2(),p=C2(l,{header:1,raw:!0,cellDates:!0}),m=p[0],x=p.slice(1),b=l["!cols"]||[],y=0,v=0,N=0,k=1;for(y=0;y<m.length;++y){if(((b[y]||{}).DBF||{}).name){m[y]=b[y].DBF.name,++N;continue}if(m[y]!=null){if(++N,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(v=0;v<1024;++v)if(m.indexOf(m[y]+"_"+v)==-1){m[y]+="_"+v;break}}}}var j=Yr(l["!ref"]),A=[],S=[],E=[];for(y=0;y<=j.e.c-j.s.c;++y){var _="",T="",D=0,F=[];for(v=0;v<x.length;++v)x[v][y]!=null&&F.push(x[v][y]);if(F.length==0||m[y]==null){A[y]="?";continue}for(v=0;v<F.length;++v){switch(typeof F[v]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=F[v]instanceof Date?"D":"C";break;default:T="C"}D=Math.max(D,String(F[v]).length),_=_&&_!=T?"C":T}D>250&&(D=250),T=((b[y]||{}).DBF||{}).type,T=="C"&&b[y].DBF.len>D&&(D=b[y].DBF.len),_=="B"&&T=="N"&&(_="N",E[y]=b[y].DBF.dec,D=b[y].DBF.len),S[y]=_=="C"||T=="N"?D:i[_]||0,k+=S[y],A[y]=_}var P=f.next(32);for(P.write_shift(4,318902576),P.write_shift(4,x.length),P.write_shift(2,296+32*N),P.write_shift(2,k),y=0;y<4;++y)P.write_shift(4,0);for(P.write_shift(4,0|(+t[xF]||3)<<8),y=0,v=0;y<m.length;++y)if(m[y]!=null){var I=f.next(32),B=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,B,"sbcs"),I.write_shift(1,A[y]=="?"?"C":A[y],"sbcs"),I.write_shift(4,v),I.write_shift(1,S[y]||i[A[y]]||0),I.write_shift(1,E[y]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),v+=S[y]||i[A[y]]||0}var z=f.next(264);for(z.write_shift(4,13),y=0;y<65;++y)z.write_shift(4,0);for(y=0;y<x.length;++y){var Y=f.next(k);for(Y.write_shift(1,0),v=0;v<m.length;++v)if(m[v]!=null)switch(A[v]){case"L":Y.write_shift(1,x[y][v]==null?63:x[y][v]?84:70);break;case"B":Y.write_shift(8,x[y][v]||0,"f");break;case"N":var re="0";for(typeof x[y][v]=="number"&&(re=x[y][v].toFixed(E[v]||0)),N=0;N<S[v]-re.length;++N)Y.write_shift(1,32);Y.write_shift(1,re,"sbcs");break;case"D":x[y][v]?(Y.write_shift(4,("0000"+x[y][v].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(x[y][v].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+x[y][v].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var X=String(x[y][v]!=null?x[y][v]:"").slice(0,S[v]);for(Y.write_shift(1,X,"sbcs"),N=0;N<S[v]-X.length;++N)Y.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),yue=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ti(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,x){var b=e[x];return typeof b=="number"?RP(b):b},n=function(m,x,b){var y=x.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?m:RP(y)};e["|"]=254;function s(m,x){switch(x.type){case"base64":return i(Ka(m),x);case"binary":return i(m,x);case"buffer":return i(sr&&Buffer.isBuffer(m)?m.toString("binary"):Dl(m),x);case"array":return i(Sl(m),x)}throw new Error("Unrecognized type "+x.type)}function i(m,x){var b=m.split(/[\n\r]+/),y=-1,v=-1,N=0,k=0,j=[],A=[],S=null,E={},_=[],T=[],D=[],F=0,P;for(+x.codepage>=0&&As(+x.codepage);N!==b.length;++N){F=0;var I=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),B=I.replace(/;;/g,"\0").split(";").map(function(J){return J.replace(/\u0000/g,";")}),z=B[0],Y;if(I.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&A.push(I.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,X=!1,ne=!1,Z=!1,me=-1,G=-1;for(k=1;k<B.length;++k)switch(B[k].charAt(0)){case"A":break;case"X":v=parseInt(B[k].slice(1))-1,X=!0;break;case"Y":for(y=parseInt(B[k].slice(1))-1,X||(v=0),P=j.length;P<=y;++P)j[P]=[];break;case"K":Y=B[k].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Ds(Y))?isNaN(hu(Y).getDate())||(Y=In(Y)):(Y=Ds(Y),S!==null&&Eu(S)&&(Y=pg(Y))),re=!0;break;case"E":Z=!0;var L=Rc(B[k].slice(1),{r:y,c:v});j[y][v]=[j[y][v],L];break;case"S":ne=!0,j[y][v]=[j[y][v],"S5S"];break;case"G":break;case"R":me=parseInt(B[k].slice(1))-1;break;case"C":G=parseInt(B[k].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+I)}if(re&&(j[y][v]&&j[y][v].length==2?j[y][v][0]=Y:j[y][v]=Y,S=null),ne){if(Z)throw new Error("SYLK shared formula cannot have own formula");var ee=me>-1&&j[me][G];if(!ee||!ee[1])throw new Error("SYLK shared formula cannot find base");j[y][v][1]=C8(ee[1],{r:y-me,c:v-G})}break;case"F":var te=0;for(k=1;k<B.length;++k)switch(B[k].charAt(0)){case"X":v=parseInt(B[k].slice(1))-1,++te;break;case"Y":for(y=parseInt(B[k].slice(1))-1,P=j.length;P<=y;++P)j[P]=[];break;case"M":F=parseInt(B[k].slice(1))/20;break;case"F":break;case"G":break;case"P":S=A[parseInt(B[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(D=B[k].slice(1).split(" "),P=parseInt(D[0],10);P<=parseInt(D[1],10);++P)F=parseInt(D[2],10),T[P-1]=F===0?{hidden:!0}:{wch:F},fu(T[P-1]);break;case"C":v=parseInt(B[k].slice(1))-1,T[v]||(T[v]={});break;case"R":y=parseInt(B[k].slice(1))-1,_[y]||(_[y]={}),F>0?(_[y].hpt=F,_[y].hpx=Gh(F)):F===0&&(_[y].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+I)}te<1&&(S=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+I)}}return _.length>0&&(E["!rows"]=_),T.length>0&&(E["!cols"]=T),x&&x.sheetRows&&(j=j.slice(0,x.sheetRows)),[j,E]}function o(m,x){var b=s(m,x),y=b[0],v=b[1],N=Tu(y,x);return ti(v).forEach(function(k){N[k]=v[k]}),N}function l(m,x){return Io(o(m,x),x)}function u(m,x,b,y){var v="C;Y"+(b+1)+";X"+(y+1)+";K";switch(m.t){case"n":v+=m.v||0,m.f&&!m.F&&(v+=";E"+ahe(m.f,{r:b,c:y}));break;case"b":v+=m.v?"TRUE":"FALSE";break;case"e":v+=m.w||m.v;break;case"d":v+='"'+(m.w||m.v)+'"';break;case"s":v+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function d(m,x){x.forEach(function(b,y){var v="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?v+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=mm(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=gm(b.wpx)),typeof b.wch=="number"&&(v+=Math.round(b.wch))),v.charAt(v.length-1)!=" "&&m.push(v)})}function f(m,x){x.forEach(function(b,y){var v="F;";b.hidden?v+="M0;":b.hpt?v+="M"+20*b.hpt+";":b.hpx&&(v+="M"+20*S8(b.hpx)+";"),v.length>2&&m.push(v+"R"+(y+1))})}function p(m,x){var b=["ID;PWXL;N;E"],y=[],v=Yr(m["!ref"]),N,k=Array.isArray(m),j=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&d(b,m["!cols"]),m["!rows"]&&f(b,m["!rows"]),b.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var A=v.s.r;A<=v.e.r;++A)for(var S=v.s.c;S<=v.e.c;++S){var E=Vt({r:A,c:S});N=k?(m[A]||[])[S]:m[E],!(!N||N.v==null&&(!N.f||N.F))&&y.push(u(N,m,A,S))}return b.join(j)+j+y.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:p}})(),vue=(function(){function e(i,o){switch(o.type){case"base64":return t(Ka(i),o);case"binary":return t(i,o);case"buffer":return t(sr&&Buffer.isBuffer(i)?i.toString("binary"):Dl(i),o);case"array":return t(Sl(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),u=-1,d=-1,f=0,p=[];f!==l.length;++f){if(l[f].trim()==="BOT"){p[++u]=[],d=0;continue}if(!(u<0)){var m=l[f].trim().split(","),x=m[0],b=m[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+x){case-1:if(y==="BOT"){p[++u]=[],d=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[u][d]=!0:y==="FALSE"?p[u][d]=!1:isNaN(Ds(b))?isNaN(hu(b).getDate())?p[u][d]=b:p[u][d]=In(b):p[u][d]=Ds(b),++d;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[u][d++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(p=p.slice(0,o.sheetRows)),p}function r(i,o){return Tu(e(i,o),o)}function n(i,o){return Io(r(i,o),o)}var s=(function(){var i=function(u,d,f,p,m){u.push(d),u.push(f+","+p),u.push('"'+m.replace(/"/g,'""')+'"')},o=function(u,d,f,p){u.push(d+","+f),u.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(u){var d=[],f=Yr(u["!ref"]),p,m=Array.isArray(u);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,f.e.r-f.s.r+1,""),i(d,"TUPLES",0,f.e.c-f.s.c+1,""),i(d,"DATA",0,0,"");for(var x=f.s.r;x<=f.e.r;++x){o(d,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var y=Vt({r:x,c:b});if(p=m?(u[x]||[])[b]:u[y],!p){o(d,1,0,"");continue}switch(p.t){case"n":var v=p.w;!v&&p.v!=null&&(v=p.v),v==null?p.f&&!p.F?o(d,1,0,"="+p.f):o(d,1,0,""):o(d,0,v,"V");break;case"b":o(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=us(p.z||Yt[14],ya(In(p.v)))),o(d,0,p.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var N=`\r
`,k=d.join(N);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),bue=(function(){function e(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,m){for(var x=p.split(`
`),b=-1,y=-1,v=0,N=[];v!==x.length;++v){var k=x[v].trim().split(":");if(k[0]==="cell"){var j=ga(k[1]);if(N.length<=j.r)for(b=N.length;b<=j.r;++b)N[b]||(N[b]=[]);switch(b=j.r,y=j.c,k[2]){case"t":N[b][y]=e(k[3]);break;case"v":N[b][y]=+k[3];break;case"vtf":var A=k[k.length-1];case"vtc":switch(k[3]){case"nl":N[b][y]=!!+k[4];break;default:N[b][y]=+k[4];break}k[2]=="vtf"&&(N[b][y]=[N[b][y],A])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function n(p,m){return Tu(r(p,m),m)}function s(p,m){return Io(n(p,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var m=[],x=[],b,y="",v=Cu(p["!ref"]),N=Array.isArray(p),k=v.s.r;k<=v.e.r;++k)for(var j=v.s.c;j<=v.e.c;++j)if(y=Vt({r:k,c:j}),b=N?(p[k]||[])[j]:p[y],!(!b||b.v==null||b.t==="z")){switch(x=["cell",y,"t"],b.t){case"s":case"str":x.push(t(b.v));break;case"n":b.f?(x[2]="vtf",x[3]="n",x[4]=b.v,x[5]=t(b.f)):(x[2]="v",x[3]=b.v);break;case"b":x[2]="vt"+(b.f?"f":"c"),x[3]="nl",x[4]=b.v?"1":"0",x[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var A=ya(In(b.v));x[2]="vtc",x[3]="nd",x[4]=""+A,x[5]=b.w||us(b.z||Yt[14],A);break;case"e":continue}m.push(x.join(":"))}return m.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(p){return[i,o,l,o,d(p),u].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),Wh=(function(){function e(f,p,m,x,b){b.raw?p[m][x]=f:f===""||(f==="TRUE"?p[m][x]=!0:f==="FALSE"?p[m][x]=!1:isNaN(Ds(f))?isNaN(hu(f).getDate())?p[m][x]=f:p[m][x]=In(f):p[m][x]=Ds(f))}function t(f,p){var m=p||{},x=[];if(!f||f.length===0)return x;for(var b=f.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var v=10,N=0,k=0;k<=y;++k)N=b[k].indexOf(" "),N==-1?N=b[k].length:N++,v=Math.max(v,N);for(k=0;k<=y;++k){x[k]=[];var j=0;for(e(b[k].slice(0,v).trim(),x,k,j,m),j=1;j<=(b[k].length-v)/10+1;++j)e(b[k].slice(v+(j-1)*10,v+j*10).trim(),x,k,j,m)}return m.sheetRows&&(x=x.slice(0,m.sheetRows)),x}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var p={},m=!1,x=0,b=0;x<f.length;++x)(b=f.charCodeAt(x))==34?m=!m:!m&&b in r&&(p[b]=(p[b]||0)+1);b=[];for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&b.push([p[x],x]);if(!b.length){p=n;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&b.push([p[x],x])}return b.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[b.pop()[1]]||44}function i(f,p){var m=p||{},x="",b=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(x=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(x=f.charAt(4),f=f.slice(6)):x=s(f.slice(0,1024)):m&&m.FS?x=m.FS:x=s(f.slice(0,1024));var v=0,N=0,k=0,j=0,A=0,S=x.charCodeAt(0),E=!1,_=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var D=m.dateNF!=null?Ooe(m.dateNF):null;function F(){var P=f.slice(j,A),I={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)I.t="z";else if(m.raw)I.t="s",I.v=P;else if(P.trim().length===0)I.t="s",I.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(I.t="s",I.v=P.slice(2,-1).replace(/""/g,'"')):ihe(P)?(I.t="n",I.f=P.slice(1)):(I.t="s",I.v=P);else if(P=="TRUE")I.t="b",I.v=!0;else if(P=="FALSE")I.t="b",I.v=!1;else if(!isNaN(k=Ds(P)))I.t="n",m.cellText!==!1&&(I.w=P),I.v=k;else if(!isNaN(hu(P).getDate())||D&&P.match(D)){I.z=m.dateNF||Yt[14];var B=0;D&&P.match(D)&&(P=Poe(P,m.dateNF,P.match(D)||[]),B=1),m.cellDates?(I.t="d",I.v=In(P,B)):(I.t="n",I.v=ya(In(P,B))),m.cellText!==!1&&(I.w=us(I.z,I.v instanceof Date?ya(I.v):I.v)),m.cellNF||delete I.z}else I.t="s",I.v=P;if(I.t=="z"||(m.dense?(b[v]||(b[v]=[]),b[v][N]=I):b[Vt({c:N,r:v})]=I),j=A+1,T=f.charCodeAt(j),y.e.c<N&&(y.e.c=N),y.e.r<v&&(y.e.r=v),_==S)++N;else if(N=0,++v,m.sheetRows&&m.sheetRows<=v)return!0}e:for(;A<f.length;++A)switch(_=f.charCodeAt(A)){case 34:T===34&&(E=!E);break;case S:case 10:case 13:if(!E&&F())break e;break}return A-j>0&&F(),b["!ref"]=cr(y),b}function o(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):Tu(t(f,p),p)}function l(f,p){var m="",x=p.type=="string"?[0,0,0,0]:wk(f,p);switch(p.type){case"base64":m=Ka(f);break;case"binary":m=f;break;case"buffer":p.codepage==65001?m=f.toString("utf8"):p.codepage&&typeof Hh<"u"||(m=sr&&Buffer.isBuffer(f)?f.toString("binary"):Dl(f));break;case"array":m=Sl(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+p.type)}return x[0]==239&&x[1]==187&&x[2]==191?m=Dr(m.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?m=Dr(m):p.type=="binary"&&typeof Hh<"u",m.slice(0,19)=="socialcalc:version:"?bue.to_sheet(p.type=="string"?m:Dr(m),p):o(m,p)}function u(f,p){return Io(l(f,p),p)}function d(f){for(var p=[],m=Yr(f["!ref"]),x,b=Array.isArray(f),y=m.s.r;y<=m.e.r;++y){for(var v=[],N=m.s.c;N<=m.e.c;++N){var k=Vt({r:y,c:N});if(x=b?(f[y]||[])[N]:f[k],!x||x.v==null){v.push("          ");continue}for(var j=(x.w||(Fi(x),x.w)||"").slice(0,10);j.length<10;)j+=" ";v.push(j+(N===0?" ":""))}p.push(v.join(""))}return p.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:d}})();function wue(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=yue.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Wh.to_workbook(e,t)}}var Wd=(function(){function e(L,ee,te){if(L){Bn(L,L.l||0);for(var J=te.Enum||me;L.l<L.length;){var he=L.read_shift(2),Se=J[he]||J[65535],Oe=L.read_shift(2),pe=L.l+Oe,xe=Se.f&&Se.f(L,Oe,te);if(L.l=pe,ee(xe,Se,he))return}}}function t(L,ee){switch(ee.type){case"base64":return r(Ts(Ka(L)),ee);case"binary":return r(Ts(L),ee);case"buffer":case"array":return r(L,ee)}throw"Unsupported type "+ee.type}function r(L,ee){if(!L)return L;var te=ee||{},J=te.dense?[]:{},he="Sheet1",Se="",Oe=0,pe={},xe=[],Fe=[],O={s:{r:0,c:0},e:{r:0,c:0}},be=te.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)te.Enum=me,e(L,function(Be,Je,Xt){switch(Xt){case 0:te.vers=Be,Be>=4096&&(te.qpro=!0);break;case 6:O=Be;break;case 204:Be&&(Se=Be);break;case 222:Se=Be;break;case 15:case 51:te.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:Xt==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=te.dateNF||Yt[14],te.cellDates&&(Be[1].t="d",Be[1].v=pg(Be[1].v))),te.qpro&&Be[3]>Oe&&(J["!ref"]=cr(O),pe[he]=J,xe.push(he),J=te.dense?[]:{},O={s:{r:0,c:0},e:{r:0,c:0}},Oe=Be[3],he=Se||"Sheet"+(Oe+1),Se="");var Ce=te.dense?(J[Be[0].r]||[])[Be[0].c]:J[Vt(Be[0])];if(Ce){Ce.t=Be[1].t,Ce.v=Be[1].v,Be[1].z!=null&&(Ce.z=Be[1].z),Be[1].f!=null&&(Ce.f=Be[1].f);break}te.dense?(J[Be[0].r]||(J[Be[0].r]=[]),J[Be[0].r][Be[0].c]=Be[1]):J[Vt(Be[0])]=Be[1];break}},te);else if(L[2]==26||L[2]==14)te.Enum=G,L[2]==14&&(te.qpro=!0,L.l=0),e(L,function(Be,Je,Xt){switch(Xt){case 204:he=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>Oe&&(J["!ref"]=cr(O),pe[he]=J,xe.push(he),J=te.dense?[]:{},O={s:{r:0,c:0},e:{r:0,c:0}},Oe=Be[3],he="Sheet"+(Oe+1)),be>0&&Be[0].r>=be)break;te.dense?(J[Be[0].r]||(J[Be[0].r]=[]),J[Be[0].r][Be[0].c]=Be[1]):J[Vt(Be[0])]=Be[1],O.e.c<Be[0].c&&(O.e.c=Be[0].c),O.e.r<Be[0].r&&(O.e.r=Be[0].r);break;case 27:Be[14e3]&&(Fe[Be[14e3][0]]=Be[14e3][1]);break;case 1537:Fe[Be[0]]=Be[1],Be[0]==Oe&&(he=Be[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(J["!ref"]=cr(O),pe[Se||he]=J,xe.push(Se||he),!Fe.length)return{SheetNames:xe,Sheets:pe};for(var De={},qe=[],rt=0;rt<Fe.length;++rt)pe[xe[rt]]?(qe.push(Fe[rt]||xe[rt]),De[Fe[rt]]=pe[Fe[rt]]||pe[xe[rt]]):(qe.push(Fe[rt]),De[Fe[rt]]={"!ref":"A1"});return{SheetNames:qe,Sheets:De}}function n(L,ee){var te=ee||{};if(+te.codepage>=0&&As(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var J=y2(),he=Yr(L["!ref"]),Se=Array.isArray(L),Oe=[];ws(J,0,i(1030)),ws(J,6,u(he));for(var pe=Math.min(he.e.r,8191),xe=he.s.r;xe<=pe;++xe)for(var Fe=Kn(xe),O=he.s.c;O<=he.e.c;++O){xe===he.s.r&&(Oe[O]=bn(O));var be=Oe[O]+Fe,De=Se?(L[xe]||[])[O]:L[be];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?ws(J,13,x(xe,O,De.v)):ws(J,14,y(xe,O,De.v));else{var qe=Fi(De);ws(J,15,p(xe,O,qe.slice(0,239)))}}return ws(J,1),J.end()}function s(L,ee){var te=ee||{};if(+te.codepage>=0&&As(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var J=y2();ws(J,0,o(L));for(var he=0,Se=0;he<L.SheetNames.length;++he)(L.Sheets[L.SheetNames[he]]||{})["!ref"]&&ws(J,27,Z(L.SheetNames[he],Se++));var Oe=0;for(he=0;he<L.SheetNames.length;++he){var pe=L.Sheets[L.SheetNames[he]];if(!(!pe||!pe["!ref"])){for(var xe=Yr(pe["!ref"]),Fe=Array.isArray(pe),O=[],be=Math.min(xe.e.r,8191),De=xe.s.r;De<=be;++De)for(var qe=Kn(De),rt=xe.s.c;rt<=xe.e.c;++rt){De===xe.s.r&&(O[rt]=bn(rt));var Be=O[rt]+qe,Je=Fe?(pe[De]||[])[rt]:pe[Be];if(!(!Je||Je.t=="z"))if(Je.t=="n")ws(J,23,F(De,rt,Oe,Je.v));else{var Xt=Fi(Je);ws(J,22,_(De,rt,Oe,Xt.slice(0,239)))}}++Oe}}return ws(J,1),J.end()}function i(L){var ee=mn(2);return ee.write_shift(2,L),ee}function o(L){var ee=mn(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var te=0,J=0,he=0,Se=0;Se<L.SheetNames.length;++Se){var Oe=L.SheetNames[Se],pe=L.Sheets[Oe];if(!(!pe||!pe["!ref"])){++he;var xe=Cu(pe["!ref"]);te<xe.e.r&&(te=xe.e.r),J<xe.e.c&&(J=xe.e.c)}}return te>8191&&(te=8191),ee.write_shift(2,te),ee.write_shift(1,he),ee.write_shift(1,J),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function l(L,ee,te){var J={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&te.qpro?(J.s.c=L.read_shift(1),L.l++,J.s.r=L.read_shift(2),J.e.c=L.read_shift(1),L.l++,J.e.r=L.read_shift(2),J):(J.s.c=L.read_shift(2),J.s.r=L.read_shift(2),ee==12&&te.qpro&&(L.l+=2),J.e.c=L.read_shift(2),J.e.r=L.read_shift(2),ee==12&&te.qpro&&(L.l+=2),J.s.c==65535&&(J.s.c=J.e.c=J.s.r=J.e.r=0),J)}function u(L){var ee=mn(8);return ee.write_shift(2,L.s.c),ee.write_shift(2,L.s.r),ee.write_shift(2,L.e.c),ee.write_shift(2,L.e.r),ee}function d(L,ee,te){var J=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(J[0].c=L.read_shift(1),J[3]=L.read_shift(1),J[0].r=L.read_shift(2),L.l+=2):(J[2]=L.read_shift(1),J[0].c=L.read_shift(2),J[0].r=L.read_shift(2)),J}function f(L,ee,te){var J=L.l+ee,he=d(L,ee,te);if(he[1].t="s",te.vers==20768){L.l++;var Se=L.read_shift(1);return he[1].v=L.read_shift(Se,"utf8"),he}return te.qpro&&L.l++,he[1].v=L.read_shift(J-L.l,"cstr"),he}function p(L,ee,te){var J=mn(7+te.length);J.write_shift(1,255),J.write_shift(2,ee),J.write_shift(2,L),J.write_shift(1,39);for(var he=0;he<J.length;++he){var Se=te.charCodeAt(he);J.write_shift(1,Se>=128?95:Se)}return J.write_shift(1,0),J}function m(L,ee,te){var J=d(L,ee,te);return J[1].v=L.read_shift(2,"i"),J}function x(L,ee,te){var J=mn(7);return J.write_shift(1,255),J.write_shift(2,ee),J.write_shift(2,L),J.write_shift(2,te,"i"),J}function b(L,ee,te){var J=d(L,ee,te);return J[1].v=L.read_shift(8,"f"),J}function y(L,ee,te){var J=mn(13);return J.write_shift(1,255),J.write_shift(2,ee),J.write_shift(2,L),J.write_shift(8,te,"f"),J}function v(L,ee,te){var J=L.l+ee,he=d(L,ee,te);if(he[1].v=L.read_shift(8,"f"),te.qpro)L.l=J;else{var Se=L.read_shift(2);A(L.slice(L.l,L.l+Se),he),L.l+=Se}return he}function N(L,ee,te){var J=ee&32768;return ee&=-32769,ee=(J?L:0)+(ee>=8192?ee-16384:ee),(J?"":"$")+(te?bn(ee):Kn(ee))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(L,ee){Bn(L,0);for(var te=[],J=0,he="",Se="",Oe="",pe="";L.l<L.length;){var xe=L[L.l++];switch(xe){case 0:te.push(L.read_shift(8,"f"));break;case 1:Se=N(ee[0].c,L.read_shift(2),!0),he=N(ee[0].r,L.read_shift(2),!1),te.push(Se+he);break;case 2:{var Fe=N(ee[0].c,L.read_shift(2),!0),O=N(ee[0].r,L.read_shift(2),!1);Se=N(ee[0].c,L.read_shift(2),!0),he=N(ee[0].r,L.read_shift(2),!1),te.push(Fe+O+":"+Se+he)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(L.read_shift(2));break;case 6:{for(var be="";xe=L[L.l++];)be+=String.fromCharCode(xe);te.push('"'+be.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:pe=te.pop(),Oe=te.pop(),te.push(["AND","OR"][xe-20]+"("+Oe+","+pe+")");break;default:if(xe<32&&j[xe])pe=te.pop(),Oe=te.pop(),te.push(Oe+j[xe]+pe);else if(k[xe]){if(J=k[xe][1],J==69&&(J=L[L.l++]),J>te.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+te.join("|")+"|");return}var De=te.slice(-J);te.length-=J,te.push(k[xe][0]+"("+De.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}te.length==1?ee[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function S(L){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=L.read_shift(2),ee[3]=L[L.l++],ee[0].c=L[L.l++],ee}function E(L,ee){var te=S(L);return te[1].t="s",te[1].v=L.read_shift(ee-4,"cstr"),te}function _(L,ee,te,J){var he=mn(6+J.length);he.write_shift(2,L),he.write_shift(1,te),he.write_shift(1,ee),he.write_shift(1,39);for(var Se=0;Se<J.length;++Se){var Oe=J.charCodeAt(Se);he.write_shift(1,Oe>=128?95:Oe)}return he.write_shift(1,0),he}function T(L,ee){var te=S(L);te[1].v=L.read_shift(2);var J=te[1].v>>1;if(te[1].v&1)switch(J&7){case 0:J=(J>>3)*5e3;break;case 1:J=(J>>3)*500;break;case 2:J=(J>>3)/20;break;case 3:J=(J>>3)/200;break;case 4:J=(J>>3)/2e3;break;case 5:J=(J>>3)/2e4;break;case 6:J=(J>>3)/16;break;case 7:J=(J>>3)/64;break}return te[1].v=J,te}function D(L,ee){var te=S(L),J=L.read_shift(4),he=L.read_shift(4),Se=L.read_shift(2);if(Se==65535)return J===0&&he===3221225472?(te[1].t="e",te[1].v=15):J===0&&he===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var Oe=Se&32768;return Se=(Se&32767)-16446,te[1].v=(1-Oe*2)*(he*Math.pow(2,Se+32)+J*Math.pow(2,Se)),te}function F(L,ee,te,J){var he=mn(14);if(he.write_shift(2,L),he.write_shift(1,te),he.write_shift(1,ee),J==0)return he.write_shift(4,0),he.write_shift(4,0),he.write_shift(2,65535),he;var Se=0,Oe=0,pe=0,xe=0;return J<0&&(Se=1,J=-J),Oe=Math.log2(J)|0,J/=Math.pow(2,Oe-31),xe=J>>>0,(xe&2147483648)==0&&(J/=2,++Oe,xe=J>>>0),J-=xe,xe|=2147483648,xe>>>=0,J*=Math.pow(2,32),pe=J>>>0,he.write_shift(4,pe),he.write_shift(4,xe),Oe+=16383+(Se?32768:0),he.write_shift(2,Oe),he}function P(L,ee){var te=D(L);return L.l+=ee-14,te}function I(L,ee){var te=S(L),J=L.read_shift(4);return te[1].v=J>>6,te}function B(L,ee){var te=S(L),J=L.read_shift(8,"f");return te[1].v=J,te}function z(L,ee){var te=B(L);return L.l+=ee-10,te}function Y(L,ee){return L[L.l+ee-1]==0?L.read_shift(ee,"cstr"):""}function re(L,ee){var te=L[L.l++];te>ee-1&&(te=ee-1);for(var J="";J.length<te;)J+=String.fromCharCode(L[L.l++]);return J}function X(L,ee,te){if(!(!te.qpro||ee<21)){var J=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var he=L.read_shift(ee-21,"cstr");return[J,he]}}function ne(L,ee){for(var te={},J=L.l+ee;L.l<J;){var he=L.read_shift(2);if(he==14e3){for(te[he]=[0,""],te[he][0]=L.read_shift(2);L[L.l];)te[he][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return te}function Z(L,ee){var te=mn(5+L.length);te.write_shift(2,14e3),te.write_shift(2,ee);for(var J=0;J<L.length;++J){var he=L.charCodeAt(J);te[te.l++]=he>127?95:he}return te[te.l++]=0,te}var me={0:{n:"BOF",f:an},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},G={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:D},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ne},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function jue(e){var t={},r=e.match(ia),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Bt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=JN[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Nue=(function(){var e=zh("t"),t=zh("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:hr(o[1])},u=i.match(t);return u&&(l.s=jue(u[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),kue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(i.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),Sue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,_ue=/<(?:\w+:)?r>/,Eue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pk(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=hr(Dr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Dr(e),r&&(n.h=ak(n.t))):e.match(_ue)&&(n.r=Dr(e),n.t=hr(Dr((e.replace(Eue,"").match(Sue)||[]).join("").replace(ia,""))),r&&(n.h=kue(Nue(n.r)))),n):{t:""}}var Cue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Tue=/<(?:\w+:)?(?:si|sstItem)>/g,Aue=/<\/(?:\w+:)?(?:si|sstItem)>/;function Oue(e,t){var r=[],n="";if(!e)return r;var s=e.match(Cue);if(s){n=s[2].replace(Tue,"").split(Aue);for(var i=0;i!=n.length;++i){var o=pk(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=Bt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function Pue(e){return[e.read_shift(4),e.read_shift(4)]}function Iue(e,t){var r=[],n=!1;return Hi(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function v8(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Oi(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Due(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Oi(e,4),t.U=Oi(e,4),t.W=Oi(e,4),t}function Mue(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Rue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Mue(e));return t}function Fue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function $ue(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Oi(e,4),t.U=Oi(e,4),t.W=Oi(e,4),t}function Lue(e){var t=$ue(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function b8(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function w8(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Bue(e){var t=Oi(e);switch(t.Minor){case 2:return[t.Minor,Uue(e)];case 3:return[t.Minor,Hue()];case 4:return[t.Minor,que(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Uue(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=b8(e,r),s=w8(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Hue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function que(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ia,function(i){var o=Bt(i);switch(si(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function zue(e,t){var r={},n=r.EncryptionVersionInfo=Oi(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=b8(e,s),t-=s,r.EncryptionVerifier=w8(e,t),r}function Kue(e){var t={},r=t.EncryptionVersionInfo=Oi(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Wue(e){var t=0,r,n=v8(e),s=n.length+1,i,o,l,u,d;for(r=_o(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,u=t<<1&32767,d=l|u,t=d^o;return t^52811}var j8=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],u=104,d=o.length-1;d>=0;--d)for(var f=o[d],p=0;p!=7;++p)f&64&&(l^=r[u]),f*=2,--u;return l};return function(o){for(var l=v8(o),u=i(l),d=l.length,f=_o(16),p=0;p!=16;++p)f[p]=0;var m,x,b;for((d&1)===1&&(m=u>>8,f[d]=s(e[0],m),--d,m=u&255,x=l[l.length-1],f[d]=s(x,m));d>0;)--d,m=u>>8,f[d]=s(l[d],m),--d,m=u&255,f[d]=s(l[d],m);for(d=15,b=15-l.length;b>0;)m=u>>8,f[d]=s(e[b],m),--d,--b,m=u&255,f[d]=s(l[d],m),--d,--b;return f}})(),Vue=function(e,t,r,n,s){s||(s=t),n||(n=j8(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},Gue=function(e){var t=0,r=j8(e);return function(n){var s=Vue("",n,t,r);return t=s[1],s[0]}};function Yue(e,t,r,n){var s={key:an(e),verificationBytes:an(e)};return r.password&&(s.verifier=Wue(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Gue(r.password)),s}function Xue(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Kue(e):n.Data=zue(e,t),n}function Jue(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Xue(e,t-2,n):Yue(e,r.biff>=8?t:t-2,r,n),n}var Que=(function(){function e(s,i){switch(i.type){case"base64":return t(Ka(s),i);case"binary":return t(s,i);case"buffer":return t(sr&&Buffer.isBuffer(s)?s.toString("binary"):Dl(s),i);case"array":return t(Sl(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(f,p){Array.isArray(l)&&(l[p]=[]);for(var m=/\\\w+\b/g,x=0,b,y=-1;b=m.exec(f);){switch(b[0]){case"\\cell":var v=f.slice(x,m.lastIndex-b[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var N={v,t:"s"};Array.isArray(l)?l[p][y]=N:l[Vt({r:p,c:y})]=N}break}x=m.lastIndex}y>d.e.c&&(d.e.c=y)}),l["!ref"]=cr(d),l}function r(s,i){return Io(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Yr(s["!ref"]),l,u=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var p=Vt({r:d,c:f});l=u?(s[d]||[])[f]:s[p],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Fi(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Zue(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Vh(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ede(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,u=0,d=s+i;switch(u=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,u,d/2]}function tde(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,u;if(r!==0)switch(l|0){case 0:case 6:u=s*l,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-l),o[0]+=u,o[1]+=s;break;case 2:u=s*(l-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-l),o[1]+=u,o[2]+=s;break;case 4:u=s*(l-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-l),o[2]+=u,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function pm(e,t){if(t===0)return e;var r=ede(Zue(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Vh(tde(r))}var N8=6,rde=15,nde=1,da=N8;function mm(e){return Math.floor((e+Math.round(128/da)/256)*da)}function gm(e){return Math.floor((e-5)/da*100+.5)/100}function j2(e){return Math.round((e*da+5)/da*256)/256}function ww(e){return j2(gm(mm(e)))}function mk(e){var t=Math.abs(e-ww(e)),r=da;if(t>.005)for(da=nde;da<rde;++da)Math.abs(e-ww(e))<=t&&(t=Math.abs(e-ww(e)),r=da);da=r}function fu(e){e.width?(e.wpx=mm(e.width),e.wch=gm(e.wpx),e.MDW=da):e.wpx?(e.wch=gm(e.wpx),e.width=j2(e.wch),e.MDW=da):typeof e.wch=="number"&&(e.width=j2(e.wch),e.wpx=mm(e.width),e.MDW=da),e.customWidth&&delete e.customWidth}var ade=96,k8=ade;function S8(e){return e*96/k8}function Gh(e){return e*k8/96}var sde={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ide(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(ia)||[]).forEach(function(o){var l=Bt(o);switch(si(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Br(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Br(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function ode(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(ia)||[]).forEach(function(o){var l=Bt(o);switch(si(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function lde(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(ia)||[]).forEach(function(o){var l=Bt(o);switch(si(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Dr(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Br(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Br(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Br(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Br(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Br(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Br(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Br(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=JN[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Br(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var u=ml[s.color.index];s.color.index==81&&(u=ml[1]),u||(u=ml[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=pm(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function cde(e,t,r){t.NumberFmt=[];for(var n=ti(Yt),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Yt[n[s]];var i=e[0].match(ia);if(i)for(s=0;s<i.length;++s){var o=Bt(i[s]);switch(si(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=hr(Dr(o.formatCode)),u=parseInt(o.numFmtId,10);if(t.NumberFmt[u]=l,u>0){if(u>392){for(u=392;u>60&&t.NumberFmt[u]!=null;--u);t.NumberFmt[u]=l}pl(l,u)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var q0=["numFmtId","fillId","fontId","borderId","xfId"],z0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ude(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(ia)||[]).forEach(function(i){var o=Bt(i),l=0;switch(si(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<q0.length;++l)n[q0[l]]&&(n[q0[l]]=parseInt(n[q0[l]],10));for(l=0;l<z0.length;++l)n[z0[l]]&&(n[z0[l]]=Br(n[z0[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=Br(o.wrapText)),n.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var dde=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,u,d){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=l.match(t))&&cde(p,f,d),(p=l.match(s))&&lde(p,f,u,d),(p=l.match(n))&&ode(p,f,u,d),(p=l.match(i))&&ide(p,f,u,d),(p=l.match(r))&&ude(p,f,d),f}})();function hde(e,t){var r=e.read_shift(2),n=aa(e);return[r,n]}function fde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Nle(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var u=e.read_shift(1);switch(u>0&&(n.charset=u),e.l++,n.color=jle(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=aa(e),n}var pde=sa;function mde(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}var gde=sa;function xde(e,t,r){var n={};n.NumberFmt=[];for(var s in Yt)n.NumberFmt[s]=Yt[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Hi(e,function(u,d,f){switch(f){case 44:n.NumberFmt[u[0]]=u[1],pl(u[1],u[0]);break;case 43:n.Fonts.push(u),u.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(u.color.rgb=pm(t.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(f);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}var yde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function vde(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ia)||[]).forEach(function(s){var i=Bt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[yde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function bde(){}function wde(){}var jde=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Nde=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,kde=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Sde(e,t,r){t.themeElements={};var n;[["clrScheme",jde,vde],["fontScheme",Nde,bde],["fmtScheme",kde,wde]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var _de=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function _8(e,t){(!e||e.length===0)&&(e=Ede());var r,n={};if(!(r=e.match(_de)))throw new Error("themeElements not found in theme");return Sde(r[0],n,t),n.raw=e,n}function Ede(e,t){var r=[FF];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Cde(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=RF(i,{type:"array"})}catch{return}var l=Ha(o,"theme/theme/theme1.xml",!0);if(l)return _8(l,r)}}function Tde(e){return e.read_shift(4)}function Ade(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Ode(e,4);break;case 2:t.xclrValue=h8(e);break;case 3:t.xclrValue=Tde(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Ode(e,t){return sa(e,t)}function Pde(e,t){return sa(e,t)}function Ide(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Ade(e);break;case 6:n[1]=Pde(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Dde(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Ide(e,r-e.l));return{ixfe:n,ext:i}}function Mde(e,t){t.forEach(function(r){r[0]})}function Rde(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:aa(e)}}function Fde(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $de(e){return e.l+=4,e.read_shift(4)!=0}function Lde(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Hi(e,function(u,d,f){switch(f){case 335:n.Types.push({name:u.name});break;case 51:u.forEach(function(p){l==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):l==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:l=u?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function Bde(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(ia,function(l){var u=Bt(l);switch(si(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==u.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[u.t-1].name,index:+u.v}):i==0&&n.Value.push({type:n.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return l}),n}function Ude(e){var t=[];if(!e)return t;var r=1;return(e.match(ia)||[]).forEach(function(n){var s=Bt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Hde(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Vt(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function qde(e,t,r){var n=[];return Hi(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function zde(e,t,r,n){if(!e)return e;var s=n||{},i=!1;Hi(e,function(l,u,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!u.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function Kde(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function w6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=ga(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var u=Yr(e["!ref"]||"BDWGO1000001:A1");u.s.r>l.r&&(u.s.r=l.r),u.e.r<l.r&&(u.e.r=l.r),u.s.c>l.c&&(u.s.c=l.c),u.e.c<l.c&&(u.e.c=l.c);var d=cr(u);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function Wde(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var u=Bt(l[0]),d={author:u.authorId&&r[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},f=ga(u.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var p=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!p&&!!p[1]&&pk(p[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function Vde(e,t){var r=[],n=!1,s={},i=0;return e.replace(ia,function(l,u){var d=Bt(l);switch(si(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=u+l.length;break;case"</text>":s.t=e.slice(i,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function Gde(e,t){var r=[],n=!1;return e.replace(ia,function(i){var o=Bt(i);switch(si(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function Yde(e){var t={};t.iauthor=e.read_shift(4);var r=Rl(e);return t.rfx=r.s,t.ref=Vt(r.s),e.l+=16,t}var Xde=aa;function Jde(e,t){var r=[],n=[],s={},i=!1;return Hi(e,function(l,u,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var Qde="application/vnd.ms-office.vbaProject";function Zde(e){var t=lr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");lr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),lr.write(t)}function ehe(){return{"!type":"dialog"}}function the(){return{"!type":"dialog"}}function rhe(){return{"!type":"macro"}}function nhe(){return{"!type":"macro"}}var Rc=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,u?d+=t.r:--d,s+(l?"":"$")+bn(f)+(u?"":"$")+Kn(d)}return function(s,i){return t=i,s.replace(e,r)}})(),E8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ahe=(function(){return function(t,r){return t.replace(E8,function(n,s,i,o,l,u){var d=lk(o)-(i?0:r.c),f=ok(u)-(l?0:r.r),p=f==0?"":l?f+1:"["+f+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+p+"C"+m})}})();function C8(e,t){return e.replace(E8,function(r,n,s,i,o,l){return n+(s=="$"?s+i:bn(lk(i)+t.c))+(o=="$"?o+l:Kn(ok(l)+t.r))})}function she(e,t,r){var n=Cu(t),s=n.s,i=ga(r),o={r:i.r-s.r,c:i.c-s.c};return C8(e,o)}function ihe(e){return e.length!=1}function j6(e){return e.replace(/_xlfn\./g,"")}function tn(e){e.l+=1}function Eo(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function T8(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return A8(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=Eo(e),l=Eo(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function A8(e){var t=Eo(e),r=Eo(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function ohe(e,t,r){if(r.biff<8)return A8(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Eo(e),o=Eo(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function O8(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return lhe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Eo(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function lhe(e){var t=Eo(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function che(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function uhe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return dhe(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function dhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function hhe(e,t,r){var n=(e[e.l++]&96)>>5,s=T8(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function fhe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=T8(e,i,r);return[n,s,o]}function phe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function mhe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function ghe(e,t,r){var n=(e[e.l++]&96)>>5,s=ohe(e,t-1,r);return[n,s]}function xhe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function N6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function yhe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function vhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function bhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function whe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function jhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function P8(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Nhe(e){return e.read_shift(2),P8(e)}function khe(e){return e.read_shift(2),P8(e)}function She(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=O8(e,0,r);return[n,s]}function _he(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=uhe(e,0,r);return[n,s]}function Ehe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=O8(e,0,r);return[n,s,i]}function Che(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Tfe[s],M8[s],n]}function The(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Ahe(e);return[s,(i[0]===0?M8:Cfe)[i[1]]]}function Ahe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Ohe(e,t,r){e.l+=r&&r.biff==2?3:4}function Phe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Ihe(e){return e.l++,Fl[e.read_shift(1)]}function Dhe(e){return e.l++,e.read_shift(2)}function Mhe(e){return e.l++,e.read_shift(1)!==0}function Rhe(e){return e.l++,ta(e)}function Fhe(e,t,r){return e.l++,cf(e,t-1,r)}function $he(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Jr(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Fl[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ta(e);break;case 2:r[1]=$l(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Lhe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Rl:mg)(e));return s}function Bhe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=$he(e,r.biff);return o}function Uhe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function Hhe(e,t,r){if(r.biff==5)return qhe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function qhe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function zhe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Khe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Whe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Vhe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var Ghe=sa,Yhe=sa,Xhe=sa;function df(e,t,r){return e.l+=2,[che(e)]}function gk(e){return e.l+=6,[]}var Jhe=df,Qhe=gk,Zhe=gk,efe=df;function I8(e){return e.l+=2,[an(e),e.read_shift(2)&1]}var tfe=df,rfe=I8,nfe=gk,afe=df,sfe=df,ife=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ofe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=ife[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function lfe(e){return e.l+=2,[e.read_shift(4)]}function cfe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function ufe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function dfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function hfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function ffe(e){return e.l+=4,[0,0]}var k6={1:{n:"PtgExp",f:Phe},2:{n:"PtgTbl",f:Xhe},3:{n:"PtgAdd",f:tn},4:{n:"PtgSub",f:tn},5:{n:"PtgMul",f:tn},6:{n:"PtgDiv",f:tn},7:{n:"PtgPower",f:tn},8:{n:"PtgConcat",f:tn},9:{n:"PtgLt",f:tn},10:{n:"PtgLe",f:tn},11:{n:"PtgEq",f:tn},12:{n:"PtgGe",f:tn},13:{n:"PtgGt",f:tn},14:{n:"PtgNe",f:tn},15:{n:"PtgIsect",f:tn},16:{n:"PtgUnion",f:tn},17:{n:"PtgRange",f:tn},18:{n:"PtgUplus",f:tn},19:{n:"PtgUminus",f:tn},20:{n:"PtgPercent",f:tn},21:{n:"PtgParen",f:tn},22:{n:"PtgMissArg",f:tn},23:{n:"PtgStr",f:Fhe},26:{n:"PtgSheet",f:cfe},27:{n:"PtgEndSheet",f:ufe},28:{n:"PtgErr",f:Ihe},29:{n:"PtgBool",f:Mhe},30:{n:"PtgInt",f:Dhe},31:{n:"PtgNum",f:Rhe},32:{n:"PtgArray",f:xhe},33:{n:"PtgFunc",f:Che},34:{n:"PtgFuncVar",f:The},35:{n:"PtgName",f:Uhe},36:{n:"PtgRef",f:She},37:{n:"PtgArea",f:hhe},38:{n:"PtgMemArea",f:zhe},39:{n:"PtgMemErr",f:Ghe},40:{n:"PtgMemNoMem",f:Yhe},41:{n:"PtgMemFunc",f:Khe},42:{n:"PtgRefErr",f:Whe},43:{n:"PtgAreaErr",f:phe},44:{n:"PtgRefN",f:_he},45:{n:"PtgAreaN",f:ghe},46:{n:"PtgMemAreaN",f:dfe},47:{n:"PtgMemNoMemN",f:hfe},57:{n:"PtgNameX",f:Hhe},58:{n:"PtgRef3d",f:Ehe},59:{n:"PtgArea3d",f:fhe},60:{n:"PtgRefErr3d",f:Vhe},61:{n:"PtgAreaErr3d",f:mhe},255:{}},pfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},mfe={1:{n:"PtgElfLel",f:I8},2:{n:"PtgElfRw",f:afe},3:{n:"PtgElfCol",f:Jhe},6:{n:"PtgElfRwV",f:sfe},7:{n:"PtgElfColV",f:efe},10:{n:"PtgElfRadical",f:tfe},11:{n:"PtgElfRadicalS",f:nfe},13:{n:"PtgElfColS",f:Qhe},15:{n:"PtgElfColSV",f:Zhe},16:{n:"PtgElfRadicalLel",f:rfe},25:{n:"PtgList",f:ofe},29:{n:"PtgSxName",f:lfe},255:{}},gfe={0:{n:"PtgAttrNoop",f:ffe},1:{n:"PtgAttrSemi",f:jhe},2:{n:"PtgAttrIf",f:bhe},4:{n:"PtgAttrChoose",f:yhe},8:{n:"PtgAttrGoto",f:vhe},16:{n:"PtgAttrSum",f:Ohe},32:{n:"PtgAttrBaxcel",f:N6},33:{n:"PtgAttrBaxcel",f:N6},64:{n:"PtgAttrSpace",f:Nhe},65:{n:"PtgAttrSpaceSemi",f:khe},128:{n:"PtgAttrIfError",f:whe},255:{}};function hf(e,t,r,n){if(n.biff<8)return sa(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Bhe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Lhe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(sa(e,t)),i}function ff(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=k6[i]||k6[pfe[i]],(i===24||i===25)&&(s=(i===24?mfe:gfe)[e[e.l+1]]),!s||!s.f?sa(e,t):o.push([s.n,s.f(e,t,r)]);return o}function xfe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var yfe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function vfe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function D8(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function S6(e,t,r){var n=D8(e,t,r);return n=="#REF"?n:vfe(n,r)}function Zn(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],u,d,f,p=0,m=0,x,b="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",N=0,k=e[0].length;N<k;++N){var j=e[0][N];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),d=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=Gr(" ",e[0][y][1][1]);break;case 1:v=Gr("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}d=d+v,y=-1}l.push(d+yfe[j[0]]+u);break;case"PtgIsect":u=l.pop(),d=l.pop(),l.push(d+" "+u);break;case"PtgUnion":u=l.pop(),d=l.pop(),l.push(d+","+u);break;case"PtgRange":u=l.pop(),d=l.pop(),l.push(d+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Hd(j[1][1],o,s),l.push(qd(f,i));break;case"PtgRefN":f=r?Hd(j[1][1],r,s):j[1][1],l.push(qd(f,i));break;case"PtgRef3d":p=j[1][1],f=Hd(j[1][2],o,s),b=S6(n,p,s),l.push(b+"!"+qd(f,i));break;case"PtgFunc":case"PtgFuncVar":var A=j[1][0],S=j[1][1];A||(A=0),A&=127;var E=A==0?[]:l.slice(-A);l.length-=A,S==="User"&&(S=E.shift()),l.push(S+"("+E.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":x=s6(j[1][1],r?{s:r}:o,s),l.push(vw(x,s));break;case"PtgArea":x=s6(j[1][1],o,s),l.push(vw(x,s));break;case"PtgArea3d":p=j[1][1],x=j[1][2],b=S6(n,p,s),l.push(b+"!"+vw(x,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=j[1][2];var _=(n.names||[])[m-1]||(n[0]||[])[m],T=_?_.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var D=j[1][1];m=j[1][2];var F;if(s.biff<=5)D<0&&(D=-D),n[D]&&(F=n[D][m]);else{var P="";if(((n[D]||[])[0]||[])[0]==14849||(((n[D]||[])[0]||[])[0]==1025?n[D][m]&&n[D][m].itab>0&&(P=n.SheetNames[n[D][m].itab-1]+"!"):P=n.SheetNames[m-1]+"!"),n[D]&&n[D][m])P+=n[D][m].Name;else if(n[0]&&n[0][m])P+=n[0][m].Name;else{var I=(D8(n,D,s)||"").split(";;");I[m-1]?P=I[m-1]:P+="SH33TJSERRX"}l.push(P);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var B="(",z=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:B=Gr(" ",e[0][y][1][1])+B;break;case 3:B=Gr("\r",e[0][y][1][1])+B;break;case 4:z=Gr(" ",e[0][y][1][1])+z;break;case 5:z=Gr("\r",e[0][y][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(B+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:j[1][1],r:j[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Vt(f)]){var re=n.sharedf[Vt(f)];l.push(Zn(re,o,Y,n,s))}else{var X=!1;for(u=0;u!=n.arrayf.length;++u)if(d=n.arrayf[u],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){l.push(Zn(d[1],o,Y,n,s)),X=!0;break}X||l.push(j[1])}break;case"PtgArray":l.push("{"+xfe(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var ne=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&ne.indexOf(e[0][N][0])==-1){j=e[0][y];var Z=!0;switch(j[1][0]){case 4:Z=!1;case 0:v=Gr(" ",j[1][1]);break;case 5:Z=!1;case 1:v=Gr("\r",j[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((Z?v:"")+l.pop()+(Z?"":v)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function bfe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],sa(e,t-2)];var l=ff(e,o,r);return t!==o+s&&(i=hf(e,t-o-s,l,r)),e.l=n,[l,i]}function wfe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],sa(e,t-2)];var l=ff(e,o,r);return t!==o+s&&(i=hf(e,t-o-s,l,r)),e.l=n,[l,i]}function jfe(e,t,r,n){var s=e.l+t,i=ff(e,n,r),o;return s!==e.l&&(o=hf(e,s-e.l,i,r)),[i,o]}function Nfe(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=ff(e,i,r);return i==65535?[[],sa(e,t-2)]:(t!==i+2&&(s=hf(e,n-i-2,o,r)),[o,s])}function kfe(e){var t;if(_i(e,e.l+6)!==65535)return[ta(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function jw(e,t,r){var n=e.l+t,s=ii(e);r.biff==2&&++e.l;var i=kfe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=wfe(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function gg(e,t,r){var n=e.read_shift(4),s=ff(e,n,r),i=e.read_shift(4),o=i>0?hf(e,i,s,r):null;return[s,o]}var Sfe=gg,xg=gg,_fe=gg,Efe=gg,Cfe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},M8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Tfe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function _6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Nw(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Vd={},Fc={};function Gd(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function R8(e,t,r,n,s,i){try{n.cellNF&&(e.z=Yt[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=In(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Yt[t]==null&&pl(Aoe[t]||"General",t),e.t==="e")e.w=e.w||Fl[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qh(e.v);else if(e.t==="d"){var o=ya(e.v);(o|0)===o?e.w=o.toString(10):e.w=qh(o)}else{if(e.v===void 0)return"";e.w=kl(e.v,Fc)}else e.t==="d"?e.w=us(t,ya(e.v),Fc):e.w=us(t,e.v,Fc)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=pm(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=pm(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function Afe(e,t){var r=Yr(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=cr(r))}var Ofe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Pfe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Ife=/<(?:\w:)?hyperlink [^>]*>/mg,Dfe=/"(\w*:\w*)"/,Mfe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Rfe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ffe=/<(?:\w:)?pageMargins[^>]*\/>/g,F8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,$fe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Lfe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Bfe(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",p=e.match(Pfe);p?(d=e.slice(0,p.index),f=e.slice(p.index+p[0].length)):d=f=e;var m=d.match(F8);m?xk(m[0],l,s,r):(m=d.match($fe))&&Ufe(m[0],m[1]||"",l,s,r);var x=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var b=d.slice(x,x+50).match(Dfe);b&&Afe(l,b[1])}var y=d.match(Lfe);y&&y[1]&&Vfe(y[1],s);var v=[];if(t.cellStyles){var N=d.match(Mfe);N&&zfe(v,N)}p&&Gfe(p[1],l,t,u,i,o);var k=f.match(Rfe);k&&(l["!autofilter"]=Kfe(k[0]));var j=[],A=f.match(Ofe);if(A)for(x=0;x!=A.length;++x)j[x]=Yr(A[x].slice(A[x].indexOf('"')+1));var S=f.match(Ife);S&&Hfe(l,S,n);var E=f.match(Ffe);if(E&&(l["!margins"]=qfe(Bt(E[0]))),!l["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(l["!ref"]=cr(u)),t.sheetRows>0&&l["!ref"]){var _=Yr(l["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>u.e.r&&(_.e.r=u.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>u.e.c&&(_.e.c=u.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=cr(_))}return v.length>0&&(l["!cols"]=v),j.length>0&&(l["!merges"]=j),l}function xk(e,t,r,n){var s=Bt(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=hr(Dr(s.codeName)))}function Ufe(e,t,r,n,s){xk(e.slice(0,e.indexOf(">")),r,n,s)}function Hfe(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=Bt(Dr(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+hr(i.location))):(i.Target="#"+hr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Yr(i.ref),u=l.s.r;u<=l.e.r;++u)for(var d=l.s.c;d<=l.e.c;++d){var f=Vt({c:d,r:u});n?(e[u]||(e[u]=[]),e[u][d]||(e[u][d]={t:"z",v:void 0}),e[u][d].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function qfe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function zfe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Bt(t[n],!0);s.hidden&&(s.hidden=Br(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,mk(s.width)),fu(s);i<=o;)e[i++]=zn(s)}}function Kfe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var Wfe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Vfe(e,t){t.Views||(t.Views=[{}]),(e.match(Wfe)||[]).forEach(function(r,n){var s=Bt(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Br(s.rightToLeft)&&(t.Views[n].RTL=!0)})}var Gfe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=zh("v"),o=zh("f");return function(u,d,f,p,m,x){for(var b=0,y="",v=[],N=[],k=0,j=0,A=0,S="",E,_,T=0,D=0,F,P,I=0,B=0,z=Array.isArray(x.CellXf),Y,re=[],X=[],ne=Array.isArray(d),Z=[],me={},G=!1,L=!!f.sheetStubs,ee=u.split(t),te=0,J=ee.length;te!=J;++te){y=ee[te].trim();var he=y.length;if(he!==0){var Se=0;e:for(b=0;b<he;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(f&&f.cellStyles){if(_=Bt(y.slice(Se,b),!0),T=_.r!=null?parseInt(_.r,10):T+1,D=-1,f.sheetRows&&f.sheetRows<T)continue;me={},G=!1,_.ht&&(G=!0,me.hpt=parseFloat(_.ht),me.hpx=Gh(me.hpt)),_.hidden=="1"&&(G=!0,me.hidden=!0),_.outlineLevel!=null&&(G=!0,me.level=+_.outlineLevel),G&&(Z[T-1]=me)}break;case"<":Se=b;break}if(Se>=b)break;if(_=Bt(y.slice(Se,b),!0),T=_.r!=null?parseInt(_.r,10):T+1,D=-1,!(f.sheetRows&&f.sheetRows<T)){p.s.r>T-1&&(p.s.r=T-1),p.e.r<T-1&&(p.e.r=T-1),f&&f.cellStyles&&(me={},G=!1,_.ht&&(G=!0,me.hpt=parseFloat(_.ht),me.hpx=Gh(me.hpt)),_.hidden=="1"&&(G=!0,me.hidden=!0),_.outlineLevel!=null&&(G=!0,me.level=+_.outlineLevel),G&&(Z[T-1]=me)),v=y.slice(b).split(e);for(var Oe=0;Oe!=v.length&&v[Oe].trim().charAt(0)=="<";++Oe);for(v=v.slice(Oe),b=0;b!=v.length;++b)if(y=v[b].trim(),y.length!==0){if(N=y.match(r),k=b,j=0,A=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,N!=null&&N.length===2){for(k=0,S=N[1],j=0;j!=S.length&&!((A=S.charCodeAt(j)-64)<1||A>26);++j)k=26*k+A;--k,D=k}else++D;for(j=0;j!=y.length&&y.charCodeAt(j)!==62;++j);if(++j,_=Bt(y.slice(0,j),!0),_.r||(_.r=Vt({r:T-1,c:D})),S=y.slice(j),E={t:""},(N=S.match(i))!=null&&N[1]!==""&&(E.v=hr(N[1])),f.cellFormula){if((N=S.match(o))!=null&&N[1]!==""){if(E.f=hr(Dr(N[1])).replace(/\r\n/g,`
`),f.xlfn||(E.f=j6(E.f)),N[0].indexOf('t="array"')>-1)E.F=(S.match(s)||[])[1],E.F.indexOf(":")>-1&&re.push([Yr(E.F),E.F]);else if(N[0].indexOf('t="shared"')>-1){P=Bt(N[0]);var pe=hr(Dr(N[1]));f.xlfn||(pe=j6(pe)),X[parseInt(P.si,10)]=[P,pe,_.r]}}else(N=S.match(/<f[^>]*\/>/))&&(P=Bt(N[0]),X[P.si]&&(E.f=she(X[P.si][1],X[P.si][2],_.r)));var xe=ga(_.r);for(j=0;j<re.length;++j)xe.r>=re[j][0].s.r&&xe.r<=re[j][0].e.r&&xe.c>=re[j][0].s.c&&xe.c<=re[j][0].e.c&&(E.F=re[j][1])}if(_.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(L)E.t="z";else continue;else E.t=_.t||"n";switch(p.s.c>D&&(p.s.c=D),p.e.c<D&&(p.e.c=D),E.t){case"n":if(E.v==""||E.v==null){if(!L)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!L)continue;E.t="z"}else F=Vd[parseInt(E.v,10)],E.v=F.t,E.r=F.r,f.cellHTML&&(E.h=F.h);break;case"str":E.t="s",E.v=E.v!=null?Dr(E.v):"",f.cellHTML&&(E.h=ak(E.v));break;case"inlineStr":N=S.match(n),E.t="s",N!=null&&(F=pk(N[1]))?(E.v=F.t,f.cellHTML&&(E.h=F.h)):E.v="";break;case"b":E.v=Br(E.v);break;case"d":f.cellDates?E.v=In(E.v,1):(E.v=ya(In(E.v,1)),E.t="n");break;case"e":(!f||f.cellText!==!1)&&(E.w=E.v),E.v=a8[E.v];break}if(I=B=0,Y=null,z&&_.s!==void 0&&(Y=x.CellXf[_.s],Y!=null&&(Y.numFmtId!=null&&(I=Y.numFmtId),f.cellStyles&&Y.fillId!=null&&(B=Y.fillId))),R8(E,I,B,f,m,x),f.cellDates&&z&&E.t=="n"&&Eu(Yt[I])&&(E.t="d",E.v=pg(E.v)),_.cm&&f.xlmeta){var Fe=(f.xlmeta.Cell||[])[+_.cm-1];Fe&&Fe.type=="XLDAPR"&&(E.D=!0)}if(ne){var O=ga(_.r);d[O.r]||(d[O.r]=[]),d[O.r][O.c]=E}else d[_.r]=E}}}}Z.length>0&&(d["!rows"]=Z)}})();function Yfe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var Xfe=Rl;function Jfe(){}function Qfe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=ble(e),r}function Zfe(e){var t=hs(e);return[t]}function e0e(e){var t=Ml(e);return[t]}function t0e(e){var t=hs(e),r=e.read_shift(1);return[t,r,"b"]}function r0e(e){var t=Ml(e),r=e.read_shift(1);return[t,r,"b"]}function n0e(e){var t=hs(e),r=e.read_shift(1);return[t,r,"e"]}function a0e(e){var t=Ml(e),r=e.read_shift(1);return[t,r,"e"]}function s0e(e){var t=hs(e),r=e.read_shift(4);return[t,r,"s"]}function i0e(e){var t=Ml(e),r=e.read_shift(4);return[t,r,"s"]}function o0e(e){var t=hs(e),r=ta(e);return[t,r,"n"]}function $8(e){var t=Ml(e),r=ta(e);return[t,r,"n"]}function l0e(e){var t=hs(e),r=dk(e);return[t,r,"n"]}function c0e(e){var t=Ml(e),r=dk(e);return[t,r,"n"]}function u0e(e){var t=hs(e),r=ck(e);return[t,r,"is"]}function d0e(e){var t=hs(e),r=aa(e);return[t,r,"str"]}function h0e(e){var t=Ml(e),r=aa(e);return[t,r,"str"]}function f0e(e,t,r){var n=e.l+t,s=hs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=xg(e,n-e.l,r);o[3]=Zn(l,null,s,r.supbooks,r)}else e.l=n;return o}function p0e(e,t,r){var n=e.l+t,s=hs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=xg(e,n-e.l,r);o[3]=Zn(l,null,s,r.supbooks,r)}else e.l=n;return o}function m0e(e,t,r){var n=e.l+t,s=hs(e);s.r=r["!row"];var i=ta(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=xg(e,n-e.l,r);o[3]=Zn(l,null,s,r.supbooks,r)}else e.l=n;return o}function g0e(e,t,r){var n=e.l+t,s=hs(e);s.r=r["!row"];var i=aa(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=xg(e,n-e.l,r);o[3]=Zn(l,null,s,r.supbooks,r)}else e.l=n;return o}var x0e=Rl;function y0e(e,t){var r=e.l+t,n=Rl(e),s=uk(e),i=aa(e),o=aa(e),l=aa(e);e.l=r;var u={rfx:n,relId:s,loc:i,display:l};return o&&(u.Tooltip=o),u}function v0e(){}function b0e(e,t,r){var n=e.l+t,s=t8(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Sfe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function w0e(e,t,r){var n=e.l+t,s=Rl(e),i=[s];if(r.cellFormula){var o=Efe(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}var j0e=["left","right","top","bottom","header","footer"];function N0e(e){var t={};return j0e.forEach(function(r){t[r]=ta(e)}),t}function k0e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function S0e(){}function _0e(){}function E0e(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var u=l.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,m=!1,x,b,y,v,N,k,j,A,S,E=[];l.biff=12,l["!row"]=0;var _=0,T=!1,D=[],F={},P=l.supbooks||s.supbooks||[[]];if(P.sharedf=F,P.arrayf=D,P.SheetNames=s.SheetNames||s.Sheets.map(function(ne){return ne.name}),!l.supbooks&&(l.supbooks=P,s.Names))for(var I=0;I<s.Names.length;++I)P[0][I+1]=s.Names[I];var B=[],z=[],Y=!1;xm[16]={n:"BrtShortReal",f:$8};var re;if(Hi(e,function(Z,me,G){if(!m)switch(G){case 148:d=Z;break;case 0:x=Z,l.sheetRows&&l.sheetRows<=x.r&&(m=!0),A=Kn(v=x.r),l["!row"]=x.r,(Z.hidden||Z.hpt||Z.level!=null)&&(Z.hpt&&(Z.hpx=Gh(Z.hpt)),z[Z.r]=Z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:Z[2]},Z[2]){case"n":b.v=Z[1];break;case"s":j=Vd[Z[1]],b.v=j.t,b.r=j.r;break;case"b":b.v=!!Z[1];break;case"e":b.v=Z[1],l.cellText!==!1&&(b.w=Fl[b.v]);break;case"str":b.t="s",b.v=Z[1];break;case"is":b.t="s",b.v=Z[1].t;break}if((y=o.CellXf[Z[0].iStyleRef])&&R8(b,y.numFmtId,null,l,i,o),N=Z[0].c==-1?N+1:Z[0].c,l.dense?(u[v]||(u[v]=[]),u[v][N]=b):u[bn(N)+A]=b,l.cellFormula){for(T=!1,_=0;_<D.length;++_){var L=D[_];x.r>=L[0].s.r&&x.r<=L[0].e.r&&N>=L[0].s.c&&N<=L[0].e.c&&(b.F=cr(L[0]),T=!0)}!T&&Z.length>3&&(b.f=Z[3])}if(f.s.r>x.r&&(f.s.r=x.r),f.s.c>N&&(f.s.c=N),f.e.r<x.r&&(f.e.r=x.r),f.e.c<N&&(f.e.c=N),l.cellDates&&y&&b.t=="n"&&Eu(Yt[y.numFmtId])){var ee=ul(b.v);ee&&(b.t="d",b.v=new Date(ee.y,ee.m-1,ee.d,ee.H,ee.M,ee.S,ee.u))}re&&(re.type=="XLDAPR"&&(b.D=!0),re=void 0);break;case 1:case 12:if(!l.sheetStubs||p)break;b={t:"z",v:void 0},N=Z[0].c==-1?N+1:Z[0].c,l.dense?(u[v]||(u[v]=[]),u[v][N]=b):u[bn(N)+A]=b,f.s.r>x.r&&(f.s.r=x.r),f.s.c>N&&(f.s.c=N),f.e.r<x.r&&(f.e.r=x.r),f.e.c<N&&(f.e.c=N),re&&(re.type=="XLDAPR"&&(b.D=!0),re=void 0);break;case 176:E.push(Z);break;case 49:re=((l.xlmeta||{}).Cell||[])[Z-1];break;case 494:var te=n["!id"][Z.relId];for(te?(Z.Target=te.Target,Z.loc&&(Z.Target+="#"+Z.loc),Z.Rel=te):Z.relId==""&&(Z.Target="#"+Z.loc),v=Z.rfx.s.r;v<=Z.rfx.e.r;++v)for(N=Z.rfx.s.c;N<=Z.rfx.e.c;++N)l.dense?(u[v]||(u[v]=[]),u[v][N]||(u[v][N]={t:"z",v:void 0}),u[v][N].l=Z):(k=Vt({c:N,r:v}),u[k]||(u[k]={t:"z",v:void 0}),u[k].l=Z);break;case 426:if(!l.cellFormula)break;D.push(Z),S=l.dense?u[v][N]:u[bn(N)+A],S.f=Zn(Z[1],f,{r:x.r,c:N},P,l),S.F=cr(Z[0]);break;case 427:if(!l.cellFormula)break;F[Vt(Z[0].s)]=Z[1],S=l.dense?u[v][N]:u[bn(N)+A],S.f=Zn(Z[1],f,{r:x.r,c:N},P,l);break;case 60:if(!l.cellStyles)break;for(;Z.e>=Z.s;)B[Z.e--]={width:Z.w/256,hidden:!!(Z.flags&1),level:Z.level},Y||(Y=!0,mk(Z.w/256)),fu(B[Z.e+1]);break;case 161:u["!autofilter"]={ref:cr(Z)};break;case 476:u["!margins"]=Z;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),Z.name&&(s.Sheets[r].CodeName=Z.name),(Z.above||Z.left)&&(u["!outline"]={above:Z.above,left:Z.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),Z.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!me.T){if(!p||l.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},l),delete l.supbooks,delete l["!row"],!u["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(u["!ref"]=cr(d||f)),l.sheetRows&&u["!ref"]){var X=Yr(u["!ref"]);l.sheetRows<=+X.e.r&&(X.e.r=l.sheetRows-1,X.e.r>f.e.r&&(X.e.r=f.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>f.e.c&&(X.e.c=f.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),u["!fullref"]=u["!ref"],u["!ref"]=cr(X))}return E.length>0&&(u["!merges"]=E),B.length>0&&(u["!cols"]=B),z.length>0&&(u["!rows"]=z),u}function C0e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=hr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function T0e(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,u=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var m=C0e(p);f.s.r=f.s.c=0,f.e.c=l,d=bn(l),m[0].forEach(function(x,b){o[d+Kn(b)]={t:"n",v:x,z:m[1]},u=b}),f.e.r<u&&(f.e.r=u),++l}),l>0&&(o["!ref"]=cr(f)),o}function A0e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(F8);return l&&xk(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function O0e(e,t){e.l+=10;var r=aa(e);return{name:r}}function P0e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Hi(e,function(u,d,f){switch(f){case 550:i["!rel"]=u;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),u.name&&(s.Sheets[r].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var L8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],I0e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],D0e=[],M0e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function E6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Br(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function C6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Br(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function B8(e){C6(e.WBProps,L8),C6(e.CalcPr,M0e),E6(e.WBView,I0e),E6(e.Sheets,D0e),Fc.date1904=Br(e.WBProps.date1904)}var R0e="][*?/\\".split("");function F0e(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return R0e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var $0e=/<\w+:workbook/;function L0e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(ia,function(u,d){var f=Bt(u);switch(si(f[0])){case"<?xml":break;case"<workbook":u.match($0e)&&(s="xmlns"+u.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":L8.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Br(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=Dr(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=hr(Dr(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Dr(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Br(f.hidden||"0")&&(i.Hidden=!0),o=d+u.length;break;case"</definedName>":i.Ref=hr(Dr(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return u}),nle.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return B8(r),r}function B0e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=v2(e),r.name=aa(e),r}function U0e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?aa(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function H0e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function q0e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=wle(e),o=_fe(e,0,r),l=uk(e);e.l=n;var u={Name:i,Ptg:o};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function z0e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],xm[16]={n:"BrtFRTArchID$",f:H0e},Hi(e,function(u,d,f){switch(f){case 156:o.SheetNames.push(u.name),r.Sheets.push(u);break;case 153:r.WBProps=u;break;case 39:u.Sheet!=null&&(t.SID=u.Sheet),u.Ref=Zn(u.Ptg,null,null,o,t),delete t.SID,delete u.Ptg,i.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,u]):o[0]=[f,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),B8(r),r.Names=i,r.supbooks=o,r}function K0e(e,t,r){return t.slice(-4)===".bin"?z0e(e,r):L0e(e,r)}function W0e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?E0e(e,n,r,s,i,o,l):Bfe(e,n,r,s,i,o,l)}function V0e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?P0e(e,n,r,s,i):A0e(e,n,r,s,i)}function G0e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?rhe():nhe()}function Y0e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?ehe():the()}function X0e(e,t,r,n){return t.slice(-4)===".bin"?xde(e,r,n):dde(e,r,n)}function J0e(e,t,r){return _8(e,r)}function Q0e(e,t,r){return t.slice(-4)===".bin"?Iue(e,r):Oue(e,r)}function Z0e(e,t,r){return t.slice(-4)===".bin"?Jde(e,r):Wde(e,r)}function epe(e,t,r){return t.slice(-4)===".bin"?qde(e):Ude(e)}function tpe(e,t,r,n){return r.slice(-4)===".bin"?zde(e,t,r,n):void 0}function rpe(e,t,r){return t.slice(-4)===".bin"?Lde(e,t,r):Bde(e,t,r)}var U8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,H8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function bs(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(U8),i,o,l,u;if(s)for(u=0;u!=s.length;++u)i=s[u].match(H8),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function npe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(U8),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(H8),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var Yd;function ape(e,t){var r=Yd[e]||hr(e);return r==="General"?kl(t):us(r,t)}function spe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Br(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=In(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[hr(t)]=s}function ipe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Fl[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qh(e.v):e.w=kl(e.v):e.w=ape(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Yd[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Eu(n)){var s=ul(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function ope(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=sde[n.Pattern]||n.Pattern)}e[t.ID]=t}function lpe(e,t,r,n,s,i,o,l,u,d){var f="General",p=n.StyleID,m={};d=d||{};var x=[],b=0;for(p===void 0&&l&&(p=l.StyleID),p===void 0&&o&&(p=o.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&x.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Br(e);break;case"String":n.t="s",n.r=XP(hr(e)),n.v=e.indexOf("<")>-1?hr(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(In(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=hr(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=a8[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=XP(t||e));break}if(ipe(n,f,d),d.cellFormula!==!1)if(n.Formula){var y=hr(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Rc(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Rc("RC:RC",s):n.ArrayRange&&(n.F=Rc(n.ArrayRange,s),u.push([Yr(n.F),n.F]))}else for(b=0;b<u.length;++b)s.r>=u[b][0].s.r&&s.r<=u[b][0].e.r&&s.c>=u[b][0].s.c&&s.c<=u[b][0].e.c&&(n.F=u[b][1]);d.cellStyles&&(x.forEach(function(v){!m.patternType&&v.patternType&&(m.patternType=v.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function cpe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function kw(e,t){var r=t||{};AF();var n=Ed(sk(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Dr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=zn(r);return o.type="string",Wh.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Je){s.indexOf("<"+Je)>=0&&(i=!0)}),i)return ype(n,r);Yd={"General Number":"General","General Date":Yt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Yt[15],"Short Date":Yt[14],"Long Time":Yt[19],"Medium Time":Yt[18],"Short Time":Yt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Yt[2],Standard:Yt[4],Percent:Yt[10],Scientific:Yt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[],d,f={},p=[],m=r.dense?[]:{},x="",b={},y={},v=bs('<Data ss:Type="String">'),N=0,k=0,j=0,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},E={},_="",T=0,D=[],F={},P={},I=0,B=[],z=[],Y={},re=[],X,ne=!1,Z=[],me=[],G={},L=0,ee=0,te={Sheets:[],WBProps:{date1904:!1}},J={};Kh.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var he="";l=Kh.exec(n);)switch(l[3]=(he=l[3]).toLowerCase()){case"data":if(he=="data"){if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break}if(u[u.length-1][1])break;l[1]==="/"?lpe(n.slice(N,l.index),_,v,u[u.length-1][0]=="comment"?Y:b,{c:k,r:j},S,re[k],y,Z,r):(_="",v=bs(l[0]),N=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(z.length>0&&(b.c=z),(!r.sheetRows||r.sheetRows>j)&&b.v!==void 0&&(r.dense?(m[j]||(m[j]=[]),m[j][k]=b):m[bn(k)+Kn(j)]=b),b.HRef&&(b.l={Target:hr(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(L=k+(parseInt(b.MergeAcross,10)|0),ee=j+(parseInt(b.MergeDown,10)|0),D.push({s:{c:k,r:j},e:{c:L,r:ee}})),!r.sheetStubs)b.MergeAcross?k=L+1:++k;else if(b.MergeAcross||b.MergeDown){for(var Se=k;Se<=L;++Se)for(var Oe=j;Oe<=ee;++Oe)(Se>k||Oe>j)&&(r.dense?(m[Oe]||(m[Oe]=[]),m[Oe][Se]={t:"z"}):m[bn(Se)+Kn(Oe)]={t:"z"});k=L+1}else++k;else b=npe(l[0]),b.Index&&(k=+b.Index-1),k<A.s.c&&(A.s.c=k),k>A.e.c&&(A.e.c=k),l[0].slice(-2)==="/>"&&++k,z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<A.s.r&&(A.s.r=j),j>A.e.r&&(A.e.r=j),l[0].slice(-2)==="/>"&&(y=bs(l[0]),y.Index&&(j=+y.Index-1)),k=0,++j):(y=bs(l[0]),y.Index&&(j=+y.Index-1),G={},(y.AutoFitHeight=="0"||y.Height)&&(G.hpx=parseInt(y.Height,10),G.hpt=S8(G.hpx),me[j]=G),y.Hidden=="1"&&(G.hidden=!0,me[j]=G));break;case"worksheet":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));p.push(x),A.s.r<=A.e.r&&A.s.c<=A.e.c&&(m["!ref"]=cr(A),r.sheetRows&&r.sheetRows<=A.e.r&&(m["!fullref"]=m["!ref"],A.e.r=r.sheetRows-1,m["!ref"]=cr(A))),D.length&&(m["!merges"]=D),re.length>0&&(m["!cols"]=re),me.length>0&&(m["!rows"]=me),f[x]=m}else A={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=k=0,u.push([l[3],!1]),d=bs(l[0]),x=hr(d.Name),m=r.dense?[]:{},D=[],Z=[],me=[],J={name:x,Hidden:0},te.Sheets.push(J);break;case"table":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;u.push([l[3],!1]),re=[],ne=!1}break;case"style":l[1]==="/"?ope(S,E,r):E=bs(l[0]);break;case"numberformat":E.nf=hr(bs(l[0]).Format||"General"),Yd[E.nf]&&(E.nf=Yd[E.nf]);for(var pe=0;pe!=392&&Yt[pe]!=E.nf;++pe);if(pe==392){for(pe=57;pe!=392;++pe)if(Yt[pe]==null){pl(E.nf,pe);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(X=bs(l[0]),X.Hidden&&(X.hidden=!0,delete X.Hidden),X.Width&&(X.wpx=parseInt(X.Width,10)),!ne&&X.wpx>10){ne=!0,da=N8;for(var xe=0;xe<re.length;++xe)re[xe]&&fu(re[xe])}ne&&fu(X),re[X.Index-1||re.length]=X;for(var Fe=0;Fe<+X.Span;++Fe)re[re.length]=zn(X);break;case"namedrange":if(l[1]==="/")break;te.Names||(te.Names=[]);var O=Bt(l[0]),be={Name:O.Name,Ref:Rc(O.RefersTo.slice(1),{r:0,c:0})};te.Sheets.length>0&&(be.Sheet=te.Sheets.length-1),te.Names.push(be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=bs(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Wle(F,he,n.slice(I,l.index)):I=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else u.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));cpe(Y),z.push(Y)}else u.push([l[3],!1]),d=bs(l[0]),Y={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var De=bs(l[0]);m["!autofilter"]={ref:Rc(De.Range).replace(/\$/g,"")},u.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"null":break;default:if(u.length==0&&l[3]=="document"||u.length==0&&l[3]=="uof")return D6(n,r);var qe=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:qe=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:qe=!1}break;case"excelworkbook":switch(l[3]){case"date1904":te.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:qe=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:qe=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(I,l.index)){case"SheetHidden":J.Hidden=1;break;case"SheetVeryHidden":J.Hidden=2;break}else I=l.index+l[0].length;break;case"header":m["!margins"]||Gd(m["!margins"]={},"xlml"),isNaN(+Bt(l[0]).Margin)||(m["!margins"].header=+Bt(l[0]).Margin);break;case"footer":m["!margins"]||Gd(m["!margins"]={},"xlml"),isNaN(+Bt(l[0]).Margin)||(m["!margins"].footer=+Bt(l[0]).Margin);break;case"pagemargins":var rt=Bt(l[0]);m["!margins"]||Gd(m["!margins"]={},"xlml"),isNaN(+rt.Top)||(m["!margins"].top=+rt.Top),isNaN(+rt.Left)||(m["!margins"].left=+rt.Left),isNaN(+rt.Right)||(m["!margins"].right=+rt.Right),isNaN(+rt.Bottom)||(m["!margins"].bottom=+rt.Bottom);break;case"displayrighttoleft":te.Views||(te.Views=[]),te.Views[0]||(te.Views[0]={}),te.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:qe=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:qe=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:qe=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:qe=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:qe=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:qe=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:qe=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:qe=!1}break;case"smarttags":break;default:qe=!1;break}if(qe||l[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?spe(P,he,B,n.slice(I,l.index)):(B=l,I=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+u.join("|")}var Be={};return!r.bookSheets&&!r.bookProps&&(Be.Sheets=f),Be.SheetNames=p,Be.Workbook=te,Be.SSF=zn(Yt),Be.Props=F,Be.Custprops=P,Be}function N2(e,t){switch(bk(t=t||{}),t.type||"base64"){case"base64":return kw(Ka(e),t);case"binary":case"buffer":case"file":return kw(e,t);case"array":return kw(Dl(e),t)}}function upe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=kle(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Sle(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var dpe=[60,1084,2066,2165,2175];function hpe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var u=_i(r,r.l),d=k2[u],f=0;d!=null&&dpe.indexOf(u)>-1;)i=_i(r,r.l+2),f=r.l+4,u==2066?f+=4:(u==2165||u==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,d=k2[u=_i(r,r.l)];var p=mo(o);Bn(p,0);var m=0;p.lens=[];for(var x=0;x<o.length;++x)p.lens.push(m),m+=o[x].length;if(p.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+p.length+" < "+n;return t.f(p,p.length,s)}function qs(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Yt[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Fl[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=qh(e.v):e.w=kl(e.v):e.w=us(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Eu(Yt[n]||String(n))){var s=ul(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function K0(e,t,r){return{v:e,ixfe:t,t:r}}function fpe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,u=[],d="",f={},p,m="",x,b,y,v,N={},k=[],j,A,S=[],E=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},D=function(xt){return xt<8?ml[xt]:xt<64&&E[xt-8]||ml[xt]},F=function(xt,Qt,Nr){var or=Qt.XF.data;if(!(!or||!or.patternType||!Nr||!Nr.cellStyles)){Qt.s={},Qt.s.patternType=or.patternType;var kr;(kr=Vh(D(or.icvFore)))&&(Qt.s.fgColor={rgb:kr}),(kr=Vh(D(or.icvBack)))&&(Qt.s.bgColor={rgb:kr})}},P=function(xt,Qt,Nr){if(!(G>1)&&!(Nr.sheetRows&&xt.r>=Nr.sheetRows)){if(Nr.cellStyles&&Qt.XF&&Qt.XF.data&&F(xt,Qt,Nr),delete Qt.ixfe,delete Qt.XF,p=xt,m=Vt(xt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),xt.r<o.s.r&&(o.s.r=xt.r),xt.c<o.s.c&&(o.s.c=xt.c),xt.r+1>o.e.r&&(o.e.r=xt.r+1),xt.c+1>o.e.c&&(o.e.c=xt.c+1),Nr.cellFormula&&Qt.f){for(var or=0;or<k.length;++or)if(!(k[or][0].s.c>xt.c||k[or][0].s.r>xt.r)&&!(k[or][0].e.c<xt.c||k[or][0].e.r<xt.r)){Qt.F=cr(k[or][0]),(k[or][0].s.c!=xt.c||k[or][0].s.r!=xt.r)&&delete Qt.f,Qt.f&&(Qt.f=""+Zn(k[or][1],o,xt,Z,I));break}}Nr.dense?(s[xt.r]||(s[xt.r]=[]),s[xt.r][xt.c]=Qt):s[m]=Qt}},I={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(I.password=t.password);var B,z=[],Y=[],re=[],X=[],ne=!1,Z=[];Z.SheetNames=I.snames,Z.sharedf=I.sharedf,Z.arrayf=I.arrayf,Z.names=[],Z.XTI=[];var me=0,G=0,L=0,ee=[],te=[],J;I.codepage=1200,As(1200);for(var he=!1;e.l<e.length-1;){var Se=e.l,Oe=e.read_shift(2);if(Oe===0&&me===10)break;var pe=e.l===e.length?0:e.read_shift(2),xe=k2[Oe];if(xe&&xe.f){if(t.bookSheets&&me===133&&Oe!==133)break;if(me=Oe,xe.r===2||xe.r==12){var Fe=e.read_shift(2);if(pe-=2,!I.enc&&Fe!==Oe&&((Fe&255)<<8|Fe>>8)!==Oe)throw new Error("rt mismatch: "+Fe+"!="+Oe);xe.r==12&&(e.l+=10,pe-=10)}var O={};if(Oe===10?O=xe.f(e,pe,I):O=hpe(Oe,xe,e,pe,I),G==0&&[9,521,1033,2057].indexOf(me)===-1)continue;switch(Oe){case 34:r.opts.Date1904=_.WBProps.date1904=O;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(e.l=0),I.enc=O,!t.password)throw new Error("File is password-protected");if(O.valid==null)throw new Error("Encryption scheme unsupported");if(!O.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=O;break;case 66:var be=Number(O);switch(be){case 21010:be=1200;break;case 32768:be=1e4;break;case 32769:be=1252;break}As(I.codepage=be),he=!0;break;case 317:I.rrtabid=O;break;case 25:I.winlocked=O;break;case 439:r.opts.RefreshAll=O;break;case 12:r.opts.CalcCount=O;break;case 16:r.opts.CalcDelta=O;break;case 17:r.opts.CalcIter=O;break;case 13:r.opts.CalcMode=O;break;case 14:r.opts.CalcPrecision=O;break;case 95:r.opts.CalcSaveRecalc=O;break;case 15:I.CalcRefMode=O;break;case 2211:r.opts.FullCalc=O;break;case 129:O.fDialog&&(s["!type"]="dialog"),O.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),O.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(O);break;case 430:Z.push([O]),Z[Z.length-1].XTI=[];break;case 35:case 547:Z[Z.length-1].push(O);break;case 24:case 536:J={Name:O.Name,Ref:Zn(O.rgce,o,null,Z,I)},O.itab>0&&(J.Sheet=O.itab-1),Z.names.push(J),Z[0]||(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].push(O),O.Name=="_xlnm._FilterDatabase"&&O.itab>0&&O.rgce&&O.rgce[0]&&O.rgce[0][0]&&O.rgce[0][0][0]=="PtgArea3d"&&(te[O.itab-1]={ref:cr(O.rgce[0][0][1][2])});break;case 22:I.ExternCount=O;break;case 23:Z.length==0&&(Z[0]=[],Z[0].XTI=[]),Z[Z.length-1].XTI=Z[Z.length-1].XTI.concat(O),Z.XTI=Z.XTI.concat(O);break;case 2196:if(I.biff<8)break;J!=null&&(J.Comment=O[1]);break;case 18:s["!protect"]=O;break;case 19:O!==0&&I.WTF&&console.error("Password verifier: "+O);break;case 133:i[O.pos]=O,I.snames.push(O.name);break;case 10:{if(--G)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=cr(o),t.sheetRows&&t.sheetRows<=o.e.r){var De=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=cr(o),o.e.r=De}o.e.r++,o.e.c++}z.length>0&&(s["!merges"]=z),Y.length>0&&(s["!objects"]=Y),re.length>0&&(s["!cols"]=re),X.length>0&&(s["!rows"]=X),_.Sheets.push(T)}d===""?f=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[Oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[O.BIFFVer]||8),I.biffguess=O.BIFFVer==0,O.BIFFVer==0&&O.dt==4096&&(I.biff=5,he=!0,As(I.codepage=28591)),I.biff==8&&O.BIFFVer==0&&O.dt==16&&(I.biff=2),G++)break;if(s=t.dense?[]:{},I.biff<8&&!he&&(he=!0,As(I.codepage=t.codepage||1252)),I.biff<5||O.BIFFVer==0&&O.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var qe={pos:e.l-pe,name:d};i[qe.pos]=qe,I.snames.push(d)}else d=(i[Se]||{name:""}).name;O.dt==32&&(s["!type"]="chart"),O.dt==64&&(s["!type"]="macro"),z=[],Y=[],I.arrayf=k=[],re=[],X=[],ne=!1,T={Hidden:(i[Se]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[O.r]||[])[O.c]:s[Vt({c:O.c,r:O.r})])&&++O.c,j={ixfe:O.ixfe,XF:S[O.ixfe]||{},v:O.val,t:"n"},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t);break;case 5:case 517:j={ixfe:O.ixfe,XF:S[O.ixfe],v:O.val,t:O.t},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t);break;case 638:j={ixfe:O.ixfe,XF:S[O.ixfe],v:O.rknum,t:"n"},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t);break;case 189:for(var rt=O.c;rt<=O.C;++rt){var Be=O.rkrec[rt-O.c][0];j={ixfe:Be,XF:S[Be],v:O.rkrec[rt-O.c][1],t:"n"},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:rt,r:O.r},j,t)}break;case 6:case 518:case 1030:{if(O.val=="String"){l=O;break}if(j=K0(O.val,O.cell.ixfe,O.tt),j.XF=S[j.ixfe],t.cellFormula){var Je=O.formula;if(Je&&Je[0]&&Je[0][0]&&Je[0][0][0]=="PtgExp"){var Xt=Je[0][0][1][0],Ce=Je[0][0][1][1],Me=Vt({r:Xt,c:Ce});N[Me]?j.f=""+Zn(O.formula,o,O.cell,Z,I):j.F=((t.dense?(s[Xt]||[])[Ce]:s[Me])||{}).F}else j.f=""+Zn(O.formula,o,O.cell,Z,I)}L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P(O.cell,j,t),l=O}break;case 7:case 519:if(l)l.val=O,j=K0(O,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+Zn(l.formula,o,l.cell,Z,I)),L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(O);var Pt=Vt(O[0].s);if(x=t.dense?(s[O[0].s.r]||[])[O[0].s.c]:s[Pt],t.cellFormula&&x){if(!l||!Pt||!x)break;x.f=""+Zn(O[1],o,O[0],Z,I),x.F=cr(O[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;N[Vt(l.cell)]=O[0],x=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[Vt(l.cell)],(x||{}).f=""+Zn(O[0],o,p,Z,I)}}break;case 253:j=K0(u[O.isst].t,O.ixfe,"s"),u[O.isst].h&&(j.h=u[O.isst].h),j.XF=S[j.ixfe],L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:O.ixfe,XF:S[O.ixfe],t:"z"},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t));break;case 190:if(t.sheetStubs)for(var We=O.c;We<=O.C;++We){var ut=O.ixfe[We-O.c];j={ixfe:ut,XF:S[ut],t:"z"},L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:We,r:O.r},j,t)}break;case 214:case 516:case 4:j=K0(O.val,O.ixfe,"s"),j.XF=S[j.ixfe],L>0&&(j.z=ee[j.ixfe>>8&63]),qs(j,t,r.opts.Date1904),P({c:O.c,r:O.r},j,t);break;case 0:case 512:G===1&&(o=O);break;case 252:u=O;break;case 1054:if(I.biff==4){ee[L++]=O[1];for(var nt=0;nt<L+163&&Yt[nt]!=O[1];++nt);nt>=163&&pl(O[1],L+163)}else pl(O[1],O[0]);break;case 30:{ee[L++]=O;for(var qt=0;qt<L+163&&Yt[qt]!=O;++qt);qt>=163&&pl(O,L+163)}break;case 229:z=z.concat(O);break;case 93:Y[O.cmo[0]]=I.lastobj=O;break;case 438:I.lastobj.TxO=O;break;case 127:I.lastobj.ImData=O;break;case 440:for(v=O[0].s.r;v<=O[0].e.r;++v)for(y=O[0].s.c;y<=O[0].e.c;++y)x=t.dense?(s[v]||[])[y]:s[Vt({c:y,r:v})],x&&(x.l=O[1]);break;case 2048:for(v=O[0].s.r;v<=O[0].e.r;++v)for(y=O[0].s.c;y<=O[0].e.c;++y)x=t.dense?(s[v]||[])[y]:s[Vt({c:y,r:v})],x&&x.l&&(x.l.Tooltip=O[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;x=t.dense?(s[O[0].r]||[])[O[0].c]:s[Vt(O[0])];var ct=Y[O[2]];x||(t.dense?(s[O[0].r]||(s[O[0].r]=[]),x=s[O[0].r][O[0].c]={t:"z"}):x=s[Vt(O[0])]={t:"z"},o.e.r=Math.max(o.e.r,O[0].r),o.s.r=Math.min(o.s.r,O[0].r),o.e.c=Math.max(o.e.c,O[0].c),o.s.c=Math.min(o.s.c,O[0].c)),x.c||(x.c=[]),b={a:O[1],t:ct.TxO.t},x.c.push(b)}break;case 2173:Mde(S[O.ixfe],O.ext);break;case 125:{if(!I.cellStyles)break;for(;O.e>=O.s;)re[O.e--]={width:O.w/256,level:O.level||0,hidden:!!(O.flags&1)},ne||(ne=!0,mk(O.w/256)),fu(re[O.e+1])}break;case 520:{var dt={};O.level!=null&&(X[O.r]=dt,dt.level=O.level),O.hidden&&(X[O.r]=dt,dt.hidden=!0),O.hpt&&(X[O.r]=dt,dt.hpt=O.hpt,dt.hpx=Gh(O.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Gd(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Oe]]=O;break;case 161:s["!margins"]||Gd(s["!margins"]={}),s["!margins"].header=O.header,s["!margins"].footer=O.footer;break;case 574:O.RTL&&(_.Views[0].RTL=!0);break;case 146:E=O;break;case 2198:B=O;break;case 140:A=O;break;case 442:d?T.CodeName=O||T.name:_.WBProps.CodeName=O||"ThisWorkbook";break}}else xe||console.error("Missing Info for XLS Record 0x"+Oe.toString(16)),e.l+=pe}return r.SheetNames=ti(i).sort(function(ur,xt){return Number(ur)-Number(xt)}).map(function(ur){return i[ur].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&te.forEach(function(ur,xt){r.Sheets[r.SheetNames[xt]]["!autofilter"]=ur}),r.Strings=u,r.SSF=zn(Yt),I.enc&&(r.Encryption=I.enc),B&&(r.Themes=B),r.Metadata={},A!==void 0&&(r.Metadata.Country=A),Z.names.length>0&&(_.Names=Z.names),r.Workbook=_,r}var T6={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ppe(e,t,r){var n=lr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=h6(n,Ole,T6.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=lr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=h6(o,Ple,T6.SI);for(var u in l)t[u]==null&&(t[u]=l[u])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(i8(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function q8(e,t){t||(t={}),bk(t),yF(),t.codepage&&QN(t.codepage);var r,n;if(e.FullPaths){if(lr.find(e,"/encryption"))throw new Error("File is password-protected");r=lr.find(e,"!CompObj"),n=lr.find(e,"/Workbook")||lr.find(e,"/Book")}else{switch(t.type){case"base64":e=Ts(Ka(e));break;case"binary":e=Ts(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Bn(e,0),n={content:e}}var s,i;if(r&&upe(r),t.bookProps&&!t.bookSheets)s={};else{var o=sr?"buffer":"array";if(n&&n.content)s=fpe(n.content,t);else if((i=lr.find(e,"PerfectOffice_MAIN"))&&i.content)s=Wd.to_workbook(i.content,(t.type=o,t));else if((i=lr.find(e,"NativeContent_MAIN"))&&i.content)s=Wd.to_workbook(i.content,(t.type=o,t));else throw(i=lr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&lr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Zde(e))}var l={};return e.FullPaths&&ppe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var xm={0:{f:Yfe},1:{f:Zfe},2:{f:l0e},3:{f:n0e},4:{f:t0e},5:{f:o0e},6:{f:d0e},7:{f:s0e},8:{f:g0e},9:{f:m0e},10:{f:f0e},11:{f:p0e},12:{f:e0e},13:{f:c0e},14:{f:a0e},15:{f:r0e},16:{f:$8},17:{f:h0e},18:{f:i0e},19:{f:ck},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:q0e},40:{},42:{},43:{f:fde},44:{f:hde},45:{f:pde},46:{f:gde},47:{f:mde},48:{},49:{f:xle},50:{},51:{f:Fde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:y8},62:{f:u0e},63:{f:Hde},64:{f:S0e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:sa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:k0e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Qfe},148:{f:Xfe,p:16},151:{f:v0e},152:{},153:{f:U0e},154:{},155:{},156:{f:B0e},157:{},158:{},159:{T:1,f:Pue},160:{T:-1},161:{T:1,f:Rl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:x0e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Rde},336:{T:-1},337:{f:$de,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:v2},357:{},358:{},359:{},360:{T:1},361:{},362:{f:x8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:b0e},427:{f:w0e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:N0e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Jfe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:y0e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:v2},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Xde},633:{T:1},634:{T:-1},635:{T:1,f:Yde},636:{T:-1},637:{f:vle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:O0e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:_0e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},k2={6:{f:jw},10:{f:lo},12:{f:an},13:{f:an},14:{f:Jr},15:{f:Jr},16:{f:ta},17:{f:Jr},18:{f:Jr},19:{f:an},20:{f:g6},21:{f:g6},23:{f:x8},24:{f:y6},25:{f:Jr},26:{},27:{},28:{f:Vce},29:{},34:{f:Jr},35:{f:x6},38:{f:ta},39:{f:ta},40:{f:ta},41:{f:ta},42:{f:Jr},43:{f:Jr},47:{f:Jue},49:{f:Cce},51:{f:an},60:{},61:{f:Sce},64:{f:Jr},65:{f:Ece},66:{f:an},77:{},80:{},81:{},82:{},85:{f:an},89:{},90:{},91:{},92:{f:xce},93:{f:Yce},94:{},95:{f:Jr},96:{},97:{},99:{f:Jr},125:{f:y8},128:{f:$ce},129:{f:yce},130:{f:an},131:{f:Jr},132:{f:Jr},133:{f:vce},134:{},140:{f:tue},141:{f:an},144:{},146:{f:nue},151:{},152:{},153:{},154:{},155:{},156:{f:an},157:{},158:{},160:{f:lue},161:{f:sue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Dce},190:{f:Mce},193:{f:lo},197:{},198:{},199:{},200:{},201:{},202:{f:Jr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:an},220:{},221:{f:Jr},222:{},224:{f:Fce},225:{f:gce},226:{f:lo},227:{},229:{f:Gce},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:bce},253:{f:Tce},255:{f:wce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:d8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Jr},353:{f:lo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Bce},431:{f:Jr},432:{},433:{},434:{},437:{},438:{f:Qce},439:{f:Jr},440:{f:Zce},441:{},442:{f:uf},443:{},444:{f:an},445:{},446:{},448:{f:lo},449:{f:kce,r:2},450:{f:lo},512:{f:p6},513:{f:oue},515:{f:Lce},516:{f:Ace},517:{f:m6},519:{f:cue},520:{f:jce},523:{},545:{f:v6},549:{f:f6},566:{},574:{f:_ce},638:{f:Ice},659:{},1048:{},1054:{f:Oce},1084:{},1212:{f:zce},2048:{f:eue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:H0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:lo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:aue,r:12},2173:{f:Dde,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Jr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:qce,r:12},2197:{},2198:{f:Cde,r:12},2199:{},2200:{},2201:{},2202:{f:Kce,r:12},2203:{f:lo},2204:{},2205:{},2206:{},2207:{},2211:{f:Nce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:an},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:iue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:rue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:p6},1:{},2:{f:fue},3:{f:hue},4:{f:due},5:{f:m6},7:{f:pue},8:{},9:{f:H0},11:{},22:{f:an},30:{f:Pce},31:{},32:{},33:{f:v6},36:{},37:{f:f6},50:{f:mue},62:{},52:{},67:{},68:{f:an},69:{},86:{},126:{},127:{f:uue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:gue},223:{},234:{},354:{},421:{},518:{f:jw},521:{f:H0},536:{f:y6},547:{f:x6},561:{},579:{},1030:{f:jw},1033:{f:H0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ws(e,t,r,n){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&QF(r)&&e.push(r)}}function A6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,u=Loe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,p=0,m=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<u.length;++o){var y=u[o].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(v!="<td"&&v!="<th")){var N=y.split(/<\/t[dh]>/i);for(l=0;l<N.length;++l){var k=N[l].trim();if(k.match(/<t[dh]/i)){for(var j=k,A=0;j.charAt(0)=="<"&&(A=j.indexOf(">"))>-1;)j=j.slice(A+1);for(var S=0;S<b.length;++S){var E=b[S];E.s.c==f&&E.s.r<d&&d<=E.e.r&&(f=E.e.c+1,S=-1)}var _=Bt(k.slice(0,k.indexOf(">")));m=_.colspan?+_.colspan:1,((p=+_.rowspan)>1||m>1)&&b.push({s:{r:d,c:f},e:{r:d+(p||1)-1,c:f+m-1}});var T=_.t||_["data-t"]||"";if(!j.length){f+=m;continue}if(j=LF(j),x.s.r>d&&(x.s.r=d),x.e.r<d&&(x.e.r=d),x.s.c>f&&(x.s.c=f),x.e.c<f&&(x.e.c=f),!j.length){f+=m;continue}var D={t:"s",v:j};r.raw||!j.trim().length||T=="s"||(j==="TRUE"?D={t:"b",v:!0}:j==="FALSE"?D={t:"b",v:!1}:isNaN(Ds(j))?isNaN(hu(j).getDate())||(D={t:"d",v:In(j)},r.cellDates||(D={t:"n",v:ya(D.v)}),D.z=r.dateNF||Yt[14]):D={t:"n",v:Ds(j)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=D):n[Vt({r:d,c:f})]=D,f+=m}}}}return n["!ref"]=cr(x),b.length&&(n["!merges"]=b),n}function mpe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,u=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,u=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var f=Vt({r,c:o}),p=n.dense?(e[r]||[])[o]:e[f],m=p&&p.v!=null&&(p.h||ak(p.w||(Fi(p),p.w)||""))||"",x={};l>1&&(x.rowspan=l),u>1&&(x.colspan=u),n.editable?m='<span contenteditable="true">'+m+"</span>":p&&(x["data-t"]=p&&p.t||"z",p.v!=null&&(x["data-v"]=p.v),p.z!=null&&(x["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+p.l.Target+'">'+m+"</a>")),x.id=(n.id||"sjs")+"-"+f,i.push(tle("td",m,x))}}var b="<tr>";return b+i.join("")+"</tr>"}var gpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',xpe="</body></html>";function ype(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Io(A6(r[0],t),t);var n=jk();return r.forEach(function(s,i){Nk(n,A6(s,t),"Sheet"+(i+1))}),n}function vpe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function bpe(e,t){var r=t||{},n=r.header!=null?r.header:gpe,s=r.footer!=null?r.footer:xpe,i=[n],o=Cu(e["!ref"]);r.dense=Array.isArray(e),i.push(vpe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(mpe(e,o,l,r));return i.push("</table>"+s),i.join("")}function z8(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?ga(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Cu(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),s==-1&&(d.e.r=s=f.e.r+1)}var p=[],m=0,x=e["!rows"]||(e["!rows"]=[]),b=0,y=0,v=0,N=0,k=0,j=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&y<u;++b){var A=l[b];if(O6(A)){if(n.display)continue;x[y]={hidden:!0}}var S=A.children;for(v=N=0;v<S.length;++v){var E=S[v];if(!(n.display&&O6(E))){var _=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):LF(E.innerHTML),T=E.getAttribute("data-z")||E.getAttribute("z");for(m=0;m<p.length;++m){var D=p[m];D.s.c==N+i&&D.s.r<y+s&&y+s<=D.e.r&&(N=D.e.c+1-i,m=-1)}j=+E.getAttribute("colspan")||1,((k=+E.getAttribute("rowspan")||1)>1||j>1)&&p.push({s:{r:y+s,c:N+i},e:{r:y+s+(k||1)-1,c:N+i+(j||1)-1}});var F={t:"s",v:_},P=E.getAttribute("data-t")||E.getAttribute("t")||"";_!=null&&(_.length==0?F.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?F={t:"b",v:!0}:_==="FALSE"?F={t:"b",v:!1}:isNaN(Ds(_))?isNaN(hu(_).getDate())||(F={t:"d",v:In(_)},n.cellDates||(F={t:"n",v:ya(F.v)}),F.z=n.dateNF||Yt[14]):F={t:"n",v:Ds(_)})),F.z===void 0&&T!=null&&(F.z=T);var I="",B=E.getElementsByTagName("A");if(B&&B.length)for(var z=0;z<B.length&&!(B[z].hasAttribute("href")&&(I=B[z].getAttribute("href"),I.charAt(0)!="#"));++z);I&&I.charAt(0)!="#"&&(F.l={Target:I}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][N+i]=F):e[Vt({c:N+i,r:y+s})]=F,d.e.c<N+i&&(d.e.c=N+i),N+=j}}++y}return p.length&&(e["!merges"]=(e["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,y-1+s),e["!ref"]=cr(d),y>=u&&(e["!fullref"]=cr((d.e.r=l.length-b+y-1+s,d))),e}function K8(e,t){var r=t||{},n=r.dense?[]:{};return z8(n,e,t)}function wpe(e,t){return Io(K8(e,t),t)}function O6(e){var t="",r=jpe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function jpe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Npe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=hr(t.replace(/<[^>]*>/g,""));return[r]}var P6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function W8(e,t){var r=t||{},n=sk(e),s=[],i,o,l={name:""},u="",d=0,f,p,m={},x=[],b=r.dense?[]:{},y,v,N={value:""},k="",j=0,A=[],S=-1,E=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,D={},F=[],P={},I=0,B=0,z=[],Y=1,re=1,X=[],ne={Names:[]},Z={},me=["",""],G=[],L={},ee="",te=0,J=!1,he=!1,Se=0;for(Kh.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Kh.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?b["!ref"]=cr(_):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(b["!fullref"]=b["!ref"],_.e.r=r.sheetRows-1,b["!ref"]=cr(_)),F.length&&(b["!merges"]=F),z.length&&(b["!rows"]=z),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),x.push(f.name),m[f.name]=b,he=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=Bt(y[0],!1),S=E=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,b=r.dense?[]:{},F=[],z=[],he=!0);break;case"table-row-group":y[1]==="/"?--T:++T;break;case"table-row":case"":if(y[1]==="/"){S+=Y,Y=1;break}if(p=Bt(y[0],!1),p.?S=p.-1:S==-1&&(S=0),Y=+p["number-rows-repeated"]||1,Y<10)for(Se=0;Se<Y;++Se)T>0&&(z[S+Se]={level:T});E=-1;break;case"covered-table-cell":y[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(b[S]||(b[S]=[]),b[S][E]={t:"z"}):b[Vt({r:S,c:E})]={t:"z"}),k="",A=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++E,N=Bt(y[0],!1),re=parseInt(N["number-columns-repeated"]||"1",10),v={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(v.f=_6(hr(N.formula))),(N.||N["value-type"])=="string"&&(v.t="s",v.v=hr(N["string-value"]||""),r.dense?(b[S]||(b[S]=[]),b[S][E]=v):b[Vt({r:S,c:E})]=v),E+=re-1;else if(y[1]!=="/"){++E,k="",j=0,A=[],re=1;var Oe=Y?S+Y-1:S;if(E>_.e.c&&(_.e.c=E),E<_.s.c&&(_.s.c=E),S<_.s.r&&(_.s.r=S),Oe>_.e.r&&(_.e.r=Oe),N=Bt(y[0],!1),G=[],L={},v={t:N.||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=hr(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(I=parseInt(N["number-matrix-rows-spanned"],10)||0,B=parseInt(N["number-matrix-columns-spanned"],10)||0,P={s:{r:S,c:E},e:{r:S+I-1,c:E+B-1}},v.F=cr(P),X.push([P,v.F])),N.formula)v.f=_6(N.formula);else for(Se=0;Se<X.length;++Se)S>=X[Se][0].s.r&&S<=X[Se][0].e.r&&E>=X[Se][0].s.c&&E<=X[Se][0].e.c&&(v.F=X[Se][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(I=parseInt(N["number-rows-spanned"],10)||0,B=parseInt(N["number-columns-spanned"],10)||0,P={s:{r:S,c:E},e:{r:S+I-1,c:E+B-1}},F.push(P)),N["number-columns-repeated"]&&(re=parseInt(N["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Br(N["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(N.value);break;case"percentage":v.t="n",v.v=parseFloat(N.value);break;case"currency":v.t="n",v.v=parseFloat(N.value);break;case"date":v.t="d",v.v=In(N["date-value"]),r.cellDates||(v.t="n",v.v=ya(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Roe(N["time-value"])/86400,r.cellDates&&(v.t="d",v.v=pg(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(N.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",N["string-value"]!=null&&(k=hr(N["string-value"]),A=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(J=!1,v.t==="s"&&(v.v=k||"",A.length&&(v.R=A),J=j==0),Z.Target&&(v.l=Z),G.length>0&&(v.c=G,G=[]),k&&r.cellText!==!1&&(v.w=k),J&&(v.t="z",delete v.v),(!J||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var pe=0;pe<Y;++pe){if(re=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(b[S+pe]||(b[S+pe]=[]),b[S+pe][E]=pe==0?v:zn(v);--re>0;)b[S+pe][E+re]=zn(v);else for(b[Vt({r:S+pe,c:E})]=v;--re>0;)b[Vt({r:S+pe,c:E+re})]=zn(v);_.e.c<=E&&(_.e.c=E)}re=parseInt(N["number-columns-repeated"]||"1",10),E+=re-1,re=0,v={},k="",A=[]}Z={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;L.t=k,A.length&&(L.R=A),L.a=ee,G.push(L)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);ee="",te=0,k="",j=0,A=[];break;case"creator":y[1]==="/"?ee=n.slice(te,y.index):te=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",j=0,A=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(D[l.name]=u,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(u="",l=Bt(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Bt(y[0],!1),u+=P6[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Bt(y[0],!1),u+=P6[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=n.slice(d,y.index);break}else d=y.index+y[0].length;break;case"named-range":o=Bt(y[0],!1),me=Nw(o["cell-range-address"]);var xe={Name:o.name,Ref:me[0]+"!"+me[1]};he&&(xe.Sheet=x.length),ne.Names.push(xe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!N||!N["string-value"])){var Fe=Npe(n.slice(j,y.index));k=(k.length>0?k+`
`:"")+Fe[0]}else Bt(y[0],!1),j=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{me=Nw(Bt(y[0])["target-range-address"]),m[me[0]]["!autofilter"]={ref:me[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(Z=Bt(y[0],!1),!Z.href)break;Z.Target=hr(Z.href),delete Z.href,Z.Target.charAt(0)=="#"&&Z.Target.indexOf(".")>-1?(me=Nw(Z.Target.slice(1)),Z.Target="#"+me[0]+"!"+me[1]):Z.Target.match(/^\.\.[\\\/]/)&&(Z.Target=Z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var O={Sheets:m,SheetNames:x,Workbook:ne};return r.bookSheets&&delete O.Sheets,O}function I6(e,t){t=t||{},as(e,"META-INF/manifest.xml")&&Lle(nn(e,"META-INF/manifest.xml"),t);var r=Ha(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=W8(Dr(r),t);return as(e,"meta.xml")&&(n.Props=s8(nn(e,"meta.xml"))),n}function D6(e,t){return W8(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function yk(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function S2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Dr(Dl(e))}function _2(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function M6(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function kpe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Yh(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function jn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function na(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Yh(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var u=r[0];e[r[0]++]>=128;);l=e.slice(u,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Yh(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function vk(e,t){return e?.map(function(r){return t(r.data)})||[]}function Spe(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Yh(e,n),i=na(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:jn(i[1][0].data),messages:[]};i[2].forEach(function(l){var u=na(l.data),d=jn(u[3][0].data);o.messages.push({meta:u,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=jn(i[3][0].data)>>>0>0),r.push(o)}return r}function _pe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Yh(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var u=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,u=(t[r[0]++]&224)<<3,u|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(u=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(u=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[_2(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(d>=u)for(s.push(s[0].slice(-u)),d-=u;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-u,-u+d))}}var f=_2(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Epe(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(_pe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return _2(t)}function Cpe(e,t,r,n){var s=yk(e),i=s.getUint32(4,!0),o=(n>1?12:8)+M6(i&(n>1?3470:398))*4,l=-1,u=-1,d=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=M6(i&(n>1?12288:4096))*4,i&16&&(u=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var p;switch(e[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:t[u]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else if(u>-1)p={t:"s",v:t[u]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return p}function Tpe(e,t,r){var n=yk(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,u=NaN,d=NaN,f=new Date(2001,0,1);s&1&&(u=kpe(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var p;switch(e[1]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:t[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:p={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return p}function Ape(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Cpe(e,t,r,e[0]);case 5:return Tpe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ko(e){var t=na(e);return Yh(t[1][0].data)}function R6(e,t){var r=na(t.data),n=jn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=na(o.data),u=jn(l[1][0].data)>>>0;switch(n){case 1:i[u]=S2(l[3][0].data);break;case 8:{var d=e[ko(l[9][0].data)][0],f=na(d.data),p=e[ko(f[1][0].data)][0],m=jn(p.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var x=na(p.data);i[u]=x[3].map(function(b){return S2(b.data)}).join("")}break}}),i}function Ope(e,t){var r,n,s,i,o,l,u,d,f,p,m,x,b,y,v=na(e),N=jn(v[1][0].data)>>>0,k=jn(v[2][0].data)>>>0,j=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&jn(v[8][0].data)>0||!1,A,S;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&t!=0)A=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(u=v[6])==null?void 0:u[0])==null?void 0:d.data;else if((p=(f=v[4])==null?void 0:f[0])!=null&&p.data&&t!=1)A=(x=(m=v[4])==null?void 0:m[0])==null?void 0:x.data,S=(y=(b=v[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var E=j?4:1,_=yk(A),T=[],D=0;D<A.length/2;++D){var F=_.getUint16(D*2,!0);F<65535&&T.push([D,F])}if(T.length!=k)throw"Expected ".concat(k," cells, found ").concat(T.length);var P=[];for(D=0;D<T.length-1;++D)P[T[D][0]]=S.subarray(T[D][1]*E,T[D+1][1]*E);return T.length>=1&&(P[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*E)),{R:N,cells:P}}function Ppe(e,t){var r,n=na(t.data),s=(r=n?.[7])!=null&&r[0]?jn(n[7][0].data)>>>0>0?1:0:-1,i=vk(n[5],function(o){return Ope(o,s)});return{nrows:jn(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(u,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=u}),o},[])}}function Ipe(e,t,r){var n,s=na(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(jn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(jn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=cr(i);var o=na(s[4][0].data),l=R6(e,e[ko(o[4][0].data)][0]),u=(n=o[17])!=null&&n[0]?R6(e,e[ko(o[17][0].data)][0]):[],d=na(o[3][0].data),f=0;d[1].forEach(function(p){var m=na(p.data),x=e[ko(m[2][0].data)][0],b=jn(x.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=Ppe(e,x);y.data.forEach(function(v,N){v.forEach(function(k,j){var A=Vt({r:f+N,c:j}),S=Ape(k,l,u);S&&(r[A]=S)})}),f+=y.nrows})}function Dpe(e,t){var r=na(t.data),n={"!ref":"A1"},s=e[ko(r[2][0].data)],i=jn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Ipe(e,s[0],n),n}function Mpe(e,t){var r,n=na(t.data),s={name:(r=n[1])!=null&&r[0]?S2(n[1][0].data):"",sheets:[]},i=vk(n[2],ko);return i.forEach(function(o){e[o].forEach(function(l){var u=jn(l.meta[1][0].data);u==6e3&&s.sheets.push(Dpe(e,l))})}),s}function Rpe(e,t){var r=jk(),n=na(t.data),s=vk(n[1],ko);if(s.forEach(function(i){e[i].forEach(function(o){var l=jn(o.meta[1][0].data);if(l==2){var u=Mpe(e,o);u.sheets.forEach(function(d,f){Nk(r,d,f==0?u.name:u.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Sw(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var d;try{d=Epe(u.content)}catch(p){return console.log("?? "+u.content.length+" "+(p.message||p))}var f;try{f=Spe(d)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,o.push(p.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&jn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(u){i[u].forEach(function(d){var f=jn(d.meta[1][0].data)>>>0;if(f==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Rpe(i,l)}function Fpe(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function bk(e){Fpe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function $pe(e){return Ac.WS.indexOf(e)>-1?"sheet":e==Ac.CS?"chart":e==Ac.DS?"dialog":e==Ac.MS?"macro":e&&e.length?e:"sheet"}function Lpe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,$pe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Bpe(e,t,r,n,s,i,o,l,u,d,f,p){try{i[n]=zd(Ha(e,r,!0),t);var m=nn(e,t),x;switch(l){case"sheet":x=W0e(m,t,s,u,i[n],d,f,p);break;case"chart":if(x=V0e(m,t,s,u,i[n],d,f,p),!x||!x["!drawel"])break;var b=Td(x["!drawel"].Target,t),y=b2(b),v=Kde(Ha(e,b,!0),zd(Ha(e,y,!0),b)),N=Td(v,b),k=b2(N);x=T0e(Ha(e,N,!0),N,u,zd(Ha(e,k,!0),N),d,x);break;case"macro":x=G0e(m,t,s,u,i[n],d,f,p);break;case"dialog":x=Y0e(m,t,s,u,i[n],d,f,p);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=x;var j=[];i&&i[n]&&ti(i[n]).forEach(function(A){var S="";if(i[n][A].Type==Ac.CMNT){S=Td(i[n][A].Target,t);var E=Z0e(nn(e,S,!0),S,u);if(!E||!E.length)return;w6(x,E,!1)}i[n][A].Type==Ac.TCMNT&&(S=Td(i[n][A].Target,t),j=j.concat(Vde(nn(e,S,!0),u)))}),j&&j.length&&w6(x,j,!0,u.people||[])}catch(A){if(u.WTF)throw A}}function ts(e){return e.charAt(0)=="/"?e.slice(1):e}function Upe(e,t){if(AF(),t=t||{},bk(t),as(e,"META-INF/manifest.xml")||as(e,"objectdata.xml"))return I6(e,t);if(as(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Sw<"u"){if(e.FileIndex)return Sw(e);var r=lr.utils.cfb_new();return GP(e).forEach(function(z){Hoe(r,z,Uoe(e,z))}),Sw(r)}throw new Error("Unsupported NUMBERS file")}if(!as(e,"[Content_Types].xml"))throw as(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):as(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=GP(e),s=Fle(Ha(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",nn(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!nn(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var u={},d={};if(!t.bookSheets&&!t.bookProps){if(Vd=[],s.sst)try{Vd=Q0e(nn(e,ts(s.sst)),s.sst,t)}catch(z){if(t.WTF)throw z}t.cellStyles&&s.themes.length&&(u=J0e(Ha(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=X0e(nn(e,ts(s.style)),s.style,u,t))}s.links.map(function(z){try{var Y=zd(Ha(e,b2(ts(z))),z);return tpe(nn(e,ts(z)),Y,z,t)}catch{}});var f=K0e(nn(e,ts(s.workbooks[0])),s.workbooks[0],t),p={},m="";s.coreprops.length&&(m=nn(e,ts(s.coreprops[0]),!0),m&&(p=s8(m)),s.extprops.length!==0&&(m=nn(e,ts(s.extprops[0]),!0),m&&Hle(m,p,t)));var x={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=Ha(e,ts(s.custprops[0]),!0),m&&(x=zle(m,t)));var b={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(Y){return Y.name}):p.Worksheets&&p.SheetNames.length>0&&(o=p.SheetNames),t.bookProps&&(b.Props=p,b.Custprops=x),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var y={};t.bookDeps&&s.calcchain&&(y=epe(nn(e,ts(s.calcchain)),s.calcchain));var v=0,N={},k,j;{var A=f.Sheets;p.Worksheets=A.length,p.SheetNames=[];for(var S=0;S!=A.length;++S)p.SheetNames[S]=A[S].name}var E=i?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");as(e,T)||(T="xl/_rels/workbook."+E+".rels");var D=zd(Ha(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=rpe(nn(e,ts(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Gde(nn(e,ts(s.people[0])),t)),D&&(D=Lpe(D,f.Sheets));var F=nn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=p.Worksheets;++v){var P="sheet";if(D&&D[v]?(k="xl/"+D[v][1].replace(/[\/]?xl\//,""),as(e,k)||(k=D[v][1]),as(e,k)||(k=T.replace(/_rels\/.*$/,"")+D[v][1]),P=D[v][2]):(k="xl/worksheets/sheet"+(v+1-F)+"."+E,k=k.replace(/sheet0\./,"sheet.")),j=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(p.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var I=!1,B=0;B!=t.sheets.length;++B)typeof t.sheets[B]=="number"&&t.sheets[B]==v&&(I=1),typeof t.sheets[B]=="string"&&t.sheets[B].toLowerCase()==p.SheetNames[v].toLowerCase()&&(I=1);if(!I)continue e}}Bpe(e,k,j,p.SheetNames[v],v,N,o,P,t,f,u,d)}return b={Directory:s,Workbook:f,Props:p,Custprops:x,Deps:y,Sheets:o,SheetNames:p.SheetNames,Strings:Vd,Styles:d,Themes:u,SSF:zn(Yt)},t&&t.bookFiles&&(e.files?(b.keys=n,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(z,Y){z=z.replace(/^Root Entry[\/]/,""),b.keys.push(z),b.files[z]=e.FileIndex[Y]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=nn(e,ts(s.vba[0]),!0):s.defaults&&s.defaults.bin===Qde&&(b.vbaraw=nn(e,"xl/vbaProject.bin",!0))),b}function Hpe(e,t){var r=t||{},n="Workbook",s=lr.find(e,n);try{if(n="/!DataSpaces/Version",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Due(s.content),n="/!DataSpaces/DataSpaceMap",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Rue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Fue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Lue(s.content)}catch{}if(n="/EncryptionInfo",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Bue(s.content);if(n="/EncryptedPackage",s=lr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function wk(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ka(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function qpe(e,t){return lr.find(e,"EncryptedPackage")?Hpe(e,t):q8(e,t)}function zpe(e,t){var r,n=e,s=t||{};return s.type||(s.type=sr&&Buffer.isBuffer(e)?"buffer":"base64"),r=RF(n,s),Upe(r,s)}function V8(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return N2(e.slice(r),t);default:break e}return Wh.to_workbook(e,t)}function Kpe(e,t){var r="",n=wk(e,t);switch(t.type){case"base64":r=Ka(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Sl(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Dr(r)),t.type="binary",V8(r,t)}function Wpe(e,t){var r=e;return t.type=="base64"&&(r=Ka(r)),r=Hh.utils.decode(1200,r.slice(2),"str"),t.type="binary",V8(r,t)}function Vpe(e){return e.match(/[^\x00-\x7F]/)?Ad(e):e}function _w(e,t,r,n){return n?(r.type="string",Wh.to_workbook(e,r)):Wh.to_workbook(t,r)}function E2(e,t){yF();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return E2(new Uint8Array(e),(r=zn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Fc={},r.dateNF&&(Fc.dateNF=r.dateNF),r.type||(r.type=sr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=sr?"buffer":"binary",n=Doe(e),typeof Uint8Array<"u"&&!sr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Vpe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=zn(r),r.type="array",E2(ZN(n),r)}switch((s=wk(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return qpe(lr.read(n,r),r);break;case 9:if(s[1]<=8)return q8(n,r);break;case 60:return N2(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return wue(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return vue.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?zpe(n,r):_w(e,n,r,i);case 239:return s[3]===60?N2(n,r):_w(e,n,r,i);case 255:if(s[1]===254)return Wpe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Wd.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Wd.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return b6.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return Que.to_workbook(n,r);break;case 10:case 13:case 32:return Kpe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return xue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?b6.to_workbook(n,r):_w(e,n,r,i)}function Gpe(e,t,r,n,s,i,o,l){var u=Kn(r),d=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),p=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var x=t.s.c;x<=t.e.c;++x){var b=o?e[r][x]:e[n[x]+u];if(b===void 0||b.t===void 0){if(d===void 0)continue;i[x]!=null&&(m[i[x]]=d);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[x]!=null){if(y==null)if(b.t=="e"&&y===null)m[i[x]]=null;else if(d!==void 0)m[i[x]]=d;else if(f&&y===null)m[i[x]]=null;else continue;else m[i[x]]=f&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?y:Fi(b,y,l);y!=null&&(p=!1)}}return{row:m,isempty:p}}function C2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":u=Yr(f);break;case"number":u=Yr(e["!ref"]),u.s.r=f;break;default:u=f}n>0&&(s=0);var p=Kn(u.s.r),m=[],x=[],b=0,y=0,v=Array.isArray(e),N=u.s.r,k=0,j={};v&&!e[N]&&(e[N]=[]);var A=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(k=u.s.c;k<=u.e.c;++k)if(!(A[k]||{}).hidden)switch(m[k]=bn(k),r=v?e[N][k]:e[m[k]+p],n){case 1:i[k]=k-u.s.c;break;case 2:i[k]=m[k];break;case 3:i[k]=d.header[k-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Fi(r,null,d),y=j[o]||0,!y)j[o]=1;else{do l=o+"_"+y++;while(j[l]);j[o]=y,j[l]=1}i[k]=l}for(N=u.s.r+s;N<=u.e.r;++N)if(!(S[N]||{}).hidden){var E=Gpe(e,u,N,m,n,i,v,d);(E.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(x[b++]=E.row)}return x.length=b,x}var F6=/"/g;function Ype(e,t,r,n,s,i,o,l){for(var u=!0,d=[],f="",p=Kn(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var x=l.dense?(e[r]||[])[m]:e[n[m]+p];if(x==null)f="";else if(x.v!=null){u=!1,f=""+(l.rawNumbers&&x.t=="n"?x.v:Fi(x,null,l));for(var b=0,y=0;b!==f.length;++b)if((y=f.charCodeAt(b))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(F6,'""')+'"';break}f=="ID"&&(f='"ID"')}else x.f!=null&&!x.F?(u=!1,f="="+x.f,f.indexOf(",")>=0&&(f='"'+f.replace(F6,'""')+'"')):f="";d.push(f)}return l.blankrows===!1&&u?null:d.join(o)}function G8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Yr(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],x=n.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(m[b]||{}).hidden||(p[b]=bn(b));for(var y=0,v=s.s.r;v<=s.e.r;++v)(x[v]||{}).hidden||(f=Ype(e,s,v,p,o,u,i,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete n.dense,r.join("")}function Xpe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=G8(e,t);return r}function Jpe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Yr(e["!ref"]),i="",o=[],l,u=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=bn(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=Kn(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}u[u.length]=t+"="+n}return u}function Y8(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?ga(n.origin):n.origin;o=u.r,l=u.c}var d,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var p=Yr(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(o=p.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var m=n.header||[],x=0;t.forEach(function(y,v){ti(y).forEach(function(N){(x=m.indexOf(N))==-1&&(m[x=m.length]=N);var k=y[N],j="z",A="",S=Vt({c:l+x,r:o+v+s});d=Xh(i,S),k&&typeof k=="object"&&!(k instanceof Date)?i[S]=k:(typeof k=="number"?j="n":typeof k=="boolean"?j="b":typeof k=="string"?j="s":k instanceof Date?(j="d",n.cellDates||(j="n",k=ya(k)),A=n.dateNF||Yt[14]):k===null&&n.nullError&&(j="e",k=0),d?(d.t=j,d.v=k,delete d.w,delete d.R,A&&(d.z=A)):i[S]=d={t:j,v:k},A&&(d.z=A))})}),f.e.c=Math.max(f.e.c,l+m.length-1);var b=Kn(o);if(s)for(x=0;x<m.length;++x)i[bn(x+l)+b]={t:"s",v:m[x]};return i["!ref"]=cr(f),i}function Qpe(e,t){return Y8(null,e,t)}function Xh(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ga(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Xh(e,Vt(t)):Xh(e,Vt({r:t,c:r||0}))}function Zpe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function jk(){return{SheetNames:[],Sheets:{}}}function Nk(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(F0e(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function eme(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Zpe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function tme(e,t){return e.z=t,e}function X8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function rme(e,t,r){return X8(e,"#"+t,r)}function nme(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function ame(e,t,r,n){for(var s=typeof t!="string"?t:Yr(t),i=typeof t=="string"?t:cr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var u=Xh(e,o,l);u.t="n",u.F=i,delete u.v,o==s.s.r&&l==s.s.c&&(u.f=r,n&&(u.D=!0))}return e}var sme={encode_col:bn,encode_row:Kn,encode_cell:Vt,encode_range:cr,decode_col:lk,decode_row:ok,split_cell:gle,decode_cell:ga,decode_range:Cu,format_cell:Fi,sheet_add_aoa:e8,sheet_add_json:Y8,sheet_add_dom:z8,aoa_to_sheet:Tu,json_to_sheet:Qpe,table_to_sheet:K8,table_to_book:wpe,sheet_to_csv:G8,sheet_to_txt:Xpe,sheet_to_json:C2,sheet_to_html:bpe,sheet_to_formulae:Jpe,sheet_to_row_object_array:C2,sheet_get_cell:Xh,book_new:jk,book_append_sheet:Nk,book_set_sheet_visibility:eme,cell_set_number_format:tme,cell_set_hyperlink:X8,cell_set_internal_link:rme,cell_add_comment:nme,sheet_set_array_formula:ame,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function ime({context:e,selectedStoreId:t}){const[r,n]=U.useState([]),[s,i]=U.useState(!0),[o,l]=U.useState(!1),[u,d]=U.useState(new Date().toISOString().split("T")[0]),[f,p]=U.useState("daily"),[m,x]=U.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),b=t||e.user?.storeId||null;U.useEffect(()=>{y()},[b]);const y=async()=>{try{i(!0);let D=(await Pm(e.user?.accessToken||"")).data||[];D=D.filter(F=>!!F&&!!F.storeId),b&&(D=D.filter(F=>F.storeId===b)),D.sort((F,P)=>new Date(P.date).getTime()-new Date(F.date).getTime()),n(D)}catch(T){console.error("Error loading sales data:",T),mr.error("Failed to load sales data")}finally{i(!1)}},v=T=>new Promise((D,F)=>{const P=new FileReader;P.onload=I=>{try{const B=I.target?.result,z=E2(B,{type:"binary"}),Y=z.SheetNames[0],re=z.Sheets[Y],X=sme.sheet_to_json(re),ne=j(X);D(ne)}catch(B){F(B)}},P.onerror=()=>F(new Error("Failed to read file")),P.readAsBinaryString(T)}),N=T=>{const D=String(T.Item||""),F=Number(T["Total Quantity"]||T["Total Qua"]||0);if(D.toLowerCase().includes("mania")&&D.toLowerCase().includes("combo")||!F||F===0)return 0;if(D.toLowerCase().includes("burger")){let z=1;const Y=D.match(/(\d+)\s*(?:pcs|pieces|piece)/i);return Y&&(z=parseInt(Y[1])),F*z*2}const I=D.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(I){let B=parseInt(I[1]);const z=D.match(/pack of\s*(\d+)/i);return z&&(B*=parseInt(z[1])),F*B}return F*6},k=T=>{if(typeof T!="string")return"Other";const D=T.toLowerCase();return["drink","cola","campa","water","beverage"].some(F=>D.includes(F))?"Other":D.includes("kurkure")?D.includes("chicken")?"Chicken Kurkure Momos":D.includes("veg")?"Veg Kurkure Momos":"Other Kurkure Momos":D.includes("paneer")?"Paneer Momos":D.includes("corn")&&D.includes("cheese")?"Corn Cheese Momos":D.includes("chicken")&&D.includes("cheese")?"Chicken Cheese Momos":D.includes("chicken")?"Chicken Momos":D.includes("veg")?"Veg Momos":"Other"},j=T=>{const D={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return T.forEach(F=>{const P=N(F),I=k(F.Item||"");I in D&&(D[I]+=P)}),D},A=async T=>{const D=T.target.files?.[0];if(D){if(!D.name.endsWith(".xlsx")&&!D.name.endsWith(".xls")&&!D.name.endsWith(".csv")){mr.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}if(!u){mr.error("Please select a date");return}if(!b){mr.error("Store ID not found");return}try{l(!0),mr.info("Processing file...",{duration:2e3});const F=await v(D);mr.info("Uploading to server...",{duration:2e3});const P=e.stores?.find(B=>B.id===b)?.name||"Unknown Store",I={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:u,storeId:b,storeName:P,data:F,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await mD(I,e.user?.accessToken||""),mr.success(" Sales data uploaded successfully!"),await y(),T.target.value=""}catch(F){console.error("Error uploading file:",F),mr.error(`Failed to process file: ${F instanceof Error?F.message:"Unknown error"}`)}finally{l(!1)}}},S=async T=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await gD(T,e.user?.accessToken||""),mr.success("Sales record deleted"),await y()}catch(D){console.error("Error deleting record:",D),mr.error("Failed to delete record")}},E=T=>Object.values(T).reduce((D,F)=>D+F,0),_=T=>{const D=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return D[T%D.length]};return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(Q0,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Ea,{value:u,onChange:d,max:new Date().toISOString().split("T")[0]}),a.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(jd,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),a.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:A,disabled:o,className:"hidden"})]})]})]}),a.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[a.jsxs("li",{children:["Must contain columns: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),a.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),a.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(v7,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:["daily","weekly","monthly","yearly","custom"].map(T=>a.jsx("button",{onClick:()=>p(T),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===T?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))})]}),f==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Ea,{label:"From Date",value:m.from,onChange:T=>x({...m,from:T})}),a.jsx(Ea,{label:"To Date",value:m.to,onChange:T=>x({...m,to:T})})]})}),a.jsx(En,{width:"100%",height:500,children:a.jsxs(Ws,{data:(()=>{let T=[...r];if(f==="custom")T=T.filter(P=>P.date>=m.from&&P.date<=m.to);else{const P=new Date,I=new Date;f==="daily"?I.setDate(P.getDate()-5):f==="weekly"?I.setDate(P.getDate()-35):f==="monthly"?I.setMonth(P.getMonth()-5):f==="yearly"&&I.setFullYear(P.getFullYear()-5),T=T.filter(B=>new Date(B.date)>=I)}const D=new Map;return T.forEach(P=>{let I=P.date,B=P.date;if(f==="weekly"){const Y=new Date(P.date),re=new Date(Y.setDate(Y.getDate()-Y.getDay())),X=new Date(re);X.setDate(X.getDate()+6),I=re.toISOString().split("T")[0],B=`${re.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${X.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else f==="monthly"?(I=P.date.substring(0,7),B=new Date(P.date).toLocaleDateString("en-US",{year:"numeric",month:"short"})):f==="yearly"?(I=P.date.substring(0,4),B=I):f==="daily"&&(B=new Date(P.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}));D.has(I)||D.set(I,{period:B,"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0});const z=D.get(I);Object.entries(P.data).forEach(([Y,re])=>{z[Y]+=re})}),Array.from(D.values()).sort((P,I)=>{const B=T.find(Y=>{if(f==="weekly"){const re=new Date(Y.date),X=new Date(re.setDate(re.getDate()-re.getDay()));return P.period.includes(X.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?P.period===new Date(Y.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?P.period===Y.date.substring(0,4):P.period===new Date(Y.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||P.period,z=T.find(Y=>{if(f==="weekly"){const re=new Date(Y.date),X=new Date(re.setDate(re.getDate()-re.getDay()));return I.period.includes(X.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?I.period===new Date(Y.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?I.period===Y.date.substring(0,4):I.period===new Date(Y.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||I.period;return new Date(B).getTime()-new Date(z).getTime()}).slice(-5)})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(xn,{dataKey:"period",tick:{fontSize:12},angle:-15,textAnchor:"end",height:80}),a.jsx(on,{tick:{fontSize:12}}),a.jsx(Pr,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),a.jsx(qn,{wrapperStyle:{paddingTop:"20px"},iconType:"rect"}),a.jsx(Gt,{dataKey:"Chicken Momos",fill:"#ef4444",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Chicken Cheese Momos",fill:"#f97316",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Veg Momos",fill:"#22c55e",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Paneer Momos",fill:"#3b82f6",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Corn Cheese Momos",fill:"#eab308",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Chicken Kurkure Momos",fill:"#8b5cf6",radius:[8,8,0,0]}),a.jsx(Gt,{dataKey:"Veg Kurkure Momos",fill:"#06b6d4",radius:[8,8,0,0]})]})}),a.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const T={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let D=[...r];if(f==="custom")D=D.filter(I=>I.date>=m.from&&I.date<=m.to);else{const I=new Date,B=new Date;f==="daily"?B.setDate(I.getDate()-5):f==="weekly"?B.setDate(I.getDate()-35):f==="monthly"?B.setMonth(I.getMonth()-5):f==="yearly"&&B.setFullYear(I.getFullYear()-5),D=D.filter(z=>new Date(z.date)>=B)}D.forEach(I=>{Object.entries(I.data).forEach(([B,z])=>{T[B]+=z})});const F=Object.values(T).reduce((I,B)=>I+B,0),P=Object.entries(T).sort((I,B)=>B[1]-I[1])[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:F.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),a.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:P?.[0]?.split(" ")[0]||"N/A"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[P?.[1]?.toLocaleString()||0," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:D.length>0?Math.round(F/D.length).toLocaleString():0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:D.length}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length===0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[a.jsx(Q0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),a.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):a.jsx("div",{className:"space-y-4",children:r.map((T,D)=>{const F=E(T.data),P=new Date(T.date);return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wr,{className:"w-5 h-5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:P.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-purple-100",children:[T.storeName,"  Total: ",F.toLocaleString()," pieces"]})]})]}),a.jsx("button",{onClick:()=>S(T.id),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:a.jsx(is,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(T.data).map(([I,B],z)=>{const Y=F>0?(B/F*100).toFixed(1):"0",re=_(z);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:re,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx(rr,{className:"w-5 h-5 text-gray-400"}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[Y,"%"]})]}),a.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:I}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:B.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]},I)})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{children:["Uploaded by ",T.uploadedBy]}),a.jsx("span",{children:new Date(T.uploadedAt).toLocaleString()})]})]})]},T.id)})})]})}function $6({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:n}){const[s,i]=U.useState("pending"),[o,l]=U.useState([]),[u,d]=U.useState([]),[f,p]=U.useState(null),[m,x]=U.useState(!1),[b,y]=U.useState(new Date().toISOString().substring(0,7)),[v,N]=U.useState(null),[k,j]=U.useState(!1),A=e.user?.role==="cluster_head",S=e.user?.role==="manager";e.user?.designation;const E=A&&!t||A&&n==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",E),console.log("  - locationType:",n),console.log("  - isClusterHead:",A),console.log("  - Production Houses:",e.productionHouses?.map(z=>({id:z.id,name:z.name}))),U.useEffect(()=>{s==="pending"&&(A||S)?_():s==="history"?T():s==="wastage"&&D()},[s,b,E]);async function _(){try{x(!0);const z=await PD(e.user?.accessToken||"");l(z.recalibrations||[])}catch(z){console.error("Error fetching pending recalibrations:",z),mr.error("Failed to fetch pending recalibrations")}finally{x(!1)}}async function T(){if(E)try{x(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",E),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",A),console.log("  - user.storeId:",e.user?.storeId);const z=await OD(e.user?.accessToken||"",E,n);console.log(" History response:",z),console.log(" History records found:",z?.history?.length||0),z?.history?.length>0&&console.log(" Sample record locationIds:",z.history.slice(0,3).map(Y=>Y.locationId)),d(z.history||[])}catch(z){console.error("Error fetching recalibration history:",z),mr.error("Failed to fetch recalibration history")}finally{x(!1)}}async function D(){try{x(!0),console.log(" Fetching wastage report:"),console.log("  - month:",b),console.log("  - effectiveStoreId:",E),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",A);const z=await FD(e.user?.accessToken||"",b,E,n);console.log(" Wastage response:",z),console.log(" Wastage items found:",z?.items?.length||0),z?.items?.length>0&&console.log(" Sample item locationIds:",z.items.slice(0,3).map(Y=>Y.locationId)),p(z)}catch(z){console.error("Error fetching wastage report:",z),mr.error("Failed to fetch wastage report")}finally{x(!1)}}async function F(z){try{await ID(e.user?.accessToken||"",z),mr.success("Recalibration approved successfully"),_()}catch(Y){console.error("Error approving recalibration:",Y),mr.error("Failed to approve recalibration")}}async function P(z){const Y=prompt("Please enter reason for rejection:");if(Y)try{await DD(e.user?.accessToken||"",z,Y),mr.success("Recalibration rejected"),_()}catch(re){console.error("Error rejecting recalibration:",re),mr.error("Failed to reject recalibration")}}function I(z){N(z),j(!0)}const B=z=>new Date(z).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[a.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),a.jsxs("p",{className:"text-purple-100",children:[s==="pending"&&"Review and approve monthly stock recalibrations",s==="history"&&"View historical recalibration records",s==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&s==="history"&&n!=="production_house"&&a.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(wr,{className:"w-5 h-5"}),"New Recalibration"]})]}),a.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[(A||S)&&a.jsx("button",{onClick:()=>i("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),a.jsx("button",{onClick:()=>i("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),a.jsx("button",{onClick:()=>i("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),s==="wastage"&&a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),a.jsx("input",{type:"month",value:b,onChange:z=>y(z.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),m?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(Z0,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[s==="pending"&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(er,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):o.map(z=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:z.locationName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[B(z.date),"  ",z.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),a.jsx("p",{className:"text-xl text-red-700",children:z.items?.filter(Y=>Y.adjustmentType==="wastage").length||0})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-xl text-orange-700",children:z.items?.filter(Y=>Y.adjustmentType==="counting_error").length||0})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),a.jsx("p",{className:"text-xl text-blue-700",children:z.items?.length||0})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>I(z),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(Pw,{className:"w-4 h-4"}),"View Details"]}),a.jsxs("button",{onClick:()=>F(z.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(er,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>P(z.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Reject"]})]})]},z.id))}),s==="history"&&a.jsx("div",{className:"space-y-4",children:u.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(wr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):u.map(z=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:z.locationName}),a.jsx("p",{className:"text-sm text-gray-500",children:B(z.date)})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${z.status==="approved"?"bg-green-100 text-green-700":z.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:z.status?.charAt(0).toUpperCase()+z.status?.slice(1)||"Pending"})]}),a.jsxs("button",{onClick:()=>I(z),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(Pw,{className:"w-4 h-4"}),"View Details"]})]},z.id))}),s==="wastage"&&a.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!f||f.items?.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(M2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalWastage||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalCountingErrors||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalRecalibrations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.uniqueLocations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:f.items?.map((z,Y)=>a.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 text-sm text-gray-900",children:z.itemName}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:z.locationName}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[z.systemQuantity," ",z.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[z.actualQuantity," ",z.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${z.difference<0?"text-red-600":"text-green-600"}`,children:[z.difference>0?"+":"",z.difference]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:z.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:z.notes||"-"})]},Y))})]})})]})]})})]}),k&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[a.jsx("h3",{className:"text-xl mb-1",children:v.locationName}),a.jsxs("p",{className:"text-purple-100 text-sm",children:[B(v.date),"  ",v.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:v.items?.map((z,Y)=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[z.itemName,a.jsx("span",{className:"text-xs text-gray-500 block",children:z.category})]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[z.systemQuantity," ",z.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[z.actualQuantity," ",z.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${z.difference<0?"text-red-600":z.difference>0?"text-green-600":"text-gray-600"}`,children:[z.difference>0?"+":"",z.difference]}),a.jsx("td",{className:"p-3 text-center",children:z.adjustmentType?a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:z.adjustmentType==="wastage"?"Wastage":"Counting Error"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:z.notes||"-"})]},Y))})]})})}),a.jsx("div",{className:"p-6 border-t border-gray-200",children:a.jsx("button",{onClick:()=>j(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const Ew=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",n.value.toLocaleString()]})]},s))]}):null,ome=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),a.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},lme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toLocaleString()," pcs"]})]},s))]}):null,cme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toFixed(2)," kg"]})]},s))]}):null;function L6({context:e,selectedStoreId:t,highlightRequestId:r}){const n=e.user?.role==="cluster_head",s=e.user?.role==="manager",i=e.user?.designation==="production_incharge",o=e.user?.designation==="store_incharge",[l,u]=U.useState(i?"production":"store"),[d,f]=U.useState(t||(n||s||i?null:e.user?.storeId)||null),p=l==="store"?d:null;console.log(" Analytics effectiveStoreId:",p),console.log(" Analytics mode:",l),console.log(" Local selected store ID:",d),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[m,x]=U.useState(r?"production-requests":"profit");U.useEffect(()=>{console.log(" activeView changed to:",m)},[m]),U.useEffect(()=>{l==="production"&&m!=="production"&&m!=="recalibration-reports"&&m!=="production-requests"?x("production"):(m==="production"||m==="recalibration-reports"||m==="production-requests")&&l==="store"?x("profit"):m==="store-recalibration"&&l==="production"&&x("production")},[l]);const[b,y]=U.useState("revenue"),[v,N]=U.useState("monthly"),[k,j]=U.useState("monthly"),[A,S]=U.useState({from:"2025-03-01",to:"2025-12-25"}),[E,_]=U.useState(0),[T,D]=U.useState(!0),[F,P]=U.useState([]),[I,B]=U.useState([]),[z,Y]=U.useState(!1),[re,X]=U.useState([]),[ne,Z]=U.useState(null),[me,G]=U.useState(null),[L,ee]=U.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[te,J]=U.useState(!1),[he,Se]=U.useState(null),[Oe,pe]=U.useState(5),[xe,Fe]=U.useState(5),[O,be]=U.useState(i&&e.user?.storeId||null),De=e.salesData,qe=e.inventory,rt=e.overheads,Be=e.fixedCosts,Je=e.productionData,[Xt,Ce]=U.useState(()=>{const H=Je.map(R=>R.date).filter((R,q,K)=>K.indexOf(R)===q).sort((R,q)=>q.localeCompare(R));if(H.length>0)return H[0];{const R=new Date;return R.setDate(R.getDate()-1),R.toISOString().split("T")[0]}}),[Me,Pt]=U.useState(()=>{const H=Je.filter(R=>R.approvalStatus==="approved").map(R=>R.date).filter((R,q,K)=>K.indexOf(R)===q).sort((R,q)=>q.localeCompare(R));if(H.length>0)return H[0];{const R=new Date;return R.setDate(R.getDate()-1),R.toISOString().split("T")[0]}}),[We,ut]=U.useState("today"),[nt,qt]=U.useState(""),[ct,dt]=U.useState(""),ur=()=>{const H=new Date;H.setHours(0,0,0,0);const R=le=>{const ce=le.getFullYear(),fe=String(le.getMonth()+1).padStart(2,"0"),ge=String(le.getDate()).padStart(2,"0");return`${ce}-${fe}-${ge}`};let q,K;switch(We){case"today":q=new Date(H),K=new Date(H);break;case"week":q=new Date(H);const le=q.getDay(),ce=le===0?-6:1-le;q.setDate(q.getDate()+ce),K=new Date(q),K.setDate(q.getDate()+6);break;case"month":q=new Date(H.getFullYear(),H.getMonth(),1),K=new Date(H.getFullYear(),H.getMonth()+1,0);break;case"year":q=new Date(H.getFullYear(),0,1),K=new Date(H.getFullYear(),11,31);break;case"custom":nt&&ct?(q=new Date(nt+"T00:00:00"),K=new Date(ct+"T00:00:00")):(q=new Date(H),K=new Date(H));break;default:q=new Date(H),K=new Date(H)}return{startDate:R(q),endDate:R(K)}};U.useEffect(()=>{const H=O,R=Je.filter(q=>{if(!H)return!0;const K=q.storeId===H,le=q.productionHouseId===H,ce=q.productionHouseId||q.storeId;return K||le||ce===H}).map(q=>q.date).filter((q,K,le)=>le.indexOf(q)===K).sort((q,K)=>K.localeCompare(q));if(R.length>0)Ce(R[0]);else{const q=new Date;q.setDate(q.getDate()-1),Ce(q.toISOString().split("T")[0])}},[O,Je]),U.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:l,selectedProductionHouseId:O,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),l==="production"&&O?(console.log(" Conditions met - fetching opening balance..."),xt()):console.log(" Conditions not met for carry-forward")},[O,l,e.productionData,e.productionRequests]),U.useEffect(()=>{if((n||s)&&l==="production"&&!O&&e.productionHouses&&e.productionHouses.length>0){const H=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",H.id,H.name),be(H.id)}},[l,n,s,e.productionHouses]);async function xt(){try{const H=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",H),console.log("   Selected production house ID:",O),console.log("   Available production data records:",Je.length),console.log("   Available production requests:",e.productionRequests?.length||0);let R=O;if(O&&O.startsWith("STORE-")){const le=e.stores?.find(ce=>ce.id===O);le?.productionHouseId&&(R=le.productionHouseId,console.log("   Resolved production house UUID:",R))}let q=await Gw(e.user?.accessToken||"",R||"");if(!q?.record&&R){console.log("   No recalibration found with UUID, checking with mapped store ID...");const le=e.stores?.filter(ce=>ce.productionHouseId===R);if(console.log("   Stores mapped to this production house:",le?.map(ce=>({id:ce.id,name:ce.name}))),le&&le.length>0)for(const ce of le){console.log("   Trying to fetch recalibration with store ID:",ce.id);const fe=await Gw(e.user?.accessToken||"",ce.id);if(fe?.record){console.log("    Found recalibration using store ID:",ce.id),q=fe;break}}}console.log(" Recalibration Response:",q);let K=null;if(q?.record){const le=q.record.date.substring(0,7);console.log(" Recalibration date comparison:",{recalDate:le,currentMonth:H,match:le===H}),le===H?(console.log(" Using current month recalibration as opening balance"),console.log("   Recalibration items:",q.record.items),K={},q.record.items.forEach(ce=>{K[ce.itemId]=ce.actualQuantity}),console.log("   Parsed opening balance:",K)):(console.log(" Recalibration from previous month, calculating forward..."),K=Qt(q.record,H))}else console.log(" No recalibration found, calculating from previous month..."),K=Nr(R);Z(q?.record||null),G(K),console.log(" Opening Balance Calculated:",K)}catch(H){console.error("Error fetching recalibration:",H)}}function Qt(H,R){const q=H.date.substring(0,7),K={};H.items.forEach(ge=>{K[ge.itemId]=ge.actualQuantity});const le=new Date(q+"-01"),ce=new Date(R+"-01");let fe=new Date(le);for(fe.setMonth(fe.getMonth()+1);fe<ce;){const ge=fe.toISOString().substring(0,7),ve=or(O,ge),Te=kr(O,ge);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Re=>{K[Re]=(K[Re]||0)+(ve[Re]||0)-(Te[Re]||0)}),fe.setMonth(fe.getMonth()+1)}return K}function Nr(H){const R=new Date().toISOString().substring(0,7),[q,K]=R.split("-").map(Number);let le=q,ce=K-1;ce===0&&(ce=12,le=q-1);const fe=`${le}-${String(ce).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",fe),console.log("   Current month:",R," Previous month:",fe);const ge=or(H,fe),ve=kr(H,fe),Te={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Re=>{Te[Re]=(ge[Re]||0)-(ve[Re]||0)}),console.log("  Previous month production:",ge),console.log("  Previous month deliveries:",ve),console.log("  Calculated closing stock:",Te),Te}function or(H,R){if(!H)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${H}, month: ${R}`),console.log(`   Total production records available: ${Je.length}`);const q=Je.filter(K=>{if(!K.date.startsWith(R))return!1;const le=K.storeId===H,ce=K.productionHouseId===H;let fe=K.productionHouseId;!fe&&K.storeId&&(fe=e.stores?.find(Te=>Te.id===K.storeId)?.productionHouseId||null);const ge=fe||K.storeId;return le||ce||ge===H});return console.log(`   Filtered production records: ${q.length}`),q.reduce((K,le)=>({chicken:K.chicken+(le.chickenMomos?.final||0),chickenCheese:K.chickenCheese+(le.chickenCheeseMomos?.final||0),veg:K.veg+(le.vegMomos?.final||0),cheeseCorn:K.cheeseCorn+(le.cheeseCornMomos?.final||0),paneer:K.paneer+(le.paneerMomos?.final||0),vegKurkure:K.vegKurkure+(le.vegKurkureMomos?.final||0),chickenKurkure:K.chickenKurkure+(le.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function kr(H,R){if(!H)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${H}, month: ${R}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);let q=H;if(H&&H.startsWith("STORE-")){const le=e.stores?.find(ce=>ce.id===H);le?.productionHouseId&&(q=le.productionHouseId,console.log(`   Resolved UUID: ${q}`))}const K=(e.productionRequests||[]).filter(le=>{if(le.status!=="delivered")return!1;const ce=le.deliveredDate||le.requestDate||le.createdAt;return!ce||!ce.startsWith(R)?!1:e.stores?.find(ge=>ge.id===le.storeId)?.productionHouseId===q});return console.log(`   Filtered delivered requests: ${K.length}`),K.reduce((le,ce)=>({chicken:le.chicken+(ce.chickenMomos||0),chickenCheese:le.chickenCheese+(ce.chickenCheeseMomos||0),veg:le.veg+(ce.vegMomos||0),cheeseCorn:le.cheeseCorn+(ce.cheeseCornMomos||0),paneer:le.paneer+(ce.paneerMomos||0),vegKurkure:le.vegKurkure+(ce.vegKurkureMomos||0),chickenKurkure:le.chickenKurkure+(ce.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}console.log(" Analytics - Production Data Debug:"),console.log("  - Total production records:",Je.length),console.log("  - Production data records:",Je.map(H=>({id:H.id,date:H.date,storeId:H.storeId,productionHouseId:H.productionHouseId,approvalStatus:H.approvalStatus,chickenMomos:H.chickenMomos?.final||0,totalProduction:(H.chickenMomos?.final||0)+(H.vegMomos?.final||0)+(H.chickenCheeseMomos?.final||0)+(H.cheeseCornMomos?.final||0)+(H.paneerMomos?.final||0)+(H.vegKurkureMomos?.final||0)+(H.chickenKurkureMomos?.final||0)}))),console.log("  - Selected production house ID:",O),console.log("  - Analytics mode:",l),console.log("  - User storeId:",e.user?.storeId),console.log("  - User designation:",e.user?.designation),console.log("  - Is Production Incharge:",i),console.log("  - Available production houses:",e.productionHouses.map(H=>({id:H.id,name:H.name}))),console.log("  - Available stores:",e.stores?.map(H=>({id:H.id,name:H.name,productionHouseId:H.productionHouseId}))),console.log("   PRODUCTION INCHARGE SPECIFIC DEBUG:"),console.log("     - Is this user a production incharge?",i),console.log("     - User storeId (should be production house ID):",e.user?.storeId),console.log("     - Does user storeId match any production house?",e.productionHouses.find(H=>H.id===e.user?.storeId)),console.log("     - Production data storeIds:",[...new Set(Je.map(H=>H.storeId))]),console.log("     - Production data productionHouseIds:",[...new Set(Je.map(H=>H.productionHouseId))]),console.log("     - Stores that map to user production house:",e.stores?.filter(H=>H.productionHouseId===e.user?.storeId).map(H=>({id:H.id,name:H.name})));const _r=(H,R="date")=>{const q=new Date,K=new Date(q.getFullYear(),q.getMonth(),q.getDate());return H.filter(le=>{const ce=new Date(le[R]),fe=new Date(ce.getFullYear(),ce.getMonth(),ce.getDate());switch(v){case"daily":const ge=new Date(K);return ge.setDate(ge.getDate()-10),fe>=ge&&fe<=K;case"weekly":const ve=new Date(K);return ve.setDate(ve.getDate()-7),fe>=ve&&fe<=K;case"monthly":const Te=new Date(K);return Te.setMonth(Te.getMonth()-1),fe>=Te&&fe<=K;case"yearly":const Re=new Date(K);return Re.setFullYear(Re.getFullYear()-1),fe>=Re&&fe<=K;case"custom":const st=new Date(A.from),He=new Date(A.to);return fe>=st&&fe<=He;default:return!0}})},nr=_r(De),Mr=_r(qe),ht=_r(rt),Er=_r(Be),Ne=_r(F,"payoutDate"),ze=U.useMemo(()=>{console.log(" === SALES DATA FILTERING DEBUG ==="),console.log("Total sales records (time-filtered):",nr.length),console.log("effectiveStoreId:",p),console.log("User role:",e.user?.role),console.log("All sales storeIds:",nr.map(K=>K.storeId)),console.log("User storeId:",e.user?.storeId);const H=nr.filter(K=>{const le=new Date(K.date);return le.getDate()===28&&le.getMonth()===11});if(console.log("December 28th sales found:",H.length),H.forEach(K=>{console.log(`  - Date: ${K.date}, StoreId: ${K.storeId}, Revenue: ${(K.paytmAmount||0)+(K.cashAmount||0)+(K.onlineSales||0)}`)}),!p)return console.log("No store filter - returning all",nr.length,"sales"),nr;const R=nr.filter(K=>K.storeId===p);console.log("After store filtering (exact match only):",R.length,"sales"),console.log("Filtered sales details:",R.map(K=>({date:K.date,storeId:K.storeId,total:(K.offlineSales||0)+(K.onlineSales||0)})));const q=nr.filter(K=>K.storeId!==p);return console.log("Filtered out (all non-matching storeIds):",q.length,"sales"),q.length>0&&console.log("Sample filtered out sales storeIds:",q.slice(0,5).map(K=>K.storeId)),console.log(" === END DEBUG ==="),R},[nr,p]),it=U.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",Mr.length),console.log("effectiveStoreId:",p);const H=Mr.filter(q=>{const K=new Date(q.date);return K.getDate()===28&&K.getMonth()===11});if(console.log("December 28th inventory found:",H.length),H.forEach(q=>{console.log(`  - Date: ${q.date}, StoreId: ${q.storeId}, Cost: ${q.totalCost||0}`)}),!p)return console.log("No store filter - returning all",Mr.length,"inventory items"),Mr;const R=Mr.filter(q=>q.storeId===p);return console.log("After store filtering (exact match only):",R.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),R},[Mr,p]),tt=U.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",ht.length),console.log("effectiveStoreId:",p);const H=ht.filter(q=>{const K=new Date(q.date);return K.getDate()===28&&K.getMonth()===11});if(console.log("December 28th overhead found:",H.length),H.forEach(q=>{console.log(`  - Date: ${q.date}, StoreId: ${q.storeId}, Amount: ${q.amount||0}`)}),!p)return console.log("No store filter - returning all",ht.length,"overhead items"),ht;const R=ht.filter(q=>q.storeId===p);return console.log("After store filtering (exact match only):",R.length,"overhead items"),console.log("Filtered overhead storeIds:",R.map(q=>({date:q.date,storeId:q.storeId,amount:q.amount}))),console.log(" === END OVERHEAD DEBUG ==="),R},[ht,p]),It=U.useMemo(()=>p?Er.filter(H=>H.storeId===p):Er,[Er,p]),Ue=U.useMemo(()=>p?I.filter(H=>H.storeId===p):I,[I,p]);U.useMemo(()=>{let H=Ne;if(p){const R=Ue.map(q=>q.id);H=H.filter(q=>R.includes(q.employeeId))}return H},[Ne,Ue,p]),U.useEffect(()=>{(async()=>{try{const[R,q]=await Promise.all([jo(),So()]);P(R||[]),B(q||[])}catch(R){console.error("Error loading payouts and employees:",R),P([]),B([])}})()},[]),U.useEffect(()=>{(async()=>{if(n)try{const R=await Cl();X(R)}catch(R){console.error("Error loading stores:",R)}})()},[n]);const St=async()=>{try{const H=pu(),{data:{session:R}}=await H.auth.getSession();return R?.access_token||null}catch(H){return console.error("Error getting fresh token:",H),null}};U.useEffect(()=>{(async()=>{if(e.user)try{D(!0);const R=await St();if(!R){console.error("No valid access token available");return}const q=new Date().toISOString().split("T")[0];if(e.user.role==="cluster_head"){const le=(await oD(R)).filter(ce=>ce.leaveDate===q&&ce.status==="approved");if(e.user.storeId){const fe=(await os(R)).filter(ve=>ve.storeId===e.user.storeId||ve.storeId===null||ve.storeId===void 0).map(ve=>ve.employeeId),ge=le.filter(ve=>fe.includes(ve.employeeId));_(ge.length)}else _(le.length)}else if(e.user.role==="manager"&&e.user.employeeId){const K=await xl(e.user.employeeId,R);let le=0;for(const ce of K){const ge=(await mu(ce.employeeId,R)).filter(ve=>ve.leaveDate===q&&ve.status==="approved");le+=ge.length}_(le)}else _(0)}catch(R){console.error("Error loading today's leaves:",R),_(0)}finally{D(!1)}})()},[e.user]),U.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),x("production-requests"))},[r]);const Kt=()=>{switch(v){case"daily":return"Last 10 days";case"weekly":return"Last 7 days";case"monthly":return"Last 30 days";case"yearly":return"Last 365 days";case"custom":return`${A.from} to ${A.to}`;default:return"Current period"}},Ie=(()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",v),console.log("Filtered sales data count:",ze.length),console.log("Filtered inventory data count:",it.length),console.log("Filtered overhead data count:",tt.length),console.log("Filtered fixed costs data count:",It.length);const H=ze.reduce((ot,pt)=>ot+(pt.paytmAmount||0)+(pt.cashAmount||0)+(pt.onlineSales||0),0);console.log("Total revenue calculated:",H);const R=ze.reduce((ot,pt)=>ot+(pt.onlineSales||0),0),q=ze.reduce((ot,pt)=>ot+(pt.paytmAmount||0)+(pt.cashAmount||0),0),K=it.reduce((ot,pt)=>ot+(pt.totalCost||0),0);console.log("Inventory expenses:",K);const le=tt.reduce((ot,pt)=>ot+(pt.amount||0),0),ce=It.filter(ot=>ot.category==="electricity").reduce((ot,pt)=>ot+(pt.amount||0),0),fe=It.filter(ot=>ot.category==="rent").reduce((ot,pt)=>ot+(pt.amount||0),0),ge=ze.reduce((ot,pt)=>ot+(pt.employeeSalary||0),0);let ve=0;if(v==="monthly"||v==="yearly"||v==="custom"){let ot=F;if(p){const pt=Ue.map(Ct=>Ct.id);ot=ot.filter(Ct=>pt.includes(Ct.employeeId))}ve=ot.reduce((pt,Ct)=>{const Nt=Ue.find(_t=>_t.id===Ct.employeeId);return Nt&&Nt.type==="fulltime"?pt+(Ct.amount||0):pt},0)}const Te=ge+ve,Re=ce+fe+Te,st=K+le+Re,He=H-st,Ot=H>0?He/H*100:0;return console.log("Total expenses:",st),console.log("Net profit:",He),console.log(" === END METRICS DEBUG ==="),{totalRevenue:H,onlineRevenue:R,offlineRevenue:q,totalExpenses:st,inventoryExpenses:K,overheadExpenses:le,fixedCostsTotal:Re,electricityExpenses:ce,rentExpenses:fe,salaryExpenses:Te,contractWorkerExpenses:ge,permanentEmployeeExpenses:ve,netProfit:He,profitMargin:Ot}})(),ft=(()=>{const H={};return ze.forEach(R=>{const K=new Date(R.date).toLocaleString("default",{month:"short"});H[K]||(H[K]={month:K,revenue:0,expenses:0,profit:0});const le=(R.paytmAmount||0)+(R.cashAmount||0)+(R.onlineSales||0);H[K].revenue+=le}),it.forEach(R=>{const K=new Date(R.date).toLocaleString("default",{month:"short"});H[K]||(H[K]={month:K,revenue:0,expenses:0,profit:0}),H[K].expenses+=R.totalCost||0}),tt.forEach(R=>{const K=new Date(R.date).toLocaleString("default",{month:"short"});H[K]||(H[K]={month:K,revenue:0,expenses:0,profit:0}),H[K].expenses+=R.amount||0}),Object.keys(H).forEach(R=>{H[R].profit=H[R].revenue-H[R].expenses}),Object.values(H)})(),ke=(()=>{const H=new Date,R=[];if(v==="daily")for(let q=9;q>=0;q--){const K=new Date(H);K.setDate(K.getDate()-q);const le=K.toISOString().split("T")[0],ce=K.toLocaleDateString("default",{month:"short",day:"numeric"}),fe=ze.filter(Te=>Te.date===le),ge=fe.reduce((Te,Re)=>Te+(Re.onlineSales||0),0),ve=fe.reduce((Te,Re)=>Te+(Re.paytmAmount||0)+(Re.cashAmount||0),0);R.push({period:ce,online:ge,offline:ve,total:ge+ve})}else if(v==="weekly")for(let q=9;q>=0;q--){const K=new Date(H);K.setDate(K.getDate()-q*7);const le=new Date(K);le.setDate(le.getDate()-6);const ce=le.toLocaleDateString("default",{month:"short",day:"numeric"}),fe=K.toLocaleDateString("default",{month:"short",day:"numeric"}),ge=`${ce} - ${fe}`,ve=ze.filter(st=>{const He=new Date(st.date);return He>=le&&He<=K}),Te=ve.reduce((st,He)=>st+(He.onlineSales||0),0),Re=ve.reduce((st,He)=>st+(He.paytmAmount||0)+(He.cashAmount||0),0);R.push({period:ge,online:Te,offline:Re,total:Te+Re})}else if(v==="monthly")for(let q=9;q>=0;q--){const K=new Date(H);K.setMonth(K.getMonth()-q);const le=K.toLocaleDateString("default",{month:"short",year:"2-digit"}),ce=K.toLocaleString("default",{month:"short"}),fe=K.getFullYear().toString(),ge=ze.filter(Re=>{const st=new Date(Re.date);return st.toLocaleString("default",{month:"short"})===ce&&st.getFullYear().toString()===fe}),ve=ge.reduce((Re,st)=>Re+(st.onlineSales||0),0),Te=ge.reduce((Re,st)=>Re+(st.paytmAmount||0)+(st.cashAmount||0),0);R.push({period:le,online:ve,offline:Te,total:ve+Te})}else if(v==="yearly")for(let q=4;q>=0;q--){const K=H.getFullYear()-q,le=ze.filter(ge=>new Date(ge.date).getFullYear()===K),ce=le.reduce((ge,ve)=>ge+(ve.onlineSales||0),0),fe=le.reduce((ge,ve)=>ge+(ve.paytmAmount||0)+(ve.cashAmount||0),0);R.push({period:K.toString(),online:ce,offline:fe,total:ce+fe})}else if(v==="custom"){const q={};return ze.forEach(K=>{const ce=new Date(K.date).toLocaleDateString("default",{month:"short",year:"2-digit"});q[ce]||(q[ce]={period:ce,online:0,offline:0,total:0});const fe=K.onlineSales||0,ge=(K.paytmAmount||0)+(K.cashAmount||0);q[ce].online+=fe,q[ce].offline+=ge,q[ce].total+=fe+ge}),Object.values(q)}return R})(),jt=(()=>{const H=new Date,R=[];if(v==="daily")for(let q=4;q>=0;q--){const K=new Date(H);K.setDate(K.getDate()-q);const le=K.toISOString().split("T")[0],ce=K.toLocaleDateString("default",{month:"short",day:"numeric"}),fe=(ze||[]).filter(ot=>ot.date===le),ge=fe.reduce((ot,pt)=>ot+(pt.paytmAmount||0)+(pt.cashAmount||0)+(pt.onlineSales||0),0),ve=(it||[]).filter(ot=>ot.date===le),Te=(tt||[]).filter(ot=>ot.date===le),Re=ve.reduce((ot,pt)=>ot+(pt.totalCost||0),0),st=Te.reduce((ot,pt)=>ot+(pt.amount||0),0),He=fe.reduce((ot,pt)=>ot+(pt.employeeSalary||0),0),Ot=Re+st+He;R.push({period:ce,revenue:ge,expenses:Ot,profit:ge-Ot})}else if(v==="weekly")for(let q=4;q>=0;q--){const K=new Date(H);K.setDate(K.getDate()-q*7);const le=new Date(K);le.setDate(le.getDate()-6);const ce=le.toLocaleDateString("default",{month:"short",day:"numeric"}),fe=K.toLocaleDateString("default",{month:"short",day:"numeric"}),ge=`${ce} - ${fe}`,ve=(ze||[]).filter(Ct=>{const Nt=new Date(Ct.date);return Nt>=le&&Nt<=K}),Te=ve.reduce((Ct,Nt)=>Ct+(Nt.paytmAmount||0)+(Nt.cashAmount||0)+(Nt.onlineSales||0),0),Re=(it||[]).filter(Ct=>{const Nt=new Date(Ct.date);return Nt>=le&&Nt<=K}),st=(tt||[]).filter(Ct=>{const Nt=new Date(Ct.date);return Nt>=le&&Nt<=K}),He=Re.reduce((Ct,Nt)=>Ct+(Nt.totalCost||0),0),Ot=st.reduce((Ct,Nt)=>Ct+(Nt.amount||0),0),ot=ve.reduce((Ct,Nt)=>Ct+(Nt.employeeSalary||0),0),pt=He+Ot+ot;R.push({period:ge,revenue:Te,expenses:pt,profit:Te-pt})}else if(v==="monthly")for(let q=4;q>=0;q--){const K=new Date(H);K.setMonth(K.getMonth()-q);const le=K.toLocaleDateString("default",{month:"short",year:"2-digit"}),ce=K.getMonth(),fe=K.getFullYear(),ge=(ze||[]).filter(ar=>{const Wt=new Date(ar.date);return Wt.getMonth()===ce&&Wt.getFullYear()===fe}),ve=ge.reduce((ar,Wt)=>ar+(Wt.paytmAmount||0)+(Wt.cashAmount||0)+(Wt.onlineSales||0),0),Te=(it||[]).filter(ar=>{const Wt=new Date(ar.date);return Wt.getMonth()===ce&&Wt.getFullYear()===fe}),Re=(tt||[]).filter(ar=>{const Wt=new Date(ar.date);return Wt.getMonth()===ce&&Wt.getFullYear()===fe}),st=(It||[]).filter(ar=>{const Wt=new Date(ar.date);return Wt.getMonth()===ce&&Wt.getFullYear()===fe}),He=Te.reduce((ar,Wt)=>ar+(Wt.totalCost||0),0),Ot=Re.reduce((ar,Wt)=>ar+(Wt.amount||0),0),ot=st.reduce((ar,Wt)=>ar+(Wt.amount||0),0),pt=ge.reduce((ar,Wt)=>ar+(Wt.employeeSalary||0),0);let Ct=0,Nt=F.filter(ar=>{const Wt=new Date(ar.month+"-01");return Wt.getMonth()===ce&&Wt.getFullYear()===fe});if(p){const ar=Ue.map(Wt=>Wt.id);Nt=Nt.filter(Wt=>ar.includes(Wt.employeeId))}Ct=Nt.reduce((ar,Wt)=>{const $s=Ue.find(oi=>oi.id===Wt.employeeId);return $s&&$s.type==="fulltime"?ar+(Wt.amount||0):ar},0);const _t=He+Ot+ot+pt+Ct;R.push({period:le,revenue:ve,expenses:_t,profit:ve-_t})}else if(v==="yearly")for(let q=4;q>=0;q--){const K=H.getFullYear()-q,le=(ze||[]).filter(Nt=>new Date(Nt.date).getFullYear()===K),ce=le.reduce((Nt,_t)=>Nt+(_t.paytmAmount||0)+(_t.cashAmount||0)+(_t.onlineSales||0),0),fe=(it||[]).filter(Nt=>new Date(Nt.date).getFullYear()===K),ge=(tt||[]).filter(Nt=>new Date(Nt.date).getFullYear()===K),ve=(It||[]).filter(Nt=>new Date(Nt.date).getFullYear()===K),Te=fe.reduce((Nt,_t)=>Nt+(_t.totalCost||0),0),Re=ge.reduce((Nt,_t)=>Nt+(_t.amount||0),0),st=ve.reduce((Nt,_t)=>Nt+(_t.amount||0),0),He=le.reduce((Nt,_t)=>Nt+(_t.employeeSalary||0),0);let Ot=0,ot=F;if(p){const Nt=Ue.map(_t=>_t.id);ot=ot.filter(_t=>Nt.includes(_t.employeeId))}Ot=ot.reduce((Nt,_t)=>{const ar=Ue.find(Wt=>Wt.id===_t.employeeId);return ar&&ar.type==="fulltime"?Nt+(_t.amount||0):Nt},0)*12;const Ct=Te+Re+st+He+Ot;R.push({period:K.toString(),revenue:ce,expenses:Ct,profit:ce-Ct})}else if(v==="custom")return ft;return R})(),ae=(()=>{const H={};return it.forEach(q=>{const K=q.category||"Other";H[K]||(H[K]=0),H[K]+=q.totalCost||0}),tt.forEach(q=>{const K=q.category||"Other",le=O2[K]||K;H[le]||(H[le]=0),H[le]+=q.amount||0}),It.forEach(q=>{const K=q.category||"Other",le=P2[K]||K;H[le]||(H[le]=0),H[le]+=q.amount||0}),Ie.salaryExpenses>0&&(H[" Salaries"]=Ie.salaryExpenses),Object.keys(H).map(q=>({name:wm[q]||q,value:H[q],percentage:(H[q]/Ie.totalExpenses*100).toFixed(1)})).sort((q,K)=>K.value-q.value)})(),Q=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],ie=ze.filter(R=>R.approvalRequired===!1&&R.approvedBy).reduce((R,q)=>{const K=q.cashOffset||0;return R+(K<0?Math.abs(K):0)},0),oe=Ie.netProfit,_e=oe-ie;return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),n&&a.jsx("div",{className:"flex gap-2",children:a.jsxs("button",{onClick:async()=>{if(confirm(` This will remove all duplicate entries from the database.

Duplicates found:
- Inventory items
- Overhead items
- Sales records

Continue?`))try{if(!e.user?.accessToken){alert("Not authenticated");return}const H=await H2(e.user.accessToken);alert(` Cleanup Complete!

Removed ${H.removed} duplicates:

Inventory: ${H.details.inventory.removed} removed (${H.details.inventory.before}  ${H.details.inventory.after})
Overheads: ${H.details.overheads.removed} removed (${H.details.overheads.before}  ${H.details.overheads.after})
Sales: ${H.details.sales.removed} removed (${H.details.sales.before}  ${H.details.sales.after})

Please refresh the page to see updated data.`),window.location.reload()}catch(H){console.error("Cleanup error:",H),alert("Failed to cleanup duplicates. Please try again.")}},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm flex items-center gap-2 shadow-lg",title:"Remove duplicate entries from database",children:[a.jsx(ny,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Clean Database"}),a.jsx("span",{className:"sm:hidden",children:"Clean DB"})]})})]}),!T&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&a.jsx("div",{className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all ${E===0?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:a.jsx("div",{className:"flex items-center gap-3",children:E===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(yn,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-green-900",children:[a.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),a.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(W9,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-orange-900",children:[a.jsx("span",{className:"text-orange-700",children:E})," ",E===1?"person is":"people are"," on leave today"]}),a.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]})]})})}),(n||s||i||o)&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:o?"Store Analytics Dashboard":"Analytics Dashboard"}),!o&&a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[a.jsx("button",{onClick:()=>u("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),a.jsx("button",{onClick:()=>u("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${l==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Un,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),a.jsx("p",{className:"text-purple-700 text-sm",children:l==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),l==="store"&&a.jsx(a.Fragment,{children:n||s||i?a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),a.jsxs("select",{value:d||"",onChange:H=>f(H.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[a.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(H=>a.jsxs("option",{value:H.id,children:[H.name," (ID: ",H.id,")"]},H.id))]})]})}):e.user?.storeId&&a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vc,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),a.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(H=>H.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),l==="production"&&a.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:n||s?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),a.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),a.jsxs("select",{value:O||"",onChange:H=>{const R=H.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",R),be(R)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[a.jsx("option",{value:"",children:"All Production Houses"}),e.productionHouses?.map(H=>a.jsxs("option",{value:H.id,children:[H.name," (ID: ",H.id,")"]},H.id))]})]}):i&&e.user?.storeId?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Un,{className:"w-6 h-6 text-orange-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),a.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const H=e.stores?.find(q=>q.id===e.user?.storeId);return e.productionHouses?.find(q=>q.id===H?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:l==="store"?a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[a.jsxs("button",{onClick:()=>x("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Qr,{className:`w-6 h-6 ${m==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),m==="profit"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>x("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(An,{className:`w-6 h-6 ${m==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),m==="expense"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>x("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(vc,{className:`w-6 h-6 ${m==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),m==="sales"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>x("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(rr,{className:`w-6 h-6 ${m==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),m==="datacapture"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>x("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(M7,{className:`w-6 h-6 ${m==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),m==="production-requests"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>x("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(er,{className:`w-6 h-6 ${m==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),m==="store-recalibration"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>x("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Un,{className:`w-6 h-6 ${m==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),m==="production"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),x("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${m==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(er,{className:`w-6 h-6 ${m==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),m==="recalibration-reports"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),m==="profit"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(H=>a.jsx("button",{onClick:()=>N(H),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${v===H?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),v==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:A.from,onChange:H=>S({...A,from:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:A.to,onChange:H=>S({...A,to:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ie.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Kt()})]}),a.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ie.totalExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Kt()})]}),a.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",_e.toLocaleString()]}),Ie.totalRevenue>0?a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[a.jsx(Qr,{className:"w-3 h-3"}),"Comparison available after multiple periods"]}):a.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),a.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[Ie.profitMargin.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",oe.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",ie.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",a.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),a.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",_e.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:Ie.totalRevenue>0?`${(_e/Ie.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),ie>0&&a.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ir,{className:"w-4 h-4 text-amber-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",ie.toLocaleString(),"."]})]})})]}),a.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Profit Trend - ",v==="daily"?"Last 5 Days":v==="weekly"?"Last 5 Weeks":v==="monthly"?"Last 5 Months":v==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"min-w-[300px]",children:a.jsx(En,{width:"100%",height:250,children:a.jsxs(Ws,{data:jt,barGap:8,barCategoryGap:"20%",children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(xn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(on,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Pr,{content:a.jsx(Ew,{})}),a.jsx(qn,{wrapperStyle:{fontSize:"12px"}}),a.jsx(Gt,{dataKey:"revenue",fill:"#a5b4fc",name:"Revenue",radius:[8,8,0,0],maxBarSize:60}),a.jsx(Gt,{dataKey:"expenses",fill:"#fca5a5",name:"Expenses",radius:[8,8,0,0],maxBarSize:60}),a.jsx(Gt,{dataKey:"profit",fill:"#86efac",name:"Profit",radius:[8,8,0,0],maxBarSize:60})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(An,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Revenue Breakdown"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Online Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",Ie.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-green-600",children:[(Ie.onlineRevenue/Ie.totalRevenue*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Offline Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",Ie.offlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-blue-600",children:[(Ie.offlineRevenue/Ie.totalRevenue*100).toFixed(0),"%"]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(Qr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Key Metrics"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Cost-to-Revenue Ratio"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:Ie.totalRevenue>0?`${(Ie.totalExpenses/Ie.totalRevenue*100).toFixed(1)}%`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:Ie.totalRevenue>0&&Ie.totalExpenses/Ie.totalRevenue<.7?" Healthy ratio":Ie.totalRevenue>0?" High expense ratio":"No sales yet"})]}),a.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Profit per 100 Revenue"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:Ie.totalRevenue>0?`${(Ie.netProfit/Ie.totalRevenue*100).toFixed(1)}`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:Ie.totalRevenue>0&&Ie.profitMargin>30?" Excellent margins":Ie.totalRevenue>0&&Ie.profitMargin>15?" Good margins":Ie.totalRevenue>0&&Ie.profitMargin>0?" Thin margins":Ie.totalRevenue>0?" Operating at loss":"No sales yet"})]})]})]})]})]})}),m==="expense"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(H=>a.jsx("button",{onClick:()=>N(H),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${v===H?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),v==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:A.from,onChange:H=>S({...A,from:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:A.to,onChange:H=>S({...A,to:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.totalExpenses.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.inventoryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ie.inventoryExpenses/Ie.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ie.salaryExpenses/Ie.totalExpenses*100).toFixed(1),"% of total"]})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[a.jsxs("div",{className:"w-full lg:w-1/2 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),a.jsx("div",{className:"relative bg-white rounded-2xl p-6 shadow-lg",children:a.jsx(En,{width:"100%",height:320,children:a.jsxs(pF,{children:[a.jsx("defs",{children:Q.map((H,R)=>a.jsxs("linearGradient",{id:`gradient-${R}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:H,stopOpacity:.9}),a.jsx("stop",{offset:"100%",stopColor:H,stopOpacity:.7})]},`gradient-${R}`))}),a.jsx(ai,{data:ae,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1,strokeDasharray:"3 3"},label:({percentage:H})=>`${H}%`,outerRadius:110,innerRadius:40,fill:"#8884d8",dataKey:"value",paddingAngle:2,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ae.map((H,R)=>a.jsx(zc,{fill:`url(#gradient-${R%Q.length})`,stroke:"#fff",strokeWidth:3},`cell-${R}`))}),a.jsx(Pr,{content:a.jsx(ome,{})})]})})})]}),a.jsx("div",{className:"w-full lg:w-1/2 space-y-3",children:ae.map((H,R)=>a.jsxs("div",{className:"group relative border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer bg-white overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${Q[R%Q.length]}40, ${Q[R%Q.length]}10)`}}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{background:`linear-gradient(135deg, ${Q[R%Q.length]}, ${Q[(R+1)%Q.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:H.name})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm font-semibold text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[H.percentage,"%"]})})]}),a.jsxs("div",{className:"text-xl font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:["",H.value.toLocaleString()]}),a.jsx("div",{className:"mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${H.percentage}%`,background:`linear-gradient(90deg, ${Q[R%Q.length]}, ${Q[(R+1)%Q.length]})`}})})]})]},H.name))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(v==="monthly"||v==="yearly"||v==="custom")&&Ie.permanentEmployeeExpenses>0&&a.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ir,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Permanent employee salaries (",Ie.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ie.contractWorkerExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ie.permanentEmployeeExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:v==="monthly"||v==="yearly"||v==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly/yearly views"})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ie.overheadExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(Ie.overheadExpenses/Ie.totalExpenses*100).toFixed(1),"% of total expenses"]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ie.fixedCostsTotal.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ie.fixedCostsTotal/Ie.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ie.electricityExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ie.fixedCostsTotal>0?(Ie.electricityExpenses/Ie.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ie.rentExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ie.fixedCostsTotal>0?(Ie.rentExpenses/Ie.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ie.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[Ie.fixedCostsTotal>0?(Ie.salaryExpenses/Ie.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(En,{width:"100%",height:280,children:a.jsxs(Ws,{data:[{name:" Electricity",amount:Ie.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ie.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ie.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(xn,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),a.jsx(on,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Pr,{content:a.jsx(Ew,{})}),a.jsx(Gt,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:Ie.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ie.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ie.salaryExpenses,fill:"#a78bfa"}].map((H,R)=>a.jsx(zc,{fill:H.fill},`cell-${R}`))})]})})})})]})]})}),m==="sales"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>y("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${b==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(vc,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),a.jsx("button",{onClick:()=>y("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${b==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Q0,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),b==="revenue"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(H=>a.jsx("button",{onClick:()=>N(H),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${v===H?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),v==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:A.from,onChange:H=>S({...A,from:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:A.to,onChange:H=>S({...A,to:H.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Kt()})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.onlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ie.onlineRevenue/Ie.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ie.offlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(Ie.offlineRevenue/Ie.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Transactions"}),a.jsx("div",{className:"text-2xl sm:text-3xl text-gray-900",children:ze.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Sales records"})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",v==="daily"?"Last 10 Days":v==="weekly"?"Last 10 Weeks":v==="monthly"?"Last 10 Months":v==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(En,{width:"100%",height:300,children:a.jsxs(Ws,{data:ke,barCategoryGap:"25%",children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(xn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(on,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Pr,{content:a.jsx(Ew,{})}),a.jsx(qn,{wrapperStyle:{fontSize:"12px"}}),a.jsx(Gt,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),a.jsx(Gt,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80})]})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(vc,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),a.jsxs("span",{className:"text-sm text-green-600",children:[(Ie.onlineRevenue/Ie.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ie.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),a.jsxs("span",{className:"text-sm text-blue-600",children:[(Ie.offlineRevenue/Ie.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",Ie.offlineRevenue.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Qr,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Metrics"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Average Transaction"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ze.length>0?(Ie.totalRevenue/ze.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per sale"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Profit per Sale"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ze.length>0?(Ie.netProfit/ze.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Average margin"})]})]})]})]})]}),b==="category"&&a.jsx(ime,{context:e,selectedStoreId:t})]}),m==="datacapture"&&a.jsx("div",{children:a.jsx(toe,{context:e,selectedStoreId:t})}),m==="production"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"custom",label:"Custom Range"}].map(H=>a.jsx("button",{onClick:()=>ut(H.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${We===H.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:H.label},H.value))})}),We==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:nt,onChange:H=>qt(H.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:ct,onChange:H=>dt(H.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[a.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),a.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:H,endDate:R}=ur(),q=new Date(H).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),K=new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return H===R?q:`${q} - ${K}`})()})]})]})}),a.jsx("div",{className:"hidden",children:a.jsx("select",{value:Xt||"",onChange:H=>Ce(H.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const H=O;return Je.filter(q=>{if(!H)return!0;const K=q.storeId===H,le=q.productionHouseId===H,ce=q.productionHouseId||q.storeId;return K||le||ce===H}).map(q=>q.date).filter((q,K,le)=>le.indexOf(q)===K).sort((q,K)=>K.localeCompare(q)).map(q=>a.jsx("option",{value:q,children:new Date(q).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},q))})()})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(()=>{const H=O;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",l),console.log("  - selectedProductionHouseId:",O),console.log("  - effectiveStoreId:",p),console.log("  - filterById:",H),console.log("  - Total production records:",Je.length);const R=H?e.productionHouses?.find(Te=>Te.id===H):null;console.log("  - Selected production house object:",R);const{startDate:q,endDate:K}=ur();console.log(" Date Range Filter:",{rangeType:We,startDate:q,endDate:K,customStart:nt,customEnd:ct});const le=Je.filter(Te=>{if(Te.date<q||Te.date>K)return!1;if(!H)return!0;const Re=Te.storeId===H,st=Te.productionHouseId===H;let He=Te.productionHouseId;!He&&Te.storeId&&(He=e.stores?.find(Ct=>Ct.id===Te.storeId)?.productionHouseId||null);const Ot=He||Te.storeId;return console.log("   Checking record:",{recordId:Te.id.slice(0,8),recordStoreId:Te.storeId,recordProductionHouseId:Te.productionHouseId,resolvedProductionHouseId:He,phId:Ot,filterById:H,matchesStoreId:Re,matchesProductionHouseId:st,match:Re||st||Ot===H}),Re||st||Ot===H});console.log("  - Filtered production records:",le.length);const ce=le.reduce((Te,Re)=>Te+(Re.chickenMomos?.final||0)+(Re.chickenCheeseMomos?.final||0)+(Re.vegMomos?.final||0)+(Re.cheeseCornMomos?.final||0)+(Re.paneerMomos?.final||0)+(Re.vegKurkureMomos?.final||0)+(Re.chickenKurkureMomos?.final||0),0),fe=le.reduce((Te,Re)=>Te+(Re.wastage?.dough||0)+(Re.wastage?.stuffing||0)+(Re.wastage?.batter||0)+(Re.wastage?.coating||0),0),ge=le.filter(Te=>Te.approvalStatus==="approved").length,ve=le.filter(Te=>Te.approvalStatus==="pending").length;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Un,{className:"w-6 h-6 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:ce.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(is,{className:"w-6 h-6 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:fe.toFixed(2)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"kg"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ny,{className:"w-6 h-6 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:ge}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ir,{className:"w-6 h-6 text-yellow-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:ve}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]})]})})()}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total produced - Total sent to stores (delivered production requests)"})]}),l==="production"&&(s||i)&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[a.jsx(wr,{className:"w-5 h-5"}),"Recalibrate Stock"]}),ne&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",new Date(ne.date).toLocaleDateString()]}),me&&!ne&&a.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),l==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),a.jsxs("select",{value:O||"all",onChange:H=>{const R=H.target.value==="all"?null:H.target.value;console.log(" Production House Selector Changed:",R),be(R)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(H=>a.jsxs("option",{value:H.id,children:[H.name," (ID: ",H.id,")"]},H.id))]})]})]})}),(()=>{const H=O;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",l),console.log("  - selectedProductionHouseId:",O),console.log("  - effectiveProductionHouseId:",H);const R=H?e.productionHouses?.find(He=>He.id===H):null;console.log("  - Selected production house for stock:",R);const q=Je.filter(He=>{if(!H)return!0;const Ot=He.storeId===H,ot=He.productionHouseId===H;let pt=He.productionHouseId;!pt&&He.storeId&&(pt=e.stores?.find(_t=>_t.id===He.storeId)?.productionHouseId||null);const Ct=pt||He.storeId;return Ot||ot||Ct===H});console.log("  - Filtered production for stock status:",q.length);const K=new Date().toISOString().substring(0,7),le=q.filter(He=>He.date.startsWith(K));console.log("  - Monthly filtered production:",le.length,"for month:",K);const ce=le.reduce((He,Ot)=>({chicken:He.chicken+(Ot.chickenMomos?.final||0),chickenCheese:He.chickenCheese+(Ot.chickenCheeseMomos?.final||0),veg:He.veg+(Ot.vegMomos?.final||0),cheeseCorn:He.cheeseCorn+(Ot.cheeseCornMomos?.final||0),paneer:He.paneer+(Ot.paneerMomos?.final||0),vegKurkure:He.vegKurkure+(Ot.vegKurkureMomos?.final||0),chickenKurkure:He.chickenKurkure+(Ot.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});let fe=H;if(H&&H.startsWith("STORE-")){const He=e.stores?.find(Ot=>Ot.id===H);He?.productionHouseId&&(fe=He.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:H,resolvedUUID:fe}))}const ge=e.productionRequests?.filter(He=>{if(He.status!=="delivered")return!1;const Ot=He.deliveredDate||He.requestDate||He.createdAt;if(!Ot||!Ot.startsWith(K))return console.log(" Filtered out request - wrong month:",{requestId:He.id.slice(0,8),requestDate:Ot,currentMonth:K,matches:Ot?.startsWith(K)}),!1;const ot=e.stores?.find(pt=>pt.id===He.storeId);if(fe){const pt=ot?.productionHouseId===fe;return console.log(" Checking production request:",{requestId:He.id.slice(0,8),storeId:He.storeId,storeName:ot?.name,storeProductionHouseId:ot?.productionHouseId,productionHouseUUID:fe,deliveredDate:He.deliveredDate,matches:pt}),pt}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:H,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(He=>He.status==="delivered").length||0,fulfilledRequestsCount:ge.length,stores:e.stores?.map(He=>({id:He.id,name:He.name,productionHouseId:He.productionHouseId}))||[],filteredProductionRecords:q.length,allProductionData:Je.map(He=>({id:He.id.slice(0,8),date:He.date,productionHouseId:He.productionHouseId,storeId:He.storeId,resolvedId:He.productionHouseId||He.storeId})),sampleRequest:ge[0],sampleRequestData:ge[0]?{id:ge[0].id,storeId:ge[0].storeId,requestDate:ge[0].requestDate,status:ge[0].status,chickenMomos:ge[0].chickenMomos,vegMomos:ge[0].vegMomos}:null});const ve=ge.reduce((He,Ot)=>({chicken:He.chicken+(Ot.chickenMomos||0),chickenCheese:He.chickenCheese+(Ot.chickenCheeseMomos||0),veg:He.veg+(Ot.vegMomos||0),cheeseCorn:He.cheeseCorn+(Ot.cheeseCornMomos||0),paneer:He.paneer+(Ot.paneerMomos||0),vegKurkure:He.vegKurkure+(Ot.vegKurkureMomos||0),chickenKurkure:He.chickenKurkure+(Ot.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Te=me||{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};console.log(" Stock Calculation with Carry-Forward:"),console.log("  Opening Balance:",Te),console.log("  Current Month Production:",ce),console.log("  Current Month Deliveries:",ve);const Re={chicken:(Te.chicken||0)+ce.chicken-ve.chicken,chickenCheese:(Te.chickenCheese||0)+ce.chickenCheese-ve.chickenCheese,veg:(Te.veg||0)+ce.veg-ve.veg,cheeseCorn:(Te.cheeseCorn||0)+ce.cheeseCorn-ve.cheeseCorn,paneer:(Te.paneer||0)+ce.paneer-ve.paneer,vegKurkure:(Te.vegKurkure||0)+ce.vegKurkure-ve.vegKurkure,chickenKurkure:(Te.chickenKurkure||0)+ce.chickenKurkure-ve.chickenKurkure};console.log("  Final Stock:",Re);const st=[{key:"chicken",label:"Chicken",color:"purple"},{key:"chickenCheese",label:"Chicken Cheese",color:"pink"},{key:"veg",label:"Veg",color:"green"},{key:"cheeseCorn",label:"Cheese Corn",color:"yellow"},{key:"paneer",label:"Paneer",color:"blue"},{key:"vegKurkure",label:"Veg Kurkure",color:"teal"},{key:"chickenKurkure",label:"Chicken Kurkure",color:"red"}];return q.length===0?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:H?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):a.jsxs(a.Fragment,{children:[Te&&Object.values(Te).some(He=>He>0)&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(er,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",a.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:ne?`Opening balance from recalibration on ${new Date(ne.date).toLocaleDateString()}`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:st.map(({key:He,label:Ot,color:ot})=>{const pt=Te[He]||0,Ct=ce[He],Nt=ve[He],_t=Re[He],ar=_t<1e3;let Wt="";_t<0?Wt=" Over-distributed":ar&&(Wt=" Low Stock");const $s=Ct>0?(_t/Ct*100).toFixed(0):"0";return a.jsxs("div",{className:`bg-gradient-to-br from-${ot}-50 to-${ot}-100 border-2 border-${ot}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[Ot," Momos"]}),a.jsxs("div",{className:"space-y-2",children:[pt>0&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),a.jsx("span",{className:"text-xl font-bold text-blue-800",children:pt})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),a.jsx("span",{className:`text-lg font-bold text-${ot}-600`,children:Ct})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),a.jsx("span",{className:`text-lg font-bold text-${ot}-700`,children:Nt})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("span",{className:`text-2xl font-bold ${ar||_t<0?"text-red-600":`text-${ot}-800`}`,children:_t})]}),Ct>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[$s,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${ar||_t<0?"bg-red-500":`bg-${ot}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number($s)))}%`}})})]})]}),Wt&&a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-red-800 font-semibold",children:Wt})})]})]},He)})})]})})()]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(H=>a.jsx("button",{onClick:()=>N(H),className:`px-4 py-2 rounded-lg text-sm transition-colors ${v===H?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),v==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),a.jsx("input",{type:"date",value:A.from,onChange:H=>S({...A,from:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),a.jsx("input",{type:"date",value:A.to,onChange:H=>S({...A,to:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),a.jsx(En,{width:"100%",height:400,children:a.jsxs(Ws,{data:(()=>{const H=l==="production"?O:e.user?.designation==="production_incharge"?p:O;H&&e.productionHouses?.find(K=>K.id===H||K.storeId===H);const R=Je.filter(K=>{if(H){const le=K.storeId===H,ce=K.productionHouseId===H;let fe=K.productionHouseId;!fe&&K.storeId&&(fe=e.stores?.find(Re=>Re.id===K.storeId)?.productionHouseId||null);const ge=fe||K.storeId;if(!(le||ce||ge===H))return!1}return v==="custom"?K.date>=A.from&&K.date<=A.to:!0}),q=new Map;return R.forEach(K=>{let le=K.date,ce=K.date;if(v==="weekly"){const ge=new Date(K.date),ve=new Date(ge.setDate(ge.getDate()-ge.getDay())),Te=new Date(ve);Te.setDate(Te.getDate()+6),le=ve.toISOString().split("T")[0],ce=`${ve.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Te.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else v==="monthly"?(le=K.date.substring(0,7),ce=le):v==="yearly"&&(le=K.date.substring(0,4),ce=le);q.has(le)||q.set(le,{period:ce,chickenMomos:0,chickenCheeseMomos:0,vegMomos:0,cheeseCornMomos:0,paneerMomos:0,vegKurkure:0,chickenKurkure:0});const fe=q.get(le);fe.chickenMomos+=K.chickenMomos?.final||0,fe.chickenCheeseMomos+=K.chickenCheeseMomos?.final||0,fe.vegMomos+=K.vegMomos?.final||0,fe.cheeseCornMomos+=K.cheeseCornMomos?.final||0,fe.paneerMomos+=K.paneerMomos?.final||0,fe.vegKurkure+=K.vegKurkureMomos?.final||0,fe.chickenKurkure+=K.chickenKurkureMomos?.final||0}),Array.from(q.values()).sort((K,le)=>K.period.localeCompare(le.period))})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(xn,{dataKey:"period",tick:{fontSize:12},stroke:"#666",angle:v==="weekly"?-15:0,textAnchor:v==="weekly"?"end":"middle",height:v==="weekly"?60:30}),a.jsx(on,{tick:{fontSize:12},stroke:"#666",label:{value:"Pieces",angle:-90,position:"insideLeft"}}),a.jsx(Pr,{content:a.jsx(lme,{})}),a.jsx(qn,{}),a.jsx(Gt,{dataKey:"chickenMomos",name:"Chicken Momos",fill:"#ef4444"}),a.jsx(Gt,{dataKey:"chickenCheeseMomos",name:"Chicken Cheese",fill:"#f97316"}),a.jsx(Gt,{dataKey:"vegMomos",name:"Veg Momos",fill:"#10b981"}),a.jsx(Gt,{dataKey:"cheeseCornMomos",name:"Cheese Corn",fill:"#fbbf24"}),a.jsx(Gt,{dataKey:"paneerMomos",name:"Paneer Momos",fill:"#3b82f6"}),a.jsx(Gt,{dataKey:"vegKurkure",name:"Veg Kurkure",fill:"#84cc16"}),a.jsx(Gt,{dataKey:"chickenKurkure",name:"Chicken Kurkure",fill:"#f59e0b"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),a.jsx(En,{width:"100%",height:250,children:a.jsxs(Bd,{data:(()=>{const H=[];for(let R=4;R>=0;R--){const q=new Date;q.setDate(q.getDate()-R);const K=q.toISOString().split("T")[0],ce=Je.filter(fe=>{const ge=l==="production"?O:e.user?.designation==="production_incharge"?p:O;if(ge){const ve=fe.storeId===ge,Te=fe.productionHouseId===ge,Re=fe.productionHouseId||fe.storeId;if(!(ve||Te||Re===ge))return!1}return fe.date===K}).reduce((fe,ge)=>fe+(ge.wastage?.dough||0)+(ge.wastage?.stuffing||0)+(ge.wastage?.batter||0)+(ge.wastage?.coating||0),0);H.push({date:K.substring(5),wastage:ce})}return H})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#fca5a5"}),a.jsx(xn,{dataKey:"date",tick:{fontSize:10}}),a.jsx(on,{tick:{fontSize:10}}),a.jsx(Pr,{}),a.jsx(Is,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),a.jsx(En,{width:"100%",height:250,children:a.jsxs(Bd,{data:(()=>{const H=[];for(let R=4;R>=0;R--){const q=new Date;q.setDate(q.getDate()-R*7);const K=new Date(q.setDate(q.getDate()-q.getDay())),le=new Date(K);le.setDate(le.getDate()+6);const fe=Je.filter(ge=>{const ve=l==="production"?O:e.user?.designation==="production_incharge"?p:O;if(ve){const Te=ge.storeId===ve,Re=ge.productionHouseId===ve,st=ge.productionHouseId||ge.storeId;if(!(Te||Re||st===ve))return!1}return ge.date>=K.toISOString().split("T")[0]&&ge.date<=le.toISOString().split("T")[0]}).reduce((ge,ve)=>ge+(ve.wastage?.dough||0)+(ve.wastage?.stuffing||0)+(ve.wastage?.batter||0)+(ve.wastage?.coating||0),0);H.push({week:`W${5-R}`,wastage:fe})}return H})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#fed7aa"}),a.jsx(xn,{dataKey:"week",tick:{fontSize:10}}),a.jsx(on,{tick:{fontSize:10}}),a.jsx(Pr,{}),a.jsx(Is,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),a.jsx(En,{width:"100%",height:250,children:a.jsxs(Bd,{data:(()=>{const H=[];for(let R=4;R>=0;R--){const q=new Date;q.setMonth(q.getMonth()-R);const K=q.toISOString().substring(0,7),ce=Je.filter(fe=>{const ge=l==="production"?O:e.user?.designation==="production_incharge"?p:O;if(ge){const ve=fe.storeId===ge,Te=fe.productionHouseId===ge,Re=fe.productionHouseId||fe.storeId;if(!(ve||Te||Re===ge))return!1}return fe.date.startsWith(K)}).reduce((fe,ge)=>fe+(ge.wastage?.dough||0)+(ge.wastage?.stuffing||0)+(ge.wastage?.batter||0)+(ge.wastage?.coating||0),0);H.push({month:K.substring(5),wastage:ce})}return H})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#fde68a"}),a.jsx(xn,{dataKey:"month",tick:{fontSize:10}}),a.jsx(on,{tick:{fontSize:10}}),a.jsx(Pr,{}),a.jsx(Is,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(H=>a.jsx("button",{onClick:()=>j(H),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${k===H?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:H.charAt(0).toUpperCase()+H.slice(1)},H))})]}),a.jsx(En,{width:"100%",height:400,children:a.jsxs(Ws,{data:(()=>{const H=l==="production"?O:e.user?.designation==="production_incharge"?p:O,R=Je.filter(K=>{if(H){const fe=K.storeId===H,ge=K.productionHouseId===H,ve=K.productionHouseId||K.storeId;if(!(fe||ge||ve===H))return!1}if(k==="custom")return K.date>=A.from&&K.date<=A.to;const le=new Date,ce=new Date(K.date);if(k==="daily"){const fe=new Date(le);return fe.setDate(fe.getDate()-5),ce>=fe}else if(k==="weekly"){const fe=new Date(le);return fe.setDate(fe.getDate()-35),ce>=fe}else if(k==="monthly"){const fe=new Date(le);return fe.setMonth(fe.getMonth()-5),ce>=fe}else if(k==="yearly"){const fe=new Date(le);return fe.setFullYear(fe.getFullYear()-5),ce>=fe}return!0}),q=new Map;return R.forEach(K=>{let le=K.date,ce=K.date;if(k==="weekly"){const ge=new Date(K.date),ve=new Date(ge.setDate(ge.getDate()-ge.getDay())),Te=new Date(ve);Te.setDate(Te.getDate()+6),le=ve.toISOString().split("T")[0],ce=`${ve.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Te.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else k==="monthly"?(le=K.date.substring(0,7),ce=le):k==="yearly"&&(le=K.date.substring(0,4),ce=le);q.has(le)||q.set(le,{period:ce,dough:0,stuffing:0,batter:0,coating:0});const fe=q.get(le);fe.dough+=K.wastage?.dough||0,fe.stuffing+=K.wastage?.stuffing||0,fe.batter+=K.wastage?.batter||0,fe.coating+=K.wastage?.coating||0}),Array.from(q.values()).sort((K,le)=>K.period.localeCompare(le.period))})(),children:[a.jsx(Qn,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(xn,{dataKey:"period",tick:{fontSize:12},angle:k==="weekly"?-15:0,textAnchor:k==="weekly"?"end":"middle",height:k==="weekly"?60:30}),a.jsx(on,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),a.jsx(Pr,{content:a.jsx(cme,{})}),a.jsx(qn,{}),a.jsx(Gt,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),a.jsx(Gt,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),a.jsx(Gt,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),a.jsx(Gt,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),n&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(ny,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),te?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{ee(he),pe(xe),J(!1),mr.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Xd,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:()=>{J(!1),Se(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[a.jsx(wn,{className:"w-4 h-4"}),"Cancel"]})]}):a.jsxs("button",{onClick:()=>{Se(JSON.parse(JSON.stringify(L))),Fe(Oe),J(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Dw,{className:"w-4 h-4"}),"Edit SOP"]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[a.jsx(Ir,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),a.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:te?xe:Oe,onChange:H=>{te&&Fe(Number(H.target.value))},disabled:!te,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),a.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(te?he:L).map(([H,R])=>{const q={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"text-gray-900 mb-3",children:q[H]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),a.jsx("input",{type:"number",value:R.dough,disabled:!te,onChange:K=>{te&&Se({...he,[H]:{...he[H],dough:Number(K.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${te?"bg-white":"bg-gray-100"}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),a.jsx("input",{type:"number",value:R.stuffing,disabled:!te,onChange:K=>{te&&Se({...he,[H]:{...he[H],stuffing:Number(K.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${te?"bg-white":"bg-gray-100"}`})]}),R.batter!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),a.jsx("input",{type:"number",value:R.batter,disabled:!te,onChange:K=>{te&&Se({...he,[H]:{...he[H],batter:Number(K.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${te?"bg-white":"bg-gray-100"}`})]}),R.coating!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),a.jsx("input",{type:"number",value:R.coating,disabled:!te,onChange:K=>{te&&Se({...he,[H]:{...he[H],coating:Number(K.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${te?"bg-white":"bg-gray-100"}`})]})]})]},H)})})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),a.jsx(Ea,{label:"Date:",value:Me,onChange:Pt})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),a.jsx("div",{className:"space-y-6",children:(()=>{const H=l==="production"?O:e.user?.designation==="production_incharge"?p:O;console.log(" SOP Compliance Filter - analyticsMode:",l),console.log(" SOP Compliance Filter - selectedProductionHouseId:",O),console.log(" SOP Compliance Filter - effectiveStoreId:",p),console.log(" SOP Compliance Filter - filterById:",H),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",Me);const R=[Me],q=[];for(const K of R){const le=Je.filter(ge=>{const ve=l==="production"?O:e.user?.designation==="production_incharge"?p:O;if(ve){const Te=ge.storeId===ve,Re=ge.productionHouseId===ve,st=ge.productionHouseId||ge.storeId;if(!(Te||Re||st===ve))return!1}return ge.date===K&&ge.approvalStatus==="approved"});if(console.log(` SOP Compliance - Date ${K}: Found ${le.length} production records`),le.length===0)continue;const ce={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},fe={};le.forEach(ge=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(ve=>{const Te=ge[ve];if(Te&&Te.final>0){const Re=ce[ve];fe[Re]||(fe[Re]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),fe[Re].quantity+=Te.final,fe[Re].totalDough+=Te.dough||0,fe[Re].totalStuffing+=Te.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(ve=>{const Te=ge[ve];if(Te&&Te.final>0){const Re=ce[ve];fe[Re]||(fe[Re]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),fe[Re].quantity+=Te.final,fe[Re].totalBatter+=Te.batter||0,fe[Re].totalCoating+=Te.coating||0}})}),q.push({date:K,usage:fe})}return q.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Ir,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsxs("p",{children:["No approved production data found for ",new Date(Me).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),a.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):q.map(({date:K,usage:le})=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-gray-900 mb-4",children:new Date(K).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(le).map(([ce,fe])=>{if(fe.quantity===0||ce==="vegKurkure"||ce==="chickenKurkure")return null;const ge={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},ve=fe.quantity>0?fe.totalDough*1e3/fe.quantity:0,Te=fe.quantity>0?fe.totalStuffing*1e3/fe.quantity:0,Re=fe.quantity>0?fe.totalBatter*1e3/fe.quantity:0,st=fe.quantity>0?fe.totalCoating*1e3/fe.quantity:0,He=L[ce].dough>0?(ve-L[ce].dough)/L[ce].dough*100:0,Ot=L[ce].stuffing>0?(Te-L[ce].stuffing)/L[ce].stuffing*100:0,ot=L[ce].batter>0?(Re-L[ce].batter)/L[ce].batter*100:0,pt=L[ce].coating>0?(st-L[ce].coating)/L[ce].coating*100:0,Ct=1-Oe/100,Nt=1+Oe/100,_t=ve>=L[ce].dough*Ct&&ve<=L[ce].dough*Nt,ar=Te>=L[ce].stuffing*Ct&&Te<=L[ce].stuffing*Nt,Wt=!L[ce].batter||Re>=L[ce].batter*Ct&&Re<=L[ce].batter*Nt,$s=!L[ce].coating||st>=L[ce].coating*Ct&&st<=L[ce].coating*Nt,oi=_t&&ar&&Wt&&$s;return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${oi?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-900",children:ge[ce]}),oi?a.jsx(Xd,{className:"w-5 h-5 text-green-600"}):a.jsx(Ir,{className:"w-5 h-5 text-red-600"})]}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",fe.quantity," pcs"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:`flex justify-between items-center ${_t?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Dough:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[ve.toFixed(1),"g / ",L[ce].dough,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(He)>Oe?"text-red-600":"text-green-600"}`,children:[He>0?"+":"",He.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:`flex justify-between items-center ${ar?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Stuffing:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Te.toFixed(1),"g / ",L[ce].stuffing,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Ot)>Oe?"text-red-600":"text-green-600"}`,children:[Ot>0?"+":"",Ot.toFixed(1),"%"]})]})]}),L[ce].batter&&a.jsxs("div",{className:`flex justify-between items-center ${Wt?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Batter:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Re.toFixed(1),"g / ",L[ce].batter,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(ot)>Oe?"text-red-600":"text-green-600"}`,children:[ot>0?"+":"",ot.toFixed(1),"%"]})]})]}),L[ce].coating&&a.jsxs("div",{className:`flex justify-between items-center ${$s?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Coating:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[st.toFixed(1),"g / ",L[ce].coating,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(pt)>Oe?"text-red-600":"text-green-600"}`,children:[pt>0?"+":"",pt.toFixed(1),"%"]})]})]})]})]},ce)})})]},K))})()})]})]})]}),m==="production-requests"&&a.jsx("div",{children:a.jsx(noe,{context:e,highlightRequestId:r||null,selectedStoreId:d})}),m==="recalibration-reports"&&a.jsx("div",{children:a.jsx($6,{context:e,selectedStoreId:l==="production"?O:t,onOpenRecalibration:()=>Y(!0),locationType:"production_house"})}),m==="store-recalibration"&&a.jsx("div",{children:a.jsx($6,{context:e,selectedStoreId:p,locationType:"store"})})]}),z&&a.jsx(V2,{context:e,selectedStoreId:l==="production"?O:p,onClose:()=>{Y(!1),l==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),setTimeout(()=>{xt()},500))},isProductionHouse:l==="production"})]})}function B6({userRole:e,selectedStoreId:t,currentUserId:r}){const[n,s]=U.useState("today"),[i,o]=U.useState(""),[l,u]=U.useState(""),[d,f]=U.useState("csv"),[p,m]=U.useState(!1),[x,b]=U.useState(!1),[y,v]=U.useState(null),[N,k]=U.useState(null),j=pu();U.useEffect(()=>{(async()=>{const{data:{session:I}}=await j.auth.getSession();I?.access_token&&k(I.access_token)})()},[]);const A=()=>{const P=new Date;let I,B;switch(n){case"today":I=P.toISOString().split("T")[0],B=I;break;case"weekly":const z=new Date(P);z.setDate(P.getDate()-7),I=z.toISOString().split("T")[0],B=P.toISOString().split("T")[0];break;case"monthly":const Y=new Date(P.getFullYear(),P.getMonth(),1),re=new Date(P.getFullYear(),P.getMonth()+1,0);I=Y.toISOString().split("T")[0],B=re.toISOString().split("T")[0];break;case"custom":I=i,B=l;break}return{startDate:I,endDate:B}},S=async()=>{const{startDate:P,endDate:I}=A();if(!P||!I)return alert("Please select a valid date range"),null;if(!N)return alert("Not authenticated. Please log in again."),null;try{m(!0);const[B,z,Y,re,X,ne]=await Promise.all([Em(N),U2(N),q2(N),So(),jo(),z2()]),Z=(pe,xe="date")=>pe.filter(Fe=>{const O=Fe[xe],be=O>=P&&O<=I;if(t){const qe=Fe.storeId===t;return be&&qe}return be}),me=Z(B),G=Z(z),L=Z(Y),ee=Z(X),te=Z(ne);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:B.length,filteredInventory:me.length,totalSales:Y.length,filteredSales:L.length,totalOverheads:z.length,filteredOverheads:G.length,sampleSalesStoreIds:Y.slice(0,3).map(pe=>({date:pe.date,storeId:pe.storeId})),sampleOverheadStoreIds:z.slice(0,3).map(pe=>({date:pe.date,storeId:pe.storeId}))});const J=me.reduce((pe,xe)=>pe+(xe.totalCost||0),0),he=G.reduce((pe,xe)=>pe+(xe.amount||0),0),Se=L.reduce((pe,xe)=>pe+(xe.offlineSales||0)+(xe.onlineSales||0),0),Oe=ee.reduce((pe,xe)=>pe+(xe.amount||0),0);return{startDate:P,endDate:I,storeId:t,inventory:me,overheads:G,sales:L,employees:re,payouts:ee,production:te,summary:{totalInventorySpend:J,totalOverheadSpend:he,totalSales:Se,totalPayouts:Oe}}}catch(B){return console.error("Error fetching export data:",B),alert("Failed to fetch data for export"),null}finally{m(!1)}},E=async()=>{const P=await S();P&&(v(P),b(!0))},_=P=>{let I=`Data Export Report
`;return I+=`Period: ${P.startDate} to ${P.endDate}
`,P.storeId&&(I+=`Store ID: ${P.storeId}
`),I+=`Generated on: ${new Date().toLocaleString()}

`,I+=`SUMMARY
`,I+=`Total Inventory Spend,${P.summary.totalInventorySpend.toLocaleString()}
`,I+=`Total Overhead Spend,${P.summary.totalOverheadSpend.toLocaleString()}
`,I+=`Total Sales,${P.summary.totalSales.toLocaleString()}
`,I+=`Total Payouts,${P.summary.totalPayouts.toLocaleString()}
`,I+=`Net Profit/Loss,${(P.summary.totalSales-P.summary.totalInventorySpend-P.summary.totalOverheadSpend-P.summary.totalPayouts).toLocaleString()}

`,I+=`
INVENTORY ITEMS
`,I+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,P.inventory.forEach(B=>{I+=`${B.date},"${B.category}","${B.itemName}",${B.quantity},"${B.unit}",${B.price||0},${B.totalCost}
`}),P.production&&P.production.length>0&&(I+=`
PRODUCTION DATA
`,I+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,P.production.forEach(B=>{I+=`${B.date},${B.chickenMomos?.final||0},${B.chickenCheeseMomos?.final||0},${B.vegMomos?.final||0},${B.cheeseCornMomos?.final||0},${B.paneerMomos?.final||0},${B.vegKurkureMomos?.final||0},${B.chickenKurkureMomos?.final||0},${B.wastage?.total||0}
`})),I+=`
OVERHEAD EXPENSES
`,I+=`Date,Category,Description,Amount
`,P.overheads.forEach(B=>{I+=`${B.date},"${B.category}","${B.description||"-"}",${B.amount}
`}),I+=`
SALES DATA
`,I+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,P.sales.forEach(B=>{I+=`${B.date},${B.paytmAmount||0},${B.cashAmount||0},${B.onlineSales||0},${B.employeeSalary||0},${B.actualCashInHand||0},${B.cashOffset||0},"${B.approvalRequired?"Pending Approval":"Approved"}"
`}),I+=`
EMPLOYEE PAYOUTS
`,I+=`Date,Employee Name,Employee ID,Amount
`,P.payouts.forEach(B=>{const z=P.employees.find(Y=>Y.id===B.employeeId);I+=`${B.date},"${B.employeeName}","${z?.employeeId||"-"}",${B.amount}
`}),I+=`
EMPLOYEE MASTER LIST
`,I+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,P.employees.forEach(B=>{I+=`"${B.employeeId}","${B.name}","${B.type}","${B.role||"-"}","${B.phone}",${B.dailyRate||"-"}
`}),I},T=P=>_(P),D=P=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${P.startDate} to ${P.endDate}</p>
          ${P.storeId?`<p><strong>Store ID:</strong> ${P.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${P.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${P.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${P.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${P.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(P.summary.totalSales-P.summary.totalInventorySpend-P.summary.totalOverheadSpend-P.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${P.inventory.map(B=>`
                <tr>
                  <td>${B.date}</td>
                  <td>${B.category}</td>
                  <td>${B.itemName}</td>
                  <td>${B.quantity}</td>
                  <td>${B.unit}</td>
                  <td>${B.price||0}</td>
                  <td>${B.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${P.production&&P.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${P.production.map(B=>`
                <tr>
                  <td>${B.date}</td>
                  <td>${B.chickenMomos?.final||0}</td>
                  <td>${B.chickenCheeseMomos?.final||0}</td>
                  <td>${B.vegMomos?.final||0}</td>
                  <td>${B.cheeseCornMomos?.final||0}</td>
                  <td>${B.paneerMomos?.final||0}</td>
                  <td>${B.vegKurkureMomos?.final||0}</td>
                  <td>${B.chickenKurkureMomos?.final||0}</td>
                  <td>${B.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${P.overheads.map(B=>`
                <tr>
                  <td>${B.date}</td>
                  <td>${B.category}</td>
                  <td>${B.description||"-"}</td>
                  <td>${B.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${P.sales.map(B=>`
                <tr>
                  <td>${B.date}</td>
                  <td>${B.paytmAmount||0}</td>
                  <td>${B.cashAmount||0}</td>
                  <td>${B.onlineSales||0}</td>
                  <td>${B.employeeSalary||0}</td>
                  <td>${B.actualCashInHand||0}</td>
                  <td>${B.cashOffset||0}</td>
                  <td>${B.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${P.payouts.map(B=>{const z=P.employees.find(Y=>Y.id===B.employeeId);return`
                  <tr>
                    <td>${B.date}</td>
                    <td>${B.employeeName}</td>
                    <td>${z?.employeeId||"-"}</td>
                    <td>${B.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${P.employees.map(B=>`
                <tr>
                  <td>${B.employeeId}</td>
                  <td>${B.name}</td>
                  <td>${B.type}</td>
                  <td>${B.role||"-"}</td>
                  <td>${B.phone}</td>
                  <td>${B.dailyRate?""+B.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,F=async()=>{const P=await S();if(!P)return;let I,B,z;const Y=`${P.startDate}_to_${P.endDate}`;switch(d){case"csv":I=_(P),B="text/csv",z=`export_${Y}.csv`;break;case"excel":I=T(P),B="application/vnd.ms-excel",z=`export_${Y}.xls`;break;case"pdf":I=D(P),B="text/html",z=`export_${Y}.html`;break;default:return}const re=new Blob([I],{type:B}),X=URL.createObjectURL(re),ne=document.createElement("a");ne.href=X,ne.download=z,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(X),alert(`Data exported successfully as ${z}`)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),a.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&a.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(wr,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${n==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Today"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),a.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${n==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Last 7 Days"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),a.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${n==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"This Month"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),a.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${n==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Custom"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),n==="custom"&&a.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:i,onChange:P=>o(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:l,onChange:P=>u(P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ei,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${d==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(P9,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),a.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${d==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(Q0,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"Excel"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),a.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${d==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(Ei,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"PDF/HTML"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[a.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),a.jsx("li",{children:" Production Data with all momo types and wastage"}),a.jsx("li",{children:" All Overhead Expenses categorized"}),a.jsx("li",{children:" Sales Data with payment breakdowns"}),a.jsx("li",{children:" Employee Payouts with detailed records"}),a.jsx("li",{children:" Employee Master List"}),a.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:E,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[a.jsx(Ei,{className:"w-5 h-5"}),"Preview Data"]}),a.jsxs("button",{onClick:F,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(Ks,{className:"w-5 h-5"}),p?"Generating...":"Export Data"]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),a.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),a.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),a.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})})]}),x&&y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),a.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),a.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),a.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[a.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&a.jsxs("p",{children:["Store ID: ",y.storeId]}),a.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const ume=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function U6({employeeId:e}){const[t,r]=U.useState(null),[n,s]=U.useState([]),[i,o]=U.useState(!0),[l,u]=U.useState("payouts"),[d,f]=U.useState(()=>{const T=new Date;return`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}`}),[p,m]=U.useState(null),[x,b]=U.useState(null);U.useEffect(()=>{y()},[e]);const y=async()=>{try{o(!0);const T=await So(),D=T.find(F=>F.employeeId===e);if(D){r(D);const P=(await jo()).filter(I=>I.employeeId===D.id);if(s(P),D.inchargeId){const I=T.find(B=>B.id===D.inchargeId);if(I&&(m(I),I.inchargeId)){const B=T.find(z=>z.id===I.inchargeId);B&&b(B)}}}}catch(T){console.error("Error loading employee data:",T)}finally{o(!1)}},N=(()=>{if(!d)return n;const[T,D]=d.split("-");return n.filter(F=>{const P=new Date(F.date);return P.getFullYear()===parseInt(T)&&P.getMonth()+1===parseInt(D)})})(),k=N.reduce((T,D)=>T+D.amount,0),j=(T,D)=>!T&&!D?"N/A":T?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[T]||T:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[D||""]||D||"N/A",A=T=>["January","February","March","April","May","June","July","August","September","October","November","December"][T],E=(()=>{const T=new Date,D=[];for(let F=0;F<12;F++){const P=new Date(T.getFullYear(),T.getMonth()-F,1),I=A(P.getMonth()),B=P.getFullYear().toString(),z=n.filter(ne=>{const Z=new Date(ne.date);return Z.getMonth()===P.getMonth()&&Z.getFullYear()===P.getFullYear()}),Y=z.reduce((ne,Z)=>ne+Z.amount,0),re=new Date(P.getFullYear(),P.getMonth()+1,5),X=T>=re;D.push({month:I,year:B,payouts:z,total:Y,isAvailable:X})}return D})(),_=()=>{const T=[],D=new Date;for(let F=0;F<12;F++){const P=new Date(D.getFullYear(),D.getMonth()-F,1),I=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`;T.push({value:I,label:P.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return T};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),a.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bi,{className:"w-4 h-4"}),a.jsx("span",{children:"My Payouts"})]})}),a.jsx("button",{onClick:()=>u("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"w-4 h-4"}),a.jsx("span",{children:"My Manager"})]})})]})]}),a.jsxs("div",{className:"p-6",children:[l==="payouts"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[a.jsx(wr,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),a.jsx("select",{value:d,onChange:T=>f(T.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:_().map(T=>a.jsx("option",{value:T.value,children:T.label},T.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),a.jsx(An,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",k.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N.length," payment",N.length!==1?"s":""]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),a.jsx(Qr,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",N.length>0?Math.round(k/N.length).toLocaleString():0]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),a.jsx(bi,{className:"w-5 h-5 text-purple-600"})]}),a.jsx("div",{className:"text-2xl text-gray-900",children:N.length}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),N.length===0?a.jsxs("div",{className:"p-12 text-center bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(bi,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),a.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):a.jsx("div",{className:"overflow-x-auto bg-white",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:N.sort((T,D)=>new Date(D.date).getTime()-new Date(T.date).getTime()).map(T=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(T.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",T.amount.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},T.id))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ei,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),a.jsx("div",{className:"p-6 bg-white",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((T,D)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${T.isAvailable&&T.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[T.month," ",T.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[T.payouts.length," payment",T.payouts.length!==1?"s":""]})]}),T.isAvailable&&T.payouts.length>0?a.jsxs("button",{onClick:()=>ume(t.name,t.employeeId,T.month,T.year,T.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(Ks,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:T.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",T.total.toLocaleString("en-IN")]})]})]},D))})})]})]}),l==="manager"&&a.jsx("div",{children:p?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:p.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:p.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(v0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(v0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Jd,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(X0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:j(p.designation,p.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(ra,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.employeeId||"N/A"})]})]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),a.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),x&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:x.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:x.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),x&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(v0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(v0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Jd,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(X0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:j(x.designation,x.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(ra,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.employeeId||"N/A"})]})]})]})]}),x&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),a.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ra,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),a.jsx("li",{children:" This dashboard shows only your personal payout history"}),a.jsx("li",{children:" For any discrepancies, please contact your manager"}),a.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function dme({onLogin:e,onSignup:t,error:r}){const[n,s]=U.useState(!1),[i,o]=U.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,u]=U.useState(!1),d=async f=>{f.preventDefault(),u(!0);try{n?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:a.jsx(rr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),a.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n?"Create your account":"Sign in to your account"})]}),r&&a.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),a.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:n,children:[a.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),a.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"})]})]}),i.role==="employee"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:n&&i.role==="employee"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),n&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?a.jsx("span",{children:"Processing..."}):a.jsxs(a.Fragment,{children:[n?a.jsx(Vs,{className:"w-5 h-5"}):a.jsx(n9,{className:"w-5 h-5"}),n?"Create Account":"Sign In"]})})]}),a.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:a.jsx("button",{onClick:()=>{s(!n),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function hme({user:e}){const[t,r]=U.useState(d(new Date)),[n,s]=U.useState([]),[i,o]=U.useState(!1),[l,u]=U.useState([]);U.useEffect(()=>{p(),m()},[t]);function d(T){const D=new Date(T),F=D.getDay(),P=D.getDate()-F+(F===0?-6:1);return new Date(D.setDate(P))}function f(T){const D=[];for(let F=0;F<7;F++){const P=new Date(T);P.setDate(T.getDate()+F),D.push(P)}return D}const p=async()=>{try{o(!0);const T=await ah(e.employeeId);s(T)}catch(T){console.error("Error loading timesheet:",T)}finally{o(!1)}},m=async()=>{try{const T=await mu(e.employeeId);u(T.filter(D=>D.status==="approved"||D.status==="pending"))}catch(T){console.error("Error loading leaves:",T)}},x=T=>{const D=T.toISOString().split("T")[0];return l.some(F=>F.leaveDate===D)},b=T=>{const D=T.toISOString().split("T")[0],F=n.find(P=>P.date===D);return F||{employeeId:e.employeeId,date:D,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:x(T)}},y=(T,D)=>{if(!T||!D)return 0;const[F,P]=T.split(":").map(Number),[I,B]=D.split(":").map(Number),z=F*60+P;return(I*60+B-z)/60},v=(T,D,F)=>{const P=T.toISOString().split("T")[0],I=n.find(Y=>Y.date===P);let B;I?B={...I,[D]:F}:B={employeeId:e.employeeId,date:P,startTime:D==="startTime"?F:"",endTime:D==="endTime"?F:"",totalHours:0,status:"pending",isLeave:!1},B.totalHours=y(B.startTime,B.endTime);const z=n.filter(Y=>Y.date!==P);s([...z,B])},N=async T=>{const D=b(T);if(!D.startTime||!D.endTime){alert("Please enter both start and end times");return}if(D.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(D),await p(),alert("Timesheet saved successfully")}catch(F){console.error("Error saving timesheet:",F),alert("Error saving timesheet")}finally{o(!1)}},k=async()=>{const D=f(t).map(F=>b(F)).filter(F=>F.startTime&&F.endTime);if(D.length===0){alert("Please enter timesheet data for at least one day");return}for(const F of D)if(F.totalHours<4){alert(`${F.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(D),await p(),alert("Week timesheet saved successfully")}catch(F){console.error("Error saving week timesheet:",F),alert("Error saving week timesheet")}finally{o(!1)}},j=()=>{const T=new Date(t);T.setDate(T.getDate()-7),r(T)},A=()=>{const T=new Date(t);T.setDate(T.getDate()+7),r(T)},S=async()=>{try{o(!0);const T=new Date(t);T.setDate(T.getDate()-7);const D=f(T),F=await ah(e.employeeId),P=D.map(Y=>{const re=Y.toISOString().split("T")[0];return F.find(X=>X.date===re)}).filter(Boolean);if(P.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const I=f(t),B=[];if(I.forEach((Y,re)=>{const X=Y.toISOString().split("T")[0],ne=P[re],Z=n.find(G=>G.date===X);!x(Y)&&ne&&ne.startTime&&ne.endTime&&(!Z||Z.status!=="approved")&&B.push({employeeId:e.employeeId,date:X,startTime:ne.startTime,endTime:ne.endTime,totalHours:ne.totalHours,status:"pending",isLeave:!1})}),B.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const z=[...n];B.forEach(Y=>{const re=z.findIndex(X=>X.date===Y.date);re>=0?z[re]=Y:z.push(Y)}),s(z),alert(`Copied ${B.length} day(s) from previous week! Don't forget to save.`)}catch(T){console.error("Error copying from previous week:",T),alert("Error copying data from previous week")}finally{o(!1)}},E=f(t),_=new Date(t);return _.setDate(_.getDate()+6),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),a.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(Ow,{className:"w-4 h-4"}),"Previous Week"]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[a.jsx(wr,{className:"w-5 h-5 text-purple-600"}),a.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),a.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",a.jsx(bo,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:a.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx($7,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:E.map((T,D)=>{const F=b(T),P=x(T);return a.jsxs("tr",{className:P?"bg-yellow-50":D%2===0?"bg-gray-50":"bg-white",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:T.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:T.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:P?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:F.startTime,onChange:I=>v(T,"startTime",I.target.value),disabled:F.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:P?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:F.endTime,onChange:I=>v(T,"endTime",I.target.value),disabled:F.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:P?a.jsx("span",{className:"text-yellow-700",children:"-"}):a.jsx("span",{className:`${F.totalHours>=4?"text-green-700":F.totalHours>0?"text-red-700":"text-gray-500"}`,children:F.totalHours>0?`${F.totalHours.toFixed(2)} hrs`:"-"})}),a.jsx("td",{className:"px-6 py-4",children:P?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Ir,{className:"w-4 h-4"}),"Leave"]}):F.status==="approved"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(er,{className:"w-4 h-4"}),"Approved"]}):F.status==="rejected"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Rejected"]}):F.startTime&&F.endTime?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Pn,{className:"w-4 h-4"}),"Pending"]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),a.jsx("td",{className:"px-6 py-4",children:!P&&F.status!=="approved"&&a.jsxs("button",{onClick:()=>N(T),disabled:i||!F.startTime||!F.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[a.jsx(gl,{className:"w-4 h-4"}),"Save"]})})]},D)})})]})})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:k,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[a.jsx(gl,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function fme({user:e}){const[t,r]=U.useState([]),[n,s]=U.useState(0),[i,o]=U.useState(!1),[l,u]=U.useState(!1),[d,f]=U.useState({leaveDate:"",reason:""});U.useEffect(()=>{p(),m()},[]);const p=async()=>{try{o(!0);const v=await mu(e.employeeId);r(v)}catch(v){console.error("Error loading leaves:",v)}finally{o(!1)}},m=async()=>{try{const v=await cD(e.employeeId,e.joiningDate||"2024-01-01");s(v)}catch(v){console.error("Error calculating leave balance:",v)}},x=async()=>{if(!d.leaveDate||!d.reason){alert("Please fill all fields");return}if(t.find(N=>N.leaveDate===d.leaveDate)){alert("Leave already applied for this date");return}if(n<=0){alert("Insufficient leave balance");return}try{o(!0);const N={employeeId:e.employeeId,leaveDate:d.leaveDate,reason:d.reason,status:"pending",appliedAt:new Date().toISOString()};await lD(N),await p(),await m(),f({leaveDate:"",reason:""}),u(!1),alert("Leave application submitted successfully")}catch(N){console.error("Error applying leave:",N),alert("Error applying leave")}finally{o(!1)}},b=v=>{switch(v){case"approved":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(er,{className:"w-4 h-4"}),"Approved"]});case"rejected":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Rejected"]});default:return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Pn,{className:"w-4 h-4"}),"Pending"]})}},y=[...t].sort((v,N)=>new Date(N.leaveDate).getTime()-new Date(v.leaveDate).getTime());return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),a.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg mb-2 opacity-90",children:"Available Leave Balance"}),a.jsx("div",{className:"text-5xl mb-2",children:n}),a.jsx("p",{className:"text-sm opacity-90",children:"leaves remaining (3 leaves/month, accumulates monthly, resets yearly)"})]}),a.jsx("div",{className:"bg-white/20 rounded-full p-6",children:a.jsx(wr,{className:"w-16 h-16"})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>u(!l),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[a.jsx(wo,{className:"w-5 h-5"}),"Apply for Leave"]})}),l&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),a.jsx("input",{type:"date",value:d.leaveDate,onChange:v=>f({...d,leaveDate:v.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),a.jsx("input",{type:"text",value:d.reason,onChange:v=>f({...d,reason:v.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x,disabled:i,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),a.jsx("button",{onClick:()=>u(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),i?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):y.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map((v,N)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(v.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:v.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:v.appliedAt?new Date(v.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:b(v.status)}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:v.approvedBy||"-"})]},N))})]})})]}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Leave Policy:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),a.jsx("li",{children:"Unused leaves carry forward within the year"}),a.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),a.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),a.jsx("li",{children:"All leave applications require manager approval"}),a.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function pme({managerId:e}){const[t,r]=U.useState(!1),[n,s]=U.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${Xs}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const u=`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",u);const d=await fetch(u,{headers:{Authorization:`Bearer ${Xs}`}});console.log("Manager route status:",d.status);const f=await d.text();console.log("Manager route response:",f),o.managerRoute={url:u,status:d.status,ok:d.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(J0,{className:"w-6 h-6 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),a.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?a.jsxs(a.Fragment,{children:[a.jsx(e9,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):a.jsxs(a.Fragment,{children:[a.jsx(J0,{className:"w-4 h-4"}),"Test Routes"]})}),n&&a.jsxs("div",{className:"mt-4 space-y-3",children:[n.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",n.error]})}),n.allEmployees&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.allEmployees.ok?a.jsx(er,{className:"w-4 h-4 text-green-600"}):a.jsx(Ms,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",n.allEmployees.status]})]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.allEmployees.data,null,2)})]}),n.managerRoute&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.managerRoute.ok?a.jsx(er,{className:"w-4 h-4 text-green-600"}):a.jsx(Ms,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",n.managerRoute.status]})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",n.managerRoute.url]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.managerRoute.data,null,2)})]})]})]})}function mme({managerId:e,role:t,selectedStoreId:r,isIncharge:n=!1,inchargeDesignation:s=null}){const[i,o]=U.useState([]),[l,u]=U.useState(""),[d,f]=U.useState([]),[p,m]=U.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",n),console.log("ApproveTimesheets: inchargeDesignation =",s);const x=U.useMemo(()=>{let E=i;return r&&(E=E.filter(_=>_.storeId===r||_.storeId===null||_.storeId===void 0)),n&&e&&(E=E.filter(_=>_.inchargeId===e)),E},[i,r,n,e]);U.useEffect(()=>{b()},[]),U.useEffect(()=>{x.length>0&&!x.find(E=>E.employeeId===l)?u(x[0].employeeId):x.length===0&&u("")},[x]),U.useEffect(()=>{l&&y()},[l]);const b=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",n);let E;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),E=await Cm(e),console.log("ApproveTimesheets: Received managers:",E),E.length>0&&(console.log(" MANAGERS RETURNED:"),E.forEach(_=>{console.log(`  - ${_.employeeId} (${_.name}) - clusterHeadId: ${_.clusterHeadId}, role: ${_.role}`)}))):n?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),E=await K2(e),console.log("ApproveTimesheets: Received employees under incharge:",E)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),E=await xl(e),console.log("ApproveTimesheets: Received employees:",E)),o(E),E.length>0?u(E[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(E){console.error("Error loading employees:",E)}},y=async()=>{try{m(!0);const E=await ah(l);f(E.filter(_=>_.status==="pending"))}catch(E){console.error("Error loading timesheets:",E)}finally{m(!1)}},v=async E=>{try{m(!0),await(void 0)(E,e),await y(),alert("Timesheet approved successfully")}catch(_){console.error("Error approving timesheet:",_),alert("Error approving timesheet")}finally{m(!1)}},N=async E=>{const _=prompt("Enter rejection reason:");if(_)try{m(!0),await(void 0)(E,e,_),await y(),alert("Timesheet rejected")}catch(T){console.error("Error rejecting timesheet:",T),alert("Error rejecting timesheet")}finally{m(!1)}},k=d.length,j=i.find(E=>E.employeeId===l),A=t==="cluster_head"?"Operations Manager":"Employee",S=t==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",A," Timesheets"]}),a.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",S," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&a.jsx(pme,{managerId:e}),k>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[k," timesheet",k>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",A]}),a.jsxs("select",{value:l,onChange:E=>u(E.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",A," --"]}),x.map(E=>a.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]}),t==="cluster_head"&&i.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),a.jsx("div",{className:"space-y-1",children:i.map(E=>a.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:E.employeeId}),a.jsx("span",{children:E.name}),a.jsxs("span",{className:"text-blue-600",children:["(",E.role,")"]})]},E.employeeId))}),a.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",a.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),j&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(ra,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:j.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",j.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",j.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),p?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):d.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Pn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((E,_)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(E.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(E.date).toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:E.startTime}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:E.endTime}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`${E.totalHours>=8?"text-green-700":E.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[E.totalHours.toFixed(2)," hrs"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Pn,{className:"w-4 h-4"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>v(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(er,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>N(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Reject"]})]})})]},_))})]})})]})]})})}function gme({managerId:e,managerName:t,role:r,selectedStoreId:n,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=U.useState([]),[u,d]=U.useState(""),[f,p]=U.useState([]),[m,x]=U.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const b=U.useMemo(()=>{let _=o;return n&&(_=_.filter(T=>T.storeId===n||T.storeId===null||T.storeId===void 0)),s&&e&&(_=_.filter(T=>T.inchargeId===e)),_},[o,n,s,e]);U.useEffect(()=>{y()},[]),U.useEffect(()=>{b.length>0&&!b.find(_=>_.employeeId===u)?d(b[0].employeeId):b.length===0&&d("")},[b]),U.useEffect(()=>{u&&v()},[u]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let _;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),_=await Cm(e),console.log("ApproveLeaves: Received managers:",_)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),_=await K2(e),console.log("ApproveLeaves: Received employees under incharge:",_)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),_=await xl(e),console.log("ApproveLeaves: Received employees:",_)),l(_),_.length>0?d(_[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(_){console.error("Error loading employees:",_)}},v=async()=>{try{x(!0);const _=await mu(u);p(_.filter(T=>T.status==="pending"))}catch(_){console.error("Error loading leaves:",_)}finally{x(!1)}},N=async _=>{try{x(!0),console.log("Attempting to approve leave:",_),console.log("api.approveLeave function exists?",typeof Vw),console.log("Available API functions:",Object.keys(MH).filter(T=>T.includes("Leave"))),await Vw(_,e,t),await v(),alert("Leave approved successfully")}catch(T){console.error("Error approving leave:",T),alert("Error approving leave")}finally{x(!1)}},k=async _=>{const T=prompt("Enter rejection reason:");if(T)try{x(!0),await uD(_,e,t,T),await v(),alert("Leave rejected")}catch(D){console.error("Error rejecting leave:",D),alert("Error rejecting leave")}finally{x(!1)}},j=f.length,A=o.find(_=>_.employeeId===u),S=r==="cluster_head"?"Operations Manager":"Employee",E=r==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",S," Leaves"]}),a.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),j>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[j," leave application",j>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",E," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",S]}),a.jsxs("select",{value:u,onChange:_=>d(_.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",S," --"]}),b.map(_=>a.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),A&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(ra,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:A.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",A.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",A.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),m?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((_,T)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(_.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:_.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:_.appliedAt?new Date(_.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>N(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(er,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>k(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(Ms,{className:"w-4 h-4"}),"Reject"]})]})})]},T))})]})})]})]})})}function xme({managerId:e,role:t}){const[r,n]=U.useState([]),[s,i]=U.useState([]),[o,l]=U.useState(!1),[u,d]=U.useState({});U.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const p=await xl(e);n(p);const m={};for(const x of p){const[b,y]=await Promise.all([ah(x.employeeId),mu(x.employeeId)]);m[x.employeeId]={pendingTimesheets:b.filter(v=>v.status==="pending").length,pendingLeaves:y.filter(v=>v.status==="pending").length,approvedTimesheets:b.filter(v=>v.status==="approved").length,totalLeaves:y.filter(v=>v.status==="approved").length}}d(m)}else{const p=await Cm(e);i(p);const m={};for(const x of p){const b=await xl(x.employeeId);m[x.employeeId]={employeeCount:b.length,...x.stats}}d(m)}}catch(p){if(p instanceof Error&&(p.message==="Not authenticated"||p.message==="Unauthorized"))return;console.error("Error loading data:",p)}finally{l(!1)}};return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),a.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(yn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),a.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Pn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingTimesheets||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(wr,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingLeaves||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(p=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg text-gray-900",children:p.name}),a.jsx("p",{className:"text-sm text-gray-600",children:p.employeeId})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Jd,{className:"w-4 h-4"}),p.email]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(wr,{className:"w-4 h-4"}),"Joined: ",p.joiningDate?new Date(p.joiningDate).toLocaleDateString():"N/A"]})]}),u[p.employeeId]&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),a.jsx("div",{className:"text-xl text-yellow-700",children:u[p.employeeId].pendingTimesheets})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),a.jsx("div",{className:"text-xl text-pink-700",children:u[p.employeeId].pendingLeaves})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),a.jsx("div",{className:"text-xl text-green-700",children:u[p.employeeId].approvedTimesheets})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),a.jsx("div",{className:"text-xl text-blue-700",children:u[p.employeeId].totalLeaves})]})]}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),a.jsx("div",{className:"text-2xl text-purple-700",children:u[p.employeeId].employeeCount})]})})})})]},p.employeeId))}),(t==="manager"?r:s).length===0&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ra,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function J8({employee:e,onClose:t,onSave:r,clusterHeadId:n}){const[s,i]=U.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=U.useState(!1),[u,d]=U.useState([]);U.useEffect(()=>{f()},[]);const f=async()=>{try{const m=await Cl();d(m)}catch(m){console.error("Error loading stores:",m)}},p=async()=>{try{l(!0);const m={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(m.clusterHeadId=s.clusterHeadId||null),await Am(e.employeeId,m),alert("Employee details updated successfully!"),r(),t()}catch(m){console.error("Error updating employee:",m),alert("Failed to update employee details")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:a.jsx(ra,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),a.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(wn,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(ra,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Name:"}),a.jsx("span",{children:e.name})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(Jd,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Email:"}),a.jsx("span",{children:e.email})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(X0,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),a.jsxs("select",{value:s.role,onChange:m=>i({...s,role:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(yn,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),a.jsx("input",{type:"text",value:s.clusterHeadId,onChange:m=>i({...s,clusterHeadId:m.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(X0,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),a.jsxs("select",{value:s.designation||"",onChange:m=>i({...s,designation:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Designation"}),a.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge"}),a.jsx("option",{value:"store_ops",children:"Store Operations"}),a.jsx("option",{value:"production_ops",children:"Production Operations"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(vo,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),a.jsxs("select",{value:s.storeId||"",onChange:m=>i({...s,storeId:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Store"}),u.map(m=>a.jsx("option",{value:m.id,children:m.name},m.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(vo,{className:"w-4 h-4 inline mr-2"}),"Department"]}),a.jsxs("select",{value:s.department||"",onChange:m=>i({...s,department:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Department"}),a.jsx("option",{value:"store_operations",children:"Store Operations"}),a.jsx("option",{value:"production",children:"Production"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),a.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),a.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[a.jsx(gl,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function yme({clusterHeadId:e}){const[t,r]=U.useState([]),[n,s]=U.useState([]),[i,o]=U.useState([]),[l,u]=U.useState(!1),[d,f]=U.useState(null),[p,m]=U.useState({}),[x,b]=U.useState(null),[y,v]=U.useState(null);U.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0);const F=await os();console.log("All employees loaded:",F),console.log("Current cluster head ID:",e);const P=F.filter(Y=>(Y.role==="employee"||Y.role==="manager")&&Y.role!=="cluster_head");r(P),console.log("Filtered employees and managers:",P);const I=F.filter(Y=>Y.role==="manager"&&Y.clusterHeadId===e);s(I);const B=F.filter(Y=>Y.role==="cluster_head");o(B),console.log("Available managers (role=manager, clusterHeadId="+e+"):",I),console.log("Available cluster heads:",B);const z={};P.forEach(Y=>{Y.managerId&&(z[Y.employeeId]=Y.managerId)}),m(z)}catch(F){if(F instanceof Error&&(F.message==="Not authenticated"||F.message==="Unauthorized"))return;console.error("Error loading data:",F),alert("Failed to load data")}finally{u(!1)}},k=(F,P)=>{m(I=>({...I,[F]:P}))},j=async F=>{try{f(F);const P=p[F];if(!P){alert("Please select a manager");return}await Tm(F,P),alert("Manager assigned successfully!"),await N()}catch(P){console.error("Error assigning manager:",P),alert("Failed to assign manager")}finally{f(null)}},A=async(F,P)=>{if(confirm(`Are you sure you want to promote ${P} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{b(F),await Am(F,{role:"manager",clusterHeadId:e}),alert(`${P} has been promoted to Manager!`),await N()}catch(I){console.error("Error promoting to manager:",I),alert("Failed to promote employee to manager")}finally{b(null)}},S=t.filter(F=>!F.managerId),E=t.filter(F=>F.managerId),_=F=>{if(!F)return"Unassigned";const P=n.find(B=>B.employeeId===F);if(P)return P.name;const I=i.find(B=>B.employeeId===F);return I?`${I.name} (Cluster Head)`:"Unknown Manager"},T=F=>{const P=[];return F.role==="manager"?(P.push(...i),P.push(...n.filter(I=>I.employeeId!==F.employeeId))):P.push(...n.filter(I=>I.employeeId!==F.employeeId)),P},D=F=>{if(!F)return a.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const P={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:P[F]||F})};return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(yn,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(er,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(Ir,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]})})]}),n.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx(Ir,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),a.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):a.jsxs(a.Fragment,{children:[S.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[a.jsx(Ir,{className:"w-5 h-5"}),"Unassigned Employees (",S.length,")"]}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.name}),a.jsx("div",{className:"text-sm text-gray-500",children:F.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:F.employeeId}),F.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),F.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D(F.designation)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[F.employeeId]||"",onChange:P=>k(F.employeeId,P.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),T(F).map(P=>a.jsxs("option",{value:P.employeeId,children:[P.name," (",P.employeeId,")"]},P.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>j(F.employeeId),disabled:!p[F.employeeId]||d===F.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(gl,{className:"w-4 h-4"}),d===F.employeeId?"Saving...":"Assign"]}),F.role==="employee"&&a.jsxs("button",{onClick:()=>A(F.employeeId,F.name),disabled:x===F.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(iE,{className:"w-4 h-4"}),x===F.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>v(F),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Dw,{className:"w-4 h-4"}),"Edit"]})]})})]},F.employeeId))})]})})]}),E.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[a.jsx(er,{className:"w-5 h-5"}),"Assigned Employees (",E.length,")"]}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.name}),a.jsx("div",{className:"text-sm text-gray-500",children:F.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:F.employeeId}),F.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),F.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D(F.designation)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:_(F.managerId)}),F.managerId&&a.jsx("div",{className:"text-xs text-gray-500",children:F.managerId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[F.employeeId]||F.managerId||"",onChange:P=>k(F.employeeId,P.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),T(F).map(P=>a.jsxs("option",{value:P.employeeId,children:[P.name," (",P.employeeId,")"]},P.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>j(F.employeeId),disabled:!p[F.employeeId]||p[F.employeeId]===F.managerId||d===F.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(gl,{className:"w-4 h-4"}),d===F.employeeId?"Saving...":"Update"]}),F.role==="employee"&&a.jsxs("button",{onClick:()=>A(F.employeeId,F.name),disabled:x===F.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(iE,{className:"w-4 h-4"}),x===F.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>v(F),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Dw,{className:"w-4 h-4"}),"Edit"]})]})})]},F.employeeId))})]})})]}),t.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[a.jsx(yn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),a.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&a.jsx(J8,{employee:y,onClose:()=>v(null),onSave:N,clusterHeadId:e})]})}function H6({currentUser:e}){const[t,r]=U.useState([]),[n,s]=U.useState(!0);U.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await os(),p=f.find(N=>N.employeeId===e.employeeId);if(!p){s(!1);return}console.log("[Hierarchy Debug] Current user record:",p);const m=[p];let x=p,b=0;const y=10;for(;x&&b<y;){const N=x.clusterHeadId||x.managerId||x.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",N,"for",x.name),!N)break;const k=f.find(j=>j.employeeId===N);if(console.log("[Hierarchy Debug] Found superior:",k),k){if(m.some(j=>j.employeeId===k.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(m.push(k),x=k,k.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;b++}const v=m.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",v),r(v)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2),l=(f,p)=>!f&&!p?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[p||""]||p||"N/A",u=(f,p)=>p?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",d=(f,p)=>p?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return n?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?a.jsx("div",{className:"flex flex-col items-center",children:t.map((f,p)=>{const m=f.employeeId===e.employeeId,x=p===t.length-1;return a.jsxs("div",{className:"w-full flex flex-col items-center",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-block",children:[a.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${u(f,m)}`,children:a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),a.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${d(f,m)}`,children:[a.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),a.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),m&&a.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!x&&a.jsxs("div",{className:"flex flex-col items-center my-6",children:[a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsx(jm,{className:"w-6 h-6 text-gray-400"}),a.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(vo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function Q8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:n=null}){const[s,i]=U.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=U.useState(0),[u,d]=U.useState(!1),f=e.role==="employee",p=e.role==="manager",m=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(p||m)&&!e.employeeId&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),a.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"You won't be able to see employees assigned to you"}),a.jsx("li",{children:"Approval workflows won't work properly"}),a.jsx("li",{children:"Employees you create won't be linked to your account"})]}),a.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[a.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),a.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Pn,{className:"w-4 h-4"}),"Update Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(wr,{className:"w-4 h-4"}),"Apply for Leave"]}),a.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(nI,{className:"w-4 h-4"}),"Hierarchy"]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Pn,{className:"w-4 h-4"}),"My Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(wr,{className:"w-4 h-4"}),"My Leave"]}),a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve Leaves"]}),a.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(yn,{className:"w-4 h-4"}),"My Team"]})]}),m&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fa,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),a.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(yn,{className:"w-4 h-4"}),"Manager Overview"]}),a.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(H9,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),a.jsxs("div",{children:[s==="timesheet"&&a.jsx(hme,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&a.jsx(fme,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(p||m||r)&&a.jsx(mme,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="approve-leave"&&(p||m||r)&&a.jsx(gme,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="team"&&p&&a.jsx(xme,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&a.jsx(H6,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&m&&a.jsx(H6,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&m&&a.jsx(yme,{clusterHeadId:e.employeeId||""},o)]})]})}function Z8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,n=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return a.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(bo,{className:"w-5 h-5 text-gray-400"}),a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Es,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:n(e.designation)})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&a.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&a.jsx("div",{className:"space-y-3",children:e.managers.map(s=>a.jsx(Z8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[a.jsx(bo,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(ra,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function vme({userRole:e,selectedStoreId:t,accessToken:r}){const[n,s]=U.useState([]),[i,o]=U.useState([]),[l,u]=U.useState([]),[d,f]=U.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[p,m]=U.useState(!1),[x,b]=U.useState(!1),[y,v]=U.useState(!1),[N,k]=U.useState(null),[j,A]=U.useState(null),[S,E]=U.useState([]),[_,T]=U.useState([]);U.useEffect(()=>{D()},[t]);const D=async()=>{if(!r){console.error("No access token available");return}try{m(!0);const I=await iD(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:I.hierarchy?.length||0,unassignedManagersCount:I.unassignedManagers?.length||0,unassignedEmployeesCount:I.unassignedEmployees?.length||0,stats:I.stats,selectedStoreId:t}),s(I.hierarchy||[]),o(I.unassignedManagers||[]),u(I.unassignedEmployees||[]),f(I.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const Y=await BD(r);E(Y)}catch{console.log("User not authorized to view all cluster heads")}const z=(await os()).filter(Y=>Y.role==="manager");T(z)}catch(I){console.error("Error loading hierarchy:",I),I instanceof Error&&!I.message.includes("JWT")&&!I.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{m(!1)}},F=async(I,B)=>{try{await(void 0)(I,B),alert("Cluster head assigned successfully!"),b(!1),k(null),await D()}catch(z){console.error("Error assigning cluster head:",z),alert("Failed to assign cluster head")}},P=async(I,B)=>{try{await Tm(I,B),alert("Manager assigned successfully!"),v(!1),A(null),await D()}catch(z){console.error("Error assigning manager:",z),alert("Failed to assign manager")}};return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(vo,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalClusterHeads}),a.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Es,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalManagers}),a.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(yn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalEmployees}),a.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),a.jsx(nI,{className:"w-6 h-6 text-purple-600"})]}),n.length===0&&i.length===0&&l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(vo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsx("div",{className:"space-y-6 mb-6",children:n.map(I=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:a.jsx(vo,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:I.name}),a.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[I.employeeId,"  ",I.email]})]})]})}),I.managers&&I.managers.length>0&&a.jsx("div",{className:"p-4 bg-gray-50",children:I.managers.map(B=>a.jsx(Z8,{manager:B},B.employeeId))})]},I.employeeId))}),i.length>0&&i.some(I=>I.employees&&I.employees.length>0||I.incharges&&I.incharges.length>0)&&a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(I=>I.employees&&I.employees.length>0||I.incharges&&I.incharges.length>0).map(I=>a.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Es,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:I.name}),a.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[I.employeeId,"  ",I.email]})]})]})}),(I.incharges||I.employees)&&a.jsxs("div",{className:"p-4 space-y-4",children:[I.incharges&&I.incharges.length>0&&a.jsx("div",{className:"space-y-3",children:I.incharges.map(B=>a.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bo,{className:"w-4 h-4 text-indigo-400"}),a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Es,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-900",children:B.name}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:B.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:B.employeeId})]})]})}),B.employees&&B.employees.length>0&&a.jsx("div",{className:"p-3",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:B.employees.map(z=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[a.jsx(bo,{className:"w-3 h-3 text-gray-300"}),a.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:a.jsx(ra,{className:"w-3 h-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-900 truncate",children:z.name}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:z.employeeId})]})]},z.employeeId))})})]},B.employeeId))}),I.employees&&I.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:I.employees.map(B=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[a.jsx(bo,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(ra,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:B.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:B.employeeId})]})]},B.employeeId))})]})]})]},I.employeeId))]})]})]}),(i.length>0||l.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),a.jsx("div",{className:"space-y-3",children:i.map(I=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(Es,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:I.name}),a.jsx("div",{className:"text-sm text-gray-600",children:I.employeeId})]})]})}),e==="cluster_head"&&a.jsx("button",{onClick:()=>{k(I),b(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},I.employeeId))})]}),l.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),a.jsx("div",{className:"space-y-3",children:l.map(I=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(ra,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:I.name}),a.jsx("div",{className:"text-sm text-gray-600",children:I.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&a.jsx("button",{onClick:()=>{A(I),v(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},I.employeeId))})]})]}),x&&N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",a.jsx("strong",{children:N.name})," (",N.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),a.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),S.map(I=>a.jsxs("option",{value:I.employeeId,children:[I.name," (",I.employeeId,")"]},I.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const I=document.getElementById("clusterHeadSelect");I.value?F(N.employeeId,I.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{b(!1),k(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",a.jsx("strong",{children:j.name})," (",j.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),a.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),_.map(I=>a.jsxs("option",{value:I.employeeId,children:[I.name," (",I.employeeId,")"]},I.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const I=document.getElementById("managerSelect");I.value?P(j.employeeId,I.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{v(!1),A(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function bme({user:e,selectedStoreId:t}){const[r,n]=U.useState("employees"),[s,i]=U.useState([]),[o,l]=U.useState([]),[u,d]=U.useState(!1),[f,p]=U.useState([]),[m,x]=U.useState(!1),[b,y]=U.useState(!1),[v,N]=U.useState(!1),[k,j]=U.useState(null),[A,S]=U.useState(""),[E,_]=U.useState(null),[T,D]=U.useState(!1),[F,P]=U.useState(!1),[I,B]=U.useState(null),[z,Y]=U.useState(""),[re,X]=U.useState(""),[ne,Z]=U.useState(!1),[me,G]=U.useState(null),[L,ee]=U.useState(""),[te,J]=U.useState("manager"),[he,Se]=U.useState([]),[Oe,pe]=U.useState([]),[xe,Fe]=U.useState(!1),[O,be]=U.useState(null),[De,qe]=U.useState("employee"),[rt,Be]=U.useState(!1),[Je,Xt]=U.useState(null),[Ce,Me]=U.useState(""),[Pt,We]=U.useState(!1),[ut,nt]=U.useState(null),[qt,ct]=U.useState(!1),[dt,ur]=U.useState(null),[xt,Qt]=U.useState("none"),[Nr,or]=U.useState(!1),[kr,_r]=U.useState(null),[nr,Mr]=U.useState(""),[ht,Er]=U.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const Ne=e.role==="manager",ze=e.role==="cluster_head";U.useEffect(()=>{ht.role==="cluster_head"&&Er(R=>({...R,employmentType:"fulltime"}))},[ht.role]),U.useEffect(()=>{tt(),ze&&it()},[t]);const it=async()=>{try{const R=await Cl();p(R)}catch(R){if(R instanceof Error&&(R.message==="Not authenticated"||R.message==="Unauthorized"))return;console.error("Error loading stores:",R)}},tt=async()=>{try{x(!0);let R;Ne&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),R=await xl(e.employeeId),console.log(" Loaded employees:",R)):ze?(console.log(" Loading all employees for cluster head"),R=await os(),t&&(R=R.filter(q=>q.storeId===t||q.storeId===null||q.storeId===void 0))):R=await os(),i(R);try{const q=await GI();l(q)}catch(q){console.error("Error loading archived employees:",q)}}catch(R){console.error("Error loading employees:",R),alert("Failed to load employees")}finally{x(!1)}},It=async()=>{try{const q=(await os()).map(le=>{const ce=le.employeeId.match(/BM(\d+)/);return ce?parseInt(ce[1]):0}).filter(le=>le>0);return`BM${(q.length>0?Math.max(...q)+1:1).toString().padStart(3,"0")}`}catch(R){return console.error("Error generating employee ID:",R),`BM${Date.now().toString().slice(-3)}`}},Ue=(R,q)=>{const K=R.target.files?.[0];if(!K)return;const le=new FileReader;le.onloadend=()=>{const ce=le.result;q==="front"?Y(ce):X(ce)},le.readAsDataURL(K)},St=async()=>{if(!ht.name||!ht.email||!ht.password){alert("Please fill all required fields");return}if(Ne&&ht.role==="manager"){alert("Only Cluster Heads can create managers");return}try{x(!0);const R=await It(),q={employeeId:R,name:ht.name,email:ht.email,password:ht.password,role:ht.role,employmentType:ht.employmentType,joiningDate:ht.joiningDate,dob:ht.dob,phone:ht.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};ht.role==="employee"?(q.managerId=e.employeeId,Ne&&e.storeId&&(q.storeId=e.storeId)):ht.role==="manager"&&(q.clusterHeadId=e.employeeId,ht.storeId&&(q.storeId=ht.storeId)),z&&(q.aadharFront=z),re&&(q.aadharBack=re),await YI(q),alert(` Employee created successfully!
      
Employee ID: ${R}
Name: ${ht.name}
Email: ${ht.email}
Password: ${ht.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),Er({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),Y(""),X(""),y(!1),await tt()}catch(R){console.error("Error creating employee:",R),alert("Failed to create employee. Email might already be in use.")}finally{x(!1)}},Kt=async R=>{if(confirm("Are you sure you want to delete this employee?"))try{x(!0),await XI(R),alert("Employee deleted successfully"),await tt()}catch(q){console.error("Error deleting employee:",q),alert("Failed to delete employee")}finally{x(!1)}},Qe=R=>{j(R),N(!0)},Ie=async()=>{if(!kr||!nr){alert("Please enter a new password");return}try{x(!0);const R=await QI(kr.employeeId,nr);alert(` Password reset successfully!

Employee: ${R.credentials.employeeId} - ${kr.name}
Email: ${R.credentials.email}
New Password: ${R.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),or(!1),_r(null),Mr("")}catch(R){console.error("Error resetting password:",R),alert("Failed to reset password: "+(R instanceof Error?R.message:"Unknown error"))}finally{x(!1)}},wt=async()=>{if(k)try{x(!0);const R={name:k.name,email:k.email,role:k.role,employmentType:k.employmentType,joiningDate:k.joiningDate,dob:k.dob,phone:k.phone,status:k.status};console.log("Updating employee with data:",R),await Am(k.employeeId,R),alert("Employee updated successfully!"),N(!1),j(null),await tt()}catch(R){console.error("Error updating employee - full error:",R),console.error("Error updating employee - error message:",R instanceof Error?R.message:String(R)),alert(`Failed to update employee: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},ft=()=>{const R=s.length,q=s.filter(fe=>fe.role==="manager").length,K=s.filter(fe=>fe.employmentType==="fulltime").length,le=s.filter(fe=>fe.employmentType==="contract").length,ce=s.filter(fe=>fe.status==="active").length;return{total:R,managers:q,fulltime:K,contract:le,active:ce}},je=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{x(!0);const R=await ZI();B(R),P(!0),await tt()}catch(R){console.error("Error running migration:",R),alert(`Migration failed: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},ke=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{x(!0);const R=await aD();alert(` Successfully synced ${R.synced} employee designations!

${R.skipped>0?`Skipped ${R.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await tt()}catch(R){console.error("Error syncing designations:",R),alert(`Sync failed: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},Le=async R=>{try{const q=await os(),K=q.filter(ce=>ce.role==="manager"),le=q.filter(ce=>ce.designation==="store_incharge"||ce.designation==="production_incharge");Se(K),pe(le),G(R),R.inchargeId?(J("incharge"),ee(R.inchargeId)):(J("manager"),ee(R.managerId||"")),Z(!0)}catch(q){console.error("Error loading managers:",q),alert("Failed to load managers")}},jt=async()=>{if(!me||!L){alert("Please select a supervisor");return}try{x(!0),te==="incharge"?(await nD(me.employeeId,L),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await Tm(me.employeeId,L),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),Z(!1),G(null),ee(""),await tt()}catch(R){console.error("Error assigning supervisor:",R),alert(`Failed to assign supervisor: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},W=R=>{if(!R)return"No manager assigned";const q=s.find(K=>K.employeeId===R);return q?`${q.name} (${q.employeeId})`:`Manager ${R}`},ae=R=>{be(R),qe(R.role),Fe(!0)},Q=async()=>{if(O)try{x(!0),await eD(O.employeeId,De),alert(`Role updated successfully from "${O.role}" to "${De}"!`),Fe(!1),be(null),await tt()}catch(R){console.error("Error updating role:",R),alert(`Failed to update role: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},se=R=>{Xt(R),Me(R.storeId||""),Be(!0)},ie=async()=>{if(!(!Je||!Ce))try{x(!0),await tD(Je.employeeId,Ce);const R=f.find(q=>q.id===Ce)?.name||Ce;alert(`Store updated successfully! ${Je.name} is now assigned to ${R}`),Be(!1),Xt(null),await tt()}catch(R){console.error("Error updating store:",R),alert(`Failed to update store: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},oe=R=>{ur(R),R.designation==="store_incharge"?Qt("store_incharge"):R.designation==="production_incharge"?Qt("production_incharge"):Qt("none"),ct(!0)},_e=async()=>{if(dt)try{x(!0);const R=xt==="none"?null:xt,q=xt==="store_incharge"?"store_operations":xt==="production_incharge"?"production":null;await rD(dt.employeeId,R,q);const K=xt==="store_incharge"?"Store Incharge":xt==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${dt.name} is now ${K}`),ct(!1),ur(null),await tt()}catch(R){console.error("Error updating designation:",R),alert(`Failed to update designation: ${R instanceof Error?R.message:String(R)}`)}finally{x(!1)}},H=ft();return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),a.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl text-gray-900",children:H.total})]}),a.jsx(yn,{className:"w-8 h-8 text-purple-500"})]})}),ze&&a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),a.jsx("p",{className:"text-2xl text-gray-900",children:H.managers})]}),a.jsx(yn,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),a.jsx("p",{className:"text-2xl text-gray-900",children:H.fulltime})]}),a.jsx(Ei,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),a.jsx("p",{className:"text-2xl text-gray-900",children:H.contract})]}),a.jsx(Ei,{className:"w-8 h-8 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),a.jsx("p",{className:"text-2xl text-gray-900",children:H.active})]}),a.jsx(yn,{className:"w-8 h-8 text-pink-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>n("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(yn,{className:"w-5 h-5"}),a.jsx("span",{children:"Employee List"})]})}),a.jsx("button",{onClick:()=>n("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(yn,{className:"w-5 h-5"}),a.jsx("span",{children:"Hierarchy"})]})}),a.jsx("button",{onClick:()=>n("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(An,{className:"w-5 h-5"}),a.jsx("span",{children:"Payroll"})]})}),a.jsx("button",{onClick:()=>n("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Pn,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?a.jsx(vme,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?a.jsx(gF,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?a.jsx(Q8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(y9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:A,onChange:R=>S(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(Vs,{className:"w-5 h-5"}),"Add ",ze?"Employee/Manager":"Employee"]}),ze&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(G7,{className:"w-5 h-5"}),"Create Login Accounts"]}),a.jsxs("button",{onClick:je,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[a.jsx(Z0,{className:"w-5 h-5"}),"Migrate Stores"]}),a.jsxs("button",{onClick:ke,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[a.jsx(Es,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsxs("h2",{className:"text-2xl",children:["Create New ",ze?"Employee/Manager":"Employee"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[ze&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:ht.role,onChange:R=>Er({...ht,role:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:ht.employmentType,onChange:R=>Er({...ht,employmentType:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:ht.role==="cluster_head",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),ht.role!=="cluster_head"&&a.jsx("option",{value:"contract",children:"Contract"})]}),ht.role==="cluster_head"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:ht.name,onChange:R=>Er({...ht,name:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:ht.email,onChange:R=>Er({...ht,email:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:ht.password,onChange:R=>Er({...ht,password:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:ht.dob,onChange:R=>Er({...ht,dob:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:ht.phone,onChange:R=>Er({...ht,phone:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:ht.joiningDate,onChange:R=>Er({...ht,joiningDate:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),ze&&ht.role==="manager"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),a.jsxs("select",{value:ht.storeId,onChange:R=>Er({...ht,storeId:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(R=>a.jsxs("option",{value:R.id,children:[R.name," ",R.location&&`- ${R.location}`]},R.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),Ne&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),ht.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(jd,{className:"w-5 h-5"}),z?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:R=>Ue(R,"front"),className:"hidden"})]}),z&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(jd,{className:"w-5 h-5"}),re?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:R=>Ue(R,"back"),className:"hidden"})]}),re&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:St,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Creating...":"Create Employee"}),a.jsx("button",{onClick:()=>{y(!1),Er({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),Y(""),X("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),v&&k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[ze&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:k.role,onChange:R=>j({...k,role:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:k.employmentType,onChange:R=>j({...k,employmentType:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),a.jsx("option",{value:"contract",children:"Contract"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:k.name,onChange:R=>j({...k,name:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:k.email,onChange:R=>j({...k,email:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:k.dob,onChange:R=>j({...k,dob:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:k.phone,onChange:R=>j({...k,phone:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:k.joiningDate,onChange:R=>j({...k,joiningDate:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),k.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(jd,{className:"w-5 h-5"}),z?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:R=>Ue(R,"front"),className:"hidden"})]}),z&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(jd,{className:"w-5 h-5"}),re?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:R=>Ue(R,"back"),className:"hidden"})]}),re&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:wt,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Employee"}),a.jsx("button",{onClick:()=>{N(!1),j(null),Y(""),X("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),ze&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),ze&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?a.jsx("tr",{children:a.jsx("td",{colSpan:ze?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const R=s.filter(q=>A===""||q.employeeId.toLowerCase().includes(A.toLowerCase())||q.name.toLowerCase().includes(A.toLowerCase())||q.email.toLowerCase().includes(A.toLowerCase()));return R.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:ze?10:8,className:"px-6 py-8 text-center text-gray-500",children:A?"No employees found matching your search":"No employees found"})}):R.map(q=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:q.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:q.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:q.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${q.role==="manager"?"bg-blue-100 text-blue-700":q.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:q.role==="manager"?"Manager":q.role==="cluster_head"?"Cluster Head":"Employee"})}),ze&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.storeId?a.jsx("span",{className:"text-sm text-gray-900",children:f.find(K=>K.id===q.storeId)?.name||q.storeId}):a.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),ze&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.designation==="operations_incharge"?a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):q.designation==="store_incharge"?a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):q.designation==="production_incharge"?a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):q.designation==="store_ops"?a.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):q.designation==="production_ops"?a.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):a.jsx("span",{className:"text-sm text-gray-400",children:""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${q.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:q.employmentType==="fulltime"?"Full-Time":"Contract"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(q.joiningDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${q.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:q.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_(q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(Ei,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>Kt(q.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(is,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>Qe(q),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:a.jsx(ji,{className:"w-5 h-5"})}),ze&&a.jsx("button",{onClick:()=>{nt(q),We(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:a.jsx(Es,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{_r(q),or(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:a.jsx(X7,{className:"w-5 h-5"})}),ze&&q.role==="employee"&&a.jsx("button",{onClick:()=>Le(q),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:a.jsx(Es,{className:"w-5 h-5"})}),ze&&q.role!=="cluster_head"&&a.jsx("button",{onClick:()=>se(q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:a.jsx(Pi,{className:"w-5 h-5"})}),ze&&q.role==="employee"&&a.jsx("button",{onClick:()=>oe(q),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:a.jsx(Es,{className:"w-5 h-5"})}),ze&&!["employee","manager","cluster_head"].includes(q.role)&&a.jsx("button",{onClick:()=>ae(q),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:a.jsx(Ir,{className:"w-5 h-5"})})]})})]},q.employeeId))})()})]})})}),ze&&o.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pn,{className:"w-6 h-6 text-gray-500"}),a.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),a.jsx("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:u?"Hide":"Show"})]}),u&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(R=>{const q=new Date(R.joiningDate||R.createdAt),K=new Date(R.releasedAt),le=K.getTime()-q.getTime(),ce=Math.floor(le/(1e3*60*60*24)),fe=Math.floor(ce/365),ge=Math.floor(ce%365/30),ve=ce%30;let Te="";return fe>0&&(Te+=`${fe}y `),ge>0&&(Te+=`${ge}m `),(ve>0||Te==="")&&(Te+=`${ve}d`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:R.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:R.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${R.role==="manager"?"bg-blue-100 text-blue-700":R.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:R.role==="cluster_head"?"Cluster Head":R.role.charAt(0).toUpperCase()+R.role.slice(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(R.joiningDate||R.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:K.toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-green-600",children:["",R.totalEarnings?.toLocaleString()||"0"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:Te.trim()})]},R.employeeId)})})]})})]}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("p",{className:"text-gray-900",children:E.employeeId})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("p",{className:"text-gray-900",children:E.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:E.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("p",{className:"text-gray-900",children:E.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),a.jsx("p",{className:"text-gray-900",children:E.employmentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(E.joiningDate).toLocaleDateString()})]}),E.dob&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),a.jsx("p",{className:"text-gray-900",children:new Date(E.dob).toLocaleDateString()})]}),E.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:E.phone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),a.jsx("p",{className:"text-gray-900",children:E.status})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),a.jsx("p",{className:"text-gray-900",children:E.createdBy})]}),E.designation&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),a.jsx("p",{className:"text-gray-900",children:E.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),E.department&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),a.jsx("p",{className:"text-gray-900",children:E.department==="store_operations"?"Store Operations":"Production"})]}),E.managerId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),a.jsx("p",{className:"text-gray-900",children:W(E.managerId)})]}),E.inchargeId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),a.jsx("p",{className:"text-gray-900",children:W(E.inchargeId)})]})]}),E.aadharFront&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),a.jsx("img",{src:E.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),E.aadharBack&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),a.jsx("img",{src:E.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),a.jsx("button",{onClick:()=>_(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),T&&a.jsx(mF,{onClose:()=>D(!1),employees:s.filter(R=>R.status==="active")}),F&&I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[a.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),a.jsx("p",{className:"text-2xl text-green-900",children:I.summary.total})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),a.jsx("p",{className:"text-2xl text-green-900",children:I.summary.updated})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),a.jsx("p",{className:"text-2xl text-green-900",children:I.summary.skipped})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),a.jsx("p",{className:"text-2xl text-yellow-900",children:I.summary.needsManualAssignment||0})]}),I.summary.errors>0&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),a.jsx("p",{className:"text-2xl text-red-900",children:I.summary.errors})]})]})]}),I.updates&&I.updates.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:I.updates.map((R,q)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:R.assignedStoreId})]},q))})]})})]}),I.manualAssignmentNeeded&&I.manualAssignmentNeeded.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),a.jsx("tbody",{className:"divide-y divide-yellow-200",children:I.manualAssignmentNeeded.map((R,q)=>a.jsxs("tr",{className:"hover:bg-yellow-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:R.reason})]},q))})]})}),a.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),I.errorDetails&&I.errorDetails.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-red-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),a.jsx("tbody",{className:"divide-y divide-red-200",children:I.errorDetails.map((R,q)=>a.jsxs("tr",{className:"hover:bg-red-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:R.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:R.reason})]},q))})]})})]}),a.jsx("button",{onClick:()=>P(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),ne&&me&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),a.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[me.name," (",me.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[(me.managerId||me.inchargeId)&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),a.jsx("p",{className:"text-blue-900",children:me.inchargeId?`${W(me.inchargeId)} (Incharge)`:W(me.managerId||"")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"manager",checked:te==="manager",onChange:R=>{J(R.target.value),ee("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"incharge",checked:te==="incharge",onChange:R=>{J(R.target.value),ee("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",te==="manager"?"Operations Manager":"Incharge"," *"]}),a.jsxs("select",{value:L,onChange:R=>ee(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["Select ",te==="manager"?"a manager":"an incharge","..."]}),te==="manager"?he.map(R=>a.jsxs("option",{value:R.employeeId,children:[R.name," (",R.employeeId,")",R.storeId?` - Store: ${R.storeId}`:" - No store assigned"]},R.employeeId)):Oe.map(R=>a.jsxs("option",{value:R.employeeId,children:[R.name," (",R.employeeId,") - ",R.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},R.employeeId))]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",te==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:jt,disabled:m||!L,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Supervisor"}),a.jsx("button",{onClick:()=>{Z(!1),G(null),ee(""),J("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),xe&&O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[O.name," (",O.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-orange-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[a.jsx("strong",{children:"Invalid Role Detected:"}),' "',O.role,'"']}),a.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),a.jsxs("select",{value:De,onChange:R=>qe(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),a.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Q,disabled:m,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Role"}),a.jsx("button",{onClick:()=>{Fe(!1),be(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),rt&&Je&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),a.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[Je.name," (",Je.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pi,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[a.jsx("strong",{children:"Current Store:"})," ",Je.storeId?f.find(R=>R.id===Je.storeId)?.name||Je.storeId:"No store assigned"]}),a.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),a.jsxs("select",{value:Ce,onChange:R=>Me(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(R=>a.jsxs("option",{value:R.id,children:[R.name," - ",R.location]},R.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),Ce&&Ce!==Je.storeId&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:ie,disabled:m||!Ce,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Store"}),a.jsx("button",{onClick:()=>{Be(!1),Xt(null),Me("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),qt&&dt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),a.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[dt.name," (",dt.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Es,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:a.jsx("strong",{children:"Department Incharge Designations"})}),a.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Current Designation:"})," ",dt.designation==="store_incharge"?"Store Incharge":dt.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),dt.department&&a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",dt.department==="store_operations"?"Store Operations":"Production"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),a.jsxs("select",{value:xt,onChange:R=>Qt(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),xt!=="none"&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[xt==="store_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Store Incharge Responsibilities:"}),a.jsx("br",{})," Customer-facing operations and administration",a.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",a.jsx("br",{})," Reports to Operations Manager"]}),xt==="production_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Production Incharge Responsibilities:"}),a.jsx("br",{})," Food preparation, quality control, production planning",a.jsx("br",{})," Manages Momo Makers and production team",a.jsx("br",{})," Reports to Operations Manager"]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:_e,disabled:m,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Designation"}),a.jsx("button",{onClick:()=>{ct(!1),ur(null),Qt("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Nr&&kr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Reset Password"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[kr.name," (",kr.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),a.jsx("input",{type:"text",value:kr.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),a.jsx("input",{type:"text",value:nr,onChange:R=>Mr(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Ie,disabled:m||!nr,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Resetting...":"Reset Password"}),a.jsx("button",{onClick:()=>{or(!1),_r(null),Mr("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Pt&&ut&&a.jsx(J8,{employee:ut,onClose:()=>{We(!1),nt(null)},onSave:()=>{tt()}})]})]})})}function q6({onNavigate:e}){const[t,r]=U.useState([]),[n,s]=U.useState(!1),[i,o]=U.useState(!1);U.useEffect(()=>{l();const x=setInterval(l,3e4);return()=>clearInterval(x)},[]);const l=async()=>{try{const x=await UI();r(x)}catch{r([])}},u=async x=>{try{await HI(x),r(t.map(b=>b.id===x?{...b,read:!0}:b))}catch(b){console.error("Error marking notification as read:",b)}},d=async()=>{o(!0);try{await qI(),r(t.map(x=>({...x,read:!0})))}catch(x){console.error("Error marking all as read:",x)}finally{o(!1)}},f=x=>{if(x.read||u(x.id),e)switch(x.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",x.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",x.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",x.relatedDate||void 0,x.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",x.relatedDate||void 0,x.relatedId||void 0);break}s(!1)},p=x=>x.includes("approved")?a.jsx(er,{className:"w-5 h-5 text-green-600"}):x.includes("rejected")?a.jsx(wn,{className:"w-5 h-5 text-red-600"}):x.includes("pending")||x.includes("request")?a.jsx(Pn,{className:"w-5 h-5 text-orange-600"}):x.includes("logged")?a.jsx(er,{className:"w-5 h-5 text-blue-600"}):a.jsx(gn,{className:"w-5 h-5 text-blue-600"}),m=t.filter(x=>!x.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[a.jsx(Y0,{className:"w-6 h-6"}),m>0&&a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:m>99?"99+":m})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-gray-900",children:"Notifications"}),m>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m," unread"]})]}),m>0&&a.jsx("button",{onClick:d,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(Y0,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No notifications"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:t.map(x=>a.jsx("button",{onClick:()=>f(x),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${x.read?"":"bg-blue-50"}`,children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:p(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm ${x.read?"text-gray-700":"font-medium text-gray-900"}`,children:x.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:x.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:wme(x.createdAt)})]}),!x.read&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},x.id))})})]})]})]})}function wme(e){const t=new Date(e),r=new Date,n=r.getTime()-t.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}function jme({stores:e,selectedStoreId:t,onStoreChange:r,showAllStores:n=!0}){const s=e.find(o=>o.id===t),i=!t;return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:a.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:a.jsx(Pi,{className:"w-6 h-6 text-purple-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t||"all",onChange:o=>r(o.target.value==="all"?null:o.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[n&&a.jsx("option",{value:"all",children:" All Stores (Combined View)"}),e.map(o=>a.jsxs("option",{value:o.id,children:[" ",o.name," ",o.location&&`- ${o.location}`]},o.id))]}),a.jsx(jm,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),s?.location&&a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[a.jsx(I2,{className:"w-3 h-3"}),a.jsx("span",{children:s.location})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[a.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:e.length})]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-blue-500":"bg-green-500"} animate-pulse`}),a.jsx("span",{className:"text-gray-600",children:i?"Viewing all store data":`Viewing ${s?.name||"store"} only`})]}),a.jsxs("span",{className:"text-purple-600 font-medium",children:[i?e.length:1," store",i&&e.length!==1||!i&&!1?"s":""," active"]})]})})]})}),e.length<=5&&a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n&&a.jsx("button",{onClick:()=>r(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${i?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),e.map(o=>a.jsxs("button",{onClick:()=>r(o.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${t===o.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",o.name]},o.id))]})]})}function Nme(){const[e,t]=U.useState(!1),[r,n]=U.useState(!1),[s,i]=U.useState(""),[o,l]=U.useState(null),u=async()=>{try{t(!0),i(""),n(!1);const d=await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await d.json();if(!d.ok)throw new Error(f.error||f.details||"Failed to setup account");n(!0),l(f),console.log("Setup successful:",f)}catch(d){console.error("Setup error:",d),i(d instanceof Error?d.message:"Failed to setup account")}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Vs,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(er,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),a.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),a.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Name:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Role:"}),a.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),a.jsx("button",{onClick:u,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?a.jsxs(a.Fragment,{children:[a.jsx(er,{className:"w-5 h-5"}),"Account Created"]}):a.jsxs(a.Fragment,{children:[a.jsx(Vs,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&a.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:" Delete any existing account with this email"}),a.jsx("li",{children:" Create a new cluster head account"}),a.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),a.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function z6({context:e,selectedStoreId:t}){const[r,n]=U.useState(new Date().toISOString().split("T")[0]),[s,i]=U.useState("entry"),o=e.user?.designation==="production_incharge",l=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge";e.user?.role;const u=o,d=l,f=U.useMemo(()=>{const y=t||e.user?.storeId;console.log(" ProductionManagement - effectiveStoreId:",y),console.log(" ProductionManagement - selectedStoreId prop:",t),console.log(" ProductionManagement - user storeId:",e.user?.storeId),console.log(" ProductionManagement - all production storeIds:",e.productionData.map(N=>({date:N.date,storeId:N.storeId})));const v=y?e.productionData.filter(N=>N.storeId===y):e.productionData;return console.log(" ProductionManagement - filtered production count:",v.length),v.find(N=>N.date===r)},[e.productionData,r,t,e.user?.storeId]),[p,m]=U.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});U.useEffect(()=>{m(f?{date:f.date,chickenMomos:f.chickenMomos,chickenCheeseMomos:f.chickenCheeseMomos,vegMomos:f.vegMomos,cheeseCornMomos:f.cheeseCornMomos,paneerMomos:f.paneerMomos,vegKurkureMomos:f.vegKurkureMomos,chickenKurkureMomos:f.chickenKurkureMomos,wastage:f.wastage,sauces:f.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,f]);const x=async y=>{y.preventDefault();const v={...p,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",v.storeId),console.log("  - Production data productionHouseId:",v.productionHouseId),console.log("  - Full production data:",v);try{f?(await e.updateProductionData(f.id,v),alert("Production data updated successfully!")):(await e.addProductionData(v),alert("Production data saved successfully!"))}catch(N){console.error("Error saving production data:",N),alert("Failed to save production data. Please try again.")}},b=async()=>{if(f)try{await e.approveProductionData(f.id);const y=e.productionHouses.find(v=>v.productionHeadId===e.user?.employeeId);if(y&&f){const v={...y.inventory};v.chicken+=f.chickenMomos?.final||0,v.chickenCheese+=f.chickenCheeseMomos?.final||0,v.veg+=f.vegMomos?.final||0,v.cheeseCorn+=f.cheeseCornMomos?.final||0,v.paneer+=f.paneerMomos?.final||0,v.vegKurkure+=f.vegKurkureMomos?.final||0,v.chickenKurkure+=f.chickenKurkureMomos?.final||0,await e.updateProductionHouseInventory(y.id,v),console.log(" Production house inventory updated after approval")}alert("Production data approved successfully! Inventory updated.")}catch(y){console.error("Error approving production:",y),alert("Failed to approve production data. Please try again.")}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Un,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),d&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[a.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),a.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const y=e.productionData.filter(v=>v.approvalStatus==="pending"&&(!e.user?.storeId||v.storeId===e.user.storeId)).length;return y>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:y})})()]})]}),s==="approvals"&&d&&a.jsx("div",{className:"space-y-4",children:(()=>{const y=e.productionData.filter(v=>v.approvalStatus==="pending"&&(!e.user?.storeId||v.storeId===e.user.storeId)).sort((v,N)=>new Date(N.date).getTime()-new Date(v.date).getTime());return y.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(er,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):y.map(v=>{const N=v.chickenMomos.final+v.chickenCheeseMomos.final+v.vegMomos.final+v.cheeseCornMomos.final+v.paneerMomos.final+v.vegKurkureMomos.final+v.chickenKurkureMomos.final,k=v.wastage.dough+v.wastage.stuffing+v.wastage.batter+v.wastage.coating;return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gn,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-xl text-gray-900",children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",v.createdBy]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(v.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Fa,{className:"w-5 h-5"}),"Approve"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[N," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[k.toFixed(2)," kg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[v.vegKurkureMomos.final+v.chickenKurkureMomos.final," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[v.chickenMomos.final+v.chickenCheeseMomos.final+v.vegMomos.final+v.cheeseCornMomos.final+v.paneerMomos.final," ","pcs"]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[v.chickenMomos.final>0&&a.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chicken"}),a.jsxs("p",{className:"text-gray-900",children:[v.chickenMomos.final," pcs"]})]}),v.chickenCheeseMomos.final>0&&a.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),a.jsxs("p",{className:"text-gray-900",children:[v.chickenCheeseMomos.final," pcs"]})]}),v.vegMomos.final>0&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg"}),a.jsxs("p",{className:"text-gray-900",children:[v.vegMomos.final," pcs"]})]}),v.cheeseCornMomos.final>0&&a.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),a.jsxs("p",{className:"text-gray-900",children:[v.cheeseCornMomos.final," pcs"]})]}),v.paneerMomos.final>0&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Paneer"}),a.jsxs("p",{className:"text-gray-900",children:[v.paneerMomos.final," pcs"]})]}),v.vegKurkureMomos.final>0&&a.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[v.vegKurkureMomos.final," pcs"]})]}),v.chickenKurkureMomos.final>0&&a.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[v.chickenKurkureMomos.final," pcs"]})]})]})]})]},v.id)})})()}),s==="entry"&&a.jsxs(a.Fragment,{children:[a.jsx(Im,{selectedDate:r,onDateChange:n}),f&&f.approvalStatus==="pending"&&a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gn,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),f&&f.approvalStatus==="approved"&&a.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(er,{className:"w-5 h-5 text-green-600"}),a.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",f.approvedBy]})]})}),d&&f&&f.approvalStatus==="pending"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Fa,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",f.createdBy," is awaiting your approval."]}),a.jsxs("button",{onClick:b,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Fa,{className:"w-5 h-5"}),"Approve Production Data"]})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(j7,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenMomos.dough,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenMomos.stuffing,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.chickenMomos.final,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenCheeseMomos.dough,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenCheeseMomos.stuffing,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.chickenCheeseMomos.final,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegMomos.dough,onChange:y=>m({...p,vegMomos:{...p.vegMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegMomos.stuffing,onChange:y=>m({...p,vegMomos:{...p.vegMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.vegMomos.final,onChange:y=>m({...p,vegMomos:{...p.vegMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.cheeseCornMomos.dough,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.cheeseCornMomos.stuffing,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.cheeseCornMomos.final,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.paneerMomos.dough,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.paneerMomos.stuffing,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.paneerMomos.final,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(Un,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegKurkureMomos.batter,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,batter:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegKurkureMomos.coating,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,coating:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:p.vegKurkureMomos.final,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenKurkureMomos.batter,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,batter:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenKurkureMomos.coating,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,coating:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:p.chickenKurkureMomos.final,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(is,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.dough,onChange:y=>m({...p,wastage:{...p.wastage,dough:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.stuffing,onChange:y=>m({...p,wastage:{...p.wastage,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.batter,onChange:y=>m({...p,wastage:{...p.wastage,batter:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.coating,onChange:y=>m({...p,wastage:{...p.wastage,coating:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(E9,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),a.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.panfriedSauce,onChange:y=>m({...p,sauces:{...p.sauces,panfriedSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.chilliChickenSauce,onChange:y=>m({...p,sauces:{...p.sauces,chilliChickenSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.spicyKoreanSauce,onChange:y=>m({...p,sauces:{...p.sauces,spicyKoreanSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.hotGarlicSauce,onChange:y=>m({...p,sauces:{...p.sauces,hotGarlicSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.tandooriSauce,onChange:y=>m({...p,sauces:{...p.sauces,tandooriSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.soupPremix,onChange:y=>m({...p,sauces:{...p.sauces,soupPremix:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.greenMayoChutney,onChange:y=>m({...p,sauces:{...p.sauces,greenMayoChutney:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.spicyRedChutney,onChange:y=>m({...p,sauces:{...p.sauces,spicyRedChutney:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]})]})})]}),u&&a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg",children:f?"Update Production Data":"Save Production Data"})})]})]})]})}function kme({onStoreCreated:e,userRole:t}){const[r,n]=U.useState([]),[s,i]=U.useState([]),[o,l]=U.useState(!0),[u,d]=U.useState(!1),[f,p]=U.useState(null),[m,x]=U.useState(null),[b,y]=U.useState(""),[v,N]=U.useState(""),[k,j]=U.useState(!1),[A,S]=U.useState(""),[E,_]=U.useState(""),[T,D]=U.useState(!1),[F,P]=U.useState(""),[I,B]=U.useState(!1);U.useEffect(()=>{z(),Y()},[]);const z=async()=>{try{const J=await Cl();n(J)}catch(J){if(J instanceof Error&&(J.message==="Not authenticated"||J.message==="Unauthorized"))return;console.error("Error loading stores:",J)}finally{l(!1)}},Y=async()=>{try{const he=(await os()).filter(Se=>Se.role==="manager");i(he)}catch(J){console.error("Error loading managers:",J)}},re=async J=>{if(J.preventDefault(),!b.trim()){alert("Please enter a store name");return}j(!0);try{await zI(b,v),y(""),N(""),d(!1),await z(),e&&e()}catch(he){console.error("Error creating store:",he),alert(he.message||"Failed to create store")}finally{j(!1)}},X=J=>{p(J.id),S(J.name),_(J.location)},ne=async J=>{if(!A.trim()){alert("Please enter a store name");return}D(!0);try{await WI(J,A,E),p(null),await z()}catch(he){console.error("Error updating store:",he),alert(he.message||"Failed to update store")}finally{D(!1)}},Z=()=>{p(null),S(""),_("")},me=J=>{x(J.id),P(J.managerId||"")},G=async J=>{if(!F){alert("Please select a manager");return}B(!0);try{await KI(J,F),x(null),P(""),await z(),await Y(),alert("Manager assigned successfully!")}catch(he){console.error("Error assigning manager:",he),alert(he.message||"Failed to assign manager")}finally{B(!1)}},L=()=>{x(null),P("")},ee=async J=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${J.name}? This will assign all data without a store to this store.`))try{const he=await VI(J.id);alert(` Migration successful!

Inventory: ${he.migratedCount.inventory}
Overheads: ${he.migratedCount.overheads}
Sales: ${he.migratedCount.sales}
Employees: ${he.migratedCount.employees}
Timesheets: ${he.migratedCount.timesheets}
Leaves: ${he.migratedCount.leaves}
Payouts: ${he.migratedCount.payouts}`)}catch(he){console.error("Error migrating data:",he),alert(he.message||"Failed to migrate data")}},te=J=>{if(!J)return null;const he=s.find(Se=>Se.employeeId===J);return he?`${he.name} (${he.employeeId})`:"Unknown Manager"};return o?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[a.jsx(wo,{className:"w-5 h-5"}),"Create Store"]})]}),u&&a.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),a.jsxs("form",{onSubmit:re,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:b,onChange:J=>y(J.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),a.jsx("input",{type:"text",value:v,onChange:J=>N(J.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",disabled:k,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:k?"Creating...":"Create Store"}),a.jsx("button",{type:"button",onClick:()=>{d(!1),y(""),N("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?a.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[a.jsx(Pi,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(J=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:f===J.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),a.jsx("input",{type:"text",value:A,onChange:he=>S(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:E,onChange:he=>_(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ne(J.id),disabled:T,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[a.jsx(Xd,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:Z,disabled:T,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(wn,{className:"w-4 h-4"}),"Cancel"]})]})]}):m===J.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",J.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),a.jsxs("select",{value:F,onChange:he=>P(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a manager..."}),s.filter(he=>!he.storeId||he.storeId===J.id).map(he=>a.jsxs("option",{value:he.employeeId,children:[he.name," (",he.employeeId,")"]},he.employeeId))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>G(J.id),disabled:I||!F,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(Xd,{className:"w-4 h-4"}),I?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:L,disabled:I,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(wn,{className:"w-4 h-4"}),"Cancel"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pi,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-gray-900",children:J.name})]}),a.jsx("button",{onClick:()=>X(J),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(ji,{className:"w-4 h-4"})})]}),J.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[a.jsx(I2,{className:"w-4 h-4"}),a.jsx("span",{children:J.location})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ra,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:J.managerId?a.jsx("span",{className:"text-green-600",children:te(J.managerId)}):a.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),a.jsxs("button",{onClick:()=>me(J),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[a.jsx(Es,{className:"w-4 h-4"}),J.managerId?"Change Manager":"Assign Manager"]}),t==="cluster_head"&&a.jsxs("button",{onClick:()=>ee(J),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[a.jsx(Ks,{className:"w-4 h-4"}),"Migrate Data"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",J.id]})]})]})},J.id))})]})}function Sme({context:e,stores:t,employees:r,onRefreshStores:n}){const[s,i]=U.useState(!1),[o,l]=U.useState(!1),[u,d]=U.useState({name:"",location:"",productionHeadId:""}),[f,p]=U.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),m=r.filter(j=>j.designation==="production_incharge"),x=async j=>{j.preventDefault();try{await e.addProductionHouse({name:u.name,location:u.location,productionHeadId:u.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),d({name:"",location:"",productionHeadId:""})}catch(A){console.error("Error creating production house:",A),alert("Failed to create production house. Please try again.")}},b=async(j,A)=>{try{if(!e.user?.accessToken)return;await bD(e.user.accessToken,j,A),await e.updateProductionHouse(j,{productionHeadId:A}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(S){console.error("Error assigning production head:",S),alert("Failed to assign production head. Please try again.")}},y=async(j,A)=>{try{if(!e.user?.accessToken)return;await wD(e.user.accessToken,j,A),alert("Store assigned to production house successfully!"),n()}catch(S){console.error("Error assigning store:",S),alert("Failed to assign store. Please try again.")}},v=async(j,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(j),alert("Production house deleted successfully!")}catch(E){console.error("Error deleting production house:",E),alert("Failed to delete production house. Please try again.")}},N=async()=>{if(!f.fromHouseId||!f.toHouseId){alert("Please select both source and destination production houses");return}if(f.fromHouseId===f.toHouseId){alert("Source and destination cannot be the same");return}const j=Object.values(f.quantities).reduce((_,T)=>_+T,0);if(j===0){alert("Please enter quantities to transfer");return}const A=e.productionHouses.find(_=>_.id===f.fromHouseId),S=e.productionHouses.find(_=>_.id===f.toHouseId);if(window.confirm(`Transfer ${j} pieces from "${A?.name}" to "${S?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await kD(e.user.accessToken,f.fromHouseId,f.toHouseId,f.quantities);const _=await sp(e.user.accessToken);e.setProductionHouses(_),alert("Inventory transferred successfully!"),l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(_){console.error("Error transferring inventory:",_),alert(`Failed to transfer inventory: ${_.message||"Unknown error"}`)}},k=()=>{const j=e.productionHouses.find(A=>A.id===f.fromHouseId);if(!j){alert("Please select a source production house first");return}p({...f,quantities:{chicken:j.inventory.chicken,chickenCheese:j.inventory.chickenCheese,veg:j.inventory.veg,cheeseCorn:j.inventory.cheeseCorn,paneer:j.inventory.paneer,vegKurkure:j.inventory.vegKurkure,chickenKurkure:j.inventory.chickenKurkure}})};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Un,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5"}),"Transfer Inventory"]}),a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[a.jsx(wo,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",required:!0,value:u.name,onChange:j=>d({...u,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),a.jsx("input",{type:"text",required:!0,value:u.location,onChange:j=>d({...u,location:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),a.jsxs("select",{value:u.productionHeadId,onChange:j=>d({...u,productionHeadId:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Production Head"}),m.map(j=>a.jsxs("option",{value:j.employeeId,children:[j.name," (",j.employeeId,")"]},j.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{i(!1),d({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),a.jsxs("select",{value:f.fromHouseId,onChange:j=>p({...f,fromHouseId:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(j=>a.jsxs("option",{value:j.id,children:[j.name," - ",j.location]},j.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),a.jsxs("select",{value:f.toHouseId,onChange:j=>p({...f,toHouseId:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(j=>j.id!==f.fromHouseId).map(j=>a.jsxs("option",{value:j.id,children:[j.name," - ",j.location]},j.id))]})]})]}),f.fromHouseId&&(()=>{const j=e.productionHouses.find(A=>A.id===f.fromHouseId);return j?a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",j.name]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.chicken})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.veg})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.paneer})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:j.inventory.chickenKurkure})]})]})]}):null})(),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),a.jsx("button",{type:"button",onClick:k,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chicken,onChange:j=>p({...f,quantities:{...f.quantities,chicken:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenCheese,onChange:j=>p({...f,quantities:{...f.quantities,chickenCheese:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.veg,onChange:j=>p({...f,quantities:{...f.quantities,veg:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.cheeseCorn,onChange:j=>p({...f,quantities:{...f.quantities,cheeseCorn:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.paneer,onChange:j=>p({...f,quantities:{...f.quantities,paneer:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.vegKurkure,onChange:j=>p({...f,quantities:{...f.quantities,vegKurkure:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenKurkure,onChange:j=>p({...f,quantities:{...f.quantities,chickenKurkure:parseInt(j.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),a.jsx("span",{className:"text-2xl text-green-600",children:Object.values(f.quantities).reduce((j,A)=>j+A,0)})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(Un,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[a.jsx(wo,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(j=>{const A=m.find(_=>_.employeeId===j.productionHeadId),S=t.filter(_=>_.productionHouseId===j.id),E=Object.values(j.inventory).reduce((_,T)=>_+T,0);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:j.name}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(W7,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",j.id]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(I2,{className:"w-4 h-4"}),a.jsx("span",{children:j.location})]}),A&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"w-4 h-4"}),a.jsxs("span",{children:[A.name," (",A.employeeId,")"]})]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),a.jsxs("div",{className:"text-2xl text-purple-600",children:[E," pcs"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.chicken})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.veg})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.paneer})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:j.inventory.chickenKurkure})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),A&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const T=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",T.production);const D=T.production.filter(F=>F.storeId==="STORE-1766938921191-9LCH05"||F.productionHouseId==="STORE-1766938921191-9LCH05"||F.productionHouseId===j.id);console.log(" Records related to this production house:",D),console.log(" Current Production House ID:",j.id),console.log(" Records by productionHouseId:"),D.forEach(F=>{console.log(`  - Record ${F.id.slice(0,8)} (${F.date}): storeId=${F.storeId}, productionHouseId=${F.productionHouseId}`)}),alert(`Found ${D.length} records related to this production house.

Check console for details (F12).`)}catch(_){console.error("Error fetching production data:",_),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),a.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const _=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${j.id}`);if(!(!_||_.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${_}?

This will update them to use the correct production house ID: ${j.id}`))try{const T=await jD(e.user.accessToken,j.id,_.trim());alert(` Fixed ${T.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(T){console.error("Error fixing records:",T),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),a.jsxs("select",{value:j.productionHeadId||"",onChange:_=>b(j.id,_.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Production Head Assigned"}),m.map(_=>a.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",S.length,")"]}),S.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map(_=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:_.name}),a.jsx("div",{className:"text-sm text-gray-600",children:_.location})]})},_.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>v(j.id,j.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[a.jsx(is,{className:"w-5 h-5"}),"Delete Production House"]})})]},j.id)})}),e.productionHouses.length>0&&a.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(j=>!j.productionHouseId).length===0?a.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):a.jsx("div",{className:"space-y-3",children:t.filter(j=>!j.productionHouseId).map(j=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:j.name}),a.jsx("div",{className:"text-sm text-gray-600",children:j.location})]}),a.jsxs("select",{onChange:A=>A.target.value&&y(j.id,A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]})]},j.id))})]})]})}function _me({context:e}){const[t,r]=U.useState([]),[n,s]=U.useState([]),[i,o]=U.useState(!1),[l,u]=U.useState(!1);U.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),U.useEffect(()=>{const x=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),b=JSON.stringify([...n].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());u(x||b)},[t,n,e.managedStoreIds,e.managedProductionHouseIds]);const d=x=>{r(b=>b.includes(x)?b.filter(y=>y!==x):[...b,x])},f=x=>{s(b=>b.includes(x)?b.filter(y=>y!==x):[...b,x])},p=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){mr.error("Employee ID not found");return}o(!0);try{await LD(e.user.accessToken,e.user.employeeId,t,n),mr.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(x){console.error("Error updating cluster assignments:",x),mr.error("Failed to update cluster assignments")}finally{o(!1)}},m=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Nm,{className:"w-8 h-8"}),a.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),a.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsx(Pi,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),a.jsx("p",{className:"text-3xl",children:t.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsx(vo,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),a.jsx("p",{className:"text-3xl",children:n.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[a.jsx(yn,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),a.jsx("p",{className:"text-3xl",children:t.length+n.length}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Pi,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(x=>{const b=t.includes(x.id);return a.jsxs("button",{onClick:()=>d(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&a.jsx(er,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(vo,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[n.length," selected"]})]}),e.productionHouses.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(x=>{const b=n.includes(x.id);return a.jsxs("button",{onClick:()=>f(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&a.jsx(er,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),l&&a.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:a.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[a.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),a.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(er,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function Eme({context:e,stores:t,employees:r,onRefreshStores:n}){const s=e.user?.role==="cluster_head",[i,o]=U.useState(s?"cluster-management":"stores");return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:a.jsx(rr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-white mb-1",children:"Assets Management"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Manage your stores and production houses"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[s&&a.jsxs("button",{onClick:()=>o("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Nm,{className:"w-5 h-5"}),a.jsx("span",{children:"Cluster Settings"})]}),a.jsxs("button",{onClick:()=>o("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Pi,{className:"w-5 h-5"}),a.jsx("span",{children:"Stores"})]}),a.jsxs("button",{onClick:()=>o("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Un,{className:"w-5 h-5"}),a.jsx("span",{children:"Production Houses"})]})]})]})]})}),a.jsx("div",{children:i==="cluster-management"?a.jsx(_me,{context:e}):i==="stores"?a.jsx(kme,{onStoreCreated:n,userRole:e.user?.role}):a.jsx(Sme,{context:e,stores:t,employees:r,onRefreshStores:n})})]})}function Cme({context:e,stores:t}){const[r,n]=U.useState("my-requests"),[s,i]=U.useState(!1),[o,l]=U.useState({requestId:null,quantities:{},notes:""}),u=e.user?.designation==="store_incharge",d=e.user?.designation==="production_incharge",f=t.find(S=>S.id===e.user?.storeId),p=e.productionHouses.find(S=>S.productionHeadId===e.user?.employeeId),[m,x]=U.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),b=async S=>{if(S.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const E=e.productionHouses.find(T=>T.id===f.productionHouseId);if(!E){alert("Production house not found");return}if(!Object.values(m).some(T=>T>0)){alert("Please enter at least one quantity greater than 0");return}try{await e.createStockRequest({storeId:f.id,storeName:f.name,productionHouseId:E.id,productionHouseName:E.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:m}),alert("Stock request created successfully!"),i(!1),x({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(T){console.error("Error creating stock request:",T),alert("Failed to create stock request. Please try again.")}},y=async S=>{p&&l({requestId:S.id,quantities:{...S.requestedQuantities},notes:""})},v=async S=>{if(S.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(E){console.error("Error fulfilling request:",E),alert("Failed to fulfill request. Please try again.")}},N=u?e.stockRequests.filter(S=>S.storeId===e.user?.storeId):[],k=d&&p?e.stockRequests.filter(S=>S.productionHouseId===p.id&&S.status==="pending"):[],j=S=>{switch(S){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=S=>{switch(S){case"pending":return a.jsx(Pn,{className:"w-4 h-4"});case"fulfilled":return a.jsx(er,{className:"w-4 h-4"});case"partially_fulfilled":return a.jsx(Qr,{className:"w-4 h-4"});case"cancelled":return a.jsx(Ms,{className:"w-4 h-4"});default:return a.jsx(Ir,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(rr,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:[u&&"Request stock from your production house",d&&"Fulfill stock requests from stores"]})]}),u&&a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(ep,{className:"w-5 h-5"}),"New Request"]})]}),u&&f&&!f.productionHouseId&&a.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ir,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(u||d)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[u&&a.jsxs("button",{onClick:()=>n("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",N.length,")"]}),d&&a.jsxs("button",{onClick:()=>n("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",k.length>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:k.length})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chicken,onChange:S=>x({...m,chicken:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenCheese,onChange:S=>x({...m,chickenCheese:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),a.jsx("input",{type:"number",min:"0",value:m.veg,onChange:S=>x({...m,veg:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),a.jsx("input",{type:"number",min:"0",value:m.cheeseCorn,onChange:S=>x({...m,cheeseCorn:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),a.jsx("input",{type:"number",min:"0",value:m.paneer,onChange:S=>x({...m,paneer:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.vegKurkure,onChange:S=>x({...m,vegKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenKurkure,onChange:S=>x({...m,chickenKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:a.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([S,E])=>{const _=p?.inventory[S]||0;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[S.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase()),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",_,")"]})]}),a.jsx("input",{type:"number",min:"0",max:_,value:E,onChange:T=>l({...o,quantities:{...o.quantities,[S]:parseInt(T.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},S)})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:o.notes,onChange:S=>l({...o,notes:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&N.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),a.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&k.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(er,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&N.map(S=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",S.productionHouseName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${j(S.status)}`,children:[A(S.status),S.status.replace("_"," ").toUpperCase()]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(S.requestDate).toLocaleDateString()]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(S.requestedQuantities).map(([E,_])=>_>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:E.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:S.fulfilledQuantities?`${S.fulfilledQuantities[E]} / ${_}`:_})]},E))}),S.notes&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),a.jsx("div",{className:"text-sm text-blue-900",children:S.notes})]}),S.fulfilledBy&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",S.fulfilledByName," on ",new Date(S.fulfillmentDate).toLocaleDateString()]})]},S.id)),r==="pending-fulfillment"&&k.map(S=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",S.storeName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${j(S.status)}`,children:[A(S.status),"PENDING"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",S.requestedByName," on ",new Date(S.requestDate).toLocaleDateString()]})]}),a.jsxs("button",{onClick:()=>y(S),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(er,{className:"w-4 h-4"}),"Fulfill"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(S.requestedQuantities).map(([E,_])=>{const T=p?.inventory[E]||0,D=T>=_;return _>0&&a.jsxs("div",{className:`rounded-lg p-3 ${D?"bg-green-50":"bg-red-50"}`,children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:E.replace(/([A-Z])/g," $1").replace(/^./,F=>F.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:_}),a.jsxs("div",{className:`text-xs ${D?"text-green-600":"text-red-600"}`,children:["Available: ",T]})]},E)})})]},S.id))]})]})}const Tme=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Ame=(e,t)=>({classGroupId:e,validator:t}),e$=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),ym="-",K6=[],Ome="arbitrary..",Pme=e=>{const t=Dme(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Ime(o);const l=o.split(ym),u=l[0]===""&&l.length>1?1:0;return t$(l,u,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const u=n[o],d=r[o];return u?d?Tme(d,u):u:d||K6}return r[o]||K6}}},t$=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const d=t$(e,t+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=t===0?e.join(ym):e.slice(t).join(ym),u=o.length;for(let d=0;d<u;d++){const f=o[d];if(f.validator(l))return f.classGroupId}},Ime=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Ome+n:void 0})(),Dme=e=>{const{theme:t,classGroups:r}=e;return Mme(r,t)},Mme=(e,t)=>{const r=e$();for(const n in e){const s=e[n];kk(s,r,n,t)}return r},kk=(e,t,r,n)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];Rme(o,t,r,n)}},Rme=(e,t,r,n)=>{if(typeof e=="string"){Fme(e,t,r);return}if(typeof e=="function"){$me(e,t,r,n);return}Lme(e,t,r,n)},Fme=(e,t,r)=>{const n=e===""?t:r$(t,e);n.classGroupId=r},$me=(e,t,r,n)=>{if(Bme(e)){kk(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Ame(r,e))},Lme=(e,t,r,n)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,u]=s[o];kk(u,r$(t,l),r,n)}},r$=(e,t)=>{let r=e;const n=t.split(ym),s=n.length;for(let i=0;i<s;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=e$(),r.nextPart.set(o,l)),r=l}return r},Bme=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Ume=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},T2="!",W6=":",Hme=[],V6=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),qme=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,u=0,d;const f=s.length;for(let y=0;y<f;y++){const v=s[y];if(o===0&&l===0){if(v===W6){i.push(s.slice(u,y)),u=y+1;continue}if(v==="/"){d=y;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const p=i.length===0?s:s.slice(u);let m=p,x=!1;p.endsWith(T2)?(m=p.slice(0,-1),x=!0):p.startsWith(T2)&&(m=p.slice(1),x=!0);const b=d&&d>u?d-u:void 0;return V6(i,x,m,b)};if(t){const s=t+W6,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):V6(Hme,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},zme=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",u=t.has(o);l||u?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},Kme=e=>({cache:Ume(e.cacheSize),parseClassName:qme(e),sortModifiers:zme(e),...Pme(e)}),Wme=/\s+/,Vme=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(Wme);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:p,modifiers:m,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:y}=r(f);if(p){u=f+(u.length>0?" "+u:u);continue}let v=!!y,N=n(v?b.substring(0,y):b);if(!N){if(!v){u=f+(u.length>0?" "+u:u);continue}if(N=n(b),!N){u=f+(u.length>0?" "+u:u);continue}v=!1}const k=m.length===0?"":m.length===1?m[0]:i(m).join(":"),j=x?k+T2:k,A=j+N;if(o.indexOf(A)>-1)continue;o.push(A);const S=s(N,v);for(let E=0;E<S.length;++E){const _=S[E];o.push(j+_)}u=f+(u.length>0?" "+u:u)}return u},Gme=(...e)=>{let t=0,r,n,s="";for(;t<e.length;)(r=e[t++])&&(n=n$(r))&&(s&&(s+=" "),s+=n);return s},n$=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=n$(e[n]))&&(r&&(r+=" "),r+=t);return r},Yme=(e,...t)=>{let r,n,s,i;const o=u=>{const d=t.reduce((f,p)=>p(f),e());return r=Kme(d),n=r.cache.get,s=r.cache.set,i=l,l(u)},l=u=>{const d=n(u);if(d)return d;const f=Vme(u,r);return s(u,f),f};return i=o,(...u)=>i(Gme(...u))},Xme=[],hn=e=>{const t=r=>r[e]||Xme;return t.isThemeGetter=!0,t},a$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,s$=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Jme=/^\d+\/\d+$/,Qme=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zme=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ege=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yc=e=>Jme.test(e),Zt=e=>!!e&&!Number.isNaN(Number(e)),co=e=>!!e&&Number.isInteger(Number(e)),Cw=e=>e.endsWith("%")&&Zt(e.slice(0,-1)),xi=e=>Qme.test(e),nge=()=>!0,age=e=>Zme.test(e)&&!ege.test(e),i$=()=>!1,sge=e=>tge.test(e),ige=e=>rge.test(e),oge=e=>!vt(e)&&!bt(e),lge=e=>Au(e,c$,i$),vt=e=>a$.test(e),Jo=e=>Au(e,u$,age),Tw=e=>Au(e,fge,Zt),G6=e=>Au(e,o$,i$),cge=e=>Au(e,l$,ige),W0=e=>Au(e,d$,sge),bt=e=>s$.test(e),wd=e=>Ou(e,u$),uge=e=>Ou(e,pge),Y6=e=>Ou(e,o$),dge=e=>Ou(e,c$),hge=e=>Ou(e,l$),V0=e=>Ou(e,d$,!0),Au=(e,t,r)=>{const n=a$.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Ou=(e,t,r=!1)=>{const n=s$.exec(e);return n?n[1]?t(n[1]):r:!1},o$=e=>e==="position"||e==="percentage",l$=e=>e==="image"||e==="url",c$=e=>e==="length"||e==="size"||e==="bg-size",u$=e=>e==="length",fge=e=>e==="number",pge=e=>e==="family-name",d$=e=>e==="shadow",mge=()=>{const e=hn("color"),t=hn("font"),r=hn("text"),n=hn("font-weight"),s=hn("tracking"),i=hn("leading"),o=hn("breakpoint"),l=hn("container"),u=hn("spacing"),d=hn("radius"),f=hn("shadow"),p=hn("inset-shadow"),m=hn("text-shadow"),x=hn("drop-shadow"),b=hn("blur"),y=hn("perspective"),v=hn("aspect"),N=hn("ease"),k=hn("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...A(),bt,vt],E=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],T=()=>[bt,vt,u],D=()=>[yc,"full","auto",...T()],F=()=>[co,"none","subgrid",bt,vt],P=()=>["auto",{span:["full",co,bt,vt]},co,bt,vt],I=()=>[co,"auto",bt,vt],B=()=>["auto","min","max","fr",bt,vt],z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Y=()=>["start","end","center","stretch","center-safe","end-safe"],re=()=>["auto",...T()],X=()=>[yc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],ne=()=>[e,bt,vt],Z=()=>[...A(),Y6,G6,{position:[bt,vt]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",dge,lge,{size:[bt,vt]}],L=()=>[Cw,wd,Jo],ee=()=>["","none","full",d,bt,vt],te=()=>["",Zt,wd,Jo],J=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[Zt,Cw,Y6,G6],Oe=()=>["","none",b,bt,vt],pe=()=>["none",Zt,bt,vt],xe=()=>["none",Zt,bt,vt],Fe=()=>[Zt,bt,vt],O=()=>[yc,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xi],breakpoint:[xi],color:[nge],container:[xi],"drop-shadow":[xi],ease:["in","out","in-out"],font:[oge],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xi],shadow:[xi],spacing:["px",Zt],text:[xi],"text-shadow":[xi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",yc,vt,bt,v]}],container:["container"],columns:[{columns:[Zt,vt,bt,l]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[co,"auto",bt,vt]}],basis:[{basis:[yc,"full","auto",l,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Zt,yc,"auto","initial","none",vt]}],grow:[{grow:["",Zt,bt,vt]}],shrink:[{shrink:["",Zt,bt,vt]}],order:[{order:[co,"first","last","none",bt,vt]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...Y(),"normal"]}],"justify-self":[{"justify-self":["auto",...Y()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...Y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Y(),{baseline:["","last"]}]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...Y(),"baseline"]}],"place-self":[{"place-self":["auto",...Y()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:re()}],mx:[{mx:re()}],my:[{my:re()}],ms:[{ms:re()}],me:[{me:re()}],mt:[{mt:re()}],mr:[{mr:re()}],mb:[{mb:re()}],ml:[{ml:re()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[l,"screen",...X()]}],"min-w":[{"min-w":[l,"screen","none",...X()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",r,wd,Jo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,bt,Tw]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cw,vt]}],"font-family":[{font:[uge,vt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,bt,vt]}],"line-clamp":[{"line-clamp":[Zt,"none",bt,Tw]}],leading:[{leading:[i,...T()]}],"list-image":[{"list-image":["none",bt,vt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",bt,vt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[Zt,"from-font","auto",bt,Jo]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[Zt,"auto",bt,vt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bt,vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bt,vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},co,bt,vt],radial:["",bt,vt],conic:[co,bt,vt]},hge,cge]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Zt,bt,vt]}],"outline-w":[{outline:["",Zt,wd,Jo]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",f,V0,W0]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",p,V0,W0]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[Zt,Jo]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",m,V0,W0]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[Zt,bt,vt]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Zt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[bt,vt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Zt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",bt,vt]}],filter:[{filter:["","none",bt,vt]}],blur:[{blur:Oe()}],brightness:[{brightness:[Zt,bt,vt]}],contrast:[{contrast:[Zt,bt,vt]}],"drop-shadow":[{"drop-shadow":["","none",x,V0,W0]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",Zt,bt,vt]}],"hue-rotate":[{"hue-rotate":[Zt,bt,vt]}],invert:[{invert:["",Zt,bt,vt]}],saturate:[{saturate:[Zt,bt,vt]}],sepia:[{sepia:["",Zt,bt,vt]}],"backdrop-filter":[{"backdrop-filter":["","none",bt,vt]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[Zt,bt,vt]}],"backdrop-contrast":[{"backdrop-contrast":[Zt,bt,vt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Zt,bt,vt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Zt,bt,vt]}],"backdrop-invert":[{"backdrop-invert":["",Zt,bt,vt]}],"backdrop-opacity":[{"backdrop-opacity":[Zt,bt,vt]}],"backdrop-saturate":[{"backdrop-saturate":[Zt,bt,vt]}],"backdrop-sepia":[{"backdrop-sepia":["",Zt,bt,vt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",bt,vt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Zt,"initial",bt,vt]}],ease:[{ease:["linear","initial",N,bt,vt]}],delay:[{delay:[Zt,bt,vt]}],animate:[{animate:["none",k,bt,vt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,bt,vt]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:xe()}],"scale-x":[{"scale-x":xe()}],"scale-y":[{"scale-y":xe()}],"scale-z":[{"scale-z":xe()}],"scale-3d":["scale-3d"],skew:[{skew:Fe()}],"skew-x":[{"skew-x":Fe()}],"skew-y":[{"skew-y":Fe()}],transform:[{transform:[bt,vt,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:O()}],"translate-x":[{"translate-x":O()}],"translate-y":[{"translate-y":O()}],"translate-z":[{"translate-z":O()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bt,vt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bt,vt]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[Zt,wd,Jo,Tw]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gge=Yme(mge);function h$(...e){return gge(Ht(e))}function ha({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:h$("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function X6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function xge(...e){return t=>{let r=!1;const n=e.map(s=>{const i=X6(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():X6(e[s],null)}}}}var yge=Symbol.for("react.lazy"),vm=a7[" use ".trim().toString()];function vge(e){return typeof e=="object"&&e!==null&&"then"in e}function f$(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===yge&&"_payload"in e&&vge(e._payload)}function bge(e){const t=jge(e),r=U.forwardRef((n,s)=>{let{children:i,...o}=n;f$(i)&&typeof vm=="function"&&(i=vm(i._payload));const l=U.Children.toArray(i),u=l.find(kge);if(u){const d=u.props.children,f=l.map(p=>p===u?U.Children.count(d)>1?U.Children.only(null):U.isValidElement(d)?d.props.children:null:p);return a.jsx(t,{...o,ref:s,children:U.isValidElement(d)?U.cloneElement(d,void 0,f):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var wge=bge("Slot");function jge(e){const t=U.forwardRef((r,n)=>{let{children:s,...i}=r;if(f$(s)&&typeof vm=="function"&&(s=vm(s._payload)),U.isValidElement(s)){const o=_ge(s),l=Sge(i,s.props);return s.type!==U.Fragment&&(l.ref=n?xge(n,o):o),U.cloneElement(s,l)}return U.Children.count(s)>1?U.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Nge=Symbol("radix.slottable");function kge(e){return U.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Nge}function Sge(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function _ge(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const J6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Q6=Ht,Ege=(e,t)=>r=>{var n;if(t?.variants==null)return Q6(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const f=r?.[d],p=i?.[d];if(f===null)return null;const m=J6(f)||J6(p);return s[d][m]}),l=r&&Object.entries(r).reduce((d,f)=>{let[p,m]=f;return m===void 0||(d[p]=m),d},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:p,className:m,...x}=f;return Object.entries(x).every(b=>{let[y,v]=b;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...d,p,m]:d},[]);return Q6(e,o,u,r?.class,r?.className)},Cge=Ege("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function bm({className:e,variant:t,asChild:r=!1,...n}){const s=r?wge:"span";return a.jsx(s,{"data-slot":"badge",className:h$(Cge({variant:t}),e),...n})}function Tge({context:e,stores:t}){const r=U.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),u={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{u.chicken+=y.chickenMomos?.final||0,u.chickenCheese+=y.chickenCheeseMomos?.final||0,u.veg+=y.vegMomos?.final||0,u.cheeseCorn+=y.cheeseCornMomos?.final||0,u.paneer+=y.paneerMomos?.final||0,u.vegKurkure+=y.vegKurkureMomos?.final||0,u.chickenKurkure+=y.chickenKurkureMomos?.final||0});const d=Object.fromEntries(Object.entries(u).map(([y,v])=>[y,l.length>0?v/30:0])),f=7,p=[];for(let y=1;y<=f;y++){const v=new Date;v.setDate(v.getDate()+y);const N=v.getDay(),k=N===0||N===6?1.3:1;p.push({date:v.toISOString().split("T")[0],dayName:v.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*k*100),recommendedProduction:Math.round(o*k*110),isWeekend:N===0||N===6})}const m=t.map(y=>{const N=e.stockRequests.filter(E=>E.storeId===y.id&&E.status==="fulfilled").reduce((E,_)=>E+(_.fulfilledQuantities?Object.values(_.fulfilledQuantities).reduce((T,D)=>T+D,0):0),0),j=e.salesData.filter(E=>E.storeId===y.id&&new Date(E.date)>=s).length/30,A=j>0?N/(j*10):99;let S="low";return A<2?S="critical":A<4?S="high":A<7&&(S="medium"),{storeName:y.name,currentStock:N,avgDailySales:Math.round(j*10),daysUntilStockout:Math.round(A),riskLevel:S,recommendedOrder:Math.round(j*10*7)}}),x=Object.entries(d).map(([y,v])=>{const N=v,k=Math.round(N*1.15),j=N>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(N),recommended:k,efficiency:j,status:N>=k*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),b=[];for(let y=0;y<6;y++){const v=new Date;v.setMonth(v.getMonth()-(5-y));const N=e.salesData.filter(k=>{const j=new Date(k.date);return j.getMonth()===v.getMonth()&&j.getFullYear()===v.getFullYear()}).reduce((k,j)=>k+(j.onlineSales||0)+(j.offlineSales||0),0);b.push({month:v.toLocaleDateString("en-US",{month:"short"}),sales:N})}return{forecast:p,storeRisks:m,optimalSchedule:x,monthlyTrend:b,avgDailyProductionByType:d}},[e,t]),n=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(D2,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),a.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),a.jsxs(ha,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(wr,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>a.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),a.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),a.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),a.jsxs(ha,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Ir,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),a.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm",children:s.storeName}),a.jsxs(bm,{className:`${n(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),a.jsx("p",{className:"text-lg",children:s.currentStock})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),a.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),a.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),a.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ha,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),a.jsx(En,{width:"100%",height:300,children:a.jsxs(Ws,{data:r.forecast,children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{dataKey:"dayName",tick:{fontSize:12}}),a.jsx(on,{tick:{fontSize:12}}),a.jsx(Pr,{}),a.jsx(qn,{}),a.jsx(Gt,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),a.jsx(Gt,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),a.jsxs(ha,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),a.jsx(En,{width:"100%",height:300,children:a.jsxs(Bd,{data:r.monthlyTrend,children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{dataKey:"month",tick:{fontSize:12}}),a.jsx(on,{tick:{fontSize:12}}),a.jsx(Pr,{}),a.jsx(qn,{}),a.jsx(Is,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),a.jsxs(ha,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Qr,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),a.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm capitalize",children:s.product}),a.jsx(bm,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Current"}),a.jsxs("span",{children:[s.current,"/day"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),a.jsx(d7,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{className:"w-24 text-right",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function Age({context:e,stores:t}){const[r,n]=U.useState("score"),[s,i]=U.useState("30days"),o=U.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,p=new Date;p.setDate(p.getDate()-f);const m=new Date;m.setDate(m.getDate()-f*2);const x=new Date(p),b=t.map(y=>{const v=e.salesData.filter(re=>re.storeId===y.id&&new Date(re.date)>=p).reduce((re,X)=>re+(X.onlineSales||0)+(X.offlineSales||0),0),N=e.salesData.filter(re=>re.storeId===y.id&&new Date(re.date)>=m&&new Date(re.date)<x).reduce((re,X)=>re+(X.onlineSales||0)+(X.offlineSales||0),0),k=N>0?(v-N)/N*100:v>0?100:0,j=e.stockRequests.filter(re=>re.storeId===y.id&&new Date(re.requestDate)>=p),A=j.length,S=j.filter(re=>re.status==="fulfilled"||re.status==="partially_fulfilled"),E=j.reduce((re,X)=>re+Object.values(X.requestedQuantities).reduce((ne,Z)=>ne+Z,0),0),_=S.reduce((re,X)=>re+(X.fulfilledQuantities?Object.values(X.fulfilledQuantities).reduce((ne,Z)=>ne+Z,0):0),0),T=E>0?_/E*100:0,D=A>0?E/A:0,F=_>0?v/_*(T/100):0,P=Math.min(v/1e5*100,100),I=T,B=Math.max(0,Math.min(k+50,100)),z=Math.min(F,100),Y=P*.35+I*.25+B*.25+z*.15;return{storeId:y.id,storeName:y.name,totalSales:v,totalRequests:A,fulfillmentRate:T,avgRequestSize:D,salesGrowth:k,efficiency:F,overallScore:Y,rank:0}});return b.sort((y,v)=>v.overallScore-y.overallScore),b.forEach((y,v)=>{y.rank=v+1}),r==="sales"?b.sort((y,v)=>v.totalSales-y.totalSales):r==="efficiency"&&b.sort((y,v)=>v.efficiency-y.efficiency),b},[e,t,s,r]),l=U.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(p=>[p.storeName,p.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(p=>[p.storeName,Math.max(0,Math.min(p.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalRequests/10*100,100)]))}]},[o]),u=f=>f===1?{icon:Mw,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:sE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:sE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:D2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},d=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(Mw,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),a.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"30days",children:"Last 30 Days"}),a.jsx("option",{value:"90days",children:"Last 90 Days"})]}),a.jsxs("select",{value:r,onChange:f=>n(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"score",children:"Overall Score"}),a.jsx("option",{value:"sales",children:"Total Sales"}),a.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,p)=>{const m=u(f.rank),x=m.icon;return a.jsxs(ha,{className:"p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(bm,{className:`${m.color} border text-lg px-3 py-1`,children:m.label}),a.jsx(x,{className:"h-8 w-8 text-purple-600"})]}),a.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),a.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sales"}),a.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Growth"}),a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?a.jsx(rI,{className:"inline h-4 w-4"}):a.jsx(jm,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ha,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),a.jsx(En,{width:"100%",height:350,children:a.jsxs(Kie,{data:l,children:[a.jsx(pR,{}),a.jsx(Su,{dataKey:"metric",tick:{fontSize:12}}),a.jsx(ku,{angle:90,domain:[0,100],tick:{fontSize:10}}),a.jsx(fl,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&a.jsx(fl,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&a.jsx(fl,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),a.jsx(qn,{})]})})]}),a.jsxs(ha,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),a.jsx(En,{width:"100%",height:350,children:a.jsxs(Ws,{data:d,children:[a.jsx(Qn,{strokeDasharray:"3 3"}),a.jsx(xn,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),a.jsx(on,{yAxisId:"left",tick:{fontSize:12}}),a.jsx(on,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),a.jsx(Pr,{}),a.jsx(qn,{}),a.jsx(Gt,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),a.jsx(Gt,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),a.jsxs(ha,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),a.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),a.jsx("tbody",{children:o.map(f=>{const p=u(f.rank);return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-2",children:a.jsx(bm,{className:`${p.color} border text-xs`,children:p.label})}),a.jsx("td",{className:"py-3 px-2",children:f.storeName}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),a.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function Oge({context:e,productionHouses:t}){const[r,n]=U.useState(new Date().toISOString().split("T")[0]),[s,i]=U.useState(null),[o,l]=U.useState([]),[u,d]=U.useState([]),[f,p]=U.useState(!0),m=async()=>{try{const N=pu(),{data:{session:k}}=await N.auth.getSession();return k?.access_token||null}catch(N){return console.error("Error getting fresh token:",N),null}};U.useEffect(()=>{(async()=>{const k=await m();if(!k){console.error("No access token available"),p(!1);return}try{const[j,A]=await Promise.all([Om(k),Cl()]);l(j),d(A)}catch(j){console.error("Error loading data:",j)}finally{p(!1)}})()},[]);const x=U.useMemo(()=>{if(f)return[];const N=[];return console.log(" Production Houses:",t),console.log(" Stores:",u),console.log(" Production Requests:",o),console.log(" Selected Date:",r),t.forEach(k=>{console.log(`
 Processing house: ${k.name} (${k.id})`);const j=u.filter(X=>X.productionHouseId===k.id);console.log("   Stores mapped to this house:",j.map(X=>({id:X.id,name:X.name})));const A=e.productionData.filter(X=>X.productionHouseId===k.id&&X.date<=r),S=o?.filter(X=>{if(!X.deliveredAt||X.status!=="delivered")return!1;let ne;if(X.deliveredAt.includes("/")){const L=X.deliveredAt.split(",")[0].split("/");ne=`${L[2]}-${L[1].padStart(2,"0")}-${L[0].padStart(2,"0")}`}else X.deliveredAt.includes("T")?ne=X.deliveredAt.split("T")[0]:ne=X.deliveredAt.split(" ")[0];const Z=u.find(L=>L.id===X.storeId),me=Z?.productionHouseId===k.id,G=ne<=r;return console.log(`     Request ${X.id}: storeId=${X.storeId}, store.productionHouseId=${Z?.productionHouseId}, houseId=${k.id}, deliveredDate=${ne}, isForThisHouse=${me}, isBeforeOrOnDate=${G}, status=${X.status}`),me&&G})||[];console.log(`   Total delivered requests for ${k.name}: ${S.length}`),S.forEach(X=>{console.log(`    - Request: chicken=${X.chickenMomos}, chickenCheese=${X.chickenCheeseMomos}, deliveredAt=${X.deliveredAt}`)});const E=e.productionData.find(X=>X.productionHouseId===k.id&&X.date===r),_=o?.filter(X=>{if(!X.deliveredAt||X.status!=="delivered")return!1;let ne;if(X.deliveredAt.includes("/")){const me=X.deliveredAt.split(",")[0].split("/");ne=`${me[2]}-${me[1].padStart(2,"0")}-${me[0].padStart(2,"0")}`}else X.deliveredAt.includes("T")?ne=X.deliveredAt.split("T")[0]:ne=X.deliveredAt.split(" ")[0];return u.find(me=>me.id===X.storeId)?.productionHouseId===k.id&&ne===r})||[],T={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};A.forEach(X=>{T.chicken+=X.chickenMomos?.final||0,T.chickenCheese+=X.chickenCheeseMomos?.final||0,T.veg+=X.vegMomos?.final||0,T.cheeseCorn+=X.cheeseCornMomos?.final||0,T.paneer+=X.paneerMomos?.final||0,T.vegKurkure+=X.vegKurkureMomos?.final||0,T.chickenKurkure+=X.chickenKurkureMomos?.final||0});const D={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};S.forEach(X=>{D.chicken+=X.chickenMomos||0,D.chickenCheese+=X.chickenCheeseMomos||0,D.veg+=X.vegMomos||0,D.cheeseCorn+=X.cheeseCornMomos||0,D.paneer+=X.paneerMomos||0,D.vegKurkure+=X.vegKurkureMomos||0,D.chickenKurkure+=X.chickenKurkureMomos||0});const F={chicken:E?.chickenMomos?.final||0,chickenCheese:E?.chickenCheeseMomos?.final||0,veg:E?.vegMomos?.final||0,cheeseCorn:E?.cheeseCornMomos?.final||0,paneer:E?.paneerMomos?.final||0,vegKurkure:E?.vegKurkureMomos?.final||0,chickenKurkure:E?.chickenKurkureMomos?.final||0},P={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};_.forEach(X=>{P.chicken+=X.chickenMomos||0,P.chickenCheese+=X.chickenCheeseMomos||0,P.veg+=X.vegMomos||0,P.cheeseCorn+=X.cheeseCornMomos||0,P.paneer+=X.paneerMomos||0,P.vegKurkure+=X.vegKurkureMomos||0,P.chickenKurkure+=X.chickenKurkureMomos||0});const I={chicken:{produced:F.chicken,sent:P.chicken,available:Math.max(0,T.chicken-D.chicken),percentage:0},chickenCheese:{produced:F.chickenCheese,sent:P.chickenCheese,available:Math.max(0,T.chickenCheese-D.chickenCheese),percentage:0},veg:{produced:F.veg,sent:P.veg,available:Math.max(0,T.veg-D.veg),percentage:0},cheeseCorn:{produced:F.cheeseCorn,sent:P.cheeseCorn,available:Math.max(0,T.cheeseCorn-D.cheeseCorn),percentage:0},paneer:{produced:F.paneer,sent:P.paneer,available:Math.max(0,T.paneer-D.paneer),percentage:0},vegKurkure:{produced:F.vegKurkure,sent:P.vegKurkure,available:Math.max(0,T.vegKurkure-D.vegKurkure),percentage:0},chickenKurkure:{produced:F.chickenKurkure,sent:P.chickenKurkure,available:Math.max(0,T.chickenKurkure-D.chickenKurkure),percentage:0}};Object.keys(I).forEach(X=>{const ne=I[X];T[X]>0?ne.percentage=ne.available/T[X]*100:ne.percentage=0});const B=Object.values(F).reduce((X,ne)=>X+ne,0),z=E?(E.wastage?.dough||0)+(E.wastage?.stuffing||0)+(E.wastage?.batter||0)+(E.wastage?.coating||0):0,Y=e.productionData.filter(X=>X.productionHouseId===k.id&&X.date===r&&X.approvalStatus==="approved").length,re=e.productionData.filter(X=>X.productionHouseId===k.id&&X.date===r&&X.approvalStatus==="pending").length;N.push({productionHouseId:k.id,productionHouseName:k.name,date:r,stock:I,totalProduced:B,totalWastage:z,approvedEntries:Y,pendingApproval:re})}),N},[e.productionData,o,u,t,r]),b=s?x.filter(N=>N.productionHouseId===s):x,y={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos"},v=N=>N>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:N>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:N>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:N>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),a.jsx("p",{className:"text-muted-foreground",children:"Total produced - Total sent to stores (fulfilled stock requests)"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wr,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"date",value:r,onChange:N=>n(N.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),a.jsxs("select",{value:s||"all",onChange:N=>i(N.target.value==="all"?null:N.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),t.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),b.map(N=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(ha,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(rr,{className:"h-5 w-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:N.totalProduced.toLocaleString()}),a.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),a.jsxs(ha,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(M2,{className:"h-5 w-5 text-red-600"}),a.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-red-900 mb-1",children:N.totalWastage.toFixed(2)}),a.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),a.jsxs(ha,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Qr,{className:"h-5 w-5 text-green-600"}),a.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-green-900 mb-1",children:N.approvedEntries}),a.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),a.jsxs(ha,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(wr,{className:"h-5 w-5 text-yellow-600"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:N.pendingApproval}),a.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),a.jsxs(ha,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Un,{className:"h-5 w-5 text-orange-600"}),a.jsxs("h3",{className:"text-lg",children:[N.productionHouseName," - Stock Status"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(N.stock).map(([k,j])=>{const A=v(j.percentage);return a.jsxs("div",{className:`p-4 rounded-lg border-2 ${A.bg} ${A.border}`,children:[a.jsx("h4",{className:"text-sm mb-3",children:y[k]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Produced:"}),a.jsx("span",{className:A.text,children:j.produced})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),a.jsx("span",{className:"text-red-600",children:j.sent})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"",children:"Stock Available:"}),a.jsx("span",{className:`text-lg ${A.text}`,children:j.available})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"flex justify-between text-xs",children:a.jsxs("span",{children:[j.percentage.toFixed(0),"% remaining"]})}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${A.bar} transition-all duration-300`,style:{width:`${Math.min(j.percentage,100)}%`}})})]})]})]})]},k)})})]})]},N.productionHouseId)),b.length===0&&a.jsxs(ha,{className:"p-12 text-center",children:[a.jsx(Un,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function Pge({context:e,stores:t}){const[r,n]=useState("dashboard");return a.jsx("div",{className:"min-h-screen bg-background p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:a.jsx(rr,{className:"h-6 w-6 text-white"})})})]}),a.jsxs(Tabs,{value:r,onValueChange:s=>n(s),className:"space-y-6",children:[a.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[a.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[a.jsx(Aw,{className:"h-4 w-4"}),"Dashboard"]}),a.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Stock"]}),a.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[a.jsx(Y0,{className:"h-4 w-4"}),"Alerts"]}),a.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[a.jsx(ep,{className:"h-4 w-4"}),"Requests"]}),a.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[a.jsx(Ei,{className:"h-4 w-4"}),"Reports"]}),a.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[a.jsx(D2,{className:"h-4 w-4"}),"Forecast"]}),a.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[a.jsx(Mw,{className:"h-4 w-4"}),"Rankings"]})]}),a.jsx(TabsContent,{value:"dashboard",children:a.jsx(InventoryDashboard,{context:e,stores:t})}),a.jsx(TabsContent,{value:"stock-status",children:a.jsx(Oge,{context:e,productionHouses:e.productionHouses})}),a.jsx(TabsContent,{value:"alerts",children:a.jsx(InventoryAlerts,{context:e,stores:t})}),a.jsx(TabsContent,{value:"requests",children:a.jsx(EnhancedProductionRequests,{context:e,stores:t})}),a.jsx(TabsContent,{value:"reports",children:a.jsx(ReportsVisualization,{context:e,stores:t})}),a.jsx(TabsContent,{value:"predictive",children:a.jsx(Tge,{context:e,stores:t})}),a.jsx(TabsContent,{value:"performance",children:a.jsx(Age,{context:e,stores:t})})]})]})})}function Ige({user:e,productionData:t}){const[r,n]=U.useState(!1),[s,i]=U.useState(!1),[o,l]=U.useState(null),[u,d]=U.useState(!1),[f,p]=U.useState(null),m=async()=>{if(e?.accessToken){i(!0),l(null);try{const b=await BI(e.accessToken);l(` ${b.message}`),console.log("Migration successful:",b)}catch(b){l(` Error: ${b instanceof Error?b.message:"Unknown error"}`),console.error("Migration failed:",b)}finally{i(!1)}}},x=async()=>{if(e?.accessToken){d(!0),p(null);try{const b=await TD(e.accessToken);p(` ${b.message}

Total Checked: ${b.totalChecked}
`+(b.fixed.length>0?`
Fixed Requests:
${b.fixed.map(y=>`   ${y.storeId}: ${y.oldProductionHouseId}  ${y.newProductionHouseId} (${y.status})`).join(`
`)}`:"")),console.log("Stock request fix successful:",b)}catch(b){p(` Error: ${b instanceof Error?b.message:"Unknown error"}`),console.error("Stock request fix failed:",b)}finally{d(!1)}}};return r?a.jsxs("div",{className:"fixed bottom-4 right-4 bg-white rounded-xl shadow-2xl p-6 max-w-2xl max-h-[80vh] overflow-auto z-50 border-2 border-purple-600",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Debug Panel"}),a.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Current User:"}),a.jsx("pre",{className:"text-xs text-gray-800 overflow-auto",children:JSON.stringify(e,null,2)})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"User Role Check:"}),a.jsxs("div",{className:"text-xs space-y-1",children:[a.jsxs("p",{children:["Role: ",a.jsx("strong",{children:e?.role})]}),a.jsxs("p",{children:["Designation: ",a.jsx("strong",{children:e?.designation||"none"})]}),a.jsxs("p",{children:["Store ID: ",a.jsx("strong",{children:e?.storeId||"none"})]}),a.jsxs("p",{children:["Is Operations Manager: ",a.jsx("strong",{children:e?.role==="manager"&&e?.designation!=="store_incharge"&&e?.designation!=="production_incharge"?"YES":"NO"})]}),a.jsxs("p",{children:["Is Cluster Head: ",a.jsx("strong",{children:e?.role==="cluster_head"?"YES":"NO"})]}),a.jsxs("p",{children:["Is Production Incharge: ",a.jsx("strong",{children:e?.designation==="production_incharge"?"YES":"NO"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Production Data Status:"}),a.jsxs("div",{className:"text-xs space-y-1",children:[a.jsxs("p",{children:["Total Production Entries: ",a.jsx("strong",{children:t.length})]}),a.jsxs("p",{children:["Pending Approvals: ",a.jsx("strong",{children:t.filter(b=>b.approvalStatus==="pending").length})]}),a.jsxs("p",{children:["Approved: ",a.jsx("strong",{children:t.filter(b=>b.approvalStatus==="approved").length})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Recent Production Entries:"}),a.jsx("div",{className:"text-xs space-y-2 max-h-60 overflow-auto",children:t.slice(0,5).map((b,y)=>a.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[a.jsxs("p",{children:["Date: ",b.date]}),a.jsxs("p",{children:["Status: ",b.approvalStatus]}),a.jsxs("p",{children:["Created By: ",b.createdBy]}),a.jsxs("p",{children:["Store ID: ",b.storeId||"none"]})]},y))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Instructions:"}),a.jsxs("ol",{className:"text-xs space-y-1 list-decimal list-inside",children:[a.jsx("li",{children:'Check if "Is Operations Manager" shows YES'}),a.jsx("li",{children:"Check if you have pending production entries"}),a.jsx("li",{children:"Click the button below to create notifications for existing entries"}),a.jsx("li",{children:"Or submit NEW production data (after backend changes)"}),a.jsx("li",{children:"Check browser console for backend logs"}),a.jsx("li",{children:"Check notifications (bell icon)"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Create Notifications for Existing Entries:"}),a.jsxs("button",{onClick:m,disabled:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Y0,{className:"w-4 h-4"}),s?"Creating Notifications...":"Create Notifications Now"]}),o&&a.jsx("div",{className:"mt-3 p-3 bg-white rounded border border-gray-300 text-xs",children:o}),a.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["This will create notifications for all ",t.filter(b=>b.approvalStatus==="pending").length," pending production entries."]})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Fix Stock Request Production House Mapping:"}),a.jsxs("button",{onClick:x,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(J0,{className:"w-4 h-4"}),u?"Fixing Stock Requests...":"Fix Stock Requests Now"]}),f&&a.jsx("div",{className:"mt-3 p-3 bg-white rounded border border-gray-300 text-xs whitespace-pre-wrap font-mono",children:f}),a.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"This will ensure all stock requests have the correct productionHouseId based on store mapping."})]})]})]}):a.jsx("button",{onClick:()=>n(!0),className:"fixed bottom-4 right-4 p-3 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 z-50",children:a.jsx(J0,{className:"w-6 h-6"})})}function yg(){return"serviceWorker"in navigator&&"PushManager"in window}async function Dge(){return yg()?await Notification.requestPermission():(console.warn("Push notifications are not supported in this browser"),"denied")}async function Mge(){if(!yg())return null;try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully"),e}catch{return null}}function Rge(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}async function Fge(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rge(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function Z6(e,t){try{if(!(await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function $ge(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Lge(e,t){if(!yg())return console.warn("Push notifications not supported"),!1;try{const r=await Mge();if(!r)return!1;await navigator.serviceWorker.ready;const n=await $ge(r);if(n)return console.log("Already subscribed to push notifications"),await Z6(n,e),!0;if(await Dge()!=="granted")return console.log("Notification permission denied"),!1;const i=await Fge(r,t);return i?(await Z6(i,e),!0):!1}catch(r){return console.error("Error initializing push notifications:",r),!1}}function Bge(){const[e,t]=U.useState("analytics"),[r,n]=U.useState(null),[s,i]=U.useState(null),[o,l]=U.useState(!0),[u,d]=U.useState(null),[f,p]=U.useState([]),[m,x]=U.useState([]),[b,y]=U.useState([]),[v,N]=U.useState([]),[k,j]=U.useState([]),[A,S]=U.useState([]),[E,_]=U.useState(!1),[T,D]=U.useState(null),[F,P]=U.useState(!1),[I,B]=U.useState([]),[z,Y]=U.useState(null),[re,X]=U.useState([]),[ne,Z]=U.useState([]),[me,G]=U.useState([]),[L,ee]=U.useState([]),[te,J]=U.useState([]),[he,Se]=U.useState([]),Oe=pu(),xe=new URLSearchParams(window.location.search).get("setup")==="cluster-head",Fe=async()=>{try{const je=await Cl();B(je)}catch(je){if(je instanceof Error&&(je.message==="Not authenticated"||je.message==="Unauthorized"))return;console.error("Error loading stores:",je)}},O=async()=>{try{const je=await os();ee(je)}catch(je){if(je instanceof Error&&(je.message==="Not authenticated"||je.message==="Unauthorized"))return;console.error("Error loading employees:",je)}},be=async je=>{try{const ke=await $D(je);ke&&(J(ke.managedStoreIds||[]),Se(ke.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:ke.managedStoreIds?.length||0,productionHouses:ke.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},De=async je=>{_(!0),D(null);try{const[ke,Le,jt,W,ae,Q,se,ie,oe]=await Promise.all([Em(je),U2(je),EI(je),q2(je),Pm(je),z2(),sp(je),SD(je),Om(je)]);console.log(" Loaded Inventory Items:",ke.length),console.log(" Loaded Overhead Items:",Le.length),console.log(" Loaded Fixed Cost Items:",jt.length);const _e=Array.from(new Map(ke.map(Re=>[Re.id,Re])).values()),H=Array.from(new Map(Le.map(Re=>[Re.id,Re])).values()),R=Array.from(new Map(jt.map(Re=>[Re.id,Re])).values()),q=Array.from(new Map(W.map(Re=>[Re.id,Re])).values()),K=Array.from(new Map(Q.map(Re=>[Re.id,Re])).values()),le=ke.length-_e.length,ce=Le.length-H.length,fe=jt.length-R.length,ge=W.length-q.length,ve=Q.length-K.length,Te=le+ce+fe+ge+ve;console.log(" After deduplication:"),console.log("Inventory: Before:",ke.length," After:",_e.length),console.log("Overheads: Before:",Le.length," After:",H.length),console.log("Fixed Costs: Before:",jt.length," After:",R.length),console.log("Sales: Before:",W.length," After:",q.length),Te>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const st=await Oe.auth.getUser(je),He=st.data?.user?.user_metadata?.role;if(st.data?.user&&He==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const Ot=await H2(je);console.log(` Cleaned ${Ot.removed} duplicates successfully`),setTimeout(()=>{window.location.reload()},500)}}catch(st){console.log("Auto-cleanup skipped:",st instanceof Error?st.message:"Unknown error"),sessionStorage.removeItem("db_cleaned")}},1500)),p(_e),x(H),y(R),N(q),j(ae.data||[]),S(K),X(se),Z(ie),G(oe)}catch(ke){if(ke instanceof Error&&(ke.message==="Not authenticated"||ke.message==="Unauthorized"))return;console.error("Error loading data:",ke),D("Failed to load inventory data. Please refresh the page.")}finally{_(!1)}};U.useEffect(()=>{(async()=>{try{const{data:{session:ke}}=await Oe.auth.getSession();if(ke?.user){let Le=null,jt=ke.user.user_metadata?.designation||null;if(ke.user.user_metadata?.employeeId)try{const Q=(await So()).find(se=>se.employeeId===ke.user.user_metadata?.employeeId);Q&&(Le=Q.storeId||null,jt=Q.designation||jt)}catch(ae){console.error("Error fetching employee storeId on session check:",ae)}const W={email:ke.user.email||"",name:ke.user.user_metadata?.name||ke.user.email?.split("@")[0]||"User",role:ke.user.user_metadata?.role||"manager",employeeId:ke.user.user_metadata?.employeeId||null,accessToken:ke.access_token,storeId:Le,designation:jt};n(W),await De(ke.access_token),W.role==="cluster_head"&&(await Fe(),await O(),await be(ke.access_token))}}catch(ke){console.log("Session check error:",ke)}finally{l(!1)}})()},[]),U.useEffect(()=>{r&&(async()=>{try{if(!yg()){console.log("Push notifications not supported on this device");return}const ke=await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${Xs}`}});if(!ke.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const Le=await ke.json();if(!Le.configured||!Le.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const jt=r.employeeId||r.email;if(await Lge(jt,Le.publicKey))console.log(" Push notifications enabled successfully for user:",jt);else{const ae=window.location.hostname.includes("figma.site")||window.location.hostname.includes("figmaiframe")||window!==window.top;console.log(ae?" Push notifications unavailable in preview environment. Will work when deployed to production (Vercel, Netlify, etc.)":" Push notifications not enabled (permission denied or browser restrictions)")}}catch(ke){console.log(" Push notifications initialization error:",ke instanceof Error?ke.message:"Unknown error")}})()},[r]);const qe=async(je,ke)=>{i(null);try{const{data:Le,error:jt}=await Oe.auth.signInWithPassword({email:je,password:ke});if(jt){i(jt.message);return}if(Le.user&&Le.session){let W=null,ae=Le.user.user_metadata?.designation||null;if(Le.user.user_metadata?.employeeId)try{const ie=(await So()).find(oe=>oe.employeeId===Le.user.user_metadata?.employeeId);ie&&(W=ie.storeId||null,ae=ie.designation||ae)}catch(se){console.error("Error fetching employee storeId:",se)}const Q={email:Le.user.email||"",name:Le.user.user_metadata?.name||Le.user.email?.split("@")[0]||"User",role:Le.user.user_metadata?.role||"manager",employeeId:Le.user.user_metadata?.employeeId||null,accessToken:Le.session.access_token,storeId:W,designation:ae};n(Q),await De(Le.session.access_token),Q.role==="cluster_head"&&(await Fe(),await O())}}catch(Le){console.log("Login error:",Le),i("Failed to sign in. Please try again.")}},rt=async(je,ke,Le,jt)=>{i(null);try{const W=await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`},body:JSON.stringify({email:je,password:ke,name:Le,role:jt,employeeId:jt==="cluster_head"?"BM001":null})}),ae=await W.json();if(!W.ok){i(ae.error||"Failed to create account");return}if(!ae.user){i("Failed to create account");return}if(jt==="cluster_head")try{await fetch(`https://${Ys}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xs}`},body:JSON.stringify({employeeId:"BM001",name:Le,email:je,role:"cluster_head",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:ae.user.id})})}catch(Q){console.log("Error creating unified employee record:",Q)}await qe(je,ke)}catch(W){console.log("Signup error:",W),i("Failed to create account. Please try again.")}},Be=async()=>{await Oe.auth.signOut(),n(null),p([]),x([]),y([]),N([]),t("sales")},tt={inventory:f,overheads:m,fixedCosts:b,salesData:v,categorySalesData:k,productionData:A,productionHouses:re,stockRequests:ne,productionRequests:me,stores:I,managedStoreIds:te,managedProductionHouseIds:he,addInventoryItem:async je=>{if(r)try{const ke={...je,storeId:r.storeId||je.storeId},Le=await wI(r.accessToken,ke);p([...f,Le])}catch(ke){throw console.error("Error adding inventory item:",ke),ke}},addOverheadItem:async je=>{if(r)try{const ke={...je,storeId:r.storeId||je.storeId},Le=await kI(r.accessToken,ke);x([...m,Le])}catch(ke){throw console.error("Error adding overhead item:",ke),ke}},addFixedCostItem:async je=>{if(r)try{const ke={...je,storeId:r.storeId||je.storeId},Le=await CI(r.accessToken,ke);y([...b,Le])}catch(ke){throw console.error("Error adding fixed cost item:",ke),ke}},updateInventoryItem:async(je,ke)=>{if(r)try{const Le={...ke,storeId:r.storeId||ke.storeId},jt=await jI(r.accessToken,je,Le);p(f.map(W=>W.id===je?jt:W))}catch(Le){throw console.error("Error updating inventory item:",Le),Le}},updateOverheadItem:async(je,ke)=>{if(r)try{const Le={...ke,storeId:r.storeId||ke.storeId},jt=await SI(r.accessToken,je,Le);x(m.map(W=>W.id===je?jt:W))}catch(Le){throw console.error("Error updating overhead item:",Le),Le}},updateFixedCostItem:async(je,ke)=>{if(r)try{const Le={...ke,storeId:r.storeId||ke.storeId},jt=await TI(r.accessToken,je,Le);y(b.map(W=>W.id===je?jt:W))}catch(Le){throw console.error("Error updating fixed cost item:",Le),Le}},deleteInventoryItem:async je=>{if(r)try{await NI(r.accessToken,je),p(f.filter(ke=>ke.id!==je))}catch(ke){throw console.error("Error deleting inventory item:",ke),ke}},deleteOverheadItem:async je=>{if(r)try{await _I(r.accessToken,je),x(m.filter(ke=>ke.id!==je))}catch(ke){throw console.error("Error deleting overhead item:",ke),ke}},deleteFixedCostItem:async je=>{if(r)try{await AI(r.accessToken,je),y(b.filter(ke=>ke.id!==je))}catch(ke){throw console.error("Error deleting fixed cost item:",ke),ke}},addSalesData:async je=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const ke={...je,storeId:r.storeId||je.storeId},Le=await OI(r.accessToken,ke);N([...v,Le])}catch(ke){throw console.error("Error adding sales data:",ke),ke}},updateSalesData:async(je,ke)=>{if(r)try{const Le={...ke,storeId:r.storeId||ke.storeId},jt=await PI(r.accessToken,je,Le);N(v.map(W=>W.id===je?jt:W))}catch(Le){throw console.error("Error updating sales data:",Le),Le}},approveSalesData:async je=>{if(r)try{const ke=await II(r.accessToken,je);N(v.map(Le=>Le.id===je?ke:Le))}catch(ke){throw console.error("Error approving sales data:",ke),ke}},requestSalesApproval:async(je,ke,Le)=>{if(r)try{const jt=await DI(r.accessToken,je,ke,Le);N(v.map(W=>W.id===je?jt:W))}catch(jt){throw console.error("Error requesting sales approval:",jt),jt}},approveDiscrepancy:async je=>{if(r)try{const ke=await MI(r.accessToken,je);N(v.map(Le=>Le.id===je?ke:Le))}catch(ke){throw console.error("Error approving discrepancy:",ke),ke}},rejectDiscrepancy:async(je,ke)=>{if(r)try{const Le=await RI(r.accessToken,je,ke);N(v.map(jt=>jt.id===je?Le:jt))}catch(Le){throw console.error("Error rejecting discrepancy:",Le),Le}},addProductionData:async je=>{if(r)try{const ke={...je,storeId:r.storeId||je.storeId},Le=await FI(ke);S([...A,Le])}catch(ke){throw console.error("Error adding production data:",ke),ke}},updateProductionData:async(je,ke)=>{if(r)try{const Le={...ke,storeId:r.storeId||ke.storeId},jt=await $I(je,Le);S(A.map(W=>W.id===je?jt:W))}catch(Le){throw console.error("Error updating production data:",Le),Le}},approveProductionData:async je=>{if(r)try{const ke=await LI(je);S(A.map(Le=>Le.id===je?ke:Le))}catch(ke){throw console.error("Error approving production data:",ke),ke}},addProductionHouse:async je=>{if(r)try{const ke=await xD(r.accessToken,je);X([...re,ke])}catch(ke){throw console.error("Error creating production house:",ke),ke}},updateProductionHouse:async(je,ke)=>{if(r)try{const Le=await yD(r.accessToken,je,ke);X(re.map(jt=>jt.id===je?Le:jt))}catch(Le){throw console.error("Error updating production house:",Le),Le}},updateProductionHouseInventory:async(je,ke)=>{if(r)try{const Le=await vD(r.accessToken,je,ke);X(re.map(jt=>jt.id===je?Le:jt))}catch(Le){throw console.error("Error updating production house inventory:",Le),Le}},deleteProductionHouse:async je=>{if(r)try{await ND(r.accessToken,je),X(re.filter(ke=>ke.id!==je))}catch(ke){throw console.error("Error deleting production house:",ke),ke}},setProductionHouses:X,createStockRequest:async je=>{if(r)try{const ke=await _D(r.accessToken,je);Z([...ne,ke])}catch(ke){throw console.error("Error creating stock request:",ke),ke}},fulfillStockRequest:async(je,ke,Le,jt,W)=>{if(r)try{const ae=await ED(r.accessToken,je,ke,Le,jt,W);Z(ne.map(se=>se.id===je?ae:se));const Q=await sp(r.accessToken);X(Q)}catch(ae){throw console.error("Error fulfilling stock request:",ae),ae}},cancelStockRequest:async je=>{if(r)try{const ke=await CD(r.accessToken,je);Z(ne.map(Le=>Le.id===je?ke:Le))}catch(ke){throw console.error("Error cancelling stock request:",ke),ke}},isManager:r?.role==="manager",user:r};if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(xe)return a.jsx(Nme,{});if(!r)return a.jsx(dme,{onLogin:qe,onSignup:rt,error:s});const It=r.role==="cluster_head",Ue=r.role==="employee",St=r.role==="employee"&&r.designation==="store_incharge",Kt=r.designation==="production_incharge",Qe=St||Kt,Ie=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",wt=r.role==="manager",ft=Kt||Ie||It;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:It,isEmployee:Ue,isManager:wt,isStoreIncharge:St,isProductionIncharge:Kt,isOperationsManager:Ie,isAnyIncharge:Qe,canViewProduction:ft}),Ue?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",St?"Store Incharge":Kt?"Production Head":"Employee"]})]})}),a.jsx("button",{onClick:()=>P(!F),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:F?a.jsx(wn,{className:"w-5 h-5"}):a.jsx(oE,{className:"w-5 h-5"})}),a.jsxs("div",{className:"hidden lg:flex gap-2",children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Qr,{className:"w-4 h-4"}),a.jsx("span",{children:"Analytics"})]}),Qe&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(An,{className:"w-4 h-4"}),a.jsx("span",{children:"Sales"})]})]}),ft&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Un,{className:"w-4 h-4"}),a.jsx("span",{children:"Production"})]}),Qe&&a.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Stock Requests"})]}),wt&&a.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Aw,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(yn,{className:"w-4 h-4"}),a.jsx("span",{children:Qe?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Pn,{className:"w-4 h-4"}),a.jsx("span",{children:"Attendance"})]}),Qe&&a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Ks,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]}),Qe&&a.jsx(q6,{onNavigate:(je,ke,Le)=>{je==="sales"&&(t("sales"),d(null)),je==="production"&&(t("production"),d(null)),je==="attendance"&&(t("employees"),d(null)),je==="production-requests"&&(console.log(" Production request notification clicked, requestId:",Le),d(null),setTimeout(()=>{d(Le||null),t("analytics")},0))}}),a.jsxs("button",{onClick:Be,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[a.jsx(y0,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]}),F&&a.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{t("analytics"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Qr,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),Qe&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("inventory"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(An,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]})]}),ft&&a.jsxs("button",{onClick:()=>{t("production"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Un,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),Qe&&a.jsxs("button",{onClick:()=>{t("stock-requests"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Stock Requests"})]}),wt&&a.jsxs("button",{onClick:()=>{t("advanced-inventory"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Aw,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>{t("payroll"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(yn,{className:"w-5 h-5"}),a.jsx("span",{children:Qe?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>{t("attendance"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Pn,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]}),Qe&&a.jsxs("button",{onClick:()=>{t("export"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Ks,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:Be,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[a.jsx(y0,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),a.jsx("main",{className:"pb-6",children:e==="analytics"?a.jsx(L6,{context:tt,highlightRequestId:u}):e==="inventory"&&Qe?a.jsx(PE,{context:tt}):e==="sales"&&Qe?a.jsx(DP,{context:tt,selectedStoreId:z}):e==="production"&&ft?a.jsx(z6,{context:tt,selectedStoreId:z}):e==="payroll"?Qe?a.jsx(gF,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):a.jsx(U6,{employeeId:r.employeeId||""}):e==="attendance"?a.jsx(Q8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:Qe,inchargeDesignation:r.designation}):e==="export"&&Qe?a.jsx(B6,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&Qe?a.jsx(Cme,{context:tt,stores:I}):e==="advanced-inventory"&&wt?a.jsx(Pge,{context:tt,stores:I}):a.jsx(U6,{employeeId:r.employeeId||""})})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(q6,{onNavigate:(je,ke,Le)=>{je==="sales"?(t("sales"),d(null)):je==="attendance"||je==="leave"?(t("employees"),d(null)):je==="production"?(t("production"),d(null)):je==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",Le),d(null),setTimeout(()=>{d(Le||null),t("analytics")},0))}}),a.jsx("button",{onClick:()=>P(!F),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:F?a.jsx(wn,{className:"w-5 h-5"}):a.jsx(oE,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[It?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Qr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(An,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),ft&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Un,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Vs,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Assets"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ks,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Qr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(An,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),ft&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Un,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Vs,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ks,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}),a.jsxs("button",{onClick:Be,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[a.jsx(y0,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),F&&a.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[It?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(Qr,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(An,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),ft&&a.jsxs("button",{onClick:()=>{t("production"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Un,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Vs,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("assets"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Assets"})]}),a.jsxs("button",{onClick:()=>{t("export"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Ks,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(Qr,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("sales"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(An,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),ft&&a.jsxs("button",{onClick:()=>{t("production"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Un,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Vs,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("export"),P(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Ks,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}),a.jsxs("button",{onClick:Be,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(y0,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),It&&I.length>0&&e!=="analytics"&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(jme,{stores:I,selectedStoreId:z,onStoreChange:Y,showAllStores:!0})})}),T&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[a.jsx(Ir,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm",children:T}),a.jsx("button",{onClick:()=>r&&De(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),E&&a.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[a.jsx(rr,{className:"w-5 h-5 animate-pulse"}),a.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),a.jsx("main",{className:"pb-6",children:e==="sales"?a.jsx(DP,{context:tt,selectedStoreId:z}):e==="inventory"?r.role==="manager"?a.jsx(UH,{context:tt,selectedStoreId:z}):a.jsx(PE,{context:tt,selectedStoreId:z}):e==="analytics"?a.jsx(L6,{context:tt,selectedStoreId:z,highlightRequestId:u}):e==="export"?a.jsx(B6,{userRole:r.role,selectedStoreId:z,currentUserId:r.email}):e==="employees"?a.jsx(bme,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:z}):e==="assets"?a.jsx(Eme,{context:tt,stores:I,employees:L,onRefreshStores:Fe}):e==="production"&&ft?a.jsx(z6,{context:tt,selectedStoreId:z}):a.jsx(Wie,{context:tt})}),a.jsx(Ige,{user:r,productionData:A})]})}n7.createRoot(document.getElementById("root")).render(a.jsx(Bge,{}));
