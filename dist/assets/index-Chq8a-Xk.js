function x7(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yy={exports:{}},Ld={},vy={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function y7(){if(dE)return xr;dE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(z,M,J){this.props=z,this.context=M,this.refs=y,this.updater=J||x}b.prototype.isReactComponent={},b.prototype.setState=function(z,M){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,M,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=b.prototype;function N(z,M,J){this.props=z,this.context=M,this.refs=y,this.updater=J||x}var w=N.prototype=new k;w.constructor=N,v(w,b.prototype),w.isPureReactComponent=!0;var T=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(z,M,J){var te,ie={},me=null,ve=null;if(M!=null)for(te in M.ref!==void 0&&(ve=M.ref),M.key!==void 0&&(me=""+M.key),M)E.call(M,te)&&!_.hasOwnProperty(te)&&(ie[te]=M[te]);var ye=arguments.length-2;if(ye===1)ie.children=J;else if(1<ye){for(var he=Array(ye),pe=0;pe<ye;pe++)he[pe]=arguments[pe+2];ie.children=he}if(z&&z.defaultProps)for(te in ye=z.defaultProps,ye)ie[te]===void 0&&(ie[te]=ye[te]);return{$$typeof:e,type:z,key:me,ref:ve,props:ie,_owner:S.current}}function P(z,M){return{$$typeof:e,type:z.type,key:M,ref:z.ref,props:z.props,_owner:z._owner}}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function I(z){var M={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(J){return M[J]})}var O=/\/+/g;function L(z,M){return typeof z=="object"&&z!==null&&z.key!=null?I(""+z.key):M.toString(36)}function X(z,M,J,te,ie){var me=typeof z;(me==="undefined"||me==="boolean")&&(z=null);var ve=!1;if(z===null)ve=!0;else switch(me){case"string":case"number":ve=!0;break;case"object":switch(z.$$typeof){case e:case t:ve=!0}}if(ve)return ve=z,ie=ie(ve),z=te===""?"."+L(ve,0):te,T(ie)?(J="",z!=null&&(J=z.replace(O,"$&/")+"/"),X(ie,M,J,"",function(pe){return pe})):ie!=null&&(B(ie)&&(ie=P(ie,J+(!ie.key||ve&&ve.key===ie.key?"":(""+ie.key).replace(O,"$&/")+"/")+z)),M.push(ie)),1;if(ve=0,te=te===""?".":te+":",T(z))for(var ye=0;ye<z.length;ye++){me=z[ye];var he=te+L(me,ye);ve+=X(me,M,J,he,ie)}else if(he=m(z),typeof he=="function")for(z=he.call(z),ye=0;!(me=z.next()).done;)me=me.value,he=te+L(me,ye++),ve+=X(me,M,J,he,ie);else if(me==="object")throw M=String(z),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ve}function U(z,M,J){if(z==null)return z;var te=[],ie=0;return X(z,te,"","",function(me){return M.call(J,me,ie++)}),te}function V(z){if(z._status===-1){var M=z._result;M=M(),M.then(function(J){(z._status===0||z._status===-1)&&(z._status=1,z._result=J)},function(J){(z._status===0||z._status===-1)&&(z._status=2,z._result=J)}),z._status===-1&&(z._status=0,z._result=M)}if(z._status===1)return z._result.default;throw z._result}var ne={current:null},ee={transition:null},R={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:ee,ReactCurrentOwner:S};function se(){throw Error("act(...) is not supported in production builds of React.")}return xr.Children={map:U,forEach:function(z,M,J){U(z,function(){M.apply(this,arguments)},J)},count:function(z){var M=0;return U(z,function(){M++}),M},toArray:function(z){return U(z,function(M){return M})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xr.Component=b,xr.Fragment=r,xr.Profiler=s,xr.PureComponent=N,xr.StrictMode=n,xr.Suspense=u,xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,xr.act=se,xr.cloneElement=function(z,M,J){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var te=v({},z.props),ie=z.key,me=z.ref,ve=z._owner;if(M!=null){if(M.ref!==void 0&&(me=M.ref,ve=S.current),M.key!==void 0&&(ie=""+M.key),z.type&&z.type.defaultProps)var ye=z.type.defaultProps;for(he in M)E.call(M,he)&&!_.hasOwnProperty(he)&&(te[he]=M[he]===void 0&&ye!==void 0?ye[he]:M[he])}var he=arguments.length-2;if(he===1)te.children=J;else if(1<he){ye=Array(he);for(var pe=0;pe<he;pe++)ye[pe]=arguments[pe+2];te.children=ye}return{$$typeof:e,type:z.type,key:ie,ref:me,props:te,_owner:ve}},xr.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:i,_context:z},z.Consumer=z},xr.createElement=A,xr.createFactory=function(z){var M=A.bind(null,z);return M.type=z,M},xr.createRef=function(){return{current:null}},xr.forwardRef=function(z){return{$$typeof:l,render:z}},xr.isValidElement=B,xr.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:V}},xr.memo=function(z,M){return{$$typeof:d,type:z,compare:M===void 0?null:M}},xr.startTransition=function(z){var M=ee.transition;ee.transition={};try{z()}finally{ee.transition=M}},xr.unstable_act=se,xr.useCallback=function(z,M){return ne.current.useCallback(z,M)},xr.useContext=function(z){return ne.current.useContext(z)},xr.useDebugValue=function(){},xr.useDeferredValue=function(z){return ne.current.useDeferredValue(z)},xr.useEffect=function(z,M){return ne.current.useEffect(z,M)},xr.useId=function(){return ne.current.useId()},xr.useImperativeHandle=function(z,M,J){return ne.current.useImperativeHandle(z,M,J)},xr.useInsertionEffect=function(z,M){return ne.current.useInsertionEffect(z,M)},xr.useLayoutEffect=function(z,M){return ne.current.useLayoutEffect(z,M)},xr.useMemo=function(z,M){return ne.current.useMemo(z,M)},xr.useReducer=function(z,M,J){return ne.current.useReducer(z,M,J)},xr.useRef=function(z){return ne.current.useRef(z)},xr.useState=function(z){return ne.current.useState(z)},xr.useSyncExternalStore=function(z,M,J){return ne.current.useSyncExternalStore(z,M,J)},xr.useTransition=function(){return ne.current.useTransition()},xr.version="18.3.1",xr}var hE;function ZN(){return hE||(hE=1,vy.exports=y7()),vy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function v7(){if(fE)return Ld;fE=1;var e=ZN(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var f,p={},m=null,x=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:t,type:l,key:m,ref:x,props:p,_owner:s.current}}return Ld.Fragment=r,Ld.jsx=o,Ld.jsxs=o,Ld}var pE;function b7(){return pE||(pE=1,yy.exports=v7()),yy.exports}var a=b7(),G0={},by={exports:{}},Ja={},wy={exports:{}},jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function w7(){return mE||(mE=1,(function(e){function t(ee,R){var se=ee.length;ee.push(R);e:for(;0<se;){var z=se-1>>>1,M=ee[z];if(0<s(M,R))ee[z]=R,ee[se]=M,se=z;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var R=ee[0],se=ee.pop();if(se!==R){ee[0]=se;e:for(var z=0,M=ee.length,J=M>>>1;z<J;){var te=2*(z+1)-1,ie=ee[te],me=te+1,ve=ee[me];if(0>s(ie,se))me<M&&0>s(ve,ie)?(ee[z]=ve,ee[me]=se,z=me):(ee[z]=ie,ee[te]=se,z=te);else if(me<M&&0>s(ve,se))ee[z]=ve,ee[me]=se,z=me;else break e}}return R}function s(ee,R){var se=ee.sortIndex-R.sortIndex;return se!==0?se:ee.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,x=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ee){for(var R=r(d);R!==null;){if(R.callback===null)n(d);else if(R.startTime<=ee)n(d),R.sortIndex=R.expirationTime,t(u,R);else break;R=r(d)}}function T(ee){if(y=!1,w(ee),!v)if(r(u)!==null)v=!0,V(E);else{var R=r(d);R!==null&&ne(T,R.startTime-ee)}}function E(ee,R){v=!1,y&&(y=!1,k(A),A=-1),x=!0;var se=m;try{for(w(R),p=r(u);p!==null&&(!(p.expirationTime>R)||ee&&!I());){var z=p.callback;if(typeof z=="function"){p.callback=null,m=p.priorityLevel;var M=z(p.expirationTime<=R);R=e.unstable_now(),typeof M=="function"?p.callback=M:p===r(u)&&n(u),w(R)}else n(u);p=r(u)}if(p!==null)var J=!0;else{var te=r(d);te!==null&&ne(T,te.startTime-R),J=!1}return J}finally{p=null,m=se,x=!1}}var S=!1,_=null,A=-1,P=5,B=-1;function I(){return!(e.unstable_now()-B<P)}function O(){if(_!==null){var ee=e.unstable_now();B=ee;var R=!0;try{R=_(!0,ee)}finally{R?L():(S=!1,_=null)}}else S=!1}var L;if(typeof N=="function")L=function(){N(O)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,U=X.port2;X.port1.onmessage=O,L=function(){U.postMessage(null)}}else L=function(){b(O,0)};function V(ee){_=ee,S||(S=!0,L())}function ne(ee,R){A=b(function(){ee(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,V(E))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(ee){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var se=m;m=R;try{return ee()}finally{m=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,R){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=m;m=ee;try{return R()}finally{m=se}},e.unstable_scheduleCallback=function(ee,R,se){var z=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?z+se:z):se=z,ee){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=se+M,ee={id:f++,callback:R,priorityLevel:ee,startTime:se,expirationTime:M,sortIndex:-1},se>z?(ee.sortIndex=se,t(d,ee),r(u)===null&&ee===r(d)&&(y?(k(A),A=-1):y=!0,ne(T,se-z))):(ee.sortIndex=M,t(u,ee),v||x||(v=!0,V(E))),ee},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(ee){var R=m;return function(){var se=m;m=R;try{return ee.apply(this,arguments)}finally{m=se}}}})(jy)),jy}var gE;function j7(){return gE||(gE=1,wy.exports=w7()),wy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function N7(){if(xE)return Ja;xE=1;var e=ZN(),t=j7();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)n.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(c){return u.call(p,c)?!0:u.call(f,c)?!1:d.test(c)?p[c]=!0:(f[c]=!0,!1)}function x(c,h,g,j){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return j?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,g,j){if(h===null||typeof h>"u"||x(c,h,g,j))return!0;if(j)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,g,j,C,D,Q){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=j,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=c,this.type=h,this.sanitizeURL=D,this.removeEmptyString=Q}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){b[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];b[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){b[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){b[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){b[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){b[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){b[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){b[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){b[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function N(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(k,N);b[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(k,N);b[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(k,N);b[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){b[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){b[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function w(c,h,g,j){var C=b.hasOwnProperty(h)?b[h]:null;(C!==null?C.type!==0:j||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,g,C,j)&&(g=null),j||C===null?m(h)&&(g===null?c.removeAttribute(h):c.setAttribute(h,""+g)):C.mustUseProperty?c[C.propertyName]=g===null?C.type===3?!1:"":g:(h=C.attributeName,j=C.attributeNamespace,g===null?c.removeAttribute(h):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,j?c.setAttributeNS(j,h,g):c.setAttribute(h,g))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),ee=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=ee&&c[ee]||c["@@iterator"],typeof c=="function"?c:null)}var se=Object.assign,z;function M(c){if(z===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);z=h&&h[1]||""}return`
`+z+c}var J=!1;function te(c,h){if(!c||J)return"";J=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Le){var j=Le}Reflect.construct(c,[],h)}else{try{h.call()}catch(Le){j=Le}c.call(h.prototype)}else{try{throw Error()}catch(Le){j=Le}c()}}catch(Le){if(Le&&j&&typeof Le.stack=="string"){for(var C=Le.stack.split(`
`),D=j.stack.split(`
`),Q=C.length-1,ue=D.length-1;1<=Q&&0<=ue&&C[Q]!==D[ue];)ue--;for(;1<=Q&&0<=ue;Q--,ue--)if(C[Q]!==D[ue]){if(Q!==1||ue!==1)do if(Q--,ue--,0>ue||C[Q]!==D[ue]){var ge=`
`+C[Q].replace(" at new "," at ");return c.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",c.displayName)),ge}while(1<=Q&&0<=ue);break}}}finally{J=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?M(c):""}function ie(c){switch(c.tag){case 5:return M(c.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function me(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case _:return"Fragment";case S:return"Portal";case P:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case X:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case I:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case O:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case U:return h=c.displayName||null,h!==null?h:me(c.type)||"Memo";case V:h=c._payload,c=c._init;try{return me(c(h))}catch{}}return null}function ve(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(h);case 8:return h===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function ye(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function he(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function pe(c){var h=he(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),j=""+c[h];if(!c.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,D=g.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return C.call(this)},set:function(Q){j=""+Q,D.call(this,Q)}}),Object.defineProperty(c,h,{enumerable:g.enumerable}),{getValue:function(){return j},setValue:function(Q){j=""+Q},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function De(c){c._valueTracker||(c._valueTracker=pe(c))}function q(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var g=h.getValue(),j="";return c&&(j=he(c)?c.checked?"true":"false":c.value),c=j,c!==g?(h.setValue(c),!0):!1}function Ae(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Be(c,h){var g=h.checked;return se({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function xt(c,h){var g=h.defaultValue==null?"":h.defaultValue,j=h.checked!=null?h.checked:h.defaultChecked;g=ye(h.value!=null?h.value:g),c._wrapperState={initialChecked:j,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function le(c,h){h=h.checked,h!=null&&w(c,"checked",h,!1)}function Ee(c,h){le(c,h);var g=ye(h.value),j=h.type;if(g!=null)j==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?$e(c,h.type,g):h.hasOwnProperty("defaultValue")&&$e(c,h.type,ye(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Ce(c,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var j=h.type;if(!(j!=="submit"&&j!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,g||h===c.value||(c.value=h),c.defaultValue=h}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function $e(c,h,g){(h!=="number"||Ae(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var Nt=Array.isArray;function vt(c,h,g,j){if(c=c.options,h){h={};for(var C=0;C<g.length;C++)h["$"+g[C]]=!0;for(g=0;g<c.length;g++)C=h.hasOwnProperty("$"+c[g].value),c[g].selected!==C&&(c[g].selected=C),C&&j&&(c[g].defaultSelected=!0)}else{for(g=""+ye(g),h=null,C=0;C<c.length;C++){if(c[C].value===g){c[C].selected=!0,j&&(c[C].defaultSelected=!0);return}h!==null||c[C].disabled||(h=c[C])}h!==null&&(h.selected=!0)}}function qt(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return se({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function gr(c,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(r(92));if(Nt(g)){if(1<g.length)throw Error(r(93));g=g[0]}h=g}h==null&&(h=""),g=h}c._wrapperState={initialValue:ye(g)}}function sr(c,h){var g=ye(h.value),j=ye(h.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),h.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),j!=null&&(c.defaultValue=""+j)}function lr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Qr(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hr(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Qr(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var cr,Fe=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,j,C){MSApp.execUnsafeLocalFunction(function(){return c(h,g,j,C)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=cr.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function we(c,h){if(h){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=h;return}}c.textContent=h}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ue=["Webkit","ms","Moz","O"];Object.keys(mt).forEach(function(c){Ue.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),mt[h]=mt[c]})});function rt(c,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||mt.hasOwnProperty(c)&&mt[c]?(""+h).trim():h+"px"}function ut(c,h){c=c.style;for(var g in h)if(h.hasOwnProperty(g)){var j=g.indexOf("--")===0,C=rt(g,h[g],j);g==="float"&&(g="cssFloat"),j?c.setProperty(g,C):c[g]=C}}var Vt=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(c,h){if(h){if(Vt[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function Ne(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Ge(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var bt=null,dt=null,st=null;function wt(c){if(c=kd(c)){if(typeof bt!="function")throw Error(r(280));var h=c.stateNode;h&&(h=l0(h),bt(c.stateNode,c.type,h))}}function Rt(c){dt?st?st.push(c):st=[c]:dt=c}function nt(){if(dt){var c=dt,h=st;if(st=dt=null,wt(c),h)for(c=0;c<h.length;c++)wt(h[c])}}function yt(c,h){return c(h)}function ht(){}var Ut=!1;function Ft(c,h,g){if(Ut)return c(h,g);Ut=!0;try{return yt(c,h,g)}finally{Ut=!1,(dt!==null||st!==null)&&(ht(),nt())}}function dr(c,h){var g=c.stateNode;if(g===null)return null;var j=l0(g);if(j===null)return null;g=j[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var br=!1;if(l)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){br=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{br=!1}function It(c,h,g,j,C,D,Q,ue,ge){var Le=Array.prototype.slice.call(arguments,3);try{h.apply(g,Le)}catch(Ze){this.onError(Ze)}}var vr=!1,Er=null,Y=!1,K=null,H={onError:function(c){vr=!0,Er=c}};function W(c,h,g,j,C,D,Q,ue,ge){vr=!1,Er=null,It.apply(H,arguments)}function re(c,h,g,j,C,D,Q,ue,ge){if(W.apply(this,arguments),vr){if(vr){var Le=Er;vr=!1,Er=null}else throw Error(r(198));Y||(Y=!0,K=Le)}}function ae(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function je(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Oe(c){if(ae(c)!==c)throw Error(r(188))}function G(c){var h=c.alternate;if(!h){if(h=ae(c),h===null)throw Error(r(188));return h!==c?null:c}for(var g=c,j=h;;){var C=g.return;if(C===null)break;var D=C.alternate;if(D===null){if(j=C.return,j!==null){g=j;continue}break}if(C.child===D.child){for(D=C.child;D;){if(D===g)return Oe(C),c;if(D===j)return Oe(C),h;D=D.sibling}throw Error(r(188))}if(g.return!==j.return)g=C,j=D;else{for(var Q=!1,ue=C.child;ue;){if(ue===g){Q=!0,g=C,j=D;break}if(ue===j){Q=!0,j=C,g=D;break}ue=ue.sibling}if(!Q){for(ue=D.child;ue;){if(ue===g){Q=!0,g=D,j=C;break}if(ue===j){Q=!0,j=D,g=C;break}ue=ue.sibling}if(!Q)throw Error(r(189))}}if(g.alternate!==j)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:h}function ce(c){return c=G(c),c!==null?Te(c):null}function Te(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=Te(c);if(h!==null)return h;c=c.sibling}return null}var Ve=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,ct=t.unstable_shouldYield,tt=t.unstable_requestPaint,Qe=t.unstable_now,Bt=t.unstable_getCurrentPriorityLevel,Cr=t.unstable_ImmediatePriority,Dr=t.unstable_UserBlockingPriority,nn=t.unstable_NormalPriority,rs=t.unstable_LowPriority,Zr=t.unstable_IdlePriority,ns=null,fr=null;function Wa(c){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(ns,c,void 0,(c.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:fe,Z=Math.log,_e=Math.LN2;function fe(c){return c>>>=0,c===0?32:31-(Z(c)/_e|0)|0}var oe=64,Re=4194304;function Pe(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function xe(c,h){var g=c.pendingLanes;if(g===0)return 0;var j=0,C=c.suspendedLanes,D=c.pingedLanes,Q=g&268435455;if(Q!==0){var ue=Q&~C;ue!==0?j=Pe(ue):(D&=Q,D!==0&&(j=Pe(D)))}else Q=g&~C,Q!==0?j=Pe(Q):D!==0&&(j=Pe(D));if(j===0)return 0;if(h!==0&&h!==j&&(h&C)===0&&(C=j&-j,D=h&-h,C>=D||C===16&&(D&4194240)!==0))return h;if((j&4)!==0&&(j|=g&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=j;0<h;)g=31-qr(h),C=1<<g,j|=c[g],h&=~C;return j}function qe(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ye(c,h){for(var g=c.suspendedLanes,j=c.pingedLanes,C=c.expirationTimes,D=c.pendingLanes;0<D;){var Q=31-qr(D),ue=1<<Q,ge=C[Q];ge===-1?((ue&g)===0||(ue&j)!==0)&&(C[Q]=qe(ue,h)):ge<=h&&(c.expiredLanes|=ue),D&=~ue}}function We(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Xe(){var c=oe;return oe<<=1,(oe&4194240)===0&&(oe=64),c}function Ot(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function Ht(c,h,g){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-qr(h),c[h]=g}function Jt(c,h){var g=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<g;){var C=31-qr(g),D=1<<C;h[C]=0,j[C]=-1,c[C]=-1,g&=~D}}function Dt(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var j=31-qr(g),C=1<<j;C&h|c[j]&h&&(c[j]|=h),g&=~C}}var ft=0;function er(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Et,hr,He,ot,Br,Or=!1,Gn=[],Yn=null,Ia=null,as=null,Xn=new Map,zs=new Map,Jn=[],Kf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ud(c,h){switch(c){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Xn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(h.pointerId)}}function So(c,h,g,j,C,D){return c===null||c.nativeEvent!==D?(c={blockedOn:h,domEventName:g,eventSystemFlags:j,nativeEvent:D,targetContainers:[C]},h!==null&&(h=kd(h),h!==null&&hr(h)),c):(c.eventSystemFlags|=j,h=c.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),c)}function Vf(c,h,g,j,C){switch(h){case"focusin":return Yn=So(Yn,c,h,g,j,C),!0;case"dragenter":return Ia=So(Ia,c,h,g,j,C),!0;case"mouseover":return as=So(as,c,h,g,j,C),!0;case"pointerover":var D=C.pointerId;return Xn.set(D,So(Xn.get(D)||null,c,h,g,j,C)),!0;case"gotpointercapture":return D=C.pointerId,zs.set(D,So(zs.get(D)||null,c,h,g,j,C)),!0}return!1}function vi(c){var h=hl(c.target);if(h!==null){var g=ae(h);if(g!==null){if(h=g.tag,h===13){if(h=je(g),h!==null){c.blockedOn=h,Br(c.priority,function(){He(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ws(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var g=Wg(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var j=new g.constructor(g.type,g);Se=j,g.target.dispatchEvent(j),Se=null}else return h=kd(g),h!==null&&hr(h),c.blockedOn=g,!1;h.shift()}return!0}function Hi(c,h,g){Ws(c)&&g.delete(h)}function Gf(){Or=!1,Yn!==null&&Ws(Yn)&&(Yn=null),Ia!==null&&Ws(Ia)&&(Ia=null),as!==null&&Ws(as)&&(as=null),Xn.forEach(Hi),zs.forEach(Hi)}function dd(c,h){c.blockedOn===h&&(c.blockedOn=null,Or||(Or=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gf)))}function hd(c){function h(C){return dd(C,c)}if(0<Gn.length){dd(Gn[0],c);for(var g=1;g<Gn.length;g++){var j=Gn[g];j.blockedOn===c&&(j.blockedOn=null)}}for(Yn!==null&&dd(Yn,c),Ia!==null&&dd(Ia,c),as!==null&&dd(as,c),Xn.forEach(h),zs.forEach(h),g=0;g<Jn.length;g++)j=Jn[g],j.blockedOn===c&&(j.blockedOn=null);for(;0<Jn.length&&(g=Jn[0],g.blockedOn===null);)vi(g),g.blockedOn===null&&Jn.shift()}var xc=T.ReactCurrentBatchConfig,Yf=!0;function H8(c,h,g,j){var C=ft,D=xc.transition;xc.transition=null;try{ft=1,zg(c,h,g,j)}finally{ft=C,xc.transition=D}}function q8(c,h,g,j){var C=ft,D=xc.transition;xc.transition=null;try{ft=4,zg(c,h,g,j)}finally{ft=C,xc.transition=D}}function zg(c,h,g,j){if(Yf){var C=Wg(c,h,g,j);if(C===null)lx(c,h,j,Xf,g),ud(c,j);else if(Vf(C,c,h,g,j))j.stopPropagation();else if(ud(c,j),h&4&&-1<Kf.indexOf(c)){for(;C!==null;){var D=kd(C);if(D!==null&&Et(D),D=Wg(c,h,g,j),D===null&&lx(c,h,j,Xf,g),D===C)break;C=D}C!==null&&j.stopPropagation()}else lx(c,h,j,null,g)}}var Xf=null;function Wg(c,h,g,j){if(Xf=null,c=Ge(j),c=hl(c),c!==null)if(h=ae(c),h===null)c=null;else if(g=h.tag,g===13){if(c=je(h),c!==null)return c;c=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Xf=c,null}function Jk(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bt()){case Cr:return 1;case Dr:return 4;case nn:case rs:return 16;case Zr:return 536870912;default:return 16}default:return 16}}var _o=null,Kg=null,Jf=null;function Qk(){if(Jf)return Jf;var c,h=Kg,g=h.length,j,C="value"in _o?_o.value:_o.textContent,D=C.length;for(c=0;c<g&&h[c]===C[c];c++);var Q=g-c;for(j=1;j<=Q&&h[g-j]===C[D-j];j++);return Jf=C.slice(c,1<j?1-j:void 0)}function Qf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Zf(){return!0}function Zk(){return!1}function ss(c){function h(g,j,C,D,Q){this._reactName=g,this._targetInst=C,this.type=j,this.nativeEvent=D,this.target=Q,this.currentTarget=null;for(var ue in c)c.hasOwnProperty(ue)&&(g=c[ue],this[ue]=g?g(D):D[ue]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Zf:Zk,this.isPropagationStopped=Zk,this}return se(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Zf)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Zf)},persist:function(){},isPersistent:Zf}),h}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=ss(yc),fd=se({},yc,{view:0,detail:0}),z8=ss(fd),Gg,Yg,pd,e0=se({},fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jg,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==pd&&(pd&&c.type==="mousemove"?(Gg=c.screenX-pd.screenX,Yg=c.screenY-pd.screenY):Yg=Gg=0,pd=c),Gg)},movementY:function(c){return"movementY"in c?c.movementY:Yg}}),eS=ss(e0),W8=se({},e0,{dataTransfer:0}),K8=ss(W8),V8=se({},fd,{relatedTarget:0}),Xg=ss(V8),G8=se({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),Y8=ss(G8),X8=se({},yc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),J8=ss(X8),Q8=se({},yc,{data:0}),tS=ss(Q8),Z8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rL(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=tL[c])?!!h[c]:!1}function Jg(){return rL}var nL=se({},fd,{key:function(c){if(c.key){var h=Z8[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Qf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?eL[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jg,charCode:function(c){return c.type==="keypress"?Qf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Qf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),aL=ss(nL),sL=se({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rS=ss(sL),iL=se({},fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jg}),oL=ss(iL),lL=se({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),cL=ss(lL),uL=se({},e0,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),dL=ss(uL),hL=[9,13,27,32],Qg=l&&"CompositionEvent"in window,md=null;l&&"documentMode"in document&&(md=document.documentMode);var fL=l&&"TextEvent"in window&&!md,nS=l&&(!Qg||md&&8<md&&11>=md),aS=" ",sS=!1;function iS(c,h){switch(c){case"keyup":return hL.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var vc=!1;function pL(c,h){switch(c){case"compositionend":return oS(h);case"keypress":return h.which!==32?null:(sS=!0,aS);case"textInput":return c=h.data,c===aS&&sS?null:c;default:return null}}function mL(c,h){if(vc)return c==="compositionend"||!Qg&&iS(c,h)?(c=Qk(),Jf=Kg=_o=null,vc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return nS&&h.locale!=="ko"?null:h.data;default:return null}}var gL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!gL[c.type]:h==="textarea"}function cS(c,h,g,j){Rt(j),h=s0(h,"onChange"),0<h.length&&(g=new Vg("onChange","change",null,g,j),c.push({event:g,listeners:h}))}var gd=null,xd=null;function xL(c){ES(c,0)}function t0(c){var h=kc(c);if(q(h))return c}function yL(c,h){if(c==="change")return h}var uS=!1;if(l){var Zg;if(l){var ex="oninput"in document;if(!ex){var dS=document.createElement("div");dS.setAttribute("oninput","return;"),ex=typeof dS.oninput=="function"}Zg=ex}else Zg=!1;uS=Zg&&(!document.documentMode||9<document.documentMode)}function hS(){gd&&(gd.detachEvent("onpropertychange",fS),xd=gd=null)}function fS(c){if(c.propertyName==="value"&&t0(xd)){var h=[];cS(h,xd,c,Ge(c)),Ft(xL,h)}}function vL(c,h,g){c==="focusin"?(hS(),gd=h,xd=g,gd.attachEvent("onpropertychange",fS)):c==="focusout"&&hS()}function bL(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return t0(xd)}function wL(c,h){if(c==="click")return t0(h)}function jL(c,h){if(c==="input"||c==="change")return t0(h)}function NL(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Ks=typeof Object.is=="function"?Object.is:NL;function yd(c,h){if(Ks(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),j=Object.keys(h);if(g.length!==j.length)return!1;for(j=0;j<g.length;j++){var C=g[j];if(!u.call(h,C)||!Ks(c[C],h[C]))return!1}return!0}function pS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function mS(c,h){var g=pS(c);c=0;for(var j;g;){if(g.nodeType===3){if(j=c+g.textContent.length,c<=h&&j>=h)return{node:g,offset:h-c};c=j}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=pS(g)}}function gS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?gS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function xS(){for(var c=window,h=Ae();h instanceof c.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)c=h.contentWindow;else break;h=Ae(c.document)}return h}function tx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function kL(c){var h=xS(),g=c.focusedElem,j=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&gS(g.ownerDocument.documentElement,g)){if(j!==null&&tx(g)){if(h=j.start,c=j.end,c===void 0&&(c=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(c,g.value.length);else if(c=(h=g.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var C=g.textContent.length,D=Math.min(j.start,C);j=j.end===void 0?D:Math.min(j.end,C),!c.extend&&D>j&&(C=j,j=D,D=C),C=mS(g,D);var Q=mS(g,j);C&&Q&&(c.rangeCount!==1||c.anchorNode!==C.node||c.anchorOffset!==C.offset||c.focusNode!==Q.node||c.focusOffset!==Q.offset)&&(h=h.createRange(),h.setStart(C.node,C.offset),c.removeAllRanges(),D>j?(c.addRange(h),c.extend(Q.node,Q.offset)):(h.setEnd(Q.node,Q.offset),c.addRange(h)))}}for(h=[],c=g;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)c=h[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var SL=l&&"documentMode"in document&&11>=document.documentMode,bc=null,rx=null,vd=null,nx=!1;function yS(c,h,g){var j=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;nx||bc==null||bc!==Ae(j)||(j=bc,"selectionStart"in j&&tx(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),vd&&yd(vd,j)||(vd=j,j=s0(rx,"onSelect"),0<j.length&&(h=new Vg("onSelect","select",null,h,g),c.push({event:h,listeners:j}),h.target=bc)))}function r0(c,h){var g={};return g[c.toLowerCase()]=h.toLowerCase(),g["Webkit"+c]="webkit"+h,g["Moz"+c]="moz"+h,g}var wc={animationend:r0("Animation","AnimationEnd"),animationiteration:r0("Animation","AnimationIteration"),animationstart:r0("Animation","AnimationStart"),transitionend:r0("Transition","TransitionEnd")},ax={},vS={};l&&(vS=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function n0(c){if(ax[c])return ax[c];if(!wc[c])return c;var h=wc[c],g;for(g in h)if(h.hasOwnProperty(g)&&g in vS)return ax[c]=h[g];return c}var bS=n0("animationend"),wS=n0("animationiteration"),jS=n0("animationstart"),NS=n0("transitionend"),kS=new Map,SS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(c,h){kS.set(c,h),i(h,[c])}for(var sx=0;sx<SS.length;sx++){var ix=SS[sx],_L=ix.toLowerCase(),EL=ix[0].toUpperCase()+ix.slice(1);Eo(_L,"on"+EL)}Eo(bS,"onAnimationEnd"),Eo(wS,"onAnimationIteration"),Eo(jS,"onAnimationStart"),Eo("dblclick","onDoubleClick"),Eo("focusin","onFocus"),Eo("focusout","onBlur"),Eo(NS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AL=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function _S(c,h,g){var j=c.type||"unknown-event";c.currentTarget=g,re(j,h,void 0,c),c.currentTarget=null}function ES(c,h){h=(h&4)!==0;for(var g=0;g<c.length;g++){var j=c[g],C=j.event;j=j.listeners;e:{var D=void 0;if(h)for(var Q=j.length-1;0<=Q;Q--){var ue=j[Q],ge=ue.instance,Le=ue.currentTarget;if(ue=ue.listener,ge!==D&&C.isPropagationStopped())break e;_S(C,ue,Le),D=ge}else for(Q=0;Q<j.length;Q++){if(ue=j[Q],ge=ue.instance,Le=ue.currentTarget,ue=ue.listener,ge!==D&&C.isPropagationStopped())break e;_S(C,ue,Le),D=ge}}}if(Y)throw c=K,Y=!1,K=null,c}function en(c,h){var g=h[px];g===void 0&&(g=h[px]=new Set);var j=c+"__bubble";g.has(j)||(AS(h,c,2,!1),g.add(j))}function ox(c,h,g){var j=0;h&&(j|=4),AS(g,c,j,h)}var a0="_reactListening"+Math.random().toString(36).slice(2);function wd(c){if(!c[a0]){c[a0]=!0,n.forEach(function(g){g!=="selectionchange"&&(AL.has(g)||ox(g,!1,c),ox(g,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[a0]||(h[a0]=!0,ox("selectionchange",!1,h))}}function AS(c,h,g,j){switch(Jk(h)){case 1:var C=H8;break;case 4:C=q8;break;default:C=zg}g=C.bind(null,h,g,c),C=void 0,!br||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),j?C!==void 0?c.addEventListener(h,g,{capture:!0,passive:C}):c.addEventListener(h,g,!0):C!==void 0?c.addEventListener(h,g,{passive:C}):c.addEventListener(h,g,!1)}function lx(c,h,g,j,C){var D=j;if((h&1)===0&&(h&2)===0&&j!==null)e:for(;;){if(j===null)return;var Q=j.tag;if(Q===3||Q===4){var ue=j.stateNode.containerInfo;if(ue===C||ue.nodeType===8&&ue.parentNode===C)break;if(Q===4)for(Q=j.return;Q!==null;){var ge=Q.tag;if((ge===3||ge===4)&&(ge=Q.stateNode.containerInfo,ge===C||ge.nodeType===8&&ge.parentNode===C))return;Q=Q.return}for(;ue!==null;){if(Q=hl(ue),Q===null)return;if(ge=Q.tag,ge===5||ge===6){j=D=Q;continue e}ue=ue.parentNode}}j=j.return}Ft(function(){var Le=D,Ze=Ge(g),at=[];e:{var Je=kS.get(c);if(Je!==void 0){var jt=Vg,At=c;switch(c){case"keypress":if(Qf(g)===0)break e;case"keydown":case"keyup":jt=aL;break;case"focusin":At="focus",jt=Xg;break;case"focusout":At="blur",jt=Xg;break;case"beforeblur":case"afterblur":jt=Xg;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=eS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=K8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=oL;break;case bS:case wS:case jS:jt=Y8;break;case NS:jt=cL;break;case"scroll":jt=z8;break;case"wheel":jt=dL;break;case"copy":case"cut":case"paste":jt=J8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=rS}var Pt=(h&4)!==0,vn=!Pt&&c==="scroll",Ie=Pt?Je!==null?Je+"Capture":null:Je;Pt=[];for(var be=Le,Me;be!==null;){Me=be;var it=Me.stateNode;if(Me.tag===5&&it!==null&&(Me=it,Ie!==null&&(it=dr(be,Ie),it!=null&&Pt.push(jd(be,it,Me)))),vn)break;be=be.return}0<Pt.length&&(Je=new jt(Je,At,null,g,Ze),at.push({event:Je,listeners:Pt}))}}if((h&7)===0){e:{if(Je=c==="mouseover"||c==="pointerover",jt=c==="mouseout"||c==="pointerout",Je&&g!==Se&&(At=g.relatedTarget||g.fromElement)&&(hl(At)||At[qi]))break e;if((jt||Je)&&(Je=Ze.window===Ze?Ze:(Je=Ze.ownerDocument)?Je.defaultView||Je.parentWindow:window,jt?(At=g.relatedTarget||g.toElement,jt=Le,At=At?hl(At):null,At!==null&&(vn=ae(At),At!==vn||At.tag!==5&&At.tag!==6)&&(At=null)):(jt=null,At=Le),jt!==At)){if(Pt=eS,it="onMouseLeave",Ie="onMouseEnter",be="mouse",(c==="pointerout"||c==="pointerover")&&(Pt=rS,it="onPointerLeave",Ie="onPointerEnter",be="pointer"),vn=jt==null?Je:kc(jt),Me=At==null?Je:kc(At),Je=new Pt(it,be+"leave",jt,g,Ze),Je.target=vn,Je.relatedTarget=Me,it=null,hl(Ze)===Le&&(Pt=new Pt(Ie,be+"enter",At,g,Ze),Pt.target=Me,Pt.relatedTarget=vn,it=Pt),vn=it,jt&&At)t:{for(Pt=jt,Ie=At,be=0,Me=Pt;Me;Me=jc(Me))be++;for(Me=0,it=Ie;it;it=jc(it))Me++;for(;0<be-Me;)Pt=jc(Pt),be--;for(;0<Me-be;)Ie=jc(Ie),Me--;for(;be--;){if(Pt===Ie||Ie!==null&&Pt===Ie.alternate)break t;Pt=jc(Pt),Ie=jc(Ie)}Pt=null}else Pt=null;jt!==null&&TS(at,Je,jt,Pt,!1),At!==null&&vn!==null&&TS(at,vn,At,Pt,!0)}}e:{if(Je=Le?kc(Le):window,jt=Je.nodeName&&Je.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Je.type==="file")var Mt=yL;else if(lS(Je))if(uS)Mt=jL;else{Mt=bL;var zt=vL}else(jt=Je.nodeName)&&jt.toLowerCase()==="input"&&(Je.type==="checkbox"||Je.type==="radio")&&(Mt=wL);if(Mt&&(Mt=Mt(c,Le))){cS(at,Mt,g,Ze);break e}zt&&zt(c,Je,Le),c==="focusout"&&(zt=Je._wrapperState)&&zt.controlled&&Je.type==="number"&&$e(Je,"number",Je.value)}switch(zt=Le?kc(Le):window,c){case"focusin":(lS(zt)||zt.contentEditable==="true")&&(bc=zt,rx=Le,vd=null);break;case"focusout":vd=rx=bc=null;break;case"mousedown":nx=!0;break;case"contextmenu":case"mouseup":case"dragend":nx=!1,yS(at,g,Ze);break;case"selectionchange":if(SL)break;case"keydown":case"keyup":yS(at,g,Ze)}var Wt;if(Qg)e:{switch(c){case"compositionstart":var tr="onCompositionStart";break e;case"compositionend":tr="onCompositionEnd";break e;case"compositionupdate":tr="onCompositionUpdate";break e}tr=void 0}else vc?iS(c,g)&&(tr="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(tr="onCompositionStart");tr&&(nS&&g.locale!=="ko"&&(vc||tr!=="onCompositionStart"?tr==="onCompositionEnd"&&vc&&(Wt=Qk()):(_o=Ze,Kg="value"in _o?_o.value:_o.textContent,vc=!0)),zt=s0(Le,tr),0<zt.length&&(tr=new tS(tr,c,null,g,Ze),at.push({event:tr,listeners:zt}),Wt?tr.data=Wt:(Wt=oS(g),Wt!==null&&(tr.data=Wt)))),(Wt=fL?pL(c,g):mL(c,g))&&(Le=s0(Le,"onBeforeInput"),0<Le.length&&(Ze=new tS("onBeforeInput","beforeinput",null,g,Ze),at.push({event:Ze,listeners:Le}),Ze.data=Wt))}ES(at,h)})}function jd(c,h,g){return{instance:c,listener:h,currentTarget:g}}function s0(c,h){for(var g=h+"Capture",j=[];c!==null;){var C=c,D=C.stateNode;C.tag===5&&D!==null&&(C=D,D=dr(c,g),D!=null&&j.unshift(jd(c,D,C)),D=dr(c,h),D!=null&&j.push(jd(c,D,C))),c=c.return}return j}function jc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function TS(c,h,g,j,C){for(var D=h._reactName,Q=[];g!==null&&g!==j;){var ue=g,ge=ue.alternate,Le=ue.stateNode;if(ge!==null&&ge===j)break;ue.tag===5&&Le!==null&&(ue=Le,C?(ge=dr(g,D),ge!=null&&Q.unshift(jd(g,ge,ue))):C||(ge=dr(g,D),ge!=null&&Q.push(jd(g,ge,ue)))),g=g.return}Q.length!==0&&c.push({event:h,listeners:Q})}var TL=/\r\n?/g,CL=/\u0000|\uFFFD/g;function CS(c){return(typeof c=="string"?c:""+c).replace(TL,`
`).replace(CL,"")}function i0(c,h,g){if(h=CS(h),CS(c)!==h&&g)throw Error(r(425))}function o0(){}var cx=null,ux=null;function dx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var hx=typeof setTimeout=="function"?setTimeout:void 0,OL=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,PL=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(c){return OS.resolve(null).then(c).catch(IL)}:hx;function IL(c){setTimeout(function(){throw c})}function fx(c,h){var g=h,j=0;do{var C=g.nextSibling;if(c.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(j===0){c.removeChild(C),hd(h);return}j--}else g!=="$"&&g!=="$?"&&g!=="$!"||j++;g=C}while(g);hd(h)}function Ao(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function PS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return c;h--}else g==="/$"&&h++}c=c.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),bi="__reactFiber$"+Nc,Nd="__reactProps$"+Nc,qi="__reactContainer$"+Nc,px="__reactEvents$"+Nc,DL="__reactListeners$"+Nc,ML="__reactHandles$"+Nc;function hl(c){var h=c[bi];if(h)return h;for(var g=c.parentNode;g;){if(h=g[qi]||g[bi]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(c=PS(c);c!==null;){if(g=c[bi])return g;c=PS(c)}return h}c=g,g=c.parentNode}return null}function kd(c){return c=c[bi]||c[qi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function kc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function l0(c){return c[Nd]||null}var mx=[],Sc=-1;function To(c){return{current:c}}function tn(c){0>Sc||(c.current=mx[Sc],mx[Sc]=null,Sc--)}function Vr(c,h){Sc++,mx[Sc]=c.current,c.current=h}var Co={},ya=To(Co),Ka=To(!1),fl=Co;function _c(c,h){var g=c.type.contextTypes;if(!g)return Co;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var C={},D;for(D in g)C[D]=h[D];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=C),C}function Va(c){return c=c.childContextTypes,c!=null}function c0(){tn(Ka),tn(ya)}function IS(c,h,g){if(ya.current!==Co)throw Error(r(168));Vr(ya,h),Vr(Ka,g)}function DS(c,h,g){var j=c.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return g;j=j.getChildContext();for(var C in j)if(!(C in h))throw Error(r(108,ve(c)||"Unknown",C));return se({},g,j)}function u0(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Co,fl=ya.current,Vr(ya,c),Vr(Ka,Ka.current),!0}function MS(c,h,g){var j=c.stateNode;if(!j)throw Error(r(169));g?(c=DS(c,h,fl),j.__reactInternalMemoizedMergedChildContext=c,tn(Ka),tn(ya),Vr(ya,c)):tn(Ka),Vr(Ka,g)}var zi=null,d0=!1,gx=!1;function RS(c){zi===null?zi=[c]:zi.push(c)}function RL(c){d0=!0,RS(c)}function Oo(){if(!gx&&zi!==null){gx=!0;var c=0,h=ft;try{var g=zi;for(ft=1;c<g.length;c++){var j=g[c];do j=j(!0);while(j!==null)}zi=null,d0=!1}catch(C){throw zi!==null&&(zi=zi.slice(c+1)),Ve(Cr,Oo),C}finally{ft=h,gx=!1}}return null}var Ec=[],Ac=0,h0=null,f0=0,ks=[],Ss=0,pl=null,Wi=1,Ki="";function ml(c,h){Ec[Ac++]=f0,Ec[Ac++]=h0,h0=c,f0=h}function FS(c,h,g){ks[Ss++]=Wi,ks[Ss++]=Ki,ks[Ss++]=pl,pl=c;var j=Wi;c=Ki;var C=32-qr(j)-1;j&=~(1<<C),g+=1;var D=32-qr(h)+C;if(30<D){var Q=C-C%5;D=(j&(1<<Q)-1).toString(32),j>>=Q,C-=Q,Wi=1<<32-qr(h)+C|g<<C|j,Ki=D+c}else Wi=1<<D|g<<C|j,Ki=c}function xx(c){c.return!==null&&(ml(c,1),FS(c,1,0))}function yx(c){for(;c===h0;)h0=Ec[--Ac],Ec[Ac]=null,f0=Ec[--Ac],Ec[Ac]=null;for(;c===pl;)pl=ks[--Ss],ks[Ss]=null,Ki=ks[--Ss],ks[Ss]=null,Wi=ks[--Ss],ks[Ss]=null}var is=null,os=null,an=!1,Vs=null;function $S(c,h){var g=Ts(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=c,h=c.deletions,h===null?(c.deletions=[g],c.flags|=16):h.push(g)}function LS(c,h){switch(c.tag){case 5:var g=c.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,is=c,os=Ao(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,is=c,os=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=pl!==null?{id:Wi,overflow:Ki}:null,c.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Ts(18,null,null,0),g.stateNode=h,g.return=c,c.child=g,is=c,os=null,!0):!1;default:return!1}}function vx(c){return(c.mode&1)!==0&&(c.flags&128)===0}function bx(c){if(an){var h=os;if(h){var g=h;if(!LS(c,h)){if(vx(c))throw Error(r(418));h=Ao(g.nextSibling);var j=is;h&&LS(c,h)?$S(j,g):(c.flags=c.flags&-4097|2,an=!1,is=c)}}else{if(vx(c))throw Error(r(418));c.flags=c.flags&-4097|2,an=!1,is=c}}}function BS(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;is=c}function p0(c){if(c!==is)return!1;if(!an)return BS(c),an=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!dx(c.type,c.memoizedProps)),h&&(h=os)){if(vx(c))throw US(),Error(r(418));for(;h;)$S(c,h),h=Ao(h.nextSibling)}if(BS(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(h===0){os=Ao(c.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}c=c.nextSibling}os=null}}else os=is?Ao(c.stateNode.nextSibling):null;return!0}function US(){for(var c=os;c;)c=Ao(c.nextSibling)}function Tc(){os=is=null,an=!1}function wx(c){Vs===null?Vs=[c]:Vs.push(c)}var FL=T.ReactCurrentBatchConfig;function Sd(c,h,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var j=g.stateNode}if(!j)throw Error(r(147,c));var C=j,D=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function(Q){var ue=C.refs;Q===null?delete ue[D]:ue[D]=Q},h._stringRef=D,h)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function m0(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function HS(c){var h=c._init;return h(c._payload)}function qS(c){function h(Ie,be){if(c){var Me=Ie.deletions;Me===null?(Ie.deletions=[be],Ie.flags|=16):Me.push(be)}}function g(Ie,be){if(!c)return null;for(;be!==null;)h(Ie,be),be=be.sibling;return null}function j(Ie,be){for(Ie=new Map;be!==null;)be.key!==null?Ie.set(be.key,be):Ie.set(be.index,be),be=be.sibling;return Ie}function C(Ie,be){return Ie=Lo(Ie,be),Ie.index=0,Ie.sibling=null,Ie}function D(Ie,be,Me){return Ie.index=Me,c?(Me=Ie.alternate,Me!==null?(Me=Me.index,Me<be?(Ie.flags|=2,be):Me):(Ie.flags|=2,be)):(Ie.flags|=1048576,be)}function Q(Ie){return c&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ue(Ie,be,Me,it){return be===null||be.tag!==6?(be=hy(Me,Ie.mode,it),be.return=Ie,be):(be=C(be,Me),be.return=Ie,be)}function ge(Ie,be,Me,it){var Mt=Me.type;return Mt===_?Ze(Ie,be,Me.props.children,it,Me.key):be!==null&&(be.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===V&&HS(Mt)===be.type)?(it=C(be,Me.props),it.ref=Sd(Ie,be,Me),it.return=Ie,it):(it=L0(Me.type,Me.key,Me.props,null,Ie.mode,it),it.ref=Sd(Ie,be,Me),it.return=Ie,it)}function Le(Ie,be,Me,it){return be===null||be.tag!==4||be.stateNode.containerInfo!==Me.containerInfo||be.stateNode.implementation!==Me.implementation?(be=fy(Me,Ie.mode,it),be.return=Ie,be):(be=C(be,Me.children||[]),be.return=Ie,be)}function Ze(Ie,be,Me,it,Mt){return be===null||be.tag!==7?(be=Nl(Me,Ie.mode,it,Mt),be.return=Ie,be):(be=C(be,Me),be.return=Ie,be)}function at(Ie,be,Me){if(typeof be=="string"&&be!==""||typeof be=="number")return be=hy(""+be,Ie.mode,Me),be.return=Ie,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case E:return Me=L0(be.type,be.key,be.props,null,Ie.mode,Me),Me.ref=Sd(Ie,null,be),Me.return=Ie,Me;case S:return be=fy(be,Ie.mode,Me),be.return=Ie,be;case V:var it=be._init;return at(Ie,it(be._payload),Me)}if(Nt(be)||R(be))return be=Nl(be,Ie.mode,Me,null),be.return=Ie,be;m0(Ie,be)}return null}function Je(Ie,be,Me,it){var Mt=be!==null?be.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Mt!==null?null:ue(Ie,be,""+Me,it);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:return Me.key===Mt?ge(Ie,be,Me,it):null;case S:return Me.key===Mt?Le(Ie,be,Me,it):null;case V:return Mt=Me._init,Je(Ie,be,Mt(Me._payload),it)}if(Nt(Me)||R(Me))return Mt!==null?null:Ze(Ie,be,Me,it,null);m0(Ie,Me)}return null}function jt(Ie,be,Me,it,Mt){if(typeof it=="string"&&it!==""||typeof it=="number")return Ie=Ie.get(Me)||null,ue(be,Ie,""+it,Mt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case E:return Ie=Ie.get(it.key===null?Me:it.key)||null,ge(be,Ie,it,Mt);case S:return Ie=Ie.get(it.key===null?Me:it.key)||null,Le(be,Ie,it,Mt);case V:var zt=it._init;return jt(Ie,be,Me,zt(it._payload),Mt)}if(Nt(it)||R(it))return Ie=Ie.get(Me)||null,Ze(be,Ie,it,Mt,null);m0(be,it)}return null}function At(Ie,be,Me,it){for(var Mt=null,zt=null,Wt=be,tr=be=0,ea=null;Wt!==null&&tr<Me.length;tr++){Wt.index>tr?(ea=Wt,Wt=null):ea=Wt.sibling;var Ar=Je(Ie,Wt,Me[tr],it);if(Ar===null){Wt===null&&(Wt=ea);break}c&&Wt&&Ar.alternate===null&&h(Ie,Wt),be=D(Ar,be,tr),zt===null?Mt=Ar:zt.sibling=Ar,zt=Ar,Wt=ea}if(tr===Me.length)return g(Ie,Wt),an&&ml(Ie,tr),Mt;if(Wt===null){for(;tr<Me.length;tr++)Wt=at(Ie,Me[tr],it),Wt!==null&&(be=D(Wt,be,tr),zt===null?Mt=Wt:zt.sibling=Wt,zt=Wt);return an&&ml(Ie,tr),Mt}for(Wt=j(Ie,Wt);tr<Me.length;tr++)ea=jt(Wt,Ie,tr,Me[tr],it),ea!==null&&(c&&ea.alternate!==null&&Wt.delete(ea.key===null?tr:ea.key),be=D(ea,be,tr),zt===null?Mt=ea:zt.sibling=ea,zt=ea);return c&&Wt.forEach(function(Bo){return h(Ie,Bo)}),an&&ml(Ie,tr),Mt}function Pt(Ie,be,Me,it){var Mt=R(Me);if(typeof Mt!="function")throw Error(r(150));if(Me=Mt.call(Me),Me==null)throw Error(r(151));for(var zt=Mt=null,Wt=be,tr=be=0,ea=null,Ar=Me.next();Wt!==null&&!Ar.done;tr++,Ar=Me.next()){Wt.index>tr?(ea=Wt,Wt=null):ea=Wt.sibling;var Bo=Je(Ie,Wt,Ar.value,it);if(Bo===null){Wt===null&&(Wt=ea);break}c&&Wt&&Bo.alternate===null&&h(Ie,Wt),be=D(Bo,be,tr),zt===null?Mt=Bo:zt.sibling=Bo,zt=Bo,Wt=ea}if(Ar.done)return g(Ie,Wt),an&&ml(Ie,tr),Mt;if(Wt===null){for(;!Ar.done;tr++,Ar=Me.next())Ar=at(Ie,Ar.value,it),Ar!==null&&(be=D(Ar,be,tr),zt===null?Mt=Ar:zt.sibling=Ar,zt=Ar);return an&&ml(Ie,tr),Mt}for(Wt=j(Ie,Wt);!Ar.done;tr++,Ar=Me.next())Ar=jt(Wt,Ie,tr,Ar.value,it),Ar!==null&&(c&&Ar.alternate!==null&&Wt.delete(Ar.key===null?tr:Ar.key),be=D(Ar,be,tr),zt===null?Mt=Ar:zt.sibling=Ar,zt=Ar);return c&&Wt.forEach(function(g7){return h(Ie,g7)}),an&&ml(Ie,tr),Mt}function vn(Ie,be,Me,it){if(typeof Me=="object"&&Me!==null&&Me.type===_&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case E:e:{for(var Mt=Me.key,zt=be;zt!==null;){if(zt.key===Mt){if(Mt=Me.type,Mt===_){if(zt.tag===7){g(Ie,zt.sibling),be=C(zt,Me.props.children),be.return=Ie,Ie=be;break e}}else if(zt.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===V&&HS(Mt)===zt.type){g(Ie,zt.sibling),be=C(zt,Me.props),be.ref=Sd(Ie,zt,Me),be.return=Ie,Ie=be;break e}g(Ie,zt);break}else h(Ie,zt);zt=zt.sibling}Me.type===_?(be=Nl(Me.props.children,Ie.mode,it,Me.key),be.return=Ie,Ie=be):(it=L0(Me.type,Me.key,Me.props,null,Ie.mode,it),it.ref=Sd(Ie,be,Me),it.return=Ie,Ie=it)}return Q(Ie);case S:e:{for(zt=Me.key;be!==null;){if(be.key===zt)if(be.tag===4&&be.stateNode.containerInfo===Me.containerInfo&&be.stateNode.implementation===Me.implementation){g(Ie,be.sibling),be=C(be,Me.children||[]),be.return=Ie,Ie=be;break e}else{g(Ie,be);break}else h(Ie,be);be=be.sibling}be=fy(Me,Ie.mode,it),be.return=Ie,Ie=be}return Q(Ie);case V:return zt=Me._init,vn(Ie,be,zt(Me._payload),it)}if(Nt(Me))return At(Ie,be,Me,it);if(R(Me))return Pt(Ie,be,Me,it);m0(Ie,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,be!==null&&be.tag===6?(g(Ie,be.sibling),be=C(be,Me),be.return=Ie,Ie=be):(g(Ie,be),be=hy(Me,Ie.mode,it),be.return=Ie,Ie=be),Q(Ie)):g(Ie,be)}return vn}var Cc=qS(!0),zS=qS(!1),g0=To(null),x0=null,Oc=null,jx=null;function Nx(){jx=Oc=x0=null}function kx(c){var h=g0.current;tn(g0),c._currentValue=h}function Sx(c,h,g){for(;c!==null;){var j=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),c===g)break;c=c.return}}function Pc(c,h){x0=c,jx=Oc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(Ga=!0),c.firstContext=null)}function _s(c){var h=c._currentValue;if(jx!==c)if(c={context:c,memoizedValue:h,next:null},Oc===null){if(x0===null)throw Error(r(308));Oc=c,x0.dependencies={lanes:0,firstContext:c}}else Oc=Oc.next=c;return h}var gl=null;function _x(c){gl===null?gl=[c]:gl.push(c)}function WS(c,h,g,j){var C=h.interleaved;return C===null?(g.next=g,_x(h)):(g.next=C.next,C.next=g),h.interleaved=g,Vi(c,j)}function Vi(c,h){c.lanes|=h;var g=c.alternate;for(g!==null&&(g.lanes|=h),g=c,c=c.return;c!==null;)c.childLanes|=h,g=c.alternate,g!==null&&(g.childLanes|=h),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Po=!1;function Ex(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KS(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Gi(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Io(c,h,g){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Sr&2)!==0){var C=j.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),j.pending=h,Vi(c,g)}return C=j.interleaved,C===null?(h.next=h,_x(j)):(h.next=C.next,C.next=h),j.interleaved=h,Vi(c,g)}function y0(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var j=h.lanes;j&=c.pendingLanes,g|=j,h.lanes=g,Dt(c,g)}}function VS(c,h){var g=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,g===j)){var C=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var Q={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};D===null?C=D=Q:D=D.next=Q,g=g.next}while(g!==null);D===null?C=D=h:D=D.next=h}else C=D=h;g={baseState:j.baseState,firstBaseUpdate:C,lastBaseUpdate:D,shared:j.shared,effects:j.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function v0(c,h,g,j){var C=c.updateQueue;Po=!1;var D=C.firstBaseUpdate,Q=C.lastBaseUpdate,ue=C.shared.pending;if(ue!==null){C.shared.pending=null;var ge=ue,Le=ge.next;ge.next=null,Q===null?D=Le:Q.next=Le,Q=ge;var Ze=c.alternate;Ze!==null&&(Ze=Ze.updateQueue,ue=Ze.lastBaseUpdate,ue!==Q&&(ue===null?Ze.firstBaseUpdate=Le:ue.next=Le,Ze.lastBaseUpdate=ge))}if(D!==null){var at=C.baseState;Q=0,Ze=Le=ge=null,ue=D;do{var Je=ue.lane,jt=ue.eventTime;if((j&Je)===Je){Ze!==null&&(Ze=Ze.next={eventTime:jt,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var At=c,Pt=ue;switch(Je=h,jt=g,Pt.tag){case 1:if(At=Pt.payload,typeof At=="function"){at=At.call(jt,at,Je);break e}at=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Pt.payload,Je=typeof At=="function"?At.call(jt,at,Je):At,Je==null)break e;at=se({},at,Je);break e;case 2:Po=!0}}ue.callback!==null&&ue.lane!==0&&(c.flags|=64,Je=C.effects,Je===null?C.effects=[ue]:Je.push(ue))}else jt={eventTime:jt,lane:Je,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Ze===null?(Le=Ze=jt,ge=at):Ze=Ze.next=jt,Q|=Je;if(ue=ue.next,ue===null){if(ue=C.shared.pending,ue===null)break;Je=ue,ue=Je.next,Je.next=null,C.lastBaseUpdate=Je,C.shared.pending=null}}while(!0);if(Ze===null&&(ge=at),C.baseState=ge,C.firstBaseUpdate=Le,C.lastBaseUpdate=Ze,h=C.shared.interleaved,h!==null){C=h;do Q|=C.lane,C=C.next;while(C!==h)}else D===null&&(C.shared.lanes=0);vl|=Q,c.lanes=Q,c.memoizedState=at}}function GS(c,h,g){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var j=c[h],C=j.callback;if(C!==null){if(j.callback=null,j=g,typeof C!="function")throw Error(r(191,C));C.call(j)}}}var _d={},wi=To(_d),Ed=To(_d),Ad=To(_d);function xl(c){if(c===_d)throw Error(r(174));return c}function Ax(c,h){switch(Vr(Ad,h),Vr(Ed,c),Vr(wi,_d),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Hr(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Hr(h,c)}tn(wi),Vr(wi,h)}function Ic(){tn(wi),tn(Ed),tn(Ad)}function YS(c){xl(Ad.current);var h=xl(wi.current),g=Hr(h,c.type);h!==g&&(Vr(Ed,c),Vr(wi,g))}function Tx(c){Ed.current===c&&(tn(wi),tn(Ed))}var cn=To(0);function b0(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Cx=[];function Ox(){for(var c=0;c<Cx.length;c++)Cx[c]._workInProgressVersionPrimary=null;Cx.length=0}var w0=T.ReactCurrentDispatcher,Px=T.ReactCurrentBatchConfig,yl=0,un=null,Mn=null,Qn=null,j0=!1,Td=!1,Cd=0,$L=0;function va(){throw Error(r(321))}function Ix(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!Ks(c[g],h[g]))return!1;return!0}function Dx(c,h,g,j,C,D){if(yl=D,un=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,w0.current=c===null||c.memoizedState===null?HL:qL,c=g(j,C),Td){D=0;do{if(Td=!1,Cd=0,25<=D)throw Error(r(301));D+=1,Qn=Mn=null,h.updateQueue=null,w0.current=zL,c=g(j,C)}while(Td)}if(w0.current=S0,h=Mn!==null&&Mn.next!==null,yl=0,Qn=Mn=un=null,j0=!1,h)throw Error(r(300));return c}function Mx(){var c=Cd!==0;return Cd=0,c}function ji(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?un.memoizedState=Qn=c:Qn=Qn.next=c,Qn}function Es(){if(Mn===null){var c=un.alternate;c=c!==null?c.memoizedState:null}else c=Mn.next;var h=Qn===null?un.memoizedState:Qn.next;if(h!==null)Qn=h,Mn=c;else{if(c===null)throw Error(r(310));Mn=c,c={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Qn===null?un.memoizedState=Qn=c:Qn=Qn.next=c}return Qn}function Od(c,h){return typeof h=="function"?h(c):h}function Rx(c){var h=Es(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var j=Mn,C=j.baseQueue,D=g.pending;if(D!==null){if(C!==null){var Q=C.next;C.next=D.next,D.next=Q}j.baseQueue=C=D,g.pending=null}if(C!==null){D=C.next,j=j.baseState;var ue=Q=null,ge=null,Le=D;do{var Ze=Le.lane;if((yl&Ze)===Ze)ge!==null&&(ge=ge.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),j=Le.hasEagerState?Le.eagerState:c(j,Le.action);else{var at={lane:Ze,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};ge===null?(ue=ge=at,Q=j):ge=ge.next=at,un.lanes|=Ze,vl|=Ze}Le=Le.next}while(Le!==null&&Le!==D);ge===null?Q=j:ge.next=ue,Ks(j,h.memoizedState)||(Ga=!0),h.memoizedState=j,h.baseState=Q,h.baseQueue=ge,g.lastRenderedState=j}if(c=g.interleaved,c!==null){C=c;do D=C.lane,un.lanes|=D,vl|=D,C=C.next;while(C!==c)}else C===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Fx(c){var h=Es(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var j=g.dispatch,C=g.pending,D=h.memoizedState;if(C!==null){g.pending=null;var Q=C=C.next;do D=c(D,Q.action),Q=Q.next;while(Q!==C);Ks(D,h.memoizedState)||(Ga=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),g.lastRenderedState=D}return[D,j]}function XS(){}function JS(c,h){var g=un,j=Es(),C=h(),D=!Ks(j.memoizedState,C);if(D&&(j.memoizedState=C,Ga=!0),j=j.queue,$x(e_.bind(null,g,j,c),[c]),j.getSnapshot!==h||D||Qn!==null&&Qn.memoizedState.tag&1){if(g.flags|=2048,Pd(9,ZS.bind(null,g,j,C,h),void 0,null),Zn===null)throw Error(r(349));(yl&30)!==0||QS(g,h,C)}return C}function QS(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=un.updateQueue,h===null?(h={lastEffect:null,stores:null},un.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function ZS(c,h,g,j){h.value=g,h.getSnapshot=j,t_(h)&&r_(c)}function e_(c,h,g){return g(function(){t_(h)&&r_(c)})}function t_(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!Ks(c,g)}catch{return!0}}function r_(c){var h=Vi(c,1);h!==null&&Js(h,c,1,-1)}function n_(c){var h=ji();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:c},h.queue=c,c=c.dispatch=UL.bind(null,un,c),[h.memoizedState,c]}function Pd(c,h,g,j){return c={tag:c,create:h,destroy:g,deps:j,next:null},h=un.updateQueue,h===null?(h={lastEffect:null,stores:null},un.updateQueue=h,h.lastEffect=c.next=c):(g=h.lastEffect,g===null?h.lastEffect=c.next=c:(j=g.next,g.next=c,c.next=j,h.lastEffect=c)),c}function a_(){return Es().memoizedState}function N0(c,h,g,j){var C=ji();un.flags|=c,C.memoizedState=Pd(1|h,g,void 0,j===void 0?null:j)}function k0(c,h,g,j){var C=Es();j=j===void 0?null:j;var D=void 0;if(Mn!==null){var Q=Mn.memoizedState;if(D=Q.destroy,j!==null&&Ix(j,Q.deps)){C.memoizedState=Pd(h,g,D,j);return}}un.flags|=c,C.memoizedState=Pd(1|h,g,D,j)}function s_(c,h){return N0(8390656,8,c,h)}function $x(c,h){return k0(2048,8,c,h)}function i_(c,h){return k0(4,2,c,h)}function o_(c,h){return k0(4,4,c,h)}function l_(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function c_(c,h,g){return g=g!=null?g.concat([c]):null,k0(4,4,l_.bind(null,h,c),g)}function Lx(){}function u_(c,h){var g=Es();h=h===void 0?null:h;var j=g.memoizedState;return j!==null&&h!==null&&Ix(h,j[1])?j[0]:(g.memoizedState=[c,h],c)}function d_(c,h){var g=Es();h=h===void 0?null:h;var j=g.memoizedState;return j!==null&&h!==null&&Ix(h,j[1])?j[0]:(c=c(),g.memoizedState=[c,h],c)}function h_(c,h,g){return(yl&21)===0?(c.baseState&&(c.baseState=!1,Ga=!0),c.memoizedState=g):(Ks(g,h)||(g=Xe(),un.lanes|=g,vl|=g,c.baseState=!0),h)}function LL(c,h){var g=ft;ft=g!==0&&4>g?g:4,c(!0);var j=Px.transition;Px.transition={};try{c(!1),h()}finally{ft=g,Px.transition=j}}function f_(){return Es().memoizedState}function BL(c,h,g){var j=Fo(c);if(g={lane:j,action:g,hasEagerState:!1,eagerState:null,next:null},p_(c))m_(h,g);else if(g=WS(c,h,g,j),g!==null){var C=Ma();Js(g,c,j,C),g_(g,h,j)}}function UL(c,h,g){var j=Fo(c),C={lane:j,action:g,hasEagerState:!1,eagerState:null,next:null};if(p_(c))m_(h,C);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var Q=h.lastRenderedState,ue=D(Q,g);if(C.hasEagerState=!0,C.eagerState=ue,Ks(ue,Q)){var ge=h.interleaved;ge===null?(C.next=C,_x(h)):(C.next=ge.next,ge.next=C),h.interleaved=C;return}}catch{}finally{}g=WS(c,h,C,j),g!==null&&(C=Ma(),Js(g,c,j,C),g_(g,h,j))}}function p_(c){var h=c.alternate;return c===un||h!==null&&h===un}function m_(c,h){Td=j0=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function g_(c,h,g){if((g&4194240)!==0){var j=h.lanes;j&=c.pendingLanes,g|=j,h.lanes=g,Dt(c,g)}}var S0={readContext:_s,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},HL={readContext:_s,useCallback:function(c,h){return ji().memoizedState=[c,h===void 0?null:h],c},useContext:_s,useEffect:s_,useImperativeHandle:function(c,h,g){return g=g!=null?g.concat([c]):null,N0(4194308,4,l_.bind(null,h,c),g)},useLayoutEffect:function(c,h){return N0(4194308,4,c,h)},useInsertionEffect:function(c,h){return N0(4,2,c,h)},useMemo:function(c,h){var g=ji();return h=h===void 0?null:h,c=c(),g.memoizedState=[c,h],c},useReducer:function(c,h,g){var j=ji();return h=g!==void 0?g(h):h,j.memoizedState=j.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},j.queue=c,c=c.dispatch=BL.bind(null,un,c),[j.memoizedState,c]},useRef:function(c){var h=ji();return c={current:c},h.memoizedState=c},useState:n_,useDebugValue:Lx,useDeferredValue:function(c){return ji().memoizedState=c},useTransition:function(){var c=n_(!1),h=c[0];return c=LL.bind(null,c[1]),ji().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,g){var j=un,C=ji();if(an){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Zn===null)throw Error(r(349));(yl&30)!==0||QS(j,h,g)}C.memoizedState=g;var D={value:g,getSnapshot:h};return C.queue=D,s_(e_.bind(null,j,D,c),[c]),j.flags|=2048,Pd(9,ZS.bind(null,j,D,g,h),void 0,null),g},useId:function(){var c=ji(),h=Zn.identifierPrefix;if(an){var g=Ki,j=Wi;g=(j&~(1<<32-qr(j)-1)).toString(32)+g,h=":"+h+"R"+g,g=Cd++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=$L++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},qL={readContext:_s,useCallback:u_,useContext:_s,useEffect:$x,useImperativeHandle:c_,useInsertionEffect:i_,useLayoutEffect:o_,useMemo:d_,useReducer:Rx,useRef:a_,useState:function(){return Rx(Od)},useDebugValue:Lx,useDeferredValue:function(c){var h=Es();return h_(h,Mn.memoizedState,c)},useTransition:function(){var c=Rx(Od)[0],h=Es().memoizedState;return[c,h]},useMutableSource:XS,useSyncExternalStore:JS,useId:f_,unstable_isNewReconciler:!1},zL={readContext:_s,useCallback:u_,useContext:_s,useEffect:$x,useImperativeHandle:c_,useInsertionEffect:i_,useLayoutEffect:o_,useMemo:d_,useReducer:Fx,useRef:a_,useState:function(){return Fx(Od)},useDebugValue:Lx,useDeferredValue:function(c){var h=Es();return Mn===null?h.memoizedState=c:h_(h,Mn.memoizedState,c)},useTransition:function(){var c=Fx(Od)[0],h=Es().memoizedState;return[c,h]},useMutableSource:XS,useSyncExternalStore:JS,useId:f_,unstable_isNewReconciler:!1};function Gs(c,h){if(c&&c.defaultProps){h=se({},h),c=c.defaultProps;for(var g in c)h[g]===void 0&&(h[g]=c[g]);return h}return h}function Bx(c,h,g,j){h=c.memoizedState,g=g(j,h),g=g==null?h:se({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var _0={isMounted:function(c){return(c=c._reactInternals)?ae(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var j=Ma(),C=Fo(c),D=Gi(j,C);D.payload=h,g!=null&&(D.callback=g),h=Io(c,D,C),h!==null&&(Js(h,c,C,j),y0(h,c,C))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var j=Ma(),C=Fo(c),D=Gi(j,C);D.tag=1,D.payload=h,g!=null&&(D.callback=g),h=Io(c,D,C),h!==null&&(Js(h,c,C,j),y0(h,c,C))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=Ma(),j=Fo(c),C=Gi(g,j);C.tag=2,h!=null&&(C.callback=h),h=Io(c,C,j),h!==null&&(Js(h,c,j,g),y0(h,c,j))}};function x_(c,h,g,j,C,D,Q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,D,Q):h.prototype&&h.prototype.isPureReactComponent?!yd(g,j)||!yd(C,D):!0}function y_(c,h,g){var j=!1,C=Co,D=h.contextType;return typeof D=="object"&&D!==null?D=_s(D):(C=Va(h)?fl:ya.current,j=h.contextTypes,D=(j=j!=null)?_c(c,C):Co),h=new h(g,D),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=_0,c.stateNode=h,h._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=C,c.__reactInternalMemoizedMaskedChildContext=D),h}function v_(c,h,g,j){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,j),h.state!==c&&_0.enqueueReplaceState(h,h.state,null)}function Ux(c,h,g,j){var C=c.stateNode;C.props=g,C.state=c.memoizedState,C.refs={},Ex(c);var D=h.contextType;typeof D=="object"&&D!==null?C.context=_s(D):(D=Va(h)?fl:ya.current,C.context=_c(c,D)),C.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Bx(c,h,D,g),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(h=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),h!==C.state&&_0.enqueueReplaceState(C,C.state,null),v0(c,g,C,j),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308)}function Dc(c,h){try{var g="",j=h;do g+=ie(j),j=j.return;while(j);var C=g}catch(D){C=`
Error generating stack: `+D.message+`
`+D.stack}return{value:c,source:h,stack:C,digest:null}}function Hx(c,h,g){return{value:c,source:null,stack:g??null,digest:h??null}}function qx(c,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var WL=typeof WeakMap=="function"?WeakMap:Map;function b_(c,h,g){g=Gi(-1,g),g.tag=3,g.payload={element:null};var j=h.value;return g.callback=function(){I0||(I0=!0,ay=j),qx(c,h)},g}function w_(c,h,g){g=Gi(-1,g),g.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var C=h.value;g.payload=function(){return j(C)},g.callback=function(){qx(c,h)}}var D=c.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(g.callback=function(){qx(c,h),typeof j!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var Q=h.stack;this.componentDidCatch(h.value,{componentStack:Q!==null?Q:""})}),g}function j_(c,h,g){var j=c.pingCache;if(j===null){j=c.pingCache=new WL;var C=new Set;j.set(h,C)}else C=j.get(h),C===void 0&&(C=new Set,j.set(h,C));C.has(g)||(C.add(g),c=s7.bind(null,c,h,g),h.then(c,c))}function N_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function k_(c,h,g,j,C){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Gi(-1,1),h.tag=2,Io(g,h,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=C,c)}var KL=T.ReactCurrentOwner,Ga=!1;function Da(c,h,g,j){h.child=c===null?zS(h,null,g,j):Cc(h,c.child,g,j)}function S_(c,h,g,j,C){g=g.render;var D=h.ref;return Pc(h,C),j=Dx(c,h,g,j,D,C),g=Mx(),c!==null&&!Ga?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~C,Yi(c,h,C)):(an&&g&&xx(h),h.flags|=1,Da(c,h,j,C),h.child)}function __(c,h,g,j,C){if(c===null){var D=g.type;return typeof D=="function"&&!dy(D)&&D.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=D,E_(c,h,D,j,C)):(c=L0(g.type,null,j,h,h.mode,C),c.ref=h.ref,c.return=h,h.child=c)}if(D=c.child,(c.lanes&C)===0){var Q=D.memoizedProps;if(g=g.compare,g=g!==null?g:yd,g(Q,j)&&c.ref===h.ref)return Yi(c,h,C)}return h.flags|=1,c=Lo(D,j),c.ref=h.ref,c.return=h,h.child=c}function E_(c,h,g,j,C){if(c!==null){var D=c.memoizedProps;if(yd(D,j)&&c.ref===h.ref)if(Ga=!1,h.pendingProps=j=D,(c.lanes&C)!==0)(c.flags&131072)!==0&&(Ga=!0);else return h.lanes=c.lanes,Yi(c,h,C)}return zx(c,h,g,j,C)}function A_(c,h,g){var j=h.pendingProps,C=j.children,D=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vr(Rc,ls),ls|=g;else{if((g&1073741824)===0)return c=D!==null?D.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Vr(Rc,ls),ls|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=D!==null?D.baseLanes:g,Vr(Rc,ls),ls|=j}else D!==null?(j=D.baseLanes|g,h.memoizedState=null):j=g,Vr(Rc,ls),ls|=j;return Da(c,h,C,g),h.child}function T_(c,h){var g=h.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function zx(c,h,g,j,C){var D=Va(g)?fl:ya.current;return D=_c(h,D),Pc(h,C),g=Dx(c,h,g,j,D,C),j=Mx(),c!==null&&!Ga?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~C,Yi(c,h,C)):(an&&j&&xx(h),h.flags|=1,Da(c,h,g,C),h.child)}function C_(c,h,g,j,C){if(Va(g)){var D=!0;u0(h)}else D=!1;if(Pc(h,C),h.stateNode===null)A0(c,h),y_(h,g,j),Ux(h,g,j,C),j=!0;else if(c===null){var Q=h.stateNode,ue=h.memoizedProps;Q.props=ue;var ge=Q.context,Le=g.contextType;typeof Le=="object"&&Le!==null?Le=_s(Le):(Le=Va(g)?fl:ya.current,Le=_c(h,Le));var Ze=g.getDerivedStateFromProps,at=typeof Ze=="function"||typeof Q.getSnapshotBeforeUpdate=="function";at||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==j||ge!==Le)&&v_(h,Q,j,Le),Po=!1;var Je=h.memoizedState;Q.state=Je,v0(h,j,Q,C),ge=h.memoizedState,ue!==j||Je!==ge||Ka.current||Po?(typeof Ze=="function"&&(Bx(h,g,Ze,j),ge=h.memoizedState),(ue=Po||x_(h,g,ue,j,Je,ge,Le))?(at||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=ge),Q.props=j,Q.state=ge,Q.context=Le,j=ue):(typeof Q.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{Q=h.stateNode,KS(c,h),ue=h.memoizedProps,Le=h.type===h.elementType?ue:Gs(h.type,ue),Q.props=Le,at=h.pendingProps,Je=Q.context,ge=g.contextType,typeof ge=="object"&&ge!==null?ge=_s(ge):(ge=Va(g)?fl:ya.current,ge=_c(h,ge));var jt=g.getDerivedStateFromProps;(Ze=typeof jt=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ue!==at||Je!==ge)&&v_(h,Q,j,ge),Po=!1,Je=h.memoizedState,Q.state=Je,v0(h,j,Q,C);var At=h.memoizedState;ue!==at||Je!==At||Ka.current||Po?(typeof jt=="function"&&(Bx(h,g,jt,j),At=h.memoizedState),(Le=Po||x_(h,g,Le,j,Je,At,ge)||!1)?(Ze||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(j,At,ge),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(j,At,ge)),typeof Q.componentDidUpdate=="function"&&(h.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ue===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=At),Q.props=j,Q.state=At,Q.context=ge,j=Le):(typeof Q.componentDidUpdate!="function"||ue===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ue===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),j=!1)}return Wx(c,h,g,j,D,C)}function Wx(c,h,g,j,C,D){T_(c,h);var Q=(h.flags&128)!==0;if(!j&&!Q)return C&&MS(h,g,!1),Yi(c,h,D);j=h.stateNode,KL.current=h;var ue=Q&&typeof g.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,c!==null&&Q?(h.child=Cc(h,c.child,null,D),h.child=Cc(h,null,ue,D)):Da(c,h,ue,D),h.memoizedState=j.state,C&&MS(h,g,!0),h.child}function O_(c){var h=c.stateNode;h.pendingContext?IS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&IS(c,h.context,!1),Ax(c,h.containerInfo)}function P_(c,h,g,j,C){return Tc(),wx(C),h.flags|=256,Da(c,h,g,j),h.child}var Kx={dehydrated:null,treeContext:null,retryLane:0};function Vx(c){return{baseLanes:c,cachePool:null,transitions:null}}function I_(c,h,g){var j=h.pendingProps,C=cn.current,D=!1,Q=(h.flags&128)!==0,ue;if((ue=Q)||(ue=c!==null&&c.memoizedState===null?!1:(C&2)!==0),ue?(D=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(C|=1),Vr(cn,C&1),c===null)return bx(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(Q=j.children,c=j.fallback,D?(j=h.mode,D=h.child,Q={mode:"hidden",children:Q},(j&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=Q):D=B0(Q,j,0,null),c=Nl(c,j,g,null),D.return=h,c.return=h,D.sibling=c,h.child=D,h.child.memoizedState=Vx(g),h.memoizedState=Kx,c):Gx(h,Q));if(C=c.memoizedState,C!==null&&(ue=C.dehydrated,ue!==null))return VL(c,h,Q,j,ue,C,g);if(D){D=j.fallback,Q=h.mode,C=c.child,ue=C.sibling;var ge={mode:"hidden",children:j.children};return(Q&1)===0&&h.child!==C?(j=h.child,j.childLanes=0,j.pendingProps=ge,h.deletions=null):(j=Lo(C,ge),j.subtreeFlags=C.subtreeFlags&14680064),ue!==null?D=Lo(ue,D):(D=Nl(D,Q,g,null),D.flags|=2),D.return=h,j.return=h,j.sibling=D,h.child=j,j=D,D=h.child,Q=c.child.memoizedState,Q=Q===null?Vx(g):{baseLanes:Q.baseLanes|g,cachePool:null,transitions:Q.transitions},D.memoizedState=Q,D.childLanes=c.childLanes&~g,h.memoizedState=Kx,j}return D=c.child,c=D.sibling,j=Lo(D,{mode:"visible",children:j.children}),(h.mode&1)===0&&(j.lanes=g),j.return=h,j.sibling=null,c!==null&&(g=h.deletions,g===null?(h.deletions=[c],h.flags|=16):g.push(c)),h.child=j,h.memoizedState=null,j}function Gx(c,h){return h=B0({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function E0(c,h,g,j){return j!==null&&wx(j),Cc(h,c.child,null,g),c=Gx(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function VL(c,h,g,j,C,D,Q){if(g)return h.flags&256?(h.flags&=-257,j=Hx(Error(r(422))),E0(c,h,Q,j)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(D=j.fallback,C=h.mode,j=B0({mode:"visible",children:j.children},C,0,null),D=Nl(D,C,Q,null),D.flags|=2,j.return=h,D.return=h,j.sibling=D,h.child=j,(h.mode&1)!==0&&Cc(h,c.child,null,Q),h.child.memoizedState=Vx(Q),h.memoizedState=Kx,D);if((h.mode&1)===0)return E0(c,h,Q,null);if(C.data==="$!"){if(j=C.nextSibling&&C.nextSibling.dataset,j)var ue=j.dgst;return j=ue,D=Error(r(419)),j=Hx(D,j,void 0),E0(c,h,Q,j)}if(ue=(Q&c.childLanes)!==0,Ga||ue){if(j=Zn,j!==null){switch(Q&-Q){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(j.suspendedLanes|Q))!==0?0:C,C!==0&&C!==D.retryLane&&(D.retryLane=C,Vi(c,C),Js(j,c,C,-1))}return uy(),j=Hx(Error(r(421))),E0(c,h,Q,j)}return C.data==="$?"?(h.flags|=128,h.child=c.child,h=i7.bind(null,c),C._reactRetry=h,null):(c=D.treeContext,os=Ao(C.nextSibling),is=h,an=!0,Vs=null,c!==null&&(ks[Ss++]=Wi,ks[Ss++]=Ki,ks[Ss++]=pl,Wi=c.id,Ki=c.overflow,pl=h),h=Gx(h,j.children),h.flags|=4096,h)}function D_(c,h,g){c.lanes|=h;var j=c.alternate;j!==null&&(j.lanes|=h),Sx(c.return,h,g)}function Yx(c,h,g,j,C){var D=c.memoizedState;D===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:g,tailMode:C}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=j,D.tail=g,D.tailMode=C)}function M_(c,h,g){var j=h.pendingProps,C=j.revealOrder,D=j.tail;if(Da(c,h,j.children,g),j=cn.current,(j&2)!==0)j=j&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&D_(c,g,h);else if(c.tag===19)D_(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(Vr(cn,j),(h.mode&1)===0)h.memoizedState=null;else switch(C){case"forwards":for(g=h.child,C=null;g!==null;)c=g.alternate,c!==null&&b0(c)===null&&(C=g),g=g.sibling;g=C,g===null?(C=h.child,h.child=null):(C=g.sibling,g.sibling=null),Yx(h,!1,C,g,D);break;case"backwards":for(g=null,C=h.child,h.child=null;C!==null;){if(c=C.alternate,c!==null&&b0(c)===null){h.child=C;break}c=C.sibling,C.sibling=g,g=C,C=c}Yx(h,!0,g,null,D);break;case"together":Yx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function A0(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function Yi(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),vl|=h.lanes,(g&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,g=Lo(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Lo(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function GL(c,h,g){switch(h.tag){case 3:O_(h),Tc();break;case 5:YS(h);break;case 1:Va(h.type)&&u0(h);break;case 4:Ax(h,h.stateNode.containerInfo);break;case 10:var j=h.type._context,C=h.memoizedProps.value;Vr(g0,j._currentValue),j._currentValue=C;break;case 13:if(j=h.memoizedState,j!==null)return j.dehydrated!==null?(Vr(cn,cn.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?I_(c,h,g):(Vr(cn,cn.current&1),c=Yi(c,h,g),c!==null?c.sibling:null);Vr(cn,cn.current&1);break;case 19:if(j=(g&h.childLanes)!==0,(c.flags&128)!==0){if(j)return M_(c,h,g);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Vr(cn,cn.current),j)break;return null;case 22:case 23:return h.lanes=0,A_(c,h,g)}return Yi(c,h,g)}var R_,Xx,F_,$_;R_=function(c,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Xx=function(){},F_=function(c,h,g,j){var C=c.memoizedProps;if(C!==j){c=h.stateNode,xl(wi.current);var D=null;switch(g){case"input":C=Be(c,C),j=Be(c,j),D=[];break;case"select":C=se({},C,{value:void 0}),j=se({},j,{value:void 0}),D=[];break;case"textarea":C=qt(c,C),j=qt(c,j),D=[];break;default:typeof C.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=o0)}_t(g,j);var Q;g=null;for(Le in C)if(!j.hasOwnProperty(Le)&&C.hasOwnProperty(Le)&&C[Le]!=null)if(Le==="style"){var ue=C[Le];for(Q in ue)ue.hasOwnProperty(Q)&&(g||(g={}),g[Q]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(s.hasOwnProperty(Le)?D||(D=[]):(D=D||[]).push(Le,null));for(Le in j){var ge=j[Le];if(ue=C?.[Le],j.hasOwnProperty(Le)&&ge!==ue&&(ge!=null||ue!=null))if(Le==="style")if(ue){for(Q in ue)!ue.hasOwnProperty(Q)||ge&&ge.hasOwnProperty(Q)||(g||(g={}),g[Q]="");for(Q in ge)ge.hasOwnProperty(Q)&&ue[Q]!==ge[Q]&&(g||(g={}),g[Q]=ge[Q])}else g||(D||(D=[]),D.push(Le,g)),g=ge;else Le==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ue=ue?ue.__html:void 0,ge!=null&&ue!==ge&&(D=D||[]).push(Le,ge)):Le==="children"?typeof ge!="string"&&typeof ge!="number"||(D=D||[]).push(Le,""+ge):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(s.hasOwnProperty(Le)?(ge!=null&&Le==="onScroll"&&en("scroll",c),D||ue===ge||(D=[])):(D=D||[]).push(Le,ge))}g&&(D=D||[]).push("style",g);var Le=D;(h.updateQueue=Le)&&(h.flags|=4)}},$_=function(c,h,g,j){g!==j&&(h.flags|=4)};function Id(c,h){if(!an)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var j=null;g!==null;)g.alternate!==null&&(j=g),g=g.sibling;j===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function ba(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,j=0;if(h)for(var C=c.child;C!==null;)g|=C.lanes|C.childLanes,j|=C.subtreeFlags&14680064,j|=C.flags&14680064,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)g|=C.lanes|C.childLanes,j|=C.subtreeFlags,j|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=j,c.childLanes=g,h}function YL(c,h,g){var j=h.pendingProps;switch(yx(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ba(h),null;case 1:return Va(h.type)&&c0(),ba(h),null;case 3:return j=h.stateNode,Ic(),tn(Ka),tn(ya),Ox(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(p0(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Vs!==null&&(oy(Vs),Vs=null))),Xx(c,h),ba(h),null;case 5:Tx(h);var C=xl(Ad.current);if(g=h.type,c!==null&&h.stateNode!=null)F_(c,h,g,j,C),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(r(166));return ba(h),null}if(c=xl(wi.current),p0(h)){j=h.stateNode,g=h.type;var D=h.memoizedProps;switch(j[bi]=h,j[Nd]=D,c=(h.mode&1)!==0,g){case"dialog":en("cancel",j),en("close",j);break;case"iframe":case"object":case"embed":en("load",j);break;case"video":case"audio":for(C=0;C<bd.length;C++)en(bd[C],j);break;case"source":en("error",j);break;case"img":case"image":case"link":en("error",j),en("load",j);break;case"details":en("toggle",j);break;case"input":xt(j,D),en("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!D.multiple},en("invalid",j);break;case"textarea":gr(j,D),en("invalid",j)}_t(g,D),C=null;for(var Q in D)if(D.hasOwnProperty(Q)){var ue=D[Q];Q==="children"?typeof ue=="string"?j.textContent!==ue&&(D.suppressHydrationWarning!==!0&&i0(j.textContent,ue,c),C=["children",ue]):typeof ue=="number"&&j.textContent!==""+ue&&(D.suppressHydrationWarning!==!0&&i0(j.textContent,ue,c),C=["children",""+ue]):s.hasOwnProperty(Q)&&ue!=null&&Q==="onScroll"&&en("scroll",j)}switch(g){case"input":De(j),Ce(j,D,!0);break;case"textarea":De(j),lr(j);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(j.onclick=o0)}j=C,h.updateQueue=j,j!==null&&(h.flags|=4)}else{Q=C.nodeType===9?C:C.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Qr(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=Q.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=Q.createElement(g,{is:j.is}):(c=Q.createElement(g),g==="select"&&(Q=c,j.multiple?Q.multiple=!0:j.size&&(Q.size=j.size))):c=Q.createElementNS(c,g),c[bi]=h,c[Nd]=j,R_(c,h,!1,!1),h.stateNode=c;e:{switch(Q=Ne(g,j),g){case"dialog":en("cancel",c),en("close",c),C=j;break;case"iframe":case"object":case"embed":en("load",c),C=j;break;case"video":case"audio":for(C=0;C<bd.length;C++)en(bd[C],c);C=j;break;case"source":en("error",c),C=j;break;case"img":case"image":case"link":en("error",c),en("load",c),C=j;break;case"details":en("toggle",c),C=j;break;case"input":xt(c,j),C=Be(c,j),en("invalid",c);break;case"option":C=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},C=se({},j,{value:void 0}),en("invalid",c);break;case"textarea":gr(c,j),C=qt(c,j),en("invalid",c);break;default:C=j}_t(g,C),ue=C;for(D in ue)if(ue.hasOwnProperty(D)){var ge=ue[D];D==="style"?ut(c,ge):D==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&Fe(c,ge)):D==="children"?typeof ge=="string"?(g!=="textarea"||ge!=="")&&we(c,ge):typeof ge=="number"&&we(c,""+ge):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?ge!=null&&D==="onScroll"&&en("scroll",c):ge!=null&&w(c,D,ge,Q))}switch(g){case"input":De(c),Ce(c,j,!1);break;case"textarea":De(c),lr(c);break;case"option":j.value!=null&&c.setAttribute("value",""+ye(j.value));break;case"select":c.multiple=!!j.multiple,D=j.value,D!=null?vt(c,!!j.multiple,D,!1):j.defaultValue!=null&&vt(c,!!j.multiple,j.defaultValue,!0);break;default:typeof C.onClick=="function"&&(c.onclick=o0)}switch(g){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return ba(h),null;case 6:if(c&&h.stateNode!=null)$_(c,h,c.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(r(166));if(g=xl(Ad.current),xl(wi.current),p0(h)){if(j=h.stateNode,g=h.memoizedProps,j[bi]=h,(D=j.nodeValue!==g)&&(c=is,c!==null))switch(c.tag){case 3:i0(j.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&i0(j.nodeValue,g,(c.mode&1)!==0)}D&&(h.flags|=4)}else j=(g.nodeType===9?g:g.ownerDocument).createTextNode(j),j[bi]=h,h.stateNode=j}return ba(h),null;case 13:if(tn(cn),j=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(an&&os!==null&&(h.mode&1)!==0&&(h.flags&128)===0)US(),Tc(),h.flags|=98560,D=!1;else if(D=p0(h),j!==null&&j.dehydrated!==null){if(c===null){if(!D)throw Error(r(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[bi]=h}else Tc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ba(h),D=!1}else Vs!==null&&(oy(Vs),Vs=null),D=!0;if(!D)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=g,h):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(cn.current&1)!==0?Rn===0&&(Rn=3):uy())),h.updateQueue!==null&&(h.flags|=4),ba(h),null);case 4:return Ic(),Xx(c,h),c===null&&wd(h.stateNode.containerInfo),ba(h),null;case 10:return kx(h.type._context),ba(h),null;case 17:return Va(h.type)&&c0(),ba(h),null;case 19:if(tn(cn),D=h.memoizedState,D===null)return ba(h),null;if(j=(h.flags&128)!==0,Q=D.rendering,Q===null)if(j)Id(D,!1);else{if(Rn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(Q=b0(c),Q!==null){for(h.flags|=128,Id(D,!1),j=Q.updateQueue,j!==null&&(h.updateQueue=j,h.flags|=4),h.subtreeFlags=0,j=g,g=h.child;g!==null;)D=g,c=j,D.flags&=14680066,Q=D.alternate,Q===null?(D.childLanes=0,D.lanes=c,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=Q.childLanes,D.lanes=Q.lanes,D.child=Q.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=Q.memoizedProps,D.memoizedState=Q.memoizedState,D.updateQueue=Q.updateQueue,D.type=Q.type,c=Q.dependencies,D.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Vr(cn,cn.current&1|2),h.child}c=c.sibling}D.tail!==null&&Qe()>Fc&&(h.flags|=128,j=!0,Id(D,!1),h.lanes=4194304)}else{if(!j)if(c=b0(Q),c!==null){if(h.flags|=128,j=!0,g=c.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),Id(D,!0),D.tail===null&&D.tailMode==="hidden"&&!Q.alternate&&!an)return ba(h),null}else 2*Qe()-D.renderingStartTime>Fc&&g!==1073741824&&(h.flags|=128,j=!0,Id(D,!1),h.lanes=4194304);D.isBackwards?(Q.sibling=h.child,h.child=Q):(g=D.last,g!==null?g.sibling=Q:h.child=Q,D.last=Q)}return D.tail!==null?(h=D.tail,D.rendering=h,D.tail=h.sibling,D.renderingStartTime=Qe(),h.sibling=null,g=cn.current,Vr(cn,j?g&1|2:g&1),h):(ba(h),null);case 22:case 23:return cy(),j=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(h.flags|=8192),j&&(h.mode&1)!==0?(ls&1073741824)!==0&&(ba(h),h.subtreeFlags&6&&(h.flags|=8192)):ba(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function XL(c,h){switch(yx(h),h.tag){case 1:return Va(h.type)&&c0(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Ic(),tn(Ka),tn(ya),Ox(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Tx(h),null;case 13:if(tn(cn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Tc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return tn(cn),null;case 4:return Ic(),null;case 10:return kx(h.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var T0=!1,wa=!1,JL=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Mc(c,h){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(j){hn(c,h,j)}else g.current=null}function Jx(c,h,g){try{g()}catch(j){hn(c,h,j)}}var L_=!1;function QL(c,h){if(cx=Yf,c=xS(),tx(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var j=g.getSelection&&g.getSelection();if(j&&j.rangeCount!==0){g=j.anchorNode;var C=j.anchorOffset,D=j.focusNode;j=j.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break e}var Q=0,ue=-1,ge=-1,Le=0,Ze=0,at=c,Je=null;t:for(;;){for(var jt;at!==g||C!==0&&at.nodeType!==3||(ue=Q+C),at!==D||j!==0&&at.nodeType!==3||(ge=Q+j),at.nodeType===3&&(Q+=at.nodeValue.length),(jt=at.firstChild)!==null;)Je=at,at=jt;for(;;){if(at===c)break t;if(Je===g&&++Le===C&&(ue=Q),Je===D&&++Ze===j&&(ge=Q),(jt=at.nextSibling)!==null)break;at=Je,Je=at.parentNode}at=jt}g=ue===-1||ge===-1?null:{start:ue,end:ge}}else g=null}g=g||{start:0,end:0}}else g=null;for(ux={focusedElem:c,selectionRange:g},Yf=!1,kt=h;kt!==null;)if(h=kt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,kt=c;else for(;kt!==null;){h=kt;try{var At=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(At!==null){var Pt=At.memoizedProps,vn=At.memoizedState,Ie=h.stateNode,be=Ie.getSnapshotBeforeUpdate(h.elementType===h.type?Pt:Gs(h.type,Pt),vn);Ie.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Me=h.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(it){hn(h,h.return,it)}if(c=h.sibling,c!==null){c.return=h.return,kt=c;break}kt=h.return}return At=L_,L_=!1,At}function Dd(c,h,g){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var C=j=j.next;do{if((C.tag&c)===c){var D=C.destroy;C.destroy=void 0,D!==void 0&&Jx(h,g,D)}C=C.next}while(C!==j)}}function C0(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&c)===c){var j=g.create;g.destroy=j()}g=g.next}while(g!==h)}}function Qx(c){var h=c.ref;if(h!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof h=="function"?h(c):h.current=c}}function B_(c){var h=c.alternate;h!==null&&(c.alternate=null,B_(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[bi],delete h[Nd],delete h[px],delete h[DL],delete h[ML])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function U_(c){return c.tag===5||c.tag===3||c.tag===4}function H_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||U_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Zx(c,h,g){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(c,h):g.insertBefore(c,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(c,g)):(h=g,h.appendChild(c)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=o0));else if(j!==4&&(c=c.child,c!==null))for(Zx(c,h,g),c=c.sibling;c!==null;)Zx(c,h,g),c=c.sibling}function ey(c,h,g){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?g.insertBefore(c,h):g.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(ey(c,h,g),c=c.sibling;c!==null;)ey(c,h,g),c=c.sibling}var ia=null,Ys=!1;function Do(c,h,g){for(g=g.child;g!==null;)q_(c,h,g),g=g.sibling}function q_(c,h,g){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(ns,g)}catch{}switch(g.tag){case 5:wa||Mc(g,h);case 6:var j=ia,C=Ys;ia=null,Do(c,h,g),ia=j,Ys=C,ia!==null&&(Ys?(c=ia,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):ia.removeChild(g.stateNode));break;case 18:ia!==null&&(Ys?(c=ia,g=g.stateNode,c.nodeType===8?fx(c.parentNode,g):c.nodeType===1&&fx(c,g),hd(c)):fx(ia,g.stateNode));break;case 4:j=ia,C=Ys,ia=g.stateNode.containerInfo,Ys=!0,Do(c,h,g),ia=j,Ys=C;break;case 0:case 11:case 14:case 15:if(!wa&&(j=g.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){C=j=j.next;do{var D=C,Q=D.destroy;D=D.tag,Q!==void 0&&((D&2)!==0||(D&4)!==0)&&Jx(g,h,Q),C=C.next}while(C!==j)}Do(c,h,g);break;case 1:if(!wa&&(Mc(g,h),j=g.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=g.memoizedProps,j.state=g.memoizedState,j.componentWillUnmount()}catch(ue){hn(g,h,ue)}Do(c,h,g);break;case 21:Do(c,h,g);break;case 22:g.mode&1?(wa=(j=wa)||g.memoizedState!==null,Do(c,h,g),wa=j):Do(c,h,g);break;default:Do(c,h,g)}}function z_(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new JL),h.forEach(function(j){var C=o7.bind(null,c,j);g.has(j)||(g.add(j),j.then(C,C))})}}function Xs(c,h){var g=h.deletions;if(g!==null)for(var j=0;j<g.length;j++){var C=g[j];try{var D=c,Q=h,ue=Q;e:for(;ue!==null;){switch(ue.tag){case 5:ia=ue.stateNode,Ys=!1;break e;case 3:ia=ue.stateNode.containerInfo,Ys=!0;break e;case 4:ia=ue.stateNode.containerInfo,Ys=!0;break e}ue=ue.return}if(ia===null)throw Error(r(160));q_(D,Q,C),ia=null,Ys=!1;var ge=C.alternate;ge!==null&&(ge.return=null),C.return=null}catch(Le){hn(C,h,Le)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)W_(h,c),h=h.sibling}function W_(c,h){var g=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Xs(h,c),Ni(c),j&4){try{Dd(3,c,c.return),C0(3,c)}catch(Pt){hn(c,c.return,Pt)}try{Dd(5,c,c.return)}catch(Pt){hn(c,c.return,Pt)}}break;case 1:Xs(h,c),Ni(c),j&512&&g!==null&&Mc(g,g.return);break;case 5:if(Xs(h,c),Ni(c),j&512&&g!==null&&Mc(g,g.return),c.flags&32){var C=c.stateNode;try{we(C,"")}catch(Pt){hn(c,c.return,Pt)}}if(j&4&&(C=c.stateNode,C!=null)){var D=c.memoizedProps,Q=g!==null?g.memoizedProps:D,ue=c.type,ge=c.updateQueue;if(c.updateQueue=null,ge!==null)try{ue==="input"&&D.type==="radio"&&D.name!=null&&le(C,D),Ne(ue,Q);var Le=Ne(ue,D);for(Q=0;Q<ge.length;Q+=2){var Ze=ge[Q],at=ge[Q+1];Ze==="style"?ut(C,at):Ze==="dangerouslySetInnerHTML"?Fe(C,at):Ze==="children"?we(C,at):w(C,Ze,at,Le)}switch(ue){case"input":Ee(C,D);break;case"textarea":sr(C,D);break;case"select":var Je=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!D.multiple;var jt=D.value;jt!=null?vt(C,!!D.multiple,jt,!1):Je!==!!D.multiple&&(D.defaultValue!=null?vt(C,!!D.multiple,D.defaultValue,!0):vt(C,!!D.multiple,D.multiple?[]:"",!1))}C[Nd]=D}catch(Pt){hn(c,c.return,Pt)}}break;case 6:if(Xs(h,c),Ni(c),j&4){if(c.stateNode===null)throw Error(r(162));C=c.stateNode,D=c.memoizedProps;try{C.nodeValue=D}catch(Pt){hn(c,c.return,Pt)}}break;case 3:if(Xs(h,c),Ni(c),j&4&&g!==null&&g.memoizedState.isDehydrated)try{hd(h.containerInfo)}catch(Pt){hn(c,c.return,Pt)}break;case 4:Xs(h,c),Ni(c);break;case 13:Xs(h,c),Ni(c),C=c.child,C.flags&8192&&(D=C.memoizedState!==null,C.stateNode.isHidden=D,!D||C.alternate!==null&&C.alternate.memoizedState!==null||(ny=Qe())),j&4&&z_(c);break;case 22:if(Ze=g!==null&&g.memoizedState!==null,c.mode&1?(wa=(Le=wa)||Ze,Xs(h,c),wa=Le):Xs(h,c),Ni(c),j&8192){if(Le=c.memoizedState!==null,(c.stateNode.isHidden=Le)&&!Ze&&(c.mode&1)!==0)for(kt=c,Ze=c.child;Ze!==null;){for(at=kt=Ze;kt!==null;){switch(Je=kt,jt=Je.child,Je.tag){case 0:case 11:case 14:case 15:Dd(4,Je,Je.return);break;case 1:Mc(Je,Je.return);var At=Je.stateNode;if(typeof At.componentWillUnmount=="function"){j=Je,g=Je.return;try{h=j,At.props=h.memoizedProps,At.state=h.memoizedState,At.componentWillUnmount()}catch(Pt){hn(j,g,Pt)}}break;case 5:Mc(Je,Je.return);break;case 22:if(Je.memoizedState!==null){G_(at);continue}}jt!==null?(jt.return=Je,kt=jt):G_(at)}Ze=Ze.sibling}e:for(Ze=null,at=c;;){if(at.tag===5){if(Ze===null){Ze=at;try{C=at.stateNode,Le?(D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ue=at.stateNode,ge=at.memoizedProps.style,Q=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,ue.style.display=rt("display",Q))}catch(Pt){hn(c,c.return,Pt)}}}else if(at.tag===6){if(Ze===null)try{at.stateNode.nodeValue=Le?"":at.memoizedProps}catch(Pt){hn(c,c.return,Pt)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===c)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===c)break e;for(;at.sibling===null;){if(at.return===null||at.return===c)break e;Ze===at&&(Ze=null),at=at.return}Ze===at&&(Ze=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:Xs(h,c),Ni(c),j&4&&z_(c);break;case 21:break;default:Xs(h,c),Ni(c)}}function Ni(c){var h=c.flags;if(h&2){try{e:{for(var g=c.return;g!==null;){if(U_(g)){var j=g;break e}g=g.return}throw Error(r(160))}switch(j.tag){case 5:var C=j.stateNode;j.flags&32&&(we(C,""),j.flags&=-33);var D=H_(c);ey(c,D,C);break;case 3:case 4:var Q=j.stateNode.containerInfo,ue=H_(c);Zx(c,ue,Q);break;default:throw Error(r(161))}}catch(ge){hn(c,c.return,ge)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function ZL(c,h,g){kt=c,K_(c)}function K_(c,h,g){for(var j=(c.mode&1)!==0;kt!==null;){var C=kt,D=C.child;if(C.tag===22&&j){var Q=C.memoizedState!==null||T0;if(!Q){var ue=C.alternate,ge=ue!==null&&ue.memoizedState!==null||wa;ue=T0;var Le=wa;if(T0=Q,(wa=ge)&&!Le)for(kt=C;kt!==null;)Q=kt,ge=Q.child,Q.tag===22&&Q.memoizedState!==null?Y_(C):ge!==null?(ge.return=Q,kt=ge):Y_(C);for(;D!==null;)kt=D,K_(D),D=D.sibling;kt=C,T0=ue,wa=Le}V_(c)}else(C.subtreeFlags&8772)!==0&&D!==null?(D.return=C,kt=D):V_(c)}}function V_(c){for(;kt!==null;){var h=kt;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:wa||C0(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!wa)if(g===null)j.componentDidMount();else{var C=h.elementType===h.type?g.memoizedProps:Gs(h.type,g.memoizedProps);j.componentDidUpdate(C,g.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&GS(h,D,j);break;case 3:var Q=h.updateQueue;if(Q!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}GS(h,Q,g)}break;case 5:var ue=h.stateNode;if(g===null&&h.flags&4){g=ue;var ge=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&g.focus();break;case"img":ge.src&&(g.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Le=h.alternate;if(Le!==null){var Ze=Le.memoizedState;if(Ze!==null){var at=Ze.dehydrated;at!==null&&hd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}wa||h.flags&512&&Qx(h)}catch(Je){hn(h,h.return,Je)}}if(h===c){kt=null;break}if(g=h.sibling,g!==null){g.return=h.return,kt=g;break}kt=h.return}}function G_(c){for(;kt!==null;){var h=kt;if(h===c){kt=null;break}var g=h.sibling;if(g!==null){g.return=h.return,kt=g;break}kt=h.return}}function Y_(c){for(;kt!==null;){var h=kt;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{C0(4,h)}catch(ge){hn(h,g,ge)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var C=h.return;try{j.componentDidMount()}catch(ge){hn(h,C,ge)}}var D=h.return;try{Qx(h)}catch(ge){hn(h,D,ge)}break;case 5:var Q=h.return;try{Qx(h)}catch(ge){hn(h,Q,ge)}}}catch(ge){hn(h,h.return,ge)}if(h===c){kt=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,kt=ue;break}kt=h.return}}var e7=Math.ceil,O0=T.ReactCurrentDispatcher,ty=T.ReactCurrentOwner,As=T.ReactCurrentBatchConfig,Sr=0,Zn=null,Sn=null,oa=0,ls=0,Rc=To(0),Rn=0,Md=null,vl=0,P0=0,ry=0,Rd=null,Ya=null,ny=0,Fc=1/0,Xi=null,I0=!1,ay=null,Mo=null,D0=!1,Ro=null,M0=0,Fd=0,sy=null,R0=-1,F0=0;function Ma(){return(Sr&6)!==0?Qe():R0!==-1?R0:R0=Qe()}function Fo(c){return(c.mode&1)===0?1:(Sr&2)!==0&&oa!==0?oa&-oa:FL.transition!==null?(F0===0&&(F0=Xe()),F0):(c=ft,c!==0||(c=window.event,c=c===void 0?16:Jk(c.type)),c)}function Js(c,h,g,j){if(50<Fd)throw Fd=0,sy=null,Error(r(185));Ht(c,g,j),((Sr&2)===0||c!==Zn)&&(c===Zn&&((Sr&2)===0&&(P0|=g),Rn===4&&$o(c,oa)),Xa(c,j),g===1&&Sr===0&&(h.mode&1)===0&&(Fc=Qe()+500,d0&&Oo()))}function Xa(c,h){var g=c.callbackNode;Ye(c,h);var j=xe(c,c===Zn?oa:0);if(j===0)g!==null&&ke(g),c.callbackNode=null,c.callbackPriority=0;else if(h=j&-j,c.callbackPriority!==h){if(g!=null&&ke(g),h===1)c.tag===0?RL(J_.bind(null,c)):RS(J_.bind(null,c)),PL(function(){(Sr&6)===0&&Oo()}),g=null;else{switch(er(j)){case 1:g=Cr;break;case 4:g=Dr;break;case 16:g=nn;break;case 536870912:g=Zr;break;default:g=nn}g=sE(g,X_.bind(null,c))}c.callbackPriority=h,c.callbackNode=g}}function X_(c,h){if(R0=-1,F0=0,(Sr&6)!==0)throw Error(r(327));var g=c.callbackNode;if($c()&&c.callbackNode!==g)return null;var j=xe(c,c===Zn?oa:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||h)h=$0(c,j);else{h=j;var C=Sr;Sr|=2;var D=Z_();(Zn!==c||oa!==h)&&(Xi=null,Fc=Qe()+500,wl(c,h));do try{n7();break}catch(ue){Q_(c,ue)}while(!0);Nx(),O0.current=D,Sr=C,Sn!==null?h=0:(Zn=null,oa=0,h=Rn)}if(h!==0){if(h===2&&(C=We(c),C!==0&&(j=C,h=iy(c,C))),h===1)throw g=Md,wl(c,0),$o(c,j),Xa(c,Qe()),g;if(h===6)$o(c,j);else{if(C=c.current.alternate,(j&30)===0&&!t7(C)&&(h=$0(c,j),h===2&&(D=We(c),D!==0&&(j=D,h=iy(c,D))),h===1))throw g=Md,wl(c,0),$o(c,j),Xa(c,Qe()),g;switch(c.finishedWork=C,c.finishedLanes=j,h){case 0:case 1:throw Error(r(345));case 2:jl(c,Ya,Xi);break;case 3:if($o(c,j),(j&130023424)===j&&(h=ny+500-Qe(),10<h)){if(xe(c,0)!==0)break;if(C=c.suspendedLanes,(C&j)!==j){Ma(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=hx(jl.bind(null,c,Ya,Xi),h);break}jl(c,Ya,Xi);break;case 4:if($o(c,j),(j&4194240)===j)break;for(h=c.eventTimes,C=-1;0<j;){var Q=31-qr(j);D=1<<Q,Q=h[Q],Q>C&&(C=Q),j&=~D}if(j=C,j=Qe()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*e7(j/1960))-j,10<j){c.timeoutHandle=hx(jl.bind(null,c,Ya,Xi),j);break}jl(c,Ya,Xi);break;case 5:jl(c,Ya,Xi);break;default:throw Error(r(329))}}}return Xa(c,Qe()),c.callbackNode===g?X_.bind(null,c):null}function iy(c,h){var g=Rd;return c.current.memoizedState.isDehydrated&&(wl(c,h).flags|=256),c=$0(c,h),c!==2&&(h=Ya,Ya=g,h!==null&&oy(h)),c}function oy(c){Ya===null?Ya=c:Ya.push.apply(Ya,c)}function t7(c){for(var h=c;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var j=0;j<g.length;j++){var C=g[j],D=C.getSnapshot;C=C.value;try{if(!Ks(D(),C))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function $o(c,h){for(h&=~ry,h&=~P0,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var g=31-qr(h),j=1<<g;c[g]=-1,h&=~j}}function J_(c){if((Sr&6)!==0)throw Error(r(327));$c();var h=xe(c,0);if((h&1)===0)return Xa(c,Qe()),null;var g=$0(c,h);if(c.tag!==0&&g===2){var j=We(c);j!==0&&(h=j,g=iy(c,j))}if(g===1)throw g=Md,wl(c,0),$o(c,h),Xa(c,Qe()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,jl(c,Ya,Xi),Xa(c,Qe()),null}function ly(c,h){var g=Sr;Sr|=1;try{return c(h)}finally{Sr=g,Sr===0&&(Fc=Qe()+500,d0&&Oo())}}function bl(c){Ro!==null&&Ro.tag===0&&(Sr&6)===0&&$c();var h=Sr;Sr|=1;var g=As.transition,j=ft;try{if(As.transition=null,ft=1,c)return c()}finally{ft=j,As.transition=g,Sr=h,(Sr&6)===0&&Oo()}}function cy(){ls=Rc.current,tn(Rc)}function wl(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,OL(g)),Sn!==null)for(g=Sn.return;g!==null;){var j=g;switch(yx(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&c0();break;case 3:Ic(),tn(Ka),tn(ya),Ox();break;case 5:Tx(j);break;case 4:Ic();break;case 13:tn(cn);break;case 19:tn(cn);break;case 10:kx(j.type._context);break;case 22:case 23:cy()}g=g.return}if(Zn=c,Sn=c=Lo(c.current,null),oa=ls=h,Rn=0,Md=null,ry=P0=vl=0,Ya=Rd=null,gl!==null){for(h=0;h<gl.length;h++)if(g=gl[h],j=g.interleaved,j!==null){g.interleaved=null;var C=j.next,D=g.pending;if(D!==null){var Q=D.next;D.next=C,j.next=Q}g.pending=j}gl=null}return c}function Q_(c,h){do{var g=Sn;try{if(Nx(),w0.current=S0,j0){for(var j=un.memoizedState;j!==null;){var C=j.queue;C!==null&&(C.pending=null),j=j.next}j0=!1}if(yl=0,Qn=Mn=un=null,Td=!1,Cd=0,ty.current=null,g===null||g.return===null){Rn=1,Md=h,Sn=null;break}e:{var D=c,Q=g.return,ue=g,ge=h;if(h=oa,ue.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Le=ge,Ze=ue,at=Ze.tag;if((Ze.mode&1)===0&&(at===0||at===11||at===15)){var Je=Ze.alternate;Je?(Ze.updateQueue=Je.updateQueue,Ze.memoizedState=Je.memoizedState,Ze.lanes=Je.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var jt=N_(Q);if(jt!==null){jt.flags&=-257,k_(jt,Q,ue,D,h),jt.mode&1&&j_(D,Le,h),h=jt,ge=Le;var At=h.updateQueue;if(At===null){var Pt=new Set;Pt.add(ge),h.updateQueue=Pt}else At.add(ge);break e}else{if((h&1)===0){j_(D,Le,h),uy();break e}ge=Error(r(426))}}else if(an&&ue.mode&1){var vn=N_(Q);if(vn!==null){(vn.flags&65536)===0&&(vn.flags|=256),k_(vn,Q,ue,D,h),wx(Dc(ge,ue));break e}}D=ge=Dc(ge,ue),Rn!==4&&(Rn=2),Rd===null?Rd=[D]:Rd.push(D),D=Q;do{switch(D.tag){case 3:D.flags|=65536,h&=-h,D.lanes|=h;var Ie=b_(D,ge,h);VS(D,Ie);break e;case 1:ue=ge;var be=D.type,Me=D.stateNode;if((D.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Mo===null||!Mo.has(Me)))){D.flags|=65536,h&=-h,D.lanes|=h;var it=w_(D,ue,h);VS(D,it);break e}}D=D.return}while(D!==null)}tE(g)}catch(Mt){h=Mt,Sn===g&&g!==null&&(Sn=g=g.return);continue}break}while(!0)}function Z_(){var c=O0.current;return O0.current=S0,c===null?S0:c}function uy(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Zn===null||(vl&268435455)===0&&(P0&268435455)===0||$o(Zn,oa)}function $0(c,h){var g=Sr;Sr|=2;var j=Z_();(Zn!==c||oa!==h)&&(Xi=null,wl(c,h));do try{r7();break}catch(C){Q_(c,C)}while(!0);if(Nx(),Sr=g,O0.current=j,Sn!==null)throw Error(r(261));return Zn=null,oa=0,Rn}function r7(){for(;Sn!==null;)eE(Sn)}function n7(){for(;Sn!==null&&!ct();)eE(Sn)}function eE(c){var h=aE(c.alternate,c,ls);c.memoizedProps=c.pendingProps,h===null?tE(c):Sn=h,ty.current=null}function tE(c){var h=c;do{var g=h.alternate;if(c=h.return,(h.flags&32768)===0){if(g=YL(g,h,ls),g!==null){Sn=g;return}}else{if(g=XL(g,h),g!==null){g.flags&=32767,Sn=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Rn=6,Sn=null;return}}if(h=h.sibling,h!==null){Sn=h;return}Sn=h=c}while(h!==null);Rn===0&&(Rn=5)}function jl(c,h,g){var j=ft,C=As.transition;try{As.transition=null,ft=1,a7(c,h,g,j)}finally{As.transition=C,ft=j}return null}function a7(c,h,g,j){do $c();while(Ro!==null);if((Sr&6)!==0)throw Error(r(327));g=c.finishedWork;var C=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var D=g.lanes|g.childLanes;if(Jt(c,D),c===Zn&&(Sn=Zn=null,oa=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||D0||(D0=!0,sE(nn,function(){return $c(),null})),D=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||D){D=As.transition,As.transition=null;var Q=ft;ft=1;var ue=Sr;Sr|=4,ty.current=null,QL(c,g),W_(g,c),kL(ux),Yf=!!cx,ux=cx=null,c.current=g,ZL(g),tt(),Sr=ue,ft=Q,As.transition=D}else c.current=g;if(D0&&(D0=!1,Ro=c,M0=C),D=c.pendingLanes,D===0&&(Mo=null),Wa(g.stateNode),Xa(c,Qe()),h!==null)for(j=c.onRecoverableError,g=0;g<h.length;g++)C=h[g],j(C.value,{componentStack:C.stack,digest:C.digest});if(I0)throw I0=!1,c=ay,ay=null,c;return(M0&1)!==0&&c.tag!==0&&$c(),D=c.pendingLanes,(D&1)!==0?c===sy?Fd++:(Fd=0,sy=c):Fd=0,Oo(),null}function $c(){if(Ro!==null){var c=er(M0),h=As.transition,g=ft;try{if(As.transition=null,ft=16>c?16:c,Ro===null)var j=!1;else{if(c=Ro,Ro=null,M0=0,(Sr&6)!==0)throw Error(r(331));var C=Sr;for(Sr|=4,kt=c.current;kt!==null;){var D=kt,Q=D.child;if((kt.flags&16)!==0){var ue=D.deletions;if(ue!==null){for(var ge=0;ge<ue.length;ge++){var Le=ue[ge];for(kt=Le;kt!==null;){var Ze=kt;switch(Ze.tag){case 0:case 11:case 15:Dd(8,Ze,D)}var at=Ze.child;if(at!==null)at.return=Ze,kt=at;else for(;kt!==null;){Ze=kt;var Je=Ze.sibling,jt=Ze.return;if(B_(Ze),Ze===Le){kt=null;break}if(Je!==null){Je.return=jt,kt=Je;break}kt=jt}}}var At=D.alternate;if(At!==null){var Pt=At.child;if(Pt!==null){At.child=null;do{var vn=Pt.sibling;Pt.sibling=null,Pt=vn}while(Pt!==null)}}kt=D}}if((D.subtreeFlags&2064)!==0&&Q!==null)Q.return=D,kt=Q;else e:for(;kt!==null;){if(D=kt,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Dd(9,D,D.return)}var Ie=D.sibling;if(Ie!==null){Ie.return=D.return,kt=Ie;break e}kt=D.return}}var be=c.current;for(kt=be;kt!==null;){Q=kt;var Me=Q.child;if((Q.subtreeFlags&2064)!==0&&Me!==null)Me.return=Q,kt=Me;else e:for(Q=be;kt!==null;){if(ue=kt,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:C0(9,ue)}}catch(Mt){hn(ue,ue.return,Mt)}if(ue===Q){kt=null;break e}var it=ue.sibling;if(it!==null){it.return=ue.return,kt=it;break e}kt=ue.return}}if(Sr=C,Oo(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(ns,c)}catch{}j=!0}return j}finally{ft=g,As.transition=h}}return!1}function rE(c,h,g){h=Dc(g,h),h=b_(c,h,1),c=Io(c,h,1),h=Ma(),c!==null&&(Ht(c,1,h),Xa(c,h))}function hn(c,h,g){if(c.tag===3)rE(c,c,g);else for(;h!==null;){if(h.tag===3){rE(h,c,g);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Mo===null||!Mo.has(j))){c=Dc(g,c),c=w_(h,c,1),h=Io(h,c,1),c=Ma(),h!==null&&(Ht(h,1,c),Xa(h,c));break}}h=h.return}}function s7(c,h,g){var j=c.pingCache;j!==null&&j.delete(h),h=Ma(),c.pingedLanes|=c.suspendedLanes&g,Zn===c&&(oa&g)===g&&(Rn===4||Rn===3&&(oa&130023424)===oa&&500>Qe()-ny?wl(c,0):ry|=g),Xa(c,h)}function nE(c,h){h===0&&((c.mode&1)===0?h=1:(h=Re,Re<<=1,(Re&130023424)===0&&(Re=4194304)));var g=Ma();c=Vi(c,h),c!==null&&(Ht(c,h,g),Xa(c,g))}function i7(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),nE(c,g)}function o7(c,h){var g=0;switch(c.tag){case 13:var j=c.stateNode,C=c.memoizedState;C!==null&&(g=C.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(h),nE(c,g)}var aE;aE=function(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps||Ka.current)Ga=!0;else{if((c.lanes&g)===0&&(h.flags&128)===0)return Ga=!1,GL(c,h,g);Ga=(c.flags&131072)!==0}else Ga=!1,an&&(h.flags&1048576)!==0&&FS(h,f0,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;A0(c,h),c=h.pendingProps;var C=_c(h,ya.current);Pc(h,g),C=Dx(null,h,j,c,C,g);var D=Mx();return h.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Va(j)?(D=!0,u0(h)):D=!1,h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Ex(h),C.updater=_0,h.stateNode=C,C._reactInternals=h,Ux(h,j,c,g),h=Wx(null,h,j,!0,D,g)):(h.tag=0,an&&D&&xx(h),Da(null,h,C,g),h=h.child),h;case 16:j=h.elementType;e:{switch(A0(c,h),c=h.pendingProps,C=j._init,j=C(j._payload),h.type=j,C=h.tag=c7(j),c=Gs(j,c),C){case 0:h=zx(null,h,j,c,g);break e;case 1:h=C_(null,h,j,c,g);break e;case 11:h=S_(null,h,j,c,g);break e;case 14:h=__(null,h,j,Gs(j.type,c),g);break e}throw Error(r(306,j,""))}return h;case 0:return j=h.type,C=h.pendingProps,C=h.elementType===j?C:Gs(j,C),zx(c,h,j,C,g);case 1:return j=h.type,C=h.pendingProps,C=h.elementType===j?C:Gs(j,C),C_(c,h,j,C,g);case 3:e:{if(O_(h),c===null)throw Error(r(387));j=h.pendingProps,D=h.memoizedState,C=D.element,KS(c,h),v0(h,j,null,g);var Q=h.memoizedState;if(j=Q.element,D.isDehydrated)if(D={element:j,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){C=Dc(Error(r(423)),h),h=P_(c,h,j,g,C);break e}else if(j!==C){C=Dc(Error(r(424)),h),h=P_(c,h,j,g,C);break e}else for(os=Ao(h.stateNode.containerInfo.firstChild),is=h,an=!0,Vs=null,g=zS(h,null,j,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Tc(),j===C){h=Yi(c,h,g);break e}Da(c,h,j,g)}h=h.child}return h;case 5:return YS(h),c===null&&bx(h),j=h.type,C=h.pendingProps,D=c!==null?c.memoizedProps:null,Q=C.children,dx(j,C)?Q=null:D!==null&&dx(j,D)&&(h.flags|=32),T_(c,h),Da(c,h,Q,g),h.child;case 6:return c===null&&bx(h),null;case 13:return I_(c,h,g);case 4:return Ax(h,h.stateNode.containerInfo),j=h.pendingProps,c===null?h.child=Cc(h,null,j,g):Da(c,h,j,g),h.child;case 11:return j=h.type,C=h.pendingProps,C=h.elementType===j?C:Gs(j,C),S_(c,h,j,C,g);case 7:return Da(c,h,h.pendingProps,g),h.child;case 8:return Da(c,h,h.pendingProps.children,g),h.child;case 12:return Da(c,h,h.pendingProps.children,g),h.child;case 10:e:{if(j=h.type._context,C=h.pendingProps,D=h.memoizedProps,Q=C.value,Vr(g0,j._currentValue),j._currentValue=Q,D!==null)if(Ks(D.value,Q)){if(D.children===C.children&&!Ka.current){h=Yi(c,h,g);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var ue=D.dependencies;if(ue!==null){Q=D.child;for(var ge=ue.firstContext;ge!==null;){if(ge.context===j){if(D.tag===1){ge=Gi(-1,g&-g),ge.tag=2;var Le=D.updateQueue;if(Le!==null){Le=Le.shared;var Ze=Le.pending;Ze===null?ge.next=ge:(ge.next=Ze.next,Ze.next=ge),Le.pending=ge}}D.lanes|=g,ge=D.alternate,ge!==null&&(ge.lanes|=g),Sx(D.return,g,h),ue.lanes|=g;break}ge=ge.next}}else if(D.tag===10)Q=D.type===h.type?null:D.child;else if(D.tag===18){if(Q=D.return,Q===null)throw Error(r(341));Q.lanes|=g,ue=Q.alternate,ue!==null&&(ue.lanes|=g),Sx(Q,g,h),Q=D.sibling}else Q=D.child;if(Q!==null)Q.return=D;else for(Q=D;Q!==null;){if(Q===h){Q=null;break}if(D=Q.sibling,D!==null){D.return=Q.return,Q=D;break}Q=Q.return}D=Q}Da(c,h,C.children,g),h=h.child}return h;case 9:return C=h.type,j=h.pendingProps.children,Pc(h,g),C=_s(C),j=j(C),h.flags|=1,Da(c,h,j,g),h.child;case 14:return j=h.type,C=Gs(j,h.pendingProps),C=Gs(j.type,C),__(c,h,j,C,g);case 15:return E_(c,h,h.type,h.pendingProps,g);case 17:return j=h.type,C=h.pendingProps,C=h.elementType===j?C:Gs(j,C),A0(c,h),h.tag=1,Va(j)?(c=!0,u0(h)):c=!1,Pc(h,g),y_(h,j,C),Ux(h,j,C,g),Wx(null,h,j,!0,c,g);case 19:return M_(c,h,g);case 22:return A_(c,h,g)}throw Error(r(156,h.tag))};function sE(c,h){return Ve(c,h)}function l7(c,h,g,j){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(c,h,g,j){return new l7(c,h,g,j)}function dy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function c7(c){if(typeof c=="function")return dy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===U)return 14}return 2}function Lo(c,h){var g=c.alternate;return g===null?(g=Ts(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function L0(c,h,g,j,C,D){var Q=2;if(j=c,typeof c=="function")dy(c)&&(Q=1);else if(typeof c=="string")Q=5;else e:switch(c){case _:return Nl(g.children,C,D,h);case A:Q=8,C|=8;break;case P:return c=Ts(12,g,h,C|2),c.elementType=P,c.lanes=D,c;case L:return c=Ts(13,g,h,C),c.elementType=L,c.lanes=D,c;case X:return c=Ts(19,g,h,C),c.elementType=X,c.lanes=D,c;case ne:return B0(g,C,D,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:Q=10;break e;case I:Q=9;break e;case O:Q=11;break e;case U:Q=14;break e;case V:Q=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Ts(Q,g,h,C),h.elementType=c,h.type=j,h.lanes=D,h}function Nl(c,h,g,j){return c=Ts(7,c,j,h),c.lanes=g,c}function B0(c,h,g,j){return c=Ts(22,c,j,h),c.elementType=ne,c.lanes=g,c.stateNode={isHidden:!1},c}function hy(c,h,g){return c=Ts(6,c,null,h),c.lanes=g,c}function fy(c,h,g){return h=Ts(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function u7(c,h,g,j,C){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ot(0),this.expirationTimes=Ot(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.identifierPrefix=j,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function py(c,h,g,j,C,D,Q,ue,ge){return c=new u7(c,h,g,ue,ge),h===1?(h=1,D===!0&&(h|=8)):h=0,D=Ts(3,null,null,h),c.current=D,D.stateNode=c,D.memoizedState={element:j,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ex(D),c}function d7(c,h,g){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:j==null?null:""+j,children:c,containerInfo:h,implementation:g}}function iE(c){if(!c)return Co;c=c._reactInternals;e:{if(ae(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Va(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(Va(g))return DS(c,g,h)}return h}function oE(c,h,g,j,C,D,Q,ue,ge){return c=py(g,j,!0,c,C,D,Q,ue,ge),c.context=iE(null),g=c.current,j=Ma(),C=Fo(g),D=Gi(j,C),D.callback=h??null,Io(g,D,C),c.current.lanes=C,Ht(c,C,j),Xa(c,j),c}function U0(c,h,g,j){var C=h.current,D=Ma(),Q=Fo(C);return g=iE(g),h.context===null?h.context=g:h.pendingContext=g,h=Gi(D,Q),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=Io(C,h,Q),c!==null&&(Js(c,C,Q,D),y0(c,C,Q)),Q}function H0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function lE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function my(c,h){lE(c,h),(c=c.alternate)&&lE(c,h)}function h7(){return null}var cE=typeof reportError=="function"?reportError:function(c){console.error(c)};function gy(c){this._internalRoot=c}q0.prototype.render=gy.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));U0(c,h,null,null)},q0.prototype.unmount=gy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;bl(function(){U0(null,c,null,null)}),h[qi]=null}};function q0(c){this._internalRoot=c}q0.prototype.unstable_scheduleHydration=function(c){if(c){var h=ot();c={blockedOn:null,target:c,priority:h};for(var g=0;g<Jn.length&&h!==0&&h<Jn[g].priority;g++);Jn.splice(g,0,c),g===0&&vi(c)}};function xy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function z0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function uE(){}function f7(c,h,g,j,C){if(C){if(typeof j=="function"){var D=j;j=function(){var Le=H0(Q);D.call(Le)}}var Q=oE(h,j,c,0,null,!1,!1,"",uE);return c._reactRootContainer=Q,c[qi]=Q.current,wd(c.nodeType===8?c.parentNode:c),bl(),Q}for(;C=c.lastChild;)c.removeChild(C);if(typeof j=="function"){var ue=j;j=function(){var Le=H0(ge);ue.call(Le)}}var ge=py(c,0,!1,null,null,!1,!1,"",uE);return c._reactRootContainer=ge,c[qi]=ge.current,wd(c.nodeType===8?c.parentNode:c),bl(function(){U0(h,ge,g,j)}),ge}function W0(c,h,g,j,C){var D=g._reactRootContainer;if(D){var Q=D;if(typeof C=="function"){var ue=C;C=function(){var ge=H0(Q);ue.call(ge)}}U0(h,Q,c,C)}else Q=f7(g,h,c,C,j);return H0(Q)}Et=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var g=Pe(h.pendingLanes);g!==0&&(Dt(h,g|1),Xa(h,Qe()),(Sr&6)===0&&(Fc=Qe()+500,Oo()))}break;case 13:bl(function(){var j=Vi(c,1);if(j!==null){var C=Ma();Js(j,c,1,C)}}),my(c,1)}},hr=function(c){if(c.tag===13){var h=Vi(c,134217728);if(h!==null){var g=Ma();Js(h,c,134217728,g)}my(c,134217728)}},He=function(c){if(c.tag===13){var h=Fo(c),g=Vi(c,h);if(g!==null){var j=Ma();Js(g,c,h,j)}my(c,h)}},ot=function(){return ft},Br=function(c,h){var g=ft;try{return ft=c,h()}finally{ft=g}},bt=function(c,h,g){switch(h){case"input":if(Ee(c,g),h=g.name,g.type==="radio"&&h!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var j=g[h];if(j!==c&&j.form===c.form){var C=l0(j);if(!C)throw Error(r(90));q(j),Ee(j,C)}}}break;case"textarea":sr(c,g);break;case"select":h=g.value,h!=null&&vt(c,!!g.multiple,h,!1)}},yt=ly,ht=bl;var p7={usingClientEntryPoint:!1,Events:[kd,kc,l0,Rt,nt,ly]},$d={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m7={bundleType:$d.bundleType,version:$d.version,rendererPackageName:$d.rendererPackageName,rendererConfig:$d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ce(c),c===null?null:c.stateNode},findFiberByHostInstance:$d.findFiberByHostInstance||h7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K0.isDisabled&&K0.supportsFiber)try{ns=K0.inject(m7),fr=K0}catch{}}return Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p7,Ja.createPortal=function(c,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(h))throw Error(r(200));return d7(c,h,null,g)},Ja.createRoot=function(c,h){if(!xy(c))throw Error(r(299));var g=!1,j="",C=cE;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(C=h.onRecoverableError)),h=py(c,1,!1,null,null,g,!1,j,C),c[qi]=h.current,wd(c.nodeType===8?c.parentNode:c),new gy(h)},Ja.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ce(h),c=c===null?null:c.stateNode,c},Ja.flushSync=function(c){return bl(c)},Ja.hydrate=function(c,h,g){if(!z0(h))throw Error(r(200));return W0(null,c,h,!0,g)},Ja.hydrateRoot=function(c,h,g){if(!xy(c))throw Error(r(405));var j=g!=null&&g.hydratedSources||null,C=!1,D="",Q=cE;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onRecoverableError!==void 0&&(Q=g.onRecoverableError)),h=oE(h,null,c,1,g??null,C,!1,D,Q),c[qi]=h.current,wd(c),j)for(c=0;c<j.length;c++)g=j[c],C=g._getVersion,C=C(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,C]:h.mutableSourceEagerHydrationData.push(g,C);return new q0(h)},Ja.render=function(c,h,g){if(!z0(h))throw Error(r(200));return W0(null,c,h,!1,g)},Ja.unmountComponentAtNode=function(c){if(!z0(c))throw Error(r(40));return c._reactRootContainer?(bl(function(){W0(null,null,c,!1,function(){c._reactRootContainer=null,c[qi]=null})}),!0):!1},Ja.unstable_batchedUpdates=ly,Ja.unstable_renderSubtreeIntoContainer=function(c,h,g,j){if(!z0(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return W0(c,h,g,!1,j)},Ja.version="18.3.1-next-f1338f8080-20240426",Ja}var yE;function jI(){if(yE)return by.exports;yE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),by.exports=N7(),by.exports}var vE;function k7(){if(vE)return G0;vE=1;var e=jI();return G0.createRoot=e.createRoot,G0.hydrateRoot=e.hydrateRoot,G0}var S7=k7(),F=ZN();const de=$r(F),_7=x7({__proto__:null,default:de},[F]),Vm={fresh_produce:" Fresh Vegetables",spices_seasonings:" Grocery",dairy:" Dairy Products",meat:" Meat",packaging:" Packaging Materials",staff_essentials:" Staff Essentials"},bE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},e2={fuel:" Fuel Cost",travel:" Travel by Employee",transportation:" Goods Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",emergency_online:" Emergency Online Order (Blinkit)",personal_expense:" Personal Expense By an Employee",miscellaneous:" Miscellaneous Cost"},t2={electricity:" Electricity",rent:" Rent",lpg_gas:" LPG Gas Cost (Cylinders)"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),wE=e=>{const t=A7(e);return t.charAt(0).toUpperCase()+t.slice(1)},NI=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=F.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},u)=>F.createElement("svg",{ref:u,...T7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:NI("lucide",s),...l},[...o.map(([d,f])=>F.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(e,t)=>{const r=F.forwardRef(({className:n,...s},i)=>F.createElement(C7,{ref:i,iconNode:t,className:NI(`lucide-${E7(wE(e))}`,`lucide-${e}`,n),...s}));return r.displayName=wE(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Y1=pt("activity",O7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],I7=pt("arrow-right",P7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],jE=pt("award",D7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],X1=pt("bell",M7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Sp=pt("briefcase",R7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],NE=pt("bug",F7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Jo=pt("building-2",$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fr=pt("calendar",L7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],kI=pt("chart-column",B7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ao=pt("check",U7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],q7=pt("chef-hat",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gm=pt("chevron-down",z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],J1=pt("chevron-left",W7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qo=pt("chevron-right",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],SI=pt("chevron-up",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Y7=pt("circle-arrow-down",G7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pr=pt("circle-alert",X7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],kE=pt("circle-arrow-up",J7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nr=pt("circle-check-big",Q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pa=pt("circle-x",Z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],SE=pt("clipboard-check",e9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],r9=pt("clipboard-list",t9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],on=pt("clock",n9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],s9=pt("copy",a9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],cu=pt("credit-card",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qn=pt("dollar-sign",o9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ii=pt("download",l9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],u9=pt("eraser",c9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],to=pt("eye",d9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Nn=pt("factory",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],_p=pt("file-spreadsheet",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fi=pt("file-text",p9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],g9=pt("hash",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],y9=pt("info",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],b9=pt("key-round",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],j9=pt("key",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],k9=pt("layers",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tf=pt("loader-circle",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],E9=pt("loader",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Q1=pt("lock",A9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],C9=pt("log-in",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Xd=pt("log-out",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],_h=pt("mail",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],r2=pt("map-pin",I9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],_E=pt("menu",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],_I=pt("network",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rr=pt("package",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ei=pt("pen",F9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Y0=pt("phone",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],co=pt("plus",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],U9=pt("receipt",B9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ep=pt("refresh-cw",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gl=pt("save",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],W9=pt("search",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ap=pt("send",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ai=pt("settings",V9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Y9=pt("shield-check",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],J9=pt("shopping-bag",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Jc=pt("shopping-cart",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],eB=pt("smartphone",Z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],rB=pt("soup",tB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ps=pt("square-check-big",nB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z1=pt("square-pen",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Di=pt("store",sB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],oB=pt("table",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],n2=pt("target",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],bs=pt("trash-2",cB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],a2=pt("trending-down",uB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],gn=pt("trending-up",dB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],On=pt("triangle-alert",hB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],ej=pt("trophy",fB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],EE=pt("truck",pB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Jd=pt("upload",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],xB=pt("user-check",gB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],oi=pt("user-cog",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ti=pt("user-plus",vB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],AE=pt("user-x",bB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Aa=pt("user",wB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],xn=pt("users",jB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ro=pt("wallet",NB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Wr=pt("x",kB),_a="xssxnhrzxvtejavoqgwg",In="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function Ym(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function SB(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(n.next(f))}catch(p){o(p)}}function u(f){try{d(n.throw(f))}catch(p){o(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,u)}d((n=n.apply(e,t||[])).next())})}const _B=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class s2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class EB extends s2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class TE extends s2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class CE extends s2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var tj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(tj||(tj={}));class AB{constructor(t,{headers:r={},customFetch:n,region:s=tj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=_B(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return SB(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:u,body:d,signal:f,timeout:p}=n;let m={},{region:x}=n;x||(x=this.region);const v=new URL(`${this.url}/${r}`);x&&x!=="any"&&(m["x-region"]=x,v.searchParams.set("forceFunctionRegion",x));let y;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?y=JSON.stringify(d):y=d;let b=f;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),f?(b=o.signal,f.addEventListener("abort",()=>o.abort())):b=o.signal);const k=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y,signal:b}).catch(E=>{throw new EB(E)}),N=k.headers.get("x-relay-error");if(N&&N==="true")throw new TE(k);if(!k.ok)throw new CE(k);let w=((s=k.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),T;return w==="application/json"?T=yield k.json():w==="application/octet-stream"||w==="application/pdf"?T=yield k.blob():w==="text/event-stream"?T=k:w==="multipart/form-data"?T=yield k.formData():T=yield k.text(),{data:T,error:null,response:k}}catch(l){return{data:null,error:l,response:l instanceof CE||l instanceof TE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var TB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},CB=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,u=null,d=i.status,f=i.statusText;if(i.ok){var p,m;if(r.method!=="HEAD"){var x;const k=await i.text();k===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=k:l=JSON.parse(k))}const y=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),b=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");y&&b&&b.length>1&&(u=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,d=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,f="OK")}catch{i.status===404&&y===""?(d=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,d=200,f="OK"),o&&r.shouldThrowOnError)throw new TB(o)}return{error:o,data:l,count:u,status:d,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const u=i?.cause;if(u){var d,f,p,m;const v=(d=u?.message)!==null&&d!==void 0?d:"",y=(f=u?.code)!==null&&f!==void 0?f:"";l=`${(p=i?.name)!==null&&p!==void 0?p:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(m=u?.name)!==null&&m!==void 0?m:"Error"}: ${v}`,y&&(l+=` (${y})`),u?.stack&&(l+=`
${u.stack}`)}else{var x;l=(x=i?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},OB=class extends CB{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const OE=new RegExp("[,()]");var Qc=class extends OB{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&OE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},PB=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:u}=this.cloneRequestState();return l.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new Qc({method:s,url:l,headers:u,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",u.join(","))}}return new Qc({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&u.append("Prefer",`count=${n}`),s||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);l.searchParams.set("columns",f.join(","))}}return new Qc({method:o,url:l,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Qc({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Qc({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},IB=class EI{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PB(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new EI(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${t}`);let d;const f=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(f)),p=n&&Object.values(r).some(f);p?(l="POST",d=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{u.searchParams.append(x,v)})):(l="POST",d=r);const m=new Headers(this.headers);return p?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new Qc({method:l,url:u,headers:m,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class DB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const MB="2.90.1",RB=`realtime-js/${MB}`,AI="1.0.0",FB="2.0.0",PE=AI,rj=1e4,$B=1e3,LB=100;var qo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qo||(qo={}));var Bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bn||(Bn={}));var ni;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ni||(ni={}));var nj;(function(e){e.websocket="websocket"})(nj||(nj={}));var Il;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Il||(Il={}));class BB{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(f).length===0?"":JSON.stringify(f);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+p.length,x=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(x),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,u.length),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,d.length),v.setUint8(y++,p.length),v.setUint8(y++,r),Array.from(u,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(l,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(o,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(d,k=>v.setUint8(y++,k.charCodeAt(0))),Array.from(p,k=>v.setUint8(y++,k.charCodeAt(0)));var b=new Uint8Array(x.byteLength+n.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(n),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,u]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const d=n.decode(t.slice(u,u+s));u=u+s;const f=n.decode(t.slice(u,u+i));u=u+i;const p=n.decode(t.slice(u,u+o));u=u+o;const m=t.slice(u,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:f,payload:x};return o>0&&(v.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class TI{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Gr||(Gr={}));const IE=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=UB(o,e,t,s),i),{}):{}},UB=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!n.includes(i)?CI(i,o):aj(o)},CI=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return WB(t,r)}switch(e){case Gr.bool:return HB(t);case Gr.float4:case Gr.float8:case Gr.int2:case Gr.int4:case Gr.int8:case Gr.numeric:case Gr.oid:return qB(t);case Gr.json:case Gr.jsonb:return zB(t);case Gr.timestamp:return KB(t);case Gr.abstime:case Gr.date:case Gr.daterange:case Gr.int4range:case Gr.int8range:case Gr.money:case Gr.reltime:case Gr.text:case Gr.time:case Gr.timestamptz:case Gr.timetz:case Gr.tsrange:case Gr.tstzrange:return aj(t);default:return aj(t)}},aj=e=>e,HB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},WB=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>CI(t,l))}return e},KB=e=>typeof e=="string"?e.replace(" ","T"):e,OI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ny{constructor(t,r,n={},s=rj){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var DE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(DE||(DE={}));class oh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oh.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=oh.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=oh.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(d,f)=>{o[d]||(u[d]=f)}),this.map(o,(d,f)=>{const p=i[d];if(p){const m=f.map(b=>b.presence_ref),x=p.map(b=>b.presence_ref),v=f.filter(b=>x.indexOf(b.presence_ref)<0),y=p.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[d]=v),y.length>0&&(u[d]=y)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),f.length>0){const p=t[l].map(x=>x.presence_ref),m=f.filter(x=>p.indexOf(x.presence_ref)<0);t[l].unshift(...m)}n(l,f,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const f=u.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),t[l]=d,s(l,d,u),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ME;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ME||(ME={}));var lh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(lh||(lh={}));var Zi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zi||(Zi={}));class ru{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ny(this,ni.join,this.params,this.timeout),this.rejoinTimer=new TI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ni.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new oh(this),this.broadcastEndpointURL=OI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bn.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[lh.PRESENCE]&&this.bindings[lh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t?.(Zi.CHANNEL_ERROR,x)),this._onClose(()=>t?.(Zi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t?.(Zi.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(v=y?.length)!==null&&v!==void 0?v:0,k=[];for(let N=0;N<b;N++){const w=y[N],{filter:{event:T,schema:E,table:S,filter:_}}=w,A=x&&x[N];if(A&&A.event===T&&ru.isFilterValueEqual(A.schema,E)&&ru.isFilterValueEqual(A.table,S)&&ru.isFilterValueEqual(A.filter,_))k.push(Object.assign(Object.assign({},w),{id:A.id}));else{this.unsubscribe(),this.state=Bn.errored,t?.(Zi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Zi.SUBSCRIBED);return}}).receive("error",x=>{this.state=Bn.errored,t?.(Zi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t?.(Zi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Bn.joined&&t===lh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ni.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ny(this,ni.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ny(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>LB){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:f}=ni;if(n&&[l,u,d,f].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var v,y,b;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(y=x.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var v,y,b,k,N,w,T,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const S=x.id,_=(v=x.filter)===null||v===void 0?void 0:v.event;return S&&((y=r.ids)===null||y===void 0?void 0:y.includes(S))&&(_==="*"||_?.toLocaleLowerCase()===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((k=x.filter)===null||k===void 0)&&k.table)||x.filter.table===((N=r.data)===null||N===void 0?void 0:N.table))}else{const S=(T=(w=x?.filter)===null||w===void 0?void 0:w.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return S==="*"||S===((E=r?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:y,table:b,commit_timestamp:k,type:N,errors:w}=v;m=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:k,eventType:N,new:{},old:{},errors:w}),this._getPayloadRecords(v))}x.callback(m,n)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ru.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ni.close,{},t)}_onError(t){this._on(ni.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=IE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=IE(t.columns,t.old_record)),r}}const ky=()=>{},X0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VB=[1e3,2e3,5e3,1e4],GB=1e4,YB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class XB{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rj,this.transport=null,this.heartbeatIntervalMs=X0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ky,this.ref=0,this.reconnectTimer=null,this.vsn=PE,this.logger=ky,this.conn=null,this.sendBuffer=[],this.serializer=new BB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${nj.websocket}`,this.httpEndpoint=OI(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case qo.connecting:return Il.Connecting;case qo.open:return Il.Open;case qo.closing:return Il.Closing;default:return Il.Closed}}isConnected(){return this.connectionState()===Il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new ru(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($B,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},X0.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===qo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===qo.open||this.conn.readyState===qo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ni.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([YB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:RB};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(ni.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new TI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},X0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,u,d,f,p,m,x;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:rj,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:X0.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:ky,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:PE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(v=>VB[v-1]||GB),this.vsn){case AI:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((v,y)=>y(JSON.stringify(v))),this.decode=(p=t?.decode)!==null&&p!==void 0?p:((v,y)=>y(JSON.parse(v)));break;case FB:this.encode=(m=t?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Eh=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function JB(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function QB(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ZB(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=JB(e.baseUrl,n,s),u=await QB(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),f=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),m=p&&f?JSON.parse(f):f;if(!d.ok){const x=p?m:void 0,v=x?.error;throw new Eh(v?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:v?.type,icebergCode:v?.code,details:x})}return{status:d.status,headers:d.headers,data:m}}}}function J0(e){return e.join("")}var eU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:J0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${J0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${J0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${J0(e.namespace)}`}),!0}catch(t){if(t instanceof Eh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Eh&&r.status===409)return;throw r}}};function Lc(e){return e.join("")}var tU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Eh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Eh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},rU=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ZB({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new eU(this.client,t),this.tableOps=new tU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Xm=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function dn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var nU=class extends Xm{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sj=class extends Xm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const i2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aU=()=>Response,ij=e=>{if(Array.isArray(e))return e.map(r=>ij(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ij(n)}),t},sU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},iU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function oU(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lU(e){var t=oU(e,"string");return Ah(t)=="symbol"?t:t+""}function cU(e,t,r){return(t=lU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(n){cU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Sy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},uU=async(e,t,r)=>{e instanceof await aU()&&!r?.noResolveJson?e.json().then(n=>{const s=e.status||500,i=n?.statusCode||s+"";t(new nU(Sy(n),s,i))}).catch(n=>{t(new sj(Sy(n),n))}):t(new sj(Sy(e),e))},dU=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||!n?s:(sU(n)?(s.headers=Xt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,t?.duplex&&(s.duplex=t.duplex),Xt(Xt({},s),r))};async function Cf(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,dU(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>uU(u,l,n))})}async function Th(e,t,r,n){return Cf(e,"GET",t,r,n)}async function ri(e,t,r,n,s){return Cf(e,"POST",t,n,s,r)}async function oj(e,t,r,n,s){return Cf(e,"PUT",t,n,s,r)}async function hU(e,t,r,n){return Cf(e,"HEAD",t,Xt(Xt({},r),{},{noResolveJson:!0}),n)}async function o2(e,t,r,n,s){return Cf(e,"DELETE",t,n,s,r)}var fU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(dn(t))return{data:null,error:t};throw t}}};let PI;PI=Symbol.toStringTag;var pU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[PI]="BlobDownloadBuilder",this.promise=null}asStream(){return new fU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(dn(t))return{data:null,error:t};throw t}}};const mU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},FE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var gU=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=i2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=Xt(Xt({},FE),n);let l=Xt(Xt({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(l=Xt(Xt({},l),n.headers));const d=s._removeEmptyFolders(t),f=s._getFinalPath(d),p=await(e=="PUT"?oj:ri)(s.fetch,`${s.url}/object/${f}`,i,Xt({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(dn(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let u;const d=Xt({upsert:FE.upsert},n),f=Xt(Xt({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType),{data:{path:i,fullPath:(await oj(s.fetch,l.toString(),u,{headers:f})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(dn(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=Xt({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await ri(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Xm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await ri(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await ri(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await ri(n.fetch,`${n.url}/object/sign/${s}`,Xt({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await ri(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Xt(Xt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Th(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new pU(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:ij(await Th(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await hU(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(dn(n)&&n instanceof sj){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await o2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=Xt(Xt(Xt({},mU),t),{},{prefix:e||""});return{data:await ri(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(dn(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=Xt({},e);return{data:await ri(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const II="2.90.1",DI={"X-Client-Info":`storage-js/${II}`};var xU=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Xt(Xt({},DI),t),this.fetch=i2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Th(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Th(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await ri(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await oj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await ri(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await o2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},yU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xt(Xt({},DI),t),this.fetch=i2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ri(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Th(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await o2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!iU(e))throw new Xm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new rU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const l2={"X-Client-Info":`storage-js/${II}`,"Content-Type":"application/json"};var MI=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function gs(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var _y=class extends MI{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vU=class extends MI{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const c2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$E=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wU=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=i?.statusCode||i?.code||n+"";t(new _y($E(i),n,o))}).catch(()=>{const i=n+"";t(new _y(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new _y(s.statusText||`HTTP ${n} error`,n,i))}}else t(new vU($E(e),e))},jU=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return n?(bU(n)?(s.headers=Xt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,Xt(Xt({},s),r)):s};async function NU(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,jU(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>wU(u,l,n))})}async function xs(e,t,r,n,s){return NU(e,"POST",t,n,s,r)}var kU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xt(Xt({},l2),t),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await xs(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await xs(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(gs(n))return{data:null,error:n};throw n}}},SU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xt(Xt({},l2),t),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await xs(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await xs(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await xs(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}},_U=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Xt(Xt({},l2),t),this.fetch=c2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await xs(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await xs(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(gs(r))return{data:null,error:r};throw r}}},EU=class extends _U{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new AU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},AU=class extends kU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new TU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},TU=class extends SU{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Xt(Xt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},CU=class extends xU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new gU(this.url,this.headers,e,this.fetch)}get vectors(){return new EU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yU(this.url+"/iceberg",this.headers,this.fetch)}};const RI="2.90.1",Zc=30*1e3,lj=3,Ey=lj*Zc,OU="http://localhost:9999",PU="supabase.auth.token",IU={"X-Client-Info":`gotrue-js/${RI}`},cj="X-Supabase-Api-Version",FI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MU=600*1e3;class Ch extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $t(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class RU extends Ch{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function FU(e){return $t(e)&&e.name==="AuthApiError"}class Dl extends Ch{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class bo extends Ch{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class us extends bo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $U(e){return $t(e)&&e.name==="AuthSessionMissingError"}class Bc extends bo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Q0 extends bo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Z0 extends bo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LU(e){return $t(e)&&e.name==="AuthImplicitGrantRedirectError"}class LE extends bo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class BU extends bo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class uj extends bo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ay(e){return $t(e)&&e.name==="AuthRetryableFetchError"}class BE extends bo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class dj extends bo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UE=` 	
\r=`.split(""),UU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<UE.length;t+=1)e[UE[t].charCodeAt(0)]=-2;for(let t=0;t<Tp.length;t+=1)e[Tp[t].charCodeAt(0)]=t;return e})();function HE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tp[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tp[n]),t.queuedBits-=6}}function $I(e,t,r){const n=UU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{zU(o,n,r)};for(let o=0;o<e.length;o+=1)$I(e.charCodeAt(o),s,i);return t.join("")}function HU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function qU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}HU(n,t)}}function zU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function uu(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)$I(e.charCodeAt(s),r,n);return new Uint8Array(t)}function WU(e){const t=[];return qU(e,r=>t.push(r)),new Uint8Array(t)}function Fl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>HE(s,r,n)),HE(null,r,n),t.join("")}function KU(e){return Math.round(Date.now()/1e3)+e}function VU(){return Symbol("auth-callback")}const ca=()=>typeof window<"u"&&typeof document<"u",kl={tested:!1,writable:!1},LI=()=>{if(!ca())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kl.tested)return kl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),kl.tested=!0,kl.writable=!0}catch{kl.tested=!0,kl.writable=!1}return kl.writable};function GU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const BI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",eu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Sl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},la=async(e,t)=>{await e.removeItem(t)};class Jm{constructor(){this.promise=new Jm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Jm.promiseConstructor=Promise;function Ty(e){const t=e.split(".");if(t.length!==3)throw new dj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!DU.test(t[n]))throw new dj("JWT not in base64url format");return{header:JSON.parse(qE(t[0])),payload:JSON.parse(qE(t[1])),signature:uu(t[2]),raw:{header:t[0],payload:t[1]}}}async function XU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JU(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function QU(e){return("0"+e.toString(16)).substr(-2)}function ZU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,QU).join("")}async function eH(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function tH(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await eH(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Uc(e,t,r=!1){const n=ZU();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await eu(e,`${t}-code-verifier`,s);const i=await tH(n);return[i,n===i?"plain":"s256"]}const rH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nH(e){const t=e.headers.get(cj);if(!t||!t.match(rH))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function aH(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sH(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hc(e){if(!iH.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oH(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function zE(e){return JSON.parse(JSON.stringify(e))}const Cl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lH=[502,503,504];async function WE(e){var t;if(!YU(e))throw new uj(Cl(e),0);if(lH.includes(e.status))throw new uj(Cl(e),e.status);let r;try{r=await e.json()}catch(i){throw new Dl(Cl(i),i)}let n;const s=nH(e);if(s&&s.getTime()>=FI["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new BE(Cl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new us}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new BE(Cl(r),e.status,r.weak_password.reasons);throw new RU(Cl(r),e.status||500,n)}const cH=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Yt(e,t,r,n){var s;const i=Object.assign({},n?.headers);i[cj]||(i[cj]=FI["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await uH(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function uH(e,t,r,n,s,i){const o=cH(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new uj(Cl(u),0)}if(l.ok||await WE(l),n?.noResolveJson)return l;try{return await l.json()}catch(u){await WE(u)}}function ti(e){var t;let r=null;fH(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=KU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function KE(e){const t=ti(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dH(e){return{data:e,error:null}}function hH(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Ym(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function VE(e){return e}function fH(e){return e.access_token&&e.refresh_token&&e.expires_in}const Oy=["global","local","others"];class pH{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=BI(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Oy[0]){if(Oy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oy.join(", ")}`);try{return await Yt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Ym(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await Yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hH,redirectTo:r?.redirectTo})}catch(r){if($t(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Yt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:VE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if($t(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Hc(t);try{return await Yt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hc(t);try{return await Yt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hc(t);try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hc(t.userId);try{const{data:r,error:n}=await Yt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hc(t.userId),Hc(t.id);try{return{data:await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:VE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if($t(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Yt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}}function GE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const qc={debug:!!(globalThis&&LI()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class UI extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mH extends UI{}async function gH(e,t,r){qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mH(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function xH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function HI(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function yH(e){return parseInt(e,16)}function vH(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function bH(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:f,uri:p,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=HI(e.address),v=f?`${f}://${n}`:n,y=e.statement?`${e.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${x}

${y}`;let k=`URI: ${p}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),l&&(k+=`
Not Before: ${l.toISOString()}`),u&&(k+=`
Request ID: ${u}`),d){let N=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);N+=`
- ${w}`}k+=N}return`${b}
${k}`}class Cn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Cp extends Cn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function wH({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(qI(o)){if(i.rp.id!==o)return new Cn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function jH({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(qI(n)){if(r.rpId!==n)return new Cn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class NH{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const kH=new NH;function SH(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Ym(e,["challenge","user","excludeCredentials"]),i=uu(t).buffer,o=Object.assign(Object.assign({},r),{id:uu(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:uu(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function _H(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ym(e,["challenge","allowCredentials"]),s=uu(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:uu(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function EH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Fl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Fl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function AH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Fl(new Uint8Array(s.authenticatorData)),clientDataJSON:Fl(new Uint8Array(s.clientDataJSON)),signature:Fl(new Uint8Array(s.signature)),userHandle:s.userHandle?Fl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qI(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function YE(){var e,t;return!!(ca()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function TH(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cp("Browser returned unexpected credential type",t)}:{data:null,error:new Cp("Empty credential response",t)}}catch(t){return{data:null,error:wH({error:t,options:e})}}}async function CH(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cp("Browser returned unexpected credential type",t)}:{data:null,error:new Cp("Empty credential response",t)}}catch(t){return{data:null,error:jH({error:t,options:e})}}}const OH={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},PH={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Op(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Op(l,o):n[i]=Op(o)}else n[i]=o}return n}function IH(e,t){return Op(OH,e,t||{})}function DH(e,t){return Op(PH,e,t||{})}class MH{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=s??kH.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=IH(o.webauthn.credential_options.publicKey,i?.create),{data:f,error:p}=await TH({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const d=DH(o.webauthn.credential_options.publicKey,i?.request),{data:f,error:p}=await CH(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Dl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ch("rpId is required for WebAuthn authentication")};try{if(!YE())return{data:null,error:new Dl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Dl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ch("rpId is required for WebAuthn registration")};try{if(!YE())return{data:null,error:new Dl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Dl("Unexpected error in register",o)}}}}xH();const RH={url:OU,storageKey:PU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function XE(e,t,r){return await r()}const zc={};class Oh{get jwks(){var t,r;return(r=(t=zc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){zc[this.storageKey]=Object.assign(Object.assign({},zc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=zc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zc[this.storageKey]=Object.assign(Object.assign({},zc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},RH),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Oh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Oh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ca()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new pH({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=BI(i.fetch),this.lock=i.lock||XE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ca()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=gH:this.lock=XE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new MH(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:LI()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=GE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=GE(this.memoryStorage)),ca()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${RI}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ca()&&(r=GU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ca()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),LU(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $t(r)?this._returnResult({error:r}):this._returnResult({error:new Dl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:ti}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if($t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:m}=t;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await Uc(this.storage,this.storageKey)),i=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:f,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:x,code_challenge_method:v},xform:ti})}else if("phone"in t){const{phone:f,password:p,options:m}=t;i=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:ti})}else throw new Q0("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await la(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:KE})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:KE})}else throw new Q0("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Bc;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,u,d,f,p,m;let x,v;if("message"in t)x=t.message,v=t.signature;else{const{chain:y,wallet:b,statement:k,options:N}=t;let w;if(ca())if(typeof b=="object")w=b;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")w=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const T=new URL((r=N?.url)!==null&&r!==void 0?r:window.location.href),E=await w.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=HI(E[0]);let _=(n=N?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!_){const P=await w.request({method:"eth_chainId"});_=yH(P)}const A={domain:T.host,address:S,statement:k,uri:T.href,version:"1",chainId:_,nonce:(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=N?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=N?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=N?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=N?.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=bH(A),v=await w.request({method:"personal_sign",params:[vH(x),S]})}try{const{data:y,error:b}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ti});if(b)throw b;if(!y||!y.session||!y.user){const k=new Bc;return this._returnResult({data:{user:null,session:null},error:k})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:b})}catch(y){if($t(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,u,d,f,p,m,x;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:b,wallet:k,statement:N,options:w}=t;let T;if(ca())if(typeof k=="object")T=k;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))T=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=k}const E=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const S=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),N?{statement:N}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),y=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(f=w?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:b,error:k}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Fl(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ti});if(k)throw k;if(!b||!b.session||!b.user){const N=new Bc;return this._returnResult({data:{user:null,session:null},error:N})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:k})}catch(b){if($t(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await Sl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new BU;const{data:i,error:o}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ti});if(await la(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Bc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ti}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const f=new Bc;return this._returnResult({data:{user:null,session:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Uc(this.storage,this.storageKey));const{error:p}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:f}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u?.data)!==null&&s!==void 0?s:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new Q0("You must provide either an email or phone number.")}catch(l){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ti});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if($t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Uc(this.storage,this.storageKey));const d=await Yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:dH});return!((i=d.data)===null||i===void 0)&&i.url&&ca()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new us;const{error:s}=await Yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if($t(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Yt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await Yt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new Q0("You must provide either an email or phone number and a type")}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ey:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Sl(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Cy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=oH(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wo}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new us}:await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Wo})})}catch(r){if($t(r))return $U(r)&&(await this._removeSession(),await la(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new us;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Uc(this.storage,this.storageKey));const{data:d,error:f}=await Yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Wo});if(f)throw f;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new us;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ty(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if($t(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new us;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ca())throw new Z0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Z0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new LE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Z0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new LE("No code detected.");const{data:N,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!i||!l||!o||!d)throw new Z0("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(l);let m=f+p;u&&(m=parseInt(u));const x=m-f;x*1e3<=Zc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const v=m-p;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,f);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const k={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(n){if($t(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(FU(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await la(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=VU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Uc(this.storage,this.storageKey,!0));try{return await Yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,d,f;const{data:p,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Yt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ca()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if($t(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:u,access_token:d,nonce:f}=t,p=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:ti}),{data:m,error:x}=p;return x?this._returnResult({data:{user:null,session:null},error:x}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Bc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:x}))}catch(s){if(await la(this.storage,`${this.storageKey}-code-verifier`),$t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Yt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await JU(async s=>(s>0&&await XU(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ti})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ay(i)&&Date.now()+o-n<Zc})}catch(n){if(this._debug(r,"error",n),$t(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ca()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Sl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await eu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:Cy()}else if(s&&!s.user&&!s.user){const o=await Sl(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await la(this.storage,this.storageKey+"-user"),await eu(this.storage,this.storageKey,s)):s.user=Cy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ey;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ey}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ay(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new us;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Jm;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new us;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$t(i)){const o={data:null,error:i};return Ay(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await la(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await eu(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=zE(s);await eu(this.storage,this.storageKey,i)}else{const s=zE(r);await eu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await la(this.storage,this.storageKey),await la(this.storage,this.storageKey+"-code-verifier"),await la(this.storage,this.storageKey+"-user"),this.userStorage&&await la(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ca()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Zc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Zc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Zc}ms, refresh threshold is ${lj} ticks`),s<=lj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof UI)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ca()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Uc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await Yt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await Yt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u?.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?EH(t.webauthn.credential_response):AH(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await Yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:SH(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_H(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ty(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Yt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new us})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new us});const o=await Yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ca()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new us});const o=await Yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ca()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Yt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new us})})}catch(t){if($t(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await Yt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new us})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+MU>s)return n;const{data:i,error:o}=await Yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:v}=await this.getSession();if(v||!x.session)return this._returnResult({data:null,error:v});n=x.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=Ty(n);r?.allowExpired||aH(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:o},error:null}}const f=sH(s.alg),p=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,o,WU(`${l}.${u}`)))throw new dj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}}Oh.nextInstanceID={};const FH=Oh,$H="2.90.1";let Qd="";typeof Deno<"u"?Qd="deno":typeof document<"u"?Qd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qd="react-native":Qd="node";const LH={"X-Client-Info":`supabase-js-${Qd}/${$H}`},BH={headers:LH},UH={schema:"public"},HH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qH={};function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}function zH(e,t){if(Ph(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WH(e){var t=zH(e,"string");return Ph(t)=="symbol"?t:t+""}function KH(e,t,r){return(t=WH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(n){KH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const VH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GH=()=>Headers,YH=(e,t,r)=>{const n=VH(r),s=GH();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let d=new s(o?.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(i,fn(fn({},o),{},{headers:d}))}};function XH(e){return e.endsWith("/")?e:e+"/"}function JH(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:d,realtime:f,global:p}=t,m={db:fn(fn({},u),s),auth:fn(fn({},d),i),realtime:fn(fn({},f),o),storage:{},global:fn(fn(fn({},p),l),{},{headers:fn(fn({},(r=p?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function QH(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(XH(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ZH=class extends FH{constructor(e){super(e)}},eq=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=QH(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:UH,realtime:qH,auth:fn(fn({},HH),{},{storageKey:o}),global:BH},u=JH(r??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=YH(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(fn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new IB(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new CU(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new AB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:u,throwOnError:d},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZH({url:this.authUrl.href,headers:fn(fn({},m),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new XB(this.realtimeUrl.href,fn(fn({},e),{},{params:fn(fn({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tq=(e,t,r)=>new eq(e,t,r);function rq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}rq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Wu(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=tq(`https://${_a}.supabase.co`,In,{auth:{storageKey:`sb-${_a}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const Ke=`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d`;function Zt(){return Wu()}async function ic(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();return t}let QE=!1;async function et(e,t,r){const n=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!n.ok){let s="Request failed";try{const i=await n.json();s=i.error||i.message||`HTTP ${n.status}: ${n.statusText}`}catch{s=`HTTP ${n.status}: ${n.statusText}`}throw console.error(`API Error [${e}]:`,s),n.status===401&&!QE&&(QE=!0,console.error("Session expired or invalid. Please log in again."),await Zt().auth.signOut(),sessionStorage.getItem("logout_redirect_in_progress")||(sessionStorage.setItem("logout_redirect_in_progress","true"),setTimeout(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),window.location.reload()},100))),new Error(s)}return n.json()}async function Qm(e){return(await et(`${Ke}/inventory`,e)).inventory||[]}async function zI(e,t){return(await et(`${Ke}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function WI(e,t,r){return(await et(`${Ke}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function KI(e,t){await et(`${Ke}/inventory/${t}`,e,{method:"DELETE"})}async function u2(e){return(await et(`${Ke}/overheads`,e)).overheads||[]}async function VI(e,t){return(await et(`${Ke}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function GI(e,t,r){return(await et(`${Ke}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function YI(e,t){await et(`${Ke}/overheads/${t}`,e,{method:"DELETE"})}async function XI(e){return(await et(`${Ke}/fixed-costs`,e)).fixedCosts||[]}async function JI(e,t){return(await et(`${Ke}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function QI(e,t,r){return(await et(`${Ke}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function ZI(e,t){await et(`${Ke}/fixed-costs/${t}`,e,{method:"DELETE"})}async function eD(e){return await et(`${Ke}/cleanup-duplicates`,e,{method:"POST"})}async function nq(e){return await et(`${Ke}/sales/migrate-discrepancy`,e,{method:"POST"})}async function aq(e){return await et(`${Ke}/migrate-stock-request-timestamps`,e,{method:"POST"})}async function sq(e,t,r,n){return await et(`${Ke}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:n})})}async function d2(e){return(await et(`${Ke}/sales`,e)).sales||[]}async function tD(e,t){return(await et(`${Ke}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function rD(e,t,r){return(await et(`${Ke}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function nD(e,t){return(await et(`${Ke}/sales/${t}/approve`,e,{method:"POST"})).item}async function aD(e,t,r,n){return(await et(`${Ke}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:n})})).item}async function sD(e,t){return(await et(`${Ke}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function iD(e,t,r){return(await et(`${Ke}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function h2(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/production`,t.access_token)).production||[]}async function oD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function lD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/production/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function cD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function iq(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await et(`${Ke}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function uD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await et(`${Ke}/production/cleanup-duplicates`,t.access_token,{method:"POST"})}async function oq(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await et(`${Ke}/clear-data`,t.access_token,{method:"DELETE"})}async function dD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await et(`${Ke}/cleanup-production-data`,t.access_token,{method:"POST"})}async function hD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await et(`${Ke}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function fD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function pD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await et(`${Ke}/notifications/read-all`,t.access_token,{method:"PUT"})}async function Ku(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/stores`,t.access_token)).stores}async function mD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/stores`,n.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function gD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/stores/${e}/assign-manager`,n.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function xD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/stores/${e}/assign-production-house`,n.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function yD(e,t,r){const n=Zt(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function vD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await et(`${Ke}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function lq(e){return await et(`${Ke}/cleanup-duplicates`,e,{method:"POST"})}async function cq(e){return await et(`${Ke}/migrate-production-house-system`,e,{method:"POST"})}async function $s(e){if(e)return(await et(`${Ke}/employees`,e)).employees||[];const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/employees`,r.access_token)).employees||[]}async function nl(){return $s()}async function bD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/archived-employees`,t.access_token)).employees||[]}async function wD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create employee")}return await n.json()}async function jD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function ND(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function kD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");const s=await fetch(`${Ke}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function Yl(e,t){if(t)return(await et(`${Ke}/unified-employees/manager/${e}`,t)).employees||[];const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/unified-employees/manager/${e}`,n.access_token)).employees||[]}async function Zm(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function SD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Ke}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to run migration")}return await r.json()}async function eg(e,t){const r=await ic();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign manager")}return await n.json()}async function _D(e,t){const r=await ic();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update role")}return await n.json()}async function ED(e,t){const r=await ic();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update store")}return await n.json()}async function AD(e,t,r){const n=await ic();if(!n)throw new Error("Not authenticated");const s=await fetch(`${Ke}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function TD(e,t){const r=await ic();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign incharge")}return await n.json()}async function f2(e){const t=await ic();if(!t)throw new Error("Not authenticated");const r=await fetch(`${Ke}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to fetch employees")}return await r.json()}async function CD(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${Ke}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to sync designations")}return await r.json()}async function tg(e,t){const r=await ic();if(!r)throw new Error("Not authenticated");const n=await fetch(`${Ke}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update employee")}return await n.json()}async function Zo(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/payouts`,t.access_token)).payouts||[]}async function p2(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function OD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/payouts/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function Pp(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await et(`${Ke}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function m2(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/salary-advances`,t.access_token)).salaryAdvances||[]}async function g2(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/salary-advances`,r.access_token,{method:"POST",body:JSON.stringify(e)})).salaryAdvance}async function hj(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/salary-advances/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).salaryAdvance}async function uq(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await et(`${Ke}/salary-advances/${e}`,r.access_token,{method:"DELETE"})}async function Zd(e,t,r){try{const n=new URLSearchParams;e&&n.append("entityType",e),t&&n.append("entityId",t),r&&n.append("category",r);const s=await fetch(`${Ke}/inventory-items?${n.toString()}`,{headers:{Authorization:`Bearer ${In}`}});if(!s.ok){const o=await s.text();return console.error(" Error fetching inventory items:",o),[]}return(await s.json()).items||[]}catch(n){return console.error(" Error fetching inventory items:",n),[]}}async function PD(e){const t=await fetch(`${Ke}/inventory-items`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create inventory item")}return(await t.json()).item}async function ID(e,t){const r=await fetch(`${Ke}/inventory-items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update inventory item")}return(await r.json()).item}async function dq(e){const t=await fetch(`${Ke}/inventory-items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${In}`}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete inventory item")}}async function DD(){const e=await fetch(`${Ke}/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${In}`}});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to initialize default items")}return(await e.json()).items||[]}async function hq(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await et(`${Ke}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function MD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=e?`${Ke}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${Ke}/organizational-hierarchy`,s=await et(n,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function Ih(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/timesheets/${e}`,r.access_token)).timesheets||[]}async function Vu(e,t){if(t)return(await et(`${Ke}/leaves/${e}`,t)).leaves||[];const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/leaves/${e}`,n.access_token)).leaves||[]}async function RD(e){if(e)return(await et(`${Ke}/leaves/all`,e)).leaves||[];const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/leaves/all`,r.access_token)).leaves||[]}async function FD(e){const t=Zt(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function $D(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/leaves/${e}/balance?joiningDate=${t}`,n.access_token)).balance||0}async function fj(e,t,r){const n=Zt(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await et(`${Ke}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function LD(e,t,r,n){const s=Zt(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await et(`${Ke}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:n})})}async function BD(){try{const e=await fetch(`${Ke}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function UD(e,t){const r=Zt(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/custom-items`,n.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function rg(e){return(await et(`${Ke}/production-requests`,e)).requests||[]}async function HD(e,t){return(await et(`${Ke}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function qD(e,t,r,n){return(await et(`${Ke}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:n})})).request}async function zD(e){return await et(`${Ke}/production-requests/check-pending`,e,{method:"POST"})}async function ng(e){return await et(`${Ke}/sales-data`,e)}async function WD(e,t){return(await et(`${Ke}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function KD(e,t){await et(`${Ke}/sales-data/${e}`,t,{method:"DELETE"})}async function Dh(){const e=Zt(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await et(`${Ke}/production-houses`,t.access_token)).productionHouses||[]}async function VD(e,t){return(await et(`${Ke}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function GD(e,t,r){return(await et(`${Ke}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function YD(e,t,r){return(await et(`${Ke}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function XD(e,t,r){return(await et(`${Ke}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function JD(e,t,r){return(await et(`${Ke}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function QD(e,t,r){return await et(`${Ke}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function ZD(e,t){await et(`${Ke}/production-houses/${t}`,e,{method:"DELETE"})}async function e5(e,t,r,n){const s=await et(`${Ke}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:n})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function t5(e){return(await et(`${Ke}/stock-requests`,e)).stockRequests||[]}async function r5(e,t){return(await et(`${Ke}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function n5(e,t,r,n,s,i){return(await et(`${Ke}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:n,fulfilledByName:s,notes:i})})).stockRequest}async function a5(e,t){return(await et(`${Ke}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function fq(e){return await et(`${Ke}/fix-stock-requests`,e,{method:"POST"})}async function s5(e,t){return await et(`${Ke}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function el(e,t,r){const n=new Date().getTime(),s=r?`${Ke}/stock-recalibration/latest/${t}?locationType=${r}&_t=${n}`:`${Ke}/stock-recalibration/latest/${t}?_t=${n}`;return await et(s,e)}const pj=el;async function i5(e,t,r){const n=r?`${Ke}/stock-recalibration/history/${t}?locationType=${r}`:`${Ke}/stock-recalibration/history/${t}`;return await et(n,e)}async function o5(e){return await et(`${Ke}/stock-recalibration/pending-approval`,e)}async function l5(e,t){return await et(`${Ke}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function c5(e,t,r){return await et(`${Ke}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function u5(e,t){return(await et(`${Ke}/stock-thresholds/${t}`,e)).thresholds}async function d5(e,t,r){return await et(`${Ke}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function h5(e,t,r,n){let s=`${Ke}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),n&&(s+=`&locationType=${n}`),await et(s,e)}async function f5(e){return await et(`${Ke}/cluster/info`,e)}async function p5(e,t,r,n){return await et(`${Ke}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:n})})}async function m5(e){return await et(`${Ke}/cluster/all-cluster-heads`,e)}const pq=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:UD,addFixedCost:JI,addInventory:zI,addInventoryItem:PD,addOverhead:VI,addPayouts:p2,addProductionData:oD,addSalesData:tD,applyLeave:FD,approveDiscrepancy:sD,approveLeave:fj,approveProductionData:cD,approveRecalibration:l5,approveSalesData:nD,assignInchargeToEmployee:TD,assignManagerToEmployee:eg,assignManagerToStore:gD,assignProductionHeadToHouse:XD,assignProductionHouseToStore:xD,assignStoreToProductionHouse:JD,cancelStockRequest:a5,checkPendingProductionRequests:zD,cleanDuplicates:lq,cleanupDuplicateProduction:uD,cleanupDuplicates:eD,cleanupProductionData:dD,clearAllData:oq,createProductionHouse:VD,createProductionRequest:HD,createSalaryAdvance:g2,createStockRequest:r5,createStore:mD,createUnifiedEmployee:wD,deleteClusterHeadByEmail:hq,deleteEmployee:ND,deleteFixedCost:ZI,deleteInventory:KI,deleteInventoryItem:dq,deleteOverhead:YI,deletePayout:Pp,deleteProductionHouse:ZD,deleteSalaryAdvance:uq,deleteSalesData:KD,deleteUnifiedEmployee:jD,fetchFixedCosts:XI,fetchInventory:Qm,fetchInventoryItems:Zd,fetchLatestRecalibration:pj,fetchOverheads:u2,fetchProductionData:h2,fetchProductionRequests:rg,fetchSalesData:d2,fixOrphanedStoreData:sq,fixProductionRecords:QD,fixStockRequests:fq,fulfillStockRequest:n5,getAllClusterHeads:m5,getAllEmployees:$s,getAllLeaves:RD,getAllRecalibrationsForApproval:o5,getArchivedEmployees:bD,getClusterInfo:f5,getCustomItems:BD,getEmployees:nl,getEmployeesByIncharge:f2,getEmployeesByManager:Yl,getLastRecalibration:el,getLeaveBalance:$D,getLeaves:Vu,getManagersByClusterHead:Zm,getMonthlyWastageReport:h5,getNotifications:hD,getOrganizationalHierarchy:MD,getPayouts:Zo,getProductionHouses:Dh,getRecalibrationHistory:i5,getSalaryAdvances:m2,getSalesData:ng,getStockRequests:t5,getStockThresholds:u5,getStores:Ku,getTimesheets:Ih,initializeDefaultInventoryItems:DD,markAllNotificationsAsRead:pD,markNotificationAsRead:fD,migrateDataToStore:vD,migrateEmployeeStores:SD,migrateProductionHouseSystem:cq,migrateProductionNotifications:iq,migrateSalesDiscrepancy:nq,migrateStockRequestTimestamps:aq,rejectDiscrepancy:iD,rejectLeave:LD,rejectRecalibration:c5,requestSalesApproval:aD,resetEmployeePassword:kD,saveSalesData:WD,saveStockThresholds:d5,submitStockRecalibration:s5,syncDesignations:CD,transferInventoryBetweenHouses:e5,updateClusterAssignments:p5,updateEmployeeDesignation:AD,updateEmployeeRole:_D,updateEmployeeStore:ED,updateFixedCost:QI,updateInventory:WI,updateInventoryItem:ID,updateOverhead:GI,updatePayout:OD,updateProductionData:lD,updateProductionHouse:GD,updateProductionHouseInventory:YD,updateProductionRequestStatus:qD,updateSalaryAdvance:hj,updateSalesData:rD,updateStore:yD,updateUnifiedEmployee:tg},Symbol.toStringTag,{value:"Module"}));function mq({selectedDate:e,editingItem:t,onSubmit:r,onClose:n}){const[s,i]=F.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!bE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||""}),[o,l]=F.useState({}),[u,d]=F.useState(!0),[f,p]=F.useState(!1);F.useEffect(()=>{m()},[]);const m=async()=>{try{const y=await BD(),b={};y.forEach(k=>{b[k.category]||(b[k.category]=[]),b[k.category].push(k.itemName)}),l(b)}catch(y){console.log("Could not load custom items:",y)}finally{d(!1)}},x=async y=>{if(y.preventDefault(),f){console.log(" Submission already in progress, ignoring duplicate request");return}p(!0);const b=parseFloat(s.quantity),k=parseFloat(s.totalCost),N=b>0?k/b:0;if(s.customItem&&s.itemName)try{await UD(s.category,s.itemName),console.log("Custom item saved:",s.itemName),await m()}catch(w){console.error("Error saving custom item:",w)}r({date:e,category:s.category,itemName:s.itemName,quantity:b,unit:s.unit,costPerUnit:N,totalCost:k}),p(!1)},v=[...new Set([...bE[s.category],...o[s.category]||[]])];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:y=>i({...s,category:y.target.value,itemName:"",customItem:!1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(Vm).map(([y,b])=>a.jsx("option",{value:y,children:b},y))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),s.customItem?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:s.itemName,onChange:y=>i({...s,itemName:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),a.jsx("button",{type:"button",onClick:()=>i({...s,customItem:!1,itemName:""}),className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):a.jsx("div",{className:"space-y-2",children:a.jsxs("select",{value:s.itemName,onChange:y=>{y.target.value==="__custom__"?i({...s,customItem:!0,itemName:""}):i({...s,itemName:y.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select an item"}),v.map(y=>a.jsx("option",{value:y,children:y},y)),a.jsx("option",{value:"__custom__",children:"+ Add Custom Item"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",step:"0.01",value:s.quantity,onChange:y=>i({...s,quantity:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),a.jsxs("select",{value:s.unit,onChange:y=>i({...s,unit:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"mL",children:"mL"}),a.jsx("option",{value:"pcs",children:"pcs"}),a.jsx("option",{value:"units",children:"units"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.totalCost,onChange:y=>i({...s,totalCost:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),s.quantity&&s.totalCost&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),a.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(s.totalCost)/parseFloat(s.quantity)).toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:f,children:[f&&a.jsx(Tf,{className:"w-4 h-4 animate-spin"}),f?"Saving...":t?"Update Item":"Add Item"]})]})]})]})})}const gq=[{value:"fuel",label:" Fuel Cost"},{value:"travel",label:" Travel by Employee"},{value:"transportation",label:" Goods Transportation Cost"},{value:"marketing",label:" Marketing Cost"},{value:"service_charge",label:" Service Charge (Food Aggregators)"},{value:"repair",label:" Repair Cost"},{value:"party",label:" Party Cost"},{value:"lunch",label:" Lunch Cost"},{value:"emergency_online",label:" Emergency Online Order (Blinkit)"},{value:"personal_expense",label:" Personal Expense By an Employee"},{value:"miscellaneous",label:" Miscellaneous Cost"}];function xq({selectedDate:e,onSubmit:t,onClose:r,editingItem:n,employees:s}){const[i,o]=F.useState({category:n?n.category:"fuel",description:n?n.description:"",amount:n?n.amount.toString():"",employeeId:n?.employeeId||"",employeeName:n?.employeeName||""}),[l,u]=F.useState(!1);F.useEffect(()=>{if(i.category==="personal_expense"&&i.employeeId){const f=s.find(p=>p.employeeId===i.employeeId);f&&o(p=>({...p,employeeName:f.name}))}},[i.employeeId,i.category,s]);const d=async f=>{if(f.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}u(!0);const p={date:e,category:i.category,description:i.description,amount:parseFloat(i.amount)};i.category==="personal_expense"&&(p.employeeId=i.employeeId,p.employeeName=i.employeeName),await t(p),u(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Overhead Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:i.category,onChange:f=>o({...i,category:f.target.value,employeeId:"",employeeName:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:gq.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))})]}),i.category==="personal_expense"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsxs("select",{value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select Employee"}),s.map(f=>a.jsx("option",{value:f.employeeId,children:f.employeeId},f.id))]})]}),i.employeeId&&i.employeeName&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee Name"}),a.jsx("input",{type:"text",value:i.employeeName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Expense Description"}),a.jsx("textarea",{value:i.description,onChange:f=>o({...i,description:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"What was the expense for?",required:!0})]})]}),i.category!=="personal_expense"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:i.description,onChange:f=>o({...i,description:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:f=>o({...i,amount:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:l,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l,children:[l&&a.jsx(Tf,{className:"w-4 h-4 animate-spin"}),l?"Saving...":n?"Update Overhead":"Add Overhead"]})]})]})]})})}function yq({selectedDate:e,onSubmit:t,onClose:r,editingItem:n}){const[s,i]=F.useState({category:n?n.category:"electricity",description:n?n.description:"",amount:n?n.amount.toString():"",units:n?.units?n.units.toString():"",unitPrice:n?.unitPrice?n.unitPrice.toString():"",paymentMethod:n?.paymentMethod||"cash",cashAmount:n?.cashAmount?n.cashAmount.toString():"",onlineAmount:n?.onlineAmount?n.onlineAmount.toString():""}),[o,l]=F.useState(!1),u=s.category==="lpg_gas"&&s.units&&s.unitPrice?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount||"0");F.useEffect(()=>{if(s.paymentMethod==="both"&&u>0&&!s.cashAmount&&!s.onlineAmount){const p=(u/2).toFixed(2);i(m=>({...m,cashAmount:p,onlineAmount:p}))}},[s.paymentMethod,u]);const d=()=>{if(s.paymentMethod!=="both")return!0;const p=parseFloat(s.cashAmount||"0"),m=parseFloat(s.onlineAmount||"0");return Math.abs(p+m-u)<.01},f=p=>{if(p.preventDefault(),!d()){alert("Cash and Online amounts must add up to the total amount!");return}const m=s.category==="lpg_gas"?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount),x={date:e,category:s.category,description:s.description,amount:m,paymentMethod:s.paymentMethod};s.category==="lpg_gas"&&(x.units=parseFloat(s.units),x.unitPrice=parseFloat(s.unitPrice)),s.paymentMethod==="both"&&(x.cashAmount=parseFloat(s.cashAmount),x.onlineAmount=parseFloat(s.onlineAmount)),l(!0),t(x).finally(()=>l(!1))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Fixed Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:p=>i({...s,category:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(t2).map(([p,m])=>a.jsx("option",{value:p,children:m},p))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:p=>i({...s,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:s.category==="lpg_gas"?"e.g., Commercial LPG cylinder purchase":"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),s.category==="lpg_gas"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Number of Cylinders"}),a.jsx("input",{type:"number",step:"1",min:"1",value:s.units,onChange:p=>i({...s,units:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Price per Cylinder ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.unitPrice,onChange:p=>i({...s,unitPrice:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1450.00",required:!0})]}),s.units&&s.unitPrice&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Total Amount:"})," ",u.toFixed(2)]})})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:p=>i({...s,amount:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:p=>i({...s,paymentMethod:"cash"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:p=>i({...s,paymentMethod:"online"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:s.paymentMethod==="both",onChange:p=>i({...s,paymentMethod:"both"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),s.paymentMethod==="both"&&u>0&&a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:s.cashAmount,onChange:p=>{const m=parseFloat(p.target.value||"0");i({...s,cashAmount:p.target.value,onlineAmount:(u-m).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:s.onlineAmount,onChange:p=>{const m=parseFloat(p.target.value||"0");i({...s,onlineAmount:p.target.value,cashAmount:(u-m).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[a.jsx("span",{className:"text-gray-700",children:"Total:"}),a.jsxs("span",{className:`font-medium ${d()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(s.cashAmount||"0")+parseFloat(s.onlineAmount||"0")).toFixed(2)," / ",u.toFixed(2)]})]}),!d()&&a.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",u.toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:o,children:[o&&a.jsx(Tf,{className:"w-4 h-4 animate-spin"}),o?"Saving...":n?"Update Fixed Cost":"Add Fixed Cost"]})]})]})]})})}function vq({inventory:e,overheads:t,fixedCosts:r,onEditInventory:n,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:u,isManager:d=!0}){const[f,p]=F.useState(null),m=e.reduce((v,y)=>(v[y.category]||(v[y.category]=[]),v[y.category].push(y),v),{}),x=(v,y)=>{v==="inventory"?s(y):v==="overhead"?o(y):u(y),p(null)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):a.jsx("div",{className:"space-y-6",children:Object.entries(m).map(([v,y])=>a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:Vm[v]}),a.jsx("div",{className:"space-y-2",children:y.map(b=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-gray-900",children:b.itemName})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-blue-600",children:["",b.totalCost.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>n(b),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"inventory",id:b.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(bs,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[b.quantity," ",b.unit]}),a.jsxs("span",{children:["",b.costPerUnit,"/",b.unit]})]})]},b.id))})]},v))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(U9,{className:"w-5 h-5 text-orange-600"}),a.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):a.jsx("div",{className:"space-y-3",children:t.map(v=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:e2[v.category]}),v.category==="personal_expense"&&v.employeeId&&v.employeeName&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Employee: ",v.employeeName," (ID: ",v.employeeId,")"]}),a.jsx("p",{className:"text-sm text-gray-500",children:v.description})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-orange-600",children:["",v.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>i(v),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"overhead",id:v.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(bs,{className:"w-4 h-4"})})]})]})]})},v.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ro,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):a.jsx("div",{className:"space-y-3",children:r.map(v=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:t2[v.category]}),a.jsx("p",{className:"text-sm text-gray-500",children:v.description}),v.category==="lpg_gas"&&v.units&&v.unitPrice&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[v.units," cylinder",v.units>1?"s":"","  ",v.unitPrice.toLocaleString()]}),v.paymentMethod&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.paymentMethod==="cash"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),v.paymentMethod==="online"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),v.paymentMethod==="both"&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",v.cashAmount?.toLocaleString()]}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",v.onlineAmount?.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-green-600",children:["",v.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>l(v),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"fixedcost",id:v.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(bs,{className:"w-4 h-4"})})]})]})]})},v.id))})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>x(f.type,f.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}const ag=F.memo(function({selectedDate:t,onDateChange:r}){const[n,s]=F.useState(0),[i,o]=F.useState(!1);F.useEffect(()=>{const d=()=>{o(window.innerWidth<768)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const l=F.useMemo(()=>{const d=new Date,f=new Date(d);f.setDate(f.getDate()+n*7);const p=[];for(let m=-3;m<=3;m++){const x=new Date(f);x.setDate(x.getDate()+m),p.push(x.toISOString().split("T")[0])}return p},[n]);F.useEffect(()=>{if(!l.includes(t)){const d=new Date(t),f=new Date,p=Math.floor((d.getTime()-f.getTime())/(1e3*60*60*24)),m=Math.floor(p/7);s(m)}},[t,l]);const u=()=>{s(0),r(new Date().toISOString().split("T")[0])};return i?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),n!==0&&a.jsx("button",{type:"button",onClick:u,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"date",value:t,onChange:d=>r(d.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("button",{type:"button",onClick:()=>s(n-1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx(J1,{className:"w-4 h-4"}),a.jsx("span",{children:"Prev Week"})]}),a.jsxs("button",{type:"button",onClick:()=>s(n+1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx("span",{children:"Next Week"}),a.jsx(Qo,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:a.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:l.map(d=>{const f=new Date(d),p=d===new Date().toISOString().split("T")[0],m=d===t;return a.jsxs("button",{type:"button",onClick:()=>r(d),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${m?"bg-orange-600 text-white shadow-lg":p?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:f.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-base font-medium",children:f.getDate()}),a.jsx("div",{className:"text-xs",children:f.toLocaleDateString("en-US",{month:"short"})})]},d)})})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),n!==0&&a.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>s(n-1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[a.jsx(J1,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Prev"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:l.map(d=>{const f=new Date(d),p=d===new Date().toISOString().split("T")[0],m=d===t;return a.jsxs("button",{type:"button",onClick:()=>r(d),className:`p-3 rounded-lg text-center transition-all ${m?"bg-orange-600 text-white shadow-lg transform scale-105":p?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:f.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-lg font-medium",children:f.getDate()}),a.jsx("div",{className:"text-xs",children:f.toLocaleDateString("en-US",{month:"short"})})]},d)})}),a.jsxs("button",{type:"button",onClick:()=>s(n+1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[a.jsx("span",{className:"text-sm",children:"Next"}),a.jsx(Qo,{className:"w-5 h-5"})]})]})]})});function bq({context:e,selectedStoreId:t,employees:r}){const[n,s]=F.useState(new Date().toISOString().split("T")[0]),[i,o]=F.useState(!1),[l,u]=F.useState(!1),[d,f]=F.useState(!1),[p,m]=F.useState(null),[x,v]=F.useState(null),[y,b]=F.useState(null),k=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",k),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const N=e.inventory.filter(A=>{const P=A.date===n,B=k?A.storeId===k:!0;return P&&B}),w=e.overheads.filter(A=>{const P=A.date===n,B=k?A.storeId===k:!0;return P&&B}),T=e.fixedCosts.filter(A=>{const P=A.date===n,B=k?A.storeId===k:!0;return P&&B}),E=N.reduce((A,P)=>A+P.totalCost,0),S=w.reduce((A,P)=>A+P.amount,0),_=T.reduce((A,P)=>A+P.amount,0);return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(ag,{selectedDate:n,onDateChange:s}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",S.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",_.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(E+S+_).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>o(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add inventory items",children:[a.jsx(co,{className:"w-4 h-4"}),"Add Inventory Item"]}),a.jsxs("button",{onClick:()=>u(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add overhead costs",children:[a.jsx(co,{className:"w-4 h-4"}),"Add Overhead"]}),a.jsxs("button",{onClick:()=>f(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add fixed costs",children:[a.jsx(co,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),a.jsx(vq,{inventory:N,overheads:w,fixedCosts:T,onEditInventory:A=>{m(A),o(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:A=>{v(A),u(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:A=>{b(A),f(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),i&&a.jsx(mq,{selectedDate:n,editingItem:p,onSubmit:async A=>{try{p?await e.updateInventoryItem(p.id,A):await e.addInventoryItem(A),o(!1),m(null)}catch{alert("Failed to save inventory item. Please try again.")}},onClose:()=>{o(!1),m(null)}}),l&&a.jsx(xq,{selectedDate:n,editingItem:x,employees:r,onSubmit:async A=>{try{x?await e.updateOverheadItem(x.id,A):await e.addOverheadItem(A),u(!1),v(null)}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{u(!1),v(null)}}),d&&a.jsx(yq,{selectedDate:n,editingItem:y,onSubmit:async A=>{try{y?await e.updateFixedCostItem(y.id,A):await e.addFixedCostItem(A),f(!1),b(null)}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{f(!1),b(null)}})]})}function x2({context:e,selectedStoreId:t,onClose:r,isProductionHouse:n,isStoreFinishedProducts:s=!1}){const[i,o]=F.useState([]),[l,u]=F.useState(!0),[d,f]=F.useState(!1),[p,m]=F.useState(null),[x,v]=F.useState(null),[y,b]=F.useState(!1),k=t||e.user?.storeId,N=e.stores?.find(z=>z.id===k),w=t||e.user?.storeId,T=n?e.productionHouses?.find(z=>z.id===w):e.stores?.find(z=>z.id===w),E=T?.name,S=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),_=new Date().getDate(),A=_>=1&&_<=5;F.useEffect(()=>{P(),L()},[]);async function P(){try{if(u(!0),n||s)await B();else{const M=(await Qm(e.user?.accessToken||"")).filter(ie=>k?ie.storeId===k:!1),J=new Map;M.forEach(ie=>{J.has(ie.id)||J.set(ie.id,ie)});const te=Array.from(J.values()).map(ie=>({itemId:ie.id,itemName:ie.itemName,category:ie.category,unit:ie.unit,systemQuantity:ie.quantity,actualQuantity:ie.quantity,difference:0,adjustmentType:null,notes:""}));o(te)}}catch(z){console.error("Error loading inventory:",z),v("Failed to load inventory data")}finally{u(!1)}}async function B(){const z=e.productionData||[],M=new Date().toISOString().substring(0,7);let J=k,te=k;if(s)te=k;else if(k&&k.startsWith("STORE-")){const De=e.stores?.find(q=>q.id===k);De?.productionHouseId&&(J=De.productionHouseId,te=J)}else te=k;let ie,me;s?(ie=(e.productionRequests||[]).filter(Ae=>{if(Ae.status!=="delivered"||Ae.storeId!==k)return!1;const Be=Ae.deliveredDate||Ae.requestDate||Ae.createdAt;return Be&&Be.startsWith(M)}).reduce((Ae,Be)=>({chicken:Ae.chicken+(Be.chickenMomos||0),chickenCheese:Ae.chickenCheese+(Be.chickenCheeseMomos||0),veg:Ae.veg+(Be.vegMomos||0),cheeseCorn:Ae.cheeseCorn+(Be.cheeseCornMomos||0),paneer:Ae.paneer+(Be.paneerMomos||0),vegKurkure:Ae.vegKurkure+(Be.vegKurkureMomos||0),chickenKurkure:Ae.chickenKurkure+(Be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),me=(e.salesData||[]).filter(Ae=>Ae.storeId!==k?!1:Ae.date&&Ae.date.startsWith(M)).reduce((Ae,Be)=>({chicken:Ae.chicken+(Be.chickenMomos||0),chickenCheese:Ae.chickenCheese+(Be.chickenCheeseMomos||0),veg:Ae.veg+(Be.vegMomos||0),cheeseCorn:Ae.cheeseCorn+(Be.cheeseCornMomos||0),paneer:Ae.paneer+(Be.paneerMomos||0),vegKurkure:Ae.vegKurkure+(Be.vegKurkureMomos||0),chickenKurkure:Ae.chickenKurkure+(Be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})):(ie=z.filter(Ae=>{if(!Ae.date.startsWith(M))return!1;const Be=Ae.storeId===J||Ae.storeId===k,xt=Ae.productionHouseId===J;return Be||xt}).reduce((Ae,Be)=>({chicken:Ae.chicken+(Be.chickenMomos?.final||0),chickenCheese:Ae.chickenCheese+(Be.chickenCheeseMomos?.final||0),veg:Ae.veg+(Be.vegMomos?.final||0),cheeseCorn:Ae.cheeseCorn+(Be.cheeseCornMomos?.final||0),paneer:Ae.paneer+(Be.paneerMomos?.final||0),vegKurkure:Ae.vegKurkure+(Be.vegKurkureMomos?.final||0),chickenKurkure:Ae.chickenKurkure+(Be.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),me=(e.productionRequests||[]).filter(Ae=>{if(Ae.status!=="delivered")return!1;const Be=Ae.deliveredDate||Ae.requestDate||Ae.createdAt;return!Be||!Be.startsWith(M)?!1:e.stores?.find(le=>le.id===Ae.storeId)?.productionHouseId===J}).reduce((Ae,Be)=>({chicken:Ae.chicken+(Be.chickenMomos||0),chickenCheese:Ae.chickenCheese+(Be.chickenCheeseMomos||0),veg:Ae.veg+(Be.vegMomos||0),cheeseCorn:Ae.cheeseCorn+(Be.cheeseCornMomos||0),paneer:Ae.paneer+(Be.paneerMomos||0),vegKurkure:Ae.vegKurkure+(Be.vegKurkureMomos||0),chickenKurkure:Ae.chickenKurkure+(Be.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}));const ve=await I(te,M,s);console.log(" Recalibration - Location ID:",te),console.log(" Recalibration - Is Store Finished Products:",s),console.log(" Recalibration - Opening Balance:",ve),console.log(" Recalibration - Total Received/Produced:",ie),console.log(" Recalibration - Total Sent/Sold:",me);const ye=e.inventoryItems?.filter(De=>De.category==="finished_product"&&De.isActive&&(De.linkedEntityType==="global"||De.linkedEntityType==="production_house"&&De.linkedEntityId===te||De.linkedEntityType==="store"&&De.linkedEntityId===k))||[];console.log(" Recalibration - Finished Products from Context:",ye.length);const he=De=>De.replace(/_([a-z])/g,q=>q[1].toUpperCase()),pe=ye.map(De=>{const q=he(De.name),Ae=ve[q]||ve[De.name]||0,Be=ie[q]||ie[De.name]||0,xt=me[q]||me[De.name]||0,le=Ae+Be-xt;return console.log(` ${De.displayName}: Opening=${Ae}, Produced=${Be}, Sent=${xt}, Stock=${le}`),{itemId:De.name,itemName:De.displayName,category:De.category,unit:De.unit,systemQuantity:le,actualQuantity:le,difference:0,adjustmentType:null,notes:""}});o(pe)}async function I(z,M,J){if(!z)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const te=J?"store":"production_house",[ie,me]=M.split("-").map(Number);let ve=ie,ye=me-1;ye===0&&(ye=12,ve=ie-1);const he=`${ve}-${String(ye).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",z),console.log(" fetchOpeningBalance - Location Type:",te),console.log(" fetchOpeningBalance - Current Month:",M),console.log(" fetchOpeningBalance - Looking for recalibration from:",he);const pe=await el(e.user?.accessToken||"",z,te);if(pe?.record){const De=pe.record.date.substring(0,7);if(console.log(" fetchOpeningBalance - Found recalibration from:",De),console.log(" fetchOpeningBalance - Recalibration data:",pe.record),De===M||De===he||De<he){const q={};return pe.record.items.forEach(Ae=>{q[Ae.itemId]=Ae.actualQuantity}),console.log(" fetchOpeningBalance - Using recalibration as opening balance:",q),console.log(" fetchOpeningBalance - Recalibration was from:",De===M?"CURRENT month (opening balance set)":"PREVIOUS month (closing = opening)"),q}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await O(z,M,J)}catch(te){return console.error("Error fetching opening balance:",te),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function O(z,M,J){const[te,ie]=M.split("-").map(Number);let me=te,ve=ie-1;ve===0&&(ve=12,me=te-1);const ye=`${me}-${String(ve).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",ye),console.log(" calculatePreviousMonthStock - Is Store:",J),J){const he=(e.productionRequests||[]).filter(q=>{if(q.status!=="delivered"||q.storeId!==z)return!1;const Ae=q.deliveredDate||q.requestDate||q.createdAt;return Ae&&Ae.startsWith(ye)}).reduce((q,Ae)=>({chicken:q.chicken+(Ae.chickenMomos||0),chickenCheese:q.chickenCheese+(Ae.chickenCheeseMomos||0),veg:q.veg+(Ae.vegMomos||0),cheeseCorn:q.cheeseCorn+(Ae.cheeseCornMomos||0),paneer:q.paneer+(Ae.paneerMomos||0),vegKurkure:q.vegKurkure+(Ae.vegKurkureMomos||0),chickenKurkure:q.chickenKurkure+(Ae.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",he),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const pe=(e.categorySalesData||[]).filter(q=>q.storeId!==z?!1:q.date&&q.date.startsWith(ye)).reduce((q,Ae)=>({chicken:q.chicken+(Ae.data["Chicken Momos"]||0),chickenCheese:q.chickenCheese+(Ae.data["Chicken Cheese Momos"]||0),veg:q.veg+(Ae.data["Veg Momos"]||0),cheeseCorn:q.cheeseCorn+(Ae.data["Corn Cheese Momos"]||0),paneer:q.paneer+(Ae.data["Paneer Momos"]||0),vegKurkure:q.vegKurkure+(Ae.data["Veg Kurkure Momos"]||0),chickenKurkure:q.chickenKurkure+(Ae.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",pe);const De={chicken:he.chicken-pe.chicken,chickenCheese:he.chickenCheese-pe.chickenCheese,veg:he.veg-pe.veg,cheeseCorn:he.cheeseCorn-pe.cheeseCorn,paneer:he.paneer-pe.paneer,vegKurkure:he.vegKurkure-pe.vegKurkure,chickenKurkure:he.chickenKurkure-pe.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",De),De}else{const pe=(e.productionData||[]).filter(q=>q.date.startsWith(ye)?q.storeId===z||q.productionHouseId===z:!1).reduce((q,Ae)=>({chicken:q.chicken+(Ae.chickenMomos?.final||0),chickenCheese:q.chickenCheese+(Ae.chickenCheeseMomos?.final||0),veg:q.veg+(Ae.vegMomos?.final||0),cheeseCorn:q.cheeseCorn+(Ae.cheeseCornMomos?.final||0),paneer:q.paneer+(Ae.paneerMomos?.final||0),vegKurkure:q.vegKurkure+(Ae.vegKurkureMomos?.final||0),chickenKurkure:q.chickenKurkure+(Ae.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),De=(e.productionRequests||[]).filter(q=>{if(q.status!=="delivered")return!1;const Ae=q.deliveredDate||q.requestDate||q.createdAt;return!Ae||!Ae.startsWith(ye)?!1:e.stores?.find(xt=>xt.id===q.storeId)?.productionHouseId===z}).reduce((q,Ae)=>({chicken:q.chicken+(Ae.chickenMomos||0),chickenCheese:q.chickenCheese+(Ae.chickenCheeseMomos||0),veg:q.veg+(Ae.vegMomos||0),cheeseCorn:q.cheeseCorn+(Ae.cheeseCornMomos||0),paneer:q.paneer+(Ae.paneerMomos||0),vegKurkure:q.vegKurkure+(Ae.vegKurkureMomos||0),chickenKurkure:q.chickenKurkure+(Ae.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});return{chicken:pe.chicken-De.chicken,chickenCheese:pe.chickenCheese-De.chickenCheese,veg:pe.veg-De.veg,cheeseCorn:pe.cheeseCorn-De.cheeseCorn,paneer:pe.paneer-De.paneer,vegKurkure:pe.vegKurkure-De.vegKurkure,chickenKurkure:pe.chickenKurkure-De.chickenKurkure}}}async function L(){try{const z=k;if(!z)return;const M=n?"production_house":"store",J=await el(e.user?.accessToken||"",z,M);J.lastRecalibration&&m(J.lastRecalibration)}catch(z){console.error("Error checking last recalibration:",z)}}function X(z,M){const J=parseFloat(M)||0;o(i.map(te=>{if(te.itemId===z){const ie=J-te.systemQuantity;return{...te,actualQuantity:J,difference:ie,adjustmentType:ie===0?null:te.adjustmentType}}return te}))}function U(z,M){o(i.map(J=>J.itemId===z?{...J,adjustmentType:M}:J))}function V(z,M){o(i.map(J=>J.itemId===z?{...J,notes:M}:J))}async function ne(){if(i.filter(M=>M.difference!==0&&!M.adjustmentType).length>0){v("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{f(!0),v(null),console.log(` Submitting recalibration:
        - locationId: ${w}
        - locationType: ${n?"production_house":"store"}
        - locationName: ${E}
        - isProductionHouse: ${n}`);const M={locationId:w,locationType:n?"production_house":"store",locationName:E,items:i.map(J=>({itemId:J.itemId,itemName:J.itemName,category:J.category,unit:J.unit,systemQuantity:J.systemQuantity,actualQuantity:J.actualQuantity,difference:J.difference,adjustmentType:J.adjustmentType,notes:J.notes}))};await s5(e.user?.accessToken||"",M),b(!0),setTimeout(()=>{r()},2e3)}catch(M){console.error("Error submitting recalibration:",M),v(M instanceof Error?M.message:"Failed to submit recalibration")}finally{f(!1)}}const ee=i.length,R=i.filter(z=>z.difference!==0).length,se=i.filter(z=>z.adjustmentType==="wastage"&&z.difference<0).reduce((z,M)=>z+Math.abs(M.difference),0);return l?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ep,{className:"w-6 h-6 animate-spin text-purple-600"}),a.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):y?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(nr,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),a.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Fr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[E||N?.name," - ",S]})]})]}),a.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(pa,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),a.jsx("div",{className:"text-2xl text-purple-600",children:ee})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),a.jsx("div",{className:"text-2xl text-orange-600",children:R})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsx("div",{className:"text-2xl text-red-600",children:se.toFixed(2)})]})]}),p&&a.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(On,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-blue-900",children:"Last recalibration was performed on:"}),a.jsx("div",{className:"text-sm text-blue-700",children:new Date(p).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!A&&a.jsxs("div",{className:"mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(On,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-yellow-900",children:"Stock recalibration is typically performed on the 1st to 5th day of each month. You can still perform it now if needed."})]})]}),a.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:a.jsx("div",{className:"space-y-4",children:i.map((z,M)=>a.jsxs("div",{className:`bg-gradient-to-r ${z.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",M+1]}),a.jsx("div",{className:"text-gray-900",children:z.itemName}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[z.category.replace(/_/g," "),"  ",z.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"System Stock"}),a.jsxs("div",{className:"text-gray-900",children:[z.systemQuantity," ",z.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),a.jsx("input",{type:"number",step:"0.01",value:z.actualQuantity,onChange:J=>X(z.itemId,J.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),a.jsxs("div",{className:`text-lg ${z.difference>0?"text-green-600":z.difference<0?"text-red-600":"text-gray-600"}`,children:[z.difference>0?"+":"",z.difference.toFixed(2)]})]}),a.jsx("div",{className:"md:col-span-3",children:z.difference!==0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>U(z.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${z.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),a.jsx("button",{onClick:()=>U(z.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${z.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),z.difference!==0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:z.notes,onChange:J=>V(z.itemId,J.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},z.itemId))})}),x&&a.jsx("div",{className:"px-6 pb-4",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(On,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-red-900",children:x})]})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:ne,disabled:d,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(Ep,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Gl,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function mj({context:e,selectedStoreId:t}){const[r,n]=F.useState(new Date().toISOString().split("T")[0]),[s,i]=F.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(k=>{const N=k.date===r,w=o?k.storeId===o:!0;return N&&w}),u=e.overheads.filter(k=>{const N=k.date===r,w=o?k.storeId===o:!0;return N&&w}),d=e.fixedCosts.filter(k=>{const N=k.date===r,w=o?k.storeId===o:!0;return N&&w}),f=l.reduce((k,N)=>k+N.totalCost,0),p=u.reduce((k,N)=>k+N.amount,0),m=d.reduce((k,N)=>k+N.amount,0),x=l.reduce((k,N)=>(k[N.category]||(k[N.category]=[]),k[N.category].push(N),k),{}),v=u.reduce((k,N)=>(k[N.category]||(k[N.category]=[]),k[N.category].push(N),k),{}),y={fresh_produce:"Fresh Vegetables",spices_seasonings:"Grocery",dairy:"Dairy Products",meat:"Meat",packaging:"Packaging Materials",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},b=e.user?.role==="cluster_head";return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(to,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[a.jsx(Q1,{className:"w-4 h-4 text-amber-600"}),a.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),a.jsx(ag,{selectedDate:r,onDateChange:n}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+p+m).toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(x).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(x).map(([k,N])=>a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.itemName}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[w.quantity," ",w.unit]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",w.costPerUnit.toLocaleString()]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.totalCost.toLocaleString()]})]},w.id))})]})})]},k))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(rr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No inventory items for this date"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(qn,{className:"w-5 h-5 text-orange-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(v).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([k,N])=>a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[k]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:w.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.amount.toLocaleString()]})]},w.id))})]})})]},k))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No overhead costs for this date"})]})]}),d.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gn,{className:"w-5 h-5 text-green-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(k=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[k.category]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:k.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",k.amount.toLocaleString()]})]},k.id))})]})})]}),b&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[a.jsx(Fr,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&a.jsx(x2,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Q1,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-blue-800",children:b?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function g5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=g5(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ar(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=g5(e))&&(n&&(n+=" "),n+=t);return n}var Py,ZE;function ts(){if(ZE)return Py;ZE=1;var e=Array.isArray;return Py=e,Py}var Iy,eA;function x5(){if(eA)return Iy;eA=1;var e=typeof V0=="object"&&V0&&V0.Object===Object&&V0;return Iy=e,Iy}var Dy,tA;function Fi(){if(tA)return Dy;tA=1;var e=x5(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Dy=r,Dy}var My,rA;function Of(){if(rA)return My;rA=1;var e=Fi(),t=e.Symbol;return My=t,My}var Ry,nA;function wq(){if(nA)return Ry;nA=1;var e=Of(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),u=o[s];try{o[s]=void 0;var d=!0}catch{}var f=n.call(o);return d&&(l?o[s]=u:delete o[s]),f}return Ry=i,Ry}var Fy,aA;function jq(){if(aA)return Fy;aA=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Fy=r,Fy}var $y,sA;function wo(){if(sA)return $y;sA=1;var e=Of(),t=wq(),r=jq(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return $y=o,$y}var Ly,iA;function jo(){if(iA)return Ly;iA=1;function e(t){return t!=null&&typeof t=="object"}return Ly=e,Ly}var By,oA;function Gu(){if(oA)return By;oA=1;var e=wo(),t=jo(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return By=n,By}var Uy,lA;function y2(){if(lA)return Uy;lA=1;var e=ts(),t=Gu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Uy=s,Uy}var Hy,cA;function il(){if(cA)return Hy;cA=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Hy=e,Hy}var qy,uA;function v2(){if(uA)return qy;uA=1;var e=wo(),t=il(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==n||u==s||u==r||u==i}return qy=o,qy}var zy,dA;function Nq(){if(dA)return zy;dA=1;var e=Fi(),t=e["__core-js_shared__"];return zy=t,zy}var Wy,hA;function kq(){if(hA)return Wy;hA=1;var e=Nq(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return Wy=r,Wy}var Ky,fA;function y5(){if(fA)return Ky;fA=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Ky=r,Ky}var Vy,pA;function Sq(){if(pA)return Vy;pA=1;var e=v2(),t=kq(),r=il(),n=y5(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!r(m)||t(m))return!1;var x=e(m)?f:i;return x.test(n(m))}return Vy=p,Vy}var Gy,mA;function _q(){if(mA)return Gy;mA=1;function e(t,r){return t?.[r]}return Gy=e,Gy}var Yy,gA;function oc(){if(gA)return Yy;gA=1;var e=Sq(),t=_q();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return Yy=r,Yy}var Xy,xA;function sg(){if(xA)return Xy;xA=1;var e=oc(),t=e(Object,"create");return Xy=t,Xy}var Jy,yA;function Eq(){if(yA)return Jy;yA=1;var e=sg();function t(){this.__data__=e?e(null):{},this.size=0}return Jy=t,Jy}var Qy,vA;function Aq(){if(vA)return Qy;vA=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Qy=e,Qy}var Zy,bA;function Tq(){if(bA)return Zy;bA=1;var e=sg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return Zy=s,Zy}var ev,wA;function Cq(){if(wA)return ev;wA=1;var e=sg(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return ev=n,ev}var tv,jA;function Oq(){if(jA)return tv;jA=1;var e=sg(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return tv=r,tv}var rv,NA;function Pq(){if(NA)return rv;NA=1;var e=Eq(),t=Aq(),r=Tq(),n=Cq(),s=Oq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,rv=i,rv}var nv,kA;function Iq(){if(kA)return nv;kA=1;function e(){this.__data__=[],this.size=0}return nv=e,nv}var av,SA;function b2(){if(SA)return av;SA=1;function e(t,r){return t===r||t!==t&&r!==r}return av=e,av}var sv,_A;function ig(){if(_A)return sv;_A=1;var e=b2();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return sv=t,sv}var iv,EA;function Dq(){if(EA)return iv;EA=1;var e=ig(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return iv=n,iv}var ov,AA;function Mq(){if(AA)return ov;AA=1;var e=ig();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return ov=t,ov}var lv,TA;function Rq(){if(TA)return lv;TA=1;var e=ig();function t(r){return e(this.__data__,r)>-1}return lv=t,lv}var cv,CA;function Fq(){if(CA)return cv;CA=1;var e=ig();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return cv=t,cv}var uv,OA;function og(){if(OA)return uv;OA=1;var e=Iq(),t=Dq(),r=Mq(),n=Rq(),s=Fq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,uv=i,uv}var dv,PA;function w2(){if(PA)return dv;PA=1;var e=oc(),t=Fi(),r=e(t,"Map");return dv=r,dv}var hv,IA;function $q(){if(IA)return hv;IA=1;var e=Pq(),t=og(),r=w2();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return hv=n,hv}var fv,DA;function Lq(){if(DA)return fv;DA=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return fv=e,fv}var pv,MA;function lg(){if(MA)return pv;MA=1;var e=Lq();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return pv=t,pv}var mv,RA;function Bq(){if(RA)return mv;RA=1;var e=lg();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return mv=t,mv}var gv,FA;function Uq(){if(FA)return gv;FA=1;var e=lg();function t(r){return e(this,r).get(r)}return gv=t,gv}var xv,$A;function Hq(){if($A)return xv;$A=1;var e=lg();function t(r){return e(this,r).has(r)}return xv=t,xv}var yv,LA;function qq(){if(LA)return yv;LA=1;var e=lg();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return yv=t,yv}var vv,BA;function j2(){if(BA)return vv;BA=1;var e=$q(),t=Bq(),r=Uq(),n=Hq(),s=qq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,vv=i,vv}var bv,UA;function v5(){if(UA)return bv;UA=1;var e=j2(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var d=n.apply(this,o);return i.cache=u.set(l,d)||u,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,bv=r,bv}var wv,HA;function zq(){if(HA)return wv;HA=1;var e=v5(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return wv=r,wv}var jv,qA;function Wq(){if(qA)return jv;qA=1;var e=zq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,u,d){i.push(u?d.replace(r,"$1"):l||o)}),i});return jv=n,jv}var Nv,zA;function N2(){if(zA)return Nv;zA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return Nv=e,Nv}var kv,WA;function Kq(){if(WA)return kv;WA=1;var e=Of(),t=N2(),r=ts(),n=Gu(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return kv=o,kv}var Sv,KA;function b5(){if(KA)return Sv;KA=1;var e=Kq();function t(r){return r==null?"":e(r)}return Sv=t,Sv}var _v,VA;function w5(){if(VA)return _v;VA=1;var e=ts(),t=y2(),r=Wq(),n=b5();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return _v=s,_v}var Ev,GA;function cg(){if(GA)return Ev;GA=1;var e=Gu();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Ev=t,Ev}var Av,YA;function k2(){if(YA)return Av;YA=1;var e=w5(),t=cg();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return Av=r,Av}var Tv,XA;function j5(){if(XA)return Tv;XA=1;var e=k2();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return Tv=t,Tv}var Vq=j5();const ws=$r(Vq);var Cv,JA;function Gq(){if(JA)return Cv;JA=1;function e(t){return t==null}return Cv=e,Cv}var Yq=Gq();const ir=$r(Yq);var Ov,QA;function Xq(){if(QA)return Ov;QA=1;var e=wo(),t=ts(),r=jo(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Ov=s,Ov}var Jq=Xq();const Xl=$r(Jq);var Qq=v2();const Kt=$r(Qq);var Zq=il();const Yu=$r(Zq);var Pv={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA;function ez(){if(ZA)return Mr;ZA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var k=b.$$typeof;switch(k){case e:switch(b=b.type,b){case r:case s:case n:case d:case f:return b;default:switch(b=b&&b.$$typeof,b){case l:case o:case u:case m:case p:case i:return b;default:return k}}case t:return k}}}return Mr.ContextConsumer=o,Mr.ContextProvider=i,Mr.Element=e,Mr.ForwardRef=u,Mr.Fragment=r,Mr.Lazy=m,Mr.Memo=p,Mr.Portal=t,Mr.Profiler=s,Mr.StrictMode=n,Mr.Suspense=d,Mr.SuspenseList=f,Mr.isAsyncMode=function(){return!1},Mr.isConcurrentMode=function(){return!1},Mr.isContextConsumer=function(b){return y(b)===o},Mr.isContextProvider=function(b){return y(b)===i},Mr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Mr.isForwardRef=function(b){return y(b)===u},Mr.isFragment=function(b){return y(b)===r},Mr.isLazy=function(b){return y(b)===m},Mr.isMemo=function(b){return y(b)===p},Mr.isPortal=function(b){return y(b)===t},Mr.isProfiler=function(b){return y(b)===s},Mr.isStrictMode=function(b){return y(b)===n},Mr.isSuspense=function(b){return y(b)===d},Mr.isSuspenseList=function(b){return y(b)===f},Mr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===f||b===x||typeof b=="object"&&b!==null&&(b.$$typeof===m||b.$$typeof===p||b.$$typeof===i||b.$$typeof===o||b.$$typeof===u||b.$$typeof===v||b.getModuleId!==void 0)},Mr.typeOf=y,Mr}var eT;function tz(){return eT||(eT=1,Pv.exports=ez()),Pv.exports}var rz=tz(),Iv,tT;function N5(){if(tT)return Iv;tT=1;var e=wo(),t=jo(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return Iv=n,Iv}var Dv,rT;function nz(){if(rT)return Dv;rT=1;var e=N5();function t(r){return e(r)&&r!=+r}return Dv=t,Dv}var az=nz();const Pf=$r(az);var sz=N5();const iz=$r(sz);var La=function(t){return t===0?0:t>0?1:-1},$l=function(t){return Xl(t)&&t.indexOf("%")===t.length-1},lt=function(t){return iz(t)&&!Pf(t)},oz=function(t){return ir(t)},zn=function(t){return lt(t)||Xl(t)},lz=0,Xu=function(t){var r=++lz;return"".concat(t||"").concat(r)},Ba=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&!Xl(t))return n;var i;if($l(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Pf(i)&&(i=n),s&&i>r&&(i=r),i},Ko=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},cz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},fa=function(t,r){return lt(t)&&lt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ip(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ws(n,t))===r})}var uz=function(t,r){return lt(t)&&lt(r)?t-r:Xl(t)&&Xl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function du(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gj(e){"@babel/helpers - typeof";return gj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gj(e)}var dz=["viewBox","children"],hz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nT=["points","pathLength"],Mv={svg:dz,polygon:nT,polyline:nT},S2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Dp=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(F.isValidElement(t)&&(n=t.props),!Yu(n))return null;var s={};return Object.keys(n).forEach(function(i){S2.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},fz=function(t,r,n){return function(s){return t(r,n,s),null}},Jl=function(t,r,n){if(!Yu(t)||gj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];S2.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=fz(o,r,n))}),s},pz=["children"],mz=["children"];function aT(e,t){if(e==null)return{};var r=gz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xj(e){"@babel/helpers - typeof";return xj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xj(e)}var sT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},uo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},iT=null,Rv=null,_2=function e(t){if(t===iT&&Array.isArray(Rv))return Rv;var r=[];return F.Children.forEach(t,function(n){ir(n)||(rz.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Rv=r,iT=t,r};function js(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return uo(s)}):n=[uo(t)],_2(e).forEach(function(s){var i=ws(s,"type.displayName")||ws(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function fs(e,t){var r=js(e,t);return r&&r[0]}var oT=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!lt(n)||n<=0||!lt(s)||s<=0)},xz=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],yz=function(t){return t&&t.type&&Xl(t.type)&&xz.indexOf(t.type)>=0},vz=function(t){return t&&xj(t)==="object"&&"clipDot"in t},bz=function(t,r,n,s){var i,o=(i=Mv?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Kt(t)&&(s&&o.includes(r)||hz.includes(r))||n&&S2.includes(r)},Lt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(F.isValidElement(t)&&(s=t.props),!Yu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;bz((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},yj=function e(t,r){if(t===r)return!0;var n=F.Children.count(t);if(n!==F.Children.count(r))return!1;if(n===0)return!0;if(n===1)return lT(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!lT(i,o))return!1}return!0},lT=function(t,r){if(ir(t)&&ir(r))return!0;if(!ir(t)&&!ir(r)){var n=t.props||{},s=n.children,i=aT(n,pz),o=r.props||{},l=o.children,u=aT(o,mz);return s&&l?du(i,u)&&yj(s,l):!s&&!l?du(i,u):!1}return!1},cT=function(t,r){var n=[],s={};return _2(t).forEach(function(i,o){if(yz(i))n.push(i);else if(i){var l=uo(i.type),u=r[l]||{},d=u.handler,f=u.once;if(d&&(!f||!s[l])){var p=d(i,l,o);n.push(p),s[l]=!0}}}),n},wz=function(t){var r=t&&t.type;return r&&sT[r]?sT[r]:null},jz=function(t,r){return _2(r).indexOf(t)},Nz=["children","width","height","viewBox","className","style","title","desc"];function vj(){return vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vj.apply(this,arguments)}function kz(e,t){if(e==null)return{};var r=Sz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bj(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,u=e.desc,d=kz(e,Nz),f=s||{width:r,height:n,x:0,y:0},p=ar("recharts-surface",i);return de.createElement("svg",vj({},Lt(d,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),de.createElement("title",null,l),de.createElement("desc",null,u),t)}var _z=["children","className"];function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wj.apply(this,arguments)}function Ez(e,t){if(e==null)return{};var r=Az(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Az(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jr=de.forwardRef(function(e,t){var r=e.children,n=e.className,s=Ez(e,_z),i=ar("recharts-layer",n);return de.createElement("g",wj({className:i},Lt(s,!0),{ref:t}),r)}),pi=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},Fv,uT;function Tz(){if(uT)return Fv;uT=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return Fv=e,Fv}var $v,dT;function Cz(){if(dT)return $v;dT=1;var e=Tz();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return $v=t,$v}var Lv,hT;function k5(){if(hT)return Lv;hT=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function u(d){return l.test(d)}return Lv=u,Lv}var Bv,fT;function Oz(){if(fT)return Bv;fT=1;function e(t){return t.split("")}return Bv=e,Bv}var Uv,pT;function Pz(){if(pT)return Uv;pT=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=d+"?",y="["+i+"]?",b="(?:"+x+"(?:"+[f,p,m].join("|")+")"+y+v+")*",k=y+v+b,N="(?:"+[f+l+"?",l,p,m,o].join("|")+")",w=RegExp(u+"(?="+u+")|"+N+k,"g");function T(E){return E.match(w)||[]}return Uv=T,Uv}var Hv,mT;function Iz(){if(mT)return Hv;mT=1;var e=Oz(),t=k5(),r=Pz();function n(s){return t(s)?r(s):e(s)}return Hv=n,Hv}var qv,gT;function Dz(){if(gT)return qv;gT=1;var e=Cz(),t=k5(),r=Iz(),n=b5();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,u=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return u[i]()+d}}return qv=s,qv}var zv,xT;function Mz(){if(xT)return zv;xT=1;var e=Dz(),t=e("toUpperCase");return zv=t,zv}var Rz=Mz();const ug=$r(Rz);function Xr(e){return function(){return e}}const S5=Math.cos,Mp=Math.sin,yi=Math.sqrt,Rp=Math.PI,dg=2*Rp,jj=Math.PI,Nj=2*jj,Ol=1e-6,Fz=Nj-Ol;function _5(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function $z(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _5;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Lz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_5:$z(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=n-t,d=s-r,f=o-t,p=l-r,m=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Ol)if(!(Math.abs(p*u-d*f)>Ol)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,v=s-l,y=u*u+d*d,b=x*x+v*v,k=Math.sqrt(y),N=Math.sqrt(m),w=i*Math.tan((jj-Math.acos((y+m-b)/(2*k*N)))/2),T=w/N,E=w/k;Math.abs(T-1)>Ol&&this._append`L${t+T*f},${r+T*p}`,this._append`A${i},${i},0,0,${+(p*x>f*v)},${this._x1=t+E*u},${this._y1=r+E*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),u=n*Math.sin(s),d=t+l,f=r+u,p=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ol||Math.abs(this._y1-f)>Ol)&&this._append`L${d},${f}`,n&&(m<0&&(m=m%Nj+Nj),m>Fz?this._append`A${n},${n},0,1,${p},${t-l},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:m>Ol&&this._append`A${n},${n},0,${+(m>=jj)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function E2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Lz(t)}function A2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function E5(e){this._context=e}E5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hg(e){return new E5(e)}function A5(e){return e[0]}function T5(e){return e[1]}function C5(e,t){var r=Xr(!0),n=null,s=hg,i=null,o=E2(l);e=typeof e=="function"?e:e===void 0?A5:Xr(e),t=typeof t=="function"?t:t===void 0?T5:Xr(t);function l(u){var d,f=(u=A2(u)).length,p,m=!1,x;for(n==null&&(i=s(x=o())),d=0;d<=f;++d)!(d<f&&r(p=u[d],d,u))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(p,d,u),+t(p,d,u));if(x)return i=null,x+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Xr(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Xr(+u),l):t},l.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Xr(!!u),l):r},l.curve=function(u){return arguments.length?(s=u,n!=null&&(i=s(n)),l):s},l.context=function(u){return arguments.length?(u==null?n=i=null:i=s(n=u),l):n},l}function ep(e,t,r){var n=null,s=Xr(!0),i=null,o=hg,l=null,u=E2(d);e=typeof e=="function"?e:e===void 0?A5:Xr(+e),t=typeof t=="function"?t:Xr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?T5:Xr(+r);function d(p){var m,x,v,y=(p=A2(p)).length,b,k=!1,N,w=new Array(y),T=new Array(y);for(i==null&&(l=o(N=u())),m=0;m<=y;++m){if(!(m<y&&s(b=p[m],m,p))===k)if(k=!k)x=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=x;--v)l.point(w[v],T[v]);l.lineEnd(),l.areaEnd()}k&&(w[m]=+e(b,m,p),T[m]=+t(b,m,p),l.point(n?+n(b,m,p):w[m],r?+r(b,m,p):T[m]))}if(N)return l=null,N+""||null}function f(){return C5().defined(s).curve(o).context(i)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Xr(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Xr(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Xr(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Xr(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Xr(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Xr(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Xr(!!p),d):s},d.curve=function(p){return arguments.length?(o=p,i!=null&&(l=o(i)),d):o},d.context=function(p){return arguments.length?(p==null?i=l=null:l=o(i=p),d):i},d}class O5{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Bz(e){return new O5(e,!0)}function Uz(e){return new O5(e,!1)}const T2={draw(e,t){const r=yi(t/Rp);e.moveTo(r,0),e.arc(0,0,r,0,dg)}},Hz={draw(e,t){const r=yi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},P5=yi(1/3),qz=P5*2,zz={draw(e,t){const r=yi(t/qz),n=r*P5;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Wz={draw(e,t){const r=yi(t),n=-r/2;e.rect(n,n,r,r)}},Kz=.8908130915292852,I5=Mp(Rp/10)/Mp(7*Rp/10),Vz=Mp(dg/10)*I5,Gz=-S5(dg/10)*I5,Yz={draw(e,t){const r=yi(t*Kz),n=Vz*r,s=Gz*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=dg*i/5,l=S5(o),u=Mp(o);e.lineTo(u*r,-l*r),e.lineTo(l*n-u*s,u*n+l*s)}e.closePath()}},Wv=yi(3),Xz={draw(e,t){const r=-yi(t/(Wv*3));e.moveTo(0,r*2),e.lineTo(-Wv*r,-r),e.lineTo(Wv*r,-r),e.closePath()}},Cs=-.5,Os=yi(3)/2,kj=1/yi(12),Jz=(kj/2+1)*3,Qz={draw(e,t){const r=yi(t/Jz),n=r/2,s=r*kj,i=n,o=r*kj+r,l=-i,u=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,u),e.lineTo(Cs*n-Os*s,Os*n+Cs*s),e.lineTo(Cs*i-Os*o,Os*i+Cs*o),e.lineTo(Cs*l-Os*u,Os*l+Cs*u),e.lineTo(Cs*n+Os*s,Cs*s-Os*n),e.lineTo(Cs*i+Os*o,Cs*o-Os*i),e.lineTo(Cs*l+Os*u,Cs*u-Os*l),e.closePath()}};function Zz(e,t){let r=null,n=E2(s);e=typeof e=="function"?e:Xr(e||T2),t=typeof t=="function"?t:Xr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Xr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Xr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Fp(){}function $p(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function D5(e){this._context=e}D5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$p(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$p(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eW(e){return new D5(e)}function M5(e){this._context=e}M5.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$p(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tW(e){return new M5(e)}function R5(e){this._context=e}R5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$p(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rW(e){return new R5(e)}function F5(e){this._context=e}F5.prototype={areaStart:Fp,areaEnd:Fp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nW(e){return new F5(e)}function yT(e){return e<0?-1:1}function vT(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(yT(i)+yT(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function bT(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Kv(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function Lp(e){this._context=e}Lp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kv(this,this._t0,bT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Kv(this,bT(this,r=vT(this,e,t)),r);break;default:Kv(this,this._t0,r=vT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function $5(e){this._context=new L5(e)}($5.prototype=Object.create(Lp.prototype)).point=function(e,t){Lp.prototype.point.call(this,t,e)};function L5(e){this._context=e}L5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function aW(e){return new Lp(e)}function sW(e){return new $5(e)}function B5(e){this._context=e}B5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=wT(e),s=wT(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function wT(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function iW(e){return new B5(e)}function fg(e,t){this._context=e,this._t=t}fg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function oW(e){return new fg(e,.5)}function lW(e){return new fg(e,0)}function cW(e){return new fg(e,1)}function xu(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Sj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function uW(e,t){return e[t]}function dW(e){const t=[];return t.key=e,t}function hW(){var e=Xr([]),t=Sj,r=xu,n=uW;function s(i){var o=Array.from(e.apply(this,arguments),dW),l,u=o.length,d=-1,f;for(const p of i)for(l=0,++d;l<u;++l)(o[l][d]=[0,+n(p,o[l].key,d,i)]).data=p;for(l=0,f=A2(t(o));l<u;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Xr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Xr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Sj:typeof i=="function"?i:Xr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??xu,s):r},s}function fW(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}xu(e,t)}}function pW(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}xu(e,t)}}function mW(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,u=0,d=0;l<o;++l){for(var f=e[t[l]],p=f[n][1]||0,m=f[n-1][1]||0,x=(p-m)/2,v=0;v<l;++v){var y=e[t[v]],b=y[n][1]||0,k=y[n-1][1]||0;x+=b-k}u+=p,d+=x*p}s[n-1][1]+=s[n-1][0]=r,u&&(r-=d/u)}s[n-1][1]+=s[n-1][0]=r,xu(e,t)}}function Mh(e){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mh(e)}var gW=["type","size","sizeType"];function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_j.apply(this,arguments)}function jT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(r),!0).forEach(function(n){xW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xW(e,t,r){return t=yW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yW(e){var t=vW(e,"string");return Mh(t)=="symbol"?t:t+""}function vW(e,t){if(Mh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bW(e,t){if(e==null)return{};var r=wW(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var U5={symbolCircle:T2,symbolCross:Hz,symbolDiamond:zz,symbolSquare:Wz,symbolStar:Yz,symbolTriangle:Xz,symbolWye:Qz},jW=Math.PI/180,NW=function(t){var r="symbol".concat(ug(t));return U5[r]||T2},kW=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*jW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},SW=function(t,r){U5["symbol".concat(ug(t))]=r},C2=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,u=bW(t,gW),d=NT(NT({},u),{},{type:n,size:i,sizeType:l}),f=function(){var b=NW(n),k=Zz().type(b).size(kW(i,l,n));return k()},p=d.className,m=d.cx,x=d.cy,v=Lt(d,!0);return m===+m&&x===+x&&i===+i?de.createElement("path",_j({},v,{className:ar("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(x,")"),d:f()})):null};C2.registerSymbol=SW;function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function Ej(){return Ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ej.apply(this,arguments)}function kT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _W(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(r),!0).forEach(function(n){Rh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q5(n.key),n)}}function TW(e,t,r){return t&&AW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CW(e,t,r){return t=Bp(t),OW(e,H5()?Reflect.construct(t,r||[],Bp(e).constructor):t.apply(e,r))}function OW(e,t){if(t&&(yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PW(e)}function PW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H5=function(){return!!e})()}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bp(e)}function IW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Aj(e,t)}function Rh(e,t,r){return t=q5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q5(e){var t=DW(e,"string");return yu(t)=="symbol"?t:t+""}function DW(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ps=32,O2=(function(e){function t(){return EW(this,t),CW(this,t,arguments)}return IW(t,e),TW(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Ps/2,o=Ps/6,l=Ps/3,u=n.inactive?s:n.color;if(n.type==="plainline")return de.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ps,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return de.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ps,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return de.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Ps/8,"h").concat(Ps,"v").concat(Ps*3/4,"h").concat(-Ps,"z"),className:"recharts-legend-icon"});if(de.isValidElement(n.legendIcon)){var d=_W({},n);return delete d.legendIcon,de.cloneElement(n.legendIcon,d)}return de.createElement(C2,{fill:u,cx:i,cy:i,size:Ps,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,u=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:Ps,height:Ps},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,v){var y=x.formatter||u,b=ar(Rh(Rh({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var k=Kt(x.value)?null:x.value;pi(!Kt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=x.inactive?d:x.color;return de.createElement("li",Ej({className:b,style:p,key:"legend-item-".concat(v)},Jl(n.props,x,v)),de.createElement(bj,{width:o,height:o,viewBox:f,style:m},n.renderIcon(x)),de.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},y?y(k,x,v):k))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return de.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(F.PureComponent);Rh(O2,"displayName","Legend");Rh(O2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Vv,ST;function MW(){if(ST)return Vv;ST=1;var e=og();function t(){this.__data__=new e,this.size=0}return Vv=t,Vv}var Gv,_T;function RW(){if(_T)return Gv;_T=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Gv=e,Gv}var Yv,ET;function FW(){if(ET)return Yv;ET=1;function e(t){return this.__data__.get(t)}return Yv=e,Yv}var Xv,AT;function $W(){if(AT)return Xv;AT=1;function e(t){return this.__data__.has(t)}return Xv=e,Xv}var Jv,TT;function LW(){if(TT)return Jv;TT=1;var e=og(),t=w2(),r=j2(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<n-1)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(i,o),this.size=l.size,this}return Jv=s,Jv}var Qv,CT;function z5(){if(CT)return Qv;CT=1;var e=og(),t=MW(),r=RW(),n=FW(),s=$W(),i=LW();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,Qv=o,Qv}var Zv,OT;function BW(){if(OT)return Zv;OT=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Zv=t,Zv}var eb,PT;function UW(){if(PT)return eb;PT=1;function e(t){return this.__data__.has(t)}return eb=e,eb}var tb,IT;function W5(){if(IT)return tb;IT=1;var e=j2(),t=BW(),r=UW();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,tb=n,tb}var rb,DT;function K5(){if(DT)return rb;DT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return rb=e,rb}var nb,MT;function V5(){if(MT)return nb;MT=1;function e(t,r){return t.has(r)}return nb=e,nb}var ab,RT;function G5(){if(RT)return ab;RT=1;var e=W5(),t=K5(),r=V5(),n=1,s=2;function i(o,l,u,d,f,p){var m=u&n,x=o.length,v=l.length;if(x!=v&&!(m&&v>x))return!1;var y=p.get(o),b=p.get(l);if(y&&b)return y==l&&b==o;var k=-1,N=!0,w=u&s?new e:void 0;for(p.set(o,l),p.set(l,o);++k<x;){var T=o[k],E=l[k];if(d)var S=m?d(E,T,k,l,o,p):d(T,E,k,o,l,p);if(S!==void 0){if(S)continue;N=!1;break}if(w){if(!t(l,function(_,A){if(!r(w,A)&&(T===_||f(T,_,u,d,p)))return w.push(A)})){N=!1;break}}else if(!(T===E||f(T,E,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return ab=i,ab}var sb,FT;function HW(){if(FT)return sb;FT=1;var e=Fi(),t=e.Uint8Array;return sb=t,sb}var ib,$T;function qW(){if($T)return ib;$T=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return ib=e,ib}var ob,LT;function P2(){if(LT)return ob;LT=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return ob=e,ob}var lb,BT;function zW(){if(BT)return lb;BT=1;var e=Of(),t=HW(),r=b2(),n=G5(),s=qW(),i=P2(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",x="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",k="[object ArrayBuffer]",N="[object DataView]",w=e?e.prototype:void 0,T=w?w.valueOf:void 0;function E(S,_,A,P,B,I,O){switch(A){case N:if(S.byteLength!=_.byteLength||S.byteOffset!=_.byteOffset)return!1;S=S.buffer,_=_.buffer;case k:return!(S.byteLength!=_.byteLength||!I(new t(S),new t(_)));case u:case d:case m:return r(+S,+_);case f:return S.name==_.name&&S.message==_.message;case x:case y:return S==_+"";case p:var L=s;case v:var X=P&o;if(L||(L=i),S.size!=_.size&&!X)return!1;var U=O.get(S);if(U)return U==_;P|=l,O.set(S,_);var V=n(L(S),L(_),P,B,I,O);return O.delete(S),V;case b:if(T)return T.call(S)==T.call(_)}return!1}return lb=E,lb}var cb,UT;function Y5(){if(UT)return cb;UT=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return cb=e,cb}var ub,HT;function WW(){if(HT)return ub;HT=1;var e=Y5(),t=ts();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return ub=r,ub}var db,qT;function KW(){if(qT)return db;qT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return db=e,db}var hb,zT;function VW(){if(zT)return hb;zT=1;function e(){return[]}return hb=e,hb}var fb,WT;function GW(){if(WT)return fb;WT=1;var e=KW(),t=VW(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return fb=i,fb}var pb,KT;function YW(){if(KT)return pb;KT=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return pb=e,pb}var mb,VT;function XW(){if(VT)return mb;VT=1;var e=wo(),t=jo(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return mb=n,mb}var gb,GT;function I2(){if(GT)return gb;GT=1;var e=XW(),t=jo(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return gb=i,gb}var eh={exports:{}},xb,YT;function JW(){if(YT)return xb;YT=1;function e(){return!1}return xb=e,xb}eh.exports;var XT;function X5(){return XT||(XT=1,(function(e,t){var r=Fi(),n=JW(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||n;e.exports=d})(eh,eh.exports)),eh.exports}var yb,JT;function D2(){if(JT)return yb;JT=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return yb=r,yb}var vb,QT;function M2(){if(QT)return vb;QT=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return vb=t,vb}var bb,ZT;function QW(){if(ZT)return bb;ZT=1;var e=wo(),t=M2(),r=jo(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",x="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",w="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",S="[object Int32Array]",_="[object Uint8Array]",A="[object Uint8ClampedArray]",P="[object Uint16Array]",B="[object Uint32Array]",I={};I[N]=I[w]=I[T]=I[E]=I[S]=I[_]=I[A]=I[P]=I[B]=!0,I[n]=I[s]=I[b]=I[i]=I[k]=I[o]=I[l]=I[u]=I[d]=I[f]=I[p]=I[m]=I[x]=I[v]=I[y]=!1;function O(L){return r(L)&&t(L.length)&&!!I[e(L)]}return bb=O,bb}var wb,eC;function J5(){if(eC)return wb;eC=1;function e(t){return function(r){return t(r)}}return wb=e,wb}var th={exports:{}};th.exports;var tC;function ZW(){return tC||(tC=1,(function(e,t){var r=x5(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var u=s&&s.require&&s.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(th,th.exports)),th.exports}var jb,rC;function Q5(){if(rC)return jb;rC=1;var e=QW(),t=J5(),r=ZW(),n=r&&r.isTypedArray,s=n?t(n):e;return jb=s,jb}var Nb,nC;function eK(){if(nC)return Nb;nC=1;var e=YW(),t=I2(),r=ts(),n=X5(),s=D2(),i=Q5(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=r(d),m=!p&&t(d),x=!p&&!m&&n(d),v=!p&&!m&&!x&&i(d),y=p||m||x||v,b=y?e(d.length,String):[],k=b.length;for(var N in d)(f||l.call(d,N))&&!(y&&(N=="length"||x&&(N=="offset"||N=="parent")||v&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||s(N,k)))&&b.push(N);return b}return Nb=u,Nb}var kb,aC;function tK(){if(aC)return kb;aC=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return kb=t,kb}var Sb,sC;function Z5(){if(sC)return Sb;sC=1;function e(t,r){return function(n){return t(r(n))}}return Sb=e,Sb}var _b,iC;function rK(){if(iC)return _b;iC=1;var e=Z5(),t=e(Object.keys,Object);return _b=t,_b}var Eb,oC;function nK(){if(oC)return Eb;oC=1;var e=tK(),t=rK(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return Eb=s,Eb}var Ab,lC;function If(){if(lC)return Ab;lC=1;var e=v2(),t=M2();function r(n){return n!=null&&t(n.length)&&!e(n)}return Ab=r,Ab}var Tb,cC;function pg(){if(cC)return Tb;cC=1;var e=eK(),t=nK(),r=If();function n(s){return r(s)?e(s):t(s)}return Tb=n,Tb}var Cb,uC;function aK(){if(uC)return Cb;uC=1;var e=WW(),t=GW(),r=pg();function n(s){return e(s,r,t)}return Cb=n,Cb}var Ob,dC;function sK(){if(dC)return Ob;dC=1;var e=aK(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,u,d,f){var p=l&t,m=e(i),x=m.length,v=e(o),y=v.length;if(x!=y&&!p)return!1;for(var b=x;b--;){var k=m[b];if(!(p?k in o:n.call(o,k)))return!1}var N=f.get(i),w=f.get(o);if(N&&w)return N==o&&w==i;var T=!0;f.set(i,o),f.set(o,i);for(var E=p;++b<x;){k=m[b];var S=i[k],_=o[k];if(u)var A=p?u(_,S,k,o,i,f):u(S,_,k,i,o,f);if(!(A===void 0?S===_||d(S,_,l,u,f):A)){T=!1;break}E||(E=k=="constructor")}if(T&&!E){var P=i.constructor,B=o.constructor;P!=B&&"constructor"in i&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof B=="function"&&B instanceof B)&&(T=!1)}return f.delete(i),f.delete(o),T}return Ob=s,Ob}var Pb,hC;function iK(){if(hC)return Pb;hC=1;var e=oc(),t=Fi(),r=e(t,"DataView");return Pb=r,Pb}var Ib,fC;function oK(){if(fC)return Ib;fC=1;var e=oc(),t=Fi(),r=e(t,"Promise");return Ib=r,Ib}var Db,pC;function eM(){if(pC)return Db;pC=1;var e=oc(),t=Fi(),r=e(t,"Set");return Db=r,Db}var Mb,mC;function lK(){if(mC)return Mb;mC=1;var e=oc(),t=Fi(),r=e(t,"WeakMap");return Mb=r,Mb}var Rb,gC;function cK(){if(gC)return Rb;gC=1;var e=iK(),t=w2(),r=oK(),n=eM(),s=lK(),i=wo(),o=y5(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",x=o(e),v=o(t),y=o(r),b=o(n),k=o(s),N=i;return(e&&N(new e(new ArrayBuffer(1)))!=m||t&&N(new t)!=l||r&&N(r.resolve())!=d||n&&N(new n)!=f||s&&N(new s)!=p)&&(N=function(w){var T=i(w),E=T==u?w.constructor:void 0,S=E?o(E):"";if(S)switch(S){case x:return m;case v:return l;case y:return d;case b:return f;case k:return p}return T}),Rb=N,Rb}var Fb,xC;function uK(){if(xC)return Fb;xC=1;var e=z5(),t=G5(),r=zW(),n=sK(),s=cK(),i=ts(),o=X5(),l=Q5(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function v(y,b,k,N,w,T){var E=i(y),S=i(b),_=E?f:s(y),A=S?f:s(b);_=_==d?p:_,A=A==d?p:A;var P=_==p,B=A==p,I=_==A;if(I&&o(y)){if(!o(b))return!1;E=!0,P=!1}if(I&&!P)return T||(T=new e),E||l(y)?t(y,b,k,N,w,T):r(y,b,_,k,N,w,T);if(!(k&u)){var O=P&&x.call(y,"__wrapped__"),L=B&&x.call(b,"__wrapped__");if(O||L){var X=O?y.value():y,U=L?b.value():b;return T||(T=new e),w(X,U,k,N,T)}}return I?(T||(T=new e),n(y,b,k,N,w,T)):!1}return Fb=v,Fb}var $b,yC;function R2(){if(yC)return $b;yC=1;var e=uK(),t=jo();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return $b=r,$b}var Lb,vC;function dK(){if(vC)return Lb;vC=1;var e=z5(),t=R2(),r=1,n=2;function s(i,o,l,u){var d=l.length,f=d,p=!u;if(i==null)return!f;for(i=Object(i);d--;){var m=l[d];if(p&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<f;){m=l[d];var x=m[0],v=i[x],y=m[1];if(p&&m[2]){if(v===void 0&&!(x in i))return!1}else{var b=new e;if(u)var k=u(v,y,x,i,o,b);if(!(k===void 0?t(y,v,r|n,u,b):k))return!1}}return!0}return Lb=s,Lb}var Bb,bC;function tM(){if(bC)return Bb;bC=1;var e=il();function t(r){return r===r&&!e(r)}return Bb=t,Bb}var Ub,wC;function hK(){if(wC)return Ub;wC=1;var e=tM(),t=pg();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return Ub=r,Ub}var Hb,jC;function rM(){if(jC)return Hb;jC=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Hb=e,Hb}var qb,NC;function fK(){if(NC)return qb;NC=1;var e=dK(),t=hK(),r=rM();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return qb=n,qb}var zb,kC;function pK(){if(kC)return zb;kC=1;function e(t,r){return t!=null&&r in Object(t)}return zb=e,zb}var Wb,SC;function mK(){if(SC)return Wb;SC=1;var e=w5(),t=I2(),r=ts(),n=D2(),s=M2(),i=cg();function o(l,u,d){u=e(u,l);for(var f=-1,p=u.length,m=!1;++f<p;){var x=i(u[f]);if(!(m=l!=null&&d(l,x)))break;l=l[x]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&s(p)&&n(x,p)&&(r(l)||t(l)))}return Wb=o,Wb}var Kb,_C;function gK(){if(_C)return Kb;_C=1;var e=pK(),t=mK();function r(n,s){return n!=null&&t(n,s,e)}return Kb=r,Kb}var Vb,EC;function xK(){if(EC)return Vb;EC=1;var e=R2(),t=j5(),r=gK(),n=y2(),s=tM(),i=rM(),o=cg(),l=1,u=2;function d(f,p){return n(f)&&s(p)?i(o(f),p):function(m){var x=t(m,f);return x===void 0&&x===p?r(m,f):e(p,x,l|u)}}return Vb=d,Vb}var Gb,AC;function Ju(){if(AC)return Gb;AC=1;function e(t){return t}return Gb=e,Gb}var Yb,TC;function yK(){if(TC)return Yb;TC=1;function e(t){return function(r){return r?.[t]}}return Yb=e,Yb}var Xb,CC;function vK(){if(CC)return Xb;CC=1;var e=k2();function t(r){return function(n){return e(n,r)}}return Xb=t,Xb}var Jb,OC;function bK(){if(OC)return Jb;OC=1;var e=yK(),t=vK(),r=y2(),n=cg();function s(i){return r(i)?e(n(i)):t(i)}return Jb=s,Jb}var Qb,PC;function $i(){if(PC)return Qb;PC=1;var e=fK(),t=xK(),r=Ju(),n=ts(),s=bK();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return Qb=i,Qb}var Zb,IC;function nM(){if(IC)return Zb;IC=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Zb=e,Zb}var ew,DC;function wK(){if(DC)return ew;DC=1;function e(t){return t!==t}return ew=e,ew}var tw,MC;function jK(){if(MC)return tw;MC=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return tw=e,tw}var rw,RC;function NK(){if(RC)return rw;RC=1;var e=nM(),t=wK(),r=jK();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return rw=n,rw}var nw,FC;function kK(){if(FC)return nw;FC=1;var e=NK();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return nw=t,nw}var aw,$C;function SK(){if($C)return aw;$C=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return aw=e,aw}var sw,LC;function _K(){if(LC)return sw;LC=1;function e(){}return sw=e,sw}var iw,BC;function EK(){if(BC)return iw;BC=1;var e=eM(),t=_K(),r=P2(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return iw=s,iw}var ow,UC;function AK(){if(UC)return ow;UC=1;var e=W5(),t=kK(),r=SK(),n=V5(),s=EK(),i=P2(),o=200;function l(u,d,f){var p=-1,m=t,x=u.length,v=!0,y=[],b=y;if(f)v=!1,m=r;else if(x>=o){var k=d?null:s(u);if(k)return i(k);v=!1,m=n,b=new e}else b=d?[]:y;e:for(;++p<x;){var N=u[p],w=d?d(N):N;if(N=f||N!==0?N:0,v&&w===w){for(var T=b.length;T--;)if(b[T]===w)continue e;d&&b.push(w),y.push(N)}else m(b,w,f)||(b!==y&&b.push(w),y.push(N))}return y}return ow=l,ow}var lw,HC;function TK(){if(HC)return lw;HC=1;var e=$i(),t=AK();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return lw=r,lw}var CK=TK();const qC=$r(CK);function aM(e,t,r){return t===!0?qC(e,r):Kt(t)?qC(e,t):e}function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}var OK=["ref"];function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(n){mg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iM(n.key),n)}}function IK(e,t,r){return t&&WC(e.prototype,t),r&&WC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DK(e,t,r){return t=Up(t),MK(e,sM()?Reflect.construct(t,r||[],Up(e).constructor):t.apply(e,r))}function MK(e,t){if(t&&(vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RK(e)}function RK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sM=function(){return!!e})()}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Up(e)}function FK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tj(e,t)}function Tj(e,t){return Tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Tj(e,t)}function mg(e,t,r){return t=iM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iM(e){var t=$K(e,"string");return vu(t)=="symbol"?t:t+""}function $K(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function LK(e,t){if(e==null)return{};var r=BK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UK(e){return e.value}function HK(e,t){if(de.isValidElement(e))return de.cloneElement(e,t);if(typeof e=="function")return de.createElement(e,t);t.ref;var r=LK(t,OK);return de.createElement(O2,r)}var KC=1,ma=(function(e){function t(){var r;PK(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=DK(this,t,[].concat(s)),mg(r,"lastBoundingBox",{width:-1,height:-1}),r}return FK(t,e),IK(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>KC||Math.abs(s.height-this.lastBoundingBox.height)>KC)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ji({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,u=s.margin,d=s.chartWidth,f=s.chartHeight,p,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((f||0)-v.height)/2}}else m=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Ji(Ji({},p),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,u=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,p=Ji(Ji({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return de.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){n.wrapperNode=x}},HK(i,Ji(Ji({},this.props),{},{payload:aM(f,d,UK)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Ji(Ji({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&lt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(F.PureComponent);mg(ma,"displayName","Legend");mg(ma,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var cw,VC;function qK(){if(VC)return cw;VC=1;var e=Of(),t=I2(),r=ts(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return cw=s,cw}var uw,GC;function oM(){if(GC)return uw;GC=1;var e=Y5(),t=qK();function r(n,s,i,o,l){var u=-1,d=n.length;for(i||(i=t),l||(l=[]);++u<d;){var f=n[u];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return uw=r,uw}var dw,YC;function zK(){if(YC)return dw;YC=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),u=l.length;u--;){var d=l[t?u:++i];if(n(o[d],d,o)===!1)break}return r}}return dw=e,dw}var hw,XC;function WK(){if(XC)return hw;XC=1;var e=zK(),t=e();return hw=t,hw}var fw,JC;function lM(){if(JC)return fw;JC=1;var e=WK(),t=pg();function r(n,s){return n&&e(n,s,t)}return fw=r,fw}var pw,QC;function KK(){if(QC)return pw;QC=1;var e=If();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,u=Object(s);(n?l--:++l<o)&&i(u[l],l,u)!==!1;);return s}}return pw=t,pw}var mw,ZC;function F2(){if(ZC)return mw;ZC=1;var e=lM(),t=KK(),r=t(e);return mw=r,mw}var gw,e4;function cM(){if(e4)return gw;e4=1;var e=F2(),t=If();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,u,d){o[++i]=s(l,u,d)}),o}return gw=r,gw}var xw,t4;function VK(){if(t4)return xw;t4=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return xw=e,xw}var yw,r4;function GK(){if(r4)return yw;r4=1;var e=Gu();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),u=n!==void 0,d=n===null,f=n===n,p=e(n);if(!d&&!p&&!l&&r>n||l&&u&&f&&!d&&!p||i&&u&&f||!s&&f||!o)return 1;if(!i&&!l&&!p&&r<n||p&&s&&o&&!i&&!l||d&&s&&o||!u&&o||!f)return-1}return 0}return yw=t,yw}var vw,n4;function YK(){if(n4)return vw;n4=1;var e=GK();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,u=o.length,d=s.length;++i<u;){var f=e(o[i],l[i]);if(f){if(i>=d)return f;var p=s[i];return f*(p=="desc"?-1:1)}}return r.index-n.index}return vw=t,vw}var bw,a4;function XK(){if(a4)return bw;a4=1;var e=N2(),t=k2(),r=$i(),n=cM(),s=VK(),i=J5(),o=YK(),l=Ju(),u=ts();function d(f,p,m){p.length?p=e(p,function(y){return u(y)?function(b){return t(b,y.length===1?y[0]:y)}:y}):p=[l];var x=-1;p=e(p,i(r));var v=n(f,function(y,b,k){var N=e(p,function(w){return w(y)});return{criteria:N,index:++x,value:y}});return s(v,function(y,b){return o(y,b,m)})}return bw=d,bw}var ww,s4;function JK(){if(s4)return ww;s4=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return ww=e,ww}var jw,i4;function QK(){if(i4)return jw;i4=1;var e=JK(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,u=t(o.length-s,0),d=Array(u);++l<u;)d[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(d),e(n,this,f)}}return jw=r,jw}var Nw,o4;function ZK(){if(o4)return Nw;o4=1;function e(t){return function(){return t}}return Nw=e,Nw}var kw,l4;function uM(){if(l4)return kw;l4=1;var e=oc(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return kw=t,kw}var Sw,c4;function eV(){if(c4)return Sw;c4=1;var e=ZK(),t=uM(),r=Ju(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Sw=n,Sw}var _w,u4;function tV(){if(u4)return _w;u4=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),u=t-(l-o);if(o=l,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return _w=n,_w}var Ew,d4;function rV(){if(d4)return Ew;d4=1;var e=eV(),t=tV(),r=t(e);return Ew=r,Ew}var Aw,h4;function nV(){if(h4)return Aw;h4=1;var e=Ju(),t=QK(),r=rV();function n(s,i){return r(t(s,i,e),s+"")}return Aw=n,Aw}var Tw,f4;function gg(){if(f4)return Tw;f4=1;var e=b2(),t=If(),r=D2(),n=il();function s(i,o,l){if(!n(l))return!1;var u=typeof o;return(u=="number"?t(l)&&r(o,l.length):u=="string"&&o in l)?e(l[o],i):!1}return Tw=s,Tw}var Cw,p4;function aV(){if(p4)return Cw;p4=1;var e=oM(),t=XK(),r=nV(),n=gg(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Cw=s,Cw}var sV=aV();const $2=$r(sV);function Fh(e){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(e)}function Cj(){return Cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cj.apply(this,arguments)}function iV(e,t){return uV(e)||cV(e,t)||lV(e,t)||oV()}function oV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lV(e,t){if(e){if(typeof e=="string")return m4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m4(e,t)}}function m4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function uV(e){if(Array.isArray(e))return e}function g4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(r),!0).forEach(function(n){dV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dV(e,t,r){return t=hV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hV(e){var t=fV(e,"string");return Fh(t)=="symbol"?t:t+""}function fV(e,t){if(Fh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pV(e){return Array.isArray(e)&&zn(e[0])&&zn(e[1])?e.join(" ~ "):e}var mV=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,u=t.labelStyle,d=u===void 0?{}:u,f=t.payload,p=t.formatter,m=t.itemSorter,x=t.wrapperClassName,v=t.labelClassName,y=t.label,b=t.labelFormatter,k=t.accessibilityLayer,N=k===void 0?!1:k,w=function(){if(f&&f.length){var O={padding:0,margin:0},L=(m?$2(f,m):f).map(function(X,U){if(X.type==="none")return null;var V=Ow({display:"block",paddingTop:4,paddingBottom:4,color:X.color||"#000"},l),ne=X.formatter||p||pV,ee=X.value,R=X.name,se=ee,z=R;if(ne&&se!=null&&z!=null){var M=ne(ee,R,X,U,f);if(Array.isArray(M)){var J=iV(M,2);se=J[0],z=J[1]}else se=M}return de.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:V},zn(z)?de.createElement("span",{className:"recharts-tooltip-item-name"},z):null,zn(z)?de.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,de.createElement("span",{className:"recharts-tooltip-item-value"},se),de.createElement("span",{className:"recharts-tooltip-item-unit"},X.unit||""))});return de.createElement("ul",{className:"recharts-tooltip-item-list",style:O},L)}return null},T=Ow({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),E=Ow({margin:0},d),S=!ir(y),_=S?y:"",A=ar("recharts-default-tooltip",x),P=ar("recharts-tooltip-label",v);S&&b&&f!==void 0&&f!==null&&(_=b(y,f));var B=N?{role:"status","aria-live":"assertive"}:{};return de.createElement("div",Cj({className:A,style:T},B),de.createElement("p",{className:P,style:E},de.isValidElement(_)?_:"".concat(_)),w())};function $h(e){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}function tp(e,t,r){return t=gV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e){var t=xV(e,"string");return $h(t)=="symbol"?t:t+""}function xV(e,t){if($h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bd="recharts-tooltip-wrapper",yV={visibility:"hidden"};function vV(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ar(Bd,tp(tp(tp(tp({},"".concat(Bd,"-right"),lt(r)&&t&&lt(t.x)&&r>=t.x),"".concat(Bd,"-left"),lt(r)&&t&&lt(t.x)&&r<t.x),"".concat(Bd,"-bottom"),lt(n)&&t&&lt(t.y)&&n>=t.y),"".concat(Bd,"-top"),lt(n)&&t&&lt(t.y)&&n<t.y))}function x4(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,u=e.viewBox,d=e.viewBoxDimension;if(i&&lt(i[n]))return i[n];var f=r[n]-l-s,p=r[n]+s;if(t[n])return o[n]?f:p;if(o[n]){var m=f,x=u[n];return m<x?Math.max(p,u[n]):Math.max(f,u[n])}var v=p+l,y=u[n]+d;return v>y?Math.max(f,u[n]):Math.max(p,u[n])}function bV(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wV(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,u=e.viewBox,d,f,p;return o.height>0&&o.width>0&&r?(f=x4({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=x4({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=bV({translateX:f,translateY:p,useTranslate3d:l})):d=yV,{cssProperties:d,cssClasses:vV({translateX:f,translateY:p,coordinate:r})}}function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(r),!0).forEach(function(n){Pj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hM(n.key),n)}}function kV(e,t,r){return t&&NV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SV(e,t,r){return t=Hp(t),_V(e,dM()?Reflect.construct(t,r||[],Hp(e).constructor):t.apply(e,r))}function _V(e,t){if(t&&(bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EV(e)}function EV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dM=function(){return!!e})()}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hp(e)}function AV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t)}function Oj(e,t){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Oj(e,t)}function Pj(e,t,r){return t=hM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hM(e){var t=TV(e,"string");return bu(t)=="symbol"?t:t+""}function TV(e,t){if(bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var b4=1,CV=(function(e){function t(){var r;jV(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=SV(this,t,[].concat(s)),Pj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Pj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,u,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return AV(t,e),kV(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>b4||Math.abs(n.height-this.state.lastBoundingBox.height)>b4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.children,f=s.coordinate,p=s.hasPayload,m=s.isAnimationActive,x=s.offset,v=s.position,y=s.reverseDirection,b=s.useTranslate3d,k=s.viewBox,N=s.wrapperStyle,w=wV({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:k}),T=w.cssClasses,E=w.cssProperties,S=v4(v4({transition:m&&i?"transform ".concat(l,"ms ").concat(u):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},N);return de.createElement("div",{tabIndex:-1,className:T,style:S,ref:function(A){n.wrapperNode=A}},d)}}])})(F.PureComponent),OV=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ol={isSsr:OV()};function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function w4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(r),!0).forEach(function(n){L2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pM(n.key),n)}}function DV(e,t,r){return t&&IV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MV(e,t,r){return t=qp(t),RV(e,fM()?Reflect.construct(t,r||[],qp(e).constructor):t.apply(e,r))}function RV(e,t){if(t&&(wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FV(e)}function FV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fM=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qp(e)}function $V(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}function Ij(e,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ij(e,t)}function L2(e,t,r){return t=pM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pM(e){var t=LV(e,"string");return wu(t)=="symbol"?t:t+""}function LV(e,t){if(wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BV(e){return e.dataKey}function UV(e,t){return de.isValidElement(e)?de.cloneElement(e,t):typeof e=="function"?de.createElement(e,t):de.createElement(mV,t)}var zr=(function(e){function t(){return PV(this,t),MV(this,t,arguments)}return $V(t,e),DV(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.content,f=s.coordinate,p=s.filterNull,m=s.isAnimationActive,x=s.offset,v=s.payload,y=s.payloadUniqBy,b=s.position,k=s.reverseDirection,N=s.useTranslate3d,w=s.viewBox,T=s.wrapperStyle,E=v??[];p&&E.length&&(E=aM(v.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),y,BV));var S=E.length>0;return de.createElement(CV,{allowEscapeViewBox:o,animationDuration:l,animationEasing:u,isAnimationActive:m,active:i,coordinate:f,hasPayload:S,offset:x,position:b,reverseDirection:k,useTranslate3d:N,viewBox:w,wrapperStyle:T},UV(d,j4(j4({},this.props),{},{payload:E})))}}])})(F.PureComponent);L2(zr,"displayName","Tooltip");L2(zr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ol.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Pw,N4;function HV(){if(N4)return Pw;N4=1;var e=Fi(),t=function(){return e.Date.now()};return Pw=t,Pw}var Iw,k4;function qV(){if(k4)return Iw;k4=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Iw=t,Iw}var Dw,S4;function zV(){if(S4)return Dw;S4=1;var e=qV(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Dw=r,Dw}var Mw,_4;function mM(){if(_4)return Mw;_4=1;var e=zV(),t=il(),r=Gu(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(r(d))return n;if(t(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=t(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=i.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):s.test(d)?n:+d}return Mw=u,Mw}var Rw,E4;function WV(){if(E4)return Rw;E4=1;var e=il(),t=HV(),r=mM(),n="Expected a function",s=Math.max,i=Math.min;function o(l,u,d){var f,p,m,x,v,y,b=0,k=!1,N=!1,w=!0;if(typeof l!="function")throw new TypeError(n);u=r(u)||0,e(d)&&(k=!!d.leading,N="maxWait"in d,m=N?s(r(d.maxWait)||0,u):m,w="trailing"in d?!!d.trailing:w);function T(L){var X=f,U=p;return f=p=void 0,b=L,x=l.apply(U,X),x}function E(L){return b=L,v=setTimeout(A,u),k?T(L):x}function S(L){var X=L-y,U=L-b,V=u-X;return N?i(V,m-U):V}function _(L){var X=L-y,U=L-b;return y===void 0||X>=u||X<0||N&&U>=m}function A(){var L=t();if(_(L))return P(L);v=setTimeout(A,S(L))}function P(L){return v=void 0,w&&f?T(L):(f=p=void 0,x)}function B(){v!==void 0&&clearTimeout(v),b=0,f=y=p=v=void 0}function I(){return v===void 0?x:P(t())}function O(){var L=t(),X=_(L);if(f=arguments,p=this,y=L,X){if(v===void 0)return E(y);if(N)return clearTimeout(v),v=setTimeout(A,u),T(y)}return v===void 0&&(v=setTimeout(A,u)),x}return O.cancel=B,O.flush=I,O}return Rw=o,Rw}var Fw,A4;function KV(){if(A4)return Fw;A4=1;var e=WV(),t=il(),r="Expected a function";function n(s,i,o){var l=!0,u=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,u="trailing"in o?!!o.trailing:u),e(s,i,{leading:l,maxWait:i,trailing:u})}return Fw=n,Fw}var VV=KV();const gM=$r(VV);function Lh(e){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function T4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(r),!0).forEach(function(n){GV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GV(e,t,r){return t=YV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YV(e){var t=XV(e,"string");return Lh(t)=="symbol"?t:t+""}function XV(e,t){if(Lh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JV(e,t){return tG(e)||eG(e,t)||ZV(e,t)||QV()}function QV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZV(e,t){if(e){if(typeof e=="string")return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}function C4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function tG(e){if(Array.isArray(e))return e}var Un=F.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,u=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,p=e.minHeight,m=e.maxHeight,x=e.children,v=e.debounce,y=v===void 0?0:v,b=e.id,k=e.className,N=e.onResize,w=e.style,T=w===void 0?{}:w,E=F.useRef(null),S=F.useRef();S.current=N,F.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var _=F.useState({containerWidth:s.width,containerHeight:s.height}),A=JV(_,2),P=A[0],B=A[1],I=F.useCallback(function(L,X){B(function(U){var V=Math.round(L),ne=Math.round(X);return U.containerWidth===V&&U.containerHeight===ne?U:{containerWidth:V,containerHeight:ne}})},[]);F.useEffect(function(){var L=function(R){var se,z=R[0].contentRect,M=z.width,J=z.height;I(M,J),(se=S.current)===null||se===void 0||se.call(S,M,J)};y>0&&(L=gM(L,y,{trailing:!0,leading:!1}));var X=new ResizeObserver(L),U=E.current.getBoundingClientRect(),V=U.width,ne=U.height;return I(V,ne),X.observe(E.current),function(){X.disconnect()}},[I,y]);var O=F.useMemo(function(){var L=P.containerWidth,X=P.containerHeight;if(L<0||X<0)return null;pi($l(o)||$l(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,u),pi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var U=$l(o)?L:o,V=$l(u)?X:u;r&&r>0&&(U?V=U/r:V&&(U=V*r),m&&V>m&&(V=m)),pi(U>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,V,o,u,f,p,r);var ne=!Array.isArray(x)&&uo(x.type).endsWith("Chart");return de.Children.map(x,function(ee){return de.isValidElement(ee)?F.cloneElement(ee,rp({width:U,height:V},ne?{style:rp({height:"100%",width:"100%",maxHeight:V,maxWidth:U},ee.props.style)}:{})):ee})},[r,x,u,m,p,f,P,o]);return de.createElement("div",{id:b?"".concat(b):void 0,className:ar("recharts-responsive-container",k),style:rp(rp({},T),{},{width:o,height:u,minWidth:f,minHeight:p,maxHeight:m}),ref:E},O)}),Ql=function(t){return null};Ql.displayName="Cell";function Bh(e){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}function O4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O4(Object(r),!0).forEach(function(n){rG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rG(e,t,r){return t=nG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nG(e){var t=aG(e,"string");return Bh(t)=="symbol"?t:t+""}function aG(e,t){if(Bh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wc={widthCache:{},cacheCount:0},sG=2e3,iG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},P4="recharts_measurement_span";function oG(e){var t=Dj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ch=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ol.isSsr)return{width:0,height:0};var n=oG(r),s=JSON.stringify({text:t,copyStyle:n});if(Wc.widthCache[s])return Wc.widthCache[s];try{var i=document.getElementById(P4);i||(i=document.createElement("span"),i.setAttribute("id",P4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Dj(Dj({},iG),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),u={width:l.width,height:l.height};return Wc.widthCache[s]=u,++Wc.cacheCount>sG&&(Wc.cacheCount=0,Wc.widthCache={}),u}catch{return{width:0,height:0}}},lG=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}function zp(e,t){return hG(e)||dG(e,t)||uG(e,t)||cG()}function cG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uG(e,t){if(e){if(typeof e=="string")return I4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I4(e,t)}}function I4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function hG(e){if(Array.isArray(e))return e}function fG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mG(n.key),n)}}function pG(e,t,r){return t&&D4(e.prototype,t),r&&D4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mG(e){var t=gG(e,"string");return Uh(t)=="symbol"?t:t+""}function gG(e,t){if(Uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var M4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vG=Object.keys(xM),nu="NaN";function bG(e,t){return e*xM[t]}var np=(function(){function e(t,r){fG(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!xG.test(r)&&(this.num=NaN,this.unit=""),vG.includes(r)&&(this.num=bG(t,r),this.unit="px")}return pG(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=yG.exec(r))!==null&&n!==void 0?n:[],i=zp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function yM(e){if(e.includes(nu))return nu;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=M4.exec(t))!==null&&r!==void 0?r:[],s=zp(n,4),i=s[1],o=s[2],l=s[3],u=np.parse(i??""),d=np.parse(l??""),f=o==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return nu;t=t.replace(M4,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,m=(p=R4.exec(t))!==null&&p!==void 0?p:[],x=zp(m,4),v=x[1],y=x[2],b=x[3],k=np.parse(v??""),N=np.parse(b??""),w=y==="+"?k.add(N):k.subtract(N);if(w.isNaN())return nu;t=t.replace(R4,w.toString())}return t}var F4=/\(([^()]*)\)/;function wG(e){for(var t=e;t.includes("(");){var r=F4.exec(t),n=zp(r,2),s=n[1];t=t.replace(F4,yM(s))}return t}function jG(e){var t=e.replace(/\s+/g,"");return t=wG(t),t=yM(t),t}function NG(e){try{return jG(e)}catch{return nu}}function $w(e){var t=NG(e.slice(5,-1));return t===nu?"":t}var kG=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],SG=["dx","dy","angle","className","breakAll"];function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mj.apply(this,arguments)}function $4(e,t){if(e==null)return{};var r=_G(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _G(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function L4(e,t){return CG(e)||TG(e,t)||AG(e,t)||EG()}function EG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AG(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function CG(e){if(Array.isArray(e))return e}var vM=/[ \f\n\r\t\v\u2028\u2029]+/,bM=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];ir(r)||(n?i=r.toString().split(""):i=r.toString().split(vM));var o=i.map(function(u){return{word:u,width:ch(u,s).width}}),l=n?0:ch("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},OG=function(t,r,n,s,i){var o=t.maxLines,l=t.children,u=t.style,d=t.breakAll,f=lt(o),p=l,m=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(V,ne){var ee=ne.word,R=ne.width,se=V[V.length-1];if(se&&(s==null||i||se.width+R+n<Number(s)))se.words.push(ee),se.width+=R+n;else{var z={words:[ee],width:R};V.push(z)}return V},[])},x=m(r),v=function(U){return U.reduce(function(V,ne){return V.width>ne.width?V:ne})};if(!f)return x;for(var y="",b=function(U){var V=p.slice(0,U),ne=bM({breakAll:d,style:u,children:V+y}).wordsWithComputedWidth,ee=m(ne),R=ee.length>o||v(ee).width>Number(s);return[R,ee]},k=0,N=p.length-1,w=0,T;k<=N&&w<=p.length-1;){var E=Math.floor((k+N)/2),S=E-1,_=b(S),A=L4(_,2),P=A[0],B=A[1],I=b(E),O=L4(I,1),L=O[0];if(!P&&!L&&(k=E+1),P&&L&&(N=E-1),!P&&L){T=B;break}w++}return T||x},U4=function(t){var r=ir(t)?[]:t.toString().split(vM);return[{words:r}]},PG=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!ol.isSsr){var u,d,f=bM({breakAll:o,children:s,style:i});if(f){var p=f.wordsWithComputedWidth,m=f.spaceWidth;u=p,d=m}else return U4(s);return OG({breakAll:o,children:s,maxLines:l,style:i},u,d,r,n)}return U4(s)},H4="#808080",Zl=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,u=t.capHeight,d=u===void 0?"0.71em":u,f=t.scaleToFit,p=f===void 0?!1:f,m=t.textAnchor,x=m===void 0?"start":m,v=t.verticalAnchor,y=v===void 0?"end":v,b=t.fill,k=b===void 0?H4:b,N=$4(t,kG),w=F.useMemo(function(){return PG({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:p,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,p,N.style,N.width]),T=N.dx,E=N.dy,S=N.angle,_=N.className,A=N.breakAll,P=$4(N,SG);if(!zn(n)||!zn(i))return null;var B=n+(lt(T)?T:0),I=i+(lt(E)?E:0),O;switch(y){case"start":O=$w("calc(".concat(d,")"));break;case"middle":O=$w("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:O=$w("calc(".concat(w.length-1," * -").concat(l,")"));break}var L=[];if(p){var X=w[0].width,U=N.width;L.push("scale(".concat((lt(U)?U/X:1)/X,")"))}return S&&L.push("rotate(".concat(S,", ").concat(B,", ").concat(I,")")),L.length&&(P.transform=L.join(" ")),de.createElement("text",Mj({},Lt(P,!0),{x:B,y:I,className:ar("recharts-text",_),textAnchor:x,fill:k.includes("url")?H4:k}),w.map(function(V,ne){var ee=V.words.join(A?"":" ");return de.createElement("tspan",{x:B,dy:ne===0?O:l,key:"".concat(ee,"-").concat(ne)},ee)}))};function tl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function B2(e){let t,r,n;e.length!==2?(t=tl,r=(l,u)=>tl(e(l),u),n=(l,u)=>e(l)-u):(t=e===tl||e===IG?e:DG,r=e,n=e);function s(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<0?d=p+1:f=p}while(d<f)}return d}function i(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,u,d=0,f=l.length){const p=s(l,u,d,f-1);return p>d&&n(l[p-1],u)>-n(l[p],u)?p-1:p}return{left:s,center:o,right:i}}function DG(){return 0}function wM(e){return e===null?NaN:+e}function*MG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const RG=B2(tl),Df=RG.right;B2(wM).center;class q4 extends Map{constructor(t,r=LG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(z4(this,t))}has(t){return super.has(z4(this,t))}set(t,r){return super.set(FG(this,t),r)}delete(t){return super.delete($G(this,t))}}function z4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function FG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function $G({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function LG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function BG(e=tl){if(e===tl)return jM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function jM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const UG=Math.sqrt(50),HG=Math.sqrt(10),qG=Math.sqrt(2);function Wp(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=UG?10:i>=HG?5:i>=qG?2:1;let l,u,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=r&&r<2?Wp(e,t,r*2):[l,u,d]}function Rj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Wp(t,e,r):Wp(e,t,r);if(!(i>=s))return[];const l=i-s+1,u=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)u[d]=(i-d)/-o;else for(let d=0;d<l;++d)u[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(s+d)/-o;else for(let d=0;d<l;++d)u[d]=(s+d)*o;return u}function Fj(e,t,r){return t=+t,e=+e,r=+r,Wp(e,t,r)[2]}function $j(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Fj(t,e,r):Fj(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function W4(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function K4(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function NM(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?jM:BG(s);n>r;){if(n-r>600){const u=n-r+1,d=t-r+1,f=Math.log(u),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),x=Math.max(r,Math.floor(t-d*p/u+m)),v=Math.min(n,Math.floor(t+(u-d)*p/u+m));NM(e,t,x,v,s)}const i=e[t];let o=r,l=n;for(Ud(e,r,t),s(e[n],i)>0&&Ud(e,r,n);o<l;){for(Ud(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Ud(e,r,l):(++l,Ud(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ud(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function zG(e,t,r){if(e=Float64Array.from(MG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return K4(e);if(t>=1)return W4(e);var n,s=(n-1)*t,i=Math.floor(s),o=W4(NM(e,i).subarray(0,i+1)),l=K4(e.subarray(i+1));return o+(l-o)*(s-i)}}function WG(e,t,r=wM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function KG(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Hs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function No(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Lj=Symbol("implicit");function U2(){var e=new q4,t=[],r=[],n=Lj;function s(i){let o=e.get(i);if(o===void 0){if(n!==Lj)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new q4;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return U2(t,r).unknown(n)},Hs.apply(s,arguments),s}function Hh(){var e=U2().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,u=0,d=0,f=.5;delete e.unknown;function p(){var m=t().length,x=s<n,v=x?s:n,y=x?n:s;i=(y-v)/Math.max(1,m-u+d*2),l&&(i=Math.floor(i)),v+=(y-v-i*(m-u))*f,o=i*(1-u),l&&(v=Math.round(v),o=Math.round(o));var b=KG(m).map(function(k){return v+i*k});return r(x?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),p()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,p()):l},e.padding=function(m){return arguments.length?(u=Math.min(1,d=+m),p()):u},e.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),p()):u},e.paddingOuter=function(m){return arguments.length?(d=+m,p()):d},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),p()):f},e.copy=function(){return Hh(t(),[n,s]).round(l).paddingInner(u).paddingOuter(d).align(f)},Hs.apply(p(),arguments)}function kM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return kM(t())},e}function uh(){return kM(Hh.apply(null,arguments).paddingInner(1))}function H2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function SM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Mf(){}var qh=.7,Kp=1/qh,hu="\\s*([+-]?\\d+)\\s*",zh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VG=/^#([0-9a-f]{3,8})$/,GG=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),YG=new RegExp(`^rgb\\(${Oi},${Oi},${Oi}\\)$`),XG=new RegExp(`^rgba\\(${hu},${hu},${hu},${zh}\\)$`),JG=new RegExp(`^rgba\\(${Oi},${Oi},${Oi},${zh}\\)$`),QG=new RegExp(`^hsl\\(${zh},${Oi},${Oi}\\)$`),ZG=new RegExp(`^hsla\\(${zh},${Oi},${Oi},${zh}\\)$`),V4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H2(Mf,Wh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:G4,formatHex:G4,formatHex8:eY,formatHsl:tY,formatRgb:Y4,toString:Y4});function G4(){return this.rgb().formatHex()}function eY(){return this.rgb().formatHex8()}function tY(){return _M(this).formatHsl()}function Y4(){return this.rgb().formatRgb()}function Wh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=VG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?X4(t):r===3?new Za(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ap(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ap(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=GG.exec(e))?new Za(t[1],t[2],t[3],1):(t=YG.exec(e))?new Za(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=XG.exec(e))?ap(t[1],t[2],t[3],t[4]):(t=JG.exec(e))?ap(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=QG.exec(e))?Z4(t[1],t[2]/100,t[3]/100,1):(t=ZG.exec(e))?Z4(t[1],t[2]/100,t[3]/100,t[4]):V4.hasOwnProperty(e)?X4(V4[e]):e==="transparent"?new Za(NaN,NaN,NaN,0):null}function X4(e){return new Za(e>>16&255,e>>8&255,e&255,1)}function ap(e,t,r,n){return n<=0&&(e=t=r=NaN),new Za(e,t,r,n)}function rY(e){return e instanceof Mf||(e=Wh(e)),e?(e=e.rgb(),new Za(e.r,e.g,e.b,e.opacity)):new Za}function Bj(e,t,r,n){return arguments.length===1?rY(e):new Za(e,t,r,n??1)}function Za(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}H2(Za,Bj,SM(Mf,{brighter(e){return e=e==null?Kp:Math.pow(Kp,e),new Za(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qh:Math.pow(qh,e),new Za(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Za(ql(this.r),ql(this.g),ql(this.b),Vp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J4,formatHex:J4,formatHex8:nY,formatRgb:Q4,toString:Q4}));function J4(){return`#${Ll(this.r)}${Ll(this.g)}${Ll(this.b)}`}function nY(){return`#${Ll(this.r)}${Ll(this.g)}${Ll(this.b)}${Ll((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q4(){const e=Vp(this.opacity);return`${e===1?"rgb(":"rgba("}${ql(this.r)}, ${ql(this.g)}, ${ql(this.b)}${e===1?")":`, ${e})`}`}function Vp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ql(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ll(e){return e=ql(e),(e<16?"0":"")+e.toString(16)}function Z4(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new li(e,t,r,n)}function _M(e){if(e instanceof li)return new li(e.h,e.s,e.l,e.opacity);if(e instanceof Mf||(e=Wh(e)),!e)return new li;if(e instanceof li)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,u=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=u<.5?i+s:2-i-s,o*=60):l=u>0&&u<1?0:o,new li(o,l,u,e.opacity)}function aY(e,t,r,n){return arguments.length===1?_M(e):new li(e,t,r,n??1)}function li(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}H2(li,aY,SM(Mf,{brighter(e){return e=e==null?Kp:Math.pow(Kp,e),new li(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qh:Math.pow(qh,e),new li(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Za(Lw(e>=240?e-240:e+120,s,n),Lw(e,s,n),Lw(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new li(eO(this.h),sp(this.s),sp(this.l),Vp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vp(this.opacity);return`${e===1?"hsl(":"hsla("}${eO(this.h)}, ${sp(this.s)*100}%, ${sp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function eO(e){return e=(e||0)%360,e<0?e+360:e}function sp(e){return Math.max(0,Math.min(1,e||0))}function Lw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const q2=e=>()=>e;function sY(e,t){return function(r){return e+r*t}}function iY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function oY(e){return(e=+e)==1?EM:function(t,r){return r-t?iY(t,r,e):q2(isNaN(t)?r:t)}}function EM(e,t){var r=t-e;return r?sY(e,r):q2(isNaN(e)?t:e)}const tO=(function e(t){var r=oY(t);function n(s,i){var o=r((s=Bj(s)).r,(i=Bj(i)).r),l=r(s.g,i.g),u=r(s.b,i.b),d=EM(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=u(f),s.opacity=d(f),s+""}}return n.gamma=e,n})(1);function lY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function cY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uY(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Qu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function dY(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Gp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function hY(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Qu(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var Uj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bw=new RegExp(Uj.source,"g");function fY(e){return function(){return e}}function pY(e){return function(t){return e(t)+""}}function mY(e,t){var r=Uj.lastIndex=Bw.lastIndex=0,n,s,i,o=-1,l=[],u=[];for(e=e+"",t=t+"";(n=Uj.exec(e))&&(s=Bw.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:Gp(n,s)})),r=Bw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?pY(u[0].x):fY(t):(t=u.length,function(d){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function Qu(e,t){var r=typeof t,n;return t==null||r==="boolean"?q2(t):(r==="number"?Gp:r==="string"?(n=Wh(t))?(t=n,tO):mY:t instanceof Wh?tO:t instanceof Date?dY:cY(t)?lY:Array.isArray(t)?uY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hY:Gp)(e,t)}function z2(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function gY(e,t){t===void 0&&(t=e,e=Qu);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function xY(e){return function(){return e}}function Yp(e){return+e}var rO=[0,1];function Ua(e){return e}function Hj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:xY(isNaN(t)?NaN:.5)}function yY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function vY(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Hj(s,n),i=r(o,i)):(n=Hj(n,s),i=r(i,o)),function(l){return i(n(l))}}function bY(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Hj(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var u=Df(e,l,1,n)-1;return i[u](s[u](l))}}function Rf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xg(){var e=rO,t=rO,r=Qu,n,s,i,o=Ua,l,u,d;function f(){var m=Math.min(e.length,t.length);return o!==Ua&&(o=yY(e[0],e[m-1])),l=m>2?bY:vY,u=d=null,p}function p(m){return m==null||isNaN(m=+m)?i:(u||(u=l(e.map(n),t,r)))(n(o(m)))}return p.invert=function(m){return o(s((d||(d=l(t,e.map(n),Gp)))(m)))},p.domain=function(m){return arguments.length?(e=Array.from(m,Yp),f()):e.slice()},p.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},p.rangeRound=function(m){return t=Array.from(m),r=z2,f()},p.clamp=function(m){return arguments.length?(o=m?!0:Ua,f()):o!==Ua},p.interpolate=function(m){return arguments.length?(r=m,f()):r},p.unknown=function(m){return arguments.length?(i=m,p):i},function(m,x){return n=m,s=x,f()}}function W2(){return xg()(Ua,Ua)}function wY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ju(e){return e=Xp(Math.abs(e)),e?e[1]:NaN}function jY(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],u=0;s>0&&l>0&&(u+l+1>n&&(l=Math.max(1,n-u)),i.push(r.substring(s-=l,s+l)),!((u+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function NY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kh(e){if(!(t=kY.exec(e)))throw new Error("invalid format: "+e);var t;return new K2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kh.prototype=K2.prototype;function K2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}K2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SY(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var AM;function _Y(e,t){var r=Xp(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(AM=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Xp(e,Math.max(0,t+i-1))[0]}function nO(e,t){var r=Xp(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const aO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>nO(e*100,t),r:nO,s:_Y,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sO(e){return e}var iO=Array.prototype.map,oO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function EY(e){var t=e.grouping===void 0||e.thousands===void 0?sO:jY(iO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?sO:NY(iO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=Kh(p);var m=p.fill,x=p.align,v=p.sign,y=p.symbol,b=p.zero,k=p.width,N=p.comma,w=p.precision,T=p.trim,E=p.type;E==="n"?(N=!0,E="g"):aO[E]||(w===void 0&&(w=12),T=!0,E="g"),(b||m==="0"&&x==="=")&&(b=!0,m="0",x="=");var S=y==="$"?r:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",_=y==="$"?n:/[%p]/.test(E)?o:"",A=aO[E],P=/[defgprs%]/.test(E);w=w===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function B(I){var O=S,L=_,X,U,V;if(E==="c")L=A(I)+L,I="";else{I=+I;var ne=I<0||1/I<0;if(I=isNaN(I)?u:A(Math.abs(I),w),T&&(I=SY(I)),ne&&+I==0&&v!=="+"&&(ne=!1),O=(ne?v==="("?v:l:v==="-"||v==="("?"":v)+O,L=(E==="s"?oO[8+AM/3]:"")+L+(ne&&v==="("?")":""),P){for(X=-1,U=I.length;++X<U;)if(V=I.charCodeAt(X),48>V||V>57){L=(V===46?s+I.slice(X+1):I.slice(X))+L,I=I.slice(0,X);break}}}N&&!b&&(I=t(I,1/0));var ee=O.length+I.length+L.length,R=ee<k?new Array(k-ee+1).join(m):"";switch(N&&b&&(I=t(R+I,R.length?k-L.length:1/0),R=""),x){case"<":I=O+I+L+R;break;case"=":I=O+R+I+L;break;case"^":I=R.slice(0,ee=R.length>>1)+O+I+L+R.slice(ee);break;default:I=R+O+I+L;break}return i(I)}return B.toString=function(){return p+""},B}function f(p,m){var x=d((p=Kh(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(ju(m)/3)))*3,y=Math.pow(10,-v),b=oO[8+v/3];return function(k){return x(y*k)+b}}return{format:d,formatPrefix:f}}var ip,V2,TM;AY({thousands:",",grouping:[3],currency:["$",""]});function AY(e){return ip=EY(e),V2=ip.format,TM=ip.formatPrefix,ip}function TY(e){return Math.max(0,-ju(Math.abs(e)))}function CY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ju(t)/3)))*3-ju(Math.abs(e)))}function OY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ju(t)-ju(e))+1}function CM(e,t,r,n){var s=$j(e,t,r),i;switch(n=Kh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=CY(s,o))&&(n.precision=i),TM(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=OY(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=TY(s))&&(n.precision=i-(n.type==="%")*2);break}}return V2(n)}function ll(e){var t=e.domain;return e.ticks=function(r){var n=t();return Rj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return CM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],u,d,f=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=Fj(o,l,r),d===u)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function Jp(){var e=W2();return e.copy=function(){return Rf(e,Jp())},Hs.apply(e,arguments),ll(e)}function OM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Yp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return OM(e).unknown(t)},e=arguments.length?Array.from(e,Yp):[0,1],ll(r)}function PM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function lO(e){return Math.log(e)}function cO(e){return Math.exp(e)}function PY(e){return-Math.log(-e)}function IY(e){return-Math.exp(-e)}function DY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function MY(e){return e===10?DY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function RY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uO(e){return(t,r)=>-e(-t,r)}function G2(e){const t=e(lO,cO),r=t.domain;let n=10,s,i;function o(){return s=RY(n),i=MY(n),r()[0]<0?(s=uO(s),i=uO(i),e(PY,IY)):e(lO,cO),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const u=r();let d=u[0],f=u[u.length-1];const p=f<d;p&&([d,f]=[f,d]);let m=s(d),x=s(f),v,y;const b=l==null?10:+l;let k=[];if(!(n%1)&&x-m<b){if(m=Math.floor(m),x=Math.ceil(x),d>0){for(;m<=x;++m)for(v=1;v<n;++v)if(y=m<0?v/i(-m):v*i(m),!(y<d)){if(y>f)break;k.push(y)}}else for(;m<=x;++m)for(v=n-1;v>=1;--v)if(y=m>0?v/i(-m):v*i(m),!(y<d)){if(y>f)break;k.push(y)}k.length*2<b&&(k=Rj(d,f,b))}else k=Rj(m,x,Math.min(x-m,b)).map(i);return p?k.reverse():k},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=Kh(u)).precision==null&&(u.trim=!0),u=V2(u)),l===1/0)return u;const d=Math.max(1,n*l/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=d?u(f):""}},t.nice=()=>r(PM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function IM(){const e=G2(xg()).domain([1,10]);return e.copy=()=>Rf(e,IM()).base(e.base()),Hs.apply(e,arguments),e}function dO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Y2(e){var t=1,r=e(dO(t),hO(t));return r.constant=function(n){return arguments.length?e(dO(t=+n),hO(t)):t},ll(r)}function DM(){var e=Y2(xg());return e.copy=function(){return Rf(e,DM()).constant(e.constant())},Hs.apply(e,arguments)}function fO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function FY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $Y(e){return e<0?-e*e:e*e}function X2(e){var t=e(Ua,Ua),r=1;function n(){return r===1?e(Ua,Ua):r===.5?e(FY,$Y):e(fO(r),fO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ll(t)}function J2(){var e=X2(xg());return e.copy=function(){return Rf(e,J2()).exponent(e.exponent())},Hs.apply(e,arguments),e}function LY(){return J2.apply(null,arguments).exponent(.5)}function pO(e){return Math.sign(e)*e*e}function BY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function MM(){var e=W2(),t=[0,1],r=!1,n;function s(i){var o=BY(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(pO(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Yp)).map(pO)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return MM(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Hs.apply(s,arguments),ll(s)}function RM(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=WG(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Df(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(tl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return RM().domain(e).range(t).unknown(n)},Hs.apply(i,arguments)}function FM(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(u){return u!=null&&u<=u?s[Df(n,u,0,r)]:i}function l(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*t-(u-r)*e)/(r+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(r=(s=Array.from(u)).length-1,l()):s.slice()},o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return FM().domain([e,t]).range(s).unknown(i)},Hs.apply(ll(o),arguments)}function $M(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Df(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return $M().domain(e).range(t).unknown(r)},Hs.apply(s,arguments)}const Uw=new Date,Hw=new Date;function Vn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const u=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let d;do u.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return u},s.filter=i=>Vn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Uw.setTime(+i),Hw.setTime(+o),e(Uw),e(Hw),Math.floor(r(Uw,Hw))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Qp=Vn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Qp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Qp);Qp.range;const so=1e3,Ls=so*60,io=Ls*60,mo=io*24,Q2=mo*7,mO=mo*30,qw=mo*365,Bl=Vn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*so)},(e,t)=>(t-e)/so,e=>e.getUTCSeconds());Bl.range;const Z2=Vn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so)},(e,t)=>{e.setTime(+e+t*Ls)},(e,t)=>(t-e)/Ls,e=>e.getMinutes());Z2.range;const ek=Vn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ls)},(e,t)=>(t-e)/Ls,e=>e.getUTCMinutes());ek.range;const tk=Vn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so-e.getMinutes()*Ls)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getHours());tk.range;const rk=Vn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getUTCHours());rk.range;const Ff=Vn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ls)/mo,e=>e.getDate()-1);Ff.range;const yg=Vn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mo,e=>e.getUTCDate()-1);yg.range;const LM=Vn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mo,e=>Math.floor(e/mo));LM.range;function lc(e){return Vn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ls)/Q2)}const vg=lc(0),Zp=lc(1),UY=lc(2),HY=lc(3),Nu=lc(4),qY=lc(5),zY=lc(6);vg.range;Zp.range;UY.range;HY.range;Nu.range;qY.range;zY.range;function cc(e){return Vn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Q2)}const bg=cc(0),em=cc(1),WY=cc(2),KY=cc(3),ku=cc(4),VY=cc(5),GY=cc(6);bg.range;em.range;WY.range;KY.range;ku.range;VY.range;GY.range;const nk=Vn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());nk.range;const ak=Vn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ak.range;const go=Vn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());go.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});go.range;const xo=Vn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xo.range;function BM(e,t,r,n,s,i){const o=[[Bl,1,so],[Bl,5,5*so],[Bl,15,15*so],[Bl,30,30*so],[i,1,Ls],[i,5,5*Ls],[i,15,15*Ls],[i,30,30*Ls],[s,1,io],[s,3,3*io],[s,6,6*io],[s,12,12*io],[n,1,mo],[n,2,2*mo],[r,1,Q2],[t,1,mO],[t,3,3*mO],[e,1,qw]];function l(d,f,p){const m=f<d;m&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:u(d,f,p),v=x?x.range(d,+f+1):[];return m?v.reverse():v}function u(d,f,p){const m=Math.abs(f-d)/p,x=B2(([,,b])=>b).right(o,m);if(x===o.length)return e.every($j(d/qw,f/qw,p));if(x===0)return Qp.every(Math.max($j(d,f,p),1));const[v,y]=o[m/o[x-1][2]<o[x][2]/m?x-1:x];return v.every(y)}return[l,u]}const[YY,XY]=BM(xo,ak,bg,LM,rk,ek),[JY,QY]=BM(go,nk,vg,Ff,tk,Z2);function zw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ww(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ZY(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=qd(s),f=zd(s),p=qd(i),m=zd(i),x=qd(o),v=zd(o),y=qd(l),b=zd(l),k=qd(u),N=zd(u),w={a:ne,A:ee,b:R,B:se,c:null,d:wO,e:wO,f:jX,g:PX,G:DX,H:vX,I:bX,j:wX,L:UM,m:NX,M:kX,p:z,q:M,Q:kO,s:SO,S:SX,u:_X,U:EX,V:AX,w:TX,W:CX,x:null,X:null,y:OX,Y:IX,Z:MX,"%":NO},T={a:J,A:te,b:ie,B:me,c:null,d:jO,e:jO,f:LX,g:YX,G:JX,H:RX,I:FX,j:$X,L:qM,m:BX,M:UX,p:ve,q:ye,Q:kO,s:SO,S:HX,u:qX,U:zX,V:WX,w:KX,W:VX,x:null,X:null,y:GX,Y:XX,Z:QX,"%":NO},E={a:B,A:I,b:O,B:L,c:X,d:vO,e:vO,f:mX,g:yO,G:xO,H:bO,I:bO,j:dX,L:pX,m:uX,M:hX,p:P,q:cX,Q:xX,s:yX,S:fX,u:aX,U:sX,V:iX,w:nX,W:oX,x:U,X:V,y:yO,Y:xO,Z:lX,"%":gX};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),T.x=S(r,T),T.X=S(n,T),T.c=S(t,T);function S(he,pe){return function(De){var q=[],Ae=-1,Be=0,xt=he.length,le,Ee,Ce;for(De instanceof Date||(De=new Date(+De));++Ae<xt;)he.charCodeAt(Ae)===37&&(q.push(he.slice(Be,Ae)),(Ee=gO[le=he.charAt(++Ae)])!=null?le=he.charAt(++Ae):Ee=le==="e"?" ":"0",(Ce=pe[le])&&(le=Ce(De,Ee)),q.push(le),Be=Ae+1);return q.push(he.slice(Be,Ae)),q.join("")}}function _(he,pe){return function(De){var q=Hd(1900,void 0,1),Ae=A(q,he,De+="",0),Be,xt;if(Ae!=De.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(pe&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(Be=Ww(Hd(q.y,0,1)),xt=Be.getUTCDay(),Be=xt>4||xt===0?em.ceil(Be):em(Be),Be=yg.offset(Be,(q.V-1)*7),q.y=Be.getUTCFullYear(),q.m=Be.getUTCMonth(),q.d=Be.getUTCDate()+(q.w+6)%7):(Be=zw(Hd(q.y,0,1)),xt=Be.getDay(),Be=xt>4||xt===0?Zp.ceil(Be):Zp(Be),Be=Ff.offset(Be,(q.V-1)*7),q.y=Be.getFullYear(),q.m=Be.getMonth(),q.d=Be.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),xt="Z"in q?Ww(Hd(q.y,0,1)).getUTCDay():zw(Hd(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(xt+5)%7:q.w+q.U*7-(xt+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,Ww(q)):zw(q)}}function A(he,pe,De,q){for(var Ae=0,Be=pe.length,xt=De.length,le,Ee;Ae<Be;){if(q>=xt)return-1;if(le=pe.charCodeAt(Ae++),le===37){if(le=pe.charAt(Ae++),Ee=E[le in gO?pe.charAt(Ae++):le],!Ee||(q=Ee(he,De,q))<0)return-1}else if(le!=De.charCodeAt(q++))return-1}return q}function P(he,pe,De){var q=d.exec(pe.slice(De));return q?(he.p=f.get(q[0].toLowerCase()),De+q[0].length):-1}function B(he,pe,De){var q=x.exec(pe.slice(De));return q?(he.w=v.get(q[0].toLowerCase()),De+q[0].length):-1}function I(he,pe,De){var q=p.exec(pe.slice(De));return q?(he.w=m.get(q[0].toLowerCase()),De+q[0].length):-1}function O(he,pe,De){var q=k.exec(pe.slice(De));return q?(he.m=N.get(q[0].toLowerCase()),De+q[0].length):-1}function L(he,pe,De){var q=y.exec(pe.slice(De));return q?(he.m=b.get(q[0].toLowerCase()),De+q[0].length):-1}function X(he,pe,De){return A(he,t,pe,De)}function U(he,pe,De){return A(he,r,pe,De)}function V(he,pe,De){return A(he,n,pe,De)}function ne(he){return o[he.getDay()]}function ee(he){return i[he.getDay()]}function R(he){return u[he.getMonth()]}function se(he){return l[he.getMonth()]}function z(he){return s[+(he.getHours()>=12)]}function M(he){return 1+~~(he.getMonth()/3)}function J(he){return o[he.getUTCDay()]}function te(he){return i[he.getUTCDay()]}function ie(he){return u[he.getUTCMonth()]}function me(he){return l[he.getUTCMonth()]}function ve(he){return s[+(he.getUTCHours()>=12)]}function ye(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var pe=S(he+="",w);return pe.toString=function(){return he},pe},parse:function(he){var pe=_(he+="",!1);return pe.toString=function(){return he},pe},utcFormat:function(he){var pe=S(he+="",T);return pe.toString=function(){return he},pe},utcParse:function(he){var pe=_(he+="",!0);return pe.toString=function(){return he},pe}}}var gO={"-":"",_:" ",0:"0"},sa=/^\s*\d+/,eX=/^%/,tX=/[\\^$*+?|[\]().{}]/g;function Tr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function rX(e){return e.replace(tX,"\\$&")}function qd(e){return new RegExp("^(?:"+e.map(rX).join("|")+")","i")}function zd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function nX(e,t,r){var n=sa.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aX(e,t,r){var n=sa.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function sX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function iX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function oX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function xO(e,t,r){var n=sa.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function yO(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function lX(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cX(e,t,r){var n=sa.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function uX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vO(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function dX(e,t,r){var n=sa.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function bO(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fX(e,t,r){var n=sa.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pX(e,t,r){var n=sa.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mX(e,t,r){var n=sa.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gX(e,t,r){var n=eX.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xX(e,t,r){var n=sa.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function yX(e,t,r){var n=sa.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function wO(e,t){return Tr(e.getDate(),t,2)}function vX(e,t){return Tr(e.getHours(),t,2)}function bX(e,t){return Tr(e.getHours()%12||12,t,2)}function wX(e,t){return Tr(1+Ff.count(go(e),e),t,3)}function UM(e,t){return Tr(e.getMilliseconds(),t,3)}function jX(e,t){return UM(e,t)+"000"}function NX(e,t){return Tr(e.getMonth()+1,t,2)}function kX(e,t){return Tr(e.getMinutes(),t,2)}function SX(e,t){return Tr(e.getSeconds(),t,2)}function _X(e){var t=e.getDay();return t===0?7:t}function EX(e,t){return Tr(vg.count(go(e)-1,e),t,2)}function HM(e){var t=e.getDay();return t>=4||t===0?Nu(e):Nu.ceil(e)}function AX(e,t){return e=HM(e),Tr(Nu.count(go(e),e)+(go(e).getDay()===4),t,2)}function TX(e){return e.getDay()}function CX(e,t){return Tr(Zp.count(go(e)-1,e),t,2)}function OX(e,t){return Tr(e.getFullYear()%100,t,2)}function PX(e,t){return e=HM(e),Tr(e.getFullYear()%100,t,2)}function IX(e,t){return Tr(e.getFullYear()%1e4,t,4)}function DX(e,t){var r=e.getDay();return e=r>=4||r===0?Nu(e):Nu.ceil(e),Tr(e.getFullYear()%1e4,t,4)}function MX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tr(t/60|0,"0",2)+Tr(t%60,"0",2)}function jO(e,t){return Tr(e.getUTCDate(),t,2)}function RX(e,t){return Tr(e.getUTCHours(),t,2)}function FX(e,t){return Tr(e.getUTCHours()%12||12,t,2)}function $X(e,t){return Tr(1+yg.count(xo(e),e),t,3)}function qM(e,t){return Tr(e.getUTCMilliseconds(),t,3)}function LX(e,t){return qM(e,t)+"000"}function BX(e,t){return Tr(e.getUTCMonth()+1,t,2)}function UX(e,t){return Tr(e.getUTCMinutes(),t,2)}function HX(e,t){return Tr(e.getUTCSeconds(),t,2)}function qX(e){var t=e.getUTCDay();return t===0?7:t}function zX(e,t){return Tr(bg.count(xo(e)-1,e),t,2)}function zM(e){var t=e.getUTCDay();return t>=4||t===0?ku(e):ku.ceil(e)}function WX(e,t){return e=zM(e),Tr(ku.count(xo(e),e)+(xo(e).getUTCDay()===4),t,2)}function KX(e){return e.getUTCDay()}function VX(e,t){return Tr(em.count(xo(e)-1,e),t,2)}function GX(e,t){return Tr(e.getUTCFullYear()%100,t,2)}function YX(e,t){return e=zM(e),Tr(e.getUTCFullYear()%100,t,2)}function XX(e,t){return Tr(e.getUTCFullYear()%1e4,t,4)}function JX(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ku(e):ku.ceil(e),Tr(e.getUTCFullYear()%1e4,t,4)}function QX(){return"+0000"}function NO(){return"%"}function kO(e){return+e}function SO(e){return Math.floor(+e/1e3)}var Kc,WM,KM;ZX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZX(e){return Kc=ZY(e),WM=Kc.format,Kc.parse,KM=Kc.utcFormat,Kc.utcParse,Kc}function eJ(e){return new Date(e)}function tJ(e){return e instanceof Date?+e:+new Date(+e)}function sk(e,t,r,n,s,i,o,l,u,d){var f=W2(),p=f.invert,m=f.domain,x=d(".%L"),v=d(":%S"),y=d("%I:%M"),b=d("%I %p"),k=d("%a %d"),N=d("%b %d"),w=d("%B"),T=d("%Y");function E(S){return(u(S)<S?x:l(S)<S?v:o(S)<S?y:i(S)<S?b:n(S)<S?s(S)<S?k:N:r(S)<S?w:T)(S)}return f.invert=function(S){return new Date(p(S))},f.domain=function(S){return arguments.length?m(Array.from(S,tJ)):m().map(eJ)},f.ticks=function(S){var _=m();return e(_[0],_[_.length-1],S??10)},f.tickFormat=function(S,_){return _==null?E:d(_)},f.nice=function(S){var _=m();return(!S||typeof S.range!="function")&&(S=t(_[0],_[_.length-1],S??10)),S?m(PM(_,S)):f},f.copy=function(){return Rf(f,sk(e,t,r,n,s,i,o,l,u,d))},f}function rJ(){return Hs.apply(sk(JY,QY,go,nk,vg,Ff,tk,Z2,Bl,WM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nJ(){return Hs.apply(sk(YY,XY,xo,ak,bg,yg,rk,ek,Bl,KM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wg(){var e=0,t=1,r,n,s,i,o=Ua,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(s===0?.5:(p=(i(p)-r)*s,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(m){var x,v;return arguments.length?([x,v]=m,o=p(x,v),d):[o(0),o(1)]}}return d.range=f(Qu),d.rangeRound=f(z2),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),d}}function cl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VM(){var e=ll(wg()(Ua));return e.copy=function(){return cl(e,VM())},No.apply(e,arguments)}function GM(){var e=G2(wg()).domain([1,10]);return e.copy=function(){return cl(e,GM()).base(e.base())},No.apply(e,arguments)}function YM(){var e=Y2(wg());return e.copy=function(){return cl(e,YM()).constant(e.constant())},No.apply(e,arguments)}function ik(){var e=X2(wg());return e.copy=function(){return cl(e,ik()).exponent(e.exponent())},No.apply(e,arguments)}function aJ(){return ik.apply(null,arguments).exponent(.5)}function XM(){var e=[],t=Ua;function r(n){if(n!=null&&!isNaN(n=+n))return t((Df(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(tl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>zG(e,i/n))},r.copy=function(){return XM(t).domain(e)},No.apply(r,arguments)}function jg(){var e=0,t=.5,r=1,n=1,s,i,o,l,u,d=Ua,f,p=!1,m;function x(y){return isNaN(y=+y)?m:(y=.5+((y=+f(y))-i)*(n*y<n*i?l:u),d(p?Math.max(0,Math.min(1,y)):y))}x.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(y){return arguments.length?(p=!!y,x):p},x.interpolator=function(y){return arguments.length?(d=y,x):d};function v(y){return function(b){var k,N,w;return arguments.length?([k,N,w]=b,d=gY(y,[k,N,w]),x):[d(0),d(.5),d(1)]}}return x.range=v(Qu),x.rangeRound=v(z2),x.unknown=function(y){return arguments.length?(m=y,x):m},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function JM(){var e=ll(jg()(Ua));return e.copy=function(){return cl(e,JM())},No.apply(e,arguments)}function QM(){var e=G2(jg()).domain([.1,1,10]);return e.copy=function(){return cl(e,QM()).base(e.base())},No.apply(e,arguments)}function ZM(){var e=Y2(jg());return e.copy=function(){return cl(e,ZM()).constant(e.constant())},No.apply(e,arguments)}function ok(){var e=X2(jg());return e.copy=function(){return cl(e,ok()).exponent(e.exponent())},No.apply(e,arguments)}function sJ(){return ok.apply(null,arguments).exponent(.5)}const _O=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hh,scaleDiverging:JM,scaleDivergingLog:QM,scaleDivergingPow:ok,scaleDivergingSqrt:sJ,scaleDivergingSymlog:ZM,scaleIdentity:OM,scaleImplicit:Lj,scaleLinear:Jp,scaleLog:IM,scaleOrdinal:U2,scalePoint:uh,scalePow:J2,scaleQuantile:RM,scaleQuantize:FM,scaleRadial:MM,scaleSequential:VM,scaleSequentialLog:GM,scaleSequentialPow:ik,scaleSequentialQuantile:XM,scaleSequentialSqrt:aJ,scaleSequentialSymlog:YM,scaleSqrt:LY,scaleSymlog:DM,scaleThreshold:$M,scaleTime:rJ,scaleUtc:nJ,tickFormat:CM},Symbol.toStringTag,{value:"Module"}));var Kw,EO;function Ng(){if(EO)return Kw;EO=1;var e=Gu();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],u=n(l);if(u!=null&&(d===void 0?u===u&&!e(u):s(u,d)))var d=u,f=l}return f}return Kw=t,Kw}var Vw,AO;function eR(){if(AO)return Vw;AO=1;function e(t,r){return t>r}return Vw=e,Vw}var Gw,TO;function iJ(){if(TO)return Gw;TO=1;var e=Ng(),t=eR(),r=Ju();function n(s){return s&&s.length?e(s,r,t):void 0}return Gw=n,Gw}var oJ=iJ();const kg=$r(oJ);var Yw,CO;function tR(){if(CO)return Yw;CO=1;function e(t,r){return t<r}return Yw=e,Yw}var Xw,OO;function lJ(){if(OO)return Xw;OO=1;var e=Ng(),t=tR(),r=Ju();function n(s){return s&&s.length?e(s,r,t):void 0}return Xw=n,Xw}var cJ=lJ();const Sg=$r(cJ);var Jw,PO;function uJ(){if(PO)return Jw;PO=1;var e=N2(),t=$i(),r=cM(),n=ts();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return Jw=s,Jw}var Qw,IO;function dJ(){if(IO)return Qw;IO=1;var e=oM(),t=uJ();function r(n,s){return e(t(n,s),1)}return Qw=r,Qw}var hJ=dJ();const fJ=$r(hJ);var Zw,DO;function pJ(){if(DO)return Zw;DO=1;var e=R2();function t(r,n){return e(r,n)}return Zw=t,Zw}var mJ=pJ();const Zu=$r(mJ);var ed=1e9,gJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ck,ln=!0,Bs="[DecimalError] ",zl=Bs+"Invalid argument: ",lk=Bs+"Exponent out of range: ",td=Math.floor,Pl=Math.pow,xJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ys,ta=1e7,rn=7,rR=9007199254740991,tm=td(rR/rn),St={};St.absoluteValue=St.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};St.comparedTo=St.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};St.decimalPlaces=St.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*rn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};St.dividedBy=St.div=function(e){return ho(this,new this.constructor(e))};St.dividedToIntegerBy=St.idiv=function(e){var t=this,r=t.constructor;return Kr(ho(t,new r(e),0,1),r.precision)};St.equals=St.eq=function(e){return!this.cmp(e)};St.exponent=function(){return Dn(this)};St.greaterThan=St.gt=function(e){return this.cmp(e)>0};St.greaterThanOrEqualTo=St.gte=function(e){return this.cmp(e)>=0};St.isInteger=St.isint=function(){return this.e>this.d.length-2};St.isNegative=St.isneg=function(){return this.s<0};St.isPositive=St.ispos=function(){return this.s>0};St.isZero=function(){return this.s===0};St.lessThan=St.lt=function(e){return this.cmp(e)<0};St.lessThanOrEqualTo=St.lte=function(e){return this.cmp(e)<1};St.logarithm=St.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ys))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(ys)?new n(0):(ln=!1,t=ho(Vh(r,i),Vh(e,i),i),ln=!0,Kr(t,s))};St.minus=St.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sR(t,e):nR(t,(e.s=-e.s,e))};St.modulo=St.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Bs+"NaN");return r.s?(ln=!1,t=ho(r,e,0,1).times(e),ln=!0,r.minus(t)):Kr(new n(r),s)};St.naturalExponential=St.exp=function(){return aR(this)};St.naturalLogarithm=St.ln=function(){return Vh(this)};St.negated=St.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};St.plus=St.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?nR(t,e):sR(t,(e.s=-e.s,e))};St.precision=St.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zl+e);if(t=Dn(s)+1,n=s.d.length-1,r=n*rn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};St.squareRoot=St.sqrt=function(){var e,t,r,n,s,i,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(Bs+"NaN")}for(e=Dn(l),ln=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ci(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=td((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new u(t)):n=new u(s.toString()),r=u.precision,s=o=r+3;;)if(i=n,n=i.plus(ho(l,i,o+2)).times(.5),Ci(i.d).slice(0,o)===(t=Ci(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Kr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return ln=!0,Kr(n,r)};St.times=St.mul=function(e){var t,r,n,s,i,o,l,u,d,f=this,p=f.constructor,m=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,u=m.length,d=x.length,u<d&&(i=m,m=x,x=i,o=u,u=d,d=o),i=[],o=u+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=u+n;s>n;)l=i[s]+x[n]*m[s-n-1]+t,i[s--]=l%ta|0,t=l/ta|0;i[s]=(i[s]+t)%ta|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ln?Kr(e,p.precision):e};St.toDecimalPlaces=St.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Mi(e,0,ed),t===void 0?t=n.rounding:Mi(t,0,8),Kr(r,e+Dn(r)+1,t))};St.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ec(n,!0):(Mi(e,0,ed),t===void 0?t=s.rounding:Mi(t,0,8),n=Kr(new s(n),e+1,t),r=ec(n,!0,e+1)),r};St.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ec(s):(Mi(e,0,ed),t===void 0?t=i.rounding:Mi(t,0,8),n=Kr(new i(s),e+Dn(s)+1,t),r=ec(n.abs(),!1,e+Dn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};St.toInteger=St.toint=function(){var e=this,t=e.constructor;return Kr(new t(e),Dn(e)+1,t.rounding)};St.toNumber=function(){return+this};St.toPower=St.pow=function(e){var t,r,n,s,i,o,l=this,u=l.constructor,d=12,f=+(e=new u(e));if(!e.s)return new u(ys);if(l=new u(l),!l.s){if(e.s<1)throw Error(Bs+"Infinity");return l}if(l.eq(ys))return l;if(n=u.precision,e.eq(ys))return Kr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=rR){for(s=new u(ys),t=Math.ceil(n/rn+4),ln=!1;r%2&&(s=s.times(l),RO(s.d,t)),r=td(r/2),r!==0;)l=l.times(l),RO(l.d,t);return ln=!0,e.s<0?new u(ys).div(s):Kr(s,n)}}else if(i<0)throw Error(Bs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ln=!1,s=e.times(Vh(l,n+d)),ln=!0,s=aR(s),s.s=i,s};St.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Dn(s),n=ec(s,r<=i.toExpNeg||r>=i.toExpPos)):(Mi(e,1,ed),t===void 0?t=i.rounding:Mi(t,0,8),s=Kr(new i(s),e,t),r=Dn(s),n=ec(s,e<=r||r<=i.toExpNeg,e)),n};St.toSignificantDigits=St.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Mi(e,1,ed),t===void 0?t=n.rounding:Mi(t,0,8)),Kr(new n(r),e,t)};St.toString=St.valueOf=St.val=St.toJSON=St[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Dn(e),r=e.constructor;return ec(e,t<=r.toExpNeg||t>=r.toExpPos)};function nR(e,t){var r,n,s,i,o,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),ln?Kr(t,p):t;if(u=e.d,d=t.d,o=e.e,s=t.e,u=u.slice(),i=o-s,i){for(i<0?(n=u,i=-i,l=d.length):(n=d,s=o,l=u.length),o=Math.ceil(p/rn),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=u.length,i=d.length,l-i<0&&(i=l,n=d,d=u,u=n),r=0;i;)r=(u[--i]=u[i]+d[i]+r)/ta|0,u[i]%=ta;for(r&&(u.unshift(r),++s),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=s,ln?Kr(t,p):t}function Mi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zl+e)}function Ci(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=rn-n.length,r&&(i+=zo(r)),i+=n;o=e[t],n=o+"",r=rn-n.length,r&&(i+=zo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ho=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%ta|0,o=i/ta|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,u;if(i!=o)u=i>o?1:-1;else for(l=u=0;l<i;l++)if(n[l]!=s[l]){u=n[l]>s[l]?1:-1;break}return u}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*ta+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,u,d,f,p,m,x,v,y,b,k,N,w,T,E,S,_,A,P=n.constructor,B=n.s==s.s?1:-1,I=n.d,O=s.d;if(!n.s)return new P(n);if(!s.s)throw Error(Bs+"Division by zero");for(u=n.e-s.e,_=O.length,E=I.length,x=new P(B),v=x.d=[],d=0;O[d]==(I[d]||0);)++d;if(O[d]>(I[d]||0)&&--u,i==null?N=i=P.precision:o?N=i+(Dn(n)-Dn(s))+1:N=i,N<0)return new P(0);if(N=N/rn+2|0,d=0,_==1)for(f=0,O=O[0],N++;(d<E||f)&&N--;d++)w=f*ta+(I[d]||0),v[d]=w/O|0,f=w%O|0;else{for(f=ta/(O[0]+1)|0,f>1&&(O=e(O,f),I=e(I,f),_=O.length,E=I.length),T=_,y=I.slice(0,_),b=y.length;b<_;)y[b++]=0;A=O.slice(),A.unshift(0),S=O[0],O[1]>=ta/2&&++S;do f=0,l=t(O,y,_,b),l<0?(k=y[0],_!=b&&(k=k*ta+(y[1]||0)),f=k/S|0,f>1?(f>=ta&&(f=ta-1),p=e(O,f),m=p.length,b=y.length,l=t(p,y,m,b),l==1&&(f--,r(p,_<m?A:O,m))):(f==0&&(l=f=1),p=O.slice()),m=p.length,m<b&&p.unshift(0),r(y,p,b),l==-1&&(b=y.length,l=t(O,y,_,b),l<1&&(f++,r(y,_<b?A:O,b))),b=y.length):l===0&&(f++,y=[0]),v[d++]=f,l&&y[0]?y[b++]=I[T]||0:(y=[I[T]],b=1);while((T++<E||y[0]!==void 0)&&N--)}return v[0]||v.shift(),x.e=u,Kr(x,o?i+Dn(x)+1:i)}})();function aR(e,t){var r,n,s,i,o,l,u=0,d=0,f=e.constructor,p=f.precision;if(Dn(e)>16)throw Error(lk+Dn(e));if(!e.s)return new f(ys);for(ln=!1,l=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Pl(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new f(ys),f.precision=l;;){if(s=Kr(s.times(e),l),r=r.times(++u),o=i.plus(ho(s,r,l)),Ci(o.d).slice(0,l)===Ci(i.d).slice(0,l)){for(;d--;)i=Kr(i.times(i),l);return f.precision=p,t==null?(ln=!0,Kr(i,p)):i}i=o}}function Dn(e){for(var t=e.e*rn,r=e.d[0];r>=10;r/=10)t++;return t}function e1(e,t,r){if(t>e.LN10.sd())throw ln=!0,r&&(e.precision=r),Error(Bs+"LN10 precision limit exceeded");return Kr(new e(e.LN10),t)}function zo(e){for(var t="";e--;)t+="0";return t}function Vh(e,t){var r,n,s,i,o,l,u,d,f,p=1,m=10,x=e,v=x.d,y=x.constructor,b=y.precision;if(x.s<1)throw Error(Bs+(x.s?"NaN":"-Infinity"));if(x.eq(ys))return new y(0);if(t==null?(ln=!1,d=b):d=t,x.eq(10))return t==null&&(ln=!0),e1(y,d);if(d+=m,y.precision=d,r=Ci(v),n=r.charAt(0),i=Dn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Ci(x.d),n=r.charAt(0),p++;i=Dn(x),n>1?(x=new y("0."+r),i++):x=new y(n+"."+r.slice(1))}else return u=e1(y,d+2,b).times(i+""),x=Vh(new y(n+"."+r.slice(1)),d-m).plus(u),y.precision=b,t==null?(ln=!0,Kr(x,b)):x;for(l=o=x=ho(x.minus(ys),x.plus(ys),d),f=Kr(x.times(x),d),s=3;;){if(o=Kr(o.times(f),d),u=l.plus(ho(o,new y(s),d)),Ci(u.d).slice(0,d)===Ci(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(e1(y,d+2,b).times(i+""))),l=ho(l,new y(p),d),y.precision=b,t==null?(ln=!0,Kr(l,b)):l;l=u,s+=2}}function MO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=td(r/rn),e.d=[],n=(r+1)%rn,r<0&&(n+=rn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=rn;n<s;)e.d.push(+t.slice(n,n+=rn));t=t.slice(n),n=rn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),ln&&(e.e>tm||e.e<-tm))throw Error(lk+r)}else e.s=0,e.e=0,e.d=[0];return e}function Kr(e,t,r){var n,s,i,o,l,u,d,f,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=rn,s=t,d=p[f=0];else{if(f=Math.ceil((n+1)/rn),i=p.length,f>=i)return e;for(d=i=p[f],o=1;i>=10;i/=10)o++;n%=rn,s=n-rn+o}if(r!==void 0&&(i=Pl(10,o-s-1),l=d/i%10|0,u=t<0||p[f+1]!==void 0||d%i,u=r<4?(l||u)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||u||r==6&&(n>0?s>0?d/Pl(10,o-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return u?(i=Dn(e),p.length=1,t=t-i-1,p[0]=Pl(10,(rn-t%rn)%rn),e.e=td(-t/rn)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=Pl(10,rn-n),p[f]=s>0?(d/Pl(10,o-s)%Pl(10,s)|0)*i:0),u)for(;;)if(f==0){(p[0]+=i)==ta&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=ta)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(ln&&(e.e>tm||e.e<-tm))throw Error(lk+Dn(e));return e}function sR(e,t){var r,n,s,i,o,l,u,d,f,p,m=e.constructor,x=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),ln?Kr(t,x):t;if(u=e.d,p=t.d,n=t.e,d=e.e,u=u.slice(),o=d-n,o){for(f=o<0,f?(r=u,o=-o,l=p.length):(r=p,n=d,l=u.length),s=Math.max(Math.ceil(x/rn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=u.length,l=p.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(u[s]!=p[s]){f=u[s]<p[s];break}o=0}for(f&&(r=u,u=p,p=r,t.s=-t.s),l=u.length,s=p.length-l;s>0;--s)u[l++]=0;for(s=p.length;s>o;){if(u[--s]<p[s]){for(i=s;i&&u[--i]===0;)u[i]=ta-1;--u[i],u[s]+=ta}u[s]-=p[s]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=n,ln?Kr(t,x):t):new m(0)}function ec(e,t,r){var n,s=Dn(e),i=Ci(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+zo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+zo(-s-1)+i,r&&(n=r-o)>0&&(i+=zo(n))):s>=o?(i+=zo(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+zo(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=zo(n))),e.s<0?"-"+i:i}function RO(e,t){if(e.length>t)return e.length=t,!0}function iR(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(zl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return MO(o,i.toString())}else if(typeof i!="string")throw Error(zl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,xJ.test(i))MO(o,i);else throw Error(zl+i)}if(s.prototype=St,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=iR,s.config=s.set=yJ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function yJ(e){if(!e||typeof e!="object")throw Error(Bs+"Object expected");var t,r,n,s=["precision",1,ed,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(td(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(zl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(zl+r+": "+n);return this}var ck=iR(gJ);ys=new ck(1);const Ur=ck;function vJ(e){return NJ(e)||jJ(e)||wJ(e)||bJ()}function bJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wJ(e,t){if(e){if(typeof e=="string")return qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(e,t)}}function jJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function NJ(e){if(Array.isArray(e))return qj(e)}function qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kJ=function(t){return t},oR={},lR=function(t){return t===oR},FO=function(t){return function r(){return arguments.length===0||arguments.length===1&&lR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},SJ=function e(t,r){return t===1?r:FO(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==oR}).length;return o>=t?r.apply(void 0,s):e(t-o,FO(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=s.map(function(p){return lR(p)?u.shift():p});return r.apply(void 0,vJ(f).concat(u))}))})},_g=function(t){return SJ(t.length,t)},zj=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},_J=_g(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),EJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return kJ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,u){return u(l)},i.apply(void 0,arguments))}},Wj=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},cR=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,u){return l===r[u]})||(r=i,n=t.apply(void 0,i)),n}};function AJ(e){var t;return e===0?t=1:t=Math.floor(new Ur(e).abs().log(10).toNumber())+1,t}function TJ(e,t,r){for(var n=new Ur(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var CJ=_g(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),OJ=_g(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),PJ=_g(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Eg={rangeStep:TJ,getDigitCount:AJ,interpolateNumber:CJ,uninterpolateNumber:OJ,uninterpolateTruncation:PJ};function Kj(e){return MJ(e)||DJ(e)||uR(e)||IJ()}function IJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function MJ(e){if(Array.isArray(e))return Vj(e)}function Gh(e,t){return $J(e)||FJ(e,t)||uR(e,t)||RJ()}function RJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uR(e,t){if(e){if(typeof e=="string")return Vj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(e,t)}}function Vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FJ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(u){s=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function $J(e){if(Array.isArray(e))return e}function dR(e){var t=Gh(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function hR(e,t,r){if(e.lte(0))return new Ur(0);var n=Eg.getDigitCount(e.toNumber()),s=new Ur(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ur(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=l.mul(s);return t?u:new Ur(Math.ceil(u))}function LJ(e,t,r){var n=1,s=new Ur(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ur(10).pow(Eg.getDigitCount(e)-1),s=new Ur(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ur(Math.floor(e)))}else e===0?s=new Ur(Math.floor((t-1)/2)):r||(s=new Ur(Math.floor(e)));var o=Math.floor((t-1)/2),l=EJ(_J(function(u){return s.add(new Ur(u-o).mul(n)).toNumber()}),zj);return l(0,t)}function fR(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ur(0),tickMin:new Ur(0),tickMax:new Ur(0)};var i=hR(new Ur(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new Ur(0):(o=new Ur(e).add(t).div(2),o=o.sub(new Ur(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),u=Math.ceil(new Ur(t).sub(o).div(i).toNumber()),d=l+u+1;return d>r?fR(e,t,r,n,s+1):(d<r&&(u=t>0?u+(r-d):u,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Ur(l).mul(i)),tickMax:o.add(new Ur(u).mul(i))})}function BJ(e){var t=Gh(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=dR([r,n]),u=Gh(l,2),d=u[0],f=u[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(Kj(zj(0,s-1).map(function(){return 1/0}))):[].concat(Kj(zj(0,s-1).map(function(){return-1/0})),[f]);return r>n?Wj(p):p}if(d===f)return LJ(d,s,i);var m=fR(d,f,o,i),x=m.step,v=m.tickMin,y=m.tickMax,b=Eg.rangeStep(v,y.add(new Ur(.1).mul(x)),x);return r>n?Wj(b):b}function UJ(e,t){var r=Gh(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=dR([n,s]),l=Gh(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0)return[n,s];if(u===d)return[u];var f=Math.max(t,2),p=hR(new Ur(d).sub(u).div(f-1),i,0),m=[].concat(Kj(Eg.rangeStep(new Ur(u),new Ur(d).sub(new Ur(.99).mul(p)),p)),[d]);return n>s?Wj(m):m}var HJ=cR(BJ),qJ=cR(UJ),zJ="Invariant failed";function tc(e,t){throw new Error(zJ)}var WJ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function rm(){return rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rm.apply(this,arguments)}function KJ(e,t){return XJ(e)||YJ(e,t)||GJ(e,t)||VJ()}function VJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(e,t){if(e){if(typeof e=="string")return $O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $O(e,t)}}function $O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function XJ(e){if(Array.isArray(e))return e}function JJ(e,t){if(e==null)return{};var r=QJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ZJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gR(n.key),n)}}function tQ(e,t,r){return t&&eQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rQ(e,t,r){return t=nm(t),nQ(e,pR()?Reflect.construct(t,r||[],nm(e).constructor):t.apply(e,r))}function nQ(e,t){if(t&&(Su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aQ(e)}function aQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pR=function(){return!!e})()}function nm(e){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nm(e)}function sQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gj(e,t)}function mR(e,t,r){return t=gR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gR(e){var t=iQ(e,"string");return Su(t)=="symbol"?t:t+""}function iQ(e,t){if(Su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $f=(function(e){function t(){return ZJ(this,t),rQ(this,t,arguments)}return sQ(t,e),tQ(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,u=n.data,d=n.dataPointFormatter,f=n.xAxis,p=n.yAxis,m=JJ(n,WJ),x=Lt(m,!1);this.props.direction==="x"&&f.type!=="number"&&tc();var v=u.map(function(y){var b=d(y,l),k=b.x,N=b.y,w=b.value,T=b.errorVal;if(!T)return null;var E=[],S,_;if(Array.isArray(T)){var A=KJ(T,2);S=A[0],_=A[1]}else S=_=T;if(i==="vertical"){var P=f.scale,B=N+s,I=B+o,O=B-o,L=P(w-S),X=P(w+_);E.push({x1:X,y1:I,x2:X,y2:O}),E.push({x1:L,y1:B,x2:X,y2:B}),E.push({x1:L,y1:I,x2:L,y2:O})}else if(i==="horizontal"){var U=p.scale,V=k+s,ne=V-o,ee=V+o,R=U(w-S),se=U(w+_);E.push({x1:ne,y1:se,x2:ee,y2:se}),E.push({x1:V,y1:R,x2:V,y2:se}),E.push({x1:ne,y1:R,x2:ee,y2:R})}return de.createElement(jr,rm({className:"recharts-errorBar",key:"bar-".concat(E.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},x),E.map(function(z){return de.createElement("line",rm({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return de.createElement(jr,{className:"recharts-errorBars"},v)}}])})(de.Component);mR($f,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mR($f,"displayName","ErrorBar");function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){oQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oQ(e,t,r){return t=lQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lQ(e){var t=cQ(e,"string");return Yh(t)=="symbol"?t:t+""}function cQ(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xR=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=fs(r,ma);if(!o)return null;var l=ma.defaultProps,u=l!==void 0?_l(_l({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(f,p){var m=p.item,x=p.props,v=x.sectors||x.data||[];return f.concat(v.map(function(y){return{type:o.props.iconType||m.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(n||[]).map(function(f){var p=f.item,m=p.type.defaultProps,x=m!==void 0?_l(_l({},m),p.props):{},v=x.dataKey,y=x.name,b=x.legendType,k=x.hide;return{inactive:k,dataKey:v,type:u.iconType||b||"square",color:uk(p),value:y||v,payload:x}}),_l(_l(_l({},u),ma.getWithHeight(o,s)),{},{payload:d,item:o})};function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function BO(e){return fQ(e)||hQ(e)||dQ(e)||uQ()}function uQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dQ(e,t){if(e){if(typeof e=="string")return Yj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yj(e,t)}}function hQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fQ(e){if(Array.isArray(e))return Yj(e)}function Yj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(r),!0).forEach(function(n){fu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fu(e,t,r){return t=pQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pQ(e){var t=mQ(e,"string");return Xh(t)=="symbol"?t:t+""}function mQ(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kn(e,t,r){return ir(e)||ir(t)?r:zn(t)?ws(e,t,r):Kt(t)?t(e):r}function dh(e,t,r,n){var s=fJ(e,function(l){return kn(l,t)});if(r==="number"){var i=s.filter(function(l){return lt(l)||parseFloat(l)});return i.length?[Sg(i),kg(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!ir(l)}):s;return o.map(function(l){return zn(l)||l instanceof Date?l:""})}var gQ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,p=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,x=void 0;if(La(p-f)!==La(m-p)){var v=[];if(La(m-p)===La(u[1]-u[0])){x=m;var y=p+u[1]-u[0];v[0]=Math.min(y,(y+f)/2),v[1]=Math.max(y,(y+f)/2)}else{x=f;var b=m+u[1]-u[0];v[0]=Math.min(p,(b+p)/2),v[1]=Math.max(p,(b+p)/2)}var k=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>k[0]&&t<=k[1]||t>=v[0]&&t<=v[1]){o=s[d].index;break}}else{var N=Math.min(f,m),w=Math.max(f,m);if(t>(N+p)/2&&t<=(w+p)/2){o=s[d].index;break}}}else for(var T=0;T<l;T++)if(T===0&&t<=(n[T].coordinate+n[T+1].coordinate)/2||T>0&&T<l-1&&t>(n[T].coordinate+n[T-1].coordinate)/2&&t<=(n[T].coordinate+n[T+1].coordinate)/2||T===l-1&&t>(n[T].coordinate+n[T-1].coordinate)/2){o=n[T].index;break}return o},uk=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,u;switch(s){case"Line":u=o;break;case"Area":case"Radar":u=o&&o!=="none"?o:l;break;default:u=l;break}return u},xQ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),u=0,d=l.length;u<d;u++)for(var f=i[l[u]].stackGroups,p=Object.keys(f),m=0,x=p.length;m<x;m++){var v=f[p[m]],y=v.items,b=v.cateAxisId,k=y.filter(function(_){return uo(_.type).indexOf("Bar")>=0});if(k&&k.length){var N=k[0].type.defaultProps,w=N!==void 0?pn(pn({},N),k[0].props):k[0].props,T=w.barSize,E=w[b];o[E]||(o[E]=[]);var S=ir(T)?r:T;o[E].push({item:k[0],stackList:k.slice(1),barSize:ir(S)?void 0:Ba(S,n,0)})}}return o},yQ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,u=o.length;if(u<1)return null;var d=Ba(r,s,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var m=!1,x=s/u,v=o.reduce(function(T,E){return T+E.barSize||0},0);v+=(u-1)*d,v>=s&&(v-=(u-1)*d,d=0),v>=s&&x>0&&(m=!0,x*=.9,v=u*x);var y=(s-v)/2>>0,b={offset:y-d,size:0};f=o.reduce(function(T,E){var S={item:E.item,position:{offset:b.offset+b.size+d,size:m?x:E.barSize}},_=[].concat(BO(T),[S]);return b=_[_.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(A){_.push({item:A,position:b})}),_},p)}else{var k=Ba(n,s,0,!0);s-2*k-(u-1)*d<=0&&(d=0);var N=(s-2*k-(u-1)*d)/u;N>1&&(N>>=0);var w=l===+l?Math.min(N,l):N;f=o.reduce(function(T,E,S){var _=[].concat(BO(T),[{item:E.item,position:{offset:k+(N+d)*S+(N-w)/2,size:w}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(A){_.push({item:A,position:_[_.length-1].position})}),_},p)}return f},vQ=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,u=o-(l.left||0)-(l.right||0),d=xR({children:i,legendWidth:u});if(d){var f=s||{},p=f.width,m=f.height,x=d.align,v=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&x!=="center"&&lt(t[x]))return pn(pn({},t),{},fu({},x,t[x]+(p||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&v!=="middle"&&lt(t[v]))return pn(pn({},t),{},fu({},v,t[v]+(m||0)))}return t},bQ=function(t,r,n){return ir(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},yR=function(t,r,n,s,i){var o=r.props.children,l=js(o,$f).filter(function(d){return bQ(s,i,d.props.direction)});if(l&&l.length){var u=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var p=kn(f,n);if(ir(p))return d;var m=Array.isArray(p)?[Sg(p),kg(p)]:[p,p],x=u.reduce(function(v,y){var b=kn(f,y,0),k=m[0]-Math.abs(Array.isArray(b)?b[0]:b),N=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(k,v[0]),Math.max(N,v[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},wQ=function(t,r,n,s,i){var o=r.map(function(l){return yR(t,l,n,i,s)}).filter(function(l){return!ir(l)});return o&&o.length?o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]):null},vR=function(t,r,n,s,i){var o=r.map(function(u){var d=u.props.dataKey;return n==="number"&&d&&yR(t,u,d,s)||dh(t,d,n,i)});if(n==="number")return o.reduce(function(u,d){return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(u,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,u.push(d[f]));return u},[])},bR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},wR=function(t,r,n,s){if(s)return t.map(function(u){return u.coordinate});var i,o,l=t.map(function(u){return u.coordinate===r&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate});return i||l.push(r),o||l.push(n),l},oo=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/u:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?La(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(p){var m=i?i.indexOf(p):p;return{coordinate:s(m)+d,value:p,offset:d}});return f.filter(function(p){return!Pf(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,m){return{coordinate:s(p)+d,value:p,index:m,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(p){return{coordinate:s(p)+d,value:p,offset:d}}):s.domain().map(function(p,m){return{coordinate:s(p)+d,value:i?i[p]:p,index:m,offset:d}})},t1=new WeakMap,op=function(t,r){if(typeof r!="function")return t;t1.has(t)||t1.set(t,new WeakMap);var n=t1.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},jR=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Hh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Jp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:uh(),realScaleType:"point"}:i==="category"?{scale:Hh(),realScaleType:"band"}:{scale:Jp(),realScaleType:"linear"};if(Xl(s)){var u="scale".concat(ug(s));return{scale:(_O[u]||uh)(),realScaleType:_O[u]?u:"point"}}return Kt(s)?{scale:s}:{scale:uh(),realScaleType:"point"}},HO=1e-4,NR=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-HO,o=Math.max(s[0],s[1])+HO,l=t(r[0]),u=t(r[n-1]);(l<i||l>o||u<i||u>o)&&t.domain([r[0],r[n-1]])}},jQ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},NQ=function(t,r){if(!r||r.length!==2||!lt(r[0])||!lt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!lt(t[0])||t[0]<n)&&(i[0]=n),(!lt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},kQ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var u=Pf(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+u,o=t[l][n][1])}},SQ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Pf(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},_Q={sign:kQ,expand:fW,none:xu,silhouette:pW,wiggle:mW,positive:SQ},EQ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=_Q[n],o=hW().keys(s).value(function(l,u){return+kn(l,u,0)}).order(Sj).offset(i);return o(t)},AQ=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,u={},d=l.reduce(function(p,m){var x,v=(x=m.type)!==null&&x!==void 0&&x.defaultProps?pn(pn({},m.type.defaultProps),m.props):m.props,y=v.stackId,b=v.hide;if(b)return p;var k=v[n],N=p[k]||{hasStack:!1,stackGroups:{}};if(zn(y)){var w=N.stackGroups[y]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(m),N.hasStack=!0,N.stackGroups[y]=w}else N.stackGroups[Xu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return pn(pn({},p),{},fu({},k,N))},u),f={};return Object.keys(d).reduce(function(p,m){var x=d[m];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,b){var k=x.stackGroups[b];return pn(pn({},y),{},fu({},b,{numericAxisId:n,cateAxisId:s,items:k.items,stackedData:EQ(t,k.items,i)}))},v)}return pn(pn({},p),{},fu({},m,x))},f)},kR=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,u=n||r.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=HJ(d,i,l);return t.domain([Sg(f),kg(f)]),{niceTicks:f}}if(i&&s==="number"){var p=t.domain(),m=qJ(p,i,l);return{niceTicks:m}}return null};function qO(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ir(s[t.dataKey])){var l=Ip(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var u=kn(s,ir(o)?t.dataKey:o);return ir(u)?null:t.scale(u)}var zO=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var u=kn(o,r.dataKey,r.domain[l]);return ir(u)?null:r.scale(u)-i/2+s},TQ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},CQ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(zn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},OQ=function(t){return t.reduce(function(r,n){return[Sg(n.concat([r[0]]).filter(lt)),kg(n.concat([r[1]]).filter(lt))]},[1/0,-1/0])},SR=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,u=l.reduce(function(d,f){var p=OQ(f.slice(r,n+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},WO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Xj=function(t,r,n){if(Kt(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(lt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(WO.test(t[0])){var i=+WO.exec(t[0])[1];s[0]=r[0]-i}else Kt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(lt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(KO.test(t[1])){var o=+KO.exec(t[1])[1];s[1]=r[1]+o}else Kt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},am=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=$2(r,function(p){return p.coordinate}),o=1/0,l=1,u=i.length;l<u;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},VO=function(t,r,n){return!t||!t.length||Zu(t,ws(n,"type.defaultProps.domain"))?r:t},_R=function(t,r){var n=t.type.defaultProps?pn(pn({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,u=n.tooltipType,d=n.chartType,f=n.hide;return pn(pn({},Lt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:uk(t),value:kn(r,s),type:u,payload:r,chartType:d,hide:f})};function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){ER(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ER(e,t,r){return t=PQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e){var t=IQ(e,"string");return Jh(t)=="symbol"?t:t+""}function IQ(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DQ(e,t){return $Q(e)||FQ(e,t)||RQ(e,t)||MQ()}function MQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RQ(e,t){if(e){if(typeof e=="string")return YO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YO(e,t)}}function YO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function $Q(e){if(Array.isArray(e))return e}var sm=Math.PI/180,LQ=function(t){return t*180/Math.PI},Ir=function(t,r,n,s){return{x:t+Math.cos(-sm*s)*n,y:r+Math.sin(-sm*s)*n}},AR=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},TR=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.startAngle,d=t.endAngle,f=Ba(t.cx,o,o/2),p=Ba(t.cy,l,l/2),m=AR(o,l,n),x=Ba(t.innerRadius,m,0),v=Ba(t.outerRadius,m,m*.8),y=Object.keys(r);return y.reduce(function(b,k){var N=r[k],w=N.domain,T=N.reversed,E;if(ir(N.range))s==="angleAxis"?E=[u,d]:s==="radiusAxis"&&(E=[x,v]),T&&(E=[E[1],E[0]]);else{E=N.range;var S=E,_=DQ(S,2);u=_[0],d=_[1]}var A=jR(N,i),P=A.realScaleType,B=A.scale;B.domain(w).range(E),NR(B);var I=kR(B,eo(eo({},N),{},{realScaleType:P})),O=eo(eo(eo({},N),I),{},{range:E,radius:v,realScaleType:P,scale:B,cx:f,cy:p,innerRadius:x,outerRadius:v,startAngle:u,endAngle:d});return eo(eo({},b),{},ER({},k,O))},{})},BQ=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},UQ=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=BQ({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var u=(n-i)/l,d=Math.acos(u);return s>o&&(d=2*Math.PI-d),{radius:l,angle:LQ(d),angleInRadian:d}},HQ=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},qQ=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},XO=function(t,r){var n=t.x,s=t.y,i=UQ({x:n,y:s},r),o=i.radius,l=i.angle,u=r.innerRadius,d=r.outerRadius;if(o<u||o>d)return!1;if(o===0)return!0;var f=HQ(r),p=f.startAngle,m=f.endAngle,x=l,v;if(p<=m){for(;x>m;)x-=360;for(;x<p;)x+=360;v=x>=p&&x<=m}else{for(;x>p;)x-=360;for(;x<m;)x+=360;v=x>=m&&x<=p}return v?eo(eo({},r),{},{radius:o,angle:qQ(x,r)}):null},CR=function(t){return!F.isValidElement(t)&&!Kt(t)&&typeof t!="boolean"?t.className:""};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var zQ=["offset"];function WQ(e){return YQ(e)||GQ(e)||VQ(e)||KQ()}function KQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VQ(e,t){if(e){if(typeof e=="string")return Jj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jj(e,t)}}function GQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YQ(e){if(Array.isArray(e))return Jj(e)}function Jj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XQ(e,t){if(e==null)return{};var r=JQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(n){QQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QQ(e,t,r){return t=ZQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZQ(e){var t=eZ(e,"string");return Qh(t)=="symbol"?t:t+""}function eZ(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}var tZ=function(t){var r=t.value,n=t.formatter,s=ir(t.children)?r:t.children;return Kt(n)?n(s):s},rZ=function(t,r){var n=La(r-t),s=Math.min(Math.abs(r-t),360);return n*s},nZ=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,u=i,d=u.cx,f=u.cy,p=u.innerRadius,m=u.outerRadius,x=u.startAngle,v=u.endAngle,y=u.clockWise,b=(p+m)/2,k=rZ(x,v),N=k>=0?1:-1,w,T;s==="insideStart"?(w=x+N*o,T=y):s==="insideEnd"?(w=v-N*o,T=!y):s==="end"&&(w=v+N*o,T=y),T=k<=0?T:!T;var E=Ir(d,f,b,w),S=Ir(d,f,b,w+(T?1:-1)*359),_="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(S.x,",").concat(S.y),A=ir(t.id)?Xu("recharts-radial-line-"):t.id;return de.createElement("text",Zh({},n,{dominantBaseline:"central",className:ar("recharts-radial-bar-label",l)}),de.createElement("defs",null,de.createElement("path",{id:A,d:_})),de.createElement("textPath",{xlinkHref:"#".concat(A)},r))},aZ=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,u=i.innerRadius,d=i.outerRadius,f=i.startAngle,p=i.endAngle,m=(f+p)/2;if(s==="outside"){var x=Ir(o,l,d+n,m),v=x.x,y=x.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(u+d)/2,k=Ir(o,l,b,m),N=k.x,w=k.y;return{x:N,y:w,textAnchor:"middle",verticalAnchor:"middle"}},sZ=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,u=o.y,d=o.width,f=o.height,p=f>=0?1:-1,m=p*s,x=p>0?"end":"start",v=p>0?"start":"end",y=d>=0?1:-1,b=y*s,k=y>0?"end":"start",N=y>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:u-p*s,textAnchor:"middle",verticalAnchor:x};return Ln(Ln({},w),n?{height:Math.max(u-n.y,0),width:d}:{})}if(i==="bottom"){var T={x:l+d/2,y:u+f+m,textAnchor:"middle",verticalAnchor:v};return Ln(Ln({},T),n?{height:Math.max(n.y+n.height-(u+f),0),width:d}:{})}if(i==="left"){var E={x:l-b,y:u+f/2,textAnchor:k,verticalAnchor:"middle"};return Ln(Ln({},E),n?{width:Math.max(E.x-n.x,0),height:f}:{})}if(i==="right"){var S={x:l+d+b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"};return Ln(Ln({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:f}:{})}var _=n?{width:d,height:f}:{};return i==="insideLeft"?Ln({x:l+b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"},_):i==="insideRight"?Ln({x:l+d-b,y:u+f/2,textAnchor:k,verticalAnchor:"middle"},_):i==="insideTop"?Ln({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:v},_):i==="insideBottom"?Ln({x:l+d/2,y:u+f-m,textAnchor:"middle",verticalAnchor:x},_):i==="insideTopLeft"?Ln({x:l+b,y:u+m,textAnchor:N,verticalAnchor:v},_):i==="insideTopRight"?Ln({x:l+d-b,y:u+m,textAnchor:k,verticalAnchor:v},_):i==="insideBottomLeft"?Ln({x:l+b,y:u+f-m,textAnchor:N,verticalAnchor:x},_):i==="insideBottomRight"?Ln({x:l+d-b,y:u+f-m,textAnchor:k,verticalAnchor:x},_):Yu(i)&&(lt(i.x)||$l(i.x))&&(lt(i.y)||$l(i.y))?Ln({x:l+Ba(i.x,d),y:u+Ba(i.y,f),textAnchor:"end",verticalAnchor:"end"},_):Ln({x:l+d/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},_)},iZ=function(t){return"cx"in t&&lt(t.cx)};function na(e){var t=e.offset,r=t===void 0?5:t,n=XQ(e,zQ),s=Ln({offset:r},n),i=s.viewBox,o=s.position,l=s.value,u=s.children,d=s.content,f=s.className,p=f===void 0?"":f,m=s.textBreakAll;if(!i||ir(l)&&ir(u)&&!F.isValidElement(d)&&!Kt(d))return null;if(F.isValidElement(d))return F.cloneElement(d,s);var x;if(Kt(d)){if(x=F.createElement(d,s),F.isValidElement(x))return x}else x=tZ(s);var v=iZ(i),y=Lt(s,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return nZ(s,x,y);var b=v?aZ(s):sZ(s);return de.createElement(Zl,Zh({className:ar("recharts-label",p)},y,b,{breakAll:m}),x)}na.displayName="Label";var OR=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,u=t.radius,d=t.innerRadius,f=t.outerRadius,p=t.x,m=t.y,x=t.top,v=t.left,y=t.width,b=t.height,k=t.clockWise,N=t.labelViewBox;if(N)return N;if(lt(y)&&lt(b)){if(lt(p)&&lt(m))return{x:p,y:m,width:y,height:b};if(lt(x)&&lt(v))return{x,y:v,width:y,height:b}}return lt(p)&&lt(m)?{x:p,y:m,width:0,height:0}:lt(r)&&lt(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:k}:t.viewBox?t.viewBox:{}},oZ=function(t,r){return t?t===!0?de.createElement(na,{key:"label-implicit",viewBox:r}):zn(t)?de.createElement(na,{key:"label-implicit",viewBox:r,value:t}):F.isValidElement(t)?t.type===na?F.cloneElement(t,{key:"label-implicit",viewBox:r}):de.createElement(na,{key:"label-implicit",content:t,viewBox:r}):Kt(t)?de.createElement(na,{key:"label-implicit",content:t,viewBox:r}):Yu(t)?de.createElement(na,Zh({viewBox:r},t,{key:"label-implicit"})):null:null},lZ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=OR(t),o=js(s,na).map(function(u,d){return F.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=oZ(t.label,r||i);return[l].concat(WQ(o))};na.parseViewBox=OR;na.renderCallByParent=lZ;var r1,QO;function cZ(){if(QO)return r1;QO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return r1=e,r1}var uZ=cZ();const PR=$r(uZ);function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}var dZ=["valueAccessor"],hZ=["data","dataKey","clockWise","id","textBreakAll"];function fZ(e){return xZ(e)||gZ(e)||mZ(e)||pZ()}function pZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mZ(e,t){if(e){if(typeof e=="string")return Qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qj(e,t)}}function gZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xZ(e){if(Array.isArray(e))return Qj(e)}function Qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(this,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){yZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yZ(e,t,r){return t=vZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vZ(e){var t=bZ(e,"string");return ef(t)=="symbol"?t:t+""}function bZ(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t3(e,t){if(e==null)return{};var r=wZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var jZ=function(t){return Array.isArray(t.value)?PR(t.value):t.value};function Pi(e){var t=e.valueAccessor,r=t===void 0?jZ:t,n=t3(e,dZ),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,u=n.textBreakAll,d=t3(n,hZ);return!s||!s.length?null:de.createElement(jr,{className:"recharts-label-list"},s.map(function(f,p){var m=ir(i)?r(f,p):kn(f&&f.payload,i),x=ir(l)?{}:{id:"".concat(l,"-").concat(p)};return de.createElement(na,im({},Lt(f,!0),d,x,{parentViewBox:f.parentViewBox,value:m,textBreakAll:u,viewBox:na.parseViewBox(ir(o)?f:e3(e3({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Pi.displayName="LabelList";function NZ(e,t){return e?e===!0?de.createElement(Pi,{key:"labelList-implicit",data:t}):de.isValidElement(e)||Kt(e)?de.createElement(Pi,{key:"labelList-implicit",data:t,content:e}):Yu(e)?de.createElement(Pi,im({data:t},e,{key:"labelList-implicit"})):null:null}function kZ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=js(n,Pi).map(function(o,l){return F.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=NZ(e.label,t);return[i].concat(fZ(s))}Pi.renderCallByParent=kZ;function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function Zj(){return Zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zj.apply(this,arguments)}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function n3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return t=_Z(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){var t=EZ(e,"string");return tf(t)=="symbol"?t:t+""}function EZ(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AZ=function(t,r){var n=La(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},lp=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,u=t.cornerRadius,d=t.cornerIsExternal,f=u*(l?1:-1)+s,p=Math.asin(u/f)/sm,m=d?i:i+o*p,x=Ir(r,n,f,m),v=Ir(r,n,s,m),y=d?i-o*p:i,b=Ir(r,n,f*Math.cos(p*sm),y);return{center:x,circleTangency:v,lineTangency:b,theta:p}},IR=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,u=AZ(o,l),d=o+u,f=Ir(r,n,i,o),p=Ir(r,n,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var x=Ir(r,n,s,o),v=Ir(r,n,s,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},TZ=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,p=La(f-d),m=lp({cx:r,cy:n,radius:i,angle:d,sign:p,cornerRadius:o,cornerIsExternal:u}),x=m.circleTangency,v=m.lineTangency,y=m.theta,b=lp({cx:r,cy:n,radius:i,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:u}),k=b.circleTangency,N=b.lineTangency,w=b.theta,T=u?Math.abs(d-f):Math.abs(d-f)-y-w;if(T<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):IR({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
  `);if(s>0){var S=lp({cx:r,cy:n,radius:s,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),_=S.circleTangency,A=S.lineTangency,P=S.theta,B=lp({cx:r,cy:n,radius:s,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),I=B.circleTangency,O=B.lineTangency,L=B.theta,X=u?Math.abs(d-f):Math.abs(d-f)-P-L;if(X<0&&o===0)return"".concat(E,"L").concat(r,",").concat(n,"Z");E+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(X>180),",").concat(+(p>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,"Z")}else E+="L".concat(r,",").concat(n,"Z");return E},CZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DR=function(t){var r=n3(n3({},CZ),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,u=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,p=r.endAngle,m=r.className;if(o<i||f===p)return null;var x=ar("recharts-sector",m),v=o-i,y=Ba(l,v,0,!0),b;return y>0&&Math.abs(f-p)<360?b=TZ({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:p}):b=IR({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:p}),de.createElement("path",Zj({},Lt(r,!0),{className:x,d:b,role:"img"}))};function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function eN(){return eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eN.apply(this,arguments)}function a3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(r),!0).forEach(function(n){OZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OZ(e,t,r){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PZ(e){var t=IZ(e,"string");return rf(t)=="symbol"?t:t+""}function IZ(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i3={curveBasisClosed:tW,curveBasisOpen:rW,curveBasis:eW,curveBumpX:Bz,curveBumpY:Uz,curveLinearClosed:nW,curveLinear:hg,curveMonotoneX:aW,curveMonotoneY:sW,curveNatural:iW,curveStep:oW,curveStepAfter:cW,curveStepBefore:lW},cp=function(t){return t.x===+t.x&&t.y===+t.y},Wd=function(t){return t.x},Kd=function(t){return t.y},DZ=function(t,r){if(Kt(t))return t;var n="curve".concat(ug(t));return(n==="curveMonotone"||n==="curveBump")&&r?i3["".concat(n).concat(r==="vertical"?"Y":"X")]:i3[n]||hg},MZ=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,u=t.connectNulls,d=u===void 0?!1:u,f=DZ(n,l),p=d?i.filter(function(y){return cp(y)}):i,m;if(Array.isArray(o)){var x=d?o.filter(function(y){return cp(y)}):o,v=p.map(function(y,b){return s3(s3({},y),{},{base:x[b]})});return l==="vertical"?m=ep().y(Kd).x1(Wd).x0(function(y){return y.base.x}):m=ep().x(Wd).y1(Kd).y0(function(y){return y.base.y}),m.defined(cp).curve(f),m(v)}return l==="vertical"&&lt(o)?m=ep().y(Kd).x1(Wd).x0(o):lt(o)?m=ep().x(Wd).y1(Kd).y0(o):m=C5().x(Wd).y(Kd),m.defined(cp).curve(f),m(p)},om=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?MZ(t):s;return F.createElement("path",eN({},Lt(t,!1),Dp(t),{className:ar("recharts-curve",r),d:o,ref:i}))},n1={exports:{}},a1,o3;function RZ(){if(o3)return a1;o3=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return a1=e,a1}var s1,l3;function FZ(){if(l3)return s1;l3=1;var e=RZ();function t(){}function r(){}return r.resetWarningCache=t,s1=function(){function n(o,l,u,d,f,p){if(p!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},s1}var c3;function $Z(){return c3||(c3=1,n1.exports=FZ()()),n1.exports}var LZ=$Z();const Rr=$r(LZ),{getOwnPropertyNames:BZ,getOwnPropertySymbols:UZ}=Object,{hasOwnProperty:HZ}=Object.prototype;function i1(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function up(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const u=e(r,n,s);return i.delete(r),i.delete(n),u}}function qZ(e){return e?.[Symbol.toStringTag]}function u3(e){return BZ(e).concat(UZ(e))}const zZ=Object.hasOwn||((e,t)=>HZ.call(e,t));function uc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const WZ="__v",KZ="__o",VZ="_owner",{getOwnPropertyDescriptor:d3,keys:h3}=Object;function GZ(e,t){return e.byteLength===t.byteLength&&lm(new Uint8Array(e),new Uint8Array(t))}function YZ(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function XZ(e,t){return e.byteLength===t.byteLength&&lm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function JZ(e,t){return uc(e.getTime(),t.getTime())}function QZ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ZZ(e,t){return e===t}function f3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,u=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let f=!1,p=0;for(;(l=d.next())&&!l.done;){if(s[p]){p++;continue}const m=o.value,x=l.value;if(r.equals(m[0],x[0],u,p,e,t,r)&&r.equals(m[1],x[1],m[0],x[0],e,t,r)){f=s[p]=!0;break}p++}if(!f)return!1;u++}return!0}const eee=uc;function tee(e,t,r){const n=h3(e);let s=n.length;if(h3(t).length!==s)return!1;for(;s-- >0;)if(!MR(e,t,r,n[s]))return!1;return!0}function Vd(e,t,r){const n=u3(e);let s=n.length;if(u3(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!MR(e,t,r,i)||(o=d3(e,i),l=d3(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function ree(e,t){return uc(e.valueOf(),t.valueOf())}function nee(e,t){return e.source===t.source&&e.flags===t.flags}function p3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const u=t.values();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function lm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function aee(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function MR(e,t,r,n){return(n===VZ||n===KZ||n===WZ)&&(e.$$typeof||t.$$typeof)?!0:zZ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const see="[object ArrayBuffer]",iee="[object Arguments]",oee="[object Boolean]",lee="[object DataView]",cee="[object Date]",uee="[object Error]",dee="[object Map]",hee="[object Number]",fee="[object Object]",pee="[object RegExp]",mee="[object Set]",gee="[object String]",xee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},yee="[object URL]",vee=Object.prototype.toString;function bee({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:u,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:x,unknownTagComparators:v}){return function(b,k,N){if(b===k)return!0;if(b==null||k==null)return!1;const w=typeof b;if(w!==typeof k)return!1;if(w!=="object")return w==="number"?l(b,k,N):w==="function"?i(b,k,N):!1;const T=b.constructor;if(T!==k.constructor)return!1;if(T===Object)return u(b,k,N);if(Array.isArray(b))return t(b,k,N);if(T===Date)return n(b,k,N);if(T===RegExp)return f(b,k,N);if(T===Map)return o(b,k,N);if(T===Set)return p(b,k,N);const E=vee.call(b);if(E===cee)return n(b,k,N);if(E===pee)return f(b,k,N);if(E===dee)return o(b,k,N);if(E===mee)return p(b,k,N);if(E===fee)return typeof b.then!="function"&&typeof k.then!="function"&&u(b,k,N);if(E===yee)return x(b,k,N);if(E===uee)return s(b,k,N);if(E===iee)return u(b,k,N);if(xee[E])return m(b,k,N);if(E===see)return e(b,k,N);if(E===lee)return r(b,k,N);if(E===oee||E===hee||E===gee)return d(b,k,N);if(v){let S=v[E];if(!S){const _=qZ(b);_&&(S=v[_])}if(S)return S(b,k,N)}return!1}}function wee({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:GZ,areArraysEqual:r?Vd:YZ,areDataViewsEqual:XZ,areDatesEqual:JZ,areErrorsEqual:QZ,areFunctionsEqual:ZZ,areMapsEqual:r?i1(f3,Vd):f3,areNumbersEqual:eee,areObjectsEqual:r?Vd:tee,arePrimitiveWrappersEqual:ree,areRegExpsEqual:nee,areSetsEqual:r?i1(p3,Vd):p3,areTypedArraysEqual:r?i1(lm,Vd):lm,areUrlsEqual:aee,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=up(n.areArraysEqual),i=up(n.areMapsEqual),o=up(n.areObjectsEqual),l=up(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function jee(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function Nee({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,u){const{cache:d=e?new WeakMap:void 0,meta:f}=r();return t(l,u,{cache:d,equals:n,meta:f,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,u){return t(l,u,i)}}const kee=ul();ul({strict:!0});ul({circular:!0});ul({circular:!0,strict:!0});ul({createInternalComparator:()=>uc});ul({strict:!0,createInternalComparator:()=>uc});ul({circular:!0,createInternalComparator:()=>uc});ul({circular:!0,createInternalComparator:()=>uc,strict:!0});function ul(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=wee(e),o=bee(i),l=r?r(o):jee(o);return Nee({circular:t,comparator:o,createState:n,equals:l,strict:s})}function See(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function m3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):See(s)};requestAnimationFrame(n)}function tN(e){"@babel/helpers - typeof";return tN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tN(e)}function _ee(e){return Cee(e)||Tee(e)||Aee(e)||Eee()}function Eee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(e,t){if(e){if(typeof e=="string")return g3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g3(e,t)}}function g3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cee(e){if(Array.isArray(e))return e}function Oee(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=_ee(o),u=l[0],d=l.slice(1);if(typeof u=="number"){m3(s.bind(null,d),u);return}s(u),m3(s.bind(null,d));return}tN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function x3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function y3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(r),!0).forEach(function(n){RR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RR(e,t,r){return t=Pee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pee(e){var t=Iee(e,"string");return nf(t)==="symbol"?t:String(t)}function Iee(e,t){if(nf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dee=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},Mee=function(t){return t},Ree=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},hh=function(t,r){return Object.keys(r).reduce(function(n,s){return y3(y3({},n),{},RR({},s,t(s,r[s])))},{})},v3=function(t,r,n){return t.map(function(s){return"".concat(Ree(s)," ").concat(r,"ms ").concat(n)}).join(",")};function Fee(e,t){return Bee(e)||Lee(e,t)||FR(e,t)||$ee()}function $ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Bee(e){if(Array.isArray(e))return e}function Uee(e){return zee(e)||qee(e)||FR(e)||Hee()}function Hee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FR(e,t){if(e){if(typeof e=="string")return rN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(e,t)}}function qee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zee(e){if(Array.isArray(e))return rN(e)}function rN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cm=1e-4,$R=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},LR=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},b3=function(t,r){return function(n){var s=$R(t,r);return LR(s,n)}},Wee=function(t,r){return function(n){var s=$R(t,r),i=[].concat(Uee(s.map(function(o,l){return o*l}).slice(1)),[0]);return LR(i,n)}},w3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var d=u[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),f=Fee(d,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var p=b3(s,o),m=b3(i,l),x=Wee(s,o),v=function(k){return k>1?1:k<0?0:k},y=function(k){for(var N=k>1?1:k,w=N,T=0;T<8;++T){var E=p(w)-N,S=x(w);if(Math.abs(E-N)<cm||S<cm)return m(w);w=v(w-E/S)}return m(w)};return y.isStepper=!1,y},Kee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,u=function(f,p,m){var x=-(f-p)*n,v=m*i,y=m+(x-v)*l/1e3,b=m*l/1e3+f;return Math.abs(b-p)<cm&&Math.abs(y)<cm?[p,0]:[b,y]};return u.isStepper=!0,u.dt=l,u},Vee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return w3(s);case"spring":return Kee();default:if(s.split("(")[0]==="cubic-bezier")return w3(s)}return typeof s=="function"?s:null};function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function j3(e){return Xee(e)||Yee(e)||BR(e)||Gee()}function Gee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xee(e){if(Array.isArray(e))return aN(e)}function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){nN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nN(e,t,r){return t=Jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jee(e){var t=Qee(e,"string");return af(t)==="symbol"?t:String(t)}function Qee(e,t){if(af(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zee(e,t){return rte(e)||tte(e,t)||BR(e,t)||ete()}function ete(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BR(e,t){if(e){if(typeof e=="string")return aN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aN(e,t)}}function aN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function rte(e){if(Array.isArray(e))return e}var um=function(t,r,n){return t+(r-t)*n},sN=function(t){var r=t.from,n=t.to;return r!==n},nte=function e(t,r,n){var s=hh(function(i,o){if(sN(o)){var l=t(o.from,o.to,o.velocity),u=Zee(l,2),d=u[0],f=u[1];return ua(ua({},o),{},{from:d,velocity:f})}return o},r);return n<1?hh(function(i,o){return sN(o)?ua(ua({},o),{},{velocity:um(o.velocity,s[i].velocity,n),from:um(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const ate=(function(e,t,r,n,s){var i=Dee(e,t),o=i.reduce(function(b,k){return ua(ua({},b),{},nN({},k,[e[k],t[k]]))},{}),l=i.reduce(function(b,k){return ua(ua({},b),{},nN({},k,{from:e[k],velocity:0,to:t[k]}))},{}),u=-1,d,f,p=function(){return null},m=function(){return hh(function(k,N){return N.from},l)},x=function(){return!Object.values(l).filter(sN).length},v=function(k){d||(d=k);var N=k-d,w=N/r.dt;l=nte(r,l,w),s(ua(ua(ua({},e),t),m())),d=k,x()||(u=requestAnimationFrame(p))},y=function(k){f||(f=k);var N=(k-f)/n,w=hh(function(E,S){return um.apply(void 0,j3(S).concat([r(N)]))},o);if(s(ua(ua(ua({},e),t),w)),N<1)u=requestAnimationFrame(p);else{var T=hh(function(E,S){return um.apply(void 0,j3(S).concat([r(1)]))},o);s(ua(ua(ua({},e),t),T))}};return p=r.isStepper?v:y,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(u)}}});function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}var ste=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ite(e,t){if(e==null)return{};var r=ote(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ote(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function o1(e){return dte(e)||ute(e)||cte(e)||lte()}function lte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cte(e,t){if(e){if(typeof e=="string")return iN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iN(e,t)}}function ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dte(e){if(Array.isArray(e))return iN(e)}function iN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(n){rh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rh(e,t,r){return t=UR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UR(n.key),n)}}function pte(e,t,r){return t&&fte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UR(e){var t=mte(e,"string");return _u(t)==="symbol"?t:String(t)}function mte(e,t){if(_u(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oN(e,t)}function oN(e,t){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},oN(e,t)}function xte(e){var t=yte();return function(){var n=dm(e),s;if(t){var i=dm(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return lN(this,s)}}function lN(e,t){if(t&&(_u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cN(e)}function cN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dm(e){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dm(e)}var xi=(function(e){gte(r,e);var t=xte(r);function r(n,s){var i;hte(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,u=o.attributeName,d=o.from,f=o.to,p=o.steps,m=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(cN(i)),i.changeStyle=i.changeStyle.bind(cN(i)),!l||x<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),lN(i);if(p&&p.length)i.state={style:p[0].style};else if(d){if(typeof m=="function")return i.state={style:d},lN(i);i.state={style:u?rh({},u,d):d}}else i.state={style:{}};return i}return pte(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,u=i.attributeName,d=i.shouldReAnimate,f=i.to,p=i.from,m=this.state.style;if(l){if(!o){var x={style:u?rh({},u,f):f};this.state&&m&&(u&&m[u]!==f||!u&&m!==f)&&this.setState(x);return}if(!(kee(s.to,f)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||d?p:s.to;if(this.state&&m){var b={style:u?rh({},u,y):y};(u&&m[u]!==y||!u&&m!==y)&&this.setState(b)}this.runAnimation(Qs(Qs({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,u=s.duration,d=s.easing,f=s.begin,p=s.onAnimationEnd,m=s.onAnimationStart,x=ate(o,l,Vee(d),u,this.changeStyle),v=function(){i.stopJSAnimation=x()};this.manager.start([m,f,v,u,p])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,u=s.onAnimationStart,d=o[0],f=d.style,p=d.duration,m=p===void 0?0:p,x=function(y,b,k){if(k===0)return y;var N=b.duration,w=b.easing,T=w===void 0?"ease":w,E=b.style,S=b.properties,_=b.onAnimationEnd,A=k>0?o[k-1]:b,P=S||Object.keys(E);if(typeof T=="function"||T==="spring")return[].concat(o1(y),[i.runJSAnimation.bind(i,{from:A.style,to:E,duration:N,easing:T}),N]);var B=v3(P,N,T),I=Qs(Qs(Qs({},A.style),E),{},{transition:B});return[].concat(o1(y),[I,N,_]).filter(Mee)};return this.manager.start([u].concat(o1(o.reduce(x,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Oee());var i=s.begin,o=s.duration,l=s.attributeName,u=s.to,d=s.easing,f=s.onAnimationStart,p=s.onAnimationEnd,m=s.steps,x=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var y=l?rh({},l,u):u,b=v3(Object.keys(y),o,d);v.start([f,i,Qs(Qs({},y),{},{transition:b}),o,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=ite(s,ste),d=F.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var p=function(x){var v=x.props,y=v.style,b=y===void 0?{}:y,k=v.className,N=F.cloneElement(x,Qs(Qs({},u),{},{style:Qs(Qs({},b),f),className:k}));return N};return d===1?p(F.Children.only(i)):de.createElement("div",null,F.Children.map(i,function(m){return p(m)}))}}]),r})(F.PureComponent);xi.displayName="Animate";xi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};xi.propTypes={from:Rr.oneOfType([Rr.object,Rr.string]),to:Rr.oneOfType([Rr.object,Rr.string]),attributeName:Rr.string,duration:Rr.number,begin:Rr.number,easing:Rr.oneOfType([Rr.string,Rr.func]),steps:Rr.arrayOf(Rr.shape({duration:Rr.number.isRequired,style:Rr.object.isRequired,easing:Rr.oneOfType([Rr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Rr.func]),properties:Rr.arrayOf("string"),onAnimationEnd:Rr.func})),children:Rr.oneOfType([Rr.node,Rr.func]),isActive:Rr.bool,canBegin:Rr.bool,onAnimationEnd:Rr.func,shouldReAnimate:Rr.bool,onAnimationStart:Rr.func,onAnimationReStart:Rr.func};jI();function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hm.apply(this,arguments)}function vte(e,t){return Nte(e)||jte(e,t)||wte(e,t)||bte()}function bte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wte(e,t){if(e){if(typeof e=="string")return S3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S3(e,t)}}function S3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Nte(e){if(Array.isArray(e))return e}function _3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(r),!0).forEach(function(n){kte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kte(e,t,r){return t=Ste(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ste(e){var t=_te(e,"string");return sf(t)=="symbol"?t:t+""}function _te(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A3=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,u=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,x=4;m<x;m++)p[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(t+u*p[0],",").concat(r)),f+="L ".concat(t+n-u*p[1],",").concat(r),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+l*p[1])),f+="L ".concat(t+n,",").concat(r+s-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(t+n-u*p[2],",").concat(r+s)),f+="L ".concat(t+u*p[3],",").concat(r+s),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+u*v,",").concat(r,`
            L `).concat(t+n-u*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+s-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n-u*v,",").concat(r+s,`
            L `).concat(t+u*v,",").concat(r+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*v," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Ete=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,u=r.height;if(Math.abs(l)>0&&Math.abs(u)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),p=Math.min(o,o+u),m=Math.max(o,o+u);return n>=d&&n<=f&&s>=p&&s<=m}return!1},Ate={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dk=function(t){var r=E3(E3({},Ate),t),n=F.useRef(),s=F.useState(-1),i=vte(s,2),o=i[0],l=i[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var T=n.current.getTotalLength();T&&l(T)}catch{}},[]);var u=r.x,d=r.y,f=r.width,p=r.height,m=r.radius,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,k=r.isAnimationActive,N=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var w=ar("recharts-rectangle",x);return N?de.createElement(xi,{canBegin:o>0,from:{width:f,height:p,x:u,y:d},to:{width:f,height:p,x:u,y:d},duration:y,animationEasing:v,isActive:N},function(T){var E=T.width,S=T.height,_=T.x,A=T.y;return de.createElement(xi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:k,easing:v},de.createElement("path",hm({},Lt(r,!0),{className:w,d:A3(_,A,E,S,m),ref:n})))}):de.createElement("path",hm({},Lt(r,!0),{className:w,d:A3(u,d,f,p,m)}))},Tte=["points","className","baseLinePoints","connectNulls"];function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(this,arguments)}function Cte(e,t){if(e==null)return{};var r=Ote(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ote(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function T3(e){return Mte(e)||Dte(e)||Ite(e)||Pte()}function Pte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(e,t){if(e){if(typeof e=="string")return uN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uN(e,t)}}function Dte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mte(e){if(Array.isArray(e))return uN(e)}function uN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C3=function(t){return t&&t.x===+t.x&&t.y===+t.y},Rte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){C3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),C3(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},fh=function(t,r){var n=Rte(t);r&&(n=[n.reduce(function(i,o){return[].concat(T3(i),T3(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,u){return"".concat(o).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Fte=function(t,r,n){var s=fh(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(fh(r.reverse(),n).slice(1))},HR=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Cte(t,Tte);if(!r||!r.length)return null;var l=ar("recharts-polygon",n);if(s&&s.length){var u=o.stroke&&o.stroke!=="none",d=Fte(r,s,i);return de.createElement("g",{className:l},de.createElement("path",au({},Lt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),u?de.createElement("path",au({},Lt(o,!0),{fill:"none",d:fh(r,i)})):null,u?de.createElement("path",au({},Lt(o,!0),{fill:"none",d:fh(s,i)})):null)}var f=fh(r,i);return de.createElement("path",au({},Lt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function dN(){return dN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dN.apply(this,arguments)}var Lf=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=ar("recharts-dot",i);return r===+r&&n===+n&&s===+s?F.createElement("circle",dN({},Lt(t,!1),Dp(t),{className:o,cx:r,cy:n,r:s})):null};function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}var $te=["x","y","top","left","width","height","className"];function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hN.apply(this,arguments)}function O3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(r),!0).forEach(function(n){Bte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bte(e,t,r){return t=Ute(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ute(e){var t=Hte(e,"string");return of(t)=="symbol"?t:t+""}function Hte(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qte(e,t){if(e==null)return{};var r=zte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Wte=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},Kte=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,u=t.left,d=u===void 0?0:u,f=t.width,p=f===void 0?0:f,m=t.height,x=m===void 0?0:m,v=t.className,y=qte(t,$te),b=Lte({x:n,y:i,top:l,left:d,width:p,height:x},y);return!lt(n)||!lt(i)||!lt(p)||!lt(x)||!lt(l)||!lt(d)?null:de.createElement("path",hN({},Lt(b,!0),{className:ar("recharts-cross",v),d:Wte(n,i,p,x,l,d)}))},Vte=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function Gte(e,t){if(e==null)return{};var r=Yte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(this,arguments)}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){Xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xte(e,t,r){return t=Jte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jte(e){var t=Qte(e,"string");return lf(t)=="symbol"?t:t+""}function Qte(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zte=function(t,r,n,s){var i="";return s.forEach(function(o,l){var u=Ir(r,n,t,o);l?i+="L ".concat(u.x,",").concat(u.y):i+="M ".concat(u.x,",").concat(u.y)}),i+="Z",i},ere=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var u=cf({stroke:"#ccc"},Lt(t,!1));return de.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(d){var f=Ir(r,n,s,d),p=Ir(r,n,i,d);return de.createElement("line",yo({},u,{key:"line-".concat(d),x1:f.x,y1:f.y,x2:p.x,y2:p.y}))}))},tre=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.index,o=cf(cf({stroke:"#ccc"},Lt(t,!1)),{},{fill:"none"});return de.createElement("circle",yo({},o,{className:ar("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:s}))},rre=function(t){var r=t.radius,n=t.index,s=cf(cf({stroke:"#ccc"},Lt(t,!1)),{},{fill:"none"});return de.createElement("path",yo({},s,{className:ar("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:Zte(r,t.cx,t.cy,t.polarAngles)}))},nre=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:de.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return n==="circle"?de.createElement(tre,yo({key:o},t,{radius:s,index:i})):de.createElement(rre,yo({key:o},t,{radius:s,index:i}))}))},qR=function(t){var r=t.cx,n=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,u=t.outerRadius,d=u===void 0?0:u,f=t.gridType,p=f===void 0?"polygon":f,m=t.radialLines,x=m===void 0?!0:m,v=Gte(t,Vte);return d<=0?null:de.createElement("g",{className:"recharts-polar-grid"},de.createElement(ere,yo({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},v)),de.createElement(nre,yo({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},v)))};qR.displayName="PolarGrid";var l1,I3;function are(){if(I3)return l1;I3=1;var e=Ng(),t=eR(),r=$i();function n(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return l1=n,l1}var sre=are();const ire=$r(sre);var c1,D3;function ore(){if(D3)return c1;D3=1;var e=Ng(),t=$i(),r=tR();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return c1=n,c1}var lre=ore();const cre=$r(lre);var ure=["cx","cy","angle","ticks","axisLine"],dre=["ticks","tick","angle","tickFormatter","stroke"];function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ph.apply(this,arguments)}function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){Ag(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R3(e,t){if(e==null)return{};var r=hre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WR(n.key),n)}}function pre(e,t,r){return t&&F3(e.prototype,t),r&&F3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mre(e,t,r){return t=fm(t),gre(e,zR()?Reflect.construct(t,r||[],fm(e).constructor):t.apply(e,r))}function gre(e,t){if(t&&(Eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xre(e)}function xre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zR=function(){return!!e})()}function fm(e){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fm(e)}function yre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fN(e,t)}function fN(e,t){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},fN(e,t)}function Ag(e,t,r){return t=WR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e){var t=vre(e,"string");return Eu(t)=="symbol"?t:t+""}function vre(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rd=(function(e){function t(){return fre(this,t),mre(this,t,arguments)}return yre(t,e),pre(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,u=i.cy;return Ir(l,u,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=ire(l,function(f){return f.coordinate||0}),d=cre(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=n.axisLine,d=R3(n,ure),f=l.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),p=Ir(s,i,f[0],o),m=Ir(s,i,f[1],o),x=El(El(El({},Lt(d,!1)),{},{fill:"none"},Lt(u,!1)),{},{x1:p.x,y1:p.y,x2:m.x,y2:m.y});return de.createElement("line",ph({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,u=s.tickFormatter,d=s.stroke,f=R3(s,dre),p=this.getTickTextAnchor(),m=Lt(f,!1),x=Lt(o,!1),v=i.map(function(y,b){var k=n.getTickValueCoord(y),N=El(El(El(El({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(k.x,", ").concat(k.y,")")},m),{},{stroke:"none",fill:d},x),{},{index:b},k),{},{payload:y});return de.createElement(jr,ph({className:ar("recharts-polar-radius-axis-tick",CR(o)),key:"tick-".concat(y.coordinate)},Jl(n.props,y,b)),t.renderTickItem(o,N,u?u(y.value,b):y.value))});return de.createElement(jr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:de.createElement(jr,{className:ar("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),na.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return de.isValidElement(n)?o=de.cloneElement(n,s):Kt(n)?o=n(s):o=de.createElement(Zl,ph({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(F.PureComponent);Ag(rd,"displayName","PolarRadiusAxis");Ag(rd,"axisType","radiusAxis");Ag(rd,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ml.apply(this,arguments)}function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){Tg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VR(n.key),n)}}function wre(e,t,r){return t&&L3(e.prototype,t),r&&L3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jre(e,t,r){return t=pm(t),Nre(e,KR()?Reflect.construct(t,r||[],pm(e).constructor):t.apply(e,r))}function Nre(e,t){if(t&&(Au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kre(e)}function kre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!e})()}function pm(e){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pm(e)}function Sre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pN(e,t)}function pN(e,t){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},pN(e,t)}function Tg(e,t,r){return t=VR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VR(e){var t=_re(e,"string");return Au(t)=="symbol"?t:t+""}function _re(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ere=Math.PI/180,B3=1e-5,nd=(function(e){function t(){return bre(this,t),jre(this,t,arguments)}return Sre(t,e),wre(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,u=s.orientation,d=s.tickSize,f=d||8,p=Ir(i,o,l,n.coordinate),m=Ir(i,o,l+(u==="inner"?-1:1)*f,n.coordinate);return{x1:p.x,y1:p.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*Ere),o;return i>B3?o=s==="outer"?"start":"end":i<-B3?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,u=n.axisLineType,d=Al(Al({},Lt(this.props,!1)),{},{fill:"none"},Lt(l,!1));if(u==="circle")return de.createElement(Lf,Ml({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var f=this.props.ticks,p=f.map(function(m){return Ir(s,i,o,m.coordinate)});return de.createElement(HR,Ml({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,u=s.tickFormatter,d=s.stroke,f=Lt(this.props,!1),p=Lt(o,!1),m=Al(Al({},f),{},{fill:"none"},Lt(l,!1)),x=i.map(function(v,y){var b=n.getTickLineCoord(v),k=n.getTickTextAnchor(v),N=Al(Al(Al({textAnchor:k},f),{},{stroke:"none",fill:d},p),{},{index:y,payload:v,x:b.x2,y:b.y2});return de.createElement(jr,Ml({className:ar("recharts-polar-angle-axis-tick",CR(o)),key:"tick-".concat(v.coordinate)},Jl(n.props,v,y)),l&&de.createElement("line",Ml({className:"recharts-polar-angle-axis-tick-line"},m,b)),o&&t.renderTickItem(o,N,u?u(v.value,y):v.value))});return de.createElement(jr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:de.createElement(jr,{className:ar("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return de.isValidElement(n)?o=de.cloneElement(n,s):Kt(n)?o=n(s):o=de.createElement(Zl,Ml({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(F.PureComponent);Tg(nd,"displayName","PolarAngleAxis");Tg(nd,"axisType","angleAxis");Tg(nd,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var u1,U3;function Are(){if(U3)return u1;U3=1;var e=Z5(),t=e(Object.getPrototypeOf,Object);return u1=t,u1}var d1,H3;function Tre(){if(H3)return d1;H3=1;var e=wo(),t=Are(),r=jo(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,u=o.call(Object);function d(f){if(!r(f)||e(f)!=n)return!1;var p=t(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return d1=d,d1}var Cre=Tre();const Ore=$r(Cre);var h1,q3;function Pre(){if(q3)return h1;q3=1;var e=wo(),t=jo(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return h1=n,h1}var Ire=Pre();const Dre=$r(Ire);function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(this,arguments)}function Mre(e,t){return Lre(e)||$re(e,t)||Fre(e,t)||Rre()}function Rre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fre(e,t){if(e){if(typeof e=="string")return z3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z3(e,t)}}function z3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $re(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Lre(e){if(Array.isArray(e))return e}function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function K3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){Bre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bre(e,t,r){return t=Ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ure(e){var t=Hre(e,"string");return uf(t)=="symbol"?t:t+""}function Hre(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V3=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},qre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zre=function(t){var r=K3(K3({},qre),t),n=F.useRef(),s=F.useState(-1),i=Mre(s,2),o=i[0],l=i[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var u=r.x,d=r.y,f=r.upperWidth,p=r.lowerWidth,m=r.height,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,k=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||m!==+m||f===0&&p===0||m===0)return null;var N=ar("recharts-trapezoid",x);return k?de.createElement(xi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:u,y:d},to:{upperWidth:f,lowerWidth:p,height:m,x:u,y:d},duration:y,animationEasing:v,isActive:k},function(w){var T=w.upperWidth,E=w.lowerWidth,S=w.height,_=w.x,A=w.y;return de.createElement(xi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:v},de.createElement("path",mm({},Lt(r,!0),{className:N,d:V3(_,A,T,E,S),ref:n})))}):de.createElement("g",null,de.createElement("path",mm({},Lt(r,!0),{className:N,d:V3(u,d,f,p,m)})))},Wre=["option","shapeType","propTransformer","activeClassName","isActive"];function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function Kre(e,t){if(e==null)return{};var r=Vre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function G3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G3(Object(r),!0).forEach(function(n){Gre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gre(e,t,r){return t=Yre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yre(e){var t=Xre(e,"string");return df(t)=="symbol"?t:t+""}function Xre(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jre(e,t){return gm(gm({},t),e)}function Qre(e,t){return e==="symbols"}function Y3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return de.createElement(dk,r);case"trapezoid":return de.createElement(zre,r);case"sector":return de.createElement(DR,r);case"symbols":if(Qre(t))return de.createElement(C2,r);break;default:return null}}function Zre(e){return F.isValidElement(e)?e.props:e}function GR(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?Jre:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,u=Kre(e,Wre),d;if(F.isValidElement(t))d=F.cloneElement(t,gm(gm({},u),Zre(t)));else if(Kt(t))d=t(u);else if(Ore(t)&&!Dre(t)){var f=s(t,u);d=de.createElement(Y3,{shapeType:r,elementProps:f})}else{var p=u;d=de.createElement(Y3,{shapeType:r,elementProps:p})}return l?de.createElement(jr,{className:o},d):d}function Cg(e,t){return t!=null&&"trapezoids"in e.props}function Og(e,t){return t!=null&&"sectors"in e.props}function hf(e,t){return t!=null&&"points"in e.props}function ene(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function tne(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function rne(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function nne(e,t){var r;return Cg(e,t)?r=ene:Og(e,t)?r=tne:hf(e,t)&&(r=rne),r}function ane(e,t){var r;return Cg(e,t)?r="trapezoids":Og(e,t)?r="sectors":hf(e,t)&&(r="points"),r}function sne(e,t){if(Cg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Og(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return hf(e,t)?t.payload:{}}function ine(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=ane(r,t),i=sne(r,t),o=n.filter(function(u,d){var f=Zu(i,u),p=r.props[s].filter(function(v){var y=nne(r,t);return y(v,t)}),m=r.props[s].indexOf(p[p.length-1]),x=d===m;return f&&x}),l=n.indexOf(o[o.length-1]);return l}var kp;function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){Fs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function one(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XR(n.key),n)}}function lne(e,t,r){return t&&J3(e.prototype,t),r&&J3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cne(e,t,r){return t=xm(t),une(e,YR()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function une(e,t){if(t&&(Tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dne(e)}function dne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YR=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function hne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mN(e,t)}function mN(e,t){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},mN(e,t)}function Fs(e,t,r){return t=XR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XR(e){var t=fne(e,"string");return Tu(t)=="symbol"?t:t+""}function fne(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Li=(function(e){function t(r){var n;return one(this,t),n=cne(this,t,[r]),Fs(n,"pieRef",null),Fs(n,"sectorRefs",[]),Fs(n,"id",Xu("recharts-pie-")),Fs(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Kt(s)&&s()}),Fs(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Kt(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return hne(t,e),lne(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,u=i.dataKey,d=i.valueKey,f=Lt(this.props,!1),p=Lt(o,!1),m=Lt(l,!1),x=o&&o.offsetRadius||20,v=n.map(function(y,b){var k=(y.startAngle+y.endAngle)/2,N=Ir(y.cx,y.cy,y.outerRadius+x,k),w=Yr(Yr(Yr(Yr({},f),y),{},{stroke:"none"},p),{},{index:b,textAnchor:t.getTextAnchor(N.x,y.cx)},N),T=Yr(Yr(Yr(Yr({},f),y),{},{fill:"none",stroke:y.fill},m),{},{index:b,points:[Ir(y.cx,y.cy,y.outerRadius,k),N]}),E=u;return ir(u)&&ir(d)?E="value":ir(u)&&(E=d),de.createElement(jr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},l&&t.renderLabelLineItem(l,T,"line"),t.renderLabelItem(o,w,kn(y,E)))});return de.createElement(jr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,u=i.inactiveShape;return n.map(function(d,f){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var p=s.isActiveIndex(f),m=u&&s.hasActiveIndex()?u:null,x=p?o:m,v=Yr(Yr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return de.createElement(jr,su({ref:function(b){b&&!s.sectorRefs.includes(b)&&s.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Jl(s.props,d,f),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(f)}),de.createElement(GR,su({option:x,isActive:p,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state,m=p.prevSectors,x=p.prevIsAnimationActive;return de.createElement(xi,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,b=[],k=i&&i[0],N=k.startAngle;return i.forEach(function(w,T){var E=m&&m[T],S=T>0?ws(w,"paddingAngle",0):0;if(E){var _=fa(E.endAngle-E.startAngle,w.endAngle-w.startAngle),A=Yr(Yr({},w),{},{startAngle:N+S,endAngle:N+_(y)+S});b.push(A),N=A.endAngle}else{var P=w.endAngle,B=w.startAngle,I=fa(0,P-B),O=I(y),L=Yr(Yr({},w),{},{startAngle:N+S,endAngle:N+O+S});b.push(L),N=L.endAngle}}),de.createElement(jr,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Zu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,u=s.label,d=s.cx,f=s.cy,p=s.innerRadius,m=s.outerRadius,x=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!lt(d)||!lt(f)||!lt(p)||!lt(m))return null;var y=ar("recharts-pie",l);return de.createElement(jr,{tabIndex:this.props.rootTabIndex,className:y,ref:function(k){n.pieRef=k}},this.renderSectors(),u&&this.renderLabels(o),na.renderCallByParent(this.props,null,!1),(!x||v)&&Pi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(de.isValidElement(n))return de.cloneElement(n,s);if(Kt(n))return n(s);var o=ar("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return de.createElement(om,su({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(de.isValidElement(n))return de.cloneElement(n,s);var o=i;if(Kt(n)&&(o=n(s),de.isValidElement(o)))return o;var l=ar("recharts-pie-label-text",typeof n!="boolean"&&!Kt(n)?n.className:"");return de.createElement(Zl,su({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(F.PureComponent);kp=Li;Fs(Li,"displayName","Pie");Fs(Li,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ol.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Fs(Li,"parseDeltaAngle",function(e,t){var r=La(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Fs(Li,"getRealPieData",function(e){var t=e.data,r=e.children,n=Lt(e,!1),s=js(r,Ql);return t&&t.length?t.map(function(i,o){return Yr(Yr(Yr({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Yr(Yr({},n),i.props)}):[]});Fs(Li,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=AR(s,i),l=n+Ba(e.cx,s,s/2),u=r+Ba(e.cy,i,i/2),d=Ba(e.innerRadius,o,0),f=Ba(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}});Fs(Li,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Yr(Yr({},t.type.defaultProps),t.props):t.props,s=kp.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,u=n.paddingAngle,d=n.dataKey,f=n.nameKey,p=n.valueKey,m=n.tooltipType,x=Math.abs(n.minAngle),v=kp.parseCoordinateOfPie(n,r),y=kp.parseDeltaAngle(o,l),b=Math.abs(y),k=d;ir(d)&&ir(p)?(pi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k="value"):ir(d)&&(pi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),k=p);var N=s.filter(function(A){return kn(A,k,0)!==0}).length,w=(b>=360?N:N-1)*u,T=b-N*x-w,E=s.reduce(function(A,P){var B=kn(P,k,0);return A+(lt(B)?B:0)},0),S;if(E>0){var _;S=s.map(function(A,P){var B=kn(A,k,0),I=kn(A,f,P),O=(lt(B)?B:0)/E,L;P?L=_.endAngle+La(y)*u*(B!==0?1:0):L=o;var X=L+La(y)*((B!==0?x:0)+O*T),U=(L+X)/2,V=(v.innerRadius+v.outerRadius)/2,ne=[{name:I,value:B,payload:A,dataKey:k,type:m}],ee=Ir(v.cx,v.cy,V,U);return _=Yr(Yr(Yr({percent:O,cornerRadius:i,name:I,tooltipPayload:ne,midAngle:U,middleRadius:V,tooltipPosition:ee},A),v),{},{value:kn(A,k),startAngle:L,endAngle:X,payload:A,paddingAngle:La(y)*u}),_})}return Yr(Yr({},v),{},{sectors:S,data:s})});var f1,Q3;function pne(){if(Q3)return f1;Q3=1;function e(t){return t&&t.length?t[0]:void 0}return f1=e,f1}var p1,Z3;function mne(){return Z3||(Z3=1,p1=pne()),p1}var gne=mne();const xne=$r(gne);var yne=["key"];function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function vne(e,t){if(e==null)return{};var r=bne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ym(){return ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ym.apply(this,arguments)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(n){no(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QR(n.key),n)}}function jne(e,t,r){return t&&tP(e.prototype,t),r&&tP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nne(e,t,r){return t=vm(t),kne(e,JR()?Reflect.construct(t,r||[],vm(e).constructor):t.apply(e,r))}function kne(e,t){if(t&&(Cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sne(e)}function Sne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JR=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function _ne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gN(e,t)}function gN(e,t){return gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},gN(e,t)}function no(e,t,r){return t=QR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QR(e){var t=Ene(e,"string");return Cu(t)=="symbol"?t:t+""}function Ene(e,t){if(Cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wl=(function(e){function t(){var r;wne(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Nne(this,t,[].concat(s)),no(r,"state",{isAnimationFinished:!1}),no(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Kt(o)&&o()}),no(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Kt(o)&&o()}),no(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),no(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return _ne(t,e),jne(t,[{key:"renderDots",value:function(n){var s=this.props,i=s.dot,o=s.dataKey,l=Lt(this.props,!1),u=Lt(i,!0),d=n.map(function(f,p){var m=Ra(Ra(Ra({key:"dot-".concat(p),r:3},l),u),{},{dataKey:o,cx:f.x,cy:f.y,index:p,payload:f});return t.renderDotItem(i,m)});return de.createElement(jr,{className:"recharts-radar-dots"},d)}},{key:"renderPolygonStatically",value:function(n){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,u=s.baseLinePoints,d=s.connectNulls,f;return de.isValidElement(i)?f=de.cloneElement(i,Ra(Ra({},this.props),{},{points:n})):Kt(i)?f=i(Ra(Ra({},this.props),{},{points:n})):f=de.createElement(HR,ym({},Lt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?u:null,connectNulls:d})),de.createElement(jr,{className:"recharts-radar-polygon"},f,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state.prevPoints;return de.createElement(xi,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,v=p&&p.length/i.length,y=i.map(function(b,k){var N=p&&p[Math.floor(k*v)];if(N){var w=fa(N.x,b.x),T=fa(N.y,b.y);return Ra(Ra({},b),{},{x:w(x),y:T(x)})}var E=fa(b.cx,b.x),S=fa(b.cy,b.y);return Ra(Ra({},b),{},{x:E(x),y:S(x)})});return n.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!Zu(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(s||!o||!o.length)return null;var u=this.state.isAnimationFinished,d=ar("recharts-radar",i);return de.createElement(jr,{className:d},this.renderPolygon(),(!l||u)&&Pi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,s){var i;if(de.isValidElement(n))i=de.cloneElement(n,s);else if(Kt(n))i=n(s);else{var o=s.key,l=vne(s,yne);i=de.createElement(Lf,ym({},l,{key:o,className:ar("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(F.PureComponent);no(Wl,"displayName","Radar");no(Wl,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!ol.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});no(Wl,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,u=!1,d=[],f=r.type!=="number"?i??0:0;n.forEach(function(m,x){var v=kn(m,r.dataKey,x),y=kn(m,s),b=r.scale(v)+f,k=Array.isArray(y)?PR(y):y,N=ir(k)?void 0:t.scale(k);Array.isArray(y)&&y.length>=2&&(u=!0),d.push(Ra(Ra({},Ir(o,l,N,b)),{},{name:v,value:y,cx:o,cy:l,radius:N,angle:b,payload:m}))});var p=[];return u&&d.forEach(function(m){if(Array.isArray(m.value)){var x=xne(m.value),v=ir(x)?void 0:t.scale(x);p.push(Ra(Ra({},m),{},{radius:v},Ir(o,l,v,m.angle)))}else p.push(m)}),{points:d,isRange:u,baseLinePoints:p}});var m1,rP;function Ane(){if(rP)return m1;rP=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,u=t(e((s-n)/(i||1)),0),d=Array(u);u--;)d[o?u:++l]=n,n+=i;return d}return m1=r,m1}var g1,nP;function ZR(){if(nP)return g1;nP=1;var e=mM(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return g1=n,g1}var x1,aP;function Tne(){if(aP)return x1;aP=1;var e=Ane(),t=gg(),r=ZR();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return x1=n,x1}var y1,sP;function Cne(){if(sP)return y1;sP=1;var e=Tne(),t=e();return y1=t,y1}var One=Cne();const bm=$r(One);function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(n){eF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eF(e,t,r){return t=Pne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pne(e){var t=Ine(e,"string");return ff(t)=="symbol"?t:t+""}function Ine(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dne=["Webkit","Moz","O","ms"],Mne=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Dne.reduce(function(i,o){return oP(oP({},i),{},eF({},o+n,r))},{});return s[t]=r,s};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function wm(){return wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wm.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){hs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rF(n.key),n)}}function Fne(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ne(e,t,r){return t=jm(t),Lne(e,tF()?Reflect.construct(t,r||[],jm(e).constructor):t.apply(e,r))}function Lne(e,t){if(t&&(Ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bne(e)}function Bne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tF=function(){return!!e})()}function jm(e){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jm(e)}function Une(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xN(e,t)}function xN(e,t){return xN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},xN(e,t)}function hs(e,t,r){return t=rF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rF(e){var t=Hne(e,"string");return Ou(t)=="symbol"?t:t+""}function Hne(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qne=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var u=r.length,d=uh().domain(bm(0,u)).range([i,i+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:f}},uP=function(t){return t.changedTouches&&!!t.changedTouches.length},Pu=(function(e){function t(r){var n;return Rne(this,t),n=$ne(this,t,[r]),hs(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),hs(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),hs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),hs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),hs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),hs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),hs(n,"handleSlideDragStart",function(s){var i=uP(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Une(t,e),Fne(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,u=l.gap,d=l.data,f=d.length-1,p=Math.min(s,i),m=Math.max(s,i),x=t.getIndexInRange(o,p),v=t.getIndexInRange(o,m);return{startIndex:x-x%u,endIndex:v===f?f:v-v%u}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,u=kn(i[n],l,n);return Kt(o)?o(u,n):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,u=this.props,d=u.x,f=u.width,p=u.travellerWidth,m=u.startIndex,x=u.endIndex,v=u.onChange,y=n.pageX-i;y>0?y=Math.min(y,d+f-p-l,d+f-p-o):y<0&&(y=Math.max(y,d-o,d-l));var b=this.getIndex({startX:o+y,endX:l+y});(b.startIndex!==m||b.endIndex!==x)&&v&&v(b),this.setState({startX:o+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=uP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,u=s.startX,d=this.state[o],f=this.props,p=f.x,m=f.width,x=f.travellerWidth,v=f.onChange,y=f.gap,b=f.data,k={startX:this.state.startX,endX:this.state.endX},N=n.pageX-i;N>0?N=Math.min(N,p+m-x-d):N<0&&(N=Math.max(N,p-d)),k[o]=d+N;var w=this.getIndex(k),T=w.startIndex,E=w.endIndex,S=function(){var A=b.length-1;return o==="startX"&&(l>u?T%y===0:E%y===0)||l<u&&E===A||o==="endX"&&(l>u?E%y===0:T%y===0)||l>u&&E===A};this.setState(hs(hs({},o,d+N),"brushMoveStartX",n.pageX),function(){v&&S()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,u=o.startX,d=o.endX,f=this.state[s],p=l.indexOf(f);if(p!==-1){var m=p+n;if(!(m===-1||m>=l.length)){var x=l[m];s==="startX"&&x>=d||s==="endX"&&x<=u||this.setState(hs({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.fill,d=n.stroke;return de.createElement("rect",{stroke:d,fill:u,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.data,d=n.children,f=n.padding,p=F.Children.only(d);return p?de.cloneElement(p,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,u=this.props,d=u.y,f=u.travellerWidth,p=u.height,m=u.traveller,x=u.ariaLabel,v=u.data,y=u.startIndex,b=u.endIndex,k=Math.max(n,this.props.x),N=v1(v1({},Lt(this.props,!1)),{},{x:k,y:d,width:f,height:p}),w=x||"Min value: ".concat((i=v[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[b])===null||o===void 0?void 0:o.name);return de.createElement(jr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,N))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,u=i.stroke,d=i.travellerWidth,f=Math.min(n,s)+d,p=Math.max(Math.abs(s-n)-d,0);return de.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,u=n.travellerWidth,d=n.stroke,f=this.state,p=f.startX,m=f.endX,x=5,v={pointerEvents:"none",fill:d};return de.createElement(jr,{className:"recharts-brush-texts"},de.createElement(Zl,wm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,m)-x,y:o+l/2},v),this.getTextOfTick(s)),de.createElement(Zl,wm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,m)+u+x,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,u=n.y,d=n.width,f=n.height,p=n.alwaysShowText,m=this.state,x=m.startX,v=m.endX,y=m.isTextActive,b=m.isSlideMoving,k=m.isTravellerMoving,N=m.isTravellerFocused;if(!s||!s.length||!lt(l)||!lt(u)||!lt(d)||!lt(f)||d<=0||f<=0)return null;var w=ar("recharts-brush",i),T=de.Children.count(o)===1,E=Mne("userSelect","none");return de.createElement(jr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(y||b||k||N||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,u=n.stroke,d=Math.floor(i+l/2)-1;return de.createElement(de.Fragment,null,de.createElement("rect",{x:s,y:i,width:o,height:l,fill:u,stroke:"none"}),de.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),de.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return de.isValidElement(n)?i=de.cloneElement(n,s):Kt(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,u=n.travellerWidth,d=n.updateId,f=n.startIndex,p=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return v1({prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?qne({data:i,width:o,x:l,travellerWidth:u,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([l,l+o-u]);var m=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var u=Math.floor((o+l)/2);n[u]>s?l=u:o=u}return s>=n[l]?l:o}}])})(F.PureComponent);hs(Pu,"displayName","Brush");hs(Pu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var b1,dP;function zne(){if(dP)return b1;dP=1;var e=F2();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return b1=t,b1}var w1,hP;function Wne(){if(hP)return w1;hP=1;var e=K5(),t=$i(),r=zne(),n=ts(),s=gg();function i(o,l,u){var d=n(o)?e:r;return u&&s(o,l,u)&&(l=void 0),d(o,t(l,3))}return w1=i,w1}var Kne=Wne();const Vne=$r(Kne);var Ii=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},j1,fP;function Gne(){if(fP)return j1;fP=1;var e=uM();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return j1=t,j1}var N1,pP;function Yne(){if(pP)return N1;pP=1;var e=Gne(),t=lM(),r=$i();function n(s,i){var o={};return i=r(i,3),t(s,function(l,u,d){e(o,u,i(l,u,d))}),o}return N1=n,N1}var Xne=Yne();const Jne=$r(Xne);var k1,mP;function Qne(){if(mP)return k1;mP=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return k1=e,k1}var S1,gP;function Zne(){if(gP)return S1;gP=1;var e=F2();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return S1=t,S1}var _1,xP;function eae(){if(xP)return _1;xP=1;var e=Qne(),t=Zne(),r=$i(),n=ts(),s=gg();function i(o,l,u){var d=n(o)?e:t;return u&&s(o,l,u)&&(l=void 0),d(o,r(l,3))}return _1=i,_1}var tae=eae();const nF=$r(tae);var rae=["x","y"];function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yN.apply(this,arguments)}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(n){nae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nae(e,t,r){return t=aae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aae(e){var t=sae(e,"string");return pf(t)=="symbol"?t:t+""}function sae(e,t){if(pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iae(e,t){if(e==null)return{};var r=oae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lae(e,t){var r=e.x,n=e.y,s=iae(e,rae),i="".concat(r),o=parseInt(i,10),l="".concat(n),u=parseInt(l,10),d="".concat(t.height||s.height),f=parseInt(d,10),p="".concat(t.width||s.width),m=parseInt(p,10);return Gd(Gd(Gd(Gd(Gd({},t),s),o?{x:o}:{}),u?{y:u}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function vP(e){return de.createElement(GR,yN({shapeType:"rectangle",propTransformer:lae,activeClassName:"recharts-active-bar"},e))}var cae=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=lt(n)||oz(n);return i?t(n,s):(i||tc(),r)}},uae=["value","background"],aF;function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function dae(e,t){if(e==null)return{};var r=hae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(this,arguments)}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){Go(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iF(n.key),n)}}function pae(e,t,r){return t&&wP(e.prototype,t),r&&wP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mae(e,t,r){return t=km(t),gae(e,sF()?Reflect.construct(t,r||[],km(e).constructor):t.apply(e,r))}function gae(e,t){if(t&&(Iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xae(e)}function xae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sF=function(){return!!e})()}function km(e){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},km(e)}function yae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vN(e,t)}function vN(e,t){return vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},vN(e,t)}function Go(e,t,r){return t=iF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=vae(e,"string");return Iu(t)=="symbol"?t:t+""}function vae(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yr=(function(e){function t(){var r;fae(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=mae(this,t,[].concat(s)),Go(r,"state",{isAnimationFinished:!1}),Go(r,"id",Xu("recharts-bar-")),Go(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Go(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return yae(t,e),pae(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,u=i.activeIndex,d=i.activeBar,f=Lt(this.props,!1);return n&&n.map(function(p,m){var x=m===u,v=x?d:o,y=En(En(En({},f),p),{},{isActive:x,option:v,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return de.createElement(jr,Nm({className:"recharts-bar-rectangle"},Jl(s.props,p,m),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(m)}),de.createElement(vP,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,p=s.animationId,m=this.state.prevData;return de.createElement(xi,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,y=i.map(function(b,k){var N=m&&m[k];if(N){var w=fa(N.x,b.x),T=fa(N.y,b.y),E=fa(N.width,b.width),S=fa(N.height,b.height);return En(En({},b),{},{x:w(v),y:T(v),width:E(v),height:S(v)})}if(o==="horizontal"){var _=fa(0,b.height),A=_(v);return En(En({},b),{},{y:b.y+b.height-A,height:A})}var P=fa(0,b.width),B=P(v);return En(En({},b),{},{width:B})});return de.createElement(jr,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Zu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,u=Lt(this.props.background,!1);return i.map(function(d,f){d.value;var p=d.background,m=dae(d,uae);if(!p)return null;var x=En(En(En(En(En({},m),{},{fill:"#eee"},p),u),Jl(n.props,d,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return de.createElement(vP,Nm({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=js(f,$f);if(!p)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,x=function(b,k){var N=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:N,errorVal:kn(b,k)}},v={clipPath:n?"url(#clipPath-".concat(s,")"):null};return de.createElement(jr,v,p.map(function(y){return de.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,offset:m,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,u=n.yAxis,d=n.left,f=n.top,p=n.width,m=n.height,x=n.isAnimationActive,v=n.background,y=n.id;if(s||!i||!i.length)return null;var b=this.state.isAnimationFinished,k=ar("recharts-bar",o),N=l&&l.allowDataOverflow,w=u&&u.allowDataOverflow,T=N||w,E=ir(y)?this.id:y;return de.createElement(jr,{className:k},N||w?de.createElement("defs",null,de.createElement("clipPath",{id:"clipPath-".concat(E)},de.createElement("rect",{x:N?d:d-p/2,y:w?f:f-m/2,width:N?p:p*2,height:w?m:m*2}))):null,de.createElement(jr,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(E,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,E),(!x||b)&&Pi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(F.PureComponent);aF=yr;Go(yr,"displayName","Bar");Go(yr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ol.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Go(yr,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,u=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,p=e.displayedData,m=e.offset,x=jQ(n,r);if(!x)return null;var v=t.layout,y=r.type.defaultProps,b=y!==void 0?En(En({},y),r.props):r.props,k=b.dataKey,N=b.children,w=b.minPointSize,T=v==="horizontal"?o:i,E=d?T.scale.domain():null,S=TQ({numericAxis:T}),_=js(N,Ql),A=p.map(function(P,B){var I,O,L,X,U,V;d?I=NQ(d[f+B],E):(I=kn(P,k),Array.isArray(I)||(I=[S,I]));var ne=cae(w,aF.defaultProps.minPointSize)(I[1],B);if(v==="horizontal"){var ee,R=[o.scale(I[0]),o.scale(I[1])],se=R[0],z=R[1];O=zO({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:P,index:B}),L=(ee=z??se)!==null&&ee!==void 0?ee:void 0,X=x.size;var M=se-z;if(U=Number.isNaN(M)?0:M,V={x:O,y:o.y,width:X,height:o.height},Math.abs(ne)>0&&Math.abs(U)<Math.abs(ne)){var J=La(U||ne)*(Math.abs(ne)-Math.abs(U));L-=J,U+=J}}else{var te=[i.scale(I[0]),i.scale(I[1])],ie=te[0],me=te[1];if(O=ie,L=zO({axis:o,ticks:u,bandSize:s,offset:x.offset,entry:P,index:B}),X=me-ie,U=x.size,V={x:i.x,y:L,width:i.width,height:U},Math.abs(ne)>0&&Math.abs(X)<Math.abs(ne)){var ve=La(X||ne)*(Math.abs(ne)-Math.abs(X));X+=ve}}return En(En(En({},P),{},{x:O,y:L,width:X,height:U,value:d?I:I[1],payload:P,background:V},_&&_[B]&&_[B].props),{},{tooltipPayload:[_R(r,P)],tooltipPosition:{x:O+X/2,y:L+U/2}})});return En({data:A,layout:v},m)});function mf(e){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(e)}function bae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oF(n.key),n)}}function wae(e,t,r){return t&&jP(e.prototype,t),r&&jP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){Pg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pg(e,t,r){return t=oF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oF(e){var t=jae(e,"string");return mf(t)=="symbol"?t:t+""}function jae(e,t){if(mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lF=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.layout,d=t.children,f=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!fs(d,yr);return f.reduce(function(x,v){var y=r[v],b=y.orientation,k=y.domain,N=y.padding,w=N===void 0?{}:N,T=y.mirror,E=y.reversed,S="".concat(b).concat(T?"Mirror":""),_,A,P,B,I;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=k[1]-k[0],L=1/0,X=y.categoricalDomain.sort(uz);if(X.forEach(function(te,ie){ie>0&&(L=Math.min((te||0)-(X[ie-1]||0),L))}),Number.isFinite(L)){var U=L/O,V=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(_=U*V/2),y.padding==="no-gap"){var ne=Ba(t.barCategoryGap,U*V),ee=U*V/2;_=ee-ne-(ee-ne)/V*ne}}}s==="xAxis"?A=[n.left+(w.left||0)+(_||0),n.left+n.width-(w.right||0)-(_||0)]:s==="yAxis"?A=u==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(_||0),n.top+n.height-(w.bottom||0)-(_||0)]:A=y.range,E&&(A=[A[1],A[0]]);var R=jR(y,i,m),se=R.scale,z=R.realScaleType;se.domain(k).range(A),NR(se);var M=kR(se,ai(ai({},y),{},{realScaleType:z}));s==="xAxis"?(I=b==="top"&&!T||b==="bottom"&&T,P=n.left,B=p[S]-I*y.height):s==="yAxis"&&(I=b==="left"&&!T||b==="right"&&T,P=p[S]-I*y.width,B=n.top);var J=ai(ai(ai({},y),M),{},{realScaleType:z,x:P,y:B,scale:se,width:s==="xAxis"?n.width:y.width,height:s==="yAxis"?n.height:y.height});return J.bandSize=am(J,M),!y.hide&&s==="xAxis"?p[S]+=(I?-1:1)*J.height:y.hide||(p[S]+=(I?-1:1)*J.width),ai(ai({},x),{},Pg({},v,J))},{})},cF=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},Nae=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return cF({x:r,y:n},{x:s,y:i})},uF=(function(){function e(t){bae(this,e),this.scale=t}return wae(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();Pg(uF,"EPS",1e-4);var hk=function(t){var r=Object.keys(t).reduce(function(n,s){return ai(ai({},n),{},Pg({},s,uF.create(t[s])))},{});return ai(ai({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Jne(s,function(u,d){return r[d].apply(u,{bandAware:o,position:l})})},isInRange:function(s){return nF(s,function(i,o){return r[o].isInRange(i)})}})};function kae(e){return(e%180+180)%180}var Sae=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=kae(s),o=i*Math.PI/180,l=Math.atan(n/r),u=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},E1,kP;function _ae(){if(kP)return E1;kP=1;var e=$i(),t=If(),r=pg();function n(s){return function(i,o,l){var u=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(p){return d(u[p],p,u)}}var f=s(i,o,l);return f>-1?u[d?i[f]:f]:void 0}}return E1=n,E1}var A1,SP;function Eae(){if(SP)return A1;SP=1;var e=ZR();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return A1=t,A1}var T1,_P;function Aae(){if(_P)return T1;_P=1;var e=nM(),t=$i(),r=Eae(),n=Math.max;function s(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:r(l);return d<0&&(d=n(u+d,0)),e(i,t(o,3),d)}return T1=s,T1}var C1,EP;function Tae(){if(EP)return C1;EP=1;var e=_ae(),t=Aae(),r=e(t);return C1=r,C1}var Cae=Tae();const Oae=$r(Cae);var Pae=v5();const Iae=$r(Pae);var Dae=Iae(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),fk=F.createContext(void 0),pk=F.createContext(void 0),dF=F.createContext(void 0),hF=F.createContext({}),fF=F.createContext(void 0),pF=F.createContext(0),mF=F.createContext(0),AP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,u=t.width,d=t.height,f=Dae(i);return de.createElement(fk.Provider,{value:n},de.createElement(pk.Provider,{value:s},de.createElement(hF.Provider,{value:i},de.createElement(dF.Provider,{value:f},de.createElement(fF.Provider,{value:o},de.createElement(pF.Provider,{value:d},de.createElement(mF.Provider,{value:u},l)))))))},Mae=function(){return F.useContext(fF)},gF=function(t){var r=F.useContext(fk);r==null&&tc();var n=r[t];return n==null&&tc(),n},Rae=function(){var t=F.useContext(fk);return Ko(t)},Fae=function(){var t=F.useContext(pk),r=Oae(t,function(n){return nF(n.domain,Number.isFinite)});return r||Ko(t)},xF=function(t){var r=F.useContext(pk);r==null&&tc();var n=r[t];return n==null&&tc(),n},$ae=function(){var t=F.useContext(dF);return t},Lae=function(){return F.useContext(hF)},mk=function(){return F.useContext(mF)},gk=function(){return F.useContext(pF)};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function Bae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vF(n.key),n)}}function Hae(e,t,r){return t&&Uae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qae(e,t,r){return t=Sm(t),zae(e,yF()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function zae(e,t){if(t&&(Du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wae(e)}function Wae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yF=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function Kae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bN(e,t)}function bN(e,t){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bN(e,t)}function TP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(r),!0).forEach(function(n){xk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xk(e,t,r){return t=vF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vF(e){var t=Vae(e,"string");return Du(t)=="symbol"?t:t+""}function Vae(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gae(e,t){return Qae(e)||Jae(e,t)||Xae(e,t)||Yae()}function Yae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xae(e,t){if(e){if(typeof e=="string")return OP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OP(e,t)}}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Qae(e){if(Array.isArray(e))return e}function wN(){return wN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wN.apply(this,arguments)}var Zae=function(t,r){var n;return de.isValidElement(t)?n=de.cloneElement(t,r):Kt(t)?n=t(r):n=de.createElement("line",wN({},r,{className:"recharts-reference-line-line"})),n},ese=function(t,r,n,s,i,o,l,u,d){var f=i.x,p=i.y,m=i.width,x=i.height;if(n){var v=d.y,y=t.y.apply(v,{position:o});if(Ii(d,"discard")&&!t.y.isInRange(y))return null;var b=[{x:f+m,y},{x:f,y}];return u==="left"?b.reverse():b}if(r){var k=d.x,N=t.x.apply(k,{position:o});if(Ii(d,"discard")&&!t.x.isInRange(N))return null;var w=[{x:N,y:p+x},{x:N,y:p}];return l==="top"?w.reverse():w}if(s){var T=d.segment,E=T.map(function(S){return t.apply(S,{position:o})});return Ii(d,"discard")&&Vne(E,function(S){return!t.isInRange(S)})?null:E}return null};function tse(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,u=e.alwaysShow,d=Mae(),f=gF(s),p=xF(i),m=$ae();if(!d||!m)return null;pi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=hk({x:f.scale,y:p.scale}),v=zn(t),y=zn(r),b=n&&n.length===2,k=ese(x,v,y,b,m,e.position,f.orientation,p.orientation,e);if(!k)return null;var N=Gae(k,2),w=N[0],T=w.x,E=w.y,S=N[1],_=S.x,A=S.y,P=Ii(e,"hidden")?"url(#".concat(d,")"):void 0,B=CP(CP({clipPath:P},Lt(e,!0)),{},{x1:T,y1:E,x2:_,y2:A});return de.createElement(jr,{className:ar("recharts-reference-line",l)},Zae(o,B),na.renderCallByParent(e,Nae({x1:T,y1:E,x2:_,y2:A})))}var yk=(function(e){function t(){return Bae(this,t),qae(this,t,arguments)}return Kae(t,e),Hae(t,[{key:"render",value:function(){return de.createElement(tse,this.props)}}])})(de.Component);xk(yk,"displayName","ReferenceLine");xk(yk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function jN(){return jN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jN.apply(this,arguments)}function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(n){Ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wF(n.key),n)}}function ase(e,t,r){return t&&nse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sse(e,t,r){return t=_m(t),ise(e,bF()?Reflect.construct(t,r||[],_m(e).constructor):t.apply(e,r))}function ise(e,t){if(t&&(Mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ose(e)}function ose(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bF=function(){return!!e})()}function _m(e){return _m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_m(e)}function lse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NN(e,t)}function NN(e,t){return NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},NN(e,t)}function Ig(e,t,r){return t=wF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wF(e){var t=cse(e,"string");return Mu(t)=="symbol"?t:t+""}function cse(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var use=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=hk({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Ii(t,"discard")&&!o.isInRange(l)?null:l},Dg=(function(e){function t(){return rse(this,t),sse(this,t,arguments)}return lse(t,e),ase(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,u=n.clipPathId,d=zn(s),f=zn(i);if(pi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=use(this.props);if(!p)return null;var m=p.x,x=p.y,v=this.props,y=v.shape,b=v.className,k=Ii(this.props,"hidden")?"url(#".concat(u,")"):void 0,N=IP(IP({clipPath:k},Lt(this.props,!0)),{},{cx:m,cy:x});return de.createElement(jr,{className:ar("recharts-reference-dot",b)},t.renderDot(y,N),na.renderCallByParent(this.props,{x:m-o,y:x-o,width:2*o,height:2*o}))}}])})(de.Component);Ig(Dg,"displayName","ReferenceDot");Ig(Dg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ig(Dg,"renderDot",function(e,t){var r;return de.isValidElement(e)?r=de.cloneElement(e,t):Kt(e)?r=e(t):r=de.createElement(Lf,jN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kN.apply(this,arguments)}function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(n){Mg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NF(n.key),n)}}function fse(e,t,r){return t&&hse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pse(e,t,r){return t=Em(t),mse(e,jF()?Reflect.construct(t,r||[],Em(e).constructor):t.apply(e,r))}function mse(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gse(e)}function gse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jF=function(){return!!e})()}function Em(e){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Em(e)}function xse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SN(e,t)}function SN(e,t){return SN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},SN(e,t)}function Mg(e,t,r){return t=NF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NF(e){var t=yse(e,"string");return Ru(t)=="symbol"?t:t+""}function yse(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vse=function(t,r,n,s,i){var o=i.x1,l=i.x2,u=i.y1,d=i.y2,f=i.xAxis,p=i.yAxis;if(!f||!p)return null;var m=hk({x:f.scale,y:p.scale}),x={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(u,{position:"start"}):m.y.rangeMin},v={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Ii(i,"discard")&&(!m.isInRange(x)||!m.isInRange(v))?null:cF(x,v)},Rg=(function(e){function t(){return dse(this,t),pse(this,t,arguments)}return xse(t,e),fse(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,u=n.className,d=n.alwaysShow,f=n.clipPathId;pi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=zn(s),m=zn(i),x=zn(o),v=zn(l),y=this.props.shape;if(!p&&!m&&!x&&!v&&!y)return null;var b=vse(p,m,x,v,this.props);if(!b&&!y)return null;var k=Ii(this.props,"hidden")?"url(#".concat(f,")"):void 0;return de.createElement(jr,{className:ar("recharts-reference-area",u)},t.renderRect(y,MP(MP({clipPath:k},Lt(this.props,!0)),b)),na.renderCallByParent(this.props,b))}}])})(de.Component);Mg(Rg,"displayName","ReferenceArea");Mg(Rg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Mg(Rg,"renderRect",function(e,t){var r;return de.isValidElement(e)?r=de.cloneElement(e,t):Kt(e)?r=e(t):r=de.createElement(dk,kN({},t,{className:"recharts-reference-area-rect"})),r});function kF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function bse(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Sae(n,r)}function wse(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Am(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function jse(e,t){return kF(e,t+1)}function Nse(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,u=0,d=1,f=o,p=function(){var v=n?.[u];if(v===void 0)return{v:kF(n,d)};var y=u,b,k=function(){return b===void 0&&(b=r(v,y)),b},N=v.coordinate,w=u===0||Am(e,N,k,f,l);w||(u=0,f=o,d+=1),w&&(f=N+e*(k()/2+s),u+=d)},m;d<=i.length;)if(m=p(),m)return m.v;return[]}function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(n){kse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kse(e,t,r){return t=Sse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sse(e){var t=_se(e,"string");return gf(t)=="symbol"?t:t+""}function _se(e,t){if(gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ese(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,u=t.end,d=function(m){var x=i[m],v,y=function(){return v===void 0&&(v=r(x,m)),v};if(m===o-1){var b=e*(x.coordinate+e*y()/2-u);i[m]=x=Na(Na({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[m]=x=Na(Na({},x),{},{tickCoord:x.coordinate});var k=Am(e,x.tickCoord,y,l,u);k&&(u=x.tickCoord-e*(y()/2+s),i[m]=Na(Na({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function Ase(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,u=t.start,d=t.end;if(i){var f=n[l-1],p=r(f,l-1),m=e*(f.coordinate+e*p/2-d);o[l-1]=f=Na(Na({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var x=Am(e,f.tickCoord,function(){return p},u,d);x&&(d=f.tickCoord-e*(p/2+s),o[l-1]=Na(Na({},f),{},{isShow:!0}))}for(var v=i?l-1:l,y=function(N){var w=o[N],T,E=function(){return T===void 0&&(T=r(w,N)),T};if(N===0){var S=e*(w.coordinate-e*E()/2-u);o[N]=w=Na(Na({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[N]=w=Na(Na({},w),{},{tickCoord:w.coordinate});var _=Am(e,w.tickCoord,E,u,d);_&&(u=w.tickCoord+e*(E()/2+s),o[N]=Na(Na({},w),{},{isShow:!0}))},b=0;b<v;b++)y(b);return o}function vk(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,u=e.interval,d=e.tickFormatter,f=e.unit,p=e.angle;if(!s||!s.length||!n)return[];if(lt(u)||ol.isSsr)return jse(s,typeof u=="number"&&lt(u)?u:0);var m=[],x=l==="top"||l==="bottom"?"width":"height",v=f&&x==="width"?ch(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(w,T){var E=Kt(d)?d(w.value,T):w.value;return x==="width"?bse(ch(E,{fontSize:t,letterSpacing:r}),v,p):ch(E,{fontSize:t,letterSpacing:r})[x]},b=s.length>=2?La(s[1].coordinate-s[0].coordinate):1,k=wse(i,b,x);return u==="equidistantPreserveStart"?Nse(b,k,y,s,o):(u==="preserveStart"||u==="preserveStartEnd"?m=Ase(b,k,y,s,o,u==="preserveStartEnd"):m=Ese(b,k,y,s,o),m.filter(function(N){return N.isShow}))}var Tse=["viewBox"],Cse=["viewBox"],Ose=["ticks"];function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(this,arguments)}function FP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(r),!0).forEach(function(n){bk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O1(e,t){if(e==null)return{};var r=Pse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ise(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_F(n.key),n)}}function Dse(e,t,r){return t&&$P(e.prototype,t),r&&$P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mse(e,t,r){return t=Tm(t),Rse(e,SF()?Reflect.construct(t,r||[],Tm(e).constructor):t.apply(e,r))}function Rse(e,t){if(t&&(Fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fse(e)}function Fse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SF=function(){return!!e})()}function Tm(e){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tm(e)}function $se(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_N(e,t)}function _N(e,t){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_N(e,t)}function bk(e,t,r){return t=_F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _F(e){var t=Lse(e,"string");return Fu(t)=="symbol"?t:t+""}function Lse(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ad=(function(e){function t(r){var n;return Ise(this,t),n=Mse(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return $se(t,e),Dse(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=O1(n,Tse),l=this.props,u=l.viewBox,d=O1(l,Cse);return!du(i,u)||!du(o,d)||!du(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,u=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,x,v,y,b,k,N,w=p?-1:1,T=n.tickSize||f,E=lt(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":x=v=n.coordinate,b=o+ +!p*u,y=b-w*T,N=y-w*m,k=E;break;case"left":y=b=n.coordinate,v=i+ +!p*l,x=v-w*T,k=x-w*m,N=E;break;case"right":y=b=n.coordinate,v=i+ +p*l,x=v+w*T,k=x+w*m,N=E;break;default:x=v=n.coordinate,b=o+ +p*u,y=b+w*T,N=y+w*m,k=E;break}return{line:{x1:x,y1:y,x2:v,y2:b},tick:{x:k,y:N}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.orientation,d=n.mirror,f=n.axisLine,p=Fn(Fn(Fn({},Lt(this.props,!1)),Lt(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var m=+(u==="top"&&!d||u==="bottom"&&d);p=Fn(Fn({},p),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var x=+(u==="left"&&!d||u==="right"&&d);p=Fn(Fn({},p),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return de.createElement("line",iu({},p,{className:ar("recharts-cartesian-axis-line",ws(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,u=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,m=l.unit,x=vk(Fn(Fn({},this.props),{},{ticks:n}),s,i),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=Lt(this.props,!1),k=Lt(f,!1),N=Fn(Fn({},b),{},{fill:"none"},Lt(u,!1)),w=x.map(function(T,E){var S=o.getTickLineCoord(T),_=S.line,A=S.tick,P=Fn(Fn(Fn(Fn({textAnchor:v,verticalAnchor:y},b),{},{stroke:"none",fill:d},k),A),{},{index:E,payload:T,visibleTicksCount:x.length,tickFormatter:p});return de.createElement(jr,iu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Jl(o.props,T,E)),u&&de.createElement("line",iu({},N,_,{className:ar("recharts-cartesian-axis-tick-line",ws(u,"className"))})),f&&t.renderTickItem(f,P,"".concat(Kt(p)?p(T.value,E):T.value).concat(m||"")))});return de.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,u=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var p=this.props,m=p.ticks,x=O1(p,Ose),v=m;return Kt(u)&&(v=m&&m.length>0?u(this.props):u(x)),o<=0||l<=0||!v||!v.length?null:de.createElement(jr,{className:ar("recharts-cartesian-axis",d),ref:function(b){n.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),na.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=ar(s.className,"recharts-cartesian-axis-tick-value");return de.isValidElement(n)?o=de.cloneElement(n,Fn(Fn({},s),{},{className:l})):Kt(n)?o=n(Fn(Fn({},s),{},{className:l})):o=de.createElement(Zl,iu({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(F.Component);bk(ad,"displayName","CartesianAxis");bk(ad,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Bse=["x1","y1","x2","y2","key"],Use=["offset"];function rc(e){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function LP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(r),!0).forEach(function(n){Hse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hse(e,t,r){return t=qse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qse(e){var t=zse(e,"string");return rc(t)=="symbol"?t:t+""}function zse(e,t){if(rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(this,arguments)}function BP(e,t){if(e==null)return{};var r=Wse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Kse=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,u=t.ry;return de.createElement("rect",{x:s,y:i,ry:u,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function EF(e,t){var r;if(de.isValidElement(e))r=de.cloneElement(e,t);else if(Kt(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,u=BP(t,Bse),d=Lt(u,!1);d.offset;var f=BP(d,Use);r=de.createElement("line",Ul({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Vse(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=Sa(Sa({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(u),index:u});return EF(s,d)});return de.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Gse(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=Sa(Sa({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(u),index:u});return EF(s,d)});return de.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Yse(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,u=e.horizontal,d=u===void 0?!0:u;if(!d||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,x){return m-x});s!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var v=!f[x+1],y=v?s+o-m:f[x+1]-m;if(y<=0)return null;var b=x%t.length;return de.createElement("rect",{key:"react-".concat(x),y:m,x:n,height:y,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return de.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Xse(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,u=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var f=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,x){return m-x});i!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var v=!f[x+1],y=v?i+l-m:f[x+1]-m;if(y<=0)return null;var b=x%n.length;return de.createElement("rect",{key:"react-".concat(x),x:m,y:o,width:y,height:u,stroke:"none",fill:n[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return de.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Jse=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return wR(vk(Sa(Sa(Sa({},ad.defaultProps),n),{},{ticks:oo(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Qse=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return wR(vk(Sa(Sa(Sa({},ad.defaultProps),n),{},{ticks:oo(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Vc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function da(e){var t,r,n,s,i,o,l=mk(),u=gk(),d=Lae(),f=Sa(Sa({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Vc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Vc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Vc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Vc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Vc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Vc.verticalFill,x:lt(e.x)?e.x:d.left,y:lt(e.y)?e.y:d.top,width:lt(e.width)?e.width:d.width,height:lt(e.height)?e.height:d.height}),p=f.x,m=f.y,x=f.width,v=f.height,y=f.syncWithTicks,b=f.horizontalValues,k=f.verticalValues,N=Rae(),w=Fae();if(!lt(x)||x<=0||!lt(v)||v<=0||!lt(p)||p!==+p||!lt(m)||m!==+m)return null;var T=f.verticalCoordinatesGenerator||Jse,E=f.horizontalCoordinatesGenerator||Qse,S=f.horizontalPoints,_=f.verticalPoints;if((!S||!S.length)&&Kt(E)){var A=b&&b.length,P=E({yAxis:w?Sa(Sa({},w),{},{ticks:A?b:w.ticks}):void 0,width:l,height:u,offset:d},A?!0:y);pi(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(rc(P),"]")),Array.isArray(P)&&(S=P)}if((!_||!_.length)&&Kt(T)){var B=k&&k.length,I=T({xAxis:N?Sa(Sa({},N),{},{ticks:B?k:N.ticks}):void 0,width:l,height:u,offset:d},B?!0:y);pi(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(rc(I),"]")),Array.isArray(I)&&(_=I)}return de.createElement("g",{className:"recharts-cartesian-grid"},de.createElement(Kse,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),de.createElement(Vse,Ul({},f,{offset:d,horizontalPoints:S,xAxis:N,yAxis:w})),de.createElement(Gse,Ul({},f,{offset:d,verticalPoints:_,xAxis:N,yAxis:w})),de.createElement(Yse,Ul({},f,{horizontalPoints:S})),de.createElement(Xse,Ul({},f,{verticalPoints:_})))}da.displayName="CartesianGrid";var Zse=["type","layout","connectNulls","ref"],eie=["key"];function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function UP(e,t){if(e==null)return{};var r=tie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mh.apply(this,arguments)}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(n){si(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gc(e){return sie(e)||aie(e)||nie(e)||rie()}function rie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nie(e,t){if(e){if(typeof e=="string")return EN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EN(e,t)}}function aie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sie(e){if(Array.isArray(e))return EN(e)}function EN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TF(n.key),n)}}function oie(e,t,r){return t&&qP(e.prototype,t),r&&qP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lie(e,t,r){return t=Cm(t),cie(e,AF()?Reflect.construct(t,r||[],Cm(e).constructor):t.apply(e,r))}function cie(e,t){if(t&&($u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uie(e)}function uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AF=function(){return!!e})()}function Cm(e){return Cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cm(e)}function die(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AN(e,t)}function AN(e,t){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},AN(e,t)}function si(e,t,r){return t=TF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){var t=hie(e,"string");return $u(t)=="symbol"?t:t+""}function hie(e,t){if($u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mi=(function(e){function t(){var r;iie(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=lie(this,t,[].concat(s)),si(r,"state",{isAnimationFinished:!0,totalLength:0}),si(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),si(r,"getStrokeDasharray",function(o,l,u){var d=u.reduce(function(k,N){return k+N});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,m=l-o,x=[],v=0,y=0;v<u.length;y+=u[v],++v)if(y+u[v]>p){x=[].concat(Gc(u.slice(0,v)),[p-y]);break}var b=x.length%2===0?[0,m]:[m];return[].concat(Gc(t.repeat(u,f)),Gc(x),b).map(function(k){return"".concat(k,"px")}).join(", ")}),si(r,"id",Xu("recharts-line-")),si(r,"pathRef",function(o){r.mainCurve=o}),si(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),si(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return die(t,e),oie(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=js(f,$f);if(!p)return null;var m=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:kn(y.payload,b)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return de.createElement(jr,x,p.map(function(v){return de.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,p=Lt(this.props,!1),m=Lt(u,!0),x=d.map(function(y,b){var k=ds(ds(ds({key:"dot-".concat(b),r:3},p),m),{},{index:b,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:d});return t.renderDotItem(u,k)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return de.createElement(jr,mh({className:"recharts-line-dots",key:"dots"},v),x)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,u=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=UP(l,Zse),m=ds(ds(ds({},Lt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:u,layout:d,connectNulls:f});return de.createElement(om,mh({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,u=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,m=o.animationEasing,x=o.animationId,v=o.animateNewValues,y=o.width,b=o.height,k=this.state,N=k.prevPoints,w=k.totalLength;return de.createElement(xi,{begin:f,duration:p,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var E=T.t;if(N){var S=N.length/l.length,_=l.map(function(O,L){var X=Math.floor(L*S);if(N[X]){var U=N[X],V=fa(U.x,O.x),ne=fa(U.y,O.y);return ds(ds({},O),{},{x:V(E),y:ne(E)})}if(v){var ee=fa(y*2,O.x),R=fa(b/2,O.y);return ds(ds({},O),{},{x:ee(E),y:R(E)})}return ds(ds({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(_,n,s)}var A=fa(0,w),P=A(E),B;if(u){var I="".concat(u).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});B=i.getStrokeDasharray(P,w,I)}else B=i.generateSimpleStrokeDasharray(w,P);return i.renderCurveStatically(l,n,s,{strokeDasharray:B})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.totalLength;return l&&o&&o.length&&(!d&&f>0||!Zu(d,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,u=s.className,d=s.xAxis,f=s.yAxis,p=s.top,m=s.left,x=s.width,v=s.height,y=s.isAnimationActive,b=s.id;if(i||!l||!l.length)return null;var k=this.state.isAnimationFinished,N=l.length===1,w=ar("recharts-line",u),T=d&&d.allowDataOverflow,E=f&&f.allowDataOverflow,S=T||E,_=ir(b)?this.id:b,A=(n=Lt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},P=A.r,B=P===void 0?3:P,I=A.strokeWidth,O=I===void 0?2:I,L=vz(o)?o:{},X=L.clipDot,U=X===void 0?!0:X,V=B*2+O;return de.createElement(jr,{className:w},T||E?de.createElement("defs",null,de.createElement("clipPath",{id:"clipPath-".concat(_)},de.createElement("rect",{x:T?m:m-x/2,y:E?p:p-v/2,width:T?x:x*2,height:E?v:v*2})),!U&&de.createElement("clipPath",{id:"clipPath-dots-".concat(_)},de.createElement("rect",{x:m-V/2,y:p-V/2,width:x+V,height:v+V}))):null,!N&&this.renderCurve(S,_),this.renderErrorBar(S,_),(N||o)&&this.renderDots(S,U,_),(!y||k)&&Pi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(Gc(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(Gc(o),Gc(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(de.isValidElement(n))i=de.cloneElement(n,s);else if(Kt(n))i=n(s);else{var o=s.key,l=UP(s,eie),u=ar("recharts-line-dot",typeof n!="boolean"?n.className:"");i=de.createElement(Lf,mh({key:o},l,{className:u}))}return i}}])})(F.PureComponent);si(mi,"displayName","Line");si(mi,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ol.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});si(mi,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,u=e.displayedData,d=e.offset,f=t.layout,p=u.map(function(m,x){var v=kn(m,o);return f==="horizontal"?{x:qO({axis:r,ticks:s,bandSize:l,entry:m,index:x}),y:ir(v)?null:n.scale(v),value:v,payload:m}:{x:ir(v)?null:r.scale(v),y:qO({axis:n,ticks:i,bandSize:l,entry:m,index:x}),value:v,payload:m}});return ds({points:p,layout:f},d)});function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function fie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PF(n.key),n)}}function mie(e,t,r){return t&&pie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gie(e,t,r){return t=Om(t),xie(e,CF()?Reflect.construct(t,r||[],Om(e).constructor):t.apply(e,r))}function xie(e,t){if(t&&(Lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yie(e)}function yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!e})()}function Om(e){return Om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Om(e)}function vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TN(e,t)}function TN(e,t){return TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},TN(e,t)}function OF(e,t,r){return t=PF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PF(e){var t=bie(e,"string");return Lu(t)=="symbol"?t:t+""}function bie(e,t){if(Lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CN(){return CN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CN.apply(this,arguments)}function wie(e){var t=e.xAxisId,r=mk(),n=gk(),s=gF(t);return s==null?null:F.createElement(ad,CN({},s,{className:ar("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return oo(o,!0)}}))}var Pn=(function(e){function t(){return fie(this,t),gie(this,t,arguments)}return vie(t,e),mie(t,[{key:"render",value:function(){return F.createElement(wie,this.props)}}])})(F.Component);OF(Pn,"displayName","XAxis");OF(Pn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function jie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MF(n.key),n)}}function kie(e,t,r){return t&&Nie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sie(e,t,r){return t=Pm(t),_ie(e,IF()?Reflect.construct(t,r||[],Pm(e).constructor):t.apply(e,r))}function _ie(e,t){if(t&&(Bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eie(e)}function Eie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function Pm(e){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pm(e)}function Aie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ON(e,t)}function DF(e,t,r){return t=MF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=Tie(e,"string");return Bu(t)=="symbol"?t:t+""}function Tie(e,t){if(Bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PN.apply(this,arguments)}var Cie=function(t){var r=t.yAxisId,n=mk(),s=gk(),i=xF(r);return i==null?null:F.createElement(ad,PN({},i,{className:ar("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return oo(l,!0)}}))},wn=(function(e){function t(){return jie(this,t),Sie(this,t,arguments)}return Aie(t,e),kie(t,[{key:"render",value:function(){return F.createElement(Cie,this.props)}}])})(F.Component);DF(wn,"displayName","YAxis");DF(wn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function zP(e){return Die(e)||Iie(e)||Pie(e)||Oie()}function Oie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pie(e,t){if(e){if(typeof e=="string")return IN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IN(e,t)}}function Iie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Die(e){if(Array.isArray(e))return IN(e)}function IN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var DN=function(t,r,n,s,i){var o=js(t,yk),l=js(t,Dg),u=[].concat(zP(o),zP(l)),d=js(t,Rg),f="".concat(s,"Id"),p=s[0],m=r;if(u.length&&(m=u.reduce(function(y,b){if(b.props[f]===n&&Ii(b.props,"extendDomain")&&lt(b.props[p])){var k=b.props[p];return[Math.min(y[0],k),Math.max(y[1],k)]}return y},m)),d.length){var x="".concat(p,"1"),v="".concat(p,"2");m=d.reduce(function(y,b){if(b.props[f]===n&&Ii(b.props,"extendDomain")&&lt(b.props[x])&&lt(b.props[v])){var k=b.props[x],N=b.props[v];return[Math.min(y[0],k,N),Math.max(y[1],k,N)]}return y},m)}return i&&i.length&&(m=i.reduce(function(y,b){return lt(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},m)),m},P1={exports:{}},WP;function Mie(){return WP||(WP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function i(u,d,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||u,m),v=r?r+d:d;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],x]:u._events[v].push(x):(u._events[v]=x,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)t.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,x=p.length,v=new Array(x);m<x;m++)v[m]=p[m].fn;return v},l.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,m,x,v){var y=r?r+d:d;if(!this._events[y])return!1;var b=this._events[y],k=arguments.length,N,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),k){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,p),!0;case 4:return b.fn.call(b.context,f,p,m),!0;case 5:return b.fn.call(b.context,f,p,m,x),!0;case 6:return b.fn.call(b.context,f,p,m,x,v),!0}for(w=1,N=new Array(k-1);w<k;w++)N[w-1]=arguments[w];b.fn.apply(b.context,N)}else{var T=b.length,E;for(w=0;w<T;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),k){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,f);break;case 3:b[w].fn.call(b[w].context,f,p);break;case 4:b[w].fn.call(b[w].context,f,p,m);break;default:if(!N)for(E=1,N=new Array(k-1);E<k;E++)N[E-1]=arguments[E];b[w].fn.apply(b[w].context,N)}}return!0},l.prototype.on=function(d,f,p){return i(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return i(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,m){var x=r?r+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!m||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var y=0,b=[],k=v.length;y<k;y++)(v[y].fn!==f||m&&!v[y].once||p&&v[y].context!==p)&&b.push(v[y]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(P1)),P1.exports}var Rie=Mie();const Fie=$r(Rie);var I1=new Fie,D1="recharts.syncMouseEvents";function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function $ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RF(n.key),n)}}function Bie(e,t,r){return t&&Lie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function M1(e,t,r){return t=RF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=Uie(e,"string");return xf(t)=="symbol"?t:t+""}function Uie(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hie=(function(){function e(){$ie(this,e),M1(this,"activeIndex",0),M1(this,"coordinateList",[]),M1(this,"layout","horizontal")}return Bie(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,u=r.layout,d=u===void 0?null:u,f=r.offset,p=f===void 0?null:f,m=r.mouseHandlerCallback,x=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,u=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+u+d,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:m})}}}])})();function qie(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&lt(n)&&lt(s))return!0}return!1}function zie(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function FF(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=Ir(t,r,n,s),l=Ir(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Wie(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,u=t.cy,d=t.innerRadius,f=t.outerRadius,p=t.angle,m=Ir(l,u,d,p),x=Ir(l,u,f,p);n=m.x,s=m.y,i=x.x,o=x.y}else return FF(t);return[{x:n,y:s},{x:i,y:o}]}function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(n){Kie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kie(e,t,r){return t=Vie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vie(e){var t=Gie(e,"string");return yf(t)=="symbol"?t:t+""}function Gie(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yie(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,u=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,x=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var v,y=om;if(m==="ScatterChart")v=o,y=Kte;else if(m==="BarChart")v=zie(p,o,u,f),y=dk;else if(p==="radial"){var b=FF(o),k=b.cx,N=b.cy,w=b.radius,T=b.startAngle,E=b.endAngle;v={cx:k,cy:N,startAngle:T,endAngle:E,innerRadius:w,outerRadius:w},y=DR}else v={points:Wie(p,o,u)},y=om;var S=dp(dp(dp(dp({stroke:"#ccc",pointerEvents:"none"},u),v),Lt(x,!1)),{},{payload:l,payloadIndex:d,className:ar("recharts-tooltip-cursor",x.className)});return F.isValidElement(x)?F.cloneElement(x,S):F.createElement(y,S)}var Xie=["item"],Jie=["children","className","width","height","style","compact","title","desc"];function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(this,arguments)}function VP(e,t){return eoe(e)||Zie(e,t)||LF(e,t)||Qie()}function Qie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function eoe(e){if(Array.isArray(e))return e}function GP(e,t){if(e==null)return{};var r=toe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function toe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function noe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BF(n.key),n)}}function aoe(e,t,r){return t&&noe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function soe(e,t,r){return t=Im(t),ioe(e,$F()?Reflect.construct(t,r||[],Im(e).constructor):t.apply(e,r))}function ioe(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ooe(e)}function ooe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($F=function(){return!!e})()}function Im(e){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Im(e)}function loe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}function MN(e,t){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},MN(e,t)}function Hu(e){return doe(e)||uoe(e)||LF(e)||coe()}function coe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LF(e,t){if(e){if(typeof e=="string")return RN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RN(e,t)}}function uoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function doe(e){if(Array.isArray(e))return RN(e)}function RN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(r),!0).forEach(function(n){Gt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gt(e,t,r){return t=BF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=hoe(e,"string");return Uu(t)=="symbol"?t:t+""}function hoe(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var foe={xAxis:["bottom","top"],yAxis:["left","right"]},poe={width:"100%",height:"100%"},UF={x:0,y:0};function hp(e){return e}var moe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},goe=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return ze(ze(ze({},s),Ir(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var u=i.coordinate,d=s.angle;return ze(ze(ze({},s),Ir(s.cx,s.cy,u,d)),{},{angle:d,radius:u})}return UF},Fg=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,u){var d=u.props.data;return d&&d.length?[].concat(Hu(l),Hu(d)):l},[]);return o.length>0?o:t&&t.length&&lt(s)&&lt(i)?t.slice(s,i+1):[]};function HF(e){return e==="number"?[0,"auto"]:void 0}var FN=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Fg(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(u,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:r;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;m=Ip(x,o.dataKey,s)}else m=p&&p[n]||l[n];return m?[].concat(Hu(u),[_R(d,m)]):u},[])},XP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=moe(i,n),l=t.orderedTooltipTicks,u=t.tooltipAxis,d=t.tooltipTicks,f=gQ(o,l,d,u);if(f>=0&&d){var p=d[f]&&d[f].value,m=FN(t,r,f,p),x=goe(n,l,f,i);return{activeTooltipIndex:f,activeLabel:p,activePayload:m,activeCoordinate:x}}return null},xoe=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=t.stackOffset,x=bR(f,i);return n.reduce(function(v,y){var b,k=y.type.defaultProps!==void 0?ze(ze({},y.type.defaultProps),y.props):y.props,N=k.type,w=k.dataKey,T=k.allowDataOverflow,E=k.allowDuplicatedCategory,S=k.scale,_=k.ticks,A=k.includeHidden,P=k[o];if(v[P])return v;var B=Fg(t.data,{graphicalItems:s.filter(function(M){var J,te=o in M.props?M.props[o]:(J=M.type.defaultProps)===null||J===void 0?void 0:J[o];return te===P}),dataStartIndex:u,dataEndIndex:d}),I=B.length,O,L,X;qie(k.domain,T,N)&&(O=Xj(k.domain,null,T),x&&(N==="number"||S!=="auto")&&(X=dh(B,w,"category")));var U=HF(N);if(!O||O.length===0){var V,ne=(V=k.domain)!==null&&V!==void 0?V:U;if(w){if(O=dh(B,w,N),N==="category"&&x){var ee=cz(O);E&&ee?(L=O,O=bm(0,I)):E||(O=VO(ne,O,y).reduce(function(M,J){return M.indexOf(J)>=0?M:[].concat(Hu(M),[J])},[]))}else if(N==="category")E?O=O.filter(function(M){return M!==""&&!ir(M)}):O=VO(ne,O,y).reduce(function(M,J){return M.indexOf(J)>=0||J===""||ir(J)?M:[].concat(Hu(M),[J])},[]);else if(N==="number"){var R=wQ(B,s.filter(function(M){var J,te,ie=o in M.props?M.props[o]:(J=M.type.defaultProps)===null||J===void 0?void 0:J[o],me="hide"in M.props?M.props.hide:(te=M.type.defaultProps)===null||te===void 0?void 0:te.hide;return ie===P&&(A||!me)}),w,i,f);R&&(O=R)}x&&(N==="number"||S!=="auto")&&(X=dh(B,w,"category"))}else x?O=bm(0,I):l&&l[P]&&l[P].hasStack&&N==="number"?O=m==="expand"?[0,1]:SR(l[P].stackGroups,u,d):O=vR(B,s.filter(function(M){var J=o in M.props?M.props[o]:M.type.defaultProps[o],te="hide"in M.props?M.props.hide:M.type.defaultProps.hide;return J===P&&(A||!te)}),N,f,!0);if(N==="number")O=DN(p,O,P,i,_),ne&&(O=Xj(ne,O,T));else if(N==="category"&&ne){var se=ne,z=O.every(function(M){return se.indexOf(M)>=0});z&&(O=se)}}return ze(ze({},v),{},Gt({},P,ze(ze({},k),{},{axisType:i,domain:O,categoricalDomain:X,duplicateDomain:L,originalDomain:(b=k.domain)!==null&&b!==void 0?b:U,isCategorical:x,layout:f})))},{})},yoe=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=Fg(t.data,{graphicalItems:n,dataStartIndex:u,dataEndIndex:d}),x=m.length,v=bR(f,i),y=-1;return n.reduce(function(b,k){var N=k.type.defaultProps!==void 0?ze(ze({},k.type.defaultProps),k.props):k.props,w=N[o],T=HF("number");if(!b[w]){y++;var E;return v?E=bm(0,x):l&&l[w]&&l[w].hasStack?(E=SR(l[w].stackGroups,u,d),E=DN(p,E,w,i)):(E=Xj(T,vR(m,n.filter(function(S){var _,A,P=o in S.props?S.props[o]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[o],B="hide"in S.props?S.props.hide:(A=S.type.defaultProps)===null||A===void 0?void 0:A.hide;return P===w&&!B}),"number",f),s.defaultProps.allowDataOverflow),E=DN(p,E,w,i)),ze(ze({},b),{},Gt({},w,ze(ze({axisType:i},s.defaultProps),{},{hide:!0,orientation:ws(foe,"".concat(i,".").concat(y%2),null),domain:E,originalDomain:T,isCategorical:v,layout:f})))}return b},{})},voe=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.children,p="".concat(s,"Id"),m=js(f,i),x={};return m&&m.length?x=xoe(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d}):o&&o.length&&(x=yoe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d})),x},boe=function(t){var r=Ko(t),n=oo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:$2(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:am(r,n)}},JP=function(t){var r=t.children,n=t.defaultShowTooltip,s=fs(r,Pu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},woe=function(t){return!t||!t.length?!1:t.some(function(r){var n=uo(r&&r.type);return n&&n.indexOf("Bar")>=0})},QP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},joe=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,u=l===void 0?{}:l,d=n.width,f=n.height,p=n.children,m=n.margin||{},x=fs(p,Pu),v=fs(p,ma),y=Object.keys(u).reduce(function(E,S){var _=u[S],A=_.orientation;return!_.mirror&&!_.hide?ze(ze({},E),{},Gt({},A,E[A]+_.width)):E},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(E,S){var _=o[S],A=_.orientation;return!_.mirror&&!_.hide?ze(ze({},E),{},Gt({},A,ws(E,"".concat(A))+_.height)):E},{top:m.top||0,bottom:m.bottom||0}),k=ze(ze({},b),y),N=k.bottom;x&&(k.bottom+=x.props.height||Pu.defaultProps.height),v&&r&&(k=vQ(k,s,n,r));var w=d-k.left-k.right,T=f-k.top-k.bottom;return ze(ze({brushBottom:N},k),{},{width:Math.max(w,0),height:Math.max(T,0)})},Noe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},$g=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,u=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,p=t.defaultProps,m=function(k,N){var w=N.graphicalItems,T=N.stackGroups,E=N.offset,S=N.updateId,_=N.dataStartIndex,A=N.dataEndIndex,P=k.barSize,B=k.layout,I=k.barGap,O=k.barCategoryGap,L=k.maxBarSize,X=QP(B),U=X.numericAxisName,V=X.cateAxisName,ne=woe(w),ee=[];return w.forEach(function(R,se){var z=Fg(k.data,{graphicalItems:[R],dataStartIndex:_,dataEndIndex:A}),M=R.type.defaultProps!==void 0?ze(ze({},R.type.defaultProps),R.props):R.props,J=M.dataKey,te=M.maxBarSize,ie=M["".concat(U,"Id")],me=M["".concat(V,"Id")],ve={},ye=u.reduce(function(vt,qt){var gr=N["".concat(qt.axisType,"Map")],sr=M["".concat(qt.axisType,"Id")];gr&&gr[sr]||qt.axisType==="zAxis"||tc();var lr=gr[sr];return ze(ze({},vt),{},Gt(Gt({},qt.axisType,lr),"".concat(qt.axisType,"Ticks"),oo(lr)))},ve),he=ye[V],pe=ye["".concat(V,"Ticks")],De=T&&T[ie]&&T[ie].hasStack&&CQ(R,T[ie].stackGroups),q=uo(R.type).indexOf("Bar")>=0,Ae=am(he,pe),Be=[],xt=ne&&xQ({barSize:P,stackGroups:T,totalSize:Noe(ye,V)});if(q){var le,Ee,Ce=ir(te)?L:te,$e=(le=(Ee=am(he,pe,!0))!==null&&Ee!==void 0?Ee:Ce)!==null&&le!==void 0?le:0;Be=yQ({barGap:I,barCategoryGap:O,bandSize:$e!==Ae?$e:Ae,sizeList:xt[me],maxBarSize:Ce}),$e!==Ae&&(Be=Be.map(function(vt){return ze(ze({},vt),{},{position:ze(ze({},vt.position),{},{offset:vt.position.offset-$e/2})})}))}var Nt=R&&R.type&&R.type.getComposedData;Nt&&ee.push({props:ze(ze({},Nt(ze(ze({},ye),{},{displayedData:z,props:k,dataKey:J,item:R,bandSize:Ae,barPosition:Be,offset:E,stackedData:De,layout:B,dataStartIndex:_,dataEndIndex:A}))),{},Gt(Gt(Gt({key:R.key||"item-".concat(se)},U,ye[U]),V,ye[V]),"animationId",S)),childIndex:jz(R,k.children),item:R})}),ee},x=function(k,N){var w=k.props,T=k.dataStartIndex,E=k.dataEndIndex,S=k.updateId;if(!oT({props:w}))return null;var _=w.children,A=w.layout,P=w.stackOffset,B=w.data,I=w.reverseStackOrder,O=QP(A),L=O.numericAxisName,X=O.cateAxisName,U=js(_,n),V=AQ(B,U,"".concat(L,"Id"),"".concat(X,"Id"),P,I),ne=u.reduce(function(M,J){var te="".concat(J.axisType,"Map");return ze(ze({},M),{},Gt({},te,voe(w,ze(ze({},J),{},{graphicalItems:U,stackGroups:J.axisType===L&&V,dataStartIndex:T,dataEndIndex:E}))))},{}),ee=joe(ze(ze({},ne),{},{props:w,graphicalItems:U}),N?.legendBBox);Object.keys(ne).forEach(function(M){ne[M]=f(w,ne[M],ee,M.replace("Map",""),r)});var R=ne["".concat(X,"Map")],se=boe(R),z=m(w,ze(ze({},ne),{},{dataStartIndex:T,dataEndIndex:E,updateId:S,graphicalItems:U,stackGroups:V,offset:ee}));return ze(ze({formattedGraphicalItems:z,graphicalItems:U,offset:ee,stackGroups:V},se),ne)},v=(function(b){function k(N){var w,T,E;return roe(this,k),E=soe(this,k,[N]),Gt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gt(E,"accessibilityManager",new Hie),Gt(E,"handleLegendBBoxUpdate",function(S){if(S){var _=E.state,A=_.dataStartIndex,P=_.dataEndIndex,B=_.updateId;E.setState(ze({legendBBox:S},x({props:E.props,dataStartIndex:A,dataEndIndex:P,updateId:B},ze(ze({},E.state),{},{legendBBox:S}))))}}),Gt(E,"handleReceiveSyncEvent",function(S,_,A){if(E.props.syncId===S){if(A===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(_)}}),Gt(E,"handleBrushChange",function(S){var _=S.startIndex,A=S.endIndex;if(_!==E.state.dataStartIndex||A!==E.state.dataEndIndex){var P=E.state.updateId;E.setState(function(){return ze({dataStartIndex:_,dataEndIndex:A},x({props:E.props,dataStartIndex:_,dataEndIndex:A,updateId:P},E.state))}),E.triggerSyncEvent({dataStartIndex:_,dataEndIndex:A})}}),Gt(E,"handleMouseEnter",function(S){var _=E.getMouseInfo(S);if(_){var A=ze(ze({},_),{},{isTooltipActive:!0});E.setState(A),E.triggerSyncEvent(A);var P=E.props.onMouseEnter;Kt(P)&&P(A,S)}}),Gt(E,"triggeredAfterMouseMove",function(S){var _=E.getMouseInfo(S),A=_?ze(ze({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(A),E.triggerSyncEvent(A);var P=E.props.onMouseMove;Kt(P)&&P(A,S)}),Gt(E,"handleItemMouseEnter",function(S){E.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Gt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Gt(E,"handleMouseMove",function(S){S.persist(),E.throttleTriggeredAfterMouseMove(S)}),Gt(E,"handleMouseLeave",function(S){E.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};E.setState(_),E.triggerSyncEvent(_);var A=E.props.onMouseLeave;Kt(A)&&A(_,S)}),Gt(E,"handleOuterEvent",function(S){var _=wz(S),A=ws(E.props,"".concat(_));if(_&&Kt(A)){var P,B;/.*touch.*/i.test(_)?B=E.getMouseInfo(S.changedTouches[0]):B=E.getMouseInfo(S),A((P=B)!==null&&P!==void 0?P:{},S)}}),Gt(E,"handleClick",function(S){var _=E.getMouseInfo(S);if(_){var A=ze(ze({},_),{},{isTooltipActive:!0});E.setState(A),E.triggerSyncEvent(A);var P=E.props.onClick;Kt(P)&&P(A,S)}}),Gt(E,"handleMouseDown",function(S){var _=E.props.onMouseDown;if(Kt(_)){var A=E.getMouseInfo(S);_(A,S)}}),Gt(E,"handleMouseUp",function(S){var _=E.props.onMouseUp;if(Kt(_)){var A=E.getMouseInfo(S);_(A,S)}}),Gt(E,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Gt(E,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.handleMouseDown(S.changedTouches[0])}),Gt(E,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&E.handleMouseUp(S.changedTouches[0])}),Gt(E,"handleDoubleClick",function(S){var _=E.props.onDoubleClick;if(Kt(_)){var A=E.getMouseInfo(S);_(A,S)}}),Gt(E,"handleContextMenu",function(S){var _=E.props.onContextMenu;if(Kt(_)){var A=E.getMouseInfo(S);_(A,S)}}),Gt(E,"triggerSyncEvent",function(S){E.props.syncId!==void 0&&I1.emit(D1,E.props.syncId,S,E.eventEmitterSymbol)}),Gt(E,"applySyncEvent",function(S){var _=E.props,A=_.layout,P=_.syncMethod,B=E.state.updateId,I=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)E.setState(ze({dataStartIndex:I,dataEndIndex:O},x({props:E.props,dataStartIndex:I,dataEndIndex:O,updateId:B},E.state)));else if(S.activeTooltipIndex!==void 0){var L=S.chartX,X=S.chartY,U=S.activeTooltipIndex,V=E.state,ne=V.offset,ee=V.tooltipTicks;if(!ne)return;if(typeof P=="function")U=P(ee,S);else if(P==="value"){U=-1;for(var R=0;R<ee.length;R++)if(ee[R].value===S.activeLabel){U=R;break}}var se=ze(ze({},ne),{},{x:ne.left,y:ne.top}),z=Math.min(L,se.x+se.width),M=Math.min(X,se.y+se.height),J=ee[U]&&ee[U].value,te=FN(E.state,E.props.data,U),ie=ee[U]?{x:A==="horizontal"?ee[U].coordinate:z,y:A==="horizontal"?M:ee[U].coordinate}:UF;E.setState(ze(ze({},S),{},{activeLabel:J,activeCoordinate:ie,activePayload:te,activeTooltipIndex:U}))}else E.setState(S)}),Gt(E,"renderCursor",function(S){var _,A=E.state,P=A.isTooltipActive,B=A.activeCoordinate,I=A.activePayload,O=A.offset,L=A.activeTooltipIndex,X=A.tooltipAxisBandSize,U=E.getTooltipEventType(),V=(_=S.props.active)!==null&&_!==void 0?_:P,ne=E.props.layout,ee=S.key||"_recharts-cursor";return de.createElement(Yie,{key:ee,activeCoordinate:B,activePayload:I,activeTooltipIndex:L,chartName:r,element:S,isActive:V,layout:ne,offset:O,tooltipAxisBandSize:X,tooltipEventType:U})}),Gt(E,"renderPolarAxis",function(S,_,A){var P=ws(S,"type.axisType"),B=ws(E.state,"".concat(P,"Map")),I=S.type.defaultProps,O=I!==void 0?ze(ze({},I),S.props):S.props,L=B&&B[O["".concat(P,"Id")]];return F.cloneElement(S,ze(ze({},L),{},{className:ar(P,L.className),key:S.key||"".concat(_,"-").concat(A),ticks:oo(L,!0)}))}),Gt(E,"renderPolarGrid",function(S){var _=S.props,A=_.radialLines,P=_.polarAngles,B=_.polarRadius,I=E.state,O=I.radiusAxisMap,L=I.angleAxisMap,X=Ko(O),U=Ko(L),V=U.cx,ne=U.cy,ee=U.innerRadius,R=U.outerRadius;return F.cloneElement(S,{polarAngles:Array.isArray(P)?P:oo(U,!0).map(function(se){return se.coordinate}),polarRadius:Array.isArray(B)?B:oo(X,!0).map(function(se){return se.coordinate}),cx:V,cy:ne,innerRadius:ee,outerRadius:R,key:S.key||"polar-grid",radialLines:A})}),Gt(E,"renderLegend",function(){var S=E.state.formattedGraphicalItems,_=E.props,A=_.children,P=_.width,B=_.height,I=E.props.margin||{},O=P-(I.left||0)-(I.right||0),L=xR({children:A,formattedGraphicalItems:S,legendWidth:O,legendContent:d});if(!L)return null;var X=L.item,U=GP(L,Xie);return F.cloneElement(X,ze(ze({},U),{},{chartWidth:P,chartHeight:B,margin:I,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Gt(E,"renderTooltip",function(){var S,_=E.props,A=_.children,P=_.accessibilityLayer,B=fs(A,zr);if(!B)return null;var I=E.state,O=I.isTooltipActive,L=I.activeCoordinate,X=I.activePayload,U=I.activeLabel,V=I.offset,ne=(S=B.props.active)!==null&&S!==void 0?S:O;return F.cloneElement(B,{viewBox:ze(ze({},V),{},{x:V.left,y:V.top}),active:ne,label:U,payload:ne?X:[],coordinate:L,accessibilityLayer:P})}),Gt(E,"renderBrush",function(S){var _=E.props,A=_.margin,P=_.data,B=E.state,I=B.offset,O=B.dataStartIndex,L=B.dataEndIndex,X=B.updateId;return F.cloneElement(S,{key:S.key||"_recharts-brush",onChange:op(E.handleBrushChange,S.props.onChange),data:P,x:lt(S.props.x)?S.props.x:I.left,y:lt(S.props.y)?S.props.y:I.top+I.height+I.brushBottom-(A.bottom||0),width:lt(S.props.width)?S.props.width:I.width,startIndex:O,endIndex:L,updateId:"brush-".concat(X)})}),Gt(E,"renderReferenceElement",function(S,_,A){if(!S)return null;var P=E,B=P.clipPathId,I=E.state,O=I.xAxisMap,L=I.yAxisMap,X=I.offset,U=S.type.defaultProps||{},V=S.props,ne=V.xAxisId,ee=ne===void 0?U.xAxisId:ne,R=V.yAxisId,se=R===void 0?U.yAxisId:R;return F.cloneElement(S,{key:S.key||"".concat(_,"-").concat(A),xAxis:O[ee],yAxis:L[se],viewBox:{x:X.left,y:X.top,width:X.width,height:X.height},clipPathId:B})}),Gt(E,"renderActivePoints",function(S){var _=S.item,A=S.activePoint,P=S.basePoint,B=S.childIndex,I=S.isRange,O=[],L=_.props.key,X=_.item.type.defaultProps!==void 0?ze(ze({},_.item.type.defaultProps),_.item.props):_.item.props,U=X.activeDot,V=X.dataKey,ne=ze(ze({index:B,dataKey:V,cx:A.x,cy:A.y,r:4,fill:uk(_.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Lt(U,!1)),Dp(U));return O.push(k.renderActiveDot(U,ne,"".concat(L,"-activePoint-").concat(B))),P?O.push(k.renderActiveDot(U,ze(ze({},ne),{},{cx:P.x,cy:P.y}),"".concat(L,"-basePoint-").concat(B))):I&&O.push(null),O}),Gt(E,"renderGraphicChild",function(S,_,A){var P=E.filterFormatItem(S,_,A);if(!P)return null;var B=E.getTooltipEventType(),I=E.state,O=I.isTooltipActive,L=I.tooltipAxis,X=I.activeTooltipIndex,U=I.activeLabel,V=E.props.children,ne=fs(V,zr),ee=P.props,R=ee.points,se=ee.isRange,z=ee.baseLine,M=P.item.type.defaultProps!==void 0?ze(ze({},P.item.type.defaultProps),P.item.props):P.item.props,J=M.activeDot,te=M.hide,ie=M.activeBar,me=M.activeShape,ve=!!(!te&&O&&ne&&(J||ie||me)),ye={};B!=="axis"&&ne&&ne.props.trigger==="click"?ye={onClick:op(E.handleItemMouseEnter,S.props.onClick)}:B!=="axis"&&(ye={onMouseLeave:op(E.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:op(E.handleItemMouseEnter,S.props.onMouseEnter)});var he=F.cloneElement(S,ze(ze({},P.props),ye));function pe(qt){return typeof L.dataKey=="function"?L.dataKey(qt.payload):null}if(ve)if(X>=0){var De,q;if(L.dataKey&&!L.allowDuplicatedCategory){var Ae=typeof L.dataKey=="function"?pe:"payload.".concat(L.dataKey.toString());De=Ip(R,Ae,U),q=se&&z&&Ip(z,Ae,U)}else De=R?.[X],q=se&&z&&z[X];if(me||ie){var Be=S.props.activeIndex!==void 0?S.props.activeIndex:X;return[F.cloneElement(S,ze(ze(ze({},P.props),ye),{},{activeIndex:Be})),null,null]}if(!ir(De))return[he].concat(Hu(E.renderActivePoints({item:P,activePoint:De,basePoint:q,childIndex:X,isRange:se})))}else{var xt,le=(xt=E.getItemByXY(E.state.activeCoordinate))!==null&&xt!==void 0?xt:{graphicalItem:he},Ee=le.graphicalItem,Ce=Ee.item,$e=Ce===void 0?S:Ce,Nt=Ee.childIndex,vt=ze(ze(ze({},P.props),ye),{},{activeIndex:Nt});return[F.cloneElement($e,vt),null,null]}return se?[he,null,null]:[he,null]}),Gt(E,"renderCustomized",function(S,_,A){return F.cloneElement(S,ze(ze({key:"recharts-customized-".concat(A)},E.props),E.state))}),Gt(E,"renderMap",{CartesianGrid:{handler:hp,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:hp},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:hp},YAxis:{handler:hp},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((w=N.id)!==null&&w!==void 0?w:Xu("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=gM(E.triggeredAfterMouseMove,(T=N.throttleDelay)!==null&&T!==void 0?T:1e3/60),E.state={},E}return loe(k,b),aoe(k,[{key:"componentDidMount",value:function(){var w,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,T=w.children,E=w.data,S=w.height,_=w.layout,A=fs(T,zr);if(A){var P=A.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,I=FN(this.state,E,P,B),O=this.state.tooltipTicks[P].coordinate,L=(this.state.offset.top+S)/2,X=_==="horizontal",U=X?{x:O,y:L}:{y:O,x:L},V=this.state.formattedGraphicalItems.find(function(ee){var R=ee.item;return R.type.name==="Scatter"});V&&(U=ze(ze({},U),V.props.points[P].tooltipPosition),I=V.props.points[P].tooltipPayload);var ne={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:B,activePayload:I,activeCoordinate:U};this.setState(ne),this.renderCursor(A),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var E,S;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){yj([fs(w.children,zr)],[fs(this.props.children,zr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=fs(this.props.children,zr);if(w&&typeof w.props.shared=="boolean"){var T=w.props.shared?"axis":"item";return l.indexOf(T)>=0?T:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var T=this.container,E=T.getBoundingClientRect(),S=lG(E),_={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},A=E.width/T.offsetWidth||1,P=this.inRange(_.chartX,_.chartY,A);if(!P)return null;var B=this.state,I=B.xAxisMap,O=B.yAxisMap,L=this.getTooltipEventType(),X=XP(this.state,this.props.data,this.props.layout,P);if(L!=="axis"&&I&&O){var U=Ko(I).scale,V=Ko(O).scale,ne=U&&U.invert?U.invert(_.chartX):null,ee=V&&V.invert?V.invert(_.chartY):null;return ze(ze({},_),{},{xValue:ne,yValue:ee},X)}return X?ze(ze({},_),X):null}},{key:"inRange",value:function(w,T){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=w/E,A=T/E;if(S==="horizontal"||S==="vertical"){var P=this.state.offset,B=_>=P.left&&_<=P.left+P.width&&A>=P.top&&A<=P.top+P.height;return B?{x:_,y:A}:null}var I=this.state,O=I.angleAxisMap,L=I.radiusAxisMap;if(O&&L){var X=Ko(O);return XO({x:_,y:A},X)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,T=this.getTooltipEventType(),E=fs(w,zr),S={};E&&T==="axis"&&(E.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Dp(this.props,this.handleOuterEvent);return ze(ze({},_),S)}},{key:"addListener",value:function(){I1.on(D1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){I1.removeListener(D1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,T,E){for(var S=this.state.formattedGraphicalItems,_=0,A=S.length;_<A;_++){var P=S[_];if(P.item===w||P.props.key===w.key||T===uo(P.item.type)&&E===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,T=this.state.offset,E=T.left,S=T.top,_=T.height,A=T.width;return de.createElement("defs",null,de.createElement("clipPath",{id:w},de.createElement("rect",{x:E,y:S,height:_,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(T,E){var S=VP(E,2),_=S[0],A=S[1];return ze(ze({},T),{},Gt({},_,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(T,E){var S=VP(E,2),_=S[0],A=S[1];return ze(ze({},T),{},Gt({},_,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[w])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(w){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[w])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(w){var T=this.state,E=T.formattedGraphicalItems,S=T.activeItem;if(E&&E.length)for(var _=0,A=E.length;_<A;_++){var P=E[_],B=P.props,I=P.item,O=I.type.defaultProps!==void 0?ze(ze({},I.type.defaultProps),I.props):I.props,L=uo(I.type);if(L==="Bar"){var X=(B.data||[]).find(function(ee){return Ete(w,ee)});if(X)return{graphicalItem:P,payload:X}}else if(L==="RadialBar"){var U=(B.data||[]).find(function(ee){return XO(w,ee)});if(U)return{graphicalItem:P,payload:U}}else if(Cg(P,S)||Og(P,S)||hf(P,S)){var V=ine({graphicalItem:P,activeTooltipItem:S,itemData:O.data}),ne=O.activeIndex===void 0?V:O.activeIndex;return{graphicalItem:ze(ze({},P),{},{childIndex:ne}),payload:hf(P,S)?O.data[V]:P.props.data[V]}}}return null}},{key:"render",value:function(){var w=this;if(!oT(this))return null;var T=this.props,E=T.children,S=T.className,_=T.width,A=T.height,P=T.style,B=T.compact,I=T.title,O=T.desc,L=GP(T,Jie),X=Lt(L,!1);if(B)return de.createElement(AP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},de.createElement(bj,ou({},X,{width:_,height:A,title:I,desc:O}),this.renderClipPath(),cT(E,this.renderMap)));if(this.props.accessibilityLayer){var U,V;X.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,X.role=(V=this.props.role)!==null&&V!==void 0?V:"application",X.onKeyDown=function(ee){w.accessibilityManager.keyboardEvent(ee)},X.onFocus=function(){w.accessibilityManager.focus()}}var ne=this.parseEventsOfWrapper();return de.createElement(AP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},de.createElement("div",ou({className:ar("recharts-wrapper",S),style:ze({position:"relative",cursor:"default",width:_,height:A},P)},ne,{ref:function(R){w.container=R}}),de.createElement(bj,ou({},X,{width:_,height:A,title:I,desc:O,style:poe}),this.renderClipPath(),cT(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(F.Component);Gt(v,"displayName",r),Gt(v,"defaultProps",ze({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Gt(v,"getDerivedStateFromProps",function(b,k){var N=b.dataKey,w=b.data,T=b.children,E=b.width,S=b.height,_=b.layout,A=b.stackOffset,P=b.margin,B=k.dataStartIndex,I=k.dataEndIndex;if(k.updateId===void 0){var O=JP(b);return ze(ze(ze({},O),{},{updateId:0},x(ze(ze({props:b},O),{},{updateId:0}),k)),{},{prevDataKey:N,prevData:w,prevWidth:E,prevHeight:S,prevLayout:_,prevStackOffset:A,prevMargin:P,prevChildren:T})}if(N!==k.prevDataKey||w!==k.prevData||E!==k.prevWidth||S!==k.prevHeight||_!==k.prevLayout||A!==k.prevStackOffset||!du(P,k.prevMargin)){var L=JP(b),X={chartX:k.chartX,chartY:k.chartY,isTooltipActive:k.isTooltipActive},U=ze(ze({},XP(k,w,_)),{},{updateId:k.updateId+1}),V=ze(ze(ze({},L),X),U);return ze(ze(ze({},V),x(ze({props:b},V),k)),{},{prevDataKey:N,prevData:w,prevWidth:E,prevHeight:S,prevLayout:_,prevStackOffset:A,prevMargin:P,prevChildren:T})}if(!yj(T,k.prevChildren)){var ne,ee,R,se,z=fs(T,Pu),M=z&&(ne=(ee=z.props)===null||ee===void 0?void 0:ee.startIndex)!==null&&ne!==void 0?ne:B,J=z&&(R=(se=z.props)===null||se===void 0?void 0:se.endIndex)!==null&&R!==void 0?R:I,te=M!==B||J!==I,ie=!ir(w),me=ie&&!te?k.updateId:k.updateId+1;return ze(ze({updateId:me},x(ze(ze({props:b},k),{},{updateId:me,dataStartIndex:M,dataEndIndex:J}),k)),{},{prevChildren:T,dataStartIndex:M,dataEndIndex:J})}return null}),Gt(v,"renderActiveDot",function(b,k,N){var w;return F.isValidElement(b)?w=F.cloneElement(b,k):Kt(b)?w=b(k):w=de.createElement(Lf,k),de.createElement(jr,{className:"recharts-active-dot",key:N},w)});var y=F.forwardRef(function(k,N){return de.createElement(v,ou({},k,{ref:N}))});return y.displayName=v.displayName,y},gh=$g({chartName:"LineChart",GraphicalChild:mi,axisComponents:[{axisType:"xAxis",AxisComp:Pn},{axisType:"yAxis",AxisComp:wn}],formatAxisMap:lF}),ci=$g({chartName:"BarChart",GraphicalChild:yr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Pn},{axisType:"yAxis",AxisComp:wn}],formatAxisMap:lF}),qF=$g({chartName:"PieChart",GraphicalChild:Li,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:nd},{axisType:"radiusAxis",AxisComp:rd}],formatAxisMap:TR,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),koe=$g({chartName:"RadarChart",GraphicalChild:Wl,axisComponents:[{axisType:"angleAxis",AxisComp:nd},{axisType:"radiusAxis",AxisComp:rd}],formatAxisMap:TR,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ZP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function Soe({context:e}){const t=F.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,inventory:d.inventory+u.totalCost})}),e.overheads.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,overhead:d.overhead+u.amount})}),Array.from(l.entries()).map(([u,d])=>({date:new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:u,inventory:d.inventory,overhead:d.overhead,total:d.inventory+d.overhead})).sort((u,d)=>u.fullDate.localeCompare(d.fullDate))},[e.inventory,e.overheads]),r=F.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.totalCost)}),e.overheads.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.amount)}),Array.from(l.entries()).map(([u,d])=>({name:Vm[u]||e2[u]||u,value:d})).sort((u,d)=>d.value-u.value)},[e.inventory,e.overheads]),n=F.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.itemName)||0;l.set(u.itemName,d+u.totalCost)}),Array.from(l.entries()).map(([u,d])=>({name:u,value:d})).sort((u,d)=>d.value-u.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,u)=>l+u.totalCost,0),i=e.overheads.reduce((l,u)=>l+u.amount,0),o=s+i;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Jc,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(k9,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),a.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),a.jsx(Un,{width:"100%",height:300,children:a.jsxs(gh,{data:t,children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{dataKey:"date"}),a.jsx(wn,{}),a.jsx(zr,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(ma,{}),a.jsx(mi,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),a.jsx(mi,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),a.jsx(mi,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),a.jsx(Un,{width:"100%",height:300,children:a.jsxs(qF,{children:[a.jsx(Li,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:u})=>`${l} (${(u*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,u)=>a.jsx(Ql,{fill:ZP[u%ZP.length]},`cell-${u}`))}),a.jsx(zr,{formatter:l=>`${l.toLocaleString()}`})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),a.jsx(Un,{width:"100%",height:300,children:a.jsxs(ci,{data:n,layout:"vertical",children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{type:"number"}),a.jsx(wn,{dataKey:"name",type:"category",width:100}),a.jsx(zr,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(yr,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function e6({context:e,selectedStoreId:t}){const[r,n]=F.useState(new Date().toISOString().split("T")[0]),[s,i]=F.useState({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:""}),[o,l]=F.useState(!1),[u,d]=F.useState(null),[f,p]=F.useState(!1),m=e.user?.role==="cluster_head",x=e.user?.role==="manager",v=e.user?.designation==="store_incharge",y=x&&!v,b=v,[k,N]=F.useState([]),[w,T]=F.useState([]),[E,S]=F.useState(!1);F.useEffect(()=>{_()},[]);const _=async()=>{S(!0);try{const Ee=(await nl()).filter(Ce=>Ce.type==="contract");N(Ee)}catch(le){console.error("Error loading contract workers:",le)}finally{S(!1)}};F.useEffect(()=>{A()},[r,k]);const A=async()=>{if(k.length!==0)try{const Ee=(await Zo()).filter(qt=>qt.date===r),Ce=k.map(qt=>qt.id),$e=Ee.filter(qt=>Ce.includes(qt.employeeId)),Nt=new Map;$e.forEach(qt=>{const gr=Nt.get(qt.employeeId);(!gr||new Date(qt.createdAt)>new Date(gr.createdAt))&&Nt.set(qt.employeeId,qt)});const vt=Array.from(Nt.values()).map(qt=>({employeeId:qt.employeeId,amount:qt.amount.toString()}));T(vt)}catch(le){console.error("Error loading payouts for date:",le)}},P=()=>{T([...w,{employeeId:"",amount:""}])},B=le=>{T(w.filter((Ee,Ce)=>Ce!==le))},I=(le,Ee,Ce)=>{const $e=[...w];$e[le][Ee]=Ce,T($e)},O=F.useMemo(()=>w.reduce((le,Ee)=>le+(parseFloat(Ee.amount)||0),0),[w]),L=F.useMemo(()=>{const le=t||e.user?.storeId;console.log(" SalesManagement - effectiveStoreId:",le),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",r),console.log(" SalesManagement - all sales data:",e.salesData.map($e=>({id:$e.id.substring(0,8),date:$e.date,storeId:$e.storeId,offlineSales:$e.offlineSales})));const Ee=le?e.salesData.filter($e=>$e.storeId===le):e.salesData;console.log(" SalesManagement - filtered sales:",Ee.map($e=>({id:$e.id.substring(0,8),date:$e.date,storeId:$e.storeId})));const Ce=Ee.find($e=>$e.date===r);return console.log(" SalesManagement - salesForDate result:",Ce?{id:Ce.id.substring(0,8),date:Ce.date,storeId:Ce.storeId}:"NOT FOUND"),Ce},[e.salesData,r,t,e.user?.storeId]),X=F.useMemo(()=>e.salesData.length===0||!L&&e.salesData.every(le=>le.date>r),[e.salesData,r,L]),U=F.useMemo(()=>new Date(r).getDate()===1,[r]),V=F.useMemo(()=>new Date(r).getDay()===5,[r]),ne=F.useMemo(()=>{const le=new Date(r);le.setDate(le.getDate()-1);const Ee=le.toISOString().split("T")[0];return e.salesData.find(Ce=>Ce.date===Ee)},[e.salesData,r]),ee=F.useMemo(()=>{const le=e.inventory.filter(Ce=>Ce.date===r).reduce((Ce,$e)=>Ce+$e.totalCost,0),Ee=e.overheads.filter(Ce=>Ce.date===r).reduce((Ce,$e)=>Ce+$e.amount,0);return le+Ee},[e.inventory,e.overheads,r]),R=F.useMemo(()=>e.fixedCosts.filter(le=>le.date===r).reduce((le,Ee)=>Ee.paymentMethod==="cash"?le+Ee.amount:Ee.paymentMethod==="both"&&Ee.cashAmount?le+Ee.cashAmount:le,0),[e.fixedCosts,r]),se=F.useMemo(()=>e.fixedCosts.filter(le=>le.date===r).reduce((le,Ee)=>Ee.paymentMethod==="online"?le+Ee.amount:Ee.paymentMethod==="both"&&Ee.onlineAmount?le+Ee.onlineAmount:le,0),[e.fixedCosts,r]),z=(le,Ee,Ce,$e,Nt,vt)=>le+Nt+Ee-Ce-$e-vt,M=F.useMemo(()=>{const le=parseFloat(s.previousCashInHand)||0,Ee=parseFloat(s.cashAmount)||0,Ce=O,$e=parseFloat(s.usedOnlineMoney)||0;return z(le,Ee,ee,Ce,$e,R)},[s.previousCashInHand,s.cashAmount,O,ee,s.usedOnlineMoney,R]),J=F.useMemo(()=>{const le=parseFloat(s.actualCashInHand)||0;return le===0?0:le-M},[s.actualCashInHand,M]),te=Math.abs(J)>500,ie=F.useMemo(()=>{const le=e.salesData.filter($e=>$e.date<=r).reduce(($e,Nt)=>$e+(Nt.paytmAmount??0),0),Ee=e.salesData.filter($e=>$e.date<=r).reduce(($e,Nt)=>$e+(Nt.usedOnlineMoney??0),0),Ce=e.fixedCosts.filter($e=>$e.date<=r).reduce(($e,Nt)=>Nt.paymentMethod==="online"?$e+Nt.amount:Nt.paymentMethod==="both"&&Nt.onlineAmount?$e+Nt.onlineAmount:$e,0);return le-Ee-Ce},[e.salesData,e.fixedCosts,r]);F.useEffect(()=>{if(L)i({offlineSales:(L.offlineSales??0).toString(),paytmAmount:(L.paytmAmount??0).toString(),cashAmount:(L.cashAmount??0).toString(),onlineSales:(L.onlineSales??0).toString(),employeeSalary:(L.employeeSalary??0).toString(),previousCashInHand:(L.previousCashInHand??0).toString(),usedOnlineMoney:(L.usedOnlineMoney??0).toString(),actualCashInHand:(L.actualCashInHand??0).toString()}),l(!0),d(L.id);else{let le=0;ne&&(le=ne.actualCashInHand??0),i({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"0",previousCashInHand:le.toString(),usedOnlineMoney:"0",actualCashInHand:""}),l(!1),d(null)}},[r,L,ne]);const me=async le=>{if(le.preventDefault(),f){console.log(" Submission already in progress, ignoring duplicate request");return}p(!0);const Ee=parseFloat(s.actualCashInHand)||0,Ce=Ee-M,$e=v,Nt={date:r,offlineSales:parseFloat(s.offlineSales)||0,paytmAmount:parseFloat(s.paytmAmount)||0,cashAmount:parseFloat(s.cashAmount)||0,onlineSales:parseFloat(s.onlineSales)||0,employeeSalary:O,previousCashInHand:parseFloat(s.previousCashInHand)||0,usedOnlineMoney:parseFloat(s.usedOnlineMoney)||0,actualCashInHand:Ee,cashOffset:Ce,salesDiscrepancy:L?.salesDiscrepancy!==void 0?L.salesDiscrepancy:Ce,approvalRequired:te,approvalStatus:$e?"pending":"approved",createdBy:e.user?.employeeId||e.user?.email||"unknown",approvedBy:$e?L?.approvedBy||null:e.user?.employeeId||e.user?.email||"self",approvedAt:$e?L?.approvedAt||null:new Date().toISOString(),approvalRequested:L?.approvalRequested||!1,approvalRequestedAt:L?.approvalRequestedAt||null,requestedCashInHand:L?.requestedCashInHand||null,requestedOffset:L?.requestedOffset||null,rejectedBy:L?.rejectedBy||null,rejectedAt:L?.rejectedAt||null,rejectionReason:L?.rejectionReason||null,storeId:t||e.user?.storeId||void 0};try{if(o&&u?await e.updateSalesData(u,Nt):await e.addSalesData(Nt),w.length>0){const vt=await Zo(),qt=k.map(lr=>lr.id),gr=vt.filter(lr=>lr.date===r&&qt.includes(lr.employeeId));for(const lr of gr)await Pp(lr.id),console.log("Deleted old payout:",lr.id);const sr=w.filter(lr=>lr.employeeId&&lr.amount).map(lr=>{const Qr=k.find(Hr=>Hr.id===lr.employeeId);return{id:crypto.randomUUID(),employeeId:lr.employeeId,employeeName:Qr?.name||"",amount:parseFloat(lr.amount),date:r,createdAt:new Date().toISOString()}});sr.length>0&&(await p2(sr),console.log("Contract worker payouts synced to payroll:",sr))}else{const vt=await Zo(),qt=k.map(sr=>sr.id),gr=vt.filter(sr=>sr.date===r&&qt.includes(sr.employeeId));for(const sr of gr)await Pp(sr.id),console.log("Deleted payout (no workers entered):",sr.id)}alert("Sales data and contract worker payouts saved successfully!")}catch(vt){console.error("Error saving sales data:",vt),alert("Failed to save sales data. Please try again.")}finally{p(!1)}},ve=async()=>{if(!u)return;const le=parseFloat(s.actualCashInHand)||0,Ee=le-M;if(confirm(`Request approval for cash discrepancy of ${Math.abs(Ee).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(u,le,Ee),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},ye=async le=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(le),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},he=async le=>{const Ee=prompt("Please enter reason for rejection:");if(Ee)try{await e.rejectDiscrepancy(le,Ee),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},pe=parseFloat(s.onlineSales)||0,De=parseFloat(s.offlineSales)||0,q=parseFloat(s.paytmAmount)||0,Ae=parseFloat(s.cashAmount)||0,Be=q+Ae,xt=Math.abs(De-Be)>.01;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(ag,{selectedDate:r,onDateChange:n}),V&&e.isManager&&a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(On,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),m&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(le=>le.approvalRequested&&!le.approvedBy&&!le.rejectedBy).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(On,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Discrepancy Approval Requests"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(le=>le.approvalRequested&&!le.approvedBy&&!le.rejectedBy).map(le=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(le.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Expected Cash: ",(le.actualCashInHand-le.cashOffset).toFixed(2)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested Cash: ",(le.requestedCashInHand||0).toFixed(2)]}),a.jsxs("p",{className:"text-sm mt-1",children:["Discrepancy: ",a.jsxs("span",{className:(le.requestedOffset||0)>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[(le.requestedOffset||0)>0?"+":"","",(le.requestedOffset||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ye(le.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>he(le.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Reject"]})]})]},le.id))})]}),e.salesData.filter(le=>le.approvalRequired&&!le.approvedBy&&!le.approvalRequested).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(On,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(le=>le.approvalRequired&&!le.approvedBy&&!le.approvalRequested).map(le=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900",children:new Date(le.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",a.jsxs("span",{className:le.cashOffset>0?"text-green-600":"text-red-600",children:[le.cashOffset>0?"+":"","",le.cashOffset.toFixed(2)]})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(le.actualCashInHand-le.cashOffset).toFixed(2)," | Actual: ",le.actualCashInHand.toFixed(2)]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveSalesData(le.id),alert("Approved successfully!")}catch{alert("Failed to approve")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve"]})]},le.id))})]}),e.salesData.filter(le=>le.approvalRequired&&!le.approvedBy||le.approvalRequested&&!le.approvedBy&&!le.rejectedBy).length===0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(On,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."})]})]}),y&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(le=>le.approvalStatus==="pending"&&le.createdBy!==e.user?.employeeId).length>0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ps,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(le=>le.approvalStatus==="pending"&&le.createdBy!==e.user?.employeeId).map(le=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(le.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",le.createdBy]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",(le.offlineSales+le.onlineSales).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",le.actualCashInHand.toFixed(2)]})]})]}),Math.abs(le.cashOffset)>0&&a.jsxs("p",{className:"text-sm mt-1",children:["Cash Offset: ",a.jsxs("span",{className:le.cashOffset>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[le.cashOffset>0?"+":"","",le.cashOffset.toFixed(2)]})]})]}),a.jsxs("button",{onClick:async()=>{if(confirm(`Approve sales data for ${new Date(le.date).toLocaleDateString()}?`))try{await e.approveSalesData(le.id),alert("Sales data approved successfully!")}catch{alert("Failed to approve sales data")}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve Sales Data"]})]},le.id))})]}),e.salesData.filter(le=>le.approvalStatus==="pending"&&le.createdBy!==e.user?.employeeId).length===0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ps,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]}),v&&L&&L.approvalStatus==="pending"&&a.jsxs("div",{className:"mt-6 bg-[#FFF9E6] border-2 border-[#FFD54F] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(On,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsxs("p",{className:"text-gray-700",children:["Your sales entry for ",new Date(L.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from the Operations Manager."]})]}),v&&L&&L.approvalStatus==="approved"&&a.jsxs("div",{className:"mt-6 bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nr,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Approved"})]}),a.jsxs("p",{className:"text-gray-700",children:[" Your sales entry for ",new Date(L.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," has been approved by ",L.approvedBy,"."]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(qn,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Entry"})]}),a.jsxs("form",{onSubmit:me,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#D4E6F1] to-[#AED6F1] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(J9,{className:"w-5 h-5 text-[#5499C7]"}),"Offline Sales"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Offline Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.offlineSales,onChange:le=>i({...s,offlineSales:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.paytmAmount,onChange:le=>i({...s,paytmAmount:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.cashAmount,onChange:le=>i({...s,cashAmount:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]})]}),xt&&a.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg text-sm",children:[" Payment mode total (",Be.toFixed(2),") doesn't match offline sales (",De.toFixed(2),")"]}),!xt&&De>0&&a.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4"}),"Payment modes match total sales"]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#FFE6CC] to-[#FFDAB9] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(gn,{className:"w-5 h-5 text-[#E8A87C]"}),"Online Sales"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Online Sales (Zomato + Swiggy) ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.onlineSales,onChange:le=>i({...s,onlineSales:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E0F2F7] to-[#B3E5FC] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Y7,{className:"w-5 h-5 text-[#4FC3F7]"}),"Used Online Money"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount Used from Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.usedOnlineMoney,onChange:le=>i({...s,usedOnlineMoney:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!b}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter amount if Paytm balance was used for expenses"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[a.jsx(xn,{className:"w-5 h-5 text-purple-600"}),"Contract Worker Payouts"]}),e.isManager&&a.jsxs("button",{type:"button",onClick:P,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[a.jsx(co,{className:"w-4 h-4"}),"Add Worker"]})]}),E?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):k.length===0?a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-gray-700",children:a.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):a.jsxs("div",{className:"space-y-3",children:[w.length===0?a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):w.map((le,Ee)=>{const Ce=k.find($e=>$e.id===le.employeeId);return a.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-3 space-y-2",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Worker"}),a.jsxs("select",{value:le.employeeId,onChange:$e=>I(Ee,"employeeId",$e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",disabled:!e.isManager,required:!0,children:[a.jsx("option",{value:"",children:"Choose a worker..."}),k.map($e=>a.jsxs("option",{value:$e.id,children:[$e.name," (",$e.employeeId,")"]},$e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount Paid ()"}),a.jsx("input",{type:"number",step:"0.01",value:le.amount,onChange:$e=>I(Ee,"amount",$e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",placeholder:Ce?.dailyRate?`Suggested: ${Ce.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),Ce?.dailyRate&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",Ce.dailyRate]})]})]}),e.isManager&&a.jsx("button",{type:"button",onClick:()=>B(Ee),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:a.jsx(Wr,{className:"w-4 h-4"})})]})},Ee)}),w.length>0&&a.jsxs("div",{className:"bg-purple-600 text-white rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Total Contract Payouts:"}),a.jsxs("span",{className:"text-lg",children:["",O.toFixed(2)]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50 p-2 rounded border border-purple-200",children:[" ",a.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),O>0&&a.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100 p-2 rounded border border-purple-300 flex items-center gap-1",children:[" ",a.jsx("strong",{children:"Cash Impact:"})," ",O.toFixed(2)," will be deducted from offline cash when calculating cash in hand."]})]}),(X||U)&&a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ro,{className:"w-5 h-5 text-amber-600"}),X?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Left ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.previousCashInHand,onChange:le=>i({...s,previousCashInHand:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!b,required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:X?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!X&&!U&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[a.jsxs("h3",{className:"text-gray-900 mb-2 flex items-center gap-2",children:[a.jsx(ro,{className:"w-5 h-5 text-gray-600"}),"Cash Left from Previous Day (Auto-Calculated)"]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("p",{className:"text-2xl text-gray-900",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" This is automatically calculated from previous day's cash left after deducting expenses and salaries.",U&&" You can edit this only on the 1st of the month."]})]})]}),!X&&a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ro,{className:"w-5 h-5 text-teal-600"}),"Cash Reconciliation"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Expected Cash in Hand"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",M.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous Cash: ",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + Amount Used from Paytm: ",(parseFloat(s.usedOnlineMoney)||0).toFixed(2)," + Cash Received: ",Ae.toFixed(2)," - Expenses: ",ee.toFixed(2)," - Fixed Costs (Cash): ",R.toFixed(2)," - Contract Payouts: ",O.toFixed(2)]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View expense breakdown"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[a.jsxs("p",{children:["Inventory Cost: ",e.inventory.filter(le=>le.date===r).reduce((le,Ee)=>le+Ee.totalCost,0).toFixed(2)," (",e.inventory.filter(le=>le.date===r).length," items)"]}),a.jsxs("p",{children:["Overhead Cost: ",e.overheads.filter(le=>le.date===r).reduce((le,Ee)=>le+Ee.amount,0).toFixed(2)," (",e.overheads.filter(le=>le.date===r).length," items)"]}),a.jsxs("p",{children:["Fixed Costs (Cash): ",R.toFixed(2)," (",e.fixedCosts.filter(le=>le.date===r&&(le.paymentMethod==="cash"||le.paymentMethod==="both")).length," items)"]}),a.jsxs("p",{className:"font-medium mt-1",children:["Total: ",(ee+R).toFixed(2)]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Actual Cash in Hand ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.actualCashInHand,onChange:le=>i({...s,actualCashInHand:le.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!b}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),s.actualCashInHand&&a.jsxs("div",{className:`rounded-lg p-3 border-2 ${Math.abs(J)===0?"bg-green-100 border-green-300":te?"bg-red-100 border-red-300":"bg-yellow-100 border-yellow-300"}`,children:[a.jsx("p",{className:"text-sm font-medium",children:Math.abs(J)===0?a.jsxs("span",{className:"text-green-700 flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4"}),"Perfect Match! No discrepancy."]}):te?a.jsxs("span",{className:"text-red-700 flex items-center gap-2",children:[a.jsx(On,{className:"w-4 h-4"}),"High Discrepancy: ",J>0?"+":"","",J.toFixed(2)]}):a.jsxs("span",{className:"text-yellow-700",children:["Small Offset: ",J>0?"+":"","",J.toFixed(2)]})}),te&&!L?.approvedBy&&!L?.approvalRequested&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Exceeds 500 limit - Save first, then request cluster head approval"}),L?.approvalRequested&&!L?.approvedBy&&!L?.rejectedBy&&a.jsxs("p",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),"Approval pending from cluster head"]}),L?.approvedBy&&a.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[a.jsx(ps,{className:"w-3 h-3"}),"Approved by: ",L.approvedBy]}),L?.rejectedBy&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[a.jsxs("p",{className:"flex items-center gap-1",children:[a.jsx(Wr,{className:"w-3 h-3"}),"Rejected by: ",L.rejectedBy]}),L.rejectionReason&&a.jsxs("p",{className:"mt-1 italic",children:["Reason: ",L.rejectionReason]}),a.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})]})]})]}),b&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{type:"submit",disabled:xt||f,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[f&&a.jsx(Tf,{className:"w-5 h-5 animate-spin"}),f?"Saving...":o?"Update Sales Data":"Save Sales Data"]}),o&&u&&te&&!L?.approvedBy&&!L?.approvalRequested&&a.jsxs("button",{type:"button",onClick:ve,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(On,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),o&&L?.approvalRequested&&!L?.approvedBy&&!L?.rejectedBy&&a.jsx("div",{className:"w-full px-6 py-3 bg-orange-100 border-2 border-orange-300 text-orange-800 rounded-lg text-center",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#B8E6B8] to-[#A3D9A5] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(qn,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Total Sales"})]}),a.jsxs("p",{className:"text-4xl",children:["",(De+pe).toLocaleString()]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/20 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Offline Sales:"}),a.jsxs("span",{children:["",De.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{children:["",pe.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#A8D8EA] to-[#93C5FD] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ro,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Payment Breakdown"})]}),a.jsxs("div",{className:"space-y-3 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Cash Received:"}),a.jsxs("span",{className:"text-2xl",children:["",Ae.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Paytm Received:"}),a.jsxs("span",{className:"text-2xl",children:["",q.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/20",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{className:"text-xl",children:["",pe.toLocaleString()]})]})]})]}),!X&&a.jsxs("div",{className:"bg-gradient-to-br from-[#D8B5FF] to-[#C7A7FF] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ro,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Cash Status"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:"Expected Cash"}),a.jsxs("p",{className:"text-3xl",children:["",M.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + ",Ae.toFixed(2)," - ",ee.toFixed(2)," - ",O.toFixed(2)]})]}),s.actualCashInHand&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Actual Cash"}),a.jsxs("p",{className:"text-3xl",children:["",(parseFloat(s.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(J)>0&&a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Difference"}),a.jsxs("p",{className:`text-2xl ${J>0?"text-green-700":"text-red-700"}`,children:[J>0?"+":"","",J.toFixed(2)]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#C7A7FF] to-[#B794F4] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(eB,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),a.jsxs("p",{className:"text-4xl mb-4",children:["",ie.toLocaleString()]}),a.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between text-green-700",children:[a.jsx("span",{children:"Total Paytm Received:"}),a.jsxs("span",{children:["",e.salesData.filter(le=>le.date<=r).reduce((le,Ee)=>le+(Ee.paytmAmount??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Total Used:"}),a.jsxs("span",{children:["",e.salesData.filter(le=>le.date<=r).reduce((le,Ee)=>le+(Ee.usedOnlineMoney??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Fixed Costs (Online):"}),a.jsxs("span",{children:["",e.fixedCosts.filter(le=>le.date<=r).reduce((le,Ee)=>Ee.paymentMethod==="online"?le+Ee.amount:Ee.paymentMethod==="both"&&Ee.onlineAmount?le+Ee.onlineAmount:le,0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[a.jsx("span",{children:"Used Today:"}),a.jsxs("span",{children:["",(parseFloat(s.usedOnlineMoney)||0).toLocaleString()]})]}),se>0&&a.jsxs("div",{className:"flex justify-between text-gray-700",children:[a.jsx("span",{children:"Fixed Costs Today (Online):"}),a.jsxs("span",{children:["",se.toLocaleString()]})]})]})]})]})]})]})}function zF({onClose:e,employees:t}){const[r,n]=F.useState([]),[s,i]=F.useState({}),[o,l]=F.useState(!1),[u,d]=F.useState(null);F.useEffect(()=>{const x=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");n(x);const v={};x.forEach(y=>{const b=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,k=`Bhandar@${y.employeeId}`;v[y.id]={email:b,password:k}}),i(v)},[t]);const f=(x,v,y)=>{i(b=>({...b,[x]:{...b[x],[v]:y}}))},p=async()=>{l(!0),d(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const x=r.map(b=>({name:b.name,email:s[b.id].email,password:s[b.id].password,employeeId:b.employeeId}));console.log("Creating accounts for employees:",x);const v=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify({employees:x})}),y=await v.json();if(console.log("Server response:",y),!v.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${v.status})`);d({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(x){console.error("Error creating employee accounts:",x),alert(`Failed to create employee accounts: ${x instanceof Error?x.message:String(x)}`)}finally{l(!1)}},m=()=>{const x=r.map(N=>({"Employee ID":N.employeeId,Name:N.name,Email:s[N.id].email,Password:s[N.id].password,"Monthly Salary":N.monthlySalary||0})),v=[Object.keys(x[0]).join(","),...x.map(N=>Object.values(N).join(","))].join(`
`),y=new Blob([v],{type:"text/csv"}),b=window.URL.createObjectURL(y),k=document.createElement("a");k.href=b,k.download="employee-credentials.csv",k.click(),window.URL.revokeObjectURL(b)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Ti,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:u.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),a.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[a.jsx(ao,{className:"w-5 h-5"}),a.jsx("span",{children:"Accounts Prepared"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.deleted})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("span",{children:"Failed"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.failed})]})]}),a.jsx("div",{className:"space-y-2",children:u.details.map((x,v)=>a.jsx("div",{className:`p-3 rounded-lg border ${x.status==="created"?"bg-green-50 border-green-200":x.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:x.email}),a.jsxs("span",{className:"text-sm",children:[x.status==="created"&&a.jsx("span",{className:"text-green-700",children:" Created"}),x.status==="updated"&&a.jsx("span",{className:"text-blue-700",children:" Updated"}),x.error&&a.jsxs("span",{className:"text-red-700",children:[" ",x.error]})]})]})},v))}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),a.jsx("div",{className:"space-y-3",children:r.map(x=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm",children:x.name}),a.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",x.employeeId]})]}),x.email&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(_h,{className:"w-3 h-3"}),"Email Address"]}),a.jsx("input",{type:"email",value:s[x.id]?.email||"",onChange:v=>f(x.id,"email",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(Q1,{className:"w-3 h-3"}),"Password"]}),a.jsx("input",{type:"text",value:s[x.id]?.password||"",onChange:v=>f(x.id,"password",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},x.id))})]})}),a.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!u&&a.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ti,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function es({value:e,onChange:t,label:r,className:n="",min:s,max:i}){const o=F.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},u=f=>f?new Date(f+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"Select date",d=n.includes("w-full");return a.jsxs("div",{className:d?"w-full":`flex items-center gap-2 ${n}`,children:[r&&a.jsx("label",{className:`text-sm text-gray-600 ${d?"block mb-2":"whitespace-nowrap"}`,children:r}),a.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${d?"w-full":"min-w-[160px]"}`,children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0 pointer-events-none"}),a.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1 pointer-events-none",children:u(e)}),a.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})]})}const _oe=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Salary Payment</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function wk({userRole:e,selectedDate:t,userEmployeeId:r,userName:n,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,u]=F.useState("contract"),[d,f]=F.useState([]),[p,m]=F.useState([]),[x,v]=F.useState([]),[y,b]=F.useState(!0),[k,N]=F.useState(!1),[w,T]=F.useState(!1),[E,S]=F.useState(""),[_,A]=F.useState("current"),[P,B]=F.useState(""),[I,O]=F.useState(""),L=()=>{const Fe=new Date,we=Fe.getFullYear(),mt=Fe.getMonth(),Ue=new Date(we,mt+1,0),rt=`${we}-${String(mt+1).padStart(2,"0")}-01`,ut=Ue.getDate(),Vt=`${we}-${String(mt+1).padStart(2,"0")}-${String(ut).padStart(2,"0")}`;return{start:rt,end:Vt,monthName:Fe.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},X=()=>{const Fe=new Date,we=Fe.getMonth()===0?Fe.getFullYear()-1:Fe.getFullYear(),mt=Fe.getMonth()===0?11:Fe.getMonth()-1,Ue=new Date(we,mt,1),rt=new Date(we,mt+1,0),ut=`${we}-${String(mt+1).padStart(2,"0")}-01`,Vt=rt.getDate(),_t=`${we}-${String(mt+1).padStart(2,"0")}-${String(Vt).padStart(2,"0")}`;return{start:ut,end:_t,monthName:Ue.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},U=L(),V=X(),[ne,ee]=F.useState(!1),[R,se]=F.useState(null),[z,M]=F.useState(!1),[J,te]=F.useState({employeeIds:[],amount:"",date:t}),[ie,me]=F.useState(!1),[ve,ye]=F.useState(null),[he,pe]=F.useState(!1),De=F.useMemo(()=>{let Fe=d;return s&&(Fe=Fe.filter(we=>we.storeId===s||we.storeId===null||we.storeId===void 0)),i&&r&&(Fe=Fe.filter(we=>we.type==="contract"?!0:we.type==="fulltime"?we.inchargeId===r:!1)),Fe},[d,s,i,r]),q=F.useMemo(()=>{if(!s)return p;const Fe=De.map(we=>we.id);return p.filter(we=>Fe.includes(we.employeeId))},[p,De,s]),Ae=F.useMemo(()=>{let Fe;if(_==="current")Fe=q.filter(we=>we.date>=U.start&&we.date<=U.end);else if(_==="last")Fe=q.filter(we=>we.date>=V.start&&we.date<=V.end);else{if(!P||!I)return[];Fe=q.filter(we=>we.date>=P&&we.date<=I)}return Fe},[q,_,U,V,P,I]);F.useEffect(()=>{Be()},[]);const Be=async()=>{b(!0);try{console.log("Loading employees, payouts, and salary advances from server...");const[Fe,we,mt]=await Promise.all([nl(),Zo(),m2()]);console.log("Loaded employees:",Fe),console.log("Loaded payouts:",we),console.log("Loaded salary advances:",mt),f(Fe||[]),m(we||[]),v(mt||[])}catch(Fe){console.error("Error loading payroll data:",Fe)}finally{b(!1)}},xt=async Fe=>{try{const we=x.find(rt=>rt.id===Fe);if(!we)return;const Ue={...we,status:"approved",approvedBy:n||r||"Cluster Head",approvedDate:new Date().toISOString()};await hj(Fe,Ue),alert("Salary advance approved successfully!"),Be()}catch(we){console.error("Error approving salary advance:",we),alert("Failed to approve salary advance. Please try again.")}},le=async Fe=>{const we=prompt("Please provide a reason for rejection:");if(we)try{const mt=x.find(rt=>rt.id===Fe);if(!mt)return;const Ue={...mt,status:"rejected",rejectionReason:we,approvedBy:n||r||"Cluster Head",approvedDate:new Date().toISOString()};await hj(Fe,Ue),alert("Salary advance rejected."),Be()}catch(mt){console.error("Error rejecting salary advance:",mt),alert("Failed to reject salary advance. Please try again.")}},Ee=async()=>{if(!E||!r)return;const Fe=parseFloat(E);if(isNaN(Fe)||Fe<=0){alert("Please enter a valid amount");return}try{const we=d.find(ut=>ut.employeeId===r);if(!we){alert("Employee not found");return}if(we.type!=="fulltime"){alert("Only permanent employees can apply for salary advance");return}if(x.some(ut=>ut.employeeId===we.id&&(ut.status==="pending"||ut.status==="approved"&&ut.remainingAmount>0))){alert("You already have an active or pending salary advance");return}const Ue=Fe/4,rt={employeeId:we.id,employeeName:we.name,employeeEmployeeId:we.employeeId,amount:Fe,monthlyDeduction:Ue,remainingAmount:Fe,status:"pending",requestDate:new Date().toISOString()};await g2(rt),alert("Salary advance request submitted successfully!"),T(!1),S(""),Be()}catch(we){console.error("Error applying for salary advance:",we),alert("Failed to submit salary advance request. Please try again.")}},Ce=async()=>{if(J.employeeIds.length===0||!J.amount){alert("Please select employees and enter amount");return}if(!k)try{N(!0);const Fe=J.employeeIds.map(mt=>{const Ue=d.find(rt=>rt.id===mt);return{id:crypto.randomUUID(),employeeId:mt,employeeName:Ue?.name||"",amount:parseFloat(J.amount),date:J.date,createdAt:new Date().toISOString()}});console.log("Adding payouts:",Fe);const we=await p2(Fe);console.log("Payouts added successfully:",we),m([...p,...Fe]),M(!1),te({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch(Fe){console.error("Error adding payout:",Fe);const we=Fe instanceof Error?Fe.message:"Unknown error occurred";alert(`Failed to add payout: ${we}`)}finally{N(!1)}},$e=async()=>{if(R)try{console.log("PayrollManagement: Updating employee:",R),await(void 0)(R.id,R),f(d.map(Fe=>Fe.id===R.id?R:Fe)),ee(!1),se(null),alert("Employee updated successfully!")}catch(Fe){console.error("PayrollManagement: Error updating employee:",Fe);const we=Fe instanceof Error?Fe.message:"Unknown error";alert(`Failed to update employee: ${we}`)}},Nt=async Fe=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await ND(Fe),f(d.filter(we=>we.id!==Fe)),m(p.filter(we=>we.employeeId!==Fe)),alert("Employee deleted successfully!")}catch(we){console.error("Error deleting employee:",we),alert("Failed to delete employee")}},vt=async()=>{if(ve)try{await OD(ve.id,{amount:ve.amount,date:ve.date}),m(p.map(Fe=>Fe.id===ve.id?ve:Fe)),me(!1),ye(null),alert("Payout updated successfully!")}catch(Fe){console.error("Error updating payout:",Fe),alert("Failed to update payout")}},qt=async Fe=>{if(confirm("Are you sure you want to delete this payout?"))try{await Pp(Fe),m(p.filter(we=>we.id!==Fe)),alert("Payout deleted successfully!")}catch(we){console.error("Error deleting payout:",we),alert("Failed to delete payout")}},gr=()=>{const Fe=De.filter(ut=>ut.type==="contract"),we=Ae.filter(ut=>De.find(_t=>_t.id===ut.employeeId)?.type==="contract"),mt=we.reduce((ut,Vt)=>ut+Vt.amount,0),Ue=Fe.map(ut=>{const Vt=we.filter(Ne=>Ne.employeeId===ut.id),_t=new Set(Vt.map(Ne=>Ne.date));return{...ut,daysWorked:_t.size,totalPay:Vt.reduce((Ne,Se)=>Ne+Se.amount,0)}}),rt=Ue.reduce((ut,Vt)=>ut+Vt.daysWorked,0);return{totalPayout:mt,employeeWorkDays:Ue,totalDaysWorked:rt}},sr=()=>{const Fe=De.filter(rt=>rt.type==="fulltime"),we=Ae.filter(rt=>De.find(Vt=>Vt.id===rt.employeeId)?.type==="fulltime"),mt=we.reduce((rt,ut)=>rt+ut.amount,0),Ue=Fe.map(rt=>{const ut=we.filter(Vt=>Vt.employeeId===rt.id);return{...rt,totalPaid:ut.reduce((Vt,_t)=>Vt+_t.amount,0),lastPayout:ut.length>0?ut[ut.length-1]:null}});return{totalPayout:mt,employeePayouts:Ue}},lr=Fe=>Fe.split(" ").map(we=>we[0]).join("").toUpperCase().slice(0,2),Qr=Fe=>{const we=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return we[Fe%we.length]};gr(),sr();const Hr=l==="contract"?De.filter(Fe=>Fe.type==="contract"):De.filter(Fe=>Fe.type==="fulltime"),cr=()=>e==="audit"?!1:l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return y?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&a.jsx("button",{onClick:()=>u("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),a.jsx("button",{onClick:()=>u("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),(e==="cluster_head"||e==="audit")&&a.jsx("button",{onClick:()=>u("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"}),(e==="cluster_head"||e==="audit")&&a.jsx("button",{onClick:()=>u("advances"),className:`py-4 border-b-2 transition-colors ${l==="advances"?"border-purple-500 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cu,{className:"w-4 h-4"}),a.jsx("span",{children:"Salary Advances"}),x.filter(Fe=>Fe.status==="pending").length>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:x.filter(Fe=>Fe.status==="pending").length})]})})]})}),a.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[a.jsx("div",{className:"flex gap-4 flex-wrap",children:cr()&&a.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(qn,{className:"w-4 h-4"}),"Add Payout"]})}),a.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-5 h-5 text-purple-700"}),a.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>A("current"),className:`px-4 py-2 rounded-lg transition-colors ${_==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),a.jsx("button",{onClick:()=>A("last"),className:`px-4 py-2 rounded-lg transition-colors ${_==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),a.jsx("button",{onClick:()=>A("custom"),className:`px-4 py-2 rounded-lg transition-colors ${_==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),_==="current"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:U.monthName})}):_==="last"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:V.monthName})}):a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsx(es,{label:"From:",value:P,onChange:B}),a.jsx(es,{label:"To:",value:I,onChange:O})]})]})})]}),l==="contract"&&(()=>{const Fe=d.filter(Ue=>Ue.type==="contract"),we=Ae.filter(Ue=>d.find(ut=>ut.id===Ue.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",d.length),console.log("Contract employees:",Fe.length,Fe),console.log("Contract payouts:",we.length,we);const mt=we.reduce((Ue,rt)=>Ue+rt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Fe.length})]})]}),Fe.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(xn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No contract employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Fe.map((Ue,rt)=>{const ut=we.filter(Ne=>Ne.employeeId===Ue.id),Vt=ut.reduce((Ne,Se)=>Ne+Se.amount,0),_t=new Set(ut.map(Ne=>Ne.date)).size;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${Qr(rt)} flex items-center justify-center text-white`,children:lr(Ue.name)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ue.name}),a.jsx("div",{className:"text-xs text-gray-500",children:Ue.employeeId})]})]}),e!=="audit"&&a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{se(Ue),ee(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Nt(Ue.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:a.jsx(bs,{className:"w-4 h-4"})})]})]}),Ue.role&&a.jsx("div",{className:"mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ue.role})}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Phone:"}),a.jsx("span",{className:"text-gray-900",children:Ue.phone})]}),Ue.dailyRate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),a.jsxs("span",{className:"text-green-600",children:["",Ue.dailyRate]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),a.jsx("span",{className:"text-gray-900",children:_t})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),a.jsxs("span",{className:"text-gray-900",children:["",Vt.toLocaleString()]})]})]})]},Ue.id)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",_==="current"?U.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",mt.toLocaleString()]})]})]}),we.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e!=="audit"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:we.sort((Ue,rt)=>new Date(rt.date).getTime()-new Date(Ue.date).getTime()).map((Ue,rt)=>{const ut=d.find(Vt=>Vt.id===Ue.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Qr(rt)} flex items-center justify-center text-white text-sm`,children:lr(Ue.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ue.employeeName}),ut?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:ut.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:ut?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ue.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ue.amount.toLocaleString()]})}),e!=="audit"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{ye(Ue),me(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>qt(Ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(bs,{className:"w-4 h-4"})})]})})]},Ue.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const Fe=p.filter(Se=>Se.employeeId===r),we=d.find(Se=>Se.employeeId===r),mt=we?.type||"fulltime",Ue=x.filter(Se=>Se.employeeId===we?.id),rt=Ue.some(Se=>Se.status==="pending"||Se.status==="approved"&&Se.remainingAmount>0),ut=new Date;ut.getDate();const Vt=[];for(let Se=0;Se<12;Se++){const Ge=new Date(ut.getFullYear(),ut.getMonth()-Se,1),bt=Ge.toLocaleDateString("en-US",{month:"long"}),dt=Ge.getFullYear().toString(),st=Ge.getMonth()+1,wt=new Date(Ge.getFullYear(),Ge.getMonth()+1,5),Rt=ut>=wt,nt=Fe.filter(ht=>{const Ut=new Date(ht.date);return Ut.getMonth()+1===st&&Ut.getFullYear()===Ge.getFullYear()}),yt=nt.reduce((ht,Ut)=>ht+Ut.amount,0);Vt.push({month:bt,year:dt,payouts:nt,total:yt,isAvailable:Rt})}const _t=Ae.filter(Se=>Se.employeeId===r),Ne=_t.reduce((Se,Ge)=>Se+Ge.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),a.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),mt==="fulltime"&&a.jsxs("button",{onClick:()=>T(!0),disabled:rt,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${rt?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-md"}`,title:rt?"You already have an active salary advance":"Apply for salary advance",children:[a.jsx(cu,{className:"w-4 h-4"}),rt?"Advance Active":"Apply for Advance"]})]}),Ue.length>0&&a.jsx("div",{className:"mb-6 space-y-3",children:Ue.map(Se=>a.jsx("div",{className:`border-2 rounded-lg p-4 ${Se.status==="pending"?"border-yellow-300 bg-yellow-50":Se.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Se.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx(on,{className:"w-5 h-5 text-yellow-600"}),a.jsx("span",{className:"font-medium text-yellow-900",children:"Advance Request Pending"})]}),Se.status==="approved"&&a.jsxs(a.Fragment,{children:[a.jsx(nr,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-green-900",children:"Advance Approved"})]}),Se.status==="rejected"&&a.jsxs(a.Fragment,{children:[a.jsx(pa,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"font-medium text-red-900",children:"Advance Rejected"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",Se.amount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",Se.monthlyDeduction.toLocaleString()]})]}),Se.status==="approved"&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:["",Se.remainingAmount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Request Date"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(Se.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),Se.status==="approved"&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Deduction Period"}),a.jsx("p",{className:"text-sm text-gray-900",children:(()=>{const[Ge,bt]=Se.startMonth.split("-"),[dt,st]=Se.endMonth.split("-"),wt=new Date(parseInt(Ge),parseInt(bt)-1,1),Rt=new Date(parseInt(dt),parseInt(st)-1,1),nt=wt.toLocaleDateString("en-US",{month:"short",year:"numeric"}),yt=Rt.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${nt} to ${yt} (${Se.installments} months)`})()})]}),Se.status==="rejected"&&Se.rejectionReason&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-red-200",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),a.jsx("p",{className:"text-sm text-red-900",children:Se.rejectionReason})]})]})})},Se.id))}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Received"}),a.jsx("p",{className:"text-sm text-gray-500",children:_==="current"?`for ${U.monthName}`:_==="last"?`for ${V.monthName}`:`from ${P} to ${I}`})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-3xl text-green-600",children:["",Ne.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[_t.length," payment",_t.length!==1?"s":""]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(fi,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Vt.map((Se,Ge)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${Se.isAvailable&&Se.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[Se.month," ",Se.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Se.payouts.length," payment",Se.payouts.length!==1?"s":""]})]}),Se.isAvailable&&Se.payouts.length>0?a.jsxs("button",{onClick:()=>_oe(n||"Employee",r,Se.month,Se.year,Se.payouts,mt),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(ii,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:Se.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",Se.total.toLocaleString("en-IN")]})]})]},Ge))})]}),a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),_t.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts found for the selected period"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),a.jsx("tbody",{children:_t.sort((Se,Ge)=>new Date(Ge.date).getTime()-new Date(Se.date).getTime()).map(Se=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:new Date(Se.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:r})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-green-600",children:["",Se.amount.toLocaleString()]})})]},Se.id))})]})})]})})(),l==="permanent"&&(()=>{const Fe=d.filter(Ue=>Ue.type==="fulltime"),we=Ae.filter(Ue=>d.find(ut=>ut.id===Ue.employeeId)?.type==="fulltime"),mt=we.reduce((Ue,rt)=>Ue+rt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Fe.length})]})]}),Fe.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(xn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No permanent employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),a.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",_==="current"?"This Month":_==="last"?"Last Month":"Period",")"]}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Fe.map((Ue,rt)=>{const ut=we.filter(Ne=>Ne.employeeId===Ue.id),Vt=ut.reduce((Ne,Se)=>Ne+Se.amount,0),_t=ut.length>0?ut.sort((Ne,Se)=>new Date(Se.date).getTime()-new Date(Ne.date).getTime())[0]:null;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Qr(rt)} flex items-center justify-center text-white text-sm`,children:lr(Ue.name)}),a.jsx("div",{className:"text-gray-900",children:Ue.name})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ue.employeeId})}),a.jsx("td",{className:"py-4 px-4",children:Ue.role&&a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ue.role})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ue.phone})}),a.jsx("td",{className:"py-4 px-4",children:_t?a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:new Date(_t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",_t.amount.toLocaleString()]})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Vt.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{se(Ue),ee(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Nt(Ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:a.jsx(bs,{className:"w-4 h-4"})})]})})]},Ue.id)})})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",_==="current"?U.monthName:_==="last"?V.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",mt.toLocaleString()]})]})]}),we.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(qn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:we.sort((Ue,rt)=>new Date(rt.date).getTime()-new Date(Ue.date).getTime()).map((Ue,rt)=>{const ut=d.find(Vt=>Vt.id===Ue.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Qr(rt)} flex items-center justify-center text-white text-sm`,children:lr(Ue.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ue.employeeName}),ut?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:ut.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:ut?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ue.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ue.amount.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{ye(Ue),me(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>qt(Ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(bs,{className:"w-4 h-4"})})]})})]},Ue.id)})})]})})]})]})})(),l==="advances"&&(e==="cluster_head"||e==="audit")&&(()=>{const Fe=x.filter(Ue=>Ue.status==="pending"),we=x.filter(Ue=>Ue.status==="approved"),mt=x.filter(Ue=>Ue.status==="rejected");return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Salary Advance Requests"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review and manage employee salary advance requests"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700 mb-1",children:"Pending Requests"}),a.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:Fe.length})]}),a.jsx(on,{className:"w-10 h-10 text-yellow-400"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Approved"}),a.jsx("p",{className:"text-2xl font-semibold text-green-900",children:we.length})]}),a.jsx(nr,{className:"w-10 h-10 text-green-400"})]})}),a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-700 mb-1",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-semibold text-red-900",children:mt.length})]}),a.jsx(pa,{className:"w-10 h-10 text-red-400"})]})})]}),Fe.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(on,{className:"w-5 h-5 text-yellow-600"}),"Pending Requests"]}),a.jsx("div",{className:"space-y-4",children:Fe.map(Ue=>a.jsxs("div",{className:"border-2 border-yellow-300 bg-yellow-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ue.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Employee ID: ",Ue.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(Ue.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Amount"}),a.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",Ue.amount.toLocaleString("en-IN")]})]})]}),a.jsx("div",{className:"bg-white border border-yellow-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Ue.monthlyDeduction.toLocaleString("en-IN")]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Installments"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Ue.installments," months"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[rt,ut]=Ue.startMonth.split("-");return new Date(parseInt(rt),parseInt(ut)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[rt,ut]=Ue.endMonth.split("-");return new Date(parseInt(rt),parseInt(ut)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]})}),e==="cluster_head"&&a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>xt(Ue.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md font-medium",children:[a.jsx(nr,{className:"w-5 h-5"}),a.jsx("span",{children:"Approve"})]}),a.jsxs("button",{onClick:()=>le(Ue.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 transition-all shadow-md font-medium",children:[a.jsx(pa,{className:"w-5 h-5"}),a.jsx("span",{children:"Reject"})]})]})]},Ue.id))})]}),we.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(nr,{className:"w-5 h-5 text-green-600"}),"Approved Advances"]}),a.jsx("div",{className:"space-y-4",children:we.map(Ue=>a.jsxs("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ue.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Ue.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Approved on ",new Date(Ue.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Ue.amount.toLocaleString("en-IN")]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Remaining: ",Ue.remainingAmount.toLocaleString("en-IN")]})]})]}),a.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Progress"}),a.jsx("div",{className:"space-y-2",children:Ue.deductions.map((rt,ut)=>a.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${rt.deducted?"bg-green-100 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[rt.deducted?a.jsx(nr,{className:"w-4 h-4 text-green-600"}):a.jsx(on,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900",children:new Date(rt.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),a.jsxs("span",{className:`text-sm font-semibold ${rt.deducted?"text-green-700":"text-gray-700"}`,children:["",rt.amount.toLocaleString("en-IN")]})]},ut))})]})]},Ue.id))})]}),mt.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(pa,{className:"w-5 h-5 text-red-600"}),"Rejected Requests"]}),a.jsx("div",{className:"space-y-4",children:mt.map(Ue=>a.jsxs("div",{className:"border-2 border-red-300 bg-red-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Ue.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Ue.employeeEmployeeId]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Rejected on ",new Date(Ue.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Requested Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",Ue.amount.toLocaleString("en-IN")]})]})]}),Ue.rejectionReason&&a.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),a.jsx("p",{className:"text-sm text-red-700",children:Ue.rejectionReason})]})]},Ue.id))})]}),x.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-12 text-center",children:[a.jsx(cu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No Salary Advance Requests"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Employees can apply for salary advances from their dashboard"})]})]})})()]})]}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Apply for Salary Advance"}),a.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-purple-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-800 font-medium mb-1",children:"Recovery Terms"}),a.jsx("p",{className:"text-sm text-purple-700",children:"The advance will be automatically deducted from your salary over the next 4 months in equal installments."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Advance Amount *"}),a.jsx("input",{type:"number",value:E,onChange:Fe=>S(Fe.target.value),placeholder:"Enter amount (e.g., 10000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),E&&!isNaN(parseFloat(E))&&parseFloat(E)>0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Monthly Deduction Preview:"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(parseFloat(E)/4).toLocaleString("en-IN"),"/month"]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"for 4 months"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>{T(!1),S("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-gray-700",children:"Cancel"}),a.jsx("button",{onClick:Ee,disabled:!E||isNaN(parseFloat(E))||parseFloat(E)<=0,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Request"})]})]})}),ne&&R&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),a.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),a.jsx("input",{type:"text",value:R.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:R.name,onChange:Fe=>se({...R,name:Fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),a.jsx("input",{type:"tel",value:R.phone,onChange:Fe=>se({...R,phone:Fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),a.jsx("input",{type:"text",value:R.role||"",onChange:Fe=>se({...R,role:Fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),R.type==="contract"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),a.jsx("input",{type:"number",value:R.dailyRate||"",onChange:Fe=>se({...R,dailyRate:parseFloat(Fe.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>ee(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:$e,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),z&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),a.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),a.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:Hr.map(Fe=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[a.jsx("input",{type:"checkbox",checked:J.employeeIds.includes(Fe.id),onChange:we=>{we.target.checked?te({...J,employeeIds:[...J.employeeIds,Fe.id]}):te({...J,employeeIds:J.employeeIds.filter(mt=>mt!==Fe.id)})},className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[Fe.name," (",Fe.employeeId,")"]})]},Fe.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[J.employeeIds.length," employee(s) selected"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:J.amount,onChange:Fe=>te({...J,amount:Fe.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),a.jsx(es,{label:"Date *",value:J.date,onChange:Fe=>te({...J,date:Fe}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ce,disabled:k,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:k?"Adding...":"Add Payout"})]})]})}),ie&&ve&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),a.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),a.jsx("input",{type:"text",value:ve.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:ve.amount,onChange:Fe=>ye({...ve,amount:parseFloat(Fe.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsx(es,{label:"Date *",value:ve.date,onChange:Fe=>ye({...ve,date:Fe}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>me(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:vt,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),he&&a.jsx(zF,{onClose:()=>pe(!1),employees:d})]})}function Eoe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let $N=1;class Aoe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:$N++,o=this.toasts.find(u=>u.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:n}),{...u,...t,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async d=>{if(o=["resolve",d],de.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(Coe(d)&&!d.ok){i=!1;const p=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,v=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...v})}else if(d instanceof Error){i=!1;const p=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description,v=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...v})}else if(r.success!==void 0){i=!1;const p=typeof r.success=="function"?await r.success(d):r.success,m=typeof r.description=="function"?await r.description(d):r.description,v=typeof p=="object"&&!de.isValidElement(p)?p:{message:p};this.create({id:n,type:"success",description:m,...v})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(d):r.error,p=typeof r.description=="function"?await r.description(d):r.description,x=typeof f=="object"&&!de.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:p,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(t,r)=>{const n=r?.id||$N++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ms=new Aoe,Toe=(e,t)=>{const r=t?.id||$N++;return Ms.addToast({title:e,...t,id:r}),r},Coe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Ooe=Toe,Poe=()=>Ms.toasts,Ioe=()=>Ms.getActiveToasts(),mr=Object.assign(Ooe,{success:Ms.success,info:Ms.info,warning:Ms.warning,error:Ms.error,custom:Ms.custom,message:Ms.message,promise:Ms.promise,dismiss:Ms.dismiss,loading:Ms.loading},{getHistory:Poe,getToasts:Ioe});Eoe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Doe({context:e,selectedStoreId:t,selectedProductionHouseId:r}){const[n,s]=F.useState("week"),[i,o]=F.useState(""),[l,u]=F.useState(""),[d,f]=F.useState([]),[p,m]=F.useState(null),[x,v]=F.useState(!0),[y,b]=F.useState(null),k=t||e.user?.storeId;F.useEffect(()=>{w()},[e.inventory,e.salesData,e.productionData,e.stockRequests,n,i,l,k]);const N=()=>{const A=new Date;let P=new Date;switch(n){case"day":P=new Date(A);break;case"week":P=new Date(A),P.setDate(A.getDate()-7);break;case"month":P=new Date(A),P.setMonth(A.getMonth()-1);break;case"custom":if(i&&l)return{startDate:new Date(i),endDate:new Date(l)};P=new Date(A),P.setDate(A.getDate()-7);break}return{startDate:P,endDate:A}},w=()=>{v(!0);const{startDate:A,endDate:P}=N(),B=new Map,I=new Date(A);for(;I<=P;){const R=I.getFullYear(),se=String(I.getMonth()+1).padStart(2,"0"),z=String(I.getDate()).padStart(2,"0"),M=`${R}-${se}-${z}`;B.set(M,{date:M,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",productionLogged:!1,productionLoggedAt:null,productionLoggedBy:"",stockRequestLogged:!1,stockRequestLoggedAt:null,stockRequestLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),I.setDate(I.getDate()+1)}const O=new Map;(k?e.inventory.filter(R=>R.storeId===k):e.inventory).forEach(R=>{O.has(R.date)||O.set(R.date,[]),O.get(R.date)?.push(R)}),O.forEach((R,se)=>{if(B.has(se)){const z=B.get(se);if(z.inventoryLogged=!0,z.inventoryCount=R.length,R.length>0){const M=R[0],te=M.id.split("-")[0];if(M.createdByName?z.inventoryLoggedBy=M.createdByName:M.createdByEmail?z.inventoryLoggedBy=M.createdByEmail:M.createdBy?typeof M.createdBy=="string"&&M.createdBy.includes("-")?z.inventoryLoggedBy=M.userId?`User ${M.userId.substring(0,8)}`:"Manager":z.inventoryLoggedBy=M.createdBy:M.userId?z.inventoryLoggedBy=`User ${M.userId.substring(0,8)}`:z.inventoryLoggedBy="Unknown User",te){const ie=parseInt(te);if(!isNaN(ie)&&ie>0){z.inventoryLoggedAt=new Date(ie).toISOString();const me=new Date(ie),ve=new Date(se+"T23:59:59");z.lateEntry=me>ve}}}}}),(k?e.salesData.filter(R=>R.storeId===k):e.salesData).forEach(R=>{if(B.has(R.date)){const se=B.get(R.date);se.salesLogged=!0,se.cashDiscrepancy=Math.abs(R.salesDiscrepancy!==void 0?R.salesDiscrepancy:R.cashOffset||0),R.createdByName?se.salesLoggedBy=R.createdByName:R.createdByEmail?se.salesLoggedBy=R.createdByEmail:R.createdBy?typeof R.createdBy=="string"&&R.createdBy.includes("-")?se.salesLoggedBy="Manager":se.salesLoggedBy=R.createdBy:se.salesLoggedBy="Unknown User",e.user&&(se.managerEmail=e.user.email,se.managerName=e.user.name);const z=R.id.split("-")[0];if(z){const M=parseInt(z);if(!isNaN(M)&&M>0){se.salesLoggedAt=new Date(M).toISOString();const J=new Date(M),te=new Date(R.date+"T23:59:59");J>te&&(se.lateEntry=!0)}}}}),(k?e.productionData.filter(R=>R.storeId===k):e.productionData).forEach(R=>{if(B.has(R.date)){const se=B.get(R.date);se.productionLogged=!0,R.createdByName?se.productionLoggedBy=R.createdByName:R.createdByEmail?se.productionLoggedBy=R.createdByEmail:R.createdBy?typeof R.createdBy=="string"&&R.createdBy.includes("-")?se.productionLoggedBy="Manager":se.productionLoggedBy=R.createdBy:se.productionLoggedBy="Unknown User";const z=R.id.split("-")[0];if(z){const M=parseInt(z);if(!isNaN(M)&&M>0){se.productionLoggedAt=new Date(M).toISOString();const J=new Date(M),te=new Date(R.date+"T23:59:59");J>te&&(se.lateEntry=!0)}}}});const V=k?e.stockRequests.filter(R=>R.storeId===k):e.stockRequests;console.log(" DataCapture - Stock Requests Debug:",{totalStockRequests:e.stockRequests.length,filteredStockRequests:V.length,effectiveStoreId:k,stockRequestDates:V.map(R=>R.requestDate),stockRequestIds:V.map(R=>R.id),sampleRequest:V[0]}),V.forEach(R=>{if(B.has(R.requestDate)){const se=B.get(R.requestDate);se.stockRequestLogged=!0,R.requestedByName?se.stockRequestLoggedBy=R.requestedByName:R.requestedBy?se.stockRequestLoggedBy=R.requestedBy:se.stockRequestLoggedBy="Unknown User";const z=R.id.split("-")[0];if(z){const M=parseInt(z);if(!isNaN(M)&&M>1e12){se.stockRequestLoggedAt=new Date(M).toISOString();const J=new Date(M),te=new Date(R.requestDate+"T23:59:59");J>te&&(se.lateEntry=!0)}else se.stockRequestLoggedAt=new Date(R.requestDate+"T12:00:00").toISOString()}}}),B.forEach(R=>{R.inventoryLogged&&R.salesLogged&&R.productionLogged&&R.stockRequestLogged?R.status="complete":R.inventoryLogged||R.salesLogged||R.productionLogged||R.stockRequestLogged?R.status="partial":R.status="missing"});const ne=Array.from(B.values()).sort((R,se)=>new Date(se.date).getTime()-new Date(R.date).getTime());f(ne);const ee={totalDays:ne.length,daysWithData:ne.filter(R=>R.status!=="missing").length,totalDiscrepancy:ne.reduce((R,se)=>R+se.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};ee.avgDiscrepancy=ee.totalDiscrepancy/(ne.filter(R=>R.salesLogged).length||1),ee.completionRate=ne.filter(R=>R.status==="complete").length/ee.totalDays*100,ee.onTimeRate=ne.filter(R=>R.status==="complete"&&!R.lateEntry).length/ee.totalDays*100,m(ee),v(!1)},T=A=>{if(!A)return"-";const P=new Date(A),B=P.toLocaleDateString("en-US",{month:"short",day:"numeric"}),I=P.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${B}, ${I}`},E=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S=A=>{switch(A){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=A=>{switch(A){case"complete":return a.jsx(nr,{className:"w-5 h-5 text-green-600"});case"partial":return a.jsx(On,{className:"w-5 h-5 text-yellow-600"});case"missing":return a.jsx(pa,{className:"w-5 h-5 text-red-600"});default:return a.jsx(on,{className:"w-5 h-5 text-gray-600"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="week"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"7 Days"}),a.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="month"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"30 Days"}),a.jsx("button",{onClick:()=>s("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),n==="custom"&&a.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[a.jsx(es,{label:"Start Date",value:i,onChange:o}),a.jsx(es,{label:"End Date",value:l,onChange:u})]})]}),p&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Fr,{className:"w-5 h-5 text-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:p.totalDays})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nr,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[p.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(on,{className:"w-5 h-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[p.onTimeRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(a2,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",p.totalDiscrepancy.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(gn,{className:"w-5 h-5 text-purple-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",p.avgDiscrepancy.toFixed(2)]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Inventory"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Production"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Stock Request"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):d.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[A.lateEntry&&a.jsx(On,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),a.jsx("span",{className:"text-sm text-gray-900",children:E(A.date)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[_(A.status),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(A.status)}`,children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.inventoryLogged?a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[A.inventoryCount," items"]}),a.jsx("p",{className:"text-gray-500",children:T(A.inventoryLoggedAt)}),A.inventoryLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",A.inventoryLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.salesLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:T(A.salesLoggedAt)}),A.salesLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",A.salesLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.productionLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:T(A.productionLoggedAt)}),A.productionLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",A.productionLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.stockRequestLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:T(A.stockRequestLoggedAt)}),A.stockRequestLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",A.stockRequestLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.salesLogged?a.jsxs("span",{className:`text-sm ${A.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",A.cashDiscrepancy.toFixed(2)]}):a.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},A.date))})]})})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-gray-600",children:"Complete - All data types logged (Inventory, Sales, Production, Stock Request)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(On,{className:"w-4 h-4 text-yellow-600"}),a.jsx("span",{className:"text-gray-600",children:"Partial - At least one data type logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pa,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(On,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (after midnight)"})]})]})]})]})}function Moe({storeId:e,accessToken:t,thresholds:r,onClose:n,onSave:s}){const[i,o]=F.useState(r),[l,u]=F.useState(!1),d=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(m,x,v)=>{const y=parseInt(v)||0;o({...i,[m]:{...i[m],[x]:y}})},p=async()=>{try{u(!0),await d5(t,e,i),s(i),mr.success("Stock thresholds saved successfully"),n()}catch(m){console.error("Error saving thresholds:",m),mr.error("Failed to save thresholds")}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:a.jsx(Ai,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:a.jsx(Wr,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"space-y-4",children:d.map(({key:m,label:x})=>{const v=i[m]||{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:x}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:v.high,onChange:y=>f(m,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:v.medium,onChange:y=>f(m,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:v.low,onChange:y=>f(m,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},m)})})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:p,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Gl,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function Roe({context:e,highlightRequestId:t,selectedStoreId:r,onNavigateToManageItems:n}){const[s,i]=F.useState([]),[o,l]=F.useState(!0),[u,d]=F.useState(!1),[f,p]=F.useState(""),[m,x]=F.useState("all"),[v,y]=F.useState("daily"),[b,k]=F.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[N,w]=F.useState([]),[T,E]=F.useState({}),[S,_]=F.useState(""),A=()=>new Date().toISOString().split("T")[0],[P,B]=F.useState(A()),[I,O]=F.useState(null),[L,X]=F.useState({}),[U,V]=F.useState({}),[ne,ee]=F.useState({}),[R,se]=F.useState({}),[z,M]=F.useState(!1),[J,te]=F.useState(null),[ie,me]=F.useState(!1),[ve,ye]=F.useState({}),[he,pe]=F.useState(()=>{const Ne=localStorage.getItem("momosPerPlate");return Ne?parseInt(Ne,10):6}),[De,q]=F.useState(!1),Ae=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],Be=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],xt=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],le=e.user?.designation==="store_incharge",Ee=e.user?.designation==="production_incharge",Ce=e.user?.role==="manager",$e=e.user?.role==="cluster_head",Nt=Ce||$e||Ee,vt=F.useMemo(()=>(e.inventoryItems?.filter(Ne=>Ne.category==="finished_product"&&Ne.isActive)||[]).map(Ne=>{const Se=Ne.displayName.endsWith("Momo")?Ne.displayName+"s":Ne.displayName;return{key:Ne.name,camelKey:Ne.name.replace(/_([a-z])/g,Ge=>Ge[1].toUpperCase()),label:Ne.displayName,legacySalesKey:Se,unit:Ne.unit}}),[e.inventoryItems]),qt=async()=>{try{const Ne=Wu(),{data:{session:Se}}=await Ne.auth.getSession();return Se?.access_token||null}catch(Ne){return console.error("Error getting fresh token:",Ne),null}};F.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:le,isProductionHead:Ee,isOperationsHead:Ce,isClusterHead:$e,canViewAll:Nt})},[e.user,le,Ee,Ce,$e,Nt]),F.useEffect(()=>{sr(),lr(),gr()},[e.user,r]),F.useEffect(()=>{N.length>=0&&e.inventoryItems&&e.inventoryItems.length>0&&Qr()},[N,e.user,r,e.inventoryItems]),F.useEffect(()=>{if(!le||!e.user?.storeId)return;const Ne=()=>{const Ge=new Date,bt=Ge.getHours(),dt=Ge.getMinutes(),st=Ge.toISOString().split("T")[0];if(bt===15&&dt===0&&I!==st){const wt=new Date(Ge);wt.setDate(wt.getDate()+1);const Rt=wt.toISOString().split("T")[0];s.some(yt=>yt.storeId===e.user?.storeId&&yt.requestDate===Rt&&yt.status!=="cancelled")||(console.log(" 3 PM Reminder: No stock request found for tomorrow"),mr.warning(" Reminder: You haven't submitted a stock request for tomorrow yet!",{duration:1e4,description:"Please submit your production request to ensure timely preparation."}),O(st))}};Ne();const Se=setInterval(Ne,6e4);return()=>clearInterval(Se)},[le,e.user,s,I]),F.useEffect(()=>{if(!$e&&!Ee&&!Ce)return;const Ne=async()=>{try{const Ge=await qt();if(!Ge)return;const bt=await zD(Ge);bt.notificationsSent>0&&console.log(` Sent ${bt.notificationsSent} notifications for ${bt.newPendingCount} delayed pending requests`)}catch(Ge){console.log("Background pending request check failed:",Ge)}};Ne();const Se=setInterval(Ne,1800*1e3);return()=>clearInterval(Se)},[$e,Ee,Ce]);const gr=async()=>{if(e.user)try{const Ne=r||e.user.storeId;if(!Ne)return;const Se=await qt();if(!Se)return;const Ge=await u5(Se,Ne);Ge&&ye(Ge)}catch{console.log("No saved thresholds, using defaults")}},sr=async()=>{if(e.user)try{l(!0);const Ne=await qt();if(!Ne){console.error("No valid access token available");return}const Se=await rg(Ne),Ge=r||e.user.storeId;let bt=Se;Ge?bt=Se.filter(dt=>dt.storeId===Ge):le&&e.user.storeId?bt=Se.filter(dt=>dt.storeId===e.user.storeId):Ce&&e.user.storeId&&!$e&&(bt=Se.filter(dt=>dt.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:Se.length,filteredRequests:bt.length,userRole:e.user.role,userDesignation:e.user.designation}),i(bt)}catch(Ne){console.error("Error loading production requests:",Ne),mr.error("Failed to load production requests")}finally{l(!1)}},lr=async()=>{if(e.user)try{const Ne=await qt();if(!Ne){console.error("No valid access token available");return}let Ge=(await ng(Ne)).data||[];const bt=r||e.user.storeId;bt&&(Ge=Ge.filter(dt=>dt?.storeId===bt)),w(Ge)}catch(Ne){console.error("Error loading sales data:",Ne)}},Qr=async()=>{const Ne=r||e.user?.storeId,Se=!Ne||Ne==="all";if(e.user?.accessToken){console.log(" loadStoreOpeningBalance called"),console.log("  effectiveStoreId:",Ne),console.log("  isAllStores:",Se),console.log("  Current salesData length:",N.length);try{const Ge=new Date().toISOString().substring(0,7);if(Se){console.log("   Calculating aggregate opening balance for all stores");const st=e.stores||[];let wt={};vt.forEach(({camelKey:Rt})=>{wt[Rt]=0});for(const Rt of st){const nt=await el(e.user.accessToken,Rt.id,"store");if(nt?.record)if(nt.record.date.substring(0,7)===Ge)nt.record.items.forEach(ht=>{const Ut=e.inventoryItems?.find(Ft=>Ft.id===ht.itemId||Ft.name===ht.itemId);if(Ut){const Ft=Ut.name.replace(/_([a-z])/g,dr=>dr[1].toUpperCase());wt[Ft]+=ht.actualQuantity}});else{const ht=await Hr(Rt.id,Ge);Object.keys(ht).forEach(Ut=>{wt[Ut]+=ht[Ut]})}else{const yt=await Hr(Rt.id,Ge);Object.keys(yt).forEach(ht=>{wt[ht]+=yt[ht]})}}console.log("   Aggregated opening balance for all stores:",wt),te(wt);return}if(!Ne){console.log("   No effectiveStoreId available, skipping recalibration fetch"),te({});return}const bt=await el(e.user.accessToken,Ne,"store");if(console.log(" Recalibration Check:"),console.log("  Recalibration response:",bt),bt?.record){const st=bt.record.date.substring(0,7);if(console.log("  Recalibration date:",bt.record.date),console.log("  Recalibration month:",st),console.log("  Recalibration locationType:",bt.record.locationType),console.log("  Recalibration locationName:",bt.record.locationName),console.log("  Current month:",Ge),st===Ge){const wt={};console.log("   Processing recalibration items:",bt.record.items.length),console.log("   Available inventory items:",e.inventoryItems?.length||0),bt.record.items.forEach(Rt=>{console.log("    Processing item:",{itemId:Rt.itemId,actualQuantity:Rt.actualQuantity});const nt=e.inventoryItems?.find(yt=>yt.id===Rt.itemId||yt.name===Rt.itemId);if(console.log("    Found inventory item:",nt?{name:nt.name,displayName:nt.displayName}:"NOT FOUND"),nt){const yt=nt.name.replace(/_([a-z])/g,ht=>ht[1].toUpperCase());wt[yt]=Rt.actualQuantity,console.log("    Mapped to camelKey:",yt,"=",Rt.actualQuantity)}else console.log("     Could not find inventory item for itemId:",Rt.itemId)}),console.log("   Using current month recalibration as opening balance:",wt),te(wt);return}else console.log("   Recalibration is from",st,"- calculating from previous month instead")}else console.log("   No recalibration record found");const dt=await Hr(Ne,Ge);te(dt)}catch(Ge){console.error("Error loading opening balance:",Ge);const bt={};vt.forEach(({camelKey:dt})=>{bt[dt]=0}),te(bt)}}},Hr=async(Ne,Se)=>{if(!Ne){console.warn("   calculatePreviousMonthStoreStock called with empty storeId");const Ft={};return vt.forEach(({camelKey:dr})=>{Ft[dr]=0}),Ft}const[Ge,bt]=Se.split("-").map(Number);let dt=Ge,st=bt-1;st===0&&(st=12,dt=Ge-1);const wt=`${dt}-${String(st).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",Ne),console.log("  Previous Month:",wt);let Rt={};try{const Ft=await el(e.user.accessToken,Ne,"store");if(Ft?.record){const dr=Ft.record.date.substring(0,7);console.log("   Found recalibration from:",dr),dr===wt?(Ft.record.items.forEach(br=>{const gt=e.inventoryItems?.find(It=>It.id===br.itemId||It.name===br.itemId);if(gt){const It=gt.name.replace(/_([a-z])/g,vr=>vr[1].toUpperCase());Rt[It]=br.actualQuantity}}),console.log("   Using previous month recalibration as opening:",Rt)):(console.log("   Recalibration is from different month, assuming zero opening balance"),vt.forEach(({camelKey:br})=>{Rt[br]=0}))}else console.log("   No recalibration found, assuming zero opening balance"),vt.forEach(({camelKey:dr})=>{Rt[dr]=0})}catch(Ft){console.error("   Error fetching recalibration:",Ft),vt.forEach(({camelKey:dr})=>{Rt[dr]=0})}const nt=(e.productionRequests||[]).filter(Ft=>{if(Ft.status!=="delivered"||Ft.storeId!==Ne)return!1;const dr=Ft.deliveredDate||Ft.requestDate||Ft.createdAt;return dr&&dr.startsWith(wt)}).reduce((Ft,dr)=>(vt.forEach(({camelKey:br})=>{const gt=dr[br]||0,It=dr[br+"s"]||0;Ft[br]=(Ft[br]||0)+gt+It}),Ft),{}),ht=(N||[]).filter(Ft=>Ft.storeId!==Ne?!1:Ft.date&&Ft.date.startsWith(wt)).reduce((Ft,dr)=>(vt.forEach(({camelKey:br,legacySalesKey:gt})=>{let It=dr.data?.[gt]||0;gt==="Cheese Corn Momos"&&It===0&&(It=dr.data?.["Corn Cheese Momos"]||0),Ft[br]=(Ft[br]||0)+It}),Ft),{}),Ut={};return vt.forEach(({camelKey:Ft})=>{Ut[Ft]=(Rt[Ft]||0)+(nt[Ft]||0)-(ht[Ft]||0)}),console.log("  Previous Month Opening Balance:",Rt),console.log("  Previous Month Received:",nt),console.log("  Previous Month Sold:",ht),console.log("  Calculated Closing Stock (= Opening + Received - Sold):",Ut),Ut},cr=async Ne=>{if(Ne.preventDefault(),u){console.log(" Submission already in progress, ignoring duplicate request");return}if(console.log(" handleSubmitRequest called"),console.log("  User info:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),console.log("  Form data:",{momoQuantities:T,totalQuantity:Object.values(T).reduce((Ge,bt)=>Ge+bt,0),requestDate:P,notes:S}),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error(" Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),mr.error("Missing user information. Please ensure you are assigned to a store.");return}if(Object.values(T).reduce((Ge,bt)=>Ge+bt,0)===0){console.log(" No quantities specified"),mr.error("Please specify at least one item quantity");return}console.log(" Submitting request for date:",P);try{d(!0),console.log(" Validation passed, submitting request..."),await HD(e.user.accessToken,{requestDate:P,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,...T,kitchenUtilities:Object.keys(L).length>0?L:void 0,sauces:Object.keys(U).length>0?U:void 0,utilities:Object.keys(ne).length>0?ne:void 0,notes:S}),console.log(" Request submitted successfully"),mr.success("Production request submitted successfully"),E({}),X({}),V({}),ee({}),_(""),B(A()),await sr()}catch(Ge){console.error(" Error submitting production request:",Ge),mr.error(Ge.message||"Failed to submit request")}finally{d(!1)}},Fe=async(Ne,Se)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await qD(e.user.accessToken,Ne,Se,e.user.employeeId),mr.success(`Request marked as ${Se.replace("-"," ")}`),await sr()}catch(Ge){console.error("Error updating status:",Ge),mr.error("Failed to update status")}},we=Ne=>{switch(Ne){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},mt=Ne=>{switch(Ne){case"pending":return a.jsx(on,{className:"w-4 h-4"});case"accepted":return a.jsx(nr,{className:"w-4 h-4"});case"in-preparation":return a.jsx(rr,{className:"w-4 h-4"});case"prepared":return a.jsx(nr,{className:"w-4 h-4"});case"shipped":return a.jsx(EE,{className:"w-4 h-4"});case"delivered":return a.jsx(nr,{className:"w-4 h-4"});default:return a.jsx(on,{className:"w-4 h-4"})}},Ue=s.filter(Ne=>!(f&&Ne.requestDate!==f||m!=="all"&&Ne.status!==m)),rt={pending:Ue.filter(Ne=>Ne.status==="pending"),accepted:Ue.filter(Ne=>Ne.status==="accepted"),"in-preparation":Ue.filter(Ne=>Ne.status==="in-preparation"),prepared:Ue.filter(Ne=>Ne.status==="prepared"),shipped:Ue.filter(Ne=>Ne.status==="shipped"),delivered:Ue.filter(Ne=>Ne.status==="delivered")},ut=Ue.reduce((Ne,Se)=>{const Ge=Se.requestDate;return Ne[Ge]||(Ne[Ge]=[]),Ne[Ge].push(Se),Ne},{}),Vt=Object.keys(ut).sort((Ne,Se)=>new Date(Se).getTime()-new Date(Ne).getTime()),_t=()=>{const Ne=new Date;let Se=[],Ge,bt=Ne;const dt=(nt,yt)=>{if(yt==="day")return nt.toLocaleDateString("en-US",{month:"short",day:"numeric"});if(yt==="week"){const ht=new Date(nt);ht.setDate(nt.getDate()-nt.getDay());const Ut=new Date(ht);return Ut.setDate(ht.getDate()+6),`${ht.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Ut.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{if(yt==="month")return nt.toLocaleDateString("en-US",{month:"short",year:"numeric"});if(yt==="year")return nt.getFullYear().toString()}return nt.toLocaleDateString()},st=(nt,yt)=>{const ht=Ut=>{const Ft=Ut.getFullYear(),dr=String(Ut.getMonth()+1).padStart(2,"0"),br=String(Ut.getDate()).padStart(2,"0");return`${Ft}-${dr}-${br}`};if(yt==="day")return ht(nt);if(yt==="week"){const Ut=new Date(nt),Ft=Ut.getDay();return Ut.setDate(Ut.getDate()-Ft),ht(Ut)}else{if(yt==="month")return`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,"0")}`;if(yt==="year")return nt.getFullYear().toString()}return ht(nt)};if(v==="daily")for(let nt=4;nt>=0;nt--){const yt=new Date(Ne);yt.setDate(Ne.getDate()-nt),Se.push(st(yt,"day"))}else if(v==="weekly")for(let nt=4;nt>=0;nt--){const yt=new Date(Ne);yt.setDate(Ne.getDate()-nt*7);const ht=st(yt,"week");Se.includes(ht)||Se.push(ht)}else if(v==="monthly")for(let nt=4;nt>=0;nt--){const yt=new Date(Ne);yt.setMonth(Ne.getMonth()-nt),Se.push(st(yt,"month"))}else if(v==="yearly")for(let nt=4;nt>=0;nt--){const yt=new Date(Ne);yt.setFullYear(Ne.getFullYear()-nt),Se.push(st(yt,"year"))}else if(v==="custom"){Ge=new Date(b.from),bt=new Date(b.to);const nt=Math.ceil((bt.getTime()-Ge.getTime())/(1e3*60*60*24));for(let yt=0;yt<=nt;yt++){const ht=new Date(Ge);ht.setDate(Ge.getDate()+yt),Se.push(st(ht,"day"))}}console.log(" Chart Periods:",{filter:v,periods:Se,today:Ne.toISOString().split("T")[0]}),console.log(" Requests for chart:",{totalRequests:s.length,requestDates:s.map(nt=>({date:nt.requestDate,id:nt.id.slice(0,8),chickenMomo:nt.chickenMomo,chickenMomos:nt.chickenMomos}))});const wt={};Se.forEach(nt=>{const yt={period:nt};vt.forEach(({label:ht})=>{yt[ht]=0}),wt[nt]=yt}),s.forEach(nt=>{const yt=new Date(nt.requestDate);let ht;v==="daily"||v==="custom"?ht=st(yt,"day"):v==="weekly"?ht=st(yt,"week"):v==="monthly"?ht=st(yt,"month"):v==="yearly"&&(ht=st(yt,"year")),wt[ht]?vt.forEach(({camelKey:Ut,label:Ft})=>{const dr=nt[Ut]||0,br=nt[Ut+"s"]||0;wt[ht][Ft]=(wt[ht][Ft]||0)+dr+br}):console.log(" Request not matching any period:",{requestDate:nt.requestDate,periodKey:ht,availablePeriods:Se})}),console.log(" Aggregated Period Data:",wt);const Rt=Se.map(nt=>{const yt=wt[nt],ht=new Date(nt);let Ut;return v==="daily"||v==="custom"?Ut=dt(ht,"day"):v==="weekly"?Ut=dt(ht,"week"):v==="monthly"?Ut=dt(ht,"month"):v==="yearly"&&(Ut=dt(ht,"year")),{name:Ut,...yt}});return console.log(" Final Chart Data:",Rt),Rt};return F.useEffect(()=>{if(t&&!o){const Ne=document.getElementById(`request-${t}`);Ne&&setTimeout(()=>{Ne.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,o]),F.useEffect(()=>{Vt.length>0&&Object.keys(R).length===0&&se({[Vt[0]]:!0})},[Vt,R]),o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),a.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[le&&"Submit your daily stock requirements before 9:00 AM",Ee&&"Manage incoming stock requests and track fulfillment",(Ce||$e)&&"Monitor stock request workflow across stores"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),le&&(()=>{const Se=new Date().getDate(),Ge=Se>=1&&Se<=5;return a.jsxs("button",{onClick:()=>M(!0),disabled:!Ge,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${Ge?"bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:Ge?"Recalibrate store stock":"Recalibration only available from 1st to 5th of each month",children:[a.jsx(nr,{className:"w-5 h-5"}),"Recalibrate Stock"]})})()]}),(r||e.user?.storeId,a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),a.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>me(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[a.jsx(Ai,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]}),(Ce||$e)&&a.jsxs("button",{onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(Ai,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Plate Config"})]}),n&&(Ce||$e)&&a.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]})})),(()=>{const Ne=r||e.user?.storeId,Se=new Date,Ge=5.5*60*60*1e3,dt=new Date(Se.getTime()+Ge).toISOString().substring(0,7);console.log(" Stock Status Calculation Debug:",{currentMonth:dt,totalRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(gt=>gt.status==="delivered").length||0,requestStatuses:e.productionRequests?.map(gt=>({id:gt.id.slice(0,8),status:gt.status,date:gt.requestDate}))||[]});const st=e.productionRequests?.filter(gt=>{if(gt.status!=="delivered"&&gt.status!=="pending")return!1;const It=gt.deliveredDate||gt.requestDate||gt.createdAt,vr=It&&It.startsWith(dt);return console.log(" Delivered Request:",{id:gt.id.slice(0,8),status:gt.status,chicken:gt.chicken,chickenMomo:gt.chickenMomo,chickenMomos:gt.chickenMomos,chickenKurkure:gt.chickenKurkure,chickenKurkureMomo:gt.chickenKurkureMomo,chickenKurkureMomos:gt.chickenKurkureMomos,deliveryDate:It,matchesMonth:vr}),vr?!Ne||Ne==="all"?!0:gt.storeId===Ne:!1})||[],wt=st.reduce((gt,It)=>(vt.forEach(({camelKey:vr})=>{const Er=It[vr]||0,Y=It[vr+"s"]||0;gt[vr]=(gt[vr]||0)+Er+Y}),gt),{});console.log(" After aggregation - deliveredRequests count:",st.length),console.log(" After aggregation - totalReceived:",wt);const nt=N.filter(gt=>!gt.date||!gt.date.startsWith(dt)?!1:!Ne||Ne==="all"?!0:gt.storeId===Ne).reduce((gt,It)=>(vt.forEach(({camelKey:vr,legacySalesKey:Er})=>{let Y=It.data?.[Er]||0;Er==="Cheese Corn Momos"&&Y===0&&(Y=It.data?.["Corn Cheese Momos"]||0),gt[vr]=(gt[vr]||0)+Y}),gt),{}),yt=J||vt.reduce((gt,{camelKey:It})=>(gt[It]=0,gt),{});console.log(" Store Stock Status Calculation Debug:"),console.log("  storeOpeningBalance from state:",J),console.log("  openingBalance being used:",yt),console.log("  totalReceived:",wt),console.log("   Chicken Momo (chicken) received:",wt.chicken||0),console.log("   Chicken Kurkure (chickenKurkure) received:",wt.chickenKurkure||0),console.log("  totalSales:",nt),console.log("  finishedProducts count:",vt.length);const ht={};vt.forEach(({camelKey:gt})=>{ht[gt]=(yt[gt]||0)+(wt[gt]||0)-(nt[gt]||0)}),console.log("  storeStock calculated:",ht);const Ut=["purple","pink","green","yellow","blue","teal","red","indigo","orange","cyan"],Ft=Object.values(wt).reduce((gt,It)=>gt+It,0),dr=Object.values(yt).reduce((gt,It)=>gt+It,0),br=Ft+dr;return console.log("  totalReceivedSum:",Ft),console.log("  totalOpeningBalanceSum:",dr),console.log("  totalStockSum:",br),br===0?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsxs("p",{className:"text-gray-600",children:["No inventory available for ",dt]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once:"}),a.jsxs("ul",{className:"text-sm text-gray-500 mt-2 list-disc list-inside",children:[a.jsxs("li",{children:["Your requests are ",a.jsx("strong",{children:"delivered"})," by the production house"]}),a.jsx("li",{children:"OR you perform a stock recalibration (1st-5th of each month)"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-4",children:' Tip: Check if your requests have been marked as "Delivered" below'})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:vt.map(({camelKey:gt,label:It},vr)=>{const Er=wt[gt]||0,Y=nt[gt]||0,K=ht[gt]||0,W=(yt[gt]||0)+Er,re=Ut[vr%Ut.length],ae=ve[gt]||{high:600,medium:300,low:150};let je="high",Oe="",G="",ce="",Te="";K<=0?(je="critical",Oe="bg-red-100",G="text-red-700",ce="border-red-300",Te="CRITICAL"):K<=ae.low?(je="low",Oe="bg-red-100",G="text-red-700",ce="border-red-300",Te="LOW"):K<=ae.medium?(je="medium",Oe="bg-orange-100",G="text-orange-700",ce="border-orange-300",Te="MEDIUM"):K<ae.high&&(je="medium",Oe="bg-yellow-100",G="text-yellow-700",ce="border-yellow-300",Te="MEDIUM");const Ve=W>0?(K/W*100).toFixed(0):"0",ke=K<W*.2&&W>0;return a.jsxs("div",{className:`bg-gradient-to-br from-${re}-50 to-${re}-100 border-2 border-${re}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[je!=="high"&&a.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${Oe} border ${ce}`,children:[a.jsx(On,{className:`w-4 h-4 ${G}`}),a.jsx("span",{className:`text-xs font-semibold ${G} uppercase`,children:Te})]}),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:It}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),a.jsx("span",{className:`text-lg font-bold text-${re}-600`,children:Er})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),a.jsx("span",{className:`text-lg font-bold text-${re}-700`,children:Y})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${ke||K<0?"text-red-600":`text-${re}-800`}`,children:[K," pcs / ",Math.round(K/he)," plates"]})})]}),W>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[Ve,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${ke||K<0?"bg-red-500":`bg-${re}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Ve)))}%`}})})]})]}),(ke||K<0)&&a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-red-800 font-semibold",children:K<0?" Oversold":" Low Stock"})})]})]},gt)})})})()]}),le&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ap,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),new Date().getHours()>=9&&a.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(On,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"It's past 9:00 AM"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Same-day production requests are no longer accepted. The request date has been automatically set to tomorrow. You can also select any future date for advance orders."})]})]})}),a.jsxs("form",{onSubmit:cr,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(es,{label:"Request Date",value:P,onChange:B,className:"w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Same-day requests must be submitted before 9:00 AM. After 9 AM, please select tomorrow or a future date for advance orders."})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:vt.map(({camelKey:Ne,label:Se})=>{const Ge=Ne==="chicken"?[150,300,450,600]:[60,120,180,300];return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:Se}),a.jsx("input",{type:"number",min:"0",value:T[Ne]||0,onChange:bt=>E({...T,[Ne]:parseInt(bt.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:Ge.map(bt=>a.jsx("button",{type:"button",onClick:()=>E({...T,[Ne]:bt}),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:bt},bt))})]},Ne)})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),a.jsx("div",{className:"space-y-3",children:Ae.map(Ne=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[Ne.name," ",a.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",Ne.unit,")"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"0",step:"0.01",value:L[Ne.name]?.quantity!==void 0?L[Ne.name].quantity:"",onChange:Se=>{const Ge=parseFloat(Se.target.value)||0;if(Ge>0)X({...L,[Ne.name]:{quantity:Ge,unit:Ne.unit}});else{const bt={...L};delete bt[Ne.name],X(bt)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${Ne.unit}`}),a.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:Ne.unit})]})]},Ne.name))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),a.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Be.map(Ne=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[a.jsx("input",{type:"checkbox",checked:U[Ne]||!1,onChange:Se=>{if(Se.target.checked)V({...U,[Ne]:!0});else{const Ge={...U};delete Ge[Ne],V(Ge)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700",children:Ne})]},Ne))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:xt.map(Ne=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:Ne}),a.jsx("input",{type:"number",min:"0",value:ne[Ne]!==void 0?ne[Ne]:"",onChange:Se=>{const Ge=parseInt(Se.target.value)||0;if(Ge>0)ee({...ne,[Ne]:Ge});else{const bt={...ne};delete bt[Ne],ee(bt)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},Ne))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:S,onChange:Ne=>_(Ne.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),a.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Submitting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ap,{className:"w-5 h-5"}),a.jsx("span",{children:"Submit Request"})]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[a.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:a.jsx(es,{label:"Filter by Date",value:f,onChange:p,className:"w-full"})}),a.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:m,onChange:Ne=>x(Ne.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"in-preparation",children:"In Preparation"}),a.jsx("option",{value:"prepared",children:"Prepared"}),a.jsx("option",{value:"shipped",children:"Shipped"}),a.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(f||m!=="all")&&a.jsx("div",{className:"flex sm:items-end",children:a.jsx("button",{onClick:()=>{p(""),x("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),Nt&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),a.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt.pending.length})})}),a.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(on,{className:"w-3 h-3 text-yellow-600"}),a.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt.accepted.length})})}),a.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(nr,{className:"w-3 h-3 text-blue-600"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt["in-preparation"].length})})}),a.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(rr,{className:"w-3 h-3 text-purple-600"}),a.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt.prepared.length})})}),a.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(nr,{className:"w-3 h-3 text-indigo-600"}),a.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt.shipped.length})})}),a.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(EE,{className:"w-3 h-3 text-orange-600"}),a.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:rt.delivered.length})})}),a.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(nr,{className:"w-3 h-3 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-gray-900",children:Ue.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-yellow-600",children:rt.pending.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-purple-600",children:rt.accepted.length+rt["in-preparation"].length+rt.prepared.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-green-600",children:rt.delivered.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gn,{className:"w-5 h-5 text-purple-600"}),a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Momo Orders by Type"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"daily",label:"5 Days"},{filter:"weekly",label:"5 Weeks"},{filter:"monthly",label:"5 Months"},{filter:"yearly",label:"5 Years"},{filter:"custom",label:"Custom"}].map(({filter:Ne,label:Se})=>a.jsx("button",{onClick:()=>y(Ne),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${v===Ne?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Se},Ne))})]}),v==="custom"&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsx(es,{label:"From Date",value:b.from,onChange:Ne=>k({...b,from:Ne})}),a.jsx(es,{label:"To Date",value:b.to,onChange:Ne=>k({...b,to:Ne})})]}),a.jsx(Un,{width:"100%",height:400,children:a.jsxs(ci,{data:_t(),children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{dataKey:"name"}),a.jsx(wn,{}),a.jsx(zr,{}),a.jsx(ma,{}),vt.map((Ne,Se)=>{const Ge=["#8b5cf6","#ec4899","#10b981","#f59e0b","#3b82f6","#14b8a6","#ef4444","#f97316"];return a.jsx(yr,{dataKey:Ne.label,name:Ne.label,fill:Ge[Se%Ge.length]},Ne.label)})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-xl text-gray-900",children:[Vt.length," Date",Vt.length!==1?"s":""," with Requests"]}),Vt.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):Vt.map(Ne=>{const Se=ut[Ne],Ge=R[Ne],bt=new Set(Se.map(st=>st.storeName)).size,dt=Se.reduce((st,wt)=>(vt.forEach(({camelKey:Rt})=>{const nt=wt[Rt]||0,yt=wt[Rt+"s"]||0;st[Rt]=(st[Rt]||0)+nt+yt}),st),{});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[a.jsxs("button",{onClick:()=>se({...R,[Ne]:!Ge}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Fr,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:new Date(Ne).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[Se.length," Request",Se.length!==1?"s":""," from"," ",bt," Store",bt!==1?"s":""]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:Ge?a.jsx(SI,{className:"w-5 h-5 text-gray-400"}):a.jsx(Gm,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[a.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),a.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[dt.chicken>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:dt.chicken}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),dt.chickenCheese>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:dt.chickenCheese}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),dt.veg>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:dt.veg}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),dt.cheeseCorn>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:dt.cheeseCorn}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),dt.paneer>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:dt.paneer}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),dt.vegKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:dt.vegKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),dt.chickenKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:dt.chickenKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),Ge&&a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-sm text-gray-700",children:"Requests by Store"}),Se.map(st=>{const wt=t===st.id;return a.jsxs("div",{id:`request-${st.id}`,className:`border rounded-lg p-4 transition-all duration-300 ${wt?"border-purple-500 bg-purple-50 shadow-lg ring-2 ring-purple-300":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"bg-gray-100 px-3 py-1 rounded-full",children:a.jsxs("span",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Request ID:"})," ",st.id.slice(0,8).toUpperCase()]})}),wt&&a.jsx("div",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-xs animate-pulse",children:"New Notification"})]}),a.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs sm:text-sm flex items-center gap-2 border-2 ${we(st.status)} w-fit`,children:[mt(st.status),a.jsx("span",{className:"capitalize",children:st.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[a.jsx(Di,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:st.storeName||"Unknown Store"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[Ee&&st.status==="pending"&&a.jsx("button",{onClick:()=>Fe(st.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),Ee&&st.status==="accepted"&&a.jsx("button",{onClick:()=>Fe(st.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),Ee&&st.status==="in-preparation"&&a.jsx("button",{onClick:()=>Fe(st.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),Ee&&st.status==="prepared"&&a.jsx("button",{onClick:()=>Fe(st.id,"shipped"),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),le&&st.status==="shipped"&&a.jsx("button",{onClick:()=>Fe(st.id,"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsxs("span",{children:["Requested by: ",st.requestedByName||st.requestedBy]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Momos Quantities"}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:vt.map(({camelKey:Rt,label:nt})=>{const yt=st[Rt];return!yt||yt===0?null:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:yt}),a.jsx("p",{className:"text-xs text-gray-600",children:nt.replace(" Momos","")})]},Rt)})})]}),st.kitchenUtilities&&Object.keys(st.kitchenUtilities).length>0&&a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-purple-700 mb-3",children:"Kitchen Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(st.kitchenUtilities).map(([Rt,nt])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[nt.quantity," ",nt.unit]}),a.jsx("p",{className:"text-xs text-gray-600",children:Rt})]},Rt))})]}),st.sauces&&Object.keys(st.sauces).length>0&&a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-pink-700 mb-3",children:"Sauces Requested"}),a.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:Object.keys(st.sauces).map(Rt=>a.jsx("span",{className:"px-3 py-1 bg-pink-200 text-pink-900 rounded-full text-xs",children:Rt},Rt))})]}),st.utilities&&Object.keys(st.utilities).length>0&&a.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-indigo-700 mb-3",children:"Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(st.utilities).map(([Rt,nt])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[nt," pcs"]}),a.jsx("p",{className:"text-xs text-gray-600",children:Rt})]},Rt))})]}),st.notes&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-2 rounded mb-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Notes:"})," ",st.notes]})}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[a.jsxs("div",{children:["Created: ",new Date(st.createdAt).toLocaleString()]}),st.acceptedAt&&a.jsxs("div",{children:["Accepted: ",new Date(st.acceptedAt).toLocaleString()]}),st.preparedAt&&a.jsxs("div",{children:["Prepared: ",new Date(st.preparedAt).toLocaleString()]}),st.shippedAt&&a.jsxs("div",{children:["Shipped: ",new Date(st.shippedAt).toLocaleString()]}),st.deliveredAt&&a.jsxs("div",{children:["Delivered: ",new Date(st.deliveredAt).toLocaleString()]})]})})]},st.id)})]})})]},Ne)})]}),z&&a.jsx(x2,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>M(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),ie&&a.jsx(Moe,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:ve,onClose:()=>me(!1),onSave:Ne=>{ye(Ne),me(!1)}}),De&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Set how many momos are in each plate"})]}),a.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:he,onChange:Ne=>{const Se=parseInt(Ne.target.value)||6;pe(Se),localStorage.setItem("momosPerPlate",Se.toString())},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:border-blue-600 focus:outline-none text-center text-2xl font-bold text-blue-900"}),a.jsx("p",{className:"text-center text-sm text-blue-700 mt-2",children:"pieces per plate"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:a.jsx("button",{onClick:()=>q(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var WF=1252,Foe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],jk={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Nk=function(e){Foe.indexOf(e)!=-1&&(WF=jk[0]=e)};function $oe(){Nk(1252)}var di=function(e){Nk(e)};function KF(){di(1200),$oe()}function t6(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Loe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function VF(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var nh=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Loe(e.slice(2)):t==254&&r==255?VF(e.slice(2)):t==65279?e.slice(1):e},fp=function(t){return String.fromCharCode(t)},r6=function(t){return String.fromCharCode(t)},vf,Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n6(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,u=s&63,isNaN(n)?l=u=64:isNaN(s)&&(u=64),t+=Yo.charAt(i)+Yo.charAt(o)+Yo.charAt(l)+Yo.charAt(u);return t}function Ns(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Yo.indexOf(e.charAt(d++)),o=Yo.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Yo.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),u=Yo.indexOf(e.charAt(d++)),s=(l&3)<<6|u,u!==64&&(t+=String.fromCharCode(s));return t}var wr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),dc=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function al(e){return wr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function a6(e){return wr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ui=function(t){return wr?dc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function hc(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function kk(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return kk(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Vo=wr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:dc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Boe(e){for(var t=[],r=0,n=e.length+250,s=al(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=al(65535),n=65530)}return t.push(s.slice(0,r)),Vo(t)}var qa=/\u0000/g,ah=/[\u0001-\u0006]/g;function pu(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function hi(e,t){var r=""+e;return r.length>=t?r:mn("0",t-r.length)+r}function Sk(e,t){var r=""+e;return r.length>=t?r:mn(" ",t-r.length)+r}function Dm(e,t){var r=""+e;return r.length>=t?r:r+mn(" ",t-r.length)}function Uoe(e,t){var r=""+Math.round(e);return r.length>=t?r:mn("0",t-r.length)+r}function Hoe(e,t){var r=""+e;return r.length>=t?r:mn("0",t-r.length)+r}var s6=Math.pow(2,32);function Yc(e,t){if(e>s6||e<-s6)return Uoe(e,t);var r=Math.round(e);return Hoe(r,t)}function Mm(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var i6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],R1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function qoe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var ur={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},o6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},zoe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Rm(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,u=1,d=0,f=0,p=Math.floor(s);d<t&&(p=Math.floor(s),l=p*o+i,f=p*d+u,!(s-p<5e-8));)s=1/(s-p),i=o,o=l,u=d,d=f;if(f>t&&(d>t?(f=u,l=i):(f=d,l=o)),!r)return[0,n*l,f];var m=Math.floor(n*l/f);return[m,n*l-m*f,f]}function Hl(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),n<60&&(i=(i+6)%7),r&&(i=Xoe(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var GF=new Date(1899,11,31,0,0,0),Woe=GF.getTime(),Koe=new Date(1900,2,1,0,0,0);function YF(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Koe&&(r+=1440*60*1e3),(r-(Woe+(e.getTimezoneOffset()-GF.getTimezoneOffset())*6e4))/(1440*60*1e3)}function _k(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Voe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Goe(e){var t=e<0?12:11,r=_k(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Yoe(e){var t=_k(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function bf(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Goe(e):t===10?r=e.toFixed(10).substr(0,12):r=Yoe(e),_k(Voe(r.toUpperCase()))}function nc(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):bf(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Us(14,YF(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Xoe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Joe(e,t,r,n){var s="",i=0,o=0,l=r.y,u,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:u=l%100,d=2;break;default:u=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:u=r.m,d=t.length;break;case 3:return R1[r.m-1][1];case 5:return R1[r.m-1][0];default:return R1[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=r.d,d=t.length;break;case 3:return i6[r.q][0];default:return i6[r.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?hi(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=hi(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:u=l,d=1;break}var f=d>0?hi(u,d):"";return f}function Xo(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var XF=/%/g;function Qoe(e,t,r){var n=t.replace(XF,""),s=t.length-n.length;return fo(e,n,r*Math.pow(10,2*s))+mn("%",s)}function Zoe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return fo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function JF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+JF(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var QF=/# (\?+)( ?)\/( ?)(\d+)/;function ele(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?mn(" ",e[1].length+1+e[4].length):Sk(o,e[1].length)+e[2]+"/"+e[3]+hi(l,e[4].length))}function tle(e,t,r){return r+(t===0?"":""+t)+mn(" ",e[1].length+2+e[4].length)}var ZF=/^#*0*\.([0#]+)/,e$=/\).*[0#]/,t$=/\(###\) ###\\?-####/;function Fa(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function l6(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function c6(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function rle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function nle(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ds(e,t,r){if(e.charCodeAt(0)===40&&!t.match(e$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ds("n",n,r):"("+Ds("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Zoe(e,t,r);if(t.indexOf("%")!==-1)return Qoe(e,t,r);if(t.indexOf("E")!==-1)return JF(t,r);if(t.charCodeAt(0)===36)return"$"+Ds(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Yc(u,t.length);if(t.match(/^[#?]+$/))return s=Yc(r,0),s==="0"&&(s=""),s.length>t.length?s:Fa(t.substr(0,t.length-s.length))+s;if(i=t.match(QF))return ele(i,u,d);if(t.match(/^#+0+$/))return d+Yc(u,t.length-t.indexOf("0"));if(i=t.match(ZF))return s=l6(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Fa(i[1])).replace(/\.$/,"."+Fa(i[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+mn("0",Fa(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+l6(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Xo(Yc(u,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ds(e,t,-r):Xo(""+(Math.floor(r)+rle(r,i[1].length)))+"."+hi(c6(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ds(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=pu(Ds(e,t.replace(/[\\-]/g,""),r)),o=0,pu(pu(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(t$))return s=Ds(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Rm(u,Math.pow(10,o)-1,!1),s=""+d,f=fo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Dm(l[2],o),f.length<i[4].length&&(f=Fa(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Rm(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Sk(l[1],o)+i[2]+"/"+i[3]+Dm(l[2],o):mn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Yc(r,0),t.length<=s.length?s:Fa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return Fa(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=c6(r,i[1].length),r<0?"-"+Ds(e,t,-r):Xo(nle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?hi(0,3-v.length):"")+v})+"."+hi(o,i[1].length);switch(t){case"###,##0.00":return Ds(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var x=Xo(Yc(u,0));return x!=="0"?d+x:"";case"###,###.00":return Ds(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ds(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function ale(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return fo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function sle(e,t,r){var n=t.replace(XF,""),s=t.length-n.length;return fo(e,n,r*Math.pow(10,2*s))+mn("%",s)}function r$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+r$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _i(e,t,r){if(e.charCodeAt(0)===40&&!t.match(e$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_i("n",n,r):"("+_i("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ale(e,t,r);if(t.indexOf("%")!==-1)return sle(e,t,r);if(t.indexOf("E")!==-1)return r$(t,r);if(t.charCodeAt(0)===36)return"$"+_i(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+hi(u,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Fa(t.substr(0,t.length-s.length))+s;if(i=t.match(QF))return tle(i,u,d);if(t.match(/^#+0+$/))return d+hi(u,t.length-t.indexOf("0"));if(i=t.match(ZF))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Fa(i[1])).replace(/\.$/,"."+Fa(i[1])),s=s.replace(/\.(\d*)$/,function(v,y){return"."+y+mn("0",Fa(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Xo(""+u);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_i(e,t,-r):Xo(""+r)+"."+mn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return _i(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=pu(_i(e,t.replace(/[\\-]/g,""),r)),o=0,pu(pu(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(t$))return s=_i(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Rm(u,Math.pow(10,o)-1,!1),s=""+d,f=fo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Dm(l[2],o),f.length<i[4].length&&(f=Fa(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Rm(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Sk(l[1],o)+i[2]+"/"+i[3]+Dm(l[2],o):mn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Fa(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return Fa(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_i(e,t,-r):Xo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?hi(0,3-v.length):"")+v})+"."+hi(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var x=Xo(""+u);return x!=="0"?d+x:"";default:if(t.match(/\.[0#?]*$/))return _i(e,t.slice(0,t.lastIndexOf(".")),r)+Fa(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function fo(e,t,r){return(r|0)===r?_i(e,t,r):Ds(e,t,r)}function ile(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var n$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sd(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Mm(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(n$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ole(e,t,r,n){for(var s=[],i="",o=0,l="",u="t",d,f,p,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Mm(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(p=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++o;break;case"\\":var x=e.charAt(++o),v=x==="("||x===")"?x:"t";s[s.length]={t:v,v:x},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=Hl(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=Hl(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},u=l;break;case"A":case"a":case"":var y={t:l,v:l};if(d==null&&(d=Hl(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(y.v=d.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(y.v=d.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(y.v=d.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),d==null&&y.t==="T")return"";s[s.length]=y,u=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(n$)){if(d==null&&(d=Hl(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sd(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},u=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,k=0,N;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,u="h",b<1&&(b=1);break;case"s":(N=s[o].v.match(/\.0+$/))&&(k=Math.max(k,N[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",T;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Joe(s[o].t.charCodeAt(0),s[o].v,d,k),s[o].t="t";break;case"n":case"?":for(T=o+1;s[T]!=null&&((l=s[T].t)==="?"||l==="D"||(l===" "||l==="t")&&s[T+1]!=null&&(s[T+1].t==="?"||s[T+1].t==="t"&&s[T+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[T].v==="/"||s[T].v===" "&&s[T+1]!=null&&s[T+1].t=="?"));)s[o].v+=s[T].v,s[T]={v:"",t:";"},++T;w+=s[o].v,o=T-1;break;case"G":s[o].t="t",s[o].v=nc(t,r);break}var E="",S,_;if(w.length>0){w.charCodeAt(0)==40?(S=t<0&&w.charCodeAt(0)===45?-t:t,_=fo("n",w,S)):(S=t<0&&n>1?-t:t,_=fo("n",w,S),S<0&&s[0]&&s[0].t=="t"&&(_=_.substr(1),s[0].v="-"+s[0].v)),T=_.length-1;var A=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){A=o;break}var P=s.length;if(A===s.length&&_.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(T>=s[o].v.length-1?(T-=s[o].v.length,s[o].v=_.substr(T+1,s[o].v.length)):T<0?s[o].v="":(s[o].v=_.substr(0,T+1),T=-1),s[o].t="t",P=o);T>=0&&P<s.length&&(s[P].v=_.substr(0,T+1)+s[P].v)}else if(A!==s.length&&_.indexOf("E")===-1){for(T=_.indexOf(".")-1,o=A;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===A?s[o].v.indexOf(".")-1:s[o].v.length-1,E=s[o].v.substr(f+1);f>=0;--f)T>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(E=_.charAt(T--)+E);s[o].v=E,s[o].t="t",P=o}for(T>=0&&P<s.length&&(s[P].v=_.substr(0,T+1)+s[P].v),T=_.indexOf(".")+1,o=A;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==A)){for(f=s[o].v.indexOf(".")>-1&&o===A?s[o].v.indexOf(".")+1:0,E=s[o].v.substr(0,f);f<s[o].v.length;++f)T<_.length&&(E+=_.charAt(T++));s[o].v=E,s[o].t="t",P=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(S=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=fo(s[o].t,s[o].v,S),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var u6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function d6(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function lle(e,t){var r=ile(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(u6),l=r[1].match(u6);return d6(t,o)?[n,r[0]]:d6(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Us(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ur)[e],n==null&&(n=r.table&&r.table[o6[e]]||ur[o6[e]]),n==null&&(n=zoe[e]||"General");break}if(Mm(n,0))return nc(t,r);t instanceof Date&&(t=YF(t,r.date1904));var s=lle(n,t);if(Mm(s[1]))return nc(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ole(s[1],t,r,s[0])}function Kl(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ur[r]==null){t<0&&(t=r);continue}if(ur[r]==e){t=r;break}}t<0&&(t=391)}return ur[t]=e,t}function a$(){ur=qoe()}var cle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},s$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function ule(e){var t=typeof e=="number"?ur[e]:e;return t=t.replace(s$,"(\\d+)"),new RegExp("^"+t+"$")}function dle(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,u=-1;(t.match(s$)||[]).forEach(function(p,m){var x=parseInt(r[m+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=x;break;case"d":i=x;break;case"h":o=x;break;case"s":u=x;break;case"m":o>=0?l=x:s=x;break}}),u>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?d:n==-1&&s==-1&&i==-1?f:d+"T"+f}var hle=(function(){var e={};e.version="1.2.0";function t(){for(var _=0,A=new Array(256),P=0;P!=256;++P)_=P,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,A[P]=_;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function n(_){var A=0,P=0,B=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)I[B]=_[B];for(B=0;B!=256;++B)for(P=_[B],A=256+B;A<4096;A+=256)P=I[A]=P>>>8^_[P&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?I.subarray(B*256,B*256+256):I.slice(B*256,B*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],u=s[3],d=s[4],f=s[5],p=s[6],m=s[7],x=s[8],v=s[9],y=s[10],b=s[11],k=s[12],N=s[13],w=s[14];function T(_,A){for(var P=A^-1,B=0,I=_.length;B<I;)P=P>>>8^r[(P^_.charCodeAt(B++))&255];return~P}function E(_,A){for(var P=A^-1,B=_.length-15,I=0;I<B;)P=w[_[I++]^P&255]^N[_[I++]^P>>8&255]^k[_[I++]^P>>16&255]^b[_[I++]^P>>>24]^y[_[I++]]^v[_[I++]]^x[_[I++]]^m[_[I++]]^p[_[I++]]^f[_[I++]]^d[_[I++]]^u[_[I++]]^l[_[I++]]^o[_[I++]]^i[_[I++]]^r[_[I++]];for(B+=15;I<B;)P=P>>>8^r[(P^_[I++])&255];return~P}function S(_,A){for(var P=A^-1,B=0,I=_.length,O=0,L=0;B<I;)O=_.charCodeAt(B++),O<128?P=P>>>8^r[(P^O)&255]:O<2048?(P=P>>>8^r[(P^(192|O>>6&31))&255],P=P>>>8^r[(P^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,L=_.charCodeAt(B++)&1023,P=P>>>8^r[(P^(240|O>>8&7))&255],P=P>>>8^r[(P^(128|O>>2&63))&255],P=P>>>8^r[(P^(128|L>>6&15|(O&3)<<4))&255],P=P>>>8^r[(P^(128|L&63))&255]):(P=P>>>8^r[(P^(224|O>>12&15))&255],P=P>>>8^r[(P^(128|O>>6&63))&255],P=P>>>8^r[(P^(128|O&63))&255]);return~P}return e.table=r,e.bstr=T,e.buf=E,e.str=S,e})(),Nr=(function(){var t={};t.version="1.2.1";function r(Y,K){for(var H=Y.split("/"),W=K.split("/"),re=0,ae=0,je=Math.min(H.length,W.length);re<je;++re){if(ae=H[re].length-W[re].length)return ae;if(H[re]!=W[re])return H[re]<W[re]?-1:1}return H.length-W.length}function n(Y){if(Y.charAt(Y.length-1)=="/")return Y.slice(0,-1).indexOf("/")===-1?Y:n(Y.slice(0,-1));var K=Y.lastIndexOf("/");return K===-1?Y:Y.slice(0,K+1)}function s(Y){if(Y.charAt(Y.length-1)=="/")return s(Y.slice(0,-1));var K=Y.lastIndexOf("/");return K===-1?Y:Y.slice(K+1)}function i(Y,K){typeof K=="string"&&(K=new Date(K));var H=K.getHours();H=H<<6|K.getMinutes(),H=H<<5|K.getSeconds()>>>1,Y.write_shift(2,H);var W=K.getFullYear()-1980;W=W<<4|K.getMonth()+1,W=W<<5|K.getDate(),Y.write_shift(2,W)}function o(Y){var K=Y.read_shift(2)&65535,H=Y.read_shift(2)&65535,W=new Date,re=H&31;H>>>=5;var ae=H&15;H>>>=4,W.setMilliseconds(0),W.setFullYear(H+1980),W.setMonth(ae-1),W.setDate(re);var je=K&31;K>>>=5;var Oe=K&63;return K>>>=6,W.setHours(K),W.setMinutes(Oe),W.setSeconds(je<<1),W}function l(Y){ha(Y,0);for(var K={},H=0;Y.l<=Y.length-4;){var W=Y.read_shift(2),re=Y.read_shift(2),ae=Y.l+re,je={};switch(W){case 21589:H=Y.read_shift(1),H&1&&(je.mtime=Y.read_shift(4)),re>5&&(H&2&&(je.atime=Y.read_shift(4)),H&4&&(je.ctime=Y.read_shift(4))),je.mtime&&(je.mt=new Date(je.mtime*1e3));break}Y.l=ae,K[W]=je}return K}var u;function d(){return u||(u={})}function f(Y,K){if(Y[0]==80&&Y[1]==75)return bt(Y,K);if((Y[0]|32)==109&&(Y[1]|32)==105)return Ft(Y,K);if(Y.length<512)throw new Error("CFB file size "+Y.length+" < 512");var H=3,W=512,re=0,ae=0,je=0,Oe=0,G=0,ce=[],Te=Y.slice(0,512);ha(Te,0);var Ve=p(Te);switch(H=Ve[0],H){case 3:W=512;break;case 4:W=4096;break;case 0:if(Ve[1]==0)return bt(Y,K);default:throw new Error("Major Version: Expected 3 or 4 saw "+H)}W!==512&&(Te=Y.slice(0,W),ha(Te,28));var ke=Y.slice(0,W);m(Te,H);var ct=Te.read_shift(4,"i");if(H===3&&ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ct);Te.l+=4,je=Te.read_shift(4,"i"),Te.l+=4,Te.chk("00100000","Mini Stream Cutoff Size: "),Oe=Te.read_shift(4,"i"),re=Te.read_shift(4,"i"),G=Te.read_shift(4,"i"),ae=Te.read_shift(4,"i");for(var tt=-1,Qe=0;Qe<109&&(tt=Te.read_shift(4,"i"),!(tt<0));++Qe)ce[Qe]=tt;var Bt=x(Y,W);b(G,ae,Bt,W,ce);var Cr=N(Bt,je,ce,W);Cr[je].name="!Directory",re>0&&Oe!==L&&(Cr[Oe].name="!MiniFAT"),Cr[ce[0]].name="!FAT",Cr.fat_addrs=ce,Cr.ssz=W;var Dr={},nn=[],rs=[],Zr=[];w(je,Cr,Bt,nn,re,Dr,rs,Oe),v(rs,Zr,nn),nn.shift();var ns={FileIndex:rs,FullPaths:Zr};return K&&K.raw&&(ns.raw={header:ke,sectors:Bt}),ns}function p(Y){if(Y[Y.l]==80&&Y[Y.l+1]==75)return[0,0];Y.chk(X,"Header Signature: "),Y.l+=16;var K=Y.read_shift(2,"u");return[Y.read_shift(2,"u"),K]}function m(Y,K){var H=9;switch(Y.l+=2,H=Y.read_shift(2)){case 9:if(K!=3)throw new Error("Sector Shift: Expected 9 saw "+H);break;case 12:if(K!=4)throw new Error("Sector Shift: Expected 12 saw "+H);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+H)}Y.chk("0600","Mini Sector Shift: "),Y.chk("000000000000","Reserved: ")}function x(Y,K){for(var H=Math.ceil(Y.length/K)-1,W=[],re=1;re<H;++re)W[re-1]=Y.slice(re*K,(re+1)*K);return W[H-1]=Y.slice(H*K),W}function v(Y,K,H){for(var W=0,re=0,ae=0,je=0,Oe=0,G=H.length,ce=[],Te=[];W<G;++W)ce[W]=Te[W]=W,K[W]=H[W];for(;Oe<Te.length;++Oe)W=Te[Oe],re=Y[W].L,ae=Y[W].R,je=Y[W].C,ce[W]===W&&(re!==-1&&ce[re]!==re&&(ce[W]=ce[re]),ae!==-1&&ce[ae]!==ae&&(ce[W]=ce[ae])),je!==-1&&(ce[je]=W),re!==-1&&W!=ce[W]&&(ce[re]=ce[W],Te.lastIndexOf(re)<Oe&&Te.push(re)),ae!==-1&&W!=ce[W]&&(ce[ae]=ce[W],Te.lastIndexOf(ae)<Oe&&Te.push(ae));for(W=1;W<G;++W)ce[W]===W&&(ae!==-1&&ce[ae]!==ae?ce[W]=ce[ae]:re!==-1&&ce[re]!==re&&(ce[W]=ce[re]));for(W=1;W<G;++W)if(Y[W].type!==0){if(Oe=W,Oe!=ce[Oe])do Oe=ce[Oe],K[W]=K[Oe]+"/"+K[W];while(Oe!==0&&ce[Oe]!==-1&&Oe!=ce[Oe]);ce[W]=-1}for(K[0]+="/",W=1;W<G;++W)Y[W].type!==2&&(K[W]+="/")}function y(Y,K,H){for(var W=Y.start,re=Y.size,ae=[],je=W;H&&re>0&&je>=0;)ae.push(K.slice(je*O,je*O+O)),re-=O,je=Rl(H,je*4);return ae.length===0?Hn(0):Vo(ae).slice(0,Y.size)}function b(Y,K,H,W,re){var ae=L;if(Y===L){if(K!==0)throw new Error("DIFAT chain shorter than expected")}else if(Y!==-1){var je=H[Y],Oe=(W>>>2)-1;if(!je)return;for(var G=0;G<Oe&&(ae=Rl(je,G*4))!==L;++G)re.push(ae);b(Rl(je,W-4),K-1,H,W,re)}}function k(Y,K,H,W,re){var ae=[],je=[];re||(re=[]);var Oe=W-1,G=0,ce=0;for(G=K;G>=0;){re[G]=!0,ae[ae.length]=G,je.push(Y[G]);var Te=H[Math.floor(G*4/W)];if(ce=G*4&Oe,W<4+ce)throw new Error("FAT boundary crossed: "+G+" 4 "+W);if(!Y[Te])break;G=Rl(Y[Te],ce)}return{nodes:ae,data:w6([je])}}function N(Y,K,H,W){var re=Y.length,ae=[],je=[],Oe=[],G=[],ce=W-1,Te=0,Ve=0,ke=0,ct=0;for(Te=0;Te<re;++Te)if(Oe=[],ke=Te+K,ke>=re&&(ke-=re),!je[ke]){G=[];var tt=[];for(Ve=ke;Ve>=0;){tt[Ve]=!0,je[Ve]=!0,Oe[Oe.length]=Ve,G.push(Y[Ve]);var Qe=H[Math.floor(Ve*4/W)];if(ct=Ve*4&ce,W<4+ct)throw new Error("FAT boundary crossed: "+Ve+" 4 "+W);if(!Y[Qe]||(Ve=Rl(Y[Qe],ct),tt[Ve]))break}ae[ke]={nodes:Oe,data:w6([G])}}return ae}function w(Y,K,H,W,re,ae,je,Oe){for(var G=0,ce=W.length?2:0,Te=K[Y].data,Ve=0,ke=0,ct;Ve<Te.length;Ve+=128){var tt=Te.slice(Ve,Ve+128);ha(tt,64),ke=tt.read_shift(2),ct=Ok(tt,0,ke-ce),W.push(ct);var Qe={name:ct,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Bt=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Bt!==0&&(Qe.ct=T(tt,tt.l-8));var Cr=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Cr!==0&&(Qe.mt=T(tt,tt.l-8)),Qe.start=tt.read_shift(4,"i"),Qe.size=tt.read_shift(4,"i"),Qe.size<0&&Qe.start<0&&(Qe.size=Qe.type=0,Qe.start=L,Qe.name=""),Qe.type===5?(G=Qe.start,re>0&&G!==L&&(K[G].name="!StreamData")):Qe.size>=4096?(Qe.storage="fat",K[Qe.start]===void 0&&(K[Qe.start]=k(H,Qe.start,K.fat_addrs,K.ssz)),K[Qe.start].name=Qe.name,Qe.content=K[Qe.start].data.slice(0,Qe.size)):(Qe.storage="minifat",Qe.size<0?Qe.size=0:G!==L&&Qe.start!==L&&K[G]&&(Qe.content=y(Qe,K[G].data,(K[Oe]||{}).data))),Qe.content&&ha(Qe.content,0),ae[ct]=Qe,je.push(Qe)}}function T(Y,K){return new Date((ms(Y,K+4)/1e7*Math.pow(2,32)+ms(Y,K)/1e7-11644473600)*1e3)}function E(Y,K){return d(),f(u.readFileSync(Y),K)}function S(Y,K){var H=K&&K.type;switch(H||wr&&Buffer.isBuffer(Y)&&(H="buffer"),H||"base64"){case"file":return E(Y,K);case"base64":return f(ui(Ns(Y)),K);case"binary":return f(ui(Y),K)}return f(Y,K)}function _(Y,K){var H=K||{},W=H.root||"Root Entry";if(Y.FullPaths||(Y.FullPaths=[]),Y.FileIndex||(Y.FileIndex=[]),Y.FullPaths.length!==Y.FileIndex.length)throw new Error("inconsistent CFB structure");Y.FullPaths.length===0&&(Y.FullPaths[0]=W+"/",Y.FileIndex[0]={name:W,type:5}),H.CLSID&&(Y.FileIndex[0].clsid=H.CLSID),A(Y)}function A(Y){var K="Sh33tJ5";if(!Nr.find(Y,"/"+K)){var H=Hn(4);H[0]=55,H[1]=H[3]=50,H[2]=54,Y.FileIndex.push({name:K,type:2,content:H,size:4,L:69,R:69,C:69}),Y.FullPaths.push(Y.FullPaths[0]+K),P(Y)}}function P(Y,K){_(Y);for(var H=!1,W=!1,re=Y.FullPaths.length-1;re>=0;--re){var ae=Y.FileIndex[re];switch(ae.type){case 0:W?H=!0:(Y.FileIndex.pop(),Y.FullPaths.pop());break;case 1:case 2:case 5:W=!0,isNaN(ae.R*ae.L*ae.C)&&(H=!0),ae.R>-1&&ae.L>-1&&ae.R==ae.L&&(H=!0);break;default:H=!0;break}}if(!(!H&&!K)){var je=new Date(1987,1,19),Oe=0,G=Object.create?Object.create(null):{},ce=[];for(re=0;re<Y.FullPaths.length;++re)G[Y.FullPaths[re]]=!0,Y.FileIndex[re].type!==0&&ce.push([Y.FullPaths[re],Y.FileIndex[re]]);for(re=0;re<ce.length;++re){var Te=n(ce[re][0]);W=G[Te],W||(ce.push([Te,{name:s(Te).replace("/",""),type:1,clsid:V,ct:je,mt:je,content:null}]),G[Te]=!0)}for(ce.sort(function(ct,tt){return r(ct[0],tt[0])}),Y.FullPaths=[],Y.FileIndex=[],re=0;re<ce.length;++re)Y.FullPaths[re]=ce[re][0],Y.FileIndex[re]=ce[re][1];for(re=0;re<ce.length;++re){var Ve=Y.FileIndex[re],ke=Y.FullPaths[re];if(Ve.name=s(ke).replace("/",""),Ve.L=Ve.R=Ve.C=-(Ve.color=1),Ve.size=Ve.content?Ve.content.length:0,Ve.start=0,Ve.clsid=Ve.clsid||V,re===0)Ve.C=ce.length>1?1:-1,Ve.size=0,Ve.type=5;else if(ke.slice(-1)=="/"){for(Oe=re+1;Oe<ce.length&&n(Y.FullPaths[Oe])!=ke;++Oe);for(Ve.C=Oe>=ce.length?-1:Oe,Oe=re+1;Oe<ce.length&&n(Y.FullPaths[Oe])!=n(ke);++Oe);Ve.R=Oe>=ce.length?-1:Oe,Ve.type=1}else n(Y.FullPaths[re+1]||"")==n(ke)&&(Ve.R=re+1),Ve.type=2}}}function B(Y,K){var H=K||{};if(H.fileType=="mad")return dr(Y,H);switch(P(Y),H.fileType){case"zip":return st(Y,H)}var W=(function(ct){for(var tt=0,Qe=0,Bt=0;Bt<ct.FileIndex.length;++Bt){var Cr=ct.FileIndex[Bt];if(Cr.content){var Dr=Cr.content.length;Dr>0&&(Dr<4096?tt+=Dr+63>>6:Qe+=Dr+511>>9)}}for(var nn=ct.FullPaths.length+3>>2,rs=tt+7>>3,Zr=tt+127>>7,ns=rs+Qe+nn+Zr,fr=ns+127>>7,Wa=fr<=109?0:Math.ceil((fr-109)/127);ns+fr+Wa+127>>7>fr;)Wa=++fr<=109?0:Math.ceil((fr-109)/127);var qr=[1,Wa,fr,Zr,nn,Qe,tt,0];return ct.FileIndex[0].size=tt<<6,qr[7]=(ct.FileIndex[0].start=qr[0]+qr[1]+qr[2]+qr[3]+qr[4]+qr[5])+(qr[6]+7>>3),qr})(Y),re=Hn(W[7]<<9),ae=0,je=0;{for(ae=0;ae<8;++ae)re.write_shift(1,U[ae]);for(ae=0;ae<8;++ae)re.write_shift(2,0);for(re.write_shift(2,62),re.write_shift(2,3),re.write_shift(2,65534),re.write_shift(2,9),re.write_shift(2,6),ae=0;ae<3;++ae)re.write_shift(2,0);for(re.write_shift(4,0),re.write_shift(4,W[2]),re.write_shift(4,W[0]+W[1]+W[2]+W[3]-1),re.write_shift(4,0),re.write_shift(4,4096),re.write_shift(4,W[3]?W[0]+W[1]+W[2]-1:L),re.write_shift(4,W[3]),re.write_shift(-4,W[1]?W[0]-1:L),re.write_shift(4,W[1]),ae=0;ae<109;++ae)re.write_shift(-4,ae<W[2]?W[1]+ae:-1)}if(W[1])for(je=0;je<W[1];++je){for(;ae<236+je*127;++ae)re.write_shift(-4,ae<W[2]?W[1]+ae:-1);re.write_shift(-4,je===W[1]-1?L:je+1)}var Oe=function(ct){for(je+=ct;ae<je-1;++ae)re.write_shift(-4,ae+1);ct&&(++ae,re.write_shift(-4,L))};for(je=ae=0,je+=W[1];ae<je;++ae)re.write_shift(-4,ne.DIFSECT);for(je+=W[2];ae<je;++ae)re.write_shift(-4,ne.FATSECT);Oe(W[3]),Oe(W[4]);for(var G=0,ce=0,Te=Y.FileIndex[0];G<Y.FileIndex.length;++G)Te=Y.FileIndex[G],Te.content&&(ce=Te.content.length,!(ce<4096)&&(Te.start=je,Oe(ce+511>>9)));for(Oe(W[6]+7>>3);re.l&511;)re.write_shift(-4,ne.ENDOFCHAIN);for(je=ae=0,G=0;G<Y.FileIndex.length;++G)Te=Y.FileIndex[G],Te.content&&(ce=Te.content.length,!(!ce||ce>=4096)&&(Te.start=je,Oe(ce+63>>6)));for(;re.l&511;)re.write_shift(-4,ne.ENDOFCHAIN);for(ae=0;ae<W[4]<<2;++ae){var Ve=Y.FullPaths[ae];if(!Ve||Ve.length===0){for(G=0;G<17;++G)re.write_shift(4,0);for(G=0;G<3;++G)re.write_shift(4,-1);for(G=0;G<12;++G)re.write_shift(4,0);continue}Te=Y.FileIndex[ae],ae===0&&(Te.start=Te.size?Te.start-1:L);var ke=ae===0&&H.root||Te.name;if(ce=2*(ke.length+1),re.write_shift(64,ke,"utf16le"),re.write_shift(2,ce),re.write_shift(1,Te.type),re.write_shift(1,Te.color),re.write_shift(-4,Te.L),re.write_shift(-4,Te.R),re.write_shift(-4,Te.C),Te.clsid)re.write_shift(16,Te.clsid,"hex");else for(G=0;G<4;++G)re.write_shift(4,0);re.write_shift(4,Te.state||0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,Te.start),re.write_shift(4,Te.size),re.write_shift(4,0)}for(ae=1;ae<Y.FileIndex.length;++ae)if(Te=Y.FileIndex[ae],Te.size>=4096)if(re.l=Te.start+1<<9,wr&&Buffer.isBuffer(Te.content))Te.content.copy(re,re.l,0,Te.size),re.l+=Te.size+511&-512;else{for(G=0;G<Te.size;++G)re.write_shift(1,Te.content[G]);for(;G&511;++G)re.write_shift(1,0)}for(ae=1;ae<Y.FileIndex.length;++ae)if(Te=Y.FileIndex[ae],Te.size>0&&Te.size<4096)if(wr&&Buffer.isBuffer(Te.content))Te.content.copy(re,re.l,0,Te.size),re.l+=Te.size+63&-64;else{for(G=0;G<Te.size;++G)re.write_shift(1,Te.content[G]);for(;G&63;++G)re.write_shift(1,0)}if(wr)re.l=re.length;else for(;re.l<re.length;)re.write_shift(1,0);return re}function I(Y,K){var H=Y.FullPaths.map(function(G){return G.toUpperCase()}),W=H.map(function(G){var ce=G.split("/");return ce[ce.length-(G.slice(-1)=="/"?2:1)]}),re=!1;K.charCodeAt(0)===47?(re=!0,K=H[0].slice(0,-1)+K):re=K.indexOf("/")!==-1;var ae=K.toUpperCase(),je=re===!0?H.indexOf(ae):W.indexOf(ae);if(je!==-1)return Y.FileIndex[je];var Oe=!ae.match(ah);for(ae=ae.replace(qa,""),Oe&&(ae=ae.replace(ah,"!")),je=0;je<H.length;++je)if((Oe?H[je].replace(ah,"!"):H[je]).replace(qa,"")==ae||(Oe?W[je].replace(ah,"!"):W[je]).replace(qa,"")==ae)return Y.FileIndex[je];return null}var O=64,L=-2,X="d0cf11e0a1b11ae1",U=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ee(Y,K,H){d();var W=B(Y,H);u.writeFileSync(K,W)}function R(Y){for(var K=new Array(Y.length),H=0;H<Y.length;++H)K[H]=String.fromCharCode(Y[H]);return K.join("")}function se(Y,K){var H=B(Y,K);switch(K&&K.type||"buffer"){case"file":return d(),u.writeFileSync(K.filename,H),H;case"binary":return typeof H=="string"?H:R(H);case"base64":return n6(typeof H=="string"?H:R(H));case"buffer":if(wr)return Buffer.isBuffer(H)?H:dc(H);case"array":return typeof H=="string"?ui(H):H}return H}var z;function M(Y){try{var K=Y.InflateRaw,H=new K;if(H._processChunk(new Uint8Array([3,0]),H._finishFlushFlag),H.bytesRead)z=Y;else throw new Error("zlib does not expose bytesRead")}catch(W){console.error("cannot use native zlib: "+(W.message||W))}}function J(Y,K){if(!z)return Se(Y,K);var H=z.InflateRaw,W=new H,re=W._processChunk(Y.slice(Y.l),W._finishFlushFlag);return Y.l+=W.bytesRead,re}function te(Y){return z?z.deflateRawSync(Y):we(Y)}var ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ye(Y){var K=(Y<<1|Y<<11)&139536|(Y<<5|Y<<15)&558144;return(K>>16|K>>8|K)&255}for(var he=typeof Uint8Array<"u",pe=he?new Uint8Array(256):[],De=0;De<256;++De)pe[De]=ye(De);function q(Y,K){var H=pe[Y&255];return K<=8?H>>>8-K:(H=H<<8|pe[Y>>8&255],K<=16?H>>>16-K:(H=H<<8|pe[Y>>16&255],H>>>24-K))}function Ae(Y,K){var H=K&7,W=K>>>3;return(Y[W]|(H<=6?0:Y[W+1]<<8))>>>H&3}function Be(Y,K){var H=K&7,W=K>>>3;return(Y[W]|(H<=5?0:Y[W+1]<<8))>>>H&7}function xt(Y,K){var H=K&7,W=K>>>3;return(Y[W]|(H<=4?0:Y[W+1]<<8))>>>H&15}function le(Y,K){var H=K&7,W=K>>>3;return(Y[W]|(H<=3?0:Y[W+1]<<8))>>>H&31}function Ee(Y,K){var H=K&7,W=K>>>3;return(Y[W]|(H<=1?0:Y[W+1]<<8))>>>H&127}function Ce(Y,K,H){var W=K&7,re=K>>>3,ae=(1<<H)-1,je=Y[re]>>>W;return H<8-W||(je|=Y[re+1]<<8-W,H<16-W)||(je|=Y[re+2]<<16-W,H<24-W)||(je|=Y[re+3]<<24-W),je&ae}function $e(Y,K,H){var W=K&7,re=K>>>3;return W<=5?Y[re]|=(H&7)<<W:(Y[re]|=H<<W&255,Y[re+1]=(H&7)>>8-W),K+3}function Nt(Y,K,H){var W=K&7,re=K>>>3;return H=(H&1)<<W,Y[re]|=H,K+1}function vt(Y,K,H){var W=K&7,re=K>>>3;return H<<=W,Y[re]|=H&255,H>>>=8,Y[re+1]=H,K+8}function qt(Y,K,H){var W=K&7,re=K>>>3;return H<<=W,Y[re]|=H&255,H>>>=8,Y[re+1]=H&255,Y[re+2]=H>>>8,K+16}function gr(Y,K){var H=Y.length,W=2*H>K?2*H:K+5,re=0;if(H>=K)return Y;if(wr){var ae=a6(W);if(Y.copy)Y.copy(ae);else for(;re<Y.length;++re)ae[re]=Y[re];return ae}else if(he){var je=new Uint8Array(W);if(je.set)je.set(Y);else for(;re<H;++re)je[re]=Y[re];return je}return Y.length=W,Y}function sr(Y){for(var K=new Array(Y),H=0;H<Y;++H)K[H]=0;return K}function lr(Y,K,H){var W=1,re=0,ae=0,je=0,Oe=0,G=Y.length,ce=he?new Uint16Array(32):sr(32);for(ae=0;ae<32;++ae)ce[ae]=0;for(ae=G;ae<H;++ae)Y[ae]=0;G=Y.length;var Te=he?new Uint16Array(G):sr(G);for(ae=0;ae<G;++ae)ce[re=Y[ae]]++,W<re&&(W=re),Te[ae]=0;for(ce[0]=0,ae=1;ae<=W;++ae)ce[ae+16]=Oe=Oe+ce[ae-1]<<1;for(ae=0;ae<G;++ae)Oe=Y[ae],Oe!=0&&(Te[ae]=ce[Oe+16]++);var Ve=0;for(ae=0;ae<G;++ae)if(Ve=Y[ae],Ve!=0)for(Oe=q(Te[ae],W)>>W-Ve,je=(1<<W+4-Ve)-1;je>=0;--je)K[Oe|je<<Ve]=Ve&15|ae<<4;return W}var Qr=he?new Uint16Array(512):sr(512),Hr=he?new Uint16Array(32):sr(32);if(!he){for(var cr=0;cr<512;++cr)Qr[cr]=0;for(cr=0;cr<32;++cr)Hr[cr]=0}(function(){for(var Y=[],K=0;K<32;K++)Y.push(5);lr(Y,Hr,32);var H=[];for(K=0;K<=143;K++)H.push(8);for(;K<=255;K++)H.push(9);for(;K<=279;K++)H.push(7);for(;K<=287;K++)H.push(8);lr(H,Qr,288)})();var Fe=(function(){for(var K=he?new Uint8Array(32768):[],H=0,W=0;H<ve.length-1;++H)for(;W<ve[H+1];++W)K[W]=H;for(;W<32768;++W)K[W]=29;var re=he?new Uint8Array(259):[];for(H=0,W=0;H<me.length-1;++H)for(;W<me[H+1];++W)re[W]=H;function ae(Oe,G){for(var ce=0;ce<Oe.length;){var Te=Math.min(65535,Oe.length-ce),Ve=ce+Te==Oe.length;for(G.write_shift(1,+Ve),G.write_shift(2,Te),G.write_shift(2,~Te&65535);Te-- >0;)G[G.l++]=Oe[ce++]}return G.l}function je(Oe,G){for(var ce=0,Te=0,Ve=he?new Uint16Array(32768):[];Te<Oe.length;){var ke=Math.min(65535,Oe.length-Te);if(ke<10){for(ce=$e(G,ce,+(Te+ke==Oe.length)),ce&7&&(ce+=8-(ce&7)),G.l=ce/8|0,G.write_shift(2,ke),G.write_shift(2,~ke&65535);ke-- >0;)G[G.l++]=Oe[Te++];ce=G.l*8;continue}ce=$e(G,ce,+(Te+ke==Oe.length)+2);for(var ct=0;ke-- >0;){var tt=Oe[Te];ct=(ct<<5^tt)&32767;var Qe=-1,Bt=0;if((Qe=Ve[ct])&&(Qe|=Te&-32768,Qe>Te&&(Qe-=32768),Qe<Te))for(;Oe[Qe+Bt]==Oe[Te+Bt]&&Bt<250;)++Bt;if(Bt>2){tt=re[Bt],tt<=22?ce=vt(G,ce,pe[tt+1]>>1)-1:(vt(G,ce,3),ce+=5,vt(G,ce,pe[tt-23]>>5),ce+=3);var Cr=tt<8?0:tt-4>>2;Cr>0&&(qt(G,ce,Bt-me[tt]),ce+=Cr),tt=K[Te-Qe],ce=vt(G,ce,pe[tt]>>3),ce-=3;var Dr=tt<4?0:tt-2>>1;Dr>0&&(qt(G,ce,Te-Qe-ve[tt]),ce+=Dr);for(var nn=0;nn<Bt;++nn)Ve[ct]=Te&32767,ct=(ct<<5^Oe[Te])&32767,++Te;ke-=Bt-1}else tt<=143?tt=tt+48:ce=Nt(G,ce,1),ce=vt(G,ce,pe[tt]),Ve[ct]=Te&32767,++Te}ce=vt(G,ce,0)-1}return G.l=(ce+7)/8|0,G.l}return function(G,ce){return G.length<8?ae(G,ce):je(G,ce)}})();function we(Y){var K=Hn(50+Math.floor(Y.length*1.1)),H=Fe(Y,K);return K.slice(0,H)}var mt=he?new Uint16Array(32768):sr(32768),Ue=he?new Uint16Array(32768):sr(32768),rt=he?new Uint16Array(128):sr(128),ut=1,Vt=1;function _t(Y,K){var H=le(Y,K)+257;K+=5;var W=le(Y,K)+1;K+=5;var re=xt(Y,K)+4;K+=4;for(var ae=0,je=he?new Uint8Array(19):sr(19),Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=1,ce=he?new Uint8Array(8):sr(8),Te=he?new Uint8Array(8):sr(8),Ve=je.length,ke=0;ke<re;++ke)je[ie[ke]]=ae=Be(Y,K),G<ae&&(G=ae),ce[ae]++,K+=3;var ct=0;for(ce[0]=0,ke=1;ke<=G;++ke)Te[ke]=ct=ct+ce[ke-1]<<1;for(ke=0;ke<Ve;++ke)(ct=je[ke])!=0&&(Oe[ke]=Te[ct]++);var tt=0;for(ke=0;ke<Ve;++ke)if(tt=je[ke],tt!=0){ct=pe[Oe[ke]]>>8-tt;for(var Qe=(1<<7-tt)-1;Qe>=0;--Qe)rt[ct|Qe<<tt]=tt&7|ke<<3}var Bt=[];for(G=1;Bt.length<H+W;)switch(ct=rt[Ee(Y,K)],K+=ct&7,ct>>>=3){case 16:for(ae=3+Ae(Y,K),K+=2,ct=Bt[Bt.length-1];ae-- >0;)Bt.push(ct);break;case 17:for(ae=3+Be(Y,K),K+=3;ae-- >0;)Bt.push(0);break;case 18:for(ae=11+Ee(Y,K),K+=7;ae-- >0;)Bt.push(0);break;default:Bt.push(ct),G<ct&&(G=ct);break}var Cr=Bt.slice(0,H),Dr=Bt.slice(H);for(ke=H;ke<286;++ke)Cr[ke]=0;for(ke=W;ke<30;++ke)Dr[ke]=0;return ut=lr(Cr,mt,286),Vt=lr(Dr,Ue,30),K}function Ne(Y,K){if(Y[0]==3&&!(Y[1]&3))return[al(K),2];for(var H=0,W=0,re=a6(K||1<<18),ae=0,je=re.length>>>0,Oe=0,G=0;(W&1)==0;){if(W=Be(Y,H),H+=3,W>>>1)W>>1==1?(Oe=9,G=5):(H=_t(Y,H),Oe=ut,G=Vt);else{H&7&&(H+=8-(H&7));var ce=Y[H>>>3]|Y[(H>>>3)+1]<<8;if(H+=32,ce>0)for(!K&&je<ae+ce&&(re=gr(re,ae+ce),je=re.length);ce-- >0;)re[ae++]=Y[H>>>3],H+=8;continue}for(;;){!K&&je<ae+32767&&(re=gr(re,ae+32767),je=re.length);var Te=Ce(Y,H,Oe),Ve=W>>>1==1?Qr[Te]:mt[Te];if(H+=Ve&15,Ve>>>=4,(Ve>>>8&255)===0)re[ae++]=Ve;else{if(Ve==256)break;Ve-=257;var ke=Ve<8?0:Ve-4>>2;ke>5&&(ke=0);var ct=ae+me[Ve];ke>0&&(ct+=Ce(Y,H,ke),H+=ke),Te=Ce(Y,H,G),Ve=W>>>1==1?Hr[Te]:Ue[Te],H+=Ve&15,Ve>>>=4;var tt=Ve<4?0:Ve-2>>1,Qe=ve[Ve];for(tt>0&&(Qe+=Ce(Y,H,tt),H+=tt),!K&&je<ct&&(re=gr(re,ct+100),je=re.length);ae<ct;)re[ae]=re[ae-Qe],++ae}}}return K?[re,H+7>>>3]:[re.slice(0,ae),H+7>>>3]}function Se(Y,K){var H=Y.slice(Y.l||0),W=Ne(H,K);return Y.l+=W[1],W[0]}function Ge(Y,K){if(Y)typeof console<"u"&&console.error(K);else throw new Error(K)}function bt(Y,K){var H=Y;ha(H,0);var W=[],re=[],ae={FileIndex:W,FullPaths:re};_(ae,{root:K.root});for(var je=H.length-4;(H[je]!=80||H[je+1]!=75||H[je+2]!=5||H[je+3]!=6)&&je>=0;)--je;H.l=je+4,H.l+=4;var Oe=H.read_shift(2);H.l+=6;var G=H.read_shift(4);for(H.l=G,je=0;je<Oe;++je){H.l+=20;var ce=H.read_shift(4),Te=H.read_shift(4),Ve=H.read_shift(2),ke=H.read_shift(2),ct=H.read_shift(2);H.l+=8;var tt=H.read_shift(4),Qe=l(H.slice(H.l+Ve,H.l+Ve+ke));H.l+=Ve+ke+ct;var Bt=H.l;H.l=tt+4,dt(H,ce,Te,ae,Qe),H.l=Bt}return ae}function dt(Y,K,H,W,re){Y.l+=2;var ae=Y.read_shift(2),je=Y.read_shift(2),Oe=o(Y);if(ae&8257)throw new Error("Unsupported ZIP encryption");for(var G=Y.read_shift(4),ce=Y.read_shift(4),Te=Y.read_shift(4),Ve=Y.read_shift(2),ke=Y.read_shift(2),ct="",tt=0;tt<Ve;++tt)ct+=String.fromCharCode(Y[Y.l++]);if(ke){var Qe=l(Y.slice(Y.l,Y.l+ke));(Qe[21589]||{}).mt&&(Oe=Qe[21589].mt),((re||{})[21589]||{}).mt&&(Oe=re[21589].mt)}Y.l+=ke;var Bt=Y.slice(Y.l,Y.l+ce);switch(je){case 8:Bt=J(Y,Te);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+je)}var Cr=!1;ae&8&&(G=Y.read_shift(4),G==134695760&&(G=Y.read_shift(4),Cr=!0),ce=Y.read_shift(4),Te=Y.read_shift(4)),ce!=K&&Ge(Cr,"Bad compressed size: "+K+" != "+ce),Te!=H&&Ge(Cr,"Bad uncompressed size: "+H+" != "+Te),gt(W,ct,Bt,{unsafe:!0,mt:Oe})}function st(Y,K){var H=K||{},W=[],re=[],ae=Hn(1),je=H.compression?8:0,Oe=0,G=0,ce=0,Te=0,Ve=0,ke=Y.FullPaths[0],ct=ke,tt=Y.FileIndex[0],Qe=[],Bt=0;for(G=1;G<Y.FullPaths.length;++G)if(ct=Y.FullPaths[G].slice(ke.length),tt=Y.FileIndex[G],!(!tt.size||!tt.content||ct=="Sh33tJ5")){var Cr=Te,Dr=Hn(ct.length);for(ce=0;ce<ct.length;++ce)Dr.write_shift(1,ct.charCodeAt(ce)&127);Dr=Dr.slice(0,Dr.l),Qe[Ve]=hle.buf(tt.content,0);var nn=tt.content;je==8&&(nn=te(nn)),ae=Hn(30),ae.write_shift(4,67324752),ae.write_shift(2,20),ae.write_shift(2,Oe),ae.write_shift(2,je),tt.mt?i(ae,tt.mt):ae.write_shift(4,0),ae.write_shift(-4,Qe[Ve]),ae.write_shift(4,nn.length),ae.write_shift(4,tt.content.length),ae.write_shift(2,Dr.length),ae.write_shift(2,0),Te+=ae.length,W.push(ae),Te+=Dr.length,W.push(Dr),Te+=nn.length,W.push(nn),ae=Hn(46),ae.write_shift(4,33639248),ae.write_shift(2,0),ae.write_shift(2,20),ae.write_shift(2,Oe),ae.write_shift(2,je),ae.write_shift(4,0),ae.write_shift(-4,Qe[Ve]),ae.write_shift(4,nn.length),ae.write_shift(4,tt.content.length),ae.write_shift(2,Dr.length),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(4,0),ae.write_shift(4,Cr),Bt+=ae.l,re.push(ae),Bt+=Dr.length,re.push(Dr),++Ve}return ae=Hn(22),ae.write_shift(4,101010256),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,Ve),ae.write_shift(2,Ve),ae.write_shift(4,Bt),ae.write_shift(4,Te),ae.write_shift(2,0),Vo([Vo(W),Vo(re),ae])}var wt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Rt(Y,K){if(Y.ctype)return Y.ctype;var H=Y.name||"",W=H.match(/\.([^\.]+)$/);return W&&wt[W[1]]||K&&(W=(H=K).match(/[\.\\]([^\.\\])+$/),W&&wt[W[1]])?wt[W[1]]:"application/octet-stream"}function nt(Y){for(var K=n6(Y),H=[],W=0;W<K.length;W+=76)H.push(K.slice(W,W+76));return H.join(`\r
`)+`\r
`}function yt(Y){var K=Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var Te=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(Te.length==1?"0"+Te:Te)});K=K.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),K.charAt(0)==`
`&&(K="=0D"+K.slice(1)),K=K.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var H=[],W=K.split(`\r
`),re=0;re<W.length;++re){var ae=W[re];if(ae.length==0){H.push("");continue}for(var je=0;je<ae.length;){var Oe=76,G=ae.slice(je,je+Oe);G.charAt(Oe-1)=="="?Oe--:G.charAt(Oe-2)=="="?Oe-=2:G.charAt(Oe-3)=="="&&(Oe-=3),G=ae.slice(je,je+Oe),je+=Oe,je<ae.length&&(G+="="),H.push(G)}}return H.join(`\r
`)}function ht(Y){for(var K=[],H=0;H<Y.length;++H){for(var W=Y[H];H<=Y.length&&W.charAt(W.length-1)=="=";)W=W.slice(0,W.length-1)+Y[++H];K.push(W)}for(var re=0;re<K.length;++re)K[re]=K[re].replace(/[=][0-9A-Fa-f]{2}/g,function(ae){return String.fromCharCode(parseInt(ae.slice(1),16))});return ui(K.join(`\r
`))}function Ut(Y,K,H){for(var W="",re="",ae="",je,Oe=0;Oe<10;++Oe){var G=K[Oe];if(!G||G.match(/^\s*$/))break;var ce=G.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":W=ce[2].trim();break;case"content-type":ae=ce[2].trim();break;case"content-transfer-encoding":re=ce[2].trim();break}}switch(++Oe,re.toLowerCase()){case"base64":je=ui(Ns(K.slice(Oe).join("")));break;case"quoted-printable":je=ht(K.slice(Oe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+re)}var Te=gt(Y,W.slice(H.length),je,{unsafe:!0});ae&&(Te.ctype=ae)}function Ft(Y,K){if(R(Y.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var H=K&&K.root||"",W=(wr&&Buffer.isBuffer(Y)?Y.toString("binary"):R(Y)).split(`\r
`),re=0,ae="";for(re=0;re<W.length;++re)if(ae=W[re],!!/^Content-Location:/i.test(ae)&&(ae=ae.slice(ae.indexOf("file")),H||(H=ae.slice(0,ae.lastIndexOf("/")+1)),ae.slice(0,H.length)!=H))for(;H.length>0&&(H=H.slice(0,H.length-1),H=H.slice(0,H.lastIndexOf("/")+1),ae.slice(0,H.length)!=H););var je=(W[1]||"").match(/boundary="(.*?)"/);if(!je)throw new Error("MAD cannot find boundary");var Oe="--"+(je[1]||""),G=[],ce=[],Te={FileIndex:G,FullPaths:ce};_(Te);var Ve,ke=0;for(re=0;re<W.length;++re){var ct=W[re];ct!==Oe&&ct!==Oe+"--"||(ke++&&Ut(Te,W.slice(Ve,re),H),Ve=re)}return Te}function dr(Y,K){var H=K||{},W=H.boundary||"SheetJS";W="------="+W;for(var re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+W.slice(2)+'"',"","",""],ae=Y.FullPaths[0],je=ae,Oe=Y.FileIndex[0],G=1;G<Y.FullPaths.length;++G)if(je=Y.FullPaths[G].slice(ae.length),Oe=Y.FileIndex[G],!(!Oe.size||!Oe.content||je=="Sh33tJ5")){je=je.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Bt){return"_x"+Bt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Bt){return"_u"+Bt.charCodeAt(0).toString(16)+"_"});for(var ce=Oe.content,Te=wr&&Buffer.isBuffer(ce)?ce.toString("binary"):R(ce),Ve=0,ke=Math.min(1024,Te.length),ct=0,tt=0;tt<=ke;++tt)(ct=Te.charCodeAt(tt))>=32&&ct<128&&++Ve;var Qe=Ve>=ke*4/5;re.push(W),re.push("Content-Location: "+(H.root||"file:///C:/SheetJS/")+je),re.push("Content-Transfer-Encoding: "+(Qe?"quoted-printable":"base64")),re.push("Content-Type: "+Rt(Oe,je)),re.push(""),re.push(Qe?yt(Te):nt(Te))}return re.push(W+`--\r
`),re.join(`\r
`)}function br(Y){var K={};return _(K,Y),K}function gt(Y,K,H,W){var re=W&&W.unsafe;re||_(Y);var ae=!re&&Nr.find(Y,K);if(!ae){var je=Y.FullPaths[0];K.slice(0,je.length)==je?je=K:(je.slice(-1)!="/"&&(je+="/"),je=(je+K).replace("//","/")),ae={name:s(K),type:2},Y.FileIndex.push(ae),Y.FullPaths.push(je),re||Nr.utils.cfb_gc(Y)}return ae.content=H,ae.size=H?H.length:0,W&&(W.CLSID&&(ae.clsid=W.CLSID),W.mt&&(ae.mt=W.mt),W.ct&&(ae.ct=W.ct)),ae}function It(Y,K){_(Y);var H=Nr.find(Y,K);if(H){for(var W=0;W<Y.FileIndex.length;++W)if(Y.FileIndex[W]==H)return Y.FileIndex.splice(W,1),Y.FullPaths.splice(W,1),!0}return!1}function vr(Y,K,H){_(Y);var W=Nr.find(Y,K);if(W){for(var re=0;re<Y.FileIndex.length;++re)if(Y.FileIndex[re]==W)return Y.FileIndex[re].name=s(H),Y.FullPaths[re]=H,!0}return!1}function Er(Y){P(Y,!0)}return t.find=I,t.read=S,t.parse=f,t.write=se,t.writeFile=ee,t.utils={cfb_new:br,cfb_add:gt,cfb_del:It,cfb_mov:vr,cfb_gc:Er,ReadShift:xh,CheckField:E$,prep_blob:ha,bconcat:Vo,use_zlib:M,_deflateRaw:we,_inflateRaw:Se,consts:ne},t})();function fle(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ri(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function Ek(e){for(var t=[],r=Ri(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var Fm=new Date(1899,11,30,0,0,0);function za(e,t){var r=e.getTime(),n=Fm.getTime()+(e.getTimezoneOffset()-Fm.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var i$=new Date,ple=Fm.getTime()+(i$.getTimezoneOffset()-Fm.getTimezoneOffset())*6e4,h6=i$.getTimezoneOffset();function Lg(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ple),t.getTimezoneOffset()!==h6&&t.setTime(t.getTime()+(t.getTimezoneOffset()-h6)*6e4),t}function mle(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var f6=new Date("2017-02-19T19:06:09.000Z"),o$=isNaN(f6.getFullYear())?new Date("2/19/17"):f6,gle=o$.getFullYear()==2017;function aa(e,t){var r=new Date(e);if(gle)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(o$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ac(e,t){if(wr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return ih(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return ih(VF(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return ih(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return ih(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function ga(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ga(e[r]));return t}function mn(e,t){for(var r="";r.length<t;)r+=e;return r}function gi(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var xle=["january","february","march","april","may","june","july","august","september","october","november","december"];function qu(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&xle.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var yle=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function l$(e){return e?e.content&&e.type?ac(e.content,!0):e.data?nh(e.data):e.asNodeBuffer&&wr?nh(e.asNodeBuffer().toString("binary")):e.asBinary?nh(e.asBinary()):e._data&&e._data.getContent?nh(ac(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function c$(e){if(!e)return null;if(e.data)return t6(e.data);if(e.asNodeBuffer&&wr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?t6(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function vle(e){return e&&e.name.slice(-4)===".bin"?c$(e):l$(e)}function Rs(e,t){for(var r=e.FullPaths||Ri(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Ak(e,t){var r=Rs(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function An(e,t,r){if(!r)return vle(Ak(e,t));if(!t)return null;try{return An(e,t)}catch{return null}}function vs(e,t,r){if(!r)return l$(Ak(e,t));if(!t)return null;try{return vs(e,t)}catch{return null}}function ble(e,t,r){return c$(Ak(e,t))}function p6(e){for(var t=e.FullPaths||Ri(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function wle(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return wr?n=dc(r):n=Boe(r),Nr.utils.cfb_add(e,t,n)}Nr.utils.cfb_add(e,t,r)}else e.file(t,r)}function u$(e,t){switch(t.type){case"base64":return Nr.read(e,{type:"base64"});case"binary":return Nr.read(e,{type:"binary"});case"buffer":case"array":return Nr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function sh(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var d$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jle=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,m6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Nle=/<[^>]*>/g,Pa=d$.match(m6)?m6:Nle,kle=/<\w*:/,Sle=/<(\/?)\w+:/;function Qt(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(jle),l=0,u="",d=0,f="",p="",m=1;if(o)for(d=0;d!=o.length;++d){for(p=o[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(m=(s=p.charCodeAt(i+1))==34||s==39?1:0,u=p.slice(i+1+m,p.length-m),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=u,n[f.toLowerCase()]=u;else{var x=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[x]&&f.slice(l-3,l)=="ext")continue;n[x]=u,n[x.toLowerCase()]=u}}return n}function Bi(e){return e.replace(Sle,"<$1")}var h$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},_le=Ek(h$),_r=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,u){return h$[l]||String.fromCharCode(parseInt(u,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),Ele=/[&<>'"]/g,Ale=/[\u0000-\u001f]/g;function Tk(e){var t=e+"";return t.replace(Ele,function(r){return _le[r]}).replace(/\n/g,"<br/>").replace(Ale,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var g6=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function sn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function F1(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function x6(e){var t=al(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function y6(e){return dc(e,"binary").toString("utf8")}var pp="foo bar baz",Jr=wr&&(y6(pp)==F1(pp)&&y6||x6(pp)==F1(pp)&&x6)||F1,ih=wr?function(e){return dc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},wf=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),f$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Tle=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Cle=/<\/?(?:vt:)?variant>/g,Ole=/<(?:vt:)([^>]*)>([\s\S]*)</;function v6(e,t){var r=Qt(e),n=e.match(Tle(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Cle,"").match(Ole);o&&s.push({v:Jr(o[2]),t:o[1]})}),s}var Ple=/(^\s|\s$|\n)/;function Ile(e){return Ri(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Dle(e,t,r){return"<"+e+(r!=null?Ile(r):"")+(t!=null?(t.match(Ple)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Ck(e){if(wr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Jr(hc(kk(e)));throw new Error("Bad input format: expected Buffer or string")}var jf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Mle={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Rle=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Fle(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function $le(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var b6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},w6=wr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:dc(t)})):b6(e)}:b6,j6=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(lo(e,s)));return n.join("").replace(qa,"")},Ok=wr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(qa,""):j6(e,t,r)}:j6,N6=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},p$=wr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):N6(e,t,r)}:N6,k6=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(tu(e,s)));return n.join("")},Bf=wr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):k6(t,r,n)}:k6,m$=function(e,t){var r=ms(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},g$=m$,x$=function(e,t){var r=ms(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},y$=x$,v$=function(e,t){var r=2*ms(e,t);return r>0?Bf(e,t+4,t+4+r-1):""},b$=v$,w$=function(t,r){var n=ms(t,r);return n>0?Ok(t,r+4,r+4+n):""},j$=w$,N$=function(e,t){var r=ms(e,t);return r>0?Bf(e,t+4,t+4+r):""},k$=N$,S$=function(e,t){return Fle(e,t)},$m=S$,_$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};wr&&(g$=function(t,r){if(!Buffer.isBuffer(t))return m$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},y$=function(t,r){if(!Buffer.isBuffer(t))return x$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},b$=function(t,r){if(!Buffer.isBuffer(t))return v$(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},j$=function(t,r){if(!Buffer.isBuffer(t))return w$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},k$=function(t,r){if(!Buffer.isBuffer(t))return N$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},$m=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):S$(t,r)},_$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var tu=function(e,t){return e[t]},lo=function(e,t){return e[t+1]*256+e[t]},Lle=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ms=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Rl=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Ble=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function xh(e,t){var r="",n,s,i=[],o,l,u,d;switch(t){case"dbcs":if(d=this.l,wr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)r+=String.fromCharCode(lo(this,d)),d+=2;e*=2;break;case"utf8":r=Bf(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Ok(this,this.l,this.l+e);break;case"wstr":return xh.call(this,e,"dbcs");case"lpstr-ansi":r=g$(this,this.l),e=4+ms(this,this.l);break;case"lpstr-cp":r=y$(this,this.l),e=4+ms(this,this.l);break;case"lpwstr":r=b$(this,this.l),e=4+2*ms(this,this.l);break;case"lpp4":e=4+ms(this,this.l),r=j$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ms(this,this.l),r=k$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=tu(this,this.l+e++))!==0;)i.push(fp(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=lo(this,this.l+e))!==0;)i.push(fp(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=tu(this,d),this.l=d+1,l=xh.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(fp(lo(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=tu(this,d),this.l=d+1,l=xh.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(fp(tu(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=tu(this,this.l),this.l++,n;case 2:return n=(t==="i"?Lle:lo)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Rl:Ble)(this,this.l),this.l+=4,n):(s=ms(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=$m(this,this.l):s=$m([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=p$(this,this.l,e);break}}return this.l+=e,r}var Ule=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Hle=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},qle=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function zle(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)qle(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Ule(this,t,this.l);break;case 8:if(n=8,r==="f"){$le(this,t,this.l);break}case 16:break;case-4:n=4,Hle(this,t,this.l);break}return this.l+=n,this}function E$(e,t){var r=p$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ha(e,t){e.l=t,e.read_shift=xh,e.chk=E$,e.write_shift=zle}function Oa(e,t){e.l+=t}function Hn(e){var t=al(e);return ha(t,0),t}function ko(e,t,r){if(e){var n,s,i;ha(e,e.l||0);for(var o=e.length,l=0,u=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=zm[l]||zm[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;u=e.l+i;var f=d.f&&d.f(e,i,r);if(e.l=u,t(f,d,l))return}}}function LN(){var e=[],t=wr?256:2048,r=function(d){var f=Hn(d);return ha(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),Vo(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function yh(e,t,r){var n=ga(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function S6(e,t,r){var n=ga(e);return n.s=yh(n.s,t.s,r),n.e=yh(n.e,t.s,r),n}function vh(e,t){if(e.cRel&&e.c<0)for(e=ga(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ga(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=or(e);return!e.cRel&&e.cRel!=null&&(r=Vle(r)),!e.rRel&&e.rRel!=null&&(r=Wle(r)),r}function $1(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Wn(e.s.c)+":"+(e.e.cRel?"":"$")+Wn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+xa(e.s.r)+":"+(e.e.rRel?"":"$")+xa(e.e.r):vh(e.s,t.biff)+":"+vh(e.e,t.biff)}function Pk(e){return parseInt(Kle(e),10)-1}function xa(e){return""+(e+1)}function Wle(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Kle(e){return e.replace(/\$(\d+)$/,"$1")}function Ik(e){for(var t=Gle(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Wn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Vle(e){return e.replace(/^([A-Z])/,"$$$1")}function Gle(e){return e.replace(/^\$([A-Z])/,"$1")}function Yle(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ha(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function or(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function id(e){var t=e.indexOf(":");return t==-1?{s:Ha(e),e:Ha(e)}:{s:Ha(e.slice(0,t)),e:Ha(e.slice(t+1))}}function kr(e,t){return typeof t>"u"||typeof t=="number"?kr(e.s,e.e):(typeof e!="string"&&(e=or(e)),typeof t!="string"&&(t=or(t)),e==t?e:e+":"+t)}function yn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function _6(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Us(e.z,r?za(t):t)}catch{}try{return e.w=Us((e.XF||{}).numFmtId||(r?14:0),r?za(t):t)}catch{return""+t}}function vo(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?mc[e.v]||e.v:t==null?_6(e,e.v):_6(e,t))}function dl(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function A$(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Ha(n.origin):n.origin;o=u.r,l=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=yn(i["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(d.e.r=o=f.e.r+1)}for(var p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[p].length;++m)if(!(typeof t[p][m]>"u")){var x={v:t[p][m]},v=o+p,y=l+m;if(d.s.r>v&&(d.s.r=v),d.s.c>y&&(d.s.c=y),d.e.r<v&&(d.e.r=v),d.e.c<y&&(d.e.c=y),t[p][m]&&typeof t[p][m]=="object"&&!Array.isArray(t[p][m])&&!(t[p][m]instanceof Date))x=t[p][m];else if(Array.isArray(x.v)&&(x.f=t[p][m][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(n.nullError)x.t="e",x.v=0;else if(n.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=n.dateNF||ur[14],n.cellDates?(x.t="d",x.w=Us(x.z,za(x.v))):(x.t="n",x.v=za(x.v),x.w=Us(x.z,x.v))):x.t="s";if(s)i[v]||(i[v]=[]),i[v][y]&&i[v][y].z&&(x.z=i[v][y].z),i[v][y]=x;else{var b=or({c:y,r:v});i[b]&&i[b].z&&(x.z=i[b].z),i[b]=x}}}return d.s.c<1e7&&(i["!ref"]=kr(d)),i}function od(e,t){return A$(null,e,t)}function Xle(e){return e.read_shift(4,"i")}function Ca(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Jle(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Dk(e,t){var r=e.l,n=e.read_shift(1),s=Ca(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),u=0;u!=l;++u)i.push(Jle(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var Qle=Dk;function qs(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function fc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Zle=Ca;function Mk(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var ece=Ca,BN=Mk;function Rk(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?$m([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Rl(t,0)>>2;return r?s/100:s}function T$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var pc=T$;function Ea(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function tce(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),u=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=Vl[s];d&&(t.rgb=kf(d));break;case 2:t.rgb=kf([o,l,u]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function rce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function C$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function nce(e){return C$(e,1)}function ace(e){return C$(e,2)}var Fk=2,Qa=3,mp=11,E6=12,Lm=19,gp=64,sce=65,ice=71,oce=4108,lce=4126,ra=80,O$=81,cce=[ra,O$],uce={1:{n:"CodePage",t:Fk},2:{n:"Category",t:ra},3:{n:"PresentationFormat",t:ra},4:{n:"ByteCount",t:Qa},5:{n:"LineCount",t:Qa},6:{n:"ParagraphCount",t:Qa},7:{n:"SlideCount",t:Qa},8:{n:"NoteCount",t:Qa},9:{n:"HiddenCount",t:Qa},10:{n:"MultimediaClipCount",t:Qa},11:{n:"ScaleCrop",t:mp},12:{n:"HeadingPairs",t:oce},13:{n:"TitlesOfParts",t:lce},14:{n:"Manager",t:ra},15:{n:"Company",t:ra},16:{n:"LinksUpToDate",t:mp},17:{n:"CharacterCount",t:Qa},19:{n:"SharedDoc",t:mp},22:{n:"HyperlinksChanged",t:mp},23:{n:"AppVersion",t:Qa,p:"version"},24:{n:"DigSig",t:sce},26:{n:"ContentType",t:ra},27:{n:"ContentStatus",t:ra},28:{n:"Language",t:ra},29:{n:"Version",t:ra},255:{},2147483648:{n:"Locale",t:Lm},2147483651:{n:"Behavior",t:Lm},1919054434:{}},dce={1:{n:"CodePage",t:Fk},2:{n:"Title",t:ra},3:{n:"Subject",t:ra},4:{n:"Author",t:ra},5:{n:"Keywords",t:ra},6:{n:"Comments",t:ra},7:{n:"Template",t:ra},8:{n:"LastAuthor",t:ra},9:{n:"RevNumber",t:ra},10:{n:"EditTime",t:gp},11:{n:"LastPrinted",t:gp},12:{n:"CreatedDate",t:gp},13:{n:"ModifiedDate",t:gp},14:{n:"PageCount",t:Qa},15:{n:"WordCount",t:Qa},16:{n:"CharCount",t:Qa},17:{n:"Thumbnail",t:ice},18:{n:"Application",t:ra},19:{n:"DocSecurity",t:Qa},255:{},2147483648:{n:"Locale",t:Lm},2147483651:{n:"Behavior",t:Lm},1919054434:{}},A6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},hce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function fce(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var pce=fce([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Vl=ga(pce),mc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},P$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},T6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function mce(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function gce(e){var t=mce();if(!e||!e.match)return t;var r={};if((e.match(Pa)||[]).forEach(function(n){var s=Qt(n);switch(s[0].replace(kle,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[T6[s.ContentType]]!==void 0&&t[T6[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Mle.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var lu={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UN(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function bh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Pa)||[]).forEach(function(s){var i=Qt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:sh(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}var xce="application/vnd.oasis.opendocument.spreadsheet";function yce(e,t){for(var r=Ck(e),n,s;n=jf.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Qt(n[0],!1),s.path=="/"&&s.type!==xce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var wh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],vce=(function(){for(var e=new Array(wh.length),t=0;t<wh.length;++t){var r=wh[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function I$(e){var t={};e=Jr(e);for(var r=0;r<wh.length;++r){var n=wh[r],s=e.match(vce[r]);s!=null&&s.length>0&&(t[n[1]]=_r(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=aa(t[n[1]]))}return t}var bce=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function D$(e,t,r,n){var s=[];if(typeof e=="string")s=v6(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?v6(t,n).map(function(f){return f.v}):t,l=0,u=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(u=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=u,r.SheetNames=o.slice(l,l+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=u,r.DefinedNames=o.slice(l,l+u);break;case"Charts":case"Diagramme":r.Chartsheets=u,r.ChartNames=o.slice(l,l+u);break}l+=u}}function wce(e,t,r){var n={};return t||(t={}),e=Jr(e),bce.forEach(function(s){var i=(e.match(wf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=_r(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&D$(n.HeadingPairs,n.TitlesOfParts,t,r),t}var jce=/<[^>]+>[^<]*/g;function Nce(e,t){var r={},n="",s=e.match(jce);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Qt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=_r(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),d=u[0].slice(4),f=u[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=_r(f);break;case"bool":r[n]=sn(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=aa(f);break;case"cy":case"error":r[n]=_r(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,u)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var kce={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},L1;function Sce(e,t,r){L1||(L1=Ek(kce)),t=L1[t]||t,e[t]=r}function $k(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function M$(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function R$(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function F$(e,t,r){return t===31?R$(e):M$(e,t,r)}function HN(e,t,r){return F$(e,t,r===!1?0:4)}function _ce(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return F$(e,t,0)}function Ece(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(qa,""),e.l-s&2&&(e.l+=2)}return r}function Ace(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(qa,"");return r}function Tce(e){var t=e.l,r=Bm(e,O$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Bm(e,Qa);return[r,n]}function Cce(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Tce(e));return r}function C6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(qa,"").replace(ah,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function $$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Oce(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Bm(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==E6&&n!==t&&cce.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===E6?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return M$(e,n,4).replace(qa,"");case 31:return R$(e);case 64:return $k(e);case 65:return $$(e);case 71:return Oce(e);case 80:return HN(e,n,!i.raw).replace(qa,"");case 81:return _ce(e,n).replace(qa,"");case 4108:return Cce(e);case 4126:case 4127:return n==4127?Ece(e):Ace(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function O6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,u=-1,d={};for(o=0;o!=s;++o){var f=e.read_shift(4),p=e.read_shift(4);i[o]=[f,p+r]}i.sort(function(N,w){return N[1]-w[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var x=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,x=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(x=!1,e.l=i[o][1]),x)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(m[v.n]=Bm(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:di(l=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(i[o][0]===1){if(l=m.CodePage=Bm(e,Fk),di(l),u!==-1){var y=e.l;e.l=i[u][1],d=C6(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){u=o,e.l=i[o+1][1];continue}d=C6(e,l)}else{var b=d[i[o][0]],k;switch(e[e.l]){case 65:e.l+=4,k=$$(e);break;case 30:e.l+=4,k=HN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,k=HN(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,k=e.read_shift(4,"i");break;case 19:e.l+=4,k=e.read_shift(4);break;case 5:e.l+=4,k=e.read_shift(8,"f");break;case 11:e.l+=4,k=bn(e,4);break;case 64:e.l+=4,k=aa($k(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=k}}return e.l=r+n,m}function P6(e,t,r){var n=e.content;if(!n)return{};ha(n,0);var s,i,o,l,u=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==Nr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),u=n.read_shift(4));var p=O6(n,t),m={SystemIdentifier:d};for(var x in p)m[x]=p[x];if(m.FMTID=i,s===1)return m;if(u-n.l==2&&(n.l+=2),n.l!==u)throw new Error("Length mismatch 2: "+n.l+" !== "+u);var v;try{v=O6(n,null)}catch{}for(x in v)m[x]=v[x];return m.FMTID=[i,o],m}function Uo(e,t){return e.read_shift(t),null}function Pce(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function bn(e,t){return e.read_shift(t)===1}function Tn(e){return e.read_shift(2,"u")}function L$(e,t){return Pce(e,t,Tn)}function Ice(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Uf(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function Dce(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,u={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function sc(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Hf(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):sc(e,n,r)}function gc(e,t,r){if(r.biff>5)return Hf(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Mce(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Rce(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(qa,"");return n&&(e.l+=24),s}function Fce(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(qa,"");return r+o}function $ce(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Rce(e);case"0303000000000000c000000000000046":return Fce(e);default:throw new Error("Unsupported Moniker "+r)}}function xp(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(qa,""):"";return r}function Lce(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,u,d="",f,p;s&16&&(i=xp(e,r-e.l)),s&128&&(o=xp(e,r-e.l)),(s&257)===257&&(l=xp(e,r-e.l)),(s&257)===1&&(u=$ce(e,r-e.l)),s&8&&(d=xp(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(p=$k(e)),e.l=r;var m=o||l||u||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var x={Target:m};return f&&(x.guid=f),p&&(x.time=p),i&&(x.Tooltip=i),x}function B$(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function U$(e,t){var r=B$(e);return r[3]=0,r}function Ui(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Bce(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Uce(e,t,r){return t===0?"":gc(e,t,r)}function Hce(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function H$(e){var t=e.read_shift(2),r=Rk(e);return[t,r]}function qce(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=Uf(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function Bg(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function q$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var zce=q$;function z$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Wce(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Kce(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ja(e){e.l+=2,e.l+=e.read_shift(2)}var Vce={0:ja,4:ja,5:ja,6:ja,7:Kce,8:ja,9:ja,10:ja,11:ja,12:ja,13:Wce,14:ja,15:ja,16:ja,17:ja,18:ja,19:ja,20:ja,21:z$};function Gce(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Vce[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function yp(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function Yce(e,t){return t===0||e.read_shift(2),1200}function Xce(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=gc(e,0,r);return e.read_shift(t+n-e.l),s}function Jce(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Qce(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Uf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function Zce(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Dce(e));return i.Count=n,i.Unique=s,i}function eue(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function tue(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function rue(e){var t=Bce(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function nue(e){return e.read_shift(2),e.read_shift(4)}function I6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function aue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:u,TabRatio:d}}function sue(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function iue(){}function oue(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Uf(e,0,r),n}function lue(e){var t=Ui(e);return t.isst=e.read_shift(4),t}function cue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ui(e);r.biff==2&&e.l++;var i=Hf(e,n-e.l,r);return s.val=i,s}function uue(e,t,r){var n=e.read_shift(2),s=gc(e,0,r);return[n,s]}var due=gc;function D6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),u=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c:u}}}function hue(e){var t=e.read_shift(2),r=e.read_shift(2),n=H$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function fue(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(H$(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function pue(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function mue(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),u=e.read_shift(2);return s.patternType=hce[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function gue(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=mue(e,t,n.fStyle,r),n}function xue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function M6(e,t,r){var n=Ui(e);(r.biff==2||t==9)&&++e.l;var s=Ice(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function yue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ui(e),s=Ea(e);return n.val=s,n}var R6=Uce;function vue(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=sc(e,i),l=[];n>e.l;)l.push(Hf(e));return[i,s,o,l]}function F6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=qce(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var bue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),u=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),u=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=sc(e,o,r);s&32&&(d=bue[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var p=n==e.l||l===0||!(f>0)?[]:t0e(e,f,r,l);return{chKey:i,Name:d,itab:u,rgce:p}}function W$(e,t,r){if(r.biff<8)return wue(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Hce(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function wue(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Uf(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function jue(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=sc(e,n,r),o=sc(e,s,r);return[i,o]}function Nue(e,t,r){var n=q$(e);e.l++;var s=e.read_shift(1);return t-=8,[r0e(e,t,r),s,n]}function L6(e,t,r){var n=zce(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Zfe(e,t,r)]}function kue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Sue(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=gc(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function _ue(e,t,r){return Sue(e,t,r)}function Eue(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(Bg(e));return r}function Aue(e,t,r){if(r&&r.biff<8)return Cue(e,t,r);var n=z$(e),s=Gce(e,t-22,n[1]);return{cmo:n,ft:s}}var Tue={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Cue(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Tue[n]||Oa)(e,t,r)),{cmo:[s,n,i],ft:o}}function Oue(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Mce(e,6,r);var l=e.read_shift(2);e.read_shift(2),Tn(e,2);var u=e.read_shift(2);e.l+=u;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],p=sc(e,e.lens[d+1]-e.lens[d]-1);if(s+=p,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Pue(e,t){var r=Bg(e);e.l+=16;var n=Lce(e,t-24);return[r,n]}function Iue(e,t){e.read_shift(2);var r=Bg(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(qa,""),[r,n]}function Due(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=A6[r]||r,r=e.read_shift(2),t[1]=A6[r]||r,t}function Mue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(U$(e));return r}function Rue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(U$(e));return r}function Fue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function K$(e,t,r){if(!r.cellStyles)return Oa(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),u=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:u};return(r.biff>=5||!r.biff)&&(d.level=u>>8&7),d}function $ue(e,t){var r={};return t<32||(e.l+=16,r.header=Ea(e),r.footer=Ea(e),e.l+=2),r}function Lue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}var Bue=Ui,Uue=L$,Hue=Hf;function que(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function zue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ui(e);++e.l;var s=gc(e,t-7,r);return n.t="str",n.val=s,n}function Wue(e){var t=Ui(e);++e.l;var r=Ea(e);return t.t="n",t.val=r,t}function Kue(e){var t=Ui(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Vue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Gue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Yue(e,t,r){var n=e.l+t,s=Ui(e),i=e.read_shift(2),o=sc(e,i,r);return e.l=n,s.t="str",s.val=o,s}var Xue=[2,3,48,49,131,139,140,245],B6=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Ek({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,u){var d=[],f=al(1);switch(u.type){case"base64":f=ui(Ns(l));break;case"binary":f=ui(l);break;case"buffer":case"array":f=l;break}ha(f,0);var p=f.read_shift(1),m=!!(p&136),x=!1,v=!1;switch(p){case 2:break;case 3:break;case 48:x=!0,m=!0;break;case 49:x=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,b=521;p==2&&(y=f.read_shift(2)),f.l+=3,p!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(b=f.read_shift(2));var k=f.read_shift(2),N=u.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(N=e[f[f.l]]),f.l+=1,f.l+=2),v&&(f.l+=36);for(var w=[],T={},E=Math.min(f.length,p==2?521:b-10-(x?264:0)),S=v?32:11;f.l<E&&f[f.l]!=13;)switch(T={},T.name=vf.utils.decode(N,f.slice(f.l,f.l+S)).replace(/[\u0000\r\n].*$/g,""),f.l+=S,T.type=String.fromCharCode(f.read_shift(1)),p!=2&&!v&&(T.offset=f.read_shift(4)),T.len=f.read_shift(1),p==2&&(T.offset=f.read_shift(2)),T.dec=f.read_shift(1),T.name.length&&w.push(T),p!=2&&(f.l+=v?13:14),T.type){case"B":(!x||T.len!=8)&&u.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(f[f.l]!==13&&(f.l=b-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=b;var _=0,A=0;for(d[0]=[],A=0;A!=w.length;++A)d[0][A]=w[A].name;for(;y-- >0;){if(f[f.l]===42){f.l+=k;continue}for(++f.l,d[++_]=[],A=0,A=0;A!=w.length;++A){var P=f.slice(f.l,f.l+w[A].len);f.l+=w[A].len,ha(P,0);var B=vf.utils.decode(N,P);switch(w[A].type){case"C":B.trim().length&&(d[_][A]=B.replace(/\s+$/,""));break;case"D":B.length===8?d[_][A]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):d[_][A]=B;break;case"F":d[_][A]=parseFloat(B.trim());break;case"+":case"I":d[_][A]=v?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":d[_][A]=!0;break;case"N":case"F":d[_][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[_][A]="##MEMO##"+(v?parseInt(B.trim(),10):P.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(d[_][A]=+B||0);break;case"@":d[_][A]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":d[_][A]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":d[_][A]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[_][A]=-P.read_shift(-8,"f");break;case"B":if(x&&w[A].len==8){d[_][A]=P.read_shift(8,"f");break}case"G":case"P":P.l+=w[A].len;break;case"0":if(w[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[A].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return u&&u.sheetRows&&(d=d.slice(0,u.sheetRows)),u.DBF=w,d}function n(l,u){var d=u||{};d.dateNF||(d.dateNF="yyyymmdd");var f=od(r(l,d),d);return f["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,f}function s(l,u){try{return dl(n(l,u),u)}catch(d){if(u&&u.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var d=u||{};if(+d.codepage>=0&&di(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=LN(),p=YN(l,{header:1,raw:!0,cellDates:!0}),m=p[0],x=p.slice(1),v=l["!cols"]||[],y=0,b=0,k=0,N=1;for(y=0;y<m.length;++y){if(((v[y]||{}).DBF||{}).name){m[y]=v[y].DBF.name,++k;continue}if(m[y]!=null){if(++k,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(b=0;b<1024;++b)if(m.indexOf(m[y]+"_"+b)==-1){m[y]+="_"+b;break}}}}var w=yn(l["!ref"]),T=[],E=[],S=[];for(y=0;y<=w.e.c-w.s.c;++y){var _="",A="",P=0,B=[];for(b=0;b<x.length;++b)x[b][y]!=null&&B.push(x[b][y]);if(B.length==0||m[y]==null){T[y]="?";continue}for(b=0;b<B.length;++b){switch(typeof B[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=B[b]instanceof Date?"D":"C";break;default:A="C"}P=Math.max(P,String(B[b]).length),_=_&&_!=A?"C":A}P>250&&(P=250),A=((v[y]||{}).DBF||{}).type,A=="C"&&v[y].DBF.len>P&&(P=v[y].DBF.len),_=="B"&&A=="N"&&(_="N",S[y]=v[y].DBF.dec,P=v[y].DBF.len),E[y]=_=="C"||A=="N"?P:i[_]||0,N+=E[y],T[y]=_}var I=f.next(32);for(I.write_shift(4,318902576),I.write_shift(4,x.length),I.write_shift(2,296+32*k),I.write_shift(2,N),y=0;y<4;++y)I.write_shift(4,0);for(I.write_shift(4,0|(+t[WF]||3)<<8),y=0,b=0;y<m.length;++y)if(m[y]!=null){var O=f.next(32),L=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,L,"sbcs"),O.write_shift(1,T[y]=="?"?"C":T[y],"sbcs"),O.write_shift(4,b),O.write_shift(1,E[y]||i[T[y]]||0),O.write_shift(1,S[y]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=E[y]||i[T[y]]||0}var X=f.next(264);for(X.write_shift(4,13),y=0;y<65;++y)X.write_shift(4,0);for(y=0;y<x.length;++y){var U=f.next(N);for(U.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(T[b]){case"L":U.write_shift(1,x[y][b]==null?63:x[y][b]?84:70);break;case"B":U.write_shift(8,x[y][b]||0,"f");break;case"N":var V="0";for(typeof x[y][b]=="number"&&(V=x[y][b].toFixed(S[b]||0)),k=0;k<E[b]-V.length;++k)U.write_shift(1,32);U.write_shift(1,V,"sbcs");break;case"D":x[y][b]?(U.write_shift(4,("0000"+x[y][b].getFullYear()).slice(-4),"sbcs"),U.write_shift(2,("00"+(x[y][b].getMonth()+1)).slice(-2),"sbcs"),U.write_shift(2,("00"+x[y][b].getDate()).slice(-2),"sbcs")):U.write_shift(8,"00000000","sbcs");break;case"C":var ne=String(x[y][b]!=null?x[y][b]:"").slice(0,E[b]);for(U.write_shift(1,ne,"sbcs"),k=0;k<E[b]-ne.length;++k)U.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),Jue=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ri(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,x){var v=e[x];return typeof v=="number"?r6(v):v},n=function(m,x,v){var y=x.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?m:r6(y)};e["|"]=254;function s(m,x){switch(x.type){case"base64":return i(Ns(m),x);case"binary":return i(m,x);case"buffer":return i(wr&&Buffer.isBuffer(m)?m.toString("binary"):hc(m),x);case"array":return i(ac(m),x)}throw new Error("Unrecognized type "+x.type)}function i(m,x){var v=m.split(/[\n\r]+/),y=-1,b=-1,k=0,N=0,w=[],T=[],E=null,S={},_=[],A=[],P=[],B=0,I;for(+x.codepage>=0&&di(+x.codepage);k!==v.length;++k){B=0;var O=v[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=O.replace(/;;/g,"\0").split(";").map(function(ie){return ie.replace(/\u0000/g,";")}),X=L[0],U;if(O.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&T.push(O.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,ne=!1,ee=!1,R=!1,se=-1,z=-1;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"A":break;case"X":b=parseInt(L[N].slice(1))-1,ne=!0;break;case"Y":for(y=parseInt(L[N].slice(1))-1,ne||(b=0),I=w.length;I<=y;++I)w[I]=[];break;case"K":U=L[N].slice(1),U.charAt(0)==='"'?U=U.slice(1,U.length-1):U==="TRUE"?U=!0:U==="FALSE"?U=!1:isNaN(gi(U))?isNaN(qu(U).getDate())||(U=aa(U)):(U=gi(U),E!==null&&sd(E)&&(U=Lg(U))),V=!0;break;case"E":R=!0;var M=mu(L[N].slice(1),{r:y,c:b});w[y][b]=[w[y][b],M];break;case"S":ee=!0,w[y][b]=[w[y][b],"S5S"];break;case"G":break;case"R":se=parseInt(L[N].slice(1))-1;break;case"C":z=parseInt(L[N].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}if(V&&(w[y][b]&&w[y][b].length==2?w[y][b][0]=U:w[y][b]=U,E=null),ee){if(R)throw new Error("SYLK shared formula cannot have own formula");var J=se>-1&&w[se][z];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");w[y][b][1]=r8(J[1],{r:y-se,c:b-z})}break;case"F":var te=0;for(N=1;N<L.length;++N)switch(L[N].charAt(0)){case"X":b=parseInt(L[N].slice(1))-1,++te;break;case"Y":for(y=parseInt(L[N].slice(1))-1,I=w.length;I<=y;++I)w[I]=[];break;case"M":B=parseInt(L[N].slice(1))/20;break;case"F":break;case"G":break;case"P":E=T[parseInt(L[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=L[N].slice(1).split(" "),I=parseInt(P[0],10);I<=parseInt(P[1],10);++I)B=parseInt(P[2],10),A[I-1]=B===0?{hidden:!0}:{wch:B},zu(A[I-1]);break;case"C":b=parseInt(L[N].slice(1))-1,A[b]||(A[b]={});break;case"R":y=parseInt(L[N].slice(1))-1,_[y]||(_[y]={}),B>0?(_[y].hpt=B,_[y].hpx=Sf(B)):B===0&&(_[y].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}te<1&&(E=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}}return _.length>0&&(S["!rows"]=_),A.length>0&&(S["!cols"]=A),x&&x.sheetRows&&(w=w.slice(0,x.sheetRows)),[w,S]}function o(m,x){var v=s(m,x),y=v[0],b=v[1],k=od(y,x);return Ri(b).forEach(function(N){k[N]=b[N]}),k}function l(m,x){return dl(o(m,x),x)}function u(m,x,v,y){var b="C;Y"+(v+1)+";X"+(y+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+Fhe(m.f,{r:v,c:y}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(m,x){x.forEach(function(v,y){var b="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Hm(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=qm(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function f(m,x){x.forEach(function(v,y){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*Z$(v.hpx)+";"),b.length>2&&m.push(b+"R"+(y+1))})}function p(m,x){var v=["ID;PWXL;N;E"],y=[],b=yn(m["!ref"]),k,N=Array.isArray(m),w=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&d(v,m["!cols"]),m["!rows"]&&f(v,m["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var T=b.s.r;T<=b.e.r;++T)for(var E=b.s.c;E<=b.e.c;++E){var S=or({r:T,c:E});k=N?(m[T]||[])[E]:m[S],!(!k||k.v==null&&(!k.f||k.F))&&y.push(u(k,m,T,E))}return v.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:p}})(),Que=(function(){function e(i,o){switch(o.type){case"base64":return t(Ns(i),o);case"binary":return t(i,o);case"buffer":return t(wr&&Buffer.isBuffer(i)?i.toString("binary"):hc(i),o);case"array":return t(ac(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),u=-1,d=-1,f=0,p=[];f!==l.length;++f){if(l[f].trim()==="BOT"){p[++u]=[],d=0;continue}if(!(u<0)){var m=l[f].trim().split(","),x=m[0],v=m[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+x){case-1:if(y==="BOT"){p[++u]=[],d=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[u][d]=!0:y==="FALSE"?p[u][d]=!1:isNaN(gi(v))?isNaN(qu(v).getDate())?p[u][d]=v:p[u][d]=aa(v):p[u][d]=gi(v),++d;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[u][d++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(p=p.slice(0,o.sheetRows)),p}function r(i,o){return od(e(i,o),o)}function n(i,o){return dl(r(i,o),o)}var s=(function(){var i=function(u,d,f,p,m){u.push(d),u.push(f+","+p),u.push('"'+m.replace(/"/g,'""')+'"')},o=function(u,d,f,p){u.push(d+","+f),u.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(u){var d=[],f=yn(u["!ref"]),p,m=Array.isArray(u);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,f.e.r-f.s.r+1,""),i(d,"TUPLES",0,f.e.c-f.s.c+1,""),i(d,"DATA",0,0,"");for(var x=f.s.r;x<=f.e.r;++x){o(d,-1,0,"BOT");for(var v=f.s.c;v<=f.e.c;++v){var y=or({r:x,c:v});if(p=m?(u[x]||[])[v]:u[y],!p){o(d,1,0,"");continue}switch(p.t){case"n":var b=p.w;!b&&p.v!=null&&(b=p.v),b==null?p.f&&!p.F?o(d,1,0,"="+p.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Us(p.z||ur[14],za(aa(p.v)))),o(d,0,p.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var k=`\r
`,N=d.join(k);return N}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),Zue=(function(){function e(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,m){for(var x=p.split(`
`),v=-1,y=-1,b=0,k=[];b!==x.length;++b){var N=x[b].trim().split(":");if(N[0]==="cell"){var w=Ha(N[1]);if(k.length<=w.r)for(v=k.length;v<=w.r;++v)k[v]||(k[v]=[]);switch(v=w.r,y=w.c,N[2]){case"t":k[v][y]=e(N[3]);break;case"v":k[v][y]=+N[3];break;case"vtf":var T=N[N.length-1];case"vtc":switch(N[3]){case"nl":k[v][y]=!!+N[4];break;default:k[v][y]=+N[4];break}N[2]=="vtf"&&(k[v][y]=[k[v][y],T])}}}return m&&m.sheetRows&&(k=k.slice(0,m.sheetRows)),k}function n(p,m){return od(r(p,m),m)}function s(p,m){return dl(n(p,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var m=[],x=[],v,y="",b=id(p["!ref"]),k=Array.isArray(p),N=b.s.r;N<=b.e.r;++N)for(var w=b.s.c;w<=b.e.c;++w)if(y=or({r:N,c:w}),v=k?(p[N]||[])[w]:p[y],!(!v||v.v==null||v.t==="z")){switch(x=["cell",y,"t"],v.t){case"s":case"str":x.push(t(v.v));break;case"n":v.f?(x[2]="vtf",x[3]="n",x[4]=v.v,x[5]=t(v.f)):(x[2]="v",x[3]=v.v);break;case"b":x[2]="vt"+(v.f?"f":"c"),x[3]="nl",x[4]=v.v?"1":"0",x[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var T=za(aa(v.v));x[2]="vtc",x[3]="nd",x[4]=""+T,x[5]=v.w||Us(v.z||ur[14],T);break;case"e":continue}m.push(x.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(p){return[i,o,l,o,d(p),u].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),Nf=(function(){function e(f,p,m,x,v){v.raw?p[m][x]=f:f===""||(f==="TRUE"?p[m][x]=!0:f==="FALSE"?p[m][x]=!1:isNaN(gi(f))?isNaN(qu(f).getDate())?p[m][x]=f:p[m][x]=aa(f):p[m][x]=gi(f))}function t(f,p){var m=p||{},x=[];if(!f||f.length===0)return x;for(var v=f.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var b=10,k=0,N=0;N<=y;++N)k=v[N].indexOf(" "),k==-1?k=v[N].length:k++,b=Math.max(b,k);for(N=0;N<=y;++N){x[N]=[];var w=0;for(e(v[N].slice(0,b).trim(),x,N,w,m),w=1;w<=(v[N].length-b)/10+1;++w)e(v[N].slice(b+(w-1)*10,b+w*10).trim(),x,N,w,m)}return m.sheetRows&&(x=x.slice(0,m.sheetRows)),x}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var p={},m=!1,x=0,v=0;x<f.length;++x)(v=f.charCodeAt(x))==34?m=!m:!m&&v in r&&(p[v]=(p[v]||0)+1);v=[];for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.push([p[x],x]);if(!v.length){p=n;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.push([p[x],x])}return v.sort(function(y,b){return y[0]-b[0]||n[y[1]]-n[b[1]]}),r[v.pop()[1]]||44}function i(f,p){var m=p||{},x="",v=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(x=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(x=f.charAt(4),f=f.slice(6)):x=s(f.slice(0,1024)):m&&m.FS?x=m.FS:x=s(f.slice(0,1024));var b=0,k=0,N=0,w=0,T=0,E=x.charCodeAt(0),S=!1,_=0,A=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var P=m.dateNF!=null?ule(m.dateNF):null;function B(){var I=f.slice(w,T),O={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)O.t="z";else if(m.raw)O.t="s",O.v=I;else if(I.trim().length===0)O.t="s",O.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(O.t="s",O.v=I.slice(2,-1).replace(/""/g,'"')):Lhe(I)?(O.t="n",O.f=I.slice(1)):(O.t="s",O.v=I);else if(I=="TRUE")O.t="b",O.v=!0;else if(I=="FALSE")O.t="b",O.v=!1;else if(!isNaN(N=gi(I)))O.t="n",m.cellText!==!1&&(O.w=I),O.v=N;else if(!isNaN(qu(I).getDate())||P&&I.match(P)){O.z=m.dateNF||ur[14];var L=0;P&&I.match(P)&&(I=dle(I,m.dateNF,I.match(P)||[]),L=1),m.cellDates?(O.t="d",O.v=aa(I,L)):(O.t="n",O.v=za(aa(I,L))),m.cellText!==!1&&(O.w=Us(O.z,O.v instanceof Date?za(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=I;if(O.t=="z"||(m.dense?(v[b]||(v[b]=[]),v[b][k]=O):v[or({c:k,r:b})]=O),w=T+1,A=f.charCodeAt(w),y.e.c<k&&(y.e.c=k),y.e.r<b&&(y.e.r=b),_==E)++k;else if(k=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;T<f.length;++T)switch(_=f.charCodeAt(T)){case 34:A===34&&(S=!S);break;case E:case 10:case 13:if(!S&&B())break e;break}return T-w>0&&B(),v["!ref"]=kr(y),v}function o(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):od(t(f,p),p)}function l(f,p){var m="",x=p.type=="string"?[0,0,0,0]:Kk(f,p);switch(p.type){case"base64":m=Ns(f);break;case"binary":m=f;break;case"buffer":p.codepage==65001?m=f.toString("utf8"):p.codepage&&typeof vf<"u"||(m=wr&&Buffer.isBuffer(f)?f.toString("binary"):hc(f));break;case"array":m=ac(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+p.type)}return x[0]==239&&x[1]==187&&x[2]==191?m=Jr(m.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?m=Jr(m):p.type=="binary"&&typeof vf<"u",m.slice(0,19)=="socialcalc:version:"?Zue.to_sheet(p.type=="string"?m:Jr(m),p):o(m,p)}function u(f,p){return dl(l(f,p),p)}function d(f){for(var p=[],m=yn(f["!ref"]),x,v=Array.isArray(f),y=m.s.r;y<=m.e.r;++y){for(var b=[],k=m.s.c;k<=m.e.c;++k){var N=or({r:y,c:k});if(x=v?(f[y]||[])[k]:f[N],!x||x.v==null){b.push("          ");continue}for(var w=(x.w||(vo(x),x.w)||"").slice(0,10);w.length<10;)w+=" ";b.push(w+(k===0?" ":""))}p.push(b.join(""))}return p.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:d}})();function ede(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=Jue.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Nf.to_workbook(e,t)}}var jh=(function(){function e(M,J,te){if(M){ha(M,M.l||0);for(var ie=te.Enum||se;M.l<M.length;){var me=M.read_shift(2),ve=ie[me]||ie[65535],ye=M.read_shift(2),he=M.l+ye,pe=ve.f&&ve.f(M,ye,te);if(M.l=he,J(pe,ve,me))return}}}function t(M,J){switch(J.type){case"base64":return r(ui(Ns(M)),J);case"binary":return r(ui(M),J);case"buffer":case"array":return r(M,J)}throw"Unsupported type "+J.type}function r(M,J){if(!M)return M;var te=J||{},ie=te.dense?[]:{},me="Sheet1",ve="",ye=0,he={},pe=[],De=[],q={s:{r:0,c:0},e:{r:0,c:0}},Ae=te.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)te.Enum=se,e(M,function(Ee,Ce,$e){switch($e){case 0:te.vers=Ee,Ee>=4096&&(te.qpro=!0);break;case 6:q=Ee;break;case 204:Ee&&(ve=Ee);break;case 222:ve=Ee;break;case 15:case 51:te.qpro||(Ee[1].v=Ee[1].v.slice(1));case 13:case 14:case 16:$e==14&&(Ee[2]&112)==112&&(Ee[2]&15)>1&&(Ee[2]&15)<15&&(Ee[1].z=te.dateNF||ur[14],te.cellDates&&(Ee[1].t="d",Ee[1].v=Lg(Ee[1].v))),te.qpro&&Ee[3]>ye&&(ie["!ref"]=kr(q),he[me]=ie,pe.push(me),ie=te.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},ye=Ee[3],me=ve||"Sheet"+(ye+1),ve="");var Nt=te.dense?(ie[Ee[0].r]||[])[Ee[0].c]:ie[or(Ee[0])];if(Nt){Nt.t=Ee[1].t,Nt.v=Ee[1].v,Ee[1].z!=null&&(Nt.z=Ee[1].z),Ee[1].f!=null&&(Nt.f=Ee[1].f);break}te.dense?(ie[Ee[0].r]||(ie[Ee[0].r]=[]),ie[Ee[0].r][Ee[0].c]=Ee[1]):ie[or(Ee[0])]=Ee[1];break}},te);else if(M[2]==26||M[2]==14)te.Enum=z,M[2]==14&&(te.qpro=!0,M.l=0),e(M,function(Ee,Ce,$e){switch($e){case 204:me=Ee;break;case 22:Ee[1].v=Ee[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ee[3]>ye&&(ie["!ref"]=kr(q),he[me]=ie,pe.push(me),ie=te.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},ye=Ee[3],me="Sheet"+(ye+1)),Ae>0&&Ee[0].r>=Ae)break;te.dense?(ie[Ee[0].r]||(ie[Ee[0].r]=[]),ie[Ee[0].r][Ee[0].c]=Ee[1]):ie[or(Ee[0])]=Ee[1],q.e.c<Ee[0].c&&(q.e.c=Ee[0].c),q.e.r<Ee[0].r&&(q.e.r=Ee[0].r);break;case 27:Ee[14e3]&&(De[Ee[14e3][0]]=Ee[14e3][1]);break;case 1537:De[Ee[0]]=Ee[1],Ee[0]==ye&&(me=Ee[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(ie["!ref"]=kr(q),he[ve||me]=ie,pe.push(ve||me),!De.length)return{SheetNames:pe,Sheets:he};for(var Be={},xt=[],le=0;le<De.length;++le)he[pe[le]]?(xt.push(De[le]||pe[le]),Be[De[le]]=he[De[le]]||he[pe[le]]):(xt.push(De[le]),Be[De[le]]={"!ref":"A1"});return{SheetNames:xt,Sheets:Be}}function n(M,J){var te=J||{};if(+te.codepage>=0&&di(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var ie=LN(),me=yn(M["!ref"]),ve=Array.isArray(M),ye=[];ei(ie,0,i(1030)),ei(ie,6,u(me));for(var he=Math.min(me.e.r,8191),pe=me.s.r;pe<=he;++pe)for(var De=xa(pe),q=me.s.c;q<=me.e.c;++q){pe===me.s.r&&(ye[q]=Wn(q));var Ae=ye[q]+De,Be=ve?(M[pe]||[])[q]:M[Ae];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?ei(ie,13,x(pe,q,Be.v)):ei(ie,14,y(pe,q,Be.v));else{var xt=vo(Be);ei(ie,15,p(pe,q,xt.slice(0,239)))}}return ei(ie,1),ie.end()}function s(M,J){var te=J||{};if(+te.codepage>=0&&di(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var ie=LN();ei(ie,0,o(M));for(var me=0,ve=0;me<M.SheetNames.length;++me)(M.Sheets[M.SheetNames[me]]||{})["!ref"]&&ei(ie,27,R(M.SheetNames[me],ve++));var ye=0;for(me=0;me<M.SheetNames.length;++me){var he=M.Sheets[M.SheetNames[me]];if(!(!he||!he["!ref"])){for(var pe=yn(he["!ref"]),De=Array.isArray(he),q=[],Ae=Math.min(pe.e.r,8191),Be=pe.s.r;Be<=Ae;++Be)for(var xt=xa(Be),le=pe.s.c;le<=pe.e.c;++le){Be===pe.s.r&&(q[le]=Wn(le));var Ee=q[le]+xt,Ce=De?(he[Be]||[])[le]:he[Ee];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")ei(ie,23,B(Be,le,ye,Ce.v));else{var $e=vo(Ce);ei(ie,22,_(Be,le,ye,$e.slice(0,239)))}}++ye}}return ei(ie,1),ie.end()}function i(M){var J=Hn(2);return J.write_shift(2,M),J}function o(M){var J=Hn(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var te=0,ie=0,me=0,ve=0;ve<M.SheetNames.length;++ve){var ye=M.SheetNames[ve],he=M.Sheets[ye];if(!(!he||!he["!ref"])){++me;var pe=id(he["!ref"]);te<pe.e.r&&(te=pe.e.r),ie<pe.e.c&&(ie=pe.e.c)}}return te>8191&&(te=8191),J.write_shift(2,te),J.write_shift(1,me),J.write_shift(1,ie),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function l(M,J,te){var ie={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&te.qpro?(ie.s.c=M.read_shift(1),M.l++,ie.s.r=M.read_shift(2),ie.e.c=M.read_shift(1),M.l++,ie.e.r=M.read_shift(2),ie):(ie.s.c=M.read_shift(2),ie.s.r=M.read_shift(2),J==12&&te.qpro&&(M.l+=2),ie.e.c=M.read_shift(2),ie.e.r=M.read_shift(2),J==12&&te.qpro&&(M.l+=2),ie.s.c==65535&&(ie.s.c=ie.e.c=ie.s.r=ie.e.r=0),ie)}function u(M){var J=Hn(8);return J.write_shift(2,M.s.c),J.write_shift(2,M.s.r),J.write_shift(2,M.e.c),J.write_shift(2,M.e.r),J}function d(M,J,te){var ie=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(ie[0].c=M.read_shift(1),ie[3]=M.read_shift(1),ie[0].r=M.read_shift(2),M.l+=2):(ie[2]=M.read_shift(1),ie[0].c=M.read_shift(2),ie[0].r=M.read_shift(2)),ie}function f(M,J,te){var ie=M.l+J,me=d(M,J,te);if(me[1].t="s",te.vers==20768){M.l++;var ve=M.read_shift(1);return me[1].v=M.read_shift(ve,"utf8"),me}return te.qpro&&M.l++,me[1].v=M.read_shift(ie-M.l,"cstr"),me}function p(M,J,te){var ie=Hn(7+te.length);ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,M),ie.write_shift(1,39);for(var me=0;me<ie.length;++me){var ve=te.charCodeAt(me);ie.write_shift(1,ve>=128?95:ve)}return ie.write_shift(1,0),ie}function m(M,J,te){var ie=d(M,J,te);return ie[1].v=M.read_shift(2,"i"),ie}function x(M,J,te){var ie=Hn(7);return ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,M),ie.write_shift(2,te,"i"),ie}function v(M,J,te){var ie=d(M,J,te);return ie[1].v=M.read_shift(8,"f"),ie}function y(M,J,te){var ie=Hn(13);return ie.write_shift(1,255),ie.write_shift(2,J),ie.write_shift(2,M),ie.write_shift(8,te,"f"),ie}function b(M,J,te){var ie=M.l+J,me=d(M,J,te);if(me[1].v=M.read_shift(8,"f"),te.qpro)M.l=ie;else{var ve=M.read_shift(2);T(M.slice(M.l,M.l+ve),me),M.l+=ve}return me}function k(M,J,te){var ie=J&32768;return J&=-32769,J=(ie?M:0)+(J>=8192?J-16384:J),(ie?"":"$")+(te?Wn(J):xa(J))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(M,J){ha(M,0);for(var te=[],ie=0,me="",ve="",ye="",he="";M.l<M.length;){var pe=M[M.l++];switch(pe){case 0:te.push(M.read_shift(8,"f"));break;case 1:ve=k(J[0].c,M.read_shift(2),!0),me=k(J[0].r,M.read_shift(2),!1),te.push(ve+me);break;case 2:{var De=k(J[0].c,M.read_shift(2),!0),q=k(J[0].r,M.read_shift(2),!1);ve=k(J[0].c,M.read_shift(2),!0),me=k(J[0].r,M.read_shift(2),!1),te.push(De+q+":"+ve+me)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(M.read_shift(2));break;case 6:{for(var Ae="";pe=M[M.l++];)Ae+=String.fromCharCode(pe);te.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:he=te.pop(),ye=te.pop(),te.push(["AND","OR"][pe-20]+"("+ye+","+he+")");break;default:if(pe<32&&w[pe])he=te.pop(),ye=te.pop(),te.push(ye+w[pe]+he);else if(N[pe]){if(ie=N[pe][1],ie==69&&(ie=M[M.l++]),ie>te.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+te.join("|")+"|");return}var Be=te.slice(-ie);te.length-=ie,te.push(N[pe][0]+"("+Be.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}te.length==1?J[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function E(M){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=M.read_shift(2),J[3]=M[M.l++],J[0].c=M[M.l++],J}function S(M,J){var te=E(M);return te[1].t="s",te[1].v=M.read_shift(J-4,"cstr"),te}function _(M,J,te,ie){var me=Hn(6+ie.length);me.write_shift(2,M),me.write_shift(1,te),me.write_shift(1,J),me.write_shift(1,39);for(var ve=0;ve<ie.length;++ve){var ye=ie.charCodeAt(ve);me.write_shift(1,ye>=128?95:ye)}return me.write_shift(1,0),me}function A(M,J){var te=E(M);te[1].v=M.read_shift(2);var ie=te[1].v>>1;if(te[1].v&1)switch(ie&7){case 0:ie=(ie>>3)*5e3;break;case 1:ie=(ie>>3)*500;break;case 2:ie=(ie>>3)/20;break;case 3:ie=(ie>>3)/200;break;case 4:ie=(ie>>3)/2e3;break;case 5:ie=(ie>>3)/2e4;break;case 6:ie=(ie>>3)/16;break;case 7:ie=(ie>>3)/64;break}return te[1].v=ie,te}function P(M,J){var te=E(M),ie=M.read_shift(4),me=M.read_shift(4),ve=M.read_shift(2);if(ve==65535)return ie===0&&me===3221225472?(te[1].t="e",te[1].v=15):ie===0&&me===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var ye=ve&32768;return ve=(ve&32767)-16446,te[1].v=(1-ye*2)*(me*Math.pow(2,ve+32)+ie*Math.pow(2,ve)),te}function B(M,J,te,ie){var me=Hn(14);if(me.write_shift(2,M),me.write_shift(1,te),me.write_shift(1,J),ie==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var ve=0,ye=0,he=0,pe=0;return ie<0&&(ve=1,ie=-ie),ye=Math.log2(ie)|0,ie/=Math.pow(2,ye-31),pe=ie>>>0,(pe&2147483648)==0&&(ie/=2,++ye,pe=ie>>>0),ie-=pe,pe|=2147483648,pe>>>=0,ie*=Math.pow(2,32),he=ie>>>0,me.write_shift(4,he),me.write_shift(4,pe),ye+=16383+(ve?32768:0),me.write_shift(2,ye),me}function I(M,J){var te=P(M);return M.l+=J-14,te}function O(M,J){var te=E(M),ie=M.read_shift(4);return te[1].v=ie>>6,te}function L(M,J){var te=E(M),ie=M.read_shift(8,"f");return te[1].v=ie,te}function X(M,J){var te=L(M);return M.l+=J-10,te}function U(M,J){return M[M.l+J-1]==0?M.read_shift(J,"cstr"):""}function V(M,J){var te=M[M.l++];te>J-1&&(te=J-1);for(var ie="";ie.length<te;)ie+=String.fromCharCode(M[M.l++]);return ie}function ne(M,J,te){if(!(!te.qpro||J<21)){var ie=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var me=M.read_shift(J-21,"cstr");return[ie,me]}}function ee(M,J){for(var te={},ie=M.l+J;M.l<ie;){var me=M.read_shift(2);if(me==14e3){for(te[me]=[0,""],te[me][0]=M.read_shift(2);M[M.l];)te[me][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return te}function R(M,J){var te=Hn(5+M.length);te.write_shift(2,14e3),te.write_shift(2,J);for(var ie=0;ie<M.length;++ie){var me=M.charCodeAt(ie);te[te.l++]=me>127?95:me}return te[te.l++]=0,te}var se={0:{n:"BOF",f:Tn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:U},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ee},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:U},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function tde(e){var t={},r=e.match(Pa),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Qt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=jk[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var rde=(function(){var e=wf("t"),t=wf("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:_r(o[1])},u=i.match(t);return u&&(l.s=tde(u[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),nde=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(i.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),ade=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sde=/<(?:\w+:)?r>/,ide=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Lk(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=_r(Jr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Jr(e),r&&(n.h=Tk(n.t))):e.match(sde)&&(n.r=Jr(e),n.t=_r(Jr((e.replace(ide,"").match(ade)||[]).join("").replace(Pa,""))),r&&(n.h=nde(rde(n.r)))),n):{t:""}}var ode=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,lde=/<(?:\w+:)?(?:si|sstItem)>/g,cde=/<\/(?:\w+:)?(?:si|sstItem)>/;function ude(e,t){var r=[],n="";if(!e)return r;var s=e.match(ode);if(s){n=s[2].replace(lde,"").split(cde);for(var i=0;i!=n.length;++i){var o=Lk(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=Qt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function dde(e){return[e.read_shift(4),e.read_shift(4)]}function hde(e,t){var r=[],n=!1;return ko(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function V$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function po(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function fde(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=po(e,4),t.U=po(e,4),t.W=po(e,4),t}function pde(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function mde(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(pde(e));return t}function gde(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function xde(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=po(e,4),t.U=po(e,4),t.W=po(e,4),t}function yde(e){var t=xde(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function G$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Y$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function vde(e){var t=po(e);switch(t.Minor){case 2:return[t.Minor,bde(e)];case 3:return[t.Minor,wde()];case 4:return[t.Minor,jde(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function bde(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=G$(e,r),s=Y$(e,e.length-e.l);return{t:"Std",h:n,v:s}}function wde(){throw new Error("File is password-protected: ECMA-376 Extensible")}function jde(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Pa,function(i){var o=Qt(i);switch(Bi(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Nde(e,t){var r={},n=r.EncryptionVersionInfo=po(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=G$(e,s),t-=s,r.EncryptionVerifier=Y$(e,t),r}function kde(e){var t={},r=t.EncryptionVersionInfo=po(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function Sde(e){var t=0,r,n=V$(e),s=n.length+1,i,o,l,u,d;for(r=al(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,u=t<<1&32767,d=l|u,t=d^o;return t^52811}var X$=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],u=104,d=o.length-1;d>=0;--d)for(var f=o[d],p=0;p!=7;++p)f&64&&(l^=r[u]),f*=2,--u;return l};return function(o){for(var l=V$(o),u=i(l),d=l.length,f=al(16),p=0;p!=16;++p)f[p]=0;var m,x,v;for((d&1)===1&&(m=u>>8,f[d]=s(e[0],m),--d,m=u&255,x=l[l.length-1],f[d]=s(x,m));d>0;)--d,m=u>>8,f[d]=s(l[d],m),--d,m=u&255,f[d]=s(l[d],m);for(d=15,v=15-l.length;v>0;)m=u>>8,f[d]=s(e[v],m),--d,--v,m=u&255,f[d]=s(l[d],m),--d,--v;return f}})(),_de=function(e,t,r,n,s){s||(s=t),n||(n=X$(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},Ede=function(e){var t=0,r=X$(e);return function(n){var s=_de("",n,t,r);return t=s[1],s[0]}};function Ade(e,t,r,n){var s={key:Tn(e),verificationBytes:Tn(e)};return r.password&&(s.verifier=Sde(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Ede(r.password)),s}function Tde(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=kde(e):n.Data=Nde(e,t),n}function Cde(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Tde(e,t-2,n):Ade(e,r.biff>=8?t:t-2,r,n),n}var Ode=(function(){function e(s,i){switch(i.type){case"base64":return t(Ns(s),i);case"binary":return t(s,i);case"buffer":return t(wr&&Buffer.isBuffer(s)?s.toString("binary"):hc(s),i);case"array":return t(ac(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(f,p){Array.isArray(l)&&(l[p]=[]);for(var m=/\\\w+\b/g,x=0,v,y=-1;v=m.exec(f);){switch(v[0]){case"\\cell":var b=f.slice(x,m.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var k={v:b,t:"s"};Array.isArray(l)?l[p][y]=k:l[or({r:p,c:y})]=k}break}x=m.lastIndex}y>d.e.c&&(d.e.c=y)}),l["!ref"]=kr(d),l}function r(s,i){return dl(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=yn(s["!ref"]),l,u=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var p=or({r:d,c:f});l=u?(s[d]||[])[f]:s[p],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(vo(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Pde(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function kf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Ide(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,u=0,d=s+i;switch(u=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,u,d/2]}function Dde(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,u;if(r!==0)switch(l|0){case 0:case 6:u=s*l,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-l),o[0]+=u,o[1]+=s;break;case 2:u=s*(l-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-l),o[1]+=u,o[2]+=s;break;case 4:u=s*(l-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-l),o[2]+=u,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Um(e,t){if(t===0)return e;var r=Ide(Pde(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),kf(Dde(r))}var J$=6,Mde=15,Rde=1,$a=J$;function Hm(e){return Math.floor((e+Math.round(128/$a)/256)*$a)}function qm(e){return Math.floor((e-5)/$a*100+.5)/100}function qN(e){return Math.round((e*$a+5)/$a*256)/256}function B1(e){return qN(qm(Hm(e)))}function Bk(e){var t=Math.abs(e-B1(e)),r=$a;if(t>.005)for($a=Rde;$a<Mde;++$a)Math.abs(e-B1(e))<=t&&(t=Math.abs(e-B1(e)),r=$a);$a=r}function zu(e){e.width?(e.wpx=Hm(e.width),e.wch=qm(e.wpx),e.MDW=$a):e.wpx?(e.wch=qm(e.wpx),e.width=qN(e.wch),e.MDW=$a):typeof e.wch=="number"&&(e.width=qN(e.wch),e.wpx=Hm(e.width),e.MDW=$a),e.customWidth&&delete e.customWidth}var Fde=96,Q$=Fde;function Z$(e){return e*96/Q$}function Sf(e){return e*Q$/96}var $de={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Lde(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(Pa)||[]).forEach(function(o){var l=Qt(o);switch(Bi(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=sn(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=sn(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Bde(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(Pa)||[]).forEach(function(o){var l=Qt(o);switch(Bi(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Ude(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(Pa)||[]).forEach(function(o){var l=Qt(o);switch(Bi(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Jr(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?sn(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?sn(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?sn(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?sn(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?sn(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?sn(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?sn(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=jk[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=sn(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var u=Vl[s.color.index];s.color.index==81&&(u=Vl[1]),u||(u=Vl[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Um(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Hde(e,t,r){t.NumberFmt=[];for(var n=Ri(ur),s=0;s<n.length;++s)t.NumberFmt[n[s]]=ur[n[s]];var i=e[0].match(Pa);if(i)for(s=0;s<i.length;++s){var o=Qt(i[s]);switch(Bi(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=_r(Jr(o.formatCode)),u=parseInt(o.numFmtId,10);if(t.NumberFmt[u]=l,u>0){if(u>392){for(u=392;u>60&&t.NumberFmt[u]!=null;--u);t.NumberFmt[u]=l}Kl(l,u)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var vp=["numFmtId","fillId","fontId","borderId","xfId"],bp=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function qde(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Pa)||[]).forEach(function(i){var o=Qt(i),l=0;switch(Bi(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<vp.length;++l)n[vp[l]]&&(n[vp[l]]=parseInt(n[vp[l]],10));for(l=0;l<bp.length;++l)n[bp[l]]&&(n[bp[l]]=sn(n[bp[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=sn(o.wrapText)),n.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var zde=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,u,d){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=l.match(t))&&Hde(p,f,d),(p=l.match(s))&&Ude(p,f,u,d),(p=l.match(n))&&Bde(p,f,u,d),(p=l.match(i))&&Lde(p,f,u,d),(p=l.match(r))&&qde(p,f,d),f}})();function Wde(e,t){var r=e.read_shift(2),n=Ca(e);return[r,n]}function Kde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=rce(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var u=e.read_shift(1);switch(u>0&&(n.charset=u),e.l++,n.color=tce(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ca(e),n}var Vde=Oa;function Gde(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}var Yde=Oa;function Xde(e,t,r){var n={};n.NumberFmt=[];for(var s in ur)n.NumberFmt[s]=ur[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return ko(e,function(u,d,f){switch(f){case 44:n.NumberFmt[u[0]]=u[1],Kl(u[1],u[0]);break;case 43:n.Fonts.push(u),u.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(u.color.rgb=Um(t.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(f);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}var Jde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Qde(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Pa)||[]).forEach(function(s){var i=Qt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Jde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Zde(){}function ehe(){}var the=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,rhe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,nhe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function ahe(e,t,r){t.themeElements={};var n;[["clrScheme",the,Qde],["fontScheme",rhe,Zde],["fmtScheme",nhe,ehe]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var she=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function e8(e,t){(!e||e.length===0)&&(e=ihe());var r,n={};if(!(r=e.match(she)))throw new Error("themeElements not found in theme");return ahe(r[0],n,t),n.raw=e,n}function ihe(e,t){var r=[d$];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function ohe(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=u$(i,{type:"array"})}catch{return}var l=vs(o,"theme/theme/theme1.xml",!0);if(l)return e8(l,r)}}function lhe(e){return e.read_shift(4)}function che(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=uhe(e,4);break;case 2:t.xclrValue=B$(e);break;case 3:t.xclrValue=lhe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function uhe(e,t){return Oa(e,t)}function dhe(e,t){return Oa(e,t)}function hhe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=che(e);break;case 6:n[1]=dhe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function fhe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(hhe(e,r-e.l));return{ixfe:n,ext:i}}function phe(e,t){t.forEach(function(r){r[0]})}function mhe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ca(e)}}function ghe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function xhe(e){return e.l+=4,e.read_shift(4)!=0}function yhe(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return ko(e,function(u,d,f){switch(f){case 335:n.Types.push({name:u.name});break;case 51:u.forEach(function(p){l==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):l==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:l=u?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function vhe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(Pa,function(l){var u=Qt(l);switch(Bi(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==u.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[u.t-1].name,index:+u.v}):i==0&&n.Value.push({type:n.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return l}),n}function bhe(e){var t=[];if(!e)return t;var r=1;return(e.match(Pa)||[]).forEach(function(n){var s=Qt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function whe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=or(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function jhe(e,t,r){var n=[];return ko(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function Nhe(e,t,r,n){if(!e)return e;var s=n||{},i=!1;ko(e,function(l,u,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!u.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function khe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function U6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=Ha(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var u=yn(e["!ref"]||"BDWGO1000001:A1");u.s.r>l.r&&(u.s.r=l.r),u.e.r<l.r&&(u.e.r=l.r),u.s.c>l.c&&(u.s.c=l.c),u.e.c<l.c&&(u.e.c=l.c);var d=kr(u);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function She(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var u=Qt(l[0]),d={author:u.authorId&&r[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},f=Ha(u.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var p=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!p&&!!p[1]&&Lk(p[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function _he(e,t){var r=[],n=!1,s={},i=0;return e.replace(Pa,function(l,u){var d=Qt(l);switch(Bi(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=u+l.length;break;case"</text>":s.t=e.slice(i,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function Ehe(e,t){var r=[],n=!1;return e.replace(Pa,function(i){var o=Qt(i);switch(Bi(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function Ahe(e){var t={};t.iauthor=e.read_shift(4);var r=pc(e);return t.rfx=r.s,t.ref=or(r.s),e.l+=16,t}var The=Ca;function Che(e,t){var r=[],n=[],s={},i=!1;return ko(e,function(l,u,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var Ohe="application/vnd.ms-office.vbaProject";function Phe(e){var t=Nr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Nr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Nr.write(t)}function Ihe(){return{"!type":"dialog"}}function Dhe(){return{"!type":"dialog"}}function Mhe(){return{"!type":"macro"}}function Rhe(){return{"!type":"macro"}}var mu=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,u?d+=t.r:--d,s+(l?"":"$")+Wn(f)+(u?"":"$")+xa(d)}return function(s,i){return t=i,s.replace(e,r)}})(),t8=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Fhe=(function(){return function(t,r){return t.replace(t8,function(n,s,i,o,l,u){var d=Ik(o)-(i?0:r.c),f=Pk(u)-(l?0:r.r),p=f==0?"":l?f+1:"["+f+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+p+"C"+m})}})();function r8(e,t){return e.replace(t8,function(r,n,s,i,o,l){return n+(s=="$"?s+i:Wn(Ik(i)+t.c))+(o=="$"?o+l:xa(Pk(l)+t.r))})}function $he(e,t,r){var n=id(t),s=n.s,i=Ha(r),o={r:i.r-s.r,c:i.c-s.c};return r8(e,o)}function Lhe(e){return e.length!=1}function H6(e){return e.replace(/_xlfn\./g,"")}function _n(e){e.l+=1}function sl(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function n8(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return a8(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=sl(e),l=sl(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function a8(e){var t=sl(e),r=sl(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Bhe(e,t,r){if(r.biff<8)return a8(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=sl(e),o=sl(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function s8(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Uhe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=sl(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Uhe(e){var t=sl(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Hhe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function qhe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return zhe(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function zhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Whe(e,t,r){var n=(e[e.l++]&96)>>5,s=n8(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Khe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=n8(e,i,r);return[n,s,o]}function Vhe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ghe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Yhe(e,t,r){var n=(e[e.l++]&96)>>5,s=Bhe(e,t-1,r);return[n,s]}function Xhe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function q6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Jhe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Qhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Zhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function efe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function tfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function i8(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function rfe(e){return e.read_shift(2),i8(e)}function nfe(e){return e.read_shift(2),i8(e)}function afe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=s8(e,0,r);return[n,s]}function sfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=qhe(e,0,r);return[n,s]}function ife(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=s8(e,0,r);return[n,s,i]}function ofe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[l0e[s],c8[s],n]}function lfe(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:cfe(e);return[s,(i[0]===0?c8:o0e)[i[1]]]}function cfe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ufe(e,t,r){e.l+=r&&r.biff==2?3:4}function dfe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function hfe(e){return e.l++,mc[e.read_shift(1)]}function ffe(e){return e.l++,e.read_shift(2)}function pfe(e){return e.l++,e.read_shift(1)!==0}function mfe(e){return e.l++,Ea(e)}function gfe(e,t,r){return e.l++,Uf(e,t-1,r)}function xfe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=bn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=mc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ea(e);break;case 2:r[1]=gc(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function yfe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?pc:Bg)(e));return s}function vfe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=xfe(e,r.biff);return o}function bfe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function wfe(e,t,r){if(r.biff==5)return jfe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function jfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Nfe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function kfe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Sfe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function _fe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var Efe=Oa,Afe=Oa,Tfe=Oa;function qf(e,t,r){return e.l+=2,[Hhe(e)]}function Uk(e){return e.l+=6,[]}var Cfe=qf,Ofe=Uk,Pfe=Uk,Ife=qf;function o8(e){return e.l+=2,[Tn(e),e.read_shift(2)&1]}var Dfe=qf,Mfe=o8,Rfe=Uk,Ffe=qf,$fe=qf,Lfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Bfe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Lfe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function Ufe(e){return e.l+=2,[e.read_shift(4)]}function Hfe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function qfe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function zfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Wfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Kfe(e){return e.l+=4,[0,0]}var z6={1:{n:"PtgExp",f:dfe},2:{n:"PtgTbl",f:Tfe},3:{n:"PtgAdd",f:_n},4:{n:"PtgSub",f:_n},5:{n:"PtgMul",f:_n},6:{n:"PtgDiv",f:_n},7:{n:"PtgPower",f:_n},8:{n:"PtgConcat",f:_n},9:{n:"PtgLt",f:_n},10:{n:"PtgLe",f:_n},11:{n:"PtgEq",f:_n},12:{n:"PtgGe",f:_n},13:{n:"PtgGt",f:_n},14:{n:"PtgNe",f:_n},15:{n:"PtgIsect",f:_n},16:{n:"PtgUnion",f:_n},17:{n:"PtgRange",f:_n},18:{n:"PtgUplus",f:_n},19:{n:"PtgUminus",f:_n},20:{n:"PtgPercent",f:_n},21:{n:"PtgParen",f:_n},22:{n:"PtgMissArg",f:_n},23:{n:"PtgStr",f:gfe},26:{n:"PtgSheet",f:Hfe},27:{n:"PtgEndSheet",f:qfe},28:{n:"PtgErr",f:hfe},29:{n:"PtgBool",f:pfe},30:{n:"PtgInt",f:ffe},31:{n:"PtgNum",f:mfe},32:{n:"PtgArray",f:Xhe},33:{n:"PtgFunc",f:ofe},34:{n:"PtgFuncVar",f:lfe},35:{n:"PtgName",f:bfe},36:{n:"PtgRef",f:afe},37:{n:"PtgArea",f:Whe},38:{n:"PtgMemArea",f:Nfe},39:{n:"PtgMemErr",f:Efe},40:{n:"PtgMemNoMem",f:Afe},41:{n:"PtgMemFunc",f:kfe},42:{n:"PtgRefErr",f:Sfe},43:{n:"PtgAreaErr",f:Vhe},44:{n:"PtgRefN",f:sfe},45:{n:"PtgAreaN",f:Yhe},46:{n:"PtgMemAreaN",f:zfe},47:{n:"PtgMemNoMemN",f:Wfe},57:{n:"PtgNameX",f:wfe},58:{n:"PtgRef3d",f:ife},59:{n:"PtgArea3d",f:Khe},60:{n:"PtgRefErr3d",f:_fe},61:{n:"PtgAreaErr3d",f:Ghe},255:{}},Vfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Gfe={1:{n:"PtgElfLel",f:o8},2:{n:"PtgElfRw",f:Ffe},3:{n:"PtgElfCol",f:Cfe},6:{n:"PtgElfRwV",f:$fe},7:{n:"PtgElfColV",f:Ife},10:{n:"PtgElfRadical",f:Dfe},11:{n:"PtgElfRadicalS",f:Rfe},13:{n:"PtgElfColS",f:Ofe},15:{n:"PtgElfColSV",f:Pfe},16:{n:"PtgElfRadicalLel",f:Mfe},25:{n:"PtgList",f:Bfe},29:{n:"PtgSxName",f:Ufe},255:{}},Yfe={0:{n:"PtgAttrNoop",f:Kfe},1:{n:"PtgAttrSemi",f:tfe},2:{n:"PtgAttrIf",f:Zhe},4:{n:"PtgAttrChoose",f:Jhe},8:{n:"PtgAttrGoto",f:Qhe},16:{n:"PtgAttrSum",f:ufe},32:{n:"PtgAttrBaxcel",f:q6},33:{n:"PtgAttrBaxcel",f:q6},64:{n:"PtgAttrSpace",f:rfe},65:{n:"PtgAttrSpaceSemi",f:nfe},128:{n:"PtgAttrIfError",f:efe},255:{}};function zf(e,t,r,n){if(n.biff<8)return Oa(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=vfe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=yfe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Oa(e,t)),i}function Wf(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=z6[i]||z6[Vfe[i]],(i===24||i===25)&&(s=(i===24?Gfe:Yfe)[e[e.l+1]]),!s||!s.f?Oa(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Xfe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Jfe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Qfe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function l8(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function W6(e,t,r){var n=l8(e,t,r);return n=="#REF"?n:Qfe(n,r)}function ka(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],u,d,f,p=0,m=0,x,v="";if(!e[0]||!e[0][0])return"";for(var y=-1,b="",k=0,N=e[0].length;k<N;++k){var w=e[0][k];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),d=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:b=mn(" ",e[0][y][1][1]);break;case 1:b=mn("\r",e[0][y][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}d=d+b,y=-1}l.push(d+Jfe[w[0]]+u);break;case"PtgIsect":u=l.pop(),d=l.pop(),l.push(d+" "+u);break;case"PtgUnion":u=l.pop(),d=l.pop(),l.push(d+","+u);break;case"PtgRange":u=l.pop(),d=l.pop(),l.push(d+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=yh(w[1][1],o,s),l.push(vh(f,i));break;case"PtgRefN":f=r?yh(w[1][1],r,s):w[1][1],l.push(vh(f,i));break;case"PtgRef3d":p=w[1][1],f=yh(w[1][2],o,s),v=W6(n,p,s),l.push(v+"!"+vh(f,i));break;case"PtgFunc":case"PtgFuncVar":var T=w[1][0],E=w[1][1];T||(T=0),T&=127;var S=T==0?[]:l.slice(-T);l.length-=T,E==="User"&&(E=S.shift()),l.push(E+"("+S.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":x=S6(w[1][1],r?{s:r}:o,s),l.push($1(x,s));break;case"PtgArea":x=S6(w[1][1],o,s),l.push($1(x,s));break;case"PtgArea3d":p=w[1][1],x=w[1][2],v=W6(n,p,s),l.push(v+"!"+$1(x,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=w[1][2];var _=(n.names||[])[m-1]||(n[0]||[])[m],A=_?_.Name:"SH33TJSNAME"+String(m);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),l.push(A);break;case"PtgNameX":var P=w[1][1];m=w[1][2];var B;if(s.biff<=5)P<0&&(P=-P),n[P]&&(B=n[P][m]);else{var I="";if(((n[P]||[])[0]||[])[0]==14849||(((n[P]||[])[0]||[])[0]==1025?n[P][m]&&n[P][m].itab>0&&(I=n.SheetNames[n[P][m].itab-1]+"!"):I=n.SheetNames[m-1]+"!"),n[P]&&n[P][m])I+=n[P][m].Name;else if(n[0]&&n[0][m])I+=n[0][m].Name;else{var O=(l8(n,P,s)||"").split(";;");O[m-1]?I=O[m-1]:I+="SH33TJSERRX"}l.push(I);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var L="(",X=")";if(y>=0){switch(b="",e[0][y][1][0]){case 2:L=mn(" ",e[0][y][1][1])+L;break;case 3:L=mn("\r",e[0][y][1][1])+L;break;case 4:X=mn(" ",e[0][y][1][1])+X;break;case 5:X=mn("\r",e[0][y][1][1])+X;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(L+l.pop()+X);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var U={c:r.c,r:r.r};if(n.sharedf[or(f)]){var V=n.sharedf[or(f)];l.push(ka(V,o,U,n,s))}else{var ne=!1;for(u=0;u!=n.arrayf.length;++u)if(d=n.arrayf[u],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){l.push(ka(d[1],o,U,n,s)),ne=!0;break}ne||l.push(w[1])}break;case"PtgArray":l.push("{"+Xfe(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=k;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var ee=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&ee.indexOf(e[0][k][0])==-1){w=e[0][y];var R=!0;switch(w[1][0]){case 4:R=!1;case 0:b=mn(" ",w[1][1]);break;case 5:R=!1;case 1:b=mn("\r",w[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((R?b:"")+l.pop()+(R?"":b)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Zfe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Oa(e,t-2)];var l=Wf(e,o,r);return t!==o+s&&(i=zf(e,t-o-s,l,r)),e.l=n,[l,i]}function e0e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Oa(e,t-2)];var l=Wf(e,o,r);return t!==o+s&&(i=zf(e,t-o-s,l,r)),e.l=n,[l,i]}function t0e(e,t,r,n){var s=e.l+t,i=Wf(e,n,r),o;return s!==e.l&&(o=zf(e,s-e.l,i,r)),[i,o]}function r0e(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=Wf(e,i,r);return i==65535?[[],Oa(e,t-2)]:(t!==i+2&&(s=zf(e,n-i-2,o,r)),[o,s])}function n0e(e){var t;if(lo(e,e.l+6)!==65535)return[Ea(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function U1(e,t,r){var n=e.l+t,s=Ui(e);r.biff==2&&++e.l;var i=n0e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=e0e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Ug(e,t,r){var n=e.read_shift(4),s=Wf(e,n,r),i=e.read_shift(4),o=i>0?zf(e,i,s,r):null;return[s,o]}var a0e=Ug,Hg=Ug,s0e=Ug,i0e=Ug,o0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},c8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},l0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function K6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function H1(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Nh={},gu={};function kh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function u8(e,t,r,n,s,i){try{n.cellNF&&(e.z=ur[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=aa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(ur[t]==null&&Kl(cle[t]||"General",t),e.t==="e")e.w=e.w||mc[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bf(e.v);else if(e.t==="d"){var o=za(e.v);(o|0)===o?e.w=o.toString(10):e.w=bf(o)}else{if(e.v===void 0)return"";e.w=nc(e.v,gu)}else e.t==="d"?e.w=Us(t,za(e.v),gu):e.w=Us(t,e.v,gu)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Um(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Um(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function c0e(e,t){var r=yn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=kr(r))}var u0e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,d0e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,h0e=/<(?:\w:)?hyperlink [^>]*>/mg,f0e=/"(\w*:\w*)"/,p0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,m0e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,g0e=/<(?:\w:)?pageMargins[^>]*\/>/g,d8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,x0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,y0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function v0e(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",p=e.match(d0e);p?(d=e.slice(0,p.index),f=e.slice(p.index+p[0].length)):d=f=e;var m=d.match(d8);m?Hk(m[0],l,s,r):(m=d.match(x0e))&&b0e(m[0],m[1]||"",l,s,r);var x=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var v=d.slice(x,x+50).match(f0e);v&&c0e(l,v[1])}var y=d.match(y0e);y&&y[1]&&_0e(y[1],s);var b=[];if(t.cellStyles){var k=d.match(p0e);k&&N0e(b,k)}p&&E0e(p[1],l,t,u,i,o);var N=f.match(m0e);N&&(l["!autofilter"]=k0e(N[0]));var w=[],T=f.match(u0e);if(T)for(x=0;x!=T.length;++x)w[x]=yn(T[x].slice(T[x].indexOf('"')+1));var E=f.match(h0e);E&&w0e(l,E,n);var S=f.match(g0e);if(S&&(l["!margins"]=j0e(Qt(S[0]))),!l["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(l["!ref"]=kr(u)),t.sheetRows>0&&l["!ref"]){var _=yn(l["!ref"]);t.sheetRows<=+_.e.r&&(_.e.r=t.sheetRows-1,_.e.r>u.e.r&&(_.e.r=u.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>u.e.c&&(_.e.c=u.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=kr(_))}return b.length>0&&(l["!cols"]=b),w.length>0&&(l["!merges"]=w),l}function Hk(e,t,r,n){var s=Qt(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=_r(Jr(s.codeName)))}function b0e(e,t,r,n,s){Hk(e.slice(0,e.indexOf(">")),r,n,s)}function w0e(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=Qt(Jr(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+_r(i.location))):(i.Target="#"+_r(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=yn(i.ref),u=l.s.r;u<=l.e.r;++u)for(var d=l.s.c;d<=l.e.c;++d){var f=or({c:d,r:u});n?(e[u]||(e[u]=[]),e[u][d]||(e[u][d]={t:"z",v:void 0}),e[u][d].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function j0e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function N0e(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Qt(t[n],!0);s.hidden&&(s.hidden=sn(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Bk(s.width)),zu(s);i<=o;)e[i++]=ga(s)}}function k0e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var S0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function _0e(e,t){t.Views||(t.Views=[{}]),(e.match(S0e)||[]).forEach(function(r,n){var s=Qt(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),sn(s.rightToLeft)&&(t.Views[n].RTL=!0)})}var E0e=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=wf("v"),o=wf("f");return function(u,d,f,p,m,x){for(var v=0,y="",b=[],k=[],N=0,w=0,T=0,E="",S,_,A=0,P=0,B,I,O=0,L=0,X=Array.isArray(x.CellXf),U,V=[],ne=[],ee=Array.isArray(d),R=[],se={},z=!1,M=!!f.sheetStubs,J=u.split(t),te=0,ie=J.length;te!=ie;++te){y=J[te].trim();var me=y.length;if(me!==0){var ve=0;e:for(v=0;v<me;++v)switch(y[v]){case">":if(y[v-1]!="/"){++v;break e}if(f&&f.cellStyles){if(_=Qt(y.slice(ve,v),!0),A=_.r!=null?parseInt(_.r,10):A+1,P=-1,f.sheetRows&&f.sheetRows<A)continue;se={},z=!1,_.ht&&(z=!0,se.hpt=parseFloat(_.ht),se.hpx=Sf(se.hpt)),_.hidden=="1"&&(z=!0,se.hidden=!0),_.outlineLevel!=null&&(z=!0,se.level=+_.outlineLevel),z&&(R[A-1]=se)}break;case"<":ve=v;break}if(ve>=v)break;if(_=Qt(y.slice(ve,v),!0),A=_.r!=null?parseInt(_.r,10):A+1,P=-1,!(f.sheetRows&&f.sheetRows<A)){p.s.r>A-1&&(p.s.r=A-1),p.e.r<A-1&&(p.e.r=A-1),f&&f.cellStyles&&(se={},z=!1,_.ht&&(z=!0,se.hpt=parseFloat(_.ht),se.hpx=Sf(se.hpt)),_.hidden=="1"&&(z=!0,se.hidden=!0),_.outlineLevel!=null&&(z=!0,se.level=+_.outlineLevel),z&&(R[A-1]=se)),b=y.slice(v).split(e);for(var ye=0;ye!=b.length&&b[ye].trim().charAt(0)=="<";++ye);for(b=b.slice(ye),v=0;v!=b.length;++v)if(y=b[v].trim(),y.length!==0){if(k=y.match(r),N=v,w=0,T=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,k!=null&&k.length===2){for(N=0,E=k[1],w=0;w!=E.length&&!((T=E.charCodeAt(w)-64)<1||T>26);++w)N=26*N+T;--N,P=N}else++P;for(w=0;w!=y.length&&y.charCodeAt(w)!==62;++w);if(++w,_=Qt(y.slice(0,w),!0),_.r||(_.r=or({r:A-1,c:P})),E=y.slice(w),S={t:""},(k=E.match(i))!=null&&k[1]!==""&&(S.v=_r(k[1])),f.cellFormula){if((k=E.match(o))!=null&&k[1]!==""){if(S.f=_r(Jr(k[1])).replace(/\r\n/g,`
`),f.xlfn||(S.f=H6(S.f)),k[0].indexOf('t="array"')>-1)S.F=(E.match(s)||[])[1],S.F.indexOf(":")>-1&&V.push([yn(S.F),S.F]);else if(k[0].indexOf('t="shared"')>-1){I=Qt(k[0]);var he=_r(Jr(k[1]));f.xlfn||(he=H6(he)),ne[parseInt(I.si,10)]=[I,he,_.r]}}else(k=E.match(/<f[^>]*\/>/))&&(I=Qt(k[0]),ne[I.si]&&(S.f=$he(ne[I.si][1],ne[I.si][2],_.r)));var pe=Ha(_.r);for(w=0;w<V.length;++w)pe.r>=V[w][0].s.r&&pe.r<=V[w][0].e.r&&pe.c>=V[w][0].s.c&&pe.c<=V[w][0].e.c&&(S.F=V[w][1])}if(_.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(M)S.t="z";else continue;else S.t=_.t||"n";switch(p.s.c>P&&(p.s.c=P),p.e.c<P&&(p.e.c=P),S.t){case"n":if(S.v==""||S.v==null){if(!M)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!M)continue;S.t="z"}else B=Nh[parseInt(S.v,10)],S.v=B.t,S.r=B.r,f.cellHTML&&(S.h=B.h);break;case"str":S.t="s",S.v=S.v!=null?Jr(S.v):"",f.cellHTML&&(S.h=Tk(S.v));break;case"inlineStr":k=E.match(n),S.t="s",k!=null&&(B=Lk(k[1]))?(S.v=B.t,f.cellHTML&&(S.h=B.h)):S.v="";break;case"b":S.v=sn(S.v);break;case"d":f.cellDates?S.v=aa(S.v,1):(S.v=za(aa(S.v,1)),S.t="n");break;case"e":(!f||f.cellText!==!1)&&(S.w=S.v),S.v=P$[S.v];break}if(O=L=0,U=null,X&&_.s!==void 0&&(U=x.CellXf[_.s],U!=null&&(U.numFmtId!=null&&(O=U.numFmtId),f.cellStyles&&U.fillId!=null&&(L=U.fillId))),u8(S,O,L,f,m,x),f.cellDates&&X&&S.t=="n"&&sd(ur[O])&&(S.t="d",S.v=Lg(S.v)),_.cm&&f.xlmeta){var De=(f.xlmeta.Cell||[])[+_.cm-1];De&&De.type=="XLDAPR"&&(S.D=!0)}if(ee){var q=Ha(_.r);d[q.r]||(d[q.r]=[]),d[q.r][q.c]=S}else d[_.r]=S}}}}R.length>0&&(d["!rows"]=R)}})();function A0e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var T0e=pc;function C0e(){}function O0e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Zle(e),r}function P0e(e){var t=qs(e);return[t]}function I0e(e){var t=fc(e);return[t]}function D0e(e){var t=qs(e),r=e.read_shift(1);return[t,r,"b"]}function M0e(e){var t=fc(e),r=e.read_shift(1);return[t,r,"b"]}function R0e(e){var t=qs(e),r=e.read_shift(1);return[t,r,"e"]}function F0e(e){var t=fc(e),r=e.read_shift(1);return[t,r,"e"]}function $0e(e){var t=qs(e),r=e.read_shift(4);return[t,r,"s"]}function L0e(e){var t=fc(e),r=e.read_shift(4);return[t,r,"s"]}function B0e(e){var t=qs(e),r=Ea(e);return[t,r,"n"]}function h8(e){var t=fc(e),r=Ea(e);return[t,r,"n"]}function U0e(e){var t=qs(e),r=Rk(e);return[t,r,"n"]}function H0e(e){var t=fc(e),r=Rk(e);return[t,r,"n"]}function q0e(e){var t=qs(e),r=Dk(e);return[t,r,"is"]}function z0e(e){var t=qs(e),r=Ca(e);return[t,r,"str"]}function W0e(e){var t=fc(e),r=Ca(e);return[t,r,"str"]}function K0e(e,t,r){var n=e.l+t,s=qs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=Hg(e,n-e.l,r);o[3]=ka(l,null,s,r.supbooks,r)}else e.l=n;return o}function V0e(e,t,r){var n=e.l+t,s=qs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=Hg(e,n-e.l,r);o[3]=ka(l,null,s,r.supbooks,r)}else e.l=n;return o}function G0e(e,t,r){var n=e.l+t,s=qs(e);s.r=r["!row"];var i=Ea(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=Hg(e,n-e.l,r);o[3]=ka(l,null,s,r.supbooks,r)}else e.l=n;return o}function Y0e(e,t,r){var n=e.l+t,s=qs(e);s.r=r["!row"];var i=Ca(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=Hg(e,n-e.l,r);o[3]=ka(l,null,s,r.supbooks,r)}else e.l=n;return o}var X0e=pc;function J0e(e,t){var r=e.l+t,n=pc(e),s=Mk(e),i=Ca(e),o=Ca(e),l=Ca(e);e.l=r;var u={rfx:n,relId:s,loc:i,display:l};return o&&(u.Tooltip=o),u}function Q0e(){}function Z0e(e,t,r){var n=e.l+t,s=T$(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=a0e(e,n-e.l,r);o[1]=l}else e.l=n;return o}function epe(e,t,r){var n=e.l+t,s=pc(e),i=[s];if(r.cellFormula){var o=i0e(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}var tpe=["left","right","top","bottom","header","footer"];function rpe(e){var t={};return tpe.forEach(function(r){t[r]=Ea(e)}),t}function npe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ape(){}function spe(){}function ipe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var u=l.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,m=!1,x,v,y,b,k,N,w,T,E,S=[];l.biff=12,l["!row"]=0;var _=0,A=!1,P=[],B={},I=l.supbooks||s.supbooks||[[]];if(I.sharedf=B,I.arrayf=P,I.SheetNames=s.SheetNames||s.Sheets.map(function(ee){return ee.name}),!l.supbooks&&(l.supbooks=I,s.Names))for(var O=0;O<s.Names.length;++O)I[0][O+1]=s.Names[O];var L=[],X=[],U=!1;zm[16]={n:"BrtShortReal",f:h8};var V;if(ko(e,function(R,se,z){if(!m)switch(z){case 148:d=R;break;case 0:x=R,l.sheetRows&&l.sheetRows<=x.r&&(m=!0),T=xa(b=x.r),l["!row"]=x.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=Sf(R.hpt)),X[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:R[2]},R[2]){case"n":v.v=R[1];break;case"s":w=Nh[R[1]],v.v=w.t,v.r=w.r;break;case"b":v.v=!!R[1];break;case"e":v.v=R[1],l.cellText!==!1&&(v.w=mc[v.v]);break;case"str":v.t="s",v.v=R[1];break;case"is":v.t="s",v.v=R[1].t;break}if((y=o.CellXf[R[0].iStyleRef])&&u8(v,y.numFmtId,null,l,i,o),k=R[0].c==-1?k+1:R[0].c,l.dense?(u[b]||(u[b]=[]),u[b][k]=v):u[Wn(k)+T]=v,l.cellFormula){for(A=!1,_=0;_<P.length;++_){var M=P[_];x.r>=M[0].s.r&&x.r<=M[0].e.r&&k>=M[0].s.c&&k<=M[0].e.c&&(v.F=kr(M[0]),A=!0)}!A&&R.length>3&&(v.f=R[3])}if(f.s.r>x.r&&(f.s.r=x.r),f.s.c>k&&(f.s.c=k),f.e.r<x.r&&(f.e.r=x.r),f.e.c<k&&(f.e.c=k),l.cellDates&&y&&v.t=="n"&&sd(ur[y.numFmtId])){var J=Hl(v.v);J&&(v.t="d",v.v=new Date(J.y,J.m-1,J.d,J.H,J.M,J.S,J.u))}V&&(V.type=="XLDAPR"&&(v.D=!0),V=void 0);break;case 1:case 12:if(!l.sheetStubs||p)break;v={t:"z",v:void 0},k=R[0].c==-1?k+1:R[0].c,l.dense?(u[b]||(u[b]=[]),u[b][k]=v):u[Wn(k)+T]=v,f.s.r>x.r&&(f.s.r=x.r),f.s.c>k&&(f.s.c=k),f.e.r<x.r&&(f.e.r=x.r),f.e.c<k&&(f.e.c=k),V&&(V.type=="XLDAPR"&&(v.D=!0),V=void 0);break;case 176:S.push(R);break;case 49:V=((l.xlmeta||{}).Cell||[])[R-1];break;case 494:var te=n["!id"][R.relId];for(te?(R.Target=te.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=te):R.relId==""&&(R.Target="#"+R.loc),b=R.rfx.s.r;b<=R.rfx.e.r;++b)for(k=R.rfx.s.c;k<=R.rfx.e.c;++k)l.dense?(u[b]||(u[b]=[]),u[b][k]||(u[b][k]={t:"z",v:void 0}),u[b][k].l=R):(N=or({c:k,r:b}),u[N]||(u[N]={t:"z",v:void 0}),u[N].l=R);break;case 426:if(!l.cellFormula)break;P.push(R),E=l.dense?u[b][k]:u[Wn(k)+T],E.f=ka(R[1],f,{r:x.r,c:k},I,l),E.F=kr(R[0]);break;case 427:if(!l.cellFormula)break;B[or(R[0].s)]=R[1],E=l.dense?u[b][k]:u[Wn(k)+T],E.f=ka(R[1],f,{r:x.r,c:k},I,l);break;case 60:if(!l.cellStyles)break;for(;R.e>=R.s;)L[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},U||(U=!0,Bk(R.w/256)),zu(L[R.e+1]);break;case 161:u["!autofilter"]={ref:kr(R)};break;case 476:u["!margins"]=R;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),R.name&&(s.Sheets[r].CodeName=R.name),(R.above||R.left)&&(u["!outline"]={above:R.above,left:R.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),R.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!se.T){if(!p||l.WTF)throw new Error("Unexpected record 0x"+z.toString(16))}}},l),delete l.supbooks,delete l["!row"],!u["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(u["!ref"]=kr(d||f)),l.sheetRows&&u["!ref"]){var ne=yn(u["!ref"]);l.sheetRows<=+ne.e.r&&(ne.e.r=l.sheetRows-1,ne.e.r>f.e.r&&(ne.e.r=f.e.r),ne.e.r<ne.s.r&&(ne.s.r=ne.e.r),ne.e.c>f.e.c&&(ne.e.c=f.e.c),ne.e.c<ne.s.c&&(ne.s.c=ne.e.c),u["!fullref"]=u["!ref"],u["!ref"]=kr(ne))}return S.length>0&&(u["!merges"]=S),L.length>0&&(u["!cols"]=L),X.length>0&&(u["!rows"]=X),u}function ope(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=_r((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function lpe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,u=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var m=ope(p);f.s.r=f.s.c=0,f.e.c=l,d=Wn(l),m[0].forEach(function(x,v){o[d+xa(v)]={t:"n",v:x,z:m[1]},u=v}),f.e.r<u&&(f.e.r=u),++l}),l>0&&(o["!ref"]=kr(f)),o}function cpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(d8);return l&&Hk(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function upe(e,t){e.l+=10;var r=Ca(e);return{name:r}}function dpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return ko(e,function(u,d,f){switch(f){case 550:i["!rel"]=u;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),u.name&&(s.Sheets[r].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var f8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],hpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],fpe=[],ppe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function V6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=sn(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function G6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=sn(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function p8(e){G6(e.WBProps,f8),G6(e.CalcPr,ppe),V6(e.WBView,hpe),V6(e.Sheets,fpe),gu.date1904=sn(e.WBProps.date1904)}var mpe="][*?/\\".split("");function gpe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return mpe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var xpe=/<\w+:workbook/;function ype(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(Pa,function(u,d){var f=Qt(u);switch(Bi(f[0])){case"<?xml":break;case"<workbook":u.match(xpe)&&(s="xmlns"+u.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":f8.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=sn(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=Jr(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=_r(Jr(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Jr(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),sn(f.hidden||"0")&&(i.Hidden=!0),o=d+u.length;break;case"</definedName>":i.Ref=_r(Jr(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return u}),Rle.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return p8(r),r}function vpe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=BN(e),r.name=Ca(e),r}function bpe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Ca(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function wpe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function jpe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=ece(e),o=s0e(e,0,r),l=Mk(e);e.l=n;var u={Name:i,Ptg:o};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function Npe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],zm[16]={n:"BrtFRTArchID$",f:wpe},ko(e,function(u,d,f){switch(f){case 156:o.SheetNames.push(u.name),r.Sheets.push(u);break;case 153:r.WBProps=u;break;case 39:u.Sheet!=null&&(t.SID=u.Sheet),u.Ref=ka(u.Ptg,null,null,o,t),delete t.SID,delete u.Ptg,i.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,u]):o[0]=[f,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),p8(r),r.Names=i,r.supbooks=o,r}function kpe(e,t,r){return t.slice(-4)===".bin"?Npe(e,r):ype(e,r)}function Spe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?ipe(e,n,r,s,i,o,l):v0e(e,n,r,s,i,o,l)}function _pe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?dpe(e,n,r,s,i):cpe(e,n,r,s,i)}function Epe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Mhe():Rhe()}function Ape(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Ihe():Dhe()}function Tpe(e,t,r,n){return t.slice(-4)===".bin"?Xde(e,r,n):zde(e,r,n)}function Cpe(e,t,r){return e8(e,r)}function Ope(e,t,r){return t.slice(-4)===".bin"?hde(e,r):ude(e,r)}function Ppe(e,t,r){return t.slice(-4)===".bin"?Che(e,r):She(e,r)}function Ipe(e,t,r){return t.slice(-4)===".bin"?jhe(e):bhe(e)}function Dpe(e,t,r,n){return r.slice(-4)===".bin"?Nhe(e,t,r,n):void 0}function Mpe(e,t,r){return t.slice(-4)===".bin"?yhe(e,t,r):vhe(e,t,r)}var m8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,g8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Zs(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(m8),i,o,l,u;if(s)for(u=0;u!=s.length;++u)i=s[u].match(g8),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Rpe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(m8),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(g8),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var Sh;function Fpe(e,t){var r=Sh[e]||_r(e);return r==="General"?nc(t):Us(r,t)}function $pe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=sn(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=aa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[_r(t)]=s}function Lpe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||mc[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bf(e.v):e.w=nc(e.v):e.w=Fpe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Sh[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&sd(n)){var s=Hl(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Bpe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=$de[n.Pattern]||n.Pattern)}e[t.ID]=t}function Upe(e,t,r,n,s,i,o,l,u,d){var f="General",p=n.StyleID,m={};d=d||{};var x=[],v=0;for(p===void 0&&l&&(p=l.StyleID),p===void 0&&o&&(p=o.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&x.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=sn(e);break;case"String":n.t="s",n.r=g6(_r(e)),n.v=e.indexOf("<")>-1?_r(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(aa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=_r(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=P$[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=g6(t||e));break}if(Lpe(n,f,d),d.cellFormula!==!1)if(n.Formula){var y=_r(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=mu(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=mu("RC:RC",s):n.ArrayRange&&(n.F=mu(n.ArrayRange,s),u.push([yn(n.F),n.F]))}else for(v=0;v<u.length;++v)s.r>=u[v][0].s.r&&s.r<=u[v][0].e.r&&s.c>=u[v][0].s.c&&s.c<=u[v][0].e.c&&(n.F=u[v][1]);d.cellStyles&&(x.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Hpe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function q1(e,t){var r=t||{};a$();var n=nh(Ck(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Jr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=ga(r);return o.type="string",Nf.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ce){s.indexOf("<"+Ce)>=0&&(i=!0)}),i)return Jpe(n,r);Sh={"General Number":"General","General Date":ur[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ur[15],"Short Date":ur[14],"Long Time":ur[19],"Medium Time":ur[18],"Short Time":ur[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ur[2],Standard:ur[4],Percent:ur[10],Scientific:ur[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[],d,f={},p=[],m=r.dense?[]:{},x="",v={},y={},b=Zs('<Data ss:Type="String">'),k=0,N=0,w=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},S={},_="",A=0,P=[],B={},I={},O=0,L=[],X=[],U={},V=[],ne,ee=!1,R=[],se=[],z={},M=0,J=0,te={Sheets:[],WBProps:{date1904:!1}},ie={};jf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var me="";l=jf.exec(n);)switch(l[3]=(me=l[3]).toLowerCase()){case"data":if(me=="data"){if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break}if(u[u.length-1][1])break;l[1]==="/"?Upe(n.slice(k,l.index),_,b,u[u.length-1][0]=="comment"?U:v,{c:N,r:w},E,V[N],y,R,r):(_="",b=Zs(l[0]),k=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(X.length>0&&(v.c=X),(!r.sheetRows||r.sheetRows>w)&&v.v!==void 0&&(r.dense?(m[w]||(m[w]=[]),m[w][N]=v):m[Wn(N)+xa(w)]=v),v.HRef&&(v.l={Target:_r(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=N+(parseInt(v.MergeAcross,10)|0),J=w+(parseInt(v.MergeDown,10)|0),P.push({s:{c:N,r:w},e:{c:M,r:J}})),!r.sheetStubs)v.MergeAcross?N=M+1:++N;else if(v.MergeAcross||v.MergeDown){for(var ve=N;ve<=M;++ve)for(var ye=w;ye<=J;++ye)(ve>N||ye>w)&&(r.dense?(m[ye]||(m[ye]=[]),m[ye][ve]={t:"z"}):m[Wn(ve)+xa(ye)]={t:"z"});N=M+1}else++N;else v=Rpe(l[0]),v.Index&&(N=+v.Index-1),N<T.s.c&&(T.s.c=N),N>T.e.c&&(T.e.c=N),l[0].slice(-2)==="/>"&&++N,X=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<T.s.r&&(T.s.r=w),w>T.e.r&&(T.e.r=w),l[0].slice(-2)==="/>"&&(y=Zs(l[0]),y.Index&&(w=+y.Index-1)),N=0,++w):(y=Zs(l[0]),y.Index&&(w=+y.Index-1),z={},(y.AutoFitHeight=="0"||y.Height)&&(z.hpx=parseInt(y.Height,10),z.hpt=Z$(z.hpx),se[w]=z),y.Hidden=="1"&&(z.hidden=!0,se[w]=z));break;case"worksheet":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));p.push(x),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(m["!ref"]=kr(T),r.sheetRows&&r.sheetRows<=T.e.r&&(m["!fullref"]=m["!ref"],T.e.r=r.sheetRows-1,m["!ref"]=kr(T))),P.length&&(m["!merges"]=P),V.length>0&&(m["!cols"]=V),se.length>0&&(m["!rows"]=se),f[x]=m}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=N=0,u.push([l[3],!1]),d=Zs(l[0]),x=_r(d.Name),m=r.dense?[]:{},P=[],R=[],se=[],ie={name:x,Hidden:0},te.Sheets.push(ie);break;case"table":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;u.push([l[3],!1]),V=[],ee=!1}break;case"style":l[1]==="/"?Bpe(E,S,r):S=Zs(l[0]);break;case"numberformat":S.nf=_r(Zs(l[0]).Format||"General"),Sh[S.nf]&&(S.nf=Sh[S.nf]);for(var he=0;he!=392&&ur[he]!=S.nf;++he);if(he==392){for(he=57;he!=392;++he)if(ur[he]==null){Kl(S.nf,he);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(ne=Zs(l[0]),ne.Hidden&&(ne.hidden=!0,delete ne.Hidden),ne.Width&&(ne.wpx=parseInt(ne.Width,10)),!ee&&ne.wpx>10){ee=!0,$a=J$;for(var pe=0;pe<V.length;++pe)V[pe]&&zu(V[pe])}ee&&zu(ne),V[ne.Index-1||V.length]=ne;for(var De=0;De<+ne.Span;++De)V[V.length]=ga(ne);break;case"namedrange":if(l[1]==="/")break;te.Names||(te.Names=[]);var q=Qt(l[0]),Ae={Name:q.Name,Ref:mu(q.RefersTo.slice(1),{r:0,c:0})};te.Sheets.length>0&&(Ae.Sheet=te.Sheets.length-1),te.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(A,l.index):A=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;S.Interior=Zs(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Sce(B,me,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else u.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));Hpe(U),X.push(U)}else u.push([l[3],!1]),d=Zs(l[0]),U={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Be=Zs(l[0]);m["!autofilter"]={ref:mu(Be.Range).replace(/\$/g,"")},u.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"null":break;default:if(u.length==0&&l[3]=="document"||u.length==0&&l[3]=="uof")return eI(n,r);var xt=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:xt=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:xt=!1}break;case"excelworkbook":switch(l[3]){case"date1904":te.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:xt=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:xt=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":ie.Hidden=1;break;case"SheetVeryHidden":ie.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||kh(m["!margins"]={},"xlml"),isNaN(+Qt(l[0]).Margin)||(m["!margins"].header=+Qt(l[0]).Margin);break;case"footer":m["!margins"]||kh(m["!margins"]={},"xlml"),isNaN(+Qt(l[0]).Margin)||(m["!margins"].footer=+Qt(l[0]).Margin);break;case"pagemargins":var le=Qt(l[0]);m["!margins"]||kh(m["!margins"]={},"xlml"),isNaN(+le.Top)||(m["!margins"].top=+le.Top),isNaN(+le.Left)||(m["!margins"].left=+le.Left),isNaN(+le.Right)||(m["!margins"].right=+le.Right),isNaN(+le.Bottom)||(m["!margins"].bottom=+le.Bottom);break;case"displayrighttoleft":te.Views||(te.Views=[]),te.Views[0]||(te.Views[0]={}),te.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:xt=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:xt=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:xt=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:xt=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:xt=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:xt=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:xt=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:xt=!1}break;case"smarttags":break;default:xt=!1;break}if(xt||l[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?$pe(I,me,L,n.slice(O,l.index)):(L=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+u.join("|")}var Ee={};return!r.bookSheets&&!r.bookProps&&(Ee.Sheets=f),Ee.SheetNames=p,Ee.Workbook=te,Ee.SSF=ga(ur),Ee.Props=B,Ee.Custprops=I,Ee}function zN(e,t){switch(Wk(t=t||{}),t.type||"base64"){case"base64":return q1(Ns(e),t);case"binary":case"buffer":case"file":return q1(e,t);case"array":return q1(hc(e),t)}}function qpe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=nce(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=ace(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var zpe=[60,1084,2066,2165,2175];function Wpe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var u=lo(r,r.l),d=WN[u],f=0;d!=null&&zpe.indexOf(u)>-1;)i=lo(r,r.l+2),f=r.l+4,u==2066?f+=4:(u==2165||u==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,d=WN[u=lo(r,r.l)];var p=Vo(o);ha(p,0);var m=0;p.lens=[];for(var x=0;x<o.length;++x)p.lens.push(m),m+=o[x].length;if(p.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+p.length+" < "+n;return t.f(p,p.length,s)}function ki(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ur[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||mc[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=bf(e.v):e.w=nc(e.v):e.w=Us(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&sd(ur[n]||String(n))){var s=Hl(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function wp(e,t,r){return{v:e,ixfe:t,t:r}}function Kpe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,u=[],d="",f={},p,m="",x,v,y,b,k={},N=[],w,T,E=[],S=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},P=function(we){return we<8?Vl[we]:we<64&&S[we-8]||Vl[we]},B=function(we,mt,Ue){var rt=mt.XF.data;if(!(!rt||!rt.patternType||!Ue||!Ue.cellStyles)){mt.s={},mt.s.patternType=rt.patternType;var ut;(ut=kf(P(rt.icvFore)))&&(mt.s.fgColor={rgb:ut}),(ut=kf(P(rt.icvBack)))&&(mt.s.bgColor={rgb:ut})}},I=function(we,mt,Ue){if(!(z>1)&&!(Ue.sheetRows&&we.r>=Ue.sheetRows)){if(Ue.cellStyles&&mt.XF&&mt.XF.data&&B(we,mt,Ue),delete mt.ixfe,delete mt.XF,p=we,m=or(we),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),we.r<o.s.r&&(o.s.r=we.r),we.c<o.s.c&&(o.s.c=we.c),we.r+1>o.e.r&&(o.e.r=we.r+1),we.c+1>o.e.c&&(o.e.c=we.c+1),Ue.cellFormula&&mt.f){for(var rt=0;rt<N.length;++rt)if(!(N[rt][0].s.c>we.c||N[rt][0].s.r>we.r)&&!(N[rt][0].e.c<we.c||N[rt][0].e.r<we.r)){mt.F=kr(N[rt][0]),(N[rt][0].s.c!=we.c||N[rt][0].s.r!=we.r)&&delete mt.f,mt.f&&(mt.f=""+ka(N[rt][1],o,we,R,O));break}}Ue.dense?(s[we.r]||(s[we.r]=[]),s[we.r][we.c]=mt):s[m]=mt}},O={enc:!1,sbcch:0,snames:[],sharedf:k,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var L,X=[],U=[],V=[],ne=[],ee=!1,R=[];R.SheetNames=O.snames,R.sharedf=O.sharedf,R.arrayf=O.arrayf,R.names=[],R.XTI=[];var se=0,z=0,M=0,J=[],te=[],ie;O.codepage=1200,di(1200);for(var me=!1;e.l<e.length-1;){var ve=e.l,ye=e.read_shift(2);if(ye===0&&se===10)break;var he=e.l===e.length?0:e.read_shift(2),pe=WN[ye];if(pe&&pe.f){if(t.bookSheets&&se===133&&ye!==133)break;if(se=ye,pe.r===2||pe.r==12){var De=e.read_shift(2);if(he-=2,!O.enc&&De!==ye&&((De&255)<<8|De>>8)!==ye)throw new Error("rt mismatch: "+De+"!="+ye);pe.r==12&&(e.l+=10,he-=10)}var q={};if(ye===10?q=pe.f(e,he,O):q=Wpe(ye,pe,e,he,O),z==0&&[9,521,1033,2057].indexOf(se)===-1)continue;switch(ye){case 34:r.opts.Date1904=_.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=q,!t.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=q;break;case 66:var Ae=Number(q);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}di(O.codepage=Ae),me=!0;break;case 317:O.rrtabid=q;break;case 25:O.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:O.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(s["!type"]="dialog"),q.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),q.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:E.push(q);break;case 430:R.push([q]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(q);break;case 24:case 536:ie={Name:q.Name,Ref:ka(q.rgce,o,null,R,O)},q.itab>0&&(ie.Sheet=q.itab-1),R.names.push(ie),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(te[q.itab-1]={ref:kr(q.rgce[0][0][1][2])});break;case 22:O.ExternCount=q;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(q),R.XTI=R.XTI.concat(q);break;case 2196:if(O.biff<8)break;ie!=null&&(ie.Comment=q[1]);break;case 18:s["!protect"]=q;break;case 19:q!==0&&O.WTF&&console.error("Password verifier: "+q);break;case 133:i[q.pos]=q,O.snames.push(q.name);break;case 10:{if(--z)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=kr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Be=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=kr(o),o.e.r=Be}o.e.r++,o.e.c++}X.length>0&&(s["!merges"]=X),U.length>0&&(s["!objects"]=U),V.length>0&&(s["!cols"]=V),ne.length>0&&(s["!rows"]=ne),_.Sheets.push(A)}d===""?f=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[ye]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),O.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(O.biff=5,me=!0,di(O.codepage=28591)),O.biff==8&&q.BIFFVer==0&&q.dt==16&&(O.biff=2),z++)break;if(s=t.dense?[]:{},O.biff<8&&!me&&(me=!0,di(O.codepage=t.codepage||1252)),O.biff<5||q.BIFFVer==0&&q.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var xt={pos:e.l-he,name:d};i[xt.pos]=xt,O.snames.push(d)}else d=(i[ve]||{name:""}).name;q.dt==32&&(s["!type"]="chart"),q.dt==64&&(s["!type"]="macro"),X=[],U=[],O.arrayf=N=[],V=[],ne=[],ee=!1,A={Hidden:(i[ve]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[q.r]||[])[q.c]:s[or({c:q.c,r:q.r})])&&++q.c,w={ixfe:q.ixfe,XF:E[q.ixfe]||{},v:q.val,t:"n"},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t);break;case 5:case 517:w={ixfe:q.ixfe,XF:E[q.ixfe],v:q.val,t:q.t},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t);break;case 638:w={ixfe:q.ixfe,XF:E[q.ixfe],v:q.rknum,t:"n"},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t);break;case 189:for(var le=q.c;le<=q.C;++le){var Ee=q.rkrec[le-q.c][0];w={ixfe:Ee,XF:E[Ee],v:q.rkrec[le-q.c][1],t:"n"},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:le,r:q.r},w,t)}break;case 6:case 518:case 1030:{if(q.val=="String"){l=q;break}if(w=wp(q.val,q.cell.ixfe,q.tt),w.XF=E[w.ixfe],t.cellFormula){var Ce=q.formula;if(Ce&&Ce[0]&&Ce[0][0]&&Ce[0][0][0]=="PtgExp"){var $e=Ce[0][0][1][0],Nt=Ce[0][0][1][1],vt=or({r:$e,c:Nt});k[vt]?w.f=""+ka(q.formula,o,q.cell,R,O):w.F=((t.dense?(s[$e]||[])[Nt]:s[vt])||{}).F}else w.f=""+ka(q.formula,o,q.cell,R,O)}M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I(q.cell,w,t),l=q}break;case 7:case 519:if(l)l.val=q,w=wp(q,l.cell.ixfe,"s"),w.XF=E[w.ixfe],t.cellFormula&&(w.f=""+ka(l.formula,o,l.cell,R,O)),M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(q);var qt=or(q[0].s);if(x=t.dense?(s[q[0].s.r]||[])[q[0].s.c]:s[qt],t.cellFormula&&x){if(!l||!qt||!x)break;x.f=""+ka(q[1],o,q[0],R,O),x.F=kr(q[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;k[or(l.cell)]=q[0],x=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[or(l.cell)],(x||{}).f=""+ka(q[0],o,p,R,O)}}break;case 253:w=wp(u[q.isst].t,q.ixfe,"s"),u[q.isst].h&&(w.h=u[q.isst].h),w.XF=E[w.ixfe],M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:q.ixfe,XF:E[q.ixfe],t:"z"},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t));break;case 190:if(t.sheetStubs)for(var gr=q.c;gr<=q.C;++gr){var sr=q.ixfe[gr-q.c];w={ixfe:sr,XF:E[sr],t:"z"},M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:gr,r:q.r},w,t)}break;case 214:case 516:case 4:w=wp(q.val,q.ixfe,"s"),w.XF=E[w.ixfe],M>0&&(w.z=J[w.ixfe>>8&63]),ki(w,t,r.opts.Date1904),I({c:q.c,r:q.r},w,t);break;case 0:case 512:z===1&&(o=q);break;case 252:u=q;break;case 1054:if(O.biff==4){J[M++]=q[1];for(var lr=0;lr<M+163&&ur[lr]!=q[1];++lr);lr>=163&&Kl(q[1],M+163)}else Kl(q[1],q[0]);break;case 30:{J[M++]=q;for(var Qr=0;Qr<M+163&&ur[Qr]!=q;++Qr);Qr>=163&&Kl(q,M+163)}break;case 229:X=X.concat(q);break;case 93:U[q.cmo[0]]=O.lastobj=q;break;case 438:O.lastobj.TxO=q;break;case 127:O.lastobj.ImData=q;break;case 440:for(b=q[0].s.r;b<=q[0].e.r;++b)for(y=q[0].s.c;y<=q[0].e.c;++y)x=t.dense?(s[b]||[])[y]:s[or({c:y,r:b})],x&&(x.l=q[1]);break;case 2048:for(b=q[0].s.r;b<=q[0].e.r;++b)for(y=q[0].s.c;y<=q[0].e.c;++y)x=t.dense?(s[b]||[])[y]:s[or({c:y,r:b})],x&&x.l&&(x.l.Tooltip=q[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;x=t.dense?(s[q[0].r]||[])[q[0].c]:s[or(q[0])];var Hr=U[q[2]];x||(t.dense?(s[q[0].r]||(s[q[0].r]=[]),x=s[q[0].r][q[0].c]={t:"z"}):x=s[or(q[0])]={t:"z"},o.e.r=Math.max(o.e.r,q[0].r),o.s.r=Math.min(o.s.r,q[0].r),o.e.c=Math.max(o.e.c,q[0].c),o.s.c=Math.min(o.s.c,q[0].c)),x.c||(x.c=[]),v={a:q[1],t:Hr.TxO.t},x.c.push(v)}break;case 2173:phe(E[q.ixfe],q.ext);break;case 125:{if(!O.cellStyles)break;for(;q.e>=q.s;)V[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},ee||(ee=!0,Bk(q.w/256)),zu(V[q.e+1])}break;case 520:{var cr={};q.level!=null&&(ne[q.r]=cr,cr.level=q.level),q.hidden&&(ne[q.r]=cr,cr.hidden=!0),q.hpt&&(ne[q.r]=cr,cr.hpt=q.hpt,cr.hpx=Sf(q.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||kh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ye]]=q;break;case 161:s["!margins"]||kh(s["!margins"]={}),s["!margins"].header=q.header,s["!margins"].footer=q.footer;break;case 574:q.RTL&&(_.Views[0].RTL=!0);break;case 146:S=q;break;case 2198:L=q;break;case 140:T=q;break;case 442:d?A.CodeName=q||A.name:_.WBProps.CodeName=q||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+ye.toString(16)),e.l+=he}return r.SheetNames=Ri(i).sort(function(Fe,we){return Number(Fe)-Number(we)}).map(function(Fe){return i[Fe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&te.forEach(function(Fe,we){r.Sheets[r.SheetNames[we]]["!autofilter"]=Fe}),r.Strings=u,r.SSF=ga(ur),O.enc&&(r.Encryption=O.enc),L&&(r.Themes=L),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),R.names.length>0&&(_.Names=R.names),r.Workbook=_,r}var Y6={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Vpe(e,t,r){var n=Nr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=P6(n,uce,Y6.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Nr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=P6(o,dce,Y6.SI);for(var u in l)t[u]==null&&(t[u]=l[u])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(D$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function x8(e,t){t||(t={}),Wk(t),KF(),t.codepage&&Nk(t.codepage);var r,n;if(e.FullPaths){if(Nr.find(e,"/encryption"))throw new Error("File is password-protected");r=Nr.find(e,"!CompObj"),n=Nr.find(e,"/Workbook")||Nr.find(e,"/Book")}else{switch(t.type){case"base64":e=ui(Ns(e));break;case"binary":e=ui(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ha(e,0),n={content:e}}var s,i;if(r&&qpe(r),t.bookProps&&!t.bookSheets)s={};else{var o=wr?"buffer":"array";if(n&&n.content)s=Kpe(n.content,t);else if((i=Nr.find(e,"PerfectOffice_MAIN"))&&i.content)s=jh.to_workbook(i.content,(t.type=o,t));else if((i=Nr.find(e,"NativeContent_MAIN"))&&i.content)s=jh.to_workbook(i.content,(t.type=o,t));else throw(i=Nr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Nr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Phe(e))}var l={};return e.FullPaths&&Vpe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var zm={0:{f:A0e},1:{f:P0e},2:{f:U0e},3:{f:R0e},4:{f:D0e},5:{f:B0e},6:{f:z0e},7:{f:$0e},8:{f:Y0e},9:{f:G0e},10:{f:K0e},11:{f:V0e},12:{f:I0e},13:{f:H0e},14:{f:F0e},15:{f:M0e},16:{f:h8},17:{f:W0e},18:{f:L0e},19:{f:Dk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:jpe},40:{},42:{},43:{f:Kde},44:{f:Wde},45:{f:Vde},46:{f:Yde},47:{f:Gde},48:{},49:{f:Xle},50:{},51:{f:ghe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:K$},62:{f:q0e},63:{f:whe},64:{f:ape},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Oa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:npe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:O0e},148:{f:T0e,p:16},151:{f:Q0e},152:{},153:{f:bpe},154:{},155:{},156:{f:vpe},157:{},158:{},159:{T:1,f:dde},160:{T:-1},161:{T:1,f:pc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:X0e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:mhe},336:{T:-1},337:{f:xhe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BN},357:{},358:{},359:{},360:{T:1},361:{},362:{f:W$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Z0e},427:{f:epe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:rpe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:C0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:J0e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BN},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:The},633:{T:1},634:{T:-1},635:{T:1,f:Ahe},636:{T:-1},637:{f:Qle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:upe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:spe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},WN={6:{f:U1},10:{f:Uo},12:{f:Tn},13:{f:Tn},14:{f:bn},15:{f:bn},16:{f:Ea},17:{f:bn},18:{f:bn},19:{f:Tn},20:{f:R6},21:{f:R6},23:{f:W$},24:{f:$6},25:{f:bn},26:{},27:{},28:{f:_ue},29:{},34:{f:bn},35:{f:F6},38:{f:Ea},39:{f:Ea},40:{f:Ea},41:{f:Ea},42:{f:bn},43:{f:bn},47:{f:Cde},49:{f:oue},51:{f:Tn},60:{},61:{f:aue},64:{f:bn},65:{f:iue},66:{f:Tn},77:{},80:{},81:{},82:{},85:{f:Tn},89:{},90:{},91:{},92:{f:Xce},93:{f:Aue},94:{},95:{f:bn},96:{},97:{},99:{f:bn},125:{f:K$},128:{f:xue},129:{f:Jce},130:{f:Tn},131:{f:bn},132:{f:bn},133:{f:Qce},134:{},140:{f:Due},141:{f:Tn},144:{},146:{f:Rue},151:{},152:{},153:{},154:{},155:{},156:{f:Tn},157:{},158:{},160:{f:Uue},161:{f:$ue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:fue},190:{f:pue},193:{f:Uo},197:{},198:{},199:{},200:{},201:{},202:{f:bn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Tn},220:{},221:{f:bn},222:{},224:{f:gue},225:{f:Yce},226:{f:Uo},227:{},229:{f:Eue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Zce},253:{f:lue},255:{f:eue},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:L$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:bn},353:{f:Uo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:vue},431:{f:bn},432:{},433:{},434:{},437:{},438:{f:Oue},439:{f:bn},440:{f:Pue},441:{},442:{f:Hf},443:{},444:{f:Tn},445:{},446:{},448:{f:Uo},449:{f:nue,r:2},450:{f:Uo},512:{f:D6},513:{f:Bue},515:{f:yue},516:{f:cue},517:{f:M6},519:{f:Hue},520:{f:tue},523:{},545:{f:L6},549:{f:I6},566:{},574:{f:sue},638:{f:hue},659:{},1048:{},1054:{f:uue},1084:{},1212:{f:Nue},2048:{f:Iue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yp},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Uo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Fue,r:12},2173:{f:fhe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:bn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:jue,r:12},2197:{},2198:{f:ohe,r:12},2199:{},2200:{},2201:{},2202:{f:kue,r:12},2203:{f:Uo},2204:{},2205:{},2206:{},2207:{},2211:{f:rue},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Tn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Lue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Mue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:D6},1:{},2:{f:Kue},3:{f:Wue},4:{f:zue},5:{f:M6},7:{f:Vue},8:{},9:{f:yp},11:{},22:{f:Tn},30:{f:due},31:{},32:{},33:{f:L6},36:{},37:{f:I6},50:{f:Gue},62:{},52:{},67:{},68:{f:Tn},69:{},86:{},126:{},127:{f:que},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Yue},223:{},234:{},354:{},421:{},518:{f:U1},521:{f:yp},536:{f:$6},547:{f:F6},561:{},579:{},1030:{f:U1},1033:{f:yp},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ei(e,t,r,n){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&_$(r)&&e.push(r)}}function X6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,u=yle(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,p=0,m=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<u.length;++o){var y=u[o].trim(),b=y.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(b!="<td"&&b!="<th")){var k=y.split(/<\/t[dh]>/i);for(l=0;l<k.length;++l){var N=k[l].trim();if(N.match(/<t[dh]/i)){for(var w=N,T=0;w.charAt(0)=="<"&&(T=w.indexOf(">"))>-1;)w=w.slice(T+1);for(var E=0;E<v.length;++E){var S=v[E];S.s.c==f&&S.s.r<d&&d<=S.e.r&&(f=S.e.c+1,E=-1)}var _=Qt(N.slice(0,N.indexOf(">")));m=_.colspan?+_.colspan:1,((p=+_.rowspan)>1||m>1)&&v.push({s:{r:d,c:f},e:{r:d+(p||1)-1,c:f+m-1}});var A=_.t||_["data-t"]||"";if(!w.length){f+=m;continue}if(w=f$(w),x.s.r>d&&(x.s.r=d),x.e.r<d&&(x.e.r=d),x.s.c>f&&(x.s.c=f),x.e.c<f&&(x.e.c=f),!w.length){f+=m;continue}var P={t:"s",v:w};r.raw||!w.trim().length||A=="s"||(w==="TRUE"?P={t:"b",v:!0}:w==="FALSE"?P={t:"b",v:!1}:isNaN(gi(w))?isNaN(qu(w).getDate())||(P={t:"d",v:aa(w)},r.cellDates||(P={t:"n",v:za(P.v)}),P.z=r.dateNF||ur[14]):P={t:"n",v:gi(w)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=P):n[or({r:d,c:f})]=P,f+=m}}}}return n["!ref"]=kr(x),v.length&&(n["!merges"]=v),n}function Gpe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,u=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,u=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var f=or({r,c:o}),p=n.dense?(e[r]||[])[o]:e[f],m=p&&p.v!=null&&(p.h||Tk(p.w||(vo(p),p.w)||""))||"",x={};l>1&&(x.rowspan=l),u>1&&(x.colspan=u),n.editable?m='<span contenteditable="true">'+m+"</span>":p&&(x["data-t"]=p&&p.t||"z",p.v!=null&&(x["data-v"]=p.v),p.z!=null&&(x["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+p.l.Target+'">'+m+"</a>")),x.id=(n.id||"sjs")+"-"+f,i.push(Dle("td",m,x))}}var v="<tr>";return v+i.join("")+"</tr>"}var Ype='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Xpe="</body></html>";function Jpe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return dl(X6(r[0],t),t);var n=Vk();return r.forEach(function(s,i){Gk(n,X6(s,t),"Sheet"+(i+1))}),n}function Qpe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Zpe(e,t){var r=t||{},n=r.header!=null?r.header:Ype,s=r.footer!=null?r.footer:Xpe,i=[n],o=id(e["!ref"]);r.dense=Array.isArray(e),i.push(Qpe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Gpe(e,o,l,r));return i.push("</table>"+s),i.join("")}function y8(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Ha(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=id(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),s==-1&&(d.e.r=s=f.e.r+1)}var p=[],m=0,x=e["!rows"]||(e["!rows"]=[]),v=0,y=0,b=0,k=0,N=0,w=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&y<u;++v){var T=l[v];if(J6(T)){if(n.display)continue;x[y]={hidden:!0}}var E=T.children;for(b=k=0;b<E.length;++b){var S=E[b];if(!(n.display&&J6(S))){var _=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):f$(S.innerHTML),A=S.getAttribute("data-z")||S.getAttribute("z");for(m=0;m<p.length;++m){var P=p[m];P.s.c==k+i&&P.s.r<y+s&&y+s<=P.e.r&&(k=P.e.c+1-i,m=-1)}w=+S.getAttribute("colspan")||1,((N=+S.getAttribute("rowspan")||1)>1||w>1)&&p.push({s:{r:y+s,c:k+i},e:{r:y+s+(N||1)-1,c:k+i+(w||1)-1}});var B={t:"s",v:_},I=S.getAttribute("data-t")||S.getAttribute("t")||"";_!=null&&(_.length==0?B.t=I||"z":n.raw||_.trim().length==0||I=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(gi(_))?isNaN(qu(_).getDate())||(B={t:"d",v:aa(_)},n.cellDates||(B={t:"n",v:za(B.v)}),B.z=n.dateNF||ur[14]):B={t:"n",v:gi(_)})),B.z===void 0&&A!=null&&(B.z=A);var O="",L=S.getElementsByTagName("A");if(L&&L.length)for(var X=0;X<L.length&&!(L[X].hasAttribute("href")&&(O=L[X].getAttribute("href"),O.charAt(0)!="#"));++X);O&&O.charAt(0)!="#"&&(B.l={Target:O}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][k+i]=B):e[or({c:k+i,r:y+s})]=B,d.e.c<k+i&&(d.e.c=k+i),k+=w}}++y}return p.length&&(e["!merges"]=(e["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,y-1+s),e["!ref"]=kr(d),y>=u&&(e["!fullref"]=kr((d.e.r=l.length-v+y-1+s,d))),e}function v8(e,t){var r=t||{},n=r.dense?[]:{};return y8(n,e,t)}function eme(e,t){return dl(v8(e,t),t)}function J6(e){var t="",r=tme(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function tme(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function rme(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=_r(t.replace(/<[^>]*>/g,""));return[r]}var Q6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function b8(e,t){var r=t||{},n=Ck(e),s=[],i,o,l={name:""},u="",d=0,f,p,m={},x=[],v=r.dense?[]:{},y,b,k={value:""},N="",w=0,T=[],E=-1,S=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,P={},B=[],I={},O=0,L=0,X=[],U=1,V=1,ne=[],ee={Names:[]},R={},se=["",""],z=[],M={},J="",te=0,ie=!1,me=!1,ve=0;for(jf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=jf.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?v["!ref"]=kr(_):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(v["!fullref"]=v["!ref"],_.e.r=r.sheetRows-1,v["!ref"]=kr(_)),B.length&&(v["!merges"]=B),X.length&&(v["!rows"]=X),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),x.push(f.name),m[f.name]=v,me=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=Qt(y[0],!1),E=S=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,v=r.dense?[]:{},B=[],X=[],me=!0);break;case"table-row-group":y[1]==="/"?--A:++A;break;case"table-row":case"":if(y[1]==="/"){E+=U,U=1;break}if(p=Qt(y[0],!1),p.?E=p.-1:E==-1&&(E=0),U=+p["number-rows-repeated"]||1,U<10)for(ve=0;ve<U;++ve)A>0&&(X[E+ve]={level:A});S=-1;break;case"covered-table-cell":y[1]!=="/"&&++S,r.sheetStubs&&(r.dense?(v[E]||(v[E]=[]),v[E][S]={t:"z"}):v[or({r:E,c:S})]={t:"z"}),N="",T=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++S,k=Qt(y[0],!1),V=parseInt(k["number-columns-repeated"]||"1",10),b={t:"z",v:null},k.formula&&r.cellFormula!=!1&&(b.f=K6(_r(k.formula))),(k.||k["value-type"])=="string"&&(b.t="s",b.v=_r(k["string-value"]||""),r.dense?(v[E]||(v[E]=[]),v[E][S]=b):v[or({r:E,c:S})]=b),S+=V-1;else if(y[1]!=="/"){++S,N="",w=0,T=[],V=1;var ye=U?E+U-1:E;if(S>_.e.c&&(_.e.c=S),S<_.s.c&&(_.s.c=S),E<_.s.r&&(_.s.r=E),ye>_.e.r&&(_.e.r=ye),k=Qt(y[0],!1),z=[],M={},b={t:k.||k["value-type"],v:null},r.cellFormula)if(k.formula&&(k.formula=_r(k.formula)),k["number-matrix-columns-spanned"]&&k["number-matrix-rows-spanned"]&&(O=parseInt(k["number-matrix-rows-spanned"],10)||0,L=parseInt(k["number-matrix-columns-spanned"],10)||0,I={s:{r:E,c:S},e:{r:E+O-1,c:S+L-1}},b.F=kr(I),ne.push([I,b.F])),k.formula)b.f=K6(k.formula);else for(ve=0;ve<ne.length;++ve)E>=ne[ve][0].s.r&&E<=ne[ve][0].e.r&&S>=ne[ve][0].s.c&&S<=ne[ve][0].e.c&&(b.F=ne[ve][1]);switch((k["number-columns-spanned"]||k["number-rows-spanned"])&&(O=parseInt(k["number-rows-spanned"],10)||0,L=parseInt(k["number-columns-spanned"],10)||0,I={s:{r:E,c:S},e:{r:E+O-1,c:S+L-1}},B.push(I)),k["number-columns-repeated"]&&(V=parseInt(k["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=sn(k["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(k.value);break;case"percentage":b.t="n",b.v=parseFloat(k.value);break;case"currency":b.t="n",b.v=parseFloat(k.value);break;case"date":b.t="d",b.v=aa(k["date-value"]),r.cellDates||(b.t="n",b.v=za(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=mle(k["time-value"])/86400,r.cellDates&&(b.t="d",b.v=Lg(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(k.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",k["string-value"]!=null&&(N=_r(k["string-value"]),T=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(ie=!1,b.t==="s"&&(b.v=N||"",T.length&&(b.R=T),ie=w==0),R.Target&&(b.l=R),z.length>0&&(b.c=z,z=[]),N&&r.cellText!==!1&&(b.w=N),ie&&(b.t="z",delete b.v),(!ie||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var he=0;he<U;++he){if(V=parseInt(k["number-columns-repeated"]||"1",10),r.dense)for(v[E+he]||(v[E+he]=[]),v[E+he][S]=he==0?b:ga(b);--V>0;)v[E+he][S+V]=ga(b);else for(v[or({r:E+he,c:S})]=b;--V>0;)v[or({r:E+he,c:S+V})]=ga(b);_.e.c<=S&&(_.e.c=S)}V=parseInt(k["number-columns-repeated"]||"1",10),S+=V-1,V=0,b={},N="",T=[]}R={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;M.t=N,T.length&&(M.R=T),M.a=J,z.push(M)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);J="",te=0,N="",w=0,T=[];break;case"creator":y[1]==="/"?J=n.slice(te,y.index):te=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);N="",w=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(P[l.name]=u,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(u="",l=Qt(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Qt(y[0],!1),u+=Q6[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Qt(y[0],!1),u+=Q6[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=n.slice(d,y.index);break}else d=y.index+y[0].length;break;case"named-range":o=Qt(y[0],!1),se=H1(o["cell-range-address"]);var pe={Name:o.name,Ref:se[0]+"!"+se[1]};me&&(pe.Sheet=x.length),ee.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!k||!k["string-value"])){var De=rme(n.slice(w,y.index));N=(N.length>0?N+`
`:"")+De[0]}else Qt(y[0],!1),w=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{se=H1(Qt(y[0])["target-range-address"]),m[se[0]]["!autofilter"]={ref:se[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(R=Qt(y[0],!1),!R.href)break;R.Target=_r(R.href),delete R.href,R.Target.charAt(0)=="#"&&R.Target.indexOf(".")>-1?(se=H1(R.Target.slice(1)),R.Target="#"+se[0]+"!"+se[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var q={Sheets:m,SheetNames:x,Workbook:ee};return r.bookSheets&&delete q.Sheets,q}function Z6(e,t){t=t||{},Rs(e,"META-INF/manifest.xml")&&yce(An(e,"META-INF/manifest.xml"),t);var r=vs(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=b8(Jr(r),t);return Rs(e,"meta.xml")&&(n.Props=I$(An(e,"meta.xml"))),n}function eI(e,t){return b8(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function qk(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function KN(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Jr(hc(e))}function VN(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function tI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function nme(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function _f(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Kn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ta(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=_f(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var u=r[0];e[r[0]++]>=128;);l=e.slice(u,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=_f(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function zk(e,t){return e?.map(function(r){return t(r.data)})||[]}function ame(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=_f(e,n),i=Ta(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:Kn(i[1][0].data),messages:[]};i[2].forEach(function(l){var u=Ta(l.data),d=Kn(u[3][0].data);o.messages.push({meta:u,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Kn(i[3][0].data)>>>0>0),r.push(o)}return r}function sme(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=_f(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var u=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,u=(t[r[0]++]&224)<<3,u|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(u=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(u=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[VN(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(d>=u)for(s.push(s[0].slice(-u)),d-=u;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-u,-u+d))}}var f=VN(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function ime(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(sme(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return VN(t)}function ome(e,t,r,n){var s=qk(e),i=s.getUint32(4,!0),o=(n>1?12:8)+tI(i&(n>1?3470:398))*4,l=-1,u=-1,d=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=tI(i&(n>1?12288:4096))*4,i&16&&(u=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var p;switch(e[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:t[u]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else if(u>-1)p={t:"s",v:t[u]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return p}function lme(e,t,r){var n=qk(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,u=NaN,d=NaN,f=new Date(2001,0,1);s&1&&(u=nme(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var p;switch(e[1]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:t[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:p={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return p}function cme(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return ome(e,t,r,e[0]);case 5:return lme(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function rl(e){var t=Ta(e);return _f(t[1][0].data)}function rI(e,t){var r=Ta(t.data),n=Kn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Ta(o.data),u=Kn(l[1][0].data)>>>0;switch(n){case 1:i[u]=KN(l[3][0].data);break;case 8:{var d=e[rl(l[9][0].data)][0],f=Ta(d.data),p=e[rl(f[1][0].data)][0],m=Kn(p.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var x=Ta(p.data);i[u]=x[3].map(function(v){return KN(v.data)}).join("")}break}}),i}function ume(e,t){var r,n,s,i,o,l,u,d,f,p,m,x,v,y,b=Ta(e),k=Kn(b[1][0].data)>>>0,N=Kn(b[2][0].data)>>>0,w=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Kn(b[8][0].data)>0||!1,T,E;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)T=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,E=(d=(u=b[6])==null?void 0:u[0])==null?void 0:d.data;else if((p=(f=b[4])==null?void 0:f[0])!=null&&p.data&&t!=1)T=(x=(m=b[4])==null?void 0:m[0])==null?void 0:x.data,E=(y=(v=b[3])==null?void 0:v[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var S=w?4:1,_=qk(T),A=[],P=0;P<T.length/2;++P){var B=_.getUint16(P*2,!0);B<65535&&A.push([P,B])}if(A.length!=N)throw"Expected ".concat(N," cells, found ").concat(A.length);var I=[];for(P=0;P<A.length-1;++P)I[A[P][0]]=E.subarray(A[P][1]*S,A[P+1][1]*S);return A.length>=1&&(I[A[A.length-1][0]]=E.subarray(A[A.length-1][1]*S)),{R:k,cells:I}}function dme(e,t){var r,n=Ta(t.data),s=(r=n?.[7])!=null&&r[0]?Kn(n[7][0].data)>>>0>0?1:0:-1,i=zk(n[5],function(o){return ume(o,s)});return{nrows:Kn(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(u,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=u}),o},[])}}function hme(e,t,r){var n,s=Ta(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Kn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Kn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=kr(i);var o=Ta(s[4][0].data),l=rI(e,e[rl(o[4][0].data)][0]),u=(n=o[17])!=null&&n[0]?rI(e,e[rl(o[17][0].data)][0]):[],d=Ta(o[3][0].data),f=0;d[1].forEach(function(p){var m=Ta(p.data),x=e[rl(m[2][0].data)][0],v=Kn(x.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var y=dme(e,x);y.data.forEach(function(b,k){b.forEach(function(N,w){var T=or({r:f+k,c:w}),E=cme(N,l,u);E&&(r[T]=E)})}),f+=y.nrows})}function fme(e,t){var r=Ta(t.data),n={"!ref":"A1"},s=e[rl(r[2][0].data)],i=Kn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return hme(e,s[0],n),n}function pme(e,t){var r,n=Ta(t.data),s={name:(r=n[1])!=null&&r[0]?KN(n[1][0].data):"",sheets:[]},i=zk(n[2],rl);return i.forEach(function(o){e[o].forEach(function(l){var u=Kn(l.meta[1][0].data);u==6e3&&s.sheets.push(fme(e,l))})}),s}function mme(e,t){var r=Vk(),n=Ta(t.data),s=zk(n[1],rl);if(s.forEach(function(i){e[i].forEach(function(o){var l=Kn(o.meta[1][0].data);if(l==2){var u=pme(e,o);u.sheets.forEach(function(d,f){Gk(r,d,f==0?u.name:u.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function z1(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var d;try{d=ime(u.content)}catch(p){return console.log("?? "+u.content.length+" "+(p.message||p))}var f;try{f=ame(d)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,o.push(p.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Kn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(u){i[u].forEach(function(d){var f=Kn(d.meta[1][0].data)>>>0;if(f==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return mme(i,l)}function gme(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Wk(e){gme([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function xme(e){return lu.WS.indexOf(e)>-1?"sheet":e==lu.CS?"chart":e==lu.DS?"dialog":e==lu.MS?"macro":e&&e.length?e:"sheet"}function yme(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,xme(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function vme(e,t,r,n,s,i,o,l,u,d,f,p){try{i[n]=bh(vs(e,r,!0),t);var m=An(e,t),x;switch(l){case"sheet":x=Spe(m,t,s,u,i[n],d,f,p);break;case"chart":if(x=_pe(m,t,s,u,i[n],d,f,p),!x||!x["!drawel"])break;var v=sh(x["!drawel"].Target,t),y=UN(v),b=khe(vs(e,v,!0),bh(vs(e,y,!0),v)),k=sh(b,v),N=UN(k);x=lpe(vs(e,k,!0),k,u,bh(vs(e,N,!0),k),d,x);break;case"macro":x=Epe(m,t,s,u,i[n],d,f,p);break;case"dialog":x=Ape(m,t,s,u,i[n],d,f,p);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=x;var w=[];i&&i[n]&&Ri(i[n]).forEach(function(T){var E="";if(i[n][T].Type==lu.CMNT){E=sh(i[n][T].Target,t);var S=Ppe(An(e,E,!0),E,u);if(!S||!S.length)return;U6(x,S,!1)}i[n][T].Type==lu.TCMNT&&(E=sh(i[n][T].Target,t),w=w.concat(_he(An(e,E,!0),u)))}),w&&w.length&&U6(x,w,!0,u.people||[])}catch(T){if(u.WTF)throw T}}function Is(e){return e.charAt(0)=="/"?e.slice(1):e}function bme(e,t){if(a$(),t=t||{},Wk(t),Rs(e,"META-INF/manifest.xml")||Rs(e,"objectdata.xml"))return Z6(e,t);if(Rs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof z1<"u"){if(e.FileIndex)return z1(e);var r=Nr.utils.cfb_new();return p6(e).forEach(function(X){wle(r,X,ble(e,X))}),z1(r)}throw new Error("Unsupported NUMBERS file")}if(!Rs(e,"[Content_Types].xml"))throw Rs(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Rs(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=p6(e),s=gce(vs(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",An(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!An(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var u={},d={};if(!t.bookSheets&&!t.bookProps){if(Nh=[],s.sst)try{Nh=Ope(An(e,Is(s.sst)),s.sst,t)}catch(X){if(t.WTF)throw X}t.cellStyles&&s.themes.length&&(u=Cpe(vs(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=Tpe(An(e,Is(s.style)),s.style,u,t))}s.links.map(function(X){try{var U=bh(vs(e,UN(Is(X))),X);return Dpe(An(e,Is(X)),U,X,t)}catch{}});var f=kpe(An(e,Is(s.workbooks[0])),s.workbooks[0],t),p={},m="";s.coreprops.length&&(m=An(e,Is(s.coreprops[0]),!0),m&&(p=I$(m)),s.extprops.length!==0&&(m=An(e,Is(s.extprops[0]),!0),m&&wce(m,p,t)));var x={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=vs(e,Is(s.custprops[0]),!0),m&&(x=Nce(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(U){return U.name}):p.Worksheets&&p.SheetNames.length>0&&(o=p.SheetNames),t.bookProps&&(v.Props=p,v.Custprops=x),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var y={};t.bookDeps&&s.calcchain&&(y=Ipe(An(e,Is(s.calcchain)),s.calcchain));var b=0,k={},N,w;{var T=f.Sheets;p.Worksheets=T.length,p.SheetNames=[];for(var E=0;E!=T.length;++E)p.SheetNames[E]=T[E].name}var S=i?"bin":"xml",_=s.workbooks[0].lastIndexOf("/"),A=(s.workbooks[0].slice(0,_+1)+"_rels/"+s.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Rs(e,A)||(A="xl/_rels/workbook."+S+".rels");var P=bh(vs(e,A,!0),A.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Mpe(An(e,Is(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Ehe(An(e,Is(s.people[0])),t)),P&&(P=yme(P,f.Sheets));var B=An(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=p.Worksheets;++b){var I="sheet";if(P&&P[b]?(N="xl/"+P[b][1].replace(/[\/]?xl\//,""),Rs(e,N)||(N=P[b][1]),Rs(e,N)||(N=A.replace(/_rels\/.*$/,"")+P[b][1]),I=P[b][2]):(N="xl/worksheets/sheet"+(b+1-B)+"."+S,N=N.replace(/sheet0\./,"sheet.")),w=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(p.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==b&&(O=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==p.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}vme(e,N,w,p.SheetNames[b],b,k,o,I,t,f,u,d)}return v={Directory:s,Workbook:f,Props:p,Custprops:x,Deps:y,Sheets:o,SheetNames:p.SheetNames,Strings:Nh,Styles:d,Themes:u,SSF:ga(ur)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(X,U){X=X.replace(/^Root Entry[\/]/,""),v.keys.push(X),v.files[X]=e.FileIndex[U]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=An(e,Is(s.vba[0]),!0):s.defaults&&s.defaults.bin===Ohe&&(v.vbaraw=An(e,"xl/vbaProject.bin",!0))),v}function wme(e,t){var r=t||{},n="Workbook",s=Nr.find(e,n);try{if(n="/!DataSpaces/Version",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(fde(s.content),n="/!DataSpaces/DataSpaceMap",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=mde(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=gde(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);yde(s.content)}catch{}if(n="/EncryptionInfo",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=vde(s.content);if(n="/EncryptedPackage",s=Nr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Kk(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ns(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function jme(e,t){return Nr.find(e,"EncryptedPackage")?wme(e,t):x8(e,t)}function Nme(e,t){var r,n=e,s=t||{};return s.type||(s.type=wr&&Buffer.isBuffer(e)?"buffer":"base64"),r=u$(n,s),bme(r,s)}function w8(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return zN(e.slice(r),t);default:break e}return Nf.to_workbook(e,t)}function kme(e,t){var r="",n=Kk(e,t);switch(t.type){case"base64":r=Ns(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=ac(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Jr(r)),t.type="binary",w8(r,t)}function Sme(e,t){var r=e;return t.type=="base64"&&(r=Ns(r)),r=vf.utils.decode(1200,r.slice(2),"str"),t.type="binary",w8(r,t)}function _me(e){return e.match(/[^\x00-\x7F]/)?ih(e):e}function W1(e,t,r,n){return n?(r.type="string",Nf.to_workbook(e,r)):Nf.to_workbook(t,r)}function GN(e,t){KF();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return GN(new Uint8Array(e),(r=ga(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),gu={},r.dateNF&&(gu.dateNF=r.dateNF),r.type||(r.type=wr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=wr?"buffer":"binary",n=fle(e),typeof Uint8Array<"u"&&!wr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=_me(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=ga(r),r.type="array",GN(kk(n),r)}switch((s=Kk(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return jme(Nr.read(n,r),r);break;case 9:if(s[1]<=8)return x8(n,r);break;case 60:return zN(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return ede(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Que.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Nme(n,r):W1(e,n,r,i);case 239:return s[3]===60?zN(n,r):W1(e,n,r,i);case 255:if(s[1]===254)return Sme(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return jh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return jh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return B6.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return Ode.to_workbook(n,r);break;case 10:case 13:case 32:return kme(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Xue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?B6.to_workbook(n,r):W1(e,n,r,i)}function Eme(e,t,r,n,s,i,o,l){var u=xa(r),d=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),p=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var x=t.s.c;x<=t.e.c;++x){var v=o?e[r][x]:e[n[x]+u];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[x]!=null&&(m[i[x]]=d);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[x]!=null){if(y==null)if(v.t=="e"&&y===null)m[i[x]]=null;else if(d!==void 0)m[i[x]]=d;else if(f&&y===null)m[i[x]]=null;else continue;else m[i[x]]=f&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?y:vo(v,y,l);y!=null&&(p=!1)}}return{row:m,isempty:p}}function YN(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":u=yn(f);break;case"number":u=yn(e["!ref"]),u.s.r=f;break;default:u=f}n>0&&(s=0);var p=xa(u.s.r),m=[],x=[],v=0,y=0,b=Array.isArray(e),k=u.s.r,N=0,w={};b&&!e[k]&&(e[k]=[]);var T=d.skipHidden&&e["!cols"]||[],E=d.skipHidden&&e["!rows"]||[];for(N=u.s.c;N<=u.e.c;++N)if(!(T[N]||{}).hidden)switch(m[N]=Wn(N),r=b?e[k][N]:e[m[N]+p],n){case 1:i[N]=N-u.s.c;break;case 2:i[N]=m[N];break;case 3:i[N]=d.header[N-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=vo(r,null,d),y=w[o]||0,!y)w[o]=1;else{do l=o+"_"+y++;while(w[l]);w[o]=y,w[l]=1}i[N]=l}for(k=u.s.r+s;k<=u.e.r;++k)if(!(E[k]||{}).hidden){var S=Eme(e,u,k,m,n,i,b,d);(S.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(x[v++]=S.row)}return x.length=v,x}var nI=/"/g;function Ame(e,t,r,n,s,i,o,l){for(var u=!0,d=[],f="",p=xa(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var x=l.dense?(e[r]||[])[m]:e[n[m]+p];if(x==null)f="";else if(x.v!=null){u=!1,f=""+(l.rawNumbers&&x.t=="n"?x.v:vo(x,null,l));for(var v=0,y=0;v!==f.length;++v)if((y=f.charCodeAt(v))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(nI,'""')+'"';break}f=="ID"&&(f='"ID"')}else x.f!=null&&!x.F?(u=!1,f="="+x.f,f.indexOf(",")>=0&&(f='"'+f.replace(nI,'""')+'"')):f="";d.push(f)}return l.blankrows===!1&&u?null:d.join(o)}function j8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=yn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],x=n.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(m[v]||{}).hidden||(p[v]=Wn(v));for(var y=0,b=s.s.r;b<=s.e.r;++b)(x[b]||{}).hidden||(f=Ame(e,s,b,p,o,u,i,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete n.dense,r.join("")}function Tme(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=j8(e,t);return r}function Cme(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=yn(e["!ref"]),i="",o=[],l,u=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Wn(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=xa(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}u[u.length]=t+"="+n}return u}function N8(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Ha(n.origin):n.origin;o=u.r,l=u.c}var d,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var p=yn(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(o=p.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var m=n.header||[],x=0;t.forEach(function(y,b){Ri(y).forEach(function(k){(x=m.indexOf(k))==-1&&(m[x=m.length]=k);var N=y[k],w="z",T="",E=or({c:l+x,r:o+b+s});d=Ef(i,E),N&&typeof N=="object"&&!(N instanceof Date)?i[E]=N:(typeof N=="number"?w="n":typeof N=="boolean"?w="b":typeof N=="string"?w="s":N instanceof Date?(w="d",n.cellDates||(w="n",N=za(N)),T=n.dateNF||ur[14]):N===null&&n.nullError&&(w="e",N=0),d?(d.t=w,d.v=N,delete d.w,delete d.R,T&&(d.z=T)):i[E]=d={t:w,v:N},T&&(d.z=T))})}),f.e.c=Math.max(f.e.c,l+m.length-1);var v=xa(o);if(s)for(x=0;x<m.length;++x)i[Wn(x+l)+v]={t:"s",v:m[x]};return i["!ref"]=kr(f),i}function Ome(e,t){return N8(null,e,t)}function Ef(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ha(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ef(e,or(t)):Ef(e,or({r:t,c:r||0}))}function Pme(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Vk(){return{SheetNames:[],Sheets:{}}}function Gk(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(gpe(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Ime(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Pme(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Dme(e,t){return e.z=t,e}function k8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Mme(e,t,r){return k8(e,"#"+t,r)}function Rme(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Fme(e,t,r,n){for(var s=typeof t!="string"?t:yn(t),i=typeof t=="string"?t:kr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var u=Ef(e,o,l);u.t="n",u.F=i,delete u.v,o==s.s.r&&l==s.s.c&&(u.f=r,n&&(u.D=!0))}return e}var $me={encode_col:Wn,encode_row:xa,encode_cell:or,encode_range:kr,decode_col:Ik,decode_row:Pk,split_cell:Yle,decode_cell:Ha,decode_range:id,format_cell:vo,sheet_add_aoa:A$,sheet_add_json:N8,sheet_add_dom:y8,aoa_to_sheet:od,json_to_sheet:Ome,table_to_sheet:v8,table_to_book:eme,sheet_to_csv:j8,sheet_to_txt:Tme,sheet_to_json:YN,sheet_to_html:Zpe,sheet_to_formulae:Cme,sheet_to_row_object_array:YN,sheet_get_cell:Ef,book_new:Vk,book_append_sheet:Gk,book_set_sheet_visibility:Ime,cell_set_number_format:Dme,cell_set_hyperlink:k8,cell_set_internal_link:Mme,cell_add_comment:Rme,sheet_set_array_formula:Fme,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Lme={"Chicken Momos":6,"Chicken Cheese Momos":6,"Veg Momos":6,"Paneer Momos":6,"Cheese Corn Momos":6,"Chicken Kurkure Momos":6,"Veg Kurkure Momos":6};function Bme({context:e,selectedStoreId:t}){const[r,n]=F.useState([]),[s,i]=F.useState(!0),[o,l]=F.useState(!1),[u,d]=F.useState(new Date().toISOString().split("T")[0]),[f,p]=F.useState("daily"),[m,x]=F.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[v,y]=F.useState(new Date().getDay()),[b,k]=F.useState(!1),[N,w]=F.useState(Lme),T=t||e.user?.storeId||null;F.useEffect(()=>{const U=localStorage.getItem("momoPlateConfig");if(U)try{w(JSON.parse(U))}catch(V){console.error("Failed to load plate config:",V)}},[]);const E=(U,V)=>{const ne={...N,[U]:V};w(ne),localStorage.setItem("momoPlateConfig",JSON.stringify(ne))};F.useEffect(()=>{S()},[T]);const S=async()=>{try{i(!0);let V=(await ng(e.user?.accessToken||"")).data||[];V=V.filter(ne=>!!ne&&!!ne.storeId),T&&(V=V.filter(ne=>ne.storeId===T)),V.sort((ne,ee)=>new Date(ee.date).getTime()-new Date(ne.date).getTime()),n(V)}catch(U){console.error("Error loading sales data:",U),mr.error("Failed to load sales data")}finally{i(!1)}},_=U=>new Promise((V,ne)=>{const ee=new FileReader;ee.onload=R=>{try{const se=R.target?.result,z=GN(se,{type:"binary"}),M=z.SheetNames[0],J=z.Sheets[M],te=$me.sheet_to_json(J),ie=B(te);V(ie)}catch(se){ne(se)}},ee.onerror=()=>ne(new Error("Failed to read file")),ee.readAsBinaryString(U)}),A=U=>{const V=String(U.Item||""),ne=Number(U["Total Quantity"]||U["Total Qua"]||0);if(V.toLowerCase().includes("mania")&&V.toLowerCase().includes("combo")||!ne||ne===0)return 0;if(V.toLowerCase().includes("burger")){let z=1;const M=V.match(/(\d+)\s*(?:pcs|pieces|piece)/i);return M&&(z=parseInt(M[1])),ne*z*2}const R=V.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(R){let se=parseInt(R[1]);const z=V.match(/pack of\s*(\d+)/i);return z&&(se*=parseInt(z[1])),ne*se}return ne*N[V]},P=U=>{if(typeof U!="string")return"Other";const V=U.toLowerCase();return["drink","cola","campa","water","beverage"].some(ne=>V.includes(ne))?"Other":V.includes("kurkure")?V.includes("chicken")?"Chicken Kurkure Momos":V.includes("veg")?"Veg Kurkure Momos":"Other Kurkure Momos":V.includes("paneer")?"Paneer Momos":V.includes("corn")&&V.includes("cheese")?"Cheese Corn Momos":V.includes("chicken")&&V.includes("cheese")?"Chicken Cheese Momos":V.includes("chicken")?"Chicken Momos":V.includes("veg")?"Veg Momos":"Other"},B=U=>{const V={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return U.forEach(ne=>{const ee=A(ne),R=P(ne.Item||"");R in V&&(V[R]+=ee)}),V},I=async U=>{const V=U.target.files?.[0];if(!V)return;if(!V.name.endsWith(".xlsx")&&!V.name.endsWith(".xls")&&!V.name.endsWith(".csv")){mr.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}let ne=u;const ee=/_(\d{2})_(\d{2})_(\d{4})-\d{2}_\d{2}_\d{4}\./,R=V.name.match(ee);if(R){const[,se,z,M]=R;ne=`${M}-${z}-${se}`,console.log(` Extracted date from filename: ${V.name} -> ${ne}`),d(ne)}else console.warn(" Could not extract date from filename, using manually selected date:",u);if(!ne){mr.error("Please select a date or use a filename with date format: StoreName_DD_MM_YYYY-DD_MM_YYYY.xlsx");return}if(!T){mr.error("Store ID not found");return}try{l(!0),mr.info("Processing file...",{duration:2e3});const se=await _(V);mr.info("Uploading to server...",{duration:2e3});const z=e.stores?.find(J=>J.id===T)?.name||"Unknown Store",M={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:ne,storeId:T,storeName:z,data:se,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await WD(M,e.user?.accessToken||""),mr.success(` Sales data uploaded for ${ne}!`),await S(),U.target.value=""}catch(se){console.error("Error uploading file:",se),mr.error(`Failed to process file: ${se instanceof Error?se.message:"Unknown error"}`)}finally{l(!1)}},O=async U=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await KD(U,e.user?.accessToken||""),mr.success("Sales record deleted"),await S()}catch(V){console.error("Error deleting record:",V),mr.error("Failed to delete record")}},L=U=>Object.values(U).reduce((V,ne)=>V+ne,0),X=U=>{const V=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return V[U%V.length]};return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(_p,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(es,{value:u,onChange:d,max:new Date().toISOString().split("T")[0]}),a.jsxs("button",{onClick:()=>k(!b),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsx(Ai,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Plate Config"})]}),a.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(Jd,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),a.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:I,disabled:o,className:"hidden"})]})]})]}),a.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[a.jsxs("li",{children:["Must contain columns: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),a.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),a.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Set how many pieces are in each plate for each momo type"})]}),a.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Pr,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 space-y-4",children:Object.keys(N).map((U,V)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:X(V)}}),a.jsx("label",{className:"text-gray-900 font-medium",children:U})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:N[U],onChange:ne=>E(U,parseInt(ne.target.value)||6),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center font-semibold"}),a.jsx("span",{className:"text-gray-600 text-sm",children:"pieces/plate"})]})]},U))}),a.jsx("div",{className:"p-6 bg-blue-50 border-t-2 border-blue-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(nr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"How it works:"}),a.jsxs("p",{children:["This configuration determines how pieces are converted to plates in the display. For example, if Chicken Momos has 6 pieces/plate and you sold 262 pieces, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"262 pcs / 44 plates"}),"."]})]})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:a.jsx("button",{onClick:()=>k(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(kI,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:["daily","weekly","monthly","yearly","custom"].map(U=>a.jsx("button",{onClick:()=>p(U),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===U?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})]}),f==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(es,{label:"From Date",value:m.from,onChange:U=>x({...m,from:U})}),a.jsx(es,{label:"To Date",value:m.to,onChange:U=>x({...m,to:U})})]})}),a.jsx(Un,{width:"100%",height:500,children:a.jsxs(ci,{data:(()=>{let U=[...r];if(f==="custom")U=U.filter(ee=>ee.date>=m.from&&ee.date<=m.to);else{const ee=new Date,R=new Date;f==="daily"?R.setDate(ee.getDate()-5):f==="weekly"?R.setDate(ee.getDate()-35):f==="monthly"?R.setMonth(ee.getMonth()-5):f==="yearly"&&R.setFullYear(ee.getFullYear()-5),U=U.filter(se=>new Date(se.date)>=R)}const V=new Map;return U.forEach(ee=>{let R=ee.date,se=ee.date;if(f==="weekly"){const M=new Date(ee.date),J=new Date(M.setDate(M.getDate()-M.getDay())),te=new Date(J);te.setDate(te.getDate()+6),R=J.toISOString().split("T")[0],se=`${J.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${te.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else f==="monthly"?(R=ee.date.substring(0,7),se=new Date(ee.date).toLocaleDateString("en-US",{year:"numeric",month:"short"})):f==="yearly"?(R=ee.date.substring(0,4),se=R):f==="daily"&&(se=new Date(ee.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}));V.has(R)||V.set(R,{period:se,"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0});const z=V.get(R);Object.entries(ee.data).forEach(([M,J])=>{z[M]+=J})}),Array.from(V.values()).sort((ee,R)=>{const se=U.find(M=>{if(f==="weekly"){const J=new Date(M.date),te=new Date(J.setDate(J.getDate()-J.getDay()));return ee.period.includes(te.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?ee.period===new Date(M.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?ee.period===M.date.substring(0,4):ee.period===new Date(M.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||ee.period,z=U.find(M=>{if(f==="weekly"){const J=new Date(M.date),te=new Date(J.setDate(J.getDate()-J.getDay()));return R.period.includes(te.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?R.period===new Date(M.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?R.period===M.date.substring(0,4):R.period===new Date(M.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||R.period;return new Date(se).getTime()-new Date(z).getTime()}).slice(-5)})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(Pn,{dataKey:"period",tick:{fontSize:12},angle:-15,textAnchor:"end",height:80}),a.jsx(wn,{tick:{fontSize:12}}),a.jsx(zr,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),a.jsx(ma,{wrapperStyle:{paddingTop:"20px"},iconType:"rect"}),a.jsx(yr,{dataKey:"Chicken Momos",fill:"#ef4444",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Chicken Cheese Momos",fill:"#f97316",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Veg Momos",fill:"#22c55e",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Paneer Momos",fill:"#3b82f6",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Cheese Corn Momos",fill:"#eab308",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Chicken Kurkure Momos",fill:"#8b5cf6",radius:[8,8,0,0]}),a.jsx(yr,{dataKey:"Veg Kurkure Momos",fill:"#06b6d4",radius:[8,8,0,0]})]})}),a.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const U={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let V=[...r];if(f==="custom")V=V.filter(R=>R.date>=m.from&&R.date<=m.to);else{const R=new Date,se=new Date;f==="daily"?se.setDate(R.getDate()-5):f==="weekly"?se.setDate(R.getDate()-35):f==="monthly"?se.setMonth(R.getMonth()-5):f==="yearly"&&se.setFullYear(R.getFullYear()-5),V=V.filter(z=>new Date(z.date)>=se)}V.forEach(R=>{Object.entries(R.data).forEach(([se,z])=>{U[se]+=z})});const ne=Object.values(U).reduce((R,se)=>R+se,0),ee=Object.entries(U).sort((R,se)=>se[1]-R[1])[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:ne.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),a.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:ee?.[0]?.split(" ")[0]||"N/A"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ee?.[1]?.toLocaleString()||0," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:V.length>0?Math.round(ne/V.length).toLocaleString():0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:V.length}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length>0&&(()=>{const U={0:{dayName:"Sunday",counts:{}},1:{dayName:"Monday",counts:{}},2:{dayName:"Tuesday",counts:{}},3:{dayName:"Wednesday",counts:{}},4:{dayName:"Thursday",counts:{}},5:{dayName:"Friday",counts:{}},6:{dayName:"Saturday",counts:{}}},V=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Cheese Corn Momos","Chicken Kurkure Momos","Veg Kurkure Momos"];Object.keys(U).forEach(z=>{V.forEach(M=>{U[z].counts[M]=[]})}),r.forEach(z=>{const J=new Date(z.date).getDay().toString();Object.entries(z.data).forEach(([te,ie])=>{U[J].counts[te]&&U[J].counts[te].push(ie)})});const ne=Object.entries(U).map(([z,M])=>{const J={day:M.dayName,dayNum:parseInt(z)};return V.forEach(te=>{const ie=M.counts[te],me=ie.length>0?Math.round(ie.reduce((ve,ye)=>ve+ye,0)/ie.length):0;J[te]=me}),J}),ee=ne.find(z=>z.dayNum===v),R=ee?V.map((z,M)=>({category:z,average:ee[z],fill:X(M)})):[],se=[{num:0,name:"Sun",fullName:"Sunday"},{num:1,name:"Mon",fullName:"Monday"},{num:2,name:"Tue",fullName:"Tuesday"},{num:3,name:"Wed",fullName:"Wednesday"},{num:4,name:"Thu",fullName:"Thursday"},{num:5,name:"Fri",fullName:"Friday"},{num:6,name:"Sat",fullName:"Saturday"}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(gn,{className:"w-7 h-7 text-indigo-600"}),"Weekly Pattern Analysis"]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Average momo sales by day of the week across all records"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:se.map(z=>a.jsx("button",{onClick:()=>y(z.num),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${v===z.num?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:z.name},z.num))})]}),a.jsx(Un,{width:"100%",height:500,children:a.jsxs(ci,{data:R,children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(Pn,{dataKey:"category",tick:{fontSize:11},angle:-15,textAnchor:"end",height:100}),a.jsx(wn,{tick:{fontSize:12}}),a.jsx(zr,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},formatter:z=>[`${z} pcs (avg)`,"Average"],labelFormatter:z=>z}),a.jsx(yr,{dataKey:"average",radius:[8,8,0,0],children:R.map((z,M)=>a.jsx(Ql,{fill:z.fill},`cell-${M}`))})]})}),a.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{V.forEach(ve=>{let ye=0;ne.forEach(he=>{he[ve]>ye&&(ye=he[ve],he.day)})});const z=ne.reduce((ve,ye)=>{const he=V.reduce((De,q)=>De+(ve[q]||0),0);return V.reduce((De,q)=>De+(ye[q]||0),0)>he?ye:ve}),M=V.reduce((ve,ye)=>ve+(z[ye]||0),0),J=ne.reduce((ve,ye)=>{const he=V.reduce((De,q)=>De+(ve[q]||0),0);return V.reduce((De,q)=>De+(ye[q]||0),0)<he?ye:ve}),te=V.reduce((ve,ye)=>ve+(J[ye]||0),0),ie=ne.find(ve=>ve.dayNum===v),me=ie?Object.entries(ie).filter(([ve])=>V.includes(ve)).sort((ve,ye)=>ye[1]-ve[1])[0]:null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Busiest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:z.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[M.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Quietest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:J.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[te.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Top Seller Today"}),a.jsx("p",{className:"text-base text-gray-900",style:{fontWeight:"600"},children:me?.[0]||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me?`${me[1].toLocaleString()} pcs avg`:"No data"})]})]})})()})]})})(),r.length===0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[a.jsx(_p,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),a.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):a.jsx("div",{className:"space-y-4",children:r.map((U,V)=>{const ne=L(U.data),ee=new Date(U.date),R=U.storeName&&U.storeName!=="Unknown Store"?U.storeName:e.stores?.find(se=>se.id===U.storeId)?.name||U.storeName||"Unknown Store";return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Fr,{className:"w-5 h-5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:ee.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-purple-100",children:[R,"  Total: ",ne.toLocaleString()," pieces"]})]})]}),a.jsx("button",{onClick:()=>O(U.id),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:a.jsx(bs,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(U.data).map(([se,z],M)=>{const J=ne>0?(z/ne*100).toFixed(1):"0",te=X(M),ie=Math.floor(z/N[se]);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:te,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx(rr,{className:"w-5 h-5 text-gray-400"}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[J,"%"]})]}),a.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:se}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:z.toLocaleString()}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),a.jsx("span",{className:"text-xs text-gray-400",children:""}),a.jsxs("p",{className:"text-xs text-gray-600 font-semibold",children:[ie," plates"]})]})]},se)})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{children:["Uploaded by ",U.uploadedBy]}),a.jsx("span",{children:new Date(U.uploadedAt).toLocaleString()})]})]})]},U.id)})})]})}function aI({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:n}){const[s,i]=F.useState("pending"),[o,l]=F.useState([]),[u,d]=F.useState([]),[f,p]=F.useState(null),[m,x]=F.useState(!1),[v,y]=F.useState(new Date().toISOString().substring(0,7)),[b,k]=F.useState(null),[N,w]=F.useState(!1),T=e.user?.role==="cluster_head",E=e.user?.role==="manager";e.user?.designation;const S=T&&!t||T&&n==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",S),console.log("  - locationType:",n),console.log("  - isClusterHead:",T),console.log("  - Production Houses:",e.productionHouses?.map(X=>({id:X.id,name:X.name}))),F.useEffect(()=>{s==="pending"&&(T||E)?_():s==="history"?A():s==="wastage"&&P()},[s,v,S]);async function _(){try{x(!0);const X=await o5(e.user?.accessToken||"");l(X.recalibrations||[])}catch(X){console.error("Error fetching pending recalibrations:",X),mr.error("Failed to fetch pending recalibrations")}finally{x(!1)}}async function A(){if(S)try{x(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",S),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",T),console.log("  - user.storeId:",e.user?.storeId);const X=await i5(e.user?.accessToken||"",S,n);console.log(" History response:",X),console.log(" History records found:",X?.history?.length||0),X?.history?.length>0&&console.log(" Sample record locationIds:",X.history.slice(0,3).map(U=>U.locationId)),d(X.history||[])}catch(X){console.error("Error fetching recalibration history:",X),mr.error("Failed to fetch recalibration history")}finally{x(!1)}}async function P(){try{x(!0),console.log(" Fetching wastage report:"),console.log("  - month:",v),console.log("  - effectiveStoreId:",S),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",T);const X=await h5(e.user?.accessToken||"",v,S,n);console.log(" Wastage response:",X),console.log(" Wastage items found:",X?.items?.length||0),X?.items?.length>0&&console.log(" Sample item locationIds:",X.items.slice(0,3).map(U=>U.locationId)),p(X)}catch(X){console.error("Error fetching wastage report:",X),mr.error("Failed to fetch wastage report")}finally{x(!1)}}async function B(X){try{await l5(e.user?.accessToken||"",X),mr.success("Recalibration approved successfully"),_()}catch(U){console.error("Error approving recalibration:",U),mr.error("Failed to approve recalibration")}}async function I(X){const U=prompt("Please enter reason for rejection:");if(U)try{await c5(e.user?.accessToken||"",X,U),mr.success("Recalibration rejected"),_()}catch(V){console.error("Error rejecting recalibration:",V),mr.error("Failed to reject recalibration")}}function O(X){k(X),w(!0)}const L=X=>new Date(X).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[a.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),a.jsxs("p",{className:"text-purple-100",children:[s==="pending"&&"Review and approve monthly stock recalibrations",s==="history"&&"View historical recalibration records",s==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&s==="history"&&n!=="production_house"&&a.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Fr,{className:"w-5 h-5"}),"New Recalibration"]})]}),a.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[(T||E)&&a.jsx("button",{onClick:()=>i("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),a.jsx("button",{onClick:()=>i("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),a.jsx("button",{onClick:()=>i("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),s==="wastage"&&a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),a.jsx("input",{type:"month",value:v,onChange:X=>y(X.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),m?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(Ep,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[s==="pending"&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(nr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):o.map(X=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:X.locationName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[L(X.date),"  ",X.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),a.jsx("p",{className:"text-xl text-red-700",children:X.items?.filter(U=>U.adjustmentType==="wastage").length||0})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-xl text-orange-700",children:X.items?.filter(U=>U.adjustmentType==="counting_error").length||0})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),a.jsx("p",{className:"text-xl text-blue-700",children:X.items?.length||0})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>O(X),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(to,{className:"w-4 h-4"}),"View Details"]}),a.jsxs("button",{onClick:()=>B(X.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(nr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>I(X.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(pa,{className:"w-4 h-4"}),"Reject"]})]})]},X.id))}),s==="history"&&a.jsx("div",{className:"space-y-4",children:u.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(Fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):u.map(X=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:X.locationName}),a.jsx("p",{className:"text-sm text-gray-500",children:L(X.date)})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${X.status==="approved"?"bg-green-100 text-green-700":X.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:X.status?.charAt(0).toUpperCase()+X.status?.slice(1)||"Pending"})]}),a.jsxs("button",{onClick:()=>O(X),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(to,{className:"w-4 h-4"}),"View Details"]})]},X.id))}),s==="wastage"&&a.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!f||f.items?.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(a2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalWastage||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalCountingErrors||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalRecalibrations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.uniqueLocations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:f.items?.map((X,U)=>a.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 text-sm text-gray-900",children:X.itemName}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:X.locationName}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[X.systemQuantity," ",X.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[X.actualQuantity," ",X.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${X.difference<0?"text-red-600":"text-green-600"}`,children:[X.difference>0?"+":"",X.difference]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${X.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:X.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:X.notes||"-"})]},U))})]})})]})]})})]}),N&&b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[a.jsx("h3",{className:"text-xl mb-1",children:b.locationName}),a.jsxs("p",{className:"text-purple-100 text-sm",children:[L(b.date),"  ",b.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:b.items?.map((X,U)=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[X.itemName,a.jsx("span",{className:"text-xs text-gray-500 block",children:X.category})]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[X.systemQuantity," ",X.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[X.actualQuantity," ",X.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${X.difference<0?"text-red-600":X.difference>0?"text-green-600":"text-gray-600"}`,children:[X.difference>0?"+":"",X.difference]}),a.jsx("td",{className:"p-3 text-center",children:X.adjustmentType?a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${X.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:X.adjustmentType==="wastage"?"Wastage":"Counting Error"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:X.notes||"-"})]},U))})]})})}),a.jsx("div",{className:"p-6 border-t border-gray-200",children:a.jsx("button",{onClick:()=>w(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const Ume=localStorage.getItem("DEBUG_MODE")==="true",Si=Ume,cs={info:"",debug:"",warn:"",error:"",success:"",api:"",db:"",user:"",store:"",production:"",inventory:"",sales:"",analytics:""};class Hme{info(t,...r){console.log(`${cs.info} ${t}`,...r)}success(t,...r){console.log(`${cs.success} ${t}`,...r)}warn(t,...r){console.warn(`${cs.warn} ${t}`,...r)}error(t,r,...n){console.error(`${cs.error} ${t}`,r,...n)}debug(t,...r){Si&&console.log(`${cs.debug} ${t}`,...r)}debugUser(t,...r){Si&&console.log(`${cs.user} ${t}`,...r)}debugStore(t,...r){Si&&console.log(`${cs.store} ${t}`,...r)}debugProduction(t,...r){Si&&console.log(`${cs.production} ${t}`,...r)}debugInventory(t,...r){Si&&console.log(`${cs.inventory} ${t}`,...r)}debugSales(t,...r){Si&&console.log(`${cs.sales} ${t}`,...r)}debugAnalytics(t,...r){Si&&console.log(`${cs.analytics} ${t}`,...r)}debugApi(t,...r){Si&&console.log(`${cs.api} ${t}`,...r)}debugDb(t,...r){Si&&console.log(`${cs.db} ${t}`,...r)}enableDebug(){localStorage.setItem("DEBUG_MODE","true"),console.log(" Debug mode enabled. Refresh the page to see debug logs.")}disableDebug(){localStorage.removeItem("DEBUG_MODE"),console.log(" Debug mode disabled. Refresh the page.")}isDebugEnabled(){return Si}}const Lr=new Hme;typeof window<"u"&&(window.logger=Lr);function qme(e,t){if(e.length===0)return"";const r=Object.keys(e[0]),n=r.join(","),s=e.map(i=>r.map(o=>{let l=i[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes(`
`)||l.includes('"'))&&(l=`"${l}"`)),l??""}).join(","));return[n,...s].join(`
`)}function qg(e,t,r){const n=qme(t),s=new Blob([n],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(s);i.setAttribute("href",o),i.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}function zme(e,t){const r=JSON.stringify(t,null,2),n=new Blob([r],{type:"application/json;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(n);s.setAttribute("href",i),s.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.json`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function Wme(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A","Cash Amount":n.cashAmount||0,"Paytm Amount":n.paytmAmount||0,"Online Sales":n.onlineSales||0,"Total Revenue":(n.cashAmount||0)+(n.paytmAmount||0)+(n.onlineSales||0),"Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));qg("sales_report",r)}function Kme(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A",Category:n.category,Item:n.itemName,Quantity:n.quantity,Unit:n.unit||"N/A","Unit Cost":n.unitCost||0,"Total Cost":n.totalCost||0,Vendor:n.vendor||"N/A","Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));qg("inventory_report",r)}function Vme(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A",Category:n.category,Description:n.description||"N/A",Amount:n.amount,"Payment Mode":n.paymentMode||"N/A","Created By":n.createdBy||"N/A","Created At":n.createdAt?new Date(n.createdAt).toLocaleString():"N/A"}));qg("overhead_report",r)}function Gme(e,t){const r=e.map(n=>({Date:n.date,Store:n.storeName||t||"N/A","Approval Status":n.approvalStatus||"pending","Chicken Momos":n.chickenMomos?.final||0,"Chicken Cheese Momos":n.chickenCheeseMomos?.final||0,"Veg Momos":n.vegMomos?.final||0,"Cheese Corn Momos":n.cheeseCornMomos?.final||0,"Paneer Momos":n.paneerMomos?.final||0,"Veg Kurkure Momos":n.vegKurkureMomos?.final||0,"Chicken Kurkure Momos":n.chickenKurkureMomos?.final||0,"Total Production":(n.chickenMomos?.final||0)+(n.chickenCheeseMomos?.final||0)+(n.vegMomos?.final||0)+(n.cheeseCornMomos?.final||0)+(n.paneerMomos?.final||0)+(n.vegKurkureMomos?.final||0)+(n.chickenKurkureMomos?.final||0),"Dough Wastage":n.wastage?.dough||0,"Stuffing Wastage":n.wastage?.stuffing||0,"Batter Wastage":n.wastage?.batter||0,"Coating Wastage":n.wastage?.coating||0,"Total Wastage":(n.wastage?.dough||0)+(n.wastage?.stuffing||0)+(n.wastage?.batter||0)+(n.wastage?.coating||0),"Created By":n.createdBy||"N/A","Approved By":n.approvedBy||"N/A"}));qg("production_report",r)}function Yme(e){const t={generatedAt:new Date().toISOString(),storeName:e.storeName||"All Stores",dateRange:e.dateRange,summary:{totalRevenue:e.metrics.totalRevenue,totalExpenses:e.metrics.totalExpenses,netProfit:e.metrics.netProfit,profitMargin:e.metrics.profitMargin,salesRecords:e.salesData.length,inventoryRecords:e.inventoryData.length,overheadRecords:e.overheadData.length,productionRecords:e.productionData?.length||0},salesData:e.salesData,inventoryData:e.inventoryData,overheadData:e.overheadData,productionData:e.productionData||[]};zme("analytics_report",t)}function Xme(e){e.salesData.length>0&&Wme(e.salesData,e.storeName),e.inventoryData.length>0&&setTimeout(()=>Kme(e.inventoryData,e.storeName),100),e.overheadData.length>0&&setTimeout(()=>Vme(e.overheadData,e.storeName),200),e.productionData&&e.productionData.length>0&&setTimeout(()=>Gme(e.productionData,e.storeName),300)}const K1=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",n.value.toLocaleString()]})]},s))]}):null,Jme=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),a.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},Qme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toLocaleString()," pcs"]})]},s))]}):null,Zme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toFixed(2)," kg"]})]},s))]}):null;function XN({context:e,selectedStoreId:t,highlightRequestId:r,onNavigateToManageItems:n}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.role==="audit",l=e.user?.designation==="production_incharge",u=e.user?.designation==="store_incharge",[d,f]=F.useState(l?"production":"store"),[p,m]=F.useState(t||(s||i||l||o?null:e.user?.storeId)||null),x=d==="store"?p:null;Lr.debugStore("Analytics effectiveStoreId:",x),Lr.debugStore("Analytics mode:",d),console.log(" Local selected store ID:",p),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[v,y]=F.useState(r?"production-requests":"profit");F.useEffect(()=>{Lr.debugAnalytics("activeView changed to:",v)},[v]),F.useEffect(()=>{d==="production"&&v!=="production"&&v!=="recalibration-reports"&&v!=="production-requests"?y("production"):(v==="production"||v==="recalibration-reports"||v==="production-requests")&&d==="store"?y("profit"):v==="store-recalibration"&&d==="production"&&y("production")},[d]);const[b,k]=F.useState("revenue"),[N,w]=F.useState("monthly"),[T,E]=F.useState("monthly"),[S,_]=F.useState({from:"2025-03-01",to:"2025-12-25"}),[A,P]=F.useState(0),[B,I]=F.useState([]),[O,L]=F.useState(!1),[X,U]=F.useState(!0),[V,ne]=F.useState([]),[ee,R]=F.useState([]),[se,z]=F.useState(!1),[M,J]=F.useState([]),[te,ie]=F.useState(null),[me,ve]=F.useState(null),[ye,he]=F.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[pe,De]=F.useState(!1),[q,Ae]=F.useState(null),[Be,xt]=F.useState(5),[le,Ee]=F.useState(5),[Ce,$e]=F.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:400,medium:200,low:100},chickenKurkure:{high:400,medium:200,low:100}}),[Nt,vt]=F.useState(!1),[qt,gr]=F.useState({}),[sr,lr]=F.useState(()=>{const Z=localStorage.getItem("momosPerPlate");return Z?parseInt(Z,10):6}),[Qr,Hr]=F.useState(!1),[cr,Fe]=F.useState(6),[we,mt]=F.useState(l&&e.user?.storeId||null),Ue=e.salesData,rt=e.inventory,ut=e.overheads,Vt=e.fixedCosts,_t=e.productionData,[Ne,Se]=F.useState(()=>{const Z=_t.map(_e=>_e.date).filter((_e,fe,oe)=>oe.indexOf(_e)===fe).sort((_e,fe)=>fe.localeCompare(_e));if(Z.length>0)return Z[0];{const _e=new Date;return _e.setDate(_e.getDate()-1),_e.toISOString().split("T")[0]}}),[Ge,bt]=F.useState(()=>{const Z=_t.filter(_e=>_e.approvalStatus==="approved").map(_e=>_e.date).filter((_e,fe,oe)=>oe.indexOf(_e)===fe).sort((_e,fe)=>fe.localeCompare(_e));if(Z.length>0)return Z[0];{const _e=new Date;return _e.setDate(_e.getDate()-1),_e.toISOString().split("T")[0]}}),[dt,st]=F.useState("monthly"),[wt,Rt]=F.useState(""),[nt,yt]=F.useState(""),ht=()=>{const Z=new Date;Z.setHours(0,0,0,0);const _e=Re=>{const Pe=Re.getFullYear(),xe=String(Re.getMonth()+1).padStart(2,"0"),qe=String(Re.getDate()).padStart(2,"0");return`${Pe}-${xe}-${qe}`};let fe,oe;switch(dt){case"today":fe=new Date(Z),oe=new Date(Z);break;case"week":fe=new Date(Z);const Re=fe.getDay(),Pe=Re===0?-6:1-Re;fe.setDate(fe.getDate()+Pe),oe=new Date(fe),oe.setDate(fe.getDate()+6);break;case"month":fe=new Date(Z.getFullYear(),Z.getMonth(),1),oe=new Date(Z.getFullYear(),Z.getMonth()+1,0);break;case"year":fe=new Date(Z.getFullYear(),0,1),oe=new Date(Z.getFullYear(),11,31);break;case"custom":wt&&nt?(fe=new Date(wt+"T00:00:00"),oe=new Date(nt+"T00:00:00")):(fe=new Date(Z),oe=new Date(Z));break;default:fe=new Date(Z),oe=new Date(Z)}return{startDate:_e(fe),endDate:_e(oe)}};F.useEffect(()=>{const Z=we,_e=_t.filter(fe=>{if(!Z)return!0;const oe=fe.storeId===Z,Re=fe.productionHouseId===Z,Pe=fe.productionHouseId||fe.storeId;return oe||Re||Pe===Z}).map(fe=>fe.date).filter((fe,oe,Re)=>Re.indexOf(fe)===oe).sort((fe,oe)=>oe.localeCompare(fe));if(_e.length>0)Se(_e[0]);else{const fe=new Date;fe.setDate(fe.getDate()-1),Se(fe.toISOString().split("T")[0])}},[we,_t]),F.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:d,selectedProductionHouseId:we,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),d==="production"&&we?(console.log(" Conditions met - fetching opening balance..."),Ut()):console.log(" Conditions not met for carry-forward")},[we,d,e.productionData,e.productionRequests]),F.useEffect(()=>{if((s||i||o)&&d==="production"&&!we&&e.productionHouses&&e.productionHouses.length>0){const Z=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",Z.id,Z.name),mt(Z.id)}},[d,s,i,e.productionHouses]);async function Ut(){try{const Z=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",Z),console.log("   Selected production house ID:",we),console.log("   Available production data records:",_t.length),console.log("   Available production requests:",e.productionRequests?.length||0),console.log("   Available stores (local):",M.length);const _e=M.length>0?M:e.stores||[];let fe=we;if(we&&we.startsWith("STORE-")){const Pe=_e.find(xe=>xe.id===we);Pe?.productionHouseId&&(fe=Pe.productionHouseId,console.log("   Resolved production house UUID:",fe))}if(!fe){console.log("    No production house UUID available, skipping recalibration fetch"),ie(null),ve(null);return}let oe=await pj(e.user?.accessToken||"",fe);if(!oe?.record&&fe){console.log("   No recalibration found with UUID, checking with mapped store ID...");const Pe=_e.filter(xe=>xe.productionHouseId===fe);if(console.log("   Stores mapped to this production house:",Pe.map(xe=>({id:xe.id,name:xe.name}))),Pe&&Pe.length>0)for(const xe of Pe){console.log("   Trying to fetch recalibration with store ID:",xe.id);const qe=await pj(e.user?.accessToken||"",xe.id);if(qe?.record){console.log("    Found recalibration using store ID:",xe.id),oe=qe;break}}}console.log(" Recalibration Response:",oe);let Re=null;if(oe?.record){const Pe=oe.record.date.substring(0,7);console.log(" Recalibration date comparison:",{recalDate:Pe,currentMonth:Z,match:Pe===Z}),Pe===Z?(console.log(" Using current month recalibration as opening balance"),console.log("   Recalibration items:",oe.record.items),Re={},oe.record.items.forEach(xe=>{const qe=e.inventoryItems?.find(Ye=>Ye.id===xe.itemId||Ye.name===xe.itemId);if(qe){const We=qe.name.replace(/_([a-z])/g,Xe=>Xe[1].toUpperCase()).replace(/Momo(s)?$/i,"");Re[We]=xe.actualQuantity,console.log(`   Opening balance mapping: ${xe.itemId} -> ${We} = ${xe.actualQuantity}`)}else Re[xe.itemId]=xe.actualQuantity,console.log(`   Opening balance item not found in inventory: ${xe.itemId}, using as-is`)}),console.log("   Parsed opening balance:",Re)):(console.log(" Recalibration from previous month, calculating forward..."),Re=Ft(oe.record,Z))}else console.log(" No recalibration found, calculating from previous month..."),Re=dr(fe);ie(oe?.record||null),ve(Re),console.log(" Opening Balance Calculated:",Re)}catch(Z){console.error("Error fetching recalibration:",Z)}}function Ft(Z,_e){const fe=Z.date.substring(0,7),oe={};Z.items.forEach(qe=>{const Ye=e.inventoryItems?.find(We=>We.id===qe.itemId||We.name===qe.itemId);if(Ye){const Xe=Ye.name.replace(/_([a-z])/g,Ot=>Ot[1].toUpperCase()).replace(/Momo(s)?$/i,"");oe[Xe]=qe.actualQuantity,console.log(`   Recalibration item mapping: ${qe.itemId} -> ${Xe} = ${qe.actualQuantity}`)}else oe[qe.itemId]=qe.actualQuantity,console.log(`   Recalibration item not found in inventory: ${qe.itemId}, using as-is`)});const Re=new Date(fe+"-01"),Pe=new Date(_e+"-01");let xe=new Date(Re);for(xe.setMonth(xe.getMonth()+1);xe<Pe;){const qe=xe.toISOString().substring(0,7),Ye=br(we,qe),We=gt(we,qe);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Xe=>{oe[Xe]=(oe[Xe]||0)+(Ye[Xe]||0)-(We[Xe]||0)}),xe.setMonth(xe.getMonth()+1)}return oe}function dr(Z){const _e=new Date().toISOString().substring(0,7),[fe,oe]=_e.split("-").map(Number);let Re=fe,Pe=oe-1;Pe===0&&(Pe=12,Re=fe-1);const xe=`${Re}-${String(Pe).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",xe),console.log("   Current month:",_e," Previous month:",xe);const qe=br(Z,xe),Ye=gt(Z,xe),We={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Xe=>{We[Xe]=(qe[Xe]||0)-(Ye[Xe]||0)}),console.log("  Previous month production:",qe),console.log("  Previous month deliveries:",Ye),console.log("  Calculated closing stock:",We),We}function br(Z,_e){if(!Z)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${Z}, month: ${_e}`),console.log(`   Total production records available: ${_t.length}`);const fe=_t.filter(oe=>{if(!oe.date.startsWith(_e))return!1;const Re=oe.storeId===Z,Pe=oe.productionHouseId===Z;let xe=oe.productionHouseId;(!xe||xe.startsWith("STORE-"))&&oe.storeId&&(xe=(M.length>0?M:e.stores||[]).find(Xe=>Xe.id===oe.storeId)?.productionHouseId||null);const qe=xe||oe.storeId;return Re||Pe||qe===Z});return console.log(`   Filtered production records: ${fe.length}`),fe.reduce((oe,Re)=>({chicken:oe.chicken+(Re.chickenMomos?.final||0),chickenCheese:oe.chickenCheese+(Re.chickenCheeseMomos?.final||0),veg:oe.veg+(Re.vegMomos?.final||0),cheeseCorn:oe.cheeseCorn+(Re.cheeseCornMomos?.final||0),paneer:oe.paneer+(Re.paneerMomos?.final||0),vegKurkure:oe.vegKurkure+(Re.vegKurkureMomos?.final||0),chickenKurkure:oe.chickenKurkure+(Re.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function gt(Z,_e){if(!Z)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${Z}, month: ${_e}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);const fe=M.length>0?M:e.stores||[];let oe=Z;if(Z&&Z.startsWith("STORE-")){const Pe=fe.find(xe=>xe.id===Z);Pe?.productionHouseId&&(oe=Pe.productionHouseId,console.log(`   Resolved UUID: ${oe}`))}const Re=(e.productionRequests||[]).filter(Pe=>{if(Pe.status!=="delivered")return!1;const xe=Pe.deliveredDate||Pe.requestDate||Pe.createdAt;return!xe||!xe.startsWith(_e)?!1:fe.find(Ye=>Ye.id===Pe.storeId)?.productionHouseId===oe});return console.log(`   Filtered delivered requests: ${Re.length}`),Re.reduce((Pe,xe)=>({chicken:Pe.chicken+(xe.chickenMomos||0),chickenCheese:Pe.chickenCheese+(xe.chickenCheeseMomos||0),veg:Pe.veg+(xe.vegMomos||0),cheeseCorn:Pe.cheeseCorn+(xe.cheeseCornMomos||0),paneer:Pe.paneer+(xe.paneerMomos||0),vegKurkure:Pe.vegKurkure+(xe.vegKurkureMomos||0),chickenKurkure:Pe.chickenKurkure+(xe.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}Lr.isDebugEnabled()&&(Lr.debugAnalytics("Production Data Debug:"),Lr.debugAnalytics("  - Total production records:",_t.length),Lr.debugAnalytics("  - Production data records:",_t.map(Z=>({id:Z.id,date:Z.date,storeId:Z.storeId,productionHouseId:Z.productionHouseId,approvalStatus:Z.approvalStatus,chickenMomos:Z.chickenMomos?.final||0,totalProduction:(Z.chickenMomos?.final||0)+(Z.vegMomos?.final||0)+(Z.chickenCheeseMomos?.final||0)+(Z.cheeseCornMomos?.final||0)+(Z.paneerMomos?.final||0)+(Z.vegKurkureMomos?.final||0)+(Z.chickenKurkureMomos?.final||0)}))),Lr.debugAnalytics("  - Selected production house ID:",we),Lr.debugAnalytics("  - Analytics mode:",d),Lr.debugAnalytics("  - User storeId:",e.user?.storeId),Lr.debugAnalytics("  - User designation:",e.user?.designation),Lr.debugAnalytics("  - Is Production Incharge:",l),Lr.debugAnalytics("  - Available production houses:",e.productionHouses.map(Z=>({id:Z.id,name:Z.name}))),Lr.debugAnalytics("  - Available stores:",e.stores?.map(Z=>({id:Z.id,name:Z.name,productionHouseId:Z.productionHouseId}))),Lr.debugAnalytics("  - Production Incharge Specific:"),Lr.debugAnalytics("     - User storeId (should be production house ID):",e.user?.storeId),Lr.debugAnalytics("     - Does user storeId match any production house?",e.productionHouses.find(Z=>Z.id===e.user?.storeId)),Lr.debugAnalytics("     - Production data storeIds:",[...new Set(_t.map(Z=>Z.storeId))]),Lr.debugAnalytics("     - Production data productionHouseIds:",[...new Set(_t.map(Z=>Z.productionHouseId))]),Lr.debugAnalytics("     - Stores that map to user production house:",e.stores?.filter(Z=>Z.productionHouseId===e.user?.storeId).map(Z=>({id:Z.id,name:Z.name}))));const It=(Z,_e="date")=>{const fe=new Date,oe=new Date(fe.getFullYear(),fe.getMonth(),fe.getDate());return Z.filter(Re=>{const Pe=new Date(Re[_e]),xe=new Date(Pe.getFullYear(),Pe.getMonth(),Pe.getDate());switch(N){case"daily":const qe=new Date(oe);return qe.setDate(qe.getDate()-10),xe>=qe&&xe<=oe;case"weekly":const Ye=new Date(oe);return Ye.setDate(Ye.getDate()-7),xe>=Ye&&xe<=oe;case"monthly":const We=new Date(oe);return We.setMonth(We.getMonth()-1),xe>=We&&xe<=oe;case"yearly":const Xe=new Date(oe);return Xe.setFullYear(Xe.getFullYear()-1),xe>=Xe&&xe<=oe;case"custom":const Ot=new Date(S.from),Ht=new Date(S.to);return xe>=Ot&&xe<=Ht;default:return!0}})},vr=It(Ue),Er=It(rt),Y=It(ut),K=It(Vt),H=It(V,"payoutDate"),W=F.useMemo(()=>{Lr.debugSales("=== SALES DATA FILTERING ==="),Lr.debugSales("Total sales records (time-filtered):",vr.length),Lr.debugSales("effectiveStoreId:",x),console.log("User role:",e.user?.role),console.log("All sales storeIds:",vr.map(oe=>oe.storeId)),console.log("User storeId:",e.user?.storeId);const Z=vr.filter(oe=>{const Re=new Date(oe.date);return Re.getDate()===28&&Re.getMonth()===11});if(console.log("December 28th sales found:",Z.length),Z.forEach(oe=>{console.log(`  - Date: ${oe.date}, StoreId: ${oe.storeId}, Revenue: ${(oe.paytmAmount||0)+(oe.cashAmount||0)+(oe.onlineSales||0)}`)}),!x)return console.log("No store filter - returning all",vr.length,"sales"),vr;const _e=vr.filter(oe=>oe.storeId===x);console.log("After store filtering (exact match only):",_e.length,"sales"),console.log("Filtered sales details:",_e.map(oe=>({date:oe.date,storeId:oe.storeId,total:(oe.offlineSales||0)+(oe.onlineSales||0)})));const fe=vr.filter(oe=>oe.storeId!==x);return console.log("Filtered out (all non-matching storeIds):",fe.length,"sales"),fe.length>0&&console.log("Sample filtered out sales storeIds:",fe.slice(0,5).map(oe=>oe.storeId)),console.log(" === END DEBUG ==="),_e},[vr,x]),re=F.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",Er.length),console.log("effectiveStoreId:",x);const Z=Er.filter(fe=>{const oe=new Date(fe.date);return oe.getDate()===28&&oe.getMonth()===11});if(console.log("December 28th inventory found:",Z.length),Z.forEach(fe=>{console.log(`  - Date: ${fe.date}, StoreId: ${fe.storeId}, Cost: ${fe.totalCost||0}`)}),!x)return console.log("No store filter - returning all",Er.length,"inventory items"),Er;const _e=Er.filter(fe=>fe.storeId===x);return console.log("After store filtering (exact match only):",_e.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),_e},[Er,x]),ae=F.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",Y.length),console.log("effectiveStoreId:",x);const Z=Y.filter(fe=>{const oe=new Date(fe.date);return oe.getDate()===28&&oe.getMonth()===11});if(console.log("December 28th overhead found:",Z.length),Z.forEach(fe=>{console.log(`  - Date: ${fe.date}, StoreId: ${fe.storeId}, Amount: ${fe.amount||0}`)}),!x)return console.log("No store filter - returning all",Y.length,"overhead items"),Y;const _e=Y.filter(fe=>fe.storeId===x);return console.log("After store filtering (exact match only):",_e.length,"overhead items"),console.log("Filtered overhead storeIds:",_e.map(fe=>({date:fe.date,storeId:fe.storeId,amount:fe.amount}))),console.log(" === END OVERHEAD DEBUG ==="),_e},[Y,x]),je=F.useMemo(()=>x?K.filter(Z=>Z.storeId===x):K,[K,x]),Oe=F.useMemo(()=>x?ee.filter(Z=>Z.storeId===x):ee,[ee,x]),G=F.useMemo(()=>{let Z=H;if(x){const _e=Oe.map(fe=>fe.id);Z=Z.filter(fe=>_e.includes(fe.employeeId))}return Z},[H,Oe,x]);F.useEffect(()=>{(async()=>{try{const[_e,fe]=await Promise.all([Zo(),nl()]);ne(_e||[]),R(fe||[])}catch(_e){console.error("Error loading payouts and employees:",_e),ne([]),R([])}})()},[]),F.useEffect(()=>{(async()=>{if(console.log(" Store Loading Check:",{isClusterHead:s,analyticsMode:d,shouldLoad:s||d==="production"}),!(!s&&d!=="production"))try{const _e=await Ku();J(_e),console.log(" Loaded stores for analytics:",_e.length,"stores"),console.log(" Store details:",_e.map(fe=>({id:fe.id,name:fe.name,productionHouseId:fe.productionHouseId})))}catch(_e){console.error(" Error loading stores:",_e)}})()},[s,d]);const ce=async()=>{try{const Z=Wu(),{data:{session:_e}}=await Z.auth.getSession();return _e?.access_token||null}catch(Z){return console.error("Error getting fresh token:",Z),null}};F.useEffect(()=>{(async()=>{if(e.user)try{U(!0);const _e=await ce();if(!_e){console.error("No valid access token available");return}const fe=new Date,oe=5.5*60*60*1e3,Pe=new Date(fe.getTime()+oe).toISOString().split("T")[0];if(e.user.role==="cluster_head"){const qe=(await RD(_e)).filter(Xe=>Xe.leaveDate===Pe&&Xe.status==="approved"),Ye=await $s(_e),We=new Map(Ye.map(Xe=>[Xe.employeeId,Xe]));if(e.user.storeId){const Xe=Ye.filter(Jt=>Jt.storeId===e.user.storeId||Jt.storeId===null||Jt.storeId===void 0).map(Jt=>Jt.employeeId),Ot=qe.filter(Jt=>Xe.includes(Jt.employeeId)),Ht=Ot.map(Jt=>({...Jt,employeeName:We.get(Jt.employeeId)?.name||"Unknown",storeId:We.get(Jt.employeeId)?.storeId||"N/A",storeName:We.get(Jt.employeeId)?.storeName||"N/A"}));P(Ot.length),I(Ht)}else{const Xe=qe.map(Ot=>({...Ot,employeeName:We.get(Ot.employeeId)?.name||"Unknown",storeId:We.get(Ot.employeeId)?.storeId||"N/A",storeName:We.get(Ot.employeeId)?.storeName||"N/A"}));P(qe.length),I(Xe)}}else if(e.user.role==="manager"&&e.user.employeeId){const xe=await Yl(e.user.employeeId,_e),qe=new Map(xe.map(We=>[We.employeeId,We]));let Ye=[];for(const We of xe){const Ht=(await Vu(We.employeeId,_e)).filter(Jt=>Jt.leaveDate===Pe&&Jt.status==="approved").map(Jt=>({...Jt,employeeName:qe.get(Jt.employeeId)?.name||"Unknown",storeId:qe.get(Jt.employeeId)?.storeId||"N/A",storeName:qe.get(Jt.employeeId)?.storeName||"N/A"}));Ye.push(...Ht)}P(Ye.length),I(Ye)}else P(0),I([])}catch(_e){console.error("Error loading today's leaves:",_e),P(0)}finally{U(!1)}})()},[e.user]),F.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),y("production-requests"))},[r]);const Te=()=>{switch(N){case"daily":return"Last 10 days";case"weekly":return"Last 7 days";case"monthly":return"Last 30 days";case"yearly":return"Last 365 days";case"custom":return`${S.from} to ${S.to}`;default:return"Current period"}},Ve=()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",N),console.log("Filtered sales data count:",W.length),console.log("Filtered inventory data count:",re.length),console.log("Filtered overhead data count:",ae.length),console.log("Filtered fixed costs data count:",je.length);const Z=W.reduce((Dt,ft)=>Dt+(ft.paytmAmount||0)+(ft.cashAmount||0)+(ft.onlineSales||0),0);console.log("Total revenue calculated:",Z);const _e=W.reduce((Dt,ft)=>Dt+(ft.onlineSales||0),0),fe=W.reduce((Dt,ft)=>Dt+(ft.paytmAmount||0)+(ft.cashAmount||0),0),oe=re.reduce((Dt,ft)=>Dt+(ft.totalCost||0),0);console.log("Inventory expenses:",oe);const Re=ae.reduce((Dt,ft)=>Dt+(ft.amount||0),0),Pe=je.filter(Dt=>Dt.category==="electricity").reduce((Dt,ft)=>Dt+(ft.amount||0),0),xe=je.filter(Dt=>Dt.category==="rent").reduce((Dt,ft)=>Dt+(ft.amount||0),0),qe=W.reduce((Dt,ft)=>Dt+(ft.employeeSalary||0),0);let Ye=0;if(N==="monthly"||N==="yearly"||N==="custom"){let Dt=G;if(x){const ft=Oe.map(er=>er.id);Dt=Dt.filter(er=>ft.includes(er.employeeId))}Ye=Dt.reduce((ft,er)=>{const Et=Oe.find(hr=>hr.id===er.employeeId);return Et&&Et.type==="fulltime"?ft+(er.amount||0):ft},0)}const We=qe+Ye,Xe=Pe+xe+We,Ot=oe+Re+Xe,Ht=Z-Ot,Jt=Z>0?Ht/Z*100:0;return console.log("Total expenses:",Ot),console.log("Net profit:",Ht),console.log(" === END METRICS DEBUG ==="),{totalRevenue:Z,onlineRevenue:_e,offlineRevenue:fe,totalExpenses:Ot,inventoryExpenses:oe,overheadExpenses:Re,fixedCostsTotal:Xe,electricityExpenses:Pe,rentExpenses:xe,salaryExpenses:We,contractWorkerExpenses:qe,permanentEmployeeExpenses:Ye,netProfit:Ht,profitMargin:Jt}},ke=F.useMemo(()=>Ve(),[W,re,ae,je,G,N]),ct=()=>{const Z={};return W.forEach(_e=>{const oe=new Date(_e.date).toLocaleString("default",{month:"short"});Z[oe]||(Z[oe]={month:oe,revenue:0,expenses:0,profit:0});const Re=(_e.paytmAmount||0)+(_e.cashAmount||0)+(_e.onlineSales||0);Z[oe].revenue+=Re}),re.forEach(_e=>{const oe=new Date(_e.date).toLocaleString("default",{month:"short"});Z[oe]||(Z[oe]={month:oe,revenue:0,expenses:0,profit:0}),Z[oe].expenses+=_e.totalCost||0}),ae.forEach(_e=>{const oe=new Date(_e.date).toLocaleString("default",{month:"short"});Z[oe]||(Z[oe]={month:oe,revenue:0,expenses:0,profit:0}),Z[oe].expenses+=_e.amount||0}),Object.keys(Z).forEach(_e=>{Z[_e].profit=Z[_e].revenue-Z[_e].expenses}),Object.values(Z)},tt=F.useMemo(()=>ct(),[W,re,ae]),Qe=()=>{const Z=new Date,_e=[];if(N==="daily")for(let fe=9;fe>=0;fe--){const oe=new Date(Z);oe.setDate(oe.getDate()-fe);const Re=oe.toISOString().split("T")[0],Pe=oe.toLocaleDateString("default",{month:"short",day:"numeric"}),xe=W.filter(We=>We.date===Re),qe=xe.reduce((We,Xe)=>We+(Xe.onlineSales||0),0),Ye=xe.reduce((We,Xe)=>We+(Xe.paytmAmount||0)+(Xe.cashAmount||0),0);_e.push({period:Pe,online:qe,offline:Ye,total:qe+Ye})}else if(N==="weekly")for(let fe=9;fe>=0;fe--){const oe=new Date(Z);oe.setDate(oe.getDate()-fe*7);const Re=new Date(oe);Re.setDate(Re.getDate()-6);const Pe=Re.toLocaleDateString("default",{month:"short",day:"numeric"}),xe=oe.toLocaleDateString("default",{month:"short",day:"numeric"}),qe=`${Pe} - ${xe}`,Ye=W.filter(Ot=>{const Ht=new Date(Ot.date);return Ht>=Re&&Ht<=oe}),We=Ye.reduce((Ot,Ht)=>Ot+(Ht.onlineSales||0),0),Xe=Ye.reduce((Ot,Ht)=>Ot+(Ht.paytmAmount||0)+(Ht.cashAmount||0),0);_e.push({period:qe,online:We,offline:Xe,total:We+Xe})}else if(N==="monthly")for(let fe=9;fe>=0;fe--){const oe=new Date(Z);oe.setMonth(oe.getMonth()-fe);const Re=oe.toLocaleDateString("default",{month:"short",year:"2-digit"}),Pe=oe.toLocaleString("default",{month:"short"}),xe=oe.getFullYear().toString(),qe=W.filter(Xe=>{const Ot=new Date(Xe.date);return Ot.toLocaleString("default",{month:"short"})===Pe&&Ot.getFullYear().toString()===xe}),Ye=qe.reduce((Xe,Ot)=>Xe+(Ot.onlineSales||0),0),We=qe.reduce((Xe,Ot)=>Xe+(Ot.paytmAmount||0)+(Ot.cashAmount||0),0);_e.push({period:Re,online:Ye,offline:We,total:Ye+We})}else if(N==="yearly")for(let fe=4;fe>=0;fe--){const oe=Z.getFullYear()-fe,Re=W.filter(qe=>new Date(qe.date).getFullYear()===oe),Pe=Re.reduce((qe,Ye)=>qe+(Ye.onlineSales||0),0),xe=Re.reduce((qe,Ye)=>qe+(Ye.paytmAmount||0)+(Ye.cashAmount||0),0);_e.push({period:oe.toString(),online:Pe,offline:xe,total:Pe+xe})}else if(N==="custom"){const fe={};return W.forEach(oe=>{const Pe=new Date(oe.date).toLocaleDateString("default",{month:"short",year:"2-digit"});fe[Pe]||(fe[Pe]={period:Pe,online:0,offline:0,total:0});const xe=oe.onlineSales||0,qe=(oe.paytmAmount||0)+(oe.cashAmount||0);fe[Pe].online+=xe,fe[Pe].offline+=qe,fe[Pe].total+=xe+qe}),Object.values(fe)}return _e},Bt=F.useMemo(()=>Qe(),[W,N]),Cr=()=>{const Z=new Date,_e=[];if(N==="daily")for(let fe=4;fe>=0;fe--){const oe=new Date(Z);oe.setDate(oe.getDate()-fe);const Re=oe.toISOString().split("T")[0],Pe=oe.toLocaleDateString("default",{month:"short",day:"numeric"}),xe=(W||[]).filter(Dt=>Dt.date===Re),qe=xe.reduce((Dt,ft)=>Dt+(ft.paytmAmount||0)+(ft.cashAmount||0)+(ft.onlineSales||0),0),Ye=(re||[]).filter(Dt=>Dt.date===Re),We=(ae||[]).filter(Dt=>Dt.date===Re),Xe=Ye.reduce((Dt,ft)=>Dt+(ft.totalCost||0),0),Ot=We.reduce((Dt,ft)=>Dt+(ft.amount||0),0),Ht=xe.reduce((Dt,ft)=>Dt+(ft.employeeSalary||0),0),Jt=Xe+Ot+Ht;_e.push({period:Pe,revenue:qe,expenses:Jt,profit:qe-Jt})}else if(N==="weekly")for(let fe=4;fe>=0;fe--){const oe=new Date(Z);oe.setDate(oe.getDate()-fe*7);const Re=new Date(oe);Re.setDate(Re.getDate()-6);const Pe=Re.toLocaleDateString("default",{month:"short",day:"numeric"}),xe=oe.toLocaleDateString("default",{month:"short",day:"numeric"}),qe=`${Pe} - ${xe}`,Ye=(W||[]).filter(er=>{const Et=new Date(er.date);return Et>=Re&&Et<=oe}),We=Ye.reduce((er,Et)=>er+(Et.paytmAmount||0)+(Et.cashAmount||0)+(Et.onlineSales||0),0),Xe=(re||[]).filter(er=>{const Et=new Date(er.date);return Et>=Re&&Et<=oe}),Ot=(ae||[]).filter(er=>{const Et=new Date(er.date);return Et>=Re&&Et<=oe}),Ht=Xe.reduce((er,Et)=>er+(Et.totalCost||0),0),Jt=Ot.reduce((er,Et)=>er+(Et.amount||0),0),Dt=Ye.reduce((er,Et)=>er+(Et.employeeSalary||0),0),ft=Ht+Jt+Dt;_e.push({period:qe,revenue:We,expenses:ft,profit:We-ft})}else if(N==="monthly")for(let fe=4;fe>=0;fe--){const oe=new Date(Z);oe.setMonth(oe.getMonth()-fe);const Re=oe.toLocaleDateString("default",{month:"short",year:"2-digit"}),Pe=oe.getMonth(),xe=oe.getFullYear(),qe=(W||[]).filter(He=>{const ot=new Date(He.date);return ot.getMonth()===Pe&&ot.getFullYear()===xe}),Ye=qe.reduce((He,ot)=>He+(ot.paytmAmount||0)+(ot.cashAmount||0)+(ot.onlineSales||0),0),We=(re||[]).filter(He=>{const ot=new Date(He.date);return ot.getMonth()===Pe&&ot.getFullYear()===xe}),Xe=(ae||[]).filter(He=>{const ot=new Date(He.date);return ot.getMonth()===Pe&&ot.getFullYear()===xe}),Ot=(je||[]).filter(He=>{const ot=new Date(He.date);return ot.getMonth()===Pe&&ot.getFullYear()===xe}),Ht=We.reduce((He,ot)=>He+(ot.totalCost||0),0),Jt=Xe.reduce((He,ot)=>He+(ot.amount||0),0),Dt=Ot.reduce((He,ot)=>He+(ot.amount||0),0),ft=qe.reduce((He,ot)=>He+(ot.employeeSalary||0),0);let er=0,Et=V.filter(He=>{const ot=new Date(He.month+"-01");return ot.getMonth()===Pe&&ot.getFullYear()===xe});if(x){const He=Oe.map(ot=>ot.id);Et=Et.filter(ot=>He.includes(ot.employeeId))}er=Et.reduce((He,ot)=>{const Br=Oe.find(Or=>Or.id===ot.employeeId);return Br&&Br.type==="fulltime"?He+(ot.amount||0):He},0);const hr=Ht+Jt+Dt+ft+er;_e.push({period:Re,revenue:Ye,expenses:hr,profit:Ye-hr})}else if(N==="yearly")for(let fe=4;fe>=0;fe--){const oe=Z.getFullYear()-fe,Re=(W||[]).filter(Et=>new Date(Et.date).getFullYear()===oe),Pe=Re.reduce((Et,hr)=>Et+(hr.paytmAmount||0)+(hr.cashAmount||0)+(hr.onlineSales||0),0),xe=(re||[]).filter(Et=>new Date(Et.date).getFullYear()===oe),qe=(ae||[]).filter(Et=>new Date(Et.date).getFullYear()===oe),Ye=(je||[]).filter(Et=>new Date(Et.date).getFullYear()===oe),We=xe.reduce((Et,hr)=>Et+(hr.totalCost||0),0),Xe=qe.reduce((Et,hr)=>Et+(hr.amount||0),0),Ot=Ye.reduce((Et,hr)=>Et+(hr.amount||0),0),Ht=Re.reduce((Et,hr)=>Et+(hr.employeeSalary||0),0);let Jt=0,Dt=V;if(x){const Et=Oe.map(hr=>hr.id);Dt=Dt.filter(hr=>Et.includes(hr.employeeId))}Jt=Dt.reduce((Et,hr)=>{const He=Oe.find(ot=>ot.id===hr.employeeId);return He&&He.type==="fulltime"?Et+(hr.amount||0):Et},0)*12;const er=We+Xe+Ot+Ht+Jt;_e.push({period:oe.toString(),revenue:Pe,expenses:er,profit:Pe-er})}else if(N==="custom")return tt;return _e},Dr=F.useMemo(()=>Cr(),[W,re,ae,N]),rs=(()=>{const Z={};return re.forEach(fe=>{const oe=fe.category||"Other";Z[oe]||(Z[oe]=0),Z[oe]+=fe.totalCost||0}),ae.forEach(fe=>{const oe=fe.category||"Other",Re=e2[oe]||oe;Z[Re]||(Z[Re]=0),Z[Re]+=fe.amount||0}),je.forEach(fe=>{const oe=fe.category||"Other",Re=t2[oe]||oe;Z[Re]||(Z[Re]=0),Z[Re]+=fe.amount||0}),ke.salaryExpenses>0&&(Z[" Salaries"]=ke.salaryExpenses),Object.keys(Z).map(fe=>({name:Vm[fe]||fe,value:Z[fe],percentage:(Z[fe]/ke.totalExpenses*100).toFixed(1)})).sort((fe,oe)=>oe.value-fe.value)})(),Zr=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],fr=W.filter(_e=>_e.approvalRequired===!1&&_e.approvedBy).reduce((_e,fe)=>{const oe=fe.salesDiscrepancy!==void 0?fe.salesDiscrepancy:fe.cashOffset||0;return _e+(oe<0?Math.abs(oe):0)},0),Wa=ke.netProfit,qr=Wa-fr;return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),s&&!1]}),!X&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&a.jsx("div",{onClick:()=>L(!0),className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all cursor-pointer hover:shadow-md ${A===0?"bg-green-50 border-green-200 hover:bg-green-100":"bg-orange-50 border-orange-200 hover:bg-orange-100"}`,children:a.jsx("div",{className:"flex items-center gap-3",children:A===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(xn,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-green-900",children:[a.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),a.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}),a.jsx("div",{className:"text-green-600 text-sm",children:"Click to view"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(AE,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-orange-900",children:[a.jsx("span",{className:"text-orange-700",children:A})," ",A===1?"person is":"people are"," on leave today"]}),a.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]}),a.jsx("div",{className:"text-orange-600 text-sm",children:"Click to view details"})]})})}),(s||i||l||u||o)&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:u?"Store Analytics Dashboard":o?"Audit Analytics Dashboard":"Analytics Dashboard"}),!u&&a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[a.jsx("button",{onClick:()=>f("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${d==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jc,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),a.jsx("button",{onClick:()=>f("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${d==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),a.jsx("p",{className:"text-purple-700 text-sm",children:d==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),d==="store"&&a.jsx(a.Fragment,{children:s||i||l||o?a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),a.jsxs("select",{value:p||"",onChange:Z=>m(Z.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[a.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.name," (ID: ",Z.id,")"]},Z.id))]})]})}):e.user?.storeId&&a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Jc,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),a.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(Z=>Z.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),d==="production"&&a.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:s||i||o?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),a.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),a.jsxs("select",{value:we||"",onChange:Z=>{const _e=Z.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",_e),mt(_e)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[!we&&a.jsx("option",{value:"",children:"Select Production House"}),e.productionHouses?.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.name," (ID: ",Z.id,")"]},Z.id))]})]}):l&&e.user?.storeId?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Nn,{className:"w-6 h-6 text-orange-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),a.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const Z=e.stores?.find(fe=>fe.id===e.user?.storeId);return e.productionHouses?.find(fe=>fe.id===Z?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:d==="store"?a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[a.jsxs("button",{onClick:()=>y("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(gn,{className:`w-6 h-6 ${v==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),v==="profit"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>y("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(qn,{className:`w-6 h-6 ${v==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),v==="expense"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>y("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Jc,{className:`w-6 h-6 ${v==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),v==="sales"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>y("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(rr,{className:`w-6 h-6 ${v==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),v==="datacapture"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>y("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(r9,{className:`w-6 h-6 ${v==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),v==="production-requests"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>y("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(nr,{className:`w-6 h-6 ${v==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),v==="store-recalibration"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>y("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Nn,{className:`w-6 h-6 ${v==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),v==="production"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),y("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${v==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(nr,{className:`w-6 h-6 ${v==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),v==="recalibration-reports"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),v==="profit"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(Z=>a.jsx("button",{onClick:()=>w(Z),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===Z?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{const Z=e.stores?.find(_e=>_e.id===t)?.name||"All_Stores";Yme({salesData:W,inventoryData:re,overheadData:ae,metrics:ke,storeName:Z,dateRange:N==="custom"?S:void 0}),mr.success("Analytics report exported!")},className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Export"}),a.jsx("span",{className:"sm:hidden",children:"JSON"})]}),a.jsxs("button",{onClick:()=>{const Z=e.stores?.find(_e=>_e.id===t)?.name||"All_Stores";Xme({salesData:W,inventoryData:re,overheadData:ae,storeName:Z}),mr.success("Data exported as CSV files!")},className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[a.jsx(fi,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:Z=>_({...S,from:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:Z=>_({...S,to:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",ke.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Te()})]}),a.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",ke.totalExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Te()})]}),a.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",qr.toLocaleString()]}),ke.totalRevenue>0?a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[a.jsx(gn,{className:"w-3 h-3"}),"Comparison available after multiple periods"]}):a.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),a.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[ke.profitMargin.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(gn,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",Wa.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",fr.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",a.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),a.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",qr.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:ke.totalRevenue>0?`${(qr/ke.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),fr>0&&a.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Pr,{className:"w-4 h-4 text-amber-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",fr.toLocaleString(),"."]})]})})]}),a.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Profit Trend - ",N==="daily"?"Last 5 Days":N==="weekly"?"Last 5 Weeks":N==="monthly"?"Last 5 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Un,{width:"100%",height:250,children:a.jsxs(ci,{data:Dr,barGap:8,barCategoryGap:"20%",children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Pn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(wn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(zr,{content:a.jsx(K1,{})}),a.jsx(ma,{wrapperStyle:{fontSize:"12px"}}),a.jsx(yr,{dataKey:"revenue",fill:"#a5b4fc",name:"Revenue",radius:[8,8,0,0],maxBarSize:60}),a.jsx(yr,{dataKey:"expenses",fill:"#fca5a5",name:"Expenses",radius:[8,8,0,0],maxBarSize:60}),a.jsx(yr,{dataKey:"profit",fill:"#86efac",name:"Profit",radius:[8,8,0,0],maxBarSize:60})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(qn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Revenue Breakdown"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Online Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",ke.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-green-600",children:[(ke.onlineRevenue/ke.totalRevenue*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Offline Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",ke.offlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-blue-600",children:[(ke.offlineRevenue/ke.totalRevenue*100).toFixed(0),"%"]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(gn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Key Metrics"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Cost-to-Revenue Ratio"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:ke.totalRevenue>0?`${(ke.totalExpenses/ke.totalRevenue*100).toFixed(1)}%`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:ke.totalRevenue>0&&ke.totalExpenses/ke.totalRevenue<.7?" Healthy ratio":ke.totalRevenue>0?" High expense ratio":"No sales yet"})]}),a.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Profit per 100 Revenue"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:ke.totalRevenue>0?`${(ke.netProfit/ke.totalRevenue*100).toFixed(1)}`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:ke.totalRevenue>0&&ke.profitMargin>30?" Excellent margins":ke.totalRevenue>0&&ke.profitMargin>15?" Good margins":ke.totalRevenue>0&&ke.profitMargin>0?" Thin margins":ke.totalRevenue>0?" Operating at loss":"No sales yet"})]})]})]})]})]})}),v==="expense"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(Z=>a.jsx("button",{onClick:()=>w(Z),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===Z?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:Z=>_({...S,from:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:Z=>_({...S,to:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.totalExpenses.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.inventoryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ke.inventoryExpenses/ke.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ke.salaryExpenses/ke.totalExpenses*100).toFixed(1),"% of total"]})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[a.jsxs("div",{className:"w-full lg:w-1/2 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),a.jsx("div",{className:"relative bg-white rounded-2xl p-6 shadow-lg",children:a.jsx(Un,{width:"100%",height:320,children:a.jsxs(qF,{children:[a.jsx("defs",{children:Zr.map((Z,_e)=>a.jsxs("linearGradient",{id:`gradient-${_e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:Z,stopOpacity:.9}),a.jsx("stop",{offset:"100%",stopColor:Z,stopOpacity:.7})]},`gradient-${_e}`))}),a.jsx(Li,{data:rs,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1,strokeDasharray:"3 3"},label:({percentage:Z})=>`${Z}%`,outerRadius:110,innerRadius:40,fill:"#8884d8",dataKey:"value",paddingAngle:2,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:rs.map((Z,_e)=>a.jsx(Ql,{fill:`url(#gradient-${_e%Zr.length})`,stroke:"#fff",strokeWidth:3},`cell-${_e}`))}),a.jsx(zr,{content:a.jsx(Jme,{})})]})})})]}),a.jsx("div",{className:"w-full lg:w-1/2 space-y-3",children:rs.map((Z,_e)=>a.jsxs("div",{className:"group relative border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer bg-white overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${Zr[_e%Zr.length]}40, ${Zr[_e%Zr.length]}10)`}}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{background:`linear-gradient(135deg, ${Zr[_e%Zr.length]}, ${Zr[(_e+1)%Zr.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z.name})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm font-semibold text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[Z.percentage,"%"]})})]}),a.jsxs("div",{className:"text-xl font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:["",Z.value.toLocaleString()]}),a.jsx("div",{className:"mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${Z.percentage}%`,background:`linear-gradient(90deg, ${Zr[_e%Zr.length]}, ${Zr[(_e+1)%Zr.length]})`}})})]})]},Z.name))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(N==="monthly"||N==="yearly"||N==="custom")&&ke.permanentEmployeeExpenses>0&&a.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Pr,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Permanent employee salaries (",ke.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ke.contractWorkerExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ke.permanentEmployeeExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:N==="monthly"||N==="yearly"||N==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly/yearly views"})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ke.overheadExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(ke.overheadExpenses/ke.totalExpenses*100).toFixed(1),"% of total expenses"]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ke.fixedCostsTotal.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ke.fixedCostsTotal/ke.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ke.electricityExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ke.fixedCostsTotal>0?(ke.electricityExpenses/ke.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ke.rentExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ke.fixedCostsTotal>0?(ke.rentExpenses/ke.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ke.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ke.fixedCostsTotal>0?(ke.salaryExpenses/ke.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Un,{width:"100%",height:280,children:a.jsxs(ci,{data:[{name:" Electricity",amount:ke.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:ke.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:ke.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Pn,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),a.jsx(wn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(zr,{content:a.jsx(K1,{})}),a.jsx(yr,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:ke.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:ke.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:ke.salaryExpenses,fill:"#a78bfa"}].map((Z,_e)=>a.jsx(Ql,{fill:Z.fill},`cell-${_e}`))})]})})})})]})]})}),v==="sales"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>k("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${b==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Jc,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),a.jsx("button",{onClick:()=>k("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${b==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(_p,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),b==="revenue"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(Z=>a.jsx("button",{onClick:()=>w(Z),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===Z?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:Z=>_({...S,from:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:Z=>_({...S,to:Z.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:Te()})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.onlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ke.onlineRevenue/ke.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ke.offlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ke.offlineRevenue/ke.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Transactions"}),a.jsx("div",{className:"text-2xl sm:text-3xl text-gray-900",children:W.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Sales records"})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",N==="daily"?"Last 10 Days":N==="weekly"?"Last 10 Weeks":N==="monthly"?"Last 10 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Un,{width:"100%",height:300,children:a.jsxs(ci,{data:Bt,barCategoryGap:"25%",children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(Pn,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(wn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(zr,{content:a.jsx(K1,{})}),a.jsx(ma,{wrapperStyle:{fontSize:"12px"}}),a.jsx(yr,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),a.jsx(yr,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80})]})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Jc,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),a.jsxs("span",{className:"text-sm text-green-600",children:[(ke.onlineRevenue/ke.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ke.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),a.jsxs("span",{className:"text-sm text-blue-600",children:[(ke.offlineRevenue/ke.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ke.offlineRevenue.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(gn,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Metrics"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Average Transaction"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",W.length>0?(ke.totalRevenue/W.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per sale"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Profit per Sale"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",W.length>0?(ke.netProfit/W.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Average margin"})]})]})]})]})]}),b==="category"&&a.jsx(Bme,{context:e,selectedStoreId:t})]}),v==="datacapture"&&a.jsx("div",{children:a.jsx(Doe,{context:e,selectedStoreId:t})}),v==="production"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"custom",label:"Custom Range"}].map(Z=>a.jsx("button",{onClick:()=>st(Z.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${dt===Z.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:Z.label},Z.value))})}),dt==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:wt,onChange:Z=>Rt(Z.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:nt,onChange:Z=>yt(Z.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[a.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),a.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:Z,endDate:_e}=ht(),fe=new Date(Z).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),oe=new Date(_e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return Z===_e?fe:`${fe} - ${oe}`})()})]})]})}),a.jsx("div",{className:"hidden",children:a.jsx("select",{value:Ne||"",onChange:Z=>Se(Z.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const Z=we;return _t.filter(fe=>{if(!Z)return!0;const oe=fe.storeId===Z,Re=fe.productionHouseId===Z,Pe=fe.productionHouseId||fe.storeId;return oe||Re||Pe===Z}).map(fe=>fe.date).filter((fe,oe,Re)=>Re.indexOf(fe)===oe).sort((fe,oe)=>oe.localeCompare(fe)).map(fe=>a.jsx("option",{value:fe,children:new Date(fe).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},fe))})()})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(()=>{const Z=we;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",d),console.log("  - selectedProductionHouseId:",we),console.log("  - effectiveStoreId:",x),console.log("  - filterById:",Z),console.log("  - Total production records:",_t.length);const _e=Z?e.productionHouses?.find(We=>We.id===Z):null;console.log("  - Selected production house object:",_e);const{startDate:fe,endDate:oe}=ht();console.log(" Date Range Filter:",{rangeType:dt,startDate:fe,endDate:oe,customStart:wt,customEnd:nt});const Re=_t.filter(We=>{if(We.date<fe||We.date>oe)return console.log(" Date filter excluded record:",{date:We.date,startDate:fe,endDate:oe}),!1;if(!Z)return!0;console.log(" Filtering production record:",{recordStoreId:We.storeId,recordProductionHouseId:We.productionHouseId,filterById:Z,date:We.date});const Xe=We.storeId===Z,Ot=We.productionHouseId===Z;let Ht=We.productionHouseId;if((!Ht||Ht.startsWith("STORE-"))&&We.storeId){const ft=M.length>0?M:e.stores||[],er=ft.find(Et=>Et.id===We.storeId);console.log("     Production Summary - Store lookup:",{pStoreId:We.storeId,localStoresCount:M.length,contextStoresCount:e.stores?.length||0,allStoresCount:ft.length,foundStore:er?{id:er.id,name:er.name,productionHouseId:er.productionHouseId}:null}),Ht=er?.productionHouseId||null}const Jt=Ht||We.storeId;return console.log("   Checking record:",{recordId:We.id.slice(0,8),recordStoreId:We.storeId,recordProductionHouseId:We.productionHouseId,resolvedProductionHouseId:Ht,phId:Jt,filterById:Z,matchesStoreId:Xe,matchesProductionHouseId:Ot,localStores:M.length,match:Xe||Ot||Jt===Z}),Xe||Ot||Jt===Z});console.log("  - Filtered production records:",Re.length);const Pe=Re.reduce((We,Xe)=>We+(Xe.chickenMomos?.final||0)+(Xe.chickenCheeseMomos?.final||0)+(Xe.vegMomos?.final||0)+(Xe.cheeseCornMomos?.final||0)+(Xe.paneerMomos?.final||0)+(Xe.vegKurkureMomos?.final||0)+(Xe.chickenKurkureMomos?.final||0),0),xe=Re.reduce((We,Xe)=>We+(Xe.wastage?.dough||0)+(Xe.wastage?.stuffing||0)+(Xe.wastage?.batter||0)+(Xe.wastage?.coating||0),0),qe=Re.filter(We=>We.approvalStatus==="approved").length,Ye=Re.filter(We=>We.approvalStatus==="pending").length;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Nn,{className:"w-6 h-6 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:Pe.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bs,{className:"w-6 h-6 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:xe.toFixed(2)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"kg"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(SE,{className:"w-6 h-6 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:qe}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Pr,{className:"w-6 h-6 text-yellow-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:Ye}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]})]})})()}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),d==="production"&&(i||l)&&a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsxs("button",{onClick:()=>{gr(JSON.parse(JSON.stringify(Ce))),vt(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Stock Alert Thresholds",children:[a.jsx(Ai,{className:"w-5 h-5"}),"Alert Settings"]}),a.jsxs("button",{onClick:()=>{Fe(sr),Hr(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Momos Per Plate",children:[a.jsx(Ai,{className:"w-5 h-5"}),"Plate Settings"]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[a.jsx(Fr,{className:"w-5 h-5"}),"Recalibrate Stock"]}),te&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",new Date(te.date).toLocaleDateString()]}),me&&!te&&a.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),(i||s)&&n&&a.jsxs("button",{onClick:()=>{console.log(" Manage Items button clicked in Analytics"),n()},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Manage inventory items",children:[a.jsx(rr,{className:"w-5 h-5"}),"Manage Items"]})]}),d==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),a.jsxs("select",{value:we||"all",onChange:Z=>{const _e=Z.target.value==="all"?null:Z.target.value;console.log(" Production House Selector Changed:",_e),mt(_e)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.name," (ID: ",Z.id,")"]},Z.id))]})]})]})}),(()=>{const Z=we;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",d),console.log("  - selectedProductionHouseId:",we),console.log("  - effectiveProductionHouseId:",Z);const _e=Z?e.productionHouses?.find(He=>He.id===Z):null;console.log("  - Selected production house for stock:",_e),console.log("  - Total production records available:",_t.length),_t.length>0&&_t.length<=3&&console.log("  - All production records:",_t.map(He=>({id:He.id,storeId:He.storeId,productionHouseId:He.productionHouseId,date:He.date})));const fe=_t.filter(He=>{if(!Z)return!0;const ot=He.storeId===Z,Br=He.productionHouseId===Z;let Or=He.productionHouseId;(!Or||Or.startsWith("STORE-"))&&He.storeId&&(Or=(M.length>0?M:e.stores||[]).find(as=>as.id===He.storeId)?.productionHouseId||null);const Gn=Or||He.storeId;return ot||Br||Gn===Z});console.log("  - Filtered production for stock status:",fe.length),fe.length>0&&console.log("  - Sample production record:",{id:fe[0].id,storeId:fe[0].storeId,productionHouseId:fe[0].productionHouseId,date:fe[0].date});const oe=new Date().toISOString().substring(0,7),Re=fe.filter(He=>He.date.startsWith(oe));console.log("  - Monthly filtered production:",Re.length,"for month:",oe),Re.length>0&&console.log("  - Sample monthly production record:",Re[0]);const Pe=e.inventoryItems?.filter(He=>He.category==="finished_product"&&He.isActive&&(He.linkedEntityType==="global"||He.linkedEntityType==="production_house"&&He.linkedEntityId===Z))||[],xe=He=>He.replace(/_([a-z])/g,ot=>ot[1].toUpperCase()),qe=He=>{const ot=He.replace(/_momo(s)?$/i,"");return xe(ot)},Ye={};Pe.forEach(He=>{const ot=qe(He.name);Ye[ot]=0}),Re.forEach(He=>{Pe.forEach(ot=>{const Br=qe(ot.name);let Or=0;const Gn=He[Br+"Momos"],Yn=He[Br];Gn?Or=typeof Gn=="object"?Gn.final||0:Gn:Yn&&(Or=typeof Yn=="object"?Yn.final||0:Yn),Ye[Br]=(Ye[Br]||0)+Or})});let We=Z;if(Z&&Z.startsWith("STORE-")){const He=e.stores?.find(ot=>ot.id===Z);He?.productionHouseId&&(We=He.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:Z,resolvedUUID:We}))}const Xe=e.productionRequests?.filter(He=>{if(He.status!=="delivered")return!1;const ot=He.deliveredDate||He.requestDate||He.createdAt;if(!ot||!ot.startsWith(oe))return console.log(" Filtered out request - wrong month:",{requestId:He.id.slice(0,8),requestDate:ot,currentMonth:oe,matches:ot?.startsWith(oe)}),!1;const Br=M.length>0?M:e.stores||[],Or=Br.find(Gn=>Gn.id===He.storeId);if(We){const Gn=Or?.productionHouseId===We;return console.log(" Checking production request:",{requestId:He.id.slice(0,8),storeId:He.storeId,storeName:Or?.name,storeProductionHouseId:Or?.productionHouseId,productionHouseUUID:We,deliveredDate:He.deliveredDate,availableStores:Br.length,matches:Gn}),Gn}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:Z,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(He=>He.status==="delivered").length||0,fulfilledRequestsCount:Xe.length,stores:e.stores?.map(He=>({id:He.id,name:He.name,productionHouseId:He.productionHouseId}))||[],filteredProductionRecords:fe.length,allProductionData:_t.map(He=>({id:He.id.slice(0,8),date:He.date,productionHouseId:He.productionHouseId,storeId:He.storeId,resolvedId:He.productionHouseId||He.storeId})),sampleRequest:Xe[0],sampleRequestData:Xe[0]?{id:Xe[0].id,storeId:Xe[0].storeId,requestDate:Xe[0].requestDate,status:Xe[0].status,chickenMomos:Xe[0].chickenMomos,vegMomos:Xe[0].vegMomos}:null});const Ot={};Pe.forEach(He=>{const ot=qe(He.name);Ot[ot]=0}),Xe.forEach(He=>{Pe.forEach(ot=>{const Br=qe(ot.name),Or=He[Br+"Momos"]||He[Br]||0;Ot[Br]=(Ot[Br]||0)+Or})});const Ht={};Pe.forEach(He=>{const ot=qe(He.name);Ht[ot]=me?.[ot]||me?.[He.name]||me?.[He.id]||0}),console.log(" Stock Calculation with Carry-Forward:"),console.log("  previousMonthStock (raw):",me),console.log("  Opening Balance (processed):",Ht),console.log("  Current Month Production:",Ye),console.log("  Current Month Deliveries:",Ot);const Jt={};Pe.forEach(He=>{const ot=qe(He.name);Jt[ot]=(Ht[ot]||0)+(Ye[ot]||0)-(Ot[ot]||0)}),console.log("  Final Stock:",Jt);const Dt=e.inventoryItems?.filter(He=>He.category==="finished_product"&&He.isActive&&(He.linkedEntityType==="global"||He.linkedEntityType==="production_house"&&He.linkedEntityId===Z))||[];console.log(" Finished Products for Stock Display:",Dt.map(He=>{const ot=qe(He.name);return{name:He.name,displayName:He.displayName,stock:Jt[ot]}}));const ft=He=>He.replace(/_([a-z])/g,ot=>ot[1].toUpperCase()),er={chicken:"purple",chickenCheese:"pink",chicken_cheese:"pink",veg:"green",cheeseCorn:"yellow",cheese_corn:"yellow",paneer:"blue",vegKurkure:"teal",veg_kurkure:"teal",chickenKurkure:"red",chicken_kurkure:"red"},Et=Dt.map(He=>{const ot=He.name.replace(/_momo(s)?$/i,""),Br=ft(ot);return{key:He.name,camelKey:Br,label:He.displayName,color:er[ot]||er[Br]||"indigo",unit:He.unit}}),hr=Object.values(Ht).some(He=>He>0);return fe.length===0&&!hr?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:Z?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):a.jsxs(a.Fragment,{children:[Ht&&Object.values(Ht).some(He=>He>0)&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(nr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",a.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:te?`Opening balance from recalibration on ${new Date(te.date).toLocaleDateString()}`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Et.map(({key:He,camelKey:ot,label:Br,color:Or,unit:Gn})=>{const Yn=Ht[ot]||Ht[He]||0,Ia=Ye[ot]||Ye[He]||0,as=Ot[ot]||Ot[He]||0,Xn=Jt[ot]||Jt[He]||0,zs=Yn>0||Ia>0||as>0||Xn!==void 0,Jn=Ce[ot]??Ce[He]??{high:600,medium:300,low:150},Kf=Xn<Jn.low,ud=Xn>=Jn.low&&Xn<Jn.medium,So=Xn>=Jn.medium&&Xn<Jn.high,Vf=Xn>=Jn.high;let vi="",Ws="",Hi="";Xn<0?(vi=" Over-distributed",Ws="bg-red-100 border-red-300 text-red-800",Hi="text-red-600"):zs&&Kf?(vi=" Critical: Below Low Threshold",Ws="bg-red-100 border-red-300 text-red-800",Hi="text-red-600"):zs&&ud?(vi=" Low: Between Low & Medium",Ws="bg-orange-100 border-orange-300 text-orange-800",Hi="text-orange-600"):zs&&So?(vi=" Medium: Between Medium & High",Ws="bg-yellow-100 border-yellow-300 text-yellow-800",Hi="text-yellow-700"):zs&&Vf&&(vi=" Healthy: Above High Threshold",Ws="bg-green-100 border-green-300 text-green-800",Hi="text-green-600");const Gf=Ia>0?(Xn/Ia*100).toFixed(0):"0";return a.jsxs("div",{className:`bg-gradient-to-br from-${Or}-50 to-${Or}-100 border-2 border-${Or}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:Br}),a.jsx("div",{className:"space-y-2",children:zs?a.jsxs(a.Fragment,{children:[Yn>0&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),a.jsx("span",{className:"text-xl font-bold text-blue-800",children:Yn})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),a.jsx("span",{className:`text-lg font-bold text-${Or}-600`,children:Ia})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),a.jsx("span",{className:`text-lg font-bold text-${Or}-700`,children:as})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${Hi||`text-${Or}-800`}`,children:[Xn," pcs / ",Math.round(Xn/sr)," plates"]})})]}),Ia>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[Gf,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${Kf||Xn<0?"bg-red-500":ud?"bg-orange-500":So?"bg-yellow-500":Vf?"bg-green-500":`bg-${Or}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Gf)))}%`}})})]})]}),vi&&a.jsx("div",{className:`border rounded-lg px-2 py-1 mt-2 ${Ws}`,children:a.jsx("p",{className:"text-xs font-semibold",children:vi})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-2 py-1 mt-2",children:a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Low"}),a.jsx("div",{className:"font-semibold text-red-600",children:Jn.low})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Med"}),a.jsx("div",{className:"font-semibold text-yellow-600",children:Jn.medium})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"High"}),a.jsx("div",{className:"font-semibold text-green-600",children:Jn.high})]})]})})]}):a.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Stock"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"0"}),a.jsx("span",{className:"text-xs text-gray-500",children:Gn||"pieces"})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" Track in production logging to see stock"})})]})})]},He)})})]})})()]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(Z=>a.jsx("button",{onClick:()=>w(Z),className:`px-4 py-2 rounded-lg text-sm transition-colors ${N===Z?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))})]}),N==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),a.jsx("input",{type:"date",value:S.from,onChange:Z=>_({...S,from:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),a.jsx("input",{type:"date",value:S.to,onChange:Z=>_({...S,to:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),a.jsx(Un,{width:"100%",height:400,children:a.jsxs(ci,{data:(()=>{const Z=d==="production"?we:e.user?.designation==="production_incharge"?x:we;Z&&e.productionHouses?.find(oe=>oe.id===Z||oe.storeId===Z);const _e=_t.filter(oe=>{if(Z){const Re=oe.storeId===Z,Pe=oe.productionHouseId===Z;let xe=oe.productionHouseId;(!xe||xe.startsWith("STORE-"))&&oe.storeId&&(xe=e.stores?.find(Xe=>Xe.id===oe.storeId)?.productionHouseId||null);const qe=xe||oe.storeId;if(!(Re||Pe||qe===Z))return!1}return N==="custom"?oe.date>=S.from&&oe.date<=S.to:!0}),fe=new Map;return _e.forEach(oe=>{let Re=oe.date,Pe=oe.date;if(N==="weekly"){const qe=new Date(oe.date),Ye=new Date(qe.setDate(qe.getDate()-qe.getDay())),We=new Date(Ye);We.setDate(We.getDate()+6),Re=Ye.toISOString().split("T")[0],Pe=`${Ye.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${We.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else N==="monthly"?(Re=oe.date.substring(0,7),Pe=Re):N==="yearly"&&(Re=oe.date.substring(0,4),Pe=Re);fe.has(Re)||fe.set(Re,{period:Pe,chickenMomos:0,chickenCheeseMomos:0,vegMomos:0,cheeseCornMomos:0,paneerMomos:0,vegKurkure:0,chickenKurkure:0});const xe=fe.get(Re);xe.chickenMomos+=oe.chickenMomos?.final||0,xe.chickenCheeseMomos+=oe.chickenCheeseMomos?.final||0,xe.vegMomos+=oe.vegMomos?.final||0,xe.cheeseCornMomos+=oe.cheeseCornMomos?.final||0,xe.paneerMomos+=oe.paneerMomos?.final||0,xe.vegKurkure+=oe.vegKurkureMomos?.final||0,xe.chickenKurkure+=oe.chickenKurkureMomos?.final||0}),Array.from(fe.values()).sort((oe,Re)=>oe.period.localeCompare(Re.period))})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(Pn,{dataKey:"period",tick:{fontSize:12},stroke:"#666",angle:N==="weekly"?-15:0,textAnchor:N==="weekly"?"end":"middle",height:N==="weekly"?60:30}),a.jsx(wn,{tick:{fontSize:12},stroke:"#666",label:{value:"Pieces",angle:-90,position:"insideLeft"}}),a.jsx(zr,{content:a.jsx(Qme,{})}),a.jsx(ma,{}),a.jsx(yr,{dataKey:"chickenMomos",name:"Chicken Momos",fill:"#ef4444"}),a.jsx(yr,{dataKey:"chickenCheeseMomos",name:"Chicken Cheese",fill:"#f97316"}),a.jsx(yr,{dataKey:"vegMomos",name:"Veg Momos",fill:"#10b981"}),a.jsx(yr,{dataKey:"cheeseCornMomos",name:"Cheese Corn",fill:"#fbbf24"}),a.jsx(yr,{dataKey:"paneerMomos",name:"Paneer Momos",fill:"#3b82f6"}),a.jsx(yr,{dataKey:"vegKurkure",name:"Veg Kurkure",fill:"#84cc16"}),a.jsx(yr,{dataKey:"chickenKurkure",name:"Chicken Kurkure",fill:"#f59e0b"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),(()=>{const Z=d==="production"?we:e.user?.designation==="production_incharge"?x:we,_e=Z?M.filter(xe=>xe.productionHouseId===Z).map(xe=>xe.id):[],fe=xe=>{if(!Z)return!0;const qe=xe.storeId===Z,Ye=xe.productionHouseId===Z,We=xe.productionHouseId||xe.storeId,Xe=_e.includes(xe.storeId)||_e.includes(xe.productionHouseId);return qe||Ye||We===Z||Xe};window.wastageFilterHelper={matchesProductionHouse:fe,mappedStoreIds:_e,filterById:Z};const oe=_t.filter(fe),Re=oe.reduce((xe,qe)=>xe+(qe.wastage?.dough||0)+(qe.wastage?.stuffing||0)+(qe.wastage?.batter||0)+(qe.wastage?.coating||0),0),Pe=oe.filter(xe=>(xe.wastage?.dough||0)>0||(xe.wastage?.stuffing||0)>0||(xe.wastage?.batter||0)>0||(xe.wastage?.coating||0)>0);return console.log(" Wastage Analysis Debug:",{analyticsMode:d,selectedProductionHouseId:we,filterById:Z,mappedStoreIds:_e,totalProductionRecords:_t.length,filteredProductionRecords:oe.length,recordsWithWastage:Pe.length,totalWastageAllTime:Re,sampleWastageData:oe.slice(0,3).map(xe=>({date:xe.date,storeId:xe.storeId,productionHouseId:xe.productionHouseId,wastage:xe.wastage}))}),oe.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:" No production data found"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Please select a production house or ensure production data has been logged."})]}):Pe.length===0&&oe.length>0?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-blue-800 font-medium",children:" No wastage data recorded"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Found ",oe.length," production record(s), but no wastage has been logged yet. Wastage values can be entered in the Production Management section."]})]}):null})(),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),a.jsx(Un,{width:"100%",height:250,children:a.jsxs(gh,{data:(()=>{const Z=[];for(let _e=4;_e>=0;_e--){const fe=new Date;fe.setDate(fe.getDate()-_e);const oe=fe.toISOString().split("T")[0],Re=window.wastageFilterHelper,xe=_t.filter(qe=>Re.matchesProductionHouse(qe)&&qe.date===oe).reduce((qe,Ye)=>qe+(Ye.wastage?.dough||0)+(Ye.wastage?.stuffing||0)+(Ye.wastage?.batter||0)+(Ye.wastage?.coating||0),0);Z.push({date:oe.substring(5),wastage:xe})}return Z})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#fca5a5"}),a.jsx(Pn,{dataKey:"date",tick:{fontSize:10}}),a.jsx(wn,{tick:{fontSize:10}}),a.jsx(zr,{}),a.jsx(mi,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),a.jsx(Un,{width:"100%",height:250,children:a.jsxs(gh,{data:(()=>{const Z=[];for(let _e=4;_e>=0;_e--){const fe=new Date;fe.setDate(fe.getDate()-_e*7);const oe=new Date(fe.setDate(fe.getDate()-fe.getDay())),Re=new Date(oe);Re.setDate(Re.getDate()+6);const Pe=window.wastageFilterHelper,qe=_t.filter(Ye=>Pe.matchesProductionHouse(Ye)&&Ye.date>=oe.toISOString().split("T")[0]&&Ye.date<=Re.toISOString().split("T")[0]).reduce((Ye,We)=>Ye+(We.wastage?.dough||0)+(We.wastage?.stuffing||0)+(We.wastage?.batter||0)+(We.wastage?.coating||0),0);Z.push({week:`W${5-_e}`,wastage:qe})}return Z})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#fed7aa"}),a.jsx(Pn,{dataKey:"week",tick:{fontSize:10}}),a.jsx(wn,{tick:{fontSize:10}}),a.jsx(zr,{}),a.jsx(mi,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),a.jsx(Un,{width:"100%",height:250,children:a.jsxs(gh,{data:(()=>{const Z=[];for(let _e=4;_e>=0;_e--){const fe=new Date;fe.setMonth(fe.getMonth()-_e);const oe=fe.toISOString().substring(0,7),Re=window.wastageFilterHelper,xe=_t.filter(qe=>Re.matchesProductionHouse(qe)&&qe.date.startsWith(oe)).reduce((qe,Ye)=>qe+(Ye.wastage?.dough||0)+(Ye.wastage?.stuffing||0)+(Ye.wastage?.batter||0)+(Ye.wastage?.coating||0),0);Z.push({month:oe.substring(5),wastage:xe})}return Z})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#fde68a"}),a.jsx(Pn,{dataKey:"month",tick:{fontSize:10}}),a.jsx(wn,{tick:{fontSize:10}}),a.jsx(zr,{}),a.jsx(mi,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(Z=>a.jsx("button",{onClick:()=>E(Z),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${T===Z?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.charAt(0).toUpperCase()+Z.slice(1)},Z))})]}),a.jsx(Un,{width:"100%",height:400,children:a.jsxs(ci,{data:(()=>{const Z=window.wastageFilterHelper,_e=_t.filter(oe=>{if(!Z.matchesProductionHouse(oe))return!1;if(T==="custom")return oe.date>=S.from&&oe.date<=S.to;const Re=new Date,Pe=new Date(oe.date);if(T==="daily"){const xe=new Date(Re);return xe.setDate(xe.getDate()-5),Pe>=xe}else if(T==="weekly"){const xe=new Date(Re);return xe.setDate(xe.getDate()-35),Pe>=xe}else if(T==="monthly"){const xe=new Date(Re);return xe.setMonth(xe.getMonth()-5),Pe>=xe}else if(T==="yearly"){const xe=new Date(Re);return xe.setFullYear(xe.getFullYear()-5),Pe>=xe}return!0}),fe=new Map;return _e.forEach(oe=>{let Re=oe.date,Pe=oe.date;if(T==="weekly"){const qe=new Date(oe.date),Ye=new Date(qe.setDate(qe.getDate()-qe.getDay())),We=new Date(Ye);We.setDate(We.getDate()+6),Re=Ye.toISOString().split("T")[0],Pe=`${Ye.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${We.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else T==="monthly"?(Re=oe.date.substring(0,7),Pe=Re):T==="yearly"&&(Re=oe.date.substring(0,4),Pe=Re);fe.has(Re)||fe.set(Re,{period:Pe,dough:0,stuffing:0,batter:0,coating:0});const xe=fe.get(Re);xe.dough+=oe.wastage?.dough||0,xe.stuffing+=oe.wastage?.stuffing||0,xe.batter+=oe.wastage?.batter||0,xe.coating+=oe.wastage?.coating||0}),Array.from(fe.values()).sort((oe,Re)=>oe.period.localeCompare(Re.period))})(),children:[a.jsx(da,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(Pn,{dataKey:"period",tick:{fontSize:12},angle:T==="weekly"?-15:0,textAnchor:T==="weekly"?"end":"middle",height:T==="weekly"?60:30}),a.jsx(wn,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),a.jsx(zr,{content:a.jsx(Zme,{})}),a.jsx(ma,{}),a.jsx(yr,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),a.jsx(yr,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),a.jsx(yr,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),a.jsx(yr,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),s&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(SE,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),pe?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{he(q),xt(le),De(!1),mr.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(ao,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:()=>{De(!1),Ae(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Cancel"]})]}):a.jsxs("button",{onClick:()=>{Ae(JSON.parse(JSON.stringify(ye))),Ee(Be),De(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Z1,{className:"w-4 h-4"}),"Edit SOP"]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[a.jsx(Pr,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),a.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:pe?le:Be,onChange:Z=>{pe&&Ee(Number(Z.target.value))},disabled:!pe,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),a.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(pe?q:ye).map(([Z,_e])=>{const fe={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"text-gray-900 mb-3",children:fe[Z]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),a.jsx("input",{type:"number",value:_e.dough,disabled:!pe,onChange:oe=>{pe&&Ae({...q,[Z]:{...q[Z],dough:Number(oe.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${pe?"bg-white":"bg-gray-100"}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),a.jsx("input",{type:"number",value:_e.stuffing,disabled:!pe,onChange:oe=>{pe&&Ae({...q,[Z]:{...q[Z],stuffing:Number(oe.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${pe?"bg-white":"bg-gray-100"}`})]}),_e.batter!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),a.jsx("input",{type:"number",value:_e.batter,disabled:!pe,onChange:oe=>{pe&&Ae({...q,[Z]:{...q[Z],batter:Number(oe.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${pe?"bg-white":"bg-gray-100"}`})]}),_e.coating!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),a.jsx("input",{type:"number",value:_e.coating,disabled:!pe,onChange:oe=>{pe&&Ae({...q,[Z]:{...q[Z],coating:Number(oe.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${pe?"bg-white":"bg-gray-100"}`})]})]})]},Z)})})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(gn,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),a.jsx(es,{label:"Date:",value:Ge,onChange:bt})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),a.jsx("div",{className:"space-y-6",children:(()=>{const Z=d==="production"?we:e.user?.designation==="production_incharge"?x:we;console.log(" SOP Compliance Filter - analyticsMode:",d),console.log(" SOP Compliance Filter - selectedProductionHouseId:",we),console.log(" SOP Compliance Filter - effectiveStoreId:",x),console.log(" SOP Compliance Filter - filterById:",Z),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",Ge),console.log(" SOP Compliance Filter - All production dates:",[...new Set(_t.map(oe=>oe.date))]),console.log(" SOP Compliance Filter - Total production records:",_t.length),console.log(" SOP Compliance Filter - Approved production records:",_t.filter(oe=>oe.approvalStatus==="approved").length);const _e=[Ge],fe=[];for(const oe of _e){const Re=_t.filter(qe=>{const Ye=d==="production"?we:e.user?.designation==="production_incharge"?x:we,Xe=(M.length>0?M:e.stores||[]).filter(ot=>ot.productionHouseId===Ye).map(ot=>ot.id),Ot=qe.storeId===Ye,Ht=qe.productionHouseId===Ye,Dt=(qe.productionHouseId||qe.storeId)===Ye,ft=qe.storeId&&Xe.includes(qe.storeId),er=qe.date===oe,Et=qe.approvalStatus==="approved",hr=Ot||Ht||Dt||ft,He=hr&&er&&Et;return console.log(" SOP Compliance - Checking production record:",{date:qe.date,storeId:qe.storeId,productionHouseId:qe.productionHouseId,approvalStatus:qe.approvalStatus,filterById:Ye,mappedStoreIds:Xe,matchesStoreId:Ot,matchesProductionHouseId:Ht,matchesFallback:Dt,matchesMappedStore:ft,matchesDate:er,isApproved:Et,passesFilter:hr,finalResult:He}),Ye&&!hr?!1:er&&Et});if(console.log(` SOP Compliance - Date ${oe}: Found ${Re.length} production records`),Re.length===0)continue;const Pe={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},xe={};Re.forEach(qe=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(Ye=>{const We=qe[Ye];if(We&&We.final>0){const Xe=Pe[Ye];xe[Xe]||(xe[Xe]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),xe[Xe].quantity+=We.final,xe[Xe].totalDough+=We.dough||0,xe[Xe].totalStuffing+=We.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(Ye=>{const We=qe[Ye];if(We&&We.final>0){const Xe=Pe[Ye];xe[Xe]||(xe[Xe]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),xe[Xe].quantity+=We.final,xe[Xe].totalBatter+=We.batter||0,xe[Xe].totalCoating+=We.coating||0}})}),fe.push({date:oe,usage:xe})}return fe.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsxs("p",{children:["No approved production data found for ",new Date(Ge).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),a.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):fe.map(({date:oe,usage:Re})=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-gray-900 mb-4",children:new Date(oe).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(Re).map(([Pe,xe])=>{if(xe.quantity===0||Pe==="vegKurkure"||Pe==="chickenKurkure")return null;const qe={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},Ye=xe.quantity>0?xe.totalDough*1e3/xe.quantity:0,We=xe.quantity>0?xe.totalStuffing*1e3/xe.quantity:0,Xe=xe.quantity>0?xe.totalBatter*1e3/xe.quantity:0,Ot=xe.quantity>0?xe.totalCoating*1e3/xe.quantity:0,Ht=ye[Pe].dough>0?(Ye-ye[Pe].dough)/ye[Pe].dough*100:0,Jt=ye[Pe].stuffing>0?(We-ye[Pe].stuffing)/ye[Pe].stuffing*100:0,Dt=ye[Pe].batter>0?(Xe-ye[Pe].batter)/ye[Pe].batter*100:0,ft=ye[Pe].coating>0?(Ot-ye[Pe].coating)/ye[Pe].coating*100:0,er=1-Be/100,Et=1+Be/100,hr=Ye>=ye[Pe].dough*er&&Ye<=ye[Pe].dough*Et,He=We>=ye[Pe].stuffing*er&&We<=ye[Pe].stuffing*Et,ot=!ye[Pe].batter||Xe>=ye[Pe].batter*er&&Xe<=ye[Pe].batter*Et,Br=!ye[Pe].coating||Ot>=ye[Pe].coating*er&&Ot<=ye[Pe].coating*Et,Or=hr&&He&&ot&&Br;return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${Or?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-900",children:qe[Pe]}),Or?a.jsx(ao,{className:"w-5 h-5 text-green-600"}):a.jsx(Pr,{className:"w-5 h-5 text-red-600"})]}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",xe.quantity," pcs"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:`flex justify-between items-center ${hr?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Dough:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Ye.toFixed(1),"g / ",ye[Pe].dough,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Ht)>Be?"text-red-600":"text-green-600"}`,children:[Ht>0?"+":"",Ht.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:`flex justify-between items-center ${He?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Stuffing:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[We.toFixed(1),"g / ",ye[Pe].stuffing,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Jt)>Be?"text-red-600":"text-green-600"}`,children:[Jt>0?"+":"",Jt.toFixed(1),"%"]})]})]}),ye[Pe].batter&&a.jsxs("div",{className:`flex justify-between items-center ${ot?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Batter:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Xe.toFixed(1),"g / ",ye[Pe].batter,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Dt)>Be?"text-red-600":"text-green-600"}`,children:[Dt>0?"+":"",Dt.toFixed(1),"%"]})]})]}),ye[Pe].coating&&a.jsxs("div",{className:`flex justify-between items-center ${Br?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Coating:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Ot.toFixed(1),"g / ",ye[Pe].coating,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(ft)>Be?"text-red-600":"text-green-600"}`,children:[ft>0?"+":"",ft.toFixed(1),"%"]})]})]})]})]},Pe)})})]},oe))})()})]})]})]}),v==="production-requests"&&a.jsx("div",{children:a.jsx(Roe,{context:e,highlightRequestId:r||null,selectedStoreId:p,onNavigateToManageItems:n})}),v==="recalibration-reports"&&a.jsx("div",{children:a.jsx(aI,{context:e,selectedStoreId:d==="production"?we:t,onOpenRecalibration:()=>z(!0),locationType:"production_house"})}),v==="store-recalibration"&&a.jsx("div",{children:a.jsx(aI,{context:e,selectedStoreId:x,locationType:"store"})})]}),se&&a.jsx(x2,{context:e,selectedStoreId:d==="production"?we:x,onClose:()=>{z(!1),d==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),ve(null),ie(null),setTimeout(()=>{console.log(" Timeout complete - fetching latest recalibration..."),Ut()},1500))},isProductionHouse:d==="production"}),Nt&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Ai,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:()=>{vt(!1),gr({})},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(Wr,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-green-200",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-yellow-200",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-orange-200",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-red-200",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"p-6 space-y-6",children:(e.inventoryItems?.filter(fe=>fe.category==="finished_product"&&fe.isActive)||[]).map(fe=>{const oe=fe.name.replace(/_([a-z])/g,Re=>Re[1].toUpperCase());return{key:fe.name,camelKey:oe,label:fe.displayName}}).map(({key:fe,camelKey:oe,label:Re})=>{const Pe=qt[oe]??Ce[oe]??{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-3",children:Re}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-green-700 font-semibold mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:Pe.high,onChange:xe=>{gr({...qt,[oe]:{...Pe,high:Number(xe.target.value)}})},className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-yellow-700 font-semibold mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:Pe.medium,onChange:xe=>{gr({...qt,[oe]:{...Pe,medium:Number(xe.target.value)}})},className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-red-700 font-semibold mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:Pe.low,onChange:xe=>{gr({...qt,[oe]:{...Pe,low:Number(xe.target.value)}})},className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50",placeholder:"e.g., 300"})]})]})]},oe)})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{vt(!1),gr({})},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{$e(qt),vt(!1),gr({}),mr.success("Stock alert thresholds updated successfully")},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2",children:[a.jsx(ao,{className:"w-5 h-5"}),"Save Thresholds"]})]})]})}),Qr&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Ai,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Plate Conversion Settings"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Configure momos per plate"})]})]}),a.jsx("button",{onClick:()=>{Hr(!1),Fe(sr)},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(Wr,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:cr,onChange:Z=>{const _e=Number(Z.target.value);_e>=1&&_e<=20&&Fe(_e)},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-center text-2xl font-bold",placeholder:"6"}),a.jsx("p",{className:"text-xs text-blue-700 mt-2 text-center",children:"Enter a number between 1 and 20"})]}),a.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Stock Available:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["170 pcs / ",Math.round(170/cr)," plates"]})]})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{Hr(!1),Fe(sr)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{lr(cr),localStorage.setItem("momosPerPlate",cr.toString()),Hr(!1),mr.success(`Plate conversion updated: ${cr} momos per plate`)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2",children:[a.jsx(ao,{className:"w-5 h-5"}),"Save Settings"]})]})]})}),O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(AE,{className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl",children:"Leave Details - Today"})]}),a.jsx("button",{onClick:()=>L(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:A===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(xn,{className:"w-8 h-8 text-green-600"})}),a.jsx("p",{className:"text-lg text-gray-900 mb-2",children:"Everyone is working today! "}),a.jsx("p",{className:"text-sm text-gray-600",children:e.user?.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"text-xl font-bold text-orange-600",children:A})," ",A===1?"employee":"employees"," on leave"]})}),a.jsx("div",{className:"space-y-3",children:B.map((Z,_e)=>a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(xn,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 font-semibold",children:Z.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",Z.employeeId]})]})]}),a.jsxs("div",{className:"ml-12 space-y-1",children:[Z.storeName&&Z.storeName!=="N/A"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(rr,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-gray-700",children:Z.storeName}),Z.storeId&&Z.storeId!=="N/A"&&a.jsxs("span",{className:"text-gray-500",children:["(",Z.storeId,")"]})]}),Z.reason&&a.jsxs("div",{className:"flex items-start gap-2 text-sm mt-2",children:[a.jsx(fi,{className:"w-4 h-4 text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Reason:"}),a.jsx("p",{className:"text-gray-700",children:Z.reason})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[a.jsx(Fr,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Date: ",new Date(Z.leaveDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]})]})]})]}),a.jsx("div",{className:"ml-4",children:a.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Approved"})})]})},Z.id||_e))})]})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200",children:a.jsx("button",{onClick:()=>L(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}function sI({userRole:e,selectedStoreId:t,currentUserId:r}){const[n,s]=F.useState("today"),[i,o]=F.useState(""),[l,u]=F.useState(""),[d,f]=F.useState("csv"),[p,m]=F.useState(!1),[x,v]=F.useState(!1),[y,b]=F.useState(null),[k,N]=F.useState(null),w=Wu();F.useEffect(()=>{(async()=>{const{data:{session:O}}=await w.auth.getSession();O?.access_token&&N(O.access_token)})()},[]);const T=()=>{const I=new Date;let O,L;switch(n){case"today":O=I.toISOString().split("T")[0],L=O;break;case"weekly":const X=new Date(I);X.setDate(I.getDate()-7),O=X.toISOString().split("T")[0],L=I.toISOString().split("T")[0];break;case"monthly":const U=new Date(I.getFullYear(),I.getMonth(),1),V=new Date(I.getFullYear(),I.getMonth()+1,0);O=U.toISOString().split("T")[0],L=V.toISOString().split("T")[0];break;case"custom":O=i,L=l;break}return{startDate:O,endDate:L}},E=async()=>{const{startDate:I,endDate:O}=T();if(!I||!O)return alert("Please select a valid date range"),null;if(!k)return alert("Not authenticated. Please log in again."),null;try{m(!0);const[L,X,U,V,ne,ee]=await Promise.all([Qm(k),u2(k),d2(k),nl(),Zo(),h2()]),R=(he,pe="date")=>he.filter(De=>{const q=De[pe],Ae=q>=I&&q<=O;if(t){const xt=De.storeId===t;return Ae&&xt}return Ae}),se=R(L),z=R(X),M=R(U),J=R(ne),te=R(ee);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:L.length,filteredInventory:se.length,totalSales:U.length,filteredSales:M.length,totalOverheads:X.length,filteredOverheads:z.length,sampleSalesStoreIds:U.slice(0,3).map(he=>({date:he.date,storeId:he.storeId})),sampleOverheadStoreIds:X.slice(0,3).map(he=>({date:he.date,storeId:he.storeId}))});const ie=se.reduce((he,pe)=>he+(pe.totalCost||0),0),me=z.reduce((he,pe)=>he+(pe.amount||0),0),ve=M.reduce((he,pe)=>he+(pe.offlineSales||0)+(pe.onlineSales||0),0),ye=J.reduce((he,pe)=>he+(pe.amount||0),0);return{startDate:I,endDate:O,storeId:t,inventory:se,overheads:z,sales:M,employees:V,payouts:J,production:te,summary:{totalInventorySpend:ie,totalOverheadSpend:me,totalSales:ve,totalPayouts:ye}}}catch(L){return console.error("Error fetching export data:",L),alert("Failed to fetch data for export"),null}finally{m(!1)}},S=async()=>{const I=await E();I&&(b(I),v(!0))},_=I=>{let O=`Data Export Report
`;return O+=`Period: ${I.startDate} to ${I.endDate}
`,I.storeId&&(O+=`Store ID: ${I.storeId}
`),O+=`Generated on: ${new Date().toLocaleString()}

`,O+=`SUMMARY
`,O+=`Total Inventory Spend,${I.summary.totalInventorySpend.toLocaleString()}
`,O+=`Total Overhead Spend,${I.summary.totalOverheadSpend.toLocaleString()}
`,O+=`Total Sales,${I.summary.totalSales.toLocaleString()}
`,O+=`Total Payouts,${I.summary.totalPayouts.toLocaleString()}
`,O+=`Net Profit/Loss,${(I.summary.totalSales-I.summary.totalInventorySpend-I.summary.totalOverheadSpend-I.summary.totalPayouts).toLocaleString()}

`,O+=`
INVENTORY ITEMS
`,O+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,I.inventory.forEach(L=>{O+=`${L.date},"${L.category}","${L.itemName}",${L.quantity},"${L.unit}",${L.price||0},${L.totalCost}
`}),I.production&&I.production.length>0&&(O+=`
PRODUCTION DATA
`,O+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,I.production.forEach(L=>{O+=`${L.date},${L.chickenMomos?.final||0},${L.chickenCheeseMomos?.final||0},${L.vegMomos?.final||0},${L.cheeseCornMomos?.final||0},${L.paneerMomos?.final||0},${L.vegKurkureMomos?.final||0},${L.chickenKurkureMomos?.final||0},${L.wastage?.total||0}
`})),O+=`
OVERHEAD EXPENSES
`,O+=`Date,Category,Description,Amount
`,I.overheads.forEach(L=>{O+=`${L.date},"${L.category}","${L.description||"-"}",${L.amount}
`}),O+=`
SALES DATA
`,O+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,I.sales.forEach(L=>{O+=`${L.date},${L.paytmAmount||0},${L.cashAmount||0},${L.onlineSales||0},${L.employeeSalary||0},${L.actualCashInHand||0},${L.cashOffset||0},"${L.approvalRequired?"Pending Approval":"Approved"}"
`}),O+=`
EMPLOYEE PAYOUTS
`,O+=`Date,Employee Name,Employee ID,Amount
`,I.payouts.forEach(L=>{const X=I.employees.find(U=>U.id===L.employeeId);O+=`${L.date},"${L.employeeName}","${X?.employeeId||"-"}",${L.amount}
`}),O+=`
EMPLOYEE MASTER LIST
`,O+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,I.employees.forEach(L=>{O+=`"${L.employeeId}","${L.name}","${L.type}","${L.role||"-"}","${L.phone}",${L.dailyRate||"-"}
`}),O},A=I=>_(I),P=I=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${I.startDate} to ${I.endDate}</p>
          ${I.storeId?`<p><strong>Store ID:</strong> ${I.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${I.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${I.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${I.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${I.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(I.summary.totalSales-I.summary.totalInventorySpend-I.summary.totalOverheadSpend-I.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${I.inventory.map(L=>`
                <tr>
                  <td>${L.date}</td>
                  <td>${L.category}</td>
                  <td>${L.itemName}</td>
                  <td>${L.quantity}</td>
                  <td>${L.unit}</td>
                  <td>${L.price||0}</td>
                  <td>${L.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${I.production&&I.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${I.production.map(L=>`
                <tr>
                  <td>${L.date}</td>
                  <td>${L.chickenMomos?.final||0}</td>
                  <td>${L.chickenCheeseMomos?.final||0}</td>
                  <td>${L.vegMomos?.final||0}</td>
                  <td>${L.cheeseCornMomos?.final||0}</td>
                  <td>${L.paneerMomos?.final||0}</td>
                  <td>${L.vegKurkureMomos?.final||0}</td>
                  <td>${L.chickenKurkureMomos?.final||0}</td>
                  <td>${L.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${I.overheads.map(L=>`
                <tr>
                  <td>${L.date}</td>
                  <td>${L.category}</td>
                  <td>${L.description||"-"}</td>
                  <td>${L.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${I.sales.map(L=>`
                <tr>
                  <td>${L.date}</td>
                  <td>${L.paytmAmount||0}</td>
                  <td>${L.cashAmount||0}</td>
                  <td>${L.onlineSales||0}</td>
                  <td>${L.employeeSalary||0}</td>
                  <td>${L.actualCashInHand||0}</td>
                  <td>${L.cashOffset||0}</td>
                  <td>${L.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${I.payouts.map(L=>{const X=I.employees.find(U=>U.id===L.employeeId);return`
                  <tr>
                    <td>${L.date}</td>
                    <td>${L.employeeName}</td>
                    <td>${X?.employeeId||"-"}</td>
                    <td>${L.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${I.employees.map(L=>`
                <tr>
                  <td>${L.employeeId}</td>
                  <td>${L.name}</td>
                  <td>${L.type}</td>
                  <td>${L.role||"-"}</td>
                  <td>${L.phone}</td>
                  <td>${L.dailyRate?""+L.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,B=async()=>{const I=await E();if(!I)return;let O,L,X;const U=`${I.startDate}_to_${I.endDate}`;switch(d){case"csv":O=_(I),L="text/csv",X=`export_${U}.csv`;break;case"excel":O=A(I),L="application/vnd.ms-excel",X=`export_${U}.xls`;break;case"pdf":O=P(I),L="text/html",X=`export_${U}.html`;break;default:return}const V=new Blob([O],{type:L}),ne=URL.createObjectURL(V),ee=document.createElement("a");ee.href=ne,ee.download=X,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(ne),alert(`Data exported successfully as ${X}`)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),a.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&a.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Fr,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${n==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Today"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),a.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${n==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Last 7 Days"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),a.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${n==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"This Month"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),a.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${n==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Custom"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),n==="custom"&&a.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:i,onChange:I=>o(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:l,onChange:I=>u(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(fi,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${d==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(oB,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),a.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${d==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(_p,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"Excel"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),a.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${d==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(fi,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"PDF/HTML"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[a.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),a.jsx("li",{children:" Production Data with all momo types and wastage"}),a.jsx("li",{children:" All Overhead Expenses categorized"}),a.jsx("li",{children:" Sales Data with payment breakdowns"}),a.jsx("li",{children:" Employee Payouts with detailed records"}),a.jsx("li",{children:" Employee Master List"}),a.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:S,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[a.jsx(fi,{className:"w-5 h-5"}),"Preview Data"]}),a.jsxs("button",{onClick:B,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(ii,{className:"w-5 h-5"}),p?"Generating...":"Export Data"]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),a.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),a.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),a.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})}),e==="cluster_head"&&a.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-lg",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Production Data Cleanup"}),a.jsxs("p",{className:"text-sm text-red-800 mb-4",children:["Remove ALL transactional data (inventory logs, sales, stock requests, production data, notifications, etc.) to prepare for production launch.",a.jsx("strong",{className:"block mt-2",children:" This will DELETE:"})]}),a.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4 mb-3",children:[a.jsx("li",{children:" All inventory purchase logs"}),a.jsx("li",{children:" All sales records"}),a.jsx("li",{children:" All production logs & requests"}),a.jsx("li",{children:" All stock requests & recalibrations"}),a.jsx("li",{children:" All overhead & fixed costs"}),a.jsx("li",{children:" All notifications"})]}),a.jsx("p",{className:"text-sm text-green-800 mb-4",children:a.jsx("strong",{className:"block mt-2",children:" This will PRESERVE:"})}),a.jsxs("ul",{className:"text-sm text-green-800 space-y-1 ml-4 mb-4",children:[a.jsx("li",{children:" Inventory Items (product metadata)"}),a.jsx("li",{children:" Employee Master Data"}),a.jsx("li",{children:" Employee Payouts, Timesheets & Leaves"}),a.jsx("li",{children:" Stores & Production Houses"})]}),a.jsxs("button",{onClick:async()=>{if(confirm(` CRITICAL WARNING: This will PERMANENTLY remove ALL transactional data:

 Inventory logs, Sales, Production data, Stock requests, Overheads, Fixed costs, Notifications

 PRESERVED: Inventory items metadata, Employee master data, Payouts, Timesheets, Leaves, Stores, Production houses

This action CANNOT be undone!

Are you absolutely sure you want to proceed?`))try{m(!0);const I=await dD();alert(` ${I.message}

 Total Deleted: ${I.totalDeleted} records

 Breakdown:
- Inventory Logs: ${I.stats.inventory}
- Sales: ${I.stats.sales}
- Item Sales: ${I.stats.itemSales}
- Overheads: ${I.stats.overheads}
- Fixed Costs: ${I.stats.fixedCosts}
- Stock Requests: ${I.stats.stockRequests}
- Stock Recalibrations: ${I.stats.stockRecalibrations}
- Production Data: ${I.stats.productionData}
- Production Requests: ${I.stats.productionRequests}
- Notifications: ${I.stats.notifications}`),window.location.reload()}catch(I){console.error("Error during cleanup:",I),alert(` Failed to cleanup production data: ${I.message}`)}finally{m(!1)}},disabled:p,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a.jsx("span",{children:""}),p?"Cleaning up...":"Cleanup Production Data"]}),a.jsx("p",{className:"text-xs text-red-700 mt-3",children:" This action cannot be undone. Make sure you have exported all necessary data first."})]})]})})]}),x&&y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),a.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),a.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),a.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[a.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&a.jsxs("p",{children:["Store ID: ",y.storeId]}),a.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const ege=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function iI({employeeId:e}){const[t,r]=F.useState(null),[n,s]=F.useState([]),[i,o]=F.useState(!0),[l,u]=F.useState("payouts"),[d,f]=F.useState(()=>{const U=new Date;return`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`}),[p,m]=F.useState(null),[x,v]=F.useState(null),[y,b]=F.useState([]),[k,N]=F.useState(!1),[w,T]=F.useState("");F.useEffect(()=>{E()},[e]);const E=async()=>{try{o(!0);const U=await nl(),V=U.find(ne=>ne.employeeId===e);if(V){r(V);const ee=(await Zo()).filter(z=>z.employeeId===V.id);s(ee);const se=(await m2()).filter(z=>z.employeeId===V.id);if(b(se),V.inchargeId){const z=U.find(M=>M.id===V.inchargeId);if(z&&(m(z),z.inchargeId)){const M=U.find(J=>J.id===z.inchargeId);M&&v(M)}}}}catch(U){console.error("Error loading employee data:",U)}finally{o(!1)}},S=async()=>{try{const U=parseFloat(w);if(!U||U<=0){alert("Please enter a valid amount");return}if(!t.monthlySalary){alert("Your salary information is not available. Please contact HR.");return}if(U>t.monthlySalary){alert("Advance amount cannot exceed your monthly salary");return}if(y.find(te=>te.status==="pending"||te.status==="approved"&&te.remainingAmount>0)){alert("You already have an active or pending salary advance. Please wait for it to be processed or completed.");return}const ne=U/4,ee=new Date,R=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`,se=[];for(let te=0;te<4;te++){const ie=new Date(ee.getFullYear(),ee.getMonth()+te,1),me=`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}`;se.push({month:me,amount:ne,deducted:!1})}const z=new Date(ee.getFullYear(),ee.getMonth()+3,1),M=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`,J={employeeId:t.id,employeeName:t.name,employeeEmployeeId:t.employeeId,amount:U,requestDate:new Date().toISOString(),status:"pending",installments:4,monthlyDeduction:ne,remainingAmount:U,startMonth:R,endMonth:M,deductions:se};await g2(J),alert("Salary advance request submitted successfully! Your request will be reviewed by the Cluster Head."),N(!1),T(""),E()}catch(U){console.error("Error applying for salary advance:",U),alert("Failed to submit salary advance request. Please try again.")}},A=(()=>{if(!d)return n;const[U,V]=d.split("-");return n.filter(ne=>{const ee=new Date(ne.date);return ee.getFullYear()===parseInt(U)&&ee.getMonth()+1===parseInt(V)})})(),P=A.reduce((U,V)=>U+V.amount,0),B=(U,V)=>!U&&!V?"N/A":U?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[U]||U:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[V||""]||V||"N/A",I=U=>["January","February","March","April","May","June","July","August","September","October","November","December"][U],L=(()=>{const U=new Date,V=[];for(let ne=0;ne<12;ne++){const ee=new Date(U.getFullYear(),U.getMonth()-ne,1),R=I(ee.getMonth()),se=ee.getFullYear().toString(),z=n.filter(ie=>{const me=new Date(ie.date);return me.getMonth()===ee.getMonth()&&me.getFullYear()===ee.getFullYear()}),M=z.reduce((ie,me)=>ie+me.amount,0),J=new Date(ee.getFullYear(),ee.getMonth()+1,5),te=U>=J;V.push({month:R,year:se,payouts:z,total:M,isAvailable:te})}return V})(),X=()=>{const U=[],V=new Date;for(let ne=0;ne<12;ne++){const ee=new Date(V.getFullYear(),V.getMonth()-ne,1),R=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`;U.push({value:R,label:ee.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return U};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),a.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ro,{className:"w-4 h-4"}),a.jsx("span",{children:"My Payouts"})]})}),a.jsx("button",{onClick:()=>u("advance"),className:`px-6 py-2 rounded-lg transition-colors ${l==="advance"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cu,{className:"w-4 h-4"}),a.jsx("span",{children:"Salary Advance"})]})}),a.jsx("button",{onClick:()=>u("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{children:"My Manager"})]})})]})]}),a.jsxs("div",{className:"p-6",children:[l==="payouts"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[a.jsx(Fr,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),a.jsx("select",{value:d,onChange:U=>f(U.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:X().map(U=>a.jsx("option",{value:U.value,children:U.label},U.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),a.jsx(qn,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",P.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[A.length," payment",A.length!==1?"s":""]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),a.jsx(gn,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",A.length>0?Math.round(P/A.length).toLocaleString():0]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),a.jsx(ro,{className:"w-5 h-5 text-purple-600"})]}),a.jsx("div",{className:"text-2xl text-gray-900",children:A.length}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),A.length===0?a.jsxs("div",{className:"p-12 text-center bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ro,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),a.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):a.jsx("div",{className:"overflow-x-auto bg-white",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:A.sort((U,V)=>new Date(V.date).getTime()-new Date(U.date).getTime()).map(U=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(U.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",U.amount.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},U.id))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fi,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),a.jsx("div",{className:"p-6 bg-white",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map((U,V)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${U.isAvailable&&U.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[U.month," ",U.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[U.payouts.length," payment",U.payouts.length!==1?"s":""]})]}),U.isAvailable&&U.payouts.length>0?a.jsxs("button",{onClick:()=>ege(t.name,t.employeeId,U.month,U.year,U.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(ii,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:U.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",U.total.toLocaleString("en-IN")]})]})]},V))})})]})]}),l==="advance"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Salary Advance"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Apply for salary advance with automatic 4-month recovery"})]}),t.type==="fulltime"&&a.jsxs("button",{onClick:()=>N(!0),disabled:y.some(U=>U.status==="pending"||U.status==="approved"&&U.remainingAmount>0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(cu,{className:"w-5 h-5"}),a.jsx("span",{children:"Apply for Advance"})]})]}),t.type!=="fulltime"&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:"Not Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Salary advance is only available for permanent employees"})]})]})}),y.length>0?a.jsx("div",{className:"space-y-4",children:y.map(U=>a.jsxs("div",{className:`border-2 rounded-xl p-6 ${U.status==="pending"?"border-yellow-300 bg-yellow-50":U.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["",U.amount.toLocaleString("en-IN")," Advance"]}),U.status==="pending"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[a.jsx(on,{className:"w-3 h-3"}),"Pending Approval"]}),U.status==="approved"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[a.jsx(nr,{className:"w-3 h-3"}),"Approved"]}),U.status==="rejected"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:[a.jsx(pa,{className:"w-3 h-3"}),"Rejected"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Applied on ",new Date(U.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})}),U.status==="rejected"&&U.rejectionReason&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded-lg p-3 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),a.jsx("p",{className:"text-sm text-red-700",children:U.rejectionReason})]}),U.status==="approved"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",U.monthlyDeduction.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining Balance"}),a.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["",U.remainingAmount.toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[V,ne]=U.startMonth.split("-");return new Date(parseInt(V),parseInt(ne)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[V,ne]=U.endMonth.split("-");return new Date(parseInt(V),parseInt(ne)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4",children:[a.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Schedule"}),a.jsx("div",{className:"space-y-2",children:U.deductions.map((V,ne)=>a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${V.deducted?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[V.deducted?a.jsx(nr,{className:"w-5 h-5 text-green-600"}):a.jsx(on,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(V.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),V.deducted&&V.deductedDate&&a.jsxs("p",{className:"text-xs text-gray-600",children:["Deducted on ",new Date(V.deductedDate).toLocaleDateString("en-IN")]})]})]}),a.jsxs("p",{className:`text-sm font-semibold ${V.deducted?"text-green-700":"text-gray-700"}`,children:["",V.amount.toLocaleString("en-IN")]})]},ne))})]})]})]},U.id))}):a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[a.jsx(cu,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No Salary Advances Yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:t.type==="fulltime"?'Click "Apply for Advance" to request a salary advance':"Salary advance is only available for permanent employees"})]})]}),l==="manager"&&a.jsx("div",{children:p?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:p.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:p.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Y0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Y0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(_h,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Sp,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:B(p.designation,p.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Aa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.employeeId||"N/A"})]})]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),a.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),x&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:x.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:x.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),x&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Y0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Y0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(_h,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Sp,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:B(x.designation,x.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(Aa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.employeeId||"N/A"})]})]})]})]}),x&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),a.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Aa,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),a.jsx("li",{children:" This dashboard shows only your personal payout history"}),a.jsx("li",{children:" For any discrepancies, please contact your manager"}),a.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})}),k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Apply for Salary Advance"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Amount will be deducted over 4 months"})]}),a.jsx("button",{onClick:()=>{N(!1),T("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(pa,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Your Monthly Salary"}),a.jsxs("p",{className:"text-2xl font-semibold text-purple-900",children:["",t.monthlySalary?.toLocaleString("en-IN")||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Amount ()"}),a.jsx("input",{type:"number",value:w,onChange:U=>T(U.target.value),placeholder:"Enter amount",max:t.monthlySalary||0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",t.monthlySalary?.toLocaleString("en-IN")]})]}),w&&parseFloat(w)>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Deduction Schedule:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Monthly Deduction:"}),a.jsxs("span",{className:"font-semibold text-blue-900",children:["",(parseFloat(w)/4).toLocaleString("en-IN")]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Duration:"}),a.jsx("span",{className:"font-semibold text-blue-900",children:"4 Months"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-blue-800",children:"Total Amount:"}),a.jsxs("span",{className:"font-semibold text-blue-900",children:["",parseFloat(w).toLocaleString("en-IN")]})]})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Pr,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Important:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[a.jsx("li",{children:"Your request will be sent to Cluster Head for approval"}),a.jsx("li",{children:"The amount will be deducted equally over 4 months"}),a.jsx("li",{children:"Deductions will start from your next salary payment"}),a.jsx("li",{children:"You cannot apply for another advance until this one is recovered"})]})]})]})})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{N(!1),T("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:!w||parseFloat(w)<=0||parseFloat(w)>(t.monthlySalary||0),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Submit Request"})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function JN({context:e,selectedStoreId:t}){const[r,n]=F.useState(new Date().toISOString().split("T")[0]),[s,i]=F.useState("entry"),[o,l]=F.useState(!1),[u,d]=F.useState(!1),[f,p]=F.useState(!1),m=e.user?.designation==="production_incharge",x=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge",v=e.user?.role==="cluster_head",y=m,b=x,k=x||v,N=F.useMemo(()=>{const A=t||e.user?.storeId;Lr.debugProduction("ProductionManagement - effectiveStoreId:",A),Lr.debugProduction("ProductionManagement - selectedStoreId prop:",t),Lr.debugProduction("ProductionManagement - user storeId:",e.user?.storeId);const P=A?e.productionData.filter(B=>B.storeId===A):e.productionData;return Lr.debugProduction("ProductionManagement - filtered production count:",P.length),P.find(B=>B.date===r)},[e.productionData,r,t,e.user?.storeId]),[w,T]=F.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});F.useEffect(()=>{T(N?{date:N.date,chickenMomos:N.chickenMomos,chickenCheeseMomos:N.chickenCheeseMomos,vegMomos:N.vegMomos,cheeseCornMomos:N.cheeseCornMomos,paneerMomos:N.paneerMomos,vegKurkureMomos:N.vegKurkureMomos,chickenKurkureMomos:N.chickenKurkureMomos,wastage:N.wastage,sauces:N.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,N]);const E=async A=>{if(A.preventDefault(),o){Lr.warn("Submission already in progress, ignoring duplicate request");return}const P={...w,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",P.storeId),console.log("  - Production data productionHouseId:",P.productionHouseId),console.log("  - Full production data:",P);try{l(!0),N?(await e.updateProductionData(N.id,P),alert("Production data updated successfully!")):(await e.addProductionData(P),alert("Production data saved successfully!"))}catch(B){console.error("Error saving production data:",B),alert("Failed to save production data. Please try again.")}finally{l(!1)}},S=async()=>{if(N){if(u){console.log(" Approval already in progress, ignoring duplicate request");return}try{d(!0),await e.approveProductionData(N.id);const A=e.productionHouses.find(P=>P.productionHeadId===e.user?.employeeId);if(A&&N){const P={...A.inventory},B=N;Object.entries({chickenMomos:"chicken",chickenCheeseMomos:"chickenCheese",vegMomos:"veg",cheeseCornMomos:"cheeseCorn",paneerMomos:"paneer",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"}).forEach(([O,L])=>{const X=B[O]?.final||0;X>0&&(P[L]=(P[L]||0)+X,console.log(`   Added ${X} ${L} from ${O}`))}),B.items&&Object.entries(B.items).forEach(([O,L])=>{const X=L?.final||0;X>0&&(P[O]=(P[O]||0)+X,console.log(`   Added ${X} ${O} from dynamic items`))}),await e.updateProductionHouseInventory(A.id,P),console.log(" Production house inventory updated after approval:",P)}alert("Production data approved successfully! Inventory updated.")}catch(A){console.error("Error approving production:",A),alert("Failed to approve production data. Please try again.")}finally{d(!1)}}},_=async()=>{if(confirm("This will remove duplicate pending production entries, keeping only the original entry for each date. Continue?")){p(!0);try{const A=await uD();A.success&&(mr.success(A.message),A.duplicatesFound>0?(console.log(" Cleanup Details:",A.details),mr.info("Refreshing data...",{duration:2e3}),setTimeout(()=>{window.location.reload()},2e3)):(mr.info("No duplicate entries found!"),p(!1)))}catch(A){console.error("Error cleaning up duplicates:",A),mr.error("Failed to clean up duplicates. Please try again."),p(!1)}}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Nn,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),v&&s==="approvals"&&a.jsxs("button",{onClick:_,disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[a.jsx(u9,{className:"w-4 h-4"}),f?"Cleaning...":"Clean Duplicates"]})]}),k&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[a.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),a.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const A=e.productionData.filter(P=>P.approvalStatus==="pending"&&(!e.user?.storeId||P.storeId===e.user.storeId)).length;return A>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:A})})()]})]}),s==="approvals"&&k&&a.jsx("div",{className:"space-y-4",children:(()=>{const A=e.productionData.filter(P=>P.approvalStatus==="pending"&&(!e.user?.storeId||P.storeId===e.user.storeId)).sort((P,B)=>new Date(B.date).getTime()-new Date(P.date).getTime());return A.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(nr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):A.map(P=>{const B=P.chickenMomos.final+P.chickenCheeseMomos.final+P.vegMomos.final+P.cheeseCornMomos.final+P.paneerMomos.final+P.vegKurkureMomos.final+P.chickenKurkureMomos.final,I=P.wastage.dough+P.wastage.stuffing+P.wastage.batter+P.wastage.coating;return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(On,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-xl text-gray-900",children:new Date(P.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",P.createdBy]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(P.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(ps,{className:"w-5 h-5"}),"Approve"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[B," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[I.toFixed(2)," kg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[P.vegKurkureMomos.final+P.chickenKurkureMomos.final," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[P.chickenMomos.final+P.chickenCheeseMomos.final+P.vegMomos.final+P.cheeseCornMomos.final+P.paneerMomos.final," ","pcs"]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[P.chickenMomos.final>0&&a.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chicken"}),a.jsxs("p",{className:"text-gray-900",children:[P.chickenMomos.final," pcs"]})]}),P.chickenCheeseMomos.final>0&&a.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),a.jsxs("p",{className:"text-gray-900",children:[P.chickenCheeseMomos.final," pcs"]})]}),P.vegMomos.final>0&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg"}),a.jsxs("p",{className:"text-gray-900",children:[P.vegMomos.final," pcs"]})]}),P.cheeseCornMomos.final>0&&a.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),a.jsxs("p",{className:"text-gray-900",children:[P.cheeseCornMomos.final," pcs"]})]}),P.paneerMomos.final>0&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Paneer"}),a.jsxs("p",{className:"text-gray-900",children:[P.paneerMomos.final," pcs"]})]}),P.vegKurkureMomos.final>0&&a.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[P.vegKurkureMomos.final," pcs"]})]}),P.chickenKurkureMomos.final>0&&a.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[P.chickenKurkureMomos.final," pcs"]})]})]})]})]},P.id)})})()}),s==="entry"&&a.jsxs(a.Fragment,{children:[a.jsx(ag,{selectedDate:r,onDateChange:n}),N&&N.approvalStatus==="pending"&&a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(On,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),N&&N.approvalStatus==="approved"&&a.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nr,{className:"w-5 h-5 text-green-600"}),a.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",N.approvedBy]})]})}),b&&N&&N.approvalStatus==="pending"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ps,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",N.createdBy," is awaiting your approval."]}),a.jsxs("button",{onClick:S,disabled:u,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ps,{className:"w-5 h-5"}),u?"Approving...":"Approve Production Data"]})]}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(q7,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.dough,onChange:A=>T({...w,chickenMomos:{...w.chickenMomos,dough:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.stuffing,onChange:A=>T({...w,chickenMomos:{...w.chickenMomos,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.chickenMomos.final,onChange:A=>T({...w,chickenMomos:{...w.chickenMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.dough,onChange:A=>T({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,dough:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.stuffing,onChange:A=>T({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.chickenCheeseMomos.final,onChange:A=>T({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.dough,onChange:A=>T({...w,vegMomos:{...w.vegMomos,dough:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.stuffing,onChange:A=>T({...w,vegMomos:{...w.vegMomos,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.vegMomos.final,onChange:A=>T({...w,vegMomos:{...w.vegMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.dough,onChange:A=>T({...w,cheeseCornMomos:{...w.cheeseCornMomos,dough:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.stuffing,onChange:A=>T({...w,cheeseCornMomos:{...w.cheeseCornMomos,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.cheeseCornMomos.final,onChange:A=>T({...w,cheeseCornMomos:{...w.cheeseCornMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.dough,onChange:A=>T({...w,paneerMomos:{...w.paneerMomos,dough:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.stuffing,onChange:A=>T({...w,paneerMomos:{...w.paneerMomos,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:w.paneerMomos.final,onChange:A=>T({...w,paneerMomos:{...w.paneerMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(Nn,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.batter,onChange:A=>T({...w,vegKurkureMomos:{...w.vegKurkureMomos,batter:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.coating,onChange:A=>T({...w,vegKurkureMomos:{...w.vegKurkureMomos,coating:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:w.vegKurkureMomos.final,onChange:A=>T({...w,vegKurkureMomos:{...w.vegKurkureMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.batter,onChange:A=>T({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,batter:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.coating,onChange:A=>T({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,coating:parseFloat(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:w.chickenKurkureMomos.final,onChange:A=>T({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,final:parseInt(A.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(bs,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.dough,onChange:A=>T({...w,wastage:{...w.wastage,dough:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.stuffing,onChange:A=>T({...w,wastage:{...w.wastage,stuffing:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.batter,onChange:A=>T({...w,wastage:{...w.wastage,batter:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:w.wastage.coating,onChange:A=>T({...w,wastage:{...w.wastage,coating:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(rB,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),a.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.panfriedSauce,onChange:A=>T({...w,sauces:{...w.sauces,panfriedSauce:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.chilliChickenSauce,onChange:A=>T({...w,sauces:{...w.sauces,chilliChickenSauce:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyKoreanSauce,onChange:A=>T({...w,sauces:{...w.sauces,spicyKoreanSauce:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.hotGarlicSauce,onChange:A=>T({...w,sauces:{...w.sauces,hotGarlicSauce:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.tandooriSauce,onChange:A=>T({...w,sauces:{...w.sauces,tandooriSauce:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.soupPremix,onChange:A=>T({...w,sauces:{...w.sauces,soupPremix:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.greenMayoChutney,onChange:A=>T({...w,sauces:{...w.sauces,greenMayoChutney:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyRedChutney,onChange:A=>T({...w,sauces:{...w.sauces,spicyRedChutney:parseFloat(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),y&&a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":N?"Update Production Data":"Save Production Data"})})]})]})]})}function tge({user:e,inventory:t,overheads:r,fixedCosts:n,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:u,productionRequests:d,employees:f,stores:p,inventoryItems:m,onLogout:x,onDataUpdate:v}){const[y,b]=F.useState("analytics"),[k,N]=F.useState(null),[w,T]=F.useState(new Date().toISOString().split("T")[0]),E={inventory:t,overheads:r,fixedCosts:n,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:u,productionRequests:d,employees:f,stores:p,managedStoreIds:[],managedProductionHouseIds:[],inventoryItems:m,loadInventoryItems:async()=>{},addInventoryItem:async()=>{},addOverheadItem:async()=>{},addFixedCostItem:async()=>{},updateInventoryItem:async()=>{},updateOverheadItem:async()=>{},updateFixedCostItem:async()=>{},deleteInventoryItem:async()=>{},deleteOverheadItem:async()=>{},deleteFixedCostItem:async()=>{},addSalesData:async()=>{},updateSalesData:async()=>{},approveSalesData:async()=>{},requestSalesApproval:async()=>{},approveDiscrepancy:async()=>{},rejectDiscrepancy:async()=>{},addProductionData:async()=>{},updateProductionData:async()=>{},approveProductionData:async()=>{},addProductionHouse:async()=>{},updateProductionHouse:async()=>{},updateProductionHouseInventory:async()=>{},deleteProductionHouse:async()=>{},setProductionHouses:()=>{},createStockRequest:async()=>{},fulfillStockRequest:async()=>{},cancelStockRequest:async()=>{},isManager:!1,user:e},S=[{id:"analytics",label:"Analytics",icon:kI},{id:"inventory",label:"Inventory",icon:rr},{id:"sales",label:"Sales",icon:qn},{id:"production",label:"Production",icon:Nn},{id:"payroll",label:"Payroll",icon:xn}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white/20 rounded-lg backdrop-blur-sm",children:a.jsx(Y9,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-white text-lg font-bold",children:"Bhandar-IMS"}),a.jsx("p",{className:"text-xs text-slate-200",children:"Audit Dashboard"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right hidden sm:block",children:[a.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),a.jsxs("p",{className:"text-xs text-slate-200 flex items-center justify-end gap-1",children:[a.jsx(to,{className:"w-3 h-3"}),"Read-Only Access"]})]}),a.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all backdrop-blur-sm",children:[a.jsx(Xd,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),a.jsx("div",{className:"flex gap-2 pb-3 overflow-x-auto",children:S.map(_=>a.jsxs("button",{onClick:()=>b(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${y===_.id?"bg-white text-slate-800 shadow-lg":"text-white hover:bg-white/10"}`,children:[a.jsx(_.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:_.label})]},_.id))})]})}),a.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-amber-800",children:[a.jsx(to,{className:"w-5 h-5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Audit Mode:"})," You have read-only access to all data. You cannot create, edit, or delete any records."]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[y==="analytics"&&a.jsx(XN,{context:E,selectedStoreId:k}),y==="inventory"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventory View"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to inventory data"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(to,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(mj,{context:E,selectedStoreId:k})]}),y==="sales"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sales Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to sales records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(to,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Offline Sales"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Online Sales"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Cash"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Paytm"}),a.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),a.jsx("tbody",{children:s.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500",children:"No sales data available"})}):s.sort((_,A)=>new Date(A.date).getTime()-new Date(_.date).getTime()).slice(0,50).map(_=>{const A=p.find(P=>P.id===_.storeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(_.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:A?.name||"Unknown Store"}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.offlineSales.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.onlineSales.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.cashAmount.toLocaleString("en-IN")]}),a.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",_.paytmAmount.toLocaleString("en-IN")]}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${_.approvalStatus==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:_.approvalStatus==="approved"?"Approved":"Pending"})})]},_.id)})})]})})]}),y==="production"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Production Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to production records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(to,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(JN,{context:E,selectedStoreId:k})]}),y==="payroll"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payroll Data"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to payroll records"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[a.jsx(to,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),a.jsx(wk,{userRole:"audit",selectedDate:w,userName:e.name,userEmail:e.email,employees:f,stores:p})]})]})]})}function rge({onLogin:e,onSignup:t,error:r}){const[n,s]=F.useState(!1),[i,o]=F.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,u]=F.useState(!1),d=async f=>{if(f.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}u(!0);try{n?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:a.jsx(rr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),a.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n?"Create your account":"Sign in to your account"})]}),r&&a.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),a.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:n,children:[a.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),a.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"}),a.jsx("option",{value:"audit",children:"Audit (View reports)"})]})]}),i.role==="employee"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:n&&i.role==="employee"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),n&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?a.jsxs(a.Fragment,{children:[a.jsx(Tf,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[n?a.jsx(Ti,{className:"w-5 h-5"}):a.jsx(C9,{className:"w-5 h-5"}),n?"Create Account":"Sign In"]})})]}),a.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:a.jsx("button",{onClick:()=>{s(!n),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function nge({user:e}){const[t,r]=F.useState(d(new Date)),[n,s]=F.useState([]),[i,o]=F.useState(!1),[l,u]=F.useState([]);F.useEffect(()=>{p(),m()},[t]);function d(A){const P=new Date(A),B=P.getDay(),I=P.getDate()-B+(B===0?-6:1);return new Date(P.setDate(I))}function f(A){const P=[];for(let B=0;B<7;B++){const I=new Date(A);I.setDate(A.getDate()+B),P.push(I)}return P}const p=async()=>{try{o(!0);const A=await Ih(e.employeeId);s(A)}catch(A){console.error("Error loading timesheet:",A)}finally{o(!1)}},m=async()=>{try{const A=await Vu(e.employeeId);u(A.filter(P=>P.status==="approved"||P.status==="pending"))}catch(A){console.error("Error loading leaves:",A)}},x=A=>{const P=A.toISOString().split("T")[0];return l.some(B=>B.leaveDate===P)},v=A=>{const P=A.toISOString().split("T")[0],B=n.find(I=>I.date===P);return B||{employeeId:e.employeeId,date:P,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:x(A)}},y=(A,P)=>{if(!A||!P)return 0;const[B,I]=A.split(":").map(Number),[O,L]=P.split(":").map(Number),X=B*60+I;return(O*60+L-X)/60},b=(A,P,B)=>{const I=A.toISOString().split("T")[0],O=n.find(U=>U.date===I);let L;O?L={...O,[P]:B}:L={employeeId:e.employeeId,date:I,startTime:P==="startTime"?B:"",endTime:P==="endTime"?B:"",totalHours:0,status:"pending",isLeave:!1},L.totalHours=y(L.startTime,L.endTime);const X=n.filter(U=>U.date!==I);s([...X,L])},k=async A=>{const P=v(A);if(!P.startTime||!P.endTime){alert("Please enter both start and end times");return}if(P.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(P),await p(),alert("Timesheet saved successfully")}catch(B){console.error("Error saving timesheet:",B),alert("Error saving timesheet")}finally{o(!1)}},N=async()=>{const P=f(t).map(B=>v(B)).filter(B=>B.startTime&&B.endTime);if(P.length===0){alert("Please enter timesheet data for at least one day");return}for(const B of P)if(B.totalHours<4){alert(`${B.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(P),await p(),alert("Week timesheet saved successfully")}catch(B){console.error("Error saving week timesheet:",B),alert("Error saving week timesheet")}finally{o(!1)}},w=()=>{const A=new Date(t);A.setDate(A.getDate()-7),r(A)},T=()=>{const A=new Date(t);A.setDate(A.getDate()+7),r(A)},E=async()=>{try{o(!0);const A=new Date(t);A.setDate(A.getDate()-7);const P=f(A),B=await Ih(e.employeeId),I=P.map(U=>{const V=U.toISOString().split("T")[0];return B.find(ne=>ne.date===V)}).filter(Boolean);if(I.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const O=f(t),L=[];if(O.forEach((U,V)=>{const ne=U.toISOString().split("T")[0],ee=I[V],R=n.find(z=>z.date===ne);!x(U)&&ee&&ee.startTime&&ee.endTime&&(!R||R.status!=="approved")&&L.push({employeeId:e.employeeId,date:ne,startTime:ee.startTime,endTime:ee.endTime,totalHours:ee.totalHours,status:"pending",isLeave:!1})}),L.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const X=[...n];L.forEach(U=>{const V=X.findIndex(ne=>ne.date===U.date);V>=0?X[V]=U:X.push(U)}),s(X),alert(`Copied ${L.length} day(s) from previous week! Don't forget to save.`)}catch(A){console.error("Error copying from previous week:",A),alert("Error copying data from previous week")}finally{o(!1)}},S=f(t),_=new Date(t);return _.setDate(_.getDate()+6),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),a.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(J1,{className:"w-4 h-4"}),"Previous Week"]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[a.jsx(Fr,{className:"w-5 h-5 text-purple-600"}),a.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),a.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",a.jsx(Qo,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:a.jsxs("button",{onClick:E,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(s9,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:S.map((A,P)=>{const B=v(A),I=x(A);return a.jsxs("tr",{className:I?"bg-yellow-50":P%2===0?"bg-gray-50":"bg-white",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:A.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:A.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:I?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:B.startTime,onChange:O=>b(A,"startTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:I?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:B.endTime,onChange:O=>b(A,"endTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:I?a.jsx("span",{className:"text-yellow-700",children:"-"}):a.jsx("span",{className:`${B.totalHours>=4?"text-green-700":B.totalHours>0?"text-red-700":"text-gray-500"}`,children:B.totalHours>0?`${B.totalHours.toFixed(2)} hrs`:"-"})}),a.jsx("td",{className:"px-6 py-4",children:I?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Pr,{className:"w-4 h-4"}),"Leave"]}):B.status==="approved"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(nr,{className:"w-4 h-4"}),"Approved"]}):B.status==="rejected"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(pa,{className:"w-4 h-4"}),"Rejected"]}):B.startTime&&B.endTime?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(on,{className:"w-4 h-4"}),"Pending"]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),a.jsx("td",{className:"px-6 py-4",children:!I&&B.status!=="approved"&&a.jsxs("button",{onClick:()=>k(A),disabled:i||!B.startTime||!B.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[a.jsx(Gl,{className:"w-4 h-4"}),"Save"]})})]},P)})})]})})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:N,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[a.jsx(Gl,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function age({user:e}){const[t,r]=F.useState([]),[n,s]=F.useState(0),[i,o]=F.useState(0),[l,u]=F.useState(!1),[d,f]=F.useState(!1),[p,m]=F.useState({leaveDate:"",leaveType:"full",reason:""});F.useEffect(()=>{x(),v()},[]),F.useEffect(()=>{y()},[t,n]);const x=async()=>{try{u(!0);const w=await Vu(e.employeeId);r(w)}catch(w){console.error("Error loading leaves:",w)}finally{u(!1)}},v=async()=>{try{const w=await $D(e.employeeId,e.joiningDate||"2024-01-01");s(w)}catch(w){console.error("Error calculating leave balance:",w)}},y=()=>{const T=t.filter(E=>E.status==="pending").reduce((E,S)=>{const _=S.leaveType||"full";return E+(_==="half"?.5:1)},0);o(Math.max(0,n-T))},b=async()=>{if(!p.leaveDate||!p.reason){alert("Please fill all fields");return}if(t.find(T=>T.leaveDate===p.leaveDate)){alert("Leave already applied for this date");return}if(n<=0){alert("Insufficient leave balance");return}try{u(!0);const T={employeeId:e.employeeId,leaveDate:p.leaveDate,leaveType:p.leaveType,reason:p.reason,status:"pending",appliedAt:new Date().toISOString()};await FD(T),await x(),await v(),m({leaveDate:"",leaveType:"full",reason:""}),f(!1),alert("Leave application submitted successfully")}catch(T){console.error("Error applying leave:",T),alert("Error applying leave")}finally{u(!1)}},k=w=>{switch(w){case"approved":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(nr,{className:"w-4 h-4"}),"Approved"]});case"rejected":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(pa,{className:"w-4 h-4"}),"Rejected"]});default:return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(on,{className:"w-4 h-4"}),"Pending"]})}},N=[...t].sort((w,T)=>new Date(T.leaveDate).getTime()-new Date(w.leaveDate).getTime());return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),a.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-lg mb-4 opacity-90",children:"Leave Balance"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Current Balance"}),a.jsx("div",{className:"text-5xl mb-1",children:n}),a.jsx("p",{className:"text-xs opacity-75",children:"approved leaves deducted"})]}),i!==n&&a.jsxs("div",{className:"pt-4 border-t border-white/20",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Projected Balance"}),a.jsx("div",{className:"text-3xl mb-1",children:i}),a.jsx("p",{className:"text-xs opacity-75",children:"if all pending leaves are approved"})]}),a.jsx("p",{className:"text-sm opacity-75 mt-4",children:"3 leaves/month  accumulates monthly  resets yearly"})]}),a.jsx("div",{className:"bg-white/20 rounded-full p-6",children:a.jsx(Fr,{className:"w-16 h-16"})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>f(!d),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[a.jsx(co,{className:"w-5 h-5"}),"Apply for Leave"]})}),d&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),a.jsx("input",{type:"date",value:p.leaveDate,onChange:w=>m({...p,leaveDate:w.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Type"}),a.jsxs("select",{value:p.leaveType,onChange:w=>m({...p,leaveType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"full",children:"Full Day"}),a.jsx("option",{value:"half",children:"Half Day"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),a.jsx("input",{type:"text",value:p.reason,onChange:w=>m({...p,reason:w.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:b,disabled:l,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),a.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),l?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):N.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Fr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map((w,T)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(w.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(w.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(w.leaveType||"full")==="full"?"Full Day":"Half Day"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:w.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.appliedAt?new Date(w.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:k(w.status)}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.approvedBy||"-"})]},T))})]})})]}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Leave Policy:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),a.jsx("li",{children:"Unused leaves carry forward within the year"}),a.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),a.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),a.jsx("li",{children:"All leave applications require manager approval"}),a.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function sge({managerId:e}){const[t,r]=F.useState(!1),[n,s]=F.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${In}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const u=`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",u);const d=await fetch(u,{headers:{Authorization:`Bearer ${In}`}});console.log("Manager route status:",d.status);const f=await d.text();console.log("Manager route response:",f),o.managerRoute={url:u,status:d.status,ok:d.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(NE,{className:"w-6 h-6 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),a.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?a.jsxs(a.Fragment,{children:[a.jsx(E9,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):a.jsxs(a.Fragment,{children:[a.jsx(NE,{className:"w-4 h-4"}),"Test Routes"]})}),n&&a.jsxs("div",{className:"mt-4 space-y-3",children:[n.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",n.error]})}),n.allEmployees&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.allEmployees.ok?a.jsx(nr,{className:"w-4 h-4 text-green-600"}):a.jsx(pa,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",n.allEmployees.status]})]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.allEmployees.data,null,2)})]}),n.managerRoute&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.managerRoute.ok?a.jsx(nr,{className:"w-4 h-4 text-green-600"}):a.jsx(pa,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",n.managerRoute.status]})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",n.managerRoute.url]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.managerRoute.data,null,2)})]})]})]})}function ige({managerId:e,role:t,selectedStoreId:r,isIncharge:n=!1,inchargeDesignation:s=null}){const[i,o]=F.useState([]),[l,u]=F.useState(""),[d,f]=F.useState([]),[p,m]=F.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",n),console.log("ApproveTimesheets: inchargeDesignation =",s);const x=F.useMemo(()=>{let S=i;return r&&(S=S.filter(_=>_.storeId===r||_.storeId===null||_.storeId===void 0)),n&&e&&(S=S.filter(_=>_.inchargeId===e)),S},[i,r,n,e]);F.useEffect(()=>{v()},[]),F.useEffect(()=>{x.length>0&&!x.find(S=>S.employeeId===l)?u(x[0].employeeId):x.length===0&&u("")},[x]),F.useEffect(()=>{l&&y()},[l]);const v=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",n);let S;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),S=await Zm(e),console.log("ApproveTimesheets: Received managers:",S),S.length>0&&(console.log(" MANAGERS RETURNED:"),S.forEach(_=>{console.log(`  - ${_.employeeId} (${_.name}) - clusterHeadId: ${_.clusterHeadId}, role: ${_.role}`)}))):n?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),S=await f2(e),console.log("ApproveTimesheets: Received employees under incharge:",S)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),S=await Yl(e),console.log("ApproveTimesheets: Received employees:",S)),o(S),S.length>0?u(S[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(S){console.error("Error loading employees:",S)}},y=async()=>{try{m(!0);const S=await Ih(l);f(S.filter(_=>_.status==="pending"))}catch(S){console.error("Error loading timesheets:",S)}finally{m(!1)}},b=async S=>{try{m(!0),await(void 0)(S,e),await y(),alert("Timesheet approved successfully")}catch(_){console.error("Error approving timesheet:",_),alert("Error approving timesheet")}finally{m(!1)}},k=async S=>{const _=prompt("Enter rejection reason:");if(_)try{m(!0),await(void 0)(S,e,_),await y(),alert("Timesheet rejected")}catch(A){console.error("Error rejecting timesheet:",A),alert("Error rejecting timesheet")}finally{m(!1)}},N=d.length,w=i.find(S=>S.employeeId===l),T=t==="cluster_head"?"Operations Manager":"Employee",E=t==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",T," Timesheets"]}),a.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",E," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&a.jsx(sge,{managerId:e}),N>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[N," timesheet",N>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",T]}),a.jsxs("select",{value:l,onChange:S=>u(S.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",T," --"]}),x.map(S=>a.jsxs("option",{value:S.employeeId,children:[S.name," (",S.employeeId,")"]},S.employeeId))]}),t==="cluster_head"&&i.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),a.jsx("div",{className:"space-y-1",children:i.map(S=>a.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:S.employeeId}),a.jsx("span",{children:S.name}),a.jsxs("span",{className:"text-blue-600",children:["(",S.role,")"]})]},S.employeeId))}),a.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",a.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),w&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Aa,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:w.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",w.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",w.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),p?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):d.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(on,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((S,_)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(S.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(S.date).toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:S.startTime}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:S.endTime}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`${S.totalHours>=8?"text-green-700":S.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[S.totalHours.toFixed(2)," hrs"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(on,{className:"w-4 h-4"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>b(S.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(nr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>k(S.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(pa,{className:"w-4 h-4"}),"Reject"]})]})})]},_))})]})})]})]})})}function oge({managerId:e,managerName:t,role:r,selectedStoreId:n,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=F.useState([]),[u,d]=F.useState(""),[f,p]=F.useState([]),[m,x]=F.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const v=F.useMemo(()=>{let _=o;return n&&(_=_.filter(A=>A.storeId===n||A.storeId===null||A.storeId===void 0)),s&&e&&(_=_.filter(A=>A.inchargeId===e)),_},[o,n,s,e]);F.useEffect(()=>{y()},[]),F.useEffect(()=>{v.length>0&&!v.find(_=>_.employeeId===u)?d(v[0].employeeId):v.length===0&&d("")},[v]),F.useEffect(()=>{u&&b()},[u]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let _;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),_=await Zm(e),console.log("ApproveLeaves: Received managers:",_)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),_=await f2(e),console.log("ApproveLeaves: Received employees under incharge:",_)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),_=await Yl(e),console.log("ApproveLeaves: Received employees:",_)),l(_),_.length>0?d(_[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(_){console.error("Error loading employees:",_)}},b=async()=>{try{x(!0);const _=await Vu(u);p(_.filter(A=>A.status==="pending"))}catch(_){console.error("Error loading leaves:",_)}finally{x(!1)}},k=async _=>{try{x(!0),console.log("Attempting to approve leave:",_),console.log("api.approveLeave function exists?",typeof fj),console.log("Available API functions:",Object.keys(pq).filter(A=>A.includes("Leave"))),await fj(_,e,t),await b(),alert("Leave approved successfully")}catch(A){console.error("Error approving leave:",A),alert("Error approving leave")}finally{x(!1)}},N=async _=>{const A=prompt("Enter rejection reason:");if(A)try{x(!0),await LD(_,e,t,A),await b(),alert("Leave rejected")}catch(P){console.error("Error rejecting leave:",P),alert("Error rejecting leave")}finally{x(!1)}},w=f.length,T=o.find(_=>_.employeeId===u),E=r==="cluster_head"?"Operations Manager":"Employee",S=r==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",E," Leaves"]}),a.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),w>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[w," leave application",w>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",S," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",E]}),a.jsxs("select",{value:u,onChange:_=>d(_.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",E," --"]}),v.map(_=>a.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),T&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Aa,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:T.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",T.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",T.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),m?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Fr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((_,A)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(_.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(_.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(_.leaveType||"full")==="full"?"Full Day":"Half Day"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:_.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:_.appliedAt?new Date(_.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>k(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(nr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>N(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(pa,{className:"w-4 h-4"}),"Reject"]})]})})]},A))})]})})]})]})})}function lge({managerId:e,role:t}){const[r,n]=F.useState([]),[s,i]=F.useState([]),[o,l]=F.useState(!1),[u,d]=F.useState({});F.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const p=await Yl(e);n(p);const m={};for(const x of p){const[v,y]=await Promise.all([Ih(x.employeeId),Vu(x.employeeId)]);m[x.employeeId]={pendingTimesheets:v.filter(b=>b.status==="pending").length,pendingLeaves:y.filter(b=>b.status==="pending").length,approvedTimesheets:v.filter(b=>b.status==="approved").length,totalLeaves:y.filter(b=>b.status==="approved").length}}d(m)}else{const p=await Zm(e);i(p);const m={};for(const x of p){const v=await Yl(x.employeeId);m[x.employeeId]={employeeCount:v.length,...x.stats}}d(m)}}catch(p){if(p instanceof Error&&(p.message==="Not authenticated"||p.message==="Unauthorized"))return;console.error("Error loading data:",p)}finally{l(!1)}};return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),a.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(xn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),a.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(on,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingTimesheets||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Fr,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingLeaves||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(p=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg text-gray-900",children:p.name}),a.jsx("p",{className:"text-sm text-gray-600",children:p.employeeId})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(_h,{className:"w-4 h-4"}),p.email]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Fr,{className:"w-4 h-4"}),"Joined: ",p.joiningDate?new Date(p.joiningDate).toLocaleDateString():"N/A"]})]}),u[p.employeeId]&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),a.jsx("div",{className:"text-xl text-yellow-700",children:u[p.employeeId].pendingTimesheets})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),a.jsx("div",{className:"text-xl text-pink-700",children:u[p.employeeId].pendingLeaves})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),a.jsx("div",{className:"text-xl text-green-700",children:u[p.employeeId].approvedTimesheets})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),a.jsx("div",{className:"text-xl text-blue-700",children:u[p.employeeId].totalLeaves})]})]}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),a.jsx("div",{className:"text-2xl text-purple-700",children:u[p.employeeId].employeeCount})]})})})})]},p.employeeId))}),(t==="manager"?r:s).length===0&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Aa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function S8({employee:e,onClose:t,onSave:r,clusterHeadId:n}){const[s,i]=F.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=F.useState(!1),[u,d]=F.useState([]);F.useEffect(()=>{f()},[]);const f=async()=>{try{const m=await Ku();d(m)}catch(m){console.error("Error loading stores:",m)}},p=async()=>{try{l(!0);const m={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(m.clusterHeadId=s.clusterHeadId||null),await tg(e.employeeId,m),alert("Employee details updated successfully!"),r(),t()}catch(m){console.error("Error updating employee:",m),alert("Failed to update employee details")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:a.jsx(Aa,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),a.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Name:"}),a.jsx("span",{children:e.name})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(_h,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Email:"}),a.jsx("span",{children:e.email})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Sp,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),a.jsxs("select",{value:s.role,onChange:m=>i({...s,role:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(xn,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),a.jsx("input",{type:"text",value:s.clusterHeadId,onChange:m=>i({...s,clusterHeadId:m.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Sp,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),a.jsxs("select",{value:s.designation||"",onChange:m=>i({...s,designation:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Designation"}),a.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge"}),a.jsx("option",{value:"store_ops",children:"Store Operations"}),a.jsx("option",{value:"production_ops",children:"Production Operations"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jo,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),a.jsxs("select",{value:s.storeId||"",onChange:m=>i({...s,storeId:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Store"}),u.map(m=>a.jsx("option",{value:m.id,children:m.name},m.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jo,{className:"w-4 h-4 inline mr-2"}),"Department"]}),a.jsxs("select",{value:s.department||"",onChange:m=>i({...s,department:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Department"}),a.jsx("option",{value:"store_operations",children:"Store Operations"}),a.jsx("option",{value:"production",children:"Production"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),a.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),a.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[a.jsx(Gl,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function cge({clusterHeadId:e}){const[t,r]=F.useState([]),[n,s]=F.useState([]),[i,o]=F.useState([]),[l,u]=F.useState(!1),[d,f]=F.useState(null),[p,m]=F.useState({}),[x,v]=F.useState(null),[y,b]=F.useState(null);F.useEffect(()=>{k()},[]);const k=async()=>{try{u(!0);const B=await $s();console.log("All employees loaded:",B),console.log("Current cluster head ID:",e);const I=B.filter(U=>(U.role==="employee"||U.role==="manager")&&U.role!=="cluster_head");r(I),console.log("Filtered employees and managers:",I);const O=B.filter(U=>U.role==="manager"&&U.clusterHeadId===e);s(O);const L=B.filter(U=>U.role==="cluster_head");o(L),console.log("Available managers (role=manager, clusterHeadId="+e+"):",O),console.log("Available cluster heads:",L);const X={};I.forEach(U=>{U.managerId&&(X[U.employeeId]=U.managerId)}),m(X)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading data:",B),alert("Failed to load data")}finally{u(!1)}},N=(B,I)=>{m(O=>({...O,[B]:I}))},w=async B=>{try{f(B);const I=p[B];if(!I){alert("Please select a manager");return}await eg(B,I),alert("Manager assigned successfully!"),await k()}catch(I){console.error("Error assigning manager:",I),alert("Failed to assign manager")}finally{f(null)}},T=async(B,I)=>{if(confirm(`Are you sure you want to promote ${I} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{v(B),await tg(B,{role:"manager",clusterHeadId:e}),alert(`${I} has been promoted to Manager!`),await k()}catch(O){console.error("Error promoting to manager:",O),alert("Failed to promote employee to manager")}finally{v(null)}},E=t.filter(B=>!B.managerId),S=t.filter(B=>B.managerId),_=B=>{if(!B)return"Unassigned";const I=n.find(L=>L.employeeId===B);if(I)return I.name;const O=i.find(L=>L.employeeId===B);return O?`${O.name} (Cluster Head)`:"Unknown Manager"},A=B=>{const I=[];return B.role==="manager"?(I.push(...i),I.push(...n.filter(O=>O.employeeId!==B.employeeId))):I.push(...n.filter(O=>O.employeeId!==B.employeeId)),I},P=B=>{if(!B)return a.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const I={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:I[B]||B})};return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(xn,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(nr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(Pr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})})]}),n.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx(Pr,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),a.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):a.jsxs(a.Fragment,{children:[E.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[a.jsx(Pr,{className:"w-5 h-5"}),"Unassigned Employees (",E.length,")"]}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),a.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(B.designation)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[B.employeeId]||"",onChange:I=>N(B.employeeId,I.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),A(B).map(I=>a.jsxs("option",{value:I.employeeId,children:[I.name," (",I.employeeId,")"]},I.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!p[B.employeeId]||d===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(Gl,{className:"w-4 h-4"}),d===B.employeeId?"Saving...":"Assign"]}),B.role==="employee"&&a.jsxs("button",{onClick:()=>T(B.employeeId,B.name),disabled:x===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(kE,{className:"w-4 h-4"}),x===B.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>b(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Z1,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),S.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[a.jsx(nr,{className:"w-5 h-5"}),"Assigned Employees (",S.length,")"]}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(B=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),a.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(B.designation)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:_(B.managerId)}),B.managerId&&a.jsx("div",{className:"text-xs text-gray-500",children:B.managerId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[B.employeeId]||B.managerId||"",onChange:I=>N(B.employeeId,I.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),A(B).map(I=>a.jsxs("option",{value:I.employeeId,children:[I.name," (",I.employeeId,")"]},I.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!p[B.employeeId]||p[B.employeeId]===B.managerId||d===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(Gl,{className:"w-4 h-4"}),d===B.employeeId?"Saving...":"Update"]}),B.role==="employee"&&a.jsxs("button",{onClick:()=>T(B.employeeId,B.name),disabled:x===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(kE,{className:"w-4 h-4"}),x===B.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>b(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Z1,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),t.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[a.jsx(xn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),a.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&a.jsx(S8,{employee:y,onClose:()=>b(null),onSave:k,clusterHeadId:e})]})}function oI({currentUser:e}){const[t,r]=F.useState([]),[n,s]=F.useState(!0);F.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await $s(),p=f.find(k=>k.employeeId===e.employeeId);if(!p){s(!1);return}console.log("[Hierarchy Debug] Current user record:",p);const m=[p];let x=p,v=0;const y=10;for(;x&&v<y;){const k=x.clusterHeadId||x.managerId||x.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",k,"for",x.name),!k)break;const N=f.find(w=>w.employeeId===k);if(console.log("[Hierarchy Debug] Found superior:",N),N){if(m.some(w=>w.employeeId===N.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(m.push(N),x=N,N.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;v++}const b=m.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",b),r(b)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2),l=(f,p)=>!f&&!p?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[p||""]||p||"N/A",u=(f,p)=>p?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",d=(f,p)=>p?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return n?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?a.jsx("div",{className:"flex flex-col items-center",children:t.map((f,p)=>{const m=f.employeeId===e.employeeId,x=p===t.length-1;return a.jsxs("div",{className:"w-full flex flex-col items-center",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-block",children:[a.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${u(f,m)}`,children:a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),a.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${d(f,m)}`,children:[a.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),a.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),m&&a.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!x&&a.jsxs("div",{className:"flex flex-col items-center my-6",children:[a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsx(Gm,{className:"w-6 h-6 text-gray-400"}),a.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Jo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function _8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:n=null}){const[s,i]=F.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=F.useState(0),[u,d]=F.useState(!1),f=e.role==="employee",p=e.role==="manager",m=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(p||m)&&!e.employeeId&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),a.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"You won't be able to see employees assigned to you"}),a.jsx("li",{children:"Approval workflows won't work properly"}),a.jsx("li",{children:"Employees you create won't be linked to your account"})]}),a.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[a.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),a.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(on,{className:"w-4 h-4"}),"Update Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fr,{className:"w-4 h-4"}),"Apply for Leave"]}),a.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(_I,{className:"w-4 h-4"}),"Hierarchy"]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(on,{className:"w-4 h-4"}),"My Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Fr,{className:"w-4 h-4"}),"My Leave"]}),a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve Leaves"]}),a.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(xn,{className:"w-4 h-4"}),"My Team"]})]}),m&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ps,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),a.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(xn,{className:"w-4 h-4"}),"Manager Overview"]}),a.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(xB,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),a.jsxs("div",{children:[s==="timesheet"&&a.jsx(nge,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&a.jsx(age,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(p||m||r)&&a.jsx(ige,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="approve-leave"&&(p||m||r)&&a.jsx(oge,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="team"&&p&&a.jsx(lge,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&a.jsx(oI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&m&&a.jsx(oI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&m&&a.jsx(cge,{clusterHeadId:e.employeeId||""},o)]})]})}function E8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,n=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return a.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qo,{className:"w-5 h-5 text-gray-400"}),a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:a.jsx(oi,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:n(e.designation)})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&a.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&a.jsx("div",{className:"space-y-3",children:e.managers.map(s=>a.jsx(E8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[a.jsx(Qo,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(Aa,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function uge({userRole:e,selectedStoreId:t,accessToken:r}){const[n,s]=F.useState([]),[i,o]=F.useState([]),[l,u]=F.useState([]),[d,f]=F.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[p,m]=F.useState(!1),[x,v]=F.useState(!1),[y,b]=F.useState(!1),[k,N]=F.useState(null),[w,T]=F.useState(null),[E,S]=F.useState([]),[_,A]=F.useState([]);F.useEffect(()=>{P()},[t]);const P=async()=>{if(!r){console.error("No access token available");return}try{m(!0);const O=await MD(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:O.hierarchy?.length||0,unassignedManagersCount:O.unassignedManagers?.length||0,unassignedEmployeesCount:O.unassignedEmployees?.length||0,stats:O.stats,selectedStoreId:t}),s(O.hierarchy||[]),o(O.unassignedManagers||[]),u(O.unassignedEmployees||[]),f(O.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const U=await m5(r);S(U)}catch{console.log("User not authorized to view all cluster heads")}const X=(await $s()).filter(U=>U.role==="manager");A(X)}catch(O){console.error("Error loading hierarchy:",O),O instanceof Error&&!O.message.includes("JWT")&&!O.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{m(!1)}},B=async(O,L)=>{try{await(void 0)(O,L),alert("Cluster head assigned successfully!"),v(!1),N(null),await P()}catch(X){console.error("Error assigning cluster head:",X),alert("Failed to assign cluster head")}},I=async(O,L)=>{try{await eg(O,L),alert("Manager assigned successfully!"),b(!1),T(null),await P()}catch(X){console.error("Error assigning manager:",X),alert("Failed to assign manager")}};return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Jo,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalClusterHeads}),a.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(oi,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalManagers}),a.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(xn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalEmployees}),a.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),a.jsx(_I,{className:"w-6 h-6 text-purple-600"})]}),n.length===0&&i.length===0&&l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Jo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsx("div",{className:"space-y-6 mb-6",children:n.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Jo,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:O.name}),a.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),O.managers&&O.managers.length>0&&a.jsx("div",{className:"p-4 bg-gray-50",children:O.managers.map(L=>a.jsx(E8,{manager:L},L.employeeId))})]},O.employeeId))}),i.length>0&&i.some(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0)&&a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0).map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:a.jsx(oi,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:O.name}),a.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),(O.incharges||O.employees)&&a.jsxs("div",{className:"p-4 space-y-4",children:[O.incharges&&O.incharges.length>0&&a.jsx("div",{className:"space-y-3",children:O.incharges.map(L=>a.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qo,{className:"w-4 h-4 text-indigo-400"}),a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:a.jsx(oi,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-900",children:L.name}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:L.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:L.employeeId})]})]})}),L.employees&&L.employees.length>0&&a.jsx("div",{className:"p-3",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:L.employees.map(X=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[a.jsx(Qo,{className:"w-3 h-3 text-gray-300"}),a.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:a.jsx(Aa,{className:"w-3 h-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-900 truncate",children:X.name}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:X.employeeId})]})]},X.employeeId))})})]},L.employeeId))}),O.employees&&O.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.employees.map(L=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[a.jsx(Qo,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(Aa,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:L.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:L.employeeId})]})]},L.employeeId))})]})]})]},O.employeeId))]})]})]}),(i.length>0||l.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),a.jsx("div",{className:"space-y-3",children:i.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(oi,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:O.name}),a.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),e==="cluster_head"&&a.jsx("button",{onClick:()=>{N(O),v(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},O.employeeId))})]}),l.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),a.jsx("div",{className:"space-y-3",children:l.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(Aa,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:O.name}),a.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&a.jsx("button",{onClick:()=>{T(O),b(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},O.employeeId))})]})]}),x&&k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",a.jsx("strong",{children:k.name})," (",k.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),a.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),E.map(O=>a.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const O=document.getElementById("clusterHeadSelect");O.value?B(k.employeeId,O.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{v(!1),N(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",a.jsx("strong",{children:w.name})," (",w.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),a.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),_.map(O=>a.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const O=document.getElementById("managerSelect");O.value?I(w.employeeId,O.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{b(!1),T(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function dge({user:e,selectedStoreId:t}){const[r,n]=F.useState("employees"),[s,i]=F.useState([]),[o,l]=F.useState([]),[u,d]=F.useState(!1),[f,p]=F.useState([]),[m,x]=F.useState(!1),[v,y]=F.useState(!1),[b,k]=F.useState(!1),[N,w]=F.useState(null),[T,E]=F.useState(""),[S,_]=F.useState(null),[A,P]=F.useState(!1),[B,I]=F.useState(!1),[O,L]=F.useState(null),[X,U]=F.useState(""),[V,ne]=F.useState(""),[ee,R]=F.useState(!1),[se,z]=F.useState(null),[M,J]=F.useState(""),[te,ie]=F.useState("manager"),[me,ve]=F.useState([]),[ye,he]=F.useState([]),[pe,De]=F.useState(!1),[q,Ae]=F.useState(null),[Be,xt]=F.useState("employee"),[le,Ee]=F.useState(!1),[Ce,$e]=F.useState(null),[Nt,vt]=F.useState(""),[qt,gr]=F.useState(!1),[sr,lr]=F.useState(null),[Qr,Hr]=F.useState(!1),[cr,Fe]=F.useState(null),[we,mt]=F.useState("none"),[Ue,rt]=F.useState(!1),[ut,Vt]=F.useState(null),[_t,Ne]=F.useState(""),[Se,Ge]=F.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const bt=e.role==="manager",dt=e.role==="cluster_head";F.useEffect(()=>{Se.role==="cluster_head"&&Ge(G=>({...G,employmentType:"fulltime"}))},[Se.role]),F.useEffect(()=>{wt(),dt&&st()},[t]);const st=async()=>{try{const G=await Ku();p(G)}catch(G){if(G instanceof Error&&(G.message==="Not authenticated"||G.message==="Unauthorized"))return;console.error("Error loading stores:",G)}},wt=async()=>{try{x(!0);let G;bt&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),G=await Yl(e.employeeId),console.log(" Loaded employees:",G)):dt?(console.log(" Loading all employees for cluster head"),G=await $s(),t&&(G=G.filter(ce=>ce.storeId===t||ce.storeId===null||ce.storeId===void 0))):G=await $s(),i(G);try{const ce=await bD();l(ce)}catch(ce){console.error("Error loading archived employees:",ce)}}catch(G){console.error("Error loading employees:",G),alert("Failed to load employees")}finally{x(!1)}},Rt=async()=>{try{const ce=(await $s()).map(Ve=>{const ke=Ve.employeeId.match(/BM(\d+)/);return ke?parseInt(ke[1]):0}).filter(Ve=>Ve>0);return`BM${(ce.length>0?Math.max(...ce)+1:1).toString().padStart(3,"0")}`}catch(G){return console.error("Error generating employee ID:",G),`BM${Date.now().toString().slice(-3)}`}},nt=(G,ce)=>{const Te=G.target.files?.[0];if(!Te)return;const Ve=new FileReader;Ve.onloadend=()=>{const ke=Ve.result;ce==="front"?U(ke):ne(ke)},Ve.readAsDataURL(Te)},yt=async()=>{if(!Se.name||!Se.email||!Se.password){alert("Please fill all required fields");return}if(bt&&Se.role==="manager"){alert("Only Cluster Heads can create managers");return}try{x(!0);const G=await Rt(),ce={employeeId:G,name:Se.name,email:Se.email,password:Se.password,role:Se.role,employmentType:Se.employmentType,joiningDate:Se.joiningDate,dob:Se.dob,phone:Se.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};Se.role==="employee"?(ce.managerId=e.employeeId,bt&&e.storeId&&(ce.storeId=e.storeId)):Se.role==="manager"&&(ce.clusterHeadId=e.employeeId,Se.storeId&&(ce.storeId=Se.storeId)),X&&(ce.aadharFront=X),V&&(ce.aadharBack=V),await wD(ce),alert(` Employee created successfully!
      
Employee ID: ${G}
Name: ${Se.name}
Email: ${Se.email}
Password: ${Se.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),Ge({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),U(""),ne(""),y(!1),await wt()}catch(G){console.error("Error creating employee:",G),alert("Failed to create employee. Email might already be in use.")}finally{x(!1)}},ht=async G=>{if(confirm("Are you sure you want to delete this employee?"))try{x(!0),await jD(G),alert("Employee deleted successfully"),await wt()}catch(ce){console.error("Error deleting employee:",ce),alert("Failed to delete employee")}finally{x(!1)}},Ut=G=>{w(G),k(!0)},Ft=async()=>{if(!ut||!_t){alert("Please enter a new password");return}try{x(!0);const G=await kD(ut.employeeId,_t);alert(` Password reset successfully!

Employee: ${G.credentials.employeeId} - ${ut.name}
Email: ${G.credentials.email}
New Password: ${G.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),rt(!1),Vt(null),Ne("")}catch(G){console.error("Error resetting password:",G),alert("Failed to reset password: "+(G instanceof Error?G.message:"Unknown error"))}finally{x(!1)}},dr=async()=>{if(N)try{x(!0);const G={name:N.name,email:N.email,role:N.role,employmentType:N.employmentType,joiningDate:N.joiningDate,dob:N.dob,phone:N.phone,status:N.status};console.log("Updating employee with data:",G),await tg(N.employeeId,G),alert("Employee updated successfully!"),k(!1),w(null),await wt()}catch(G){console.error("Error updating employee - full error:",G),console.error("Error updating employee - error message:",G instanceof Error?G.message:String(G)),alert(`Failed to update employee: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},br=()=>{const G=s.length,ce=s.filter(ct=>ct.role==="manager").length,Te=s.filter(ct=>ct.employmentType==="fulltime").length,Ve=s.filter(ct=>ct.employmentType==="contract").length,ke=s.filter(ct=>ct.status==="active").length;return{total:G,managers:ce,fulltime:Te,contract:Ve,active:ke}},gt=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{x(!0);const G=await SD();L(G),I(!0),await wt()}catch(G){console.error("Error running migration:",G),alert(`Migration failed: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},It=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{x(!0);const G=await CD();alert(` Successfully synced ${G.synced} employee designations!

${G.skipped>0?`Skipped ${G.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await wt()}catch(G){console.error("Error syncing designations:",G),alert(`Sync failed: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},vr=async G=>{try{const ce=await $s(),Te=ce.filter(ke=>ke.role==="manager"),Ve=ce.filter(ke=>ke.designation==="store_incharge"||ke.designation==="production_incharge");ve(Te),he(Ve),z(G),G.inchargeId?(ie("incharge"),J(G.inchargeId)):(ie("manager"),J(G.managerId||"")),R(!0)}catch(ce){console.error("Error loading managers:",ce),alert("Failed to load managers")}},Er=async()=>{if(!se||!M){alert("Please select a supervisor");return}try{x(!0),te==="incharge"?(await TD(se.employeeId,M),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await eg(se.employeeId,M),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),R(!1),z(null),J(""),await wt()}catch(G){console.error("Error assigning supervisor:",G),alert(`Failed to assign supervisor: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},Y=G=>{if(!G)return"No manager assigned";const ce=s.find(Te=>Te.employeeId===G);return ce?`${ce.name} (${ce.employeeId})`:`Manager ${G}`},K=G=>{Ae(G),xt(G.role),De(!0)},H=async()=>{if(q)try{x(!0),await _D(q.employeeId,Be),alert(`Role updated successfully from "${q.role}" to "${Be}"!`),De(!1),Ae(null),await wt()}catch(G){console.error("Error updating role:",G),alert(`Failed to update role: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},W=G=>{$e(G),vt(G.storeId||""),Ee(!0)},re=async()=>{if(!(!Ce||!Nt))try{x(!0),await ED(Ce.employeeId,Nt);const G=f.find(ce=>ce.id===Nt)?.name||Nt;alert(`Store updated successfully! ${Ce.name} is now assigned to ${G}`),Ee(!1),$e(null),await wt()}catch(G){console.error("Error updating store:",G),alert(`Failed to update store: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},ae=G=>{Fe(G),G.designation==="store_incharge"?mt("store_incharge"):G.designation==="production_incharge"?mt("production_incharge"):mt("none"),Hr(!0)},je=async()=>{if(cr)try{x(!0);const G=we==="none"?null:we,ce=we==="store_incharge"?"store_operations":we==="production_incharge"?"production":null;await AD(cr.employeeId,G,ce);const Te=we==="store_incharge"?"Store Incharge":we==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${cr.name} is now ${Te}`),Hr(!1),Fe(null),await wt()}catch(G){console.error("Error updating designation:",G),alert(`Failed to update designation: ${G instanceof Error?G.message:String(G)}`)}finally{x(!1)}},Oe=br();return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),a.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Oe.total})]}),a.jsx(xn,{className:"w-8 h-8 text-purple-500"})]})}),dt&&a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Oe.managers})]}),a.jsx(xn,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Oe.fulltime})]}),a.jsx(fi,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Oe.contract})]}),a.jsx(fi,{className:"w-8 h-8 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Oe.active})]}),a.jsx(xn,{className:"w-8 h-8 text-pink-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>n("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(xn,{className:"w-5 h-5"}),a.jsx("span",{children:"Employee List"})]})}),a.jsx("button",{onClick:()=>n("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(xn,{className:"w-5 h-5"}),a.jsx("span",{children:"Hierarchy"})]})}),a.jsx("button",{onClick:()=>n("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Payroll"})]})}),a.jsx("button",{onClick:()=>n("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(on,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?a.jsx(uge,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?a.jsx(wk,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?a.jsx(_8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(W9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:T,onChange:G=>E(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(Ti,{className:"w-5 h-5"}),"Add ",dt?"Employee/Manager":"Employee"]}),dt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(b9,{className:"w-5 h-5"}),"Create Login Accounts"]}),a.jsxs("button",{onClick:gt,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[a.jsx(Ep,{className:"w-5 h-5"}),"Migrate Stores"]}),a.jsxs("button",{onClick:It,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[a.jsx(oi,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsxs("h2",{className:"text-2xl",children:["Create New ",dt?"Employee/Manager":"Employee"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[dt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:Se.role,onChange:G=>Ge({...Se,role:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:Se.employmentType,onChange:G=>Ge({...Se,employmentType:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:Se.role==="cluster_head",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),Se.role!=="cluster_head"&&a.jsx("option",{value:"contract",children:"Contract"})]}),Se.role==="cluster_head"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:Se.name,onChange:G=>Ge({...Se,name:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:Se.email,onChange:G=>Ge({...Se,email:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:Se.password,onChange:G=>Ge({...Se,password:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:Se.dob,onChange:G=>Ge({...Se,dob:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:Se.phone,onChange:G=>Ge({...Se,phone:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:Se.joiningDate,onChange:G=>Ge({...Se,joiningDate:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),dt&&Se.role==="manager"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),a.jsxs("select",{value:Se.storeId,onChange:G=>Ge({...Se,storeId:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(G=>a.jsxs("option",{value:G.id,children:[G.name," ",G.location&&`- ${G.location}`]},G.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),bt&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),Se.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Jd,{className:"w-5 h-5"}),X?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:G=>nt(G,"front"),className:"hidden"})]}),X&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Jd,{className:"w-5 h-5"}),V?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:G=>nt(G,"back"),className:"hidden"})]}),V&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:yt,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Creating...":"Create Employee"}),a.jsx("button",{onClick:()=>{y(!1),Ge({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),U(""),ne("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),b&&N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[dt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:N.role,onChange:G=>w({...N,role:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:N.employmentType,onChange:G=>w({...N,employmentType:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),a.jsx("option",{value:"contract",children:"Contract"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:N.name,onChange:G=>w({...N,name:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:N.email,onChange:G=>w({...N,email:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:N.dob,onChange:G=>w({...N,dob:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:N.phone,onChange:G=>w({...N,phone:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:N.joiningDate,onChange:G=>w({...N,joiningDate:G.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),N.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Jd,{className:"w-5 h-5"}),X?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:G=>nt(G,"front"),className:"hidden"})]}),X&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Jd,{className:"w-5 h-5"}),V?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:G=>nt(G,"back"),className:"hidden"})]}),V&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:dr,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Employee"}),a.jsx("button",{onClick:()=>{k(!1),w(null),U(""),ne("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),dt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),dt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?a.jsx("tr",{children:a.jsx("td",{colSpan:dt?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const G=s.filter(ce=>T===""||ce.employeeId.toLowerCase().includes(T.toLowerCase())||ce.name.toLowerCase().includes(T.toLowerCase())||ce.email.toLowerCase().includes(T.toLowerCase()));return G.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:dt?10:8,className:"px-6 py-8 text-center text-gray-500",children:T?"No employees found matching your search":"No employees found"})}):G.map(ce=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:ce.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:ce.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:ce.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.role==="manager"?"bg-blue-100 text-blue-700":ce.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:ce.role==="manager"?"Manager":ce.role==="cluster_head"?"Cluster Head":"Employee"})}),dt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.storeId?a.jsx("span",{className:"text-sm text-gray-900",children:f.find(Te=>Te.id===ce.storeId)?.name||ce.storeId}):a.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),dt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce.designation==="operations_incharge"?a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):ce.designation==="store_incharge"?a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):ce.designation==="production_incharge"?a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):ce.designation==="store_ops"?a.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):ce.designation==="production_ops"?a.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):a.jsx("span",{className:"text-sm text-gray-400",children:""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:ce.employmentType==="fulltime"?"Full-Time":"Contract"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(ce.joiningDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ce.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ce.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_(ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(fi,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>ht(ce.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(bs,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>Ut(ce),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:a.jsx(Ei,{className:"w-5 h-5"})}),dt&&a.jsx("button",{onClick:()=>{lr(ce),gr(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:a.jsx(oi,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{Vt(ce),rt(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:a.jsx(j9,{className:"w-5 h-5"})}),dt&&ce.role==="employee"&&a.jsx("button",{onClick:()=>vr(ce),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:a.jsx(oi,{className:"w-5 h-5"})}),dt&&ce.role!=="cluster_head"&&a.jsx("button",{onClick:()=>W(ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:a.jsx(Di,{className:"w-5 h-5"})}),dt&&ce.role==="employee"&&a.jsx("button",{onClick:()=>ae(ce),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:a.jsx(oi,{className:"w-5 h-5"})}),dt&&!["employee","manager","cluster_head"].includes(ce.role)&&a.jsx("button",{onClick:()=>K(ce),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:a.jsx(Pr,{className:"w-5 h-5"})})]})})]},ce.employeeId))})()})]})})}),dt&&o.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(on,{className:"w-6 h-6 text-gray-500"}),a.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),a.jsx("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:u?"Hide":"Show"})]}),u&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(G=>{const ce=new Date(G.joiningDate||G.createdAt),Te=new Date(G.releasedAt),Ve=Te.getTime()-ce.getTime(),ke=Math.floor(Ve/(1e3*60*60*24)),ct=Math.floor(ke/365),tt=Math.floor(ke%365/30),Qe=ke%30;let Bt="";return ct>0&&(Bt+=`${ct}y `),tt>0&&(Bt+=`${tt}m `),(Qe>0||Bt==="")&&(Bt+=`${Qe}d`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:G.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:G.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${G.role==="manager"?"bg-blue-100 text-blue-700":G.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:G.role==="cluster_head"?"Cluster Head":G.role.charAt(0).toUpperCase()+G.role.slice(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(G.joiningDate||G.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:Te.toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-green-600",children:["",G.totalEarnings?.toLocaleString()||"0"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:Bt.trim()})]},G.employeeId)})})]})})]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("p",{className:"text-gray-900",children:S.employeeId})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("p",{className:"text-gray-900",children:S.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:S.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("p",{className:"text-gray-900",children:S.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),a.jsx("p",{className:"text-gray-900",children:S.employmentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(S.joiningDate).toLocaleDateString()})]}),S.dob&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),a.jsx("p",{className:"text-gray-900",children:new Date(S.dob).toLocaleDateString()})]}),S.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:S.phone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),a.jsx("p",{className:"text-gray-900",children:S.status})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),a.jsx("p",{className:"text-gray-900",children:S.createdBy})]}),S.designation&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),a.jsx("p",{className:"text-gray-900",children:S.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),S.department&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),a.jsx("p",{className:"text-gray-900",children:S.department==="store_operations"?"Store Operations":"Production"})]}),S.managerId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),a.jsx("p",{className:"text-gray-900",children:Y(S.managerId)})]}),S.inchargeId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),a.jsx("p",{className:"text-gray-900",children:Y(S.inchargeId)})]})]}),S.aadharFront&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),a.jsx("img",{src:S.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),S.aadharBack&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),a.jsx("img",{src:S.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),a.jsx("button",{onClick:()=>_(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),A&&a.jsx(zF,{onClose:()=>P(!1),employees:s.filter(G=>G.status==="active")}),B&&O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[a.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.total})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.updated})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.skipped})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),a.jsx("p",{className:"text-2xl text-yellow-900",children:O.summary.needsManualAssignment||0})]}),O.summary.errors>0&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),a.jsx("p",{className:"text-2xl text-red-900",children:O.summary.errors})]})]})]}),O.updates&&O.updates.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:O.updates.map((G,ce)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:G.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:G.assignedStoreId})]},ce))})]})})]}),O.manualAssignmentNeeded&&O.manualAssignmentNeeded.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),a.jsx("tbody",{className:"divide-y divide-yellow-200",children:O.manualAssignmentNeeded.map((G,ce)=>a.jsxs("tr",{className:"hover:bg-yellow-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:G.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:G.reason})]},ce))})]})}),a.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),O.errorDetails&&O.errorDetails.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-red-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),a.jsx("tbody",{className:"divide-y divide-red-200",children:O.errorDetails.map((G,ce)=>a.jsxs("tr",{className:"hover:bg-red-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:G.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:G.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:G.reason})]},ce))})]})})]}),a.jsx("button",{onClick:()=>I(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),ee&&se&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),a.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[se.name," (",se.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[(se.managerId||se.inchargeId)&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),a.jsx("p",{className:"text-blue-900",children:se.inchargeId?`${Y(se.inchargeId)} (Incharge)`:Y(se.managerId||"")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"manager",checked:te==="manager",onChange:G=>{ie(G.target.value),J("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"incharge",checked:te==="incharge",onChange:G=>{ie(G.target.value),J("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",te==="manager"?"Operations Manager":"Incharge"," *"]}),a.jsxs("select",{value:M,onChange:G=>J(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["Select ",te==="manager"?"a manager":"an incharge","..."]}),te==="manager"?me.map(G=>a.jsxs("option",{value:G.employeeId,children:[G.name," (",G.employeeId,")",G.storeId?` - Store: ${G.storeId}`:" - No store assigned"]},G.employeeId)):ye.map(G=>a.jsxs("option",{value:G.employeeId,children:[G.name," (",G.employeeId,") - ",G.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},G.employeeId))]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",te==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Er,disabled:m||!M,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Supervisor"}),a.jsx("button",{onClick:()=>{R(!1),z(null),J(""),ie("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),pe&&q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[q.name," (",q.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-orange-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[a.jsx("strong",{children:"Invalid Role Detected:"}),' "',q.role,'"']}),a.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),a.jsxs("select",{value:Be,onChange:G=>xt(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),a.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:H,disabled:m,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Role"}),a.jsx("button",{onClick:()=>{De(!1),Ae(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),le&&Ce&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),a.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[Ce.name," (",Ce.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Di,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[a.jsx("strong",{children:"Current Store:"})," ",Ce.storeId?f.find(G=>G.id===Ce.storeId)?.name||Ce.storeId:"No store assigned"]}),a.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),a.jsxs("select",{value:Nt,onChange:G=>vt(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(G=>a.jsxs("option",{value:G.id,children:[G.name," - ",G.location]},G.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),Nt&&Nt!==Ce.storeId&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:re,disabled:m||!Nt,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Store"}),a.jsx("button",{onClick:()=>{Ee(!1),$e(null),vt("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Qr&&cr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),a.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[cr.name," (",cr.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(oi,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:a.jsx("strong",{children:"Department Incharge Designations"})}),a.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Current Designation:"})," ",cr.designation==="store_incharge"?"Store Incharge":cr.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),cr.department&&a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",cr.department==="store_operations"?"Store Operations":"Production"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),a.jsxs("select",{value:we,onChange:G=>mt(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),we!=="none"&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[we==="store_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Store Incharge Responsibilities:"}),a.jsx("br",{})," Customer-facing operations and administration",a.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",a.jsx("br",{})," Reports to Operations Manager"]}),we==="production_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Production Incharge Responsibilities:"}),a.jsx("br",{})," Food preparation, quality control, production planning",a.jsx("br",{})," Manages Momo Makers and production team",a.jsx("br",{})," Reports to Operations Manager"]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:je,disabled:m,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Designation"}),a.jsx("button",{onClick:()=>{Hr(!1),Fe(null),mt("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Ue&&ut&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Reset Password"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[ut.name," (",ut.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),a.jsx("input",{type:"text",value:ut.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),a.jsx("input",{type:"text",value:_t,onChange:G=>Ne(G.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Ft,disabled:m||!_t,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Resetting...":"Reset Password"}),a.jsx("button",{onClick:()=>{rt(!1),Vt(null),Ne("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),qt&&sr&&a.jsx(S8,{employee:sr,onClose:()=>{gr(!1),lr(null)},onSave:()=>{wt()}})]})]})})}function lI({onNavigate:e}){const[t,r]=F.useState([]),[n,s]=F.useState(!1),[i,o]=F.useState(!1);F.useEffect(()=>{l();const x=setInterval(l,3e4);return()=>clearInterval(x)},[]);const l=async()=>{try{const x=await hD();r(x)}catch{r([])}},u=async x=>{try{await fD(x),r(t.map(v=>v.id===x?{...v,read:!0}:v))}catch(v){console.error("Error marking notification as read:",v)}},d=async()=>{o(!0);try{await pD(),r(t.map(x=>({...x,read:!0})))}catch(x){console.error("Error marking all as read:",x)}finally{o(!1)}},f=x=>{if(x.read||u(x.id),e)switch(x.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",x.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",x.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",x.relatedDate||void 0,x.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",x.relatedDate||void 0,x.relatedId||void 0);break;case"stock_request_delayed":e("production-requests",x.relatedDate||void 0,x.relatedId||void 0);break}s(!1)},p=x=>x.includes("approved")?a.jsx(nr,{className:"w-5 h-5 text-green-600"}):x.includes("rejected")?a.jsx(Wr,{className:"w-5 h-5 text-red-600"}):x.includes("pending")||x.includes("request")?a.jsx(on,{className:"w-5 h-5 text-orange-600"}):x.includes("logged")?a.jsx(nr,{className:"w-5 h-5 text-blue-600"}):a.jsx(On,{className:"w-5 h-5 text-blue-600"}),m=t.filter(x=>!x.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[a.jsx(X1,{className:"w-6 h-6"}),m>0&&a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:m>99?"99+":m})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-gray-900",children:"Notifications"}),m>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m," unread"]})]}),m>0&&a.jsx("button",{onClick:d,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(X1,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No notifications"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:t.map(x=>a.jsx("button",{onClick:()=>f(x),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${x.read?"":"bg-blue-50"}`,children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:p(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm ${x.read?"text-gray-700":"font-medium text-gray-900"}`,children:x.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:x.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:hge(x.createdAt)})]}),!x.read&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},x.id))})})]})]})]})}function hge(e){const t=new Date(e),r=new Date,n=r.getTime()-t.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}const fge=F.memo(function({stores:t,selectedStoreId:r,onStoreChange:n,showAllStores:s=!0}){const i=t.find(l=>l.id===r),o=!r;return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:a.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:a.jsx(Di,{className:"w-6 h-6 text-purple-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:r||"all",onChange:l=>n(l.target.value==="all"?null:l.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[s&&a.jsx("option",{value:"all",children:" All Stores (Combined View)"}),t.map(l=>a.jsxs("option",{value:l.id,children:[" ",l.name," ",l.location&&`- ${l.location}`]},l.id))]}),a.jsx(Gm,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),i?.location&&a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[a.jsx(r2,{className:"w-3 h-3"}),a.jsx("span",{children:i.location})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[a.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:t.length})]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-blue-500":"bg-green-500"} animate-pulse`}),a.jsx("span",{className:"text-gray-600",children:o?"Viewing all store data":`Viewing ${i?.name||"store"} only`})]}),a.jsxs("span",{className:"text-purple-600 font-medium",children:[o?t.length:1," store",o&&t.length!==1||!o&&!1?"s":""," active"]})]})})]})}),t.length<=5&&a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s&&a.jsx("button",{onClick:()=>n(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${o?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),t.map(l=>a.jsxs("button",{onClick:()=>n(l.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r===l.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",l.name]},l.id))]})]})});function pge(){const[e,t]=F.useState(!1),[r,n]=F.useState(!1),[s,i]=F.useState(""),[o,l]=F.useState(null),u=async()=>{try{t(!0),i(""),n(!1);const d=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await d.json();if(!d.ok)throw new Error(f.error||f.details||"Failed to setup account");n(!0),l(f),console.log("Setup successful:",f)}catch(d){console.error("Setup error:",d),i(d instanceof Error?d.message:"Failed to setup account")}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ti,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(nr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),a.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),a.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Name:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Role:"}),a.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),a.jsx("button",{onClick:u,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?a.jsxs(a.Fragment,{children:[a.jsx(nr,{className:"w-5 h-5"}),"Account Created"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ti,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&a.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:" Delete any existing account with this email"}),a.jsx("li",{children:" Create a new cluster head account"}),a.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),a.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function mge({onStoreCreated:e,userRole:t}){const[r,n]=F.useState([]),[s,i]=F.useState([]),[o,l]=F.useState([]),[u,d]=F.useState(!0),[f,p]=F.useState(!1),[m,x]=F.useState(null),[v,y]=F.useState(null),[b,k]=F.useState(null),[N,w]=F.useState(""),[T,E]=F.useState(""),[S,_]=F.useState(!1),[A,P]=F.useState(""),[B,I]=F.useState(""),[O,L]=F.useState(!1),[X,U]=F.useState(""),[V,ne]=F.useState(!1),[ee,R]=F.useState(""),[se,z]=F.useState(!1);F.useEffect(()=>{M(),J(),te()},[]);const M=async()=>{try{const Ce=await Ku();n(Ce)}catch(Ce){if(Ce instanceof Error&&(Ce.message==="Not authenticated"||Ce.message==="Unauthorized"))return;console.error("Error loading stores:",Ce)}finally{d(!1)}},J=async()=>{try{const $e=(await $s()).filter(Nt=>Nt.role==="manager");i($e)}catch(Ce){console.error("Error loading managers:",Ce)}},te=async()=>{try{const Ce=await Dh();l(Ce)}catch(Ce){console.error("Error loading production houses:",Ce)}},ie=async Ce=>{if(Ce.preventDefault(),!N.trim()){alert("Please enter a store name");return}_(!0);try{await mD(N,T),w(""),E(""),p(!1),await M(),e&&e()}catch($e){console.error("Error creating store:",$e),alert($e.message||"Failed to create store")}finally{_(!1)}},me=Ce=>{x(Ce.id),P(Ce.name),I(Ce.location)},ve=async Ce=>{if(!A.trim()){alert("Please enter a store name");return}L(!0);try{await yD(Ce,A,B),x(null),await M()}catch($e){console.error("Error updating store:",$e),alert($e.message||"Failed to update store")}finally{L(!1)}},ye=()=>{x(null),P(""),I("")},he=Ce=>{y(Ce.id),U(Ce.managerId||"")},pe=async Ce=>{if(!X){alert("Please select a manager");return}ne(!0);try{await gD(Ce,X),y(null),U(""),await M(),await J(),alert("Manager assigned successfully!")}catch($e){console.error("Error assigning manager:",$e),alert($e.message||"Failed to assign manager")}finally{ne(!1)}},De=()=>{y(null),U("")},q=async Ce=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${Ce.name}? This will assign all data without a store to this store.`))try{const $e=await vD(Ce.id);alert(` Migration successful!

Inventory: ${$e.migratedCount.inventory}
Overheads: ${$e.migratedCount.overheads}
Sales: ${$e.migratedCount.sales}
Employees: ${$e.migratedCount.employees}
Timesheets: ${$e.migratedCount.timesheets}
Leaves: ${$e.migratedCount.leaves}
Payouts: ${$e.migratedCount.payouts}`)}catch($e){console.error("Error migrating data:",$e),alert($e.message||"Failed to migrate data")}},Ae=Ce=>{k(Ce.id),R(Ce.productionHouseId||"")},Be=async Ce=>{if(!ee){alert("Please select a production house");return}z(!0);try{await xD(Ce,ee),k(null),R(""),await M(),await te(),e&&e(),alert("Production house assigned successfully!")}catch($e){console.error("Error assigning production house:",$e),alert($e.message||"Failed to assign production house")}finally{z(!1)}},xt=()=>{k(null),R("")},le=Ce=>{if(!Ce)return null;const $e=s.find(Nt=>Nt.employeeId===Ce);return $e?`${$e.name} (${$e.employeeId})`:"Unknown Manager"},Ee=Ce=>{if(!Ce)return null;const $e=o.find(Nt=>Nt.id===Ce);return $e?`${$e.name} (${$e.id})`:"Unknown Production House"};return u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),a.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[a.jsx(co,{className:"w-5 h-5"}),"Create Store"]})]}),f&&a.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),a.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:N,onChange:Ce=>w(Ce.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),a.jsx("input",{type:"text",value:T,onChange:Ce=>E(Ce.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",disabled:S,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:S?"Creating...":"Create Store"}),a.jsx("button",{type:"button",onClick:()=>{p(!1),w(""),E("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?a.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[a.jsx(Di,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(Ce=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:m===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),a.jsx("input",{type:"text",value:A,onChange:$e=>P($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:B,onChange:$e=>I($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ve(Ce.id),disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[a.jsx(ao,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:ye,disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Cancel"]})]})]}):v===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",Ce.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),a.jsxs("select",{value:X,onChange:$e=>U($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a manager..."}),s.filter($e=>!$e.storeId||$e.storeId===Ce.id).map($e=>a.jsxs("option",{value:$e.employeeId,children:[$e.name," (",$e.employeeId,")"]},$e.employeeId))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>pe(Ce.id),disabled:V||!X,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(ao,{className:"w-4 h-4"}),V?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:De,disabled:V,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Cancel"]})]})]}):b===Ce.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Production House to ",Ce.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Production House"}),a.jsxs("select",{value:ee,onChange:$e=>R($e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a production house..."}),o.map($e=>a.jsx("option",{value:$e.id,children:$e.name},$e.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which production house will serve this store"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>Be(Ce.id),disabled:se||!ee,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(ao,{className:"w-4 h-4"}),se?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:xt,disabled:se,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(Wr,{className:"w-4 h-4"}),"Cancel"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Di,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-gray-900",children:Ce.name})]}),a.jsx("button",{onClick:()=>me(Ce),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(Ei,{className:"w-4 h-4"})})]}),Ce.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[a.jsx(r2,{className:"w-4 h-4"}),a.jsx("span",{children:Ce.location})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Aa,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Ce.managerId?a.jsx("span",{className:"text-green-600",children:le(Ce.managerId)}):a.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Nn,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Ce.productionHouseId?a.jsx("span",{className:"text-green-600",children:Ee(Ce.productionHouseId)}):a.jsx("span",{className:"text-orange-600",children:"No Production House Mapped"})})]}),a.jsxs("button",{onClick:()=>he(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[a.jsx(oi,{className:"w-4 h-4"}),Ce.managerId?"Change Manager":"Assign Manager"]}),a.jsxs("button",{onClick:()=>Ae(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:[a.jsx(Nn,{className:"w-4 h-4"}),Ce.productionHouseId?"Change Production House":"Assign Production House"]}),t==="cluster_head"&&a.jsxs("button",{onClick:()=>q(Ce),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[a.jsx(ii,{className:"w-4 h-4"}),"Migrate Data"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",Ce.id]})]})]})},Ce.id))})]})}function gge({context:e,stores:t,employees:r,onRefreshStores:n}){const[s,i]=F.useState(!1),[o,l]=F.useState(!1),[u,d]=F.useState({name:"",location:"",productionHeadId:""}),[f,p]=F.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),m=r.filter(w=>w.designation==="production_incharge"),x=async w=>{w.preventDefault();try{await e.addProductionHouse({name:u.name,location:u.location,productionHeadId:u.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),d({name:"",location:"",productionHeadId:""})}catch(T){console.error("Error creating production house:",T),alert("Failed to create production house. Please try again.")}},v=async(w,T)=>{try{if(!e.user?.accessToken)return;await XD(e.user.accessToken,w,T),await e.updateProductionHouse(w,{productionHeadId:T}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(E){console.error("Error assigning production head:",E),alert("Failed to assign production head. Please try again.")}},y=async(w,T)=>{try{if(!e.user?.accessToken)return;await JD(e.user.accessToken,w,T),alert("Store assigned to production house successfully!"),n()}catch(E){console.error("Error assigning store:",E),alert("Failed to assign store. Please try again.")}},b=async(w,T)=>{if(window.confirm(`Are you sure you want to delete "${T}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(w),alert("Production house deleted successfully!")}catch(S){console.error("Error deleting production house:",S),alert("Failed to delete production house. Please try again.")}},k=async()=>{if(!f.fromHouseId||!f.toHouseId){alert("Please select both source and destination production houses");return}if(f.fromHouseId===f.toHouseId){alert("Source and destination cannot be the same");return}const w=Object.values(f.quantities).reduce((_,A)=>_+A,0);if(w===0){alert("Please enter quantities to transfer");return}const T=e.productionHouses.find(_=>_.id===f.fromHouseId),E=e.productionHouses.find(_=>_.id===f.toHouseId);if(window.confirm(`Transfer ${w} pieces from "${T?.name}" to "${E?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await e5(e.user.accessToken,f.fromHouseId,f.toHouseId,f.quantities);const _=await Dh(e.user.accessToken);e.setProductionHouses(_),alert("Inventory transferred successfully!"),l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(_){console.error("Error transferring inventory:",_),alert(`Failed to transfer inventory: ${_.message||"Unknown error"}`)}},N=()=>{const w=e.productionHouses.find(T=>T.id===f.fromHouseId);if(!w){alert("Please select a source production house first");return}p({...f,quantities:{chicken:w.inventory.chicken,chickenCheese:w.inventory.chickenCheese,veg:w.inventory.veg,cheeseCorn:w.inventory.cheeseCorn,paneer:w.inventory.paneer,vegKurkure:w.inventory.vegKurkure,chickenKurkure:w.inventory.chickenKurkure}})};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(Nn,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5"}),"Transfer Inventory"]}),a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[a.jsx(co,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",required:!0,value:u.name,onChange:w=>d({...u,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),a.jsx("input",{type:"text",required:!0,value:u.location,onChange:w=>d({...u,location:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),a.jsxs("select",{value:u.productionHeadId,onChange:w=>d({...u,productionHeadId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Production Head"}),m.map(w=>a.jsxs("option",{value:w.employeeId,children:[w.name," (",w.employeeId,")"]},w.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{i(!1),d({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),a.jsxs("select",{value:f.fromHouseId,onChange:w=>p({...f,fromHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(w=>a.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),a.jsxs("select",{value:f.toHouseId,onChange:w=>p({...f,toHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(w=>w.id!==f.fromHouseId).map(w=>a.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]})]}),f.fromHouseId&&(()=>{const w=e.productionHouses.find(T=>T.id===f.fromHouseId);return w?a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",w.name]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chicken})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.veg})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.paneer})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenKurkure})]})]})]}):null})(),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),a.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chicken,onChange:w=>p({...f,quantities:{...f.quantities,chicken:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenCheese,onChange:w=>p({...f,quantities:{...f.quantities,chickenCheese:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.veg,onChange:w=>p({...f,quantities:{...f.quantities,veg:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.cheeseCorn,onChange:w=>p({...f,quantities:{...f.quantities,cheeseCorn:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.paneer,onChange:w=>p({...f,quantities:{...f.quantities,paneer:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.vegKurkure,onChange:w=>p({...f,quantities:{...f.quantities,vegKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenKurkure,onChange:w=>p({...f,quantities:{...f.quantities,chickenKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),a.jsx("span",{className:"text-2xl text-green-600",children:Object.values(f.quantities).reduce((w,T)=>w+T,0)})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(Nn,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[a.jsx(co,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(w=>{const T=m.find(_=>_.employeeId===w.productionHeadId),E=t.filter(_=>_.productionHouseId===w.id),S=Object.values(w.inventory).reduce((_,A)=>_+A,0);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:w.name}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(g9,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",w.id]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(r2,{className:"w-4 h-4"}),a.jsx("span",{children:w.location})]}),T&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Aa,{className:"w-4 h-4"}),a.jsxs("span",{children:[T.name," (",T.employeeId,")"]})]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),a.jsxs("div",{className:"text-2xl text-purple-600",children:[S," pcs"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chicken})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.veg})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.paneer})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenKurkure})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),T&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const A=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",A.production);const P=A.production.filter(B=>B.storeId==="STORE-1766938921191-9LCH05"||B.productionHouseId==="STORE-1766938921191-9LCH05"||B.productionHouseId===w.id);console.log(" Records related to this production house:",P),console.log(" Current Production House ID:",w.id),console.log(" Records by productionHouseId:"),P.forEach(B=>{console.log(`  - Record ${B.id.slice(0,8)} (${B.date}): storeId=${B.storeId}, productionHouseId=${B.productionHouseId}`)}),alert(`Found ${P.length} records related to this production house.

Check console for details (F12).`)}catch(_){console.error("Error fetching production data:",_),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),a.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const _=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${w.id}`);if(!(!_||_.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${_}?

This will update them to use the correct production house ID: ${w.id}`))try{const A=await QD(e.user.accessToken,w.id,_.trim());alert(` Fixed ${A.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(A){console.error("Error fixing records:",A),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),a.jsxs("select",{value:w.productionHeadId||"",onChange:_=>v(w.id,_.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Production Head Assigned"}),m.map(_=>a.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",E.length,")"]}),E.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:E.map(_=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:_.name}),a.jsx("div",{className:"text-sm text-gray-600",children:_.location})]})},_.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>b(w.id,w.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[a.jsx(bs,{className:"w-5 h-5"}),"Delete Production House"]})})]},w.id)})}),e.productionHouses.length>0&&a.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(w=>!w.productionHouseId).length===0?a.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):a.jsx("div",{className:"space-y-3",children:t.filter(w=>!w.productionHouseId).map(w=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:w.name}),a.jsx("div",{className:"text-sm text-gray-600",children:w.location})]}),a.jsxs("select",{onChange:T=>T.target.value&&y(w.id,T.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))]})]},w.id))})]})]})}function xge({context:e}){const[t,r]=F.useState([]),[n,s]=F.useState([]),[i,o]=F.useState(!1),[l,u]=F.useState(!1);F.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),F.useEffect(()=>{const x=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),v=JSON.stringify([...n].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());u(x||v)},[t,n,e.managedStoreIds,e.managedProductionHouseIds]);const d=x=>{r(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},f=x=>{s(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},p=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){mr.error("Employee ID not found");return}o(!0);try{await p5(e.user.accessToken,e.user.employeeId,t,n),mr.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(x){console.error("Error updating cluster assignments:",x),mr.error("Failed to update cluster assignments")}finally{o(!1)}},m=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ai,{className:"w-8 h-8"}),a.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),a.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsx(Di,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),a.jsx("p",{className:"text-3xl",children:t.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsx(Jo,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),a.jsx("p",{className:"text-3xl",children:n.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[a.jsx(xn,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),a.jsx("p",{className:"text-3xl",children:t.length+n.length}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Di,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(x=>{const v=t.includes(x.id);return a.jsxs("button",{onClick:()=>d(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&a.jsx(nr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Jo,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[n.length," selected"]})]}),e.productionHouses.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(x=>{const v=n.includes(x.id);return a.jsxs("button",{onClick:()=>f(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&a.jsx(nr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),l&&a.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:a.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[a.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),a.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(nr,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function yge({context:e,stores:t,employees:r,onRefreshStores:n}){const s=e.user?.role==="cluster_head",[i,o]=F.useState(s?"cluster-management":"stores");return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:a.jsx(rr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-white mb-1",children:"Assets Management"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Manage your stores and production houses"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[s&&a.jsxs("button",{onClick:()=>o("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Ai,{className:"w-5 h-5"}),a.jsx("span",{children:"Cluster Settings"})]}),a.jsxs("button",{onClick:()=>o("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Di,{className:"w-5 h-5"}),a.jsx("span",{children:"Stores"})]}),a.jsxs("button",{onClick:()=>o("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Nn,{className:"w-5 h-5"}),a.jsx("span",{children:"Production Houses"})]})]})]})]})}),a.jsx("div",{children:i==="cluster-management"?a.jsx(xge,{context:e}):i==="stores"?a.jsx(mge,{onStoreCreated:n,userRole:e.user?.role}):a.jsx(gge,{context:e,stores:t,employees:r,onRefreshStores:n})})]})}function cI({context:e,stores:t}){const[r,n]=F.useState("my-requests"),[s,i]=F.useState(!1),[o,l]=F.useState({requestId:null,quantities:{},notes:""}),u=e.user?.designation==="store_incharge",d=e.user?.designation==="production_incharge",f=t.find(E=>E.id===e.user?.storeId),p=e.productionHouses.find(E=>E.productionHeadId===e.user?.employeeId),[m,x]=F.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),v=async E=>{if(E.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const S=e.productionHouses.find(A=>A.id===f.productionHouseId);if(!S){alert("Production house not found");return}if(!Object.values(m).some(A=>A>0)){alert("Please enter at least one quantity greater than 0");return}try{await e.createStockRequest({storeId:f.id,storeName:f.name,productionHouseId:S.id,productionHouseName:S.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:m}),alert("Stock request created successfully!"),i(!1),x({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(A){console.error("Error creating stock request:",A),alert("Failed to create stock request. Please try again.")}},y=async E=>{p&&l({requestId:E.id,quantities:{...E.requestedQuantities},notes:""})},b=async E=>{if(E.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(S){console.error("Error fulfilling request:",S),alert("Failed to fulfill request. Please try again.")}},k=u?e.stockRequests.filter(E=>E.storeId===e.user?.storeId):[],N=d&&p?e.stockRequests.filter(E=>E.productionHouseId===p.id&&E.status==="pending"):[],w=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=E=>{switch(E){case"pending":return a.jsx(on,{className:"w-4 h-4"});case"fulfilled":return a.jsx(nr,{className:"w-4 h-4"});case"partially_fulfilled":return a.jsx(gn,{className:"w-4 h-4"});case"cancelled":return a.jsx(pa,{className:"w-4 h-4"});default:return a.jsx(Pr,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(rr,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:[u&&"Request stock from your production house",d&&"Fulfill stock requests from stores"]})]}),u&&a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Ap,{className:"w-5 h-5"}),"New Request"]})]}),u&&f&&!f.productionHouseId&&a.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(u||d)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[u&&a.jsxs("button",{onClick:()=>n("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",k.length,")"]}),d&&a.jsxs("button",{onClick:()=>n("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",N.length>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:N.length})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chicken,onChange:E=>x({...m,chicken:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenCheese,onChange:E=>x({...m,chickenCheese:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),a.jsx("input",{type:"number",min:"0",value:m.veg,onChange:E=>x({...m,veg:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),a.jsx("input",{type:"number",min:"0",value:m.cheeseCorn,onChange:E=>x({...m,cheeseCorn:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),a.jsx("input",{type:"number",min:"0",value:m.paneer,onChange:E=>x({...m,paneer:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.vegKurkure,onChange:E=>x({...m,vegKurkure:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenKurkure,onChange:E=>x({...m,chickenKurkure:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:a.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([E,S])=>{const _=p?.inventory[E]||0;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[E.replace(/([A-Z])/g," $1").replace(/^./,A=>A.toUpperCase()),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",_,")"]})]}),a.jsx("input",{type:"number",min:"0",max:_,value:S,onChange:A=>l({...o,quantities:{...o.quantities,[E]:parseInt(A.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},E)})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:o.notes,onChange:E=>l({...o,notes:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&k.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),a.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&N.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(nr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&k.map(E=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",E.productionHouseName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(E.status)}`,children:[T(E.status),E.status.replace("_"," ").toUpperCase()]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(E.requestDate).toLocaleDateString()]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(E.requestedQuantities).map(([S,_])=>_>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:S.replace(/([A-Z])/g," $1").replace(/^./,A=>A.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:E.fulfilledQuantities?`${E.fulfilledQuantities[S]} / ${_}`:_})]},S))}),E.notes&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),a.jsx("div",{className:"text-sm text-blue-900",children:E.notes})]}),E.fulfilledBy&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",E.fulfilledByName," on ",new Date(E.fulfillmentDate).toLocaleDateString()]})]},E.id)),r==="pending-fulfillment"&&N.map(E=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",E.storeName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(E.status)}`,children:[T(E.status),"PENDING"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",E.requestedByName," on ",new Date(E.requestDate).toLocaleDateString()]})]}),a.jsxs("button",{onClick:()=>y(E),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4"}),"Fulfill"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(E.requestedQuantities).map(([S,_])=>{const A=p?.inventory[S]||0,P=A>=_;return _>0&&a.jsxs("div",{className:`rounded-lg p-3 ${P?"bg-green-50":"bg-red-50"}`,children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:S.replace(/([A-Z])/g," $1").replace(/^./,B=>B.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:_}),a.jsxs("div",{className:`text-xs ${P?"text-green-600":"text-red-600"}`,children:["Available: ",A]})]},S)})})]},E.id))]})]})}const vge=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},bge=(e,t)=>({classGroupId:e,validator:t}),A8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Wm="-",uI=[],wge="arbitrary..",jge=e=>{const t=kge(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Nge(o);const l=o.split(Wm),u=l[0]===""&&l.length>1?1:0;return T8(l,u,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const u=n[o],d=r[o];return u?d?vge(d,u):u:d||uI}return r[o]||uI}}},T8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const d=T8(e,t+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=t===0?e.join(Wm):e.slice(t).join(Wm),u=o.length;for(let d=0;d<u;d++){const f=o[d];if(f.validator(l))return f.classGroupId}},Nge=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?wge+n:void 0})(),kge=e=>{const{theme:t,classGroups:r}=e;return Sge(r,t)},Sge=(e,t)=>{const r=A8();for(const n in e){const s=e[n];Yk(s,r,n,t)}return r},Yk=(e,t,r,n)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];_ge(o,t,r,n)}},_ge=(e,t,r,n)=>{if(typeof e=="string"){Ege(e,t,r);return}if(typeof e=="function"){Age(e,t,r,n);return}Tge(e,t,r,n)},Ege=(e,t,r)=>{const n=e===""?t:C8(t,e);n.classGroupId=r},Age=(e,t,r,n)=>{if(Cge(e)){Yk(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(bge(r,e))},Tge=(e,t,r,n)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,u]=s[o];Yk(u,C8(t,l),r,n)}},C8=(e,t)=>{let r=e;const n=t.split(Wm),s=n.length;for(let i=0;i<s;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=A8(),r.nextPart.set(o,l)),r=l}return r},Cge=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Oge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},QN="!",dI=":",Pge=[],hI=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),Ige=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,u=0,d;const f=s.length;for(let y=0;y<f;y++){const b=s[y];if(o===0&&l===0){if(b===dI){i.push(s.slice(u,y)),u=y+1;continue}if(b==="/"){d=y;continue}}b==="["?o++:b==="]"?o--:b==="("?l++:b===")"&&l--}const p=i.length===0?s:s.slice(u);let m=p,x=!1;p.endsWith(QN)?(m=p.slice(0,-1),x=!0):p.startsWith(QN)&&(m=p.slice(1),x=!0);const v=d&&d>u?d-u:void 0;return hI(i,x,m,v)};if(t){const s=t+dI,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):hI(Pge,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},Dge=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",u=t.has(o);l||u?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},Mge=e=>({cache:Oge(e.cacheSize),parseClassName:Ige(e),sortModifiers:Dge(e),...jge(e)}),Rge=/\s+/,Fge=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(Rge);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:p,modifiers:m,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:y}=r(f);if(p){u=f+(u.length>0?" "+u:u);continue}let b=!!y,k=n(b?v.substring(0,y):v);if(!k){if(!b){u=f+(u.length>0?" "+u:u);continue}if(k=n(v),!k){u=f+(u.length>0?" "+u:u);continue}b=!1}const N=m.length===0?"":m.length===1?m[0]:i(m).join(":"),w=x?N+QN:N,T=w+k;if(o.indexOf(T)>-1)continue;o.push(T);const E=s(k,b);for(let S=0;S<E.length;++S){const _=E[S];o.push(w+_)}u=f+(u.length>0?" "+u:u)}return u},$ge=(...e)=>{let t=0,r,n,s="";for(;t<e.length;)(r=e[t++])&&(n=O8(r))&&(s&&(s+=" "),s+=n);return s},O8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=O8(e[n]))&&(r&&(r+=" "),r+=t);return r},Lge=(e,...t)=>{let r,n,s,i;const o=u=>{const d=t.reduce((f,p)=>p(f),e());return r=Mge(d),n=r.cache.get,s=r.cache.set,i=l,l(u)},l=u=>{const d=n(u);if(d)return d;const f=Fge(u,r);return s(u,f),f};return i=o,(...u)=>i($ge(...u))},Bge=[],$n=e=>{const t=r=>r[e]||Bge;return t.isThemeGetter=!0,t},P8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,I8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Uge=/^\d+\/\d+$/,Hge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qge=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Wge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xc=e=>Uge.test(e),pr=e=>!!e&&!Number.isNaN(Number(e)),Ho=e=>!!e&&Number.isInteger(Number(e)),V1=e=>e.endsWith("%")&&pr(e.slice(0,-1)),Qi=e=>Hge.test(e),Vge=()=>!0,Gge=e=>qge.test(e)&&!zge.test(e),D8=()=>!1,Yge=e=>Wge.test(e),Xge=e=>Kge.test(e),Jge=e=>!Tt(e)&&!Ct(e),Qge=e=>ld(e,F8,D8),Tt=e=>P8.test(e),Tl=e=>ld(e,$8,Gge),G1=e=>ld(e,nxe,pr),fI=e=>ld(e,M8,D8),Zge=e=>ld(e,R8,Xge),jp=e=>ld(e,L8,Yge),Ct=e=>I8.test(e),Yd=e=>cd(e,$8),exe=e=>cd(e,axe),pI=e=>cd(e,M8),txe=e=>cd(e,F8),rxe=e=>cd(e,R8),Np=e=>cd(e,L8,!0),ld=(e,t,r)=>{const n=P8.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},cd=(e,t,r=!1)=>{const n=I8.exec(e);return n?n[1]?t(n[1]):r:!1},M8=e=>e==="position"||e==="percentage",R8=e=>e==="image"||e==="url",F8=e=>e==="length"||e==="size"||e==="bg-size",$8=e=>e==="length",nxe=e=>e==="number",axe=e=>e==="family-name",L8=e=>e==="shadow",sxe=()=>{const e=$n("color"),t=$n("font"),r=$n("text"),n=$n("font-weight"),s=$n("tracking"),i=$n("leading"),o=$n("breakpoint"),l=$n("container"),u=$n("spacing"),d=$n("radius"),f=$n("shadow"),p=$n("inset-shadow"),m=$n("text-shadow"),x=$n("drop-shadow"),v=$n("blur"),y=$n("perspective"),b=$n("aspect"),k=$n("ease"),N=$n("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...T(),Ct,Tt],S=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],A=()=>[Ct,Tt,u],P=()=>[Xc,"full","auto",...A()],B=()=>[Ho,"none","subgrid",Ct,Tt],I=()=>["auto",{span:["full",Ho,Ct,Tt]},Ho,Ct,Tt],O=()=>[Ho,"auto",Ct,Tt],L=()=>["auto","min","max","fr",Ct,Tt],X=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...A()],ne=()=>[Xc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],ee=()=>[e,Ct,Tt],R=()=>[...T(),pI,fI,{position:[Ct,Tt]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",txe,Qge,{size:[Ct,Tt]}],M=()=>[V1,Yd,Tl],J=()=>["","none","full",d,Ct,Tt],te=()=>["",pr,Yd,Tl],ie=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ve=()=>[pr,V1,pI,fI],ye=()=>["","none",v,Ct,Tt],he=()=>["none",pr,Ct,Tt],pe=()=>["none",pr,Ct,Tt],De=()=>[pr,Ct,Tt],q=()=>[Xc,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qi],breakpoint:[Qi],color:[Vge],container:[Qi],"drop-shadow":[Qi],ease:["in","out","in-out"],font:[Jge],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qi],shadow:[Qi],spacing:["px",pr],text:[Qi],"text-shadow":[Qi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xc,Tt,Ct,b]}],container:["container"],columns:[{columns:[pr,Tt,Ct,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Ho,"auto",Ct,Tt]}],basis:[{basis:[Xc,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[pr,Xc,"auto","initial","none",Tt]}],grow:[{grow:["",pr,Ct,Tt]}],shrink:[{shrink:["",pr,Ct,Tt]}],order:[{order:[Ho,"first","last","none",Ct,Tt]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...X(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...X()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":X()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[l,"screen",...ne()]}],"min-w":[{"min-w":[l,"screen","none",...ne()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...ne()]}],h:[{h:["screen","lh",...ne()]}],"min-h":[{"min-h":["screen","lh","none",...ne()]}],"max-h":[{"max-h":["screen","lh",...ne()]}],"font-size":[{text:["base",r,Yd,Tl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ct,G1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",V1,Tt]}],"font-family":[{font:[exe,Tt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ct,Tt]}],"line-clamp":[{"line-clamp":[pr,"none",Ct,G1]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",Ct,Tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ct,Tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[pr,"from-font","auto",Ct,Tl]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[pr,"auto",Ct,Tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ct,Tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ct,Tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ho,Ct,Tt],radial:["",Ct,Tt],conic:[Ho,Ct,Tt]},rxe,Zge]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:J()}],"rounded-s":[{"rounded-s":J()}],"rounded-e":[{"rounded-e":J()}],"rounded-t":[{"rounded-t":J()}],"rounded-r":[{"rounded-r":J()}],"rounded-b":[{"rounded-b":J()}],"rounded-l":[{"rounded-l":J()}],"rounded-ss":[{"rounded-ss":J()}],"rounded-se":[{"rounded-se":J()}],"rounded-ee":[{"rounded-ee":J()}],"rounded-es":[{"rounded-es":J()}],"rounded-tl":[{"rounded-tl":J()}],"rounded-tr":[{"rounded-tr":J()}],"rounded-br":[{"rounded-br":J()}],"rounded-bl":[{"rounded-bl":J()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ie(),"hidden","none"]}],"divide-style":[{divide:[...ie(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[pr,Ct,Tt]}],"outline-w":[{outline:["",pr,Yd,Tl]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",f,Np,jp]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",p,Np,jp]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[pr,Tl]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",m,Np,jp]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[pr,Ct,Tt]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[pr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":ve()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":ve()}],"mask-image-t-to-pos":[{"mask-t-to":ve()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":ve()}],"mask-image-r-to-pos":[{"mask-r-to":ve()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":ve()}],"mask-image-b-to-pos":[{"mask-b-to":ve()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":ve()}],"mask-image-l-to-pos":[{"mask-l-to":ve()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":ve()}],"mask-image-x-to-pos":[{"mask-x-to":ve()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":ve()}],"mask-image-y-to-pos":[{"mask-y-to":ve()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[Ct,Tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":ve()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[pr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":ve()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ct,Tt]}],filter:[{filter:["","none",Ct,Tt]}],blur:[{blur:ye()}],brightness:[{brightness:[pr,Ct,Tt]}],contrast:[{contrast:[pr,Ct,Tt]}],"drop-shadow":[{"drop-shadow":["","none",x,Np,jp]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",pr,Ct,Tt]}],"hue-rotate":[{"hue-rotate":[pr,Ct,Tt]}],invert:[{invert:["",pr,Ct,Tt]}],saturate:[{saturate:[pr,Ct,Tt]}],sepia:[{sepia:["",pr,Ct,Tt]}],"backdrop-filter":[{"backdrop-filter":["","none",Ct,Tt]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[pr,Ct,Tt]}],"backdrop-contrast":[{"backdrop-contrast":[pr,Ct,Tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",pr,Ct,Tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[pr,Ct,Tt]}],"backdrop-invert":[{"backdrop-invert":["",pr,Ct,Tt]}],"backdrop-opacity":[{"backdrop-opacity":[pr,Ct,Tt]}],"backdrop-saturate":[{"backdrop-saturate":[pr,Ct,Tt]}],"backdrop-sepia":[{"backdrop-sepia":["",pr,Ct,Tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ct,Tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[pr,"initial",Ct,Tt]}],ease:[{ease:["linear","initial",k,Ct,Tt]}],delay:[{delay:[pr,Ct,Tt]}],animate:[{animate:["none",N,Ct,Tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Ct,Tt]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:De()}],"skew-x":[{"skew-x":De()}],"skew-y":[{"skew-y":De()}],transform:[{transform:[Ct,Tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:q()}],"translate-x":[{"translate-x":q()}],"translate-y":[{"translate-y":q()}],"translate-z":[{"translate-z":q()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ct,Tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ct,Tt]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[pr,Yd,Tl,G1]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ixe=Lge(sxe);function B8(...e){return ixe(ar(e))}function jn({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:B8("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function mI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function oxe(...e){return t=>{let r=!1;const n=e.map(s=>{const i=mI(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():mI(e[s],null)}}}}var lxe=Symbol.for("react.lazy"),Km=_7[" use ".trim().toString()];function cxe(e){return typeof e=="object"&&e!==null&&"then"in e}function U8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===lxe&&"_payload"in e&&cxe(e._payload)}function uxe(e){const t=hxe(e),r=F.forwardRef((n,s)=>{let{children:i,...o}=n;U8(i)&&typeof Km=="function"&&(i=Km(i._payload));const l=F.Children.toArray(i),u=l.find(pxe);if(u){const d=u.props.children,f=l.map(p=>p===u?F.Children.count(d)>1?F.Children.only(null):F.isValidElement(d)?d.props.children:null:p);return a.jsx(t,{...o,ref:s,children:F.isValidElement(d)?F.cloneElement(d,void 0,f):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var dxe=uxe("Slot");function hxe(e){const t=F.forwardRef((r,n)=>{let{children:s,...i}=r;if(U8(s)&&typeof Km=="function"&&(s=Km(s._payload)),F.isValidElement(s)){const o=gxe(s),l=mxe(i,s.props);return s.type!==F.Fragment&&(l.ref=n?oxe(n,o):o),F.cloneElement(s,l)}return F.Children.count(s)>1?F.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fxe=Symbol("radix.slottable");function pxe(e){return F.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fxe}function mxe(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function gxe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const gI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xI=ar,xxe=(e,t)=>r=>{var n;if(t?.variants==null)return xI(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const f=r?.[d],p=i?.[d];if(f===null)return null;const m=gI(f)||gI(p);return s[d][m]}),l=r&&Object.entries(r).reduce((d,f)=>{let[p,m]=f;return m===void 0||(d[p]=m),d},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:p,className:m,...x}=f;return Object.entries(x).every(v=>{let[y,b]=v;return Array.isArray(b)?b.includes({...i,...l}[y]):{...i,...l}[y]===b})?[...d,p,m]:d},[]);return xI(e,o,u,r?.class,r?.className)},yxe=xxe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Af({className:e,variant:t,asChild:r=!1,...n}){const s=r?dxe:"span";return a.jsx(s,{"data-slot":"badge",className:B8(yxe({variant:t}),e),...n})}function vxe({context:e,stores:t}){const r=F.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),u={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{u.chicken+=y.chickenMomos?.final||0,u.chickenCheese+=y.chickenCheeseMomos?.final||0,u.veg+=y.vegMomos?.final||0,u.cheeseCorn+=y.cheeseCornMomos?.final||0,u.paneer+=y.paneerMomos?.final||0,u.vegKurkure+=y.vegKurkureMomos?.final||0,u.chickenKurkure+=y.chickenKurkureMomos?.final||0});const d=Object.fromEntries(Object.entries(u).map(([y,b])=>[y,l.length>0?b/30:0])),f=7,p=[];for(let y=1;y<=f;y++){const b=new Date;b.setDate(b.getDate()+y);const k=b.getDay(),N=k===0||k===6?1.3:1;p.push({date:b.toISOString().split("T")[0],dayName:b.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*N*100),recommendedProduction:Math.round(o*N*110),isWeekend:k===0||k===6})}const m=t.map(y=>{const k=e.stockRequests.filter(S=>S.storeId===y.id&&S.status==="fulfilled").reduce((S,_)=>S+(_.fulfilledQuantities?Object.values(_.fulfilledQuantities).reduce((A,P)=>A+P,0):0),0),w=e.salesData.filter(S=>S.storeId===y.id&&new Date(S.date)>=s).length/30,T=w>0?k/(w*10):99;let E="low";return T<2?E="critical":T<4?E="high":T<7&&(E="medium"),{storeName:y.name,currentStock:k,avgDailySales:Math.round(w*10),daysUntilStockout:Math.round(T),riskLevel:E,recommendedOrder:Math.round(w*10*7)}}),x=Object.entries(d).map(([y,b])=>{const k=b,N=Math.round(k*1.15),w=k>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(k),recommended:N,efficiency:w,status:k>=N*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),v=[];for(let y=0;y<6;y++){const b=new Date;b.setMonth(b.getMonth()-(5-y));const k=e.salesData.filter(N=>{const w=new Date(N.date);return w.getMonth()===b.getMonth()&&w.getFullYear()===b.getFullYear()}).reduce((N,w)=>N+(w.onlineSales||0)+(w.offlineSales||0),0);v.push({month:b.toLocaleDateString("en-US",{month:"short"}),sales:k})}return{forecast:p,storeRisks:m,optimalSchedule:x,monthlyTrend:v,avgDailyProductionByType:d}},[e,t]),n=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(n2,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),a.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),a.jsxs(jn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Fr,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>a.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),a.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),a.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),a.jsxs(jn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Pr,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),a.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm",children:s.storeName}),a.jsxs(Af,{className:`${n(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),a.jsx("p",{className:"text-lg",children:s.currentStock})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),a.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),a.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),a.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(jn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),a.jsx(Un,{width:"100%",height:300,children:a.jsxs(ci,{data:r.forecast,children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{dataKey:"dayName",tick:{fontSize:12}}),a.jsx(wn,{tick:{fontSize:12}}),a.jsx(zr,{}),a.jsx(ma,{}),a.jsx(yr,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),a.jsx(yr,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),a.jsxs(jn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),a.jsx(Un,{width:"100%",height:300,children:a.jsxs(gh,{data:r.monthlyTrend,children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{dataKey:"month",tick:{fontSize:12}}),a.jsx(wn,{tick:{fontSize:12}}),a.jsx(zr,{}),a.jsx(ma,{}),a.jsx(mi,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),a.jsxs(jn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(gn,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),a.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm capitalize",children:s.product}),a.jsx(Af,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Current"}),a.jsxs("span",{children:[s.current,"/day"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),a.jsx(I7,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{className:"w-24 text-right",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function bxe({context:e,stores:t}){const[r,n]=F.useState("score"),[s,i]=F.useState("30days"),o=F.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,p=new Date;p.setDate(p.getDate()-f);const m=new Date;m.setDate(m.getDate()-f*2);const x=new Date(p),v=t.map(y=>{const b=e.salesData.filter(V=>V.storeId===y.id&&new Date(V.date)>=p).reduce((V,ne)=>V+(ne.onlineSales||0)+(ne.offlineSales||0),0),k=e.salesData.filter(V=>V.storeId===y.id&&new Date(V.date)>=m&&new Date(V.date)<x).reduce((V,ne)=>V+(ne.onlineSales||0)+(ne.offlineSales||0),0),N=k>0?(b-k)/k*100:b>0?100:0,w=e.stockRequests.filter(V=>V.storeId===y.id&&new Date(V.requestDate)>=p),T=w.length,E=w.filter(V=>V.status==="fulfilled"||V.status==="partially_fulfilled"),S=w.reduce((V,ne)=>V+Object.values(ne.requestedQuantities).reduce((ee,R)=>ee+R,0),0),_=E.reduce((V,ne)=>V+(ne.fulfilledQuantities?Object.values(ne.fulfilledQuantities).reduce((ee,R)=>ee+R,0):0),0),A=S>0?_/S*100:0,P=T>0?S/T:0,B=_>0?b/_*(A/100):0,I=Math.min(b/1e5*100,100),O=A,L=Math.max(0,Math.min(N+50,100)),X=Math.min(B,100),U=I*.35+O*.25+L*.25+X*.15;return{storeId:y.id,storeName:y.name,totalSales:b,totalRequests:T,fulfillmentRate:A,avgRequestSize:P,salesGrowth:N,efficiency:B,overallScore:U,rank:0}});return v.sort((y,b)=>b.overallScore-y.overallScore),v.forEach((y,b)=>{y.rank=b+1}),r==="sales"?v.sort((y,b)=>b.totalSales-y.totalSales):r==="efficiency"&&v.sort((y,b)=>b.efficiency-y.efficiency),v},[e,t,s,r]),l=F.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(p=>[p.storeName,p.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(p=>[p.storeName,Math.max(0,Math.min(p.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalRequests/10*100,100)]))}]},[o]),u=f=>f===1?{icon:ej,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:jE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:jE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:n2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},d=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(ej,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),a.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"30days",children:"Last 30 Days"}),a.jsx("option",{value:"90days",children:"Last 90 Days"})]}),a.jsxs("select",{value:r,onChange:f=>n(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"score",children:"Overall Score"}),a.jsx("option",{value:"sales",children:"Total Sales"}),a.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,p)=>{const m=u(f.rank),x=m.icon;return a.jsxs(jn,{className:"p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Af,{className:`${m.color} border text-lg px-3 py-1`,children:m.label}),a.jsx(x,{className:"h-8 w-8 text-purple-600"})]}),a.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),a.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sales"}),a.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Growth"}),a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?a.jsx(SI,{className:"inline h-4 w-4"}):a.jsx(Gm,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(jn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),a.jsx(Un,{width:"100%",height:350,children:a.jsxs(koe,{data:l,children:[a.jsx(qR,{}),a.jsx(nd,{dataKey:"metric",tick:{fontSize:12}}),a.jsx(rd,{angle:90,domain:[0,100],tick:{fontSize:10}}),a.jsx(Wl,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&a.jsx(Wl,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&a.jsx(Wl,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),a.jsx(ma,{})]})})]}),a.jsxs(jn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),a.jsx(Un,{width:"100%",height:350,children:a.jsxs(ci,{data:d,children:[a.jsx(da,{strokeDasharray:"3 3"}),a.jsx(Pn,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),a.jsx(wn,{yAxisId:"left",tick:{fontSize:12}}),a.jsx(wn,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),a.jsx(zr,{}),a.jsx(ma,{}),a.jsx(yr,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),a.jsx(yr,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),a.jsxs(jn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),a.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),a.jsx("tbody",{children:o.map(f=>{const p=u(f.rank);return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-2",children:a.jsx(Af,{className:`${p.color} border text-xs`,children:p.label})}),a.jsx("td",{className:"py-3 px-2",children:f.storeName}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),a.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function wxe({context:e,productionHouses:t,onNavigateToManageItems:r}){const[n,s]=F.useState(new Date().toISOString().split("T")[0]),[i,o]=F.useState(null),[l,u]=F.useState([]),[d,f]=F.useState(!0),[p,m]=F.useState({}),x=async()=>{try{const N=Wu(),{data:{session:w}}=await N.auth.getSession();return w?.access_token||null}catch(N){return console.error("Error getting fresh token:",N),null}};F.useEffect(()=>{(async()=>{const w=await x();if(!w){console.error("No access token available"),f(!1);return}try{const T=await rg(w);u(T)}catch(T){console.error("Error loading production requests:",T)}finally{f(!1)}})()},[]),F.useEffect(()=>{const N=async()=>{const w=await x();if(!w)return;console.log(" Loading production house opening balances..."),console.log("  Production houses count:",t.length),console.log("  Inventory items count:",e.inventoryItems?.length||0);const T=new Date().toISOString().substring(0,7),E={};for(const S of t){console.log(`  Fetching recalibration for ${S.name} (${S.id})...`);try{const _=await el(w,S.id,"production_house");if(console.log(`  Recalibration response for ${S.name}:`,_),_?.record){const A=_.record.date.substring(0,7);if(console.log(`  Recalibration date: ${A}, Current month: ${T}`),A===T){const P={};_.record.items.forEach(B=>{const I=e.inventoryItems?.find(O=>O.id===B.itemId||O.name===B.itemId);if(console.log(`    Item ${B.itemId}: ${I?"Found":"NOT FOUND"}`,I),I){const O=I.name.replace(/_([a-z])/g,L=>L[1].toUpperCase());P[O]=B.actualQuantity,console.log(`    Mapped to ${O} = ${B.actualQuantity}`)}}),E[S.id]=P,console.log(` Loaded opening balance for ${S.name}:`,P)}else console.log(`   Recalibration month ${A} doesn't match current month ${T}`)}else console.log(`   No recalibration found for ${S.name}`)}catch(_){console.error(` Error fetching recalibration for ${S.name}:`,_)}}console.log(" Final opening balances:",E),m(E)};t.length>0&&e.inventoryItems&&e.inventoryItems.length>0?N():console.log(" Skipping opening balance load:",{productionHousesCount:t.length,inventoryItemsCount:e.inventoryItems?.length||0})},[t,e.inventoryItems]);const v=F.useMemo(()=>{if(d)return[];const N=[];return console.log(" Production Houses:",t),console.log(" Production Requests:",l),console.log(" Selected Date:",n),t.forEach(w=>{console.log(`
 Processing house: ${w.name} (${w.id})`);const T=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date<=n),E=l?.filter(R=>{if(!R.deliveredAt||R.status!=="delivered")return!1;let se;if(R.deliveredAt.includes("/")){const te=R.deliveredAt.split(",")[0].split("/");se=`${te[2]}-${te[1].padStart(2,"0")}-${te[0].padStart(2,"0")}`}else R.deliveredAt.includes("T")?se=R.deliveredAt.split("T")[0]:se=R.deliveredAt.split(" ")[0];const z=e.stores.find(te=>te.id===R.storeId),M=z?.productionHouseId===w.id,J=se<=n;return console.log(`     Request ${R.id}: storeId=${R.storeId}, store.productionHouseId=${z?.productionHouseId}, houseId=${w.id}, deliveredDate=${se}, isForThisHouse=${M}, isBeforeOrOnDate=${J}, status=${R.status}`),M&&J})||[];console.log(`   Total delivered requests for ${w.name}: ${E.length}`),E.forEach(R=>{console.log(`    - Request: chicken=${R.chickenMomos}, chickenCheese=${R.chickenCheeseMomos}, deliveredAt=${R.deliveredAt}`)});const S=e.productionData.find(R=>R.productionHouseId===w.id&&R.date===n),_=l?.filter(R=>{if(!R.deliveredAt||R.status!=="delivered")return!1;let se;if(R.deliveredAt.includes("/")){const M=R.deliveredAt.split(",")[0].split("/");se=`${M[2]}-${M[1].padStart(2,"0")}-${M[0].padStart(2,"0")}`}else R.deliveredAt.includes("T")?se=R.deliveredAt.split("T")[0]:se=R.deliveredAt.split(" ")[0];return e.stores.find(M=>M.id===R.storeId)?.productionHouseId===w.id&&se===n})||[],A={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0},P=p[w.id]||{},B={chickenMomo:"chicken",chickenCheeseMomo:"chickenCheese",vegMomo:"veg",cheeseCornMomo:"cheeseCorn",paneerMomo:"paneer",vegKurkureMomo:"vegKurkure",chickenKurkureMomo:"chickenKurkure",schezwanMomo:"schezwan"};Object.keys(P).forEach(R=>{const se=B[R]||R;se in A&&(A[se]=P[R],console.log(`   Applied opening balance: ${R} -> ${se} = ${P[R]}`))}),T.forEach(R=>{A.chicken+=R.chickenMomos?.final||0,A.chickenCheese+=R.chickenCheeseMomos?.final||0,A.veg+=R.vegMomos?.final||0,A.cheeseCorn+=R.cheeseCornMomos?.final||0,A.paneer+=R.paneerMomos?.final||0,A.vegKurkure+=R.vegKurkureMomos?.final||0,A.chickenKurkure+=R.chickenKurkureMomos?.final||0,A.schezwan+=R.schezwanMomos?.final||0});const I={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};E.forEach(R=>{I.chicken+=R.chickenMomos||0,I.chickenCheese+=R.chickenCheeseMomos||0,I.veg+=R.vegMomos||0,I.cheeseCorn+=R.cheeseCornMomos||0,I.paneer+=R.paneerMomos||0,I.vegKurkure+=R.vegKurkureMomos||0,I.chickenKurkure+=R.chickenKurkureMomos||0,I.schezwan+=R.schezwanMomos||0});const O={chicken:S?.chickenMomos?.final||0,chickenCheese:S?.chickenCheeseMomos?.final||0,veg:S?.vegMomos?.final||0,cheeseCorn:S?.cheeseCornMomos?.final||0,paneer:S?.paneerMomos?.final||0,vegKurkure:S?.vegKurkureMomos?.final||0,chickenKurkure:S?.chickenKurkureMomos?.final||0,schezwan:S?.schezwanMomos?.final||0},L={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};_.forEach(R=>{L.chicken+=R.chickenMomos||0,L.chickenCheese+=R.chickenCheeseMomos||0,L.veg+=R.vegMomos||0,L.cheeseCorn+=R.cheeseCornMomos||0,L.paneer+=R.paneerMomos||0,L.vegKurkure+=R.vegKurkureMomos||0,L.chickenKurkure+=R.chickenKurkureMomos||0,L.schezwan+=R.schezwanMomos||0});const X={chicken:{produced:O.chicken,sent:L.chicken,available:Math.max(0,A.chicken-I.chicken),percentage:0},chickenCheese:{produced:O.chickenCheese,sent:L.chickenCheese,available:Math.max(0,A.chickenCheese-I.chickenCheese),percentage:0},veg:{produced:O.veg,sent:L.veg,available:Math.max(0,A.veg-I.veg),percentage:0},cheeseCorn:{produced:O.cheeseCorn,sent:L.cheeseCorn,available:Math.max(0,A.cheeseCorn-I.cheeseCorn),percentage:0},paneer:{produced:O.paneer,sent:L.paneer,available:Math.max(0,A.paneer-I.paneer),percentage:0},vegKurkure:{produced:O.vegKurkure,sent:L.vegKurkure,available:Math.max(0,A.vegKurkure-I.vegKurkure),percentage:0},chickenKurkure:{produced:O.chickenKurkure,sent:L.chickenKurkure,available:Math.max(0,A.chickenKurkure-I.chickenKurkure),percentage:0},schezwan:{produced:O.schezwan,sent:L.schezwan,available:Math.max(0,A.schezwan-I.schezwan),percentage:0}};Object.keys(X).forEach(R=>{const se=X[R];A[R]>0?se.percentage=se.available/A[R]*100:se.percentage=0});const U=Object.values(O).reduce((R,se)=>R+se,0),V=S?(S.wastage?.dough||0)+(S.wastage?.stuffing||0)+(S.wastage?.batter||0)+(S.wastage?.coating||0):0,ne=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date===n&&R.approvalStatus==="approved").length,ee=e.productionData.filter(R=>R.productionHouseId===w.id&&R.date===n&&R.approvalStatus==="pending").length;N.push({productionHouseId:w.id,productionHouseName:w.name,date:n,stock:X,totalProduced:U,totalWastage:V,approvedEntries:ne,pendingApproval:ee}),console.log(`   Stock entry created for ${w.name}:`,{totalProduced:U,totalWastage:V,availableStock:X,hasOpeningBalance:Object.keys(P).length>0,openingBalance:P})}),console.log(" Final stocks array:",N),N},[e.productionData,e.stores,l,t,n,p]),y=i?v.filter(N=>N.productionHouseId===i):v,b={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos",schezwan:"Schezwan Momos"},k=N=>N>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:N>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:N>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:N>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(jn,{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(y9,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"Dynamic Inventory Items"}),a.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["You can now add custom production items beyond the default 7 momo types! Manage all items from the ",a.jsx("strong",{children:'"Manage Items"'})," page in the navigation."]}),a.jsx("p",{className:"text-xs text-orange-600",children:" Items can be production house-specific or global (available to all facilities)"})]})]})}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),a.jsx("p",{className:"text-muted-foreground",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fr,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"date",value:n,onChange:N=>s(N.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),a.jsxs("select",{value:i||"all",onChange:N=>o(N.target.value==="all"?null:N.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),t.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))]}),r&&(e.user?.role==="manager"||e.user?.role==="cluster_head")&&a.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]}),y.map(N=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(jn,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(rr,{className:"h-5 w-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:N.totalProduced.toLocaleString()}),a.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),a.jsxs(jn,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(a2,{className:"h-5 w-5 text-red-600"}),a.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-red-900 mb-1",children:N.totalWastage.toFixed(2)}),a.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),a.jsxs(jn,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(gn,{className:"h-5 w-5 text-green-600"}),a.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-green-900 mb-1",children:N.approvedEntries}),a.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),a.jsxs(jn,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Fr,{className:"h-5 w-5 text-yellow-600"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:N.pendingApproval}),a.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),a.jsxs(jn,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Nn,{className:"h-5 w-5 text-orange-600"}),a.jsxs("h3",{className:"text-lg",children:[N.productionHouseName," - Stock Status"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(N.stock).map(([w,T])=>{const E=k(T.percentage);return a.jsxs("div",{className:`p-4 rounded-lg border-2 ${E.bg} ${E.border}`,children:[a.jsx("h4",{className:"text-sm mb-3",children:b[w]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"This Month Produced:"}),a.jsx("span",{className:E.text,children:T.produced})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),a.jsx("span",{className:"text-red-600",children:T.sent})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"",children:"Stock Available:"}),a.jsx("span",{className:`text-lg ${E.text}`,children:T.available})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"flex justify-between text-xs",children:a.jsxs("span",{children:[T.percentage.toFixed(0),"% remaining"]})}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${E.bar} transition-all duration-300`,style:{width:`${Math.min(T.percentage,100)}%`}})})]})]})]})]},w)})})]})]},N.productionHouseId)),y.length===0&&a.jsxs(jn,{className:"p-12 text-center",children:[a.jsx(Nn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function yI({context:e,stores:t,onNavigateToManageItems:r}){const[n,s]=useState("dashboard");return a.jsx("div",{className:"min-h-screen bg-background p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:a.jsx(rr,{className:"h-6 w-6 text-white"})})})]}),a.jsxs(Tabs,{value:n,onValueChange:i=>s(i),className:"space-y-6",children:[a.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[a.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[a.jsx(Y1,{className:"h-4 w-4"}),"Dashboard"]}),a.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Stock"]}),a.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[a.jsx(X1,{className:"h-4 w-4"}),"Alerts"]}),a.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[a.jsx(Ap,{className:"h-4 w-4"}),"Requests"]}),a.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[a.jsx(fi,{className:"h-4 w-4"}),"Reports"]}),a.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[a.jsx(n2,{className:"h-4 w-4"}),"Forecast"]}),a.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[a.jsx(ej,{className:"h-4 w-4"}),"Rankings"]})]}),a.jsx(TabsContent,{value:"dashboard",children:a.jsx(InventoryDashboard,{context:e,stores:t})}),a.jsx(TabsContent,{value:"stock-status",children:a.jsx(wxe,{context:e,productionHouses:e.productionHouses,onNavigateToManageItems:r})}),a.jsx(TabsContent,{value:"alerts",children:a.jsx(InventoryAlerts,{context:e,stores:t})}),a.jsx(TabsContent,{value:"requests",children:a.jsx(EnhancedProductionRequests,{context:e,stores:t})}),a.jsx(TabsContent,{value:"reports",children:a.jsx(ReportsVisualization,{context:e,stores:t})}),a.jsx(TabsContent,{value:"predictive",children:a.jsx(vxe,{context:e,stores:t})}),a.jsx(TabsContent,{value:"performance",children:a.jsx(bxe,{context:e,stores:t})})]})]})})}function vI({context:e}){const[t,r]=F.useState([]),[n,s]=F.useState(!0),[i,o]=F.useState(!1),[l,u]=F.useState(null),[d,f]=F.useState(null),[p,m]=F.useState(null),[x,v]=F.useState({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),[y,b]=F.useState("all"),[k,N]=F.useState("all");F.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const O=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,{headers:{Authorization:`Bearer ${In}`}});if(!O.ok)throw new Error("Failed to load inventory items");const L=await O.json();r(L.items||[])}catch(O){console.error("Error loading items:",O),f(O instanceof Error?O.message:"Failed to load items")}finally{s(!1)}},T=async O=>{O.preventDefault(),f(null),m(null);try{const X={name:x.displayName.toLowerCase().replace(/\s+/g,"_"),displayName:x.displayName,category:x.category,unit:x.unit,linkedEntityType:x.linkedEntityType,linkedEntityId:x.linkedEntityType==="global"?void 0:x.linkedEntityId,userId:e.user?.employeeId||"unknown"},U=l?`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${l}`:`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,V=await fetch(U,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify(X)});if(!V.ok){const ne=await V.json();throw new Error(ne.error||"Failed to save item")}m(l?"Item updated successfully!":"Item created successfully!"),o(!1),u(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),await w()}catch(L){console.error("Error saving item:",L),f(L instanceof Error?L.message:"Failed to save item")}},E=O=>{u(O.id),v({displayName:O.displayName,category:O.category,unit:O.unit,linkedEntityType:O.linkedEntityType,linkedEntityId:O.linkedEntityId||""}),o(!0)},S=async O=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${In}`}})).ok)throw new Error("Failed to delete item");m("Item deleted successfully!"),await w()}catch(L){console.error("Error deleting item:",L),f(L instanceof Error?L.message:"Failed to delete item")}},_=async()=>{if(confirm("This will add the 7 default momo types as global items. Continue?"))try{if(s(!0),!(await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${In}`}})).ok)throw new Error("Failed to initialize defaults");m("Default items initialized successfully!"),await w()}catch(O){console.error("Error initializing defaults:",O),f(O instanceof Error?O.message:"Failed to initialize defaults")}finally{s(!1)}},A=()=>{o(!1),u(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""})},P=t.filter(O=>!(y!=="all"&&O.category!==y||k!=="all"&&O.linkedEntityType!==k)),B=O=>{switch(O){case"finished_product":return"bg-purple-100 text-purple-800";case"raw_material":return"bg-blue-100 text-blue-800";case"sauce_chutney":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},I=O=>{switch(O){case"store":return a.jsx(Di,{className:"w-4 h-4"});case"production_house":return a.jsx(Nn,{className:"w-4 h-4"});default:return a.jsx(rr,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Inventory Items Master"}),a.jsx("p",{className:"text-gray-600",children:"Manage all inventory items for stores and production houses"})]}),a.jsxs("div",{className:"flex gap-3",children:[t.length===0&&a.jsx("button",{onClick:_,disabled:n,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50",children:"Initialize Defaults"}),a.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(co,{className:"w-5 h-5"}),"Add New Item"]})]})]}),d&&a.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[a.jsx(Pr,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-800",children:d}),a.jsx("button",{onClick:()=>f(null),className:"ml-auto",children:a.jsx(Wr,{className:"w-4 h-4 text-red-600"})})]}),p&&a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[a.jsx(ao,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-green-800",children:p}),a.jsx("button",{onClick:()=>m(null),className:"ml-auto",children:a.jsx(Wr,{className:"w-4 h-4 text-green-600"})})]}),i&&a.jsxs(jn,{className:"p-6 border-2 border-purple-200",children:[a.jsx("h2",{className:"text-xl mb-4",children:l?"Edit Item":"Add New Item"}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Display Name *"}),a.jsx("input",{type:"text",value:x.displayName,onChange:O=>v({...x,displayName:O.target.value}),placeholder:"e.g., Schezwan Momo",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Category *"}),a.jsxs("select",{value:x.category,onChange:O=>v({...x,category:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"finished_product",children:"Finished Product"}),a.jsx("option",{value:"raw_material",children:"Raw Material"}),a.jsx("option",{value:"sauce_chutney",children:"Sauce/Chutney"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Unit *"}),a.jsxs("select",{value:x.unit,onChange:O=>v({...x,unit:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"pieces",children:"Pieces"}),a.jsx("option",{value:"kg",children:"Kilograms (kg)"}),a.jsx("option",{value:"liters",children:"Liters"}),a.jsx("option",{value:"grams",children:"Grams"}),a.jsx("option",{value:"ml",children:"Milliliters (ml)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Link To *"}),a.jsxs("select",{value:x.linkedEntityType,onChange:O=>v({...x,linkedEntityType:O.target.value,linkedEntityId:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"global",children:"All (Global)"}),a.jsx("option",{value:"store",children:"Specific Store"}),a.jsx("option",{value:"production_house",children:"Specific Production House"})]})]}),x.linkedEntityType==="store"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Store *"}),a.jsxs("select",{value:x.linkedEntityId,onChange:O=>v({...x,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Store --"}),e.stores?.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})]}),x.linkedEntityType==="production_house"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Production House *"}),a.jsxs("select",{value:x.linkedEntityId,onChange:O=>v({...x,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Production House --"}),e.productionHouses?.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:l?"Update Item":"Add Item"})]})]})]}),a.jsx(jn,{className:"p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Category"}),a.jsxs("select",{value:y,onChange:O=>b(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"finished_product",children:"Finished Products"}),a.jsx("option",{value:"raw_material",children:"Raw Materials"}),a.jsx("option",{value:"sauce_chutney",children:"Sauces/Chutneys"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Type"}),a.jsxs("select",{value:k,onChange:O=>N(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"global",children:"Global Items"}),a.jsx("option",{value:"store",children:"Store Specific"}),a.jsx("option",{value:"production_house",children:"Production House Specific"})]})]})]})}),n?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading items..."})]}):P.length===0?a.jsxs(jn,{className:"p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No items found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first inventory item"}),t.length===0&&a.jsx("button",{onClick:_,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:"Initialize Default Items"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(O=>a.jsxs(jn,{className:"p-4 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[I(O.linkedEntityType),a.jsx("h3",{className:"font-semibold text-gray-900",children:O.displayName})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>E(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:a.jsx(Ei,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:a.jsx(bs,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Af,{className:B(O.category),children:O.category.replace("_"," ").toUpperCase()}),a.jsxs("span",{className:"text-gray-500",children:[" ",O.unit]})]}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Scope:"})," ",O.linkedEntityType==="global"?"All Entities":O.linkedEntityType==="store"?`Store: ${e.stores?.find(L=>L.id===O.linkedEntityId)?.name||"Unknown"}`:`Production House: ${e.productionHouses?.find(L=>L.id===O.linkedEntityId)?.name||"Unknown"}`]}),a.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:["Created: ",new Date(O.createdAt).toLocaleDateString()]})]})]},O.id))}),a.jsx(jn,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-purple-600",children:t.filter(O=>O.isActive).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-blue-600",children:t.filter(O=>O.linkedEntityType==="global").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Global Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-green-600",children:t.filter(O=>O.linkedEntityType==="store").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Store Specific"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-orange-600",children:t.filter(O=>O.linkedEntityType==="production_house").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Production House"})]})]})})]})}function bI(){const e=F.useRef(""),t=F.useRef(null);return F.useEffect(()=>{console.log(" Stock Request Reminder Scheduler initialized");const r=async()=>{const n=new Date,s=n.getHours(),i=n.toISOString().split("T")[0];if(s===15&&e.current!==i){console.log(" 3PM - Time to send stock request reminders!");try{const o=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/send-stock-request-reminders`,{method:"POST",headers:{Authorization:`Bearer ${In}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();console.log(" Stock request reminders sent successfully:",l),e.current=i}else console.error(" Failed to send stock request reminders:",o.statusText)}catch(o){console.error(" Error sending stock request reminders:",o)}}};return t.current=setInterval(r,900*1e3),r(),()=>{t.current&&clearInterval(t.current)}},[]),null}function Xk(){return"serviceWorker"in navigator&&"PushManager"in window}const jxe=`
// Service Worker for Push Notifications
self.addEventListener('install', (event) => {
  console.log('Service Worker installed');
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  console.log('Service Worker activated');
  event.waitUntil(clients.claim());
});

self.addEventListener('push', (event) => {
  console.log('Push notification received:', event);
  
  let notificationData = {
    title: 'Bhandar-IMS',
    body: 'You have a new notification',
    icon: '/icon-192x192.png',
    badge: '/badge-72x72.png',
    tag: 'bhandar-notification',
    requireInteraction: false,
  };

  if (event.data) {
    try {
      const data = event.data.json();
      notificationData = {
        ...notificationData,
        title: data.title || notificationData.title,
        body: data.message || data.body || notificationData.body,
        icon: data.icon || notificationData.icon,
        tag: data.tag || notificationData.tag,
        data: data,
      };
    } catch (e) {
      console.error('Error parsing push data:', e);
      notificationData.body = event.data.text();
    }
  }

  event.waitUntil(
    self.registration.showNotification(notificationData.title, {
      body: notificationData.body,
      icon: notificationData.icon,
      badge: notificationData.badge,
      tag: notificationData.tag,
      requireInteraction: notificationData.requireInteraction,
      data: notificationData.data,
    })
  );
});

self.addEventListener('notificationclick', (event) => {
  console.log('Notification clicked:', event);
  event.notification.close();
  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {
      for (const client of clientList) {
        if (client.url.includes(self.registration.scope) && 'focus' in client) {
          return client.focus();
        }
      }
      if (clients.openWindow) {
        return clients.openWindow('/');
      }
    })
  );
});
`;async function Nxe(){if(!Xk())return null;try{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully from /sw.js"),e}catch{console.log(" /sw.js not found, using inline service worker");const t=new Blob([jxe],{type:"application/javascript"}),r=URL.createObjectURL(t),n=await navigator.serviceWorker.register(r,{scope:"/"});return console.log(" Service Worker registered successfully (inline)"),n}}catch{return null}}function kxe(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}async function Sxe(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kxe(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function wI(e,t){try{if(!(await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function _xe(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Exe(e,t){if(!Xk())return console.log(" Push notifications not supported in this browser"),!1;try{const r=await Nxe();if(!r)return console.log(" Service worker registration failed - push notifications unavailable"),!1;await navigator.serviceWorker.ready;const n=await _xe(r);if(n)return console.log(" Push notifications already enabled"),await wI(n,e),!0;const s=Notification.permission;if(s==="denied")return console.log(" Push notifications blocked. To enable: Click  icon in address bar  Allow notifications"),!1;if(s==="default")return console.log(" Push notifications available. Click the notification bell to enable."),!1;if(s==="granted"){const i=await Sxe(r,t);return i?(await wI(i,e),console.log(" Push notifications enabled successfully"),!0):(console.log(" Failed to create push subscription"),!1)}return!1}catch(r){return console.log(" Push notifications unavailable:",r instanceof Error?r.message:"Unknown error"),!1}}function Axe(){const[e,t]=F.useState("analytics"),[r,n]=F.useState(null),[s,i]=F.useState(null),[o,l]=F.useState(!0),[u,d]=F.useState(null),[f,p]=F.useState([]),[m,x]=F.useState([]),[v,y]=F.useState([]),[b,k]=F.useState([]),[N,w]=F.useState([]),[T,E]=F.useState([]),[S,_]=F.useState(!1),[A,P]=F.useState(null),[B,I]=F.useState(!1),[O,L]=F.useState([]),[X,U]=F.useState(null),[V,ne]=F.useState([]),[ee,R]=F.useState([]),[se,z]=F.useState([]),[M,J]=F.useState([]),[te,ie]=F.useState([]),[me,ve]=F.useState([]),[ye,he]=F.useState([]),pe=Wu(),q=new URLSearchParams(window.location.search).get("setup")==="cluster-head",Ae=async()=>{try{const K=await Ku();L(K)}catch(K){if(K instanceof Error&&(K.message==="Not authenticated"||K.message==="Unauthorized"))return;console.error("Error loading stores:",K)}},Be=async()=>{try{const K=await $s();J(K)}catch(K){if(K instanceof Error&&(K.message==="Not authenticated"||K.message==="Unauthorized"))return;console.error("Error loading employees:",K)}},xt=async K=>{try{const H=await f5(K);H&&(ie(H.managedStoreIds||[]),ve(H.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:H.managedStoreIds?.length||0,productionHouses:H.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},le=async K=>{_(!0),P(null);try{const[H,W,re,ae,je,Oe,G,ce,Te,Ve]=await Promise.all([Qm(K),u2(K),XI(K),d2(K),ng(K),h2(),Dh(K),t5(K),rg(K),Zd()]);console.log(" Loaded Inventory Items:",H.length),console.log(" Loaded Overhead Items:",W.length),console.log(" Loaded Fixed Cost Items:",re.length);const ke=Array.from(new Map(H.map(fr=>[fr.id,fr])).values()),ct=Array.from(new Map(W.map(fr=>[fr.id,fr])).values()),tt=Array.from(new Map(re.map(fr=>[fr.id,fr])).values()),Qe=Array.from(new Map(ae.map(fr=>[fr.id,fr])).values()),Bt=Array.from(new Map(Oe.map(fr=>[fr.id,fr])).values()),Cr=H.length-ke.length,Dr=W.length-ct.length,nn=re.length-tt.length,rs=ae.length-Qe.length,Zr=Oe.length-Bt.length,ns=Cr+Dr+nn+rs+Zr;console.log(" After deduplication:"),console.log("Inventory: Before:",H.length," After:",ke.length),console.log("Overheads: Before:",W.length," After:",ct.length),console.log("Fixed Costs: Before:",re.length," After:",tt.length),console.log("Sales: Before:",ae.length," After:",Qe.length),ns>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const Wa=await pe.auth.getUser(K),qr=Wa.data?.user?.user_metadata?.role;if(Wa.data?.user&&qr==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const Z=await eD(K);console.log(` Cleaned ${Z.removed} duplicates successfully`)}}catch(Wa){console.log("Auto-cleanup skipped:",Wa instanceof Error?Wa.message:"Unknown error")}},1500)),p(ke),x(ct),y(tt),k(Qe),w(je.data||[]),E(Bt),ne(G),console.log(" Loaded Stock Requests from API:",ce.length,ce),R(ce),z(Te),he(Ve)}catch(H){if(H instanceof Error&&(H.message==="Not authenticated"||H.message==="Unauthorized"))return;console.error("Error loading data:",H),P("Failed to load inventory data. Please refresh the page.")}finally{_(!1)}},Ee=async()=>{try{const K=await Zd();if(K.length===0){console.log(" No inventory items found, initializing defaults...");try{await DD();const H=await Zd();he(H),console.log(` Initialized ${H.length} default inventory items`);return}catch(H){console.error("Error initializing default items:",H),he([]);return}}he(K),await Ce(K)}catch(K){console.error("Error loading inventory items:",K),he([])}},Ce=async K=>{const H=[{name:"chicken",displayName:"Chicken Momos",variations:["chicken momo","chicken momos"]},{name:"chickenCheese",displayName:"Chicken Cheese Momos",variations:["chicken cheese momo","chicken cheese momos","chicken cheese"]},{name:"veg",displayName:"Veg Momos",variations:["veg momo","veg momos","vegetable momos"]},{name:"cheeseCorn",displayName:"Cheese Corn Momos",variations:["cheese corn momo","cheese corn momos","corn cheese"]},{name:"paneer",displayName:"Paneer Momos",variations:["paneer momo","paneer momos"]},{name:"vegKurkure",displayName:"Veg Kurkure Momos",variations:["veg kurkure momo","veg kurkure momos","veg kurkure"]},{name:"chickenKurkure",displayName:"Chicken Kurkure Momos",variations:["chicken kurkure momo","chicken kurkure momos","chicken kurkure"]}];try{let W=!1;for(const re of H){let ae=K.find(je=>je.name.toLowerCase()===re.name.toLowerCase());ae||(ae=K.find(je=>{const Oe=je.displayName.toLowerCase(),G=re.displayName.toLowerCase();return Oe===G||Oe.replace(/\s*momos?\s*/i,"").trim()===G.replace(/\s*momos?\s*/i,"").trim()?!0:re.variations.some(ce=>Oe.includes(ce.toLowerCase()))})),ae?ae.name!==re.name&&(console.log(` Updating inventory item name: "${ae.displayName}" from "${ae.name}" to "${re.name}"`),await ID(ae.id,{name:re.name,displayName:re.displayName}),W=!0):(console.log(` Creating core inventory item: ${re.displayName}`),await PD({name:re.name,displayName:re.displayName,category:"finished_product",unit:"pieces",linkedEntityType:"global",createdBy:"system"}),W=!0)}if(W){const re=await Zd();he(re)}}catch(W){console.error("Error ensuring core momos exist:",W)}};F.useEffect(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),(async()=>{try{const{data:{session:H}}=await pe.auth.getSession();if(H?.user){let W=null,re=H.user.user_metadata?.designation||null;if(H.user.user_metadata?.employeeId)try{const Oe=(await nl()).find(G=>G.employeeId===H.user.user_metadata?.employeeId);Oe&&(W=Oe.storeId||null,re=Oe.designation||re)}catch(je){console.error("Error fetching employee storeId on session check:",je)}const ae={email:H.user.email||"",name:H.user.user_metadata?.name||H.user.email?.split("@")[0]||"User",role:H.user.user_metadata?.role||"manager",employeeId:H.user.user_metadata?.employeeId||null,accessToken:H.access_token,storeId:W,designation:re};n(ae),await le(H.access_token),(ae.role==="cluster_head"||ae.role==="manager"||ae.role==="audit")&&(await Ae(),await Be(),ae.role==="cluster_head"&&await xt(H.access_token))}}catch(H){console.log("Session check error:",H)}finally{l(!1)}})()},[]),F.useEffect(()=>{r&&(async()=>{try{if(!Xk()){console.log("Push notifications not supported on this device");return}const H=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${In}`}});if(!H.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const W=await H.json();if(!W.configured||!W.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const re=r.employeeId||r.email;await Exe(re,W.publicKey)&&console.log(" Push notifications enabled successfully for user:",re)}catch(H){console.log(" Push notifications setup skipped:",H instanceof Error?H.message:"Unknown error")}})()},[r]);const $e=async(K,H)=>{i(null);try{const{data:W,error:re}=await pe.auth.signInWithPassword({email:K,password:H});if(re){i(re.message);return}if(W.user&&W.session){let ae=null,je=W.user.user_metadata?.designation||null;if(W.user.user_metadata?.employeeId)try{const ce=(await nl()).find(Te=>Te.employeeId===W.user.user_metadata?.employeeId);ce&&(ae=ce.storeId||null,je=ce.designation||je)}catch(G){console.error("Error fetching employee storeId:",G)}const Oe={email:W.user.email||"",name:W.user.user_metadata?.name||W.user.email?.split("@")[0]||"User",role:W.user.user_metadata?.role||"manager",employeeId:W.user.user_metadata?.employeeId||null,accessToken:W.session.access_token,storeId:ae,designation:je};n(Oe),await le(W.session.access_token),(Oe.role==="cluster_head"||Oe.role==="manager"||Oe.role==="audit")&&(await Ae(),await Be())}}catch(W){console.log("Login error:",W),i("Failed to sign in. Please try again.")}},Nt=async(K,H,W,re)=>{i(null);try{const ae=await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify({email:K,password:H,name:W,role:re,employeeId:re==="cluster_head"?"BM001":re==="audit"?"AUDIT001":null})}),je=await ae.json();if(!ae.ok){i(je.error||"Failed to create account");return}if(!je.user){i("Failed to create account");return}if(re==="cluster_head"||re==="audit")try{const Oe=re==="cluster_head"?"BM001":"AUDIT001";await fetch(`https://${_a}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${In}`},body:JSON.stringify({employeeId:Oe,name:W,email:K,role:re,employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:je.user.id})})}catch(Oe){console.log("Error creating unified employee record:",Oe)}await $e(K,H)}catch(ae){console.log("Signup error:",ae),i("Failed to create account. Please try again.")}},vt=async()=>{await pe.auth.signOut(),n(null),p([]),x([]),y([]),k([]),t("sales")},ht={inventory:f,overheads:m,fixedCosts:v,salesData:b,categorySalesData:N,productionData:T,productionHouses:V,stockRequests:ee,productionRequests:se,stores:O,managedStoreIds:te,managedProductionHouseIds:me,inventoryItems:ye,loadInventoryItems:Ee,addInventoryItem:async K=>{if(r)try{const H={...K,storeId:r.storeId||K.storeId},W=await zI(r.accessToken,H);p([...f,W])}catch(H){throw console.error("Error adding inventory item:",H),H}},addOverheadItem:async K=>{if(r)try{const H={...K,storeId:r.storeId||K.storeId},W=await VI(r.accessToken,H);x([...m,W])}catch(H){throw console.error("Error adding overhead item:",H),H}},addFixedCostItem:async K=>{if(r)try{const H={...K,storeId:r.storeId||K.storeId},W=await JI(r.accessToken,H);y([...v,W])}catch(H){throw console.error("Error adding fixed cost item:",H),H}},updateInventoryItem:async(K,H)=>{if(r)try{const W={...H,storeId:r.storeId||H.storeId},re=await WI(r.accessToken,K,W);p(f.map(ae=>ae.id===K?re:ae))}catch(W){throw console.error("Error updating inventory item:",W),W}},updateOverheadItem:async(K,H)=>{if(r)try{const W={...H,storeId:r.storeId||H.storeId},re=await GI(r.accessToken,K,W);x(m.map(ae=>ae.id===K?re:ae))}catch(W){throw console.error("Error updating overhead item:",W),W}},updateFixedCostItem:async(K,H)=>{if(r)try{const W={...H,storeId:r.storeId||H.storeId},re=await QI(r.accessToken,K,W);y(v.map(ae=>ae.id===K?re:ae))}catch(W){throw console.error("Error updating fixed cost item:",W),W}},deleteInventoryItem:async K=>{if(r)try{await KI(r.accessToken,K),p(f.filter(H=>H.id!==K))}catch(H){throw console.error("Error deleting inventory item:",H),H}},deleteOverheadItem:async K=>{if(r)try{await YI(r.accessToken,K),x(m.filter(H=>H.id!==K))}catch(H){throw console.error("Error deleting overhead item:",H),H}},deleteFixedCostItem:async K=>{if(r)try{await ZI(r.accessToken,K),y(v.filter(H=>H.id!==K))}catch(H){throw console.error("Error deleting fixed cost item:",H),H}},addSalesData:async K=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const H={...K,storeId:r.storeId||K.storeId},W=await tD(r.accessToken,H);k([...b,W])}catch(H){throw console.error("Error adding sales data:",H),H}},updateSalesData:async(K,H)=>{if(r)try{const W={...H,storeId:r.storeId||H.storeId},re=await rD(r.accessToken,K,W);k(b.map(ae=>ae.id===K?re:ae))}catch(W){throw console.error("Error updating sales data:",W),W}},approveSalesData:async K=>{if(r)try{const H=await nD(r.accessToken,K);k(b.map(W=>W.id===K?H:W))}catch(H){throw console.error("Error approving sales data:",H),H}},requestSalesApproval:async(K,H,W)=>{if(r)try{const re=await aD(r.accessToken,K,H,W);k(b.map(ae=>ae.id===K?re:ae))}catch(re){throw console.error("Error requesting sales approval:",re),re}},approveDiscrepancy:async K=>{if(r)try{const H=await sD(r.accessToken,K);k(b.map(W=>W.id===K?H:W))}catch(H){throw console.error("Error approving discrepancy:",H),H}},rejectDiscrepancy:async(K,H)=>{if(r)try{const W=await iD(r.accessToken,K,H);k(b.map(re=>re.id===K?W:re))}catch(W){throw console.error("Error rejecting discrepancy:",W),W}},addProductionData:async K=>{if(r)try{const H={...K,storeId:r.storeId||K.storeId},W=await oD(H);E([...T,W])}catch(H){throw console.error("Error adding production data:",H),H}},updateProductionData:async(K,H)=>{if(r)try{const W={...H,storeId:r.storeId||H.storeId},re=await lD(K,W);E(T.map(ae=>ae.id===K?re:ae))}catch(W){throw console.error("Error updating production data:",W),W}},approveProductionData:async K=>{if(r)try{const H=await cD(K);E(T.map(W=>W.id===K?H:W))}catch(H){throw console.error("Error approving production data:",H),H}},addProductionHouse:async K=>{if(r)try{const H=await VD(r.accessToken,K);ne([...V,H])}catch(H){throw console.error("Error creating production house:",H),H}},updateProductionHouse:async(K,H)=>{if(r)try{const W=await GD(r.accessToken,K,H);ne(V.map(re=>re.id===K?W:re))}catch(W){throw console.error("Error updating production house:",W),W}},updateProductionHouseInventory:async(K,H)=>{if(r)try{const W=await YD(r.accessToken,K,H);ne(V.map(re=>re.id===K?W:re))}catch(W){throw console.error("Error updating production house inventory:",W),W}},deleteProductionHouse:async K=>{if(r)try{await ZD(r.accessToken,K),ne(V.filter(H=>H.id!==K))}catch(H){throw console.error("Error deleting production house:",H),H}},setProductionHouses:ne,createStockRequest:async K=>{if(r)try{const H=await r5(r.accessToken,K);R([...ee,H])}catch(H){throw console.error("Error creating stock request:",H),H}},fulfillStockRequest:async(K,H,W,re,ae)=>{if(r)try{const je=await n5(r.accessToken,K,H,W,re,ae);R(ee.map(G=>G.id===K?je:G));const Oe=await Dh(r.accessToken);ne(Oe)}catch(je){throw console.error("Error fulfilling stock request:",je),je}},cancelStockRequest:async K=>{if(r)try{const H=await a5(r.accessToken,K);R(ee.map(W=>W.id===K?H:W))}catch(H){throw console.error("Error cancelling stock request:",H),H}},isManager:r?.role==="manager",user:r};if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(q)return a.jsx(pge,{});if(!r)return a.jsx(rge,{onLogin:$e,onSignup:Nt,error:s});const Ut=r.role==="cluster_head",Ft=r.role==="employee",dr=r.role==="audit",br=r.role==="employee"&&r.designation==="store_incharge",gt=r.designation==="production_incharge",It=br||gt,vr=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",Er=r.role==="manager",Y=gt||vr||Ut;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:Ut,isEmployee:Ft,isManager:Er,isStoreIncharge:br,isProductionIncharge:gt,isOperationsManager:vr,isAnyIncharge:It,canViewProduction:Y}),console.log(" Current activeView:",e),dr?a.jsx(tge,{user:r,inventory:f,overheads:m,fixedCosts:v,salesData:b,categorySalesData:N,productionData:T,productionHouses:V,stockRequests:ee,productionRequests:se,employees:M,stores:O,inventoryItems:ye,onLogout:vt,onDataUpdate:le}):Ft?a.jsxs(a.Fragment,{children:[a.jsx(bI,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",br?"Store Incharge":gt?"Production Head":"Employee"]})]})}),a.jsx("button",{onClick:()=>I(!B),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:B?a.jsx(Wr,{className:"w-5 h-5"}):a.jsx(_E,{className:"w-5 h-5"})}),a.jsxs("div",{className:"hidden lg:flex gap-2",children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(gn,{className:"w-4 h-4"}),a.jsx("span",{children:"Analytics"})]}),It&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(qn,{className:"w-4 h-4"}),a.jsx("span",{children:"Sales"})]})]}),Y&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{children:"Production"})]}),It&&a.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Stock Requests"})]}),Er&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Y1,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory-items"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory-items"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(xn,{className:"w-4 h-4"}),a.jsx("span",{children:It?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(on,{className:"w-4 h-4"}),a.jsx("span",{children:"Attendance"})]}),It&&a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]}),It&&a.jsx(lI,{onNavigate:(K,H,W)=>{K==="sales"&&(t("sales"),d(null)),K==="production"&&(t("production"),d(null)),K==="attendance"&&(t("employees"),d(null)),K==="production-requests"&&(console.log(" Production request notification clicked, requestId:",W),d(null),setTimeout(()=>{d(W||null),t("analytics")},0))}}),a.jsxs("button",{onClick:vt,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[a.jsx(Xd,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]}),B&&a.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{t("analytics"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),It&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("inventory"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]})]}),Y&&a.jsxs("button",{onClick:()=>{t("production"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Nn,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),It&&a.jsxs("button",{onClick:()=>{t("stock-requests"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Stock Requests"})]}),Er&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("advanced-inventory"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Y1,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory-items"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory-items"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>{t("payroll"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(xn,{className:"w-5 h-5"}),a.jsx("span",{children:It?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>{t("attendance"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(on,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]}),It&&a.jsxs("button",{onClick:()=>{t("export"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(ii,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:vt,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[a.jsx(Xd,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),a.jsx("main",{className:"pb-6",children:e==="analytics"?a.jsx(XN,{context:ht,highlightRequestId:u,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory"&&It?a.jsx(mj,{context:ht}):e==="sales"&&It?a.jsx(e6,{context:ht,selectedStoreId:X}):e==="production"&&Y?a.jsx(JN,{context:ht,selectedStoreId:X}):e==="payroll"?It?a.jsx(wk,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):a.jsx(iI,{employeeId:r.employeeId||""}):e==="attendance"?a.jsx(_8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:It,inchargeDesignation:r.designation}):e==="export"&&It?a.jsx(sI,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&It?a.jsx(cI,{context:ht,stores:O}):e==="advanced-inventory"&&Er?a.jsx(yI,{context:ht,stores:O,onNavigateToManageItems:()=>t("inventory-items")}):e==="inventory-items"&&(Er||It)?(console.log(" Rendering InventoryItemsManagement:",{activeView:e,isManager:Er,isAnyIncharge:It}),a.jsx(vI,{context:ht})):(console.log(" Falling through to EmployeeDashboard:",{activeView:e,isManager:Er,isAnyIncharge:It}),a.jsx(iI,{employeeId:r.employeeId||""}))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(bI,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(lI,{onNavigate:(K,H,W)=>{K==="sales"?(t("sales"),d(null)):K==="attendance"||K==="leave"?(t("employees"),d(null)):K==="production"?(t("production"),d(null)):K==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",W),d(null),setTimeout(()=>{d(W||null),t("analytics")},0))}}),a.jsx("button",{onClick:()=>I(!B),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:B?a.jsx(Wr,{className:"w-5 h-5"}):a.jsx(_E,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[Ut?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(gn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(qn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),Y&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ti,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Assets"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(gn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(qn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),Y&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Nn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ti,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(ii,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}),a.jsxs("button",{onClick:vt,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[a.jsx(Xd,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),B&&a.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[Ut?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),Y&&a.jsxs("button",{onClick:()=>{t("production"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Nn,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Ti,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("assets"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Assets"})]}),a.jsxs("button",{onClick:()=>{t("export"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(ii,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(gn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("sales"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),Y&&a.jsxs("button",{onClick:()=>{t("production"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(Nn,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Ti,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("export"),I(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(ii,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}),a.jsxs("button",{onClick:vt,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(Xd,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),Ut&&O.length>0&&e!=="analytics"&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx(fge,{stores:O,selectedStoreId:X,onStoreChange:U,showAllStores:!0})})}),A&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm",children:A}),a.jsx("button",{onClick:()=>r&&le(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),S&&a.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[a.jsx(rr,{className:"w-5 h-5 animate-pulse"}),a.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),a.jsx("main",{className:"pb-6",children:e==="sales"?a.jsx(e6,{context:ht,selectedStoreId:X}):e==="inventory"?r.role==="manager"?a.jsx(bq,{context:ht,selectedStoreId:X,employees:M}):a.jsx(mj,{context:ht,selectedStoreId:X}):e==="analytics"?a.jsx(XN,{context:ht,selectedStoreId:X,highlightRequestId:u,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="export"?a.jsx(sI,{userRole:r.role,selectedStoreId:X,currentUserId:r.email}):e==="employees"?a.jsx(dge,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:X}):e==="assets"?a.jsx(yge,{context:ht,stores:O,employees:M,onRefreshStores:Ae}):e==="production"&&Y?a.jsx(JN,{context:ht,selectedStoreId:X}):e==="stock-requests"?a.jsx(cI,{context:ht,stores:O}):e==="advanced-inventory"?a.jsx(yI,{context:ht,stores:O,onNavigateToManageItems:()=>{console.log(" App.tsx (Manager): Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory-items"?(console.log(" Rendering InventoryItemsManagement (Manager section):",{activeView:e,isManager:Er}),a.jsx(vI,{context:ht})):a.jsx(Soe,{context:ht})})]})]})}S7.createRoot(document.getElementById("root")).render(a.jsx(Axe,{}));
