function l7(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hy={exports:{}},Md={},fy={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function c7(){if(Q_)return mr;Q_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(K,R,Q){this.props=K,this.context=R,this.refs=y,this.updater=Q||x}b.prototype.isReactComponent={},b.prototype.setState=function(K,R){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,R,"setState")},b.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function N(){}N.prototype=b.prototype;function k(K,R,Q){this.props=K,this.context=R,this.refs=y,this.updater=Q||x}var w=k.prototype=new N;w.constructor=k,v(w,b.prototype),w.isPureReactComponent=!0;var P=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(K,R,Q){var ee,se={},xe=null,ge=null;if(R!=null)for(ee in R.ref!==void 0&&(ge=R.ref),R.key!==void 0&&(xe=""+R.key),R)S.call(R,ee)&&!E.hasOwnProperty(ee)&&(se[ee]=R[ee]);var Me=arguments.length-2;if(Me===1)se.children=Q;else if(1<Me){for(var ce=Array(Me),me=0;me<Me;me++)ce[me]=arguments[me+2];se.children=ce}if(K&&K.defaultProps)for(ee in Me=K.defaultProps,Me)se[ee]===void 0&&(se[ee]=Me[ee]);return{$$typeof:e,type:K,key:xe,ref:ge,props:se,_owner:_.current}}function M(K,R){return{$$typeof:e,type:K.type,key:R,ref:K.ref,props:K.props,_owner:K._owner}}function D(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function A(K){var R={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Q){return R[Q]})}var O=/\/+/g;function F(K,R){return typeof K=="object"&&K!==null&&K.key!=null?A(""+K.key):R.toString(36)}function W(K,R,Q,ee,se){var xe=typeof K;(xe==="undefined"||xe==="boolean")&&(K=null);var ge=!1;if(K===null)ge=!0;else switch(xe){case"string":case"number":ge=!0;break;case"object":switch(K.$$typeof){case e:case t:ge=!0}}if(ge)return ge=K,se=se(ge),K=ee===""?"."+F(ge,0):ee,P(se)?(Q="",K!=null&&(Q=K.replace(O,"$&/")+"/"),W(se,R,Q,"",function(me){return me})):se!=null&&(D(se)&&(se=M(se,Q+(!se.key||ge&&ge.key===se.key?"":(""+se.key).replace(O,"$&/")+"/")+K)),R.push(se)),1;if(ge=0,ee=ee===""?".":ee+":",P(K))for(var Me=0;Me<K.length;Me++){xe=K[Me];var ce=ee+F(xe,Me);ge+=W(xe,R,Q,ce,se)}else if(ce=m(K),typeof ce=="function")for(K=ce.call(K),Me=0;!(xe=K.next()).done;)xe=xe.value,ce=ee+F(xe,Me++),ge+=W(xe,R,Q,ce,se);else if(xe==="object")throw R=String(K),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return ge}function Y(K,R,Q){if(K==null)return K;var ee=[],se=0;return W(K,ee,"","",function(xe){return R.call(Q,xe,se++)}),ee}function Z(K){if(K._status===-1){var R=K._result;R=R(),R.then(function(Q){(K._status===0||K._status===-1)&&(K._status=1,K._result=Q)},function(Q){(K._status===0||K._status===-1)&&(K._status=2,K._result=Q)}),K._status===-1&&(K._status=0,K._result=R)}if(K._status===1)return K._result.default;throw K._result}var re={current:null},ne={transition:null},U={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:ne,ReactCurrentOwner:_};function oe(){throw Error("act(...) is not supported in production builds of React.")}return mr.Children={map:Y,forEach:function(K,R,Q){Y(K,function(){R.apply(this,arguments)},Q)},count:function(K){var R=0;return Y(K,function(){R++}),R},toArray:function(K){return Y(K,function(R){return R})||[]},only:function(K){if(!D(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},mr.Component=b,mr.Fragment=r,mr.Profiler=s,mr.PureComponent=k,mr.StrictMode=n,mr.Suspense=u,mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,mr.act=oe,mr.cloneElement=function(K,R,Q){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var ee=v({},K.props),se=K.key,xe=K.ref,ge=K._owner;if(R!=null){if(R.ref!==void 0&&(xe=R.ref,ge=_.current),R.key!==void 0&&(se=""+R.key),K.type&&K.type.defaultProps)var Me=K.type.defaultProps;for(ce in R)S.call(R,ce)&&!E.hasOwnProperty(ce)&&(ee[ce]=R[ce]===void 0&&Me!==void 0?Me[ce]:R[ce])}var ce=arguments.length-2;if(ce===1)ee.children=Q;else if(1<ce){Me=Array(ce);for(var me=0;me<ce;me++)Me[me]=arguments[me+2];ee.children=Me}return{$$typeof:e,type:K.type,key:se,ref:xe,props:ee,_owner:ge}},mr.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:i,_context:K},K.Consumer=K},mr.createElement=C,mr.createFactory=function(K){var R=C.bind(null,K);return R.type=K,R},mr.createRef=function(){return{current:null}},mr.forwardRef=function(K){return{$$typeof:l,render:K}},mr.isValidElement=D,mr.lazy=function(K){return{$$typeof:f,_payload:{_status:-1,_result:K},_init:Z}},mr.memo=function(K,R){return{$$typeof:d,type:K,compare:R===void 0?null:R}},mr.startTransition=function(K){var R=ne.transition;ne.transition={};try{K()}finally{ne.transition=R}},mr.unstable_act=oe,mr.useCallback=function(K,R){return re.current.useCallback(K,R)},mr.useContext=function(K){return re.current.useContext(K)},mr.useDebugValue=function(){},mr.useDeferredValue=function(K){return re.current.useDeferredValue(K)},mr.useEffect=function(K,R){return re.current.useEffect(K,R)},mr.useId=function(){return re.current.useId()},mr.useImperativeHandle=function(K,R,Q){return re.current.useImperativeHandle(K,R,Q)},mr.useInsertionEffect=function(K,R){return re.current.useInsertionEffect(K,R)},mr.useLayoutEffect=function(K,R){return re.current.useLayoutEffect(K,R)},mr.useMemo=function(K,R){return re.current.useMemo(K,R)},mr.useReducer=function(K,R,Q){return re.current.useReducer(K,R,Q)},mr.useRef=function(K){return re.current.useRef(K)},mr.useState=function(K){return re.current.useState(K)},mr.useSyncExternalStore=function(K,R,Q){return re.current.useSyncExternalStore(K,R,Q)},mr.useTransition=function(){return re.current.useTransition()},mr.version="18.3.1",mr}var Z_;function q2(){return Z_||(Z_=1,fy.exports=c7()),fy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function u7(){if(eE)return Md;eE=1;var e=q2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var f,p={},m=null,x=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(x=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:t,type:l,key:m,ref:x,props:p,_owner:s.current}}return Md.Fragment=r,Md.jsx=o,Md.jsxs=o,Md}var tE;function d7(){return tE||(tE=1,hy.exports=u7()),hy.exports}var a=d7(),B0={},py={exports:{}},Ga={},my={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function h7(){return rE||(rE=1,(function(e){function t(ne,U){var oe=ne.length;ne.push(U);e:for(;0<oe;){var K=oe-1>>>1,R=ne[K];if(0<s(R,U))ne[K]=U,ne[oe]=R,oe=K;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var U=ne[0],oe=ne.pop();if(oe!==U){ne[0]=oe;e:for(var K=0,R=ne.length,Q=R>>>1;K<Q;){var ee=2*(K+1)-1,se=ne[ee],xe=ee+1,ge=ne[xe];if(0>s(se,oe))xe<R&&0>s(ge,se)?(ne[K]=ge,ne[xe]=oe,K=xe):(ne[K]=se,ne[ee]=oe,K=ee);else if(xe<R&&0>s(ge,oe))ne[K]=ge,ne[xe]=oe,K=xe;else break e}}return U}function s(ne,U){var oe=ne.sortIndex-U.sortIndex;return oe!==0?oe:ne.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,x=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ne){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=ne)n(d),U.sortIndex=U.expirationTime,t(u,U);else break;U=r(d)}}function P(ne){if(y=!1,w(ne),!v)if(r(u)!==null)v=!0,Z(S);else{var U=r(d);U!==null&&re(P,U.startTime-ne)}}function S(ne,U){v=!1,y&&(y=!1,N(C),C=-1),x=!0;var oe=m;try{for(w(U),p=r(u);p!==null&&(!(p.expirationTime>U)||ne&&!A());){var K=p.callback;if(typeof K=="function"){p.callback=null,m=p.priorityLevel;var R=K(p.expirationTime<=U);U=e.unstable_now(),typeof R=="function"?p.callback=R:p===r(u)&&n(u),w(U)}else n(u);p=r(u)}if(p!==null)var Q=!0;else{var ee=r(d);ee!==null&&re(P,ee.startTime-U),Q=!1}return Q}finally{p=null,m=oe,x=!1}}var _=!1,E=null,C=-1,M=5,D=-1;function A(){return!(e.unstable_now()-D<M)}function O(){if(E!==null){var ne=e.unstable_now();D=ne;var U=!0;try{U=E(!0,ne)}finally{U?F():(_=!1,E=null)}}else _=!1}var F;if(typeof k=="function")F=function(){k(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=O,F=function(){Y.postMessage(null)}}else F=function(){b(O,0)};function Z(ne){E=ne,_||(_=!0,F())}function re(ne,U){C=b(function(){ne(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,Z(S))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var oe=m;m=U;try{return ne()}finally{m=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,U){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=m;m=ne;try{return U()}finally{m=oe}},e.unstable_scheduleCallback=function(ne,U,oe){var K=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?K+oe:K):oe=K,ne){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=oe+R,ne={id:f++,callback:U,priorityLevel:ne,startTime:oe,expirationTime:R,sortIndex:-1},oe>K?(ne.sortIndex=oe,t(d,ne),r(u)===null&&ne===r(d)&&(y?(N(C),C=-1):y=!0,re(P,oe-K))):(ne.sortIndex=R,t(u,ne),v||x||(v=!0,Z(S))),ne},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(ne){var U=m;return function(){var oe=m;m=U;try{return ne.apply(this,arguments)}finally{m=oe}}}})(gy)),gy}var nE;function f7(){return nE||(nE=1,my.exports=h7()),my.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function p7(){if(aE)return Ga;aE=1;var e=q2(),t=f7();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)n.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(c){return u.call(p,c)?!0:u.call(f,c)?!1:d.test(c)?p[c]=!0:(f[c]=!0,!1)}function x(c,h,g,j){if(g!==null&&g.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return j?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,g,j){if(h===null||typeof h>"u"||x(c,h,g,j))return!0;if(j)return!1;if(g!==null)switch(g.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,g,j,T,I,G){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=c,this.type=h,this.sanitizeURL=I,this.removeEmptyString=G}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){b[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];b[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){b[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){b[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){b[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){b[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){b[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){b[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){b[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(N,k);b[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(N,k);b[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(N,k);b[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){b[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),b.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){b[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function w(c,h,g,j){var T=b.hasOwnProperty(h)?b[h]:null;(T!==null?T.type!==0:j||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,g,T,j)&&(g=null),j||T===null?m(h)&&(g===null?c.removeAttribute(h):c.setAttribute(h,""+g)):T.mustUseProperty?c[T.propertyName]=g===null?T.type===3?!1:"":g:(h=T.attributeName,j=T.attributeNamespace,g===null?c.removeAttribute(h):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,j?c.setAttributeNS(j,h,g):c.setAttribute(h,g))))}var P=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),ne=Symbol.iterator;function U(c){return c===null||typeof c!="object"?null:(c=ne&&c[ne]||c["@@iterator"],typeof c=="function"?c:null)}var oe=Object.assign,K;function R(c){if(K===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);K=h&&h[1]||""}return`
`+K+c}var Q=!1;function ee(c,h){if(!c||Q)return"";Q=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Re){var j=Re}Reflect.construct(c,[],h)}else{try{h.call()}catch(Re){j=Re}c.call(h.prototype)}else{try{throw Error()}catch(Re){j=Re}c()}}catch(Re){if(Re&&j&&typeof Re.stack=="string"){for(var T=Re.stack.split(`
`),I=j.stack.split(`
`),G=T.length-1,de=I.length-1;1<=G&&0<=de&&T[G]!==I[de];)de--;for(;1<=G&&0<=de;G--,de--)if(T[G]!==I[de]){if(G!==1||de!==1)do if(G--,de--,0>de||T[G]!==I[de]){var pe=`
`+T[G].replace(" at new "," at ");return c.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",c.displayName)),pe}while(1<=G&&0<=de);break}}}finally{Q=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?R(c):""}function se(c){switch(c.tag){case 5:return R(c.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return c=ee(c.type,!1),c;case 11:return c=ee(c.type.render,!1),c;case 1:return c=ee(c.type,!0),c;default:return""}}function xe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case E:return"Fragment";case _:return"Portal";case M:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case A:return(c.displayName||"Context")+".Consumer";case D:return(c._context.displayName||"Context")+".Provider";case O:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Y:return h=c.displayName||null,h!==null?h:xe(c.type)||"Memo";case Z:h=c._payload,c=c._init;try{return xe(c(h))}catch{}}return null}function ge(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(h);case 8:return h===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Me(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ce(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function me(c){var h=ce(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),j=""+c[h];if(!c.hasOwnProperty(h)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,I=g.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return T.call(this)},set:function(G){j=""+G,I.call(this,G)}}),Object.defineProperty(c,h,{enumerable:g.enumerable}),{getValue:function(){return j},setValue:function(G){j=""+G},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Oe(c){c._valueTracker||(c._valueTracker=me(c))}function q(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var g=h.getValue(),j="";return c&&(j=ce(c)?c.checked?"true":"false":c.value),c=j,c!==g?(h.setValue(c),!0):!1}function Ne(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function ae(c,h){var g=h.checked;return oe({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function De(c,h){var g=h.defaultValue==null?"":h.defaultValue,j=h.checked!=null?h.checked:h.defaultChecked;g=Me(h.value!=null?h.value:g),c._wrapperState={initialChecked:j,initialValue:g,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Be(c,h){h=h.checked,h!=null&&w(c,"checked",h,!1)}function Se(c,h){Be(c,h);var g=Me(h.value),j=h.type;if(g!=null)j==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?ze(c,h.type,g):h.hasOwnProperty("defaultValue")&&ze(c,h.type,Me(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Fe(c,h,g){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var j=h.type;if(!(j!=="submit"&&j!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,g||h===c.value||(c.value=h),c.defaultValue=h}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function ze(c,h,g){(h!=="number"||Ne(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var Ee=Array.isArray;function He(c,h,g,j){if(c=c.options,h){h={};for(var T=0;T<g.length;T++)h["$"+g[T]]=!0;for(g=0;g<c.length;g++)T=h.hasOwnProperty("$"+c[g].value),c[g].selected!==T&&(c[g].selected=T),T&&j&&(c[g].defaultSelected=!0)}else{for(g=""+Me(g),h=null,T=0;T<c.length;T++){if(c[T].value===g){c[T].selected=!0,j&&(c[T].defaultSelected=!0);return}h!==null||c[T].disabled||(h=c[T])}h!==null&&(h.selected=!0)}}function Nt(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return oe({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ke(c,h){var g=h.value;if(g==null){if(g=h.children,h=h.defaultValue,g!=null){if(h!=null)throw Error(r(92));if(Ee(g)){if(1<g.length)throw Error(r(93));g=g[0]}h=g}h==null&&(h=""),g=h}c._wrapperState={initialValue:Me(g)}}function kt(c,h){var g=Me(h.value),j=Me(h.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),h.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),j!=null&&(c.defaultValue=""+j)}function ft(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Qt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Qt(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var wt,vt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,g,j,T){MSApp.execUnsafeLocalFunction(function(){return c(h,g,j,T)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=wt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function bt(c,h){if(h){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=h;return}}c.textContent=h}var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];Object.keys(Gt).forEach(function(c){tn.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Gt[h]=Gt[c]})});function ur(c,h,g){return h==null||typeof h=="boolean"||h===""?"":g||typeof h!="number"||h===0||Gt.hasOwnProperty(c)&&Gt[c]?(""+h).trim():h+"px"}function zr(c,h){c=c.style;for(var g in h)if(h.hasOwnProperty(g)){var j=g.indexOf("--")===0,T=ur(g,h[g],j);g==="float"&&(g="cssFloat"),j?c.setProperty(g,T):c[g]=T}}var ye=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(c,h){if(h){if(ye[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function at(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ge=null;function Et(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var st=null,pt=null,Mt=null;function et(c){if(c=bd(c)){if(typeof st!="function")throw Error(r(280));var h=c.stateNode;h&&(h=e0(h),st(c.stateNode,c.type,h))}}function mt(c){pt?Mt?Mt.push(c):Mt=[c]:pt=c}function It(){if(pt){var c=pt,h=Mt;if(Mt=pt=null,et(c),h)for(c=0;c<h.length;c++)et(h[c])}}function ar(c,h){return c(h)}function gt(){}var lr=!1;function Sr(c,h,g){if(lr)return c(h,g);lr=!0;try{return ar(c,h,g)}finally{lr=!1,(pt!==null||Mt!==null)&&(gt(),It())}}function ht(c,h){var g=c.stateNode;if(g===null)return null;var j=e0(g);if(j===null)return null;g=j[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var sr=!1;if(l)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){sr=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{sr=!1}function Xr(c,h,g,j,T,I,G,de,pe){var Re=Array.prototype.slice.call(arguments,3);try{h.apply(g,Re)}catch(Ze){this.onError(Ze)}}var wr=!1,pr=null,B=!1,z=null,H={onError:function(c){wr=!0,pr=c}};function J(c,h,g,j,T,I,G,de,pe){wr=!1,pr=null,Xr.apply(H,arguments)}function te(c,h,g,j,T,I,G,de,pe){if(J.apply(this,arguments),wr){if(wr){var Re=pr;wr=!1,pr=null}else throw Error(r(198));B||(B=!0,z=Re)}}function ie(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function we(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Pe(c){if(ie(c)!==c)throw Error(r(188))}function V(c){var h=c.alternate;if(!h){if(h=ie(c),h===null)throw Error(r(188));return h!==c?null:c}for(var g=c,j=h;;){var T=g.return;if(T===null)break;var I=T.alternate;if(I===null){if(j=T.return,j!==null){g=j;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===g)return Pe(T),c;if(I===j)return Pe(T),h;I=I.sibling}throw Error(r(188))}if(g.return!==j.return)g=T,j=I;else{for(var G=!1,de=T.child;de;){if(de===g){G=!0,g=T,j=I;break}if(de===j){G=!0,j=T,g=I;break}de=de.sibling}if(!G){for(de=I.child;de;){if(de===g){G=!0,g=I,j=T;break}if(de===j){G=!0,j=I,g=T;break}de=de.sibling}if(!G)throw Error(r(189))}}if(g.alternate!==j)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:h}function ue(c){return c=V(c),c!==null?_e(c):null}function _e(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=_e(c);if(h!==null)return h;c=c.sibling}return null}var ve=t.unstable_scheduleCallback,Xe=t.unstable_cancelCallback,ct=t.unstable_shouldYield,tt=t.unstable_requestPaint,Qe=t.unstable_now,Ut=t.unstable_getCurrentPriorityLevel,Tr=t.unstable_ImmediatePriority,Rr=t.unstable_UserBlockingPriority,Lr=t.unstable_NormalPriority,rn=t.unstable_LowPriority,$s=t.unstable_IdlePriority,Cr=null,Br=null;function Ls(c){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(Cr,c,void 0,(c.current.flags&128)===128)}catch{}}var X=Math.clz32?Math.clz32:le,ke=Math.log,fe=Math.LN2;function le(c){return c>>>=0,c===0?32:31-(ke(c)/fe|0)|0}var Ie=64,Ce=4194304;function je(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function $e(c,h){var g=c.pendingLanes;if(g===0)return 0;var j=0,T=c.suspendedLanes,I=c.pingedLanes,G=g&268435455;if(G!==0){var de=G&~T;de!==0?j=je(de):(I&=G,I!==0&&(j=je(I)))}else G=g&~T,G!==0?j=je(G):I!==0&&(j=je(I));if(j===0)return 0;if(h!==0&&h!==j&&(h&T)===0&&(T=j&-j,I=h&-h,T>=I||T===16&&(I&4194240)!==0))return h;if((j&4)!==0&&(j|=g&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=j;0<h;)g=31-X(h),T=1<<g,j|=c[g],h&=~T;return j}function Ye(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(c,h){for(var g=c.suspendedLanes,j=c.pingedLanes,T=c.expirationTimes,I=c.pendingLanes;0<I;){var G=31-X(I),de=1<<G,pe=T[G];pe===-1?((de&g)===0||(de&j)!==0)&&(T[G]=Ye(de,h)):pe<=h&&(c.expiredLanes|=de),I&=~de}}function Ve(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Pt(){var c=Ie;return Ie<<=1,(Ie&4194240)===0&&(Ie=64),c}function Kt(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function Ht(c,h,g){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-X(h),c[h]=g}function Ft(c,h){var g=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<g;){var T=31-X(g),I=1<<T;h[T]=0,j[T]=-1,c[T]=-1,g&=~I}}function Bt(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var j=31-X(g),T=1<<j;T&h|c[j]&h&&(c[j]|=h),g&=~T}}var xt=0;function Tt(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var dr,Le,ot,Fr,Or,ra=!1,Ha=[],Ca=null,Za=null,gn=null,Bs=new Map,Aa=new Map,Us=[],Bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(c,h){switch(c){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":Bs.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(h.pointerId)}}function bo(c,h,g,j,T,I){return c===null||c.nativeEvent!==I?(c={blockedOn:h,domEventName:g,eventSystemFlags:j,nativeEvent:I,targetContainers:[T]},h!==null&&(h=bd(h),h!==null&&Le(h)),c):(c.eventSystemFlags|=j,h=c.targetContainers,T!==null&&h.indexOf(T)===-1&&h.push(T),c)}function Fi(c,h,g,j,T){switch(h){case"focusin":return Ca=bo(Ca,c,h,g,j,T),!0;case"dragenter":return Za=bo(Za,c,h,g,j,T),!0;case"mouseover":return gn=bo(gn,c,h,g,j,T),!0;case"pointerover":var I=T.pointerId;return Bs.set(I,bo(Bs.get(I)||null,c,h,g,j,T)),!0;case"gotpointercapture":return I=T.pointerId,Aa.set(I,bo(Aa.get(I)||null,c,h,g,j,T)),!0}return!1}function $i(c){var h=ll(c.target);if(h!==null){var g=ie(h);if(g!==null){if(h=g.tag,h===13){if(h=we(g),h!==null){c.blockedOn=h,Or(c.priority,function(){ot(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Hs(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var g=Lg(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var j=new g.constructor(g.type,g);Ge=j,g.target.dispatchEvent(j),Ge=null}else return h=bd(g),h!==null&&Le(h),c.blockedOn=g,!1;h.shift()}return!0}function id(c,h,g){Hs(c)&&g.delete(h)}function P8(){ra=!1,Ca!==null&&Hs(Ca)&&(Ca=null),Za!==null&&Hs(Za)&&(Za=null),gn!==null&&Hs(gn)&&(gn=null),Bs.forEach(id),Aa.forEach(id)}function od(c,h){c.blockedOn===h&&(c.blockedOn=null,ra||(ra=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,P8)))}function ld(c){function h(T){return od(T,c)}if(0<Ha.length){od(Ha[0],c);for(var g=1;g<Ha.length;g++){var j=Ha[g];j.blockedOn===c&&(j.blockedOn=null)}}for(Ca!==null&&od(Ca,c),Za!==null&&od(Za,c),gn!==null&&od(gn,c),Bs.forEach(h),Aa.forEach(h),g=0;g<Us.length;g++)j=Us[g],j.blockedOn===c&&(j.blockedOn=null);for(;0<Us.length&&(g=Us[0],g.blockedOn===null);)$i(g),g.blockedOn===null&&Us.shift()}var fc=P.ReactCurrentBatchConfig,Uf=!0;function I8(c,h,g,j){var T=xt,I=fc.transition;fc.transition=null;try{xt=1,$g(c,h,g,j)}finally{xt=T,fc.transition=I}}function D8(c,h,g,j){var T=xt,I=fc.transition;fc.transition=null;try{xt=4,$g(c,h,g,j)}finally{xt=T,fc.transition=I}}function $g(c,h,g,j){if(Uf){var T=Lg(c,h,g,j);if(T===null)rx(c,h,j,Hf,g),sd(c,j);else if(Fi(T,c,h,g,j))j.stopPropagation();else if(sd(c,j),h&4&&-1<Bf.indexOf(c)){for(;T!==null;){var I=bd(T);if(I!==null&&dr(I),I=Lg(c,h,g,j),I===null&&rx(c,h,j,Hf,g),I===T)break;T=I}T!==null&&j.stopPropagation()}else rx(c,h,j,null,g)}}var Hf=null;function Lg(c,h,g,j){if(Hf=null,c=Et(j),c=ll(c),c!==null)if(h=ie(c),h===null)c=null;else if(g=h.tag,g===13){if(c=we(h),c!==null)return c;c=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Hf=c,null}function $k(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ut()){case Tr:return 1;case Rr:return 4;case Lr:case rn:return 16;case $s:return 536870912;default:return 16}default:return 16}}var wo=null,Bg=null,qf=null;function Lk(){if(qf)return qf;var c,h=Bg,g=h.length,j,T="value"in wo?wo.value:wo.textContent,I=T.length;for(c=0;c<g&&h[c]===T[c];c++);var G=g-c;for(j=1;j<=G&&h[g-j]===T[I-j];j++);return qf=T.slice(c,1<j?1-j:void 0)}function zf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Wf(){return!0}function Bk(){return!1}function es(c){function h(g,j,T,I,G){this._reactName=g,this._targetInst=T,this.type=j,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(g=c[de],this[de]=g?g(I):I[de]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Wf:Bk,this.isPropagationStopped=Bk,this}return oe(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Wf)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Wf)},persist:function(){},isPersistent:Wf}),h}var pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=es(pc),cd=oe({},pc,{view:0,detail:0}),M8=es(cd),Hg,qg,ud,Kf=oe({},cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wg,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ud&&(ud&&c.type==="mousemove"?(Hg=c.screenX-ud.screenX,qg=c.screenY-ud.screenY):qg=Hg=0,ud=c),Hg)},movementY:function(c){return"movementY"in c?c.movementY:qg}}),Uk=es(Kf),R8=oe({},Kf,{dataTransfer:0}),F8=es(R8),$8=oe({},cd,{relatedTarget:0}),zg=es($8),L8=oe({},pc,{animationName:0,elapsedTime:0,pseudoElement:0}),B8=es(L8),U8=oe({},pc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),H8=es(U8),q8=oe({},pc,{data:0}),Hk=es(q8),z8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V8(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=K8[c])?!!h[c]:!1}function Wg(){return V8}var G8=oe({},cd,{key:function(c){if(c.key){var h=z8[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=zf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?W8[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wg,charCode:function(c){return c.type==="keypress"?zf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?zf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Y8=es(G8),X8=oe({},Kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qk=es(X8),J8=oe({},cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wg}),Q8=es(J8),Z8=oe({},pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),eL=es(Z8),tL=oe({},Kf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),rL=es(tL),nL=[9,13,27,32],Kg=l&&"CompositionEvent"in window,dd=null;l&&"documentMode"in document&&(dd=document.documentMode);var aL=l&&"TextEvent"in window&&!dd,zk=l&&(!Kg||dd&&8<dd&&11>=dd),Wk=" ",Kk=!1;function Vk(c,h){switch(c){case"keyup":return nL.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gk(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var mc=!1;function sL(c,h){switch(c){case"compositionend":return Gk(h);case"keypress":return h.which!==32?null:(Kk=!0,Wk);case"textInput":return c=h.data,c===Wk&&Kk?null:c;default:return null}}function iL(c,h){if(mc)return c==="compositionend"||!Kg&&Vk(c,h)?(c=Lk(),qf=Bg=wo=null,mc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return zk&&h.locale!=="ko"?null:h.data;default:return null}}var oL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yk(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!oL[c.type]:h==="textarea"}function Xk(c,h,g,j){mt(j),h=Jf(h,"onChange"),0<h.length&&(g=new Ug("onChange","change",null,g,j),c.push({event:g,listeners:h}))}var hd=null,fd=null;function lL(c){pS(c,0)}function Vf(c){var h=bc(c);if(q(h))return c}function cL(c,h){if(c==="change")return h}var Jk=!1;if(l){var Vg;if(l){var Gg="oninput"in document;if(!Gg){var Qk=document.createElement("div");Qk.setAttribute("oninput","return;"),Gg=typeof Qk.oninput=="function"}Vg=Gg}else Vg=!1;Jk=Vg&&(!document.documentMode||9<document.documentMode)}function Zk(){hd&&(hd.detachEvent("onpropertychange",eS),fd=hd=null)}function eS(c){if(c.propertyName==="value"&&Vf(fd)){var h=[];Xk(h,fd,c,Et(c)),Sr(lL,h)}}function uL(c,h,g){c==="focusin"?(Zk(),hd=h,fd=g,hd.attachEvent("onpropertychange",eS)):c==="focusout"&&Zk()}function dL(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Vf(fd)}function hL(c,h){if(c==="click")return Vf(h)}function fL(c,h){if(c==="input"||c==="change")return Vf(h)}function pL(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var qs=typeof Object.is=="function"?Object.is:pL;function pd(c,h){if(qs(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),j=Object.keys(h);if(g.length!==j.length)return!1;for(j=0;j<g.length;j++){var T=g[j];if(!u.call(h,T)||!qs(c[T],h[T]))return!1}return!0}function tS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function rS(c,h){var g=tS(c);c=0;for(var j;g;){if(g.nodeType===3){if(j=c+g.textContent.length,c<=h&&j>=h)return{node:g,offset:h-c};c=j}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=tS(g)}}function nS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?nS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function aS(){for(var c=window,h=Ne();h instanceof c.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)c=h.contentWindow;else break;h=Ne(c.document)}return h}function Yg(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function mL(c){var h=aS(),g=c.focusedElem,j=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&nS(g.ownerDocument.documentElement,g)){if(j!==null&&Yg(g)){if(h=j.start,c=j.end,c===void 0&&(c=h),"selectionStart"in g)g.selectionStart=h,g.selectionEnd=Math.min(c,g.value.length);else if(c=(h=g.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var T=g.textContent.length,I=Math.min(j.start,T);j=j.end===void 0?I:Math.min(j.end,T),!c.extend&&I>j&&(T=j,j=I,I=T),T=rS(g,I);var G=rS(g,j);T&&G&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(h=h.createRange(),h.setStart(T.node,T.offset),c.removeAllRanges(),I>j?(c.addRange(h),c.extend(G.node,G.offset)):(h.setEnd(G.node,G.offset),c.addRange(h)))}}for(h=[],c=g;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<h.length;g++)c=h[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var gL=l&&"documentMode"in document&&11>=document.documentMode,gc=null,Xg=null,md=null,Jg=!1;function sS(c,h,g){var j=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Jg||gc==null||gc!==Ne(j)||(j=gc,"selectionStart"in j&&Yg(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),md&&pd(md,j)||(md=j,j=Jf(Xg,"onSelect"),0<j.length&&(h=new Ug("onSelect","select",null,h,g),c.push({event:h,listeners:j}),h.target=gc)))}function Gf(c,h){var g={};return g[c.toLowerCase()]=h.toLowerCase(),g["Webkit"+c]="webkit"+h,g["Moz"+c]="moz"+h,g}var xc={animationend:Gf("Animation","AnimationEnd"),animationiteration:Gf("Animation","AnimationIteration"),animationstart:Gf("Animation","AnimationStart"),transitionend:Gf("Transition","TransitionEnd")},Qg={},iS={};l&&(iS=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function Yf(c){if(Qg[c])return Qg[c];if(!xc[c])return c;var h=xc[c],g;for(g in h)if(h.hasOwnProperty(g)&&g in iS)return Qg[c]=h[g];return c}var oS=Yf("animationend"),lS=Yf("animationiteration"),cS=Yf("animationstart"),uS=Yf("transitionend"),dS=new Map,hS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(c,h){dS.set(c,h),i(h,[c])}for(var Zg=0;Zg<hS.length;Zg++){var ex=hS[Zg],xL=ex.toLowerCase(),yL=ex[0].toUpperCase()+ex.slice(1);jo(xL,"on"+yL)}jo(oS,"onAnimationEnd"),jo(lS,"onAnimationIteration"),jo(cS,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(uS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vL=new Set("cancel close invalid load scroll toggle".split(" ").concat(gd));function fS(c,h,g){var j=c.type||"unknown-event";c.currentTarget=g,te(j,h,void 0,c),c.currentTarget=null}function pS(c,h){h=(h&4)!==0;for(var g=0;g<c.length;g++){var j=c[g],T=j.event;j=j.listeners;e:{var I=void 0;if(h)for(var G=j.length-1;0<=G;G--){var de=j[G],pe=de.instance,Re=de.currentTarget;if(de=de.listener,pe!==I&&T.isPropagationStopped())break e;fS(T,de,Re),I=pe}else for(G=0;G<j.length;G++){if(de=j[G],pe=de.instance,Re=de.currentTarget,de=de.listener,pe!==I&&T.isPropagationStopped())break e;fS(T,de,Re),I=pe}}}if(B)throw c=z,B=!1,z=null,c}function Jr(c,h){var g=h[lx];g===void 0&&(g=h[lx]=new Set);var j=c+"__bubble";g.has(j)||(mS(h,c,2,!1),g.add(j))}function tx(c,h,g){var j=0;h&&(j|=4),mS(g,c,j,h)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function xd(c){if(!c[Xf]){c[Xf]=!0,n.forEach(function(g){g!=="selectionchange"&&(vL.has(g)||tx(g,!1,c),tx(g,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Xf]||(h[Xf]=!0,tx("selectionchange",!1,h))}}function mS(c,h,g,j){switch($k(h)){case 1:var T=I8;break;case 4:T=D8;break;default:T=$g}g=T.bind(null,h,g,c),T=void 0,!sr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(T=!0),j?T!==void 0?c.addEventListener(h,g,{capture:!0,passive:T}):c.addEventListener(h,g,!0):T!==void 0?c.addEventListener(h,g,{passive:T}):c.addEventListener(h,g,!1)}function rx(c,h,g,j,T){var I=j;if((h&1)===0&&(h&2)===0&&j!==null)e:for(;;){if(j===null)return;var G=j.tag;if(G===3||G===4){var de=j.stateNode.containerInfo;if(de===T||de.nodeType===8&&de.parentNode===T)break;if(G===4)for(G=j.return;G!==null;){var pe=G.tag;if((pe===3||pe===4)&&(pe=G.stateNode.containerInfo,pe===T||pe.nodeType===8&&pe.parentNode===T))return;G=G.return}for(;de!==null;){if(G=ll(de),G===null)return;if(pe=G.tag,pe===5||pe===6){j=I=G;continue e}de=de.parentNode}}j=j.return}Sr(function(){var Re=I,Ze=Et(g),rt=[];e:{var Je=dS.get(c);if(Je!==void 0){var jt=Ug,Ct=c;switch(c){case"keypress":if(zf(g)===0)break e;case"keydown":case"keyup":jt=Y8;break;case"focusin":Ct="focus",jt=zg;break;case"focusout":Ct="blur",jt=zg;break;case"beforeblur":case"afterblur":jt=zg;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Uk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=F8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Q8;break;case oS:case lS:case cS:jt=B8;break;case uS:jt=eL;break;case"scroll":jt=M8;break;case"wheel":jt=rL;break;case"copy":case"cut":case"paste":jt=H8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=qk}var Dt=(h&4)!==0,xn=!Dt&&c==="scroll",Te=Dt?Je!==null?Je+"Capture":null:Je;Dt=[];for(var be=Re,Ae;be!==null;){Ae=be;var it=Ae.stateNode;if(Ae.tag===5&&it!==null&&(Ae=it,Te!==null&&(it=ht(be,Te),it!=null&&Dt.push(yd(be,it,Ae)))),xn)break;be=be.return}0<Dt.length&&(Je=new jt(Je,Ct,null,g,Ze),rt.push({event:Je,listeners:Dt}))}}if((h&7)===0){e:{if(Je=c==="mouseover"||c==="pointerover",jt=c==="mouseout"||c==="pointerout",Je&&g!==Ge&&(Ct=g.relatedTarget||g.fromElement)&&(ll(Ct)||Ct[Li]))break e;if((jt||Je)&&(Je=Ze.window===Ze?Ze:(Je=Ze.ownerDocument)?Je.defaultView||Je.parentWindow:window,jt?(Ct=g.relatedTarget||g.toElement,jt=Re,Ct=Ct?ll(Ct):null,Ct!==null&&(xn=ie(Ct),Ct!==xn||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(jt=null,Ct=Re),jt!==Ct)){if(Dt=Uk,it="onMouseLeave",Te="onMouseEnter",be="mouse",(c==="pointerout"||c==="pointerover")&&(Dt=qk,it="onPointerLeave",Te="onPointerEnter",be="pointer"),xn=jt==null?Je:bc(jt),Ae=Ct==null?Je:bc(Ct),Je=new Dt(it,be+"leave",jt,g,Ze),Je.target=xn,Je.relatedTarget=Ae,it=null,ll(Ze)===Re&&(Dt=new Dt(Te,be+"enter",Ct,g,Ze),Dt.target=Ae,Dt.relatedTarget=xn,it=Dt),xn=it,jt&&Ct)t:{for(Dt=jt,Te=Ct,be=0,Ae=Dt;Ae;Ae=yc(Ae))be++;for(Ae=0,it=Te;it;it=yc(it))Ae++;for(;0<be-Ae;)Dt=yc(Dt),be--;for(;0<Ae-be;)Te=yc(Te),Ae--;for(;be--;){if(Dt===Te||Te!==null&&Dt===Te.alternate)break t;Dt=yc(Dt),Te=yc(Te)}Dt=null}else Dt=null;jt!==null&&gS(rt,Je,jt,Dt,!1),Ct!==null&&xn!==null&&gS(rt,xn,Ct,Dt,!0)}}e:{if(Je=Re?bc(Re):window,jt=Je.nodeName&&Je.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Je.type==="file")var Rt=cL;else if(Yk(Je))if(Jk)Rt=fL;else{Rt=dL;var zt=uL}else(jt=Je.nodeName)&&jt.toLowerCase()==="input"&&(Je.type==="checkbox"||Je.type==="radio")&&(Rt=hL);if(Rt&&(Rt=Rt(c,Re))){Xk(rt,Rt,g,Ze);break e}zt&&zt(c,Je,Re),c==="focusout"&&(zt=Je._wrapperState)&&zt.controlled&&Je.type==="number"&&ze(Je,"number",Je.value)}switch(zt=Re?bc(Re):window,c){case"focusin":(Yk(zt)||zt.contentEditable==="true")&&(gc=zt,Xg=Re,md=null);break;case"focusout":md=Xg=gc=null;break;case"mousedown":Jg=!0;break;case"contextmenu":case"mouseup":case"dragend":Jg=!1,sS(rt,g,Ze);break;case"selectionchange":if(gL)break;case"keydown":case"keyup":sS(rt,g,Ze)}var Wt;if(Kg)e:{switch(c){case"compositionstart":var er="onCompositionStart";break e;case"compositionend":er="onCompositionEnd";break e;case"compositionupdate":er="onCompositionUpdate";break e}er=void 0}else mc?Vk(c,g)&&(er="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(er="onCompositionStart");er&&(zk&&g.locale!=="ko"&&(mc||er!=="onCompositionStart"?er==="onCompositionEnd"&&mc&&(Wt=Lk()):(wo=Ze,Bg="value"in wo?wo.value:wo.textContent,mc=!0)),zt=Jf(Re,er),0<zt.length&&(er=new Hk(er,c,null,g,Ze),rt.push({event:er,listeners:zt}),Wt?er.data=Wt:(Wt=Gk(g),Wt!==null&&(er.data=Wt)))),(Wt=aL?sL(c,g):iL(c,g))&&(Re=Jf(Re,"onBeforeInput"),0<Re.length&&(Ze=new Hk("onBeforeInput","beforeinput",null,g,Ze),rt.push({event:Ze,listeners:Re}),Ze.data=Wt))}pS(rt,h)})}function yd(c,h,g){return{instance:c,listener:h,currentTarget:g}}function Jf(c,h){for(var g=h+"Capture",j=[];c!==null;){var T=c,I=T.stateNode;T.tag===5&&I!==null&&(T=I,I=ht(c,g),I!=null&&j.unshift(yd(c,I,T)),I=ht(c,h),I!=null&&j.push(yd(c,I,T))),c=c.return}return j}function yc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function gS(c,h,g,j,T){for(var I=h._reactName,G=[];g!==null&&g!==j;){var de=g,pe=de.alternate,Re=de.stateNode;if(pe!==null&&pe===j)break;de.tag===5&&Re!==null&&(de=Re,T?(pe=ht(g,I),pe!=null&&G.unshift(yd(g,pe,de))):T||(pe=ht(g,I),pe!=null&&G.push(yd(g,pe,de)))),g=g.return}G.length!==0&&c.push({event:h,listeners:G})}var bL=/\r\n?/g,wL=/\u0000|\uFFFD/g;function xS(c){return(typeof c=="string"?c:""+c).replace(bL,`
`).replace(wL,"")}function Qf(c,h,g){if(h=xS(h),xS(c)!==h&&g)throw Error(r(425))}function Zf(){}var nx=null,ax=null;function sx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,jL=typeof clearTimeout=="function"?clearTimeout:void 0,yS=typeof Promise=="function"?Promise:void 0,NL=typeof queueMicrotask=="function"?queueMicrotask:typeof yS<"u"?function(c){return yS.resolve(null).then(c).catch(kL)}:ix;function kL(c){setTimeout(function(){throw c})}function ox(c,h){var g=h,j=0;do{var T=g.nextSibling;if(c.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(j===0){c.removeChild(T),ld(h);return}j--}else g!=="$"&&g!=="$?"&&g!=="$!"||j++;g=T}while(g);ld(h)}function No(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function vS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(h===0)return c;h--}else g==="/$"&&h++}c=c.previousSibling}return null}var vc=Math.random().toString(36).slice(2),mi="__reactFiber$"+vc,vd="__reactProps$"+vc,Li="__reactContainer$"+vc,lx="__reactEvents$"+vc,SL="__reactListeners$"+vc,_L="__reactHandles$"+vc;function ll(c){var h=c[mi];if(h)return h;for(var g=c.parentNode;g;){if(h=g[Li]||g[mi]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(c=vS(c);c!==null;){if(g=c[mi])return g;c=vS(c)}return h}c=g,g=c.parentNode}return null}function bd(c){return c=c[mi]||c[Li],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function bc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function e0(c){return c[vd]||null}var cx=[],wc=-1;function ko(c){return{current:c}}function Qr(c){0>wc||(c.current=cx[wc],cx[wc]=null,wc--)}function Wr(c,h){wc++,cx[wc]=c.current,c.current=h}var So={},pa=ko(So),qa=ko(!1),cl=So;function jc(c,h){var g=c.type.contextTypes;if(!g)return So;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in g)T[I]=h[I];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function za(c){return c=c.childContextTypes,c!=null}function t0(){Qr(qa),Qr(pa)}function bS(c,h,g){if(pa.current!==So)throw Error(r(168));Wr(pa,h),Wr(qa,g)}function wS(c,h,g){var j=c.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return g;j=j.getChildContext();for(var T in j)if(!(T in h))throw Error(r(108,ge(c)||"Unknown",T));return oe({},g,j)}function r0(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||So,cl=pa.current,Wr(pa,c),Wr(qa,qa.current),!0}function jS(c,h,g){var j=c.stateNode;if(!j)throw Error(r(169));g?(c=wS(c,h,cl),j.__reactInternalMemoizedMergedChildContext=c,Qr(qa),Qr(pa),Wr(pa,c)):Qr(qa),Wr(qa,g)}var Bi=null,n0=!1,ux=!1;function NS(c){Bi===null?Bi=[c]:Bi.push(c)}function EL(c){n0=!0,NS(c)}function _o(){if(!ux&&Bi!==null){ux=!0;var c=0,h=xt;try{var g=Bi;for(xt=1;c<g.length;c++){var j=g[c];do j=j(!0);while(j!==null)}Bi=null,n0=!1}catch(T){throw Bi!==null&&(Bi=Bi.slice(c+1)),ve(Tr,_o),T}finally{xt=h,ux=!1}}return null}var Nc=[],kc=0,a0=null,s0=0,ys=[],vs=0,ul=null,Ui=1,Hi="";function dl(c,h){Nc[kc++]=s0,Nc[kc++]=a0,a0=c,s0=h}function kS(c,h,g){ys[vs++]=Ui,ys[vs++]=Hi,ys[vs++]=ul,ul=c;var j=Ui;c=Hi;var T=32-X(j)-1;j&=~(1<<T),g+=1;var I=32-X(h)+T;if(30<I){var G=T-T%5;I=(j&(1<<G)-1).toString(32),j>>=G,T-=G,Ui=1<<32-X(h)+T|g<<T|j,Hi=I+c}else Ui=1<<I|g<<T|j,Hi=c}function dx(c){c.return!==null&&(dl(c,1),kS(c,1,0))}function hx(c){for(;c===a0;)a0=Nc[--kc],Nc[kc]=null,s0=Nc[--kc],Nc[kc]=null;for(;c===ul;)ul=ys[--vs],ys[vs]=null,Hi=ys[--vs],ys[vs]=null,Ui=ys[--vs],ys[vs]=null}var ts=null,rs=null,nn=!1,zs=null;function SS(c,h){var g=Ns(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=c,h=c.deletions,h===null?(c.deletions=[g],c.flags|=16):h.push(g)}function _S(c,h){switch(c.tag){case 5:var g=c.type;return h=h.nodeType!==1||g.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,ts=c,rs=No(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,ts=c,rs=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(g=ul!==null?{id:Ui,overflow:Hi}:null,c.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Ns(18,null,null,0),g.stateNode=h,g.return=c,c.child=g,ts=c,rs=null,!0):!1;default:return!1}}function fx(c){return(c.mode&1)!==0&&(c.flags&128)===0}function px(c){if(nn){var h=rs;if(h){var g=h;if(!_S(c,h)){if(fx(c))throw Error(r(418));h=No(g.nextSibling);var j=ts;h&&_S(c,h)?SS(j,g):(c.flags=c.flags&-4097|2,nn=!1,ts=c)}}else{if(fx(c))throw Error(r(418));c.flags=c.flags&-4097|2,nn=!1,ts=c}}}function ES(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ts=c}function i0(c){if(c!==ts)return!1;if(!nn)return ES(c),nn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!sx(c.type,c.memoizedProps)),h&&(h=rs)){if(fx(c))throw TS(),Error(r(418));for(;h;)SS(c,h),h=No(h.nextSibling)}if(ES(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(h===0){rs=No(c.nextSibling);break e}h--}else g!=="$"&&g!=="$!"&&g!=="$?"||h++}c=c.nextSibling}rs=null}}else rs=ts?No(c.stateNode.nextSibling):null;return!0}function TS(){for(var c=rs;c;)c=No(c.nextSibling)}function Sc(){rs=ts=null,nn=!1}function mx(c){zs===null?zs=[c]:zs.push(c)}var TL=P.ReactCurrentBatchConfig;function wd(c,h,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var j=g.stateNode}if(!j)throw Error(r(147,c));var T=j,I=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(G){var de=T.refs;G===null?delete de[I]:de[I]=G},h._stringRef=I,h)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function o0(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function CS(c){var h=c._init;return h(c._payload)}function AS(c){function h(Te,be){if(c){var Ae=Te.deletions;Ae===null?(Te.deletions=[be],Te.flags|=16):Ae.push(be)}}function g(Te,be){if(!c)return null;for(;be!==null;)h(Te,be),be=be.sibling;return null}function j(Te,be){for(Te=new Map;be!==null;)be.key!==null?Te.set(be.key,be):Te.set(be.index,be),be=be.sibling;return Te}function T(Te,be){return Te=Do(Te,be),Te.index=0,Te.sibling=null,Te}function I(Te,be,Ae){return Te.index=Ae,c?(Ae=Te.alternate,Ae!==null?(Ae=Ae.index,Ae<be?(Te.flags|=2,be):Ae):(Te.flags|=2,be)):(Te.flags|=1048576,be)}function G(Te){return c&&Te.alternate===null&&(Te.flags|=2),Te}function de(Te,be,Ae,it){return be===null||be.tag!==6?(be=iy(Ae,Te.mode,it),be.return=Te,be):(be=T(be,Ae),be.return=Te,be)}function pe(Te,be,Ae,it){var Rt=Ae.type;return Rt===E?Ze(Te,be,Ae.props.children,it,Ae.key):be!==null&&(be.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===Z&&CS(Rt)===be.type)?(it=T(be,Ae.props),it.ref=wd(Te,be,Ae),it.return=Te,it):(it=O0(Ae.type,Ae.key,Ae.props,null,Te.mode,it),it.ref=wd(Te,be,Ae),it.return=Te,it)}function Re(Te,be,Ae,it){return be===null||be.tag!==4||be.stateNode.containerInfo!==Ae.containerInfo||be.stateNode.implementation!==Ae.implementation?(be=oy(Ae,Te.mode,it),be.return=Te,be):(be=T(be,Ae.children||[]),be.return=Te,be)}function Ze(Te,be,Ae,it,Rt){return be===null||be.tag!==7?(be=vl(Ae,Te.mode,it,Rt),be.return=Te,be):(be=T(be,Ae),be.return=Te,be)}function rt(Te,be,Ae){if(typeof be=="string"&&be!==""||typeof be=="number")return be=iy(""+be,Te.mode,Ae),be.return=Te,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case S:return Ae=O0(be.type,be.key,be.props,null,Te.mode,Ae),Ae.ref=wd(Te,null,be),Ae.return=Te,Ae;case _:return be=oy(be,Te.mode,Ae),be.return=Te,be;case Z:var it=be._init;return rt(Te,it(be._payload),Ae)}if(Ee(be)||U(be))return be=vl(be,Te.mode,Ae,null),be.return=Te,be;o0(Te,be)}return null}function Je(Te,be,Ae,it){var Rt=be!==null?be.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Rt!==null?null:de(Te,be,""+Ae,it);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:return Ae.key===Rt?pe(Te,be,Ae,it):null;case _:return Ae.key===Rt?Re(Te,be,Ae,it):null;case Z:return Rt=Ae._init,Je(Te,be,Rt(Ae._payload),it)}if(Ee(Ae)||U(Ae))return Rt!==null?null:Ze(Te,be,Ae,it,null);o0(Te,Ae)}return null}function jt(Te,be,Ae,it,Rt){if(typeof it=="string"&&it!==""||typeof it=="number")return Te=Te.get(Ae)||null,de(be,Te,""+it,Rt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case S:return Te=Te.get(it.key===null?Ae:it.key)||null,pe(be,Te,it,Rt);case _:return Te=Te.get(it.key===null?Ae:it.key)||null,Re(be,Te,it,Rt);case Z:var zt=it._init;return jt(Te,be,Ae,zt(it._payload),Rt)}if(Ee(it)||U(it))return Te=Te.get(Ae)||null,Ze(be,Te,it,Rt,null);o0(be,it)}return null}function Ct(Te,be,Ae,it){for(var Rt=null,zt=null,Wt=be,er=be=0,Gn=null;Wt!==null&&er<Ae.length;er++){Wt.index>er?(Gn=Wt,Wt=null):Gn=Wt.sibling;var _r=Je(Te,Wt,Ae[er],it);if(_r===null){Wt===null&&(Wt=Gn);break}c&&Wt&&_r.alternate===null&&h(Te,Wt),be=I(_r,be,er),zt===null?Rt=_r:zt.sibling=_r,zt=_r,Wt=Gn}if(er===Ae.length)return g(Te,Wt),nn&&dl(Te,er),Rt;if(Wt===null){for(;er<Ae.length;er++)Wt=rt(Te,Ae[er],it),Wt!==null&&(be=I(Wt,be,er),zt===null?Rt=Wt:zt.sibling=Wt,zt=Wt);return nn&&dl(Te,er),Rt}for(Wt=j(Te,Wt);er<Ae.length;er++)Gn=jt(Wt,Te,er,Ae[er],it),Gn!==null&&(c&&Gn.alternate!==null&&Wt.delete(Gn.key===null?er:Gn.key),be=I(Gn,be,er),zt===null?Rt=Gn:zt.sibling=Gn,zt=Gn);return c&&Wt.forEach(function(Mo){return h(Te,Mo)}),nn&&dl(Te,er),Rt}function Dt(Te,be,Ae,it){var Rt=U(Ae);if(typeof Rt!="function")throw Error(r(150));if(Ae=Rt.call(Ae),Ae==null)throw Error(r(151));for(var zt=Rt=null,Wt=be,er=be=0,Gn=null,_r=Ae.next();Wt!==null&&!_r.done;er++,_r=Ae.next()){Wt.index>er?(Gn=Wt,Wt=null):Gn=Wt.sibling;var Mo=Je(Te,Wt,_r.value,it);if(Mo===null){Wt===null&&(Wt=Gn);break}c&&Wt&&Mo.alternate===null&&h(Te,Wt),be=I(Mo,be,er),zt===null?Rt=Mo:zt.sibling=Mo,zt=Mo,Wt=Gn}if(_r.done)return g(Te,Wt),nn&&dl(Te,er),Rt;if(Wt===null){for(;!_r.done;er++,_r=Ae.next())_r=rt(Te,_r.value,it),_r!==null&&(be=I(_r,be,er),zt===null?Rt=_r:zt.sibling=_r,zt=_r);return nn&&dl(Te,er),Rt}for(Wt=j(Te,Wt);!_r.done;er++,_r=Ae.next())_r=jt(Wt,Te,er,_r.value,it),_r!==null&&(c&&_r.alternate!==null&&Wt.delete(_r.key===null?er:_r.key),be=I(_r,be,er),zt===null?Rt=_r:zt.sibling=_r,zt=_r);return c&&Wt.forEach(function(o7){return h(Te,o7)}),nn&&dl(Te,er),Rt}function xn(Te,be,Ae,it){if(typeof Ae=="object"&&Ae!==null&&Ae.type===E&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:e:{for(var Rt=Ae.key,zt=be;zt!==null;){if(zt.key===Rt){if(Rt=Ae.type,Rt===E){if(zt.tag===7){g(Te,zt.sibling),be=T(zt,Ae.props.children),be.return=Te,Te=be;break e}}else if(zt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===Z&&CS(Rt)===zt.type){g(Te,zt.sibling),be=T(zt,Ae.props),be.ref=wd(Te,zt,Ae),be.return=Te,Te=be;break e}g(Te,zt);break}else h(Te,zt);zt=zt.sibling}Ae.type===E?(be=vl(Ae.props.children,Te.mode,it,Ae.key),be.return=Te,Te=be):(it=O0(Ae.type,Ae.key,Ae.props,null,Te.mode,it),it.ref=wd(Te,be,Ae),it.return=Te,Te=it)}return G(Te);case _:e:{for(zt=Ae.key;be!==null;){if(be.key===zt)if(be.tag===4&&be.stateNode.containerInfo===Ae.containerInfo&&be.stateNode.implementation===Ae.implementation){g(Te,be.sibling),be=T(be,Ae.children||[]),be.return=Te,Te=be;break e}else{g(Te,be);break}else h(Te,be);be=be.sibling}be=oy(Ae,Te.mode,it),be.return=Te,Te=be}return G(Te);case Z:return zt=Ae._init,xn(Te,be,zt(Ae._payload),it)}if(Ee(Ae))return Ct(Te,be,Ae,it);if(U(Ae))return Dt(Te,be,Ae,it);o0(Te,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"?(Ae=""+Ae,be!==null&&be.tag===6?(g(Te,be.sibling),be=T(be,Ae),be.return=Te,Te=be):(g(Te,be),be=iy(Ae,Te.mode,it),be.return=Te,Te=be),G(Te)):g(Te,be)}return xn}var _c=AS(!0),OS=AS(!1),l0=ko(null),c0=null,Ec=null,gx=null;function xx(){gx=Ec=c0=null}function yx(c){var h=l0.current;Qr(l0),c._currentValue=h}function vx(c,h,g){for(;c!==null;){var j=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),c===g)break;c=c.return}}function Tc(c,h){c0=c,gx=Ec=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(Wa=!0),c.firstContext=null)}function bs(c){var h=c._currentValue;if(gx!==c)if(c={context:c,memoizedValue:h,next:null},Ec===null){if(c0===null)throw Error(r(308));Ec=c,c0.dependencies={lanes:0,firstContext:c}}else Ec=Ec.next=c;return h}var hl=null;function bx(c){hl===null?hl=[c]:hl.push(c)}function PS(c,h,g,j){var T=h.interleaved;return T===null?(g.next=g,bx(h)):(g.next=T.next,T.next=g),h.interleaved=g,qi(c,j)}function qi(c,h){c.lanes|=h;var g=c.alternate;for(g!==null&&(g.lanes|=h),g=c,c=c.return;c!==null;)c.childLanes|=h,g=c.alternate,g!==null&&(g.childLanes|=h),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Eo=!1;function wx(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IS(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function zi(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function To(c,h,g){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(jr&2)!==0){var T=j.pending;return T===null?h.next=h:(h.next=T.next,T.next=h),j.pending=h,qi(c,g)}return T=j.interleaved,T===null?(h.next=h,bx(j)):(h.next=T.next,T.next=h),j.interleaved=h,qi(c,g)}function u0(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var j=h.lanes;j&=c.pendingLanes,g|=j,h.lanes=g,Bt(c,g)}}function DS(c,h){var g=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,g===j)){var T=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var G={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?T=I=G:I=I.next=G,g=g.next}while(g!==null);I===null?T=I=h:I=I.next=h}else T=I=h;g={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:j.shared,effects:j.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}function d0(c,h,g,j){var T=c.updateQueue;Eo=!1;var I=T.firstBaseUpdate,G=T.lastBaseUpdate,de=T.shared.pending;if(de!==null){T.shared.pending=null;var pe=de,Re=pe.next;pe.next=null,G===null?I=Re:G.next=Re,G=pe;var Ze=c.alternate;Ze!==null&&(Ze=Ze.updateQueue,de=Ze.lastBaseUpdate,de!==G&&(de===null?Ze.firstBaseUpdate=Re:de.next=Re,Ze.lastBaseUpdate=pe))}if(I!==null){var rt=T.baseState;G=0,Ze=Re=pe=null,de=I;do{var Je=de.lane,jt=de.eventTime;if((j&Je)===Je){Ze!==null&&(Ze=Ze.next={eventTime:jt,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var Ct=c,Dt=de;switch(Je=h,jt=g,Dt.tag){case 1:if(Ct=Dt.payload,typeof Ct=="function"){rt=Ct.call(jt,rt,Je);break e}rt=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Dt.payload,Je=typeof Ct=="function"?Ct.call(jt,rt,Je):Ct,Je==null)break e;rt=oe({},rt,Je);break e;case 2:Eo=!0}}de.callback!==null&&de.lane!==0&&(c.flags|=64,Je=T.effects,Je===null?T.effects=[de]:Je.push(de))}else jt={eventTime:jt,lane:Je,tag:de.tag,payload:de.payload,callback:de.callback,next:null},Ze===null?(Re=Ze=jt,pe=rt):Ze=Ze.next=jt,G|=Je;if(de=de.next,de===null){if(de=T.shared.pending,de===null)break;Je=de,de=Je.next,Je.next=null,T.lastBaseUpdate=Je,T.shared.pending=null}}while(!0);if(Ze===null&&(pe=rt),T.baseState=pe,T.firstBaseUpdate=Re,T.lastBaseUpdate=Ze,h=T.shared.interleaved,h!==null){T=h;do G|=T.lane,T=T.next;while(T!==h)}else I===null&&(T.shared.lanes=0);ml|=G,c.lanes=G,c.memoizedState=rt}}function MS(c,h,g){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var j=c[h],T=j.callback;if(T!==null){if(j.callback=null,j=g,typeof T!="function")throw Error(r(191,T));T.call(j)}}}var jd={},gi=ko(jd),Nd=ko(jd),kd=ko(jd);function fl(c){if(c===jd)throw Error(r(174));return c}function jx(c,h){switch(Wr(kd,h),Wr(Nd,c),Wr(gi,jd),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:yt(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=yt(h,c)}Qr(gi),Wr(gi,h)}function Cc(){Qr(gi),Qr(Nd),Qr(kd)}function RS(c){fl(kd.current);var h=fl(gi.current),g=yt(h,c.type);h!==g&&(Wr(Nd,c),Wr(gi,g))}function Nx(c){Nd.current===c&&(Qr(gi),Qr(Nd))}var on=ko(0);function h0(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var kx=[];function Sx(){for(var c=0;c<kx.length;c++)kx[c]._workInProgressVersionPrimary=null;kx.length=0}var f0=P.ReactCurrentDispatcher,_x=P.ReactCurrentBatchConfig,pl=0,ln=null,Dn=null,Kn=null,p0=!1,Sd=!1,_d=0,CL=0;function ma(){throw Error(r(321))}function Ex(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!qs(c[g],h[g]))return!1;return!0}function Tx(c,h,g,j,T,I){if(pl=I,ln=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,f0.current=c===null||c.memoizedState===null?IL:DL,c=g(j,T),Sd){I=0;do{if(Sd=!1,_d=0,25<=I)throw Error(r(301));I+=1,Kn=Dn=null,h.updateQueue=null,f0.current=ML,c=g(j,T)}while(Sd)}if(f0.current=x0,h=Dn!==null&&Dn.next!==null,pl=0,Kn=Dn=ln=null,p0=!1,h)throw Error(r(300));return c}function Cx(){var c=_d!==0;return _d=0,c}function xi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?ln.memoizedState=Kn=c:Kn=Kn.next=c,Kn}function ws(){if(Dn===null){var c=ln.alternate;c=c!==null?c.memoizedState:null}else c=Dn.next;var h=Kn===null?ln.memoizedState:Kn.next;if(h!==null)Kn=h,Dn=c;else{if(c===null)throw Error(r(310));Dn=c,c={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Kn===null?ln.memoizedState=Kn=c:Kn=Kn.next=c}return Kn}function Ed(c,h){return typeof h=="function"?h(c):h}function Ax(c){var h=ws(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var j=Dn,T=j.baseQueue,I=g.pending;if(I!==null){if(T!==null){var G=T.next;T.next=I.next,I.next=G}j.baseQueue=T=I,g.pending=null}if(T!==null){I=T.next,j=j.baseState;var de=G=null,pe=null,Re=I;do{var Ze=Re.lane;if((pl&Ze)===Ze)pe!==null&&(pe=pe.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),j=Re.hasEagerState?Re.eagerState:c(j,Re.action);else{var rt={lane:Ze,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};pe===null?(de=pe=rt,G=j):pe=pe.next=rt,ln.lanes|=Ze,ml|=Ze}Re=Re.next}while(Re!==null&&Re!==I);pe===null?G=j:pe.next=de,qs(j,h.memoizedState)||(Wa=!0),h.memoizedState=j,h.baseState=G,h.baseQueue=pe,g.lastRenderedState=j}if(c=g.interleaved,c!==null){T=c;do I=T.lane,ln.lanes|=I,ml|=I,T=T.next;while(T!==c)}else T===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Ox(c){var h=ws(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var j=g.dispatch,T=g.pending,I=h.memoizedState;if(T!==null){g.pending=null;var G=T=T.next;do I=c(I,G.action),G=G.next;while(G!==T);qs(I,h.memoizedState)||(Wa=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),g.lastRenderedState=I}return[I,j]}function FS(){}function $S(c,h){var g=ln,j=ws(),T=h(),I=!qs(j.memoizedState,T);if(I&&(j.memoizedState=T,Wa=!0),j=j.queue,Px(US.bind(null,g,j,c),[c]),j.getSnapshot!==h||I||Kn!==null&&Kn.memoizedState.tag&1){if(g.flags|=2048,Td(9,BS.bind(null,g,j,T,h),void 0,null),Vn===null)throw Error(r(349));(pl&30)!==0||LS(g,h,T)}return T}function LS(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=ln.updateQueue,h===null?(h={lastEffect:null,stores:null},ln.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function BS(c,h,g,j){h.value=g,h.getSnapshot=j,HS(h)&&qS(c)}function US(c,h,g){return g(function(){HS(h)&&qS(c)})}function HS(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!qs(c,g)}catch{return!0}}function qS(c){var h=qi(c,1);h!==null&&Gs(h,c,1,-1)}function zS(c){var h=xi();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:c},h.queue=c,c=c.dispatch=PL.bind(null,ln,c),[h.memoizedState,c]}function Td(c,h,g,j){return c={tag:c,create:h,destroy:g,deps:j,next:null},h=ln.updateQueue,h===null?(h={lastEffect:null,stores:null},ln.updateQueue=h,h.lastEffect=c.next=c):(g=h.lastEffect,g===null?h.lastEffect=c.next=c:(j=g.next,g.next=c,c.next=j,h.lastEffect=c)),c}function WS(){return ws().memoizedState}function m0(c,h,g,j){var T=xi();ln.flags|=c,T.memoizedState=Td(1|h,g,void 0,j===void 0?null:j)}function g0(c,h,g,j){var T=ws();j=j===void 0?null:j;var I=void 0;if(Dn!==null){var G=Dn.memoizedState;if(I=G.destroy,j!==null&&Ex(j,G.deps)){T.memoizedState=Td(h,g,I,j);return}}ln.flags|=c,T.memoizedState=Td(1|h,g,I,j)}function KS(c,h){return m0(8390656,8,c,h)}function Px(c,h){return g0(2048,8,c,h)}function VS(c,h){return g0(4,2,c,h)}function GS(c,h){return g0(4,4,c,h)}function YS(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function XS(c,h,g){return g=g!=null?g.concat([c]):null,g0(4,4,YS.bind(null,h,c),g)}function Ix(){}function JS(c,h){var g=ws();h=h===void 0?null:h;var j=g.memoizedState;return j!==null&&h!==null&&Ex(h,j[1])?j[0]:(g.memoizedState=[c,h],c)}function QS(c,h){var g=ws();h=h===void 0?null:h;var j=g.memoizedState;return j!==null&&h!==null&&Ex(h,j[1])?j[0]:(c=c(),g.memoizedState=[c,h],c)}function ZS(c,h,g){return(pl&21)===0?(c.baseState&&(c.baseState=!1,Wa=!0),c.memoizedState=g):(qs(g,h)||(g=Pt(),ln.lanes|=g,ml|=g,c.baseState=!0),h)}function AL(c,h){var g=xt;xt=g!==0&&4>g?g:4,c(!0);var j=_x.transition;_x.transition={};try{c(!1),h()}finally{xt=g,_x.transition=j}}function e_(){return ws().memoizedState}function OL(c,h,g){var j=Po(c);if(g={lane:j,action:g,hasEagerState:!1,eagerState:null,next:null},t_(c))r_(h,g);else if(g=PS(c,h,g,j),g!==null){var T=Pa();Gs(g,c,j,T),n_(g,h,j)}}function PL(c,h,g){var j=Po(c),T={lane:j,action:g,hasEagerState:!1,eagerState:null,next:null};if(t_(c))r_(h,T);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var G=h.lastRenderedState,de=I(G,g);if(T.hasEagerState=!0,T.eagerState=de,qs(de,G)){var pe=h.interleaved;pe===null?(T.next=T,bx(h)):(T.next=pe.next,pe.next=T),h.interleaved=T;return}}catch{}finally{}g=PS(c,h,T,j),g!==null&&(T=Pa(),Gs(g,c,j,T),n_(g,h,j))}}function t_(c){var h=c.alternate;return c===ln||h!==null&&h===ln}function r_(c,h){Sd=p0=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function n_(c,h,g){if((g&4194240)!==0){var j=h.lanes;j&=c.pendingLanes,g|=j,h.lanes=g,Bt(c,g)}}var x0={readContext:bs,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useInsertionEffect:ma,useLayoutEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useMutableSource:ma,useSyncExternalStore:ma,useId:ma,unstable_isNewReconciler:!1},IL={readContext:bs,useCallback:function(c,h){return xi().memoizedState=[c,h===void 0?null:h],c},useContext:bs,useEffect:KS,useImperativeHandle:function(c,h,g){return g=g!=null?g.concat([c]):null,m0(4194308,4,YS.bind(null,h,c),g)},useLayoutEffect:function(c,h){return m0(4194308,4,c,h)},useInsertionEffect:function(c,h){return m0(4,2,c,h)},useMemo:function(c,h){var g=xi();return h=h===void 0?null:h,c=c(),g.memoizedState=[c,h],c},useReducer:function(c,h,g){var j=xi();return h=g!==void 0?g(h):h,j.memoizedState=j.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},j.queue=c,c=c.dispatch=OL.bind(null,ln,c),[j.memoizedState,c]},useRef:function(c){var h=xi();return c={current:c},h.memoizedState=c},useState:zS,useDebugValue:Ix,useDeferredValue:function(c){return xi().memoizedState=c},useTransition:function(){var c=zS(!1),h=c[0];return c=AL.bind(null,c[1]),xi().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,g){var j=ln,T=xi();if(nn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Vn===null)throw Error(r(349));(pl&30)!==0||LS(j,h,g)}T.memoizedState=g;var I={value:g,getSnapshot:h};return T.queue=I,KS(US.bind(null,j,I,c),[c]),j.flags|=2048,Td(9,BS.bind(null,j,I,g,h),void 0,null),g},useId:function(){var c=xi(),h=Vn.identifierPrefix;if(nn){var g=Hi,j=Ui;g=(j&~(1<<32-X(j)-1)).toString(32)+g,h=":"+h+"R"+g,g=_d++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=CL++,h=":"+h+"r"+g.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},DL={readContext:bs,useCallback:JS,useContext:bs,useEffect:Px,useImperativeHandle:XS,useInsertionEffect:VS,useLayoutEffect:GS,useMemo:QS,useReducer:Ax,useRef:WS,useState:function(){return Ax(Ed)},useDebugValue:Ix,useDeferredValue:function(c){var h=ws();return ZS(h,Dn.memoizedState,c)},useTransition:function(){var c=Ax(Ed)[0],h=ws().memoizedState;return[c,h]},useMutableSource:FS,useSyncExternalStore:$S,useId:e_,unstable_isNewReconciler:!1},ML={readContext:bs,useCallback:JS,useContext:bs,useEffect:Px,useImperativeHandle:XS,useInsertionEffect:VS,useLayoutEffect:GS,useMemo:QS,useReducer:Ox,useRef:WS,useState:function(){return Ox(Ed)},useDebugValue:Ix,useDeferredValue:function(c){var h=ws();return Dn===null?h.memoizedState=c:ZS(h,Dn.memoizedState,c)},useTransition:function(){var c=Ox(Ed)[0],h=ws().memoizedState;return[c,h]},useMutableSource:FS,useSyncExternalStore:$S,useId:e_,unstable_isNewReconciler:!1};function Ws(c,h){if(c&&c.defaultProps){h=oe({},h),c=c.defaultProps;for(var g in c)h[g]===void 0&&(h[g]=c[g]);return h}return h}function Dx(c,h,g,j){h=c.memoizedState,g=g(j,h),g=g==null?h:oe({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var y0={isMounted:function(c){return(c=c._reactInternals)?ie(c)===c:!1},enqueueSetState:function(c,h,g){c=c._reactInternals;var j=Pa(),T=Po(c),I=zi(j,T);I.payload=h,g!=null&&(I.callback=g),h=To(c,I,T),h!==null&&(Gs(h,c,T,j),u0(h,c,T))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var j=Pa(),T=Po(c),I=zi(j,T);I.tag=1,I.payload=h,g!=null&&(I.callback=g),h=To(c,I,T),h!==null&&(Gs(h,c,T,j),u0(h,c,T))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=Pa(),j=Po(c),T=zi(g,j);T.tag=2,h!=null&&(T.callback=h),h=To(c,T,j),h!==null&&(Gs(h,c,j,g),u0(h,c,j))}};function a_(c,h,g,j,T,I,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,I,G):h.prototype&&h.prototype.isPureReactComponent?!pd(g,j)||!pd(T,I):!0}function s_(c,h,g){var j=!1,T=So,I=h.contextType;return typeof I=="object"&&I!==null?I=bs(I):(T=za(h)?cl:pa.current,j=h.contextTypes,I=(j=j!=null)?jc(c,T):So),h=new h(g,I),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=y0,c.stateNode=h,h._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=I),h}function i_(c,h,g,j){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,j),h.state!==c&&y0.enqueueReplaceState(h,h.state,null)}function Mx(c,h,g,j){var T=c.stateNode;T.props=g,T.state=c.memoizedState,T.refs={},wx(c);var I=h.contextType;typeof I=="object"&&I!==null?T.context=bs(I):(I=za(h)?cl:pa.current,T.context=jc(c,I)),T.state=c.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(Dx(c,h,I,g),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&y0.enqueueReplaceState(T,T.state,null),d0(c,g,T,j),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function Ac(c,h){try{var g="",j=h;do g+=se(j),j=j.return;while(j);var T=g}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:h,stack:T,digest:null}}function Rx(c,h,g){return{value:c,source:null,stack:g??null,digest:h??null}}function Fx(c,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var RL=typeof WeakMap=="function"?WeakMap:Map;function o_(c,h,g){g=zi(-1,g),g.tag=3,g.payload={element:null};var j=h.value;return g.callback=function(){S0||(S0=!0,Qx=j),Fx(c,h)},g}function l_(c,h,g){g=zi(-1,g),g.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var T=h.value;g.payload=function(){return j(T)},g.callback=function(){Fx(c,h)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){Fx(c,h),typeof j!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),g}function c_(c,h,g){var j=c.pingCache;if(j===null){j=c.pingCache=new RL;var T=new Set;j.set(h,T)}else T=j.get(h),T===void 0&&(T=new Set,j.set(h,T));T.has(g)||(T.add(g),c=XL.bind(null,c,h,g),h.then(c,c))}function u_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function d_(c,h,g,j,T){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=zi(-1,1),h.tag=2,To(g,h,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var FL=P.ReactCurrentOwner,Wa=!1;function Oa(c,h,g,j){h.child=c===null?OS(h,null,g,j):_c(h,c.child,g,j)}function h_(c,h,g,j,T){g=g.render;var I=h.ref;return Tc(h,T),j=Tx(c,h,g,j,I,T),g=Cx(),c!==null&&!Wa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,Wi(c,h,T)):(nn&&g&&dx(h),h.flags|=1,Oa(c,h,j,T),h.child)}function f_(c,h,g,j,T){if(c===null){var I=g.type;return typeof I=="function"&&!sy(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=I,p_(c,h,I,j,T)):(c=O0(g.type,null,j,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(I=c.child,(c.lanes&T)===0){var G=I.memoizedProps;if(g=g.compare,g=g!==null?g:pd,g(G,j)&&c.ref===h.ref)return Wi(c,h,T)}return h.flags|=1,c=Do(I,j),c.ref=h.ref,c.return=h,h.child=c}function p_(c,h,g,j,T){if(c!==null){var I=c.memoizedProps;if(pd(I,j)&&c.ref===h.ref)if(Wa=!1,h.pendingProps=j=I,(c.lanes&T)!==0)(c.flags&131072)!==0&&(Wa=!0);else return h.lanes=c.lanes,Wi(c,h,T)}return $x(c,h,g,j,T)}function m_(c,h,g){var j=h.pendingProps,T=j.children,I=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wr(Pc,ns),ns|=g;else{if((g&1073741824)===0)return c=I!==null?I.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Wr(Pc,ns),ns|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=I!==null?I.baseLanes:g,Wr(Pc,ns),ns|=j}else I!==null?(j=I.baseLanes|g,h.memoizedState=null):j=g,Wr(Pc,ns),ns|=j;return Oa(c,h,T,g),h.child}function g_(c,h){var g=h.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function $x(c,h,g,j,T){var I=za(g)?cl:pa.current;return I=jc(h,I),Tc(h,T),g=Tx(c,h,g,j,I,T),j=Cx(),c!==null&&!Wa?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,Wi(c,h,T)):(nn&&j&&dx(h),h.flags|=1,Oa(c,h,g,T),h.child)}function x_(c,h,g,j,T){if(za(g)){var I=!0;r0(h)}else I=!1;if(Tc(h,T),h.stateNode===null)b0(c,h),s_(h,g,j),Mx(h,g,j,T),j=!0;else if(c===null){var G=h.stateNode,de=h.memoizedProps;G.props=de;var pe=G.context,Re=g.contextType;typeof Re=="object"&&Re!==null?Re=bs(Re):(Re=za(g)?cl:pa.current,Re=jc(h,Re));var Ze=g.getDerivedStateFromProps,rt=typeof Ze=="function"||typeof G.getSnapshotBeforeUpdate=="function";rt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(de!==j||pe!==Re)&&i_(h,G,j,Re),Eo=!1;var Je=h.memoizedState;G.state=Je,d0(h,j,G,T),pe=h.memoizedState,de!==j||Je!==pe||qa.current||Eo?(typeof Ze=="function"&&(Dx(h,g,Ze,j),pe=h.memoizedState),(de=Eo||a_(h,g,de,j,Je,pe,Re))?(rt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=pe),G.props=j,G.state=pe,G.context=Re,j=de):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{G=h.stateNode,IS(c,h),de=h.memoizedProps,Re=h.type===h.elementType?de:Ws(h.type,de),G.props=Re,rt=h.pendingProps,Je=G.context,pe=g.contextType,typeof pe=="object"&&pe!==null?pe=bs(pe):(pe=za(g)?cl:pa.current,pe=jc(h,pe));var jt=g.getDerivedStateFromProps;(Ze=typeof jt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(de!==rt||Je!==pe)&&i_(h,G,j,pe),Eo=!1,Je=h.memoizedState,G.state=Je,d0(h,j,G,T);var Ct=h.memoizedState;de!==rt||Je!==Ct||qa.current||Eo?(typeof jt=="function"&&(Dx(h,g,jt,j),Ct=h.memoizedState),(Re=Eo||a_(h,g,Re,j,Je,Ct,pe)||!1)?(Ze||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(j,Ct,pe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(j,Ct,pe)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||de===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=Ct),G.props=j,G.state=Ct,G.context=pe,j=Re):(typeof G.componentDidUpdate!="function"||de===c.memoizedProps&&Je===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&Je===c.memoizedState||(h.flags|=1024),j=!1)}return Lx(c,h,g,j,I,T)}function Lx(c,h,g,j,T,I){g_(c,h);var G=(h.flags&128)!==0;if(!j&&!G)return T&&jS(h,g,!1),Wi(c,h,I);j=h.stateNode,FL.current=h;var de=G&&typeof g.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,c!==null&&G?(h.child=_c(h,c.child,null,I),h.child=_c(h,null,de,I)):Oa(c,h,de,I),h.memoizedState=j.state,T&&jS(h,g,!0),h.child}function y_(c){var h=c.stateNode;h.pendingContext?bS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&bS(c,h.context,!1),jx(c,h.containerInfo)}function v_(c,h,g,j,T){return Sc(),mx(T),h.flags|=256,Oa(c,h,g,j),h.child}var Bx={dehydrated:null,treeContext:null,retryLane:0};function Ux(c){return{baseLanes:c,cachePool:null,transitions:null}}function b_(c,h,g){var j=h.pendingProps,T=on.current,I=!1,G=(h.flags&128)!==0,de;if((de=G)||(de=c!==null&&c.memoizedState===null?!1:(T&2)!==0),de?(I=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),Wr(on,T&1),c===null)return px(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(G=j.children,c=j.fallback,I?(j=h.mode,I=h.child,G={mode:"hidden",children:G},(j&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=G):I=P0(G,j,0,null),c=vl(c,j,g,null),I.return=h,c.return=h,I.sibling=c,h.child=I,h.child.memoizedState=Ux(g),h.memoizedState=Bx,c):Hx(h,G));if(T=c.memoizedState,T!==null&&(de=T.dehydrated,de!==null))return $L(c,h,G,j,de,T,g);if(I){I=j.fallback,G=h.mode,T=c.child,de=T.sibling;var pe={mode:"hidden",children:j.children};return(G&1)===0&&h.child!==T?(j=h.child,j.childLanes=0,j.pendingProps=pe,h.deletions=null):(j=Do(T,pe),j.subtreeFlags=T.subtreeFlags&14680064),de!==null?I=Do(de,I):(I=vl(I,G,g,null),I.flags|=2),I.return=h,j.return=h,j.sibling=I,h.child=j,j=I,I=h.child,G=c.child.memoizedState,G=G===null?Ux(g):{baseLanes:G.baseLanes|g,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=c.childLanes&~g,h.memoizedState=Bx,j}return I=c.child,c=I.sibling,j=Do(I,{mode:"visible",children:j.children}),(h.mode&1)===0&&(j.lanes=g),j.return=h,j.sibling=null,c!==null&&(g=h.deletions,g===null?(h.deletions=[c],h.flags|=16):g.push(c)),h.child=j,h.memoizedState=null,j}function Hx(c,h){return h=P0({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function v0(c,h,g,j){return j!==null&&mx(j),_c(h,c.child,null,g),c=Hx(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function $L(c,h,g,j,T,I,G){if(g)return h.flags&256?(h.flags&=-257,j=Rx(Error(r(422))),v0(c,h,G,j)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(I=j.fallback,T=h.mode,j=P0({mode:"visible",children:j.children},T,0,null),I=vl(I,T,G,null),I.flags|=2,j.return=h,I.return=h,j.sibling=I,h.child=j,(h.mode&1)!==0&&_c(h,c.child,null,G),h.child.memoizedState=Ux(G),h.memoizedState=Bx,I);if((h.mode&1)===0)return v0(c,h,G,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var de=j.dgst;return j=de,I=Error(r(419)),j=Rx(I,j,void 0),v0(c,h,G,j)}if(de=(G&c.childLanes)!==0,Wa||de){if(j=Vn,j!==null){switch(G&-G){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|G))!==0?0:T,T!==0&&T!==I.retryLane&&(I.retryLane=T,qi(c,T),Gs(j,c,T,-1))}return ay(),j=Rx(Error(r(421))),v0(c,h,G,j)}return T.data==="$?"?(h.flags|=128,h.child=c.child,h=JL.bind(null,c),T._reactRetry=h,null):(c=I.treeContext,rs=No(T.nextSibling),ts=h,nn=!0,zs=null,c!==null&&(ys[vs++]=Ui,ys[vs++]=Hi,ys[vs++]=ul,Ui=c.id,Hi=c.overflow,ul=h),h=Hx(h,j.children),h.flags|=4096,h)}function w_(c,h,g){c.lanes|=h;var j=c.alternate;j!==null&&(j.lanes|=h),vx(c.return,h,g)}function qx(c,h,g,j,T){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:g,tailMode:T}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=j,I.tail=g,I.tailMode=T)}function j_(c,h,g){var j=h.pendingProps,T=j.revealOrder,I=j.tail;if(Oa(c,h,j.children,g),j=on.current,(j&2)!==0)j=j&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&w_(c,g,h);else if(c.tag===19)w_(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(Wr(on,j),(h.mode&1)===0)h.memoizedState=null;else switch(T){case"forwards":for(g=h.child,T=null;g!==null;)c=g.alternate,c!==null&&h0(c)===null&&(T=g),g=g.sibling;g=T,g===null?(T=h.child,h.child=null):(T=g.sibling,g.sibling=null),qx(h,!1,T,g,I);break;case"backwards":for(g=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&h0(c)===null){h.child=T;break}c=T.sibling,T.sibling=g,g=T,T=c}qx(h,!0,g,null,I);break;case"together":qx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function b0(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function Wi(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),ml|=h.lanes,(g&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,g=Do(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Do(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function LL(c,h,g){switch(h.tag){case 3:y_(h),Sc();break;case 5:RS(h);break;case 1:za(h.type)&&r0(h);break;case 4:jx(h,h.stateNode.containerInfo);break;case 10:var j=h.type._context,T=h.memoizedProps.value;Wr(l0,j._currentValue),j._currentValue=T;break;case 13:if(j=h.memoizedState,j!==null)return j.dehydrated!==null?(Wr(on,on.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?b_(c,h,g):(Wr(on,on.current&1),c=Wi(c,h,g),c!==null?c.sibling:null);Wr(on,on.current&1);break;case 19:if(j=(g&h.childLanes)!==0,(c.flags&128)!==0){if(j)return j_(c,h,g);h.flags|=128}if(T=h.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Wr(on,on.current),j)break;return null;case 22:case 23:return h.lanes=0,m_(c,h,g)}return Wi(c,h,g)}var N_,zx,k_,S_;N_=function(c,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},zx=function(){},k_=function(c,h,g,j){var T=c.memoizedProps;if(T!==j){c=h.stateNode,fl(gi.current);var I=null;switch(g){case"input":T=ae(c,T),j=ae(c,j),I=[];break;case"select":T=oe({},T,{value:void 0}),j=oe({},j,{value:void 0}),I=[];break;case"textarea":T=Nt(c,T),j=Nt(c,j),I=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=Zf)}ut(g,j);var G;g=null;for(Re in T)if(!j.hasOwnProperty(Re)&&T.hasOwnProperty(Re)&&T[Re]!=null)if(Re==="style"){var de=T[Re];for(G in de)de.hasOwnProperty(G)&&(g||(g={}),g[G]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(s.hasOwnProperty(Re)?I||(I=[]):(I=I||[]).push(Re,null));for(Re in j){var pe=j[Re];if(de=T?.[Re],j.hasOwnProperty(Re)&&pe!==de&&(pe!=null||de!=null))if(Re==="style")if(de){for(G in de)!de.hasOwnProperty(G)||pe&&pe.hasOwnProperty(G)||(g||(g={}),g[G]="");for(G in pe)pe.hasOwnProperty(G)&&de[G]!==pe[G]&&(g||(g={}),g[G]=pe[G])}else g||(I||(I=[]),I.push(Re,g)),g=pe;else Re==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,de=de?de.__html:void 0,pe!=null&&de!==pe&&(I=I||[]).push(Re,pe)):Re==="children"?typeof pe!="string"&&typeof pe!="number"||(I=I||[]).push(Re,""+pe):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(s.hasOwnProperty(Re)?(pe!=null&&Re==="onScroll"&&Jr("scroll",c),I||de===pe||(I=[])):(I=I||[]).push(Re,pe))}g&&(I=I||[]).push("style",g);var Re=I;(h.updateQueue=Re)&&(h.flags|=4)}},S_=function(c,h,g,j){g!==j&&(h.flags|=4)};function Cd(c,h){if(!nn)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var j=null;g!==null;)g.alternate!==null&&(j=g),g=g.sibling;j===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function ga(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,j=0;if(h)for(var T=c.child;T!==null;)g|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)g|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=j,c.childLanes=g,h}function BL(c,h,g){var j=h.pendingProps;switch(hx(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ga(h),null;case 1:return za(h.type)&&t0(),ga(h),null;case 3:return j=h.stateNode,Cc(),Qr(qa),Qr(pa),Sx(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(i0(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,zs!==null&&(ty(zs),zs=null))),zx(c,h),ga(h),null;case 5:Nx(h);var T=fl(kd.current);if(g=h.type,c!==null&&h.stateNode!=null)k_(c,h,g,j,T),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(r(166));return ga(h),null}if(c=fl(gi.current),i0(h)){j=h.stateNode,g=h.type;var I=h.memoizedProps;switch(j[mi]=h,j[vd]=I,c=(h.mode&1)!==0,g){case"dialog":Jr("cancel",j),Jr("close",j);break;case"iframe":case"object":case"embed":Jr("load",j);break;case"video":case"audio":for(T=0;T<gd.length;T++)Jr(gd[T],j);break;case"source":Jr("error",j);break;case"img":case"image":case"link":Jr("error",j),Jr("load",j);break;case"details":Jr("toggle",j);break;case"input":De(j,I),Jr("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!I.multiple},Jr("invalid",j);break;case"textarea":Ke(j,I),Jr("invalid",j)}ut(g,I),T=null;for(var G in I)if(I.hasOwnProperty(G)){var de=I[G];G==="children"?typeof de=="string"?j.textContent!==de&&(I.suppressHydrationWarning!==!0&&Qf(j.textContent,de,c),T=["children",de]):typeof de=="number"&&j.textContent!==""+de&&(I.suppressHydrationWarning!==!0&&Qf(j.textContent,de,c),T=["children",""+de]):s.hasOwnProperty(G)&&de!=null&&G==="onScroll"&&Jr("scroll",j)}switch(g){case"input":Oe(j),Fe(j,I,!0);break;case"textarea":Oe(j),ft(j);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(j.onclick=Zf)}j=T,h.updateQueue=j,j!==null&&(h.flags|=4)}else{G=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Qt(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=G.createElement(g,{is:j.is}):(c=G.createElement(g),g==="select"&&(G=c,j.multiple?G.multiple=!0:j.size&&(G.size=j.size))):c=G.createElementNS(c,g),c[mi]=h,c[vd]=j,N_(c,h,!1,!1),h.stateNode=c;e:{switch(G=at(g,j),g){case"dialog":Jr("cancel",c),Jr("close",c),T=j;break;case"iframe":case"object":case"embed":Jr("load",c),T=j;break;case"video":case"audio":for(T=0;T<gd.length;T++)Jr(gd[T],c);T=j;break;case"source":Jr("error",c),T=j;break;case"img":case"image":case"link":Jr("error",c),Jr("load",c),T=j;break;case"details":Jr("toggle",c),T=j;break;case"input":De(c,j),T=ae(c,j),Jr("invalid",c);break;case"option":T=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},T=oe({},j,{value:void 0}),Jr("invalid",c);break;case"textarea":Ke(c,j),T=Nt(c,j),Jr("invalid",c);break;default:T=j}ut(g,T),de=T;for(I in de)if(de.hasOwnProperty(I)){var pe=de[I];I==="style"?zr(c,pe):I==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&vt(c,pe)):I==="children"?typeof pe=="string"?(g!=="textarea"||pe!=="")&&bt(c,pe):typeof pe=="number"&&bt(c,""+pe):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?pe!=null&&I==="onScroll"&&Jr("scroll",c):pe!=null&&w(c,I,pe,G))}switch(g){case"input":Oe(c),Fe(c,j,!1);break;case"textarea":Oe(c),ft(c);break;case"option":j.value!=null&&c.setAttribute("value",""+Me(j.value));break;case"select":c.multiple=!!j.multiple,I=j.value,I!=null?He(c,!!j.multiple,I,!1):j.defaultValue!=null&&He(c,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=Zf)}switch(g){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return ga(h),null;case 6:if(c&&h.stateNode!=null)S_(c,h,c.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(r(166));if(g=fl(kd.current),fl(gi.current),i0(h)){if(j=h.stateNode,g=h.memoizedProps,j[mi]=h,(I=j.nodeValue!==g)&&(c=ts,c!==null))switch(c.tag){case 3:Qf(j.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Qf(j.nodeValue,g,(c.mode&1)!==0)}I&&(h.flags|=4)}else j=(g.nodeType===9?g:g.ownerDocument).createTextNode(j),j[mi]=h,h.stateNode=j}return ga(h),null;case 13:if(Qr(on),j=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(nn&&rs!==null&&(h.mode&1)!==0&&(h.flags&128)===0)TS(),Sc(),h.flags|=98560,I=!1;else if(I=i0(h),j!==null&&j.dehydrated!==null){if(c===null){if(!I)throw Error(r(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[mi]=h}else Sc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ga(h),I=!1}else zs!==null&&(ty(zs),zs=null),I=!0;if(!I)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=g,h):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(on.current&1)!==0?Mn===0&&(Mn=3):ay())),h.updateQueue!==null&&(h.flags|=4),ga(h),null);case 4:return Cc(),zx(c,h),c===null&&xd(h.stateNode.containerInfo),ga(h),null;case 10:return yx(h.type._context),ga(h),null;case 17:return za(h.type)&&t0(),ga(h),null;case 19:if(Qr(on),I=h.memoizedState,I===null)return ga(h),null;if(j=(h.flags&128)!==0,G=I.rendering,G===null)if(j)Cd(I,!1);else{if(Mn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(G=h0(c),G!==null){for(h.flags|=128,Cd(I,!1),j=G.updateQueue,j!==null&&(h.updateQueue=j,h.flags|=4),h.subtreeFlags=0,j=g,g=h.child;g!==null;)I=g,c=j,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=c,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,c=G.dependencies,I.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Wr(on,on.current&1|2),h.child}c=c.sibling}I.tail!==null&&Qe()>Ic&&(h.flags|=128,j=!0,Cd(I,!1),h.lanes=4194304)}else{if(!j)if(c=h0(G),c!==null){if(h.flags|=128,j=!0,g=c.updateQueue,g!==null&&(h.updateQueue=g,h.flags|=4),Cd(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!nn)return ga(h),null}else 2*Qe()-I.renderingStartTime>Ic&&g!==1073741824&&(h.flags|=128,j=!0,Cd(I,!1),h.lanes=4194304);I.isBackwards?(G.sibling=h.child,h.child=G):(g=I.last,g!==null?g.sibling=G:h.child=G,I.last=G)}return I.tail!==null?(h=I.tail,I.rendering=h,I.tail=h.sibling,I.renderingStartTime=Qe(),h.sibling=null,g=on.current,Wr(on,j?g&1|2:g&1),h):(ga(h),null);case 22:case 23:return ny(),j=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(h.flags|=8192),j&&(h.mode&1)!==0?(ns&1073741824)!==0&&(ga(h),h.subtreeFlags&6&&(h.flags|=8192)):ga(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function UL(c,h){switch(hx(h),h.tag){case 1:return za(h.type)&&t0(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Cc(),Qr(qa),Qr(pa),Sx(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Nx(h),null;case 13:if(Qr(on),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Sc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Qr(on),null;case 4:return Cc(),null;case 10:return yx(h.type._context),null;case 22:case 23:return ny(),null;case 24:return null;default:return null}}var w0=!1,xa=!1,HL=typeof WeakSet=="function"?WeakSet:Set,St=null;function Oc(c,h){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(j){un(c,h,j)}else g.current=null}function Wx(c,h,g){try{g()}catch(j){un(c,h,j)}}var __=!1;function qL(c,h){if(nx=Uf,c=aS(),Yg(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var j=g.getSelection&&g.getSelection();if(j&&j.rangeCount!==0){g=j.anchorNode;var T=j.anchorOffset,I=j.focusNode;j=j.focusOffset;try{g.nodeType,I.nodeType}catch{g=null;break e}var G=0,de=-1,pe=-1,Re=0,Ze=0,rt=c,Je=null;t:for(;;){for(var jt;rt!==g||T!==0&&rt.nodeType!==3||(de=G+T),rt!==I||j!==0&&rt.nodeType!==3||(pe=G+j),rt.nodeType===3&&(G+=rt.nodeValue.length),(jt=rt.firstChild)!==null;)Je=rt,rt=jt;for(;;){if(rt===c)break t;if(Je===g&&++Re===T&&(de=G),Je===I&&++Ze===j&&(pe=G),(jt=rt.nextSibling)!==null)break;rt=Je,Je=rt.parentNode}rt=jt}g=de===-1||pe===-1?null:{start:de,end:pe}}else g=null}g=g||{start:0,end:0}}else g=null;for(ax={focusedElem:c,selectionRange:g},Uf=!1,St=h;St!==null;)if(h=St,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,St=c;else for(;St!==null;){h=St;try{var Ct=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Dt=Ct.memoizedProps,xn=Ct.memoizedState,Te=h.stateNode,be=Te.getSnapshotBeforeUpdate(h.elementType===h.type?Dt:Ws(h.type,Dt),xn);Te.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Ae=h.stateNode.containerInfo;Ae.nodeType===1?Ae.textContent="":Ae.nodeType===9&&Ae.documentElement&&Ae.removeChild(Ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(it){un(h,h.return,it)}if(c=h.sibling,c!==null){c.return=h.return,St=c;break}St=h.return}return Ct=__,__=!1,Ct}function Ad(c,h,g){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&c)===c){var I=T.destroy;T.destroy=void 0,I!==void 0&&Wx(h,g,I)}T=T.next}while(T!==j)}}function j0(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&c)===c){var j=g.create;g.destroy=j()}g=g.next}while(g!==h)}}function Kx(c){var h=c.ref;if(h!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof h=="function"?h(c):h.current=c}}function E_(c){var h=c.alternate;h!==null&&(c.alternate=null,E_(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[mi],delete h[vd],delete h[lx],delete h[SL],delete h[_L])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function T_(c){return c.tag===5||c.tag===3||c.tag===4}function C_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||T_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Vx(c,h,g){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?g.nodeType===8?g.parentNode.insertBefore(c,h):g.insertBefore(c,h):(g.nodeType===8?(h=g.parentNode,h.insertBefore(c,g)):(h=g,h.appendChild(c)),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=Zf));else if(j!==4&&(c=c.child,c!==null))for(Vx(c,h,g),c=c.sibling;c!==null;)Vx(c,h,g),c=c.sibling}function Gx(c,h,g){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?g.insertBefore(c,h):g.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(Gx(c,h,g),c=c.sibling;c!==null;)Gx(c,h,g),c=c.sibling}var na=null,Ks=!1;function Co(c,h,g){for(g=g.child;g!==null;)A_(c,h,g),g=g.sibling}function A_(c,h,g){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(Cr,g)}catch{}switch(g.tag){case 5:xa||Oc(g,h);case 6:var j=na,T=Ks;na=null,Co(c,h,g),na=j,Ks=T,na!==null&&(Ks?(c=na,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):na.removeChild(g.stateNode));break;case 18:na!==null&&(Ks?(c=na,g=g.stateNode,c.nodeType===8?ox(c.parentNode,g):c.nodeType===1&&ox(c,g),ld(c)):ox(na,g.stateNode));break;case 4:j=na,T=Ks,na=g.stateNode.containerInfo,Ks=!0,Co(c,h,g),na=j,Ks=T;break;case 0:case 11:case 14:case 15:if(!xa&&(j=g.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var I=T,G=I.destroy;I=I.tag,G!==void 0&&((I&2)!==0||(I&4)!==0)&&Wx(g,h,G),T=T.next}while(T!==j)}Co(c,h,g);break;case 1:if(!xa&&(Oc(g,h),j=g.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=g.memoizedProps,j.state=g.memoizedState,j.componentWillUnmount()}catch(de){un(g,h,de)}Co(c,h,g);break;case 21:Co(c,h,g);break;case 22:g.mode&1?(xa=(j=xa)||g.memoizedState!==null,Co(c,h,g),xa=j):Co(c,h,g);break;default:Co(c,h,g)}}function O_(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new HL),h.forEach(function(j){var T=QL.bind(null,c,j);g.has(j)||(g.add(j),j.then(T,T))})}}function Vs(c,h){var g=h.deletions;if(g!==null)for(var j=0;j<g.length;j++){var T=g[j];try{var I=c,G=h,de=G;e:for(;de!==null;){switch(de.tag){case 5:na=de.stateNode,Ks=!1;break e;case 3:na=de.stateNode.containerInfo,Ks=!0;break e;case 4:na=de.stateNode.containerInfo,Ks=!0;break e}de=de.return}if(na===null)throw Error(r(160));A_(I,G,T),na=null,Ks=!1;var pe=T.alternate;pe!==null&&(pe.return=null),T.return=null}catch(Re){un(T,h,Re)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)P_(h,c),h=h.sibling}function P_(c,h){var g=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Vs(h,c),yi(c),j&4){try{Ad(3,c,c.return),j0(3,c)}catch(Dt){un(c,c.return,Dt)}try{Ad(5,c,c.return)}catch(Dt){un(c,c.return,Dt)}}break;case 1:Vs(h,c),yi(c),j&512&&g!==null&&Oc(g,g.return);break;case 5:if(Vs(h,c),yi(c),j&512&&g!==null&&Oc(g,g.return),c.flags&32){var T=c.stateNode;try{bt(T,"")}catch(Dt){un(c,c.return,Dt)}}if(j&4&&(T=c.stateNode,T!=null)){var I=c.memoizedProps,G=g!==null?g.memoizedProps:I,de=c.type,pe=c.updateQueue;if(c.updateQueue=null,pe!==null)try{de==="input"&&I.type==="radio"&&I.name!=null&&Be(T,I),at(de,G);var Re=at(de,I);for(G=0;G<pe.length;G+=2){var Ze=pe[G],rt=pe[G+1];Ze==="style"?zr(T,rt):Ze==="dangerouslySetInnerHTML"?vt(T,rt):Ze==="children"?bt(T,rt):w(T,Ze,rt,Re)}switch(de){case"input":Se(T,I);break;case"textarea":kt(T,I);break;case"select":var Je=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!I.multiple;var jt=I.value;jt!=null?He(T,!!I.multiple,jt,!1):Je!==!!I.multiple&&(I.defaultValue!=null?He(T,!!I.multiple,I.defaultValue,!0):He(T,!!I.multiple,I.multiple?[]:"",!1))}T[vd]=I}catch(Dt){un(c,c.return,Dt)}}break;case 6:if(Vs(h,c),yi(c),j&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,I=c.memoizedProps;try{T.nodeValue=I}catch(Dt){un(c,c.return,Dt)}}break;case 3:if(Vs(h,c),yi(c),j&4&&g!==null&&g.memoizedState.isDehydrated)try{ld(h.containerInfo)}catch(Dt){un(c,c.return,Dt)}break;case 4:Vs(h,c),yi(c);break;case 13:Vs(h,c),yi(c),T=c.child,T.flags&8192&&(I=T.memoizedState!==null,T.stateNode.isHidden=I,!I||T.alternate!==null&&T.alternate.memoizedState!==null||(Jx=Qe())),j&4&&O_(c);break;case 22:if(Ze=g!==null&&g.memoizedState!==null,c.mode&1?(xa=(Re=xa)||Ze,Vs(h,c),xa=Re):Vs(h,c),yi(c),j&8192){if(Re=c.memoizedState!==null,(c.stateNode.isHidden=Re)&&!Ze&&(c.mode&1)!==0)for(St=c,Ze=c.child;Ze!==null;){for(rt=St=Ze;St!==null;){switch(Je=St,jt=Je.child,Je.tag){case 0:case 11:case 14:case 15:Ad(4,Je,Je.return);break;case 1:Oc(Je,Je.return);var Ct=Je.stateNode;if(typeof Ct.componentWillUnmount=="function"){j=Je,g=Je.return;try{h=j,Ct.props=h.memoizedProps,Ct.state=h.memoizedState,Ct.componentWillUnmount()}catch(Dt){un(j,g,Dt)}}break;case 5:Oc(Je,Je.return);break;case 22:if(Je.memoizedState!==null){M_(rt);continue}}jt!==null?(jt.return=Je,St=jt):M_(rt)}Ze=Ze.sibling}e:for(Ze=null,rt=c;;){if(rt.tag===5){if(Ze===null){Ze=rt;try{T=rt.stateNode,Re?(I=T.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(de=rt.stateNode,pe=rt.memoizedProps.style,G=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,de.style.display=ur("display",G))}catch(Dt){un(c,c.return,Dt)}}}else if(rt.tag===6){if(Ze===null)try{rt.stateNode.nodeValue=Re?"":rt.memoizedProps}catch(Dt){un(c,c.return,Dt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===c)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===c)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===c)break e;Ze===rt&&(Ze=null),rt=rt.return}Ze===rt&&(Ze=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:Vs(h,c),yi(c),j&4&&O_(c);break;case 21:break;default:Vs(h,c),yi(c)}}function yi(c){var h=c.flags;if(h&2){try{e:{for(var g=c.return;g!==null;){if(T_(g)){var j=g;break e}g=g.return}throw Error(r(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(bt(T,""),j.flags&=-33);var I=C_(c);Gx(c,I,T);break;case 3:case 4:var G=j.stateNode.containerInfo,de=C_(c);Vx(c,de,G);break;default:throw Error(r(161))}}catch(pe){un(c,c.return,pe)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function zL(c,h,g){St=c,I_(c)}function I_(c,h,g){for(var j=(c.mode&1)!==0;St!==null;){var T=St,I=T.child;if(T.tag===22&&j){var G=T.memoizedState!==null||w0;if(!G){var de=T.alternate,pe=de!==null&&de.memoizedState!==null||xa;de=w0;var Re=xa;if(w0=G,(xa=pe)&&!Re)for(St=T;St!==null;)G=St,pe=G.child,G.tag===22&&G.memoizedState!==null?R_(T):pe!==null?(pe.return=G,St=pe):R_(T);for(;I!==null;)St=I,I_(I),I=I.sibling;St=T,w0=de,xa=Re}D_(c)}else(T.subtreeFlags&8772)!==0&&I!==null?(I.return=T,St=I):D_(c)}}function D_(c){for(;St!==null;){var h=St;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:xa||j0(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!xa)if(g===null)j.componentDidMount();else{var T=h.elementType===h.type?g.memoizedProps:Ws(h.type,g.memoizedProps);j.componentDidUpdate(T,g.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&MS(h,I,j);break;case 3:var G=h.updateQueue;if(G!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=h.child.stateNode;break;case 1:g=h.child.stateNode}MS(h,G,g)}break;case 5:var de=h.stateNode;if(g===null&&h.flags&4){g=de;var pe=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&g.focus();break;case"img":pe.src&&(g.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Re=h.alternate;if(Re!==null){var Ze=Re.memoizedState;if(Ze!==null){var rt=Ze.dehydrated;rt!==null&&ld(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xa||h.flags&512&&Kx(h)}catch(Je){un(h,h.return,Je)}}if(h===c){St=null;break}if(g=h.sibling,g!==null){g.return=h.return,St=g;break}St=h.return}}function M_(c){for(;St!==null;){var h=St;if(h===c){St=null;break}var g=h.sibling;if(g!==null){g.return=h.return,St=g;break}St=h.return}}function R_(c){for(;St!==null;){var h=St;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{j0(4,h)}catch(pe){un(h,g,pe)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var T=h.return;try{j.componentDidMount()}catch(pe){un(h,T,pe)}}var I=h.return;try{Kx(h)}catch(pe){un(h,I,pe)}break;case 5:var G=h.return;try{Kx(h)}catch(pe){un(h,G,pe)}}}catch(pe){un(h,h.return,pe)}if(h===c){St=null;break}var de=h.sibling;if(de!==null){de.return=h.return,St=de;break}St=h.return}}var WL=Math.ceil,N0=P.ReactCurrentDispatcher,Yx=P.ReactCurrentOwner,js=P.ReactCurrentBatchConfig,jr=0,Vn=null,Nn=null,aa=0,ns=0,Pc=ko(0),Mn=0,Od=null,ml=0,k0=0,Xx=0,Pd=null,Ka=null,Jx=0,Ic=1/0,Ki=null,S0=!1,Qx=null,Ao=null,_0=!1,Oo=null,E0=0,Id=0,Zx=null,T0=-1,C0=0;function Pa(){return(jr&6)!==0?Qe():T0!==-1?T0:T0=Qe()}function Po(c){return(c.mode&1)===0?1:(jr&2)!==0&&aa!==0?aa&-aa:TL.transition!==null?(C0===0&&(C0=Pt()),C0):(c=xt,c!==0||(c=window.event,c=c===void 0?16:$k(c.type)),c)}function Gs(c,h,g,j){if(50<Id)throw Id=0,Zx=null,Error(r(185));Ht(c,g,j),((jr&2)===0||c!==Vn)&&(c===Vn&&((jr&2)===0&&(k0|=g),Mn===4&&Io(c,aa)),Va(c,j),g===1&&jr===0&&(h.mode&1)===0&&(Ic=Qe()+500,n0&&_o()))}function Va(c,h){var g=c.callbackNode;qe(c,h);var j=$e(c,c===Vn?aa:0);if(j===0)g!==null&&Xe(g),c.callbackNode=null,c.callbackPriority=0;else if(h=j&-j,c.callbackPriority!==h){if(g!=null&&Xe(g),h===1)c.tag===0?EL($_.bind(null,c)):NS($_.bind(null,c)),NL(function(){(jr&6)===0&&_o()}),g=null;else{switch(Tt(j)){case 1:g=Tr;break;case 4:g=Rr;break;case 16:g=Lr;break;case 536870912:g=$s;break;default:g=Lr}g=K_(g,F_.bind(null,c))}c.callbackPriority=h,c.callbackNode=g}}function F_(c,h){if(T0=-1,C0=0,(jr&6)!==0)throw Error(r(327));var g=c.callbackNode;if(Dc()&&c.callbackNode!==g)return null;var j=$e(c,c===Vn?aa:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||h)h=A0(c,j);else{h=j;var T=jr;jr|=2;var I=B_();(Vn!==c||aa!==h)&&(Ki=null,Ic=Qe()+500,xl(c,h));do try{GL();break}catch(de){L_(c,de)}while(!0);xx(),N0.current=I,jr=T,Nn!==null?h=0:(Vn=null,aa=0,h=Mn)}if(h!==0){if(h===2&&(T=Ve(c),T!==0&&(j=T,h=ey(c,T))),h===1)throw g=Od,xl(c,0),Io(c,j),Va(c,Qe()),g;if(h===6)Io(c,j);else{if(T=c.current.alternate,(j&30)===0&&!KL(T)&&(h=A0(c,j),h===2&&(I=Ve(c),I!==0&&(j=I,h=ey(c,I))),h===1))throw g=Od,xl(c,0),Io(c,j),Va(c,Qe()),g;switch(c.finishedWork=T,c.finishedLanes=j,h){case 0:case 1:throw Error(r(345));case 2:yl(c,Ka,Ki);break;case 3:if(Io(c,j),(j&130023424)===j&&(h=Jx+500-Qe(),10<h)){if($e(c,0)!==0)break;if(T=c.suspendedLanes,(T&j)!==j){Pa(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=ix(yl.bind(null,c,Ka,Ki),h);break}yl(c,Ka,Ki);break;case 4:if(Io(c,j),(j&4194240)===j)break;for(h=c.eventTimes,T=-1;0<j;){var G=31-X(j);I=1<<G,G=h[G],G>T&&(T=G),j&=~I}if(j=T,j=Qe()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*WL(j/1960))-j,10<j){c.timeoutHandle=ix(yl.bind(null,c,Ka,Ki),j);break}yl(c,Ka,Ki);break;case 5:yl(c,Ka,Ki);break;default:throw Error(r(329))}}}return Va(c,Qe()),c.callbackNode===g?F_.bind(null,c):null}function ey(c,h){var g=Pd;return c.current.memoizedState.isDehydrated&&(xl(c,h).flags|=256),c=A0(c,h),c!==2&&(h=Ka,Ka=g,h!==null&&ty(h)),c}function ty(c){Ka===null?Ka=c:Ka.push.apply(Ka,c)}function KL(c){for(var h=c;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var j=0;j<g.length;j++){var T=g[j],I=T.getSnapshot;T=T.value;try{if(!qs(I(),T))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Io(c,h){for(h&=~Xx,h&=~k0,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var g=31-X(h),j=1<<g;c[g]=-1,h&=~j}}function $_(c){if((jr&6)!==0)throw Error(r(327));Dc();var h=$e(c,0);if((h&1)===0)return Va(c,Qe()),null;var g=A0(c,h);if(c.tag!==0&&g===2){var j=Ve(c);j!==0&&(h=j,g=ey(c,j))}if(g===1)throw g=Od,xl(c,0),Io(c,h),Va(c,Qe()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,yl(c,Ka,Ki),Va(c,Qe()),null}function ry(c,h){var g=jr;jr|=1;try{return c(h)}finally{jr=g,jr===0&&(Ic=Qe()+500,n0&&_o())}}function gl(c){Oo!==null&&Oo.tag===0&&(jr&6)===0&&Dc();var h=jr;jr|=1;var g=js.transition,j=xt;try{if(js.transition=null,xt=1,c)return c()}finally{xt=j,js.transition=g,jr=h,(jr&6)===0&&_o()}}function ny(){ns=Pc.current,Qr(Pc)}function xl(c,h){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,jL(g)),Nn!==null)for(g=Nn.return;g!==null;){var j=g;switch(hx(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&t0();break;case 3:Cc(),Qr(qa),Qr(pa),Sx();break;case 5:Nx(j);break;case 4:Cc();break;case 13:Qr(on);break;case 19:Qr(on);break;case 10:yx(j.type._context);break;case 22:case 23:ny()}g=g.return}if(Vn=c,Nn=c=Do(c.current,null),aa=ns=h,Mn=0,Od=null,Xx=k0=ml=0,Ka=Pd=null,hl!==null){for(h=0;h<hl.length;h++)if(g=hl[h],j=g.interleaved,j!==null){g.interleaved=null;var T=j.next,I=g.pending;if(I!==null){var G=I.next;I.next=T,j.next=G}g.pending=j}hl=null}return c}function L_(c,h){do{var g=Nn;try{if(xx(),f0.current=x0,p0){for(var j=ln.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}p0=!1}if(pl=0,Kn=Dn=ln=null,Sd=!1,_d=0,Yx.current=null,g===null||g.return===null){Mn=1,Od=h,Nn=null;break}e:{var I=c,G=g.return,de=g,pe=h;if(h=aa,de.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Re=pe,Ze=de,rt=Ze.tag;if((Ze.mode&1)===0&&(rt===0||rt===11||rt===15)){var Je=Ze.alternate;Je?(Ze.updateQueue=Je.updateQueue,Ze.memoizedState=Je.memoizedState,Ze.lanes=Je.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var jt=u_(G);if(jt!==null){jt.flags&=-257,d_(jt,G,de,I,h),jt.mode&1&&c_(I,Re,h),h=jt,pe=Re;var Ct=h.updateQueue;if(Ct===null){var Dt=new Set;Dt.add(pe),h.updateQueue=Dt}else Ct.add(pe);break e}else{if((h&1)===0){c_(I,Re,h),ay();break e}pe=Error(r(426))}}else if(nn&&de.mode&1){var xn=u_(G);if(xn!==null){(xn.flags&65536)===0&&(xn.flags|=256),d_(xn,G,de,I,h),mx(Ac(pe,de));break e}}I=pe=Ac(pe,de),Mn!==4&&(Mn=2),Pd===null?Pd=[I]:Pd.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,h&=-h,I.lanes|=h;var Te=o_(I,pe,h);DS(I,Te);break e;case 1:de=pe;var be=I.type,Ae=I.stateNode;if((I.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Ae!==null&&typeof Ae.componentDidCatch=="function"&&(Ao===null||!Ao.has(Ae)))){I.flags|=65536,h&=-h,I.lanes|=h;var it=l_(I,de,h);DS(I,it);break e}}I=I.return}while(I!==null)}H_(g)}catch(Rt){h=Rt,Nn===g&&g!==null&&(Nn=g=g.return);continue}break}while(!0)}function B_(){var c=N0.current;return N0.current=x0,c===null?x0:c}function ay(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Vn===null||(ml&268435455)===0&&(k0&268435455)===0||Io(Vn,aa)}function A0(c,h){var g=jr;jr|=2;var j=B_();(Vn!==c||aa!==h)&&(Ki=null,xl(c,h));do try{VL();break}catch(T){L_(c,T)}while(!0);if(xx(),jr=g,N0.current=j,Nn!==null)throw Error(r(261));return Vn=null,aa=0,Mn}function VL(){for(;Nn!==null;)U_(Nn)}function GL(){for(;Nn!==null&&!ct();)U_(Nn)}function U_(c){var h=W_(c.alternate,c,ns);c.memoizedProps=c.pendingProps,h===null?H_(c):Nn=h,Yx.current=null}function H_(c){var h=c;do{var g=h.alternate;if(c=h.return,(h.flags&32768)===0){if(g=BL(g,h,ns),g!==null){Nn=g;return}}else{if(g=UL(g,h),g!==null){g.flags&=32767,Nn=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Mn=6,Nn=null;return}}if(h=h.sibling,h!==null){Nn=h;return}Nn=h=c}while(h!==null);Mn===0&&(Mn=5)}function yl(c,h,g){var j=xt,T=js.transition;try{js.transition=null,xt=1,YL(c,h,g,j)}finally{js.transition=T,xt=j}return null}function YL(c,h,g,j){do Dc();while(Oo!==null);if((jr&6)!==0)throw Error(r(327));g=c.finishedWork;var T=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var I=g.lanes|g.childLanes;if(Ft(c,I),c===Vn&&(Nn=Vn=null,aa=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||_0||(_0=!0,K_(Lr,function(){return Dc(),null})),I=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||I){I=js.transition,js.transition=null;var G=xt;xt=1;var de=jr;jr|=4,Yx.current=null,qL(c,g),P_(g,c),mL(ax),Uf=!!nx,ax=nx=null,c.current=g,zL(g),tt(),jr=de,xt=G,js.transition=I}else c.current=g;if(_0&&(_0=!1,Oo=c,E0=T),I=c.pendingLanes,I===0&&(Ao=null),Ls(g.stateNode),Va(c,Qe()),h!==null)for(j=c.onRecoverableError,g=0;g<h.length;g++)T=h[g],j(T.value,{componentStack:T.stack,digest:T.digest});if(S0)throw S0=!1,c=Qx,Qx=null,c;return(E0&1)!==0&&c.tag!==0&&Dc(),I=c.pendingLanes,(I&1)!==0?c===Zx?Id++:(Id=0,Zx=c):Id=0,_o(),null}function Dc(){if(Oo!==null){var c=Tt(E0),h=js.transition,g=xt;try{if(js.transition=null,xt=16>c?16:c,Oo===null)var j=!1;else{if(c=Oo,Oo=null,E0=0,(jr&6)!==0)throw Error(r(331));var T=jr;for(jr|=4,St=c.current;St!==null;){var I=St,G=I.child;if((St.flags&16)!==0){var de=I.deletions;if(de!==null){for(var pe=0;pe<de.length;pe++){var Re=de[pe];for(St=Re;St!==null;){var Ze=St;switch(Ze.tag){case 0:case 11:case 15:Ad(8,Ze,I)}var rt=Ze.child;if(rt!==null)rt.return=Ze,St=rt;else for(;St!==null;){Ze=St;var Je=Ze.sibling,jt=Ze.return;if(E_(Ze),Ze===Re){St=null;break}if(Je!==null){Je.return=jt,St=Je;break}St=jt}}}var Ct=I.alternate;if(Ct!==null){var Dt=Ct.child;if(Dt!==null){Ct.child=null;do{var xn=Dt.sibling;Dt.sibling=null,Dt=xn}while(Dt!==null)}}St=I}}if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,St=G;else e:for(;St!==null;){if(I=St,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Ad(9,I,I.return)}var Te=I.sibling;if(Te!==null){Te.return=I.return,St=Te;break e}St=I.return}}var be=c.current;for(St=be;St!==null;){G=St;var Ae=G.child;if((G.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=G,St=Ae;else e:for(G=be;St!==null;){if(de=St,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:j0(9,de)}}catch(Rt){un(de,de.return,Rt)}if(de===G){St=null;break e}var it=de.sibling;if(it!==null){it.return=de.return,St=it;break e}St=de.return}}if(jr=T,_o(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(Cr,c)}catch{}j=!0}return j}finally{xt=g,js.transition=h}}return!1}function q_(c,h,g){h=Ac(g,h),h=o_(c,h,1),c=To(c,h,1),h=Pa(),c!==null&&(Ht(c,1,h),Va(c,h))}function un(c,h,g){if(c.tag===3)q_(c,c,g);else for(;h!==null;){if(h.tag===3){q_(h,c,g);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Ao===null||!Ao.has(j))){c=Ac(g,c),c=l_(h,c,1),h=To(h,c,1),c=Pa(),h!==null&&(Ht(h,1,c),Va(h,c));break}}h=h.return}}function XL(c,h,g){var j=c.pingCache;j!==null&&j.delete(h),h=Pa(),c.pingedLanes|=c.suspendedLanes&g,Vn===c&&(aa&g)===g&&(Mn===4||Mn===3&&(aa&130023424)===aa&&500>Qe()-Jx?xl(c,0):Xx|=g),Va(c,h)}function z_(c,h){h===0&&((c.mode&1)===0?h=1:(h=Ce,Ce<<=1,(Ce&130023424)===0&&(Ce=4194304)));var g=Pa();c=qi(c,h),c!==null&&(Ht(c,h,g),Va(c,g))}function JL(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),z_(c,g)}function QL(c,h){var g=0;switch(c.tag){case 13:var j=c.stateNode,T=c.memoizedState;T!==null&&(g=T.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(h),z_(c,g)}var W_;W_=function(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps||qa.current)Wa=!0;else{if((c.lanes&g)===0&&(h.flags&128)===0)return Wa=!1,LL(c,h,g);Wa=(c.flags&131072)!==0}else Wa=!1,nn&&(h.flags&1048576)!==0&&kS(h,s0,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;b0(c,h),c=h.pendingProps;var T=jc(h,pa.current);Tc(h,g),T=Tx(null,h,j,c,T,g);var I=Cx();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,za(j)?(I=!0,r0(h)):I=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,wx(h),T.updater=y0,h.stateNode=T,T._reactInternals=h,Mx(h,j,c,g),h=Lx(null,h,j,!0,I,g)):(h.tag=0,nn&&I&&dx(h),Oa(null,h,T,g),h=h.child),h;case 16:j=h.elementType;e:{switch(b0(c,h),c=h.pendingProps,T=j._init,j=T(j._payload),h.type=j,T=h.tag=e7(j),c=Ws(j,c),T){case 0:h=$x(null,h,j,c,g);break e;case 1:h=x_(null,h,j,c,g);break e;case 11:h=h_(null,h,j,c,g);break e;case 14:h=f_(null,h,j,Ws(j.type,c),g);break e}throw Error(r(306,j,""))}return h;case 0:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:Ws(j,T),$x(c,h,j,T,g);case 1:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:Ws(j,T),x_(c,h,j,T,g);case 3:e:{if(y_(h),c===null)throw Error(r(387));j=h.pendingProps,I=h.memoizedState,T=I.element,IS(c,h),d0(h,j,null,g);var G=h.memoizedState;if(j=G.element,I.isDehydrated)if(I={element:j,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){T=Ac(Error(r(423)),h),h=v_(c,h,j,g,T);break e}else if(j!==T){T=Ac(Error(r(424)),h),h=v_(c,h,j,g,T);break e}else for(rs=No(h.stateNode.containerInfo.firstChild),ts=h,nn=!0,zs=null,g=OS(h,null,j,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Sc(),j===T){h=Wi(c,h,g);break e}Oa(c,h,j,g)}h=h.child}return h;case 5:return RS(h),c===null&&px(h),j=h.type,T=h.pendingProps,I=c!==null?c.memoizedProps:null,G=T.children,sx(j,T)?G=null:I!==null&&sx(j,I)&&(h.flags|=32),g_(c,h),Oa(c,h,G,g),h.child;case 6:return c===null&&px(h),null;case 13:return b_(c,h,g);case 4:return jx(h,h.stateNode.containerInfo),j=h.pendingProps,c===null?h.child=_c(h,null,j,g):Oa(c,h,j,g),h.child;case 11:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:Ws(j,T),h_(c,h,j,T,g);case 7:return Oa(c,h,h.pendingProps,g),h.child;case 8:return Oa(c,h,h.pendingProps.children,g),h.child;case 12:return Oa(c,h,h.pendingProps.children,g),h.child;case 10:e:{if(j=h.type._context,T=h.pendingProps,I=h.memoizedProps,G=T.value,Wr(l0,j._currentValue),j._currentValue=G,I!==null)if(qs(I.value,G)){if(I.children===T.children&&!qa.current){h=Wi(c,h,g);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var de=I.dependencies;if(de!==null){G=I.child;for(var pe=de.firstContext;pe!==null;){if(pe.context===j){if(I.tag===1){pe=zi(-1,g&-g),pe.tag=2;var Re=I.updateQueue;if(Re!==null){Re=Re.shared;var Ze=Re.pending;Ze===null?pe.next=pe:(pe.next=Ze.next,Ze.next=pe),Re.pending=pe}}I.lanes|=g,pe=I.alternate,pe!==null&&(pe.lanes|=g),vx(I.return,g,h),de.lanes|=g;break}pe=pe.next}}else if(I.tag===10)G=I.type===h.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(r(341));G.lanes|=g,de=G.alternate,de!==null&&(de.lanes|=g),vx(G,g,h),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===h){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Oa(c,h,T.children,g),h=h.child}return h;case 9:return T=h.type,j=h.pendingProps.children,Tc(h,g),T=bs(T),j=j(T),h.flags|=1,Oa(c,h,j,g),h.child;case 14:return j=h.type,T=Ws(j,h.pendingProps),T=Ws(j.type,T),f_(c,h,j,T,g);case 15:return p_(c,h,h.type,h.pendingProps,g);case 17:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:Ws(j,T),b0(c,h),h.tag=1,za(j)?(c=!0,r0(h)):c=!1,Tc(h,g),s_(h,j,T),Mx(h,j,T,g),Lx(null,h,j,!0,c,g);case 19:return j_(c,h,g);case 22:return m_(c,h,g)}throw Error(r(156,h.tag))};function K_(c,h){return ve(c,h)}function ZL(c,h,g,j){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(c,h,g,j){return new ZL(c,h,g,j)}function sy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function e7(c){if(typeof c=="function")return sy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===Y)return 14}return 2}function Do(c,h){var g=c.alternate;return g===null?(g=Ns(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function O0(c,h,g,j,T,I){var G=2;if(j=c,typeof c=="function")sy(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case E:return vl(g.children,T,I,h);case C:G=8,T|=8;break;case M:return c=Ns(12,g,h,T|2),c.elementType=M,c.lanes=I,c;case F:return c=Ns(13,g,h,T),c.elementType=F,c.lanes=I,c;case W:return c=Ns(19,g,h,T),c.elementType=W,c.lanes=I,c;case re:return P0(g,T,I,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case D:G=10;break e;case A:G=9;break e;case O:G=11;break e;case Y:G=14;break e;case Z:G=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Ns(G,g,h,T),h.elementType=c,h.type=j,h.lanes=I,h}function vl(c,h,g,j){return c=Ns(7,c,j,h),c.lanes=g,c}function P0(c,h,g,j){return c=Ns(22,c,j,h),c.elementType=re,c.lanes=g,c.stateNode={isHidden:!1},c}function iy(c,h,g){return c=Ns(6,c,null,h),c.lanes=g,c}function oy(c,h,g){return h=Ns(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function t7(c,h,g,j,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kt(0),this.expirationTimes=Kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function ly(c,h,g,j,T,I,G,de,pe){return c=new t7(c,h,g,de,pe),h===1?(h=1,I===!0&&(h|=8)):h=0,I=Ns(3,null,null,h),c.current=I,I.stateNode=c,I.memoizedState={element:j,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},wx(I),c}function r7(c,h,g){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:j==null?null:""+j,children:c,containerInfo:h,implementation:g}}function V_(c){if(!c)return So;c=c._reactInternals;e:{if(ie(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(za(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(za(g))return wS(c,g,h)}return h}function G_(c,h,g,j,T,I,G,de,pe){return c=ly(g,j,!0,c,T,I,G,de,pe),c.context=V_(null),g=c.current,j=Pa(),T=Po(g),I=zi(j,T),I.callback=h??null,To(g,I,T),c.current.lanes=T,Ht(c,T,j),Va(c,j),c}function I0(c,h,g,j){var T=h.current,I=Pa(),G=Po(T);return g=V_(g),h.context===null?h.context=g:h.pendingContext=g,h=zi(I,G),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=To(T,h,G),c!==null&&(Gs(c,T,G,I),u0(c,T,G)),G}function D0(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Y_(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function cy(c,h){Y_(c,h),(c=c.alternate)&&Y_(c,h)}function n7(){return null}var X_=typeof reportError=="function"?reportError:function(c){console.error(c)};function uy(c){this._internalRoot=c}M0.prototype.render=uy.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));I0(c,h,null,null)},M0.prototype.unmount=uy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;gl(function(){I0(null,c,null,null)}),h[Li]=null}};function M0(c){this._internalRoot=c}M0.prototype.unstable_scheduleHydration=function(c){if(c){var h=Fr();c={blockedOn:null,target:c,priority:h};for(var g=0;g<Us.length&&h!==0&&h<Us[g].priority;g++);Us.splice(g,0,c),g===0&&$i(c)}};function dy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function R0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function J_(){}function a7(c,h,g,j,T){if(T){if(typeof j=="function"){var I=j;j=function(){var Re=D0(G);I.call(Re)}}var G=G_(h,j,c,0,null,!1,!1,"",J_);return c._reactRootContainer=G,c[Li]=G.current,xd(c.nodeType===8?c.parentNode:c),gl(),G}for(;T=c.lastChild;)c.removeChild(T);if(typeof j=="function"){var de=j;j=function(){var Re=D0(pe);de.call(Re)}}var pe=ly(c,0,!1,null,null,!1,!1,"",J_);return c._reactRootContainer=pe,c[Li]=pe.current,xd(c.nodeType===8?c.parentNode:c),gl(function(){I0(h,pe,g,j)}),pe}function F0(c,h,g,j,T){var I=g._reactRootContainer;if(I){var G=I;if(typeof T=="function"){var de=T;T=function(){var pe=D0(G);de.call(pe)}}I0(h,G,c,T)}else G=a7(g,h,c,T,j);return D0(G)}dr=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var g=je(h.pendingLanes);g!==0&&(Bt(h,g|1),Va(h,Qe()),(jr&6)===0&&(Ic=Qe()+500,_o()))}break;case 13:gl(function(){var j=qi(c,1);if(j!==null){var T=Pa();Gs(j,c,1,T)}}),cy(c,1)}},Le=function(c){if(c.tag===13){var h=qi(c,134217728);if(h!==null){var g=Pa();Gs(h,c,134217728,g)}cy(c,134217728)}},ot=function(c){if(c.tag===13){var h=Po(c),g=qi(c,h);if(g!==null){var j=Pa();Gs(g,c,h,j)}cy(c,h)}},Fr=function(){return xt},Or=function(c,h){var g=xt;try{return xt=c,h()}finally{xt=g}},st=function(c,h,g){switch(h){case"input":if(Se(c,g),h=g.name,g.type==="radio"&&h!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<g.length;h++){var j=g[h];if(j!==c&&j.form===c.form){var T=e0(j);if(!T)throw Error(r(90));q(j),Se(j,T)}}}break;case"textarea":kt(c,g);break;case"select":h=g.value,h!=null&&He(c,!!g.multiple,h,!1)}},ar=ry,gt=gl;var s7={usingClientEntryPoint:!1,Events:[bd,bc,e0,mt,It,ry]},Dd={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i7={bundleType:Dd.bundleType,version:Dd.version,rendererPackageName:Dd.rendererPackageName,rendererConfig:Dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ue(c),c===null?null:c.stateNode},findFiberByHostInstance:Dd.findFiberByHostInstance||n7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{Cr=$0.inject(i7),Br=$0}catch{}}return Ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s7,Ga.createPortal=function(c,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(h))throw Error(r(200));return r7(c,h,null,g)},Ga.createRoot=function(c,h){if(!dy(c))throw Error(r(299));var g=!1,j="",T=X_;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),h=ly(c,1,!1,null,null,g,!1,j,T),c[Li]=h.current,xd(c.nodeType===8?c.parentNode:c),new uy(h)},Ga.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ue(h),c=c===null?null:c.stateNode,c},Ga.flushSync=function(c){return gl(c)},Ga.hydrate=function(c,h,g){if(!R0(h))throw Error(r(200));return F0(null,c,h,!0,g)},Ga.hydrateRoot=function(c,h,g){if(!dy(c))throw Error(r(405));var j=g!=null&&g.hydratedSources||null,T=!1,I="",G=X_;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onRecoverableError!==void 0&&(G=g.onRecoverableError)),h=G_(h,null,c,1,g??null,T,!1,I,G),c[Li]=h.current,xd(c),j)for(c=0;c<j.length;c++)g=j[c],T=g._getVersion,T=T(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,T]:h.mutableSourceEagerHydrationData.push(g,T);return new M0(h)},Ga.render=function(c,h,g){if(!R0(h))throw Error(r(200));return F0(null,c,h,!1,g)},Ga.unmountComponentAtNode=function(c){if(!R0(c))throw Error(r(40));return c._reactRootContainer?(gl(function(){F0(null,null,c,!1,function(){c._reactRootContainer=null,c[Li]=null})}),!0):!1},Ga.unstable_batchedUpdates=ry,Ga.unstable_renderSubtreeIntoContainer=function(c,h,g,j){if(!R0(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return F0(c,h,g,!1,j)},Ga.version="18.3.1-next-f1338f8080-20240426",Ga}var sE;function d6(){if(sE)return py.exports;sE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),py.exports=p7(),py.exports}var iE;function m7(){if(iE)return B0;iE=1;var e=d6();return B0.createRoot=e.createRoot,B0.hydrateRoot=e.hydrateRoot,B0}var g7=m7(),L=q2();const he=Mr(L),x7=l7({__proto__:null,default:he},[L]),Hm={fresh_produce:" Fresh Vegetables",spices_seasonings:" Grocery",dairy:" Dairy Products",meat:" Meat",packaging:" Packaging Materials",staff_essentials:" Staff Essentials"},oE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},z2={fuel:" Fuel Cost",travel:" Travel by Employee",transportation:" Goods Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",emergency_online:" Emergency Online Order (Blinkit)",personal_expense:" Personal Expense By an Employee",miscellaneous:" Miscellaneous Cost"},W2={electricity:" Electricity",rent:" Rent",lpg_gas:" LPG Gas Cost (Cylinders)"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v7=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),lE=e=>{const t=v7(e);return t.charAt(0).toUpperCase()+t.slice(1)},h6=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=L.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},u)=>L.createElement("svg",{ref:u,...b7,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:h6("lucide",s),...l},[...o.map(([d,f])=>L.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(e,t)=>{const r=L.forwardRef(({className:n,...s},i)=>L.createElement(w7,{ref:i,iconNode:t,className:h6(`lucide-${y7(lE(e))}`,`lucide-${e}`,n),...s}));return r.displayName=lE(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],q1=dt("activity",j7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],k7=dt("arrow-right",N7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cE=dt("award",S7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yp=dt("bell",_7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],vp=dt("briefcase",E7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],bp=dt("bug",T7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Vo=dt("building-2",C7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dr=dt("calendar",A7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P7=dt("chart-column",O7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zi=dt("check",I7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],M7=dt("chef-hat",D7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qm=dt("chevron-down",R7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z1=dt("chevron-left",F7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Go=dt("chevron-right",$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],f6=dt("chevron-up",L7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],U7=dt("circle-arrow-down",B7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hr=dt("circle-alert",H7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],uE=dt("circle-arrow-up",q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fr=dt("circle-check-big",z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hi=dt("circle-x",W7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],dE=dt("clipboard-check",K7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],G7=dt("clipboard-list",V7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Zn=dt("clock",Y7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],J7=dt("copy",X7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Jn=dt("dollar-sign",Q7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wi=dt("download",Z7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W1=dt("eye",e9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],On=dt("factory",t9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],wp=dt("file-spreadsheet",r9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Si=dt("file-text",n9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],s9=dt("hash",a9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],o9=dt("info",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],c9=dt("key-round",l9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],d9=dt("key",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],f9=dt("layers",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],m9=dt("loader",p9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],K1=dt("lock",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],y9=dt("log-in",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],U0=dt("log-out",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],wh=dt("mail",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],K2=dt("map-pin",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],hE=dt("menu",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],p6=dt("network",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],rr=dt("package",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ji=dt("pen",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],H0=dt("phone",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ao=dt("plus",E9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],C9=dt("receipt",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jp=dt("refresh-cw",A9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zl=dt("save",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],I9=dt("search",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Np=dt("send",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qo=dt("settings",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],F9=dt("shopping-bag",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Vc=dt("shopping-cart",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],B9=dt("smartphone",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],H9=dt("soup",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ls=dt("square-check-big",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],V1=dt("square-pen",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Ci=dt("store",W9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],V9=dt("table",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],V2=dt("target",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ps=dt("trash-2",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],G2=dt("trending-down",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],pn=dt("trending-up",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Cn=dt("triangle-alert",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],G1=dt("trophy",Z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fE=dt("truck",eB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Kd=dt("upload",tB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],nB=dt("user-check",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],ni=dt("user-cog",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ni=dt("user-plus",sB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],pE=dt("user-x",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ka=dt("user",oB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],wn=dt("users",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ji=dt("wallet",cB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],en=dt("x",uB),ja="xssxnhrzxvtejavoqgwg",Pn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function zm(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function dB(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{d(n.next(f))}catch(p){o(p)}}function u(f){try{d(n.throw(f))}catch(p){o(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,u)}d((n=n.apply(e,t||[])).next())})}const hB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Y2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fB extends Y2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class mE extends Y2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gE extends Y2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Y1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Y1||(Y1={}));class pB{constructor(t,{headers:r={},customFetch:n,region:s=Y1.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=hB(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return dB(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:u,body:d,signal:f,timeout:p}=n;let m={},{region:x}=n;x||(x=this.region);const v=new URL(`${this.url}/${r}`);x&&x!=="any"&&(m["x-region"]=x,v.searchParams.set("forceFunctionRegion",x));let y;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?y=JSON.stringify(d):y=d;let b=f;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),f?(b=o.signal,f.addEventListener("abort",()=>o.abort())):b=o.signal);const N=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y,signal:b}).catch(S=>{throw new fB(S)}),k=N.headers.get("x-relay-error");if(k&&k==="true")throw new mE(N);if(!N.ok)throw new gE(N);let w=((s=N.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return w==="application/json"?P=yield N.json():w==="application/octet-stream"||w==="application/pdf"?P=yield N.blob():w==="text/event-stream"?P=N:w==="multipart/form-data"?P=yield N.formData():P=yield N.text(),{data:P,error:null,response:N}}catch(l){return{data:null,error:l,response:l instanceof gE||l instanceof mE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var mB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},gB=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,u=null,d=i.status,f=i.statusText;if(i.ok){var p,m;if(r.method!=="HEAD"){var x;const N=await i.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=N:l=JSON.parse(N))}const y=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),b=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");y&&b&&b.length>1&&(u=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,d=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,f="OK")}catch{i.status===404&&y===""?(d=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,d=200,f="OK"),o&&r.shouldThrowOnError)throw new mB(o)}return{error:o,data:l,count:u,status:d,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const u=i?.cause;if(u){var d,f,p,m;const v=(d=u?.message)!==null&&d!==void 0?d:"",y=(f=u?.code)!==null&&f!==void 0?f:"";l=`${(p=i?.name)!==null&&p!==void 0?p:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(m=u?.name)!==null&&m!==void 0?m:"Error"}: ${v}`,y&&(l+=` (${y})`),u?.stack&&(l+=`
${u.stack}`)}else{var x;l=(x=i?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},xB=class extends gB{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const xE=new RegExp("[,()]");var Gc=class extends xB{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&xE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&xE.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},yB=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:u}=this.cloneRequestState();return l.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new Gc({method:s,url:l,headers:u,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",u.join(","))}}return new Gc({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&u.append("Prefer",`count=${n}`),s||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);l.searchParams.set("columns",f.join(","))}}return new Gc({method:o,url:l,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Gc({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Gc({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},vB=class m6{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new yB(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new m6(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${t}`);let d;const f=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(f)),p=n&&Object.values(r).some(f);p?(l="POST",d=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{u.searchParams.append(x,v)})):(l="POST",d=r);const m=new Headers(this.headers);return p?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new Gc({method:l,url:u,headers:m,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class bB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wB="2.90.1",jB=`realtime-js/${wB}`,g6="1.0.0",NB="2.0.0",yE=g6,X1=1e4,kB=1e3,SB=100;var $o;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($o||($o={}));var Ln;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ln||(Ln={}));var ei;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ei||(ei={}));var J1;(function(e){e.websocket="websocket"})(J1||(J1={}));var Cl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cl||(Cl={}));class _B{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(f).length===0?"":JSON.stringify(f);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+p.length,x=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(x),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,u.length),v.setUint8(y++,l.length),v.setUint8(y++,o.length),v.setUint8(y++,d.length),v.setUint8(y++,p.length),v.setUint8(y++,r),Array.from(u,N=>v.setUint8(y++,N.charCodeAt(0))),Array.from(l,N=>v.setUint8(y++,N.charCodeAt(0))),Array.from(o,N=>v.setUint8(y++,N.charCodeAt(0))),Array.from(d,N=>v.setUint8(y++,N.charCodeAt(0))),Array.from(p,N=>v.setUint8(y++,N.charCodeAt(0)));var b=new Uint8Array(x.byteLength+n.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(n),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,u]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const d=n.decode(t.slice(u,u+s));u=u+s;const f=n.decode(t.slice(u,u+i));u=u+i;const p=n.decode(t.slice(u,u+o));u=u+o;const m=t.slice(u,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:f,payload:x};return o>0&&(v.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class x6{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Kr||(Kr={}));const vE=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=EB(o,e,t,s),i),{}):{}},EB=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!n.includes(i)?y6(i,o):Q1(o)},y6=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OB(t,r)}switch(e){case Kr.bool:return TB(t);case Kr.float4:case Kr.float8:case Kr.int2:case Kr.int4:case Kr.int8:case Kr.numeric:case Kr.oid:return CB(t);case Kr.json:case Kr.jsonb:return AB(t);case Kr.timestamp:return PB(t);case Kr.abstime:case Kr.date:case Kr.daterange:case Kr.int4range:case Kr.int8range:case Kr.money:case Kr.reltime:case Kr.text:case Kr.time:case Kr.timestamptz:case Kr.timetz:case Kr.tsrange:case Kr.tstzrange:return Q1(t);default:return Q1(t)}},Q1=e=>e,TB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},CB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},AB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},OB=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>y6(t,l))}return e},PB=e=>typeof e=="string"?e.replace(" ","T"):e,v6=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class xy{constructor(t,r,n={},s=X1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bE;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bE||(bE={}));class rh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rh.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=rh.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rh.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(d,f)=>{o[d]||(u[d]=f)}),this.map(o,(d,f)=>{const p=i[d];if(p){const m=f.map(b=>b.presence_ref),x=p.map(b=>b.presence_ref),v=f.filter(b=>x.indexOf(b.presence_ref)<0),y=p.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[d]=v),y.length>0&&(u[d]=y)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),f.length>0){const p=t[l].map(x=>x.presence_ref),m=f.filter(x=>p.indexOf(x.presence_ref)<0);t[l].unshift(...m)}n(l,f,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const f=u.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),t[l]=d,s(l,d,u),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wE;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wE||(wE={}));var nh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nh||(nh={}));var Yi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Yi||(Yi={}));class Qc{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xy(this,ei.join,this.params,this.timeout),this.rejoinTimer=new x6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ln.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ei.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new rh(this),this.broadcastEndpointURL=v6(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ln.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[nh.PRESENCE]&&this.bindings[nh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t?.(Yi.CHANNEL_ERROR,x)),this._onClose(()=>t?.(Yi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t?.(Yi.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(v=y?.length)!==null&&v!==void 0?v:0,N=[];for(let k=0;k<b;k++){const w=y[k],{filter:{event:P,schema:S,table:_,filter:E}}=w,C=x&&x[k];if(C&&C.event===P&&Qc.isFilterValueEqual(C.schema,S)&&Qc.isFilterValueEqual(C.table,_)&&Qc.isFilterValueEqual(C.filter,E))N.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Ln.errored,t?.(Yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Yi.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ln.errored,t?.(Yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t?.(Yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ln.joined&&t===nh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ln.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ei.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new xy(this,ei.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ln.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xy(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>SB){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:f}=ei;if(n&&[l,u,d,f].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var v,y,b;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(y=x.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var v,y,b,N,k,w,P,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const _=x.id,E=(v=x.filter)===null||v===void 0?void 0:v.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(E==="*"||E?.toLocaleLowerCase()===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((N=x.filter)===null||N===void 0)&&N.table)||x.filter.table===((k=r.data)===null||k===void 0?void 0:k.table))}else{const _=(P=(w=x?.filter)===null||w===void 0?void 0:w.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return _==="*"||_===((S=r?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:y,table:b,commit_timestamp:N,type:k,errors:w}=v;m=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:N,eventType:k,new:{},old:{},errors:w}),this._getPayloadRecords(v))}x.callback(m,n)})}_isClosed(){return this.state===Ln.closed}_isJoined(){return this.state===Ln.joined}_isJoining(){return this.state===Ln.joining}_isLeaving(){return this.state===Ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Qc.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ei.close,{},t)}_onError(t){this._on(ei.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vE(t.columns,t.old_record)),r}}const yy=()=>{},q0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IB=[1e3,2e3,5e3,1e4],DB=1e4,MB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RB{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=X1,this.transport=null,this.heartbeatIntervalMs=q0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yy,this.ref=0,this.reconnectTimer=null,this.vsn=yE,this.logger=yy,this.conn=null,this.sendBuffer=[],this.serializer=new _B,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${J1.websocket}`,this.httpEndpoint=v6(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $o.connecting:return Cl.Connecting;case $o.open:return Cl.Open;case $o.closing:return Cl.Closing;default:return Cl.Closed}}isConnected(){return this.connectionState()===Cl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Qc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(kB,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},q0.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===$o.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$o.open||this.conn.readyState===$o.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ei.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([MB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:jB};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(ei.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new x6(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},q0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,u,d,f,p,m,x;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:X1,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:q0.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:yy,this.vsn=(u=t?.vsn)!==null&&u!==void 0?u:yE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(v=>IB[v-1]||DB),this.vsn){case g6:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((v,y)=>y(JSON.stringify(v))),this.decode=(p=t?.decode)!==null&&p!==void 0?p:((v,y)=>y(JSON.parse(v)));break;case NB:this.encode=(m=t?.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var jh=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function FB(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function $B(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function LB(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=FB(e.baseUrl,n,s),u=await $B(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),f=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),m=p&&f?JSON.parse(f):f;if(!d.ok){const x=p?m:void 0,v=x?.error;throw new jh(v?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:v?.type,icebergCode:v?.code,details:x})}return{status:d.status,headers:d.headers,data:m}}}}function z0(e){return e.join("")}var BB=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:z0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${z0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${z0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${z0(e.namespace)}`}),!0}catch(t){if(t instanceof jh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof jh&&r.status===409)return;throw r}}};function Mc(e){return e.join("")}var UB=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mc(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof jh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof jh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},HB=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=LB({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new BB(this.client,t),this.tableOps=new UB(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Wm=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function cn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var qB=class extends Wm{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Z1=class extends Wm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const X2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),zB=()=>Response,ej=e=>{if(Array.isArray(e))return e.map(r=>ej(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ej(n)}),t},WB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},KB=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Nh(e){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}function VB(e,t){if(Nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GB(e){var t=VB(e,"string");return Nh(t)=="symbol"?t:t+""}function YB(e,t,r){return(t=GB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(r),!0).forEach(function(n){YB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const vy=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},XB=async(e,t,r)=>{e instanceof await zB()&&!r?.noResolveJson?e.json().then(n=>{const s=e.status||500,i=n?.statusCode||s+"";t(new qB(vy(n),s,i))}).catch(n=>{t(new Z1(vy(n),n))}):t(new Z1(vy(e),e))},JB=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||!n?s:(WB(n)?(s.headers=Jt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,t?.duplex&&(s.duplex=t.duplex),Jt(Jt({},s),r))};async function kf(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,JB(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>XB(u,l,n))})}async function kh(e,t,r,n){return kf(e,"GET",t,r,n)}async function Zs(e,t,r,n,s){return kf(e,"POST",t,n,s,r)}async function tj(e,t,r,n,s){return kf(e,"PUT",t,n,s,r)}async function QB(e,t,r,n){return kf(e,"HEAD",t,Jt(Jt({},r),{},{noResolveJson:!0}),n)}async function J2(e,t,r,n,s){return kf(e,"DELETE",t,n,s,r)}var ZB=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}}};let b6;b6=Symbol.toStringTag;var eU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[b6]="BlobDownloadBuilder",this.promise=null}asStream(){return new ZB(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}}};const tU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},NE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var rU=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=X2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=Jt(Jt({},NE),n);let l=Jt(Jt({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(l=Jt(Jt({},l),n.headers));const d=s._removeEmptyFolders(t),f=s._getFinalPath(d),p=await(e=="PUT"?tj:Zs)(s.fetch,`${s.url}/object/${f}`,i,Jt({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let u;const d=Jt({upsert:NE.upsert},n),f=Jt(Jt({},s.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType),{data:{path:i,fullPath:(await tj(s.fetch,l.toString(),u,{headers:f})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(cn(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=Jt({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await Zs(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Wm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Zs(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Zs(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Zs(n.fetch,`${n.url}/object/sign/${s}`,Jt({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Zs(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Jt(Jt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>kh(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new eU(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:ej(await kh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await QB(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(cn(n)&&n instanceof Z1){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await J2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=Jt(Jt(Jt({},tU),t),{},{prefix:e||""});return{data:await Zs(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=Jt({},e);return{data:await Zs(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const w6="2.90.1",j6={"X-Client-Info":`storage-js/${w6}`};var nU=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Jt(Jt({},j6),t),this.fetch=X2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await kh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await kh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Zs(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await tj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(cn(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Zs(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await J2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},aU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},j6),t),this.fetch=X2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Zs(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await kh(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await J2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!KB(e))throw new Wm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new HB({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const Q2={"X-Client-Info":`storage-js/${w6}`,"Content-Type":"application/json"};var N6=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function us(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var by=class extends N6{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sU=class extends N6{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Z2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kE=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oU=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=i?.statusCode||i?.code||n+"";t(new by(kE(i),n,o))}).catch(()=>{const i=n+"";t(new by(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new by(s.statusText||`HTTP ${n} error`,n,i))}}else t(new sU(kE(e),e))},lU=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return n?(iU(n)?(s.headers=Jt({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(n)):s.body=n,Jt(Jt({},s),r)):s};async function cU(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,lU(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>oU(u,l,n))})}async function ds(e,t,r,n,s){return cU(e,"POST",t,n,s,r)}var uU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},Q2),t),this.fetch=Z2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await ds(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(us(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await ds(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(us(n))return{data:null,error:n};throw n}}},dU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},Q2),t),this.fetch=Z2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ds(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ds(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ds(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}},hU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Jt(Jt({},Q2),t),this.fetch=Z2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await ds(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ds(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}}},fU=class extends hU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new pU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},pU=class extends uU{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new mU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},mU=class extends dU{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Jt(Jt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},gU=class extends nU{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new rU(this.url,this.headers,e,this.fetch)}get vectors(){return new fU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aU(this.url+"/iceberg",this.headers,this.fetch)}};const k6="2.90.1",Yc=30*1e3,rj=3,wy=rj*Yc,xU="http://localhost:9999",yU="supabase.auth.token",vU={"X-Client-Info":`gotrue-js/${k6}`},nj="X-Supabase-Api-Version",S6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wU=600*1e3;class Sh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $t(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class jU extends Sh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function NU(e){return $t(e)&&e.name==="AuthApiError"}class Al extends Sh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class mo extends Sh{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class as extends mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kU(e){return $t(e)&&e.name==="AuthSessionMissingError"}class Rc extends mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class W0 extends mo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class K0 extends mo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SU(e){return $t(e)&&e.name==="AuthImplicitGrantRedirectError"}class SE extends mo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _U extends mo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class aj extends mo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function jy(e){return $t(e)&&e.name==="AuthRetryableFetchError"}class _E extends mo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sj extends mo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const kp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EE=` 	
\r=`.split(""),EU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<EE.length;t+=1)e[EE[t].charCodeAt(0)]=-2;for(let t=0;t<kp.length;t+=1)e[kp[t].charCodeAt(0)]=t;return e})();function TE(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kp[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kp[n]),t.queuedBits-=6}}function _6(e,t,r){const n=EU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function CE(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{AU(o,n,r)};for(let o=0;o<e.length;o+=1)_6(e.charCodeAt(o),s,i);return t.join("")}function TU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}TU(n,t)}}function AU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function su(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_6(e.charCodeAt(s),r,n);return new Uint8Array(t)}function OU(e){const t=[];return CU(e,r=>t.push(r)),new Uint8Array(t)}function Il(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>TE(s,r,n)),TE(null,r,n),t.join("")}function PU(e){return Math.round(Date.now()/1e3)+e}function IU(){return Symbol("auth-callback")}const ia=()=>typeof window<"u"&&typeof document<"u",bl={tested:!1,writable:!1},E6=()=>{if(!ia())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function DU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const T6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},sa=async(e,t)=>{await e.removeItem(t)};class Km{constructor(){this.promise=new Km.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Km.promiseConstructor=Promise;function Ny(e){const t=e.split(".");if(t.length!==3)throw new sj("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!bU.test(t[n]))throw new sj("JWT not in base64url format");return{header:JSON.parse(CE(t[0])),payload:JSON.parse(CE(t[1])),signature:su(t[2]),raw:{header:t[0],payload:t[1]}}}async function RU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FU(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function $U(e){return("0"+e.toString(16)).substr(-2)}function LU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,$U).join("")}async function BU(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function UU(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await BU(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fc(e,t,r=!1){const n=LU();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Xc(e,`${t}-code-verifier`,s);const i=await UU(n);return[i,n===i?"plain":"s256"]}const HU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qU(e){const t=e.headers.get(nj);if(!t||!t.match(HU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zU(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $c(e){if(!KU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ky(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VU(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function AE(e){return JSON.parse(JSON.stringify(e))}const _l=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GU=[502,503,504];async function OE(e){var t;if(!MU(e))throw new aj(_l(e),0);if(GU.includes(e.status))throw new aj(_l(e),e.status);let r;try{r=await e.json()}catch(i){throw new Al(_l(i),i)}let n;const s=qU(e);if(s&&s.getTime()>=S6["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new _E(_l(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new as}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new _E(_l(r),e.status,r.weak_password.reasons);throw new jU(_l(r),e.status||500,n)}const YU=(e,t,r,n)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Xt(e,t,r,n){var s;const i=Object.assign({},n?.headers);i[nj]||(i[nj]=S6["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await XU(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function XU(e,t,r,n,s,i){const o=YU(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new aj(_l(u),0)}if(l.ok||await OE(l),n?.noResolveJson)return l;try{return await l.json()}catch(u){await OE(u)}}function Qs(e){var t;let r=null;ZU(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=PU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function PE(e){const t=Qs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function JU(e){return{data:e,error:null}}function QU(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=zm(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function IE(e){return e}function ZU(e){return e.access_token&&e.refresh_token&&e.expires_in}const Sy=["global","local","others"];class eH{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=T6(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Sy[0]){if(Sy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sy.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=zm(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QU,redirectTo:r?.redirectTo})}catch(r){if($t(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:IE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if($t(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){$c(t);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){$c(t);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){$c(t);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){$c(t.userId);try{const{data:r,error:n}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _deleteFactor(t){$c(t.userId),$c(t.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:IE});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if($t(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}}function DE(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Lc={debug:!!(globalThis&&E6()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class C6 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tH extends C6{}async function rH(e,t,r){Lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Lc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Lc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tH(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Lc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function nH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function A6(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function aH(e){return parseInt(e,16)}function sH(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function iH(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:f,uri:p,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=A6(e.address),v=f?`${f}://${n}`:n,y=e.statement?`${e.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${x}

${y}`;let N=`URI: ${p}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),l&&(N+=`
Not Before: ${l.toISOString()}`),u&&(N+=`
Request ID: ${u}`),d){let k=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);k+=`
- ${w}`}N+=k}return`${b}
${N}`}class Tn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Sp extends Tn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function oH({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Tn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Tn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Tn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Tn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Tn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Tn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Tn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(O6(o)){if(i.rp.id!==o)return new Tn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Tn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Tn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lH({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Tn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Tn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(O6(n)){if(r.rpId!==n)return new Tn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Tn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class cH{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uH=new cH;function dH(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=zm(e,["challenge","user","excludeCredentials"]),i=su(t).buffer,o=Object.assign(Object.assign({},r),{id:su(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:su(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function hH(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=zm(e,["challenge","allowCredentials"]),s=su(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:su(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function fH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Il(new Uint8Array(e.response.attestationObject)),clientDataJSON:Il(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function pH(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Il(new Uint8Array(s.authenticatorData)),clientDataJSON:Il(new Uint8Array(s.clientDataJSON)),signature:Il(new Uint8Array(s.signature)),userHandle:s.userHandle?Il(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function O6(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ME(){var e,t;return!!(ia()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function mH(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sp("Browser returned unexpected credential type",t)}:{data:null,error:new Sp("Empty credential response",t)}}catch(t){return{data:null,error:oH({error:t,options:e})}}}async function gH(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sp("Browser returned unexpected credential type",t)}:{data:null,error:new Sp("Empty credential response",t)}}catch(t){return{data:null,error:lH({error:t,options:e})}}}const xH={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},yH={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _p(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=_p(l,o):n[i]=_p(o)}else n[i]=o}return n}function vH(e,t){return _p(xH,e,t||{})}function bH(e,t){return _p(yH,e,t||{})}class wH{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=s??uH.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=vH(o.webauthn.credential_options.publicKey,i?.create),{data:f,error:p}=await mH({publicKey:d,signal:u});return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const d=bH(o.webauthn.credential_options.publicKey,i?.request),{data:f,error:p}=await gH(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Al("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Sh("rpId is required for WebAuthn authentication")};try{if(!ME())return{data:null,error:new Al("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Al("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Sh("rpId is required for WebAuthn registration")};try{if(!ME())return{data:null,error:new Al("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Al("Unexpected error in register",o)}}}}nH();const jH={url:xU,storageKey:yU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function RE(e,t,r){return await r()}const Bc={};class _h{get jwks(){var t,r;return(r=(t=Bc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Bc[this.storageKey]=Object.assign(Object.assign({},Bc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Bc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Bc[this.storageKey]=Object.assign(Object.assign({},Bc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},jH),t);if(this.storageKey=i.storageKey,this.instanceID=(r=_h.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,_h.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ia()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new eH({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=T6(i.fetch),this.lock=i.lock||RE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ia()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=rH:this.lock=RE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wH(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:E6()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=DE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=DE(this.memoryStorage)),ia()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${k6}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ia()&&(r=DU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ia()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SU(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $t(r)?this._returnResult({error:r}):this._returnResult({error:new Al("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Qs}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if($t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:m}=t;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await Fc(this.storage,this.storageKey)),i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:f,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:x,code_challenge_method:v},xform:Qs})}else if("phone"in t){const{phone:f,password:p,options:m}=t;i=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Qs})}else throw new W0("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await sa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:PE})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:PE})}else throw new W0("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Rc;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,u,d,f,p,m;let x,v;if("message"in t)x=t.message,v=t.signature;else{const{chain:y,wallet:b,statement:N,options:k}=t;let w;if(ia())if(typeof b=="object")w=b;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")w=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const P=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=A6(S[0]);let E=(n=k?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const M=await w.request({method:"eth_chainId"});E=aH(M)}const C={domain:P.host,address:_,statement:N,uri:P.href,version:"1",chainId:E,nonce:(s=k?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=k?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=k?.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=iH(C),v=await w.request({method:"personal_sign",params:[sH(x),_]})}try{const{data:y,error:b}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:v},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Qs});if(b)throw b;if(!y||!y.session||!y.user){const N=new Rc;return this._returnResult({data:{user:null,session:null},error:N})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:b})}catch(y){if($t(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,u,d,f,p,m,x;let v,y;if("message"in t)v=t.message,y=t.signature;else{const{chain:b,wallet:N,statement:k,options:w}=t;let P;if(ia())if(typeof N=="object")P=N;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))P=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=N}const S=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const _=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),k?{statement:k}:null));let E;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")E=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)E=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)v=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=w?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(f=w?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const _=await P.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=_}}try{const{data:b,error:N}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Il(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qs});if(N)throw N;if(!b||!b.session||!b.user){const k=new Rc;return this._returnResult({data:{user:null,session:null},error:k})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:N})}catch(b){if($t(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await wl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new _U;const{data:i,error:o}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Qs});if(await sa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Rc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Qs}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const f=new Rc;return this._returnResult({data:{user:null,session:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Fc(this.storage,this.storageKey));const{error:p}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:f}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u?.data)!==null&&s!==void 0?s:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new W0("You must provide either an email or phone number.")}catch(l){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Qs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if($t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Fc(this.storage,this.storageKey));const d=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:JU});return!((i=d.data)===null||i===void 0)&&i.url&&ia()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new as;const{error:s}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if($t(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new W0("You must provide either an email or phone number and a type")}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<wy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await wl(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=ky()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=VU(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bo}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new as}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Bo})})}catch(r){if($t(r))return kU(r)&&(await this._removeSession(),await sa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new as;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Fc(this.storage,this.storageKey));const{data:d,error:f}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Bo});if(f)throw f;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new as;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Ny(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if($t(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new as;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($t(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ia())throw new K0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new K0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new SE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new K0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new SE("No code detected.");const{data:k,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!i||!l||!o||!d)throw new K0("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(l);let m=f+p;u&&(m=parseInt(u));const x=m-f;x*1e3<=Yc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const v=m-p;f-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,f):f-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,f);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const N={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if($t(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(NU(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await sa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=IU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Fc(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,d,f;const{data:p,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ia()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if($t(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:u,access_token:d,nonce:f}=t,p=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Qs}),{data:m,error:x}=p;return x?this._returnResult({data:{user:null,session:null},error:x}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Rc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:x}))}catch(s){if(await sa(this.storage,`${this.storageKey}-code-verifier`),$t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await FU(async s=>(s>0&&await RU(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qs})),(s,i)=>{const o=200*Math.pow(2,s);return i&&jy(i)&&Date.now()+o-n<Yc})}catch(n){if(this._debug(r,"error",n),$t(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ia()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await wl(this.storage,this.storageKey);if(s&&this.userStorage){let o=await wl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Xc(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:ky()}else if(s&&!s.user&&!s.user){const o=await wl(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await sa(this.storage,this.storageKey+"-user"),await Xc(this.storage,this.storageKey,s)):s.user=ky()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<wy;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${wy}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),jy(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new as;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Km;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new as;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),$t(i)){const o={data:null,error:i};return jy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await sa(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Xc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=AE(s);await Xc(this.storage,this.storageKey,i)}else{const s=AE(r);await Xc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await sa(this.storage,this.storageKey),await sa(this.storage,this.storageKey+"-code-verifier"),await sa(this.storage,this.storageKey+"-user"),this.userStorage&&await sa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ia()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Yc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yc}ms, refresh threshold is ${rj} ticks`),s<=rj&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof C6)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ia()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Fc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u?.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?fH(t.webauthn.credential_response):pH(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:dH(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:hH(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ny(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new as})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new as});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ia()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new as});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ia()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new as})})}catch(t){if($t(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new as})})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+wU>s)return n;const{data:i,error:o}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:v}=await this.getSession();if(v||!x.session)return this._returnResult({data:null,error:v});n=x.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=Ny(n);r?.allowExpired||zU(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:o},error:null}}const f=WU(s.alg),p=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,o,OU(`${l}.${u}`)))throw new sj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}}_h.nextInstanceID={};const NH=_h,kH="2.90.1";let Vd="";typeof Deno<"u"?Vd="deno":typeof document<"u"?Vd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vd="react-native":Vd="node";const SH={"X-Client-Info":`supabase-js-${Vd}/${kH}`},_H={headers:SH},EH={schema:"public"},TH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CH={};function Eh(e){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh(e)}function AH(e,t){if(Eh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OH(e){var t=AH(e,"string");return Eh(t)=="symbol"?t:t+""}function PH(e,t,r){return(t=OH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){PH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const IH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),DH=()=>Headers,MH=(e,t,r)=>{const n=IH(r),s=DH();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let d=new s(o?.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(i,dn(dn({},o),{},{headers:d}))}};function RH(e){return e.endsWith("/")?e:e+"/"}function FH(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:d,realtime:f,global:p}=t,m={db:dn(dn({},u),s),auth:dn(dn({},d),i),realtime:dn(dn({},f),o),storage:{},global:dn(dn(dn({},p),l),{},{headers:dn(dn({},(r=p?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function $H(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(RH(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var LH=class extends NH{constructor(e){super(e)}},BH=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=$H(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:EH,realtime:CH,auth:dn(dn({},TH),{},{storageKey:o}),global:_H},u=FH(r??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=MH(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(dn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new vB(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new gU(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new pB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:u,throwOnError:d},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LH({url:this.authUrl.href,headers:dn(dn({},m),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:u,throwOnError:d,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new RB(this.realtimeUrl.href,dn(dn({},e),{},{params:dn(dn({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const UH=(e,t,r)=>new BH(e,t,r);function HH(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}HH()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Bu(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=UH(`https://${ja}.supabase.co`,Pn,{auth:{storageKey:`sb-${ja}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const We=`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d`;function or(){return Bu()}async function rc(){const e=or(),{data:{session:t}}=await e.auth.getSession();return t}let $E=!1;async function nt(e,t,r){const n=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!n.ok){let s="Request failed";try{const i=await n.json();s=i.error||i.message||`HTTP ${n.status}: ${n.statusText}`}catch{s=`HTTP ${n.status}: ${n.statusText}`}throw console.error(`API Error [${e}]:`,s),n.status===401&&!$E&&($E=!0,console.error("Session expired or invalid. Please log in again."),await or().auth.signOut(),sessionStorage.getItem("logout_redirect_in_progress")||(sessionStorage.setItem("logout_redirect_in_progress","true"),setTimeout(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),window.location.reload()},100))),new Error(s)}return n.json()}async function Vm(e){return(await nt(`${We}/inventory`,e)).inventory||[]}async function P6(e,t){return(await nt(`${We}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function I6(e,t,r){return(await nt(`${We}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function D6(e,t){await nt(`${We}/inventory/${t}`,e,{method:"DELETE"})}async function eN(e){return(await nt(`${We}/overheads`,e)).overheads||[]}async function M6(e,t){return(await nt(`${We}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function R6(e,t,r){return(await nt(`${We}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function F6(e,t){await nt(`${We}/overheads/${t}`,e,{method:"DELETE"})}async function $6(e){return(await nt(`${We}/fixed-costs`,e)).fixedCosts||[]}async function L6(e,t){return(await nt(`${We}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function B6(e,t,r){return(await nt(`${We}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function U6(e,t){await nt(`${We}/fixed-costs/${t}`,e,{method:"DELETE"})}async function H6(e){return await nt(`${We}/cleanup-duplicates`,e,{method:"POST"})}async function qH(e){return await nt(`${We}/sales/migrate-discrepancy`,e,{method:"POST"})}async function zH(e){return await nt(`${We}/migrate-stock-request-timestamps`,e,{method:"POST"})}async function WH(e,t,r,n){return await nt(`${We}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:n})})}async function tN(e){return(await nt(`${We}/sales`,e)).sales||[]}async function q6(e,t){return(await nt(`${We}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function z6(e,t,r){return(await nt(`${We}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function W6(e,t){return(await nt(`${We}/sales/${t}/approve`,e,{method:"POST"})).item}async function K6(e,t,r,n){return(await nt(`${We}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:n})})).item}async function V6(e,t){return(await nt(`${We}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function G6(e,t,r){return(await nt(`${We}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function rN(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/production`,t.access_token)).production||[]}async function Y6(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function X6(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/production/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function J6(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function Q6(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await nt(`${We}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function KH(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await nt(`${We}/clear-data`,t.access_token,{method:"DELETE"})}async function Z6(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await nt(`${We}/cleanup-production-data`,t.access_token,{method:"POST"})}async function eD(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await nt(`${We}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function tD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function rD(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await nt(`${We}/notifications/read-all`,t.access_token,{method:"PUT"})}async function Uu(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/stores`,t.access_token)).stores}async function nD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/stores`,n.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function aD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/stores/${e}/assign-manager`,n.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function sD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/stores/${e}/assign-production-house`,n.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function iD(e,t,r){const n=or(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function oD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await nt(`${We}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function VH(e){return await nt(`${We}/cleanup-duplicates`,e,{method:"POST"})}async function GH(e){return await nt(`${We}/migrate-production-house-system`,e,{method:"POST"})}async function Ps(e){if(e)return(await nt(`${We}/employees`,e)).employees||[];const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/employees`,r.access_token)).employees||[]}async function Zo(){return Ps()}async function lD(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/archived-employees`,t.access_token)).employees||[]}async function cD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${We}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to create employee")}return await n.json()}async function uD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${We}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function dD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=await fetch(`${We}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to delete employee")}return await n.json()}async function hD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");const s=await fetch(`${We}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function Wl(e,t){if(t)return(await nt(`${We}/unified-employees/manager/${e}`,t)).employees||[];const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/unified-employees/manager/${e}`,n.access_token)).employees||[]}async function Gm(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function fD(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${We}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to run migration")}return await r.json()}async function Ym(e,t){const r=await rc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${We}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign manager")}return await n.json()}async function pD(e,t){const r=await rc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${We}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update role")}return await n.json()}async function mD(e,t){const r=await rc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${We}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update store")}return await n.json()}async function gD(e,t,r){const n=await rc();if(!n)throw new Error("Not authenticated");const s=await fetch(`${We}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function xD(e,t){const r=await rc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${We}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to assign incharge")}return await n.json()}async function nN(e){const t=await rc();if(!t)throw new Error("Not authenticated");const r=await fetch(`${We}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to fetch employees")}return await r.json()}async function yD(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${We}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to sync designations")}return await r.json()}async function Xm(e,t){const r=await rc();if(!r)throw new Error("Not authenticated");const n=await fetch(`${We}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to update employee")}return await n.json()}async function Yo(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/payouts`,t.access_token)).payouts||[]}async function aN(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function vD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/payouts/${e}`,n.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function Ep(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await nt(`${We}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function Gd(e,t,r){try{const n=new URLSearchParams;e&&n.append("entityType",e),t&&n.append("entityId",t),r&&n.append("category",r);const s=await fetch(`${We}/inventory-items?${n.toString()}`,{headers:{Authorization:`Bearer ${Pn}`}});if(!s.ok){const o=await s.text();return console.error(" Error fetching inventory items:",o),[]}return(await s.json()).items||[]}catch(n){return console.error(" Error fetching inventory items:",n),[]}}async function bD(e){const t=await fetch(`${We}/inventory-items`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify(e)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create inventory item")}return(await t.json()).item}async function wD(e,t){const r=await fetch(`${We}/inventory-items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update inventory item")}return(await r.json()).item}async function YH(e){const t=await fetch(`${We}/inventory-items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pn}`}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete inventory item")}}async function jD(){const e=await fetch(`${We}/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${Pn}`}});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to initialize default items")}return(await e.json()).items||[]}async function XH(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await nt(`${We}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function ND(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const n=e?`${We}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${We}/organizational-hierarchy`,s=await nt(n,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function Th(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/timesheets/${e}`,r.access_token)).timesheets||[]}async function Hu(e,t){if(t)return(await nt(`${We}/leaves/${e}`,t)).leaves||[];const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/leaves/${e}`,n.access_token)).leaves||[]}async function kD(e){if(e)return(await nt(`${We}/leaves/all`,e)).leaves||[];const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/leaves/all`,r.access_token)).leaves||[]}async function SD(e){const t=or(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function _D(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/leaves/${e}/balance?joiningDate=${t}`,n.access_token)).balance||0}async function ij(e,t,r){const n=or(),{data:{session:s}}=await n.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await nt(`${We}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function ED(e,t,r,n){const s=or(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await nt(`${We}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:n})})}async function TD(){try{const e=await fetch(`${We}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function CD(e,t){const r=or(),{data:{session:n}}=await r.auth.getSession();if(!n?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/custom-items`,n.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function Jm(e){return(await nt(`${We}/production-requests`,e)).requests||[]}async function AD(e,t){return(await nt(`${We}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function OD(e,t,r,n){return(await nt(`${We}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:n})})).request}async function PD(e){return await nt(`${We}/production-requests/check-pending`,e,{method:"POST"})}async function Qm(e){return await nt(`${We}/sales-data`,e)}async function ID(e,t){return(await nt(`${We}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function DD(e,t){await nt(`${We}/sales-data/${e}`,t,{method:"DELETE"})}async function Ch(){const e=or(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await nt(`${We}/production-houses`,t.access_token)).productionHouses||[]}async function MD(e,t){return(await nt(`${We}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function RD(e,t,r){return(await nt(`${We}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function FD(e,t,r){return(await nt(`${We}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function $D(e,t,r){return(await nt(`${We}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function LD(e,t,r){return(await nt(`${We}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function BD(e,t,r){return await nt(`${We}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function UD(e,t){await nt(`${We}/production-houses/${t}`,e,{method:"DELETE"})}async function HD(e,t,r,n){const s=await nt(`${We}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:n})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function qD(e){return(await nt(`${We}/stock-requests`,e)).stockRequests||[]}async function zD(e,t){return(await nt(`${We}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function WD(e,t,r,n,s,i){return(await nt(`${We}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:n,fulfilledByName:s,notes:i})})).stockRequest}async function KD(e,t){return(await nt(`${We}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function VD(e){return await nt(`${We}/fix-stock-requests`,e,{method:"POST"})}async function GD(e,t){return await nt(`${We}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function Xo(e,t,r){const n=new Date().getTime(),s=r?`${We}/stock-recalibration/latest/${t}?locationType=${r}&_t=${n}`:`${We}/stock-recalibration/latest/${t}?_t=${n}`;return await nt(s,e)}const oj=Xo;async function YD(e,t,r){const n=r?`${We}/stock-recalibration/history/${t}?locationType=${r}`:`${We}/stock-recalibration/history/${t}`;return await nt(n,e)}async function XD(e){return await nt(`${We}/stock-recalibration/pending-approval`,e)}async function JD(e,t){return await nt(`${We}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function QD(e,t,r){return await nt(`${We}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function ZD(e,t){return(await nt(`${We}/stock-thresholds/${t}`,e)).thresholds}async function e5(e,t,r){return await nt(`${We}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function t5(e,t,r,n){let s=`${We}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),n&&(s+=`&locationType=${n}`),await nt(s,e)}async function r5(e){return await nt(`${We}/cluster/info`,e)}async function n5(e,t,r,n){return await nt(`${We}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:n})})}async function a5(e){return await nt(`${We}/cluster/all-cluster-heads`,e)}const JH=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:CD,addFixedCost:L6,addInventory:P6,addInventoryItem:bD,addOverhead:M6,addPayouts:aN,addProductionData:Y6,addSalesData:q6,applyLeave:SD,approveDiscrepancy:V6,approveLeave:ij,approveProductionData:J6,approveRecalibration:JD,approveSalesData:W6,assignInchargeToEmployee:xD,assignManagerToEmployee:Ym,assignManagerToStore:aD,assignProductionHeadToHouse:$D,assignProductionHouseToStore:sD,assignStoreToProductionHouse:LD,cancelStockRequest:KD,checkPendingProductionRequests:PD,cleanDuplicates:VH,cleanupDuplicates:H6,cleanupProductionData:Z6,clearAllData:KH,createProductionHouse:MD,createProductionRequest:AD,createStockRequest:zD,createStore:nD,createUnifiedEmployee:cD,deleteClusterHeadByEmail:XH,deleteEmployee:dD,deleteFixedCost:U6,deleteInventory:D6,deleteInventoryItem:YH,deleteOverhead:F6,deletePayout:Ep,deleteProductionHouse:UD,deleteSalesData:DD,deleteUnifiedEmployee:uD,fetchFixedCosts:$6,fetchInventory:Vm,fetchInventoryItems:Gd,fetchLatestRecalibration:oj,fetchOverheads:eN,fetchProductionData:rN,fetchProductionRequests:Jm,fetchSalesData:tN,fixOrphanedStoreData:WH,fixProductionRecords:BD,fixStockRequests:VD,fulfillStockRequest:WD,getAllClusterHeads:a5,getAllEmployees:Ps,getAllLeaves:kD,getAllRecalibrationsForApproval:XD,getArchivedEmployees:lD,getClusterInfo:r5,getCustomItems:TD,getEmployees:Zo,getEmployeesByIncharge:nN,getEmployeesByManager:Wl,getLastRecalibration:Xo,getLeaveBalance:_D,getLeaves:Hu,getManagersByClusterHead:Gm,getMonthlyWastageReport:t5,getNotifications:eD,getOrganizationalHierarchy:ND,getPayouts:Yo,getProductionHouses:Ch,getRecalibrationHistory:YD,getSalesData:Qm,getStockRequests:qD,getStockThresholds:ZD,getStores:Uu,getTimesheets:Th,initializeDefaultInventoryItems:jD,markAllNotificationsAsRead:rD,markNotificationAsRead:tD,migrateDataToStore:oD,migrateEmployeeStores:fD,migrateProductionHouseSystem:GH,migrateProductionNotifications:Q6,migrateSalesDiscrepancy:qH,migrateStockRequestTimestamps:zH,rejectDiscrepancy:G6,rejectLeave:ED,rejectRecalibration:QD,requestSalesApproval:K6,resetEmployeePassword:hD,saveSalesData:ID,saveStockThresholds:e5,submitStockRecalibration:GD,syncDesignations:yD,transferInventoryBetweenHouses:HD,updateClusterAssignments:n5,updateEmployeeDesignation:gD,updateEmployeeRole:pD,updateEmployeeStore:mD,updateFixedCost:B6,updateInventory:I6,updateInventoryItem:wD,updateOverhead:R6,updatePayout:vD,updateProductionData:X6,updateProductionHouse:RD,updateProductionHouseInventory:FD,updateProductionRequestStatus:OD,updateSalesData:z6,updateStore:iD,updateUnifiedEmployee:Xm},Symbol.toStringTag,{value:"Module"}));function QH({selectedDate:e,editingItem:t,onSubmit:r,onClose:n}){const[s,i]=L.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!oE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||""}),[o,l]=L.useState({}),[u,d]=L.useState(!0);L.useEffect(()=>{f()},[]);const f=async()=>{try{const x=await TD(),v={};x.forEach(y=>{v[y.category]||(v[y.category]=[]),v[y.category].push(y.itemName)}),l(v)}catch(x){console.log("Could not load custom items:",x)}finally{d(!1)}},p=async x=>{x.preventDefault();const v=parseFloat(s.quantity),y=parseFloat(s.totalCost),b=v>0?y/v:0;if(s.customItem&&s.itemName)try{await CD(s.category,s.itemName),console.log("Custom item saved:",s.itemName),await f()}catch(N){console.error("Error saving custom item:",N)}r({date:e,category:s.category,itemName:s.itemName,quantity:v,unit:s.unit,costPerUnit:b,totalCost:y})},m=[...new Set([...oE[s.category],...o[s.category]||[]])];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:x=>i({...s,category:x.target.value,itemName:"",customItem:!1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(Hm).map(([x,v])=>a.jsx("option",{value:x,children:v},x))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),s.customItem?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:s.itemName,onChange:x=>i({...s,itemName:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),a.jsx("button",{type:"button",onClick:()=>i({...s,customItem:!1,itemName:""}),className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):a.jsx("div",{className:"space-y-2",children:a.jsxs("select",{value:s.itemName,onChange:x=>{x.target.value==="__custom__"?i({...s,customItem:!0,itemName:""}):i({...s,itemName:x.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select an item"}),m.map(x=>a.jsx("option",{value:x,children:x},x)),a.jsx("option",{value:"__custom__",children:"+ Add Custom Item"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",step:"0.01",value:s.quantity,onChange:x=>i({...s,quantity:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),a.jsxs("select",{value:s.unit,onChange:x=>i({...s,unit:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"mL",children:"mL"}),a.jsx("option",{value:"pcs",children:"pcs"}),a.jsx("option",{value:"units",children:"units"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.totalCost,onChange:x=>i({...s,totalCost:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),s.quantity&&s.totalCost&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),a.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(s.totalCost)/parseFloat(s.quantity)).toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t?"Update":"Add"," Item"]})]})]})]})})}const ZH=[{value:"fuel",label:" Fuel Cost"},{value:"travel",label:" Travel by Employee"},{value:"transportation",label:" Goods Transportation Cost"},{value:"marketing",label:" Marketing Cost"},{value:"service_charge",label:" Service Charge (Food Aggregators)"},{value:"repair",label:" Repair Cost"},{value:"party",label:" Party Cost"},{value:"lunch",label:" Lunch Cost"},{value:"emergency_online",label:" Emergency Online Order (Blinkit)"},{value:"personal_expense",label:" Personal Expense By an Employee"},{value:"miscellaneous",label:" Miscellaneous Cost"}];function eq({selectedDate:e,onSubmit:t,onClose:r,editingItem:n,employees:s}){const[i,o]=L.useState({category:n?n.category:"fuel",description:n?n.description:"",amount:n?n.amount.toString():"",employeeId:n?.employeeId||"",employeeName:n?.employeeName||""});L.useEffect(()=>{if(i.category==="personal_expense"&&i.employeeId){const u=s.find(d=>d.employeeId===i.employeeId);u&&o(d=>({...d,employeeName:u.name}))}},[i.employeeId,i.category,s]);const l=u=>{u.preventDefault();const d={date:e,category:i.category,description:i.description,amount:parseFloat(i.amount)};i.category==="personal_expense"&&(d.employeeId=i.employeeId,d.employeeName=i.employeeName),t(d)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Overhead Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:i.category,onChange:u=>o({...i,category:u.target.value,employeeId:"",employeeName:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:ZH.map(u=>a.jsx("option",{value:u.value,children:u.label},u.value))})]}),i.category==="personal_expense"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsxs("select",{value:i.employeeId,onChange:u=>o({...i,employeeId:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"Select Employee"}),s.map(u=>a.jsx("option",{value:u.employeeId,children:u.employeeId},u.id))]})]}),i.employeeId&&i.employeeName&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee Name"}),a.jsx("input",{type:"text",value:i.employeeName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Expense Description"}),a.jsx("textarea",{value:i.description,onChange:u=>o({...i,description:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"What was the expense for?",required:!0})]})]}),i.category!=="personal_expense"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:i.description,onChange:u=>o({...i,description:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:u=>o({...i,amount:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add Overhead"})]})]})]})})}function tq({selectedDate:e,onSubmit:t,onClose:r,editingItem:n}){const[s,i]=L.useState({category:n?n.category:"electricity",description:n?n.description:"",amount:n?n.amount.toString():"",units:n?.units?n.units.toString():"",unitPrice:n?.unitPrice?n.unitPrice.toString():"",paymentMethod:n?.paymentMethod||"cash",cashAmount:n?.cashAmount?n.cashAmount.toString():"",onlineAmount:n?.onlineAmount?n.onlineAmount.toString():""}),o=s.category==="lpg_gas"&&s.units&&s.unitPrice?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount||"0");L.useEffect(()=>{if(s.paymentMethod==="both"&&o>0&&!s.cashAmount&&!s.onlineAmount){const d=(o/2).toFixed(2);i(f=>({...f,cashAmount:d,onlineAmount:d}))}},[s.paymentMethod,o]);const l=()=>{if(s.paymentMethod!=="both")return!0;const d=parseFloat(s.cashAmount||"0"),f=parseFloat(s.onlineAmount||"0");return Math.abs(d+f-o)<.01},u=d=>{if(d.preventDefault(),!l()){alert("Cash and Online amounts must add up to the total amount!");return}const f=s.category==="lpg_gas"?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount),p={date:e,category:s.category,description:s.description,amount:f,paymentMethod:s.paymentMethod};s.category==="lpg_gas"&&(p.units=parseFloat(s.units),p.unitPrice=parseFloat(s.unitPrice)),s.paymentMethod==="both"&&(p.cashAmount=parseFloat(s.cashAmount),p.onlineAmount=parseFloat(s.onlineAmount)),t(p)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-gray-900",children:[n?"Edit":"Add"," Fixed Cost"]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),a.jsx("select",{value:s.category,onChange:d=>i({...s,category:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(W2).map(([d,f])=>a.jsx("option",{value:d,children:f},d))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:d=>i({...s,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:s.category==="lpg_gas"?"e.g., Commercial LPG cylinder purchase":"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),s.category==="lpg_gas"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Number of Cylinders"}),a.jsx("input",{type:"number",step:"1",min:"1",value:s.units,onChange:d=>i({...s,units:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Price per Cylinder ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.unitPrice,onChange:d=>i({...s,unitPrice:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1450.00",required:!0})]}),s.units&&s.unitPrice&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Total Amount:"})," ",o.toFixed(2)]})})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:d=>i({...s,amount:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:d=>i({...s,paymentMethod:"cash"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:d=>i({...s,paymentMethod:"online"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),a.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:s.paymentMethod==="both",onChange:d=>i({...s,paymentMethod:"both"}),className:"w-4 h-4 text-green-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),s.paymentMethod==="both"&&o>0&&a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:o,value:s.cashAmount,onChange:d=>{const f=parseFloat(d.target.value||"0");i({...s,cashAmount:d.target.value,onlineAmount:(o-f).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:o,value:s.onlineAmount,onChange:d=>{const f=parseFloat(d.target.value||"0");i({...s,onlineAmount:d.target.value,cashAmount:(o-f).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),a.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[a.jsx("span",{className:"text-gray-700",children:"Total:"}),a.jsxs("span",{className:`font-medium ${l()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(s.cashAmount||"0")+parseFloat(s.onlineAmount||"0")).toFixed(2)," / ",o.toFixed(2)]})]}),!l()&&a.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",o.toFixed(2)]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n?"Update":"Add"," Fixed Cost"]})]})]})]})})}function rq({inventory:e,overheads:t,fixedCosts:r,onEditInventory:n,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:u,isManager:d=!0}){const[f,p]=L.useState(null),m=e.reduce((v,y)=>(v[y.category]||(v[y.category]=[]),v[y.category].push(y),v),{}),x=(v,y)=>{v==="inventory"?s(y):v==="overhead"?o(y):u(y),p(null)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):a.jsx("div",{className:"space-y-6",children:Object.entries(m).map(([v,y])=>a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:Hm[v]}),a.jsx("div",{className:"space-y-2",children:y.map(b=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-gray-900",children:b.itemName})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-blue-600",children:["",b.totalCost.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>n(b),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"inventory",id:b.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ps,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[b.quantity," ",b.unit]}),a.jsxs("span",{children:["",b.costPerUnit,"/",b.unit]})]})]},b.id))})]},v))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(C9,{className:"w-5 h-5 text-orange-600"}),a.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):a.jsx("div",{className:"space-y-3",children:t.map(v=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:z2[v.category]}),v.category==="personal_expense"&&v.employeeId&&v.employeeName&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Employee: ",v.employeeName," (ID: ",v.employeeId,")"]}),a.jsx("p",{className:"text-sm text-gray-500",children:v.description})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-orange-600",children:["",v.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>i(v),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"overhead",id:v.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ps,{className:"w-4 h-4"})})]})]})]})},v.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ji,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):a.jsx("div",{className:"space-y-3",children:r.map(v=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-900",children:W2[v.category]}),a.jsx("p",{className:"text-sm text-gray-500",children:v.description}),v.category==="lpg_gas"&&v.units&&v.unitPrice&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[v.units," cylinder",v.units>1?"s":"","  ",v.unitPrice.toLocaleString()]}),v.paymentMethod&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.paymentMethod==="cash"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),v.paymentMethod==="online"&&a.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),v.paymentMethod==="both"&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",v.cashAmount?.toLocaleString()]}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",v.onlineAmount?.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-green-600",children:["",v.amount.toLocaleString()]}),d&&a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>l(v),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p({type:"fixedcost",id:v.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:a.jsx(ps,{className:"w-4 h-4"})})]})]})]})},v.id))})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>x(f.type,f.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function Zm({selectedDate:e,onDateChange:t}){const[r,n]=L.useState(0),[s,i]=L.useState(!1);L.useEffect(()=>{const u=()=>{i(window.innerWidth<768)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const o=L.useMemo(()=>{const u=new Date,d=new Date(u);d.setDate(d.getDate()+r*7);const f=[];for(let p=-3;p<=3;p++){const m=new Date(d);m.setDate(m.getDate()+p),f.push(m.toISOString().split("T")[0])}return f},[r]);L.useEffect(()=>{if(!o.includes(e)){const u=new Date(e),d=new Date,f=Math.floor((u.getTime()-d.getTime())/(1e3*60*60*24)),p=Math.floor(f/7);n(p)}},[e,o]);const l=()=>{n(0),t(new Date().toISOString().split("T")[0])};return s?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),r!==0&&a.jsx("button",{type:"button",onClick:l,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"date",value:e,onChange:u=>t(u.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("button",{type:"button",onClick:()=>n(r-1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx(z1,{className:"w-4 h-4"}),a.jsx("span",{children:"Prev Week"})]}),a.jsxs("button",{type:"button",onClick:()=>n(r+1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[a.jsx("span",{children:"Next Week"}),a.jsx(Go,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:a.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:o.map(u=>{const d=new Date(u),f=u===new Date().toISOString().split("T")[0],p=u===e;return a.jsxs("button",{type:"button",onClick:()=>t(u),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${p?"bg-orange-600 text-white shadow-lg":f?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:d.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-base font-medium",children:d.getDate()}),a.jsx("div",{className:"text-xs",children:d.toLocaleDateString("en-US",{month:"short"})})]},u)})})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-gray-900",children:"Select Date"}),r!==0&&a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>n(r-1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[a.jsx(z1,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Prev"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:o.map(u=>{const d=new Date(u),f=u===new Date().toISOString().split("T")[0],p=u===e;return a.jsxs("button",{type:"button",onClick:()=>t(u),className:`p-3 rounded-lg text-center transition-all ${p?"bg-orange-600 text-white shadow-lg transform scale-105":f?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("div",{className:"text-xs uppercase",children:d.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("div",{className:"text-lg font-medium",children:d.getDate()}),a.jsx("div",{className:"text-xs",children:d.toLocaleDateString("en-US",{month:"short"})})]},u)})}),a.jsxs("button",{type:"button",onClick:()=>n(r+1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[a.jsx("span",{className:"text-sm",children:"Next"}),a.jsx(Go,{className:"w-5 h-5"})]})]})]})}function nq({context:e,selectedStoreId:t,employees:r}){const[n,s]=L.useState(new Date().toISOString().split("T")[0]),[i,o]=L.useState(!1),[l,u]=L.useState(!1),[d,f]=L.useState(!1),[p,m]=L.useState(null),[x,v]=L.useState(null),[y,b]=L.useState(null),N=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",N),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const k=e.inventory.filter(C=>{const M=C.date===n,D=N?C.storeId===N:!0;return M&&D}),w=e.overheads.filter(C=>{const M=C.date===n,D=N?C.storeId===N:!0;return M&&D}),P=e.fixedCosts.filter(C=>{const M=C.date===n,D=N?C.storeId===N:!0;return M&&D}),S=k.reduce((C,M)=>C+M.totalCost,0),_=w.reduce((C,M)=>C+M.amount,0),E=P.reduce((C,M)=>C+M.amount,0);return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Zm,{selectedDate:n,onDateChange:s}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",S.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",_.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(S+_+E).toLocaleString()]})]})]}),a.jsxs("div",{className:"flex gap-4 mb-6",children:[a.jsxs("button",{onClick:()=>o(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add inventory items",children:[a.jsx(ao,{className:"w-4 h-4"}),"Add Inventory Item"]}),a.jsxs("button",{onClick:()=>u(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add overhead costs",children:[a.jsx(ao,{className:"w-4 h-4"}),"Add Overhead"]}),a.jsxs("button",{onClick:()=>f(!0),disabled:!e.isManager,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e.isManager?"":"Only managers can add fixed costs",children:[a.jsx(ao,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),a.jsx(rq,{inventory:k,overheads:w,fixedCosts:P,onEditInventory:C=>{m(C),o(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:C=>{v(C),u(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:C=>{b(C),f(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),i&&a.jsx(QH,{selectedDate:n,editingItem:p,onSubmit:async C=>{try{p?await e.updateInventoryItem(p.id,C):await e.addInventoryItem(C),o(!1),m(null)}catch{alert("Failed to save inventory item. Please try again.")}},onClose:()=>{o(!1),m(null)}}),l&&a.jsx(eq,{selectedDate:n,editingItem:x,employees:r,onSubmit:async C=>{try{x?await e.updateOverheadItem(x.id,C):await e.addOverheadItem(C),u(!1),v(null)}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{u(!1),v(null)}}),d&&a.jsx(tq,{selectedDate:n,editingItem:y,onSubmit:async C=>{try{y?await e.updateFixedCostItem(y.id,C):await e.addFixedCostItem(C),f(!1),b(null)}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{f(!1),b(null)}})]})}function sN({context:e,selectedStoreId:t,onClose:r,isProductionHouse:n,isStoreFinishedProducts:s=!1}){const[i,o]=L.useState([]),[l,u]=L.useState(!0),[d,f]=L.useState(!1),[p,m]=L.useState(null),[x,v]=L.useState(null),[y,b]=L.useState(!1),N=t||e.user?.storeId,k=e.stores?.find(K=>K.id===N),w=t||e.user?.storeId,P=n?e.productionHouses?.find(K=>K.id===w):e.stores?.find(K=>K.id===w),S=P?.name,_=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),E=new Date().getDate(),C=E>=1&&E<=5;L.useEffect(()=>{M(),F()},[]);async function M(){try{if(u(!0),n||s)await D();else{const R=(await Vm(e.user?.accessToken||"")).filter(se=>N?se.storeId===N:!1),Q=new Map;R.forEach(se=>{Q.has(se.id)||Q.set(se.id,se)});const ee=Array.from(Q.values()).map(se=>({itemId:se.id,itemName:se.itemName,category:se.category,unit:se.unit,systemQuantity:se.quantity,actualQuantity:se.quantity,difference:0,adjustmentType:null,notes:""}));o(ee)}}catch(K){console.error("Error loading inventory:",K),v("Failed to load inventory data")}finally{u(!1)}}async function D(){const K=e.productionData||[],R=new Date().toISOString().substring(0,7);let Q=N,ee=N;if(s)ee=N;else if(N&&N.startsWith("STORE-")){const Oe=e.stores?.find(q=>q.id===N);Oe?.productionHouseId&&(Q=Oe.productionHouseId,ee=Q)}else ee=N;let se,xe;s?(se=(e.productionRequests||[]).filter(Ne=>{if(Ne.status!=="delivered"||Ne.storeId!==N)return!1;const ae=Ne.deliveredDate||Ne.requestDate||Ne.createdAt;return ae&&ae.startsWith(R)}).reduce((Ne,ae)=>({chicken:Ne.chicken+(ae.chickenMomos||0),chickenCheese:Ne.chickenCheese+(ae.chickenCheeseMomos||0),veg:Ne.veg+(ae.vegMomos||0),cheeseCorn:Ne.cheeseCorn+(ae.cheeseCornMomos||0),paneer:Ne.paneer+(ae.paneerMomos||0),vegKurkure:Ne.vegKurkure+(ae.vegKurkureMomos||0),chickenKurkure:Ne.chickenKurkure+(ae.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),xe=(e.salesData||[]).filter(Ne=>Ne.storeId!==N?!1:Ne.date&&Ne.date.startsWith(R)).reduce((Ne,ae)=>({chicken:Ne.chicken+(ae.chickenMomos||0),chickenCheese:Ne.chickenCheese+(ae.chickenCheeseMomos||0),veg:Ne.veg+(ae.vegMomos||0),cheeseCorn:Ne.cheeseCorn+(ae.cheeseCornMomos||0),paneer:Ne.paneer+(ae.paneerMomos||0),vegKurkure:Ne.vegKurkure+(ae.vegKurkureMomos||0),chickenKurkure:Ne.chickenKurkure+(ae.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})):(se=K.filter(Ne=>{if(!Ne.date.startsWith(R))return!1;const ae=Ne.storeId===Q||Ne.storeId===N,De=Ne.productionHouseId===Q;return ae||De}).reduce((Ne,ae)=>({chicken:Ne.chicken+(ae.chickenMomos?.final||0),chickenCheese:Ne.chickenCheese+(ae.chickenCheeseMomos?.final||0),veg:Ne.veg+(ae.vegMomos?.final||0),cheeseCorn:Ne.cheeseCorn+(ae.cheeseCornMomos?.final||0),paneer:Ne.paneer+(ae.paneerMomos?.final||0),vegKurkure:Ne.vegKurkure+(ae.vegKurkureMomos?.final||0),chickenKurkure:Ne.chickenKurkure+(ae.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),xe=(e.productionRequests||[]).filter(Ne=>{if(Ne.status!=="delivered")return!1;const ae=Ne.deliveredDate||Ne.requestDate||Ne.createdAt;return!ae||!ae.startsWith(R)?!1:e.stores?.find(Be=>Be.id===Ne.storeId)?.productionHouseId===Q}).reduce((Ne,ae)=>({chicken:Ne.chicken+(ae.chickenMomos||0),chickenCheese:Ne.chickenCheese+(ae.chickenCheeseMomos||0),veg:Ne.veg+(ae.vegMomos||0),cheeseCorn:Ne.cheeseCorn+(ae.cheeseCornMomos||0),paneer:Ne.paneer+(ae.paneerMomos||0),vegKurkure:Ne.vegKurkure+(ae.vegKurkureMomos||0),chickenKurkure:Ne.chickenKurkure+(ae.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}));const ge=await A(ee,R,s);console.log(" Recalibration - Location ID:",ee),console.log(" Recalibration - Is Store Finished Products:",s),console.log(" Recalibration - Opening Balance:",ge),console.log(" Recalibration - Total Received/Produced:",se),console.log(" Recalibration - Total Sent/Sold:",xe);const Me=e.inventoryItems?.filter(Oe=>Oe.category==="finished_product"&&Oe.isActive&&(Oe.linkedEntityType==="global"||Oe.linkedEntityType==="production_house"&&Oe.linkedEntityId===ee||Oe.linkedEntityType==="store"&&Oe.linkedEntityId===N))||[];console.log(" Recalibration - Finished Products from Context:",Me.length);const ce=Oe=>Oe.replace(/_([a-z])/g,q=>q[1].toUpperCase()),me=Me.map(Oe=>{const q=ce(Oe.name),Ne=ge[q]||ge[Oe.name]||0,ae=se[q]||se[Oe.name]||0,De=xe[q]||xe[Oe.name]||0,Be=Ne+ae-De;return console.log(` ${Oe.displayName}: Opening=${Ne}, Produced=${ae}, Sent=${De}, Stock=${Be}`),{itemId:Oe.name,itemName:Oe.displayName,category:Oe.category,unit:Oe.unit,systemQuantity:Be,actualQuantity:Be,difference:0,adjustmentType:null,notes:""}});o(me)}async function A(K,R,Q){if(!K)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const ee=Q?"store":"production_house",[se,xe]=R.split("-").map(Number);let ge=se,Me=xe-1;Me===0&&(Me=12,ge=se-1);const ce=`${ge}-${String(Me).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",K),console.log(" fetchOpeningBalance - Location Type:",ee),console.log(" fetchOpeningBalance - Current Month:",R),console.log(" fetchOpeningBalance - Looking for recalibration from:",ce);const me=await Xo(e.user?.accessToken||"",K,ee);if(me?.record){const Oe=me.record.date.substring(0,7);if(console.log(" fetchOpeningBalance - Found recalibration from:",Oe),console.log(" fetchOpeningBalance - Recalibration data:",me.record),Oe===R||Oe===ce||Oe<ce){const q={};return me.record.items.forEach(Ne=>{q[Ne.itemId]=Ne.actualQuantity}),console.log(" fetchOpeningBalance - Using recalibration as opening balance:",q),console.log(" fetchOpeningBalance - Recalibration was from:",Oe===R?"CURRENT month (opening balance set)":"PREVIOUS month (closing = opening)"),q}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await O(K,R,Q)}catch(ee){return console.error("Error fetching opening balance:",ee),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function O(K,R,Q){const[ee,se]=R.split("-").map(Number);let xe=ee,ge=se-1;ge===0&&(ge=12,xe=ee-1);const Me=`${xe}-${String(ge).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",Me),console.log(" calculatePreviousMonthStock - Is Store:",Q),Q){const ce=(e.productionRequests||[]).filter(q=>{if(q.status!=="delivered"||q.storeId!==K)return!1;const Ne=q.deliveredDate||q.requestDate||q.createdAt;return Ne&&Ne.startsWith(Me)}).reduce((q,Ne)=>({chicken:q.chicken+(Ne.chickenMomos||0),chickenCheese:q.chickenCheese+(Ne.chickenCheeseMomos||0),veg:q.veg+(Ne.vegMomos||0),cheeseCorn:q.cheeseCorn+(Ne.cheeseCornMomos||0),paneer:q.paneer+(Ne.paneerMomos||0),vegKurkure:q.vegKurkure+(Ne.vegKurkureMomos||0),chickenKurkure:q.chickenKurkure+(Ne.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",ce),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const me=(e.categorySalesData||[]).filter(q=>q.storeId!==K?!1:q.date&&q.date.startsWith(Me)).reduce((q,Ne)=>({chicken:q.chicken+(Ne.data["Chicken Momos"]||0),chickenCheese:q.chickenCheese+(Ne.data["Chicken Cheese Momos"]||0),veg:q.veg+(Ne.data["Veg Momos"]||0),cheeseCorn:q.cheeseCorn+(Ne.data["Corn Cheese Momos"]||0),paneer:q.paneer+(Ne.data["Paneer Momos"]||0),vegKurkure:q.vegKurkure+(Ne.data["Veg Kurkure Momos"]||0),chickenKurkure:q.chickenKurkure+(Ne.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",me);const Oe={chicken:ce.chicken-me.chicken,chickenCheese:ce.chickenCheese-me.chickenCheese,veg:ce.veg-me.veg,cheeseCorn:ce.cheeseCorn-me.cheeseCorn,paneer:ce.paneer-me.paneer,vegKurkure:ce.vegKurkure-me.vegKurkure,chickenKurkure:ce.chickenKurkure-me.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",Oe),Oe}else{const me=(e.productionData||[]).filter(q=>q.date.startsWith(Me)?q.storeId===K||q.productionHouseId===K:!1).reduce((q,Ne)=>({chicken:q.chicken+(Ne.chickenMomos?.final||0),chickenCheese:q.chickenCheese+(Ne.chickenCheeseMomos?.final||0),veg:q.veg+(Ne.vegMomos?.final||0),cheeseCorn:q.cheeseCorn+(Ne.cheeseCornMomos?.final||0),paneer:q.paneer+(Ne.paneerMomos?.final||0),vegKurkure:q.vegKurkure+(Ne.vegKurkureMomos?.final||0),chickenKurkure:q.chickenKurkure+(Ne.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Oe=(e.productionRequests||[]).filter(q=>{if(q.status!=="delivered")return!1;const Ne=q.deliveredDate||q.requestDate||q.createdAt;return!Ne||!Ne.startsWith(Me)?!1:e.stores?.find(De=>De.id===q.storeId)?.productionHouseId===K}).reduce((q,Ne)=>({chicken:q.chicken+(Ne.chickenMomos||0),chickenCheese:q.chickenCheese+(Ne.chickenCheeseMomos||0),veg:q.veg+(Ne.vegMomos||0),cheeseCorn:q.cheeseCorn+(Ne.cheeseCornMomos||0),paneer:q.paneer+(Ne.paneerMomos||0),vegKurkure:q.vegKurkure+(Ne.vegKurkureMomos||0),chickenKurkure:q.chickenKurkure+(Ne.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});return{chicken:me.chicken-Oe.chicken,chickenCheese:me.chickenCheese-Oe.chickenCheese,veg:me.veg-Oe.veg,cheeseCorn:me.cheeseCorn-Oe.cheeseCorn,paneer:me.paneer-Oe.paneer,vegKurkure:me.vegKurkure-Oe.vegKurkure,chickenKurkure:me.chickenKurkure-Oe.chickenKurkure}}}async function F(){try{const K=N;if(!K)return;const R=n?"production_house":"store",Q=await Xo(e.user?.accessToken||"",K,R);Q.lastRecalibration&&m(Q.lastRecalibration)}catch(K){console.error("Error checking last recalibration:",K)}}function W(K,R){const Q=parseFloat(R)||0;o(i.map(ee=>{if(ee.itemId===K){const se=Q-ee.systemQuantity;return{...ee,actualQuantity:Q,difference:se,adjustmentType:se===0?null:ee.adjustmentType}}return ee}))}function Y(K,R){o(i.map(Q=>Q.itemId===K?{...Q,adjustmentType:R}:Q))}function Z(K,R){o(i.map(Q=>Q.itemId===K?{...Q,notes:R}:Q))}async function re(){if(i.filter(R=>R.difference!==0&&!R.adjustmentType).length>0){v("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{f(!0),v(null),console.log(` Submitting recalibration:
        - locationId: ${w}
        - locationType: ${n?"production_house":"store"}
        - locationName: ${S}
        - isProductionHouse: ${n}`);const R={locationId:w,locationType:n?"production_house":"store",locationName:S,items:i.map(Q=>({itemId:Q.itemId,itemName:Q.itemName,category:Q.category,unit:Q.unit,systemQuantity:Q.systemQuantity,actualQuantity:Q.actualQuantity,difference:Q.difference,adjustmentType:Q.adjustmentType,notes:Q.notes}))};await GD(e.user?.accessToken||"",R),b(!0),setTimeout(()=>{r()},2e3)}catch(R){console.error("Error submitting recalibration:",R),v(R instanceof Error?R.message:"Failed to submit recalibration")}finally{f(!1)}}const ne=i.length,U=i.filter(K=>K.difference!==0).length,oe=i.filter(K=>K.adjustmentType==="wastage"&&K.difference<0).reduce((K,R)=>K+Math.abs(R.difference),0);return l?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jp,{className:"w-6 h-6 animate-spin text-purple-600"}),a.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):y?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(fr,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),a.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(Dr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[S||k?.name," - ",_]})]})]}),a.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(hi,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),a.jsx("div",{className:"text-2xl text-purple-600",children:ne})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),a.jsx("div",{className:"text-2xl text-orange-600",children:U})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsx("div",{className:"text-2xl text-red-600",children:oe.toFixed(2)})]})]}),p&&a.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-blue-900",children:"Last recalibration was performed on:"}),a.jsx("div",{className:"text-sm text-blue-700",children:new Date(p).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),!C&&a.jsxs("div",{className:"mt-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-yellow-900",children:"Stock recalibration is typically performed on the 1st to 5th day of each month. You can still perform it now if needed."})]})]}),a.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:a.jsx("div",{className:"space-y-4",children:i.map((K,R)=>a.jsxs("div",{className:`bg-gradient-to-r ${K.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",R+1]}),a.jsx("div",{className:"text-gray-900",children:K.itemName}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[K.category.replace(/_/g," "),"  ",K.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"System Stock"}),a.jsxs("div",{className:"text-gray-900",children:[K.systemQuantity," ",K.unit]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),a.jsx("input",{type:"number",step:"0.01",value:K.actualQuantity,onChange:Q=>W(K.itemId,Q.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),a.jsxs("div",{className:`text-lg ${K.difference>0?"text-green-600":K.difference<0?"text-red-600":"text-gray-600"}`,children:[K.difference>0?"+":"",K.difference.toFixed(2)]})]}),a.jsx("div",{className:"md:col-span-3",children:K.difference!==0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(K.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${K.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),a.jsx("button",{onClick:()=>Y(K.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${K.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),K.difference!==0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),a.jsx("input",{type:"text",value:K.notes,onChange:Q=>Z(K.itemId,Q.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},K.itemId))})}),x&&a.jsx("div",{className:"px-6 pb-4",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-red-900",children:x})]})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:re,disabled:d,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(jp,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(zl,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function LE({context:e,selectedStoreId:t}){const[r,n]=L.useState(new Date().toISOString().split("T")[0]),[s,i]=L.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),u=e.overheads.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),d=e.fixedCosts.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),f=l.reduce((N,k)=>N+k.totalCost,0),p=u.reduce((N,k)=>N+k.amount,0),m=d.reduce((N,k)=>N+k.amount,0),x=l.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),v=u.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),y={fresh_produce:"Fresh Vegetables",spices_seasonings:"Grocery",dairy:"Dairy Products",meat:"Meat",packaging:"Packaging Materials",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},b=e.user?.role==="cluster_head";return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(W1,{className:"w-6 h-6 text-blue-600"}),a.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[a.jsx(K1,{className:"w-4 h-4 text-amber-600"}),a.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),a.jsx(Zm,{selectedDate:r,onDateChange:n}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[a.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[a.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[a.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[a.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),a.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+p+m).toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(rr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(x).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(x).map(([N,k])=>a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.itemName}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[w.quantity," ",w.unit]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",w.costPerUnit.toLocaleString()]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.totalCost.toLocaleString()]})]},w.id))})]})})]},N))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(rr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No inventory items for this date"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Jn,{className:"w-5 h-5 text-orange-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(v).length>0?a.jsx("div",{className:"space-y-6",children:Object.entries(v).map(([N,k])=>a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:w.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.amount.toLocaleString()]})]},w.id))})]})})]},N))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Jn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"No overhead costs for this date"})]})]}),d.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(pn,{className:"w-5 h-5 text-green-600"}),a.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[N.category]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.description}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",N.amount.toLocaleString()]})]},N.id))})]})})]}),b&&a.jsx("div",{className:"mt-6",children:a.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[a.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&a.jsx(sN,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(K1,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-blue-800",children:b?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function s5(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=s5(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function tr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=s5(e))&&(n&&(n+=" "),n+=t);return n}var _y,BE;function Qa(){if(BE)return _y;BE=1;var e=Array.isArray;return _y=e,_y}var Ey,UE;function i5(){if(UE)return Ey;UE=1;var e=typeof L0=="object"&&L0&&L0.Object===Object&&L0;return Ey=e,Ey}var Ty,HE;function Pi(){if(HE)return Ty;HE=1;var e=i5(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ty=r,Ty}var Cy,qE;function Sf(){if(qE)return Cy;qE=1;var e=Pi(),t=e.Symbol;return Cy=t,Cy}var Ay,zE;function aq(){if(zE)return Ay;zE=1;var e=Sf(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),u=o[s];try{o[s]=void 0;var d=!0}catch{}var f=n.call(o);return d&&(l?o[s]=u:delete o[s]),f}return Ay=i,Ay}var Oy,WE;function sq(){if(WE)return Oy;WE=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Oy=r,Oy}var Py,KE;function go(){if(KE)return Py;KE=1;var e=Sf(),t=aq(),r=sq(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return Py=o,Py}var Iy,VE;function xo(){if(VE)return Iy;VE=1;function e(t){return t!=null&&typeof t=="object"}return Iy=e,Iy}var Dy,GE;function qu(){if(GE)return Dy;GE=1;var e=go(),t=xo(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return Dy=n,Dy}var My,YE;function iN(){if(YE)return My;YE=1;var e=Qa(),t=qu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return My=s,My}var Ry,XE;function rl(){if(XE)return Ry;XE=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Ry=e,Ry}var Fy,JE;function oN(){if(JE)return Fy;JE=1;var e=go(),t=rl(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==n||u==s||u==r||u==i}return Fy=o,Fy}var $y,QE;function iq(){if(QE)return $y;QE=1;var e=Pi(),t=e["__core-js_shared__"];return $y=t,$y}var Ly,ZE;function oq(){if(ZE)return Ly;ZE=1;var e=iq(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return Ly=r,Ly}var By,eT;function o5(){if(eT)return By;eT=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return By=r,By}var Uy,tT;function lq(){if(tT)return Uy;tT=1;var e=oN(),t=oq(),r=rl(),n=o5(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!r(m)||t(m))return!1;var x=e(m)?f:i;return x.test(n(m))}return Uy=p,Uy}var Hy,rT;function cq(){if(rT)return Hy;rT=1;function e(t,r){return t?.[r]}return Hy=e,Hy}var qy,nT;function nc(){if(nT)return qy;nT=1;var e=lq(),t=cq();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return qy=r,qy}var zy,aT;function eg(){if(aT)return zy;aT=1;var e=nc(),t=e(Object,"create");return zy=t,zy}var Wy,sT;function uq(){if(sT)return Wy;sT=1;var e=eg();function t(){this.__data__=e?e(null):{},this.size=0}return Wy=t,Wy}var Ky,iT;function dq(){if(iT)return Ky;iT=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Ky=e,Ky}var Vy,oT;function hq(){if(oT)return Vy;oT=1;var e=eg(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return Vy=s,Vy}var Gy,lT;function fq(){if(lT)return Gy;lT=1;var e=eg(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return Gy=n,Gy}var Yy,cT;function pq(){if(cT)return Yy;cT=1;var e=eg(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return Yy=r,Yy}var Xy,uT;function mq(){if(uT)return Xy;uT=1;var e=uq(),t=dq(),r=hq(),n=fq(),s=pq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Xy=i,Xy}var Jy,dT;function gq(){if(dT)return Jy;dT=1;function e(){this.__data__=[],this.size=0}return Jy=e,Jy}var Qy,hT;function lN(){if(hT)return Qy;hT=1;function e(t,r){return t===r||t!==t&&r!==r}return Qy=e,Qy}var Zy,fT;function tg(){if(fT)return Zy;fT=1;var e=lN();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return Zy=t,Zy}var ev,pT;function xq(){if(pT)return ev;pT=1;var e=tg(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return ev=n,ev}var tv,mT;function yq(){if(mT)return tv;mT=1;var e=tg();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return tv=t,tv}var rv,gT;function vq(){if(gT)return rv;gT=1;var e=tg();function t(r){return e(this.__data__,r)>-1}return rv=t,rv}var nv,xT;function bq(){if(xT)return nv;xT=1;var e=tg();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return nv=t,nv}var av,yT;function rg(){if(yT)return av;yT=1;var e=gq(),t=xq(),r=yq(),n=vq(),s=bq();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,av=i,av}var sv,vT;function cN(){if(vT)return sv;vT=1;var e=nc(),t=Pi(),r=e(t,"Map");return sv=r,sv}var iv,bT;function wq(){if(bT)return iv;bT=1;var e=mq(),t=rg(),r=cN();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return iv=n,iv}var ov,wT;function jq(){if(wT)return ov;wT=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return ov=e,ov}var lv,jT;function ng(){if(jT)return lv;jT=1;var e=jq();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return lv=t,lv}var cv,NT;function Nq(){if(NT)return cv;NT=1;var e=ng();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return cv=t,cv}var uv,kT;function kq(){if(kT)return uv;kT=1;var e=ng();function t(r){return e(this,r).get(r)}return uv=t,uv}var dv,ST;function Sq(){if(ST)return dv;ST=1;var e=ng();function t(r){return e(this,r).has(r)}return dv=t,dv}var hv,_T;function _q(){if(_T)return hv;_T=1;var e=ng();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return hv=t,hv}var fv,ET;function uN(){if(ET)return fv;ET=1;var e=wq(),t=Nq(),r=kq(),n=Sq(),s=_q();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,fv=i,fv}var pv,TT;function l5(){if(TT)return pv;TT=1;var e=uN(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],u=i.cache;if(u.has(l))return u.get(l);var d=n.apply(this,o);return i.cache=u.set(l,d)||u,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,pv=r,pv}var mv,CT;function Eq(){if(CT)return mv;CT=1;var e=l5(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return mv=r,mv}var gv,AT;function Tq(){if(AT)return gv;AT=1;var e=Eq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,u,d){i.push(u?d.replace(r,"$1"):l||o)}),i});return gv=n,gv}var xv,OT;function dN(){if(OT)return xv;OT=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return xv=e,xv}var yv,PT;function Cq(){if(PT)return yv;PT=1;var e=Sf(),t=dN(),r=Qa(),n=qu(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return yv=o,yv}var vv,IT;function c5(){if(IT)return vv;IT=1;var e=Cq();function t(r){return r==null?"":e(r)}return vv=t,vv}var bv,DT;function u5(){if(DT)return bv;DT=1;var e=Qa(),t=iN(),r=Tq(),n=c5();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return bv=s,bv}var wv,MT;function ag(){if(MT)return wv;MT=1;var e=qu();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return wv=t,wv}var jv,RT;function hN(){if(RT)return jv;RT=1;var e=u5(),t=ag();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return jv=r,jv}var Nv,FT;function d5(){if(FT)return Nv;FT=1;var e=hN();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return Nv=t,Nv}var Aq=d5();const ms=Mr(Aq);var kv,$T;function Oq(){if($T)return kv;$T=1;function e(t){return t==null}return kv=e,kv}var Pq=Oq();const nr=Mr(Pq);var Sv,LT;function Iq(){if(LT)return Sv;LT=1;var e=go(),t=Qa(),r=xo(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Sv=s,Sv}var Dq=Iq();const Kl=Mr(Dq);var Mq=oN();const Vt=Mr(Mq);var Rq=rl();const zu=Mr(Rq);var _v={exports:{}},Pr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function Fq(){if(BT)return Pr;BT=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case e:switch(b=b.type,b){case r:case s:case n:case d:case f:return b;default:switch(b=b&&b.$$typeof,b){case l:case o:case u:case m:case p:case i:return b;default:return N}}case t:return N}}}return Pr.ContextConsumer=o,Pr.ContextProvider=i,Pr.Element=e,Pr.ForwardRef=u,Pr.Fragment=r,Pr.Lazy=m,Pr.Memo=p,Pr.Portal=t,Pr.Profiler=s,Pr.StrictMode=n,Pr.Suspense=d,Pr.SuspenseList=f,Pr.isAsyncMode=function(){return!1},Pr.isConcurrentMode=function(){return!1},Pr.isContextConsumer=function(b){return y(b)===o},Pr.isContextProvider=function(b){return y(b)===i},Pr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Pr.isForwardRef=function(b){return y(b)===u},Pr.isFragment=function(b){return y(b)===r},Pr.isLazy=function(b){return y(b)===m},Pr.isMemo=function(b){return y(b)===p},Pr.isPortal=function(b){return y(b)===t},Pr.isProfiler=function(b){return y(b)===s},Pr.isStrictMode=function(b){return y(b)===n},Pr.isSuspense=function(b){return y(b)===d},Pr.isSuspenseList=function(b){return y(b)===f},Pr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===f||b===x||typeof b=="object"&&b!==null&&(b.$$typeof===m||b.$$typeof===p||b.$$typeof===i||b.$$typeof===o||b.$$typeof===u||b.$$typeof===v||b.getModuleId!==void 0)},Pr.typeOf=y,Pr}var UT;function $q(){return UT||(UT=1,_v.exports=Fq()),_v.exports}var Lq=$q(),Ev,HT;function h5(){if(HT)return Ev;HT=1;var e=go(),t=xo(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return Ev=n,Ev}var Tv,qT;function Bq(){if(qT)return Tv;qT=1;var e=h5();function t(r){return e(r)&&r!=+r}return Tv=t,Tv}var Uq=Bq();const _f=Mr(Uq);var Hq=h5();const qq=Mr(Hq);var Ra=function(t){return t===0?0:t>0?1:-1},Dl=function(t){return Kl(t)&&t.indexOf("%")===t.length-1},lt=function(t){return qq(t)&&!_f(t)},zq=function(t){return nr(t)},Hn=function(t){return lt(t)||Kl(t)},Wq=0,Wu=function(t){var r=++Wq;return"".concat(t||"").concat(r)},Fa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&!Kl(t))return n;var i;if(Dl(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return _f(i)&&(i=n),s&&i>r&&(i=r),i},Uo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Kq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},ua=function(t,r){return lt(t)&&lt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Tp(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ms(n,t))===r})}var Vq=function(t,r){return lt(t)&&lt(r)?t-r:Kl(t)&&Kl(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function iu(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function lj(e){"@babel/helpers - typeof";return lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lj(e)}var Gq=["viewBox","children"],Yq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],zT=["points","pathLength"],Cv={svg:Gq,polygon:zT,polyline:zT},fN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Cp=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(L.isValidElement(t)&&(n=t.props),!zu(n))return null;var s={};return Object.keys(n).forEach(function(i){fN.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},Xq=function(t,r,n){return function(s){return t(r,n,s),null}},Vl=function(t,r,n){if(!zu(t)||lj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];fN.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Xq(o,r,n))}),s},Jq=["children"],Qq=["children"];function WT(e,t){if(e==null)return{};var r=Zq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function cj(e){"@babel/helpers - typeof";return cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cj(e)}var KT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},so=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},VT=null,Av=null,pN=function e(t){if(t===VT&&Array.isArray(Av))return Av;var r=[];return L.Children.forEach(t,function(n){nr(n)||(Lq.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Av=r,VT=t,r};function gs(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return so(s)}):n=[so(t)],pN(e).forEach(function(s){var i=ms(s,"type.displayName")||ms(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function os(e,t){var r=gs(e,t);return r&&r[0]}var GT=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!lt(n)||n<=0||!lt(s)||s<=0)},ez=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tz=function(t){return t&&t.type&&Kl(t.type)&&ez.indexOf(t.type)>=0},rz=function(t){return t&&cj(t)==="object"&&"clipDot"in t},nz=function(t,r,n,s){var i,o=(i=Cv?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Vt(t)&&(s&&o.includes(r)||Yq.includes(r))||n&&fN.includes(r)},Lt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(L.isValidElement(t)&&(s=t.props),!zu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;nz((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},uj=function e(t,r){if(t===r)return!0;var n=L.Children.count(t);if(n!==L.Children.count(r))return!1;if(n===0)return!0;if(n===1)return YT(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!YT(i,o))return!1}return!0},YT=function(t,r){if(nr(t)&&nr(r))return!0;if(!nr(t)&&!nr(r)){var n=t.props||{},s=n.children,i=WT(n,Jq),o=r.props||{},l=o.children,u=WT(o,Qq);return s&&l?iu(i,u)&&uj(s,l):!s&&!l?iu(i,u):!1}return!1},XT=function(t,r){var n=[],s={};return pN(t).forEach(function(i,o){if(tz(i))n.push(i);else if(i){var l=so(i.type),u=r[l]||{},d=u.handler,f=u.once;if(d&&(!f||!s[l])){var p=d(i,l,o);n.push(p),s[l]=!0}}}),n},az=function(t){var r=t&&t.type;return r&&KT[r]?KT[r]:null},sz=function(t,r){return pN(r).indexOf(t)},iz=["children","width","height","viewBox","className","style","title","desc"];function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dj.apply(this,arguments)}function oz(e,t){if(e==null)return{};var r=lz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hj(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,u=e.desc,d=oz(e,iz),f=s||{width:r,height:n,x:0,y:0},p=tr("recharts-surface",i);return he.createElement("svg",dj({},Lt(d,!0,"svg"),{className:p,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),he.createElement("title",null,l),he.createElement("desc",null,u),t)}var cz=["children","className"];function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fj.apply(this,arguments)}function uz(e,t){if(e==null)return{};var r=dz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yr=he.forwardRef(function(e,t){var r=e.children,n=e.className,s=uz(e,cz),i=tr("recharts-layer",n);return he.createElement("g",fj({className:i},Lt(s,!0),{ref:t}),r)}),ci=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},Ov,JT;function hz(){if(JT)return Ov;JT=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return Ov=e,Ov}var Pv,QT;function fz(){if(QT)return Pv;QT=1;var e=hz();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return Pv=t,Pv}var Iv,ZT;function f5(){if(ZT)return Iv;ZT=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function u(d){return l.test(d)}return Iv=u,Iv}var Dv,eC;function pz(){if(eC)return Dv;eC=1;function e(t){return t.split("")}return Dv=e,Dv}var Mv,tC;function mz(){if(tC)return Mv;tC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",v=d+"?",y="["+i+"]?",b="(?:"+x+"(?:"+[f,p,m].join("|")+")"+y+v+")*",N=y+v+b,k="(?:"+[f+l+"?",l,p,m,o].join("|")+")",w=RegExp(u+"(?="+u+")|"+k+N,"g");function P(S){return S.match(w)||[]}return Mv=P,Mv}var Rv,rC;function gz(){if(rC)return Rv;rC=1;var e=pz(),t=f5(),r=mz();function n(s){return t(s)?r(s):e(s)}return Rv=n,Rv}var Fv,nC;function xz(){if(nC)return Fv;nC=1;var e=fz(),t=f5(),r=gz(),n=c5();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,u=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return u[i]()+d}}return Fv=s,Fv}var $v,aC;function yz(){if(aC)return $v;aC=1;var e=xz(),t=e("toUpperCase");return $v=t,$v}var vz=yz();const sg=Mr(vz);function Gr(e){return function(){return e}}const p5=Math.cos,Ap=Math.sin,pi=Math.sqrt,Op=Math.PI,ig=2*Op,pj=Math.PI,mj=2*pj,El=1e-6,bz=mj-El;function m5(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function wz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return m5;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class jz{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m5:wz(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,u=n-t,d=s-r,f=o-t,p=l-r,m=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>El)if(!(Math.abs(p*u-d*f)>El)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,v=s-l,y=u*u+d*d,b=x*x+v*v,N=Math.sqrt(y),k=Math.sqrt(m),w=i*Math.tan((pj-Math.acos((y+m-b)/(2*N*k)))/2),P=w/k,S=w/N;Math.abs(P-1)>El&&this._append`L${t+P*f},${r+P*p}`,this._append`A${i},${i},0,0,${+(p*x>f*v)},${this._x1=t+S*u},${this._y1=r+S*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),u=n*Math.sin(s),d=t+l,f=r+u,p=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>El||Math.abs(this._y1-f)>El)&&this._append`L${d},${f}`,n&&(m<0&&(m=m%mj+mj),m>bz?this._append`A${n},${n},0,1,${p},${t-l},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:m>El&&this._append`A${n},${n},0,${+(m>=pj)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function mN(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new jz(t)}function gN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function g5(e){this._context=e}g5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function og(e){return new g5(e)}function x5(e){return e[0]}function y5(e){return e[1]}function v5(e,t){var r=Gr(!0),n=null,s=og,i=null,o=mN(l);e=typeof e=="function"?e:e===void 0?x5:Gr(e),t=typeof t=="function"?t:t===void 0?y5:Gr(t);function l(u){var d,f=(u=gN(u)).length,p,m=!1,x;for(n==null&&(i=s(x=o())),d=0;d<=f;++d)!(d<f&&r(p=u[d],d,u))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(p,d,u),+t(p,d,u));if(x)return i=null,x+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Gr(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Gr(+u),l):t},l.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Gr(!!u),l):r},l.curve=function(u){return arguments.length?(s=u,n!=null&&(i=s(n)),l):s},l.context=function(u){return arguments.length?(u==null?n=i=null:i=s(n=u),l):n},l}function V0(e,t,r){var n=null,s=Gr(!0),i=null,o=og,l=null,u=mN(d);e=typeof e=="function"?e:e===void 0?x5:Gr(+e),t=typeof t=="function"?t:Gr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?y5:Gr(+r);function d(p){var m,x,v,y=(p=gN(p)).length,b,N=!1,k,w=new Array(y),P=new Array(y);for(i==null&&(l=o(k=u())),m=0;m<=y;++m){if(!(m<y&&s(b=p[m],m,p))===N)if(N=!N)x=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=x;--v)l.point(w[v],P[v]);l.lineEnd(),l.areaEnd()}N&&(w[m]=+e(b,m,p),P[m]=+t(b,m,p),l.point(n?+n(b,m,p):w[m],r?+r(b,m,p):P[m]))}if(k)return l=null,k+""||null}function f(){return v5().defined(s).curve(o).context(i)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:Gr(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Gr(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Gr(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:Gr(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Gr(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Gr(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Gr(!!p),d):s},d.curve=function(p){return arguments.length?(o=p,i!=null&&(l=o(i)),d):o},d.context=function(p){return arguments.length?(p==null?i=l=null:l=o(i=p),d):i},d}class b5{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Nz(e){return new b5(e,!0)}function kz(e){return new b5(e,!1)}const xN={draw(e,t){const r=pi(t/Op);e.moveTo(r,0),e.arc(0,0,r,0,ig)}},Sz={draw(e,t){const r=pi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},w5=pi(1/3),_z=w5*2,Ez={draw(e,t){const r=pi(t/_z),n=r*w5;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Tz={draw(e,t){const r=pi(t),n=-r/2;e.rect(n,n,r,r)}},Cz=.8908130915292852,j5=Ap(Op/10)/Ap(7*Op/10),Az=Ap(ig/10)*j5,Oz=-p5(ig/10)*j5,Pz={draw(e,t){const r=pi(t*Cz),n=Az*r,s=Oz*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=ig*i/5,l=p5(o),u=Ap(o);e.lineTo(u*r,-l*r),e.lineTo(l*n-u*s,u*n+l*s)}e.closePath()}},Lv=pi(3),Iz={draw(e,t){const r=-pi(t/(Lv*3));e.moveTo(0,r*2),e.lineTo(-Lv*r,-r),e.lineTo(Lv*r,-r),e.closePath()}},ks=-.5,Ss=pi(3)/2,gj=1/pi(12),Dz=(gj/2+1)*3,Mz={draw(e,t){const r=pi(t/Dz),n=r/2,s=r*gj,i=n,o=r*gj+r,l=-i,u=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,u),e.lineTo(ks*n-Ss*s,Ss*n+ks*s),e.lineTo(ks*i-Ss*o,Ss*i+ks*o),e.lineTo(ks*l-Ss*u,Ss*l+ks*u),e.lineTo(ks*n+Ss*s,ks*s-Ss*n),e.lineTo(ks*i+Ss*o,ks*o-Ss*i),e.lineTo(ks*l+Ss*u,ks*u-Ss*l),e.closePath()}};function Rz(e,t){let r=null,n=mN(s);e=typeof e=="function"?e:Gr(e||xN),t=typeof t=="function"?t:Gr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Gr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Gr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Pp(){}function Ip(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function N5(e){this._context=e}N5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ip(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fz(e){return new N5(e)}function k5(e){this._context=e}k5.prototype={areaStart:Pp,areaEnd:Pp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $z(e){return new k5(e)}function S5(e){this._context=e}S5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lz(e){return new S5(e)}function _5(e){this._context=e}_5.prototype={areaStart:Pp,areaEnd:Pp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Bz(e){return new _5(e)}function sC(e){return e<0?-1:1}function iC(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(sC(i)+sC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function oC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Bv(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function Dp(e){this._context=e}Dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bv(this,this._t0,oC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Bv(this,oC(this,r=iC(this,e,t)),r);break;default:Bv(this,this._t0,r=iC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function E5(e){this._context=new T5(e)}(E5.prototype=Object.create(Dp.prototype)).point=function(e,t){Dp.prototype.point.call(this,t,e)};function T5(e){this._context=e}T5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function Uz(e){return new Dp(e)}function Hz(e){return new E5(e)}function C5(e){this._context=e}C5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=lC(e),s=lC(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lC(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function qz(e){return new C5(e)}function lg(e,t){this._context=e,this._t=t}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function zz(e){return new lg(e,.5)}function Wz(e){return new lg(e,0)}function Kz(e){return new lg(e,1)}function hu(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function xj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Vz(e,t){return e[t]}function Gz(e){const t=[];return t.key=e,t}function Yz(){var e=Gr([]),t=xj,r=hu,n=Vz;function s(i){var o=Array.from(e.apply(this,arguments),Gz),l,u=o.length,d=-1,f;for(const p of i)for(l=0,++d;l<u;++l)(o[l][d]=[0,+n(p,o[l].key,d,i)]).data=p;for(l=0,f=gN(t(o));l<u;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Gr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Gr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?xj:typeof i=="function"?i:Gr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??hu,s):r},s}function Xz(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}hu(e,t)}}function Jz(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}hu(e,t)}}function Qz(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,u=0,d=0;l<o;++l){for(var f=e[t[l]],p=f[n][1]||0,m=f[n-1][1]||0,x=(p-m)/2,v=0;v<l;++v){var y=e[t[v]],b=y[n][1]||0,N=y[n-1][1]||0;x+=b-N}u+=p,d+=x*p}s[n-1][1]+=s[n-1][0]=r,u&&(r-=d/u)}s[n-1][1]+=s[n-1][0]=r,hu(e,t)}}function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var Zz=["type","size","sizeType"];function yj(){return yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yj.apply(this,arguments)}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){eW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eW(e,t,r){return t=tW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tW(e){var t=rW(e,"string");return Ah(t)=="symbol"?t:t+""}function rW(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nW(e,t){if(e==null)return{};var r=aW(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var A5={symbolCircle:xN,symbolCross:Sz,symbolDiamond:Ez,symbolSquare:Tz,symbolStar:Pz,symbolTriangle:Iz,symbolWye:Mz},sW=Math.PI/180,iW=function(t){var r="symbol".concat(sg(t));return A5[r]||xN},oW=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*sW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},lW=function(t,r){A5["symbol".concat(sg(t))]=r},yN=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,u=nW(t,Zz),d=uC(uC({},u),{},{type:n,size:i,sizeType:l}),f=function(){var b=iW(n),N=Rz().type(b).size(oW(i,l,n));return N()},p=d.className,m=d.cx,x=d.cy,v=Lt(d,!0);return m===+m&&x===+x&&i===+i?he.createElement("path",yj({},v,{className:tr("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(x,")"),d:f()})):null};yN.registerSymbol=lW;function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function vj(){return vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vj.apply(this,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){Oh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P5(n.key),n)}}function hW(e,t,r){return t&&dW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fW(e,t,r){return t=Mp(t),pW(e,O5()?Reflect.construct(t,r||[],Mp(e).constructor):t.apply(e,r))}function pW(e,t){if(t&&(fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mW(e)}function mW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O5=function(){return!!e})()}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mp(e)}function gW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bj(e,t)}function bj(e,t){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bj(e,t)}function Oh(e,t,r){return t=P5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P5(e){var t=xW(e,"string");return fu(t)=="symbol"?t:t+""}function xW(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _s=32,vN=(function(e){function t(){return uW(this,t),fW(this,t,arguments)}return gW(t,e),hW(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=_s/2,o=_s/6,l=_s/3,u=n.inactive?s:n.color;if(n.type==="plainline")return he.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:_s,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return he.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(_s,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return he.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(_s/8,"h").concat(_s,"v").concat(_s*3/4,"h").concat(-_s,"z"),className:"recharts-legend-icon"});if(he.isValidElement(n.legendIcon)){var d=cW({},n);return delete d.legendIcon,he.cloneElement(n.legendIcon,d)}return he.createElement(yN,{fill:u,cx:i,cy:i,size:_s,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,u=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:_s,height:_s},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,v){var y=x.formatter||u,b=tr(Oh(Oh({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",x.inactive));if(x.type==="none")return null;var N=Vt(x.value)?null:x.value;ci(!Vt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=x.inactive?d:x.color;return he.createElement("li",vj({className:b,style:p,key:"legend-item-".concat(v)},Vl(n.props,x,v)),he.createElement(hj,{width:o,height:o,viewBox:f,style:m},n.renderIcon(x)),he.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},y?y(N,x,v):N))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return he.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(L.PureComponent);Oh(vN,"displayName","Legend");Oh(vN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Uv,hC;function yW(){if(hC)return Uv;hC=1;var e=rg();function t(){this.__data__=new e,this.size=0}return Uv=t,Uv}var Hv,fC;function vW(){if(fC)return Hv;fC=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Hv=e,Hv}var qv,pC;function bW(){if(pC)return qv;pC=1;function e(t){return this.__data__.get(t)}return qv=e,qv}var zv,mC;function wW(){if(mC)return zv;mC=1;function e(t){return this.__data__.has(t)}return zv=e,zv}var Wv,gC;function jW(){if(gC)return Wv;gC=1;var e=rg(),t=cN(),r=uN(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<n-1)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(i,o),this.size=l.size,this}return Wv=s,Wv}var Kv,xC;function I5(){if(xC)return Kv;xC=1;var e=rg(),t=yW(),r=vW(),n=bW(),s=wW(),i=jW();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,Kv=o,Kv}var Vv,yC;function NW(){if(yC)return Vv;yC=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Vv=t,Vv}var Gv,vC;function kW(){if(vC)return Gv;vC=1;function e(t){return this.__data__.has(t)}return Gv=e,Gv}var Yv,bC;function D5(){if(bC)return Yv;bC=1;var e=uN(),t=NW(),r=kW();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Yv=n,Yv}var Xv,wC;function M5(){if(wC)return Xv;wC=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return Xv=e,Xv}var Jv,jC;function R5(){if(jC)return Jv;jC=1;function e(t,r){return t.has(r)}return Jv=e,Jv}var Qv,NC;function F5(){if(NC)return Qv;NC=1;var e=D5(),t=M5(),r=R5(),n=1,s=2;function i(o,l,u,d,f,p){var m=u&n,x=o.length,v=l.length;if(x!=v&&!(m&&v>x))return!1;var y=p.get(o),b=p.get(l);if(y&&b)return y==l&&b==o;var N=-1,k=!0,w=u&s?new e:void 0;for(p.set(o,l),p.set(l,o);++N<x;){var P=o[N],S=l[N];if(d)var _=m?d(S,P,N,l,o,p):d(P,S,N,o,l,p);if(_!==void 0){if(_)continue;k=!1;break}if(w){if(!t(l,function(E,C){if(!r(w,C)&&(P===E||f(P,E,u,d,p)))return w.push(C)})){k=!1;break}}else if(!(P===S||f(P,S,u,d,p))){k=!1;break}}return p.delete(o),p.delete(l),k}return Qv=i,Qv}var Zv,kC;function SW(){if(kC)return Zv;kC=1;var e=Pi(),t=e.Uint8Array;return Zv=t,Zv}var eb,SC;function _W(){if(SC)return eb;SC=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return eb=e,eb}var tb,_C;function bN(){if(_C)return tb;_C=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return tb=e,tb}var rb,EC;function EW(){if(EC)return rb;EC=1;var e=Sf(),t=SW(),r=lN(),n=F5(),s=_W(),i=bN(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",x="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",N="[object ArrayBuffer]",k="[object DataView]",w=e?e.prototype:void 0,P=w?w.valueOf:void 0;function S(_,E,C,M,D,A,O){switch(C){case k:if(_.byteLength!=E.byteLength||_.byteOffset!=E.byteOffset)return!1;_=_.buffer,E=E.buffer;case N:return!(_.byteLength!=E.byteLength||!A(new t(_),new t(E)));case u:case d:case m:return r(+_,+E);case f:return _.name==E.name&&_.message==E.message;case x:case y:return _==E+"";case p:var F=s;case v:var W=M&o;if(F||(F=i),_.size!=E.size&&!W)return!1;var Y=O.get(_);if(Y)return Y==E;M|=l,O.set(_,E);var Z=n(F(_),F(E),M,D,A,O);return O.delete(_),Z;case b:if(P)return P.call(_)==P.call(E)}return!1}return rb=S,rb}var nb,TC;function $5(){if(TC)return nb;TC=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return nb=e,nb}var ab,CC;function TW(){if(CC)return ab;CC=1;var e=$5(),t=Qa();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return ab=r,ab}var sb,AC;function CW(){if(AC)return sb;AC=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return sb=e,sb}var ib,OC;function AW(){if(OC)return ib;OC=1;function e(){return[]}return ib=e,ib}var ob,PC;function OW(){if(PC)return ob;PC=1;var e=CW(),t=AW(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return ob=i,ob}var lb,IC;function PW(){if(IC)return lb;IC=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return lb=e,lb}var cb,DC;function IW(){if(DC)return cb;DC=1;var e=go(),t=xo(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return cb=n,cb}var ub,MC;function wN(){if(MC)return ub;MC=1;var e=IW(),t=xo(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return ub=i,ub}var Yd={exports:{}},db,RC;function DW(){if(RC)return db;RC=1;function e(){return!1}return db=e,db}Yd.exports;var FC;function L5(){return FC||(FC=1,(function(e,t){var r=Pi(),n=DW(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||n;e.exports=d})(Yd,Yd.exports)),Yd.exports}var hb,$C;function jN(){if($C)return hb;$C=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return hb=r,hb}var fb,LC;function NN(){if(LC)return fb;LC=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return fb=t,fb}var pb,BC;function MW(){if(BC)return pb;BC=1;var e=go(),t=NN(),r=xo(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",x="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",w="[object Float64Array]",P="[object Int8Array]",S="[object Int16Array]",_="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",A={};A[k]=A[w]=A[P]=A[S]=A[_]=A[E]=A[C]=A[M]=A[D]=!0,A[n]=A[s]=A[b]=A[i]=A[N]=A[o]=A[l]=A[u]=A[d]=A[f]=A[p]=A[m]=A[x]=A[v]=A[y]=!1;function O(F){return r(F)&&t(F.length)&&!!A[e(F)]}return pb=O,pb}var mb,UC;function B5(){if(UC)return mb;UC=1;function e(t){return function(r){return t(r)}}return mb=e,mb}var Xd={exports:{}};Xd.exports;var HC;function RW(){return HC||(HC=1,(function(e,t){var r=i5(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var u=s&&s.require&&s.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Xd,Xd.exports)),Xd.exports}var gb,qC;function U5(){if(qC)return gb;qC=1;var e=MW(),t=B5(),r=RW(),n=r&&r.isTypedArray,s=n?t(n):e;return gb=s,gb}var xb,zC;function FW(){if(zC)return xb;zC=1;var e=PW(),t=wN(),r=Qa(),n=L5(),s=jN(),i=U5(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=r(d),m=!p&&t(d),x=!p&&!m&&n(d),v=!p&&!m&&!x&&i(d),y=p||m||x||v,b=y?e(d.length,String):[],N=b.length;for(var k in d)(f||l.call(d,k))&&!(y&&(k=="length"||x&&(k=="offset"||k=="parent")||v&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||s(k,N)))&&b.push(k);return b}return xb=u,xb}var yb,WC;function $W(){if(WC)return yb;WC=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return yb=t,yb}var vb,KC;function H5(){if(KC)return vb;KC=1;function e(t,r){return function(n){return t(r(n))}}return vb=e,vb}var bb,VC;function LW(){if(VC)return bb;VC=1;var e=H5(),t=e(Object.keys,Object);return bb=t,bb}var wb,GC;function BW(){if(GC)return wb;GC=1;var e=$W(),t=LW(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return wb=s,wb}var jb,YC;function Ef(){if(YC)return jb;YC=1;var e=oN(),t=NN();function r(n){return n!=null&&t(n.length)&&!e(n)}return jb=r,jb}var Nb,XC;function cg(){if(XC)return Nb;XC=1;var e=FW(),t=BW(),r=Ef();function n(s){return r(s)?e(s):t(s)}return Nb=n,Nb}var kb,JC;function UW(){if(JC)return kb;JC=1;var e=TW(),t=OW(),r=cg();function n(s){return e(s,r,t)}return kb=n,kb}var Sb,QC;function HW(){if(QC)return Sb;QC=1;var e=UW(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,u,d,f){var p=l&t,m=e(i),x=m.length,v=e(o),y=v.length;if(x!=y&&!p)return!1;for(var b=x;b--;){var N=m[b];if(!(p?N in o:n.call(o,N)))return!1}var k=f.get(i),w=f.get(o);if(k&&w)return k==o&&w==i;var P=!0;f.set(i,o),f.set(o,i);for(var S=p;++b<x;){N=m[b];var _=i[N],E=o[N];if(u)var C=p?u(E,_,N,o,i,f):u(_,E,N,i,o,f);if(!(C===void 0?_===E||d(_,E,l,u,f):C)){P=!1;break}S||(S=N=="constructor")}if(P&&!S){var M=i.constructor,D=o.constructor;M!=D&&"constructor"in i&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(P=!1)}return f.delete(i),f.delete(o),P}return Sb=s,Sb}var _b,ZC;function qW(){if(ZC)return _b;ZC=1;var e=nc(),t=Pi(),r=e(t,"DataView");return _b=r,_b}var Eb,eA;function zW(){if(eA)return Eb;eA=1;var e=nc(),t=Pi(),r=e(t,"Promise");return Eb=r,Eb}var Tb,tA;function q5(){if(tA)return Tb;tA=1;var e=nc(),t=Pi(),r=e(t,"Set");return Tb=r,Tb}var Cb,rA;function WW(){if(rA)return Cb;rA=1;var e=nc(),t=Pi(),r=e(t,"WeakMap");return Cb=r,Cb}var Ab,nA;function KW(){if(nA)return Ab;nA=1;var e=qW(),t=cN(),r=zW(),n=q5(),s=WW(),i=go(),o=o5(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",x=o(e),v=o(t),y=o(r),b=o(n),N=o(s),k=i;return(e&&k(new e(new ArrayBuffer(1)))!=m||t&&k(new t)!=l||r&&k(r.resolve())!=d||n&&k(new n)!=f||s&&k(new s)!=p)&&(k=function(w){var P=i(w),S=P==u?w.constructor:void 0,_=S?o(S):"";if(_)switch(_){case x:return m;case v:return l;case y:return d;case b:return f;case N:return p}return P}),Ab=k,Ab}var Ob,aA;function VW(){if(aA)return Ob;aA=1;var e=I5(),t=F5(),r=EW(),n=HW(),s=KW(),i=Qa(),o=L5(),l=U5(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function v(y,b,N,k,w,P){var S=i(y),_=i(b),E=S?f:s(y),C=_?f:s(b);E=E==d?p:E,C=C==d?p:C;var M=E==p,D=C==p,A=E==C;if(A&&o(y)){if(!o(b))return!1;S=!0,M=!1}if(A&&!M)return P||(P=new e),S||l(y)?t(y,b,N,k,w,P):r(y,b,E,N,k,w,P);if(!(N&u)){var O=M&&x.call(y,"__wrapped__"),F=D&&x.call(b,"__wrapped__");if(O||F){var W=O?y.value():y,Y=F?b.value():b;return P||(P=new e),w(W,Y,N,k,P)}}return A?(P||(P=new e),n(y,b,N,k,w,P)):!1}return Ob=v,Ob}var Pb,sA;function kN(){if(sA)return Pb;sA=1;var e=VW(),t=xo();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return Pb=r,Pb}var Ib,iA;function GW(){if(iA)return Ib;iA=1;var e=I5(),t=kN(),r=1,n=2;function s(i,o,l,u){var d=l.length,f=d,p=!u;if(i==null)return!f;for(i=Object(i);d--;){var m=l[d];if(p&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<f;){m=l[d];var x=m[0],v=i[x],y=m[1];if(p&&m[2]){if(v===void 0&&!(x in i))return!1}else{var b=new e;if(u)var N=u(v,y,x,i,o,b);if(!(N===void 0?t(y,v,r|n,u,b):N))return!1}}return!0}return Ib=s,Ib}var Db,oA;function z5(){if(oA)return Db;oA=1;var e=rl();function t(r){return r===r&&!e(r)}return Db=t,Db}var Mb,lA;function YW(){if(lA)return Mb;lA=1;var e=z5(),t=cg();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return Mb=r,Mb}var Rb,cA;function W5(){if(cA)return Rb;cA=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Rb=e,Rb}var Fb,uA;function XW(){if(uA)return Fb;uA=1;var e=GW(),t=YW(),r=W5();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Fb=n,Fb}var $b,dA;function JW(){if(dA)return $b;dA=1;function e(t,r){return t!=null&&r in Object(t)}return $b=e,$b}var Lb,hA;function QW(){if(hA)return Lb;hA=1;var e=u5(),t=wN(),r=Qa(),n=jN(),s=NN(),i=ag();function o(l,u,d){u=e(u,l);for(var f=-1,p=u.length,m=!1;++f<p;){var x=i(u[f]);if(!(m=l!=null&&d(l,x)))break;l=l[x]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&s(p)&&n(x,p)&&(r(l)||t(l)))}return Lb=o,Lb}var Bb,fA;function ZW(){if(fA)return Bb;fA=1;var e=JW(),t=QW();function r(n,s){return n!=null&&t(n,s,e)}return Bb=r,Bb}var Ub,pA;function eK(){if(pA)return Ub;pA=1;var e=kN(),t=d5(),r=ZW(),n=iN(),s=z5(),i=W5(),o=ag(),l=1,u=2;function d(f,p){return n(f)&&s(p)?i(o(f),p):function(m){var x=t(m,f);return x===void 0&&x===p?r(m,f):e(p,x,l|u)}}return Ub=d,Ub}var Hb,mA;function Ku(){if(mA)return Hb;mA=1;function e(t){return t}return Hb=e,Hb}var qb,gA;function tK(){if(gA)return qb;gA=1;function e(t){return function(r){return r?.[t]}}return qb=e,qb}var zb,xA;function rK(){if(xA)return zb;xA=1;var e=hN();function t(r){return function(n){return e(n,r)}}return zb=t,zb}var Wb,yA;function nK(){if(yA)return Wb;yA=1;var e=tK(),t=rK(),r=iN(),n=ag();function s(i){return r(i)?e(n(i)):t(i)}return Wb=s,Wb}var Kb,vA;function Ii(){if(vA)return Kb;vA=1;var e=XW(),t=eK(),r=Ku(),n=Qa(),s=nK();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return Kb=i,Kb}var Vb,bA;function K5(){if(bA)return Vb;bA=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return Vb=e,Vb}var Gb,wA;function aK(){if(wA)return Gb;wA=1;function e(t){return t!==t}return Gb=e,Gb}var Yb,jA;function sK(){if(jA)return Yb;jA=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return Yb=e,Yb}var Xb,NA;function iK(){if(NA)return Xb;NA=1;var e=K5(),t=aK(),r=sK();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Xb=n,Xb}var Jb,kA;function oK(){if(kA)return Jb;kA=1;var e=iK();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return Jb=t,Jb}var Qb,SA;function lK(){if(SA)return Qb;SA=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return Qb=e,Qb}var Zb,_A;function cK(){if(_A)return Zb;_A=1;function e(){}return Zb=e,Zb}var ew,EA;function uK(){if(EA)return ew;EA=1;var e=q5(),t=cK(),r=bN(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return ew=s,ew}var tw,TA;function dK(){if(TA)return tw;TA=1;var e=D5(),t=oK(),r=lK(),n=R5(),s=uK(),i=bN(),o=200;function l(u,d,f){var p=-1,m=t,x=u.length,v=!0,y=[],b=y;if(f)v=!1,m=r;else if(x>=o){var N=d?null:s(u);if(N)return i(N);v=!1,m=n,b=new e}else b=d?[]:y;e:for(;++p<x;){var k=u[p],w=d?d(k):k;if(k=f||k!==0?k:0,v&&w===w){for(var P=b.length;P--;)if(b[P]===w)continue e;d&&b.push(w),y.push(k)}else m(b,w,f)||(b!==y&&b.push(w),y.push(k))}return y}return tw=l,tw}var rw,CA;function hK(){if(CA)return rw;CA=1;var e=Ii(),t=dK();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return rw=r,rw}var fK=hK();const AA=Mr(fK);function V5(e,t,r){return t===!0?AA(e,r):Vt(t)?AA(e,t):e}function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}var pK=["ref"];function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){ug(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y5(n.key),n)}}function gK(e,t,r){return t&&PA(e.prototype,t),r&&PA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xK(e,t,r){return t=Rp(t),yK(e,G5()?Reflect.construct(t,r||[],Rp(e).constructor):t.apply(e,r))}function yK(e,t){if(t&&(pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vK(e)}function vK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G5=function(){return!!e})()}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rp(e)}function bK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wj(e,t)}function wj(e,t){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},wj(e,t)}function ug(e,t,r){return t=Y5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y5(e){var t=wK(e,"string");return pu(t)=="symbol"?t:t+""}function wK(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jK(e,t){if(e==null)return{};var r=NK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kK(e){return e.value}function SK(e,t){if(he.isValidElement(e))return he.cloneElement(e,t);if(typeof e=="function")return he.createElement(e,t);t.ref;var r=jK(t,pK);return he.createElement(vN,r)}var IA=1,da=(function(e){function t(){var r;mK(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=xK(this,t,[].concat(s)),ug(r,"lastBoundingBox",{width:-1,height:-1}),r}return bK(t,e),gK(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>IA||Math.abs(s.height-this.lastBoundingBox.height)>IA)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Vi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,u=s.margin,d=s.chartWidth,f=s.chartHeight,p,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();p={left:((d||0)-x.width)/2}}else p=o==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((f||0)-v.height)/2}}else m=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Vi(Vi({},p),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,u=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,p=Vi(Vi({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return he.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){n.wrapperNode=x}},SK(i,Vi(Vi({},this.props),{},{payload:V5(f,d,kK)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Vi(Vi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&lt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(L.PureComponent);ug(da,"displayName","Legend");ug(da,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var nw,DA;function _K(){if(DA)return nw;DA=1;var e=Sf(),t=wN(),r=Qa(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return nw=s,nw}var aw,MA;function X5(){if(MA)return aw;MA=1;var e=$5(),t=_K();function r(n,s,i,o,l){var u=-1,d=n.length;for(i||(i=t),l||(l=[]);++u<d;){var f=n[u];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return aw=r,aw}var sw,RA;function EK(){if(RA)return sw;RA=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),u=l.length;u--;){var d=l[t?u:++i];if(n(o[d],d,o)===!1)break}return r}}return sw=e,sw}var iw,FA;function TK(){if(FA)return iw;FA=1;var e=EK(),t=e();return iw=t,iw}var ow,$A;function J5(){if($A)return ow;$A=1;var e=TK(),t=cg();function r(n,s){return n&&e(n,s,t)}return ow=r,ow}var lw,LA;function CK(){if(LA)return lw;LA=1;var e=Ef();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,u=Object(s);(n?l--:++l<o)&&i(u[l],l,u)!==!1;);return s}}return lw=t,lw}var cw,BA;function SN(){if(BA)return cw;BA=1;var e=J5(),t=CK(),r=t(e);return cw=r,cw}var uw,UA;function Q5(){if(UA)return uw;UA=1;var e=SN(),t=Ef();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,u,d){o[++i]=s(l,u,d)}),o}return uw=r,uw}var dw,HA;function AK(){if(HA)return dw;HA=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return dw=e,dw}var hw,qA;function OK(){if(qA)return hw;qA=1;var e=qu();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),u=n!==void 0,d=n===null,f=n===n,p=e(n);if(!d&&!p&&!l&&r>n||l&&u&&f&&!d&&!p||i&&u&&f||!s&&f||!o)return 1;if(!i&&!l&&!p&&r<n||p&&s&&o&&!i&&!l||d&&s&&o||!u&&o||!f)return-1}return 0}return hw=t,hw}var fw,zA;function PK(){if(zA)return fw;zA=1;var e=OK();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,u=o.length,d=s.length;++i<u;){var f=e(o[i],l[i]);if(f){if(i>=d)return f;var p=s[i];return f*(p=="desc"?-1:1)}}return r.index-n.index}return fw=t,fw}var pw,WA;function IK(){if(WA)return pw;WA=1;var e=dN(),t=hN(),r=Ii(),n=Q5(),s=AK(),i=B5(),o=PK(),l=Ku(),u=Qa();function d(f,p,m){p.length?p=e(p,function(y){return u(y)?function(b){return t(b,y.length===1?y[0]:y)}:y}):p=[l];var x=-1;p=e(p,i(r));var v=n(f,function(y,b,N){var k=e(p,function(w){return w(y)});return{criteria:k,index:++x,value:y}});return s(v,function(y,b){return o(y,b,m)})}return pw=d,pw}var mw,KA;function DK(){if(KA)return mw;KA=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return mw=e,mw}var gw,VA;function MK(){if(VA)return gw;VA=1;var e=DK(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,u=t(o.length-s,0),d=Array(u);++l<u;)d[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(d),e(n,this,f)}}return gw=r,gw}var xw,GA;function RK(){if(GA)return xw;GA=1;function e(t){return function(){return t}}return xw=e,xw}var yw,YA;function Z5(){if(YA)return yw;YA=1;var e=nc(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return yw=t,yw}var vw,XA;function FK(){if(XA)return vw;XA=1;var e=RK(),t=Z5(),r=Ku(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return vw=n,vw}var bw,JA;function $K(){if(JA)return bw;JA=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),u=t-(l-o);if(o=l,u>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return bw=n,bw}var ww,QA;function LK(){if(QA)return ww;QA=1;var e=FK(),t=$K(),r=t(e);return ww=r,ww}var jw,ZA;function BK(){if(ZA)return jw;ZA=1;var e=Ku(),t=MK(),r=LK();function n(s,i){return r(t(s,i,e),s+"")}return jw=n,jw}var Nw,e4;function dg(){if(e4)return Nw;e4=1;var e=lN(),t=Ef(),r=jN(),n=rl();function s(i,o,l){if(!n(l))return!1;var u=typeof o;return(u=="number"?t(l)&&r(o,l.length):u=="string"&&o in l)?e(l[o],i):!1}return Nw=s,Nw}var kw,t4;function UK(){if(t4)return kw;t4=1;var e=X5(),t=IK(),r=BK(),n=dg(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return kw=s,kw}var HK=UK();const _N=Mr(HK);function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jj.apply(this,arguments)}function qK(e,t){return VK(e)||KK(e,t)||WK(e,t)||zK()}function zK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WK(e,t){if(e){if(typeof e=="string")return r4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r4(e,t)}}function r4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function KK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function VK(e){if(Array.isArray(e))return e}function n4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(r),!0).forEach(function(n){GK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GK(e,t,r){return t=YK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YK(e){var t=XK(e,"string");return Ph(t)=="symbol"?t:t+""}function XK(e,t){if(Ph(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JK(e){return Array.isArray(e)&&Hn(e[0])&&Hn(e[1])?e.join(" ~ "):e}var QK=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,u=t.labelStyle,d=u===void 0?{}:u,f=t.payload,p=t.formatter,m=t.itemSorter,x=t.wrapperClassName,v=t.labelClassName,y=t.label,b=t.labelFormatter,N=t.accessibilityLayer,k=N===void 0?!1:N,w=function(){if(f&&f.length){var O={padding:0,margin:0},F=(m?_N(f,m):f).map(function(W,Y){if(W.type==="none")return null;var Z=Sw({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},l),re=W.formatter||p||JK,ne=W.value,U=W.name,oe=ne,K=U;if(re&&oe!=null&&K!=null){var R=re(ne,U,W,Y,f);if(Array.isArray(R)){var Q=qK(R,2);oe=Q[0],K=Q[1]}else oe=R}return he.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:Z},Hn(K)?he.createElement("span",{className:"recharts-tooltip-item-name"},K):null,Hn(K)?he.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,he.createElement("span",{className:"recharts-tooltip-item-value"},oe),he.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return he.createElement("ul",{className:"recharts-tooltip-item-list",style:O},F)}return null},P=Sw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=Sw({margin:0},d),_=!nr(y),E=_?y:"",C=tr("recharts-default-tooltip",x),M=tr("recharts-tooltip-label",v);_&&b&&f!==void 0&&f!==null&&(E=b(y,f));var D=k?{role:"status","aria-live":"assertive"}:{};return he.createElement("div",jj({className:C,style:P},D),he.createElement("p",{className:M,style:S},he.isValidElement(E)?E:"".concat(E)),w())};function Ih(e){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ih(e)}function G0(e,t,r){return t=ZK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=eV(e,"string");return Ih(t)=="symbol"?t:t+""}function eV(e,t){if(Ih(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rd="recharts-tooltip-wrapper",tV={visibility:"hidden"};function rV(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return tr(Rd,G0(G0(G0(G0({},"".concat(Rd,"-right"),lt(r)&&t&&lt(t.x)&&r>=t.x),"".concat(Rd,"-left"),lt(r)&&t&&lt(t.x)&&r<t.x),"".concat(Rd,"-bottom"),lt(n)&&t&&lt(t.y)&&n>=t.y),"".concat(Rd,"-top"),lt(n)&&t&&lt(t.y)&&n<t.y))}function a4(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,u=e.viewBox,d=e.viewBoxDimension;if(i&&lt(i[n]))return i[n];var f=r[n]-l-s,p=r[n]+s;if(t[n])return o[n]?f:p;if(o[n]){var m=f,x=u[n];return m<x?Math.max(p,u[n]):Math.max(f,u[n])}var v=p+l,y=u[n]+d;return v>y?Math.max(f,u[n]):Math.max(p,u[n])}function nV(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function aV(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,u=e.viewBox,d,f,p;return o.height>0&&o.width>0&&r?(f=a4({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=a4({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=nV({translateX:f,translateY:p,useTranslate3d:l})):d=tV,{cssProperties:d,cssClasses:rV({translateX:f,translateY:p,coordinate:r})}}function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function s4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function i4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(r),!0).forEach(function(n){kj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tM(n.key),n)}}function oV(e,t,r){return t&&iV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lV(e,t,r){return t=Fp(t),cV(e,eM()?Reflect.construct(t,r||[],Fp(e).constructor):t.apply(e,r))}function cV(e,t){if(t&&(mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uV(e)}function uV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eM=function(){return!!e})()}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fp(e)}function dV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nj(e,t)}function Nj(e,t){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Nj(e,t)}function kj(e,t,r){return t=tM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tM(e){var t=hV(e,"string");return mu(t)=="symbol"?t:t+""}function hV(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var o4=1,fV=(function(e){function t(){var r;sV(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=lV(this,t,[].concat(s)),kj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),kj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,u,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return dV(t,e),oV(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>o4||Math.abs(n.height-this.state.lastBoundingBox.height)>o4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.children,f=s.coordinate,p=s.hasPayload,m=s.isAnimationActive,x=s.offset,v=s.position,y=s.reverseDirection,b=s.useTranslate3d,N=s.viewBox,k=s.wrapperStyle,w=aV({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:x,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:N}),P=w.cssClasses,S=w.cssProperties,_=i4(i4({transition:m&&i?"transform ".concat(l,"ms ").concat(u):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},k);return he.createElement("div",{tabIndex:-1,className:P,style:_,ref:function(C){n.wrapperNode=C}},d)}}])})(L.PureComponent),pV=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},nl={isSsr:pV()};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function l4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(r),!0).forEach(function(n){EN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nM(n.key),n)}}function xV(e,t,r){return t&&gV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yV(e,t,r){return t=$p(t),vV(e,rM()?Reflect.construct(t,r||[],$p(e).constructor):t.apply(e,r))}function vV(e,t){if(t&&(gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bV(e)}function bV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rM=function(){return!!e})()}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(e)}function wV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sj(e,t)}function Sj(e,t){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Sj(e,t)}function EN(e,t,r){return t=nM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nM(e){var t=jV(e,"string");return gu(t)=="symbol"?t:t+""}function jV(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function NV(e){return e.dataKey}function kV(e,t){return he.isValidElement(e)?he.cloneElement(e,t):typeof e=="function"?he.createElement(e,t):he.createElement(QK,t)}var Ur=(function(e){function t(){return mV(this,t),yV(this,t,arguments)}return wV(t,e),xV(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,u=s.animationEasing,d=s.content,f=s.coordinate,p=s.filterNull,m=s.isAnimationActive,x=s.offset,v=s.payload,y=s.payloadUniqBy,b=s.position,N=s.reverseDirection,k=s.useTranslate3d,w=s.viewBox,P=s.wrapperStyle,S=v??[];p&&S.length&&(S=V5(v.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,NV));var _=S.length>0;return he.createElement(fV,{allowEscapeViewBox:o,animationDuration:l,animationEasing:u,isAnimationActive:m,active:i,coordinate:f,hasPayload:_,offset:x,position:b,reverseDirection:N,useTranslate3d:k,viewBox:w,wrapperStyle:P},kV(d,c4(c4({},this.props),{},{payload:S})))}}])})(L.PureComponent);EN(Ur,"displayName","Tooltip");EN(Ur,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var _w,u4;function SV(){if(u4)return _w;u4=1;var e=Pi(),t=function(){return e.Date.now()};return _w=t,_w}var Ew,d4;function _V(){if(d4)return Ew;d4=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Ew=t,Ew}var Tw,h4;function EV(){if(h4)return Tw;h4=1;var e=_V(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Tw=r,Tw}var Cw,f4;function aM(){if(f4)return Cw;f4=1;var e=EV(),t=rl(),r=qu(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(r(d))return n;if(t(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=t(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=i.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):s.test(d)?n:+d}return Cw=u,Cw}var Aw,p4;function TV(){if(p4)return Aw;p4=1;var e=rl(),t=SV(),r=aM(),n="Expected a function",s=Math.max,i=Math.min;function o(l,u,d){var f,p,m,x,v,y,b=0,N=!1,k=!1,w=!0;if(typeof l!="function")throw new TypeError(n);u=r(u)||0,e(d)&&(N=!!d.leading,k="maxWait"in d,m=k?s(r(d.maxWait)||0,u):m,w="trailing"in d?!!d.trailing:w);function P(F){var W=f,Y=p;return f=p=void 0,b=F,x=l.apply(Y,W),x}function S(F){return b=F,v=setTimeout(C,u),N?P(F):x}function _(F){var W=F-y,Y=F-b,Z=u-W;return k?i(Z,m-Y):Z}function E(F){var W=F-y,Y=F-b;return y===void 0||W>=u||W<0||k&&Y>=m}function C(){var F=t();if(E(F))return M(F);v=setTimeout(C,_(F))}function M(F){return v=void 0,w&&f?P(F):(f=p=void 0,x)}function D(){v!==void 0&&clearTimeout(v),b=0,f=y=p=v=void 0}function A(){return v===void 0?x:M(t())}function O(){var F=t(),W=E(F);if(f=arguments,p=this,y=F,W){if(v===void 0)return S(y);if(k)return clearTimeout(v),v=setTimeout(C,u),P(y)}return v===void 0&&(v=setTimeout(C,u)),x}return O.cancel=D,O.flush=A,O}return Aw=o,Aw}var Ow,m4;function CV(){if(m4)return Ow;m4=1;var e=TV(),t=rl(),r="Expected a function";function n(s,i,o){var l=!0,u=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,u="trailing"in o?!!o.trailing:u),e(s,i,{leading:l,maxWait:i,trailing:u})}return Ow=n,Ow}var AV=CV();const sM=Mr(AV);function Dh(e){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}function g4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(r),!0).forEach(function(n){OV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OV(e,t,r){return t=PV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=IV(e,"string");return Dh(t)=="symbol"?t:t+""}function IV(e,t){if(Dh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DV(e,t){return $V(e)||FV(e,t)||RV(e,t)||MV()}function MV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RV(e,t){if(e){if(typeof e=="string")return x4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x4(e,t)}}function x4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function $V(e){if(Array.isArray(e))return e}var Bn=L.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,u=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,p=e.minHeight,m=e.maxHeight,x=e.children,v=e.debounce,y=v===void 0?0:v,b=e.id,N=e.className,k=e.onResize,w=e.style,P=w===void 0?{}:w,S=L.useRef(null),_=L.useRef();_.current=k,L.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var E=L.useState({containerWidth:s.width,containerHeight:s.height}),C=DV(E,2),M=C[0],D=C[1],A=L.useCallback(function(F,W){D(function(Y){var Z=Math.round(F),re=Math.round(W);return Y.containerWidth===Z&&Y.containerHeight===re?Y:{containerWidth:Z,containerHeight:re}})},[]);L.useEffect(function(){var F=function(U){var oe,K=U[0].contentRect,R=K.width,Q=K.height;A(R,Q),(oe=_.current)===null||oe===void 0||oe.call(_,R,Q)};y>0&&(F=sM(F,y,{trailing:!0,leading:!1}));var W=new ResizeObserver(F),Y=S.current.getBoundingClientRect(),Z=Y.width,re=Y.height;return A(Z,re),W.observe(S.current),function(){W.disconnect()}},[A,y]);var O=L.useMemo(function(){var F=M.containerWidth,W=M.containerHeight;if(F<0||W<0)return null;ci(Dl(o)||Dl(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,u),ci(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=Dl(o)?F:o,Z=Dl(u)?W:u;r&&r>0&&(Y?Z=Y/r:Z&&(Y=Z*r),m&&Z>m&&(Z=m)),ci(Y>0||Z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,Z,o,u,f,p,r);var re=!Array.isArray(x)&&so(x.type).endsWith("Chart");return he.Children.map(x,function(ne){return he.isValidElement(ne)?L.cloneElement(ne,Y0({width:Y,height:Z},re?{style:Y0({height:"100%",width:"100%",maxHeight:Z,maxWidth:Y},ne.props.style)}:{})):ne})},[r,x,u,m,p,f,M,o]);return he.createElement("div",{id:b?"".concat(b):void 0,className:tr("recharts-responsive-container",N),style:Y0(Y0({},P),{},{width:o,height:u,minWidth:f,minHeight:p,maxHeight:m}),ref:S},O)}),Gl=function(t){return null};Gl.displayName="Cell";function Mh(e){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mh(e)}function y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(r),!0).forEach(function(n){LV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LV(e,t,r){return t=BV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=UV(e,"string");return Mh(t)=="symbol"?t:t+""}function UV(e,t){if(Mh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uc={widthCache:{},cacheCount:0},HV=2e3,qV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},v4="recharts_measurement_span";function zV(e){var t=_j({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ah=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||nl.isSsr)return{width:0,height:0};var n=zV(r),s=JSON.stringify({text:t,copyStyle:n});if(Uc.widthCache[s])return Uc.widthCache[s];try{var i=document.getElementById(v4);i||(i=document.createElement("span"),i.setAttribute("id",v4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=_j(_j({},qV),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),u={width:l.width,height:l.height};return Uc.widthCache[s]=u,++Uc.cacheCount>HV&&(Uc.cacheCount=0,Uc.widthCache={}),u}catch{return{width:0,height:0}}},WV=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Rh(e){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function Lp(e,t){return YV(e)||GV(e,t)||VV(e,t)||KV()}function KV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VV(e,t){if(e){if(typeof e=="string")return b4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b4(e,t)}}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function YV(e){if(Array.isArray(e))return e}function XV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QV(n.key),n)}}function JV(e,t,r){return t&&w4(e.prototype,t),r&&w4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QV(e){var t=ZV(e,"string");return Rh(t)=="symbol"?t:t+""}function ZV(e,t){if(Rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},rG=Object.keys(iM),Zc="NaN";function nG(e,t){return e*iM[t]}var X0=(function(){function e(t,r){XV(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!eG.test(r)&&(this.num=NaN,this.unit=""),rG.includes(r)&&(this.num=nG(t,r),this.unit="px")}return JV(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=tG.exec(r))!==null&&n!==void 0?n:[],i=Lp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function oM(e){if(e.includes(Zc))return Zc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=j4.exec(t))!==null&&r!==void 0?r:[],s=Lp(n,4),i=s[1],o=s[2],l=s[3],u=X0.parse(i??""),d=X0.parse(l??""),f=o==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return Zc;t=t.replace(j4,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,m=(p=N4.exec(t))!==null&&p!==void 0?p:[],x=Lp(m,4),v=x[1],y=x[2],b=x[3],N=X0.parse(v??""),k=X0.parse(b??""),w=y==="+"?N.add(k):N.subtract(k);if(w.isNaN())return Zc;t=t.replace(N4,w.toString())}return t}var k4=/\(([^()]*)\)/;function aG(e){for(var t=e;t.includes("(");){var r=k4.exec(t),n=Lp(r,2),s=n[1];t=t.replace(k4,oM(s))}return t}function sG(e){var t=e.replace(/\s+/g,"");return t=aG(t),t=oM(t),t}function iG(e){try{return sG(e)}catch{return Zc}}function Pw(e){var t=iG(e.slice(5,-1));return t===Zc?"":t}var oG=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lG=["dx","dy","angle","className","breakAll"];function Ej(){return Ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ej.apply(this,arguments)}function S4(e,t){if(e==null)return{};var r=cG(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _4(e,t){return fG(e)||hG(e,t)||dG(e,t)||uG()}function uG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dG(e,t){if(e){if(typeof e=="string")return E4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E4(e,t)}}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fG(e){if(Array.isArray(e))return e}var lM=/[ \f\n\r\t\v\u2028\u2029]+/,cM=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];nr(r)||(n?i=r.toString().split(""):i=r.toString().split(lM));var o=i.map(function(u){return{word:u,width:ah(u,s).width}}),l=n?0:ah("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},pG=function(t,r,n,s,i){var o=t.maxLines,l=t.children,u=t.style,d=t.breakAll,f=lt(o),p=l,m=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(Z,re){var ne=re.word,U=re.width,oe=Z[Z.length-1];if(oe&&(s==null||i||oe.width+U+n<Number(s)))oe.words.push(ne),oe.width+=U+n;else{var K={words:[ne],width:U};Z.push(K)}return Z},[])},x=m(r),v=function(Y){return Y.reduce(function(Z,re){return Z.width>re.width?Z:re})};if(!f)return x;for(var y="",b=function(Y){var Z=p.slice(0,Y),re=cM({breakAll:d,style:u,children:Z+y}).wordsWithComputedWidth,ne=m(re),U=ne.length>o||v(ne).width>Number(s);return[U,ne]},N=0,k=p.length-1,w=0,P;N<=k&&w<=p.length-1;){var S=Math.floor((N+k)/2),_=S-1,E=b(_),C=_4(E,2),M=C[0],D=C[1],A=b(S),O=_4(A,1),F=O[0];if(!M&&!F&&(N=S+1),M&&F&&(k=S-1),!M&&F){P=D;break}w++}return P||x},T4=function(t){var r=nr(t)?[]:t.toString().split(lM);return[{words:r}]},mG=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!nl.isSsr){var u,d,f=cM({breakAll:o,children:s,style:i});if(f){var p=f.wordsWithComputedWidth,m=f.spaceWidth;u=p,d=m}else return T4(s);return pG({breakAll:o,children:s,maxLines:l,style:i},u,d,r,n)}return T4(s)},C4="#808080",Yl=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,u=t.capHeight,d=u===void 0?"0.71em":u,f=t.scaleToFit,p=f===void 0?!1:f,m=t.textAnchor,x=m===void 0?"start":m,v=t.verticalAnchor,y=v===void 0?"end":v,b=t.fill,N=b===void 0?C4:b,k=S4(t,oG),w=L.useMemo(function(){return mG({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:p,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,p,k.style,k.width]),P=k.dx,S=k.dy,_=k.angle,E=k.className,C=k.breakAll,M=S4(k,lG);if(!Hn(n)||!Hn(i))return null;var D=n+(lt(P)?P:0),A=i+(lt(S)?S:0),O;switch(y){case"start":O=Pw("calc(".concat(d,")"));break;case"middle":O=Pw("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:O=Pw("calc(".concat(w.length-1," * -").concat(l,")"));break}var F=[];if(p){var W=w[0].width,Y=k.width;F.push("scale(".concat((lt(Y)?Y/W:1)/W,")"))}return _&&F.push("rotate(".concat(_,", ").concat(D,", ").concat(A,")")),F.length&&(M.transform=F.join(" ")),he.createElement("text",Ej({},Lt(M,!0),{x:D,y:A,className:tr("recharts-text",E),textAnchor:x,fill:N.includes("url")?C4:N}),w.map(function(Z,re){var ne=Z.words.join(C?"":" ");return he.createElement("tspan",{x:D,dy:re===0?O:l,key:"".concat(ne,"-").concat(re)},ne)}))};function Jo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function TN(e){let t,r,n;e.length!==2?(t=Jo,r=(l,u)=>Jo(e(l),u),n=(l,u)=>e(l)-u):(t=e===Jo||e===gG?e:xG,r=e,n=e);function s(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<0?d=p+1:f=p}while(d<f)}return d}function i(l,u,d=0,f=l.length){if(d<f){if(t(u,u)!==0)return f;do{const p=d+f>>>1;r(l[p],u)<=0?d=p+1:f=p}while(d<f)}return d}function o(l,u,d=0,f=l.length){const p=s(l,u,d,f-1);return p>d&&n(l[p-1],u)>-n(l[p],u)?p-1:p}return{left:s,center:o,right:i}}function xG(){return 0}function uM(e){return e===null?NaN:+e}function*yG(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const vG=TN(Jo),Tf=vG.right;TN(uM).center;class A4 extends Map{constructor(t,r=jG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(O4(this,t))}has(t){return super.has(O4(this,t))}set(t,r){return super.set(bG(this,t),r)}delete(t){return super.delete(wG(this,t))}}function O4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function bG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function wG({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function jG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function NG(e=Jo){if(e===Jo)return dM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function dM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kG=Math.sqrt(50),SG=Math.sqrt(10),_G=Math.sqrt(2);function Bp(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=kG?10:i>=SG?5:i>=_G?2:1;let l,u,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),u=Math.round(t*d),l/d<e&&++l,u/d>t&&--u,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),u=Math.round(t/d),l*d<e&&++l,u*d>t&&--u),u<l&&.5<=r&&r<2?Bp(e,t,r*2):[l,u,d]}function Tj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Bp(t,e,r):Bp(e,t,r);if(!(i>=s))return[];const l=i-s+1,u=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)u[d]=(i-d)/-o;else for(let d=0;d<l;++d)u[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)u[d]=(s+d)/-o;else for(let d=0;d<l;++d)u[d]=(s+d)*o;return u}function Cj(e,t,r){return t=+t,e=+e,r=+r,Bp(e,t,r)[2]}function Aj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Cj(t,e,r):Cj(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function P4(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function I4(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hM(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?dM:NG(s);n>r;){if(n-r>600){const u=n-r+1,d=t-r+1,f=Math.log(u),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),x=Math.max(r,Math.floor(t-d*p/u+m)),v=Math.min(n,Math.floor(t+(u-d)*p/u+m));hM(e,t,x,v,s)}const i=e[t];let o=r,l=n;for(Fd(e,r,t),s(e[n],i)>0&&Fd(e,r,n);o<l;){for(Fd(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Fd(e,r,l):(++l,Fd(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Fd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function EG(e,t,r){if(e=Float64Array.from(yG(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return I4(e);if(t>=1)return P4(e);var n,s=(n-1)*t,i=Math.floor(s),o=P4(hM(e,i).subarray(0,i+1)),l=I4(e.subarray(i+1));return o+(l-o)*(s-i)}}function TG(e,t,r=uM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function CG(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Rs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Oj=Symbol("implicit");function CN(){var e=new A4,t=[],r=[],n=Oj;function s(i){let o=e.get(i);if(o===void 0){if(n!==Oj)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new A4;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return CN(t,r).unknown(n)},Rs.apply(s,arguments),s}function Fh(){var e=CN().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,u=0,d=0,f=.5;delete e.unknown;function p(){var m=t().length,x=s<n,v=x?s:n,y=x?n:s;i=(y-v)/Math.max(1,m-u+d*2),l&&(i=Math.floor(i)),v+=(y-v-i*(m-u))*f,o=i*(1-u),l&&(v=Math.round(v),o=Math.round(o));var b=CG(m).map(function(N){return v+i*N});return r(x?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),p()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,p()):l},e.padding=function(m){return arguments.length?(u=Math.min(1,d=+m),p()):u},e.paddingInner=function(m){return arguments.length?(u=Math.min(1,m),p()):u},e.paddingOuter=function(m){return arguments.length?(d=+m,p()):d},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),p()):f},e.copy=function(){return Fh(t(),[n,s]).round(l).paddingInner(u).paddingOuter(d).align(f)},Rs.apply(p(),arguments)}function fM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fM(t())},e}function sh(){return fM(Fh.apply(null,arguments).paddingInner(1))}function AN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Cf(){}var $h=.7,Up=1/$h,ou="\\s*([+-]?\\d+)\\s*",Lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AG=/^#([0-9a-f]{3,8})$/,OG=new RegExp(`^rgb\\(${ou},${ou},${ou}\\)$`),PG=new RegExp(`^rgb\\(${_i},${_i},${_i}\\)$`),IG=new RegExp(`^rgba\\(${ou},${ou},${ou},${Lh}\\)$`),DG=new RegExp(`^rgba\\(${_i},${_i},${_i},${Lh}\\)$`),MG=new RegExp(`^hsl\\(${Lh},${_i},${_i}\\)$`),RG=new RegExp(`^hsla\\(${Lh},${_i},${_i},${Lh}\\)$`),D4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AN(Cf,Bh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:M4,formatHex:M4,formatHex8:FG,formatHsl:$G,formatRgb:R4,toString:R4});function M4(){return this.rgb().formatHex()}function FG(){return this.rgb().formatHex8()}function $G(){return mM(this).formatHsl()}function R4(){return this.rgb().formatRgb()}function Bh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=AG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?F4(t):r===3?new Xa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?J0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?J0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=OG.exec(e))?new Xa(t[1],t[2],t[3],1):(t=PG.exec(e))?new Xa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=IG.exec(e))?J0(t[1],t[2],t[3],t[4]):(t=DG.exec(e))?J0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MG.exec(e))?B4(t[1],t[2]/100,t[3]/100,1):(t=RG.exec(e))?B4(t[1],t[2]/100,t[3]/100,t[4]):D4.hasOwnProperty(e)?F4(D4[e]):e==="transparent"?new Xa(NaN,NaN,NaN,0):null}function F4(e){return new Xa(e>>16&255,e>>8&255,e&255,1)}function J0(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xa(e,t,r,n)}function LG(e){return e instanceof Cf||(e=Bh(e)),e?(e=e.rgb(),new Xa(e.r,e.g,e.b,e.opacity)):new Xa}function Pj(e,t,r,n){return arguments.length===1?LG(e):new Xa(e,t,r,n??1)}function Xa(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}AN(Xa,Pj,pM(Cf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$h:Math.pow($h,e),new Xa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xa(Ll(this.r),Ll(this.g),Ll(this.b),Hp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$4,formatHex:$4,formatHex8:BG,formatRgb:L4,toString:L4}));function $4(){return`#${Ml(this.r)}${Ml(this.g)}${Ml(this.b)}`}function BG(){return`#${Ml(this.r)}${Ml(this.g)}${Ml(this.b)}${Ml((isNaN(this.opacity)?1:this.opacity)*255)}`}function L4(){const e=Hp(this.opacity);return`${e===1?"rgb(":"rgba("}${Ll(this.r)}, ${Ll(this.g)}, ${Ll(this.b)}${e===1?")":`, ${e})`}`}function Hp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ml(e){return e=Ll(e),(e<16?"0":"")+e.toString(16)}function B4(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ai(e,t,r,n)}function mM(e){if(e instanceof ai)return new ai(e.h,e.s,e.l,e.opacity);if(e instanceof Cf||(e=Bh(e)),!e)return new ai;if(e instanceof ai)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,u=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=u<.5?i+s:2-i-s,o*=60):l=u>0&&u<1?0:o,new ai(o,l,u,e.opacity)}function UG(e,t,r,n){return arguments.length===1?mM(e):new ai(e,t,r,n??1)}function ai(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}AN(ai,UG,pM(Cf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new ai(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$h:Math.pow($h,e),new ai(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Xa(Iw(e>=240?e-240:e+120,s,n),Iw(e,s,n),Iw(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ai(U4(this.h),Q0(this.s),Q0(this.l),Hp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hp(this.opacity);return`${e===1?"hsl(":"hsla("}${U4(this.h)}, ${Q0(this.s)*100}%, ${Q0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U4(e){return e=(e||0)%360,e<0?e+360:e}function Q0(e){return Math.max(0,Math.min(1,e||0))}function Iw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ON=e=>()=>e;function HG(e,t){return function(r){return e+r*t}}function qG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function zG(e){return(e=+e)==1?gM:function(t,r){return r-t?qG(t,r,e):ON(isNaN(t)?r:t)}}function gM(e,t){var r=t-e;return r?HG(e,r):ON(isNaN(e)?t:e)}const H4=(function e(t){var r=zG(t);function n(s,i){var o=r((s=Pj(s)).r,(i=Pj(i)).r),l=r(s.g,i.g),u=r(s.b,i.b),d=gM(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=u(f),s.opacity=d(f),s+""}}return n.gamma=e,n})(1);function WG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function KG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VG(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Vu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function GG(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function qp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function YG(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Vu(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var Ij=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dw=new RegExp(Ij.source,"g");function XG(e){return function(){return e}}function JG(e){return function(t){return e(t)+""}}function QG(e,t){var r=Ij.lastIndex=Dw.lastIndex=0,n,s,i,o=-1,l=[],u=[];for(e=e+"",t=t+"";(n=Ij.exec(e))&&(s=Dw.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:qp(n,s)})),r=Dw.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?JG(u[0].x):XG(t):(t=u.length,function(d){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function Vu(e,t){var r=typeof t,n;return t==null||r==="boolean"?ON(t):(r==="number"?qp:r==="string"?(n=Bh(t))?(t=n,H4):QG:t instanceof Bh?H4:t instanceof Date?GG:KG(t)?WG:Array.isArray(t)?VG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YG:qp)(e,t)}function PN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ZG(e,t){t===void 0&&(t=e,e=Vu);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function eY(e){return function(){return e}}function zp(e){return+e}var q4=[0,1];function $a(e){return e}function Dj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:eY(isNaN(t)?NaN:.5)}function tY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function rY(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Dj(s,n),i=r(o,i)):(n=Dj(n,s),i=r(i,o)),function(l){return i(n(l))}}function nY(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Dj(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var u=Tf(e,l,1,n)-1;return i[u](s[u](l))}}function Af(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hg(){var e=q4,t=q4,r=Vu,n,s,i,o=$a,l,u,d;function f(){var m=Math.min(e.length,t.length);return o!==$a&&(o=tY(e[0],e[m-1])),l=m>2?nY:rY,u=d=null,p}function p(m){return m==null||isNaN(m=+m)?i:(u||(u=l(e.map(n),t,r)))(n(o(m)))}return p.invert=function(m){return o(s((d||(d=l(t,e.map(n),qp)))(m)))},p.domain=function(m){return arguments.length?(e=Array.from(m,zp),f()):e.slice()},p.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},p.rangeRound=function(m){return t=Array.from(m),r=PN,f()},p.clamp=function(m){return arguments.length?(o=m?!0:$a,f()):o!==$a},p.interpolate=function(m){return arguments.length?(r=m,f()):r},p.unknown=function(m){return arguments.length?(i=m,p):i},function(m,x){return n=m,s=x,f()}}function IN(){return hg()($a,$a)}function aY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Wp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function xu(e){return e=Wp(Math.abs(e)),e?e[1]:NaN}function sY(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],u=0;s>0&&l>0&&(u+l+1>n&&(l=Math.max(1,n-u)),i.push(r.substring(s-=l,s+l)),!((u+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function iY(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var oY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uh(e){if(!(t=oY.exec(e)))throw new Error("invalid format: "+e);var t;return new DN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uh.prototype=DN.prototype;function DN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}DN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lY(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var xM;function cY(e,t){var r=Wp(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(xM=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Wp(e,Math.max(0,t+i-1))[0]}function z4(e,t){var r=Wp(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const W4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:aY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>z4(e*100,t),r:z4,s:cY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function K4(e){return e}var V4=Array.prototype.map,G4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uY(e){var t=e.grouping===void 0||e.thousands===void 0?K4:sY(V4.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?K4:iY(V4.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=Uh(p);var m=p.fill,x=p.align,v=p.sign,y=p.symbol,b=p.zero,N=p.width,k=p.comma,w=p.precision,P=p.trim,S=p.type;S==="n"?(k=!0,S="g"):W4[S]||(w===void 0&&(w=12),P=!0,S="g"),(b||m==="0"&&x==="=")&&(b=!0,m="0",x="=");var _=y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=y==="$"?n:/[%p]/.test(S)?o:"",C=W4[S],M=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(A){var O=_,F=E,W,Y,Z;if(S==="c")F=C(A)+F,A="";else{A=+A;var re=A<0||1/A<0;if(A=isNaN(A)?u:C(Math.abs(A),w),P&&(A=lY(A)),re&&+A==0&&v!=="+"&&(re=!1),O=(re?v==="("?v:l:v==="-"||v==="("?"":v)+O,F=(S==="s"?G4[8+xM/3]:"")+F+(re&&v==="("?")":""),M){for(W=-1,Y=A.length;++W<Y;)if(Z=A.charCodeAt(W),48>Z||Z>57){F=(Z===46?s+A.slice(W+1):A.slice(W))+F,A=A.slice(0,W);break}}}k&&!b&&(A=t(A,1/0));var ne=O.length+A.length+F.length,U=ne<N?new Array(N-ne+1).join(m):"";switch(k&&b&&(A=t(U+A,U.length?N-F.length:1/0),U=""),x){case"<":A=O+A+F+U;break;case"=":A=O+U+A+F;break;case"^":A=U.slice(0,ne=U.length>>1)+O+A+F+U.slice(ne);break;default:A=U+O+A+F;break}return i(A)}return D.toString=function(){return p+""},D}function f(p,m){var x=d((p=Uh(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(xu(m)/3)))*3,y=Math.pow(10,-v),b=G4[8+v/3];return function(N){return x(y*N)+b}}return{format:d,formatPrefix:f}}var Z0,MN,yM;dY({thousands:",",grouping:[3],currency:["$",""]});function dY(e){return Z0=uY(e),MN=Z0.format,yM=Z0.formatPrefix,Z0}function hY(e){return Math.max(0,-xu(Math.abs(e)))}function fY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xu(t)/3)))*3-xu(Math.abs(e)))}function pY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xu(t)-xu(e))+1}function vM(e,t,r,n){var s=Aj(e,t,r),i;switch(n=Uh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=fY(s,o))&&(n.precision=i),yM(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=pY(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=hY(s))&&(n.precision=i-(n.type==="%")*2);break}}return MN(n)}function al(e){var t=e.domain;return e.ticks=function(r){var n=t();return Tj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return vM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],u,d,f=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=Cj(o,l,r),d===u)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;u=d}return e},e}function Kp(){var e=IN();return e.copy=function(){return Af(e,Kp())},Rs.apply(e,arguments),al(e)}function bM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,zp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return bM(e).unknown(t)},e=arguments.length?Array.from(e,zp):[0,1],al(r)}function wM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function Y4(e){return Math.log(e)}function X4(e){return Math.exp(e)}function mY(e){return-Math.log(-e)}function gY(e){return-Math.exp(-e)}function xY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yY(e){return e===10?xY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J4(e){return(t,r)=>-e(-t,r)}function RN(e){const t=e(Y4,X4),r=t.domain;let n=10,s,i;function o(){return s=vY(n),i=yY(n),r()[0]<0?(s=J4(s),i=J4(i),e(mY,gY)):e(Y4,X4),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const u=r();let d=u[0],f=u[u.length-1];const p=f<d;p&&([d,f]=[f,d]);let m=s(d),x=s(f),v,y;const b=l==null?10:+l;let N=[];if(!(n%1)&&x-m<b){if(m=Math.floor(m),x=Math.ceil(x),d>0){for(;m<=x;++m)for(v=1;v<n;++v)if(y=m<0?v/i(-m):v*i(m),!(y<d)){if(y>f)break;N.push(y)}}else for(;m<=x;++m)for(v=n-1;v>=1;--v)if(y=m>0?v/i(-m):v*i(m),!(y<d)){if(y>f)break;N.push(y)}N.length*2<b&&(N=Tj(d,f,b))}else N=Tj(m,x,Math.min(x-m,b)).map(i);return p?N.reverse():N},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=Uh(u)).precision==null&&(u.trim=!0),u=MN(u)),l===1/0)return u;const d=Math.max(1,n*l/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=d?u(f):""}},t.nice=()=>r(wM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function jM(){const e=RN(hg()).domain([1,10]);return e.copy=()=>Af(e,jM()).base(e.base()),Rs.apply(e,arguments),e}function Q4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Z4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FN(e){var t=1,r=e(Q4(t),Z4(t));return r.constant=function(n){return arguments.length?e(Q4(t=+n),Z4(t)):t},al(r)}function NM(){var e=FN(hg());return e.copy=function(){return Af(e,NM()).constant(e.constant())},Rs.apply(e,arguments)}function eO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wY(e){return e<0?-e*e:e*e}function $N(e){var t=e($a,$a),r=1;function n(){return r===1?e($a,$a):r===.5?e(bY,wY):e(eO(r),eO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},al(t)}function LN(){var e=$N(hg());return e.copy=function(){return Af(e,LN()).exponent(e.exponent())},Rs.apply(e,arguments),e}function jY(){return LN.apply(null,arguments).exponent(.5)}function tO(e){return Math.sign(e)*e*e}function NY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kM(){var e=IN(),t=[0,1],r=!1,n;function s(i){var o=NY(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(tO(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,zp)).map(tO)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return kM(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Rs.apply(s,arguments),al(s)}function SM(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=TG(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Tf(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Jo),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return SM().domain(e).range(t).unknown(n)},Rs.apply(i,arguments)}function _M(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(u){return u!=null&&u<=u?s[Tf(n,u,0,r)]:i}function l(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*t-(u-r)*e)/(r+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,l()):[e,t]},o.range=function(u){return arguments.length?(r=(s=Array.from(u)).length-1,l()):s.slice()},o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return _M().domain([e,t]).range(s).unknown(i)},Rs.apply(al(o),arguments)}function EM(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Tf(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return EM().domain(e).range(t).unknown(r)},Rs.apply(s,arguments)}const Mw=new Date,Rw=new Date;function Wn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const u=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return u;let d;do u.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return u},s.filter=i=>Wn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Mw.setTime(+i),Rw.setTime(+o),e(Mw),e(Rw),Math.floor(r(Mw,Rw))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Vp=Wn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Vp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Vp);Vp.range;const eo=1e3,Is=eo*60,to=Is*60,co=to*24,BN=co*7,rO=co*30,Fw=co*365,Rl=Wn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCSeconds());Rl.range;const UN=Wn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getMinutes());UN.range;const HN=Wn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCMinutes());HN.range;const qN=Wn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*eo-e.getMinutes()*Is)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getHours());qN.range;const zN=Wn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getUTCHours());zN.range;const Of=Wn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Is)/co,e=>e.getDate()-1);Of.range;const fg=Wn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>e.getUTCDate()-1);fg.range;const TM=Wn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/co,e=>Math.floor(e/co));TM.range;function ac(e){return Wn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Is)/BN)}const pg=ac(0),Gp=ac(1),kY=ac(2),SY=ac(3),yu=ac(4),_Y=ac(5),EY=ac(6);pg.range;Gp.range;kY.range;SY.range;yu.range;_Y.range;EY.range;function sc(e){return Wn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/BN)}const mg=sc(0),Yp=sc(1),TY=sc(2),CY=sc(3),vu=sc(4),AY=sc(5),OY=sc(6);mg.range;Yp.range;TY.range;CY.range;vu.range;AY.range;OY.range;const WN=Wn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());WN.range;const KN=Wn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());KN.range;const uo=Wn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});uo.range;const ho=Wn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ho.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ho.range;function CM(e,t,r,n,s,i){const o=[[Rl,1,eo],[Rl,5,5*eo],[Rl,15,15*eo],[Rl,30,30*eo],[i,1,Is],[i,5,5*Is],[i,15,15*Is],[i,30,30*Is],[s,1,to],[s,3,3*to],[s,6,6*to],[s,12,12*to],[n,1,co],[n,2,2*co],[r,1,BN],[t,1,rO],[t,3,3*rO],[e,1,Fw]];function l(d,f,p){const m=f<d;m&&([d,f]=[f,d]);const x=p&&typeof p.range=="function"?p:u(d,f,p),v=x?x.range(d,+f+1):[];return m?v.reverse():v}function u(d,f,p){const m=Math.abs(f-d)/p,x=TN(([,,b])=>b).right(o,m);if(x===o.length)return e.every(Aj(d/Fw,f/Fw,p));if(x===0)return Vp.every(Math.max(Aj(d,f,p),1));const[v,y]=o[m/o[x-1][2]<o[x][2]/m?x-1:x];return v.every(y)}return[l,u]}const[PY,IY]=CM(ho,KN,mg,TM,zN,HN),[DY,MY]=CM(uo,WN,pg,Of,qN,UN);function $w(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Lw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $d(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function RY(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,u=e.shortMonths,d=Ld(s),f=Bd(s),p=Ld(i),m=Bd(i),x=Ld(o),v=Bd(o),y=Ld(l),b=Bd(l),N=Ld(u),k=Bd(u),w={a:re,A:ne,b:U,B:oe,c:null,d:lO,e:lO,f:sX,g:mX,G:xX,H:rX,I:nX,j:aX,L:AM,m:iX,M:oX,p:K,q:R,Q:dO,s:hO,S:lX,u:cX,U:uX,V:dX,w:hX,W:fX,x:null,X:null,y:pX,Y:gX,Z:yX,"%":uO},P={a:Q,A:ee,b:se,B:xe,c:null,d:cO,e:cO,f:jX,g:PX,G:DX,H:vX,I:bX,j:wX,L:PM,m:NX,M:kX,p:ge,q:Me,Q:dO,s:hO,S:SX,u:_X,U:EX,V:TX,w:CX,W:AX,x:null,X:null,y:OX,Y:IX,Z:MX,"%":uO},S={a:D,A,b:O,B:F,c:W,d:iO,e:iO,f:QY,g:sO,G:aO,H:oO,I:oO,j:GY,L:JY,m:VY,M:YY,p:M,q:KY,Q:eX,s:tX,S:XY,u:UY,U:HY,V:qY,w:BY,W:zY,x:Y,X:Z,y:sO,Y:aO,Z:WY,"%":ZY};w.x=_(r,w),w.X=_(n,w),w.c=_(t,w),P.x=_(r,P),P.X=_(n,P),P.c=_(t,P);function _(ce,me){return function(Oe){var q=[],Ne=-1,ae=0,De=ce.length,Be,Se,Fe;for(Oe instanceof Date||(Oe=new Date(+Oe));++Ne<De;)ce.charCodeAt(Ne)===37&&(q.push(ce.slice(ae,Ne)),(Se=nO[Be=ce.charAt(++Ne)])!=null?Be=ce.charAt(++Ne):Se=Be==="e"?" ":"0",(Fe=me[Be])&&(Be=Fe(Oe,Se)),q.push(Be),ae=Ne+1);return q.push(ce.slice(ae,Ne)),q.join("")}}function E(ce,me){return function(Oe){var q=$d(1900,void 0,1),Ne=C(q,ce,Oe+="",0),ae,De;if(Ne!=Oe.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(me&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(ae=Lw($d(q.y,0,1)),De=ae.getUTCDay(),ae=De>4||De===0?Yp.ceil(ae):Yp(ae),ae=fg.offset(ae,(q.V-1)*7),q.y=ae.getUTCFullYear(),q.m=ae.getUTCMonth(),q.d=ae.getUTCDate()+(q.w+6)%7):(ae=$w($d(q.y,0,1)),De=ae.getDay(),ae=De>4||De===0?Gp.ceil(ae):Gp(ae),ae=Of.offset(ae,(q.V-1)*7),q.y=ae.getFullYear(),q.m=ae.getMonth(),q.d=ae.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),De="Z"in q?Lw($d(q.y,0,1)).getUTCDay():$w($d(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(De+5)%7:q.w+q.U*7-(De+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,Lw(q)):$w(q)}}function C(ce,me,Oe,q){for(var Ne=0,ae=me.length,De=Oe.length,Be,Se;Ne<ae;){if(q>=De)return-1;if(Be=me.charCodeAt(Ne++),Be===37){if(Be=me.charAt(Ne++),Se=S[Be in nO?me.charAt(Ne++):Be],!Se||(q=Se(ce,Oe,q))<0)return-1}else if(Be!=Oe.charCodeAt(q++))return-1}return q}function M(ce,me,Oe){var q=d.exec(me.slice(Oe));return q?(ce.p=f.get(q[0].toLowerCase()),Oe+q[0].length):-1}function D(ce,me,Oe){var q=x.exec(me.slice(Oe));return q?(ce.w=v.get(q[0].toLowerCase()),Oe+q[0].length):-1}function A(ce,me,Oe){var q=p.exec(me.slice(Oe));return q?(ce.w=m.get(q[0].toLowerCase()),Oe+q[0].length):-1}function O(ce,me,Oe){var q=N.exec(me.slice(Oe));return q?(ce.m=k.get(q[0].toLowerCase()),Oe+q[0].length):-1}function F(ce,me,Oe){var q=y.exec(me.slice(Oe));return q?(ce.m=b.get(q[0].toLowerCase()),Oe+q[0].length):-1}function W(ce,me,Oe){return C(ce,t,me,Oe)}function Y(ce,me,Oe){return C(ce,r,me,Oe)}function Z(ce,me,Oe){return C(ce,n,me,Oe)}function re(ce){return o[ce.getDay()]}function ne(ce){return i[ce.getDay()]}function U(ce){return u[ce.getMonth()]}function oe(ce){return l[ce.getMonth()]}function K(ce){return s[+(ce.getHours()>=12)]}function R(ce){return 1+~~(ce.getMonth()/3)}function Q(ce){return o[ce.getUTCDay()]}function ee(ce){return i[ce.getUTCDay()]}function se(ce){return u[ce.getUTCMonth()]}function xe(ce){return l[ce.getUTCMonth()]}function ge(ce){return s[+(ce.getUTCHours()>=12)]}function Me(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=_(ce+="",w);return me.toString=function(){return ce},me},parse:function(ce){var me=E(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=_(ce+="",P);return me.toString=function(){return ce},me},utcParse:function(ce){var me=E(ce+="",!0);return me.toString=function(){return ce},me}}}var nO={"-":"",_:" ",0:"0"},ta=/^\s*\d+/,FY=/^%/,$Y=/[\\^$*+?|[\]().{}]/g;function Er(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function LY(e){return e.replace($Y,"\\$&")}function Ld(e){return new RegExp("^(?:"+e.map(LY).join("|")+")","i")}function Bd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function BY(e,t,r){var n=ta.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function UY(e,t,r){var n=ta.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function HY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function qY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function zY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function aO(e,t,r){var n=ta.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sO(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function WY(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function KY(e,t,r){var n=ta.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function VY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function iO(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function GY(e,t,r){var n=ta.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function oO(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function YY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function XY(e,t,r){var n=ta.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function JY(e,t,r){var n=ta.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function QY(e,t,r){var n=ta.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ZY(e,t,r){var n=FY.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function eX(e,t,r){var n=ta.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function tX(e,t,r){var n=ta.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function lO(e,t){return Er(e.getDate(),t,2)}function rX(e,t){return Er(e.getHours(),t,2)}function nX(e,t){return Er(e.getHours()%12||12,t,2)}function aX(e,t){return Er(1+Of.count(uo(e),e),t,3)}function AM(e,t){return Er(e.getMilliseconds(),t,3)}function sX(e,t){return AM(e,t)+"000"}function iX(e,t){return Er(e.getMonth()+1,t,2)}function oX(e,t){return Er(e.getMinutes(),t,2)}function lX(e,t){return Er(e.getSeconds(),t,2)}function cX(e){var t=e.getDay();return t===0?7:t}function uX(e,t){return Er(pg.count(uo(e)-1,e),t,2)}function OM(e){var t=e.getDay();return t>=4||t===0?yu(e):yu.ceil(e)}function dX(e,t){return e=OM(e),Er(yu.count(uo(e),e)+(uo(e).getDay()===4),t,2)}function hX(e){return e.getDay()}function fX(e,t){return Er(Gp.count(uo(e)-1,e),t,2)}function pX(e,t){return Er(e.getFullYear()%100,t,2)}function mX(e,t){return e=OM(e),Er(e.getFullYear()%100,t,2)}function gX(e,t){return Er(e.getFullYear()%1e4,t,4)}function xX(e,t){var r=e.getDay();return e=r>=4||r===0?yu(e):yu.ceil(e),Er(e.getFullYear()%1e4,t,4)}function yX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Er(t/60|0,"0",2)+Er(t%60,"0",2)}function cO(e,t){return Er(e.getUTCDate(),t,2)}function vX(e,t){return Er(e.getUTCHours(),t,2)}function bX(e,t){return Er(e.getUTCHours()%12||12,t,2)}function wX(e,t){return Er(1+fg.count(ho(e),e),t,3)}function PM(e,t){return Er(e.getUTCMilliseconds(),t,3)}function jX(e,t){return PM(e,t)+"000"}function NX(e,t){return Er(e.getUTCMonth()+1,t,2)}function kX(e,t){return Er(e.getUTCMinutes(),t,2)}function SX(e,t){return Er(e.getUTCSeconds(),t,2)}function _X(e){var t=e.getUTCDay();return t===0?7:t}function EX(e,t){return Er(mg.count(ho(e)-1,e),t,2)}function IM(e){var t=e.getUTCDay();return t>=4||t===0?vu(e):vu.ceil(e)}function TX(e,t){return e=IM(e),Er(vu.count(ho(e),e)+(ho(e).getUTCDay()===4),t,2)}function CX(e){return e.getUTCDay()}function AX(e,t){return Er(Yp.count(ho(e)-1,e),t,2)}function OX(e,t){return Er(e.getUTCFullYear()%100,t,2)}function PX(e,t){return e=IM(e),Er(e.getUTCFullYear()%100,t,2)}function IX(e,t){return Er(e.getUTCFullYear()%1e4,t,4)}function DX(e,t){var r=e.getUTCDay();return e=r>=4||r===0?vu(e):vu.ceil(e),Er(e.getUTCFullYear()%1e4,t,4)}function MX(){return"+0000"}function uO(){return"%"}function dO(e){return+e}function hO(e){return Math.floor(+e/1e3)}var Hc,DM,MM;RX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RX(e){return Hc=RY(e),DM=Hc.format,Hc.parse,MM=Hc.utcFormat,Hc.utcParse,Hc}function FX(e){return new Date(e)}function $X(e){return e instanceof Date?+e:+new Date(+e)}function VN(e,t,r,n,s,i,o,l,u,d){var f=IN(),p=f.invert,m=f.domain,x=d(".%L"),v=d(":%S"),y=d("%I:%M"),b=d("%I %p"),N=d("%a %d"),k=d("%b %d"),w=d("%B"),P=d("%Y");function S(_){return(u(_)<_?x:l(_)<_?v:o(_)<_?y:i(_)<_?b:n(_)<_?s(_)<_?N:k:r(_)<_?w:P)(_)}return f.invert=function(_){return new Date(p(_))},f.domain=function(_){return arguments.length?m(Array.from(_,$X)):m().map(FX)},f.ticks=function(_){var E=m();return e(E[0],E[E.length-1],_??10)},f.tickFormat=function(_,E){return E==null?S:d(E)},f.nice=function(_){var E=m();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?m(wM(E,_)):f},f.copy=function(){return Af(f,VN(e,t,r,n,s,i,o,l,u,d))},f}function LX(){return Rs.apply(VN(DY,MY,uo,WN,pg,Of,qN,UN,Rl,DM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BX(){return Rs.apply(VN(PY,IY,ho,KN,mg,fg,zN,HN,Rl,MM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gg(){var e=0,t=1,r,n,s,i,o=$a,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(s===0?.5:(p=(i(p)-r)*s,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(o=p,d):o};function f(p){return function(m){var x,v;return arguments.length?([x,v]=m,o=p(x,v),d):[o(0),o(1)]}}return d.range=f(Vu),d.rangeRound=f(PN),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),d}}function sl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function RM(){var e=al(gg()($a));return e.copy=function(){return sl(e,RM())},yo.apply(e,arguments)}function FM(){var e=RN(gg()).domain([1,10]);return e.copy=function(){return sl(e,FM()).base(e.base())},yo.apply(e,arguments)}function $M(){var e=FN(gg());return e.copy=function(){return sl(e,$M()).constant(e.constant())},yo.apply(e,arguments)}function GN(){var e=$N(gg());return e.copy=function(){return sl(e,GN()).exponent(e.exponent())},yo.apply(e,arguments)}function UX(){return GN.apply(null,arguments).exponent(.5)}function LM(){var e=[],t=$a;function r(n){if(n!=null&&!isNaN(n=+n))return t((Tf(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Jo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>EG(e,i/n))},r.copy=function(){return LM(t).domain(e)},yo.apply(r,arguments)}function xg(){var e=0,t=.5,r=1,n=1,s,i,o,l,u,d=$a,f,p=!1,m;function x(y){return isNaN(y=+y)?m:(y=.5+((y=+f(y))-i)*(n*y<n*i?l:u),d(p?Math.max(0,Math.min(1,y)):y))}x.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(y){return arguments.length?(p=!!y,x):p},x.interpolator=function(y){return arguments.length?(d=y,x):d};function v(y){return function(b){var N,k,w;return arguments.length?([N,k,w]=b,d=ZG(y,[N,k,w]),x):[d(0),d(.5),d(1)]}}return x.range=v(Vu),x.rangeRound=v(PN),x.unknown=function(y){return arguments.length?(m=y,x):m},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function BM(){var e=al(xg()($a));return e.copy=function(){return sl(e,BM())},yo.apply(e,arguments)}function UM(){var e=RN(xg()).domain([.1,1,10]);return e.copy=function(){return sl(e,UM()).base(e.base())},yo.apply(e,arguments)}function HM(){var e=FN(xg());return e.copy=function(){return sl(e,HM()).constant(e.constant())},yo.apply(e,arguments)}function YN(){var e=$N(xg());return e.copy=function(){return sl(e,YN()).exponent(e.exponent())},yo.apply(e,arguments)}function HX(){return YN.apply(null,arguments).exponent(.5)}const fO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fh,scaleDiverging:BM,scaleDivergingLog:UM,scaleDivergingPow:YN,scaleDivergingSqrt:HX,scaleDivergingSymlog:HM,scaleIdentity:bM,scaleImplicit:Oj,scaleLinear:Kp,scaleLog:jM,scaleOrdinal:CN,scalePoint:sh,scalePow:LN,scaleQuantile:SM,scaleQuantize:_M,scaleRadial:kM,scaleSequential:RM,scaleSequentialLog:FM,scaleSequentialPow:GN,scaleSequentialQuantile:LM,scaleSequentialSqrt:UX,scaleSequentialSymlog:$M,scaleSqrt:jY,scaleSymlog:NM,scaleThreshold:EM,scaleTime:LX,scaleUtc:BX,tickFormat:vM},Symbol.toStringTag,{value:"Module"}));var Bw,pO;function yg(){if(pO)return Bw;pO=1;var e=qu();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],u=n(l);if(u!=null&&(d===void 0?u===u&&!e(u):s(u,d)))var d=u,f=l}return f}return Bw=t,Bw}var Uw,mO;function qM(){if(mO)return Uw;mO=1;function e(t,r){return t>r}return Uw=e,Uw}var Hw,gO;function qX(){if(gO)return Hw;gO=1;var e=yg(),t=qM(),r=Ku();function n(s){return s&&s.length?e(s,r,t):void 0}return Hw=n,Hw}var zX=qX();const vg=Mr(zX);var qw,xO;function zM(){if(xO)return qw;xO=1;function e(t,r){return t<r}return qw=e,qw}var zw,yO;function WX(){if(yO)return zw;yO=1;var e=yg(),t=zM(),r=Ku();function n(s){return s&&s.length?e(s,r,t):void 0}return zw=n,zw}var KX=WX();const bg=Mr(KX);var Ww,vO;function VX(){if(vO)return Ww;vO=1;var e=dN(),t=Ii(),r=Q5(),n=Qa();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return Ww=s,Ww}var Kw,bO;function GX(){if(bO)return Kw;bO=1;var e=X5(),t=VX();function r(n,s){return e(t(n,s),1)}return Kw=r,Kw}var YX=GX();const XX=Mr(YX);var Vw,wO;function JX(){if(wO)return Vw;wO=1;var e=kN();function t(r,n){return e(r,n)}return Vw=t,Vw}var QX=JX();const Gu=Mr(QX);var Yu=1e9,ZX={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JN,sn=!0,Ds="[DecimalError] ",Bl=Ds+"Invalid argument: ",XN=Ds+"Exponent out of range: ",Xu=Math.floor,Tl=Math.pow,eJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hs,Yn=1e7,Zr=7,WM=9007199254740991,Xp=Xu(WM/Zr),_t={};_t.absoluteValue=_t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_t.comparedTo=_t.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Zr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};_t.dividedBy=_t.div=function(e){return io(this,new this.constructor(e))};_t.dividedToIntegerBy=_t.idiv=function(e){var t=this,r=t.constructor;return qr(io(t,new r(e),0,1),r.precision)};_t.equals=_t.eq=function(e){return!this.cmp(e)};_t.exponent=function(){return In(this)};_t.greaterThan=_t.gt=function(e){return this.cmp(e)>0};_t.greaterThanOrEqualTo=_t.gte=function(e){return this.cmp(e)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(e){return this.cmp(e)<0};_t.lessThanOrEqualTo=_t.lte=function(e){return this.cmp(e)<1};_t.logarithm=_t.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hs))throw Error(Ds+"NaN");if(r.s<1)throw Error(Ds+(r.s?"NaN":"-Infinity"));return r.eq(hs)?new n(0):(sn=!1,t=io(Hh(r,i),Hh(e,i),i),sn=!0,qr(t,s))};_t.minus=_t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GM(t,e):KM(t,(e.s=-e.s,e))};_t.modulo=_t.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ds+"NaN");return r.s?(sn=!1,t=io(r,e,0,1).times(e),sn=!0,r.minus(t)):qr(new n(r),s)};_t.naturalExponential=_t.exp=function(){return VM(this)};_t.naturalLogarithm=_t.ln=function(){return Hh(this)};_t.negated=_t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_t.plus=_t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KM(t,e):GM(t,(e.s=-e.s,e))};_t.precision=_t.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bl+e);if(t=In(s)+1,n=s.d.length-1,r=n*Zr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};_t.squareRoot=_t.sqrt=function(){var e,t,r,n,s,i,o,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(Ds+"NaN")}for(e=In(l),sn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=ki(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Xu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new u(t)):n=new u(s.toString()),r=u.precision,s=o=r+3;;)if(i=n,n=i.plus(io(l,i,o+2)).times(.5),ki(i.d).slice(0,o)===(t=ki(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(qr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return sn=!0,qr(n,r)};_t.times=_t.mul=function(e){var t,r,n,s,i,o,l,u,d,f=this,p=f.constructor,m=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,u=m.length,d=x.length,u<d&&(i=m,m=x,x=i,o=u,u=d,d=o),i=[],o=u+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=u+n;s>n;)l=i[s]+x[n]*m[s-n-1]+t,i[s--]=l%Yn|0,t=l/Yn|0;i[s]=(i[s]+t)%Yn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,sn?qr(e,p.precision):e};_t.toDecimalPlaces=_t.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ai(e,0,Yu),t===void 0?t=n.rounding:Ai(t,0,8),qr(r,e+In(r)+1,t))};_t.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Xl(n,!0):(Ai(e,0,Yu),t===void 0?t=s.rounding:Ai(t,0,8),n=qr(new s(n),e+1,t),r=Xl(n,!0,e+1)),r};_t.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Xl(s):(Ai(e,0,Yu),t===void 0?t=i.rounding:Ai(t,0,8),n=qr(new i(s),e+In(s)+1,t),r=Xl(n.abs(),!1,e+In(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};_t.toInteger=_t.toint=function(){var e=this,t=e.constructor;return qr(new t(e),In(e)+1,t.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(e){var t,r,n,s,i,o,l=this,u=l.constructor,d=12,f=+(e=new u(e));if(!e.s)return new u(hs);if(l=new u(l),!l.s){if(e.s<1)throw Error(Ds+"Infinity");return l}if(l.eq(hs))return l;if(n=u.precision,e.eq(hs))return qr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=WM){for(s=new u(hs),t=Math.ceil(n/Zr+4),sn=!1;r%2&&(s=s.times(l),NO(s.d,t)),r=Xu(r/2),r!==0;)l=l.times(l),NO(l.d,t);return sn=!0,e.s<0?new u(hs).div(s):qr(s,n)}}else if(i<0)throw Error(Ds+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,sn=!1,s=e.times(Hh(l,n+d)),sn=!0,s=VM(s),s.s=i,s};_t.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=In(s),n=Xl(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ai(e,1,Yu),t===void 0?t=i.rounding:Ai(t,0,8),s=qr(new i(s),e,t),r=In(s),n=Xl(s,e<=r||r<=i.toExpNeg,e)),n};_t.toSignificantDigits=_t.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ai(e,1,Yu),t===void 0?t=n.rounding:Ai(t,0,8)),qr(new n(r),e,t)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=In(e),r=e.constructor;return Xl(e,t<=r.toExpNeg||t>=r.toExpPos)};function KM(e,t){var r,n,s,i,o,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),sn?qr(t,p):t;if(u=e.d,d=t.d,o=e.e,s=t.e,u=u.slice(),i=o-s,i){for(i<0?(n=u,i=-i,l=d.length):(n=d,s=o,l=u.length),o=Math.ceil(p/Zr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=u.length,i=d.length,l-i<0&&(i=l,n=d,d=u,u=n),r=0;i;)r=(u[--i]=u[i]+d[i]+r)/Yn|0,u[i]%=Yn;for(r&&(u.unshift(r),++s),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=s,sn?qr(t,p):t}function Ai(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Bl+e)}function ki(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Zr-n.length,r&&(i+=Lo(r)),i+=n;o=e[t],n=o+"",r=Zr-n.length,r&&(i+=Lo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var io=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Yn|0,o=i/Yn|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,u;if(i!=o)u=i>o?1:-1;else for(l=u=0;l<i;l++)if(n[l]!=s[l]){u=n[l]>s[l]?1:-1;break}return u}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Yn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,u,d,f,p,m,x,v,y,b,N,k,w,P,S,_,E,C,M=n.constructor,D=n.s==s.s?1:-1,A=n.d,O=s.d;if(!n.s)return new M(n);if(!s.s)throw Error(Ds+"Division by zero");for(u=n.e-s.e,E=O.length,S=A.length,x=new M(D),v=x.d=[],d=0;O[d]==(A[d]||0);)++d;if(O[d]>(A[d]||0)&&--u,i==null?k=i=M.precision:o?k=i+(In(n)-In(s))+1:k=i,k<0)return new M(0);if(k=k/Zr+2|0,d=0,E==1)for(f=0,O=O[0],k++;(d<S||f)&&k--;d++)w=f*Yn+(A[d]||0),v[d]=w/O|0,f=w%O|0;else{for(f=Yn/(O[0]+1)|0,f>1&&(O=e(O,f),A=e(A,f),E=O.length,S=A.length),P=E,y=A.slice(0,E),b=y.length;b<E;)y[b++]=0;C=O.slice(),C.unshift(0),_=O[0],O[1]>=Yn/2&&++_;do f=0,l=t(O,y,E,b),l<0?(N=y[0],E!=b&&(N=N*Yn+(y[1]||0)),f=N/_|0,f>1?(f>=Yn&&(f=Yn-1),p=e(O,f),m=p.length,b=y.length,l=t(p,y,m,b),l==1&&(f--,r(p,E<m?C:O,m))):(f==0&&(l=f=1),p=O.slice()),m=p.length,m<b&&p.unshift(0),r(y,p,b),l==-1&&(b=y.length,l=t(O,y,E,b),l<1&&(f++,r(y,E<b?C:O,b))),b=y.length):l===0&&(f++,y=[0]),v[d++]=f,l&&y[0]?y[b++]=A[P]||0:(y=[A[P]],b=1);while((P++<S||y[0]!==void 0)&&k--)}return v[0]||v.shift(),x.e=u,qr(x,o?i+In(x)+1:i)}})();function VM(e,t){var r,n,s,i,o,l,u=0,d=0,f=e.constructor,p=f.precision;if(In(e)>16)throw Error(XN+In(e));if(!e.s)return new f(hs);for(sn=!1,l=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Tl(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new f(hs),f.precision=l;;){if(s=qr(s.times(e),l),r=r.times(++u),o=i.plus(io(s,r,l)),ki(o.d).slice(0,l)===ki(i.d).slice(0,l)){for(;d--;)i=qr(i.times(i),l);return f.precision=p,t==null?(sn=!0,qr(i,p)):i}i=o}}function In(e){for(var t=e.e*Zr,r=e.d[0];r>=10;r/=10)t++;return t}function Gw(e,t,r){if(t>e.LN10.sd())throw sn=!0,r&&(e.precision=r),Error(Ds+"LN10 precision limit exceeded");return qr(new e(e.LN10),t)}function Lo(e){for(var t="";e--;)t+="0";return t}function Hh(e,t){var r,n,s,i,o,l,u,d,f,p=1,m=10,x=e,v=x.d,y=x.constructor,b=y.precision;if(x.s<1)throw Error(Ds+(x.s?"NaN":"-Infinity"));if(x.eq(hs))return new y(0);if(t==null?(sn=!1,d=b):d=t,x.eq(10))return t==null&&(sn=!0),Gw(y,d);if(d+=m,y.precision=d,r=ki(v),n=r.charAt(0),i=In(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ki(x.d),n=r.charAt(0),p++;i=In(x),n>1?(x=new y("0."+r),i++):x=new y(n+"."+r.slice(1))}else return u=Gw(y,d+2,b).times(i+""),x=Hh(new y(n+"."+r.slice(1)),d-m).plus(u),y.precision=b,t==null?(sn=!0,qr(x,b)):x;for(l=o=x=io(x.minus(hs),x.plus(hs),d),f=qr(x.times(x),d),s=3;;){if(o=qr(o.times(f),d),u=l.plus(io(o,new y(s),d)),ki(u.d).slice(0,d)===ki(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Gw(y,d+2,b).times(i+""))),l=io(l,new y(p),d),y.precision=b,t==null?(sn=!0,qr(l,b)):l;l=u,s+=2}}function jO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Xu(r/Zr),e.d=[],n=(r+1)%Zr,r<0&&(n+=Zr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Zr;n<s;)e.d.push(+t.slice(n,n+=Zr));t=t.slice(n),n=Zr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),sn&&(e.e>Xp||e.e<-Xp))throw Error(XN+r)}else e.s=0,e.e=0,e.d=[0];return e}function qr(e,t,r){var n,s,i,o,l,u,d,f,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Zr,s=t,d=p[f=0];else{if(f=Math.ceil((n+1)/Zr),i=p.length,f>=i)return e;for(d=i=p[f],o=1;i>=10;i/=10)o++;n%=Zr,s=n-Zr+o}if(r!==void 0&&(i=Tl(10,o-s-1),l=d/i%10|0,u=t<0||p[f+1]!==void 0||d%i,u=r<4?(l||u)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||u||r==6&&(n>0?s>0?d/Tl(10,o-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return u?(i=In(e),p.length=1,t=t-i-1,p[0]=Tl(10,(Zr-t%Zr)%Zr),e.e=Xu(-t/Zr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=Tl(10,Zr-n),p[f]=s>0?(d/Tl(10,o-s)%Tl(10,s)|0)*i:0),u)for(;;)if(f==0){(p[0]+=i)==Yn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Yn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(sn&&(e.e>Xp||e.e<-Xp))throw Error(XN+In(e));return e}function GM(e,t){var r,n,s,i,o,l,u,d,f,p,m=e.constructor,x=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),sn?qr(t,x):t;if(u=e.d,p=t.d,n=t.e,d=e.e,u=u.slice(),o=d-n,o){for(f=o<0,f?(r=u,o=-o,l=p.length):(r=p,n=d,l=u.length),s=Math.max(Math.ceil(x/Zr),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=u.length,l=p.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(u[s]!=p[s]){f=u[s]<p[s];break}o=0}for(f&&(r=u,u=p,p=r,t.s=-t.s),l=u.length,s=p.length-l;s>0;--s)u[l++]=0;for(s=p.length;s>o;){if(u[--s]<p[s]){for(i=s;i&&u[--i]===0;)u[i]=Yn-1;--u[i],u[s]+=Yn}u[s]-=p[s]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=n,sn?qr(t,x):t):new m(0)}function Xl(e,t,r){var n,s=In(e),i=ki(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Lo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Lo(-s-1)+i,r&&(n=r-o)>0&&(i+=Lo(n))):s>=o?(i+=Lo(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Lo(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Lo(n))),e.s<0?"-"+i:i}function NO(e,t){if(e.length>t)return e.length=t,!0}function YM(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Bl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return jO(o,i.toString())}else if(typeof i!="string")throw Error(Bl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,eJ.test(i))jO(o,i);else throw Error(Bl+i)}if(s.prototype=_t,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=YM,s.config=s.set=tJ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function tJ(e){if(!e||typeof e!="object")throw Error(Ds+"Object expected");var t,r,n,s=["precision",1,Yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Xu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Bl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bl+r+": "+n);return this}var JN=YM(ZX);hs=new JN(1);const $r=JN;function rJ(e){return iJ(e)||sJ(e)||aJ(e)||nJ()}function nJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aJ(e,t){if(e){if(typeof e=="string")return Mj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mj(e,t)}}function sJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function iJ(e){if(Array.isArray(e))return Mj(e)}function Mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oJ=function(t){return t},XM={},JM=function(t){return t===XM},kO=function(t){return function r(){return arguments.length===0||arguments.length===1&&JM(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},lJ=function e(t,r){return t===1?r:kO(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==XM}).length;return o>=t?r.apply(void 0,s):e(t-o,kO(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=s.map(function(p){return JM(p)?u.shift():p});return r.apply(void 0,rJ(f).concat(u))}))})},wg=function(t){return lJ(t.length,t)},Rj=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},cJ=wg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),uJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return oJ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,u){return u(l)},i.apply(void 0,arguments))}},Fj=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},QM=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,u){return l===r[u]})||(r=i,n=t.apply(void 0,i)),n}};function dJ(e){var t;return e===0?t=1:t=Math.floor(new $r(e).abs().log(10).toNumber())+1,t}function hJ(e,t,r){for(var n=new $r(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var fJ=wg(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),pJ=wg(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),mJ=wg(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const jg={rangeStep:hJ,getDigitCount:dJ,interpolateNumber:fJ,uninterpolateNumber:pJ,uninterpolateTruncation:mJ};function $j(e){return yJ(e)||xJ(e)||ZM(e)||gJ()}function gJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yJ(e){if(Array.isArray(e))return Lj(e)}function qh(e,t){return wJ(e)||bJ(e,t)||ZM(e,t)||vJ()}function vJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZM(e,t){if(e){if(typeof e=="string")return Lj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lj(e,t)}}function Lj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bJ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(u){s=!0,i=u}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function wJ(e){if(Array.isArray(e))return e}function eR(e){var t=qh(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function tR(e,t,r){if(e.lte(0))return new $r(0);var n=jg.getDigitCount(e.toNumber()),s=new $r(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new $r(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=l.mul(s);return t?u:new $r(Math.ceil(u))}function jJ(e,t,r){var n=1,s=new $r(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new $r(10).pow(jg.getDigitCount(e)-1),s=new $r(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new $r(Math.floor(e)))}else e===0?s=new $r(Math.floor((t-1)/2)):r||(s=new $r(Math.floor(e)));var o=Math.floor((t-1)/2),l=uJ(cJ(function(u){return s.add(new $r(u-o).mul(n)).toNumber()}),Rj);return l(0,t)}function rR(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new $r(0),tickMin:new $r(0),tickMax:new $r(0)};var i=tR(new $r(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new $r(0):(o=new $r(e).add(t).div(2),o=o.sub(new $r(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),u=Math.ceil(new $r(t).sub(o).div(i).toNumber()),d=l+u+1;return d>r?rR(e,t,r,n,s+1):(d<r&&(u=t>0?u+(r-d):u,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new $r(l).mul(i)),tickMax:o.add(new $r(u).mul(i))})}function NJ(e){var t=qh(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=eR([r,n]),u=qh(l,2),d=u[0],f=u[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat($j(Rj(0,s-1).map(function(){return 1/0}))):[].concat($j(Rj(0,s-1).map(function(){return-1/0})),[f]);return r>n?Fj(p):p}if(d===f)return jJ(d,s,i);var m=rR(d,f,o,i),x=m.step,v=m.tickMin,y=m.tickMax,b=jg.rangeStep(v,y.add(new $r(.1).mul(x)),x);return r>n?Fj(b):b}function kJ(e,t){var r=qh(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=eR([n,s]),l=qh(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0)return[n,s];if(u===d)return[u];var f=Math.max(t,2),p=tR(new $r(d).sub(u).div(f-1),i,0),m=[].concat($j(jg.rangeStep(new $r(u),new $r(d).sub(new $r(.99).mul(p)),p)),[d]);return n>s?Fj(m):m}var SJ=QM(NJ),_J=QM(kJ),EJ="Invariant failed";function Jl(e,t){throw new Error(EJ)}var TJ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jp.apply(this,arguments)}function CJ(e,t){return IJ(e)||PJ(e,t)||OJ(e,t)||AJ()}function AJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){if(e){if(typeof e=="string")return SO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SO(e,t)}}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function IJ(e){if(Array.isArray(e))return e}function DJ(e,t){if(e==null)return{};var r=MJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sR(n.key),n)}}function $J(e,t,r){return t&&FJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LJ(e,t,r){return t=Qp(t),BJ(e,nR()?Reflect.construct(t,r||[],Qp(e).constructor):t.apply(e,r))}function BJ(e,t){if(t&&(bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJ(e)}function UJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nR=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(e)}function HJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Bj(e,t)}function aR(e,t,r){return t=sR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sR(e){var t=qJ(e,"string");return bu(t)=="symbol"?t:t+""}function qJ(e,t){if(bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pf=(function(e){function t(){return RJ(this,t),LJ(this,t,arguments)}return HJ(t,e),$J(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,u=n.data,d=n.dataPointFormatter,f=n.xAxis,p=n.yAxis,m=DJ(n,TJ),x=Lt(m,!1);this.props.direction==="x"&&f.type!=="number"&&Jl();var v=u.map(function(y){var b=d(y,l),N=b.x,k=b.y,w=b.value,P=b.errorVal;if(!P)return null;var S=[],_,E;if(Array.isArray(P)){var C=CJ(P,2);_=C[0],E=C[1]}else _=E=P;if(i==="vertical"){var M=f.scale,D=k+s,A=D+o,O=D-o,F=M(w-_),W=M(w+E);S.push({x1:W,y1:A,x2:W,y2:O}),S.push({x1:F,y1:D,x2:W,y2:D}),S.push({x1:F,y1:A,x2:F,y2:O})}else if(i==="horizontal"){var Y=p.scale,Z=N+s,re=Z-o,ne=Z+o,U=Y(w-_),oe=Y(w+E);S.push({x1:re,y1:oe,x2:ne,y2:oe}),S.push({x1:Z,y1:U,x2:Z,y2:oe}),S.push({x1:re,y1:U,x2:ne,y2:U})}return he.createElement(yr,Jp({className:"recharts-errorBar",key:"bar-".concat(S.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},x),S.map(function(K){return he.createElement("line",Jp({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return he.createElement(yr,{className:"recharts-errorBars"},v)}}])})(he.Component);aR(Pf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});aR(Pf,"displayName","ErrorBar");function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(n){zJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zJ(e,t,r){return t=WJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WJ(e){var t=KJ(e,"string");return zh(t)=="symbol"?t:t+""}function KJ(e,t){if(zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iR=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=os(r,da);if(!o)return null;var l=da.defaultProps,u=l!==void 0?jl(jl({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(f,p){var m=p.item,x=p.props,v=x.sectors||x.data||[];return f.concat(v.map(function(y){return{type:o.props.iconType||m.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):d=(n||[]).map(function(f){var p=f.item,m=p.type.defaultProps,x=m!==void 0?jl(jl({},m),p.props):{},v=x.dataKey,y=x.name,b=x.legendType,N=x.hide;return{inactive:N,dataKey:v,type:u.iconType||b||"square",color:QN(p),value:y||v,payload:x}}),jl(jl(jl({},u),da.getWithHeight(o,s)),{},{payload:d,item:o})};function Wh(e){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}function EO(e){return XJ(e)||YJ(e)||GJ(e)||VJ()}function VJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GJ(e,t){if(e){if(typeof e=="string")return Uj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uj(e,t)}}function YJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XJ(e){if(Array.isArray(e))return Uj(e)}function Uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(n){lu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lu(e,t,r){return t=JJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=QJ(e,"string");return Wh(t)=="symbol"?t:t+""}function QJ(e,t){if(Wh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jn(e,t,r){return nr(e)||nr(t)?r:Hn(t)?ms(e,t,r):Vt(t)?t(e):r}function ih(e,t,r,n){var s=XX(e,function(l){return jn(l,t)});if(r==="number"){var i=s.filter(function(l){return lt(l)||parseFloat(l)});return i.length?[bg(i),vg(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!nr(l)}):s;return o.map(function(l){return Hn(l)||l instanceof Date?l:""})}var ZJ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var u=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,p=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,x=void 0;if(Ra(p-f)!==Ra(m-p)){var v=[];if(Ra(m-p)===Ra(u[1]-u[0])){x=m;var y=p+u[1]-u[0];v[0]=Math.min(y,(y+f)/2),v[1]=Math.max(y,(y+f)/2)}else{x=f;var b=m+u[1]-u[0];v[0]=Math.min(p,(b+p)/2),v[1]=Math.max(p,(b+p)/2)}var N=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>N[0]&&t<=N[1]||t>=v[0]&&t<=v[1]){o=s[d].index;break}}else{var k=Math.min(f,m),w=Math.max(f,m);if(t>(k+p)/2&&t<=(w+p)/2){o=s[d].index;break}}}else for(var P=0;P<l;P++)if(P===0&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P>0&&P<l-1&&t>(n[P].coordinate+n[P-1].coordinate)/2&&t<=(n[P].coordinate+n[P+1].coordinate)/2||P===l-1&&t>(n[P].coordinate+n[P-1].coordinate)/2){o=n[P].index;break}return o},QN=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,u;switch(s){case"Line":u=o;break;case"Area":case"Radar":u=o&&o!=="none"?o:l;break;default:u=l;break}return u},eQ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),u=0,d=l.length;u<d;u++)for(var f=i[l[u]].stackGroups,p=Object.keys(f),m=0,x=p.length;m<x;m++){var v=f[p[m]],y=v.items,b=v.cateAxisId,N=y.filter(function(E){return so(E.type).indexOf("Bar")>=0});if(N&&N.length){var k=N[0].type.defaultProps,w=k!==void 0?hn(hn({},k),N[0].props):N[0].props,P=w.barSize,S=w[b];o[S]||(o[S]=[]);var _=nr(P)?r:P;o[S].push({item:N[0],stackList:N.slice(1),barSize:nr(_)?void 0:Fa(_,n,0)})}}return o},tQ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,u=o.length;if(u<1)return null;var d=Fa(r,s,0,!0),f,p=[];if(o[0].barSize===+o[0].barSize){var m=!1,x=s/u,v=o.reduce(function(P,S){return P+S.barSize||0},0);v+=(u-1)*d,v>=s&&(v-=(u-1)*d,d=0),v>=s&&x>0&&(m=!0,x*=.9,v=u*x);var y=(s-v)/2>>0,b={offset:y-d,size:0};f=o.reduce(function(P,S){var _={item:S.item,position:{offset:b.offset+b.size+d,size:m?x:S.barSize}},E=[].concat(EO(P),[_]);return b=E[E.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(C){E.push({item:C,position:b})}),E},p)}else{var N=Fa(n,s,0,!0);s-2*N-(u-1)*d<=0&&(d=0);var k=(s-2*N-(u-1)*d)/u;k>1&&(k>>=0);var w=l===+l?Math.min(k,l):k;f=o.reduce(function(P,S,_){var E=[].concat(EO(P),[{item:S.item,position:{offset:N+(k+d)*_+(k-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(C){E.push({item:C,position:E[E.length-1].position})}),E},p)}return f},rQ=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,u=o-(l.left||0)-(l.right||0),d=iR({children:i,legendWidth:u});if(d){var f=s||{},p=f.width,m=f.height,x=d.align,v=d.verticalAlign,y=d.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&x!=="center"&&lt(t[x]))return hn(hn({},t),{},lu({},x,t[x]+(p||0)));if((y==="horizontal"||y==="vertical"&&x==="center")&&v!=="middle"&&lt(t[v]))return hn(hn({},t),{},lu({},v,t[v]+(m||0)))}return t},nQ=function(t,r,n){return nr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},oR=function(t,r,n,s,i){var o=r.props.children,l=gs(o,Pf).filter(function(d){return nQ(s,i,d.props.direction)});if(l&&l.length){var u=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var p=jn(f,n);if(nr(p))return d;var m=Array.isArray(p)?[bg(p),vg(p)]:[p,p],x=u.reduce(function(v,y){var b=jn(f,y,0),N=m[0]-Math.abs(Array.isArray(b)?b[0]:b),k=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(N,v[0]),Math.max(k,v[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},aQ=function(t,r,n,s,i){var o=r.map(function(l){return oR(t,l,n,i,s)}).filter(function(l){return!nr(l)});return o&&o.length?o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]):null},lR=function(t,r,n,s,i){var o=r.map(function(u){var d=u.props.dataKey;return n==="number"&&d&&oR(t,u,d,s)||ih(t,d,n,i)});if(n==="number")return o.reduce(function(u,d){return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(u,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,u.push(d[f]));return u},[])},cR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},uR=function(t,r,n,s){if(s)return t.map(function(u){return u.coordinate});var i,o,l=t.map(function(u){return u.coordinate===r&&(i=!0),u.coordinate===n&&(o=!0),u.coordinate});return i||l.push(r),o||l.push(n),l},ro=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,u=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/u:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?Ra(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(p){var m=i?i.indexOf(p):p;return{coordinate:s(m)+d,value:p,offset:d}});return f.filter(function(p){return!_f(p.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(p,m){return{coordinate:s(p)+d,value:p,index:m,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(p){return{coordinate:s(p)+d,value:p,offset:d}}):s.domain().map(function(p,m){return{coordinate:s(p)+d,value:i?i[p]:p,index:m,offset:d}})},Yw=new WeakMap,ep=function(t,r){if(typeof r!="function")return t;Yw.has(t)||Yw.set(t,new WeakMap);var n=Yw.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},dR=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Fh(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Kp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:sh(),realScaleType:"point"}:i==="category"?{scale:Fh(),realScaleType:"band"}:{scale:Kp(),realScaleType:"linear"};if(Kl(s)){var u="scale".concat(sg(s));return{scale:(fO[u]||sh)(),realScaleType:fO[u]?u:"point"}}return Vt(s)?{scale:s}:{scale:sh(),realScaleType:"point"}},CO=1e-4,hR=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-CO,o=Math.max(s[0],s[1])+CO,l=t(r[0]),u=t(r[n-1]);(l<i||l>o||u<i||u>o)&&t.domain([r[0],r[n-1]])}},sQ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},iQ=function(t,r){if(!r||r.length!==2||!lt(r[0])||!lt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!lt(t[0])||t[0]<n)&&(i[0]=n),(!lt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},oQ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var u=_f(t[l][n][1])?t[l][n][0]:t[l][n][1];u>=0?(t[l][n][0]=i,t[l][n][1]=i+u,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+u,o=t[l][n][1])}},lQ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=_f(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},cQ={sign:oQ,expand:Xz,none:hu,silhouette:Jz,wiggle:Qz,positive:lQ},uQ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=cQ[n],o=Yz().keys(s).value(function(l,u){return+jn(l,u,0)}).order(xj).offset(i);return o(t)},dQ=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,u={},d=l.reduce(function(p,m){var x,v=(x=m.type)!==null&&x!==void 0&&x.defaultProps?hn(hn({},m.type.defaultProps),m.props):m.props,y=v.stackId,b=v.hide;if(b)return p;var N=v[n],k=p[N]||{hasStack:!1,stackGroups:{}};if(Hn(y)){var w=k.stackGroups[y]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(m),k.hasStack=!0,k.stackGroups[y]=w}else k.stackGroups[Wu("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return hn(hn({},p),{},lu({},N,k))},u),f={};return Object.keys(d).reduce(function(p,m){var x=d[m];if(x.hasStack){var v={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(y,b){var N=x.stackGroups[b];return hn(hn({},y),{},lu({},b,{numericAxisId:n,cateAxisId:s,items:N.items,stackedData:uQ(t,N.items,i)}))},v)}return hn(hn({},p),{},lu({},m,x))},f)},fR=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,u=n||r.scale;if(u!=="auto"&&u!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=SJ(d,i,l);return t.domain([bg(f),vg(f)]),{niceTicks:f}}if(i&&s==="number"){var p=t.domain(),m=_J(p,i,l);return{niceTicks:m}}return null};function AO(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!nr(s[t.dataKey])){var l=Tp(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var u=jn(s,nr(o)?t.dataKey:o);return nr(u)?null:t.scale(u)}var OO=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var u=jn(o,r.dataKey,r.domain[l]);return nr(u)?null:r.scale(u)-i/2+s},hQ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},fQ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Hn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},pQ=function(t){return t.reduce(function(r,n){return[bg(n.concat([r[0]]).filter(lt)),vg(n.concat([r[1]]).filter(lt))]},[1/0,-1/0])},pR=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,u=l.reduce(function(d,f){var p=pQ(f.slice(r,n+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},PO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hj=function(t,r,n){if(Vt(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(lt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(PO.test(t[0])){var i=+PO.exec(t[0])[1];s[0]=r[0]-i}else Vt(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(lt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(IO.test(t[1])){var o=+IO.exec(t[1])[1];s[1]=r[1]+o}else Vt(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},Zp=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=_N(r,function(p){return p.coordinate}),o=1/0,l=1,u=i.length;l<u;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},DO=function(t,r,n){return!t||!t.length||Gu(t,ms(n,"type.defaultProps.domain"))?r:t},mR=function(t,r){var n=t.type.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,u=n.tooltipType,d=n.chartType,f=n.hide;return hn(hn({},Lt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:QN(t),value:jn(r,s),type:u,payload:r,chartType:d,hide:f})};function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(r),!0).forEach(function(n){gR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gR(e,t,r){return t=mQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mQ(e){var t=gQ(e,"string");return Kh(t)=="symbol"?t:t+""}function gQ(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xQ(e,t){return wQ(e)||bQ(e,t)||vQ(e,t)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vQ(e,t){if(e){if(typeof e=="string")return RO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RO(e,t)}}function RO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function wQ(e){if(Array.isArray(e))return e}var em=Math.PI/180,jQ=function(t){return t*180/Math.PI},Ar=function(t,r,n,s){return{x:t+Math.cos(-em*s)*n,y:r+Math.sin(-em*s)*n}},xR=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},yR=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.startAngle,d=t.endAngle,f=Fa(t.cx,o,o/2),p=Fa(t.cy,l,l/2),m=xR(o,l,n),x=Fa(t.innerRadius,m,0),v=Fa(t.outerRadius,m,m*.8),y=Object.keys(r);return y.reduce(function(b,N){var k=r[N],w=k.domain,P=k.reversed,S;if(nr(k.range))s==="angleAxis"?S=[u,d]:s==="radiusAxis"&&(S=[x,v]),P&&(S=[S[1],S[0]]);else{S=k.range;var _=S,E=xQ(_,2);u=E[0],d=E[1]}var C=dR(k,i),M=C.realScaleType,D=C.scale;D.domain(w).range(S),hR(D);var A=fR(D,Xi(Xi({},k),{},{realScaleType:M})),O=Xi(Xi(Xi({},k),A),{},{range:S,radius:v,realScaleType:M,scale:D,cx:f,cy:p,innerRadius:x,outerRadius:v,startAngle:u,endAngle:d});return Xi(Xi({},b),{},gR({},N,O))},{})},NQ=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},kQ=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=NQ({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var u=(n-i)/l,d=Math.acos(u);return s>o&&(d=2*Math.PI-d),{radius:l,angle:jQ(d),angleInRadian:d}},SQ=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},_Q=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},FO=function(t,r){var n=t.x,s=t.y,i=kQ({x:n,y:s},r),o=i.radius,l=i.angle,u=r.innerRadius,d=r.outerRadius;if(o<u||o>d)return!1;if(o===0)return!0;var f=SQ(r),p=f.startAngle,m=f.endAngle,x=l,v;if(p<=m){for(;x>m;)x-=360;for(;x<p;)x+=360;v=x>=p&&x<=m}else{for(;x>p;)x-=360;for(;x<m;)x+=360;v=x>=m&&x<=p}return v?Xi(Xi({},r),{},{radius:o,angle:_Q(x,r)}):null},vR=function(t){return!L.isValidElement(t)&&!Vt(t)&&typeof t!="boolean"?t.className:""};function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}var EQ=["offset"];function TQ(e){return PQ(e)||OQ(e)||AQ(e)||CQ()}function CQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AQ(e,t){if(e){if(typeof e=="string")return qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(e,t)}}function OQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PQ(e){if(Array.isArray(e))return qj(e)}function qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IQ(e,t){if(e==null)return{};var r=DQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){MQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MQ(e,t,r){return t=RQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RQ(e){var t=FQ(e,"string");return Vh(t)=="symbol"?t:t+""}function FQ(e,t){if(Vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gh.apply(this,arguments)}var $Q=function(t){var r=t.value,n=t.formatter,s=nr(t.children)?r:t.children;return Vt(n)?n(s):s},LQ=function(t,r){var n=Ra(r-t),s=Math.min(Math.abs(r-t),360);return n*s},BQ=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,u=i,d=u.cx,f=u.cy,p=u.innerRadius,m=u.outerRadius,x=u.startAngle,v=u.endAngle,y=u.clockWise,b=(p+m)/2,N=LQ(x,v),k=N>=0?1:-1,w,P;s==="insideStart"?(w=x+k*o,P=y):s==="insideEnd"?(w=v-k*o,P=!y):s==="end"&&(w=v+k*o,P=y),P=N<=0?P:!P;var S=Ar(d,f,b,w),_=Ar(d,f,b,w+(P?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(P?0:1,`,
    `).concat(_.x,",").concat(_.y),C=nr(t.id)?Wu("recharts-radial-line-"):t.id;return he.createElement("text",Gh({},n,{dominantBaseline:"central",className:tr("recharts-radial-bar-label",l)}),he.createElement("defs",null,he.createElement("path",{id:C,d:E})),he.createElement("textPath",{xlinkHref:"#".concat(C)},r))},UQ=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,u=i.innerRadius,d=i.outerRadius,f=i.startAngle,p=i.endAngle,m=(f+p)/2;if(s==="outside"){var x=Ar(o,l,d+n,m),v=x.x,y=x.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(u+d)/2,N=Ar(o,l,b,m),k=N.x,w=N.y;return{x:k,y:w,textAnchor:"middle",verticalAnchor:"middle"}},HQ=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,u=o.y,d=o.width,f=o.height,p=f>=0?1:-1,m=p*s,x=p>0?"end":"start",v=p>0?"start":"end",y=d>=0?1:-1,b=y*s,N=y>0?"end":"start",k=y>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:u-p*s,textAnchor:"middle",verticalAnchor:x};return $n($n({},w),n?{height:Math.max(u-n.y,0),width:d}:{})}if(i==="bottom"){var P={x:l+d/2,y:u+f+m,textAnchor:"middle",verticalAnchor:v};return $n($n({},P),n?{height:Math.max(n.y+n.height-(u+f),0),width:d}:{})}if(i==="left"){var S={x:l-b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"};return $n($n({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(i==="right"){var _={x:l+d+b,y:u+f/2,textAnchor:k,verticalAnchor:"middle"};return $n($n({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:f}:{})}var E=n?{width:d,height:f}:{};return i==="insideLeft"?$n({x:l+b,y:u+f/2,textAnchor:k,verticalAnchor:"middle"},E):i==="insideRight"?$n({x:l+d-b,y:u+f/2,textAnchor:N,verticalAnchor:"middle"},E):i==="insideTop"?$n({x:l+d/2,y:u+m,textAnchor:"middle",verticalAnchor:v},E):i==="insideBottom"?$n({x:l+d/2,y:u+f-m,textAnchor:"middle",verticalAnchor:x},E):i==="insideTopLeft"?$n({x:l+b,y:u+m,textAnchor:k,verticalAnchor:v},E):i==="insideTopRight"?$n({x:l+d-b,y:u+m,textAnchor:N,verticalAnchor:v},E):i==="insideBottomLeft"?$n({x:l+b,y:u+f-m,textAnchor:k,verticalAnchor:x},E):i==="insideBottomRight"?$n({x:l+d-b,y:u+f-m,textAnchor:N,verticalAnchor:x},E):zu(i)&&(lt(i.x)||Dl(i.x))&&(lt(i.y)||Dl(i.y))?$n({x:l+Fa(i.x,d),y:u+Fa(i.y,f),textAnchor:"end",verticalAnchor:"end"},E):$n({x:l+d/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},E)},qQ=function(t){return"cx"in t&&lt(t.cx)};function Qn(e){var t=e.offset,r=t===void 0?5:t,n=IQ(e,EQ),s=$n({offset:r},n),i=s.viewBox,o=s.position,l=s.value,u=s.children,d=s.content,f=s.className,p=f===void 0?"":f,m=s.textBreakAll;if(!i||nr(l)&&nr(u)&&!L.isValidElement(d)&&!Vt(d))return null;if(L.isValidElement(d))return L.cloneElement(d,s);var x;if(Vt(d)){if(x=L.createElement(d,s),L.isValidElement(x))return x}else x=$Q(s);var v=qQ(i),y=Lt(s,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BQ(s,x,y);var b=v?UQ(s):HQ(s);return he.createElement(Yl,Gh({className:tr("recharts-label",p)},y,b,{breakAll:m}),x)}Qn.displayName="Label";var bR=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,u=t.radius,d=t.innerRadius,f=t.outerRadius,p=t.x,m=t.y,x=t.top,v=t.left,y=t.width,b=t.height,N=t.clockWise,k=t.labelViewBox;if(k)return k;if(lt(y)&&lt(b)){if(lt(p)&&lt(m))return{x:p,y:m,width:y,height:b};if(lt(x)&&lt(v))return{x,y:v,width:y,height:b}}return lt(p)&&lt(m)?{x:p,y:m,width:0,height:0}:lt(r)&&lt(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:N}:t.viewBox?t.viewBox:{}},zQ=function(t,r){return t?t===!0?he.createElement(Qn,{key:"label-implicit",viewBox:r}):Hn(t)?he.createElement(Qn,{key:"label-implicit",viewBox:r,value:t}):L.isValidElement(t)?t.type===Qn?L.cloneElement(t,{key:"label-implicit",viewBox:r}):he.createElement(Qn,{key:"label-implicit",content:t,viewBox:r}):Vt(t)?he.createElement(Qn,{key:"label-implicit",content:t,viewBox:r}):zu(t)?he.createElement(Qn,Gh({viewBox:r},t,{key:"label-implicit"})):null:null},WQ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=bR(t),o=gs(s,Qn).map(function(u,d){return L.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=zQ(t.label,r||i);return[l].concat(TQ(o))};Qn.parseViewBox=bR;Qn.renderCallByParent=WQ;var Xw,LO;function KQ(){if(LO)return Xw;LO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Xw=e,Xw}var VQ=KQ();const wR=Mr(VQ);function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}var GQ=["valueAccessor"],YQ=["data","dataKey","clockWise","id","textBreakAll"];function XQ(e){return eZ(e)||ZQ(e)||QQ(e)||JQ()}function JQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QQ(e,t){if(e){if(typeof e=="string")return zj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zj(e,t)}}function ZQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eZ(e){if(Array.isArray(e))return zj(e)}function zj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(this,arguments)}function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(n){tZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tZ(e,t,r){return t=rZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZ(e){var t=nZ(e,"string");return Yh(t)=="symbol"?t:t+""}function nZ(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HO(e,t){if(e==null)return{};var r=aZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var sZ=function(t){return Array.isArray(t.value)?wR(t.value):t.value};function Ei(e){var t=e.valueAccessor,r=t===void 0?sZ:t,n=HO(e,GQ),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,u=n.textBreakAll,d=HO(n,YQ);return!s||!s.length?null:he.createElement(yr,{className:"recharts-label-list"},s.map(function(f,p){var m=nr(i)?r(f,p):jn(f&&f.payload,i),x=nr(l)?{}:{id:"".concat(l,"-").concat(p)};return he.createElement(Qn,tm({},Lt(f,!0),d,x,{parentViewBox:f.parentViewBox,value:m,textBreakAll:u,viewBox:Qn.parseViewBox(nr(o)?f:UO(UO({},f),{},{clockWise:o})),key:"label-".concat(p),index:p}))}))}Ei.displayName="LabelList";function iZ(e,t){return e?e===!0?he.createElement(Ei,{key:"labelList-implicit",data:t}):he.isValidElement(e)||Vt(e)?he.createElement(Ei,{key:"labelList-implicit",data:t,content:e}):zu(e)?he.createElement(Ei,tm({data:t},e,{key:"labelList-implicit"})):null:null}function oZ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=gs(n,Ei).map(function(o,l){return L.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=iZ(e.label,t);return[i].concat(XQ(s))}Ei.renderCallByParent=oZ;function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wj.apply(this,arguments)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){lZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lZ(e,t,r){return t=cZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cZ(e){var t=uZ(e,"string");return Xh(t)=="symbol"?t:t+""}function uZ(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dZ=function(t,r){var n=Ra(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},tp=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,u=t.cornerRadius,d=t.cornerIsExternal,f=u*(l?1:-1)+s,p=Math.asin(u/f)/em,m=d?i:i+o*p,x=Ar(r,n,f,m),v=Ar(r,n,s,m),y=d?i-o*p:i,b=Ar(r,n,f*Math.cos(p*em),y);return{center:x,circleTangency:v,lineTangency:b,theta:p}},jR=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,u=dZ(o,l),d=o+u,f=Ar(r,n,i,o),p=Ar(r,n,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var x=Ar(r,n,s,o),v=Ar(r,n,s,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},hZ=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,u=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,p=Ra(f-d),m=tp({cx:r,cy:n,radius:i,angle:d,sign:p,cornerRadius:o,cornerIsExternal:u}),x=m.circleTangency,v=m.lineTangency,y=m.theta,b=tp({cx:r,cy:n,radius:i,angle:f,sign:-p,cornerRadius:o,cornerIsExternal:u}),N=b.circleTangency,k=b.lineTangency,w=b.theta,P=u?Math.abs(d-f):Math.abs(d-f)-y-w;if(P<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):jR({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,`
  `);if(s>0){var _=tp({cx:r,cy:n,radius:s,angle:d,sign:p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),E=_.circleTangency,C=_.lineTangency,M=_.theta,D=tp({cx:r,cy:n,radius:s,angle:f,sign:-p,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),A=D.circleTangency,O=D.lineTangency,F=D.theta,W=u?Math.abs(d-f):Math.abs(d-f)-M-F;if(W<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(W>180),",").concat(+(p>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(p<0),",").concat(C.x,",").concat(C.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},fZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},NR=function(t){var r=zO(zO({},fZ),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,u=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,p=r.endAngle,m=r.className;if(o<i||f===p)return null;var x=tr("recharts-sector",m),v=o-i,y=Fa(l,v,0,!0),b;return y>0&&Math.abs(f-p)<360?b=hZ({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:p}):b=jR({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:p}),he.createElement("path",Wj({},Lt(r,!0),{className:x,d:b,role:"img"}))};function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kj.apply(this,arguments)}function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(r),!0).forEach(function(n){pZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pZ(e,t,r){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=gZ(e,"string");return Jh(t)=="symbol"?t:t+""}function gZ(e,t){if(Jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VO={curveBasisClosed:$z,curveBasisOpen:Lz,curveBasis:Fz,curveBumpX:Nz,curveBumpY:kz,curveLinearClosed:Bz,curveLinear:og,curveMonotoneX:Uz,curveMonotoneY:Hz,curveNatural:qz,curveStep:zz,curveStepAfter:Kz,curveStepBefore:Wz},rp=function(t){return t.x===+t.x&&t.y===+t.y},Ud=function(t){return t.x},Hd=function(t){return t.y},xZ=function(t,r){if(Vt(t))return t;var n="curve".concat(sg(t));return(n==="curveMonotone"||n==="curveBump")&&r?VO["".concat(n).concat(r==="vertical"?"Y":"X")]:VO[n]||og},yZ=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,u=t.connectNulls,d=u===void 0?!1:u,f=xZ(n,l),p=d?i.filter(function(y){return rp(y)}):i,m;if(Array.isArray(o)){var x=d?o.filter(function(y){return rp(y)}):o,v=p.map(function(y,b){return KO(KO({},y),{},{base:x[b]})});return l==="vertical"?m=V0().y(Hd).x1(Ud).x0(function(y){return y.base.x}):m=V0().x(Ud).y1(Hd).y0(function(y){return y.base.y}),m.defined(rp).curve(f),m(v)}return l==="vertical"&&lt(o)?m=V0().y(Hd).x1(Ud).x0(o):lt(o)?m=V0().x(Ud).y1(Hd).y0(o):m=v5().x(Ud).y(Hd),m.defined(rp).curve(f),m(p)},rm=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?yZ(t):s;return L.createElement("path",Kj({},Lt(t,!1),Cp(t),{className:tr("recharts-curve",r),d:o,ref:i}))},Jw={exports:{}},Qw,GO;function vZ(){if(GO)return Qw;GO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Qw=e,Qw}var Zw,YO;function bZ(){if(YO)return Zw;YO=1;var e=vZ();function t(){}function r(){}return r.resetWarningCache=t,Zw=function(){function n(o,l,u,d,f,p){if(p!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Zw}var XO;function wZ(){return XO||(XO=1,Jw.exports=bZ()()),Jw.exports}var jZ=wZ();const Ir=Mr(jZ),{getOwnPropertyNames:NZ,getOwnPropertySymbols:kZ}=Object,{hasOwnProperty:SZ}=Object.prototype;function e1(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function np(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const u=e(r,n,s);return i.delete(r),i.delete(n),u}}function _Z(e){return e?.[Symbol.toStringTag]}function JO(e){return NZ(e).concat(kZ(e))}const EZ=Object.hasOwn||((e,t)=>SZ.call(e,t));function ic(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const TZ="__v",CZ="__o",AZ="_owner",{getOwnPropertyDescriptor:QO,keys:ZO}=Object;function OZ(e,t){return e.byteLength===t.byteLength&&nm(new Uint8Array(e),new Uint8Array(t))}function PZ(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function IZ(e,t){return e.byteLength===t.byteLength&&nm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function DZ(e,t){return ic(e.getTime(),t.getTime())}function MZ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function RZ(e,t){return e===t}function e3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,u=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let f=!1,p=0;for(;(l=d.next())&&!l.done;){if(s[p]){p++;continue}const m=o.value,x=l.value;if(r.equals(m[0],x[0],u,p,e,t,r)&&r.equals(m[1],x[1],m[0],x[0],e,t,r)){f=s[p]=!0;break}p++}if(!f)return!1;u++}return!0}const FZ=ic;function $Z(e,t,r){const n=ZO(e);let s=n.length;if(ZO(t).length!==s)return!1;for(;s-- >0;)if(!kR(e,t,r,n[s]))return!1;return!0}function qd(e,t,r){const n=JO(e);let s=n.length;if(JO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!kR(e,t,r,i)||(o=QO(e,i),l=QO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function LZ(e,t){return ic(e.valueOf(),t.valueOf())}function BZ(e,t){return e.source===t.source&&e.flags===t.flags}function t3(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const u=t.values();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function nm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function UZ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function kR(e,t,r,n){return(n===AZ||n===CZ||n===TZ)&&(e.$$typeof||t.$$typeof)?!0:EZ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const HZ="[object ArrayBuffer]",qZ="[object Arguments]",zZ="[object Boolean]",WZ="[object DataView]",KZ="[object Date]",VZ="[object Error]",GZ="[object Map]",YZ="[object Number]",XZ="[object Object]",JZ="[object RegExp]",QZ="[object Set]",ZZ="[object String]",eee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},tee="[object URL]",ree=Object.prototype.toString;function nee({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:u,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:x,unknownTagComparators:v}){return function(b,N,k){if(b===N)return!0;if(b==null||N==null)return!1;const w=typeof b;if(w!==typeof N)return!1;if(w!=="object")return w==="number"?l(b,N,k):w==="function"?i(b,N,k):!1;const P=b.constructor;if(P!==N.constructor)return!1;if(P===Object)return u(b,N,k);if(Array.isArray(b))return t(b,N,k);if(P===Date)return n(b,N,k);if(P===RegExp)return f(b,N,k);if(P===Map)return o(b,N,k);if(P===Set)return p(b,N,k);const S=ree.call(b);if(S===KZ)return n(b,N,k);if(S===JZ)return f(b,N,k);if(S===GZ)return o(b,N,k);if(S===QZ)return p(b,N,k);if(S===XZ)return typeof b.then!="function"&&typeof N.then!="function"&&u(b,N,k);if(S===tee)return x(b,N,k);if(S===VZ)return s(b,N,k);if(S===qZ)return u(b,N,k);if(eee[S])return m(b,N,k);if(S===HZ)return e(b,N,k);if(S===WZ)return r(b,N,k);if(S===zZ||S===YZ||S===ZZ)return d(b,N,k);if(v){let _=v[S];if(!_){const E=_Z(b);E&&(_=v[E])}if(_)return _(b,N,k)}return!1}}function aee({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:OZ,areArraysEqual:r?qd:PZ,areDataViewsEqual:IZ,areDatesEqual:DZ,areErrorsEqual:MZ,areFunctionsEqual:RZ,areMapsEqual:r?e1(e3,qd):e3,areNumbersEqual:FZ,areObjectsEqual:r?qd:$Z,arePrimitiveWrappersEqual:LZ,areRegExpsEqual:BZ,areSetsEqual:r?e1(t3,qd):t3,areTypedArraysEqual:r?e1(nm,qd):nm,areUrlsEqual:UZ,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=np(n.areArraysEqual),i=np(n.areMapsEqual),o=np(n.areObjectsEqual),l=np(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function see(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function iee({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,u){const{cache:d=e?new WeakMap:void 0,meta:f}=r();return t(l,u,{cache:d,equals:n,meta:f,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,u){return t(l,u,i)}}const oee=il();il({strict:!0});il({circular:!0});il({circular:!0,strict:!0});il({createInternalComparator:()=>ic});il({strict:!0,createInternalComparator:()=>ic});il({circular:!0,createInternalComparator:()=>ic});il({circular:!0,createInternalComparator:()=>ic,strict:!0});function il(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=aee(e),o=nee(i),l=r?r(o):see(o);return iee({circular:t,comparator:o,createState:n,equals:l,strict:s})}function lee(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function r3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):lee(s)};requestAnimationFrame(n)}function Vj(e){"@babel/helpers - typeof";return Vj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vj(e)}function cee(e){return fee(e)||hee(e)||dee(e)||uee()}function uee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dee(e,t){if(e){if(typeof e=="string")return n3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n3(e,t)}}function n3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fee(e){if(Array.isArray(e))return e}function pee(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=cee(o),u=l[0],d=l.slice(1);if(typeof u=="number"){r3(s.bind(null,d),u);return}s(u),r3(s.bind(null,d));return}Vj(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function a3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a3(Object(r),!0).forEach(function(n){SR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SR(e,t,r){return t=mee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mee(e){var t=gee(e,"string");return Qh(t)==="symbol"?t:String(t)}function gee(e,t){if(Qh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xee=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},yee=function(t){return t},vee=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},oh=function(t,r){return Object.keys(r).reduce(function(n,s){return s3(s3({},n),{},SR({},s,t(s,r[s])))},{})},i3=function(t,r,n){return t.map(function(s){return"".concat(vee(s)," ").concat(r,"ms ").concat(n)}).join(",")};function bee(e,t){return Nee(e)||jee(e,t)||_R(e,t)||wee()}function wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Nee(e){if(Array.isArray(e))return e}function kee(e){return Eee(e)||_ee(e)||_R(e)||See()}function See(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _R(e,t){if(e){if(typeof e=="string")return Gj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gj(e,t)}}function _ee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eee(e){if(Array.isArray(e))return Gj(e)}function Gj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var am=1e-4,ER=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},TR=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},o3=function(t,r){return function(n){var s=ER(t,r);return TR(s,n)}},Tee=function(t,r){return function(n){var s=ER(t,r),i=[].concat(kee(s.map(function(o,l){return o*l}).slice(1)),[0]);return TR(i,n)}},l3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var d=u[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),f=bee(d,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var p=o3(s,o),m=o3(i,l),x=Tee(s,o),v=function(N){return N>1?1:N<0?0:N},y=function(N){for(var k=N>1?1:N,w=k,P=0;P<8;++P){var S=p(w)-k,_=x(w);if(Math.abs(S-k)<am||_<am)return m(w);w=v(w-S/_)}return m(w)};return y.isStepper=!1,y},Cee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,u=function(f,p,m){var x=-(f-p)*n,v=m*i,y=m+(x-v)*l/1e3,b=m*l/1e3+f;return Math.abs(b-p)<am&&Math.abs(y)<am?[p,0]:[b,y]};return u.isStepper=!0,u.dt=l,u},Aee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return l3(s);case"spring":return Cee();default:if(s.split("(")[0]==="cubic-bezier")return l3(s)}return typeof s=="function"?s:null};function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function c3(e){return Iee(e)||Pee(e)||CR(e)||Oee()}function Oee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Iee(e){if(Array.isArray(e))return Xj(e)}function u3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(r),!0).forEach(function(n){Yj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yj(e,t,r){return t=Dee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dee(e){var t=Mee(e,"string");return Zh(t)==="symbol"?t:String(t)}function Mee(e,t){if(Zh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ree(e,t){return Lee(e)||$ee(e,t)||CR(e,t)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CR(e,t){if(e){if(typeof e=="string")return Xj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xj(e,t)}}function Xj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $ee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Lee(e){if(Array.isArray(e))return e}var sm=function(t,r,n){return t+(r-t)*n},Jj=function(t){var r=t.from,n=t.to;return r!==n},Bee=function e(t,r,n){var s=oh(function(i,o){if(Jj(o)){var l=t(o.from,o.to,o.velocity),u=Ree(l,2),d=u[0],f=u[1];return oa(oa({},o),{},{from:d,velocity:f})}return o},r);return n<1?oh(function(i,o){return Jj(o)?oa(oa({},o),{},{velocity:sm(o.velocity,s[i].velocity,n),from:sm(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const Uee=(function(e,t,r,n,s){var i=xee(e,t),o=i.reduce(function(b,N){return oa(oa({},b),{},Yj({},N,[e[N],t[N]]))},{}),l=i.reduce(function(b,N){return oa(oa({},b),{},Yj({},N,{from:e[N],velocity:0,to:t[N]}))},{}),u=-1,d,f,p=function(){return null},m=function(){return oh(function(N,k){return k.from},l)},x=function(){return!Object.values(l).filter(Jj).length},v=function(N){d||(d=N);var k=N-d,w=k/r.dt;l=Bee(r,l,w),s(oa(oa(oa({},e),t),m())),d=N,x()||(u=requestAnimationFrame(p))},y=function(N){f||(f=N);var k=(N-f)/n,w=oh(function(S,_){return sm.apply(void 0,c3(_).concat([r(k)]))},o);if(s(oa(oa(oa({},e),t),w)),k<1)u=requestAnimationFrame(p);else{var P=oh(function(S,_){return sm.apply(void 0,c3(_).concat([r(1)]))},o);s(oa(oa(oa({},e),t),P))}};return p=r.isStepper?v:y,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(u)}}});function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}var Hee=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qee(e,t){if(e==null)return{};var r=zee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zee(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function t1(e){return Gee(e)||Vee(e)||Kee(e)||Wee()}function Wee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kee(e,t){if(e){if(typeof e=="string")return Qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qj(e,t)}}function Vee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gee(e){if(Array.isArray(e))return Qj(e)}function Qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(r),!0).forEach(function(n){Jd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jd(e,t,r){return t=AR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AR(n.key),n)}}function Jee(e,t,r){return t&&Xee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AR(e){var t=Qee(e,"string");return wu(t)==="symbol"?t:String(t)}function Qee(e,t){if(wu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Zj(e,t)}function ete(e){var t=tte();return function(){var n=im(e),s;if(t){var i=im(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return e2(this,s)}}function e2(e,t){if(t&&(wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t2(e)}function t2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function im(e){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},im(e)}var fi=(function(e){Zee(r,e);var t=ete(r);function r(n,s){var i;Yee(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,u=o.attributeName,d=o.from,f=o.to,p=o.steps,m=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(t2(i)),i.changeStyle=i.changeStyle.bind(t2(i)),!l||x<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),e2(i);if(p&&p.length)i.state={style:p[0].style};else if(d){if(typeof m=="function")return i.state={style:d},e2(i);i.state={style:u?Jd({},u,d):d}}else i.state={style:{}};return i}return Jee(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,u=i.attributeName,d=i.shouldReAnimate,f=i.to,p=i.from,m=this.state.style;if(l){if(!o){var x={style:u?Jd({},u,f):f};this.state&&m&&(u&&m[u]!==f||!u&&m!==f)&&this.setState(x);return}if(!(oee(s.to,f)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||d?p:s.to;if(this.state&&m){var b={style:u?Jd({},u,y):y};(u&&m[u]!==y||!u&&m!==y)&&this.setState(b)}this.runAnimation(Ys(Ys({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,u=s.duration,d=s.easing,f=s.begin,p=s.onAnimationEnd,m=s.onAnimationStart,x=Uee(o,l,Aee(d),u,this.changeStyle),v=function(){i.stopJSAnimation=x()};this.manager.start([m,f,v,u,p])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,u=s.onAnimationStart,d=o[0],f=d.style,p=d.duration,m=p===void 0?0:p,x=function(y,b,N){if(N===0)return y;var k=b.duration,w=b.easing,P=w===void 0?"ease":w,S=b.style,_=b.properties,E=b.onAnimationEnd,C=N>0?o[N-1]:b,M=_||Object.keys(S);if(typeof P=="function"||P==="spring")return[].concat(t1(y),[i.runJSAnimation.bind(i,{from:C.style,to:S,duration:k,easing:P}),k]);var D=i3(M,k,P),A=Ys(Ys(Ys({},C.style),S),{},{transition:D});return[].concat(t1(y),[A,k,E]).filter(yee)};return this.manager.start([u].concat(t1(o.reduce(x,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=pee());var i=s.begin,o=s.duration,l=s.attributeName,u=s.to,d=s.easing,f=s.onAnimationStart,p=s.onAnimationEnd,m=s.steps,x=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var y=l?Jd({},l,u):u,b=i3(Object.keys(y),o,d);v.start([f,i,Ys(Ys({},y),{},{transition:b}),o,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var u=qee(s,Hee),d=L.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var p=function(x){var v=x.props,y=v.style,b=y===void 0?{}:y,N=v.className,k=L.cloneElement(x,Ys(Ys({},u),{},{style:Ys(Ys({},b),f),className:N}));return k};return d===1?p(L.Children.only(i)):he.createElement("div",null,L.Children.map(i,function(m){return p(m)}))}}]),r})(L.PureComponent);fi.displayName="Animate";fi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};fi.propTypes={from:Ir.oneOfType([Ir.object,Ir.string]),to:Ir.oneOfType([Ir.object,Ir.string]),attributeName:Ir.string,duration:Ir.number,begin:Ir.number,easing:Ir.oneOfType([Ir.string,Ir.func]),steps:Ir.arrayOf(Ir.shape({duration:Ir.number.isRequired,style:Ir.object.isRequired,easing:Ir.oneOfType([Ir.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ir.func]),properties:Ir.arrayOf("string"),onAnimationEnd:Ir.func})),children:Ir.oneOfType([Ir.node,Ir.func]),isActive:Ir.bool,canBegin:Ir.bool,onAnimationEnd:Ir.func,shouldReAnimate:Ir.bool,onAnimationStart:Ir.func,onAnimationReStart:Ir.func};d6();function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},om.apply(this,arguments)}function rte(e,t){return ite(e)||ste(e,t)||ate(e,t)||nte()}function nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ate(e,t){if(e){if(typeof e=="string")return h3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h3(e,t)}}function h3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ste(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function ite(e){if(Array.isArray(e))return e}function f3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f3(Object(r),!0).forEach(function(n){ote(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ote(e,t,r){return t=lte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lte(e){var t=cte(e,"string");return ef(t)=="symbol"?t:t+""}function cte(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m3=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,u=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,x=4;m<x;m++)p[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(t+u*p[0],",").concat(r)),f+="L ".concat(t+n-u*p[1],",").concat(r),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+l*p[1])),f+="L ".concat(t+n,",").concat(r+s-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(t+n-u*p[2],",").concat(r+s)),f+="L ".concat(t+u*p[3],",").concat(r+s),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);f="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+u*v,",").concat(r,`
            L `).concat(t+n-u*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+s-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n-u*v,",").concat(r+s,`
            L `).concat(t+u*v,",").concat(r+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*v," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},ute=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,u=r.height;if(Math.abs(l)>0&&Math.abs(u)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),p=Math.min(o,o+u),m=Math.max(o,o+u);return n>=d&&n<=f&&s>=p&&s<=m}return!1},dte={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZN=function(t){var r=p3(p3({},dte),t),n=L.useRef(),s=L.useState(-1),i=rte(s,2),o=i[0],l=i[1];L.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var P=n.current.getTotalLength();P&&l(P)}catch{}},[]);var u=r.x,d=r.y,f=r.width,p=r.height,m=r.radius,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,N=r.isAnimationActive,k=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var w=tr("recharts-rectangle",x);return k?he.createElement(fi,{canBegin:o>0,from:{width:f,height:p,x:u,y:d},to:{width:f,height:p,x:u,y:d},duration:y,animationEasing:v,isActive:k},function(P){var S=P.width,_=P.height,E=P.x,C=P.y;return he.createElement(fi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:N,easing:v},he.createElement("path",om({},Lt(r,!0),{className:w,d:m3(E,C,S,_,m),ref:n})))}):he.createElement("path",om({},Lt(r,!0),{className:w,d:m3(u,d,f,p,m)}))},hte=["points","className","baseLinePoints","connectNulls"];function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eu.apply(this,arguments)}function fte(e,t){if(e==null)return{};var r=pte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function g3(e){return yte(e)||xte(e)||gte(e)||mte()}function mte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gte(e,t){if(e){if(typeof e=="string")return r2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r2(e,t)}}function xte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yte(e){if(Array.isArray(e))return r2(e)}function r2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x3=function(t){return t&&t.x===+t.x&&t.y===+t.y},vte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){x3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),x3(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},lh=function(t,r){var n=vte(t);r&&(n=[n.reduce(function(i,o){return[].concat(g3(i),g3(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,u){return"".concat(o).concat(u===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},bte=function(t,r,n){var s=lh(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(lh(r.reverse(),n).slice(1))},OR=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=fte(t,hte);if(!r||!r.length)return null;var l=tr("recharts-polygon",n);if(s&&s.length){var u=o.stroke&&o.stroke!=="none",d=bte(r,s,i);return he.createElement("g",{className:l},he.createElement("path",eu({},Lt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),u?he.createElement("path",eu({},Lt(o,!0),{fill:"none",d:lh(r,i)})):null,u?he.createElement("path",eu({},Lt(o,!0),{fill:"none",d:lh(s,i)})):null)}var f=lh(r,i);return he.createElement("path",eu({},Lt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n2.apply(this,arguments)}var If=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=tr("recharts-dot",i);return r===+r&&n===+n&&s===+s?L.createElement("circle",n2({},Lt(t,!1),Cp(t),{className:o,cx:r,cy:n,r:s})):null};function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}var wte=["x","y","top","left","width","height","className"];function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a2.apply(this,arguments)}function y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y3(Object(r),!0).forEach(function(n){Nte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nte(e,t,r){return t=kte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=Ste(e,"string");return tf(t)=="symbol"?t:t+""}function Ste(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _te(e,t){if(e==null)return{};var r=Ete(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ete(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Tte=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},Cte=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,u=t.left,d=u===void 0?0:u,f=t.width,p=f===void 0?0:f,m=t.height,x=m===void 0?0:m,v=t.className,y=_te(t,wte),b=jte({x:n,y:i,top:l,left:d,width:p,height:x},y);return!lt(n)||!lt(i)||!lt(p)||!lt(x)||!lt(l)||!lt(d)?null:he.createElement("path",a2({},Lt(b,!0),{className:tr("recharts-cross",v),d:Tte(n,i,p,x,l,d)}))},Ate=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function Ote(e,t){if(e==null)return{};var r=Pte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fo.apply(this,arguments)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(n){Ite(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ite(e,t,r){return t=Dte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dte(e){var t=Mte(e,"string");return rf(t)=="symbol"?t:t+""}function Mte(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rte=function(t,r,n,s){var i="";return s.forEach(function(o,l){var u=Ar(r,n,t,o);l?i+="L ".concat(u.x,",").concat(u.y):i+="M ".concat(u.x,",").concat(u.y)}),i+="Z",i},Fte=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var u=nf({stroke:"#ccc"},Lt(t,!1));return he.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(d){var f=Ar(r,n,s,d),p=Ar(r,n,i,d);return he.createElement("line",fo({},u,{key:"line-".concat(d),x1:f.x,y1:f.y,x2:p.x,y2:p.y}))}))},$te=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.index,o=nf(nf({stroke:"#ccc"},Lt(t,!1)),{},{fill:"none"});return he.createElement("circle",fo({},o,{className:tr("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:s}))},Lte=function(t){var r=t.radius,n=t.index,s=nf(nf({stroke:"#ccc"},Lt(t,!1)),{},{fill:"none"});return he.createElement("path",fo({},s,{className:tr("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:Rte(r,t.cx,t.cy,t.polarAngles)}))},Bte=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:he.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return n==="circle"?he.createElement($te,fo({key:o},t,{radius:s,index:i})):he.createElement(Lte,fo({key:o},t,{radius:s,index:i}))}))},PR=function(t){var r=t.cx,n=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,u=t.outerRadius,d=u===void 0?0:u,f=t.gridType,p=f===void 0?"polygon":f,m=t.radialLines,x=m===void 0?!0:m,v=Ote(t,Ate);return d<=0?null:he.createElement("g",{className:"recharts-polar-grid"},he.createElement(Fte,fo({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},v)),he.createElement(Bte,fo({cx:n,cy:i,innerRadius:l,outerRadius:d,gridType:p,radialLines:x},v)))};PR.displayName="PolarGrid";var r1,b3;function Ute(){if(b3)return r1;b3=1;var e=yg(),t=qM(),r=Ii();function n(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return r1=n,r1}var Hte=Ute();const qte=Mr(Hte);var n1,w3;function zte(){if(w3)return n1;w3=1;var e=yg(),t=Ii(),r=zM();function n(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return n1=n,n1}var Wte=zte();const Kte=Mr(Wte);var Vte=["cx","cy","angle","ticks","axisLine"],Gte=["ticks","tick","angle","tickFormatter","stroke"];function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ch.apply(this,arguments)}function j3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(r),!0).forEach(function(n){Ng(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N3(e,t){if(e==null)return{};var r=Yte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DR(n.key),n)}}function Jte(e,t,r){return t&&k3(e.prototype,t),r&&k3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qte(e,t,r){return t=lm(t),Zte(e,IR()?Reflect.construct(t,r||[],lm(e).constructor):t.apply(e,r))}function Zte(e,t){if(t&&(ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ere(e)}function ere(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IR=function(){return!!e})()}function lm(e){return lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lm(e)}function tre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s2(e,t)}function s2(e,t){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},s2(e,t)}function Ng(e,t,r){return t=DR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DR(e){var t=rre(e,"string");return ju(t)=="symbol"?t:t+""}function rre(e,t){if(ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ju=(function(e){function t(){return Xte(this,t),Qte(this,t,arguments)}return tre(t,e),Jte(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,u=i.cy;return Ar(l,u,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=qte(l,function(f){return f.coordinate||0}),d=Kte(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,u=n.axisLine,d=N3(n,Vte),f=l.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),p=Ar(s,i,f[0],o),m=Ar(s,i,f[1],o),x=Nl(Nl(Nl({},Lt(d,!1)),{},{fill:"none"},Lt(u,!1)),{},{x1:p.x,y1:p.y,x2:m.x,y2:m.y});return he.createElement("line",ch({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,u=s.tickFormatter,d=s.stroke,f=N3(s,Gte),p=this.getTickTextAnchor(),m=Lt(f,!1),x=Lt(o,!1),v=i.map(function(y,b){var N=n.getTickValueCoord(y),k=Nl(Nl(Nl(Nl({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(N.x,", ").concat(N.y,")")},m),{},{stroke:"none",fill:d},x),{},{index:b},N),{},{payload:y});return he.createElement(yr,ch({className:tr("recharts-polar-radius-axis-tick",vR(o)),key:"tick-".concat(y.coordinate)},Vl(n.props,y,b)),t.renderTickItem(o,k,u?u(y.value,b):y.value))});return he.createElement(yr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:he.createElement(yr,{className:tr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Qn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return he.isValidElement(n)?o=he.cloneElement(n,s):Vt(n)?o=n(s):o=he.createElement(Yl,ch({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(L.PureComponent);Ng(Ju,"displayName","PolarRadiusAxis");Ng(Ju,"axisType","radiusAxis");Ng(Ju,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Nu(e){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(e)}function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(this,arguments)}function S3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S3(Object(r),!0).forEach(function(n){kg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RR(n.key),n)}}function are(e,t,r){return t&&_3(e.prototype,t),r&&_3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sre(e,t,r){return t=cm(t),ire(e,MR()?Reflect.construct(t,r||[],cm(e).constructor):t.apply(e,r))}function ire(e,t){if(t&&(Nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ore(e)}function ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MR=function(){return!!e})()}function cm(e){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cm(e)}function lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i2(e,t)}function i2(e,t){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},i2(e,t)}function kg(e,t,r){return t=RR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RR(e){var t=cre(e,"string");return Nu(t)=="symbol"?t:t+""}function cre(e,t){if(Nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ure=Math.PI/180,E3=1e-5,Qu=(function(e){function t(){return nre(this,t),sre(this,t,arguments)}return lre(t,e),are(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,u=s.orientation,d=s.tickSize,f=d||8,p=Ar(i,o,l,n.coordinate),m=Ar(i,o,l+(u==="inner"?-1:1)*f,n.coordinate);return{x1:p.x,y1:p.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*ure),o;return i>E3?o=s==="outer"?"start":"end":i<-E3?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,u=n.axisLineType,d=kl(kl({},Lt(this.props,!1)),{},{fill:"none"},Lt(l,!1));if(u==="circle")return he.createElement(If,Ol({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var f=this.props.ticks,p=f.map(function(m){return Ar(s,i,o,m.coordinate)});return he.createElement(OR,Ol({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,u=s.tickFormatter,d=s.stroke,f=Lt(this.props,!1),p=Lt(o,!1),m=kl(kl({},f),{},{fill:"none"},Lt(l,!1)),x=i.map(function(v,y){var b=n.getTickLineCoord(v),N=n.getTickTextAnchor(v),k=kl(kl(kl({textAnchor:N},f),{},{stroke:"none",fill:d},p),{},{index:y,payload:v,x:b.x2,y:b.y2});return he.createElement(yr,Ol({className:tr("recharts-polar-angle-axis-tick",vR(o)),key:"tick-".concat(v.coordinate)},Vl(n.props,v,y)),l&&he.createElement("line",Ol({className:"recharts-polar-angle-axis-tick-line"},m,b)),o&&t.renderTickItem(o,k,u?u(v.value,y):v.value))});return he.createElement(yr,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:he.createElement(yr,{className:tr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return he.isValidElement(n)?o=he.cloneElement(n,s):Vt(n)?o=n(s):o=he.createElement(Yl,Ol({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(L.PureComponent);kg(Qu,"displayName","PolarAngleAxis");kg(Qu,"axisType","angleAxis");kg(Qu,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var a1,T3;function dre(){if(T3)return a1;T3=1;var e=H5(),t=e(Object.getPrototypeOf,Object);return a1=t,a1}var s1,C3;function hre(){if(C3)return s1;C3=1;var e=go(),t=dre(),r=xo(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,u=o.call(Object);function d(f){if(!r(f)||e(f)!=n)return!1;var p=t(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return s1=d,s1}var fre=hre();const pre=Mr(fre);var i1,A3;function mre(){if(A3)return i1;A3=1;var e=go(),t=xo(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return i1=n,i1}var gre=mre();const xre=Mr(gre);function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(this,arguments)}function yre(e,t){return jre(e)||wre(e,t)||bre(e,t)||vre()}function vre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bre(e,t){if(e){if(typeof e=="string")return O3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O3(e,t)}}function O3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function jre(e){if(Array.isArray(e))return e}function P3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function I3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P3(Object(r),!0).forEach(function(n){Nre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nre(e,t,r){return t=kre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kre(e){var t=Sre(e,"string");return af(t)=="symbol"?t:t+""}function Sre(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D3=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},_re={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ere=function(t){var r=I3(I3({},_re),t),n=L.useRef(),s=L.useState(-1),i=yre(s,2),o=i[0],l=i[1];L.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var u=r.x,d=r.y,f=r.upperWidth,p=r.lowerWidth,m=r.height,x=r.className,v=r.animationEasing,y=r.animationDuration,b=r.animationBegin,N=r.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||p!==+p||m!==+m||f===0&&p===0||m===0)return null;var k=tr("recharts-trapezoid",x);return N?he.createElement(fi,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:u,y:d},to:{upperWidth:f,lowerWidth:p,height:m,x:u,y:d},duration:y,animationEasing:v,isActive:N},function(w){var P=w.upperWidth,S=w.lowerWidth,_=w.height,E=w.x,C=w.y;return he.createElement(fi,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:v},he.createElement("path",um({},Lt(r,!0),{className:k,d:D3(E,C,P,S,_),ref:n})))}):he.createElement("g",null,he.createElement("path",um({},Lt(r,!0),{className:k,d:D3(u,d,f,p,m)})))},Tre=["option","shapeType","propTransformer","activeClassName","isActive"];function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function Cre(e,t){if(e==null)return{};var r=Are(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Are(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){Ore(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ore(e,t,r){return t=Pre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pre(e){var t=Ire(e,"string");return sf(t)=="symbol"?t:t+""}function Ire(e,t){if(sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dre(e,t){return dm(dm({},t),e)}function Mre(e,t){return e==="symbols"}function R3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return he.createElement(ZN,r);case"trapezoid":return he.createElement(Ere,r);case"sector":return he.createElement(NR,r);case"symbols":if(Mre(t))return he.createElement(yN,r);break;default:return null}}function Rre(e){return L.isValidElement(e)?e.props:e}function FR(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?Dre:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,u=Cre(e,Tre),d;if(L.isValidElement(t))d=L.cloneElement(t,dm(dm({},u),Rre(t)));else if(Vt(t))d=t(u);else if(pre(t)&&!xre(t)){var f=s(t,u);d=he.createElement(R3,{shapeType:r,elementProps:f})}else{var p=u;d=he.createElement(R3,{shapeType:r,elementProps:p})}return l?he.createElement(yr,{className:o},d):d}function Sg(e,t){return t!=null&&"trapezoids"in e.props}function _g(e,t){return t!=null&&"sectors"in e.props}function of(e,t){return t!=null&&"points"in e.props}function Fre(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function $re(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Lre(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function Bre(e,t){var r;return Sg(e,t)?r=Fre:_g(e,t)?r=$re:of(e,t)&&(r=Lre),r}function Ure(e,t){var r;return Sg(e,t)?r="trapezoids":_g(e,t)?r="sectors":of(e,t)&&(r="points"),r}function Hre(e,t){if(Sg(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(_g(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return of(e,t)?t.payload:{}}function qre(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=Ure(r,t),i=Hre(r,t),o=n.filter(function(u,d){var f=Gu(i,u),p=r.props[s].filter(function(v){var y=Bre(r,t);return y(v,t)}),m=r.props[s].indexOf(p[p.length-1]),x=d===m;return f&&x}),l=n.indexOf(o[o.length-1]);return l}var xp;function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tu.apply(this,arguments)}function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(n){Os(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LR(n.key),n)}}function Wre(e,t,r){return t&&$3(e.prototype,t),r&&$3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kre(e,t,r){return t=hm(t),Vre(e,$R()?Reflect.construct(t,r||[],hm(e).constructor):t.apply(e,r))}function Vre(e,t){if(t&&(ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gre(e)}function Gre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($R=function(){return!!e})()}function hm(e){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hm(e)}function Yre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o2(e,t)}function o2(e,t){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},o2(e,t)}function Os(e,t,r){return t=LR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LR(e){var t=Xre(e,"string");return ku(t)=="symbol"?t:t+""}function Xre(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Di=(function(e){function t(r){var n;return zre(this,t),n=Kre(this,t,[r]),Os(n,"pieRef",null),Os(n,"sectorRefs",[]),Os(n,"id",Wu("recharts-pie-")),Os(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Vt(s)&&s()}),Os(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Vt(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Yre(t,e),Wre(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,u=i.dataKey,d=i.valueKey,f=Lt(this.props,!1),p=Lt(o,!1),m=Lt(l,!1),x=o&&o.offsetRadius||20,v=n.map(function(y,b){var N=(y.startAngle+y.endAngle)/2,k=Ar(y.cx,y.cy,y.outerRadius+x,N),w=Vr(Vr(Vr(Vr({},f),y),{},{stroke:"none"},p),{},{index:b,textAnchor:t.getTextAnchor(k.x,y.cx)},k),P=Vr(Vr(Vr(Vr({},f),y),{},{fill:"none",stroke:y.fill},m),{},{index:b,points:[Ar(y.cx,y.cy,y.outerRadius,N),k]}),S=u;return nr(u)&&nr(d)?S="value":nr(u)&&(S=d),he.createElement(yr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},l&&t.renderLabelLineItem(l,P,"line"),t.renderLabelItem(o,w,jn(y,S)))});return he.createElement(yr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,u=i.inactiveShape;return n.map(function(d,f){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var p=s.isActiveIndex(f),m=u&&s.hasActiveIndex()?u:null,x=p?o:m,v=Vr(Vr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return he.createElement(yr,tu({ref:function(b){b&&!s.sectorRefs.includes(b)&&s.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Vl(s.props,d,f),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(f)}),he.createElement(FR,tu({option:x,isActive:p,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state,m=p.prevSectors,x=p.prevIsAnimationActive;return he.createElement(fi,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,b=[],N=i&&i[0],k=N.startAngle;return i.forEach(function(w,P){var S=m&&m[P],_=P>0?ms(w,"paddingAngle",0):0;if(S){var E=ua(S.endAngle-S.startAngle,w.endAngle-w.startAngle),C=Vr(Vr({},w),{},{startAngle:k+_,endAngle:k+E(y)+_});b.push(C),k=C.endAngle}else{var M=w.endAngle,D=w.startAngle,A=ua(0,M-D),O=A(y),F=Vr(Vr({},w),{},{startAngle:k+_,endAngle:k+O+_});b.push(F),k=F.endAngle}}),he.createElement(yr,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Gu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,u=s.label,d=s.cx,f=s.cy,p=s.innerRadius,m=s.outerRadius,x=s.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!lt(d)||!lt(f)||!lt(p)||!lt(m))return null;var y=tr("recharts-pie",l);return he.createElement(yr,{tabIndex:this.props.rootTabIndex,className:y,ref:function(N){n.pieRef=N}},this.renderSectors(),u&&this.renderLabels(o),Qn.renderCallByParent(this.props,null,!1),(!x||v)&&Ei.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(he.isValidElement(n))return he.cloneElement(n,s);if(Vt(n))return n(s);var o=tr("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return he.createElement(rm,tu({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(he.isValidElement(n))return he.cloneElement(n,s);var o=i;if(Vt(n)&&(o=n(s),he.isValidElement(o)))return o;var l=tr("recharts-pie-label-text",typeof n!="boolean"&&!Vt(n)?n.className:"");return he.createElement(Yl,tu({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(L.PureComponent);xp=Di;Os(Di,"displayName","Pie");Os(Di,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!nl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Os(Di,"parseDeltaAngle",function(e,t){var r=Ra(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Os(Di,"getRealPieData",function(e){var t=e.data,r=e.children,n=Lt(e,!1),s=gs(r,Gl);return t&&t.length?t.map(function(i,o){return Vr(Vr(Vr({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Vr(Vr({},n),i.props)}):[]});Os(Di,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=xR(s,i),l=n+Fa(e.cx,s,s/2),u=r+Fa(e.cy,i,i/2),d=Fa(e.innerRadius,o,0),f=Fa(e.outerRadius,o,o*.8),p=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}});Os(Di,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Vr(Vr({},t.type.defaultProps),t.props):t.props,s=xp.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,u=n.paddingAngle,d=n.dataKey,f=n.nameKey,p=n.valueKey,m=n.tooltipType,x=Math.abs(n.minAngle),v=xp.parseCoordinateOfPie(n,r),y=xp.parseDeltaAngle(o,l),b=Math.abs(y),N=d;nr(d)&&nr(p)?(ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):nr(d)&&(ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=p);var k=s.filter(function(C){return jn(C,N,0)!==0}).length,w=(b>=360?k:k-1)*u,P=b-k*x-w,S=s.reduce(function(C,M){var D=jn(M,N,0);return C+(lt(D)?D:0)},0),_;if(S>0){var E;_=s.map(function(C,M){var D=jn(C,N,0),A=jn(C,f,M),O=(lt(D)?D:0)/S,F;M?F=E.endAngle+Ra(y)*u*(D!==0?1:0):F=o;var W=F+Ra(y)*((D!==0?x:0)+O*P),Y=(F+W)/2,Z=(v.innerRadius+v.outerRadius)/2,re=[{name:A,value:D,payload:C,dataKey:N,type:m}],ne=Ar(v.cx,v.cy,Z,Y);return E=Vr(Vr(Vr({percent:O,cornerRadius:i,name:A,tooltipPayload:re,midAngle:Y,middleRadius:Z,tooltipPosition:ne},C),v),{},{value:jn(C,N),startAngle:F,endAngle:W,payload:C,paddingAngle:Ra(y)*u}),E})}return Vr(Vr({},v),{},{sectors:_,data:s})});var o1,L3;function Jre(){if(L3)return o1;L3=1;function e(t){return t&&t.length?t[0]:void 0}return o1=e,o1}var l1,B3;function Qre(){return B3||(B3=1,l1=Jre()),l1}var Zre=Qre();const ene=Mr(Zre);var tne=["key"];function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function rne(e,t){if(e==null)return{};var r=nne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(this,arguments)}function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){Qi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ane(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UR(n.key),n)}}function sne(e,t,r){return t&&H3(e.prototype,t),r&&H3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ine(e,t,r){return t=pm(t),one(e,BR()?Reflect.construct(t,r||[],pm(e).constructor):t.apply(e,r))}function one(e,t){if(t&&(Su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lne(e)}function lne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BR=function(){return!!e})()}function pm(e){return pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pm(e)}function cne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l2(e,t)}function l2(e,t){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},l2(e,t)}function Qi(e,t,r){return t=UR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UR(e){var t=une(e,"string");return Su(t)=="symbol"?t:t+""}function une(e,t){if(Su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ul=(function(e){function t(){var r;ane(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=ine(this,t,[].concat(s)),Qi(r,"state",{isAnimationFinished:!1}),Qi(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Vt(o)&&o()}),Qi(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Vt(o)&&o()}),Qi(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),Qi(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return cne(t,e),sne(t,[{key:"renderDots",value:function(n){var s=this.props,i=s.dot,o=s.dataKey,l=Lt(this.props,!1),u=Lt(i,!0),d=n.map(function(f,p){var m=Ia(Ia(Ia({key:"dot-".concat(p),r:3},l),u),{},{dataKey:o,cx:f.x,cy:f.y,index:p,payload:f});return t.renderDotItem(i,m)});return he.createElement(yr,{className:"recharts-radar-dots"},d)}},{key:"renderPolygonStatically",value:function(n){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,u=s.baseLinePoints,d=s.connectNulls,f;return he.isValidElement(i)?f=he.cloneElement(i,Ia(Ia({},this.props),{},{points:n})):Vt(i)?f=i(Ia(Ia({},this.props),{},{points:n})):f=he.createElement(OR,fm({},Lt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?u:null,connectNulls:d})),he.createElement(yr,{className:"recharts-radar-polygon"},f,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state.prevPoints;return he.createElement(fi,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var x=m.t,v=p&&p.length/i.length,y=i.map(function(b,N){var k=p&&p[Math.floor(N*v)];if(k){var w=ua(k.x,b.x),P=ua(k.y,b.y);return Ia(Ia({},b),{},{x:w(x),y:P(x)})}var S=ua(b.cx,b.x),_=ua(b.cy,b.y);return Ia(Ia({},b),{},{x:S(x),y:_(x)})});return n.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!Gu(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(s||!o||!o.length)return null;var u=this.state.isAnimationFinished,d=tr("recharts-radar",i);return he.createElement(yr,{className:d},this.renderPolygon(),(!l||u)&&Ei.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,s){var i;if(he.isValidElement(n))i=he.cloneElement(n,s);else if(Vt(n))i=n(s);else{var o=s.key,l=rne(s,tne);i=he.createElement(If,fm({},l,{key:o,className:tr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(L.PureComponent);Qi(Ul,"displayName","Radar");Qi(Ul,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!nl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Qi(Ul,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,u=!1,d=[],f=r.type!=="number"?i??0:0;n.forEach(function(m,x){var v=jn(m,r.dataKey,x),y=jn(m,s),b=r.scale(v)+f,N=Array.isArray(y)?wR(y):y,k=nr(N)?void 0:t.scale(N);Array.isArray(y)&&y.length>=2&&(u=!0),d.push(Ia(Ia({},Ar(o,l,k,b)),{},{name:v,value:y,cx:o,cy:l,radius:k,angle:b,payload:m}))});var p=[];return u&&d.forEach(function(m){if(Array.isArray(m.value)){var x=ene(m.value),v=nr(x)?void 0:t.scale(x);p.push(Ia(Ia({},m),{},{radius:v},Ar(o,l,v,m.angle)))}else p.push(m)}),{points:d,isRange:u,baseLinePoints:p}});var c1,q3;function dne(){if(q3)return c1;q3=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,u=t(e((s-n)/(i||1)),0),d=Array(u);u--;)d[o?u:++l]=n,n+=i;return d}return c1=r,c1}var u1,z3;function HR(){if(z3)return u1;z3=1;var e=aM(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return u1=n,u1}var d1,W3;function hne(){if(W3)return d1;W3=1;var e=dne(),t=dg(),r=HR();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return d1=n,d1}var h1,K3;function fne(){if(K3)return h1;K3=1;var e=hne(),t=e();return h1=t,h1}var pne=fne();const mm=Mr(pne);function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function G3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){qR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qR(e,t,r){return t=mne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mne(e){var t=gne(e,"string");return lf(t)=="symbol"?t:t+""}function gne(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xne=["Webkit","Moz","O","ms"],yne=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=xne.reduce(function(i,o){return G3(G3({},i),{},qR({},o+n,r))},{});return s[t]=r,s};function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gm.apply(this,arguments)}function Y3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y3(Object(r),!0).forEach(function(n){is(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WR(n.key),n)}}function bne(e,t,r){return t&&X3(e.prototype,t),r&&X3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wne(e,t,r){return t=xm(t),jne(e,zR()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function jne(e,t){if(t&&(_u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nne(e)}function Nne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zR=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function kne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c2(e,t)}function c2(e,t){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},c2(e,t)}function is(e,t,r){return t=WR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e){var t=Sne(e,"string");return _u(t)=="symbol"?t:t+""}function Sne(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _ne=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var u=r.length,d=sh().domain(mm(0,u)).range([i,i+o-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:f}},J3=function(t){return t.changedTouches&&!!t.changedTouches.length},Eu=(function(e){function t(r){var n;return vne(this,t),n=wne(this,t,[r]),is(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),is(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),is(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),is(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),is(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),is(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),is(n,"handleSlideDragStart",function(s){var i=J3(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return kne(t,e),bne(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,u=l.gap,d=l.data,f=d.length-1,p=Math.min(s,i),m=Math.max(s,i),x=t.getIndexInRange(o,p),v=t.getIndexInRange(o,m);return{startIndex:x-x%u,endIndex:v===f?f:v-v%u}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,u=jn(i[n],l,n);return Vt(o)?o(u,n):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,u=this.props,d=u.x,f=u.width,p=u.travellerWidth,m=u.startIndex,x=u.endIndex,v=u.onChange,y=n.pageX-i;y>0?y=Math.min(y,d+f-p-l,d+f-p-o):y<0&&(y=Math.max(y,d-o,d-l));var b=this.getIndex({startX:o+y,endX:l+y});(b.startIndex!==m||b.endIndex!==x)&&v&&v(b),this.setState({startX:o+y,endX:l+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=J3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,u=s.startX,d=this.state[o],f=this.props,p=f.x,m=f.width,x=f.travellerWidth,v=f.onChange,y=f.gap,b=f.data,N={startX:this.state.startX,endX:this.state.endX},k=n.pageX-i;k>0?k=Math.min(k,p+m-x-d):k<0&&(k=Math.max(k,p-d)),N[o]=d+k;var w=this.getIndex(N),P=w.startIndex,S=w.endIndex,_=function(){var C=b.length-1;return o==="startX"&&(l>u?P%y===0:S%y===0)||l<u&&S===C||o==="endX"&&(l>u?S%y===0:P%y===0)||l>u&&S===C};this.setState(is(is({},o,d+k),"brushMoveStartX",n.pageX),function(){v&&_()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,u=o.startX,d=o.endX,f=this.state[s],p=l.indexOf(f);if(p!==-1){var m=p+n;if(!(m===-1||m>=l.length)){var x=l[m];s==="startX"&&x>=d||s==="endX"&&x<=u||this.setState(is({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.fill,d=n.stroke;return he.createElement("rect",{stroke:d,fill:u,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.data,d=n.children,f=n.padding,p=L.Children.only(d);return p?he.cloneElement(p,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,u=this.props,d=u.y,f=u.travellerWidth,p=u.height,m=u.traveller,x=u.ariaLabel,v=u.data,y=u.startIndex,b=u.endIndex,N=Math.max(n,this.props.x),k=f1(f1({},Lt(this.props,!1)),{},{x:N,y:d,width:f,height:p}),w=x||"Min value: ".concat((i=v[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[b])===null||o===void 0?void 0:o.name);return he.createElement(yr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,k))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,u=i.stroke,d=i.travellerWidth,f=Math.min(n,s)+d,p=Math.max(Math.abs(s-n)-d,0);return he.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:o,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,u=n.travellerWidth,d=n.stroke,f=this.state,p=f.startX,m=f.endX,x=5,v={pointerEvents:"none",fill:d};return he.createElement(yr,{className:"recharts-brush-texts"},he.createElement(Yl,gm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,m)-x,y:o+l/2},v),this.getTextOfTick(s)),he.createElement(Yl,gm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,m)+u+x,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,u=n.y,d=n.width,f=n.height,p=n.alwaysShowText,m=this.state,x=m.startX,v=m.endX,y=m.isTextActive,b=m.isSlideMoving,N=m.isTravellerMoving,k=m.isTravellerFocused;if(!s||!s.length||!lt(l)||!lt(u)||!lt(d)||!lt(f)||d<=0||f<=0)return null;var w=tr("recharts-brush",i),P=he.Children.count(o)===1,S=yne("userSelect","none");return he.createElement(yr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(x,v),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(v,"endX"),(y||b||N||k||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,u=n.stroke,d=Math.floor(i+l/2)-1;return he.createElement(he.Fragment,null,he.createElement("rect",{x:s,y:i,width:o,height:l,fill:u,stroke:"none"}),he.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),he.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return he.isValidElement(n)?i=he.cloneElement(n,s):Vt(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,u=n.travellerWidth,d=n.updateId,f=n.startIndex,p=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return f1({prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?_ne({data:i,width:o,x:l,travellerWidth:u,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||u!==s.prevTravellerWidth)){s.scale.range([l,l+o-u]);var m=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var u=Math.floor((o+l)/2);n[u]>s?l=u:o=u}return s>=n[l]?l:o}}])})(L.PureComponent);is(Eu,"displayName","Brush");is(Eu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var p1,Q3;function Ene(){if(Q3)return p1;Q3=1;var e=SN();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return p1=t,p1}var m1,Z3;function Tne(){if(Z3)return m1;Z3=1;var e=M5(),t=Ii(),r=Ene(),n=Qa(),s=dg();function i(o,l,u){var d=n(o)?e:r;return u&&s(o,l,u)&&(l=void 0),d(o,t(l,3))}return m1=i,m1}var Cne=Tne();const Ane=Mr(Cne);var Ti=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},g1,eP;function One(){if(eP)return g1;eP=1;var e=Z5();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return g1=t,g1}var x1,tP;function Pne(){if(tP)return x1;tP=1;var e=One(),t=J5(),r=Ii();function n(s,i){var o={};return i=r(i,3),t(s,function(l,u,d){e(o,u,i(l,u,d))}),o}return x1=n,x1}var Ine=Pne();const Dne=Mr(Ine);var y1,rP;function Mne(){if(rP)return y1;rP=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return y1=e,y1}var v1,nP;function Rne(){if(nP)return v1;nP=1;var e=SN();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return v1=t,v1}var b1,aP;function Fne(){if(aP)return b1;aP=1;var e=Mne(),t=Rne(),r=Ii(),n=Qa(),s=dg();function i(o,l,u){var d=n(o)?e:t;return u&&s(o,l,u)&&(l=void 0),d(o,r(l,3))}return b1=i,b1}var $ne=Fne();const KR=Mr($ne);var Lne=["x","y"];function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u2.apply(this,arguments)}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){Bne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bne(e,t,r){return t=Une(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Une(e){var t=Hne(e,"string");return cf(t)=="symbol"?t:t+""}function Hne(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qne(e,t){if(e==null)return{};var r=zne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Wne(e,t){var r=e.x,n=e.y,s=qne(e,Lne),i="".concat(r),o=parseInt(i,10),l="".concat(n),u=parseInt(l,10),d="".concat(t.height||s.height),f=parseInt(d,10),p="".concat(t.width||s.width),m=parseInt(p,10);return zd(zd(zd(zd(zd({},t),s),o?{x:o}:{}),u?{y:u}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function iP(e){return he.createElement(FR,u2({shapeType:"rectangle",propTransformer:Wne,activeClassName:"recharts-active-bar"},e))}var Kne=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=lt(n)||zq(n);return i?t(n,s):(i||Jl(),r)}},Vne=["value","background"],VR;function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function Gne(e,t){if(e==null)return{};var r=Yne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ym(){return ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ym.apply(this,arguments)}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){zo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YR(n.key),n)}}function Jne(e,t,r){return t&&lP(e.prototype,t),r&&lP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qne(e,t,r){return t=vm(t),Zne(e,GR()?Reflect.construct(t,r||[],vm(e).constructor):t.apply(e,r))}function Zne(e,t){if(t&&(Tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eae(e)}function eae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GR=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function tae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d2(e,t)}function d2(e,t){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},d2(e,t)}function zo(e,t,r){return t=YR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YR(e){var t=rae(e,"string");return Tu(t)=="symbol"?t:t+""}function rae(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gr=(function(e){function t(){var r;Xne(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Qne(this,t,[].concat(s)),zo(r,"state",{isAnimationFinished:!1}),zo(r,"id",Wu("recharts-bar-")),zo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),zo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return tae(t,e),Jne(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,u=i.activeIndex,d=i.activeBar,f=Lt(this.props,!1);return n&&n.map(function(p,m){var x=m===u,v=x?d:o,y=Sn(Sn(Sn({},f),p),{},{isActive:x,option:v,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return he.createElement(yr,ym({className:"recharts-bar-rectangle"},Vl(s.props,p,m),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(m)}),he.createElement(iP,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,u=s.animationBegin,d=s.animationDuration,f=s.animationEasing,p=s.animationId,m=this.state.prevData;return he.createElement(fi,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var v=x.t,y=i.map(function(b,N){var k=m&&m[N];if(k){var w=ua(k.x,b.x),P=ua(k.y,b.y),S=ua(k.width,b.width),_=ua(k.height,b.height);return Sn(Sn({},b),{},{x:w(v),y:P(v),width:S(v),height:_(v)})}if(o==="horizontal"){var E=ua(0,b.height),C=E(v);return Sn(Sn({},b),{},{y:b.y+b.height-C,height:C})}var M=ua(0,b.width),D=M(v);return Sn(Sn({},b),{},{width:D})});return he.createElement(yr,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Gu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,u=Lt(this.props.background,!1);return i.map(function(d,f){d.value;var p=d.background,m=Gne(d,Vne);if(!p)return null;var x=Sn(Sn(Sn(Sn(Sn({},m),{},{fill:"#eee"},p),u),Vl(n.props,d,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return he.createElement(iP,ym({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=gs(f,Pf);if(!p)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,x=function(b,N){var k=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:k,errorVal:jn(b,N)}},v={clipPath:n?"url(#clipPath-".concat(s,")"):null};return he.createElement(yr,v,p.map(function(y){return he.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,offset:m,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,u=n.yAxis,d=n.left,f=n.top,p=n.width,m=n.height,x=n.isAnimationActive,v=n.background,y=n.id;if(s||!i||!i.length)return null;var b=this.state.isAnimationFinished,N=tr("recharts-bar",o),k=l&&l.allowDataOverflow,w=u&&u.allowDataOverflow,P=k||w,S=nr(y)?this.id:y;return he.createElement(yr,{className:N},k||w?he.createElement("defs",null,he.createElement("clipPath",{id:"clipPath-".concat(S)},he.createElement("rect",{x:k?d:d-p/2,y:w?f:f-m/2,width:k?p:p*2,height:w?m:m*2}))):null,he.createElement(yr,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,S),(!x||b)&&Ei.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(L.PureComponent);VR=gr;zo(gr,"displayName","Bar");zo(gr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zo(gr,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,u=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,p=e.displayedData,m=e.offset,x=sQ(n,r);if(!x)return null;var v=t.layout,y=r.type.defaultProps,b=y!==void 0?Sn(Sn({},y),r.props):r.props,N=b.dataKey,k=b.children,w=b.minPointSize,P=v==="horizontal"?o:i,S=d?P.scale.domain():null,_=hQ({numericAxis:P}),E=gs(k,Gl),C=p.map(function(M,D){var A,O,F,W,Y,Z;d?A=iQ(d[f+D],S):(A=jn(M,N),Array.isArray(A)||(A=[_,A]));var re=Kne(w,VR.defaultProps.minPointSize)(A[1],D);if(v==="horizontal"){var ne,U=[o.scale(A[0]),o.scale(A[1])],oe=U[0],K=U[1];O=OO({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:M,index:D}),F=(ne=K??oe)!==null&&ne!==void 0?ne:void 0,W=x.size;var R=oe-K;if(Y=Number.isNaN(R)?0:R,Z={x:O,y:o.y,width:W,height:o.height},Math.abs(re)>0&&Math.abs(Y)<Math.abs(re)){var Q=Ra(Y||re)*(Math.abs(re)-Math.abs(Y));F-=Q,Y+=Q}}else{var ee=[i.scale(A[0]),i.scale(A[1])],se=ee[0],xe=ee[1];if(O=se,F=OO({axis:o,ticks:u,bandSize:s,offset:x.offset,entry:M,index:D}),W=xe-se,Y=x.size,Z={x:i.x,y:F,width:i.width,height:Y},Math.abs(re)>0&&Math.abs(W)<Math.abs(re)){var ge=Ra(W||re)*(Math.abs(re)-Math.abs(W));W+=ge}}return Sn(Sn(Sn({},M),{},{x:O,y:F,width:W,height:Y,value:d?A:A[1],payload:M,background:Z},E&&E[D]&&E[D].props),{},{tooltipPayload:[mR(r,M)],tooltipPosition:{x:O+W/2,y:F+Y/2}})});return Sn({data:C,layout:v},m)});function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}function nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XR(n.key),n)}}function aae(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){Eg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eg(e,t,r){return t=XR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XR(e){var t=sae(e,"string");return uf(t)=="symbol"?t:t+""}function sae(e,t){if(uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JR=function(t,r,n,s,i){var o=t.width,l=t.height,u=t.layout,d=t.children,f=Object.keys(r),p={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!os(d,gr);return f.reduce(function(x,v){var y=r[v],b=y.orientation,N=y.domain,k=y.padding,w=k===void 0?{}:k,P=y.mirror,S=y.reversed,_="".concat(b).concat(P?"Mirror":""),E,C,M,D,A;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=N[1]-N[0],F=1/0,W=y.categoricalDomain.sort(Vq);if(W.forEach(function(ee,se){se>0&&(F=Math.min((ee||0)-(W[se-1]||0),F))}),Number.isFinite(F)){var Y=F/O,Z=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=Y*Z/2),y.padding==="no-gap"){var re=Fa(t.barCategoryGap,Y*Z),ne=Y*Z/2;E=ne-re-(ne-re)/Z*re}}}s==="xAxis"?C=[n.left+(w.left||0)+(E||0),n.left+n.width-(w.right||0)-(E||0)]:s==="yAxis"?C=u==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(E||0),n.top+n.height-(w.bottom||0)-(E||0)]:C=y.range,S&&(C=[C[1],C[0]]);var U=dR(y,i,m),oe=U.scale,K=U.realScaleType;oe.domain(N).range(C),hR(oe);var R=fR(oe,ti(ti({},y),{},{realScaleType:K}));s==="xAxis"?(A=b==="top"&&!P||b==="bottom"&&P,M=n.left,D=p[_]-A*y.height):s==="yAxis"&&(A=b==="left"&&!P||b==="right"&&P,M=p[_]-A*y.width,D=n.top);var Q=ti(ti(ti({},y),R),{},{realScaleType:K,x:M,y:D,scale:oe,width:s==="xAxis"?n.width:y.width,height:s==="yAxis"?n.height:y.height});return Q.bandSize=Zp(Q,R),!y.hide&&s==="xAxis"?p[_]+=(A?-1:1)*Q.height:y.hide||(p[_]+=(A?-1:1)*Q.width),ti(ti({},x),{},Eg({},v,Q))},{})},QR=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},iae=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return QR({x:r,y:n},{x:s,y:i})},ZR=(function(){function e(t){nae(this,e),this.scale=t}return aae(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();Eg(ZR,"EPS",1e-4);var ek=function(t){var r=Object.keys(t).reduce(function(n,s){return ti(ti({},n),{},Eg({},s,ZR.create(t[s])))},{});return ti(ti({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Dne(s,function(u,d){return r[d].apply(u,{bandAware:o,position:l})})},isInRange:function(s){return KR(s,function(i,o){return r[o].isInRange(i)})}})};function oae(e){return(e%180+180)%180}var lae=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=oae(s),o=i*Math.PI/180,l=Math.atan(n/r),u=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},w1,dP;function cae(){if(dP)return w1;dP=1;var e=Ii(),t=Ef(),r=cg();function n(s){return function(i,o,l){var u=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(p){return d(u[p],p,u)}}var f=s(i,o,l);return f>-1?u[d?i[f]:f]:void 0}}return w1=n,w1}var j1,hP;function uae(){if(hP)return j1;hP=1;var e=HR();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return j1=t,j1}var N1,fP;function dae(){if(fP)return N1;fP=1;var e=K5(),t=Ii(),r=uae(),n=Math.max;function s(i,o,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:r(l);return d<0&&(d=n(u+d,0)),e(i,t(o,3),d)}return N1=s,N1}var k1,pP;function hae(){if(pP)return k1;pP=1;var e=cae(),t=dae(),r=e(t);return k1=r,k1}var fae=hae();const pae=Mr(fae);var mae=l5();const gae=Mr(mae);var xae=gae(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),tk=L.createContext(void 0),rk=L.createContext(void 0),eF=L.createContext(void 0),tF=L.createContext({}),rF=L.createContext(void 0),nF=L.createContext(0),aF=L.createContext(0),mP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,u=t.width,d=t.height,f=xae(i);return he.createElement(tk.Provider,{value:n},he.createElement(rk.Provider,{value:s},he.createElement(tF.Provider,{value:i},he.createElement(eF.Provider,{value:f},he.createElement(rF.Provider,{value:o},he.createElement(nF.Provider,{value:d},he.createElement(aF.Provider,{value:u},l)))))))},yae=function(){return L.useContext(rF)},sF=function(t){var r=L.useContext(tk);r==null&&Jl();var n=r[t];return n==null&&Jl(),n},vae=function(){var t=L.useContext(tk);return Uo(t)},bae=function(){var t=L.useContext(rk),r=pae(t,function(n){return KR(n.domain,Number.isFinite)});return r||Uo(t)},iF=function(t){var r=L.useContext(rk);r==null&&Jl();var n=r[t];return n==null&&Jl(),n},wae=function(){var t=L.useContext(eF);return t},jae=function(){return L.useContext(tF)},nk=function(){return L.useContext(aF)},ak=function(){return L.useContext(nF)};function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function Nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lF(n.key),n)}}function Sae(e,t,r){return t&&kae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ae(e,t,r){return t=bm(t),Eae(e,oF()?Reflect.construct(t,r||[],bm(e).constructor):t.apply(e,r))}function Eae(e,t){if(t&&(Cu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tae(e)}function Tae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bm(e)}function Cae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h2(e,t)}function h2(e,t){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},h2(e,t)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){sk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sk(e,t,r){return t=lF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lF(e){var t=Aae(e,"string");return Cu(t)=="symbol"?t:t+""}function Aae(e,t){if(Cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Oae(e,t){return Mae(e)||Dae(e,t)||Iae(e,t)||Pae()}function Pae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iae(e,t){if(e){if(typeof e=="string")return yP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yP(e,t)}}function yP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Mae(e){if(Array.isArray(e))return e}function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f2.apply(this,arguments)}var Rae=function(t,r){var n;return he.isValidElement(t)?n=he.cloneElement(t,r):Vt(t)?n=t(r):n=he.createElement("line",f2({},r,{className:"recharts-reference-line-line"})),n},Fae=function(t,r,n,s,i,o,l,u,d){var f=i.x,p=i.y,m=i.width,x=i.height;if(n){var v=d.y,y=t.y.apply(v,{position:o});if(Ti(d,"discard")&&!t.y.isInRange(y))return null;var b=[{x:f+m,y},{x:f,y}];return u==="left"?b.reverse():b}if(r){var N=d.x,k=t.x.apply(N,{position:o});if(Ti(d,"discard")&&!t.x.isInRange(k))return null;var w=[{x:k,y:p+x},{x:k,y:p}];return l==="top"?w.reverse():w}if(s){var P=d.segment,S=P.map(function(_){return t.apply(_,{position:o})});return Ti(d,"discard")&&Ane(S,function(_){return!t.isInRange(_)})?null:S}return null};function $ae(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,u=e.alwaysShow,d=yae(),f=sF(s),p=iF(i),m=wae();if(!d||!m)return null;ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=ek({x:f.scale,y:p.scale}),v=Hn(t),y=Hn(r),b=n&&n.length===2,N=Fae(x,v,y,b,m,e.position,f.orientation,p.orientation,e);if(!N)return null;var k=Oae(N,2),w=k[0],P=w.x,S=w.y,_=k[1],E=_.x,C=_.y,M=Ti(e,"hidden")?"url(#".concat(d,")"):void 0,D=xP(xP({clipPath:M},Lt(e,!0)),{},{x1:P,y1:S,x2:E,y2:C});return he.createElement(yr,{className:tr("recharts-reference-line",l)},Rae(o,D),Qn.renderCallByParent(e,iae({x1:P,y1:S,x2:E,y2:C})))}var ik=(function(e){function t(){return Nae(this,t),_ae(this,t,arguments)}return Cae(t,e),Sae(t,[{key:"render",value:function(){return he.createElement($ae,this.props)}}])})(he.Component);sk(ik,"displayName","ReferenceLine");sk(ik,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p2.apply(this,arguments)}function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){Tg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uF(n.key),n)}}function Uae(e,t,r){return t&&Bae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hae(e,t,r){return t=wm(t),qae(e,cF()?Reflect.construct(t,r||[],wm(e).constructor):t.apply(e,r))}function qae(e,t){if(t&&(Au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zae(e)}function zae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wm(e)}function Wae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m2(e,t)}function m2(e,t){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},m2(e,t)}function Tg(e,t,r){return t=uF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uF(e){var t=Kae(e,"string");return Au(t)=="symbol"?t:t+""}function Kae(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vae=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=ek({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Ti(t,"discard")&&!o.isInRange(l)?null:l},Cg=(function(e){function t(){return Lae(this,t),Hae(this,t,arguments)}return Wae(t,e),Uae(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,u=n.clipPathId,d=Hn(s),f=Hn(i);if(ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=Vae(this.props);if(!p)return null;var m=p.x,x=p.y,v=this.props,y=v.shape,b=v.className,N=Ti(this.props,"hidden")?"url(#".concat(u,")"):void 0,k=bP(bP({clipPath:N},Lt(this.props,!0)),{},{cx:m,cy:x});return he.createElement(yr,{className:tr("recharts-reference-dot",b)},t.renderDot(y,k),Qn.renderCallByParent(this.props,{x:m-o,y:x-o,width:2*o,height:2*o}))}}])})(he.Component);Tg(Cg,"displayName","ReferenceDot");Tg(Cg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Tg(Cg,"renderDot",function(e,t){var r;return he.isValidElement(e)?r=he.cloneElement(e,t):Vt(e)?r=e(t):r=he.createElement(If,p2({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function g2(){return g2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g2.apply(this,arguments)}function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(n){Ag(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hF(n.key),n)}}function Xae(e,t,r){return t&&Yae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jae(e,t,r){return t=jm(t),Qae(e,dF()?Reflect.construct(t,r||[],jm(e).constructor):t.apply(e,r))}function Qae(e,t){if(t&&(Ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zae(e)}function Zae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dF=function(){return!!e})()}function jm(e){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jm(e)}function ese(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x2(e,t)}function x2(e,t){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x2(e,t)}function Ag(e,t,r){return t=hF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hF(e){var t=tse(e,"string");return Ou(t)=="symbol"?t:t+""}function tse(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rse=function(t,r,n,s,i){var o=i.x1,l=i.x2,u=i.y1,d=i.y2,f=i.xAxis,p=i.yAxis;if(!f||!p)return null;var m=ek({x:f.scale,y:p.scale}),x={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(u,{position:"start"}):m.y.rangeMin},v={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Ti(i,"discard")&&(!m.isInRange(x)||!m.isInRange(v))?null:QR(x,v)},Og=(function(e){function t(){return Gae(this,t),Jae(this,t,arguments)}return ese(t,e),Xae(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,u=n.className,d=n.alwaysShow,f=n.clipPathId;ci(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Hn(s),m=Hn(i),x=Hn(o),v=Hn(l),y=this.props.shape;if(!p&&!m&&!x&&!v&&!y)return null;var b=rse(p,m,x,v,this.props);if(!b&&!y)return null;var N=Ti(this.props,"hidden")?"url(#".concat(f,")"):void 0;return he.createElement(yr,{className:tr("recharts-reference-area",u)},t.renderRect(y,jP(jP({clipPath:N},Lt(this.props,!0)),b)),Qn.renderCallByParent(this.props,b))}}])})(he.Component);Ag(Og,"displayName","ReferenceArea");Ag(Og,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ag(Og,"renderRect",function(e,t){var r;return he.isValidElement(e)?r=he.cloneElement(e,t):Vt(e)?r=e(t):r=he.createElement(ZN,g2({},t,{className:"recharts-reference-area-rect"})),r});function fF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function nse(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return lae(n,r)}function ase(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Nm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function sse(e,t){return fF(e,t+1)}function ise(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,u=0,d=1,f=o,p=function(){var v=n?.[u];if(v===void 0)return{v:fF(n,d)};var y=u,b,N=function(){return b===void 0&&(b=r(v,y)),b},k=v.coordinate,w=u===0||Nm(e,k,N,f,l);w||(u=0,f=o,d+=1),w&&(f=k+e*(N()/2+s),u+=d)},m;d<=i.length;)if(m=p(),m)return m.v;return[]}function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){ose(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ose(e,t,r){return t=lse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lse(e){var t=cse(e,"string");return df(t)=="symbol"?t:t+""}function cse(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function use(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,u=t.end,d=function(m){var x=i[m],v,y=function(){return v===void 0&&(v=r(x,m)),v};if(m===o-1){var b=e*(x.coordinate+e*y()/2-u);i[m]=x=va(va({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[m]=x=va(va({},x),{},{tickCoord:x.coordinate});var N=Nm(e,x.tickCoord,y,l,u);N&&(u=x.tickCoord-e*(y()/2+s),i[m]=va(va({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function dse(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,u=t.start,d=t.end;if(i){var f=n[l-1],p=r(f,l-1),m=e*(f.coordinate+e*p/2-d);o[l-1]=f=va(va({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var x=Nm(e,f.tickCoord,function(){return p},u,d);x&&(d=f.tickCoord-e*(p/2+s),o[l-1]=va(va({},f),{},{isShow:!0}))}for(var v=i?l-1:l,y=function(k){var w=o[k],P,S=function(){return P===void 0&&(P=r(w,k)),P};if(k===0){var _=e*(w.coordinate-e*S()/2-u);o[k]=w=va(va({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[k]=w=va(va({},w),{},{tickCoord:w.coordinate});var E=Nm(e,w.tickCoord,S,u,d);E&&(u=w.tickCoord+e*(S()/2+s),o[k]=va(va({},w),{},{isShow:!0}))},b=0;b<v;b++)y(b);return o}function ok(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,u=e.interval,d=e.tickFormatter,f=e.unit,p=e.angle;if(!s||!s.length||!n)return[];if(lt(u)||nl.isSsr)return sse(s,typeof u=="number"&&lt(u)?u:0);var m=[],x=l==="top"||l==="bottom"?"width":"height",v=f&&x==="width"?ah(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(w,P){var S=Vt(d)?d(w.value,P):w.value;return x==="width"?nse(ah(S,{fontSize:t,letterSpacing:r}),v,p):ah(S,{fontSize:t,letterSpacing:r})[x]},b=s.length>=2?Ra(s[1].coordinate-s[0].coordinate):1,N=ase(i,b,x);return u==="equidistantPreserveStart"?ise(b,N,y,s,o):(u==="preserveStart"||u==="preserveStartEnd"?m=dse(b,N,y,s,o,u==="preserveStartEnd"):m=use(b,N,y,s,o),m.filter(function(k){return k.isShow}))}var hse=["viewBox"],fse=["viewBox"],pse=["ticks"];function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ru.apply(this,arguments)}function kP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(r),!0).forEach(function(n){lk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S1(e,t){if(e==null)return{};var r=mse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mF(n.key),n)}}function xse(e,t,r){return t&&SP(e.prototype,t),r&&SP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yse(e,t,r){return t=km(t),vse(e,pF()?Reflect.construct(t,r||[],km(e).constructor):t.apply(e,r))}function vse(e,t){if(t&&(Pu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bse(e)}function bse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pF=function(){return!!e})()}function km(e){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},km(e)}function wse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y2(e,t)}function y2(e,t){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},y2(e,t)}function lk(e,t,r){return t=mF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mF(e){var t=jse(e,"string");return Pu(t)=="symbol"?t:t+""}function jse(e,t){if(Pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zu=(function(e){function t(r){var n;return gse(this,t),n=yse(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return wse(t,e),xse(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=S1(n,hse),l=this.props,u=l.viewBox,d=S1(l,fse);return!iu(i,u)||!iu(o,d)||!iu(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,u=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,x,v,y,b,N,k,w=p?-1:1,P=n.tickSize||f,S=lt(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":x=v=n.coordinate,b=o+ +!p*u,y=b-w*P,k=y-w*m,N=S;break;case"left":y=b=n.coordinate,v=i+ +!p*l,x=v-w*P,N=x-w*m,k=S;break;case"right":y=b=n.coordinate,v=i+ +p*l,x=v+w*P,N=x+w*m,k=S;break;default:x=v=n.coordinate,b=o+ +p*u,y=b+w*P,k=y+w*m,N=S;break}return{line:{x1:x,y1:y,x2:v,y2:b},tick:{x:N,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,u=n.orientation,d=n.mirror,f=n.axisLine,p=Rn(Rn(Rn({},Lt(this.props,!1)),Lt(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var m=+(u==="top"&&!d||u==="bottom"&&d);p=Rn(Rn({},p),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var x=+(u==="left"&&!d||u==="right"&&d);p=Rn(Rn({},p),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return he.createElement("line",ru({},p,{className:tr("recharts-cartesian-axis-line",ms(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,u=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,m=l.unit,x=ok(Rn(Rn({},this.props),{},{ticks:n}),s,i),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=Lt(this.props,!1),N=Lt(f,!1),k=Rn(Rn({},b),{},{fill:"none"},Lt(u,!1)),w=x.map(function(P,S){var _=o.getTickLineCoord(P),E=_.line,C=_.tick,M=Rn(Rn(Rn(Rn({textAnchor:v,verticalAnchor:y},b),{},{stroke:"none",fill:d},N),C),{},{index:S,payload:P,visibleTicksCount:x.length,tickFormatter:p});return he.createElement(yr,ru({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Vl(o.props,P,S)),u&&he.createElement("line",ru({},k,E,{className:tr("recharts-cartesian-axis-tick-line",ms(u,"className"))})),f&&t.renderTickItem(f,M,"".concat(Vt(p)?p(P.value,S):P.value).concat(m||"")))});return he.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,u=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var p=this.props,m=p.ticks,x=S1(p,pse),v=m;return Vt(u)&&(v=m&&m.length>0?u(this.props):u(x)),o<=0||l<=0||!v||!v.length?null:he.createElement(yr,{className:tr("recharts-cartesian-axis",d),ref:function(b){n.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Qn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=tr(s.className,"recharts-cartesian-axis-tick-value");return he.isValidElement(n)?o=he.cloneElement(n,Rn(Rn({},s),{},{className:l})):Vt(n)?o=n(Rn(Rn({},s),{},{className:l})):o=he.createElement(Yl,ru({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(L.Component);lk(Zu,"displayName","CartesianAxis");lk(Zu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Nse=["x1","y1","x2","y2","key"],kse=["offset"];function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){Sse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sse(e,t,r){return t=_se(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _se(e){var t=Ese(e,"string");return Ql(t)=="symbol"?t:t+""}function Ese(e,t){if(Ql(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(this,arguments)}function EP(e,t){if(e==null)return{};var r=Tse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Cse=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,u=t.ry;return he.createElement("rect",{x:s,y:i,ry:u,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gF(e,t){var r;if(he.isValidElement(e))r=he.cloneElement(e,t);else if(Vt(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,u=EP(t,Nse),d=Lt(u,!1);d.offset;var f=EP(d,kse);r=he.createElement("line",Fl({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Ase(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=wa(wa({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(u),index:u});return gF(s,d)});return he.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ose(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,u){var d=wa(wa({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(u),index:u});return gF(s,d)});return he.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Pse(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,u=e.horizontal,d=u===void 0?!0:u;if(!d||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,x){return m-x});s!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var v=!f[x+1],y=v?s+o-m:f[x+1]-m;if(y<=0)return null;var b=x%t.length;return he.createElement("rect",{key:"react-".concat(x),y:m,x:n,height:y,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return he.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Ise(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,u=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var f=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,x){return m-x});i!==f[0]&&f.unshift(0);var p=f.map(function(m,x){var v=!f[x+1],y=v?i+l-m:f[x+1]-m;if(y<=0)return null;var b=x%n.length;return he.createElement("rect",{key:"react-".concat(x),x:m,y:o,width:y,height:u,stroke:"none",fill:n[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return he.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Dse=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return uR(ok(wa(wa(wa({},Zu.defaultProps),n),{},{ticks:ro(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Mse=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return uR(ok(wa(wa(wa({},Zu.defaultProps),n),{},{ticks:ro(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},qc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function la(e){var t,r,n,s,i,o,l=nk(),u=ak(),d=jae(),f=wa(wa({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:qc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:qc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:qc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:qc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:qc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:qc.verticalFill,x:lt(e.x)?e.x:d.left,y:lt(e.y)?e.y:d.top,width:lt(e.width)?e.width:d.width,height:lt(e.height)?e.height:d.height}),p=f.x,m=f.y,x=f.width,v=f.height,y=f.syncWithTicks,b=f.horizontalValues,N=f.verticalValues,k=vae(),w=bae();if(!lt(x)||x<=0||!lt(v)||v<=0||!lt(p)||p!==+p||!lt(m)||m!==+m)return null;var P=f.verticalCoordinatesGenerator||Dse,S=f.horizontalCoordinatesGenerator||Mse,_=f.horizontalPoints,E=f.verticalPoints;if((!_||!_.length)&&Vt(S)){var C=b&&b.length,M=S({yAxis:w?wa(wa({},w),{},{ticks:C?b:w.ticks}):void 0,width:l,height:u,offset:d},C?!0:y);ci(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ql(M),"]")),Array.isArray(M)&&(_=M)}if((!E||!E.length)&&Vt(P)){var D=N&&N.length,A=P({xAxis:k?wa(wa({},k),{},{ticks:D?N:k.ticks}):void 0,width:l,height:u,offset:d},D?!0:y);ci(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ql(A),"]")),Array.isArray(A)&&(E=A)}return he.createElement("g",{className:"recharts-cartesian-grid"},he.createElement(Cse,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),he.createElement(Ase,Fl({},f,{offset:d,horizontalPoints:_,xAxis:k,yAxis:w})),he.createElement(Ose,Fl({},f,{offset:d,verticalPoints:E,xAxis:k,yAxis:w})),he.createElement(Pse,Fl({},f,{horizontalPoints:_})),he.createElement(Ise,Fl({},f,{verticalPoints:E})))}la.displayName="CartesianGrid";var Rse=["type","layout","connectNulls","ref"],Fse=["key"];function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function TP(e,t){if(e==null)return{};var r=$se(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $se(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uh.apply(this,arguments)}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){ri(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zc(e){return Hse(e)||Use(e)||Bse(e)||Lse()}function Lse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bse(e,t){if(e){if(typeof e=="string")return v2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v2(e,t)}}function Use(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hse(e){if(Array.isArray(e))return v2(e)}function v2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yF(n.key),n)}}function zse(e,t,r){return t&&AP(e.prototype,t),r&&AP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wse(e,t,r){return t=Sm(t),Kse(e,xF()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function Kse(e,t){if(t&&(Iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vse(e)}function Vse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xF=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function Gse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b2(e,t)}function b2(e,t){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},b2(e,t)}function ri(e,t,r){return t=yF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e){var t=Yse(e,"string");return Iu(t)=="symbol"?t:t+""}function Yse(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ui=(function(e){function t(){var r;qse(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Wse(this,t,[].concat(s)),ri(r,"state",{isAnimationFinished:!0,totalLength:0}),ri(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ri(r,"getStrokeDasharray",function(o,l,u){var d=u.reduce(function(N,k){return N+k});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/d),p=o%d,m=l-o,x=[],v=0,y=0;v<u.length;y+=u[v],++v)if(y+u[v]>p){x=[].concat(zc(u.slice(0,v)),[p-y]);break}var b=x.length%2===0?[0,m]:[m];return[].concat(zc(t.repeat(u,f)),zc(x),b).map(function(N){return"".concat(N,"px")}).join(", ")}),ri(r,"id",Wu("recharts-line-")),ri(r,"pathRef",function(o){r.mainCurve=o}),ri(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),ri(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Gse(t,e),zse(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,u=i.yAxis,d=i.layout,f=i.children,p=gs(f,Pf);if(!p)return null;var m=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:jn(y.payload,b)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return he.createElement(yr,x,p.map(function(v){return he.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:u,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,p=Lt(this.props,!1),m=Lt(u,!0),x=d.map(function(y,b){var N=ss(ss(ss({key:"dot-".concat(b),r:3},p),m),{},{index:b,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:d});return t.renderDotItem(u,N)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return he.createElement(yr,uh({className:"recharts-line-dots",key:"dots"},v),x)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,u=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=TP(l,Rse),m=ss(ss(ss({},Lt(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:u,layout:d,connectNulls:f});return he.createElement(rm,uh({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,u=o.strokeDasharray,d=o.isAnimationActive,f=o.animationBegin,p=o.animationDuration,m=o.animationEasing,x=o.animationId,v=o.animateNewValues,y=o.width,b=o.height,N=this.state,k=N.prevPoints,w=N.totalLength;return he.createElement(fi,{begin:f,duration:p,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var S=P.t;if(k){var _=k.length/l.length,E=l.map(function(O,F){var W=Math.floor(F*_);if(k[W]){var Y=k[W],Z=ua(Y.x,O.x),re=ua(Y.y,O.y);return ss(ss({},O),{},{x:Z(S),y:re(S)})}if(v){var ne=ua(y*2,O.x),U=ua(b/2,O.y);return ss(ss({},O),{},{x:ne(S),y:U(S)})}return ss(ss({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(E,n,s)}var C=ua(0,w),M=C(S),D;if(u){var A="".concat(u).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});D=i.getStrokeDasharray(M,w,A)}else D=i.generateSimpleStrokeDasharray(w,M);return i.renderCurveStatically(l,n,s,{strokeDasharray:D})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.totalLength;return l&&o&&o.length&&(!d&&f>0||!Gu(d,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,u=s.className,d=s.xAxis,f=s.yAxis,p=s.top,m=s.left,x=s.width,v=s.height,y=s.isAnimationActive,b=s.id;if(i||!l||!l.length)return null;var N=this.state.isAnimationFinished,k=l.length===1,w=tr("recharts-line",u),P=d&&d.allowDataOverflow,S=f&&f.allowDataOverflow,_=P||S,E=nr(b)?this.id:b,C=(n=Lt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},M=C.r,D=M===void 0?3:M,A=C.strokeWidth,O=A===void 0?2:A,F=rz(o)?o:{},W=F.clipDot,Y=W===void 0?!0:W,Z=D*2+O;return he.createElement(yr,{className:w},P||S?he.createElement("defs",null,he.createElement("clipPath",{id:"clipPath-".concat(E)},he.createElement("rect",{x:P?m:m-x/2,y:S?p:p-v/2,width:P?x:x*2,height:S?v:v*2})),!Y&&he.createElement("clipPath",{id:"clipPath-dots-".concat(E)},he.createElement("rect",{x:m-Z/2,y:p-Z/2,width:x+Z,height:v+Z}))):null,!k&&this.renderCurve(_,E),this.renderErrorBar(_,E),(k||o)&&this.renderDots(_,Y,E),(!y||N)&&Ei.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(zc(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(zc(o),zc(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(he.isValidElement(n))i=he.cloneElement(n,s);else if(Vt(n))i=n(s);else{var o=s.key,l=TP(s,Fse),u=tr("recharts-line-dot",typeof n!="boolean"?n.className:"");i=he.createElement(If,uh({key:o},l,{className:u}))}return i}}])})(L.PureComponent);ri(ui,"displayName","Line");ri(ui,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!nl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ri(ui,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,u=e.displayedData,d=e.offset,f=t.layout,p=u.map(function(m,x){var v=jn(m,o);return f==="horizontal"?{x:AO({axis:r,ticks:s,bandSize:l,entry:m,index:x}),y:nr(v)?null:n.scale(v),value:v,payload:m}:{x:nr(v)?null:r.scale(v),y:AO({axis:n,ticks:i,bandSize:l,entry:m,index:x}),value:v,payload:m}});return ss({points:p,layout:f},d)});function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function Xse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wF(n.key),n)}}function Qse(e,t,r){return t&&Jse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zse(e,t,r){return t=_m(t),eie(e,vF()?Reflect.construct(t,r||[],_m(e).constructor):t.apply(e,r))}function eie(e,t){if(t&&(Du(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tie(e)}function tie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vF=function(){return!!e})()}function _m(e){return _m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_m(e)}function rie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w2(e,t)}function w2(e,t){return w2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},w2(e,t)}function bF(e,t,r){return t=wF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wF(e){var t=nie(e,"string");return Du(t)=="symbol"?t:t+""}function nie(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j2.apply(this,arguments)}function aie(e){var t=e.xAxisId,r=nk(),n=ak(),s=sF(t);return s==null?null:L.createElement(Zu,j2({},s,{className:tr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ro(o,!0)}}))}var An=(function(e){function t(){return Xse(this,t),Zse(this,t,arguments)}return rie(t,e),Qse(t,[{key:"render",value:function(){return L.createElement(aie,this.props)}}])})(L.Component);bF(An,"displayName","XAxis");bF(An,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function sie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kF(n.key),n)}}function oie(e,t,r){return t&&iie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lie(e,t,r){return t=Em(t),cie(e,jF()?Reflect.construct(t,r||[],Em(e).constructor):t.apply(e,r))}function cie(e,t){if(t&&(Mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uie(e)}function uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jF=function(){return!!e})()}function Em(e){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Em(e)}function die(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N2(e,t)}function N2(e,t){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},N2(e,t)}function NF(e,t,r){return t=kF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kF(e){var t=hie(e,"string");return Mu(t)=="symbol"?t:t+""}function hie(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k2.apply(this,arguments)}var fie=function(t){var r=t.yAxisId,n=nk(),s=ak(),i=iF(r);return i==null?null:L.createElement(Zu,k2({},i,{className:tr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ro(l,!0)}}))},vn=(function(e){function t(){return sie(this,t),lie(this,t,arguments)}return die(t,e),oie(t,[{key:"render",value:function(){return L.createElement(fie,this.props)}}])})(L.Component);NF(vn,"displayName","YAxis");NF(vn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function OP(e){return xie(e)||gie(e)||mie(e)||pie()}function pie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mie(e,t){if(e){if(typeof e=="string")return S2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S2(e,t)}}function gie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xie(e){if(Array.isArray(e))return S2(e)}function S2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _2=function(t,r,n,s,i){var o=gs(t,ik),l=gs(t,Cg),u=[].concat(OP(o),OP(l)),d=gs(t,Og),f="".concat(s,"Id"),p=s[0],m=r;if(u.length&&(m=u.reduce(function(y,b){if(b.props[f]===n&&Ti(b.props,"extendDomain")&&lt(b.props[p])){var N=b.props[p];return[Math.min(y[0],N),Math.max(y[1],N)]}return y},m)),d.length){var x="".concat(p,"1"),v="".concat(p,"2");m=d.reduce(function(y,b){if(b.props[f]===n&&Ti(b.props,"extendDomain")&&lt(b.props[x])&&lt(b.props[v])){var N=b.props[x],k=b.props[v];return[Math.min(y[0],N,k),Math.max(y[1],N,k)]}return y},m)}return i&&i.length&&(m=i.reduce(function(y,b){return lt(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},m)),m},_1={exports:{}},PP;function yie(){return PP||(PP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function i(u,d,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||u,m),v=r?r+d:d;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],x]:u._events[v].push(x):(u._events[v]=x,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)t.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,x=p.length,v=new Array(x);m<x;m++)v[m]=p[m].fn;return v},l.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,m,x,v){var y=r?r+d:d;if(!this._events[y])return!1;var b=this._events[y],N=arguments.length,k,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,p),!0;case 4:return b.fn.call(b.context,f,p,m),!0;case 5:return b.fn.call(b.context,f,p,m,x),!0;case 6:return b.fn.call(b.context,f,p,m,x,v),!0}for(w=1,k=new Array(N-1);w<N;w++)k[w-1]=arguments[w];b.fn.apply(b.context,k)}else{var P=b.length,S;for(w=0;w<P;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),N){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,f);break;case 3:b[w].fn.call(b[w].context,f,p);break;case 4:b[w].fn.call(b[w].context,f,p,m);break;default:if(!k)for(S=1,k=new Array(N-1);S<N;S++)k[S-1]=arguments[S];b[w].fn.apply(b[w].context,k)}}return!0},l.prototype.on=function(d,f,p){return i(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return i(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,m){var x=r?r+d:d;if(!this._events[x])return this;if(!f)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===f&&(!m||v.once)&&(!p||v.context===p)&&o(this,x);else{for(var y=0,b=[],N=v.length;y<N;y++)(v[y].fn!==f||m&&!v[y].once||p&&v[y].context!==p)&&b.push(v[y]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(_1)),_1.exports}var vie=yie();const bie=Mr(vie);var E1=new bie,T1="recharts.syncMouseEvents";function hf(e){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(e)}function wie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SF(n.key),n)}}function Nie(e,t,r){return t&&jie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C1(e,t,r){return t=SF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SF(e){var t=kie(e,"string");return hf(t)=="symbol"?t:t+""}function kie(e,t){if(hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sie=(function(){function e(){wie(this,e),C1(this,"activeIndex",0),C1(this,"coordinateList",[]),C1(this,"layout","horizontal")}return Nie(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,u=r.layout,d=u===void 0?null:u,f=r.offset,p=f===void 0?null:f,m=r.mouseHandlerCallback,x=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,u=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+u+d,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:m})}}}])})();function _ie(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&lt(n)&&lt(s))return!0}return!1}function Eie(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function _F(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=Ar(t,r,n,s),l=Ar(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Tie(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,u=t.cy,d=t.innerRadius,f=t.outerRadius,p=t.angle,m=Ar(l,u,d,p),x=Ar(l,u,f,p);n=m.x,s=m.y,i=x.x,o=x.y}else return _F(t);return[{x:n,y:s},{x:i,y:o}]}function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ap(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){Cie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cie(e,t,r){return t=Aie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aie(e){var t=Oie(e,"string");return ff(t)=="symbol"?t:t+""}function Oie(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pie(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,u=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,x=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var v,y=rm;if(m==="ScatterChart")v=o,y=Cte;else if(m==="BarChart")v=Eie(p,o,u,f),y=ZN;else if(p==="radial"){var b=_F(o),N=b.cx,k=b.cy,w=b.radius,P=b.startAngle,S=b.endAngle;v={cx:N,cy:k,startAngle:P,endAngle:S,innerRadius:w,outerRadius:w},y=NR}else v={points:Tie(p,o,u)},y=rm;var _=ap(ap(ap(ap({stroke:"#ccc",pointerEvents:"none"},u),v),Lt(x,!1)),{},{payload:l,payloadIndex:d,className:tr("recharts-tooltip-cursor",x.className)});return L.isValidElement(x)?L.cloneElement(x,_):L.createElement(y,_)}var Iie=["item"],Die=["children","className","width","height","style","compact","title","desc"];function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nu.apply(this,arguments)}function DP(e,t){return Fie(e)||Rie(e,t)||TF(e,t)||Mie()}function Mie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Fie(e){if(Array.isArray(e))return e}function MP(e,t){if(e==null)return{};var r=$ie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CF(n.key),n)}}function Uie(e,t,r){return t&&Bie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hie(e,t,r){return t=Tm(t),qie(e,EF()?Reflect.construct(t,r||[],Tm(e).constructor):t.apply(e,r))}function qie(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zie(e)}function zie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EF=function(){return!!e})()}function Tm(e){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tm(e)}function Wie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E2(e,t)}function E2(e,t){return E2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},E2(e,t)}function Fu(e){return Gie(e)||Vie(e)||TF(e)||Kie()}function Kie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TF(e,t){if(e){if(typeof e=="string")return T2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T2(e,t)}}function Vie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gie(e){if(Array.isArray(e))return T2(e)}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(n){Yt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yt(e,t,r){return t=CF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CF(e){var t=Yie(e,"string");return Ru(t)=="symbol"?t:t+""}function Yie(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xie={xAxis:["bottom","top"],yAxis:["left","right"]},Jie={width:"100%",height:"100%"},AF={x:0,y:0};function sp(e){return e}var Qie=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Zie=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Ue(Ue(Ue({},s),Ar(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var u=i.coordinate,d=s.angle;return Ue(Ue(Ue({},s),Ar(s.cx,s.cy,u,d)),{},{angle:d,radius:u})}return AF},Pg=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,u){var d=u.props.data;return d&&d.length?[].concat(Fu(l),Fu(d)):l},[]);return o.length>0?o:t&&t.length&&lt(s)&&lt(i)?t.slice(s,i+1):[]};function OF(e){return e==="number"?[0,"auto"]:void 0}var C2=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Pg(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(u,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:r;p&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(p=p.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var x=p===void 0?l:p;m=Tp(x,o.dataKey,s)}else m=p&&p[n]||l[n];return m?[].concat(Fu(u),[mR(d,m)]):u},[])},FP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Qie(i,n),l=t.orderedTooltipTicks,u=t.tooltipAxis,d=t.tooltipTicks,f=ZJ(o,l,d,u);if(f>=0&&d){var p=d[f]&&d[f].value,m=C2(t,r,f,p),x=Zie(n,l,f,i);return{activeTooltipIndex:f,activeLabel:p,activePayload:m,activeCoordinate:x}}return null},eoe=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=t.stackOffset,x=cR(f,i);return n.reduce(function(v,y){var b,N=y.type.defaultProps!==void 0?Ue(Ue({},y.type.defaultProps),y.props):y.props,k=N.type,w=N.dataKey,P=N.allowDataOverflow,S=N.allowDuplicatedCategory,_=N.scale,E=N.ticks,C=N.includeHidden,M=N[o];if(v[M])return v;var D=Pg(t.data,{graphicalItems:s.filter(function(R){var Q,ee=o in R.props?R.props[o]:(Q=R.type.defaultProps)===null||Q===void 0?void 0:Q[o];return ee===M}),dataStartIndex:u,dataEndIndex:d}),A=D.length,O,F,W;_ie(N.domain,P,k)&&(O=Hj(N.domain,null,P),x&&(k==="number"||_!=="auto")&&(W=ih(D,w,"category")));var Y=OF(k);if(!O||O.length===0){var Z,re=(Z=N.domain)!==null&&Z!==void 0?Z:Y;if(w){if(O=ih(D,w,k),k==="category"&&x){var ne=Kq(O);S&&ne?(F=O,O=mm(0,A)):S||(O=DO(re,O,y).reduce(function(R,Q){return R.indexOf(Q)>=0?R:[].concat(Fu(R),[Q])},[]))}else if(k==="category")S?O=O.filter(function(R){return R!==""&&!nr(R)}):O=DO(re,O,y).reduce(function(R,Q){return R.indexOf(Q)>=0||Q===""||nr(Q)?R:[].concat(Fu(R),[Q])},[]);else if(k==="number"){var U=aQ(D,s.filter(function(R){var Q,ee,se=o in R.props?R.props[o]:(Q=R.type.defaultProps)===null||Q===void 0?void 0:Q[o],xe="hide"in R.props?R.props.hide:(ee=R.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return se===M&&(C||!xe)}),w,i,f);U&&(O=U)}x&&(k==="number"||_!=="auto")&&(W=ih(D,w,"category"))}else x?O=mm(0,A):l&&l[M]&&l[M].hasStack&&k==="number"?O=m==="expand"?[0,1]:pR(l[M].stackGroups,u,d):O=lR(D,s.filter(function(R){var Q=o in R.props?R.props[o]:R.type.defaultProps[o],ee="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return Q===M&&(C||!ee)}),k,f,!0);if(k==="number")O=_2(p,O,M,i,E),re&&(O=Hj(re,O,P));else if(k==="category"&&re){var oe=re,K=O.every(function(R){return oe.indexOf(R)>=0});K&&(O=oe)}}return Ue(Ue({},v),{},Yt({},M,Ue(Ue({},N),{},{axisType:i,domain:O,categoricalDomain:W,duplicateDomain:F,originalDomain:(b=N.domain)!==null&&b!==void 0?b:Y,isCategorical:x,layout:f})))},{})},toe=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,p=t.children,m=Pg(t.data,{graphicalItems:n,dataStartIndex:u,dataEndIndex:d}),x=m.length,v=cR(f,i),y=-1;return n.reduce(function(b,N){var k=N.type.defaultProps!==void 0?Ue(Ue({},N.type.defaultProps),N.props):N.props,w=k[o],P=OF("number");if(!b[w]){y++;var S;return v?S=mm(0,x):l&&l[w]&&l[w].hasStack?(S=pR(l[w].stackGroups,u,d),S=_2(p,S,w,i)):(S=Hj(P,lR(m,n.filter(function(_){var E,C,M=o in _.props?_.props[o]:(E=_.type.defaultProps)===null||E===void 0?void 0:E[o],D="hide"in _.props?_.props.hide:(C=_.type.defaultProps)===null||C===void 0?void 0:C.hide;return M===w&&!D}),"number",f),s.defaultProps.allowDataOverflow),S=_2(p,S,w,i)),Ue(Ue({},b),{},Yt({},w,Ue(Ue({axisType:i},s.defaultProps),{},{hide:!0,orientation:ms(Xie,"".concat(i,".").concat(y%2),null),domain:S,originalDomain:P,isCategorical:v,layout:f})))}return b},{})},roe=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,u=r.dataStartIndex,d=r.dataEndIndex,f=t.children,p="".concat(s,"Id"),m=gs(f,i),x={};return m&&m.length?x=eoe(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d}):o&&o.length&&(x=toe(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:u,dataEndIndex:d})),x},noe=function(t){var r=Uo(t),n=ro(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_N(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Zp(r,n)}},$P=function(t){var r=t.children,n=t.defaultShowTooltip,s=os(r,Eu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},aoe=function(t){return!t||!t.length?!1:t.some(function(r){var n=so(r&&r.type);return n&&n.indexOf("Bar")>=0})},LP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},soe=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,u=l===void 0?{}:l,d=n.width,f=n.height,p=n.children,m=n.margin||{},x=os(p,Eu),v=os(p,da),y=Object.keys(u).reduce(function(S,_){var E=u[_],C=E.orientation;return!E.mirror&&!E.hide?Ue(Ue({},S),{},Yt({},C,S[C]+E.width)):S},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(S,_){var E=o[_],C=E.orientation;return!E.mirror&&!E.hide?Ue(Ue({},S),{},Yt({},C,ms(S,"".concat(C))+E.height)):S},{top:m.top||0,bottom:m.bottom||0}),N=Ue(Ue({},b),y),k=N.bottom;x&&(N.bottom+=x.props.height||Eu.defaultProps.height),v&&r&&(N=rQ(N,s,n,r));var w=d-N.left-N.right,P=f-N.top-N.bottom;return Ue(Ue({brushBottom:k},N),{},{width:Math.max(w,0),height:Math.max(P,0)})},ioe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ig=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,u=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,p=t.defaultProps,m=function(N,k){var w=k.graphicalItems,P=k.stackGroups,S=k.offset,_=k.updateId,E=k.dataStartIndex,C=k.dataEndIndex,M=N.barSize,D=N.layout,A=N.barGap,O=N.barCategoryGap,F=N.maxBarSize,W=LP(D),Y=W.numericAxisName,Z=W.cateAxisName,re=aoe(w),ne=[];return w.forEach(function(U,oe){var K=Pg(N.data,{graphicalItems:[U],dataStartIndex:E,dataEndIndex:C}),R=U.type.defaultProps!==void 0?Ue(Ue({},U.type.defaultProps),U.props):U.props,Q=R.dataKey,ee=R.maxBarSize,se=R["".concat(Y,"Id")],xe=R["".concat(Z,"Id")],ge={},Me=u.reduce(function(He,Nt){var Ke=k["".concat(Nt.axisType,"Map")],kt=R["".concat(Nt.axisType,"Id")];Ke&&Ke[kt]||Nt.axisType==="zAxis"||Jl();var ft=Ke[kt];return Ue(Ue({},He),{},Yt(Yt({},Nt.axisType,ft),"".concat(Nt.axisType,"Ticks"),ro(ft)))},ge),ce=Me[Z],me=Me["".concat(Z,"Ticks")],Oe=P&&P[se]&&P[se].hasStack&&fQ(U,P[se].stackGroups),q=so(U.type).indexOf("Bar")>=0,Ne=Zp(ce,me),ae=[],De=re&&eQ({barSize:M,stackGroups:P,totalSize:ioe(Me,Z)});if(q){var Be,Se,Fe=nr(ee)?F:ee,ze=(Be=(Se=Zp(ce,me,!0))!==null&&Se!==void 0?Se:Fe)!==null&&Be!==void 0?Be:0;ae=tQ({barGap:A,barCategoryGap:O,bandSize:ze!==Ne?ze:Ne,sizeList:De[xe],maxBarSize:Fe}),ze!==Ne&&(ae=ae.map(function(He){return Ue(Ue({},He),{},{position:Ue(Ue({},He.position),{},{offset:He.position.offset-ze/2})})}))}var Ee=U&&U.type&&U.type.getComposedData;Ee&&ne.push({props:Ue(Ue({},Ee(Ue(Ue({},Me),{},{displayedData:K,props:N,dataKey:Q,item:U,bandSize:Ne,barPosition:ae,offset:S,stackedData:Oe,layout:D,dataStartIndex:E,dataEndIndex:C}))),{},Yt(Yt(Yt({key:U.key||"item-".concat(oe)},Y,Me[Y]),Z,Me[Z]),"animationId",_)),childIndex:sz(U,N.children),item:U})}),ne},x=function(N,k){var w=N.props,P=N.dataStartIndex,S=N.dataEndIndex,_=N.updateId;if(!GT({props:w}))return null;var E=w.children,C=w.layout,M=w.stackOffset,D=w.data,A=w.reverseStackOrder,O=LP(C),F=O.numericAxisName,W=O.cateAxisName,Y=gs(E,n),Z=dQ(D,Y,"".concat(F,"Id"),"".concat(W,"Id"),M,A),re=u.reduce(function(R,Q){var ee="".concat(Q.axisType,"Map");return Ue(Ue({},R),{},Yt({},ee,roe(w,Ue(Ue({},Q),{},{graphicalItems:Y,stackGroups:Q.axisType===F&&Z,dataStartIndex:P,dataEndIndex:S}))))},{}),ne=soe(Ue(Ue({},re),{},{props:w,graphicalItems:Y}),k?.legendBBox);Object.keys(re).forEach(function(R){re[R]=f(w,re[R],ne,R.replace("Map",""),r)});var U=re["".concat(W,"Map")],oe=noe(U),K=m(w,Ue(Ue({},re),{},{dataStartIndex:P,dataEndIndex:S,updateId:_,graphicalItems:Y,stackGroups:Z,offset:ne}));return Ue(Ue({formattedGraphicalItems:K,graphicalItems:Y,offset:ne,stackGroups:Z},oe),re)},v=(function(b){function N(k){var w,P,S;return Lie(this,N),S=Hie(this,N,[k]),Yt(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Yt(S,"accessibilityManager",new Sie),Yt(S,"handleLegendBBoxUpdate",function(_){if(_){var E=S.state,C=E.dataStartIndex,M=E.dataEndIndex,D=E.updateId;S.setState(Ue({legendBBox:_},x({props:S.props,dataStartIndex:C,dataEndIndex:M,updateId:D},Ue(Ue({},S.state),{},{legendBBox:_}))))}}),Yt(S,"handleReceiveSyncEvent",function(_,E,C){if(S.props.syncId===_){if(C===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(E)}}),Yt(S,"handleBrushChange",function(_){var E=_.startIndex,C=_.endIndex;if(E!==S.state.dataStartIndex||C!==S.state.dataEndIndex){var M=S.state.updateId;S.setState(function(){return Ue({dataStartIndex:E,dataEndIndex:C},x({props:S.props,dataStartIndex:E,dataEndIndex:C,updateId:M},S.state))}),S.triggerSyncEvent({dataStartIndex:E,dataEndIndex:C})}}),Yt(S,"handleMouseEnter",function(_){var E=S.getMouseInfo(_);if(E){var C=Ue(Ue({},E),{},{isTooltipActive:!0});S.setState(C),S.triggerSyncEvent(C);var M=S.props.onMouseEnter;Vt(M)&&M(C,_)}}),Yt(S,"triggeredAfterMouseMove",function(_){var E=S.getMouseInfo(_),C=E?Ue(Ue({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(C),S.triggerSyncEvent(C);var M=S.props.onMouseMove;Vt(M)&&M(C,_)}),Yt(S,"handleItemMouseEnter",function(_){S.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Yt(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Yt(S,"handleMouseMove",function(_){_.persist(),S.throttleTriggeredAfterMouseMove(_)}),Yt(S,"handleMouseLeave",function(_){S.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};S.setState(E),S.triggerSyncEvent(E);var C=S.props.onMouseLeave;Vt(C)&&C(E,_)}),Yt(S,"handleOuterEvent",function(_){var E=az(_),C=ms(S.props,"".concat(E));if(E&&Vt(C)){var M,D;/.*touch.*/i.test(E)?D=S.getMouseInfo(_.changedTouches[0]):D=S.getMouseInfo(_),C((M=D)!==null&&M!==void 0?M:{},_)}}),Yt(S,"handleClick",function(_){var E=S.getMouseInfo(_);if(E){var C=Ue(Ue({},E),{},{isTooltipActive:!0});S.setState(C),S.triggerSyncEvent(C);var M=S.props.onClick;Vt(M)&&M(C,_)}}),Yt(S,"handleMouseDown",function(_){var E=S.props.onMouseDown;if(Vt(E)){var C=S.getMouseInfo(_);E(C,_)}}),Yt(S,"handleMouseUp",function(_){var E=S.props.onMouseUp;if(Vt(E)){var C=S.getMouseInfo(_);E(C,_)}}),Yt(S,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Yt(S,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseDown(_.changedTouches[0])}),Yt(S,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseUp(_.changedTouches[0])}),Yt(S,"handleDoubleClick",function(_){var E=S.props.onDoubleClick;if(Vt(E)){var C=S.getMouseInfo(_);E(C,_)}}),Yt(S,"handleContextMenu",function(_){var E=S.props.onContextMenu;if(Vt(E)){var C=S.getMouseInfo(_);E(C,_)}}),Yt(S,"triggerSyncEvent",function(_){S.props.syncId!==void 0&&E1.emit(T1,S.props.syncId,_,S.eventEmitterSymbol)}),Yt(S,"applySyncEvent",function(_){var E=S.props,C=E.layout,M=E.syncMethod,D=S.state.updateId,A=_.dataStartIndex,O=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)S.setState(Ue({dataStartIndex:A,dataEndIndex:O},x({props:S.props,dataStartIndex:A,dataEndIndex:O,updateId:D},S.state)));else if(_.activeTooltipIndex!==void 0){var F=_.chartX,W=_.chartY,Y=_.activeTooltipIndex,Z=S.state,re=Z.offset,ne=Z.tooltipTicks;if(!re)return;if(typeof M=="function")Y=M(ne,_);else if(M==="value"){Y=-1;for(var U=0;U<ne.length;U++)if(ne[U].value===_.activeLabel){Y=U;break}}var oe=Ue(Ue({},re),{},{x:re.left,y:re.top}),K=Math.min(F,oe.x+oe.width),R=Math.min(W,oe.y+oe.height),Q=ne[Y]&&ne[Y].value,ee=C2(S.state,S.props.data,Y),se=ne[Y]?{x:C==="horizontal"?ne[Y].coordinate:K,y:C==="horizontal"?R:ne[Y].coordinate}:AF;S.setState(Ue(Ue({},_),{},{activeLabel:Q,activeCoordinate:se,activePayload:ee,activeTooltipIndex:Y}))}else S.setState(_)}),Yt(S,"renderCursor",function(_){var E,C=S.state,M=C.isTooltipActive,D=C.activeCoordinate,A=C.activePayload,O=C.offset,F=C.activeTooltipIndex,W=C.tooltipAxisBandSize,Y=S.getTooltipEventType(),Z=(E=_.props.active)!==null&&E!==void 0?E:M,re=S.props.layout,ne=_.key||"_recharts-cursor";return he.createElement(Pie,{key:ne,activeCoordinate:D,activePayload:A,activeTooltipIndex:F,chartName:r,element:_,isActive:Z,layout:re,offset:O,tooltipAxisBandSize:W,tooltipEventType:Y})}),Yt(S,"renderPolarAxis",function(_,E,C){var M=ms(_,"type.axisType"),D=ms(S.state,"".concat(M,"Map")),A=_.type.defaultProps,O=A!==void 0?Ue(Ue({},A),_.props):_.props,F=D&&D[O["".concat(M,"Id")]];return L.cloneElement(_,Ue(Ue({},F),{},{className:tr(M,F.className),key:_.key||"".concat(E,"-").concat(C),ticks:ro(F,!0)}))}),Yt(S,"renderPolarGrid",function(_){var E=_.props,C=E.radialLines,M=E.polarAngles,D=E.polarRadius,A=S.state,O=A.radiusAxisMap,F=A.angleAxisMap,W=Uo(O),Y=Uo(F),Z=Y.cx,re=Y.cy,ne=Y.innerRadius,U=Y.outerRadius;return L.cloneElement(_,{polarAngles:Array.isArray(M)?M:ro(Y,!0).map(function(oe){return oe.coordinate}),polarRadius:Array.isArray(D)?D:ro(W,!0).map(function(oe){return oe.coordinate}),cx:Z,cy:re,innerRadius:ne,outerRadius:U,key:_.key||"polar-grid",radialLines:C})}),Yt(S,"renderLegend",function(){var _=S.state.formattedGraphicalItems,E=S.props,C=E.children,M=E.width,D=E.height,A=S.props.margin||{},O=M-(A.left||0)-(A.right||0),F=iR({children:C,formattedGraphicalItems:_,legendWidth:O,legendContent:d});if(!F)return null;var W=F.item,Y=MP(F,Iie);return L.cloneElement(W,Ue(Ue({},Y),{},{chartWidth:M,chartHeight:D,margin:A,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Yt(S,"renderTooltip",function(){var _,E=S.props,C=E.children,M=E.accessibilityLayer,D=os(C,Ur);if(!D)return null;var A=S.state,O=A.isTooltipActive,F=A.activeCoordinate,W=A.activePayload,Y=A.activeLabel,Z=A.offset,re=(_=D.props.active)!==null&&_!==void 0?_:O;return L.cloneElement(D,{viewBox:Ue(Ue({},Z),{},{x:Z.left,y:Z.top}),active:re,label:Y,payload:re?W:[],coordinate:F,accessibilityLayer:M})}),Yt(S,"renderBrush",function(_){var E=S.props,C=E.margin,M=E.data,D=S.state,A=D.offset,O=D.dataStartIndex,F=D.dataEndIndex,W=D.updateId;return L.cloneElement(_,{key:_.key||"_recharts-brush",onChange:ep(S.handleBrushChange,_.props.onChange),data:M,x:lt(_.props.x)?_.props.x:A.left,y:lt(_.props.y)?_.props.y:A.top+A.height+A.brushBottom-(C.bottom||0),width:lt(_.props.width)?_.props.width:A.width,startIndex:O,endIndex:F,updateId:"brush-".concat(W)})}),Yt(S,"renderReferenceElement",function(_,E,C){if(!_)return null;var M=S,D=M.clipPathId,A=S.state,O=A.xAxisMap,F=A.yAxisMap,W=A.offset,Y=_.type.defaultProps||{},Z=_.props,re=Z.xAxisId,ne=re===void 0?Y.xAxisId:re,U=Z.yAxisId,oe=U===void 0?Y.yAxisId:U;return L.cloneElement(_,{key:_.key||"".concat(E,"-").concat(C),xAxis:O[ne],yAxis:F[oe],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:D})}),Yt(S,"renderActivePoints",function(_){var E=_.item,C=_.activePoint,M=_.basePoint,D=_.childIndex,A=_.isRange,O=[],F=E.props.key,W=E.item.type.defaultProps!==void 0?Ue(Ue({},E.item.type.defaultProps),E.item.props):E.item.props,Y=W.activeDot,Z=W.dataKey,re=Ue(Ue({index:D,dataKey:Z,cx:C.x,cy:C.y,r:4,fill:QN(E.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Lt(Y,!1)),Cp(Y));return O.push(N.renderActiveDot(Y,re,"".concat(F,"-activePoint-").concat(D))),M?O.push(N.renderActiveDot(Y,Ue(Ue({},re),{},{cx:M.x,cy:M.y}),"".concat(F,"-basePoint-").concat(D))):A&&O.push(null),O}),Yt(S,"renderGraphicChild",function(_,E,C){var M=S.filterFormatItem(_,E,C);if(!M)return null;var D=S.getTooltipEventType(),A=S.state,O=A.isTooltipActive,F=A.tooltipAxis,W=A.activeTooltipIndex,Y=A.activeLabel,Z=S.props.children,re=os(Z,Ur),ne=M.props,U=ne.points,oe=ne.isRange,K=ne.baseLine,R=M.item.type.defaultProps!==void 0?Ue(Ue({},M.item.type.defaultProps),M.item.props):M.item.props,Q=R.activeDot,ee=R.hide,se=R.activeBar,xe=R.activeShape,ge=!!(!ee&&O&&re&&(Q||se||xe)),Me={};D!=="axis"&&re&&re.props.trigger==="click"?Me={onClick:ep(S.handleItemMouseEnter,_.props.onClick)}:D!=="axis"&&(Me={onMouseLeave:ep(S.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:ep(S.handleItemMouseEnter,_.props.onMouseEnter)});var ce=L.cloneElement(_,Ue(Ue({},M.props),Me));function me(Nt){return typeof F.dataKey=="function"?F.dataKey(Nt.payload):null}if(ge)if(W>=0){var Oe,q;if(F.dataKey&&!F.allowDuplicatedCategory){var Ne=typeof F.dataKey=="function"?me:"payload.".concat(F.dataKey.toString());Oe=Tp(U,Ne,Y),q=oe&&K&&Tp(K,Ne,Y)}else Oe=U?.[W],q=oe&&K&&K[W];if(xe||se){var ae=_.props.activeIndex!==void 0?_.props.activeIndex:W;return[L.cloneElement(_,Ue(Ue(Ue({},M.props),Me),{},{activeIndex:ae})),null,null]}if(!nr(Oe))return[ce].concat(Fu(S.renderActivePoints({item:M,activePoint:Oe,basePoint:q,childIndex:W,isRange:oe})))}else{var De,Be=(De=S.getItemByXY(S.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:ce},Se=Be.graphicalItem,Fe=Se.item,ze=Fe===void 0?_:Fe,Ee=Se.childIndex,He=Ue(Ue(Ue({},M.props),Me),{},{activeIndex:Ee});return[L.cloneElement(ze,He),null,null]}return oe?[ce,null,null]:[ce,null]}),Yt(S,"renderCustomized",function(_,E,C){return L.cloneElement(_,Ue(Ue({key:"recharts-customized-".concat(C)},S.props),S.state))}),Yt(S,"renderMap",{CartesianGrid:{handler:sp,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:sp},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:sp},YAxis:{handler:sp},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=k.id)!==null&&w!==void 0?w:Wu("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=sM(S.triggeredAfterMouseMove,(P=k.throttleDelay)!==null&&P!==void 0?P:1e3/60),S.state={},S}return Wie(N,b),Uie(N,[{key:"componentDidMount",value:function(){var w,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,P=w.children,S=w.data,_=w.height,E=w.layout,C=os(P,Ur);if(C){var M=C.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,A=C2(this.state,S,M,D),O=this.state.tooltipTicks[M].coordinate,F=(this.state.offset.top+_)/2,W=E==="horizontal",Y=W?{x:O,y:F}:{y:O,x:F},Z=this.state.formattedGraphicalItems.find(function(ne){var U=ne.item;return U.type.name==="Scatter"});Z&&(Y=Ue(Ue({},Y),Z.props.points[M].tooltipPosition),A=Z.props.points[M].tooltipPayload);var re={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:D,activePayload:A,activeCoordinate:Y};this.setState(re),this.renderCursor(C),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,_;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){uj([os(w.children,Ur)],[os(this.props.children,Ur)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=os(this.props.children,Ur);if(w&&typeof w.props.shared=="boolean"){var P=w.props.shared?"axis":"item";return l.indexOf(P)>=0?P:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var P=this.container,S=P.getBoundingClientRect(),_=WV(S),E={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},C=S.width/P.offsetWidth||1,M=this.inRange(E.chartX,E.chartY,C);if(!M)return null;var D=this.state,A=D.xAxisMap,O=D.yAxisMap,F=this.getTooltipEventType(),W=FP(this.state,this.props.data,this.props.layout,M);if(F!=="axis"&&A&&O){var Y=Uo(A).scale,Z=Uo(O).scale,re=Y&&Y.invert?Y.invert(E.chartX):null,ne=Z&&Z.invert?Z.invert(E.chartY):null;return Ue(Ue({},E),{},{xValue:re,yValue:ne},W)}return W?Ue(Ue({},E),W):null}},{key:"inRange",value:function(w,P){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,E=w/S,C=P/S;if(_==="horizontal"||_==="vertical"){var M=this.state.offset,D=E>=M.left&&E<=M.left+M.width&&C>=M.top&&C<=M.top+M.height;return D?{x:E,y:C}:null}var A=this.state,O=A.angleAxisMap,F=A.radiusAxisMap;if(O&&F){var W=Uo(O);return FO({x:E,y:C},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,P=this.getTooltipEventType(),S=os(w,Ur),_={};S&&P==="axis"&&(S.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Cp(this.props,this.handleOuterEvent);return Ue(Ue({},E),_)}},{key:"addListener",value:function(){E1.on(T1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){E1.removeListener(T1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,P,S){for(var _=this.state.formattedGraphicalItems,E=0,C=_.length;E<C;E++){var M=_[E];if(M.item===w||M.props.key===w.key||P===so(M.item.type)&&S===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,P=this.state.offset,S=P.left,_=P.top,E=P.height,C=P.width;return he.createElement("defs",null,he.createElement("clipPath",{id:w},he.createElement("rect",{x:S,y:_,height:E,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(P,S){var _=DP(S,2),E=_[0],C=_[1];return Ue(Ue({},P),{},Yt({},E,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(P,S){var _=DP(S,2),E=_[0],C=_[1];return Ue(Ue({},P),{},Yt({},E,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(w){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[w])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(w){var P=this.state,S=P.formattedGraphicalItems,_=P.activeItem;if(S&&S.length)for(var E=0,C=S.length;E<C;E++){var M=S[E],D=M.props,A=M.item,O=A.type.defaultProps!==void 0?Ue(Ue({},A.type.defaultProps),A.props):A.props,F=so(A.type);if(F==="Bar"){var W=(D.data||[]).find(function(ne){return ute(w,ne)});if(W)return{graphicalItem:M,payload:W}}else if(F==="RadialBar"){var Y=(D.data||[]).find(function(ne){return FO(w,ne)});if(Y)return{graphicalItem:M,payload:Y}}else if(Sg(M,_)||_g(M,_)||of(M,_)){var Z=qre({graphicalItem:M,activeTooltipItem:_,itemData:O.data}),re=O.activeIndex===void 0?Z:O.activeIndex;return{graphicalItem:Ue(Ue({},M),{},{childIndex:re}),payload:of(M,_)?O.data[Z]:M.props.data[Z]}}}return null}},{key:"render",value:function(){var w=this;if(!GT(this))return null;var P=this.props,S=P.children,_=P.className,E=P.width,C=P.height,M=P.style,D=P.compact,A=P.title,O=P.desc,F=MP(P,Die),W=Lt(F,!1);if(D)return he.createElement(mP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},he.createElement(hj,nu({},W,{width:E,height:C,title:A,desc:O}),this.renderClipPath(),XT(S,this.renderMap)));if(this.props.accessibilityLayer){var Y,Z;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(Z=this.props.role)!==null&&Z!==void 0?Z:"application",W.onKeyDown=function(ne){w.accessibilityManager.keyboardEvent(ne)},W.onFocus=function(){w.accessibilityManager.focus()}}var re=this.parseEventsOfWrapper();return he.createElement(mP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},he.createElement("div",nu({className:tr("recharts-wrapper",_),style:Ue({position:"relative",cursor:"default",width:E,height:C},M)},re,{ref:function(U){w.container=U}}),he.createElement(hj,nu({},W,{width:E,height:C,title:A,desc:O,style:Jie}),this.renderClipPath(),XT(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(L.Component);Yt(v,"displayName",r),Yt(v,"defaultProps",Ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Yt(v,"getDerivedStateFromProps",function(b,N){var k=b.dataKey,w=b.data,P=b.children,S=b.width,_=b.height,E=b.layout,C=b.stackOffset,M=b.margin,D=N.dataStartIndex,A=N.dataEndIndex;if(N.updateId===void 0){var O=$P(b);return Ue(Ue(Ue({},O),{},{updateId:0},x(Ue(Ue({props:b},O),{},{updateId:0}),N)),{},{prevDataKey:k,prevData:w,prevWidth:S,prevHeight:_,prevLayout:E,prevStackOffset:C,prevMargin:M,prevChildren:P})}if(k!==N.prevDataKey||w!==N.prevData||S!==N.prevWidth||_!==N.prevHeight||E!==N.prevLayout||C!==N.prevStackOffset||!iu(M,N.prevMargin)){var F=$P(b),W={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Y=Ue(Ue({},FP(N,w,E)),{},{updateId:N.updateId+1}),Z=Ue(Ue(Ue({},F),W),Y);return Ue(Ue(Ue({},Z),x(Ue({props:b},Z),N)),{},{prevDataKey:k,prevData:w,prevWidth:S,prevHeight:_,prevLayout:E,prevStackOffset:C,prevMargin:M,prevChildren:P})}if(!uj(P,N.prevChildren)){var re,ne,U,oe,K=os(P,Eu),R=K&&(re=(ne=K.props)===null||ne===void 0?void 0:ne.startIndex)!==null&&re!==void 0?re:D,Q=K&&(U=(oe=K.props)===null||oe===void 0?void 0:oe.endIndex)!==null&&U!==void 0?U:A,ee=R!==D||Q!==A,se=!nr(w),xe=se&&!ee?N.updateId:N.updateId+1;return Ue(Ue({updateId:xe},x(Ue(Ue({props:b},N),{},{updateId:xe,dataStartIndex:R,dataEndIndex:Q}),N)),{},{prevChildren:P,dataStartIndex:R,dataEndIndex:Q})}return null}),Yt(v,"renderActiveDot",function(b,N,k){var w;return L.isValidElement(b)?w=L.cloneElement(b,N):Vt(b)?w=b(N):w=he.createElement(If,N),he.createElement(yr,{className:"recharts-active-dot",key:k},w)});var y=L.forwardRef(function(N,k){return he.createElement(v,nu({},N,{ref:k}))});return y.displayName=v.displayName,y},dh=Ig({chartName:"LineChart",GraphicalChild:ui,axisComponents:[{axisType:"xAxis",AxisComp:An},{axisType:"yAxis",AxisComp:vn}],formatAxisMap:JR}),si=Ig({chartName:"BarChart",GraphicalChild:gr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:An},{axisType:"yAxis",AxisComp:vn}],formatAxisMap:JR}),PF=Ig({chartName:"PieChart",GraphicalChild:Di,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Qu},{axisType:"radiusAxis",AxisComp:Ju}],formatAxisMap:yR,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),ooe=Ig({chartName:"RadarChart",GraphicalChild:Ul,axisComponents:[{axisType:"angleAxis",AxisComp:Qu},{axisType:"radiusAxis",AxisComp:Ju}],formatAxisMap:yR,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const BP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function loe({context:e}){const t=L.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,inventory:d.inventory+u.totalCost})}),e.overheads.forEach(u=>{const d=l.get(u.date)||{inventory:0,overhead:0};l.set(u.date,{...d,overhead:d.overhead+u.amount})}),Array.from(l.entries()).map(([u,d])=>({date:new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:u,inventory:d.inventory,overhead:d.overhead,total:d.inventory+d.overhead})).sort((u,d)=>u.fullDate.localeCompare(d.fullDate))},[e.inventory,e.overheads]),r=L.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.totalCost)}),e.overheads.forEach(u=>{const d=l.get(u.category)||0;l.set(u.category,d+u.amount)}),Array.from(l.entries()).map(([u,d])=>({name:Hm[u]||z2[u]||u,value:d})).sort((u,d)=>d.value-u.value)},[e.inventory,e.overheads]),n=L.useMemo(()=>{const l=new Map;return e.inventory.forEach(u=>{const d=l.get(u.itemName)||0;l.set(u.itemName,d+u.totalCost)}),Array.from(l.entries()).map(([u,d])=>({name:u,value:d})).sort((u,d)=>d.value-u.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,u)=>l+u.totalCost,0),i=e.overheads.reduce((l,u)=>l+u.amount,0),o=s+i;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Vc,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(f9,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),a.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pn,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),a.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(dh,{data:t,children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{dataKey:"date"}),a.jsx(vn,{}),a.jsx(Ur,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(da,{}),a.jsx(ui,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),a.jsx(ui,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),a.jsx(ui,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(PF,{children:[a.jsx(Di,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:u})=>`${l} (${(u*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,u)=>a.jsx(Gl,{fill:BP[u%BP.length]},`cell-${u}`))}),a.jsx(Ur,{formatter:l=>`${l.toLocaleString()}`})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(si,{data:n,layout:"vertical",children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{type:"number"}),a.jsx(vn,{dataKey:"name",type:"category",width:100}),a.jsx(Ur,{formatter:l=>`${l.toLocaleString()}`}),a.jsx(gr,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function UP({context:e,selectedStoreId:t}){const[r,n]=L.useState(new Date().toISOString().split("T")[0]),[s,i]=L.useState({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:""}),[o,l]=L.useState(!1),[u,d]=L.useState(null),f=e.user?.role==="cluster_head",p=e.user?.role==="manager",m=e.user?.designation==="store_incharge",x=p&&!m,v=m,[y,b]=L.useState([]),[N,k]=L.useState([]),[w,P]=L.useState(!1);L.useEffect(()=>{S()},[]);const S=async()=>{P(!0);try{const De=(await Zo()).filter(Be=>Be.type==="contract");b(De)}catch(ae){console.error("Error loading contract workers:",ae)}finally{P(!1)}};L.useEffect(()=>{_()},[r,y]);const _=async()=>{if(y.length!==0)try{const De=(await Yo()).filter(Ee=>Ee.date===r),Be=y.map(Ee=>Ee.id),Se=De.filter(Ee=>Be.includes(Ee.employeeId)),Fe=new Map;Se.forEach(Ee=>{const He=Fe.get(Ee.employeeId);(!He||new Date(Ee.createdAt)>new Date(He.createdAt))&&Fe.set(Ee.employeeId,Ee)});const ze=Array.from(Fe.values()).map(Ee=>({employeeId:Ee.employeeId,amount:Ee.amount.toString()}));k(ze)}catch(ae){console.error("Error loading payouts for date:",ae)}},E=()=>{k([...N,{employeeId:"",amount:""}])},C=ae=>{k(N.filter((De,Be)=>Be!==ae))},M=(ae,De,Be)=>{const Se=[...N];Se[ae][De]=Be,k(Se)},D=L.useMemo(()=>N.reduce((ae,De)=>ae+(parseFloat(De.amount)||0),0),[N]),A=L.useMemo(()=>{const ae=t||e.user?.storeId;console.log(" SalesManagement - effectiveStoreId:",ae),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",r),console.log(" SalesManagement - all sales data:",e.salesData.map(Se=>({id:Se.id.substring(0,8),date:Se.date,storeId:Se.storeId,offlineSales:Se.offlineSales})));const De=ae?e.salesData.filter(Se=>Se.storeId===ae):e.salesData;console.log(" SalesManagement - filtered sales:",De.map(Se=>({id:Se.id.substring(0,8),date:Se.date,storeId:Se.storeId})));const Be=De.find(Se=>Se.date===r);return console.log(" SalesManagement - salesForDate result:",Be?{id:Be.id.substring(0,8),date:Be.date,storeId:Be.storeId}:"NOT FOUND"),Be},[e.salesData,r,t,e.user?.storeId]),O=L.useMemo(()=>e.salesData.length===0||!A&&e.salesData.every(ae=>ae.date>r),[e.salesData,r,A]),F=L.useMemo(()=>new Date(r).getDate()===1,[r]),W=L.useMemo(()=>new Date(r).getDay()===5,[r]),Y=L.useMemo(()=>{const ae=new Date(r);ae.setDate(ae.getDate()-1);const De=ae.toISOString().split("T")[0];return e.salesData.find(Be=>Be.date===De)},[e.salesData,r]),Z=L.useMemo(()=>{const ae=e.inventory.filter(Be=>Be.date===r).reduce((Be,Se)=>Be+Se.totalCost,0),De=e.overheads.filter(Be=>Be.date===r).reduce((Be,Se)=>Be+Se.amount,0);return ae+De},[e.inventory,e.overheads,r]),re=L.useMemo(()=>e.fixedCosts.filter(ae=>ae.date===r).reduce((ae,De)=>De.paymentMethod==="cash"?ae+De.amount:De.paymentMethod==="both"&&De.cashAmount?ae+De.cashAmount:ae,0),[e.fixedCosts,r]),ne=L.useMemo(()=>e.fixedCosts.filter(ae=>ae.date===r).reduce((ae,De)=>De.paymentMethod==="online"?ae+De.amount:De.paymentMethod==="both"&&De.onlineAmount?ae+De.onlineAmount:ae,0),[e.fixedCosts,r]),U=(ae,De,Be,Se,Fe,ze)=>ae+Fe+De-Be-Se-ze,oe=L.useMemo(()=>{const ae=parseFloat(s.previousCashInHand)||0,De=parseFloat(s.cashAmount)||0,Be=D,Se=parseFloat(s.usedOnlineMoney)||0;return U(ae,De,Z,Be,Se,re)},[s.previousCashInHand,s.cashAmount,D,Z,s.usedOnlineMoney,re]),K=L.useMemo(()=>{const ae=parseFloat(s.actualCashInHand)||0;return ae===0?0:ae-oe},[s.actualCashInHand,oe]),R=Math.abs(K)>500,Q=L.useMemo(()=>{const ae=e.salesData.filter(Se=>Se.date<=r).reduce((Se,Fe)=>Se+(Fe.paytmAmount??0),0),De=e.salesData.filter(Se=>Se.date<=r).reduce((Se,Fe)=>Se+(Fe.usedOnlineMoney??0),0),Be=e.fixedCosts.filter(Se=>Se.date<=r).reduce((Se,Fe)=>Fe.paymentMethod==="online"?Se+Fe.amount:Fe.paymentMethod==="both"&&Fe.onlineAmount?Se+Fe.onlineAmount:Se,0);return ae-De-Be},[e.salesData,e.fixedCosts,r]);L.useEffect(()=>{if(A)i({offlineSales:(A.offlineSales??0).toString(),paytmAmount:(A.paytmAmount??0).toString(),cashAmount:(A.cashAmount??0).toString(),onlineSales:(A.onlineSales??0).toString(),employeeSalary:(A.employeeSalary??0).toString(),previousCashInHand:(A.previousCashInHand??0).toString(),usedOnlineMoney:(A.usedOnlineMoney??0).toString(),actualCashInHand:(A.actualCashInHand??0).toString()}),l(!0),d(A.id);else{let ae=0;Y&&(ae=Y.actualCashInHand??0),i({offlineSales:"",paytmAmount:"",cashAmount:"",onlineSales:"",employeeSalary:"0",previousCashInHand:ae.toString(),usedOnlineMoney:"0",actualCashInHand:""}),l(!1),d(null)}},[r,A,Y]);const ee=async ae=>{ae.preventDefault();const De=parseFloat(s.actualCashInHand)||0,Be=De-oe,Se=m,Fe={date:r,offlineSales:parseFloat(s.offlineSales)||0,paytmAmount:parseFloat(s.paytmAmount)||0,cashAmount:parseFloat(s.cashAmount)||0,onlineSales:parseFloat(s.onlineSales)||0,employeeSalary:D,previousCashInHand:parseFloat(s.previousCashInHand)||0,usedOnlineMoney:parseFloat(s.usedOnlineMoney)||0,actualCashInHand:De,cashOffset:Be,salesDiscrepancy:A?.salesDiscrepancy!==void 0?A.salesDiscrepancy:Be,approvalRequired:R,approvalStatus:Se?"pending":"approved",createdBy:e.user?.employeeId||e.user?.email||"unknown",approvedBy:Se?A?.approvedBy||null:e.user?.employeeId||e.user?.email||"self",approvedAt:Se?A?.approvedAt||null:new Date().toISOString(),approvalRequested:A?.approvalRequested||!1,approvalRequestedAt:A?.approvalRequestedAt||null,requestedCashInHand:A?.requestedCashInHand||null,requestedOffset:A?.requestedOffset||null,rejectedBy:A?.rejectedBy||null,rejectedAt:A?.rejectedAt||null,rejectionReason:A?.rejectionReason||null,storeId:t||e.user?.storeId||void 0};try{if(o&&u?await e.updateSalesData(u,Fe):await e.addSalesData(Fe),N.length>0){const ze=await Yo(),Ee=y.map(Ke=>Ke.id),He=ze.filter(Ke=>Ke.date===r&&Ee.includes(Ke.employeeId));for(const Ke of He)await Ep(Ke.id),console.log("Deleted old payout:",Ke.id);const Nt=N.filter(Ke=>Ke.employeeId&&Ke.amount).map(Ke=>{const kt=y.find(ft=>ft.id===Ke.employeeId);return{id:crypto.randomUUID(),employeeId:Ke.employeeId,employeeName:kt?.name||"",amount:parseFloat(Ke.amount),date:r,createdAt:new Date().toISOString()}});Nt.length>0&&(await aN(Nt),console.log("Contract worker payouts synced to payroll:",Nt))}else{const ze=await Yo(),Ee=y.map(Nt=>Nt.id),He=ze.filter(Nt=>Nt.date===r&&Ee.includes(Nt.employeeId));for(const Nt of He)await Ep(Nt.id),console.log("Deleted payout (no workers entered):",Nt.id)}alert("Sales data and contract worker payouts saved successfully!")}catch(ze){console.error("Error saving sales data:",ze),alert("Failed to save sales data. Please try again.")}},se=async()=>{if(!u)return;const ae=parseFloat(s.actualCashInHand)||0,De=ae-oe;if(confirm(`Request approval for cash discrepancy of ${Math.abs(De).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(u,ae,De),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},xe=async ae=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(ae),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},ge=async ae=>{const De=prompt("Please enter reason for rejection:");if(De)try{await e.rejectDiscrepancy(ae,De),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},Me=parseFloat(s.onlineSales)||0,ce=parseFloat(s.offlineSales)||0,me=parseFloat(s.paytmAmount)||0,Oe=parseFloat(s.cashAmount)||0,q=me+Oe,Ne=Math.abs(ce-q)>.01;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(Zm,{selectedDate:r,onDateChange:n}),W&&e.isManager&&a.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Cn,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),f&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ae=>ae.approvalRequested&&!ae.approvedBy&&!ae.rejectedBy).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Cn,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Discrepancy Approval Requests"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ae=>ae.approvalRequested&&!ae.approvedBy&&!ae.rejectedBy).map(ae=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(ae.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Expected Cash: ",(ae.actualCashInHand-ae.cashOffset).toFixed(2)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested Cash: ",(ae.requestedCashInHand||0).toFixed(2)]}),a.jsxs("p",{className:"text-sm mt-1",children:["Discrepancy: ",a.jsxs("span",{className:(ae.requestedOffset||0)>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[(ae.requestedOffset||0)>0?"+":"","",(ae.requestedOffset||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>xe(ae.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>ge(ae.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(en,{className:"w-4 h-4"}),"Reject"]})]})]},ae.id))})]}),e.salesData.filter(ae=>ae.approvalRequired&&!ae.approvedBy&&!ae.approvalRequested).length>0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Cn,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ae=>ae.approvalRequired&&!ae.approvedBy&&!ae.approvalRequested).map(ae=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900",children:new Date(ae.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",a.jsxs("span",{className:ae.cashOffset>0?"text-green-600":"text-red-600",children:[ae.cashOffset>0?"+":"","",ae.cashOffset.toFixed(2)]})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(ae.actualCashInHand-ae.cashOffset).toFixed(2)," | Actual: ",ae.actualCashInHand.toFixed(2)]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveSalesData(ae.id),alert("Approved successfully!")}catch{alert("Failed to approve")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve"]})]},ae.id))})]}),e.salesData.filter(ae=>ae.approvalRequired&&!ae.approvedBy||ae.approvalRequested&&!ae.approvedBy&&!ae.rejectedBy).length===0&&a.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Cn,{className:"w-6 h-6 text-[#E8A87C]"}),a.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending approvals at the moment."})]})]}),x&&a.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ae=>ae.approvalStatus==="pending"&&ae.createdBy!==e.user?.employeeId).length>0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ls,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("div",{className:"space-y-3",children:e.salesData.filter(ae=>ae.approvalStatus==="pending"&&ae.createdBy!==e.user?.employeeId).map(ae=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-900 font-medium",children:new Date(ae.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",ae.createdBy]}),a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",(ae.offlineSales+ae.onlineSales).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),a.jsxs("span",{className:"ml-1 font-medium",children:["",ae.actualCashInHand.toFixed(2)]})]})]}),Math.abs(ae.cashOffset)>0&&a.jsxs("p",{className:"text-sm mt-1",children:["Cash Offset: ",a.jsxs("span",{className:ae.cashOffset>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[ae.cashOffset>0?"+":"","",ae.cashOffset.toFixed(2)]})]})]}),a.jsxs("button",{onClick:async()=>{if(confirm(`Approve sales data for ${new Date(ae.date).toLocaleDateString()}?`))try{await e.approveSalesData(ae.id),alert("Sales data approved successfully!")}catch{alert("Failed to approve sales data")}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve Sales Data"]})]},ae.id))})]}),e.salesData.filter(ae=>ae.approvalStatus==="pending"&&ae.createdBy!==e.user?.employeeId).length===0&&a.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ls,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]}),m&&A&&A.approvalStatus==="pending"&&a.jsxs("div",{className:"mt-6 bg-[#FFF9E6] border-2 border-[#FFD54F] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Cn,{className:"w-6 h-6 text-orange-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),a.jsxs("p",{className:"text-gray-700",children:["Your sales entry for ",new Date(A.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from the Operations Manager."]})]}),m&&A&&A.approvalStatus==="approved"&&a.jsxs("div",{className:"mt-6 bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fr,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Approved"})]}),a.jsxs("p",{className:"text-gray-700",children:[" Your sales entry for ",new Date(A.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," has been approved by ",A.approvedBy,"."]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(Jn,{className:"w-6 h-6 text-green-600"}),a.jsx("h2",{className:"text-gray-900",children:"Sales Entry"})]}),a.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#D4E6F1] to-[#AED6F1] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(F9,{className:"w-5 h-5 text-[#5499C7]"}),"Offline Sales"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Offline Sales ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.offlineSales,onChange:ae=>i({...s,offlineSales:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!v})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.paytmAmount,onChange:ae=>i({...s,paytmAmount:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!v})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.cashAmount,onChange:ae=>i({...s,cashAmount:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!v})]})]}),Ne&&a.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg text-sm",children:[" Payment mode total (",q.toFixed(2),") doesn't match offline sales (",ce.toFixed(2),")"]}),!Ne&&ce>0&&a.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[a.jsx(fr,{className:"w-4 h-4"}),"Payment modes match total sales"]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#FFE6CC] to-[#FFDAB9] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(pn,{className:"w-5 h-5 text-[#E8A87C]"}),"Online Sales"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Online Sales (Zomato + Swiggy) ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.onlineSales,onChange:ae=>i({...s,onlineSales:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!v})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E0F2F7] to-[#B3E5FC] rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(U7,{className:"w-5 h-5 text-[#4FC3F7]"}),"Used Online Money"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount Used from Paytm ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.usedOnlineMoney,onChange:ae=>i({...s,usedOnlineMoney:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!v}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter amount if Paytm balance was used for expenses"})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[a.jsx(wn,{className:"w-5 h-5 text-purple-600"}),"Contract Worker Payouts"]}),e.isManager&&a.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[a.jsx(ao,{className:"w-4 h-4"}),"Add Worker"]})]}),w?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):y.length===0?a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-gray-700",children:a.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):a.jsxs("div",{className:"space-y-3",children:[N.length===0?a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):N.map((ae,De)=>{const Be=y.find(Se=>Se.id===ae.employeeId);return a.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-3 space-y-2",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Worker"}),a.jsxs("select",{value:ae.employeeId,onChange:Se=>M(De,"employeeId",Se.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",disabled:!e.isManager,required:!0,children:[a.jsx("option",{value:"",children:"Choose a worker..."}),y.map(Se=>a.jsxs("option",{value:Se.id,children:[Se.name," (",Se.employeeId,")"]},Se.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount Paid ()"}),a.jsx("input",{type:"number",step:"0.01",value:ae.amount,onChange:Se=>M(De,"amount",Se.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",placeholder:Be?.dailyRate?`Suggested: ${Be.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),Be?.dailyRate&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",Be.dailyRate]})]})]}),e.isManager&&a.jsx("button",{type:"button",onClick:()=>C(De),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:a.jsx(en,{className:"w-4 h-4"})})]})},De)}),N.length>0&&a.jsxs("div",{className:"bg-purple-600 text-white rounded-lg p-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm",children:"Total Contract Payouts:"}),a.jsxs("span",{className:"text-lg",children:["",D.toFixed(2)]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50 p-2 rounded border border-purple-200",children:[" ",a.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),D>0&&a.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100 p-2 rounded border border-purple-300 flex items-center gap-1",children:[" ",a.jsx("strong",{children:"Cash Impact:"})," ",D.toFixed(2)," will be deducted from offline cash when calculating cash in hand."]})]}),(O||F)&&a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-5 h-5 text-amber-600"}),O?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Left ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.previousCashInHand,onChange:ae=>i({...s,previousCashInHand:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!v,required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!O&&!F&&a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[a.jsxs("h3",{className:"text-gray-900 mb-2 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-5 h-5 text-gray-600"}),"Cash Left from Previous Day (Auto-Calculated)"]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("p",{className:"text-2xl text-gray-900",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" This is automatically calculated from previous day's cash left after deducting expenses and salaries.",F&&" You can edit this only on the 1st of the month."]})]})]}),!O&&a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ji,{className:"w-5 h-5 text-teal-600"}),"Cash Reconciliation"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Expected Cash in Hand"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",oe.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous Cash: ",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + Amount Used from Paytm: ",(parseFloat(s.usedOnlineMoney)||0).toFixed(2)," + Cash Received: ",Oe.toFixed(2)," - Expenses: ",Z.toFixed(2)," - Fixed Costs (Cash): ",re.toFixed(2)," - Contract Payouts: ",D.toFixed(2)]}),a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View expense breakdown"}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[a.jsxs("p",{children:["Inventory Cost: ",e.inventory.filter(ae=>ae.date===r).reduce((ae,De)=>ae+De.totalCost,0).toFixed(2)," (",e.inventory.filter(ae=>ae.date===r).length," items)"]}),a.jsxs("p",{children:["Overhead Cost: ",e.overheads.filter(ae=>ae.date===r).reduce((ae,De)=>ae+De.amount,0).toFixed(2)," (",e.overheads.filter(ae=>ae.date===r).length," items)"]}),a.jsxs("p",{children:["Fixed Costs (Cash): ",re.toFixed(2)," (",e.fixedCosts.filter(ae=>ae.date===r&&(ae.paymentMethod==="cash"||ae.paymentMethod==="both")).length," items)"]}),a.jsxs("p",{className:"font-medium mt-1",children:["Total: ",(Z+re).toFixed(2)]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Actual Cash in Hand ()"}),a.jsx("input",{type:"number",step:"0.01",value:s.actualCashInHand,onChange:ae=>i({...s,actualCashInHand:ae.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!v}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),s.actualCashInHand&&a.jsxs("div",{className:`rounded-lg p-3 border-2 ${Math.abs(K)===0?"bg-green-100 border-green-300":R?"bg-red-100 border-red-300":"bg-yellow-100 border-yellow-300"}`,children:[a.jsx("p",{className:"text-sm font-medium",children:Math.abs(K)===0?a.jsxs("span",{className:"text-green-700 flex items-center gap-2",children:[a.jsx(fr,{className:"w-4 h-4"}),"Perfect Match! No discrepancy."]}):R?a.jsxs("span",{className:"text-red-700 flex items-center gap-2",children:[a.jsx(Cn,{className:"w-4 h-4"}),"High Discrepancy: ",K>0?"+":"","",K.toFixed(2)]}):a.jsxs("span",{className:"text-yellow-700",children:["Small Offset: ",K>0?"+":"","",K.toFixed(2)]})}),R&&!A?.approvedBy&&!A?.approvalRequested&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Exceeds 500 limit - Save first, then request cluster head approval"}),A?.approvalRequested&&!A?.approvedBy&&!A?.rejectedBy&&a.jsxs("p",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[a.jsx(Cn,{className:"w-3 h-3"}),"Approval pending from cluster head"]}),A?.approvedBy&&a.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[a.jsx(ls,{className:"w-3 h-3"}),"Approved by: ",A.approvedBy]}),A?.rejectedBy&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[a.jsxs("p",{className:"flex items-center gap-1",children:[a.jsx(en,{className:"w-3 h-3"}),"Rejected by: ",A.rejectedBy]}),A.rejectionReason&&a.jsxs("p",{className:"mt-1 italic",children:["Reason: ",A.rejectionReason]}),a.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})]})]})]}),v&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{type:"submit",disabled:Ne,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Update Sales Data":"Save Sales Data"}),o&&u&&R&&!A?.approvedBy&&!A?.approvalRequested&&a.jsxs("button",{type:"button",onClick:se,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Cn,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),o&&A?.approvalRequested&&!A?.approvedBy&&!A?.rejectedBy&&a.jsx("div",{className:"w-full px-6 py-3 bg-orange-100 border-2 border-orange-300 text-orange-800 rounded-lg text-center",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-[#B8E6B8] to-[#A3D9A5] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Jn,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Total Sales"})]}),a.jsxs("p",{className:"text-4xl",children:["",(ce+Me).toLocaleString()]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/20 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Offline Sales:"}),a.jsxs("span",{children:["",ce.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{children:["",Me.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#A8D8EA] to-[#93C5FD] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ji,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Payment Breakdown"})]}),a.jsxs("div",{className:"space-y-3 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Cash Received:"}),a.jsxs("span",{className:"text-2xl",children:["",Oe.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Paytm Received:"}),a.jsxs("span",{className:"text-2xl",children:["",me.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/20",children:[a.jsx("span",{children:"Online Sales:"}),a.jsxs("span",{className:"text-xl",children:["",Me.toLocaleString()]})]})]})]}),!O&&a.jsxs("div",{className:"bg-gradient-to-br from-[#D8B5FF] to-[#C7A7FF] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ji,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Cash Status"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:"Expected Cash"}),a.jsxs("p",{className:"text-3xl",children:["",oe.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",(parseFloat(s.previousCashInHand)||0).toFixed(2)," + ",Oe.toFixed(2)," - ",Z.toFixed(2)," - ",D.toFixed(2)]})]}),s.actualCashInHand&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Actual Cash"}),a.jsxs("p",{className:"text-3xl",children:["",(parseFloat(s.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(K)>0&&a.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[a.jsx("p",{className:"text-sm",children:"Difference"}),a.jsxs("p",{className:`text-2xl ${K>0?"text-green-700":"text-red-700"}`,children:[K>0?"+":"","",K.toFixed(2)]})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#C7A7FF] to-[#B794F4] rounded-xl shadow-lg p-6 text-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(B9,{className:"w-6 h-6"}),a.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),a.jsxs("p",{className:"text-4xl mb-4",children:["",Q.toLocaleString()]}),a.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between text-green-700",children:[a.jsx("span",{children:"Total Paytm Received:"}),a.jsxs("span",{children:["",e.salesData.filter(ae=>ae.date<=r).reduce((ae,De)=>ae+(De.paytmAmount??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Total Used:"}),a.jsxs("span",{children:["",e.salesData.filter(ae=>ae.date<=r).reduce((ae,De)=>ae+(De.usedOnlineMoney??0),0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-700",children:[a.jsx("span",{children:"- Fixed Costs (Online):"}),a.jsxs("span",{children:["",e.fixedCosts.filter(ae=>ae.date<=r).reduce((ae,De)=>De.paymentMethod==="online"?ae+De.amount:De.paymentMethod==="both"&&De.onlineAmount?ae+De.onlineAmount:ae,0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[a.jsx("span",{children:"Used Today:"}),a.jsxs("span",{children:["",(parseFloat(s.usedOnlineMoney)||0).toLocaleString()]})]}),ne>0&&a.jsxs("div",{className:"flex justify-between text-gray-700",children:[a.jsx("span",{children:"Fixed Costs Today (Online):"}),a.jsxs("span",{children:["",ne.toLocaleString()]})]})]})]})]})]})]})}function IF({onClose:e,employees:t}){const[r,n]=L.useState([]),[s,i]=L.useState({}),[o,l]=L.useState(!1),[u,d]=L.useState(null);L.useEffect(()=>{const x=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");n(x);const v={};x.forEach(y=>{const b=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,N=`Bhandar@${y.employeeId}`;v[y.id]={email:b,password:N}}),i(v)},[t]);const f=(x,v,y)=>{i(b=>({...b,[x]:{...b[x],[v]:y}}))},p=async()=>{l(!0),d(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const x=r.map(b=>({name:b.name,email:s[b.id].email,password:s[b.id].password,employeeId:b.employeeId}));console.log("Creating accounts for employees:",x);const v=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify({employees:x})}),y=await v.json();if(console.log("Server response:",y),!v.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${v.status})`);d({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(x){console.error("Error creating employee accounts:",x),alert(`Failed to create employee accounts: ${x instanceof Error?x.message:String(x)}`)}finally{l(!1)}},m=()=>{const x=r.map(k=>({"Employee ID":k.employeeId,Name:k.name,Email:s[k.id].email,Password:s[k.id].password,"Monthly Salary":k.monthlySalary||0})),v=[Object.keys(x[0]).join(","),...x.map(k=>Object.values(k).join(","))].join(`
`),y=new Blob([v],{type:"text/csv"}),b=window.URL.createObjectURL(y),N=document.createElement("a");N.href=b,N.download="employee-credentials.csv",N.click(),window.URL.revokeObjectURL(b)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Ni,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[a.jsx(Hr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:u.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),a.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[a.jsx(Zi,{className:"w-5 h-5"}),a.jsx("span",{children:"Accounts Prepared"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.deleted})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(Hr,{className:"w-5 h-5"}),a.jsx("span",{children:"Failed"})]}),a.jsx("div",{className:"text-2xl mt-2",children:u.failed})]})]}),a.jsx("div",{className:"space-y-2",children:u.details.map((x,v)=>a.jsx("div",{className:`p-3 rounded-lg border ${x.status==="created"?"bg-green-50 border-green-200":x.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:x.email}),a.jsxs("span",{className:"text-sm",children:[x.status==="created"&&a.jsx("span",{className:"text-green-700",children:" Created"}),x.status==="updated"&&a.jsx("span",{className:"text-blue-700",children:" Updated"}),x.error&&a.jsxs("span",{className:"text-red-700",children:[" ",x.error]})]})]})},v))}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),a.jsx("div",{className:"space-y-3",children:r.map(x=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm",children:x.name}),a.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",x.employeeId]})]}),x.email&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(wh,{className:"w-3 h-3"}),"Email Address"]}),a.jsx("input",{type:"email",value:s[x.id]?.email||"",onChange:v=>f(x.id,"email",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(K1,{className:"w-3 h-3"}),"Password"]}),a.jsx("input",{type:"text",value:s[x.id]?.password||"",onChange:v=>f(x.id,"password",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},x.id))})]})}),a.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!u&&a.jsx("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ni,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function Ja({value:e,onChange:t,label:r,className:n="",min:s,max:i}){const o=L.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},u=f=>f?new Date(f+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"Select date",d=n.includes("w-full");return a.jsxs("div",{className:d?"w-full":`flex items-center gap-2 ${n}`,children:[r&&a.jsx("label",{className:`text-sm text-gray-600 ${d?"block mb-2":"whitespace-nowrap"}`,children:r}),a.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${d?"w-full":"min-w-[160px]"}`,children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0 pointer-events-none"}),a.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1 pointer-events-none",children:u(e)}),a.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]})]})}const coe=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Salary Payment</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function DF({userRole:e,selectedDate:t,userEmployeeId:r,userName:n,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,u]=L.useState("contract"),[d,f]=L.useState([]),[p,m]=L.useState([]),[x,v]=L.useState(!0),[y,b]=L.useState(!1),[N,k]=L.useState("current"),[w,P]=L.useState(""),[S,_]=L.useState(""),E=()=>{const Ee=new Date,He=Ee.getFullYear(),Nt=Ee.getMonth(),Ke=new Date(He,Nt+1,0),kt=`${He}-${String(Nt+1).padStart(2,"0")}-01`,ft=Ke.getDate(),Qt=`${He}-${String(Nt+1).padStart(2,"0")}-${String(ft).padStart(2,"0")}`;return{start:kt,end:Qt,monthName:Ee.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},C=()=>{const Ee=new Date,He=Ee.getMonth()===0?Ee.getFullYear()-1:Ee.getFullYear(),Nt=Ee.getMonth()===0?11:Ee.getMonth()-1,Ke=new Date(He,Nt,1),kt=new Date(He,Nt+1,0),ft=`${He}-${String(Nt+1).padStart(2,"0")}-01`,Qt=kt.getDate(),yt=`${He}-${String(Nt+1).padStart(2,"0")}-${String(Qt).padStart(2,"0")}`;return{start:ft,end:yt,monthName:Ke.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},M=E(),D=C(),[A,O]=L.useState(!1),[F,W]=L.useState(null),[Y,Z]=L.useState(!1),[re,ne]=L.useState({employeeIds:[],amount:"",date:t}),[U,oe]=L.useState(!1),[K,R]=L.useState(null),[Q,ee]=L.useState(!1),se=L.useMemo(()=>{let Ee=d;return s&&(Ee=Ee.filter(He=>He.storeId===s||He.storeId===null||He.storeId===void 0)),i&&r&&(Ee=Ee.filter(He=>He.type==="contract"?!0:He.type==="fulltime"?He.inchargeId===r:!1)),Ee},[d,s,i,r]),xe=L.useMemo(()=>{if(!s)return p;const Ee=se.map(He=>He.id);return p.filter(He=>Ee.includes(He.employeeId))},[p,se,s]),ge=L.useMemo(()=>{let Ee;if(N==="current")Ee=xe.filter(He=>He.date>=M.start&&He.date<=M.end);else if(N==="last")Ee=xe.filter(He=>He.date>=D.start&&He.date<=D.end);else{if(!w||!S)return[];Ee=xe.filter(He=>He.date>=w&&He.date<=S)}return Ee},[xe,N,M,D,w,S]);L.useEffect(()=>{Me()},[]);const Me=async()=>{v(!0);try{console.log("Loading employees and payouts from server...");const[Ee,He]=await Promise.all([Zo(),Yo()]);console.log("Loaded employees:",Ee),console.log("Loaded payouts:",He),f(Ee||[]),m(He||[])}catch(Ee){console.error("Error loading payroll data:",Ee)}finally{v(!1)}},ce=async()=>{if(re.employeeIds.length===0||!re.amount){alert("Please select employees and enter amount");return}if(!y)try{b(!0);const Ee=re.employeeIds.map(Nt=>{const Ke=d.find(kt=>kt.id===Nt);return{id:crypto.randomUUID(),employeeId:Nt,employeeName:Ke?.name||"",amount:parseFloat(re.amount),date:re.date,createdAt:new Date().toISOString()}});console.log("Adding payouts:",Ee);const He=await aN(Ee);console.log("Payouts added successfully:",He),m([...p,...Ee]),Z(!1),ne({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch(Ee){console.error("Error adding payout:",Ee);const He=Ee instanceof Error?Ee.message:"Unknown error occurred";alert(`Failed to add payout: ${He}`)}finally{b(!1)}},me=async()=>{if(F)try{console.log("PayrollManagement: Updating employee:",F),await(void 0)(F.id,F),f(d.map(Ee=>Ee.id===F.id?F:Ee)),O(!1),W(null),alert("Employee updated successfully!")}catch(Ee){console.error("PayrollManagement: Error updating employee:",Ee);const He=Ee instanceof Error?Ee.message:"Unknown error";alert(`Failed to update employee: ${He}`)}},Oe=async Ee=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await dD(Ee),f(d.filter(He=>He.id!==Ee)),m(p.filter(He=>He.employeeId!==Ee)),alert("Employee deleted successfully!")}catch(He){console.error("Error deleting employee:",He),alert("Failed to delete employee")}},q=async()=>{if(K)try{await vD(K.id,{amount:K.amount,date:K.date}),m(p.map(Ee=>Ee.id===K.id?K:Ee)),oe(!1),R(null),alert("Payout updated successfully!")}catch(Ee){console.error("Error updating payout:",Ee),alert("Failed to update payout")}},Ne=async Ee=>{if(confirm("Are you sure you want to delete this payout?"))try{await Ep(Ee),m(p.filter(He=>He.id!==Ee)),alert("Payout deleted successfully!")}catch(He){console.error("Error deleting payout:",He),alert("Failed to delete payout")}},ae=()=>{const Ee=se.filter(ft=>ft.type==="contract"),He=ge.filter(ft=>se.find(yt=>yt.id===ft.employeeId)?.type==="contract"),Nt=He.reduce((ft,Qt)=>ft+Qt.amount,0),Ke=Ee.map(ft=>{const Qt=He.filter(wt=>wt.employeeId===ft.id),yt=new Set(Qt.map(wt=>wt.date));return{...ft,daysWorked:yt.size,totalPay:Qt.reduce((wt,vt)=>wt+vt.amount,0)}}),kt=Ke.reduce((ft,Qt)=>ft+Qt.daysWorked,0);return{totalPayout:Nt,employeeWorkDays:Ke,totalDaysWorked:kt}},De=()=>{const Ee=se.filter(kt=>kt.type==="fulltime"),He=ge.filter(kt=>se.find(Qt=>Qt.id===kt.employeeId)?.type==="fulltime"),Nt=He.reduce((kt,ft)=>kt+ft.amount,0),Ke=Ee.map(kt=>{const ft=He.filter(Qt=>Qt.employeeId===kt.id);return{...kt,totalPaid:ft.reduce((Qt,yt)=>Qt+yt.amount,0),lastPayout:ft.length>0?ft[ft.length-1]:null}});return{totalPayout:Nt,employeePayouts:Ke}},Be=Ee=>Ee.split(" ").map(He=>He[0]).join("").toUpperCase().slice(0,2),Se=Ee=>{const He=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return He[Ee%He.length]};ae(),De();const Fe=l==="contract"?se.filter(Ee=>Ee.type==="contract"):se.filter(Ee=>Ee.type==="fulltime"),ze=()=>l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return x?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&a.jsx("button",{onClick:()=>u("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),a.jsx("button",{onClick:()=>u("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),e==="cluster_head"&&a.jsx("button",{onClick:()=>u("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"})]})}),a.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[a.jsx("div",{className:"flex gap-4 flex-wrap",children:ze()&&a.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Jn,{className:"w-4 h-4"}),"Add Payout"]})}),a.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-5 h-5 text-purple-700"}),a.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>k("current"),className:`px-4 py-2 rounded-lg transition-colors ${N==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),a.jsx("button",{onClick:()=>k("last"),className:`px-4 py-2 rounded-lg transition-colors ${N==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),a.jsx("button",{onClick:()=>k("custom"),className:`px-4 py-2 rounded-lg transition-colors ${N==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),N==="current"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:M.monthName})}):N==="last"?a.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:a.jsx("span",{className:"text-gray-900 font-medium",children:D.monthName})}):a.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[a.jsx(Ja,{label:"From:",value:w,onChange:P}),a.jsx(Ja,{label:"To:",value:S,onChange:_})]})]})})]}),l==="contract"&&(()=>{const Ee=d.filter(Ke=>Ke.type==="contract"),He=ge.filter(Ke=>d.find(ft=>ft.id===Ke.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",d.length),console.log("Contract employees:",Ee.length,Ee),console.log("Contract payouts:",He.length,He);const Nt=He.reduce((Ke,kt)=>Ke+kt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Ee.length})]})]}),Ee.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No contract employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ee.map((Ke,kt)=>{const ft=He.filter(wt=>wt.employeeId===Ke.id),Qt=ft.reduce((wt,vt)=>wt+vt.amount,0),yt=new Set(ft.map(wt=>wt.date)).size;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${Se(kt)} flex items-center justify-center text-white`,children:Be(Ke.name)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.name}),a.jsx("div",{className:"text-xs text-gray-500",children:Ke.employeeId})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{W(Ke),O(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Oe(Ke.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:a.jsx(ps,{className:"w-4 h-4"})})]})]}),Ke.role&&a.jsx("div",{className:"mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ke.role})}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Phone:"}),a.jsx("span",{className:"text-gray-900",children:Ke.phone})]}),Ke.dailyRate&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),a.jsxs("span",{className:"text-green-600",children:["",Ke.dailyRate]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),a.jsx("span",{className:"text-gray-900",children:yt})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),a.jsxs("span",{className:"text-gray-900",children:["",Qt.toLocaleString()]})]})]})]},Ke.id)})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",N==="current"?M.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",Nt.toLocaleString()]})]})]}),He.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:He.sort((Ke,kt)=>new Date(kt.date).getTime()-new Date(Ke.date).getTime()).map((Ke,kt)=>{const ft=d.find(Qt=>Qt.id===Ke.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Se(kt)} flex items-center justify-center text-white text-sm`,children:Be(Ke.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.employeeName}),ft?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:ft.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:ft?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ke.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ke.amount.toLocaleString()]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{R(Ke),oe(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Ne(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(ps,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const Ee=p.filter(yt=>yt.employeeId===r),Nt=d.find(yt=>yt.employeeId===r)?.type||"fulltime",Ke=new Date;Ke.getDate();const kt=[];for(let yt=0;yt<12;yt++){const wt=new Date(Ke.getFullYear(),Ke.getMonth()-yt,1),vt=wt.toLocaleDateString("en-US",{month:"long"}),bt=wt.getFullYear().toString(),Gt=wt.getMonth()+1,tn=new Date(wt.getFullYear(),wt.getMonth()+1,5),ur=Ke>=tn,zr=Ee.filter(ut=>{const at=new Date(ut.date);return at.getMonth()+1===Gt&&at.getFullYear()===wt.getFullYear()}),ye=zr.reduce((ut,at)=>ut+at.amount,0);kt.push({month:vt,year:bt,payouts:zr,total:ye,isAvailable:ur})}const ft=ge.filter(yt=>yt.employeeId===r),Qt=ft.reduce((yt,wt)=>yt+wt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),a.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Received"}),a.jsx("p",{className:"text-sm text-gray-500",children:N==="current"?`for ${M.monthName}`:N==="last"?`for ${D.monthName}`:`from ${w} to ${S}`})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-3xl text-green-600",children:["",Qt.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[ft.length," payment",ft.length!==1?"s":""]})]})]})}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Si,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:kt.map((yt,wt)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${yt.isAvailable&&yt.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[yt.month," ",yt.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[yt.payouts.length," payment",yt.payouts.length!==1?"s":""]})]}),yt.isAvailable&&yt.payouts.length>0?a.jsxs("button",{onClick:()=>coe(n||"Employee",r,yt.month,yt.year,yt.payouts,Nt),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(wi,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:yt.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",yt.total.toLocaleString("en-IN")]})]})]},wt))})]}),a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),ft.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts found for the selected period"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),a.jsx("tbody",{children:ft.sort((yt,wt)=>new Date(wt.date).getTime()-new Date(yt.date).getTime()).map(yt=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:new Date(yt.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:r})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-green-600",children:["",yt.amount.toLocaleString()]})})]},yt.id))})]})})]})})(),l==="permanent"&&(()=>{const Ee=d.filter(Ke=>Ke.type==="fulltime"),He=ge.filter(Ke=>d.find(ft=>ft.id===Ke.employeeId)?.type==="fulltime"),Nt=He.reduce((Ke,kt)=>Ke+kt.amount,0);return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-2xl text-blue-600",children:Ee.length})]})]}),Ee.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No permanent employees yet"}),a.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),a.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",N==="current"?"This Month":N==="last"?"Last Month":"Period",")"]}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Ee.map((Ke,kt)=>{const ft=He.filter(wt=>wt.employeeId===Ke.id),Qt=ft.reduce((wt,vt)=>wt+vt.amount,0),yt=ft.length>0?ft.sort((wt,vt)=>new Date(vt.date).getTime()-new Date(wt.date).getTime())[0]:null;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Se(kt)} flex items-center justify-center text-white text-sm`,children:Be(Ke.name)}),a.jsx("div",{className:"text-gray-900",children:Ke.name})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ke.employeeId})}),a.jsx("td",{className:"py-4 px-4",children:Ke.role&&a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Ke.role})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:Ke.phone})}),a.jsx("td",{className:"py-4 px-4",children:yt?a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:new Date(yt.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["",yt.amount.toLocaleString()]})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Qt.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{W(Ke),O(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Oe(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:a.jsx(ps,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",N==="current"?M.monthName:N==="last"?D.monthName:"selected period"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),a.jsxs("div",{className:"text-2xl text-green-600",children:["",Nt.toLocaleString()]})]})]}),He.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[a.jsx(Jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No payouts recorded for this period"}),a.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):a.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&a.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:He.sort((Ke,kt)=>new Date(kt.date).getTime()-new Date(Ke.date).getTime()).map((Ke,kt)=>{const ft=d.find(Qt=>Qt.id===Ke.employeeId);return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full ${Se(kt)} flex items-center justify-center text-white text-sm`,children:Be(Ke.employeeName)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:Ke.employeeName}),ft?.role&&a.jsx("div",{className:"text-xs text-gray-500",children:ft.role})]})]})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:ft?.employeeId||"-"})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:new Date(Ke.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"text-gray-900",children:["",Ke.amount.toLocaleString()]})}),e==="cluster_head"&&a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>{R(Ke),oe(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Ne(Ke.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:a.jsx(ps,{className:"w-4 h-4"})})]})})]},Ke.id)})})]})})]})]})})()]})]}),A&&F&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),a.jsx("button",{onClick:()=>O(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),a.jsx("input",{type:"text",value:F.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:F.name,onChange:Ee=>W({...F,name:Ee.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),a.jsx("input",{type:"tel",value:F.phone,onChange:Ee=>W({...F,phone:Ee.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),a.jsx("input",{type:"text",value:F.role||"",onChange:Ee=>W({...F,role:Ee.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),F.type==="contract"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),a.jsx("input",{type:"number",value:F.dailyRate||"",onChange:Ee=>W({...F,dailyRate:parseFloat(Ee.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:me,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),Y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),a.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),a.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:Fe.map(Ee=>a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[a.jsx("input",{type:"checkbox",checked:re.employeeIds.includes(Ee.id),onChange:He=>{He.target.checked?ne({...re,employeeIds:[...re.employeeIds,Ee.id]}):ne({...re,employeeIds:re.employeeIds.filter(Nt=>Nt!==Ee.id)})},className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[Ee.name," (",Ee.employeeId,")"]})]},Ee.id))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[re.employeeIds.length," employee(s) selected"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:re.amount,onChange:Ee=>ne({...re,amount:Ee.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),a.jsx(Ja,{label:"Date *",value:re.date,onChange:Ee=>ne({...re,date:Ee}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:ce,disabled:y,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:y?"Adding...":"Add Payout"})]})]})}),U&&K&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),a.jsx("button",{onClick:()=>oe(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),a.jsx("input",{type:"text",value:K.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),a.jsx("input",{type:"number",step:"0.01",value:K.amount,onChange:Ee=>R({...K,amount:parseFloat(Ee.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsx(Ja,{label:"Date *",value:K.date,onChange:Ee=>R({...K,date:Ee}),className:"w-full"})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[a.jsx("button",{onClick:()=>oe(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:q,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),Q&&a.jsx(IF,{onClose:()=>ee(!1),employees:d})]})}function uoe(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let A2=1;class doe{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:A2++,o=this.toasts.find(u=>u.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:n}),{...u,...t,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async d=>{if(o=["resolve",d],he.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(foe(d)&&!d.ok){i=!1;const p=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,v=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...v})}else if(d instanceof Error){i=!1;const p=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description,v=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:m,...v})}else if(r.success!==void 0){i=!1;const p=typeof r.success=="function"?await r.success(d):r.success,m=typeof r.description=="function"?await r.description(d):r.description,v=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:n,type:"success",description:m,...v})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(d):r.error,p=typeof r.description=="function"?await r.description(d):r.description,x=typeof f=="object"&&!he.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:p,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),u=()=>new Promise((d,f)=>l.then(()=>o[0]==="reject"?f(o[1]):d(o[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(t,r)=>{const n=r?.id||A2++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Cs=new doe,hoe=(e,t)=>{const r=t?.id||A2++;return Cs.addToast({title:e,...t,id:r}),r},foe=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",poe=hoe,moe=()=>Cs.toasts,goe=()=>Cs.getActiveToasts(),Nr=Object.assign(poe,{success:Cs.success,info:Cs.info,warning:Cs.warning,error:Cs.error,custom:Cs.custom,message:Cs.message,promise:Cs.promise,dismiss:Cs.dismiss,loading:Cs.loading},{getHistory:moe,getToasts:goe});uoe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function xoe({context:e,selectedStoreId:t,selectedProductionHouseId:r}){const[n,s]=L.useState("week"),[i,o]=L.useState(""),[l,u]=L.useState(""),[d,f]=L.useState([]),[p,m]=L.useState(null),[x,v]=L.useState(!0),[y,b]=L.useState(null),N=t||e.user?.storeId;L.useEffect(()=>{w()},[e.inventory,e.salesData,e.productionData,e.stockRequests,n,i,l,N]);const k=()=>{const C=new Date;let M=new Date;switch(n){case"day":M=new Date(C);break;case"week":M=new Date(C),M.setDate(C.getDate()-7);break;case"month":M=new Date(C),M.setMonth(C.getMonth()-1);break;case"custom":if(i&&l)return{startDate:new Date(i),endDate:new Date(l)};M=new Date(C),M.setDate(C.getDate()-7);break}return{startDate:M,endDate:C}},w=()=>{v(!0);const{startDate:C,endDate:M}=k(),D=new Map,A=new Date(C);for(;A<=M;){const U=A.getFullYear(),oe=String(A.getMonth()+1).padStart(2,"0"),K=String(A.getDate()).padStart(2,"0"),R=`${U}-${oe}-${K}`;D.set(R,{date:R,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",productionLogged:!1,productionLoggedAt:null,productionLoggedBy:"",stockRequestLogged:!1,stockRequestLoggedAt:null,stockRequestLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),A.setDate(A.getDate()+1)}const O=new Map;(N?e.inventory.filter(U=>U.storeId===N):e.inventory).forEach(U=>{O.has(U.date)||O.set(U.date,[]),O.get(U.date)?.push(U)}),O.forEach((U,oe)=>{if(D.has(oe)){const K=D.get(oe);if(K.inventoryLogged=!0,K.inventoryCount=U.length,U.length>0){const R=U[0],ee=R.id.split("-")[0];if(R.createdByName?K.inventoryLoggedBy=R.createdByName:R.createdByEmail?K.inventoryLoggedBy=R.createdByEmail:R.createdBy?typeof R.createdBy=="string"&&R.createdBy.includes("-")?K.inventoryLoggedBy=R.userId?`User ${R.userId.substring(0,8)}`:"Manager":K.inventoryLoggedBy=R.createdBy:R.userId?K.inventoryLoggedBy=`User ${R.userId.substring(0,8)}`:K.inventoryLoggedBy="Unknown User",ee){const se=parseInt(ee);if(!isNaN(se)&&se>0){K.inventoryLoggedAt=new Date(se).toISOString();const xe=new Date(se),ge=new Date(oe+"T23:59:59");K.lateEntry=xe>ge}}}}}),(N?e.salesData.filter(U=>U.storeId===N):e.salesData).forEach(U=>{if(D.has(U.date)){const oe=D.get(U.date);oe.salesLogged=!0,oe.cashDiscrepancy=Math.abs(U.salesDiscrepancy!==void 0?U.salesDiscrepancy:U.cashOffset||0),U.createdByName?oe.salesLoggedBy=U.createdByName:U.createdByEmail?oe.salesLoggedBy=U.createdByEmail:U.createdBy?typeof U.createdBy=="string"&&U.createdBy.includes("-")?oe.salesLoggedBy="Manager":oe.salesLoggedBy=U.createdBy:oe.salesLoggedBy="Unknown User",e.user&&(oe.managerEmail=e.user.email,oe.managerName=e.user.name);const K=U.id.split("-")[0];if(K){const R=parseInt(K);if(!isNaN(R)&&R>0){oe.salesLoggedAt=new Date(R).toISOString();const Q=new Date(R),ee=new Date(U.date+"T23:59:59");Q>ee&&(oe.lateEntry=!0)}}}}),(N?e.productionData.filter(U=>U.storeId===N):e.productionData).forEach(U=>{if(D.has(U.date)){const oe=D.get(U.date);oe.productionLogged=!0,U.createdByName?oe.productionLoggedBy=U.createdByName:U.createdByEmail?oe.productionLoggedBy=U.createdByEmail:U.createdBy?typeof U.createdBy=="string"&&U.createdBy.includes("-")?oe.productionLoggedBy="Manager":oe.productionLoggedBy=U.createdBy:oe.productionLoggedBy="Unknown User";const K=U.id.split("-")[0];if(K){const R=parseInt(K);if(!isNaN(R)&&R>0){oe.productionLoggedAt=new Date(R).toISOString();const Q=new Date(R),ee=new Date(U.date+"T23:59:59");Q>ee&&(oe.lateEntry=!0)}}}});const Z=N?e.stockRequests.filter(U=>U.storeId===N):e.stockRequests;console.log(" DataCapture - Stock Requests Debug:",{totalStockRequests:e.stockRequests.length,filteredStockRequests:Z.length,effectiveStoreId:N,stockRequestDates:Z.map(U=>U.requestDate),stockRequestIds:Z.map(U=>U.id),sampleRequest:Z[0]}),Z.forEach(U=>{if(D.has(U.requestDate)){const oe=D.get(U.requestDate);oe.stockRequestLogged=!0,U.requestedByName?oe.stockRequestLoggedBy=U.requestedByName:U.requestedBy?oe.stockRequestLoggedBy=U.requestedBy:oe.stockRequestLoggedBy="Unknown User";const K=U.id.split("-")[0];if(K){const R=parseInt(K);if(!isNaN(R)&&R>1e12){oe.stockRequestLoggedAt=new Date(R).toISOString();const Q=new Date(R),ee=new Date(U.requestDate+"T23:59:59");Q>ee&&(oe.lateEntry=!0)}else oe.stockRequestLoggedAt=new Date(U.requestDate+"T12:00:00").toISOString()}}}),D.forEach(U=>{U.inventoryLogged&&U.salesLogged&&U.productionLogged&&U.stockRequestLogged?U.status="complete":U.inventoryLogged||U.salesLogged||U.productionLogged||U.stockRequestLogged?U.status="partial":U.status="missing"});const re=Array.from(D.values()).sort((U,oe)=>new Date(oe.date).getTime()-new Date(U.date).getTime());f(re);const ne={totalDays:re.length,daysWithData:re.filter(U=>U.status!=="missing").length,totalDiscrepancy:re.reduce((U,oe)=>U+oe.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};ne.avgDiscrepancy=ne.totalDiscrepancy/(re.filter(U=>U.salesLogged).length||1),ne.completionRate=re.filter(U=>U.status==="complete").length/ne.totalDays*100,ne.onTimeRate=re.filter(U=>U.status==="complete"&&!U.lateEntry).length/ne.totalDays*100,m(ne),v(!1)},P=C=>{if(!C)return"-";const M=new Date(C),D=M.toLocaleDateString("en-US",{month:"short",day:"numeric"}),A=M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${D}, ${A}`},S=C=>new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_=C=>{switch(C){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=C=>{switch(C){case"complete":return a.jsx(fr,{className:"w-5 h-5 text-green-600"});case"partial":return a.jsx(Cn,{className:"w-5 h-5 text-yellow-600"});case"missing":return a.jsx(hi,{className:"w-5 h-5 text-red-600"});default:return a.jsx(Zn,{className:"w-5 h-5 text-gray-600"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>s("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="week"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"7 Days"}),a.jsx("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="month"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"30 Days"}),a.jsx("button",{onClick:()=>s("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${n==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),n==="custom"&&a.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[a.jsx(Ja,{label:"Start Date",value:i,onChange:o}),a.jsx(Ja,{label:"End Date",value:l,onChange:u})]})]}),p&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Dr,{className:"w-5 h-5 text-blue-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),a.jsx("p",{className:"text-2xl text-gray-900",children:p.totalDays})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fr,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[p.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zn,{className:"w-5 h-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[p.onTimeRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(G2,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",p.totalDiscrepancy.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(pn,{className:"w-5 h-5 text-purple-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),a.jsxs("p",{className:"text-2xl text-gray-900",children:["",p.avgDiscrepancy.toFixed(2)]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Inventory"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Production"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Stock Request"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:x?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):d.map(C=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[C.lateEntry&&a.jsx(Cn,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),a.jsx("span",{className:"text-sm text-gray-900",children:S(C.date)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[E(C.status),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_(C.status)}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.inventoryLogged?a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[C.inventoryCount," items"]}),a.jsx("p",{className:"text-gray-500",children:P(C.inventoryLoggedAt)}),C.inventoryLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.inventoryLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:P(C.salesLoggedAt)}),C.salesLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.salesLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.productionLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:P(C.productionLoggedAt)}),C.productionLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.productionLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.stockRequestLogged?a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-gray-900",children:" Logged"}),a.jsx("p",{className:"text-gray-500",children:P(C.stockRequestLoggedAt)}),C.stockRequestLoggedBy&&a.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.stockRequestLoggedBy]})]}):a.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?a.jsxs("span",{className:`text-sm ${C.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",C.cashDiscrepancy.toFixed(2)]}):a.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},C.date))})]})})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[a.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fr,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-gray-600",children:"Complete - All data types logged (Inventory, Sales, Production, Stock Request)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cn,{className:"w-4 h-4 text-yellow-600"}),a.jsx("span",{className:"text-gray-600",children:"Partial - At least one data type logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hi,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cn,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (after midnight)"})]})]})]})]})}function yoe({storeId:e,accessToken:t,thresholds:r,onClose:n,onSave:s}){const[i,o]=L.useState(r),[l,u]=L.useState(!1),d=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(m,x,v)=>{const y=parseInt(v)||0;o({...i,[m]:{...i[m],[x]:y}})},p=async()=>{try{u(!0),await e5(t,e,i),s(i),Nr.success("Stock thresholds saved successfully"),n()}catch(m){console.error("Error saving thresholds:",m),Nr.error("Failed to save thresholds")}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:a.jsx(qo,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:n,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:a.jsx(en,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"space-y-4",children:d.map(({key:m,label:x})=>{const v=i[m]||{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:x}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:v.high,onChange:y=>f(m,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:v.medium,onChange:y=>f(m,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:v.low,onChange:y=>f(m,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},m)})})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[a.jsx("button",{onClick:n,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:p,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(zl,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function voe({context:e,highlightRequestId:t,selectedStoreId:r,onNavigateToManageItems:n}){const[s,i]=L.useState([]),[o,l]=L.useState(!0),[u,d]=L.useState(!1),[f,p]=L.useState(""),[m,x]=L.useState("all"),[v,y]=L.useState("daily"),[b,N]=L.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[k,w]=L.useState([]),[P,S]=L.useState({}),[_,E]=L.useState(""),C=()=>new Date().toISOString().split("T")[0],[M,D]=L.useState(C()),[A,O]=L.useState(null),[F,W]=L.useState({}),[Y,Z]=L.useState({}),[re,ne]=L.useState({}),[U,oe]=L.useState({}),[K,R]=L.useState(!1),[Q,ee]=L.useState(null),[se,xe]=L.useState(!1),[ge,Me]=L.useState({}),[ce,me]=L.useState(()=>{const ye=localStorage.getItem("momosPerPlate");return ye?parseInt(ye,10):6}),Oe=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],q=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],Ne=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],ae=e.user?.designation==="store_incharge",De=e.user?.designation==="production_incharge",Be=e.user?.role==="manager",Se=e.user?.role==="cluster_head",Fe=Be||Se||De,ze=L.useMemo(()=>(e.inventoryItems?.filter(ye=>ye.category==="finished_product"&&ye.isActive)||[]).map(ye=>{const ut=ye.displayName.endsWith("Momo")?ye.displayName+"s":ye.displayName;return{key:ye.name,camelKey:ye.name.replace(/_([a-z])/g,at=>at[1].toUpperCase()),label:ye.displayName,legacySalesKey:ut,unit:ye.unit}}),[e.inventoryItems]),Ee=async()=>{try{const ye=Bu(),{data:{session:ut}}=await ye.auth.getSession();return ut?.access_token||null}catch(ye){return console.error("Error getting fresh token:",ye),null}};L.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:ae,isProductionHead:De,isOperationsHead:Be,isClusterHead:Se,canViewAll:Fe})},[e.user,ae,De,Be,Se,Fe]),L.useEffect(()=>{Nt(),Ke(),He()},[e.user,r]),L.useEffect(()=>{k.length>=0&&e.inventoryItems&&e.inventoryItems.length>0&&kt()},[k,e.user,r,e.inventoryItems]),L.useEffect(()=>{if(!ae||!e.user?.storeId)return;const ye=()=>{const at=new Date,Ge=at.getHours(),Et=at.getMinutes(),st=at.toISOString().split("T")[0];if(Ge===15&&Et===0&&A!==st){const pt=new Date(at);pt.setDate(pt.getDate()+1);const Mt=pt.toISOString().split("T")[0];s.some(mt=>mt.storeId===e.user?.storeId&&mt.requestDate===Mt&&mt.status!=="cancelled")||(console.log(" 3 PM Reminder: No stock request found for tomorrow"),Nr.warning(" Reminder: You haven't submitted a stock request for tomorrow yet!",{duration:1e4,description:"Please submit your production request to ensure timely preparation."}),O(st))}};ye();const ut=setInterval(ye,6e4);return()=>clearInterval(ut)},[ae,e.user,s,A]),L.useEffect(()=>{if(!Se&&!De&&!Be)return;const ye=async()=>{try{const at=await Ee();if(!at)return;const Ge=await PD(at);Ge.notificationsSent>0&&console.log(` Sent ${Ge.notificationsSent} notifications for ${Ge.newPendingCount} delayed pending requests`)}catch(at){console.log("Background pending request check failed:",at)}};ye();const ut=setInterval(ye,1800*1e3);return()=>clearInterval(ut)},[Se,De,Be]);const He=async()=>{if(e.user)try{const ye=r||e.user.storeId;if(!ye)return;const ut=await Ee();if(!ut)return;const at=await ZD(ut,ye);at&&Me(at)}catch{console.log("No saved thresholds, using defaults")}},Nt=async()=>{if(e.user)try{l(!0);const ye=await Ee();if(!ye){console.error("No valid access token available");return}const ut=await Jm(ye),at=r||e.user.storeId;let Ge=ut;at?Ge=ut.filter(Et=>Et.storeId===at):ae&&e.user.storeId?Ge=ut.filter(Et=>Et.storeId===e.user.storeId):Be&&e.user.storeId&&!Se&&(Ge=ut.filter(Et=>Et.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:ut.length,filteredRequests:Ge.length,userRole:e.user.role,userDesignation:e.user.designation}),i(Ge)}catch(ye){console.error("Error loading production requests:",ye),Nr.error("Failed to load production requests")}finally{l(!1)}},Ke=async()=>{if(e.user)try{const ye=await Ee();if(!ye){console.error("No valid access token available");return}let at=(await Qm(ye)).data||[];const Ge=r||e.user.storeId;Ge&&(at=at.filter(Et=>Et?.storeId===Ge)),w(at)}catch(ye){console.error("Error loading sales data:",ye)}},kt=async()=>{const ye=r||e.user?.storeId,ut=!ye||ye==="all";if(e.user?.accessToken){console.log(" loadStoreOpeningBalance called"),console.log("  effectiveStoreId:",ye),console.log("  isAllStores:",ut),console.log("  Current salesData length:",k.length);try{const at=new Date().toISOString().substring(0,7);if(ut){console.log("   Calculating aggregate opening balance for all stores");const st=e.stores||[];let pt={};ze.forEach(({camelKey:Mt})=>{pt[Mt]=0});for(const Mt of st){const et=await Xo(e.user.accessToken,Mt.id,"store");if(et?.record)if(et.record.date.substring(0,7)===at)et.record.items.forEach(It=>{const ar=e.inventoryItems?.find(gt=>gt.id===It.itemId||gt.name===It.itemId);if(ar){const gt=ar.name.replace(/_([a-z])/g,lr=>lr[1].toUpperCase());pt[gt]+=It.actualQuantity}});else{const It=await ft(Mt.id,at);Object.keys(It).forEach(ar=>{pt[ar]+=It[ar]})}else{const mt=await ft(Mt.id,at);Object.keys(mt).forEach(It=>{pt[It]+=mt[It]})}}console.log("   Aggregated opening balance for all stores:",pt),ee(pt);return}if(!ye){console.log("   No effectiveStoreId available, skipping recalibration fetch"),ee({});return}const Ge=await Xo(e.user.accessToken,ye,"store");if(console.log(" Recalibration Check:"),console.log("  Recalibration response:",Ge),Ge?.record){const st=Ge.record.date.substring(0,7);if(console.log("  Recalibration date:",Ge.record.date),console.log("  Recalibration month:",st),console.log("  Recalibration locationType:",Ge.record.locationType),console.log("  Recalibration locationName:",Ge.record.locationName),console.log("  Current month:",at),st===at){const pt={};console.log("   Processing recalibration items:",Ge.record.items.length),console.log("   Available inventory items:",e.inventoryItems?.length||0),Ge.record.items.forEach(Mt=>{console.log("    Processing item:",{itemId:Mt.itemId,actualQuantity:Mt.actualQuantity});const et=e.inventoryItems?.find(mt=>mt.id===Mt.itemId||mt.name===Mt.itemId);if(console.log("    Found inventory item:",et?{name:et.name,displayName:et.displayName}:"NOT FOUND"),et){const mt=et.name.replace(/_([a-z])/g,It=>It[1].toUpperCase());pt[mt]=Mt.actualQuantity,console.log("    Mapped to camelKey:",mt,"=",Mt.actualQuantity)}else console.log("     Could not find inventory item for itemId:",Mt.itemId)}),console.log("   Using current month recalibration as opening balance:",pt),ee(pt);return}else console.log("   Recalibration is from",st,"- calculating from previous month instead")}else console.log("   No recalibration record found");const Et=await ft(ye,at);ee(Et)}catch(at){console.error("Error loading opening balance:",at);const Ge={};ze.forEach(({camelKey:Et})=>{Ge[Et]=0}),ee(Ge)}}},ft=async(ye,ut)=>{if(!ye){console.warn("   calculatePreviousMonthStoreStock called with empty storeId");const gt={};return ze.forEach(({camelKey:lr})=>{gt[lr]=0}),gt}const[at,Ge]=ut.split("-").map(Number);let Et=at,st=Ge-1;st===0&&(st=12,Et=at-1);const pt=`${Et}-${String(st).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",ye),console.log("  Previous Month:",pt);let Mt={};try{const gt=await Xo(e.user.accessToken,ye,"store");if(gt?.record){const lr=gt.record.date.substring(0,7);console.log("   Found recalibration from:",lr),lr===pt?(gt.record.items.forEach(Sr=>{const ht=e.inventoryItems?.find(sr=>sr.id===Sr.itemId||sr.name===Sr.itemId);if(ht){const sr=ht.name.replace(/_([a-z])/g,qt=>qt[1].toUpperCase());Mt[sr]=Sr.actualQuantity}}),console.log("   Using previous month recalibration as opening:",Mt)):(console.log("   Recalibration is from different month, assuming zero opening balance"),ze.forEach(({camelKey:Sr})=>{Mt[Sr]=0}))}else console.log("   No recalibration found, assuming zero opening balance"),ze.forEach(({camelKey:lr})=>{Mt[lr]=0})}catch(gt){console.error("   Error fetching recalibration:",gt),ze.forEach(({camelKey:lr})=>{Mt[lr]=0})}const et=(e.productionRequests||[]).filter(gt=>{if(gt.status!=="delivered"||gt.storeId!==ye)return!1;const lr=gt.deliveredDate||gt.requestDate||gt.createdAt;return lr&&lr.startsWith(pt)}).reduce((gt,lr)=>(ze.forEach(({camelKey:Sr})=>{const ht=lr[Sr]||0,sr=lr[Sr+"s"]||0;gt[Sr]=(gt[Sr]||0)+ht+sr}),gt),{}),It=(k||[]).filter(gt=>gt.storeId!==ye?!1:gt.date&&gt.date.startsWith(pt)).reduce((gt,lr)=>(ze.forEach(({camelKey:Sr,legacySalesKey:ht})=>{let sr=lr.data?.[ht]||0;ht==="Cheese Corn Momos"&&sr===0&&(sr=lr.data?.["Corn Cheese Momos"]||0),gt[Sr]=(gt[Sr]||0)+sr}),gt),{}),ar={};return ze.forEach(({camelKey:gt})=>{ar[gt]=(Mt[gt]||0)+(et[gt]||0)-(It[gt]||0)}),console.log("  Previous Month Opening Balance:",Mt),console.log("  Previous Month Received:",et),console.log("  Previous Month Sold:",It),console.log("  Calculated Closing Stock (= Opening + Received - Sold):",ar),ar},Qt=async ye=>{if(ye.preventDefault(),console.log(" handleSubmitRequest called"),console.log("  User info:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),console.log("  Form data:",{momoQuantities:P,totalQuantity:Object.values(P).reduce((at,Ge)=>at+Ge,0),requestDate:M,notes:_}),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error(" Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),Nr.error("Missing user information. Please ensure you are assigned to a store.");return}if(Object.values(P).reduce((at,Ge)=>at+Ge,0)===0){console.log(" No quantities specified"),Nr.error("Please specify at least one item quantity");return}console.log(" Submitting request for date:",M);try{d(!0),console.log(" Validation passed, submitting request..."),await AD(e.user.accessToken,{requestDate:M,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,...P,kitchenUtilities:Object.keys(F).length>0?F:void 0,sauces:Object.keys(Y).length>0?Y:void 0,utilities:Object.keys(re).length>0?re:void 0,notes:_}),console.log(" Request submitted successfully"),Nr.success("Production request submitted successfully"),S({}),W({}),Z({}),ne({}),E(""),D(C()),await Nt()}catch(at){console.error(" Error submitting production request:",at),Nr.error(at.message||"Failed to submit request")}finally{d(!1)}},yt=async(ye,ut)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await OD(e.user.accessToken,ye,ut,e.user.employeeId),Nr.success(`Request marked as ${ut.replace("-"," ")}`),await Nt()}catch(at){console.error("Error updating status:",at),Nr.error("Failed to update status")}},wt=ye=>{switch(ye){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},vt=ye=>{switch(ye){case"pending":return a.jsx(Zn,{className:"w-4 h-4"});case"accepted":return a.jsx(fr,{className:"w-4 h-4"});case"in-preparation":return a.jsx(rr,{className:"w-4 h-4"});case"prepared":return a.jsx(fr,{className:"w-4 h-4"});case"shipped":return a.jsx(fE,{className:"w-4 h-4"});case"delivered":return a.jsx(fr,{className:"w-4 h-4"});default:return a.jsx(Zn,{className:"w-4 h-4"})}},bt=s.filter(ye=>!(f&&ye.requestDate!==f||m!=="all"&&ye.status!==m)),Gt={pending:bt.filter(ye=>ye.status==="pending"),accepted:bt.filter(ye=>ye.status==="accepted"),"in-preparation":bt.filter(ye=>ye.status==="in-preparation"),prepared:bt.filter(ye=>ye.status==="prepared"),shipped:bt.filter(ye=>ye.status==="shipped"),delivered:bt.filter(ye=>ye.status==="delivered")},tn=bt.reduce((ye,ut)=>{const at=ut.requestDate;return ye[at]||(ye[at]=[]),ye[at].push(ut),ye},{}),ur=Object.keys(tn).sort((ye,ut)=>new Date(ut).getTime()-new Date(ye).getTime()),zr=()=>{const ye=new Date;let ut=[],at,Ge=ye;const Et=(et,mt)=>{if(mt==="day")return et.toLocaleDateString("en-US",{month:"short",day:"numeric"});if(mt==="week"){const It=new Date(et);It.setDate(et.getDate()-et.getDay());const ar=new Date(It);return ar.setDate(It.getDate()+6),`${It.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ar.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{if(mt==="month")return et.toLocaleDateString("en-US",{month:"short",year:"numeric"});if(mt==="year")return et.getFullYear().toString()}return et.toLocaleDateString()},st=(et,mt)=>{const It=ar=>{const gt=ar.getFullYear(),lr=String(ar.getMonth()+1).padStart(2,"0"),Sr=String(ar.getDate()).padStart(2,"0");return`${gt}-${lr}-${Sr}`};if(mt==="day")return It(et);if(mt==="week"){const ar=new Date(et),gt=ar.getDay();return ar.setDate(ar.getDate()-gt),It(ar)}else{if(mt==="month")return`${et.getFullYear()}-${String(et.getMonth()+1).padStart(2,"0")}`;if(mt==="year")return et.getFullYear().toString()}return It(et)};if(v==="daily")for(let et=4;et>=0;et--){const mt=new Date(ye);mt.setDate(ye.getDate()-et),ut.push(st(mt,"day"))}else if(v==="weekly")for(let et=4;et>=0;et--){const mt=new Date(ye);mt.setDate(ye.getDate()-et*7);const It=st(mt,"week");ut.includes(It)||ut.push(It)}else if(v==="monthly")for(let et=4;et>=0;et--){const mt=new Date(ye);mt.setMonth(ye.getMonth()-et),ut.push(st(mt,"month"))}else if(v==="yearly")for(let et=4;et>=0;et--){const mt=new Date(ye);mt.setFullYear(ye.getFullYear()-et),ut.push(st(mt,"year"))}else if(v==="custom"){at=new Date(b.from),Ge=new Date(b.to);const et=Math.ceil((Ge.getTime()-at.getTime())/(1e3*60*60*24));for(let mt=0;mt<=et;mt++){const It=new Date(at);It.setDate(at.getDate()+mt),ut.push(st(It,"day"))}}console.log(" Chart Periods:",{filter:v,periods:ut,today:ye.toISOString().split("T")[0]}),console.log(" Requests for chart:",{totalRequests:s.length,requestDates:s.map(et=>({date:et.requestDate,id:et.id.slice(0,8),chickenMomo:et.chickenMomo,chickenMomos:et.chickenMomos}))});const pt={};ut.forEach(et=>{const mt={period:et};ze.forEach(({label:It})=>{mt[It]=0}),pt[et]=mt}),s.forEach(et=>{const mt=new Date(et.requestDate);let It;v==="daily"||v==="custom"?It=st(mt,"day"):v==="weekly"?It=st(mt,"week"):v==="monthly"?It=st(mt,"month"):v==="yearly"&&(It=st(mt,"year")),pt[It]?ze.forEach(({camelKey:ar,label:gt})=>{const lr=et[ar]||0,Sr=et[ar+"s"]||0;pt[It][gt]=(pt[It][gt]||0)+lr+Sr}):console.log(" Request not matching any period:",{requestDate:et.requestDate,periodKey:It,availablePeriods:ut})}),console.log(" Aggregated Period Data:",pt);const Mt=ut.map(et=>{const mt=pt[et],It=new Date(et);let ar;return v==="daily"||v==="custom"?ar=Et(It,"day"):v==="weekly"?ar=Et(It,"week"):v==="monthly"?ar=Et(It,"month"):v==="yearly"&&(ar=Et(It,"year")),{name:ar,...mt}});return console.log(" Final Chart Data:",Mt),Mt};return L.useEffect(()=>{if(t&&!o){const ye=document.getElementById(`request-${t}`);ye&&setTimeout(()=>{ye.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,o]),L.useEffect(()=>{ur.length>0&&Object.keys(U).length===0&&oe({[ur[0]]:!0})},[ur,U]),o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),a.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[ae&&"Submit your daily stock requirements before 9:00 AM",De&&"Manage incoming stock requests and track fulfillment",(Be||Se)&&"Monitor stock request workflow across stores"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[a.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),ae&&(()=>{const ut=new Date().getDate(),at=ut>=1&&ut<=5;return a.jsxs("button",{onClick:()=>R(!0),disabled:!at,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${at?"bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:at?"Recalibrate store stock":"Recalibration only available from 1st to 5th of each month",children:[a.jsx(fr,{className:"w-5 h-5"}),"Recalibrate Stock"]})})()]}),(r||e.user?.storeId,a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-5 h-5 text-green-700"}),a.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),a.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>xe(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[a.jsx(qo,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]}),n&&(Be||Se)&&a.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]})})),(()=>{const ye=r||e.user?.storeId,ut=new Date,at=5.5*60*60*1e3,Et=new Date(ut.getTime()+at).toISOString().substring(0,7);console.log(" Stock Status Calculation Debug:",{currentMonth:Et,totalRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(ht=>ht.status==="delivered").length||0,requestStatuses:e.productionRequests?.map(ht=>({id:ht.id.slice(0,8),status:ht.status,date:ht.requestDate}))||[]});const st=e.productionRequests?.filter(ht=>{if(ht.status!=="delivered"&&ht.status!=="pending")return!1;const sr=ht.deliveredDate||ht.requestDate||ht.createdAt,qt=sr&&sr.startsWith(Et);return console.log(" Delivered Request:",{id:ht.id.slice(0,8),status:ht.status,chicken:ht.chicken,chickenMomo:ht.chickenMomo,chickenMomos:ht.chickenMomos,chickenKurkure:ht.chickenKurkure,chickenKurkureMomo:ht.chickenKurkureMomo,chickenKurkureMomos:ht.chickenKurkureMomos,deliveryDate:sr,matchesMonth:qt}),qt?!ye||ye==="all"?!0:ht.storeId===ye:!1})||[],pt=st.reduce((ht,sr)=>(ze.forEach(({camelKey:qt})=>{const Xr=sr[qt]||0,wr=sr[qt+"s"]||0;ht[qt]=(ht[qt]||0)+Xr+wr}),ht),{});console.log(" After aggregation - deliveredRequests count:",st.length),console.log(" After aggregation - totalReceived:",pt);const et=k.filter(ht=>!ht.date||!ht.date.startsWith(Et)?!1:!ye||ye==="all"?!0:ht.storeId===ye).reduce((ht,sr)=>(ze.forEach(({camelKey:qt,legacySalesKey:Xr})=>{let wr=sr.data?.[Xr]||0;Xr==="Cheese Corn Momos"&&wr===0&&(wr=sr.data?.["Corn Cheese Momos"]||0),ht[qt]=(ht[qt]||0)+wr}),ht),{}),mt=Q||ze.reduce((ht,{camelKey:sr})=>(ht[sr]=0,ht),{});console.log(" Store Stock Status Calculation Debug:"),console.log("  storeOpeningBalance from state:",Q),console.log("  openingBalance being used:",mt),console.log("  totalReceived:",pt),console.log("   Chicken Momo (chicken) received:",pt.chicken||0),console.log("   Chicken Kurkure (chickenKurkure) received:",pt.chickenKurkure||0),console.log("  totalSales:",et),console.log("  finishedProducts count:",ze.length);const It={};ze.forEach(({camelKey:ht})=>{It[ht]=(mt[ht]||0)+(pt[ht]||0)-(et[ht]||0)}),console.log("  storeStock calculated:",It);const ar=["purple","pink","green","yellow","blue","teal","red","indigo","orange","cyan"],gt=Object.values(pt).reduce((ht,sr)=>ht+sr,0),lr=Object.values(mt).reduce((ht,sr)=>ht+sr,0),Sr=gt+lr;return console.log("  totalReceivedSum:",gt),console.log("  totalOpeningBalanceSum:",lr),console.log("  totalStockSum:",Sr),Sr===0?a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsxs("p",{className:"text-gray-600",children:["No inventory available for ",Et]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once:"}),a.jsxs("ul",{className:"text-sm text-gray-500 mt-2 list-disc list-inside",children:[a.jsxs("li",{children:["Your requests are ",a.jsx("strong",{children:"delivered"})," by the production house"]}),a.jsx("li",{children:"OR you perform a stock recalibration (1st-5th of each month)"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-4",children:' Tip: Check if your requests have been marked as "Delivered" below'})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ze.map(({camelKey:ht,label:sr},qt)=>{const Xr=pt[ht]||0,wr=et[ht]||0,pr=It[ht]||0,z=(mt[ht]||0)+Xr,H=ar[qt%ar.length],J=ge[ht]||{high:600,medium:300,low:150};let te="high",ie="",we="",Pe="",V="";pr<=0?(te="critical",ie="bg-red-100",we="text-red-700",Pe="border-red-300",V="CRITICAL"):pr<=J.low?(te="low",ie="bg-red-100",we="text-red-700",Pe="border-red-300",V="LOW"):pr<=J.medium?(te="medium",ie="bg-orange-100",we="text-orange-700",Pe="border-orange-300",V="MEDIUM"):pr<J.high&&(te="medium",ie="bg-yellow-100",we="text-yellow-700",Pe="border-yellow-300",V="MEDIUM");const ue=z>0?(pr/z*100).toFixed(0):"0",_e=pr<z*.2&&z>0;return a.jsxs("div",{className:`bg-gradient-to-br from-${H}-50 to-${H}-100 border-2 border-${H}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[te!=="high"&&a.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${ie} border ${Pe}`,children:[a.jsx(Cn,{className:`w-4 h-4 ${we}`}),a.jsx("span",{className:`text-xs font-semibold ${we} uppercase`,children:V})]}),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:sr}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),a.jsx("span",{className:`text-lg font-bold text-${H}-600`,children:Xr})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),a.jsx("span",{className:`text-lg font-bold text-${H}-700`,children:wr})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${_e||pr<0?"text-red-600":`text-${H}-800`}`,children:[pr," pcs / ",Math.round(pr/ce)," plates"]})})]}),z>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[ue,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${_e||pr<0?"bg-red-500":`bg-${H}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(ue)))}%`}})})]})]}),(_e||pr<0)&&a.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-red-800 font-semibold",children:pr<0?" Oversold":" Low Stock"})})]})]},ht)})})})()]}),ae&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Np,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),new Date().getHours()>=9&&a.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Cn,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"It's past 9:00 AM"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Same-day production requests are no longer accepted. The request date has been automatically set to tomorrow. You can also select any future date for advance orders."})]})]})}),a.jsxs("form",{onSubmit:Qt,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(Ja,{label:"Request Date",value:M,onChange:D,className:"w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Same-day requests must be submitted before 9:00 AM. After 9 AM, please select tomorrow or a future date for advance orders."})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:ze.map(({camelKey:ye,label:ut})=>{const at=ye==="chicken"?[150,300,450,600]:[60,120,180,300];return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:ut}),a.jsx("input",{type:"number",min:"0",value:P[ye]||0,onChange:Ge=>S({...P,[ye]:parseInt(Ge.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),a.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:at.map(Ge=>a.jsx("button",{type:"button",onClick:()=>S({...P,[ye]:Ge}),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:Ge},Ge))})]},ye)})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),a.jsx("div",{className:"space-y-3",children:Oe.map(ye=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[ye.name," ",a.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",ye.unit,")"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"0",step:"0.01",value:F[ye.name]?.quantity!==void 0?F[ye.name].quantity:"",onChange:ut=>{const at=parseFloat(ut.target.value)||0;if(at>0)W({...F,[ye.name]:{quantity:at,unit:ye.unit}});else{const Ge={...F};delete Ge[ye.name],W(Ge)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${ye.unit}`}),a.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:ye.unit})]})]},ye.name))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),a.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:q.map(ye=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[a.jsx("input",{type:"checkbox",checked:Y[ye]||!1,onChange:ut=>{if(ut.target.checked)Z({...Y,[ye]:!0});else{const at={...Y};delete at[ye],Z(at)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-700",children:ye})]},ye))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),a.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Ne.map(ye=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:ye}),a.jsx("input",{type:"number",min:"0",value:re[ye]!==void 0?re[ye]:"",onChange:ut=>{const at=parseInt(ut.target.value)||0;if(at>0)ne({...re,[ye]:at});else{const Ge={...re};delete Ge[ye],ne(Ge)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},ye))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:_,onChange:ye=>E(ye.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),a.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Submitting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Np,{className:"w-5 h-5"}),a.jsx("span",{children:"Submit Request"})]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[a.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:a.jsx(Ja,{label:"Filter by Date",value:f,onChange:p,className:"w-full"})}),a.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:m,onChange:ye=>x(ye.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"in-preparation",children:"In Preparation"}),a.jsx("option",{value:"prepared",children:"Prepared"}),a.jsx("option",{value:"shipped",children:"Shipped"}),a.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(f||m!=="all")&&a.jsx("div",{className:"flex sm:items-end",children:a.jsx("button",{onClick:()=>{p(""),x("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),Fe&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),a.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt.pending.length})})}),a.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(Zn,{className:"w-3 h-3 text-yellow-600"}),a.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt.accepted.length})})}),a.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(fr,{className:"w-3 h-3 text-blue-600"}),a.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt["in-preparation"].length})})}),a.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(rr,{className:"w-3 h-3 text-purple-600"}),a.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt.prepared.length})})}),a.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(fr,{className:"w-3 h-3 text-indigo-600"}),a.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt.shipped.length})})}),a.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(fE,{className:"w-3 h-3 text-orange-600"}),a.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-2xl",children:Gt.delivered.length})})}),a.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(fr,{className:"w-3 h-3 text-green-600"}),a.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-gray-900",children:bt.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-yellow-600",children:Gt.pending.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-purple-600",children:Gt.accepted.length+Gt["in-preparation"].length+Gt.prepared.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl text-green-600",children:Gt.delivered.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pn,{className:"w-5 h-5 text-purple-600"}),a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Momo Orders by Type"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"daily",label:"5 Days"},{filter:"weekly",label:"5 Weeks"},{filter:"monthly",label:"5 Months"},{filter:"yearly",label:"5 Years"},{filter:"custom",label:"Custom"}].map(({filter:ye,label:ut})=>a.jsx("button",{onClick:()=>y(ye),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${v===ye?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ut},ye))})]}),v==="custom"&&a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsx(Ja,{label:"From Date",value:b.from,onChange:ye=>N({...b,from:ye})}),a.jsx(Ja,{label:"To Date",value:b.to,onChange:ye=>N({...b,to:ye})})]}),a.jsx(Bn,{width:"100%",height:400,children:a.jsxs(si,{data:zr(),children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{dataKey:"name"}),a.jsx(vn,{}),a.jsx(Ur,{}),a.jsx(da,{}),ze.map((ye,ut)=>{const at=["#8b5cf6","#ec4899","#10b981","#f59e0b","#3b82f6","#14b8a6","#ef4444","#f97316"];return a.jsx(gr,{dataKey:ye.label,name:ye.label,fill:at[ut%at.length]},ye.label)})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-xl text-gray-900",children:[ur.length," Date",ur.length!==1?"s":""," with Requests"]}),ur.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):ur.map(ye=>{const ut=tn[ye],at=U[ye],Ge=new Set(ut.map(st=>st.storeName)).size,Et=ut.reduce((st,pt)=>(ze.forEach(({camelKey:Mt})=>{const et=pt[Mt]||0,mt=pt[Mt+"s"]||0;st[Mt]=(st[Mt]||0)+et+mt}),st),{});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[a.jsxs("button",{onClick:()=>oe({...U,[ye]:!at}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx(Dr,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:new Date(ye).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[ut.length," Request",ut.length!==1?"s":""," from"," ",Ge," Store",Ge!==1?"s":""]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:at?a.jsx(f6,{className:"w-5 h-5 text-gray-400"}):a.jsx(qm,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[a.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),a.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[Et.chicken>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:Et.chicken}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),Et.chickenCheese>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:Et.chickenCheese}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),Et.veg>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:Et.veg}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),Et.cheeseCorn>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:Et.cheeseCorn}),a.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),Et.paneer>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:Et.paneer}),a.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),Et.vegKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:Et.vegKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),Et.chickenKurkure>0&&a.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[a.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:Et.chickenKurkure}),a.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),at&&a.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-sm text-gray-700",children:"Requests by Store"}),ut.map(st=>{const pt=t===st.id;return a.jsxs("div",{id:`request-${st.id}`,className:`border rounded-lg p-4 transition-all duration-300 ${pt?"border-purple-500 bg-purple-50 shadow-lg ring-2 ring-purple-300":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"bg-gray-100 px-3 py-1 rounded-full",children:a.jsxs("span",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Request ID:"})," ",st.id.slice(0,8).toUpperCase()]})}),pt&&a.jsx("div",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-xs animate-pulse",children:"New Notification"})]}),a.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:`px-3 py-2 rounded-lg text-xs sm:text-sm flex items-center gap-2 border-2 ${wt(st.status)} w-fit`,children:[vt(st.status),a.jsx("span",{className:"capitalize",children:st.status.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[a.jsx(Ci,{className:"w-4 h-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:st.storeName||"Unknown Store"})]})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[De&&st.status==="pending"&&a.jsx("button",{onClick:()=>yt(st.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),De&&st.status==="accepted"&&a.jsx("button",{onClick:()=>yt(st.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),De&&st.status==="in-preparation"&&a.jsx("button",{onClick:()=>yt(st.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),De&&st.status==="prepared"&&a.jsx("button",{onClick:()=>yt(st.id,"shipped"),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),ae&&st.status==="shipped"&&a.jsx("button",{onClick:()=>yt(st.id,"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[a.jsx(ka,{className:"w-4 h-4"}),a.jsxs("span",{children:["Requested by: ",st.requestedByName||st.requestedBy]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Momos Quantities"}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:ze.map(({camelKey:Mt,label:et})=>{const mt=st[Mt];return!mt||mt===0?null:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-900",children:mt}),a.jsx("p",{className:"text-xs text-gray-600",children:et.replace(" Momos","")})]},Mt)})})]}),st.kitchenUtilities&&Object.keys(st.kitchenUtilities).length>0&&a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-purple-700 mb-3",children:"Kitchen Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(st.kitchenUtilities).map(([Mt,et])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[et.quantity," ",et.unit]}),a.jsx("p",{className:"text-xs text-gray-600",children:Mt})]},Mt))})]}),st.sauces&&Object.keys(st.sauces).length>0&&a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-pink-700 mb-3",children:"Sauces Requested"}),a.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:Object.keys(st.sauces).map(Mt=>a.jsx("span",{className:"px-3 py-1 bg-pink-200 text-pink-900 rounded-full text-xs",children:Mt},Mt))})]}),st.utilities&&Object.keys(st.utilities).length>0&&a.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 mb-3",children:[a.jsx("h5",{className:"text-xs sm:text-sm text-indigo-700 mb-3",children:"Utilities"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:Object.entries(st.utilities).map(([Mt,et])=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("p",{className:"text-gray-900",children:[et," pcs"]}),a.jsx("p",{className:"text-xs text-gray-600",children:Mt})]},Mt))})]}),st.notes&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-2 rounded mb-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[a.jsx("strong",{children:"Notes:"})," ",st.notes]})}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[a.jsxs("div",{children:["Created: ",new Date(st.createdAt).toLocaleString()]}),st.acceptedAt&&a.jsxs("div",{children:["Accepted: ",new Date(st.acceptedAt).toLocaleString()]}),st.preparedAt&&a.jsxs("div",{children:["Prepared: ",new Date(st.preparedAt).toLocaleString()]}),st.shippedAt&&a.jsxs("div",{children:["Shipped: ",new Date(st.shippedAt).toLocaleString()]}),st.deliveredAt&&a.jsxs("div",{children:["Delivered: ",new Date(st.deliveredAt).toLocaleString()]})]})})]},st.id)})]})})]},ye)})]}),K&&a.jsx(sN,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>R(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),se&&a.jsx(yoe,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:ge,onClose:()=>xe(!1),onSave:ye=>{Me(ye),xe(!1)}})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var MF=1252,boe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ck={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},uk=function(e){boe.indexOf(e)!=-1&&(MF=ck[0]=e)};function woe(){uk(1252)}var oi=function(e){uk(e)};function RF(){oi(1200),woe()}function HP(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function joe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function FF(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Qd=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?joe(e.slice(2)):t==254&&r==255?FF(e.slice(2)):t==65279?e.slice(1):e},ip=function(t){return String.fromCharCode(t)},qP=function(t){return String.fromCharCode(t)},pf,Wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zP(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,u=s&63,isNaN(n)?l=u=64:isNaN(s)&&(u=64),t+=Wo.charAt(i)+Wo.charAt(o)+Wo.charAt(l)+Wo.charAt(u);return t}function xs(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,u=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Wo.indexOf(e.charAt(d++)),o=Wo.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Wo.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),u=Wo.indexOf(e.charAt(d++)),s=(l&3)<<6|u,u!==64&&(t+=String.fromCharCode(s));return t}var xr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),oc=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function el(e){return xr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function WP(e){return xr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ii=function(t){return xr?oc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function lc(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function dk(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return dk(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ho=xr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:oc(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Noe(e){for(var t=[],r=0,n=e.length+250,s=el(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=el(65535),n=65530)}return t.push(s.slice(0,r)),Ho(t)}var Ba=/\u0000/g,Zd=/[\u0001-\u0006]/g;function cu(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function li(e,t){var r=""+e;return r.length>=t?r:fn("0",t-r.length)+r}function hk(e,t){var r=""+e;return r.length>=t?r:fn(" ",t-r.length)+r}function Cm(e,t){var r=""+e;return r.length>=t?r:r+fn(" ",t-r.length)}function koe(e,t){var r=""+Math.round(e);return r.length>=t?r:fn("0",t-r.length)+r}function Soe(e,t){var r=""+e;return r.length>=t?r:fn("0",t-r.length)+r}var KP=Math.pow(2,32);function Wc(e,t){if(e>KP||e<-KP)return koe(e,t);var r=Math.round(e);return Soe(r,t)}function Am(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var VP=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],A1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _oe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var cr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},GP={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Eoe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Om(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,u=1,d=0,f=0,p=Math.floor(s);d<t&&(p=Math.floor(s),l=p*o+i,f=p*d+u,!(s-p<5e-8));)s=1/(s-p),i=o,o=l,u=d,d=f;if(f>t&&(d>t?(f=u,l=i):(f=d,l=o)),!r)return[0,n*l,f];var m=Math.floor(n*l/f);return[m,n*l-m*f,f]}function $l(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),n<60&&(i=(i+6)%7),r&&(i=Ioe(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var $F=new Date(1899,11,31,0,0,0),Toe=$F.getTime(),Coe=new Date(1900,2,1,0,0,0);function LF(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Coe&&(r+=1440*60*1e3),(r-(Toe+(e.getTimezoneOffset()-$F.getTimezoneOffset())*6e4))/(1440*60*1e3)}function fk(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Aoe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ooe(e){var t=e<0?12:11,r=fk(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Poe(e){var t=fk(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function mf(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Ooe(e):t===10?r=e.toFixed(10).substr(0,12):r=Poe(e),fk(Aoe(r.toUpperCase()))}function Zl(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):mf(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ms(14,LF(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ioe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Doe(e,t,r,n){var s="",i=0,o=0,l=r.y,u,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:u=l%100,d=2;break;default:u=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:u=r.m,d=t.length;break;case 3:return A1[r.m-1][1];case 5:return A1[r.m-1][0];default:return A1[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:u=r.d,d=t.length;break;case 3:return VP[r.q][0];default:return VP[r.q][1]}break;case 104:switch(t.length){case 1:case 2:u=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:u=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:u=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?li(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=li(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:u=l,d=1;break}var f=d>0?li(u,d):"";return f}function Ko(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var BF=/%/g;function Moe(e,t,r){var n=t.replace(BF,""),s=t.length-n.length;return oo(e,n,r*Math.pow(10,2*s))+fn("%",s)}function Roe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function UF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+UF(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var HF=/# (\?+)( ?)\/( ?)(\d+)/;function Foe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?fn(" ",e[1].length+1+e[4].length):hk(o,e[1].length)+e[2]+"/"+e[3]+li(l,e[4].length))}function $oe(e,t,r){return r+(t===0?"":""+t)+fn(" ",e[1].length+2+e[4].length)}var qF=/^#*0*\.([0#]+)/,zF=/\).*[0#]/,WF=/\(###\) ###\\?-####/;function Da(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function YP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function XP(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Loe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Boe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ts(e,t,r){if(e.charCodeAt(0)===40&&!t.match(zF)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ts("n",n,r):"("+Ts("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Roe(e,t,r);if(t.indexOf("%")!==-1)return Moe(e,t,r);if(t.indexOf("E")!==-1)return UF(t,r);if(t.charCodeAt(0)===36)return"$"+Ts(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Wc(u,t.length);if(t.match(/^[#?]+$/))return s=Wc(r,0),s==="0"&&(s=""),s.length>t.length?s:Da(t.substr(0,t.length-s.length))+s;if(i=t.match(HF))return Foe(i,u,d);if(t.match(/^#+0+$/))return d+Wc(u,t.length-t.indexOf("0"));if(i=t.match(qF))return s=YP(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Da(i[1])).replace(/\.$/,"."+Da(i[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+fn("0",Da(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+YP(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Ko(Wc(u,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ts(e,t,-r):Ko(""+(Math.floor(r)+Loe(r,i[1].length)))+"."+li(XP(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ts(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=cu(Ts(e,t.replace(/[\\-]/g,""),r)),o=0,cu(cu(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(WF))return s=Ts(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Om(u,Math.pow(10,o)-1,!1),s=""+d,f=oo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Cm(l[2],o),f.length<i[4].length&&(f=Da(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Om(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?hk(l[1],o)+i[2]+"/"+i[3]+Cm(l[2],o):fn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Wc(r,0),t.length<=s.length?s:Da(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return Da(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=XP(r,i[1].length),r<0?"-"+Ts(e,t,-r):Ko(Boe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?li(0,3-v.length):"")+v})+"."+li(o,i[1].length);switch(t){case"###,##0.00":return Ts(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var x=Ko(Wc(u,0));return x!=="0"?d+x:"";case"###,###.00":return Ts(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ts(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Uoe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oo(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Hoe(e,t,r){var n=t.replace(BF,""),s=t.length-n.length;return oo(e,n,r*Math.pow(10,2*s))+fn("%",s)}function KF(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+KF(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,d,f){return u+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bi(e,t,r){if(e.charCodeAt(0)===40&&!t.match(zF)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bi("n",n,r):"("+bi("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Uoe(e,t,r);if(t.indexOf("%")!==-1)return Hoe(e,t,r);if(t.indexOf("E")!==-1)return KF(t,r);if(t.charCodeAt(0)===36)return"$"+bi(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+li(u,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Da(t.substr(0,t.length-s.length))+s;if(i=t.match(HF))return $oe(i,u,d);if(t.match(/^#+0+$/))return d+li(u,t.length-t.indexOf("0"));if(i=t.match(qF))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Da(i[1])).replace(/\.$/,"."+Da(i[1])),s=s.replace(/\.(\d*)$/,function(v,y){return"."+y+fn("0",Da(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Ko(""+u);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bi(e,t,-r):Ko(""+r)+"."+fn("0",i[1].length);if(i=t.match(/^#,#*,#0/))return bi(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=cu(bi(e,t.replace(/[\\-]/g,""),r)),o=0,cu(cu(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(WF))return s=bi(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Om(u,Math.pow(10,o)-1,!1),s=""+d,f=oo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Cm(l[2],o),f.length<i[4].length&&(f=Da(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Om(u,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?hk(l[1],o)+i[2]+"/"+i[3]+Cm(l[2],o):fn(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Da(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=t.indexOf(".")-o,m=t.length-s.length-p;return Da(t.substr(0,p)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bi(e,t,-r):Ko(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?li(0,3-v.length):"")+v})+"."+li(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var x=Ko(""+u);return x!=="0"?d+x:"";default:if(t.match(/\.[0#?]*$/))return bi(e,t.slice(0,t.lastIndexOf(".")),r)+Da(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function oo(e,t,r){return(r|0)===r?bi(e,t,r):Ts(e,t,r)}function qoe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var VF=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ed(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Am(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(VF))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function zoe(e,t,r,n){for(var s=[],i="",o=0,l="",u="t",d,f,p,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Am(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(p=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++o;break;case"\\":var x=e.charAt(++o),v=x==="("||x===")"?x:"t";s[s.length]={t:v,v:x},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=$l(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=$l(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},u=l;break;case"A":case"a":case"":var y={t:l,v:l};if(d==null&&(d=$l(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(y.v=d.H>=12?"P":"A"),y.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(y.v=d.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(y.v=d.H>=12?"":""),y.t="T",o+=5,m="h"):(y.t="t",++o),d==null&&y.t==="T")return"";s[s.length]=y,u=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(VF)){if(d==null&&(d=$l(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",ed(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},u=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,N=0,k;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,u="h",b<1&&(b=1);break;case"s":(k=s[o].v.match(/\.0+$/))&&(N=Math.max(N,k[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",P;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Doe(s[o].t.charCodeAt(0),s[o].v,d,N),s[o].t="t";break;case"n":case"?":for(P=o+1;s[P]!=null&&((l=s[P].t)==="?"||l==="D"||(l===" "||l==="t")&&s[P+1]!=null&&(s[P+1].t==="?"||s[P+1].t==="t"&&s[P+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[P].v==="/"||s[P].v===" "&&s[P+1]!=null&&s[P+1].t=="?"));)s[o].v+=s[P].v,s[P]={v:"",t:";"},++P;w+=s[o].v,o=P-1;break;case"G":s[o].t="t",s[o].v=Zl(t,r);break}var S="",_,E;if(w.length>0){w.charCodeAt(0)==40?(_=t<0&&w.charCodeAt(0)===45?-t:t,E=oo("n",w,_)):(_=t<0&&n>1?-t:t,E=oo("n",w,_),_<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),P=E.length-1;var C=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){C=o;break}var M=s.length;if(C===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(P>=s[o].v.length-1?(P-=s[o].v.length,s[o].v=E.substr(P+1,s[o].v.length)):P<0?s[o].v="":(s[o].v=E.substr(0,P+1),P=-1),s[o].t="t",M=o);P>=0&&M<s.length&&(s[M].v=E.substr(0,P+1)+s[M].v)}else if(C!==s.length&&E.indexOf("E")===-1){for(P=E.indexOf(".")-1,o=C;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(f+1);f>=0;--f)P>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(S=E.charAt(P--)+S);s[o].v=S,s[o].t="t",M=o}for(P>=0&&M<s.length&&(s[M].v=E.substr(0,P+1)+s[M].v),P=E.indexOf(".")+1,o=C;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==C)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,f);f<s[o].v.length;++f)P<E.length&&(S+=E.charAt(P++));s[o].v=S,s[o].t="t",M=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(_=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=oo(s[o].t,s[o].v,_),s[o].t="t");var D="";for(o=0;o!==s.length;++o)s[o]!=null&&(D+=s[o].v);return D}var JP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function QP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Woe(e,t){var r=qoe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(JP),l=r[1].match(JP);return QP(t,o)?[n,r[0]]:QP(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Ms(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:cr)[e],n==null&&(n=r.table&&r.table[GP[e]]||cr[GP[e]]),n==null&&(n=Eoe[e]||"General");break}if(Am(n,0))return Zl(t,r);t instanceof Date&&(t=LF(t,r.date1904));var s=Woe(n,t);if(Am(s[1]))return Zl(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return zoe(s[1],t,r,s[0])}function Hl(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(cr[r]==null){t<0&&(t=r);continue}if(cr[r]==e){t=r;break}}t<0&&(t=391)}return cr[t]=e,t}function GF(){cr=_oe()}var Koe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},YF=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Voe(e){var t=typeof e=="number"?cr[e]:e;return t=t.replace(YF,"(\\d+)"),new RegExp("^"+t+"$")}function Goe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,u=-1;(t.match(YF)||[]).forEach(function(p,m){var x=parseInt(r[m+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=x;break;case"d":i=x;break;case"h":o=x;break;case"s":u=x;break;case"m":o>=0?l=x:s=x;break}}),u>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?d:n==-1&&s==-1&&i==-1?f:d+"T"+f}var Yoe=(function(){var e={};e.version="1.2.0";function t(){for(var E=0,C=new Array(256),M=0;M!=256;++M)E=M,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[M]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(E){var C=0,M=0,D=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)A[D]=E[D];for(D=0;D!=256;++D)for(M=E[D],C=256+D;C<4096;C+=256)M=A[C]=M>>>8^E[M&255];var O=[];for(D=1;D!=16;++D)O[D-1]=typeof Int32Array<"u"?A.subarray(D*256,D*256+256):A.slice(D*256,D*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],u=s[3],d=s[4],f=s[5],p=s[6],m=s[7],x=s[8],v=s[9],y=s[10],b=s[11],N=s[12],k=s[13],w=s[14];function P(E,C){for(var M=C^-1,D=0,A=E.length;D<A;)M=M>>>8^r[(M^E.charCodeAt(D++))&255];return~M}function S(E,C){for(var M=C^-1,D=E.length-15,A=0;A<D;)M=w[E[A++]^M&255]^k[E[A++]^M>>8&255]^N[E[A++]^M>>16&255]^b[E[A++]^M>>>24]^y[E[A++]]^v[E[A++]]^x[E[A++]]^m[E[A++]]^p[E[A++]]^f[E[A++]]^d[E[A++]]^u[E[A++]]^l[E[A++]]^o[E[A++]]^i[E[A++]]^r[E[A++]];for(D+=15;A<D;)M=M>>>8^r[(M^E[A++])&255];return~M}function _(E,C){for(var M=C^-1,D=0,A=E.length,O=0,F=0;D<A;)O=E.charCodeAt(D++),O<128?M=M>>>8^r[(M^O)&255]:O<2048?(M=M>>>8^r[(M^(192|O>>6&31))&255],M=M>>>8^r[(M^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,F=E.charCodeAt(D++)&1023,M=M>>>8^r[(M^(240|O>>8&7))&255],M=M>>>8^r[(M^(128|O>>2&63))&255],M=M>>>8^r[(M^(128|F>>6&15|(O&3)<<4))&255],M=M>>>8^r[(M^(128|F&63))&255]):(M=M>>>8^r[(M^(224|O>>12&15))&255],M=M>>>8^r[(M^(128|O>>6&63))&255],M=M>>>8^r[(M^(128|O&63))&255]);return~M}return e.table=r,e.bstr=P,e.buf=S,e.str=_,e})(),vr=(function(){var t={};t.version="1.2.1";function r(B,z){for(var H=B.split("/"),J=z.split("/"),te=0,ie=0,we=Math.min(H.length,J.length);te<we;++te){if(ie=H[te].length-J[te].length)return ie;if(H[te]!=J[te])return H[te]<J[te]?-1:1}return H.length-J.length}function n(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:n(B.slice(0,-1));var z=B.lastIndexOf("/");return z===-1?B:B.slice(0,z+1)}function s(B){if(B.charAt(B.length-1)=="/")return s(B.slice(0,-1));var z=B.lastIndexOf("/");return z===-1?B:B.slice(z+1)}function i(B,z){typeof z=="string"&&(z=new Date(z));var H=z.getHours();H=H<<6|z.getMinutes(),H=H<<5|z.getSeconds()>>>1,B.write_shift(2,H);var J=z.getFullYear()-1980;J=J<<4|z.getMonth()+1,J=J<<5|z.getDate(),B.write_shift(2,J)}function o(B){var z=B.read_shift(2)&65535,H=B.read_shift(2)&65535,J=new Date,te=H&31;H>>>=5;var ie=H&15;H>>>=4,J.setMilliseconds(0),J.setFullYear(H+1980),J.setMonth(ie-1),J.setDate(te);var we=z&31;z>>>=5;var Pe=z&63;return z>>>=6,J.setHours(z),J.setMinutes(Pe),J.setSeconds(we<<1),J}function l(B){ca(B,0);for(var z={},H=0;B.l<=B.length-4;){var J=B.read_shift(2),te=B.read_shift(2),ie=B.l+te,we={};switch(J){case 21589:H=B.read_shift(1),H&1&&(we.mtime=B.read_shift(4)),te>5&&(H&2&&(we.atime=B.read_shift(4)),H&4&&(we.ctime=B.read_shift(4))),we.mtime&&(we.mt=new Date(we.mtime*1e3));break}B.l=ie,z[J]=we}return z}var u;function d(){return u||(u={})}function f(B,z){if(B[0]==80&&B[1]==75)return st(B,z);if((B[0]|32)==109&&(B[1]|32)==105)return Sr(B,z);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var H=3,J=512,te=0,ie=0,we=0,Pe=0,V=0,ue=[],_e=B.slice(0,512);ca(_e,0);var ve=p(_e);switch(H=ve[0],H){case 3:J=512;break;case 4:J=4096;break;case 0:if(ve[1]==0)return st(B,z);default:throw new Error("Major Version: Expected 3 or 4 saw "+H)}J!==512&&(_e=B.slice(0,J),ca(_e,28));var Xe=B.slice(0,J);m(_e,H);var ct=_e.read_shift(4,"i");if(H===3&&ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ct);_e.l+=4,we=_e.read_shift(4,"i"),_e.l+=4,_e.chk("00100000","Mini Stream Cutoff Size: "),Pe=_e.read_shift(4,"i"),te=_e.read_shift(4,"i"),V=_e.read_shift(4,"i"),ie=_e.read_shift(4,"i");for(var tt=-1,Qe=0;Qe<109&&(tt=_e.read_shift(4,"i"),!(tt<0));++Qe)ue[Qe]=tt;var Ut=x(B,J);b(V,ie,Ut,J,ue);var Tr=k(Ut,we,ue,J);Tr[we].name="!Directory",te>0&&Pe!==F&&(Tr[Pe].name="!MiniFAT"),Tr[ue[0]].name="!FAT",Tr.fat_addrs=ue,Tr.ssz=J;var Rr={},Lr=[],rn=[],$s=[];w(we,Tr,Ut,Lr,te,Rr,rn,Pe),v(rn,$s,Lr),Lr.shift();var Cr={FileIndex:rn,FullPaths:$s};return z&&z.raw&&(Cr.raw={header:Xe,sectors:Ut}),Cr}function p(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(W,"Header Signature: "),B.l+=16;var z=B.read_shift(2,"u");return[B.read_shift(2,"u"),z]}function m(B,z){var H=9;switch(B.l+=2,H=B.read_shift(2)){case 9:if(z!=3)throw new Error("Sector Shift: Expected 9 saw "+H);break;case 12:if(z!=4)throw new Error("Sector Shift: Expected 12 saw "+H);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+H)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function x(B,z){for(var H=Math.ceil(B.length/z)-1,J=[],te=1;te<H;++te)J[te-1]=B.slice(te*z,(te+1)*z);return J[H-1]=B.slice(H*z),J}function v(B,z,H){for(var J=0,te=0,ie=0,we=0,Pe=0,V=H.length,ue=[],_e=[];J<V;++J)ue[J]=_e[J]=J,z[J]=H[J];for(;Pe<_e.length;++Pe)J=_e[Pe],te=B[J].L,ie=B[J].R,we=B[J].C,ue[J]===J&&(te!==-1&&ue[te]!==te&&(ue[J]=ue[te]),ie!==-1&&ue[ie]!==ie&&(ue[J]=ue[ie])),we!==-1&&(ue[we]=J),te!==-1&&J!=ue[J]&&(ue[te]=ue[J],_e.lastIndexOf(te)<Pe&&_e.push(te)),ie!==-1&&J!=ue[J]&&(ue[ie]=ue[J],_e.lastIndexOf(ie)<Pe&&_e.push(ie));for(J=1;J<V;++J)ue[J]===J&&(ie!==-1&&ue[ie]!==ie?ue[J]=ue[ie]:te!==-1&&ue[te]!==te&&(ue[J]=ue[te]));for(J=1;J<V;++J)if(B[J].type!==0){if(Pe=J,Pe!=ue[Pe])do Pe=ue[Pe],z[J]=z[Pe]+"/"+z[J];while(Pe!==0&&ue[Pe]!==-1&&Pe!=ue[Pe]);ue[J]=-1}for(z[0]+="/",J=1;J<V;++J)B[J].type!==2&&(z[J]+="/")}function y(B,z,H){for(var J=B.start,te=B.size,ie=[],we=J;H&&te>0&&we>=0;)ie.push(z.slice(we*O,we*O+O)),te-=O,we=Pl(H,we*4);return ie.length===0?Un(0):Ho(ie).slice(0,B.size)}function b(B,z,H,J,te){var ie=F;if(B===F){if(z!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var we=H[B],Pe=(J>>>2)-1;if(!we)return;for(var V=0;V<Pe&&(ie=Pl(we,V*4))!==F;++V)te.push(ie);b(Pl(we,J-4),z-1,H,J,te)}}function N(B,z,H,J,te){var ie=[],we=[];te||(te=[]);var Pe=J-1,V=0,ue=0;for(V=z;V>=0;){te[V]=!0,ie[ie.length]=V,we.push(B[V]);var _e=H[Math.floor(V*4/J)];if(ue=V*4&Pe,J<4+ue)throw new Error("FAT boundary crossed: "+V+" 4 "+J);if(!B[_e])break;V=Pl(B[_e],ue)}return{nodes:ie,data:lI([we])}}function k(B,z,H,J){var te=B.length,ie=[],we=[],Pe=[],V=[],ue=J-1,_e=0,ve=0,Xe=0,ct=0;for(_e=0;_e<te;++_e)if(Pe=[],Xe=_e+z,Xe>=te&&(Xe-=te),!we[Xe]){V=[];var tt=[];for(ve=Xe;ve>=0;){tt[ve]=!0,we[ve]=!0,Pe[Pe.length]=ve,V.push(B[ve]);var Qe=H[Math.floor(ve*4/J)];if(ct=ve*4&ue,J<4+ct)throw new Error("FAT boundary crossed: "+ve+" 4 "+J);if(!B[Qe]||(ve=Pl(B[Qe],ct),tt[ve]))break}ie[Xe]={nodes:Pe,data:lI([V])}}return ie}function w(B,z,H,J,te,ie,we,Pe){for(var V=0,ue=J.length?2:0,_e=z[B].data,ve=0,Xe=0,ct;ve<_e.length;ve+=128){var tt=_e.slice(ve,ve+128);ca(tt,64),Xe=tt.read_shift(2),ct=yk(tt,0,Xe-ue),J.push(ct);var Qe={name:ct,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Ut=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Ut!==0&&(Qe.ct=P(tt,tt.l-8));var Tr=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Tr!==0&&(Qe.mt=P(tt,tt.l-8)),Qe.start=tt.read_shift(4,"i"),Qe.size=tt.read_shift(4,"i"),Qe.size<0&&Qe.start<0&&(Qe.size=Qe.type=0,Qe.start=F,Qe.name=""),Qe.type===5?(V=Qe.start,te>0&&V!==F&&(z[V].name="!StreamData")):Qe.size>=4096?(Qe.storage="fat",z[Qe.start]===void 0&&(z[Qe.start]=N(H,Qe.start,z.fat_addrs,z.ssz)),z[Qe.start].name=Qe.name,Qe.content=z[Qe.start].data.slice(0,Qe.size)):(Qe.storage="minifat",Qe.size<0?Qe.size=0:V!==F&&Qe.start!==F&&z[V]&&(Qe.content=y(Qe,z[V].data,(z[Pe]||{}).data))),Qe.content&&ca(Qe.content,0),ie[ct]=Qe,we.push(Qe)}}function P(B,z){return new Date((cs(B,z+4)/1e7*Math.pow(2,32)+cs(B,z)/1e7-11644473600)*1e3)}function S(B,z){return d(),f(u.readFileSync(B),z)}function _(B,z){var H=z&&z.type;switch(H||xr&&Buffer.isBuffer(B)&&(H="buffer"),H||"base64"){case"file":return S(B,z);case"base64":return f(ii(xs(B)),z);case"binary":return f(ii(B),z)}return f(B,z)}function E(B,z){var H=z||{},J=H.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=J+"/",B.FileIndex[0]={name:J,type:5}),H.CLSID&&(B.FileIndex[0].clsid=H.CLSID),C(B)}function C(B){var z="Sh33tJ5";if(!vr.find(B,"/"+z)){var H=Un(4);H[0]=55,H[1]=H[3]=50,H[2]=54,B.FileIndex.push({name:z,type:2,content:H,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+z),M(B)}}function M(B,z){E(B);for(var H=!1,J=!1,te=B.FullPaths.length-1;te>=0;--te){var ie=B.FileIndex[te];switch(ie.type){case 0:J?H=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:J=!0,isNaN(ie.R*ie.L*ie.C)&&(H=!0),ie.R>-1&&ie.L>-1&&ie.R==ie.L&&(H=!0);break;default:H=!0;break}}if(!(!H&&!z)){var we=new Date(1987,1,19),Pe=0,V=Object.create?Object.create(null):{},ue=[];for(te=0;te<B.FullPaths.length;++te)V[B.FullPaths[te]]=!0,B.FileIndex[te].type!==0&&ue.push([B.FullPaths[te],B.FileIndex[te]]);for(te=0;te<ue.length;++te){var _e=n(ue[te][0]);J=V[_e],J||(ue.push([_e,{name:s(_e).replace("/",""),type:1,clsid:Z,ct:we,mt:we,content:null}]),V[_e]=!0)}for(ue.sort(function(ct,tt){return r(ct[0],tt[0])}),B.FullPaths=[],B.FileIndex=[],te=0;te<ue.length;++te)B.FullPaths[te]=ue[te][0],B.FileIndex[te]=ue[te][1];for(te=0;te<ue.length;++te){var ve=B.FileIndex[te],Xe=B.FullPaths[te];if(ve.name=s(Xe).replace("/",""),ve.L=ve.R=ve.C=-(ve.color=1),ve.size=ve.content?ve.content.length:0,ve.start=0,ve.clsid=ve.clsid||Z,te===0)ve.C=ue.length>1?1:-1,ve.size=0,ve.type=5;else if(Xe.slice(-1)=="/"){for(Pe=te+1;Pe<ue.length&&n(B.FullPaths[Pe])!=Xe;++Pe);for(ve.C=Pe>=ue.length?-1:Pe,Pe=te+1;Pe<ue.length&&n(B.FullPaths[Pe])!=n(Xe);++Pe);ve.R=Pe>=ue.length?-1:Pe,ve.type=1}else n(B.FullPaths[te+1]||"")==n(Xe)&&(ve.R=te+1),ve.type=2}}}function D(B,z){var H=z||{};if(H.fileType=="mad")return ht(B,H);switch(M(B),H.fileType){case"zip":return Mt(B,H)}var J=(function(ct){for(var tt=0,Qe=0,Ut=0;Ut<ct.FileIndex.length;++Ut){var Tr=ct.FileIndex[Ut];if(Tr.content){var Rr=Tr.content.length;Rr>0&&(Rr<4096?tt+=Rr+63>>6:Qe+=Rr+511>>9)}}for(var Lr=ct.FullPaths.length+3>>2,rn=tt+7>>3,$s=tt+127>>7,Cr=rn+Qe+Lr+$s,Br=Cr+127>>7,Ls=Br<=109?0:Math.ceil((Br-109)/127);Cr+Br+Ls+127>>7>Br;)Ls=++Br<=109?0:Math.ceil((Br-109)/127);var X=[1,Ls,Br,$s,Lr,Qe,tt,0];return ct.FileIndex[0].size=tt<<6,X[7]=(ct.FileIndex[0].start=X[0]+X[1]+X[2]+X[3]+X[4]+X[5])+(X[6]+7>>3),X})(B),te=Un(J[7]<<9),ie=0,we=0;{for(ie=0;ie<8;++ie)te.write_shift(1,Y[ie]);for(ie=0;ie<8;++ie)te.write_shift(2,0);for(te.write_shift(2,62),te.write_shift(2,3),te.write_shift(2,65534),te.write_shift(2,9),te.write_shift(2,6),ie=0;ie<3;++ie)te.write_shift(2,0);for(te.write_shift(4,0),te.write_shift(4,J[2]),te.write_shift(4,J[0]+J[1]+J[2]+J[3]-1),te.write_shift(4,0),te.write_shift(4,4096),te.write_shift(4,J[3]?J[0]+J[1]+J[2]-1:F),te.write_shift(4,J[3]),te.write_shift(-4,J[1]?J[0]-1:F),te.write_shift(4,J[1]),ie=0;ie<109;++ie)te.write_shift(-4,ie<J[2]?J[1]+ie:-1)}if(J[1])for(we=0;we<J[1];++we){for(;ie<236+we*127;++ie)te.write_shift(-4,ie<J[2]?J[1]+ie:-1);te.write_shift(-4,we===J[1]-1?F:we+1)}var Pe=function(ct){for(we+=ct;ie<we-1;++ie)te.write_shift(-4,ie+1);ct&&(++ie,te.write_shift(-4,F))};for(we=ie=0,we+=J[1];ie<we;++ie)te.write_shift(-4,re.DIFSECT);for(we+=J[2];ie<we;++ie)te.write_shift(-4,re.FATSECT);Pe(J[3]),Pe(J[4]);for(var V=0,ue=0,_e=B.FileIndex[0];V<B.FileIndex.length;++V)_e=B.FileIndex[V],_e.content&&(ue=_e.content.length,!(ue<4096)&&(_e.start=we,Pe(ue+511>>9)));for(Pe(J[6]+7>>3);te.l&511;)te.write_shift(-4,re.ENDOFCHAIN);for(we=ie=0,V=0;V<B.FileIndex.length;++V)_e=B.FileIndex[V],_e.content&&(ue=_e.content.length,!(!ue||ue>=4096)&&(_e.start=we,Pe(ue+63>>6)));for(;te.l&511;)te.write_shift(-4,re.ENDOFCHAIN);for(ie=0;ie<J[4]<<2;++ie){var ve=B.FullPaths[ie];if(!ve||ve.length===0){for(V=0;V<17;++V)te.write_shift(4,0);for(V=0;V<3;++V)te.write_shift(4,-1);for(V=0;V<12;++V)te.write_shift(4,0);continue}_e=B.FileIndex[ie],ie===0&&(_e.start=_e.size?_e.start-1:F);var Xe=ie===0&&H.root||_e.name;if(ue=2*(Xe.length+1),te.write_shift(64,Xe,"utf16le"),te.write_shift(2,ue),te.write_shift(1,_e.type),te.write_shift(1,_e.color),te.write_shift(-4,_e.L),te.write_shift(-4,_e.R),te.write_shift(-4,_e.C),_e.clsid)te.write_shift(16,_e.clsid,"hex");else for(V=0;V<4;++V)te.write_shift(4,0);te.write_shift(4,_e.state||0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,0),te.write_shift(4,_e.start),te.write_shift(4,_e.size),te.write_shift(4,0)}for(ie=1;ie<B.FileIndex.length;++ie)if(_e=B.FileIndex[ie],_e.size>=4096)if(te.l=_e.start+1<<9,xr&&Buffer.isBuffer(_e.content))_e.content.copy(te,te.l,0,_e.size),te.l+=_e.size+511&-512;else{for(V=0;V<_e.size;++V)te.write_shift(1,_e.content[V]);for(;V&511;++V)te.write_shift(1,0)}for(ie=1;ie<B.FileIndex.length;++ie)if(_e=B.FileIndex[ie],_e.size>0&&_e.size<4096)if(xr&&Buffer.isBuffer(_e.content))_e.content.copy(te,te.l,0,_e.size),te.l+=_e.size+63&-64;else{for(V=0;V<_e.size;++V)te.write_shift(1,_e.content[V]);for(;V&63;++V)te.write_shift(1,0)}if(xr)te.l=te.length;else for(;te.l<te.length;)te.write_shift(1,0);return te}function A(B,z){var H=B.FullPaths.map(function(V){return V.toUpperCase()}),J=H.map(function(V){var ue=V.split("/");return ue[ue.length-(V.slice(-1)=="/"?2:1)]}),te=!1;z.charCodeAt(0)===47?(te=!0,z=H[0].slice(0,-1)+z):te=z.indexOf("/")!==-1;var ie=z.toUpperCase(),we=te===!0?H.indexOf(ie):J.indexOf(ie);if(we!==-1)return B.FileIndex[we];var Pe=!ie.match(Zd);for(ie=ie.replace(Ba,""),Pe&&(ie=ie.replace(Zd,"!")),we=0;we<H.length;++we)if((Pe?H[we].replace(Zd,"!"):H[we]).replace(Ba,"")==ie||(Pe?J[we].replace(Zd,"!"):J[we]).replace(Ba,"")==ie)return B.FileIndex[we];return null}var O=64,F=-2,W="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ne(B,z,H){d();var J=D(B,H);u.writeFileSync(z,J)}function U(B){for(var z=new Array(B.length),H=0;H<B.length;++H)z[H]=String.fromCharCode(B[H]);return z.join("")}function oe(B,z){var H=D(B,z);switch(z&&z.type||"buffer"){case"file":return d(),u.writeFileSync(z.filename,H),H;case"binary":return typeof H=="string"?H:U(H);case"base64":return zP(typeof H=="string"?H:U(H));case"buffer":if(xr)return Buffer.isBuffer(H)?H:oc(H);case"array":return typeof H=="string"?ii(H):H}return H}var K;function R(B){try{var z=B.InflateRaw,H=new z;if(H._processChunk(new Uint8Array([3,0]),H._finishFlushFlag),H.bytesRead)K=B;else throw new Error("zlib does not expose bytesRead")}catch(J){console.error("cannot use native zlib: "+(J.message||J))}}function Q(B,z){if(!K)return Ge(B,z);var H=K.InflateRaw,J=new H,te=J._processChunk(B.slice(B.l),J._finishFlushFlag);return B.l+=J.bytesRead,te}function ee(B){return K?K.deflateRawSync(B):bt(B)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Me(B){var z=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(z>>16|z>>8|z)&255}for(var ce=typeof Uint8Array<"u",me=ce?new Uint8Array(256):[],Oe=0;Oe<256;++Oe)me[Oe]=Me(Oe);function q(B,z){var H=me[B&255];return z<=8?H>>>8-z:(H=H<<8|me[B>>8&255],z<=16?H>>>16-z:(H=H<<8|me[B>>16&255],H>>>24-z))}function Ne(B,z){var H=z&7,J=z>>>3;return(B[J]|(H<=6?0:B[J+1]<<8))>>>H&3}function ae(B,z){var H=z&7,J=z>>>3;return(B[J]|(H<=5?0:B[J+1]<<8))>>>H&7}function De(B,z){var H=z&7,J=z>>>3;return(B[J]|(H<=4?0:B[J+1]<<8))>>>H&15}function Be(B,z){var H=z&7,J=z>>>3;return(B[J]|(H<=3?0:B[J+1]<<8))>>>H&31}function Se(B,z){var H=z&7,J=z>>>3;return(B[J]|(H<=1?0:B[J+1]<<8))>>>H&127}function Fe(B,z,H){var J=z&7,te=z>>>3,ie=(1<<H)-1,we=B[te]>>>J;return H<8-J||(we|=B[te+1]<<8-J,H<16-J)||(we|=B[te+2]<<16-J,H<24-J)||(we|=B[te+3]<<24-J),we&ie}function ze(B,z,H){var J=z&7,te=z>>>3;return J<=5?B[te]|=(H&7)<<J:(B[te]|=H<<J&255,B[te+1]=(H&7)>>8-J),z+3}function Ee(B,z,H){var J=z&7,te=z>>>3;return H=(H&1)<<J,B[te]|=H,z+1}function He(B,z,H){var J=z&7,te=z>>>3;return H<<=J,B[te]|=H&255,H>>>=8,B[te+1]=H,z+8}function Nt(B,z,H){var J=z&7,te=z>>>3;return H<<=J,B[te]|=H&255,H>>>=8,B[te+1]=H&255,B[te+2]=H>>>8,z+16}function Ke(B,z){var H=B.length,J=2*H>z?2*H:z+5,te=0;if(H>=z)return B;if(xr){var ie=WP(J);if(B.copy)B.copy(ie);else for(;te<B.length;++te)ie[te]=B[te];return ie}else if(ce){var we=new Uint8Array(J);if(we.set)we.set(B);else for(;te<H;++te)we[te]=B[te];return we}return B.length=J,B}function kt(B){for(var z=new Array(B),H=0;H<B;++H)z[H]=0;return z}function ft(B,z,H){var J=1,te=0,ie=0,we=0,Pe=0,V=B.length,ue=ce?new Uint16Array(32):kt(32);for(ie=0;ie<32;++ie)ue[ie]=0;for(ie=V;ie<H;++ie)B[ie]=0;V=B.length;var _e=ce?new Uint16Array(V):kt(V);for(ie=0;ie<V;++ie)ue[te=B[ie]]++,J<te&&(J=te),_e[ie]=0;for(ue[0]=0,ie=1;ie<=J;++ie)ue[ie+16]=Pe=Pe+ue[ie-1]<<1;for(ie=0;ie<V;++ie)Pe=B[ie],Pe!=0&&(_e[ie]=ue[Pe+16]++);var ve=0;for(ie=0;ie<V;++ie)if(ve=B[ie],ve!=0)for(Pe=q(_e[ie],J)>>J-ve,we=(1<<J+4-ve)-1;we>=0;--we)z[Pe|we<<ve]=ve&15|ie<<4;return J}var Qt=ce?new Uint16Array(512):kt(512),yt=ce?new Uint16Array(32):kt(32);if(!ce){for(var wt=0;wt<512;++wt)Qt[wt]=0;for(wt=0;wt<32;++wt)yt[wt]=0}(function(){for(var B=[],z=0;z<32;z++)B.push(5);ft(B,yt,32);var H=[];for(z=0;z<=143;z++)H.push(8);for(;z<=255;z++)H.push(9);for(;z<=279;z++)H.push(7);for(;z<=287;z++)H.push(8);ft(H,Qt,288)})();var vt=(function(){for(var z=ce?new Uint8Array(32768):[],H=0,J=0;H<ge.length-1;++H)for(;J<ge[H+1];++J)z[J]=H;for(;J<32768;++J)z[J]=29;var te=ce?new Uint8Array(259):[];for(H=0,J=0;H<xe.length-1;++H)for(;J<xe[H+1];++J)te[J]=H;function ie(Pe,V){for(var ue=0;ue<Pe.length;){var _e=Math.min(65535,Pe.length-ue),ve=ue+_e==Pe.length;for(V.write_shift(1,+ve),V.write_shift(2,_e),V.write_shift(2,~_e&65535);_e-- >0;)V[V.l++]=Pe[ue++]}return V.l}function we(Pe,V){for(var ue=0,_e=0,ve=ce?new Uint16Array(32768):[];_e<Pe.length;){var Xe=Math.min(65535,Pe.length-_e);if(Xe<10){for(ue=ze(V,ue,+(_e+Xe==Pe.length)),ue&7&&(ue+=8-(ue&7)),V.l=ue/8|0,V.write_shift(2,Xe),V.write_shift(2,~Xe&65535);Xe-- >0;)V[V.l++]=Pe[_e++];ue=V.l*8;continue}ue=ze(V,ue,+(_e+Xe==Pe.length)+2);for(var ct=0;Xe-- >0;){var tt=Pe[_e];ct=(ct<<5^tt)&32767;var Qe=-1,Ut=0;if((Qe=ve[ct])&&(Qe|=_e&-32768,Qe>_e&&(Qe-=32768),Qe<_e))for(;Pe[Qe+Ut]==Pe[_e+Ut]&&Ut<250;)++Ut;if(Ut>2){tt=te[Ut],tt<=22?ue=He(V,ue,me[tt+1]>>1)-1:(He(V,ue,3),ue+=5,He(V,ue,me[tt-23]>>5),ue+=3);var Tr=tt<8?0:tt-4>>2;Tr>0&&(Nt(V,ue,Ut-xe[tt]),ue+=Tr),tt=z[_e-Qe],ue=He(V,ue,me[tt]>>3),ue-=3;var Rr=tt<4?0:tt-2>>1;Rr>0&&(Nt(V,ue,_e-Qe-ge[tt]),ue+=Rr);for(var Lr=0;Lr<Ut;++Lr)ve[ct]=_e&32767,ct=(ct<<5^Pe[_e])&32767,++_e;Xe-=Ut-1}else tt<=143?tt=tt+48:ue=Ee(V,ue,1),ue=He(V,ue,me[tt]),ve[ct]=_e&32767,++_e}ue=He(V,ue,0)-1}return V.l=(ue+7)/8|0,V.l}return function(V,ue){return V.length<8?ie(V,ue):we(V,ue)}})();function bt(B){var z=Un(50+Math.floor(B.length*1.1)),H=vt(B,z);return z.slice(0,H)}var Gt=ce?new Uint16Array(32768):kt(32768),tn=ce?new Uint16Array(32768):kt(32768),ur=ce?new Uint16Array(128):kt(128),zr=1,ye=1;function ut(B,z){var H=Be(B,z)+257;z+=5;var J=Be(B,z)+1;z+=5;var te=De(B,z)+4;z+=4;for(var ie=0,we=ce?new Uint8Array(19):kt(19),Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=1,ue=ce?new Uint8Array(8):kt(8),_e=ce?new Uint8Array(8):kt(8),ve=we.length,Xe=0;Xe<te;++Xe)we[se[Xe]]=ie=ae(B,z),V<ie&&(V=ie),ue[ie]++,z+=3;var ct=0;for(ue[0]=0,Xe=1;Xe<=V;++Xe)_e[Xe]=ct=ct+ue[Xe-1]<<1;for(Xe=0;Xe<ve;++Xe)(ct=we[Xe])!=0&&(Pe[Xe]=_e[ct]++);var tt=0;for(Xe=0;Xe<ve;++Xe)if(tt=we[Xe],tt!=0){ct=me[Pe[Xe]]>>8-tt;for(var Qe=(1<<7-tt)-1;Qe>=0;--Qe)ur[ct|Qe<<tt]=tt&7|Xe<<3}var Ut=[];for(V=1;Ut.length<H+J;)switch(ct=ur[Se(B,z)],z+=ct&7,ct>>>=3){case 16:for(ie=3+Ne(B,z),z+=2,ct=Ut[Ut.length-1];ie-- >0;)Ut.push(ct);break;case 17:for(ie=3+ae(B,z),z+=3;ie-- >0;)Ut.push(0);break;case 18:for(ie=11+Se(B,z),z+=7;ie-- >0;)Ut.push(0);break;default:Ut.push(ct),V<ct&&(V=ct);break}var Tr=Ut.slice(0,H),Rr=Ut.slice(H);for(Xe=H;Xe<286;++Xe)Tr[Xe]=0;for(Xe=J;Xe<30;++Xe)Rr[Xe]=0;return zr=ft(Tr,Gt,286),ye=ft(Rr,tn,30),z}function at(B,z){if(B[0]==3&&!(B[1]&3))return[el(z),2];for(var H=0,J=0,te=WP(z||1<<18),ie=0,we=te.length>>>0,Pe=0,V=0;(J&1)==0;){if(J=ae(B,H),H+=3,J>>>1)J>>1==1?(Pe=9,V=5):(H=ut(B,H),Pe=zr,V=ye);else{H&7&&(H+=8-(H&7));var ue=B[H>>>3]|B[(H>>>3)+1]<<8;if(H+=32,ue>0)for(!z&&we<ie+ue&&(te=Ke(te,ie+ue),we=te.length);ue-- >0;)te[ie++]=B[H>>>3],H+=8;continue}for(;;){!z&&we<ie+32767&&(te=Ke(te,ie+32767),we=te.length);var _e=Fe(B,H,Pe),ve=J>>>1==1?Qt[_e]:Gt[_e];if(H+=ve&15,ve>>>=4,(ve>>>8&255)===0)te[ie++]=ve;else{if(ve==256)break;ve-=257;var Xe=ve<8?0:ve-4>>2;Xe>5&&(Xe=0);var ct=ie+xe[ve];Xe>0&&(ct+=Fe(B,H,Xe),H+=Xe),_e=Fe(B,H,V),ve=J>>>1==1?yt[_e]:tn[_e],H+=ve&15,ve>>>=4;var tt=ve<4?0:ve-2>>1,Qe=ge[ve];for(tt>0&&(Qe+=Fe(B,H,tt),H+=tt),!z&&we<ct&&(te=Ke(te,ct+100),we=te.length);ie<ct;)te[ie]=te[ie-Qe],++ie}}}return z?[te,H+7>>>3]:[te.slice(0,ie),H+7>>>3]}function Ge(B,z){var H=B.slice(B.l||0),J=at(H,z);return B.l+=J[1],J[0]}function Et(B,z){if(B)typeof console<"u"&&console.error(z);else throw new Error(z)}function st(B,z){var H=B;ca(H,0);var J=[],te=[],ie={FileIndex:J,FullPaths:te};E(ie,{root:z.root});for(var we=H.length-4;(H[we]!=80||H[we+1]!=75||H[we+2]!=5||H[we+3]!=6)&&we>=0;)--we;H.l=we+4,H.l+=4;var Pe=H.read_shift(2);H.l+=6;var V=H.read_shift(4);for(H.l=V,we=0;we<Pe;++we){H.l+=20;var ue=H.read_shift(4),_e=H.read_shift(4),ve=H.read_shift(2),Xe=H.read_shift(2),ct=H.read_shift(2);H.l+=8;var tt=H.read_shift(4),Qe=l(H.slice(H.l+ve,H.l+ve+Xe));H.l+=ve+Xe+ct;var Ut=H.l;H.l=tt+4,pt(H,ue,_e,ie,Qe),H.l=Ut}return ie}function pt(B,z,H,J,te){B.l+=2;var ie=B.read_shift(2),we=B.read_shift(2),Pe=o(B);if(ie&8257)throw new Error("Unsupported ZIP encryption");for(var V=B.read_shift(4),ue=B.read_shift(4),_e=B.read_shift(4),ve=B.read_shift(2),Xe=B.read_shift(2),ct="",tt=0;tt<ve;++tt)ct+=String.fromCharCode(B[B.l++]);if(Xe){var Qe=l(B.slice(B.l,B.l+Xe));(Qe[21589]||{}).mt&&(Pe=Qe[21589].mt),((te||{})[21589]||{}).mt&&(Pe=te[21589].mt)}B.l+=Xe;var Ut=B.slice(B.l,B.l+ue);switch(we){case 8:Ut=Q(B,_e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+we)}var Tr=!1;ie&8&&(V=B.read_shift(4),V==134695760&&(V=B.read_shift(4),Tr=!0),ue=B.read_shift(4),_e=B.read_shift(4)),ue!=z&&Et(Tr,"Bad compressed size: "+z+" != "+ue),_e!=H&&Et(Tr,"Bad uncompressed size: "+H+" != "+_e),qt(J,ct,Ut,{unsafe:!0,mt:Pe})}function Mt(B,z){var H=z||{},J=[],te=[],ie=Un(1),we=H.compression?8:0,Pe=0,V=0,ue=0,_e=0,ve=0,Xe=B.FullPaths[0],ct=Xe,tt=B.FileIndex[0],Qe=[],Ut=0;for(V=1;V<B.FullPaths.length;++V)if(ct=B.FullPaths[V].slice(Xe.length),tt=B.FileIndex[V],!(!tt.size||!tt.content||ct=="Sh33tJ5")){var Tr=_e,Rr=Un(ct.length);for(ue=0;ue<ct.length;++ue)Rr.write_shift(1,ct.charCodeAt(ue)&127);Rr=Rr.slice(0,Rr.l),Qe[ve]=Yoe.buf(tt.content,0);var Lr=tt.content;we==8&&(Lr=ee(Lr)),ie=Un(30),ie.write_shift(4,67324752),ie.write_shift(2,20),ie.write_shift(2,Pe),ie.write_shift(2,we),tt.mt?i(ie,tt.mt):ie.write_shift(4,0),ie.write_shift(-4,Qe[ve]),ie.write_shift(4,Lr.length),ie.write_shift(4,tt.content.length),ie.write_shift(2,Rr.length),ie.write_shift(2,0),_e+=ie.length,J.push(ie),_e+=Rr.length,J.push(Rr),_e+=Lr.length,J.push(Lr),ie=Un(46),ie.write_shift(4,33639248),ie.write_shift(2,0),ie.write_shift(2,20),ie.write_shift(2,Pe),ie.write_shift(2,we),ie.write_shift(4,0),ie.write_shift(-4,Qe[ve]),ie.write_shift(4,Lr.length),ie.write_shift(4,tt.content.length),ie.write_shift(2,Rr.length),ie.write_shift(2,0),ie.write_shift(2,0),ie.write_shift(2,0),ie.write_shift(2,0),ie.write_shift(4,0),ie.write_shift(4,Tr),Ut+=ie.l,te.push(ie),Ut+=Rr.length,te.push(Rr),++ve}return ie=Un(22),ie.write_shift(4,101010256),ie.write_shift(2,0),ie.write_shift(2,0),ie.write_shift(2,ve),ie.write_shift(2,ve),ie.write_shift(4,Ut),ie.write_shift(4,_e),ie.write_shift(2,0),Ho([Ho(J),Ho(te),ie])}var et={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mt(B,z){if(B.ctype)return B.ctype;var H=B.name||"",J=H.match(/\.([^\.]+)$/);return J&&et[J[1]]||z&&(J=(H=z).match(/[\.\\]([^\.\\])+$/),J&&et[J[1]])?et[J[1]]:"application/octet-stream"}function It(B){for(var z=zP(B),H=[],J=0;J<z.length;J+=76)H.push(z.slice(J,J+76));return H.join(`\r
`)+`\r
`}function ar(B){var z=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ue){var _e=ue.charCodeAt(0).toString(16).toUpperCase();return"="+(_e.length==1?"0"+_e:_e)});z=z.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),z.charAt(0)==`
`&&(z="=0D"+z.slice(1)),z=z.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var H=[],J=z.split(`\r
`),te=0;te<J.length;++te){var ie=J[te];if(ie.length==0){H.push("");continue}for(var we=0;we<ie.length;){var Pe=76,V=ie.slice(we,we+Pe);V.charAt(Pe-1)=="="?Pe--:V.charAt(Pe-2)=="="?Pe-=2:V.charAt(Pe-3)=="="&&(Pe-=3),V=ie.slice(we,we+Pe),we+=Pe,we<ie.length&&(V+="="),H.push(V)}}return H.join(`\r
`)}function gt(B){for(var z=[],H=0;H<B.length;++H){for(var J=B[H];H<=B.length&&J.charAt(J.length-1)=="=";)J=J.slice(0,J.length-1)+B[++H];z.push(J)}for(var te=0;te<z.length;++te)z[te]=z[te].replace(/[=][0-9A-Fa-f]{2}/g,function(ie){return String.fromCharCode(parseInt(ie.slice(1),16))});return ii(z.join(`\r
`))}function lr(B,z,H){for(var J="",te="",ie="",we,Pe=0;Pe<10;++Pe){var V=z[Pe];if(!V||V.match(/^\s*$/))break;var ue=V.match(/^(.*?):\s*([^\s].*)$/);if(ue)switch(ue[1].toLowerCase()){case"content-location":J=ue[2].trim();break;case"content-type":ie=ue[2].trim();break;case"content-transfer-encoding":te=ue[2].trim();break}}switch(++Pe,te.toLowerCase()){case"base64":we=ii(xs(z.slice(Pe).join("")));break;case"quoted-printable":we=gt(z.slice(Pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+te)}var _e=qt(B,J.slice(H.length),we,{unsafe:!0});ie&&(_e.ctype=ie)}function Sr(B,z){if(U(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var H=z&&z.root||"",J=(xr&&Buffer.isBuffer(B)?B.toString("binary"):U(B)).split(`\r
`),te=0,ie="";for(te=0;te<J.length;++te)if(ie=J[te],!!/^Content-Location:/i.test(ie)&&(ie=ie.slice(ie.indexOf("file")),H||(H=ie.slice(0,ie.lastIndexOf("/")+1)),ie.slice(0,H.length)!=H))for(;H.length>0&&(H=H.slice(0,H.length-1),H=H.slice(0,H.lastIndexOf("/")+1),ie.slice(0,H.length)!=H););var we=(J[1]||"").match(/boundary="(.*?)"/);if(!we)throw new Error("MAD cannot find boundary");var Pe="--"+(we[1]||""),V=[],ue=[],_e={FileIndex:V,FullPaths:ue};E(_e);var ve,Xe=0;for(te=0;te<J.length;++te){var ct=J[te];ct!==Pe&&ct!==Pe+"--"||(Xe++&&lr(_e,J.slice(ve,te),H),ve=te)}return _e}function ht(B,z){var H=z||{},J=H.boundary||"SheetJS";J="------="+J;for(var te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+J.slice(2)+'"',"","",""],ie=B.FullPaths[0],we=ie,Pe=B.FileIndex[0],V=1;V<B.FullPaths.length;++V)if(we=B.FullPaths[V].slice(ie.length),Pe=B.FileIndex[V],!(!Pe.size||!Pe.content||we=="Sh33tJ5")){we=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ut){return"_x"+Ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ut){return"_u"+Ut.charCodeAt(0).toString(16)+"_"});for(var ue=Pe.content,_e=xr&&Buffer.isBuffer(ue)?ue.toString("binary"):U(ue),ve=0,Xe=Math.min(1024,_e.length),ct=0,tt=0;tt<=Xe;++tt)(ct=_e.charCodeAt(tt))>=32&&ct<128&&++ve;var Qe=ve>=Xe*4/5;te.push(J),te.push("Content-Location: "+(H.root||"file:///C:/SheetJS/")+we),te.push("Content-Transfer-Encoding: "+(Qe?"quoted-printable":"base64")),te.push("Content-Type: "+mt(Pe,we)),te.push(""),te.push(Qe?ar(_e):It(_e))}return te.push(J+`--\r
`),te.join(`\r
`)}function sr(B){var z={};return E(z,B),z}function qt(B,z,H,J){var te=J&&J.unsafe;te||E(B);var ie=!te&&vr.find(B,z);if(!ie){var we=B.FullPaths[0];z.slice(0,we.length)==we?we=z:(we.slice(-1)!="/"&&(we+="/"),we=(we+z).replace("//","/")),ie={name:s(z),type:2},B.FileIndex.push(ie),B.FullPaths.push(we),te||vr.utils.cfb_gc(B)}return ie.content=H,ie.size=H?H.length:0,J&&(J.CLSID&&(ie.clsid=J.CLSID),J.mt&&(ie.mt=J.mt),J.ct&&(ie.ct=J.ct)),ie}function Xr(B,z){E(B);var H=vr.find(B,z);if(H){for(var J=0;J<B.FileIndex.length;++J)if(B.FileIndex[J]==H)return B.FileIndex.splice(J,1),B.FullPaths.splice(J,1),!0}return!1}function wr(B,z,H){E(B);var J=vr.find(B,z);if(J){for(var te=0;te<B.FileIndex.length;++te)if(B.FileIndex[te]==J)return B.FileIndex[te].name=s(H),B.FullPaths[te]=H,!0}return!1}function pr(B){M(B,!0)}return t.find=A,t.read=_,t.parse=f,t.write=oe,t.writeFile=ne,t.utils={cfb_new:sr,cfb_add:qt,cfb_del:Xr,cfb_mov:wr,cfb_gc:pr,ReadShift:hh,CheckField:x$,prep_blob:ca,bconcat:Ho,use_zlib:R,_deflateRaw:bt,_inflateRaw:Ge,consts:re},t})();function Xoe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Oi(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function pk(e){for(var t=[],r=Oi(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var Pm=new Date(1899,11,30,0,0,0);function Ua(e,t){var r=e.getTime(),n=Pm.getTime()+(e.getTimezoneOffset()-Pm.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var XF=new Date,Joe=Pm.getTime()+(XF.getTimezoneOffset()-Pm.getTimezoneOffset())*6e4,ZP=XF.getTimezoneOffset();function Dg(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Joe),t.getTimezoneOffset()!==ZP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-ZP)*6e4),t}function Qoe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var eI=new Date("2017-02-19T19:06:09.000Z"),JF=isNaN(eI.getFullYear())?new Date("2/19/17"):eI,Zoe=JF.getFullYear()==2017;function ea(e,t){var r=new Date(e);if(Zoe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(JF.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ec(e,t){if(xr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return th(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return th(FF(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return th(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return th(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ha(e[r]));return t}function fn(e,t){for(var r="";r.length<t;)r+=e;return r}function di(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var ele=["january","february","march","april","may","june","july","august","september","october","november","december"];function $u(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&ele.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var tle=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function QF(e){return e?e.content&&e.type?ec(e.content,!0):e.data?Qd(e.data):e.asNodeBuffer&&xr?Qd(e.asNodeBuffer().toString("binary")):e.asBinary?Qd(e.asBinary()):e._data&&e._data.getContent?Qd(ec(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function ZF(e){if(!e)return null;if(e.data)return HP(e.data);if(e.asNodeBuffer&&xr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?HP(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function rle(e){return e&&e.name.slice(-4)===".bin"?ZF(e):QF(e)}function As(e,t){for(var r=e.FullPaths||Oi(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function mk(e,t){var r=As(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function _n(e,t,r){if(!r)return rle(mk(e,t));if(!t)return null;try{return _n(e,t)}catch{return null}}function fs(e,t,r){if(!r)return QF(mk(e,t));if(!t)return null;try{return fs(e,t)}catch{return null}}function nle(e,t,r){return ZF(mk(e,t))}function tI(e){for(var t=e.FullPaths||Oi(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function ale(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return xr?n=oc(r):n=Noe(r),vr.utils.cfb_add(e,t,n)}vr.utils.cfb_add(e,t,r)}else e.file(t,r)}function e$(e,t){switch(t.type){case"base64":return vr.read(e,{type:"base64"});case"binary":return vr.read(e,{type:"binary"});case"buffer":case"array":return vr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function eh(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var t$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,sle=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,rI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,ile=/<[^>]*>/g,Ta=t$.match(rI)?rI:ile,ole=/<\w*:/,lle=/<(\/?)\w+:/;function Zt(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(sle),l=0,u="",d=0,f="",p="",m=1;if(o)for(d=0;d!=o.length;++d){for(p=o[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(m=(s=p.charCodeAt(i+1))==34||s==39?1:0,u=p.slice(i+1+m,p.length-m),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=u,n[f.toLowerCase()]=u;else{var x=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[x]&&f.slice(l-3,l)=="ext")continue;n[x]=u,n[x.toLowerCase()]=u}}return n}function Mi(e){return e.replace(lle,"<$1")}var r$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cle=pk(r$),kr=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,u){return r$[l]||String.fromCharCode(parseInt(u,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),ule=/[&<>'"]/g,dle=/[\u0000-\u001f]/g;function gk(e){var t=e+"";return t.replace(ule,function(r){return cle[r]}).replace(/\n/g,"<br/>").replace(dle,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var nI=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function an(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function O1(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function aI(e){var t=el(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function sI(e){return oc(e,"binary").toString("utf8")}var op="foo bar baz",Yr=xr&&(sI(op)==O1(op)&&sI||aI(op)==O1(op)&&aI)||O1,th=xr?function(e){return oc(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},gf=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),n$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),hle=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),fle=/<\/?(?:vt:)?variant>/g,ple=/<(?:vt:)([^>]*)>([\s\S]*)</;function iI(e,t){var r=Zt(e),n=e.match(hle(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(fle,"").match(ple);o&&s.push({v:Yr(o[2]),t:o[1]})}),s}var mle=/(^\s|\s$|\n)/;function gle(e){return Oi(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function xle(e,t,r){return"<"+e+(r!=null?gle(r):"")+(t!=null?(t.match(mle)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function xk(e){if(xr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Yr(lc(dk(e)));throw new Error("Bad input format: expected Buffer or string")}var xf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,yle={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},vle=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function ble(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function wle(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var oI=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},lI=xr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:oc(t)})):oI(e)}:oI,cI=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(no(e,s)));return n.join("").replace(Ba,"")},yk=xr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ba,""):cI(e,t,r)}:cI,uI=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},a$=xr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):uI(e,t,r)}:uI,dI=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Jc(e,s)));return n.join("")},Df=xr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):dI(t,r,n)}:dI,s$=function(e,t){var r=cs(e,t);return r>0?Df(e,t+4,t+4+r-1):""},i$=s$,o$=function(e,t){var r=cs(e,t);return r>0?Df(e,t+4,t+4+r-1):""},l$=o$,c$=function(e,t){var r=2*cs(e,t);return r>0?Df(e,t+4,t+4+r-1):""},u$=c$,d$=function(t,r){var n=cs(t,r);return n>0?yk(t,r+4,r+4+n):""},h$=d$,f$=function(e,t){var r=cs(e,t);return r>0?Df(e,t+4,t+4+r):""},p$=f$,m$=function(e,t){return ble(e,t)},Im=m$,g$=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};xr&&(i$=function(t,r){if(!Buffer.isBuffer(t))return s$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},l$=function(t,r){if(!Buffer.isBuffer(t))return o$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},u$=function(t,r){if(!Buffer.isBuffer(t))return c$(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},h$=function(t,r){if(!Buffer.isBuffer(t))return d$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},p$=function(t,r){if(!Buffer.isBuffer(t))return f$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Im=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):m$(t,r)},g$=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Jc=function(e,t){return e[t]},no=function(e,t){return e[t+1]*256+e[t]},jle=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},cs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Pl=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Nle=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function hh(e,t){var r="",n,s,i=[],o,l,u,d;switch(t){case"dbcs":if(d=this.l,xr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(u=0;u<e;++u)r+=String.fromCharCode(no(this,d)),d+=2;e*=2;break;case"utf8":r=Df(this,this.l,this.l+e);break;case"utf16le":e*=2,r=yk(this,this.l,this.l+e);break;case"wstr":return hh.call(this,e,"dbcs");case"lpstr-ansi":r=i$(this,this.l),e=4+cs(this,this.l);break;case"lpstr-cp":r=l$(this,this.l),e=4+cs(this,this.l);break;case"lpwstr":r=u$(this,this.l),e=4+2*cs(this,this.l);break;case"lpp4":e=4+cs(this,this.l),r=h$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+cs(this,this.l),r=p$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Jc(this,this.l+e++))!==0;)i.push(ip(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=no(this,this.l+e))!==0;)i.push(ip(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,u=0;u<e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Jc(this,d),this.l=d+1,l=hh.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(ip(no(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,u=0;u!=e;++u){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Jc(this,d),this.l=d+1,l=hh.call(this,e-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(ip(Jc(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=Jc(this,this.l),this.l++,n;case 2:return n=(t==="i"?jle:no)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Pl:Nle)(this,this.l),this.l+=4,n):(s=cs(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Im(this,this.l):s=Im([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=a$(this,this.l,e);break}}return this.l+=e,r}var kle=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Sle=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},_le=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Ele(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)_le(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,kle(this,t,this.l);break;case 8:if(n=8,r==="f"){wle(this,t,this.l);break}case 16:break;case-4:n=4,Sle(this,t,this.l);break}return this.l+=n,this}function x$(e,t){var r=a$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ca(e,t){e.l=t,e.read_shift=hh,e.chk=x$,e.write_shift=Ele}function Ea(e,t){e.l+=t}function Un(e){var t=el(e);return ca(t,0),t}function vo(e,t,r){if(e){var n,s,i;ca(e,e.l||0);for(var o=e.length,l=0,u=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=Lm[l]||Lm[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;u=e.l+i;var f=d.f&&d.f(e,i,r);if(e.l=u,t(f,d,l))return}}}function O2(){var e=[],t=xr?256:2048,r=function(d){var f=Un(d);return ca(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),Ho(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function fh(e,t,r){var n=ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function hI(e,t,r){var n=ha(e);return n.s=fh(n.s,t.s,r),n.e=fh(n.e,t.s,r),n}function ph(e,t){if(e.cRel&&e.c<0)for(e=ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=ir(e);return!e.cRel&&e.cRel!=null&&(r=Ale(r)),!e.rRel&&e.rRel!=null&&(r=Tle(r)),r}function P1(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+qn(e.s.c)+":"+(e.e.cRel?"":"$")+qn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+fa(e.s.r)+":"+(e.e.rRel?"":"$")+fa(e.e.r):ph(e.s,t.biff)+":"+ph(e.e,t.biff)}function vk(e){return parseInt(Cle(e),10)-1}function fa(e){return""+(e+1)}function Tle(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Cle(e){return e.replace(/\$(\d+)$/,"$1")}function bk(e){for(var t=Ole(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function qn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Ale(e){return e.replace(/^([A-Z])/,"$$$1")}function Ole(e){return e.replace(/^\$([A-Z])/,"$1")}function Ple(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function La(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function ir(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function td(e){var t=e.indexOf(":");return t==-1?{s:La(e),e:La(e)}:{s:La(e.slice(0,t)),e:La(e.slice(t+1))}}function br(e,t){return typeof t>"u"||typeof t=="number"?br(e.s,e.e):(typeof e!="string"&&(e=ir(e)),typeof t!="string"&&(t=ir(t)),e==t?e:e+":"+t)}function mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function fI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ms(e.z,r?Ua(t):t)}catch{}try{return e.w=Ms((e.XF||{}).numFmtId||(r?14:0),r?Ua(t):t)}catch{return""+t}}function po(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?dc[e.v]||e.v:t==null?fI(e,e.v):fI(e,t))}function ol(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function y$(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?La(n.origin):n.origin;o=u.r,l=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=mn(i["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(d.e.r=o=f.e.r+1)}for(var p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[p].length;++m)if(!(typeof t[p][m]>"u")){var x={v:t[p][m]},v=o+p,y=l+m;if(d.s.r>v&&(d.s.r=v),d.s.c>y&&(d.s.c=y),d.e.r<v&&(d.e.r=v),d.e.c<y&&(d.e.c=y),t[p][m]&&typeof t[p][m]=="object"&&!Array.isArray(t[p][m])&&!(t[p][m]instanceof Date))x=t[p][m];else if(Array.isArray(x.v)&&(x.f=t[p][m][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(n.nullError)x.t="e",x.v=0;else if(n.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?x.t="n":typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=n.dateNF||cr[14],n.cellDates?(x.t="d",x.w=Ms(x.z,Ua(x.v))):(x.t="n",x.v=Ua(x.v),x.w=Ms(x.z,x.v))):x.t="s";if(s)i[v]||(i[v]=[]),i[v][y]&&i[v][y].z&&(x.z=i[v][y].z),i[v][y]=x;else{var b=ir({c:y,r:v});i[b]&&i[b].z&&(x.z=i[b].z),i[b]=x}}}return d.s.c<1e7&&(i["!ref"]=br(d)),i}function rd(e,t){return y$(null,e,t)}function Ile(e){return e.read_shift(4,"i")}function _a(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Dle(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function wk(e,t){var r=e.l,n=e.read_shift(1),s=_a(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),u=0;u!=l;++u)i.push(Dle(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var Mle=wk;function Fs(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function cc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Rle=_a;function jk(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var Fle=_a,P2=jk;function Nk(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?Im([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Pl(t,0)>>2;return r?s/100:s}function v$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var uc=v$;function Na(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function $le(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),u=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=ql[s];d&&(t.rgb=vf(d));break;case 2:t.rgb=vf([o,l,u]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Lle(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function b$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Ble(e){return b$(e,1)}function Ule(e){return b$(e,2)}var kk=2,Ya=3,lp=11,pI=12,Dm=19,cp=64,Hle=65,qle=71,zle=4108,Wle=4126,Xn=80,w$=81,Kle=[Xn,w$],Vle={1:{n:"CodePage",t:kk},2:{n:"Category",t:Xn},3:{n:"PresentationFormat",t:Xn},4:{n:"ByteCount",t:Ya},5:{n:"LineCount",t:Ya},6:{n:"ParagraphCount",t:Ya},7:{n:"SlideCount",t:Ya},8:{n:"NoteCount",t:Ya},9:{n:"HiddenCount",t:Ya},10:{n:"MultimediaClipCount",t:Ya},11:{n:"ScaleCrop",t:lp},12:{n:"HeadingPairs",t:zle},13:{n:"TitlesOfParts",t:Wle},14:{n:"Manager",t:Xn},15:{n:"Company",t:Xn},16:{n:"LinksUpToDate",t:lp},17:{n:"CharacterCount",t:Ya},19:{n:"SharedDoc",t:lp},22:{n:"HyperlinksChanged",t:lp},23:{n:"AppVersion",t:Ya,p:"version"},24:{n:"DigSig",t:Hle},26:{n:"ContentType",t:Xn},27:{n:"ContentStatus",t:Xn},28:{n:"Language",t:Xn},29:{n:"Version",t:Xn},255:{},2147483648:{n:"Locale",t:Dm},2147483651:{n:"Behavior",t:Dm},1919054434:{}},Gle={1:{n:"CodePage",t:kk},2:{n:"Title",t:Xn},3:{n:"Subject",t:Xn},4:{n:"Author",t:Xn},5:{n:"Keywords",t:Xn},6:{n:"Comments",t:Xn},7:{n:"Template",t:Xn},8:{n:"LastAuthor",t:Xn},9:{n:"RevNumber",t:Xn},10:{n:"EditTime",t:cp},11:{n:"LastPrinted",t:cp},12:{n:"CreatedDate",t:cp},13:{n:"ModifiedDate",t:cp},14:{n:"PageCount",t:Ya},15:{n:"WordCount",t:Ya},16:{n:"CharCount",t:Ya},17:{n:"Thumbnail",t:qle},18:{n:"Application",t:Xn},19:{n:"DocSecurity",t:Ya},255:{},2147483648:{n:"Locale",t:Dm},2147483651:{n:"Behavior",t:Dm},1919054434:{}},mI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Yle=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Xle(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Jle=Xle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ql=ha(Jle),dc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},j$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},gI={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Qle(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Zle(e){var t=Qle();if(!e||!e.match)return t;var r={};if((e.match(Ta)||[]).forEach(function(n){var s=Zt(n);switch(s[0].replace(ole,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[gI[s.ContentType]]!==void 0&&t[gI[s.ContentType]].push(s.PartName);break}}),t.xmlns!==yle.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var au={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function I2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function mh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Ta)||[]).forEach(function(s){var i=Zt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:eh(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}var ece="application/vnd.oasis.opendocument.spreadsheet";function tce(e,t){for(var r=xk(e),n,s;n=xf.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Zt(n[0],!1),s.path=="/"&&s.type!==ece)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var gh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],rce=(function(){for(var e=new Array(gh.length),t=0;t<gh.length;++t){var r=gh[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function N$(e){var t={};e=Yr(e);for(var r=0;r<gh.length;++r){var n=gh[r],s=e.match(rce[r]);s!=null&&s.length>0&&(t[n[1]]=kr(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ea(t[n[1]]))}return t}var nce=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function k$(e,t,r,n){var s=[];if(typeof e=="string")s=iI(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?iI(t,n).map(function(f){return f.v}):t,l=0,u=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(u=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=u,r.SheetNames=o.slice(l,l+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=u,r.DefinedNames=o.slice(l,l+u);break;case"Charts":case"Diagramme":r.Chartsheets=u,r.ChartNames=o.slice(l,l+u);break}l+=u}}function ace(e,t,r){var n={};return t||(t={}),e=Yr(e),nce.forEach(function(s){var i=(e.match(gf(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=kr(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&k$(n.HeadingPairs,n.TitlesOfParts,t,r),t}var sce=/<[^>]+>[^<]*/g;function ice(e,t){var r={},n="",s=e.match(sce);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Zt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=kr(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),d=u[0].slice(4),f=u[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=kr(f);break;case"bool":r[n]=an(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=ea(f);break;case"cy":case"error":r[n]=kr(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,u)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var oce={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},I1;function lce(e,t,r){I1||(I1=pk(oce)),t=I1[t]||t,e[t]=r}function Sk(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function S$(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function _$(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function E$(e,t,r){return t===31?_$(e):S$(e,t,r)}function D2(e,t,r){return E$(e,t,r===!1?0:4)}function cce(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return E$(e,t,0)}function uce(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Ba,""),e.l-s&2&&(e.l+=2)}return r}function dce(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Ba,"");return r}function hce(e){var t=e.l,r=Mm(e,w$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Mm(e,Ya);return[r,n]}function fce(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(hce(e));return r}function xI(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Ba,"").replace(Zd,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function T$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function pce(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Mm(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==pI&&n!==t&&Kle.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===pI?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return S$(e,n,4).replace(Ba,"");case 31:return _$(e);case 64:return Sk(e);case 65:return T$(e);case 71:return pce(e);case 80:return D2(e,n,!i.raw).replace(Ba,"");case 81:return cce(e,n).replace(Ba,"");case 4108:return fce(e);case 4126:case 4127:return n==4127?uce(e):dce(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function yI(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,u=-1,d={};for(o=0;o!=s;++o){var f=e.read_shift(4),p=e.read_shift(4);i[o]=[f,p+r]}i.sort(function(k,w){return k[1]-w[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var x=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,x=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],x=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(x=!1,e.l=i[o][1]),x)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(m[v.n]=Mm(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:oi(l=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(i[o][0]===1){if(l=m.CodePage=Mm(e,kk),oi(l),u!==-1){var y=e.l;e.l=i[u][1],d=xI(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){u=o,e.l=i[o+1][1];continue}d=xI(e,l)}else{var b=d[i[o][0]],N;switch(e[e.l]){case 65:e.l+=4,N=T$(e);break;case 30:e.l+=4,N=D2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,N=D2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,N=e.read_shift(4,"i");break;case 19:e.l+=4,N=e.read_shift(4);break;case 5:e.l+=4,N=e.read_shift(8,"f");break;case 11:e.l+=4,N=yn(e,4);break;case 64:e.l+=4,N=ea(Sk(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=N}}return e.l=r+n,m}function vI(e,t,r){var n=e.content;if(!n)return{};ca(n,0);var s,i,o,l,u=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==vr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),u=n.read_shift(4));var p=yI(n,t),m={SystemIdentifier:d};for(var x in p)m[x]=p[x];if(m.FMTID=i,s===1)return m;if(u-n.l==2&&(n.l+=2),n.l!==u)throw new Error("Length mismatch 2: "+n.l+" !== "+u);var v;try{v=yI(n,null)}catch{}for(x in v)m[x]=v[x];return m.FMTID=[i,o],m}function Ro(e,t){return e.read_shift(t),null}function mce(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function yn(e,t){return e.read_shift(t)===1}function En(e){return e.read_shift(2,"u")}function C$(e,t){return mce(e,t,En)}function gce(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Mf(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function xce(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,u={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function tc(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Rf(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):tc(e,n,r)}function hc(e,t,r){if(r.biff>5)return Rf(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function yce(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function vce(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Ba,"");return n&&(e.l+=24),s}function bce(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Ba,"");return r+o}function wce(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return vce(e);case"0303000000000000c000000000000046":return bce(e);default:throw new Error("Unsupported Moniker "+r)}}function up(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Ba,""):"";return r}function jce(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,u,d="",f,p;s&16&&(i=up(e,r-e.l)),s&128&&(o=up(e,r-e.l)),(s&257)===257&&(l=up(e,r-e.l)),(s&257)===1&&(u=wce(e,r-e.l)),s&8&&(d=up(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(p=Sk(e)),e.l=r;var m=o||l||u||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var x={Target:m};return f&&(x.guid=f),p&&(x.time=p),i&&(x.Tooltip=i),x}function A$(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function O$(e,t){var r=A$(e);return r[3]=0,r}function Ri(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Nce(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function kce(e,t,r){return t===0?"":hc(e,t,r)}function Sce(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function P$(e){var t=e.read_shift(2),r=Nk(e);return[t,r]}function _ce(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=Mf(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function Mg(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function I$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Ece=I$;function D$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Tce(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Cce(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ya(e){e.l+=2,e.l+=e.read_shift(2)}var Ace={0:ya,4:ya,5:ya,6:ya,7:Cce,8:ya,9:ya,10:ya,11:ya,12:ya,13:Tce,14:ya,15:ya,16:ya,17:ya,18:ya,19:ya,20:ya,21:D$};function Oce(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Ace[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function dp(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function Pce(e,t){return t===0||e.read_shift(2),1200}function Ice(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=hc(e,0,r);return e.read_shift(t+n-e.l),s}function Dce(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Mce(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Mf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function Rce(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(xce(e));return i.Count=n,i.Unique=s,i}function Fce(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function $ce(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Lce(e){var t=Nce(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Bce(e){return e.read_shift(2),e.read_shift(4)}function bI(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Uce(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:u,TabRatio:d}}function Hce(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function qce(){}function zce(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Mf(e,0,r),n}function Wce(e){var t=Ri(e);return t.isst=e.read_shift(4),t}function Kce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ri(e);r.biff==2&&e.l++;var i=Rf(e,n-e.l,r);return s.val=i,s}function Vce(e,t,r){var n=e.read_shift(2),s=hc(e,0,r);return[n,s]}var Gce=hc;function wI(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),u=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c:u}}}function Yce(e){var t=e.read_shift(2),r=e.read_shift(2),n=P$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Xce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(P$(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function Jce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function Qce(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),u=e.read_shift(2);return s.patternType=Yle[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function Zce(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Qce(e,t,n.fStyle,r),n}function eue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function jI(e,t,r){var n=Ri(e);(r.biff==2||t==9)&&++e.l;var s=gce(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function tue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ri(e),s=Na(e);return n.val=s,n}var NI=kce;function rue(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=tc(e,i),l=[];n>e.l;)l.push(Rf(e));return[i,s,o,l]}function kI(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=_ce(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var nue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function SI(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),u=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),u=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=tc(e,o,r);s&32&&(d=nue[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var p=n==e.l||l===0||!(f>0)?[]:$fe(e,f,r,l);return{chKey:i,Name:d,itab:u,rgce:p}}function M$(e,t,r){if(r.biff<8)return aue(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Sce(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function aue(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Mf(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function sue(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=tc(e,n,r),o=tc(e,s,r);return[i,o]}function iue(e,t,r){var n=I$(e);e.l++;var s=e.read_shift(1);return t-=8,[Lfe(e,t,r),s,n]}function _I(e,t,r){var n=Ece(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Rfe(e,t,r)]}function oue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function lue(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=hc(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function cue(e,t,r){return lue(e,t,r)}function uue(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(Mg(e));return r}function due(e,t,r){if(r&&r.biff<8)return fue(e,t,r);var n=D$(e),s=Oce(e,t-22,n[1]);return{cmo:n,ft:s}}var hue={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function fue(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((hue[n]||Ea)(e,t,r)),{cmo:[s,n,i],ft:o}}function pue(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=yce(e,6,r);var l=e.read_shift(2);e.read_shift(2),En(e,2);var u=e.read_shift(2);e.l+=u;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],p=tc(e,e.lens[d+1]-e.lens[d]-1);if(s+=p,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function mue(e,t){var r=Mg(e);e.l+=16;var n=jce(e,t-24);return[r,n]}function gue(e,t){e.read_shift(2);var r=Mg(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Ba,""),[r,n]}function xue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=mI[r]||r,r=e.read_shift(2),t[1]=mI[r]||r,t}function yue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(O$(e));return r}function vue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(O$(e));return r}function bue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function R$(e,t,r){if(!r.cellStyles)return Ea(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),u=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:u};return(r.biff>=5||!r.biff)&&(d.level=u>>8&7),d}function wue(e,t){var r={};return t<32||(e.l+=16,r.header=Na(e),r.footer=Na(e),e.l+=2),r}function jue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}var Nue=Ri,kue=C$,Sue=Rf;function _ue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Eue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ri(e);++e.l;var s=hc(e,t-7,r);return n.t="str",n.val=s,n}function Tue(e){var t=Ri(e);++e.l;var r=Na(e);return t.t="n",t.val=r,t}function Cue(e){var t=Ri(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Aue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Oue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Pue(e,t,r){var n=e.l+t,s=Ri(e),i=e.read_shift(2),o=tc(e,i,r);return e.l=n,s.t="str",s.val=o,s}var Iue=[2,3,48,49,131,139,140,245],EI=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=pk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,u){var d=[],f=el(1);switch(u.type){case"base64":f=ii(xs(l));break;case"binary":f=ii(l);break;case"buffer":case"array":f=l;break}ca(f,0);var p=f.read_shift(1),m=!!(p&136),x=!1,v=!1;switch(p){case 2:break;case 3:break;case 48:x=!0,m=!0;break;case 49:x=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var y=0,b=521;p==2&&(y=f.read_shift(2)),f.l+=3,p!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),p!=2&&(b=f.read_shift(2));var N=f.read_shift(2),k=u.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(k=e[f[f.l]]),f.l+=1,f.l+=2),v&&(f.l+=36);for(var w=[],P={},S=Math.min(f.length,p==2?521:b-10-(x?264:0)),_=v?32:11;f.l<S&&f[f.l]!=13;)switch(P={},P.name=pf.utils.decode(k,f.slice(f.l,f.l+_)).replace(/[\u0000\r\n].*$/g,""),f.l+=_,P.type=String.fromCharCode(f.read_shift(1)),p!=2&&!v&&(P.offset=f.read_shift(4)),P.len=f.read_shift(1),p==2&&(P.offset=f.read_shift(2)),P.dec=f.read_shift(1),P.name.length&&w.push(P),p!=2&&(f.l+=v?13:14),P.type){case"B":(!x||P.len!=8)&&u.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(f[f.l]!==13&&(f.l=b-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=b;var E=0,C=0;for(d[0]=[],C=0;C!=w.length;++C)d[0][C]=w[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=N;continue}for(++f.l,d[++E]=[],C=0,C=0;C!=w.length;++C){var M=f.slice(f.l,f.l+w[C].len);f.l+=w[C].len,ca(M,0);var D=pf.utils.decode(k,M);switch(w[C].type){case"C":D.trim().length&&(d[E][C]=D.replace(/\s+$/,""));break;case"D":D.length===8?d[E][C]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):d[E][C]=D;break;case"F":d[E][C]=parseFloat(D.trim());break;case"+":case"I":d[E][C]=v?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":d[E][C]=!0;break;case"N":case"F":d[E][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[E][C]="##MEMO##"+(v?parseInt(D.trim(),10):M.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(d[E][C]=+D||0);break;case"@":d[E][C]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":d[E][C]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":d[E][C]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][C]=-M.read_shift(-8,"f");break;case"B":if(x&&w[C].len==8){d[E][C]=M.read_shift(8,"f");break}case"G":case"P":M.l+=w[C].len;break;case"0":if(w[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[C].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return u&&u.sheetRows&&(d=d.slice(0,u.sheetRows)),u.DBF=w,d}function n(l,u){var d=u||{};d.dateNF||(d.dateNF="yyyymmdd");var f=rd(r(l,d),d);return f["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,f}function s(l,u){try{return ol(n(l,u),u)}catch(d){if(u&&u.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var d=u||{};if(+d.codepage>=0&&oi(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=O2(),p=U2(l,{header:1,raw:!0,cellDates:!0}),m=p[0],x=p.slice(1),v=l["!cols"]||[],y=0,b=0,N=0,k=1;for(y=0;y<m.length;++y){if(((v[y]||{}).DBF||{}).name){m[y]=v[y].DBF.name,++N;continue}if(m[y]!=null){if(++N,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(b=0;b<1024;++b)if(m.indexOf(m[y]+"_"+b)==-1){m[y]+="_"+b;break}}}}var w=mn(l["!ref"]),P=[],S=[],_=[];for(y=0;y<=w.e.c-w.s.c;++y){var E="",C="",M=0,D=[];for(b=0;b<x.length;++b)x[b][y]!=null&&D.push(x[b][y]);if(D.length==0||m[y]==null){P[y]="?";continue}for(b=0;b<D.length;++b){switch(typeof D[b]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=D[b]instanceof Date?"D":"C";break;default:C="C"}M=Math.max(M,String(D[b]).length),E=E&&E!=C?"C":C}M>250&&(M=250),C=((v[y]||{}).DBF||{}).type,C=="C"&&v[y].DBF.len>M&&(M=v[y].DBF.len),E=="B"&&C=="N"&&(E="N",_[y]=v[y].DBF.dec,M=v[y].DBF.len),S[y]=E=="C"||C=="N"?M:i[E]||0,k+=S[y],P[y]=E}var A=f.next(32);for(A.write_shift(4,318902576),A.write_shift(4,x.length),A.write_shift(2,296+32*N),A.write_shift(2,k),y=0;y<4;++y)A.write_shift(4,0);for(A.write_shift(4,0|(+t[MF]||3)<<8),y=0,b=0;y<m.length;++y)if(m[y]!=null){var O=f.next(32),F=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,F,"sbcs"),O.write_shift(1,P[y]=="?"?"C":P[y],"sbcs"),O.write_shift(4,b),O.write_shift(1,S[y]||i[P[y]]||0),O.write_shift(1,_[y]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=S[y]||i[P[y]]||0}var W=f.next(264);for(W.write_shift(4,13),y=0;y<65;++y)W.write_shift(4,0);for(y=0;y<x.length;++y){var Y=f.next(k);for(Y.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(P[b]){case"L":Y.write_shift(1,x[y][b]==null?63:x[y][b]?84:70);break;case"B":Y.write_shift(8,x[y][b]||0,"f");break;case"N":var Z="0";for(typeof x[y][b]=="number"&&(Z=x[y][b].toFixed(_[b]||0)),N=0;N<S[b]-Z.length;++N)Y.write_shift(1,32);Y.write_shift(1,Z,"sbcs");break;case"D":x[y][b]?(Y.write_shift(4,("0000"+x[y][b].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(x[y][b].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+x[y][b].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var re=String(x[y][b]!=null?x[y][b]:"").slice(0,S[b]);for(Y.write_shift(1,re,"sbcs"),N=0;N<S[b]-re.length;++N)Y.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),Due=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Oi(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,x){var v=e[x];return typeof v=="number"?qP(v):v},n=function(m,x,v){var y=x.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?m:qP(y)};e["|"]=254;function s(m,x){switch(x.type){case"base64":return i(xs(m),x);case"binary":return i(m,x);case"buffer":return i(xr&&Buffer.isBuffer(m)?m.toString("binary"):lc(m),x);case"array":return i(ec(m),x)}throw new Error("Unrecognized type "+x.type)}function i(m,x){var v=m.split(/[\n\r]+/),y=-1,b=-1,N=0,k=0,w=[],P=[],S=null,_={},E=[],C=[],M=[],D=0,A;for(+x.codepage>=0&&oi(+x.codepage);N!==v.length;++N){D=0;var O=v[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),F=O.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),W=F[0],Y;if(O.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&P.push(O.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,re=!1,ne=!1,U=!1,oe=-1,K=-1;for(k=1;k<F.length;++k)switch(F[k].charAt(0)){case"A":break;case"X":b=parseInt(F[k].slice(1))-1,re=!0;break;case"Y":for(y=parseInt(F[k].slice(1))-1,re||(b=0),A=w.length;A<=y;++A)w[A]=[];break;case"K":Y=F[k].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(di(Y))?isNaN($u(Y).getDate())||(Y=ea(Y)):(Y=di(Y),S!==null&&ed(S)&&(Y=Dg(Y))),Z=!0;break;case"E":U=!0;var R=uu(F[k].slice(1),{r:y,c:b});w[y][b]=[w[y][b],R];break;case"S":ne=!0,w[y][b]=[w[y][b],"S5S"];break;case"G":break;case"R":oe=parseInt(F[k].slice(1))-1;break;case"C":K=parseInt(F[k].slice(1))-1;break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}if(Z&&(w[y][b]&&w[y][b].length==2?w[y][b][0]=Y:w[y][b]=Y,S=null),ne){if(U)throw new Error("SYLK shared formula cannot have own formula");var Q=oe>-1&&w[oe][K];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");w[y][b][1]=K$(Q[1],{r:y-oe,c:b-K})}break;case"F":var ee=0;for(k=1;k<F.length;++k)switch(F[k].charAt(0)){case"X":b=parseInt(F[k].slice(1))-1,++ee;break;case"Y":for(y=parseInt(F[k].slice(1))-1,A=w.length;A<=y;++A)w[A]=[];break;case"M":D=parseInt(F[k].slice(1))/20;break;case"F":break;case"G":break;case"P":S=P[parseInt(F[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=F[k].slice(1).split(" "),A=parseInt(M[0],10);A<=parseInt(M[1],10);++A)D=parseInt(M[2],10),C[A-1]=D===0?{hidden:!0}:{wch:D},Lu(C[A-1]);break;case"C":b=parseInt(F[k].slice(1))-1,C[b]||(C[b]={});break;case"R":y=parseInt(F[k].slice(1))-1,E[y]||(E[y]={}),D>0?(E[y].hpt=D,E[y].hpx=bf(D)):D===0&&(E[y].hidden=!0);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}ee<1&&(S=null);break;default:if(x&&x.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(_["!rows"]=E),C.length>0&&(_["!cols"]=C),x&&x.sheetRows&&(w=w.slice(0,x.sheetRows)),[w,_]}function o(m,x){var v=s(m,x),y=v[0],b=v[1],N=rd(y,x);return Oi(b).forEach(function(k){N[k]=b[k]}),N}function l(m,x){return ol(o(m,x),x)}function u(m,x,v,y){var b="C;Y"+(v+1)+";X"+(y+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+bhe(m.f,{r:v,c:y}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(m,x){x.forEach(function(v,y){var b="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Fm(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=$m(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function f(m,x){x.forEach(function(v,y){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*q$(v.hpx)+";"),b.length>2&&m.push(b+"R"+(y+1))})}function p(m,x){var v=["ID;PWXL;N;E"],y=[],b=mn(m["!ref"]),N,k=Array.isArray(m),w=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&d(v,m["!cols"]),m["!rows"]&&f(v,m["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var P=b.s.r;P<=b.e.r;++P)for(var S=b.s.c;S<=b.e.c;++S){var _=ir({r:P,c:S});N=k?(m[P]||[])[S]:m[_],!(!N||N.v==null&&(!N.f||N.F))&&y.push(u(N,m,P,S))}return v.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:p}})(),Mue=(function(){function e(i,o){switch(o.type){case"base64":return t(xs(i),o);case"binary":return t(i,o);case"buffer":return t(xr&&Buffer.isBuffer(i)?i.toString("binary"):lc(i),o);case"array":return t(ec(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),u=-1,d=-1,f=0,p=[];f!==l.length;++f){if(l[f].trim()==="BOT"){p[++u]=[],d=0;continue}if(!(u<0)){var m=l[f].trim().split(","),x=m[0],v=m[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+x){case-1:if(y==="BOT"){p[++u]=[],d=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?p[u][d]=!0:y==="FALSE"?p[u][d]=!1:isNaN(di(v))?isNaN($u(v).getDate())?p[u][d]=v:p[u][d]=ea(v):p[u][d]=di(v),++d;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),p[u][d++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(p=p.slice(0,o.sheetRows)),p}function r(i,o){return rd(e(i,o),o)}function n(i,o){return ol(r(i,o),o)}var s=(function(){var i=function(u,d,f,p,m){u.push(d),u.push(f+","+p),u.push('"'+m.replace(/"/g,'""')+'"')},o=function(u,d,f,p){u.push(d+","+f),u.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(u){var d=[],f=mn(u["!ref"]),p,m=Array.isArray(u);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,f.e.r-f.s.r+1,""),i(d,"TUPLES",0,f.e.c-f.s.c+1,""),i(d,"DATA",0,0,"");for(var x=f.s.r;x<=f.e.r;++x){o(d,-1,0,"BOT");for(var v=f.s.c;v<=f.e.c;++v){var y=ir({r:x,c:v});if(p=m?(u[x]||[])[v]:u[y],!p){o(d,1,0,"");continue}switch(p.t){case"n":var b=p.w;!b&&p.v!=null&&(b=p.v),b==null?p.f&&!p.F?o(d,1,0,"="+p.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Ms(p.z||cr[14],Ua(ea(p.v)))),o(d,0,p.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var N=`\r
`,k=d.join(N);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),Rue=(function(){function e(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,m){for(var x=p.split(`
`),v=-1,y=-1,b=0,N=[];b!==x.length;++b){var k=x[b].trim().split(":");if(k[0]==="cell"){var w=La(k[1]);if(N.length<=w.r)for(v=N.length;v<=w.r;++v)N[v]||(N[v]=[]);switch(v=w.r,y=w.c,k[2]){case"t":N[v][y]=e(k[3]);break;case"v":N[v][y]=+k[3];break;case"vtf":var P=k[k.length-1];case"vtc":switch(k[3]){case"nl":N[v][y]=!!+k[4];break;default:N[v][y]=+k[4];break}k[2]=="vtf"&&(N[v][y]=[N[v][y],P])}}}return m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),N}function n(p,m){return rd(r(p,m),m)}function s(p,m){return ol(n(p,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var m=[],x=[],v,y="",b=td(p["!ref"]),N=Array.isArray(p),k=b.s.r;k<=b.e.r;++k)for(var w=b.s.c;w<=b.e.c;++w)if(y=ir({r:k,c:w}),v=N?(p[k]||[])[w]:p[y],!(!v||v.v==null||v.t==="z")){switch(x=["cell",y,"t"],v.t){case"s":case"str":x.push(t(v.v));break;case"n":v.f?(x[2]="vtf",x[3]="n",x[4]=v.v,x[5]=t(v.f)):(x[2]="v",x[3]=v.v);break;case"b":x[2]="vt"+(v.f?"f":"c"),x[3]="nl",x[4]=v.v?"1":"0",x[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var P=Ua(ea(v.v));x[2]="vtc",x[3]="nd",x[4]=""+P,x[5]=v.w||Ms(v.z||cr[14],P);break;case"e":continue}m.push(x.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(p){return[i,o,l,o,d(p),u].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),yf=(function(){function e(f,p,m,x,v){v.raw?p[m][x]=f:f===""||(f==="TRUE"?p[m][x]=!0:f==="FALSE"?p[m][x]=!1:isNaN(di(f))?isNaN($u(f).getDate())?p[m][x]=f:p[m][x]=ea(f):p[m][x]=di(f))}function t(f,p){var m=p||{},x=[];if(!f||f.length===0)return x;for(var v=f.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var b=10,N=0,k=0;k<=y;++k)N=v[k].indexOf(" "),N==-1?N=v[k].length:N++,b=Math.max(b,N);for(k=0;k<=y;++k){x[k]=[];var w=0;for(e(v[k].slice(0,b).trim(),x,k,w,m),w=1;w<=(v[k].length-b)/10+1;++w)e(v[k].slice(b+(w-1)*10,b+w*10).trim(),x,k,w,m)}return m.sheetRows&&(x=x.slice(0,m.sheetRows)),x}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var p={},m=!1,x=0,v=0;x<f.length;++x)(v=f.charCodeAt(x))==34?m=!m:!m&&v in r&&(p[v]=(p[v]||0)+1);v=[];for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.push([p[x],x]);if(!v.length){p=n;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.push([p[x],x])}return v.sort(function(y,b){return y[0]-b[0]||n[y[1]]-n[b[1]]}),r[v.pop()[1]]||44}function i(f,p){var m=p||{},x="",v=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(x=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(x=f.charAt(4),f=f.slice(6)):x=s(f.slice(0,1024)):m&&m.FS?x=m.FS:x=s(f.slice(0,1024));var b=0,N=0,k=0,w=0,P=0,S=x.charCodeAt(0),_=!1,E=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var M=m.dateNF!=null?Voe(m.dateNF):null;function D(){var A=f.slice(w,P),O={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)O.t="z";else if(m.raw)O.t="s",O.v=A;else if(A.trim().length===0)O.t="s",O.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(O.t="s",O.v=A.slice(2,-1).replace(/""/g,'"')):jhe(A)?(O.t="n",O.f=A.slice(1)):(O.t="s",O.v=A);else if(A=="TRUE")O.t="b",O.v=!0;else if(A=="FALSE")O.t="b",O.v=!1;else if(!isNaN(k=di(A)))O.t="n",m.cellText!==!1&&(O.w=A),O.v=k;else if(!isNaN($u(A).getDate())||M&&A.match(M)){O.z=m.dateNF||cr[14];var F=0;M&&A.match(M)&&(A=Goe(A,m.dateNF,A.match(M)||[]),F=1),m.cellDates?(O.t="d",O.v=ea(A,F)):(O.t="n",O.v=Ua(ea(A,F))),m.cellText!==!1&&(O.w=Ms(O.z,O.v instanceof Date?Ua(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=A;if(O.t=="z"||(m.dense?(v[b]||(v[b]=[]),v[b][N]=O):v[ir({c:N,r:b})]=O),w=P+1,C=f.charCodeAt(w),y.e.c<N&&(y.e.c=N),y.e.r<b&&(y.e.r=b),E==S)++N;else if(N=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;P<f.length;++P)switch(E=f.charCodeAt(P)){case 34:C===34&&(_=!_);break;case S:case 10:case 13:if(!_&&D())break e;break}return P-w>0&&D(),v["!ref"]=br(y),v}function o(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):rd(t(f,p),p)}function l(f,p){var m="",x=p.type=="string"?[0,0,0,0]:Ik(f,p);switch(p.type){case"base64":m=xs(f);break;case"binary":m=f;break;case"buffer":p.codepage==65001?m=f.toString("utf8"):p.codepage&&typeof pf<"u"||(m=xr&&Buffer.isBuffer(f)?f.toString("binary"):lc(f));break;case"array":m=ec(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+p.type)}return x[0]==239&&x[1]==187&&x[2]==191?m=Yr(m.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?m=Yr(m):p.type=="binary"&&typeof pf<"u",m.slice(0,19)=="socialcalc:version:"?Rue.to_sheet(p.type=="string"?m:Yr(m),p):o(m,p)}function u(f,p){return ol(l(f,p),p)}function d(f){for(var p=[],m=mn(f["!ref"]),x,v=Array.isArray(f),y=m.s.r;y<=m.e.r;++y){for(var b=[],N=m.s.c;N<=m.e.c;++N){var k=ir({r:y,c:N});if(x=v?(f[y]||[])[N]:f[k],!x||x.v==null){b.push("          ");continue}for(var w=(x.w||(po(x),x.w)||"").slice(0,10);w.length<10;)w+=" ";b.push(w+(N===0?" ":""))}p.push(b.join(""))}return p.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:d}})();function Fue(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=Due.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return yf.to_workbook(e,t)}}var xh=(function(){function e(R,Q,ee){if(R){ca(R,R.l||0);for(var se=ee.Enum||oe;R.l<R.length;){var xe=R.read_shift(2),ge=se[xe]||se[65535],Me=R.read_shift(2),ce=R.l+Me,me=ge.f&&ge.f(R,Me,ee);if(R.l=ce,Q(me,ge,xe))return}}}function t(R,Q){switch(Q.type){case"base64":return r(ii(xs(R)),Q);case"binary":return r(ii(R),Q);case"buffer":case"array":return r(R,Q)}throw"Unsupported type "+Q.type}function r(R,Q){if(!R)return R;var ee=Q||{},se=ee.dense?[]:{},xe="Sheet1",ge="",Me=0,ce={},me=[],Oe=[],q={s:{r:0,c:0},e:{r:0,c:0}},Ne=ee.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)ee.Enum=oe,e(R,function(Se,Fe,ze){switch(ze){case 0:ee.vers=Se,Se>=4096&&(ee.qpro=!0);break;case 6:q=Se;break;case 204:Se&&(ge=Se);break;case 222:ge=Se;break;case 15:case 51:ee.qpro||(Se[1].v=Se[1].v.slice(1));case 13:case 14:case 16:ze==14&&(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=ee.dateNF||cr[14],ee.cellDates&&(Se[1].t="d",Se[1].v=Dg(Se[1].v))),ee.qpro&&Se[3]>Me&&(se["!ref"]=br(q),ce[xe]=se,me.push(xe),se=ee.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},Me=Se[3],xe=ge||"Sheet"+(Me+1),ge="");var Ee=ee.dense?(se[Se[0].r]||[])[Se[0].c]:se[ir(Se[0])];if(Ee){Ee.t=Se[1].t,Ee.v=Se[1].v,Se[1].z!=null&&(Ee.z=Se[1].z),Se[1].f!=null&&(Ee.f=Se[1].f);break}ee.dense?(se[Se[0].r]||(se[Se[0].r]=[]),se[Se[0].r][Se[0].c]=Se[1]):se[ir(Se[0])]=Se[1];break}},ee);else if(R[2]==26||R[2]==14)ee.Enum=K,R[2]==14&&(ee.qpro=!0,R.l=0),e(R,function(Se,Fe,ze){switch(ze){case 204:xe=Se;break;case 22:Se[1].v=Se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>Me&&(se["!ref"]=br(q),ce[xe]=se,me.push(xe),se=ee.dense?[]:{},q={s:{r:0,c:0},e:{r:0,c:0}},Me=Se[3],xe="Sheet"+(Me+1)),Ne>0&&Se[0].r>=Ne)break;ee.dense?(se[Se[0].r]||(se[Se[0].r]=[]),se[Se[0].r][Se[0].c]=Se[1]):se[ir(Se[0])]=Se[1],q.e.c<Se[0].c&&(q.e.c=Se[0].c),q.e.r<Se[0].r&&(q.e.r=Se[0].r);break;case 27:Se[14e3]&&(Oe[Se[14e3][0]]=Se[14e3][1]);break;case 1537:Oe[Se[0]]=Se[1],Se[0]==Me&&(xe=Se[1]);break}},ee);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(se["!ref"]=br(q),ce[ge||xe]=se,me.push(ge||xe),!Oe.length)return{SheetNames:me,Sheets:ce};for(var ae={},De=[],Be=0;Be<Oe.length;++Be)ce[me[Be]]?(De.push(Oe[Be]||me[Be]),ae[Oe[Be]]=ce[Oe[Be]]||ce[me[Be]]):(De.push(Oe[Be]),ae[Oe[Be]]={"!ref":"A1"});return{SheetNames:De,Sheets:ae}}function n(R,Q){var ee=Q||{};if(+ee.codepage>=0&&oi(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK1 to JS string");var se=O2(),xe=mn(R["!ref"]),ge=Array.isArray(R),Me=[];Js(se,0,i(1030)),Js(se,6,u(xe));for(var ce=Math.min(xe.e.r,8191),me=xe.s.r;me<=ce;++me)for(var Oe=fa(me),q=xe.s.c;q<=xe.e.c;++q){me===xe.s.r&&(Me[q]=qn(q));var Ne=Me[q]+Oe,ae=ge?(R[me]||[])[q]:R[Ne];if(!(!ae||ae.t=="z"))if(ae.t=="n")(ae.v|0)==ae.v&&ae.v>=-32768&&ae.v<=32767?Js(se,13,x(me,q,ae.v)):Js(se,14,y(me,q,ae.v));else{var De=po(ae);Js(se,15,p(me,q,De.slice(0,239)))}}return Js(se,1),se.end()}function s(R,Q){var ee=Q||{};if(+ee.codepage>=0&&oi(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK3 to JS string");var se=O2();Js(se,0,o(R));for(var xe=0,ge=0;xe<R.SheetNames.length;++xe)(R.Sheets[R.SheetNames[xe]]||{})["!ref"]&&Js(se,27,U(R.SheetNames[xe],ge++));var Me=0;for(xe=0;xe<R.SheetNames.length;++xe){var ce=R.Sheets[R.SheetNames[xe]];if(!(!ce||!ce["!ref"])){for(var me=mn(ce["!ref"]),Oe=Array.isArray(ce),q=[],Ne=Math.min(me.e.r,8191),ae=me.s.r;ae<=Ne;++ae)for(var De=fa(ae),Be=me.s.c;Be<=me.e.c;++Be){ae===me.s.r&&(q[Be]=qn(Be));var Se=q[Be]+De,Fe=Oe?(ce[ae]||[])[Be]:ce[Se];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")Js(se,23,D(ae,Be,Me,Fe.v));else{var ze=po(Fe);Js(se,22,E(ae,Be,Me,ze.slice(0,239)))}}++Me}}return Js(se,1),se.end()}function i(R){var Q=Un(2);return Q.write_shift(2,R),Q}function o(R){var Q=Un(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var ee=0,se=0,xe=0,ge=0;ge<R.SheetNames.length;++ge){var Me=R.SheetNames[ge],ce=R.Sheets[Me];if(!(!ce||!ce["!ref"])){++xe;var me=td(ce["!ref"]);ee<me.e.r&&(ee=me.e.r),se<me.e.c&&(se=me.e.c)}}return ee>8191&&(ee=8191),Q.write_shift(2,ee),Q.write_shift(1,xe),Q.write_shift(1,se),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function l(R,Q,ee){var se={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&ee.qpro?(se.s.c=R.read_shift(1),R.l++,se.s.r=R.read_shift(2),se.e.c=R.read_shift(1),R.l++,se.e.r=R.read_shift(2),se):(se.s.c=R.read_shift(2),se.s.r=R.read_shift(2),Q==12&&ee.qpro&&(R.l+=2),se.e.c=R.read_shift(2),se.e.r=R.read_shift(2),Q==12&&ee.qpro&&(R.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function u(R){var Q=Un(8);return Q.write_shift(2,R.s.c),Q.write_shift(2,R.s.r),Q.write_shift(2,R.e.c),Q.write_shift(2,R.e.r),Q}function d(R,Q,ee){var se=[{c:0,r:0},{t:"n",v:0},0,0];return ee.qpro&&ee.vers!=20768?(se[0].c=R.read_shift(1),se[3]=R.read_shift(1),se[0].r=R.read_shift(2),R.l+=2):(se[2]=R.read_shift(1),se[0].c=R.read_shift(2),se[0].r=R.read_shift(2)),se}function f(R,Q,ee){var se=R.l+Q,xe=d(R,Q,ee);if(xe[1].t="s",ee.vers==20768){R.l++;var ge=R.read_shift(1);return xe[1].v=R.read_shift(ge,"utf8"),xe}return ee.qpro&&R.l++,xe[1].v=R.read_shift(se-R.l,"cstr"),xe}function p(R,Q,ee){var se=Un(7+ee.length);se.write_shift(1,255),se.write_shift(2,Q),se.write_shift(2,R),se.write_shift(1,39);for(var xe=0;xe<se.length;++xe){var ge=ee.charCodeAt(xe);se.write_shift(1,ge>=128?95:ge)}return se.write_shift(1,0),se}function m(R,Q,ee){var se=d(R,Q,ee);return se[1].v=R.read_shift(2,"i"),se}function x(R,Q,ee){var se=Un(7);return se.write_shift(1,255),se.write_shift(2,Q),se.write_shift(2,R),se.write_shift(2,ee,"i"),se}function v(R,Q,ee){var se=d(R,Q,ee);return se[1].v=R.read_shift(8,"f"),se}function y(R,Q,ee){var se=Un(13);return se.write_shift(1,255),se.write_shift(2,Q),se.write_shift(2,R),se.write_shift(8,ee,"f"),se}function b(R,Q,ee){var se=R.l+Q,xe=d(R,Q,ee);if(xe[1].v=R.read_shift(8,"f"),ee.qpro)R.l=se;else{var ge=R.read_shift(2);P(R.slice(R.l,R.l+ge),xe),R.l+=ge}return xe}function N(R,Q,ee){var se=Q&32768;return Q&=-32769,Q=(se?R:0)+(Q>=8192?Q-16384:Q),(se?"":"$")+(ee?qn(Q):fa(Q))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(R,Q){ca(R,0);for(var ee=[],se=0,xe="",ge="",Me="",ce="";R.l<R.length;){var me=R[R.l++];switch(me){case 0:ee.push(R.read_shift(8,"f"));break;case 1:ge=N(Q[0].c,R.read_shift(2),!0),xe=N(Q[0].r,R.read_shift(2),!1),ee.push(ge+xe);break;case 2:{var Oe=N(Q[0].c,R.read_shift(2),!0),q=N(Q[0].r,R.read_shift(2),!1);ge=N(Q[0].c,R.read_shift(2),!0),xe=N(Q[0].r,R.read_shift(2),!1),ee.push(Oe+q+":"+ge+xe)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:ee.push("("+ee.pop()+")");break;case 5:ee.push(R.read_shift(2));break;case 6:{for(var Ne="";me=R[R.l++];)Ne+=String.fromCharCode(me);ee.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:ee.push("-"+ee.pop());break;case 23:ee.push("+"+ee.pop());break;case 22:ee.push("NOT("+ee.pop()+")");break;case 20:case 21:ce=ee.pop(),Me=ee.pop(),ee.push(["AND","OR"][me-20]+"("+Me+","+ce+")");break;default:if(me<32&&w[me])ce=ee.pop(),Me=ee.pop(),ee.push(Me+w[me]+ce);else if(k[me]){if(se=k[me][1],se==69&&(se=R[R.l++]),se>ee.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+ee.join("|")+"|");return}var ae=ee.slice(-se);ee.length-=se,ee.push(k[me][0]+"("+ae.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}ee.length==1?Q[1].f=""+ee[0]:console.error("WK1 bad formula parse |"+ee.join("|")+"|")}function S(R){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=R.read_shift(2),Q[3]=R[R.l++],Q[0].c=R[R.l++],Q}function _(R,Q){var ee=S(R);return ee[1].t="s",ee[1].v=R.read_shift(Q-4,"cstr"),ee}function E(R,Q,ee,se){var xe=Un(6+se.length);xe.write_shift(2,R),xe.write_shift(1,ee),xe.write_shift(1,Q),xe.write_shift(1,39);for(var ge=0;ge<se.length;++ge){var Me=se.charCodeAt(ge);xe.write_shift(1,Me>=128?95:Me)}return xe.write_shift(1,0),xe}function C(R,Q){var ee=S(R);ee[1].v=R.read_shift(2);var se=ee[1].v>>1;if(ee[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return ee[1].v=se,ee}function M(R,Q){var ee=S(R),se=R.read_shift(4),xe=R.read_shift(4),ge=R.read_shift(2);if(ge==65535)return se===0&&xe===3221225472?(ee[1].t="e",ee[1].v=15):se===0&&xe===3489660928?(ee[1].t="e",ee[1].v=42):ee[1].v=0,ee;var Me=ge&32768;return ge=(ge&32767)-16446,ee[1].v=(1-Me*2)*(xe*Math.pow(2,ge+32)+se*Math.pow(2,ge)),ee}function D(R,Q,ee,se){var xe=Un(14);if(xe.write_shift(2,R),xe.write_shift(1,ee),xe.write_shift(1,Q),se==0)return xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(2,65535),xe;var ge=0,Me=0,ce=0,me=0;return se<0&&(ge=1,se=-se),Me=Math.log2(se)|0,se/=Math.pow(2,Me-31),me=se>>>0,(me&2147483648)==0&&(se/=2,++Me,me=se>>>0),se-=me,me|=2147483648,me>>>=0,se*=Math.pow(2,32),ce=se>>>0,xe.write_shift(4,ce),xe.write_shift(4,me),Me+=16383+(ge?32768:0),xe.write_shift(2,Me),xe}function A(R,Q){var ee=M(R);return R.l+=Q-14,ee}function O(R,Q){var ee=S(R),se=R.read_shift(4);return ee[1].v=se>>6,ee}function F(R,Q){var ee=S(R),se=R.read_shift(8,"f");return ee[1].v=se,ee}function W(R,Q){var ee=F(R);return R.l+=Q-10,ee}function Y(R,Q){return R[R.l+Q-1]==0?R.read_shift(Q,"cstr"):""}function Z(R,Q){var ee=R[R.l++];ee>Q-1&&(ee=Q-1);for(var se="";se.length<ee;)se+=String.fromCharCode(R[R.l++]);return se}function re(R,Q,ee){if(!(!ee.qpro||Q<21)){var se=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var xe=R.read_shift(Q-21,"cstr");return[se,xe]}}function ne(R,Q){for(var ee={},se=R.l+Q;R.l<se;){var xe=R.read_shift(2);if(xe==14e3){for(ee[xe]=[0,""],ee[xe][0]=R.read_shift(2);R[R.l];)ee[xe][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return ee}function U(R,Q){var ee=Un(5+R.length);ee.write_shift(2,14e3),ee.write_shift(2,Q);for(var se=0;se<R.length;++se){var xe=R.charCodeAt(se);ee[ee.l++]=xe>127?95:xe}return ee[ee.l++]=0,ee}var oe={0:{n:"BOF",f:En},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:_},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ne},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function $ue(e){var t={},r=e.match(Ta),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Zt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=ck[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Lue=(function(){var e=gf("t"),t=gf("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:kr(o[1])},u=i.match(t);return u&&(l.s=$ue(u[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),Bue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(i.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),Uue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Hue=/<(?:\w+:)?r>/,que=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function _k(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=kr(Yr(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Yr(e),r&&(n.h=gk(n.t))):e.match(Hue)&&(n.r=Yr(e),n.t=kr(Yr((e.replace(que,"").match(Uue)||[]).join("").replace(Ta,""))),r&&(n.h=Bue(Lue(n.r)))),n):{t:""}}var zue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Wue=/<(?:\w+:)?(?:si|sstItem)>/g,Kue=/<\/(?:\w+:)?(?:si|sstItem)>/;function Vue(e,t){var r=[],n="";if(!e)return r;var s=e.match(zue);if(s){n=s[2].replace(Wue,"").split(Kue);for(var i=0;i!=n.length;++i){var o=_k(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=Zt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function Gue(e){return[e.read_shift(4),e.read_shift(4)]}function Yue(e,t){var r=[],n=!1;return vo(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function F$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function lo(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Xue(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=lo(e,4),t.U=lo(e,4),t.W=lo(e,4),t}function Jue(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Que(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Jue(e));return t}function Zue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ede(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=lo(e,4),t.U=lo(e,4),t.W=lo(e,4),t}function tde(e){var t=ede(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function $$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function L$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function rde(e){var t=lo(e);switch(t.Minor){case 2:return[t.Minor,nde(e)];case 3:return[t.Minor,ade()];case 4:return[t.Minor,sde(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function nde(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=$$(e,r),s=L$(e,e.length-e.l);return{t:"Std",h:n,v:s}}function ade(){throw new Error("File is password-protected: ECMA-376 Extensible")}function sde(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Ta,function(i){var o=Zt(i);switch(Mi(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function ide(e,t){var r={},n=r.EncryptionVersionInfo=lo(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=$$(e,s),t-=s,r.EncryptionVerifier=L$(e,t),r}function ode(e){var t={},r=t.EncryptionVersionInfo=lo(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function lde(e){var t=0,r,n=F$(e),s=n.length+1,i,o,l,u,d;for(r=el(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,u=t<<1&32767,d=l|u,t=d^o;return t^52811}var B$=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],u=104,d=o.length-1;d>=0;--d)for(var f=o[d],p=0;p!=7;++p)f&64&&(l^=r[u]),f*=2,--u;return l};return function(o){for(var l=F$(o),u=i(l),d=l.length,f=el(16),p=0;p!=16;++p)f[p]=0;var m,x,v;for((d&1)===1&&(m=u>>8,f[d]=s(e[0],m),--d,m=u&255,x=l[l.length-1],f[d]=s(x,m));d>0;)--d,m=u>>8,f[d]=s(l[d],m),--d,m=u&255,f[d]=s(l[d],m);for(d=15,v=15-l.length;v>0;)m=u>>8,f[d]=s(e[v],m),--d,--v,m=u&255,f[d]=s(l[d],m),--d,--v;return f}})(),cde=function(e,t,r,n,s){s||(s=t),n||(n=B$(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},ude=function(e){var t=0,r=B$(e);return function(n){var s=cde("",n,t,r);return t=s[1],s[0]}};function dde(e,t,r,n){var s={key:En(e),verificationBytes:En(e)};return r.password&&(s.verifier=lde(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=ude(r.password)),s}function hde(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=ode(e):n.Data=ide(e,t),n}function fde(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?hde(e,t-2,n):dde(e,r.biff>=8?t:t-2,r,n),n}var pde=(function(){function e(s,i){switch(i.type){case"base64":return t(xs(s),i);case"binary":return t(s,i);case"buffer":return t(xr&&Buffer.isBuffer(s)?s.toString("binary"):lc(s),i);case"array":return t(ec(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(f,p){Array.isArray(l)&&(l[p]=[]);for(var m=/\\\w+\b/g,x=0,v,y=-1;v=m.exec(f);){switch(v[0]){case"\\cell":var b=f.slice(x,m.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var N={v:b,t:"s"};Array.isArray(l)?l[p][y]=N:l[ir({r:p,c:y})]=N}break}x=m.lastIndex}y>d.e.c&&(d.e.c=y)}),l["!ref"]=br(d),l}function r(s,i){return ol(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=mn(s["!ref"]),l,u=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var p=ir({r:d,c:f});l=u?(s[d]||[])[f]:s[p],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(po(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function mde(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function vf(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function gde(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,u=0,d=s+i;switch(u=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,u,d/2]}function xde(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,u;if(r!==0)switch(l|0){case 0:case 6:u=s*l,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-l),o[0]+=u,o[1]+=s;break;case 2:u=s*(l-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-l),o[1]+=u,o[2]+=s;break;case 4:u=s*(l-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-l),o[2]+=u,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Rm(e,t){if(t===0)return e;var r=gde(mde(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),vf(xde(r))}var U$=6,yde=15,vde=1,Ma=U$;function Fm(e){return Math.floor((e+Math.round(128/Ma)/256)*Ma)}function $m(e){return Math.floor((e-5)/Ma*100+.5)/100}function M2(e){return Math.round((e*Ma+5)/Ma*256)/256}function D1(e){return M2($m(Fm(e)))}function Ek(e){var t=Math.abs(e-D1(e)),r=Ma;if(t>.005)for(Ma=vde;Ma<yde;++Ma)Math.abs(e-D1(e))<=t&&(t=Math.abs(e-D1(e)),r=Ma);Ma=r}function Lu(e){e.width?(e.wpx=Fm(e.width),e.wch=$m(e.wpx),e.MDW=Ma):e.wpx?(e.wch=$m(e.wpx),e.width=M2(e.wch),e.MDW=Ma):typeof e.wch=="number"&&(e.width=M2(e.wch),e.wpx=Fm(e.width),e.MDW=Ma),e.customWidth&&delete e.customWidth}var bde=96,H$=bde;function q$(e){return e*96/H$}function bf(e){return e*H$/96}var wde={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function jde(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(Ta)||[]).forEach(function(o){var l=Zt(o);switch(Mi(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=an(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=an(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Nde(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(Ta)||[]).forEach(function(o){var l=Zt(o);switch(Mi(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function kde(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(Ta)||[]).forEach(function(o){var l=Zt(o);switch(Mi(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Yr(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?an(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?an(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?an(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?an(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?an(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?an(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?an(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=ck[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=an(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var u=ql[s.color.index];s.color.index==81&&(u=ql[1]),u||(u=ql[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Rm(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Sde(e,t,r){t.NumberFmt=[];for(var n=Oi(cr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=cr[n[s]];var i=e[0].match(Ta);if(i)for(s=0;s<i.length;++s){var o=Zt(i[s]);switch(Mi(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=kr(Yr(o.formatCode)),u=parseInt(o.numFmtId,10);if(t.NumberFmt[u]=l,u>0){if(u>392){for(u=392;u>60&&t.NumberFmt[u]!=null;--u);t.NumberFmt[u]=l}Hl(l,u)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var hp=["numFmtId","fillId","fontId","borderId","xfId"],fp=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function _de(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Ta)||[]).forEach(function(i){var o=Zt(i),l=0;switch(Mi(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<hp.length;++l)n[hp[l]]&&(n[hp[l]]=parseInt(n[hp[l]],10));for(l=0;l<fp.length;++l)n[fp[l]]&&(n[fp[l]]=an(n[fp[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=an(o.wrapText)),n.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var Ede=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,u,d){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=l.match(t))&&Sde(p,f,d),(p=l.match(s))&&kde(p,f,u,d),(p=l.match(n))&&Nde(p,f,u,d),(p=l.match(i))&&jde(p,f,u,d),(p=l.match(r))&&_de(p,f,d),f}})();function Tde(e,t){var r=e.read_shift(2),n=_a(e);return[r,n]}function Cde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Lle(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var u=e.read_shift(1);switch(u>0&&(n.charset=u),e.l++,n.color=$le(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=_a(e),n}var Ade=Ea;function Ode(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}var Pde=Ea;function Ide(e,t,r){var n={};n.NumberFmt=[];for(var s in cr)n.NumberFmt[s]=cr[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return vo(e,function(u,d,f){switch(f){case 44:n.NumberFmt[u[0]]=u[1],Hl(u[1],u[0]);break;case 43:n.Fonts.push(u),u.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(u.color.rgb=Rm(t.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(f);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}var Dde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Mde(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Ta)||[]).forEach(function(s){var i=Zt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Dde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Rde(){}function Fde(){}var $de=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Lde=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Bde=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ude(e,t,r){t.themeElements={};var n;[["clrScheme",$de,Mde],["fontScheme",Lde,Rde],["fmtScheme",Bde,Fde]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Hde=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function z$(e,t){(!e||e.length===0)&&(e=qde());var r,n={};if(!(r=e.match(Hde)))throw new Error("themeElements not found in theme");return Ude(r[0],n,t),n.raw=e,n}function qde(e,t){var r=[t$];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function zde(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=e$(i,{type:"array"})}catch{return}var l=fs(o,"theme/theme/theme1.xml",!0);if(l)return z$(l,r)}}function Wde(e){return e.read_shift(4)}function Kde(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Vde(e,4);break;case 2:t.xclrValue=A$(e);break;case 3:t.xclrValue=Wde(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Vde(e,t){return Ea(e,t)}function Gde(e,t){return Ea(e,t)}function Yde(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Kde(e);break;case 6:n[1]=Gde(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Xde(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Yde(e,r-e.l));return{ixfe:n,ext:i}}function Jde(e,t){t.forEach(function(r){r[0]})}function Qde(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:_a(e)}}function Zde(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function ehe(e){return e.l+=4,e.read_shift(4)!=0}function the(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return vo(e,function(u,d,f){switch(f){case 335:n.Types.push({name:u.name});break;case 51:u.forEach(function(p){l==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):l==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:l=u?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function rhe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(Ta,function(l){var u=Zt(l);switch(Mi(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==u.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[u.t-1].name,index:+u.v}):i==0&&n.Value.push({type:n.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return l}),n}function nhe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ta)||[]).forEach(function(n){var s=Zt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function ahe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=ir(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function she(e,t,r){var n=[];return vo(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function ihe(e,t,r,n){if(!e)return e;var s=n||{},i=!1;vo(e,function(l,u,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!u.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function ohe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function TI(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=La(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var u=mn(e["!ref"]||"BDWGO1000001:A1");u.s.r>l.r&&(u.s.r=l.r),u.e.r<l.r&&(u.e.r=l.r),u.s.c>l.c&&(u.s.c=l.c),u.e.c<l.c&&(u.e.c=l.c);var d=br(u);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function lhe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var u=Zt(l[0]),d={author:u.authorId&&r[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},f=La(u.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var p=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!p&&!!p[1]&&_k(p[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function che(e,t){var r=[],n=!1,s={},i=0;return e.replace(Ta,function(l,u){var d=Zt(l);switch(Mi(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=u+l.length;break;case"</text>":s.t=e.slice(i,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function uhe(e,t){var r=[],n=!1;return e.replace(Ta,function(i){var o=Zt(i);switch(Mi(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function dhe(e){var t={};t.iauthor=e.read_shift(4);var r=uc(e);return t.rfx=r.s,t.ref=ir(r.s),e.l+=16,t}var hhe=_a;function fhe(e,t){var r=[],n=[],s={},i=!1;return vo(e,function(l,u,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var phe="application/vnd.ms-office.vbaProject";function mhe(e){var t=vr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");vr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),vr.write(t)}function ghe(){return{"!type":"dialog"}}function xhe(){return{"!type":"dialog"}}function yhe(){return{"!type":"macro"}}function vhe(){return{"!type":"macro"}}var uu=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,u?d+=t.r:--d,s+(l?"":"$")+qn(f)+(u?"":"$")+fa(d)}return function(s,i){return t=i,s.replace(e,r)}})(),W$=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,bhe=(function(){return function(t,r){return t.replace(W$,function(n,s,i,o,l,u){var d=bk(o)-(i?0:r.c),f=vk(u)-(l?0:r.r),p=f==0?"":l?f+1:"["+f+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+p+"C"+m})}})();function K$(e,t){return e.replace(W$,function(r,n,s,i,o,l){return n+(s=="$"?s+i:qn(bk(i)+t.c))+(o=="$"?o+l:fa(vk(l)+t.r))})}function whe(e,t,r){var n=td(t),s=n.s,i=La(r),o={r:i.r-s.r,c:i.c-s.c};return K$(e,o)}function jhe(e){return e.length!=1}function CI(e){return e.replace(/_xlfn\./g,"")}function kn(e){e.l+=1}function tl(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function V$(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return G$(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=tl(e),l=tl(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function G$(e){var t=tl(e),r=tl(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Nhe(e,t,r){if(r.biff<8)return G$(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=tl(e),o=tl(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Y$(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return khe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=tl(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function khe(e){var t=tl(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function She(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function _he(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Ehe(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function Ehe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function The(e,t,r){var n=(e[e.l++]&96)>>5,s=V$(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Che(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=V$(e,i,r);return[n,s,o]}function Ahe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ohe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Phe(e,t,r){var n=(e[e.l++]&96)>>5,s=Nhe(e,t-1,r);return[n,s]}function Ihe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function AI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Dhe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Mhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Rhe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Fhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function $he(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function X$(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Lhe(e){return e.read_shift(2),X$(e)}function Bhe(e){return e.read_shift(2),X$(e)}function Uhe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Y$(e,0,r);return[n,s]}function Hhe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=_he(e,0,r);return[n,s]}function qhe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=Y$(e,0,r);return[n,s,i]}function zhe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Wfe[s],Z$[s],n]}function Whe(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Khe(e);return[s,(i[0]===0?Z$:zfe)[i[1]]]}function Khe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Vhe(e,t,r){e.l+=r&&r.biff==2?3:4}function Ghe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Yhe(e){return e.l++,dc[e.read_shift(1)]}function Xhe(e){return e.l++,e.read_shift(2)}function Jhe(e){return e.l++,e.read_shift(1)!==0}function Qhe(e){return e.l++,Na(e)}function Zhe(e,t,r){return e.l++,Mf(e,t-1,r)}function efe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=yn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=dc[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Na(e);break;case 2:r[1]=hc(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function tfe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?uc:Mg)(e));return s}function rfe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=efe(e,r.biff);return o}function nfe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function afe(e,t,r){if(r.biff==5)return sfe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function sfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function ife(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function ofe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function lfe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function cfe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var ufe=Ea,dfe=Ea,hfe=Ea;function Ff(e,t,r){return e.l+=2,[She(e)]}function Tk(e){return e.l+=6,[]}var ffe=Ff,pfe=Tk,mfe=Tk,gfe=Ff;function J$(e){return e.l+=2,[En(e),e.read_shift(2)&1]}var xfe=Ff,yfe=J$,vfe=Tk,bfe=Ff,wfe=Ff,jfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Nfe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=jfe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function kfe(e){return e.l+=2,[e.read_shift(4)]}function Sfe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function _fe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Efe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Tfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Cfe(e){return e.l+=4,[0,0]}var OI={1:{n:"PtgExp",f:Ghe},2:{n:"PtgTbl",f:hfe},3:{n:"PtgAdd",f:kn},4:{n:"PtgSub",f:kn},5:{n:"PtgMul",f:kn},6:{n:"PtgDiv",f:kn},7:{n:"PtgPower",f:kn},8:{n:"PtgConcat",f:kn},9:{n:"PtgLt",f:kn},10:{n:"PtgLe",f:kn},11:{n:"PtgEq",f:kn},12:{n:"PtgGe",f:kn},13:{n:"PtgGt",f:kn},14:{n:"PtgNe",f:kn},15:{n:"PtgIsect",f:kn},16:{n:"PtgUnion",f:kn},17:{n:"PtgRange",f:kn},18:{n:"PtgUplus",f:kn},19:{n:"PtgUminus",f:kn},20:{n:"PtgPercent",f:kn},21:{n:"PtgParen",f:kn},22:{n:"PtgMissArg",f:kn},23:{n:"PtgStr",f:Zhe},26:{n:"PtgSheet",f:Sfe},27:{n:"PtgEndSheet",f:_fe},28:{n:"PtgErr",f:Yhe},29:{n:"PtgBool",f:Jhe},30:{n:"PtgInt",f:Xhe},31:{n:"PtgNum",f:Qhe},32:{n:"PtgArray",f:Ihe},33:{n:"PtgFunc",f:zhe},34:{n:"PtgFuncVar",f:Whe},35:{n:"PtgName",f:nfe},36:{n:"PtgRef",f:Uhe},37:{n:"PtgArea",f:The},38:{n:"PtgMemArea",f:ife},39:{n:"PtgMemErr",f:ufe},40:{n:"PtgMemNoMem",f:dfe},41:{n:"PtgMemFunc",f:ofe},42:{n:"PtgRefErr",f:lfe},43:{n:"PtgAreaErr",f:Ahe},44:{n:"PtgRefN",f:Hhe},45:{n:"PtgAreaN",f:Phe},46:{n:"PtgMemAreaN",f:Efe},47:{n:"PtgMemNoMemN",f:Tfe},57:{n:"PtgNameX",f:afe},58:{n:"PtgRef3d",f:qhe},59:{n:"PtgArea3d",f:Che},60:{n:"PtgRefErr3d",f:cfe},61:{n:"PtgAreaErr3d",f:Ohe},255:{}},Afe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ofe={1:{n:"PtgElfLel",f:J$},2:{n:"PtgElfRw",f:bfe},3:{n:"PtgElfCol",f:ffe},6:{n:"PtgElfRwV",f:wfe},7:{n:"PtgElfColV",f:gfe},10:{n:"PtgElfRadical",f:xfe},11:{n:"PtgElfRadicalS",f:vfe},13:{n:"PtgElfColS",f:pfe},15:{n:"PtgElfColSV",f:mfe},16:{n:"PtgElfRadicalLel",f:yfe},25:{n:"PtgList",f:Nfe},29:{n:"PtgSxName",f:kfe},255:{}},Pfe={0:{n:"PtgAttrNoop",f:Cfe},1:{n:"PtgAttrSemi",f:$he},2:{n:"PtgAttrIf",f:Rhe},4:{n:"PtgAttrChoose",f:Dhe},8:{n:"PtgAttrGoto",f:Mhe},16:{n:"PtgAttrSum",f:Vhe},32:{n:"PtgAttrBaxcel",f:AI},33:{n:"PtgAttrBaxcel",f:AI},64:{n:"PtgAttrSpace",f:Lhe},65:{n:"PtgAttrSpaceSemi",f:Bhe},128:{n:"PtgAttrIfError",f:Fhe},255:{}};function $f(e,t,r,n){if(n.biff<8)return Ea(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=rfe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=tfe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Ea(e,t)),i}function Lf(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=OI[i]||OI[Afe[i]],(i===24||i===25)&&(s=(i===24?Ofe:Pfe)[e[e.l+1]]),!s||!s.f?Ea(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Ife(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Dfe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Mfe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Q$(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function PI(e,t,r){var n=Q$(e,t,r);return n=="#REF"?n:Mfe(n,r)}function ba(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],u,d,f,p=0,m=0,x,v="";if(!e[0]||!e[0][0])return"";for(var y=-1,b="",N=0,k=e[0].length;N<k;++N){var w=e[0][N];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),d=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:b=fn(" ",e[0][y][1][1]);break;case 1:b=fn("\r",e[0][y][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}d=d+b,y=-1}l.push(d+Dfe[w[0]]+u);break;case"PtgIsect":u=l.pop(),d=l.pop(),l.push(d+" "+u);break;case"PtgUnion":u=l.pop(),d=l.pop(),l.push(d+","+u);break;case"PtgRange":u=l.pop(),d=l.pop(),l.push(d+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=fh(w[1][1],o,s),l.push(ph(f,i));break;case"PtgRefN":f=r?fh(w[1][1],r,s):w[1][1],l.push(ph(f,i));break;case"PtgRef3d":p=w[1][1],f=fh(w[1][2],o,s),v=PI(n,p,s),l.push(v+"!"+ph(f,i));break;case"PtgFunc":case"PtgFuncVar":var P=w[1][0],S=w[1][1];P||(P=0),P&=127;var _=P==0?[]:l.slice(-P);l.length-=P,S==="User"&&(S=_.shift()),l.push(S+"("+_.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":x=hI(w[1][1],r?{s:r}:o,s),l.push(P1(x,s));break;case"PtgArea":x=hI(w[1][1],o,s),l.push(P1(x,s));break;case"PtgArea3d":p=w[1][1],x=w[1][2],v=PI(n,p,s),l.push(v+"!"+P1(x,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=w[1][2];var E=(n.names||[])[m-1]||(n[0]||[])[m],C=E?E.Name:"SH33TJSNAME"+String(m);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var M=w[1][1];m=w[1][2];var D;if(s.biff<=5)M<0&&(M=-M),n[M]&&(D=n[M][m]);else{var A="";if(((n[M]||[])[0]||[])[0]==14849||(((n[M]||[])[0]||[])[0]==1025?n[M][m]&&n[M][m].itab>0&&(A=n.SheetNames[n[M][m].itab-1]+"!"):A=n.SheetNames[m-1]+"!"),n[M]&&n[M][m])A+=n[M][m].Name;else if(n[0]&&n[0][m])A+=n[0][m].Name;else{var O=(Q$(n,M,s)||"").split(";;");O[m-1]?A=O[m-1]:A+="SH33TJSERRX"}l.push(A);break}D||(D={Name:"SH33TJSERRY"}),l.push(D.Name);break;case"PtgParen":var F="(",W=")";if(y>=0){switch(b="",e[0][y][1][0]){case 2:F=fn(" ",e[0][y][1][1])+F;break;case 3:F=fn("\r",e[0][y][1][1])+F;break;case 4:W=fn(" ",e[0][y][1][1])+W;break;case 5:W=fn("\r",e[0][y][1][1])+W;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(F+l.pop()+W);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[ir(f)]){var Z=n.sharedf[ir(f)];l.push(ba(Z,o,Y,n,s))}else{var re=!1;for(u=0;u!=n.arrayf.length;++u)if(d=n.arrayf[u],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){l.push(ba(d[1],o,Y,n,s)),re=!0;break}re||l.push(w[1])}break;case"PtgArray":l.push("{"+Ife(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var ne=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&ne.indexOf(e[0][N][0])==-1){w=e[0][y];var U=!0;switch(w[1][0]){case 4:U=!1;case 0:b=fn(" ",w[1][1]);break;case 5:U=!1;case 1:b=fn("\r",w[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((U?b:"")+l.pop()+(U?"":b)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Rfe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ea(e,t-2)];var l=Lf(e,o,r);return t!==o+s&&(i=$f(e,t-o-s,l,r)),e.l=n,[l,i]}function Ffe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ea(e,t-2)];var l=Lf(e,o,r);return t!==o+s&&(i=$f(e,t-o-s,l,r)),e.l=n,[l,i]}function $fe(e,t,r,n){var s=e.l+t,i=Lf(e,n,r),o;return s!==e.l&&(o=$f(e,s-e.l,i,r)),[i,o]}function Lfe(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=Lf(e,i,r);return i==65535?[[],Ea(e,t-2)]:(t!==i+2&&(s=$f(e,n-i-2,o,r)),[o,s])}function Bfe(e){var t;if(no(e,e.l+6)!==65535)return[Na(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function M1(e,t,r){var n=e.l+t,s=Ri(e);r.biff==2&&++e.l;var i=Bfe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Ffe(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Rg(e,t,r){var n=e.read_shift(4),s=Lf(e,n,r),i=e.read_shift(4),o=i>0?$f(e,i,s,r):null;return[s,o]}var Ufe=Rg,Fg=Rg,Hfe=Rg,qfe=Rg,zfe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Z$={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wfe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function II(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function R1(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var yh={},du={};function vh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function e8(e,t,r,n,s,i){try{n.cellNF&&(e.z=cr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ea(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(cr[t]==null&&Hl(Koe[t]||"General",t),e.t==="e")e.w=e.w||dc[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v);else if(e.t==="d"){var o=Ua(e.v);(o|0)===o?e.w=o.toString(10):e.w=mf(o)}else{if(e.v===void 0)return"";e.w=Zl(e.v,du)}else e.t==="d"?e.w=Ms(t,Ua(e.v),du):e.w=Ms(t,e.v,du)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Rm(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Rm(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function Kfe(e,t){var r=mn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=br(r))}var Vfe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Gfe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Yfe=/<(?:\w:)?hyperlink [^>]*>/mg,Xfe=/"(\w*:\w*)"/,Jfe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Qfe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Zfe=/<(?:\w:)?pageMargins[^>]*\/>/g,t8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,e0e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,t0e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function r0e(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",p=e.match(Gfe);p?(d=e.slice(0,p.index),f=e.slice(p.index+p[0].length)):d=f=e;var m=d.match(t8);m?Ck(m[0],l,s,r):(m=d.match(e0e))&&n0e(m[0],m[1]||"",l,s,r);var x=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(x>0){var v=d.slice(x,x+50).match(Xfe);v&&Kfe(l,v[1])}var y=d.match(t0e);y&&y[1]&&c0e(y[1],s);var b=[];if(t.cellStyles){var N=d.match(Jfe);N&&i0e(b,N)}p&&u0e(p[1],l,t,u,i,o);var k=f.match(Qfe);k&&(l["!autofilter"]=o0e(k[0]));var w=[],P=f.match(Vfe);if(P)for(x=0;x!=P.length;++x)w[x]=mn(P[x].slice(P[x].indexOf('"')+1));var S=f.match(Yfe);S&&a0e(l,S,n);var _=f.match(Zfe);if(_&&(l["!margins"]=s0e(Zt(_[0]))),!l["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(l["!ref"]=br(u)),t.sheetRows>0&&l["!ref"]){var E=mn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>u.e.r&&(E.e.r=u.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>u.e.c&&(E.e.c=u.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=br(E))}return b.length>0&&(l["!cols"]=b),w.length>0&&(l["!merges"]=w),l}function Ck(e,t,r,n){var s=Zt(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=kr(Yr(s.codeName)))}function n0e(e,t,r,n,s){Ck(e.slice(0,e.indexOf(">")),r,n,s)}function a0e(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=Zt(Yr(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+kr(i.location))):(i.Target="#"+kr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=mn(i.ref),u=l.s.r;u<=l.e.r;++u)for(var d=l.s.c;d<=l.e.c;++d){var f=ir({c:d,r:u});n?(e[u]||(e[u]=[]),e[u][d]||(e[u][d]={t:"z",v:void 0}),e[u][d].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function s0e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function i0e(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Zt(t[n],!0);s.hidden&&(s.hidden=an(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,Ek(s.width)),Lu(s);i<=o;)e[i++]=ha(s)}}function o0e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var l0e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function c0e(e,t){t.Views||(t.Views=[{}]),(e.match(l0e)||[]).forEach(function(r,n){var s=Zt(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),an(s.rightToLeft)&&(t.Views[n].RTL=!0)})}var u0e=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=gf("v"),o=gf("f");return function(u,d,f,p,m,x){for(var v=0,y="",b=[],N=[],k=0,w=0,P=0,S="",_,E,C=0,M=0,D,A,O=0,F=0,W=Array.isArray(x.CellXf),Y,Z=[],re=[],ne=Array.isArray(d),U=[],oe={},K=!1,R=!!f.sheetStubs,Q=u.split(t),ee=0,se=Q.length;ee!=se;++ee){y=Q[ee].trim();var xe=y.length;if(xe!==0){var ge=0;e:for(v=0;v<xe;++v)switch(y[v]){case">":if(y[v-1]!="/"){++v;break e}if(f&&f.cellStyles){if(E=Zt(y.slice(ge,v),!0),C=E.r!=null?parseInt(E.r,10):C+1,M=-1,f.sheetRows&&f.sheetRows<C)continue;oe={},K=!1,E.ht&&(K=!0,oe.hpt=parseFloat(E.ht),oe.hpx=bf(oe.hpt)),E.hidden=="1"&&(K=!0,oe.hidden=!0),E.outlineLevel!=null&&(K=!0,oe.level=+E.outlineLevel),K&&(U[C-1]=oe)}break;case"<":ge=v;break}if(ge>=v)break;if(E=Zt(y.slice(ge,v),!0),C=E.r!=null?parseInt(E.r,10):C+1,M=-1,!(f.sheetRows&&f.sheetRows<C)){p.s.r>C-1&&(p.s.r=C-1),p.e.r<C-1&&(p.e.r=C-1),f&&f.cellStyles&&(oe={},K=!1,E.ht&&(K=!0,oe.hpt=parseFloat(E.ht),oe.hpx=bf(oe.hpt)),E.hidden=="1"&&(K=!0,oe.hidden=!0),E.outlineLevel!=null&&(K=!0,oe.level=+E.outlineLevel),K&&(U[C-1]=oe)),b=y.slice(v).split(e);for(var Me=0;Me!=b.length&&b[Me].trim().charAt(0)=="<";++Me);for(b=b.slice(Me),v=0;v!=b.length;++v)if(y=b[v].trim(),y.length!==0){if(N=y.match(r),k=v,w=0,P=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,N!=null&&N.length===2){for(k=0,S=N[1],w=0;w!=S.length&&!((P=S.charCodeAt(w)-64)<1||P>26);++w)k=26*k+P;--k,M=k}else++M;for(w=0;w!=y.length&&y.charCodeAt(w)!==62;++w);if(++w,E=Zt(y.slice(0,w),!0),E.r||(E.r=ir({r:C-1,c:M})),S=y.slice(w),_={t:""},(N=S.match(i))!=null&&N[1]!==""&&(_.v=kr(N[1])),f.cellFormula){if((N=S.match(o))!=null&&N[1]!==""){if(_.f=kr(Yr(N[1])).replace(/\r\n/g,`
`),f.xlfn||(_.f=CI(_.f)),N[0].indexOf('t="array"')>-1)_.F=(S.match(s)||[])[1],_.F.indexOf(":")>-1&&Z.push([mn(_.F),_.F]);else if(N[0].indexOf('t="shared"')>-1){A=Zt(N[0]);var ce=kr(Yr(N[1]));f.xlfn||(ce=CI(ce)),re[parseInt(A.si,10)]=[A,ce,E.r]}}else(N=S.match(/<f[^>]*\/>/))&&(A=Zt(N[0]),re[A.si]&&(_.f=whe(re[A.si][1],re[A.si][2],E.r)));var me=La(E.r);for(w=0;w<Z.length;++w)me.r>=Z[w][0].s.r&&me.r<=Z[w][0].e.r&&me.c>=Z[w][0].s.c&&me.c<=Z[w][0].e.c&&(_.F=Z[w][1])}if(E.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(R)_.t="z";else continue;else _.t=E.t||"n";switch(p.s.c>M&&(p.s.c=M),p.e.c<M&&(p.e.c=M),_.t){case"n":if(_.v==""||_.v==null){if(!R)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!R)continue;_.t="z"}else D=yh[parseInt(_.v,10)],_.v=D.t,_.r=D.r,f.cellHTML&&(_.h=D.h);break;case"str":_.t="s",_.v=_.v!=null?Yr(_.v):"",f.cellHTML&&(_.h=gk(_.v));break;case"inlineStr":N=S.match(n),_.t="s",N!=null&&(D=_k(N[1]))?(_.v=D.t,f.cellHTML&&(_.h=D.h)):_.v="";break;case"b":_.v=an(_.v);break;case"d":f.cellDates?_.v=ea(_.v,1):(_.v=Ua(ea(_.v,1)),_.t="n");break;case"e":(!f||f.cellText!==!1)&&(_.w=_.v),_.v=j$[_.v];break}if(O=F=0,Y=null,W&&E.s!==void 0&&(Y=x.CellXf[E.s],Y!=null&&(Y.numFmtId!=null&&(O=Y.numFmtId),f.cellStyles&&Y.fillId!=null&&(F=Y.fillId))),e8(_,O,F,f,m,x),f.cellDates&&W&&_.t=="n"&&ed(cr[O])&&(_.t="d",_.v=Dg(_.v)),E.cm&&f.xlmeta){var Oe=(f.xlmeta.Cell||[])[+E.cm-1];Oe&&Oe.type=="XLDAPR"&&(_.D=!0)}if(ne){var q=La(E.r);d[q.r]||(d[q.r]=[]),d[q.r][q.c]=_}else d[E.r]=_}}}}U.length>0&&(d["!rows"]=U)}})();function d0e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var h0e=uc;function f0e(){}function p0e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Rle(e),r}function m0e(e){var t=Fs(e);return[t]}function g0e(e){var t=cc(e);return[t]}function x0e(e){var t=Fs(e),r=e.read_shift(1);return[t,r,"b"]}function y0e(e){var t=cc(e),r=e.read_shift(1);return[t,r,"b"]}function v0e(e){var t=Fs(e),r=e.read_shift(1);return[t,r,"e"]}function b0e(e){var t=cc(e),r=e.read_shift(1);return[t,r,"e"]}function w0e(e){var t=Fs(e),r=e.read_shift(4);return[t,r,"s"]}function j0e(e){var t=cc(e),r=e.read_shift(4);return[t,r,"s"]}function N0e(e){var t=Fs(e),r=Na(e);return[t,r,"n"]}function r8(e){var t=cc(e),r=Na(e);return[t,r,"n"]}function k0e(e){var t=Fs(e),r=Nk(e);return[t,r,"n"]}function S0e(e){var t=cc(e),r=Nk(e);return[t,r,"n"]}function _0e(e){var t=Fs(e),r=wk(e);return[t,r,"is"]}function E0e(e){var t=Fs(e),r=_a(e);return[t,r,"str"]}function T0e(e){var t=cc(e),r=_a(e);return[t,r,"str"]}function C0e(e,t,r){var n=e.l+t,s=Fs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=Fg(e,n-e.l,r);o[3]=ba(l,null,s,r.supbooks,r)}else e.l=n;return o}function A0e(e,t,r){var n=e.l+t,s=Fs(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=Fg(e,n-e.l,r);o[3]=ba(l,null,s,r.supbooks,r)}else e.l=n;return o}function O0e(e,t,r){var n=e.l+t,s=Fs(e);s.r=r["!row"];var i=Na(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=Fg(e,n-e.l,r);o[3]=ba(l,null,s,r.supbooks,r)}else e.l=n;return o}function P0e(e,t,r){var n=e.l+t,s=Fs(e);s.r=r["!row"];var i=_a(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=Fg(e,n-e.l,r);o[3]=ba(l,null,s,r.supbooks,r)}else e.l=n;return o}var I0e=uc;function D0e(e,t){var r=e.l+t,n=uc(e),s=jk(e),i=_a(e),o=_a(e),l=_a(e);e.l=r;var u={rfx:n,relId:s,loc:i,display:l};return o&&(u.Tooltip=o),u}function M0e(){}function R0e(e,t,r){var n=e.l+t,s=v$(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Ufe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function F0e(e,t,r){var n=e.l+t,s=uc(e),i=[s];if(r.cellFormula){var o=qfe(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}var $0e=["left","right","top","bottom","header","footer"];function L0e(e){var t={};return $0e.forEach(function(r){t[r]=Na(e)}),t}function B0e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function U0e(){}function H0e(){}function q0e(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var u=l.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,m=!1,x,v,y,b,N,k,w,P,S,_=[];l.biff=12,l["!row"]=0;var E=0,C=!1,M=[],D={},A=l.supbooks||s.supbooks||[[]];if(A.sharedf=D,A.arrayf=M,A.SheetNames=s.SheetNames||s.Sheets.map(function(ne){return ne.name}),!l.supbooks&&(l.supbooks=A,s.Names))for(var O=0;O<s.Names.length;++O)A[0][O+1]=s.Names[O];var F=[],W=[],Y=!1;Lm[16]={n:"BrtShortReal",f:r8};var Z;if(vo(e,function(U,oe,K){if(!m)switch(K){case 148:d=U;break;case 0:x=U,l.sheetRows&&l.sheetRows<=x.r&&(m=!0),P=fa(b=x.r),l["!row"]=x.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=bf(U.hpt)),W[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:U[2]},U[2]){case"n":v.v=U[1];break;case"s":w=yh[U[1]],v.v=w.t,v.r=w.r;break;case"b":v.v=!!U[1];break;case"e":v.v=U[1],l.cellText!==!1&&(v.w=dc[v.v]);break;case"str":v.t="s",v.v=U[1];break;case"is":v.t="s",v.v=U[1].t;break}if((y=o.CellXf[U[0].iStyleRef])&&e8(v,y.numFmtId,null,l,i,o),N=U[0].c==-1?N+1:U[0].c,l.dense?(u[b]||(u[b]=[]),u[b][N]=v):u[qn(N)+P]=v,l.cellFormula){for(C=!1,E=0;E<M.length;++E){var R=M[E];x.r>=R[0].s.r&&x.r<=R[0].e.r&&N>=R[0].s.c&&N<=R[0].e.c&&(v.F=br(R[0]),C=!0)}!C&&U.length>3&&(v.f=U[3])}if(f.s.r>x.r&&(f.s.r=x.r),f.s.c>N&&(f.s.c=N),f.e.r<x.r&&(f.e.r=x.r),f.e.c<N&&(f.e.c=N),l.cellDates&&y&&v.t=="n"&&ed(cr[y.numFmtId])){var Q=$l(v.v);Q&&(v.t="d",v.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}Z&&(Z.type=="XLDAPR"&&(v.D=!0),Z=void 0);break;case 1:case 12:if(!l.sheetStubs||p)break;v={t:"z",v:void 0},N=U[0].c==-1?N+1:U[0].c,l.dense?(u[b]||(u[b]=[]),u[b][N]=v):u[qn(N)+P]=v,f.s.r>x.r&&(f.s.r=x.r),f.s.c>N&&(f.s.c=N),f.e.r<x.r&&(f.e.r=x.r),f.e.c<N&&(f.e.c=N),Z&&(Z.type=="XLDAPR"&&(v.D=!0),Z=void 0);break;case 176:_.push(U);break;case 49:Z=((l.xlmeta||{}).Cell||[])[U-1];break;case 494:var ee=n["!id"][U.relId];for(ee?(U.Target=ee.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=ee):U.relId==""&&(U.Target="#"+U.loc),b=U.rfx.s.r;b<=U.rfx.e.r;++b)for(N=U.rfx.s.c;N<=U.rfx.e.c;++N)l.dense?(u[b]||(u[b]=[]),u[b][N]||(u[b][N]={t:"z",v:void 0}),u[b][N].l=U):(k=ir({c:N,r:b}),u[k]||(u[k]={t:"z",v:void 0}),u[k].l=U);break;case 426:if(!l.cellFormula)break;M.push(U),S=l.dense?u[b][N]:u[qn(N)+P],S.f=ba(U[1],f,{r:x.r,c:N},A,l),S.F=br(U[0]);break;case 427:if(!l.cellFormula)break;D[ir(U[0].s)]=U[1],S=l.dense?u[b][N]:u[qn(N)+P],S.f=ba(U[1],f,{r:x.r,c:N},A,l);break;case 60:if(!l.cellStyles)break;for(;U.e>=U.s;)F[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},Y||(Y=!0,Ek(U.w/256)),Lu(F[U.e+1]);break;case 161:u["!autofilter"]={ref:br(U)};break;case 476:u["!margins"]=U;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),U.name&&(s.Sheets[r].CodeName=U.name),(U.above||U.left)&&(u["!outline"]={above:U.above,left:U.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),U.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!oe.T){if(!p||l.WTF)throw new Error("Unexpected record 0x"+K.toString(16))}}},l),delete l.supbooks,delete l["!row"],!u["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(u["!ref"]=br(d||f)),l.sheetRows&&u["!ref"]){var re=mn(u["!ref"]);l.sheetRows<=+re.e.r&&(re.e.r=l.sheetRows-1,re.e.r>f.e.r&&(re.e.r=f.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>f.e.c&&(re.e.c=f.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),u["!fullref"]=u["!ref"],u["!ref"]=br(re))}return _.length>0&&(u["!merges"]=_),F.length>0&&(u["!cols"]=F),W.length>0&&(u["!rows"]=W),u}function z0e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=kr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function W0e(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,u=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var m=z0e(p);f.s.r=f.s.c=0,f.e.c=l,d=qn(l),m[0].forEach(function(x,v){o[d+fa(v)]={t:"n",v:x,z:m[1]},u=v}),f.e.r<u&&(f.e.r=u),++l}),l>0&&(o["!ref"]=br(f)),o}function K0e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(t8);return l&&Ck(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function V0e(e,t){e.l+=10;var r=_a(e);return{name:r}}function G0e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return vo(e,function(u,d,f){switch(f){case 550:i["!rel"]=u;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),u.name&&(s.Sheets[r].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var n8=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Y0e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],X0e=[],J0e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function DI(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=an(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function MI(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=an(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function a8(e){MI(e.WBProps,n8),MI(e.CalcPr,J0e),DI(e.WBView,Y0e),DI(e.Sheets,X0e),du.date1904=an(e.WBProps.date1904)}var Q0e="][*?/\\".split("");function Z0e(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Q0e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var epe=/<\w+:workbook/;function tpe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(Ta,function(u,d){var f=Zt(u);switch(Mi(f[0])){case"<?xml":break;case"<workbook":u.match(epe)&&(s="xmlns"+u.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":n8.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=an(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=Yr(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=kr(Yr(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Yr(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),an(f.hidden||"0")&&(i.Hidden=!0),o=d+u.length;break;case"</definedName>":i.Ref=kr(Yr(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return u}),vle.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return a8(r),r}function rpe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=P2(e),r.name=_a(e),r}function npe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?_a(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ape(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function spe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Fle(e),o=Hfe(e,0,r),l=jk(e);e.l=n;var u={Name:i,Ptg:o};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function ipe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Lm[16]={n:"BrtFRTArchID$",f:ape},vo(e,function(u,d,f){switch(f){case 156:o.SheetNames.push(u.name),r.Sheets.push(u);break;case 153:r.WBProps=u;break;case 39:u.Sheet!=null&&(t.SID=u.Sheet),u.Ref=ba(u.Ptg,null,null,o,t),delete t.SID,delete u.Ptg,i.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,u]):o[0]=[f,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),a8(r),r.Names=i,r.supbooks=o,r}function ope(e,t,r){return t.slice(-4)===".bin"?ipe(e,r):tpe(e,r)}function lpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?q0e(e,n,r,s,i,o,l):r0e(e,n,r,s,i,o,l)}function cpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?G0e(e,n,r,s,i):K0e(e,n,r,s,i)}function upe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?yhe():vhe()}function dpe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?ghe():xhe()}function hpe(e,t,r,n){return t.slice(-4)===".bin"?Ide(e,r,n):Ede(e,r,n)}function fpe(e,t,r){return z$(e,r)}function ppe(e,t,r){return t.slice(-4)===".bin"?Yue(e,r):Vue(e,r)}function mpe(e,t,r){return t.slice(-4)===".bin"?fhe(e,r):lhe(e,r)}function gpe(e,t,r){return t.slice(-4)===".bin"?she(e):nhe(e)}function xpe(e,t,r,n){return r.slice(-4)===".bin"?ihe(e,t,r,n):void 0}function ype(e,t,r){return t.slice(-4)===".bin"?the(e,t,r):rhe(e,t,r)}var s8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,i8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Xs(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(s8),i,o,l,u;if(s)for(u=0;u!=s.length;++u)i=s[u].match(i8),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function vpe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(s8),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(i8),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var bh;function bpe(e,t){var r=bh[e]||kr(e);return r==="General"?Zl(t):Ms(r,t)}function wpe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=an(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=ea(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[kr(t)]=s}function jpe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||dc[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v):e.w=Zl(e.v):e.w=bpe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=bh[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&ed(n)){var s=$l(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Npe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=wde[n.Pattern]||n.Pattern)}e[t.ID]=t}function kpe(e,t,r,n,s,i,o,l,u,d){var f="General",p=n.StyleID,m={};d=d||{};var x=[],v=0;for(p===void 0&&l&&(p=l.StyleID),p===void 0&&o&&(p=o.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&x.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=an(e);break;case"String":n.t="s",n.r=nI(kr(e)),n.v=e.indexOf("<")>-1?kr(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ea(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=kr(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=j$[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=nI(t||e));break}if(jpe(n,f,d),d.cellFormula!==!1)if(n.Formula){var y=kr(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=uu(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=uu("RC:RC",s):n.ArrayRange&&(n.F=uu(n.ArrayRange,s),u.push([mn(n.F),n.F]))}else for(v=0;v<u.length;++v)s.r>=u[v][0].s.r&&s.r<=u[v][0].e.r&&s.c>=u[v][0].s.c&&s.c<=u[v][0].e.c&&(n.F=u[v][1]);d.cellStyles&&(x.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Spe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function F1(e,t){var r=t||{};GF();var n=Qd(xk(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Yr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=ha(r);return o.type="string",yf.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Fe){s.indexOf("<"+Fe)>=0&&(i=!0)}),i)return Dpe(n,r);bh={"General Number":"General","General Date":cr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":cr[15],"Short Date":cr[14],"Long Time":cr[19],"Medium Time":cr[18],"Short Time":cr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:cr[2],Standard:cr[4],Percent:cr[10],Scientific:cr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[],d,f={},p=[],m=r.dense?[]:{},x="",v={},y={},b=Xs('<Data ss:Type="String">'),N=0,k=0,w=0,P={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},_={},E="",C=0,M=[],D={},A={},O=0,F=[],W=[],Y={},Z=[],re,ne=!1,U=[],oe=[],K={},R=0,Q=0,ee={Sheets:[],WBProps:{date1904:!1}},se={};xf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var xe="";l=xf.exec(n);)switch(l[3]=(xe=l[3]).toLowerCase()){case"data":if(xe=="data"){if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break}if(u[u.length-1][1])break;l[1]==="/"?kpe(n.slice(N,l.index),E,b,u[u.length-1][0]=="comment"?Y:v,{c:k,r:w},S,Z[k],y,U,r):(E="",b=Xs(l[0]),N=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(W.length>0&&(v.c=W),(!r.sheetRows||r.sheetRows>w)&&v.v!==void 0&&(r.dense?(m[w]||(m[w]=[]),m[w][k]=v):m[qn(k)+fa(w)]=v),v.HRef&&(v.l={Target:kr(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(R=k+(parseInt(v.MergeAcross,10)|0),Q=w+(parseInt(v.MergeDown,10)|0),M.push({s:{c:k,r:w},e:{c:R,r:Q}})),!r.sheetStubs)v.MergeAcross?k=R+1:++k;else if(v.MergeAcross||v.MergeDown){for(var ge=k;ge<=R;++ge)for(var Me=w;Me<=Q;++Me)(ge>k||Me>w)&&(r.dense?(m[Me]||(m[Me]=[]),m[Me][ge]={t:"z"}):m[qn(ge)+fa(Me)]={t:"z"});k=R+1}else++k;else v=vpe(l[0]),v.Index&&(k=+v.Index-1),k<P.s.c&&(P.s.c=k),k>P.e.c&&(P.e.c=k),l[0].slice(-2)==="/>"&&++k,W=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<P.s.r&&(P.s.r=w),w>P.e.r&&(P.e.r=w),l[0].slice(-2)==="/>"&&(y=Xs(l[0]),y.Index&&(w=+y.Index-1)),k=0,++w):(y=Xs(l[0]),y.Index&&(w=+y.Index-1),K={},(y.AutoFitHeight=="0"||y.Height)&&(K.hpx=parseInt(y.Height,10),K.hpt=q$(K.hpx),oe[w]=K),y.Hidden=="1"&&(K.hidden=!0,oe[w]=K));break;case"worksheet":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));p.push(x),P.s.r<=P.e.r&&P.s.c<=P.e.c&&(m["!ref"]=br(P),r.sheetRows&&r.sheetRows<=P.e.r&&(m["!fullref"]=m["!ref"],P.e.r=r.sheetRows-1,m["!ref"]=br(P))),M.length&&(m["!merges"]=M),Z.length>0&&(m["!cols"]=Z),oe.length>0&&(m["!rows"]=oe),f[x]=m}else P={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=k=0,u.push([l[3],!1]),d=Xs(l[0]),x=kr(d.Name),m=r.dense?[]:{},M=[],U=[],oe=[],se={name:x,Hidden:0},ee.Sheets.push(se);break;case"table":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;u.push([l[3],!1]),Z=[],ne=!1}break;case"style":l[1]==="/"?Npe(S,_,r):_=Xs(l[0]);break;case"numberformat":_.nf=kr(Xs(l[0]).Format||"General"),bh[_.nf]&&(_.nf=bh[_.nf]);for(var ce=0;ce!=392&&cr[ce]!=_.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(cr[ce]==null){Hl(_.nf,ce);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(re=Xs(l[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!ne&&re.wpx>10){ne=!0,Ma=U$;for(var me=0;me<Z.length;++me)Z[me]&&Lu(Z[me])}ne&&Lu(re),Z[re.Index-1||Z.length]=re;for(var Oe=0;Oe<+re.Span;++Oe)Z[Z.length]=ha(re);break;case"namedrange":if(l[1]==="/")break;ee.Names||(ee.Names=[]);var q=Zt(l[0]),Ne={Name:q.Name,Ref:uu(q.RefersTo.slice(1),{r:0,c:0})};ee.Sheets.length>0&&(Ne.Sheet=ee.Sheets.length-1),ee.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(C,l.index):C=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;_.Interior=Xs(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?lce(D,xe,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else u.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));Spe(Y),W.push(Y)}else u.push([l[3],!1]),d=Xs(l[0]),Y={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ae=Xs(l[0]);m["!autofilter"]={ref:uu(ae.Range).replace(/\$/g,"")},u.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=u.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"null":break;default:if(u.length==0&&l[3]=="document"||u.length==0&&l[3]=="uof")return UI(n,r);var De=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(l[3]){case"date1904":ee.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":se.Hidden=1;break;case"SheetVeryHidden":se.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(m["!margins"].header=+Zt(l[0]).Margin);break;case"footer":m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+Zt(l[0]).Margin)||(m["!margins"].footer=+Zt(l[0]).Margin);break;case"pagemargins":var Be=Zt(l[0]);m["!margins"]||vh(m["!margins"]={},"xlml"),isNaN(+Be.Top)||(m["!margins"].top=+Be.Top),isNaN(+Be.Left)||(m["!margins"].left=+Be.Left),isNaN(+Be.Right)||(m["!margins"].right=+Be.Right),isNaN(+Be.Bottom)||(m["!margins"].bottom=+Be.Bottom);break;case"displayrighttoleft":ee.Views||(ee.Views=[]),ee.Views[0]||(ee.Views[0]={}),ee.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||l[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?wpe(A,xe,F,n.slice(O,l.index)):(F=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+u.join("|")}var Se={};return!r.bookSheets&&!r.bookProps&&(Se.Sheets=f),Se.SheetNames=p,Se.Workbook=ee,Se.SSF=ha(cr),Se.Props=D,Se.Custprops=A,Se}function R2(e,t){switch(Pk(t=t||{}),t.type||"base64"){case"base64":return F1(xs(e),t);case"binary":case"buffer":case"file":return F1(e,t);case"array":return F1(lc(e),t)}}function _pe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Ble(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Ule(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Epe=[60,1084,2066,2165,2175];function Tpe(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var u=no(r,r.l),d=F2[u],f=0;d!=null&&Epe.indexOf(u)>-1;)i=no(r,r.l+2),f=r.l+4,u==2066?f+=4:(u==2165||u==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,d=F2[u=no(r,r.l)];var p=Ho(o);ca(p,0);var m=0;p.lens=[];for(var x=0;x<o.length;++x)p.lens.push(m),m+=o[x].length;if(p.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+p.length+" < "+n;return t.f(p,p.length,s)}function vi(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=cr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||dc[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=mf(e.v):e.w=Zl(e.v):e.w=Ms(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&ed(cr[n]||String(n))){var s=$l(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function pp(e,t,r){return{v:e,ixfe:t,t:r}}function Cpe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,u=[],d="",f={},p,m="",x,v,y,b,N={},k=[],w,P,S=[],_=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},M=function(bt){return bt<8?ql[bt]:bt<64&&_[bt-8]||ql[bt]},D=function(bt,Gt,tn){var ur=Gt.XF.data;if(!(!ur||!ur.patternType||!tn||!tn.cellStyles)){Gt.s={},Gt.s.patternType=ur.patternType;var zr;(zr=vf(M(ur.icvFore)))&&(Gt.s.fgColor={rgb:zr}),(zr=vf(M(ur.icvBack)))&&(Gt.s.bgColor={rgb:zr})}},A=function(bt,Gt,tn){if(!(K>1)&&!(tn.sheetRows&&bt.r>=tn.sheetRows)){if(tn.cellStyles&&Gt.XF&&Gt.XF.data&&D(bt,Gt,tn),delete Gt.ixfe,delete Gt.XF,p=bt,m=ir(bt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),bt.r<o.s.r&&(o.s.r=bt.r),bt.c<o.s.c&&(o.s.c=bt.c),bt.r+1>o.e.r&&(o.e.r=bt.r+1),bt.c+1>o.e.c&&(o.e.c=bt.c+1),tn.cellFormula&&Gt.f){for(var ur=0;ur<k.length;++ur)if(!(k[ur][0].s.c>bt.c||k[ur][0].s.r>bt.r)&&!(k[ur][0].e.c<bt.c||k[ur][0].e.r<bt.r)){Gt.F=br(k[ur][0]),(k[ur][0].s.c!=bt.c||k[ur][0].s.r!=bt.r)&&delete Gt.f,Gt.f&&(Gt.f=""+ba(k[ur][1],o,bt,U,O));break}}tn.dense?(s[bt.r]||(s[bt.r]=[]),s[bt.r][bt.c]=Gt):s[m]=Gt}},O={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var F,W=[],Y=[],Z=[],re=[],ne=!1,U=[];U.SheetNames=O.snames,U.sharedf=O.sharedf,U.arrayf=O.arrayf,U.names=[],U.XTI=[];var oe=0,K=0,R=0,Q=[],ee=[],se;O.codepage=1200,oi(1200);for(var xe=!1;e.l<e.length-1;){var ge=e.l,Me=e.read_shift(2);if(Me===0&&oe===10)break;var ce=e.l===e.length?0:e.read_shift(2),me=F2[Me];if(me&&me.f){if(t.bookSheets&&oe===133&&Me!==133)break;if(oe=Me,me.r===2||me.r==12){var Oe=e.read_shift(2);if(ce-=2,!O.enc&&Oe!==Me&&((Oe&255)<<8|Oe>>8)!==Me)throw new Error("rt mismatch: "+Oe+"!="+Me);me.r==12&&(e.l+=10,ce-=10)}var q={};if(Me===10?q=me.f(e,ce,O):q=Tpe(Me,me,e,ce,O),K==0&&[9,521,1033,2057].indexOf(oe)===-1)continue;switch(Me){case 34:r.opts.Date1904=E.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=q,!t.password)throw new Error("File is password-protected");if(q.valid==null)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=q;break;case 66:var Ne=Number(q);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}oi(O.codepage=Ne),xe=!0;break;case 317:O.rrtabid=q;break;case 25:O.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:O.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(s["!type"]="dialog"),q.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),q.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(q);break;case 430:U.push([q]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(q);break;case 24:case 536:se={Name:q.Name,Ref:ba(q.rgce,o,null,U,O)},q.itab>0&&(se.Sheet=q.itab-1),U.names.push(se),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(q),q.Name=="_xlnm._FilterDatabase"&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&q.rgce[0][0][0]=="PtgArea3d"&&(ee[q.itab-1]={ref:br(q.rgce[0][0][1][2])});break;case 22:O.ExternCount=q;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(q),U.XTI=U.XTI.concat(q);break;case 2196:if(O.biff<8)break;se!=null&&(se.Comment=q[1]);break;case 18:s["!protect"]=q;break;case 19:q!==0&&O.WTF&&console.error("Password verifier: "+q);break;case 133:i[q.pos]=q,O.snames.push(q.name);break;case 10:{if(--K)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=br(o),t.sheetRows&&t.sheetRows<=o.e.r){var ae=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=br(o),o.e.r=ae}o.e.r++,o.e.c++}W.length>0&&(s["!merges"]=W),Y.length>0&&(s["!objects"]=Y),Z.length>0&&(s["!cols"]=Z),re.length>0&&(s["!rows"]=re),E.Sheets.push(C)}d===""?f=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[Me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),O.biffguess=q.BIFFVer==0,q.BIFFVer==0&&q.dt==4096&&(O.biff=5,xe=!0,oi(O.codepage=28591)),O.biff==8&&q.BIFFVer==0&&q.dt==16&&(O.biff=2),K++)break;if(s=t.dense?[]:{},O.biff<8&&!xe&&(xe=!0,oi(O.codepage=t.codepage||1252)),O.biff<5||q.BIFFVer==0&&q.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:e.l-ce,name:d};i[De.pos]=De,O.snames.push(d)}else d=(i[ge]||{name:""}).name;q.dt==32&&(s["!type"]="chart"),q.dt==64&&(s["!type"]="macro"),W=[],Y=[],O.arrayf=k=[],Z=[],re=[],ne=!1,C={Hidden:(i[ge]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[q.r]||[])[q.c]:s[ir({c:q.c,r:q.r})])&&++q.c,w={ixfe:q.ixfe,XF:S[q.ixfe]||{},v:q.val,t:"n"},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t);break;case 5:case 517:w={ixfe:q.ixfe,XF:S[q.ixfe],v:q.val,t:q.t},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t);break;case 638:w={ixfe:q.ixfe,XF:S[q.ixfe],v:q.rknum,t:"n"},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t);break;case 189:for(var Be=q.c;Be<=q.C;++Be){var Se=q.rkrec[Be-q.c][0];w={ixfe:Se,XF:S[Se],v:q.rkrec[Be-q.c][1],t:"n"},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:Be,r:q.r},w,t)}break;case 6:case 518:case 1030:{if(q.val=="String"){l=q;break}if(w=pp(q.val,q.cell.ixfe,q.tt),w.XF=S[w.ixfe],t.cellFormula){var Fe=q.formula;if(Fe&&Fe[0]&&Fe[0][0]&&Fe[0][0][0]=="PtgExp"){var ze=Fe[0][0][1][0],Ee=Fe[0][0][1][1],He=ir({r:ze,c:Ee});N[He]?w.f=""+ba(q.formula,o,q.cell,U,O):w.F=((t.dense?(s[ze]||[])[Ee]:s[He])||{}).F}else w.f=""+ba(q.formula,o,q.cell,U,O)}R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A(q.cell,w,t),l=q}break;case 7:case 519:if(l)l.val=q,w=pp(q,l.cell.ixfe,"s"),w.XF=S[w.ixfe],t.cellFormula&&(w.f=""+ba(l.formula,o,l.cell,U,O)),R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(q);var Nt=ir(q[0].s);if(x=t.dense?(s[q[0].s.r]||[])[q[0].s.c]:s[Nt],t.cellFormula&&x){if(!l||!Nt||!x)break;x.f=""+ba(q[1],o,q[0],U,O),x.F=br(q[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;N[ir(l.cell)]=q[0],x=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[ir(l.cell)],(x||{}).f=""+ba(q[0],o,p,U,O)}}break;case 253:w=pp(u[q.isst].t,q.ixfe,"s"),u[q.isst].h&&(w.h=u[q.isst].h),w.XF=S[w.ixfe],R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:q.ixfe,XF:S[q.ixfe],t:"z"},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t));break;case 190:if(t.sheetStubs)for(var Ke=q.c;Ke<=q.C;++Ke){var kt=q.ixfe[Ke-q.c];w={ixfe:kt,XF:S[kt],t:"z"},R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:Ke,r:q.r},w,t)}break;case 214:case 516:case 4:w=pp(q.val,q.ixfe,"s"),w.XF=S[w.ixfe],R>0&&(w.z=Q[w.ixfe>>8&63]),vi(w,t,r.opts.Date1904),A({c:q.c,r:q.r},w,t);break;case 0:case 512:K===1&&(o=q);break;case 252:u=q;break;case 1054:if(O.biff==4){Q[R++]=q[1];for(var ft=0;ft<R+163&&cr[ft]!=q[1];++ft);ft>=163&&Hl(q[1],R+163)}else Hl(q[1],q[0]);break;case 30:{Q[R++]=q;for(var Qt=0;Qt<R+163&&cr[Qt]!=q;++Qt);Qt>=163&&Hl(q,R+163)}break;case 229:W=W.concat(q);break;case 93:Y[q.cmo[0]]=O.lastobj=q;break;case 438:O.lastobj.TxO=q;break;case 127:O.lastobj.ImData=q;break;case 440:for(b=q[0].s.r;b<=q[0].e.r;++b)for(y=q[0].s.c;y<=q[0].e.c;++y)x=t.dense?(s[b]||[])[y]:s[ir({c:y,r:b})],x&&(x.l=q[1]);break;case 2048:for(b=q[0].s.r;b<=q[0].e.r;++b)for(y=q[0].s.c;y<=q[0].e.c;++y)x=t.dense?(s[b]||[])[y]:s[ir({c:y,r:b})],x&&x.l&&(x.l.Tooltip=q[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;x=t.dense?(s[q[0].r]||[])[q[0].c]:s[ir(q[0])];var yt=Y[q[2]];x||(t.dense?(s[q[0].r]||(s[q[0].r]=[]),x=s[q[0].r][q[0].c]={t:"z"}):x=s[ir(q[0])]={t:"z"},o.e.r=Math.max(o.e.r,q[0].r),o.s.r=Math.min(o.s.r,q[0].r),o.e.c=Math.max(o.e.c,q[0].c),o.s.c=Math.min(o.s.c,q[0].c)),x.c||(x.c=[]),v={a:q[1],t:yt.TxO.t},x.c.push(v)}break;case 2173:Jde(S[q.ixfe],q.ext);break;case 125:{if(!O.cellStyles)break;for(;q.e>=q.s;)Z[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(q.flags&1)},ne||(ne=!0,Ek(q.w/256)),Lu(Z[q.e+1])}break;case 520:{var wt={};q.level!=null&&(re[q.r]=wt,wt.level=q.level),q.hidden&&(re[q.r]=wt,wt.hidden=!0),q.hpt&&(re[q.r]=wt,wt.hpt=q.hpt,wt.hpx=bf(q.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||vh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Me]]=q;break;case 161:s["!margins"]||vh(s["!margins"]={}),s["!margins"].header=q.header,s["!margins"].footer=q.footer;break;case 574:q.RTL&&(E.Views[0].RTL=!0);break;case 146:_=q;break;case 2198:F=q;break;case 140:P=q;break;case 442:d?C.CodeName=q||C.name:E.WBProps.CodeName=q||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+Me.toString(16)),e.l+=ce}return r.SheetNames=Oi(i).sort(function(vt,bt){return Number(vt)-Number(bt)}).map(function(vt){return i[vt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&ee.forEach(function(vt,bt){r.Sheets[r.SheetNames[bt]]["!autofilter"]=vt}),r.Strings=u,r.SSF=ha(cr),O.enc&&(r.Encryption=O.enc),F&&(r.Themes=F),r.Metadata={},P!==void 0&&(r.Metadata.Country=P),U.names.length>0&&(E.Names=U.names),r.Workbook=E,r}var RI={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Ape(e,t,r){var n=vr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=vI(n,Vle,RI.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=vr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=vI(o,Gle,RI.SI);for(var u in l)t[u]==null&&(t[u]=l[u])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(k$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function o8(e,t){t||(t={}),Pk(t),RF(),t.codepage&&uk(t.codepage);var r,n;if(e.FullPaths){if(vr.find(e,"/encryption"))throw new Error("File is password-protected");r=vr.find(e,"!CompObj"),n=vr.find(e,"/Workbook")||vr.find(e,"/Book")}else{switch(t.type){case"base64":e=ii(xs(e));break;case"binary":e=ii(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ca(e,0),n={content:e}}var s,i;if(r&&_pe(r),t.bookProps&&!t.bookSheets)s={};else{var o=xr?"buffer":"array";if(n&&n.content)s=Cpe(n.content,t);else if((i=vr.find(e,"PerfectOffice_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else if((i=vr.find(e,"NativeContent_MAIN"))&&i.content)s=xh.to_workbook(i.content,(t.type=o,t));else throw(i=vr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&vr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=mhe(e))}var l={};return e.FullPaths&&Ape(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var Lm={0:{f:d0e},1:{f:m0e},2:{f:k0e},3:{f:v0e},4:{f:x0e},5:{f:N0e},6:{f:E0e},7:{f:w0e},8:{f:P0e},9:{f:O0e},10:{f:C0e},11:{f:A0e},12:{f:g0e},13:{f:S0e},14:{f:b0e},15:{f:y0e},16:{f:r8},17:{f:T0e},18:{f:j0e},19:{f:wk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:spe},40:{},42:{},43:{f:Cde},44:{f:Tde},45:{f:Ade},46:{f:Pde},47:{f:Ode},48:{},49:{f:Ile},50:{},51:{f:Zde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:R$},62:{f:_0e},63:{f:ahe},64:{f:U0e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ea,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:B0e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:p0e},148:{f:h0e,p:16},151:{f:M0e},152:{},153:{f:npe},154:{},155:{},156:{f:rpe},157:{},158:{},159:{T:1,f:Gue},160:{T:-1},161:{T:1,f:uc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:I0e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Qde},336:{T:-1},337:{f:ehe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:P2},357:{},358:{},359:{},360:{T:1},361:{},362:{f:M$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:R0e},427:{f:F0e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:L0e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:f0e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:D0e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:P2},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:hhe},633:{T:1},634:{T:-1},635:{T:1,f:dhe},636:{T:-1},637:{f:Mle},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:V0e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:H0e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},F2={6:{f:M1},10:{f:Ro},12:{f:En},13:{f:En},14:{f:yn},15:{f:yn},16:{f:Na},17:{f:yn},18:{f:yn},19:{f:En},20:{f:NI},21:{f:NI},23:{f:M$},24:{f:SI},25:{f:yn},26:{},27:{},28:{f:cue},29:{},34:{f:yn},35:{f:kI},38:{f:Na},39:{f:Na},40:{f:Na},41:{f:Na},42:{f:yn},43:{f:yn},47:{f:fde},49:{f:zce},51:{f:En},60:{},61:{f:Uce},64:{f:yn},65:{f:qce},66:{f:En},77:{},80:{},81:{},82:{},85:{f:En},89:{},90:{},91:{},92:{f:Ice},93:{f:due},94:{},95:{f:yn},96:{},97:{},99:{f:yn},125:{f:R$},128:{f:eue},129:{f:Dce},130:{f:En},131:{f:yn},132:{f:yn},133:{f:Mce},134:{},140:{f:xue},141:{f:En},144:{},146:{f:vue},151:{},152:{},153:{},154:{},155:{},156:{f:En},157:{},158:{},160:{f:kue},161:{f:wue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Xce},190:{f:Jce},193:{f:Ro},197:{},198:{},199:{},200:{},201:{},202:{f:yn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:En},220:{},221:{f:yn},222:{},224:{f:Zce},225:{f:Pce},226:{f:Ro},227:{},229:{f:uue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Rce},253:{f:Wce},255:{f:Fce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:C$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:yn},353:{f:Ro},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:rue},431:{f:yn},432:{},433:{},434:{},437:{},438:{f:pue},439:{f:yn},440:{f:mue},441:{},442:{f:Rf},443:{},444:{f:En},445:{},446:{},448:{f:Ro},449:{f:Bce,r:2},450:{f:Ro},512:{f:wI},513:{f:Nue},515:{f:tue},516:{f:Kce},517:{f:jI},519:{f:Sue},520:{f:$ce},523:{},545:{f:_I},549:{f:bI},566:{},574:{f:Hce},638:{f:Yce},659:{},1048:{},1054:{f:Vce},1084:{},1212:{f:iue},2048:{f:gue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:dp},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ro},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:bue,r:12},2173:{f:Xde,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:yn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:sue,r:12},2197:{},2198:{f:zde,r:12},2199:{},2200:{},2201:{},2202:{f:oue,r:12},2203:{f:Ro},2204:{},2205:{},2206:{},2207:{},2211:{f:Lce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:En},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:jue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:yue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:wI},1:{},2:{f:Cue},3:{f:Tue},4:{f:Eue},5:{f:jI},7:{f:Aue},8:{},9:{f:dp},11:{},22:{f:En},30:{f:Gce},31:{},32:{},33:{f:_I},36:{},37:{f:bI},50:{f:Oue},62:{},52:{},67:{},68:{f:En},69:{},86:{},126:{},127:{f:_ue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Pue},223:{},234:{},354:{},421:{},518:{f:M1},521:{f:dp},536:{f:SI},547:{f:kI},561:{},579:{},1030:{f:M1},1033:{f:dp},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Js(e,t,r,n){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&g$(r)&&e.push(r)}}function FI(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,u=tle(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,p=0,m=0,x={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<u.length;++o){var y=u[o].trim(),b=y.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(b!="<td"&&b!="<th")){var N=y.split(/<\/t[dh]>/i);for(l=0;l<N.length;++l){var k=N[l].trim();if(k.match(/<t[dh]/i)){for(var w=k,P=0;w.charAt(0)=="<"&&(P=w.indexOf(">"))>-1;)w=w.slice(P+1);for(var S=0;S<v.length;++S){var _=v[S];_.s.c==f&&_.s.r<d&&d<=_.e.r&&(f=_.e.c+1,S=-1)}var E=Zt(k.slice(0,k.indexOf(">")));m=E.colspan?+E.colspan:1,((p=+E.rowspan)>1||m>1)&&v.push({s:{r:d,c:f},e:{r:d+(p||1)-1,c:f+m-1}});var C=E.t||E["data-t"]||"";if(!w.length){f+=m;continue}if(w=n$(w),x.s.r>d&&(x.s.r=d),x.e.r<d&&(x.e.r=d),x.s.c>f&&(x.s.c=f),x.e.c<f&&(x.e.c=f),!w.length){f+=m;continue}var M={t:"s",v:w};r.raw||!w.trim().length||C=="s"||(w==="TRUE"?M={t:"b",v:!0}:w==="FALSE"?M={t:"b",v:!1}:isNaN(di(w))?isNaN($u(w).getDate())||(M={t:"d",v:ea(w)},r.cellDates||(M={t:"n",v:Ua(M.v)}),M.z=r.dateNF||cr[14]):M={t:"n",v:di(w)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=M):n[ir({r:d,c:f})]=M,f+=m}}}}return n["!ref"]=br(x),v.length&&(n["!merges"]=v),n}function Ope(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,u=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,u=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var f=ir({r,c:o}),p=n.dense?(e[r]||[])[o]:e[f],m=p&&p.v!=null&&(p.h||gk(p.w||(po(p),p.w)||""))||"",x={};l>1&&(x.rowspan=l),u>1&&(x.colspan=u),n.editable?m='<span contenteditable="true">'+m+"</span>":p&&(x["data-t"]=p&&p.t||"z",p.v!=null&&(x["data-v"]=p.v),p.z!=null&&(x["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+p.l.Target+'">'+m+"</a>")),x.id=(n.id||"sjs")+"-"+f,i.push(xle("td",m,x))}}var v="<tr>";return v+i.join("")+"</tr>"}var Ppe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ipe="</body></html>";function Dpe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ol(FI(r[0],t),t);var n=Dk();return r.forEach(function(s,i){Mk(n,FI(s,t),"Sheet"+(i+1))}),n}function Mpe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Rpe(e,t){var r=t||{},n=r.header!=null?r.header:Ppe,s=r.footer!=null?r.footer:Ipe,i=[n],o=td(e["!ref"]);r.dense=Array.isArray(e),i.push(Mpe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Ope(e,o,l,r));return i.push("</table>"+s),i.join("")}function l8(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?La(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=td(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),s==-1&&(d.e.r=s=f.e.r+1)}var p=[],m=0,x=e["!rows"]||(e["!rows"]=[]),v=0,y=0,b=0,N=0,k=0,w=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&y<u;++v){var P=l[v];if($I(P)){if(n.display)continue;x[y]={hidden:!0}}var S=P.children;for(b=N=0;b<S.length;++b){var _=S[b];if(!(n.display&&$I(_))){var E=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):n$(_.innerHTML),C=_.getAttribute("data-z")||_.getAttribute("z");for(m=0;m<p.length;++m){var M=p[m];M.s.c==N+i&&M.s.r<y+s&&y+s<=M.e.r&&(N=M.e.c+1-i,m=-1)}w=+_.getAttribute("colspan")||1,((k=+_.getAttribute("rowspan")||1)>1||w>1)&&p.push({s:{r:y+s,c:N+i},e:{r:y+s+(k||1)-1,c:N+i+(w||1)-1}});var D={t:"s",v:E},A=_.getAttribute("data-t")||_.getAttribute("t")||"";E!=null&&(E.length==0?D.t=A||"z":n.raw||E.trim().length==0||A=="s"||(E==="TRUE"?D={t:"b",v:!0}:E==="FALSE"?D={t:"b",v:!1}:isNaN(di(E))?isNaN($u(E).getDate())||(D={t:"d",v:ea(E)},n.cellDates||(D={t:"n",v:Ua(D.v)}),D.z=n.dateNF||cr[14]):D={t:"n",v:di(E)})),D.z===void 0&&C!=null&&(D.z=C);var O="",F=_.getElementsByTagName("A");if(F&&F.length)for(var W=0;W<F.length&&!(F[W].hasAttribute("href")&&(O=F[W].getAttribute("href"),O.charAt(0)!="#"));++W);O&&O.charAt(0)!="#"&&(D.l={Target:O}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][N+i]=D):e[ir({c:N+i,r:y+s})]=D,d.e.c<N+i&&(d.e.c=N+i),N+=w}}++y}return p.length&&(e["!merges"]=(e["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,y-1+s),e["!ref"]=br(d),y>=u&&(e["!fullref"]=br((d.e.r=l.length-v+y-1+s,d))),e}function c8(e,t){var r=t||{},n=r.dense?[]:{};return l8(n,e,t)}function Fpe(e,t){return ol(c8(e,t),t)}function $I(e){var t="",r=$pe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function $pe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Lpe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kr(t.replace(/<[^>]*>/g,""));return[r]}var LI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function u8(e,t){var r=t||{},n=xk(e),s=[],i,o,l={name:""},u="",d=0,f,p,m={},x=[],v=r.dense?[]:{},y,b,N={value:""},k="",w=0,P=[],S=-1,_=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,M={},D=[],A={},O=0,F=0,W=[],Y=1,Z=1,re=[],ne={Names:[]},U={},oe=["",""],K=[],R={},Q="",ee=0,se=!1,xe=!1,ge=0;for(xf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=xf.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=br(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=br(E)),D.length&&(v["!merges"]=D),W.length&&(v["!rows"]=W),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),x.push(f.name),m[f.name]=v,xe=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=Zt(y[0],!1),S=_=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},D=[],W=[],xe=!0);break;case"table-row-group":y[1]==="/"?--C:++C;break;case"table-row":case"":if(y[1]==="/"){S+=Y,Y=1;break}if(p=Zt(y[0],!1),p.?S=p.-1:S==-1&&(S=0),Y=+p["number-rows-repeated"]||1,Y<10)for(ge=0;ge<Y;++ge)C>0&&(W[S+ge]={level:C});_=-1;break;case"covered-table-cell":y[1]!=="/"&&++_,r.sheetStubs&&(r.dense?(v[S]||(v[S]=[]),v[S][_]={t:"z"}):v[ir({r:S,c:_})]={t:"z"}),k="",P=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++_,N=Zt(y[0],!1),Z=parseInt(N["number-columns-repeated"]||"1",10),b={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(b.f=II(kr(N.formula))),(N.||N["value-type"])=="string"&&(b.t="s",b.v=kr(N["string-value"]||""),r.dense?(v[S]||(v[S]=[]),v[S][_]=b):v[ir({r:S,c:_})]=b),_+=Z-1;else if(y[1]!=="/"){++_,k="",w=0,P=[],Z=1;var Me=Y?S+Y-1:S;if(_>E.e.c&&(E.e.c=_),_<E.s.c&&(E.s.c=_),S<E.s.r&&(E.s.r=S),Me>E.e.r&&(E.e.r=Me),N=Zt(y[0],!1),K=[],R={},b={t:N.||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=kr(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(O=parseInt(N["number-matrix-rows-spanned"],10)||0,F=parseInt(N["number-matrix-columns-spanned"],10)||0,A={s:{r:S,c:_},e:{r:S+O-1,c:_+F-1}},b.F=br(A),re.push([A,b.F])),N.formula)b.f=II(N.formula);else for(ge=0;ge<re.length;++ge)S>=re[ge][0].s.r&&S<=re[ge][0].e.r&&_>=re[ge][0].s.c&&_<=re[ge][0].e.c&&(b.F=re[ge][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(O=parseInt(N["number-rows-spanned"],10)||0,F=parseInt(N["number-columns-spanned"],10)||0,A={s:{r:S,c:_},e:{r:S+O-1,c:_+F-1}},D.push(A)),N["number-columns-repeated"]&&(Z=parseInt(N["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=an(N["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(N.value);break;case"percentage":b.t="n",b.v=parseFloat(N.value);break;case"currency":b.t="n",b.v=parseFloat(N.value);break;case"date":b.t="d",b.v=ea(N["date-value"]),r.cellDates||(b.t="n",b.v=Ua(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=Qoe(N["time-value"])/86400,r.cellDates&&(b.t="d",b.v=Dg(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(N.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",N["string-value"]!=null&&(k=kr(N["string-value"]),P=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(se=!1,b.t==="s"&&(b.v=k||"",P.length&&(b.R=P),se=w==0),U.Target&&(b.l=U),K.length>0&&(b.c=K,K=[]),k&&r.cellText!==!1&&(b.w=k),se&&(b.t="z",delete b.v),(!se||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ce=0;ce<Y;++ce){if(Z=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(v[S+ce]||(v[S+ce]=[]),v[S+ce][_]=ce==0?b:ha(b);--Z>0;)v[S+ce][_+Z]=ha(b);else for(v[ir({r:S+ce,c:_})]=b;--Z>0;)v[ir({r:S+ce,c:_+Z})]=ha(b);E.e.c<=_&&(E.e.c=_)}Z=parseInt(N["number-columns-repeated"]||"1",10),_+=Z-1,Z=0,b={},k="",P=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;R.t=k,P.length&&(R.R=P),R.a=Q,K.push(R)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);Q="",ee=0,k="",w=0,P=[];break;case"creator":y[1]==="/"?Q=n.slice(ee,y.index):ee=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",w=0,P=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(M[l.name]=u,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(u="",l=Zt(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Zt(y[0],!1),u+=LI[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Zt(y[0],!1),u+=LI[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=n.slice(d,y.index);break}else d=y.index+y[0].length;break;case"named-range":o=Zt(y[0],!1),oe=R1(o["cell-range-address"]);var me={Name:o.name,Ref:oe[0]+"!"+oe[1]};xe&&(me.Sheet=x.length),ne.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!N||!N["string-value"])){var Oe=Lpe(n.slice(w,y.index));k=(k.length>0?k+`
`:"")+Oe[0]}else Zt(y[0],!1),w=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{oe=R1(Zt(y[0])["target-range-address"]),m[oe[0]]["!autofilter"]={ref:oe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(U=Zt(y[0],!1),!U.href)break;U.Target=kr(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(oe=R1(U.Target.slice(1)),U.Target="#"+oe[0]+"!"+oe[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var q={Sheets:m,SheetNames:x,Workbook:ne};return r.bookSheets&&delete q.Sheets,q}function BI(e,t){t=t||{},As(e,"META-INF/manifest.xml")&&tce(_n(e,"META-INF/manifest.xml"),t);var r=fs(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=u8(Yr(r),t);return As(e,"meta.xml")&&(n.Props=N$(_n(e,"meta.xml"))),n}function UI(e,t){return u8(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ak(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function $2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Yr(lc(e))}function L2(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function HI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Bpe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function wf(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function zn(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Sa(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=wf(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var u=r[0];e[r[0]++]>=128;);l=e.slice(u,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=wf(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ok(e,t){return e?.map(function(r){return t(r.data)})||[]}function Upe(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=wf(e,n),i=Sa(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:zn(i[1][0].data),messages:[]};i[2].forEach(function(l){var u=Sa(l.data),d=zn(u[3][0].data);o.messages.push({meta:u,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=zn(i[3][0].data)>>>0>0),r.push(o)}return r}function Hpe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=wf(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var u=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,u=(t[r[0]++]&224)<<3,u|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(u=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(u=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[L2(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(d>=u)for(s.push(s[0].slice(-u)),d-=u;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-u,-u+d))}}var f=L2(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function qpe(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Hpe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return L2(t)}function zpe(e,t,r,n){var s=Ak(e),i=s.getUint32(4,!0),o=(n>1?12:8)+HI(i&(n>1?3470:398))*4,l=-1,u=-1,d=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=HI(i&(n>1?12288:4096))*4,i&16&&(u=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var p;switch(e[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:t[u]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else if(u>-1)p={t:"s",v:t[u]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return p}function Wpe(e,t,r){var n=Ak(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,u=NaN,d=NaN,f=new Date(2001,0,1);s&1&&(u=Bpe(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var p;switch(e[1]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:t[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:p={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return p}function Kpe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return zpe(e,t,r,e[0]);case 5:return Wpe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=Sa(e);return wf(t[1][0].data)}function qI(e,t){var r=Sa(t.data),n=zn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Sa(o.data),u=zn(l[1][0].data)>>>0;switch(n){case 1:i[u]=$2(l[3][0].data);break;case 8:{var d=e[Qo(l[9][0].data)][0],f=Sa(d.data),p=e[Qo(f[1][0].data)][0],m=zn(p.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var x=Sa(p.data);i[u]=x[3].map(function(v){return $2(v.data)}).join("")}break}}),i}function Vpe(e,t){var r,n,s,i,o,l,u,d,f,p,m,x,v,y,b=Sa(e),N=zn(b[1][0].data)>>>0,k=zn(b[2][0].data)>>>0,w=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&zn(b[8][0].data)>0||!1,P,S;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)P=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(u=b[6])==null?void 0:u[0])==null?void 0:d.data;else if((p=(f=b[4])==null?void 0:f[0])!=null&&p.data&&t!=1)P=(x=(m=b[4])==null?void 0:m[0])==null?void 0:x.data,S=(y=(v=b[3])==null?void 0:v[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var _=w?4:1,E=Ak(P),C=[],M=0;M<P.length/2;++M){var D=E.getUint16(M*2,!0);D<65535&&C.push([M,D])}if(C.length!=k)throw"Expected ".concat(k," cells, found ").concat(C.length);var A=[];for(M=0;M<C.length-1;++M)A[C[M][0]]=S.subarray(C[M][1]*_,C[M+1][1]*_);return C.length>=1&&(A[C[C.length-1][0]]=S.subarray(C[C.length-1][1]*_)),{R:N,cells:A}}function Gpe(e,t){var r,n=Sa(t.data),s=(r=n?.[7])!=null&&r[0]?zn(n[7][0].data)>>>0>0?1:0:-1,i=Ok(n[5],function(o){return Vpe(o,s)});return{nrows:zn(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(u,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=u}),o},[])}}function Ype(e,t,r){var n,s=Sa(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(zn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(zn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=br(i);var o=Sa(s[4][0].data),l=qI(e,e[Qo(o[4][0].data)][0]),u=(n=o[17])!=null&&n[0]?qI(e,e[Qo(o[17][0].data)][0]):[],d=Sa(o[3][0].data),f=0;d[1].forEach(function(p){var m=Sa(p.data),x=e[Qo(m[2][0].data)][0],v=zn(x.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var y=Gpe(e,x);y.data.forEach(function(b,N){b.forEach(function(k,w){var P=ir({r:f+N,c:w}),S=Kpe(k,l,u);S&&(r[P]=S)})}),f+=y.nrows})}function Xpe(e,t){var r=Sa(t.data),n={"!ref":"A1"},s=e[Qo(r[2][0].data)],i=zn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Ype(e,s[0],n),n}function Jpe(e,t){var r,n=Sa(t.data),s={name:(r=n[1])!=null&&r[0]?$2(n[1][0].data):"",sheets:[]},i=Ok(n[2],Qo);return i.forEach(function(o){e[o].forEach(function(l){var u=zn(l.meta[1][0].data);u==6e3&&s.sheets.push(Xpe(e,l))})}),s}function Qpe(e,t){var r=Dk(),n=Sa(t.data),s=Ok(n[1],Qo);if(s.forEach(function(i){e[i].forEach(function(o){var l=zn(o.meta[1][0].data);if(l==2){var u=Jpe(e,o);u.sheets.forEach(function(d,f){Mk(r,d,f==0?u.name:u.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function $1(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var d;try{d=qpe(u.content)}catch(p){return console.log("?? "+u.content.length+" "+(p.message||p))}var f;try{f=Upe(d)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,o.push(p.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&zn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(u){i[u].forEach(function(d){var f=zn(d.meta[1][0].data)>>>0;if(f==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Qpe(i,l)}function Zpe(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function Pk(e){Zpe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function eme(e){return au.WS.indexOf(e)>-1?"sheet":e==au.CS?"chart":e==au.DS?"dialog":e==au.MS?"macro":e&&e.length?e:"sheet"}function tme(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,eme(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function rme(e,t,r,n,s,i,o,l,u,d,f,p){try{i[n]=mh(fs(e,r,!0),t);var m=_n(e,t),x;switch(l){case"sheet":x=lpe(m,t,s,u,i[n],d,f,p);break;case"chart":if(x=cpe(m,t,s,u,i[n],d,f,p),!x||!x["!drawel"])break;var v=eh(x["!drawel"].Target,t),y=I2(v),b=ohe(fs(e,v,!0),mh(fs(e,y,!0),v)),N=eh(b,v),k=I2(N);x=W0e(fs(e,N,!0),N,u,mh(fs(e,k,!0),N),d,x);break;case"macro":x=upe(m,t,s,u,i[n],d,f,p);break;case"dialog":x=dpe(m,t,s,u,i[n],d,f,p);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=x;var w=[];i&&i[n]&&Oi(i[n]).forEach(function(P){var S="";if(i[n][P].Type==au.CMNT){S=eh(i[n][P].Target,t);var _=mpe(_n(e,S,!0),S,u);if(!_||!_.length)return;TI(x,_,!1)}i[n][P].Type==au.TCMNT&&(S=eh(i[n][P].Target,t),w=w.concat(che(_n(e,S,!0),u)))}),w&&w.length&&TI(x,w,!0,u.people||[])}catch(P){if(u.WTF)throw P}}function Es(e){return e.charAt(0)=="/"?e.slice(1):e}function nme(e,t){if(GF(),t=t||{},Pk(t),As(e,"META-INF/manifest.xml")||As(e,"objectdata.xml"))return BI(e,t);if(As(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof $1<"u"){if(e.FileIndex)return $1(e);var r=vr.utils.cfb_new();return tI(e).forEach(function(W){ale(r,W,nle(e,W))}),$1(r)}throw new Error("Unsupported NUMBERS file")}if(!As(e,"[Content_Types].xml"))throw As(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):As(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=tI(e),s=Zle(fs(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",_n(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!_n(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var u={},d={};if(!t.bookSheets&&!t.bookProps){if(yh=[],s.sst)try{yh=ppe(_n(e,Es(s.sst)),s.sst,t)}catch(W){if(t.WTF)throw W}t.cellStyles&&s.themes.length&&(u=fpe(fs(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=hpe(_n(e,Es(s.style)),s.style,u,t))}s.links.map(function(W){try{var Y=mh(fs(e,I2(Es(W))),W);return xpe(_n(e,Es(W)),Y,W,t)}catch{}});var f=ope(_n(e,Es(s.workbooks[0])),s.workbooks[0],t),p={},m="";s.coreprops.length&&(m=_n(e,Es(s.coreprops[0]),!0),m&&(p=N$(m)),s.extprops.length!==0&&(m=_n(e,Es(s.extprops[0]),!0),m&&ace(m,p,t)));var x={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=fs(e,Es(s.custprops[0]),!0),m&&(x=ice(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(Y){return Y.name}):p.Worksheets&&p.SheetNames.length>0&&(o=p.SheetNames),t.bookProps&&(v.Props=p,v.Custprops=x),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var y={};t.bookDeps&&s.calcchain&&(y=gpe(_n(e,Es(s.calcchain)),s.calcchain));var b=0,N={},k,w;{var P=f.Sheets;p.Worksheets=P.length,p.SheetNames=[];for(var S=0;S!=P.length;++S)p.SheetNames[S]=P[S].name}var _=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");As(e,C)||(C="xl/_rels/workbook."+_+".rels");var M=mh(fs(e,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=ype(_n(e,Es(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=uhe(_n(e,Es(s.people[0])),t)),M&&(M=tme(M,f.Sheets));var D=_n(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=p.Worksheets;++b){var A="sheet";if(M&&M[b]?(k="xl/"+M[b][1].replace(/[\/]?xl\//,""),As(e,k)||(k=M[b][1]),As(e,k)||(k=C.replace(/_rels\/.*$/,"")+M[b][1]),A=M[b][2]):(k="xl/worksheets/sheet"+(b+1-D)+"."+_,k=k.replace(/sheet0\./,"sheet.")),w=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(p.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,F=0;F!=t.sheets.length;++F)typeof t.sheets[F]=="number"&&t.sheets[F]==b&&(O=1),typeof t.sheets[F]=="string"&&t.sheets[F].toLowerCase()==p.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}rme(e,k,w,p.SheetNames[b],b,N,o,A,t,f,u,d)}return v={Directory:s,Workbook:f,Props:p,Custprops:x,Deps:y,Sheets:o,SheetNames:p.SheetNames,Strings:yh,Styles:d,Themes:u,SSF:ha(cr)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(W,Y){W=W.replace(/^Root Entry[\/]/,""),v.keys.push(W),v.files[W]=e.FileIndex[Y]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=_n(e,Es(s.vba[0]),!0):s.defaults&&s.defaults.bin===phe&&(v.vbaraw=_n(e,"xl/vbaProject.bin",!0))),v}function ame(e,t){var r=t||{},n="Workbook",s=vr.find(e,n);try{if(n="/!DataSpaces/Version",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Xue(s.content),n="/!DataSpaces/DataSpaceMap",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Que(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Zue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);tde(s.content)}catch{}if(n="/EncryptionInfo",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=rde(s.content);if(n="/EncryptedPackage",s=vr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Ik(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=xs(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function sme(e,t){return vr.find(e,"EncryptedPackage")?ame(e,t):o8(e,t)}function ime(e,t){var r,n=e,s=t||{};return s.type||(s.type=xr&&Buffer.isBuffer(e)?"buffer":"base64"),r=e$(n,s),nme(r,s)}function d8(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return R2(e.slice(r),t);default:break e}return yf.to_workbook(e,t)}function ome(e,t){var r="",n=Ik(e,t);switch(t.type){case"base64":r=xs(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=ec(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Yr(r)),t.type="binary",d8(r,t)}function lme(e,t){var r=e;return t.type=="base64"&&(r=xs(r)),r=pf.utils.decode(1200,r.slice(2),"str"),t.type="binary",d8(r,t)}function cme(e){return e.match(/[^\x00-\x7F]/)?th(e):e}function L1(e,t,r,n){return n?(r.type="string",yf.to_workbook(e,r)):yf.to_workbook(t,r)}function B2(e,t){RF();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return B2(new Uint8Array(e),(r=ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),du={},r.dateNF&&(du.dateNF=r.dateNF),r.type||(r.type=xr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=xr?"buffer":"binary",n=Xoe(e),typeof Uint8Array<"u"&&!xr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=cme(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=ha(r),r.type="array",B2(dk(n),r)}switch((s=Ik(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return sme(vr.read(n,r),r);break;case 9:if(s[1]<=8)return o8(n,r);break;case 60:return R2(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Fue(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Mue.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?ime(n,r):L1(e,n,r,i);case 239:return s[3]===60?R2(n,r):L1(e,n,r,i);case 255:if(s[1]===254)return lme(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return xh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return xh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return EI.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return pde.to_workbook(n,r);break;case 10:case 13:case 32:return ome(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Iue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?EI.to_workbook(n,r):L1(e,n,r,i)}function ume(e,t,r,n,s,i,o,l){var u=fa(r),d=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),p=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var x=t.s.c;x<=t.e.c;++x){var v=o?e[r][x]:e[n[x]+u];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[x]!=null&&(m[i[x]]=d);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[x]!=null){if(y==null)if(v.t=="e"&&y===null)m[i[x]]=null;else if(d!==void 0)m[i[x]]=d;else if(f&&y===null)m[i[x]]=null;else continue;else m[i[x]]=f&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?y:po(v,y,l);y!=null&&(p=!1)}}return{row:m,isempty:p}}function U2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":u=mn(f);break;case"number":u=mn(e["!ref"]),u.s.r=f;break;default:u=f}n>0&&(s=0);var p=fa(u.s.r),m=[],x=[],v=0,y=0,b=Array.isArray(e),N=u.s.r,k=0,w={};b&&!e[N]&&(e[N]=[]);var P=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(k=u.s.c;k<=u.e.c;++k)if(!(P[k]||{}).hidden)switch(m[k]=qn(k),r=b?e[N][k]:e[m[k]+p],n){case 1:i[k]=k-u.s.c;break;case 2:i[k]=m[k];break;case 3:i[k]=d.header[k-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=po(r,null,d),y=w[o]||0,!y)w[o]=1;else{do l=o+"_"+y++;while(w[l]);w[o]=y,w[l]=1}i[k]=l}for(N=u.s.r+s;N<=u.e.r;++N)if(!(S[N]||{}).hidden){var _=ume(e,u,N,m,n,i,b,d);(_.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(x[v++]=_.row)}return x.length=v,x}var zI=/"/g;function dme(e,t,r,n,s,i,o,l){for(var u=!0,d=[],f="",p=fa(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var x=l.dense?(e[r]||[])[m]:e[n[m]+p];if(x==null)f="";else if(x.v!=null){u=!1,f=""+(l.rawNumbers&&x.t=="n"?x.v:po(x,null,l));for(var v=0,y=0;v!==f.length;++v)if((y=f.charCodeAt(v))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(zI,'""')+'"';break}f=="ID"&&(f='"ID"')}else x.f!=null&&!x.F?(u=!1,f="="+x.f,f.indexOf(",")>=0&&(f='"'+f.replace(zI,'""')+'"')):f="";d.push(f)}return l.blankrows===!1&&u?null:d.join(o)}function h8(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=mn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],x=n.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(m[v]||{}).hidden||(p[v]=qn(v));for(var y=0,b=s.s.r;b<=s.e.r;++b)(x[b]||{}).hidden||(f=dme(e,s,b,p,o,u,i,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete n.dense,r.join("")}function hme(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=h8(e,t);return r}function fme(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=mn(e["!ref"]),i="",o=[],l,u=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=qn(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=fa(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}u[u.length]=t+"="+n}return u}function f8(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?La(n.origin):n.origin;o=u.r,l=u.c}var d,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var p=mn(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(o=p.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var m=n.header||[],x=0;t.forEach(function(y,b){Oi(y).forEach(function(N){(x=m.indexOf(N))==-1&&(m[x=m.length]=N);var k=y[N],w="z",P="",S=ir({c:l+x,r:o+b+s});d=jf(i,S),k&&typeof k=="object"&&!(k instanceof Date)?i[S]=k:(typeof k=="number"?w="n":typeof k=="boolean"?w="b":typeof k=="string"?w="s":k instanceof Date?(w="d",n.cellDates||(w="n",k=Ua(k)),P=n.dateNF||cr[14]):k===null&&n.nullError&&(w="e",k=0),d?(d.t=w,d.v=k,delete d.w,delete d.R,P&&(d.z=P)):i[S]=d={t:w,v:k},P&&(d.z=P))})}),f.e.c=Math.max(f.e.c,l+m.length-1);var v=fa(o);if(s)for(x=0;x<m.length;++x)i[qn(x+l)+v]={t:"s",v:m[x]};return i["!ref"]=br(f),i}function pme(e,t){return f8(null,e,t)}function jf(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=La(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?jf(e,ir(t)):jf(e,ir({r:t,c:r||0}))}function mme(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Dk(){return{SheetNames:[],Sheets:{}}}function Mk(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(Z0e(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function gme(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=mme(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function xme(e,t){return e.z=t,e}function p8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function yme(e,t,r){return p8(e,"#"+t,r)}function vme(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function bme(e,t,r,n){for(var s=typeof t!="string"?t:mn(t),i=typeof t=="string"?t:br(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var u=jf(e,o,l);u.t="n",u.F=i,delete u.v,o==s.s.r&&l==s.s.c&&(u.f=r,n&&(u.D=!0))}return e}var wme={encode_col:qn,encode_row:fa,encode_cell:ir,encode_range:br,decode_col:bk,decode_row:vk,split_cell:Ple,decode_cell:La,decode_range:td,format_cell:po,sheet_add_aoa:y$,sheet_add_json:f8,sheet_add_dom:l8,aoa_to_sheet:rd,json_to_sheet:pme,table_to_sheet:c8,table_to_book:Fpe,sheet_to_csv:h8,sheet_to_txt:hme,sheet_to_json:U2,sheet_to_html:Rpe,sheet_to_formulae:fme,sheet_to_row_object_array:U2,sheet_get_cell:jf,book_new:Dk,book_append_sheet:Mk,book_set_sheet_visibility:gme,cell_set_number_format:xme,cell_set_hyperlink:p8,cell_set_internal_link:yme,cell_add_comment:vme,sheet_set_array_formula:bme,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function jme({context:e,selectedStoreId:t}){const[r,n]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState(!1),[u,d]=L.useState(new Date().toISOString().split("T")[0]),[f,p]=L.useState("daily"),[m,x]=L.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[v,y]=L.useState(new Date().getDay()),b=t||e.user?.storeId||null;L.useEffect(()=>{N()},[b]);const N=async()=>{try{i(!0);let A=(await Qm(e.user?.accessToken||"")).data||[];A=A.filter(O=>!!O&&!!O.storeId),b&&(A=A.filter(O=>O.storeId===b)),A.sort((O,F)=>new Date(F.date).getTime()-new Date(O.date).getTime()),n(A)}catch(D){console.error("Error loading sales data:",D),Nr.error("Failed to load sales data")}finally{i(!1)}},k=D=>new Promise((A,O)=>{const F=new FileReader;F.onload=W=>{try{const Y=W.target?.result,Z=B2(Y,{type:"binary"}),re=Z.SheetNames[0],ne=Z.Sheets[re],U=wme.sheet_to_json(ne),oe=S(U);A(oe)}catch(Y){O(Y)}},F.onerror=()=>O(new Error("Failed to read file")),F.readAsBinaryString(D)}),w=D=>{const A=String(D.Item||""),O=Number(D["Total Quantity"]||D["Total Qua"]||0);if(A.toLowerCase().includes("mania")&&A.toLowerCase().includes("combo")||!O||O===0)return 0;if(A.toLowerCase().includes("burger")){let Z=1;const re=A.match(/(\d+)\s*(?:pcs|pieces|piece)/i);return re&&(Z=parseInt(re[1])),O*Z*2}const W=A.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(W){let Y=parseInt(W[1]);const Z=A.match(/pack of\s*(\d+)/i);return Z&&(Y*=parseInt(Z[1])),O*Y}return O*6},P=D=>{if(typeof D!="string")return"Other";const A=D.toLowerCase();return["drink","cola","campa","water","beverage"].some(O=>A.includes(O))?"Other":A.includes("kurkure")?A.includes("chicken")?"Chicken Kurkure Momos":A.includes("veg")?"Veg Kurkure Momos":"Other Kurkure Momos":A.includes("paneer")?"Paneer Momos":A.includes("corn")&&A.includes("cheese")?"Cheese Corn Momos":A.includes("chicken")&&A.includes("cheese")?"Chicken Cheese Momos":A.includes("chicken")?"Chicken Momos":A.includes("veg")?"Veg Momos":"Other"},S=D=>{const A={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return D.forEach(O=>{const F=w(O),W=P(O.Item||"");W in A&&(A[W]+=F)}),A},_=async D=>{const A=D.target.files?.[0];if(!A)return;if(!A.name.endsWith(".xlsx")&&!A.name.endsWith(".xls")&&!A.name.endsWith(".csv")){Nr.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}let O=u;const F=/_(\d{2})_(\d{2})_(\d{4})-\d{2}_\d{2}_\d{4}\./,W=A.name.match(F);if(W){const[,Y,Z,re]=W;O=`${re}-${Z}-${Y}`,console.log(` Extracted date from filename: ${A.name} -> ${O}`),d(O)}else console.warn(" Could not extract date from filename, using manually selected date:",u);if(!O){Nr.error("Please select a date or use a filename with date format: StoreName_DD_MM_YYYY-DD_MM_YYYY.xlsx");return}if(!b){Nr.error("Store ID not found");return}try{l(!0),Nr.info("Processing file...",{duration:2e3});const Y=await k(A);Nr.info("Uploading to server...",{duration:2e3});const Z=e.stores?.find(ne=>ne.id===b)?.name||"Unknown Store",re={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:O,storeId:b,storeName:Z,data:Y,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await ID(re,e.user?.accessToken||""),Nr.success(` Sales data uploaded for ${O}!`),await N(),D.target.value=""}catch(Y){console.error("Error uploading file:",Y),Nr.error(`Failed to process file: ${Y instanceof Error?Y.message:"Unknown error"}`)}finally{l(!1)}},E=async D=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await DD(D,e.user?.accessToken||""),Nr.success("Sales record deleted"),await N()}catch(A){console.error("Error deleting record:",A),Nr.error("Failed to delete record")}},C=D=>Object.values(D).reduce((A,O)=>A+O,0),M=D=>{const A=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return A[D%A.length]};return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(wp,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Ja,{value:u,onChange:d,max:new Date().toISOString().split("T")[0]}),a.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx(Kd,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),a.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:_,disabled:o,className:"hidden"})]})]})]}),a.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[a.jsxs("li",{children:["Must contain columns: ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",a.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),a.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),a.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(P7,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:["daily","weekly","monthly","yearly","custom"].map(D=>a.jsx("button",{onClick:()=>p(D),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===D?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:D.charAt(0).toUpperCase()+D.slice(1)},D))})]}),f==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Ja,{label:"From Date",value:m.from,onChange:D=>x({...m,from:D})}),a.jsx(Ja,{label:"To Date",value:m.to,onChange:D=>x({...m,to:D})})]})}),a.jsx(Bn,{width:"100%",height:500,children:a.jsxs(si,{data:(()=>{let D=[...r];if(f==="custom")D=D.filter(F=>F.date>=m.from&&F.date<=m.to);else{const F=new Date,W=new Date;f==="daily"?W.setDate(F.getDate()-5):f==="weekly"?W.setDate(F.getDate()-35):f==="monthly"?W.setMonth(F.getMonth()-5):f==="yearly"&&W.setFullYear(F.getFullYear()-5),D=D.filter(Y=>new Date(Y.date)>=W)}const A=new Map;return D.forEach(F=>{let W=F.date,Y=F.date;if(f==="weekly"){const re=new Date(F.date),ne=new Date(re.setDate(re.getDate()-re.getDay())),U=new Date(ne);U.setDate(U.getDate()+6),W=ne.toISOString().split("T")[0],Y=`${ne.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${U.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else f==="monthly"?(W=F.date.substring(0,7),Y=new Date(F.date).toLocaleDateString("en-US",{year:"numeric",month:"short"})):f==="yearly"?(W=F.date.substring(0,4),Y=W):f==="daily"&&(Y=new Date(F.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}));A.has(W)||A.set(W,{period:Y,"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0});const Z=A.get(W);Object.entries(F.data).forEach(([re,ne])=>{Z[re]+=ne})}),Array.from(A.values()).sort((F,W)=>{const Y=D.find(re=>{if(f==="weekly"){const ne=new Date(re.date),U=new Date(ne.setDate(ne.getDate()-ne.getDay()));return F.period.includes(U.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?F.period===new Date(re.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?F.period===re.date.substring(0,4):F.period===new Date(re.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||F.period,Z=D.find(re=>{if(f==="weekly"){const ne=new Date(re.date),U=new Date(ne.setDate(ne.getDate()-ne.getDay()));return W.period.includes(U.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}else return f==="monthly"?W.period===new Date(re.date).toLocaleDateString("en-US",{year:"numeric",month:"short"}):f==="yearly"?W.period===re.date.substring(0,4):W.period===new Date(re.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})?.date||W.period;return new Date(Y).getTime()-new Date(Z).getTime()}).slice(-5)})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(An,{dataKey:"period",tick:{fontSize:12},angle:-15,textAnchor:"end",height:80}),a.jsx(vn,{tick:{fontSize:12}}),a.jsx(Ur,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),a.jsx(da,{wrapperStyle:{paddingTop:"20px"},iconType:"rect"}),a.jsx(gr,{dataKey:"Chicken Momos",fill:"#ef4444",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Chicken Cheese Momos",fill:"#f97316",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Veg Momos",fill:"#22c55e",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Paneer Momos",fill:"#3b82f6",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Cheese Corn Momos",fill:"#eab308",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Chicken Kurkure Momos",fill:"#8b5cf6",radius:[8,8,0,0]}),a.jsx(gr,{dataKey:"Veg Kurkure Momos",fill:"#06b6d4",radius:[8,8,0,0]})]})}),a.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const D={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Cheese Corn Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let A=[...r];if(f==="custom")A=A.filter(W=>W.date>=m.from&&W.date<=m.to);else{const W=new Date,Y=new Date;f==="daily"?Y.setDate(W.getDate()-5):f==="weekly"?Y.setDate(W.getDate()-35):f==="monthly"?Y.setMonth(W.getMonth()-5):f==="yearly"&&Y.setFullYear(W.getFullYear()-5),A=A.filter(Z=>new Date(Z.date)>=Y)}A.forEach(W=>{Object.entries(W.data).forEach(([Y,Z])=>{D[Y]+=Z})});const O=Object.values(D).reduce((W,Y)=>W+Y,0),F=Object.entries(D).sort((W,Y)=>Y[1]-W[1])[0];return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:O.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),a.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:F?.[0]?.split(" ")[0]||"N/A"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[F?.[1]?.toLocaleString()||0," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:A.length>0?Math.round(O/A.length).toLocaleString():0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:A.length}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length>0&&(()=>{const D={0:{dayName:"Sunday",counts:{}},1:{dayName:"Monday",counts:{}},2:{dayName:"Tuesday",counts:{}},3:{dayName:"Wednesday",counts:{}},4:{dayName:"Thursday",counts:{}},5:{dayName:"Friday",counts:{}},6:{dayName:"Saturday",counts:{}}},A=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Cheese Corn Momos","Chicken Kurkure Momos","Veg Kurkure Momos"];Object.keys(D).forEach(Z=>{A.forEach(re=>{D[Z].counts[re]=[]})}),r.forEach(Z=>{const ne=new Date(Z.date).getDay().toString();Object.entries(Z.data).forEach(([U,oe])=>{D[ne].counts[U]&&D[ne].counts[U].push(oe)})});const O=Object.entries(D).map(([Z,re])=>{const ne={day:re.dayName,dayNum:parseInt(Z)};return A.forEach(U=>{const oe=re.counts[U],K=oe.length>0?Math.round(oe.reduce((R,Q)=>R+Q,0)/oe.length):0;ne[U]=K}),ne}),F=O.find(Z=>Z.dayNum===v),W=F?A.map((Z,re)=>({category:Z,average:F[Z],fill:M(re)})):[],Y=[{num:0,name:"Sun",fullName:"Sunday"},{num:1,name:"Mon",fullName:"Monday"},{num:2,name:"Tue",fullName:"Tuesday"},{num:3,name:"Wed",fullName:"Wednesday"},{num:4,name:"Thu",fullName:"Thursday"},{num:5,name:"Fri",fullName:"Friday"},{num:6,name:"Sat",fullName:"Saturday"}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[a.jsx(pn,{className:"w-7 h-7 text-indigo-600"}),"Weekly Pattern Analysis"]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Average momo sales by day of the week across all records"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:Y.map(Z=>a.jsx("button",{onClick:()=>y(Z.num),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${v===Z.num?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Z.name},Z.num))})]}),a.jsx(Bn,{width:"100%",height:500,children:a.jsxs(si,{data:W,children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(An,{dataKey:"category",tick:{fontSize:11},angle:-15,textAnchor:"end",height:100}),a.jsx(vn,{tick:{fontSize:12}}),a.jsx(Ur,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},formatter:Z=>[`${Z} pcs (avg)`,"Average"],labelFormatter:Z=>Z}),a.jsx(gr,{dataKey:"average",radius:[8,8,0,0],children:W.map((Z,re)=>a.jsx(Gl,{fill:Z.fill},`cell-${re}`))})]})}),a.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{A.forEach(R=>{let Q=0;O.forEach(ee=>{ee[R]>Q&&(Q=ee[R],ee.day)})});const Z=O.reduce((R,Q)=>{const ee=A.reduce((xe,ge)=>xe+(R[ge]||0),0);return A.reduce((xe,ge)=>xe+(Q[ge]||0),0)>ee?Q:R}),re=A.reduce((R,Q)=>R+(Z[Q]||0),0),ne=O.reduce((R,Q)=>{const ee=A.reduce((xe,ge)=>xe+(R[ge]||0),0);return A.reduce((xe,ge)=>xe+(Q[ge]||0),0)<ee?Q:R}),U=A.reduce((R,Q)=>R+(ne[Q]||0),0),oe=O.find(R=>R.dayNum===v),K=oe?Object.entries(oe).filter(([R])=>A.includes(R)).sort((R,Q)=>Q[1]-R[1])[0]:null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Busiest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:Z.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[re.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Quietest Day"}),a.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:ne.day}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[U.toLocaleString()," pcs avg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Top Seller Today"}),a.jsx("p",{className:"text-base text-gray-900",style:{fontWeight:"600"},children:K?.[0]||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:K?`${K[1].toLocaleString()} pcs avg`:"No data"})]})]})})()})]})})(),r.length===0?a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[a.jsx(wp,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),a.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):a.jsx("div",{className:"space-y-4",children:r.map((D,A)=>{const O=C(D.data),F=new Date(D.date),W=D.storeName&&D.storeName!=="Unknown Store"?D.storeName:e.stores?.find(Y=>Y.id===D.storeId)?.name||D.storeName||"Unknown Store";return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Dr,{className:"w-5 h-5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:F.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsxs("p",{className:"text-sm text-purple-100",children:[W,"  Total: ",O.toLocaleString()," pieces"]})]})]}),a.jsx("button",{onClick:()=>E(D.id),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:a.jsx(ps,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(D.data).map(([Y,Z],re)=>{const ne=O>0?(Z/O*100).toFixed(1):"0",U=M(re);return a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:U,borderLeftWidth:"4px"},children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx(rr,{className:"w-5 h-5 text-gray-400"}),a.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[ne,"%"]})]}),a.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:Y}),a.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:Z.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]},Y)})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{children:["Uploaded by ",D.uploadedBy]}),a.jsx("span",{children:new Date(D.uploadedAt).toLocaleString()})]})]})]},D.id)})})]})}function WI({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:n}){const[s,i]=L.useState("pending"),[o,l]=L.useState([]),[u,d]=L.useState([]),[f,p]=L.useState(null),[m,x]=L.useState(!1),[v,y]=L.useState(new Date().toISOString().substring(0,7)),[b,N]=L.useState(null),[k,w]=L.useState(!1),P=e.user?.role==="cluster_head",S=e.user?.role==="manager";e.user?.designation;const _=P&&!t||P&&n==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",_),console.log("  - locationType:",n),console.log("  - isClusterHead:",P),console.log("  - Production Houses:",e.productionHouses?.map(W=>({id:W.id,name:W.name}))),L.useEffect(()=>{s==="pending"&&(P||S)?E():s==="history"?C():s==="wastage"&&M()},[s,v,_]);async function E(){try{x(!0);const W=await XD(e.user?.accessToken||"");l(W.recalibrations||[])}catch(W){console.error("Error fetching pending recalibrations:",W),Nr.error("Failed to fetch pending recalibrations")}finally{x(!1)}}async function C(){if(_)try{x(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",_),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",P),console.log("  - user.storeId:",e.user?.storeId);const W=await YD(e.user?.accessToken||"",_,n);console.log(" History response:",W),console.log(" History records found:",W?.history?.length||0),W?.history?.length>0&&console.log(" Sample record locationIds:",W.history.slice(0,3).map(Y=>Y.locationId)),d(W.history||[])}catch(W){console.error("Error fetching recalibration history:",W),Nr.error("Failed to fetch recalibration history")}finally{x(!1)}}async function M(){try{x(!0),console.log(" Fetching wastage report:"),console.log("  - month:",v),console.log("  - effectiveStoreId:",_),console.log("  - selectedStoreId:",t),console.log("  - locationType:",n),console.log("  - isClusterHead:",P);const W=await t5(e.user?.accessToken||"",v,_,n);console.log(" Wastage response:",W),console.log(" Wastage items found:",W?.items?.length||0),W?.items?.length>0&&console.log(" Sample item locationIds:",W.items.slice(0,3).map(Y=>Y.locationId)),p(W)}catch(W){console.error("Error fetching wastage report:",W),Nr.error("Failed to fetch wastage report")}finally{x(!1)}}async function D(W){try{await JD(e.user?.accessToken||"",W),Nr.success("Recalibration approved successfully"),E()}catch(Y){console.error("Error approving recalibration:",Y),Nr.error("Failed to approve recalibration")}}async function A(W){const Y=prompt("Please enter reason for rejection:");if(Y)try{await QD(e.user?.accessToken||"",W,Y),Nr.success("Recalibration rejected"),E()}catch(Z){console.error("Error rejecting recalibration:",Z),Nr.error("Failed to reject recalibration")}}function O(W){N(W),w(!0)}const F=W=>new Date(W).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[a.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),a.jsxs("p",{className:"text-purple-100",children:[s==="pending"&&"Review and approve monthly stock recalibrations",s==="history"&&"View historical recalibration records",s==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&s==="history"&&n!=="production_house"&&a.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Dr,{className:"w-5 h-5"}),"New Recalibration"]})]}),a.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[(P||S)&&a.jsx("button",{onClick:()=>i("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),a.jsx("button",{onClick:()=>i("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),a.jsx("button",{onClick:()=>i("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${s==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),s==="wastage"&&a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),a.jsx("input",{type:"month",value:v,onChange:W=>y(W.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),m?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(jp,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[s==="pending"&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(fr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):o.map(W=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:W.locationName}),a.jsxs("p",{className:"text-sm text-gray-500",children:[F(W.date),"  ",W.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),a.jsx("p",{className:"text-xl text-red-700",children:W.items?.filter(Y=>Y.adjustmentType==="wastage").length||0})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-xl text-orange-700",children:W.items?.filter(Y=>Y.adjustmentType==="counting_error").length||0})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),a.jsx("p",{className:"text-xl text-blue-700",children:W.items?.length||0})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>O(W),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(W1,{className:"w-4 h-4"}),"View Details"]}),a.jsxs("button",{onClick:()=>D(W.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(fr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>A(W.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(hi,{className:"w-4 h-4"}),"Reject"]})]})]},W.id))}),s==="history"&&a.jsx("div",{className:"space-y-4",children:u.length===0?a.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[a.jsx(Dr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):u.map(W=>a.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:W.locationName}),a.jsx("p",{className:"text-sm text-gray-500",children:F(W.date)})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${W.status==="approved"?"bg-green-100 text-green-700":W.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:W.status?.charAt(0).toUpperCase()+W.status?.slice(1)||"Pending"})]}),a.jsxs("button",{onClick:()=>O(W),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(W1,{className:"w-4 h-4"}),"View Details"]})]},W.id))}),s==="wastage"&&a.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!f||f.items?.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(G2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalWastage||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalCountingErrors||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.totalRecalibrations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),a.jsx("p",{className:"text-2xl",children:f.summary?.uniqueLocations||0}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:f.items?.map((W,Y)=>a.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[a.jsx("td",{className:"p-3 text-sm text-gray-900",children:W.itemName}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:W.locationName}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[W.systemQuantity," ",W.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[W.actualQuantity," ",W.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${W.difference<0?"text-red-600":"text-green-600"}`,children:[W.difference>0?"+":"",W.difference]}),a.jsx("td",{className:"p-3 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:W.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:W.notes||"-"})]},Y))})]})})]})]})})]}),k&&b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[a.jsx("h3",{className:"text-xl mb-1",children:b.locationName}),a.jsxs("p",{className:"text-purple-100 text-sm",children:[F(b.date),"  ",b.locationType==="production_house"?"Production House":"Store"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),a.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),a.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),a.jsx("tbody",{children:b.items?.map((W,Y)=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[W.itemName,a.jsx("span",{className:"text-xs text-gray-500 block",children:W.category})]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[W.systemQuantity," ",W.unit]}),a.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[W.actualQuantity," ",W.unit]}),a.jsxs("td",{className:`p-3 text-sm text-center ${W.difference<0?"text-red-600":W.difference>0?"text-green-600":"text-gray-600"}`,children:[W.difference>0?"+":"",W.difference]}),a.jsx("td",{className:"p-3 text-center",children:W.adjustmentType?a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:W.adjustmentType==="wastage"?"Wastage":"Counting Error"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),a.jsx("td",{className:"p-3 text-sm text-gray-600",children:W.notes||"-"})]},Y))})]})})}),a.jsx("div",{className:"p-6 border-t border-gray-200",children:a.jsx("button",{onClick:()=>w(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const B1=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",n.value.toLocaleString()]})]},s))]}):null,Nme=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),a.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},kme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toLocaleString()," pcs"]})]},s))]}):null,Sme=({active:e,payload:t,label:r})=>e&&t&&t.length?a.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[a.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((n,s)=>a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),a.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[n.name,":"]}),a.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[n.value.toFixed(2)," kg"]})]},s))]}):null;function KI({context:e,selectedStoreId:t,highlightRequestId:r,onNavigateToManageItems:n}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.designation==="production_incharge",l=e.user?.designation==="store_incharge",[u,d]=L.useState(o?"production":"store"),[f,p]=L.useState(t||(s||i||o?null:e.user?.storeId)||null),m=u==="store"?f:null;console.log(" Analytics effectiveStoreId:",m),console.log(" Analytics mode:",u),console.log(" Local selected store ID:",f),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[x,v]=L.useState(r?"production-requests":"profit");L.useEffect(()=>{console.log(" activeView changed to:",x)},[x]),L.useEffect(()=>{u==="production"&&x!=="production"&&x!=="recalibration-reports"&&x!=="production-requests"?v("production"):(x==="production"||x==="recalibration-reports"||x==="production-requests")&&u==="store"?v("profit"):x==="store-recalibration"&&u==="production"&&v("production")},[u]);const[y,b]=L.useState("revenue"),[N,k]=L.useState("monthly"),[w,P]=L.useState("monthly"),[S,_]=L.useState({from:"2025-03-01",to:"2025-12-25"}),[E,C]=L.useState(0),[M,D]=L.useState([]),[A,O]=L.useState(!1),[F,W]=L.useState(!0),[Y,Z]=L.useState([]),[re,ne]=L.useState([]),[U,oe]=L.useState(!1),[K,R]=L.useState([]),[Q,ee]=L.useState(null),[se,xe]=L.useState(null),[ge,Me]=L.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[ce,me]=L.useState(!1),[Oe,q]=L.useState(null),[Ne,ae]=L.useState(5),[De,Be]=L.useState(5),[Se,Fe]=L.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:400,medium:200,low:100},chickenKurkure:{high:400,medium:200,low:100}}),[ze,Ee]=L.useState(!1),[He,Nt]=L.useState({}),[Ke,kt]=L.useState(()=>{const X=localStorage.getItem("momosPerPlate");return X?parseInt(X,10):6}),[ft,Qt]=L.useState(!1),[yt,wt]=L.useState(6),[vt,bt]=L.useState(o&&e.user?.storeId||null),Gt=e.salesData,tn=e.inventory,ur=e.overheads,zr=e.fixedCosts,ye=e.productionData,[ut,at]=L.useState(()=>{const X=ye.map(ke=>ke.date).filter((ke,fe,le)=>le.indexOf(ke)===fe).sort((ke,fe)=>fe.localeCompare(ke));if(X.length>0)return X[0];{const ke=new Date;return ke.setDate(ke.getDate()-1),ke.toISOString().split("T")[0]}}),[Ge,Et]=L.useState(()=>{const X=ye.filter(ke=>ke.approvalStatus==="approved").map(ke=>ke.date).filter((ke,fe,le)=>le.indexOf(ke)===fe).sort((ke,fe)=>fe.localeCompare(ke));if(X.length>0)return X[0];{const ke=new Date;return ke.setDate(ke.getDate()-1),ke.toISOString().split("T")[0]}}),[st,pt]=L.useState("monthly"),[Mt,et]=L.useState(""),[mt,It]=L.useState(""),ar=()=>{const X=new Date;X.setHours(0,0,0,0);const ke=Ie=>{const Ce=Ie.getFullYear(),je=String(Ie.getMonth()+1).padStart(2,"0"),$e=String(Ie.getDate()).padStart(2,"0");return`${Ce}-${je}-${$e}`};let fe,le;switch(st){case"today":fe=new Date(X),le=new Date(X);break;case"week":fe=new Date(X);const Ie=fe.getDay(),Ce=Ie===0?-6:1-Ie;fe.setDate(fe.getDate()+Ce),le=new Date(fe),le.setDate(fe.getDate()+6);break;case"month":fe=new Date(X.getFullYear(),X.getMonth(),1),le=new Date(X.getFullYear(),X.getMonth()+1,0);break;case"year":fe=new Date(X.getFullYear(),0,1),le=new Date(X.getFullYear(),11,31);break;case"custom":Mt&&mt?(fe=new Date(Mt+"T00:00:00"),le=new Date(mt+"T00:00:00")):(fe=new Date(X),le=new Date(X));break;default:fe=new Date(X),le=new Date(X)}return{startDate:ke(fe),endDate:ke(le)}};L.useEffect(()=>{const X=vt,ke=ye.filter(fe=>{if(!X)return!0;const le=fe.storeId===X,Ie=fe.productionHouseId===X,Ce=fe.productionHouseId||fe.storeId;return le||Ie||Ce===X}).map(fe=>fe.date).filter((fe,le,Ie)=>Ie.indexOf(fe)===le).sort((fe,le)=>le.localeCompare(fe));if(ke.length>0)at(ke[0]);else{const fe=new Date;fe.setDate(fe.getDate()-1),at(fe.toISOString().split("T")[0])}},[vt,ye]),L.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:u,selectedProductionHouseId:vt,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),u==="production"&&vt?(console.log(" Conditions met - fetching opening balance..."),gt()):console.log(" Conditions not met for carry-forward")},[vt,u,e.productionData,e.productionRequests]),L.useEffect(()=>{if((s||i)&&u==="production"&&!vt&&e.productionHouses&&e.productionHouses.length>0){const X=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",X.id,X.name),bt(X.id)}},[u,s,i,e.productionHouses]);async function gt(){try{const X=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",X),console.log("   Selected production house ID:",vt),console.log("   Available production data records:",ye.length),console.log("   Available production requests:",e.productionRequests?.length||0),console.log("   Available stores (local):",K.length);const ke=K.length>0?K:e.stores||[];let fe=vt;if(vt&&vt.startsWith("STORE-")){const Ce=ke.find(je=>je.id===vt);Ce?.productionHouseId&&(fe=Ce.productionHouseId,console.log("   Resolved production house UUID:",fe))}if(!fe){console.log("    No production house UUID available, skipping recalibration fetch"),ee(null),xe(null);return}let le=await oj(e.user?.accessToken||"",fe);if(!le?.record&&fe){console.log("   No recalibration found with UUID, checking with mapped store ID...");const Ce=ke.filter(je=>je.productionHouseId===fe);if(console.log("   Stores mapped to this production house:",Ce.map(je=>({id:je.id,name:je.name}))),Ce&&Ce.length>0)for(const je of Ce){console.log("   Trying to fetch recalibration with store ID:",je.id);const $e=await oj(e.user?.accessToken||"",je.id);if($e?.record){console.log("    Found recalibration using store ID:",je.id),le=$e;break}}}console.log(" Recalibration Response:",le);let Ie=null;if(le?.record){const Ce=le.record.date.substring(0,7);console.log(" Recalibration date comparison:",{recalDate:Ce,currentMonth:X,match:Ce===X}),Ce===X?(console.log(" Using current month recalibration as opening balance"),console.log("   Recalibration items:",le.record.items),Ie={},le.record.items.forEach(je=>{const $e=e.inventoryItems?.find(Ye=>Ye.id===je.itemId||Ye.name===je.itemId);if($e){const qe=$e.name.replace(/_([a-z])/g,Ve=>Ve[1].toUpperCase()).replace(/Momo(s)?$/i,"");Ie[qe]=je.actualQuantity,console.log(`   Opening balance mapping: ${je.itemId} -> ${qe} = ${je.actualQuantity}`)}else Ie[je.itemId]=je.actualQuantity,console.log(`   Opening balance item not found in inventory: ${je.itemId}, using as-is`)}),console.log("   Parsed opening balance:",Ie)):(console.log(" Recalibration from previous month, calculating forward..."),Ie=lr(le.record,X))}else console.log(" No recalibration found, calculating from previous month..."),Ie=Sr(fe);ee(le?.record||null),xe(Ie),console.log(" Opening Balance Calculated:",Ie)}catch(X){console.error("Error fetching recalibration:",X)}}function lr(X,ke){const fe=X.date.substring(0,7),le={};X.items.forEach($e=>{const Ye=e.inventoryItems?.find(qe=>qe.id===$e.itemId||qe.name===$e.itemId);if(Ye){const Ve=Ye.name.replace(/_([a-z])/g,Pt=>Pt[1].toUpperCase()).replace(/Momo(s)?$/i,"");le[Ve]=$e.actualQuantity,console.log(`   Recalibration item mapping: ${$e.itemId} -> ${Ve} = ${$e.actualQuantity}`)}else le[$e.itemId]=$e.actualQuantity,console.log(`   Recalibration item not found in inventory: ${$e.itemId}, using as-is`)});const Ie=new Date(fe+"-01"),Ce=new Date(ke+"-01");let je=new Date(Ie);for(je.setMonth(je.getMonth()+1);je<Ce;){const $e=je.toISOString().substring(0,7),Ye=ht(vt,$e),qe=sr(vt,$e);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Ve=>{le[Ve]=(le[Ve]||0)+(Ye[Ve]||0)-(qe[Ve]||0)}),je.setMonth(je.getMonth()+1)}return le}function Sr(X){const ke=new Date().toISOString().substring(0,7),[fe,le]=ke.split("-").map(Number);let Ie=fe,Ce=le-1;Ce===0&&(Ce=12,Ie=fe-1);const je=`${Ie}-${String(Ce).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",je),console.log("   Current month:",ke," Previous month:",je);const $e=ht(X,je),Ye=sr(X,je),qe={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(Ve=>{qe[Ve]=($e[Ve]||0)-(Ye[Ve]||0)}),console.log("  Previous month production:",$e),console.log("  Previous month deliveries:",Ye),console.log("  Calculated closing stock:",qe),qe}function ht(X,ke){if(!X)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${X}, month: ${ke}`),console.log(`   Total production records available: ${ye.length}`);const fe=ye.filter(le=>{if(!le.date.startsWith(ke))return!1;const Ie=le.storeId===X,Ce=le.productionHouseId===X;let je=le.productionHouseId;(!je||je.startsWith("STORE-"))&&le.storeId&&(je=(K.length>0?K:e.stores||[]).find(Ve=>Ve.id===le.storeId)?.productionHouseId||null);const $e=je||le.storeId;return Ie||Ce||$e===X});return console.log(`   Filtered production records: ${fe.length}`),fe.reduce((le,Ie)=>({chicken:le.chicken+(Ie.chickenMomos?.final||0),chickenCheese:le.chickenCheese+(Ie.chickenCheeseMomos?.final||0),veg:le.veg+(Ie.vegMomos?.final||0),cheeseCorn:le.cheeseCorn+(Ie.cheeseCornMomos?.final||0),paneer:le.paneer+(Ie.paneerMomos?.final||0),vegKurkure:le.vegKurkure+(Ie.vegKurkureMomos?.final||0),chickenKurkure:le.chickenKurkure+(Ie.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function sr(X,ke){if(!X)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${X}, month: ${ke}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);const fe=K.length>0?K:e.stores||[];let le=X;if(X&&X.startsWith("STORE-")){const Ce=fe.find(je=>je.id===X);Ce?.productionHouseId&&(le=Ce.productionHouseId,console.log(`   Resolved UUID: ${le}`))}const Ie=(e.productionRequests||[]).filter(Ce=>{if(Ce.status!=="delivered")return!1;const je=Ce.deliveredDate||Ce.requestDate||Ce.createdAt;return!je||!je.startsWith(ke)?!1:fe.find(Ye=>Ye.id===Ce.storeId)?.productionHouseId===le});return console.log(`   Filtered delivered requests: ${Ie.length}`),Ie.reduce((Ce,je)=>({chicken:Ce.chicken+(je.chickenMomos||0),chickenCheese:Ce.chickenCheese+(je.chickenCheeseMomos||0),veg:Ce.veg+(je.vegMomos||0),cheeseCorn:Ce.cheeseCorn+(je.cheeseCornMomos||0),paneer:Ce.paneer+(je.paneerMomos||0),vegKurkure:Ce.vegKurkure+(je.vegKurkureMomos||0),chickenKurkure:Ce.chickenKurkure+(je.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}console.log(" Analytics - Production Data Debug:"),console.log("  - Total production records:",ye.length),console.log("  - Production data records:",ye.map(X=>({id:X.id,date:X.date,storeId:X.storeId,productionHouseId:X.productionHouseId,approvalStatus:X.approvalStatus,chickenMomos:X.chickenMomos?.final||0,totalProduction:(X.chickenMomos?.final||0)+(X.vegMomos?.final||0)+(X.chickenCheeseMomos?.final||0)+(X.cheeseCornMomos?.final||0)+(X.paneerMomos?.final||0)+(X.vegKurkureMomos?.final||0)+(X.chickenKurkureMomos?.final||0)}))),console.log("  - Selected production house ID:",vt),console.log("  - Analytics mode:",u),console.log("  - User storeId:",e.user?.storeId),console.log("  - User designation:",e.user?.designation),console.log("  - Is Production Incharge:",o),console.log("  - Available production houses:",e.productionHouses.map(X=>({id:X.id,name:X.name}))),console.log("  - Available stores:",e.stores?.map(X=>({id:X.id,name:X.name,productionHouseId:X.productionHouseId}))),console.log("   PRODUCTION INCHARGE SPECIFIC DEBUG:"),console.log("     - Is this user a production incharge?",o),console.log("     - User storeId (should be production house ID):",e.user?.storeId),console.log("     - Does user storeId match any production house?",e.productionHouses.find(X=>X.id===e.user?.storeId)),console.log("     - Production data storeIds:",[...new Set(ye.map(X=>X.storeId))]),console.log("     - Production data productionHouseIds:",[...new Set(ye.map(X=>X.productionHouseId))]),console.log("     - Stores that map to user production house:",e.stores?.filter(X=>X.productionHouseId===e.user?.storeId).map(X=>({id:X.id,name:X.name})));const qt=(X,ke="date")=>{const fe=new Date,le=new Date(fe.getFullYear(),fe.getMonth(),fe.getDate());return X.filter(Ie=>{const Ce=new Date(Ie[ke]),je=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate());switch(N){case"daily":const $e=new Date(le);return $e.setDate($e.getDate()-10),je>=$e&&je<=le;case"weekly":const Ye=new Date(le);return Ye.setDate(Ye.getDate()-7),je>=Ye&&je<=le;case"monthly":const qe=new Date(le);return qe.setMonth(qe.getMonth()-1),je>=qe&&je<=le;case"yearly":const Ve=new Date(le);return Ve.setFullYear(Ve.getFullYear()-1),je>=Ve&&je<=le;case"custom":const Pt=new Date(S.from),Kt=new Date(S.to);return je>=Pt&&je<=Kt;default:return!0}})},Xr=qt(Gt),wr=qt(tn),pr=qt(ur),B=qt(zr),z=qt(Y,"payoutDate"),H=L.useMemo(()=>{console.log(" === SALES DATA FILTERING DEBUG ==="),console.log("Total sales records (time-filtered):",Xr.length),console.log("effectiveStoreId:",m),console.log("User role:",e.user?.role),console.log("All sales storeIds:",Xr.map(le=>le.storeId)),console.log("User storeId:",e.user?.storeId);const X=Xr.filter(le=>{const Ie=new Date(le.date);return Ie.getDate()===28&&Ie.getMonth()===11});if(console.log("December 28th sales found:",X.length),X.forEach(le=>{console.log(`  - Date: ${le.date}, StoreId: ${le.storeId}, Revenue: ${(le.paytmAmount||0)+(le.cashAmount||0)+(le.onlineSales||0)}`)}),!m)return console.log("No store filter - returning all",Xr.length,"sales"),Xr;const ke=Xr.filter(le=>le.storeId===m);console.log("After store filtering (exact match only):",ke.length,"sales"),console.log("Filtered sales details:",ke.map(le=>({date:le.date,storeId:le.storeId,total:(le.offlineSales||0)+(le.onlineSales||0)})));const fe=Xr.filter(le=>le.storeId!==m);return console.log("Filtered out (all non-matching storeIds):",fe.length,"sales"),fe.length>0&&console.log("Sample filtered out sales storeIds:",fe.slice(0,5).map(le=>le.storeId)),console.log(" === END DEBUG ==="),ke},[Xr,m]),J=L.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",wr.length),console.log("effectiveStoreId:",m);const X=wr.filter(fe=>{const le=new Date(fe.date);return le.getDate()===28&&le.getMonth()===11});if(console.log("December 28th inventory found:",X.length),X.forEach(fe=>{console.log(`  - Date: ${fe.date}, StoreId: ${fe.storeId}, Cost: ${fe.totalCost||0}`)}),!m)return console.log("No store filter - returning all",wr.length,"inventory items"),wr;const ke=wr.filter(fe=>fe.storeId===m);return console.log("After store filtering (exact match only):",ke.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),ke},[wr,m]),te=L.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",pr.length),console.log("effectiveStoreId:",m);const X=pr.filter(fe=>{const le=new Date(fe.date);return le.getDate()===28&&le.getMonth()===11});if(console.log("December 28th overhead found:",X.length),X.forEach(fe=>{console.log(`  - Date: ${fe.date}, StoreId: ${fe.storeId}, Amount: ${fe.amount||0}`)}),!m)return console.log("No store filter - returning all",pr.length,"overhead items"),pr;const ke=pr.filter(fe=>fe.storeId===m);return console.log("After store filtering (exact match only):",ke.length,"overhead items"),console.log("Filtered overhead storeIds:",ke.map(fe=>({date:fe.date,storeId:fe.storeId,amount:fe.amount}))),console.log(" === END OVERHEAD DEBUG ==="),ke},[pr,m]),ie=L.useMemo(()=>m?B.filter(X=>X.storeId===m):B,[B,m]),we=L.useMemo(()=>m?re.filter(X=>X.storeId===m):re,[re,m]),Pe=L.useMemo(()=>{let X=z;if(m){const ke=we.map(fe=>fe.id);X=X.filter(fe=>ke.includes(fe.employeeId))}return X},[z,we,m]);L.useEffect(()=>{(async()=>{try{const[ke,fe]=await Promise.all([Yo(),Zo()]);Z(ke||[]),ne(fe||[])}catch(ke){console.error("Error loading payouts and employees:",ke),Z([]),ne([])}})()},[]),L.useEffect(()=>{(async()=>{if(console.log(" Store Loading Check:",{isClusterHead:s,analyticsMode:u,shouldLoad:s||u==="production"}),!(!s&&u!=="production"))try{const ke=await Uu();R(ke),console.log(" Loaded stores for analytics:",ke.length,"stores"),console.log(" Store details:",ke.map(fe=>({id:fe.id,name:fe.name,productionHouseId:fe.productionHouseId})))}catch(ke){console.error(" Error loading stores:",ke)}})()},[s,u]);const V=async()=>{try{const X=Bu(),{data:{session:ke}}=await X.auth.getSession();return ke?.access_token||null}catch(X){return console.error("Error getting fresh token:",X),null}};L.useEffect(()=>{(async()=>{if(e.user)try{W(!0);const ke=await V();if(!ke){console.error("No valid access token available");return}const fe=new Date,le=5.5*60*60*1e3,Ce=new Date(fe.getTime()+le).toISOString().split("T")[0];if(e.user.role==="cluster_head"){const $e=(await kD(ke)).filter(Ve=>Ve.leaveDate===Ce&&Ve.status==="approved"),Ye=await Ps(ke),qe=new Map(Ye.map(Ve=>[Ve.employeeId,Ve]));if(e.user.storeId){const Ve=Ye.filter(Ht=>Ht.storeId===e.user.storeId||Ht.storeId===null||Ht.storeId===void 0).map(Ht=>Ht.employeeId),Pt=$e.filter(Ht=>Ve.includes(Ht.employeeId)),Kt=Pt.map(Ht=>({...Ht,employeeName:qe.get(Ht.employeeId)?.name||"Unknown",storeId:qe.get(Ht.employeeId)?.storeId||"N/A",storeName:qe.get(Ht.employeeId)?.storeName||"N/A"}));C(Pt.length),D(Kt)}else{const Ve=$e.map(Pt=>({...Pt,employeeName:qe.get(Pt.employeeId)?.name||"Unknown",storeId:qe.get(Pt.employeeId)?.storeId||"N/A",storeName:qe.get(Pt.employeeId)?.storeName||"N/A"}));C($e.length),D(Ve)}}else if(e.user.role==="manager"&&e.user.employeeId){const je=await Wl(e.user.employeeId,ke),$e=new Map(je.map(qe=>[qe.employeeId,qe]));let Ye=[];for(const qe of je){const Kt=(await Hu(qe.employeeId,ke)).filter(Ht=>Ht.leaveDate===Ce&&Ht.status==="approved").map(Ht=>({...Ht,employeeName:$e.get(Ht.employeeId)?.name||"Unknown",storeId:$e.get(Ht.employeeId)?.storeId||"N/A",storeName:$e.get(Ht.employeeId)?.storeName||"N/A"}));Ye.push(...Kt)}C(Ye.length),D(Ye)}else C(0),D([])}catch(ke){console.error("Error loading today's leaves:",ke),C(0)}finally{W(!1)}})()},[e.user]),L.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),v("production-requests"))},[r]);const ue=()=>{switch(N){case"daily":return"Last 10 days";case"weekly":return"Last 7 days";case"monthly":return"Last 30 days";case"yearly":return"Last 365 days";case"custom":return`${S.from} to ${S.to}`;default:return"Current period"}},ve=(()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",N),console.log("Filtered sales data count:",H.length),console.log("Filtered inventory data count:",J.length),console.log("Filtered overhead data count:",te.length),console.log("Filtered fixed costs data count:",ie.length);const X=H.reduce((Ft,Bt)=>Ft+(Bt.paytmAmount||0)+(Bt.cashAmount||0)+(Bt.onlineSales||0),0);console.log("Total revenue calculated:",X);const ke=H.reduce((Ft,Bt)=>Ft+(Bt.onlineSales||0),0),fe=H.reduce((Ft,Bt)=>Ft+(Bt.paytmAmount||0)+(Bt.cashAmount||0),0),le=J.reduce((Ft,Bt)=>Ft+(Bt.totalCost||0),0);console.log("Inventory expenses:",le);const Ie=te.reduce((Ft,Bt)=>Ft+(Bt.amount||0),0),Ce=ie.filter(Ft=>Ft.category==="electricity").reduce((Ft,Bt)=>Ft+(Bt.amount||0),0),je=ie.filter(Ft=>Ft.category==="rent").reduce((Ft,Bt)=>Ft+(Bt.amount||0),0),$e=H.reduce((Ft,Bt)=>Ft+(Bt.employeeSalary||0),0);let Ye=0;if(N==="monthly"||N==="yearly"||N==="custom"){let Ft=Pe;if(m){const Bt=we.map(xt=>xt.id);Ft=Ft.filter(xt=>Bt.includes(xt.employeeId))}Ye=Ft.reduce((Bt,xt)=>{const Tt=we.find(dr=>dr.id===xt.employeeId);return Tt&&Tt.type==="fulltime"?Bt+(xt.amount||0):Bt},0)}const qe=$e+Ye,Ve=Ce+je+qe,Pt=le+Ie+Ve,Kt=X-Pt,Ht=X>0?Kt/X*100:0;return console.log("Total expenses:",Pt),console.log("Net profit:",Kt),console.log(" === END METRICS DEBUG ==="),{totalRevenue:X,onlineRevenue:ke,offlineRevenue:fe,totalExpenses:Pt,inventoryExpenses:le,overheadExpenses:Ie,fixedCostsTotal:Ve,electricityExpenses:Ce,rentExpenses:je,salaryExpenses:qe,contractWorkerExpenses:$e,permanentEmployeeExpenses:Ye,netProfit:Kt,profitMargin:Ht}})(),ct=(()=>{const X={};return H.forEach(ke=>{const le=new Date(ke.date).toLocaleString("default",{month:"short"});X[le]||(X[le]={month:le,revenue:0,expenses:0,profit:0});const Ie=(ke.paytmAmount||0)+(ke.cashAmount||0)+(ke.onlineSales||0);X[le].revenue+=Ie}),J.forEach(ke=>{const le=new Date(ke.date).toLocaleString("default",{month:"short"});X[le]||(X[le]={month:le,revenue:0,expenses:0,profit:0}),X[le].expenses+=ke.totalCost||0}),te.forEach(ke=>{const le=new Date(ke.date).toLocaleString("default",{month:"short"});X[le]||(X[le]={month:le,revenue:0,expenses:0,profit:0}),X[le].expenses+=ke.amount||0}),Object.keys(X).forEach(ke=>{X[ke].profit=X[ke].revenue-X[ke].expenses}),Object.values(X)})(),Qe=(()=>{const X=new Date,ke=[];if(N==="daily")for(let fe=9;fe>=0;fe--){const le=new Date(X);le.setDate(le.getDate()-fe);const Ie=le.toISOString().split("T")[0],Ce=le.toLocaleDateString("default",{month:"short",day:"numeric"}),je=H.filter(qe=>qe.date===Ie),$e=je.reduce((qe,Ve)=>qe+(Ve.onlineSales||0),0),Ye=je.reduce((qe,Ve)=>qe+(Ve.paytmAmount||0)+(Ve.cashAmount||0),0);ke.push({period:Ce,online:$e,offline:Ye,total:$e+Ye})}else if(N==="weekly")for(let fe=9;fe>=0;fe--){const le=new Date(X);le.setDate(le.getDate()-fe*7);const Ie=new Date(le);Ie.setDate(Ie.getDate()-6);const Ce=Ie.toLocaleDateString("default",{month:"short",day:"numeric"}),je=le.toLocaleDateString("default",{month:"short",day:"numeric"}),$e=`${Ce} - ${je}`,Ye=H.filter(Pt=>{const Kt=new Date(Pt.date);return Kt>=Ie&&Kt<=le}),qe=Ye.reduce((Pt,Kt)=>Pt+(Kt.onlineSales||0),0),Ve=Ye.reduce((Pt,Kt)=>Pt+(Kt.paytmAmount||0)+(Kt.cashAmount||0),0);ke.push({period:$e,online:qe,offline:Ve,total:qe+Ve})}else if(N==="monthly")for(let fe=9;fe>=0;fe--){const le=new Date(X);le.setMonth(le.getMonth()-fe);const Ie=le.toLocaleDateString("default",{month:"short",year:"2-digit"}),Ce=le.toLocaleString("default",{month:"short"}),je=le.getFullYear().toString(),$e=H.filter(Ve=>{const Pt=new Date(Ve.date);return Pt.toLocaleString("default",{month:"short"})===Ce&&Pt.getFullYear().toString()===je}),Ye=$e.reduce((Ve,Pt)=>Ve+(Pt.onlineSales||0),0),qe=$e.reduce((Ve,Pt)=>Ve+(Pt.paytmAmount||0)+(Pt.cashAmount||0),0);ke.push({period:Ie,online:Ye,offline:qe,total:Ye+qe})}else if(N==="yearly")for(let fe=4;fe>=0;fe--){const le=X.getFullYear()-fe,Ie=H.filter($e=>new Date($e.date).getFullYear()===le),Ce=Ie.reduce(($e,Ye)=>$e+(Ye.onlineSales||0),0),je=Ie.reduce(($e,Ye)=>$e+(Ye.paytmAmount||0)+(Ye.cashAmount||0),0);ke.push({period:le.toString(),online:Ce,offline:je,total:Ce+je})}else if(N==="custom"){const fe={};return H.forEach(le=>{const Ce=new Date(le.date).toLocaleDateString("default",{month:"short",year:"2-digit"});fe[Ce]||(fe[Ce]={period:Ce,online:0,offline:0,total:0});const je=le.onlineSales||0,$e=(le.paytmAmount||0)+(le.cashAmount||0);fe[Ce].online+=je,fe[Ce].offline+=$e,fe[Ce].total+=je+$e}),Object.values(fe)}return ke})(),Tr=(()=>{const X=new Date,ke=[];if(N==="daily")for(let fe=4;fe>=0;fe--){const le=new Date(X);le.setDate(le.getDate()-fe);const Ie=le.toISOString().split("T")[0],Ce=le.toLocaleDateString("default",{month:"short",day:"numeric"}),je=(H||[]).filter(Ft=>Ft.date===Ie),$e=je.reduce((Ft,Bt)=>Ft+(Bt.paytmAmount||0)+(Bt.cashAmount||0)+(Bt.onlineSales||0),0),Ye=(J||[]).filter(Ft=>Ft.date===Ie),qe=(te||[]).filter(Ft=>Ft.date===Ie),Ve=Ye.reduce((Ft,Bt)=>Ft+(Bt.totalCost||0),0),Pt=qe.reduce((Ft,Bt)=>Ft+(Bt.amount||0),0),Kt=je.reduce((Ft,Bt)=>Ft+(Bt.employeeSalary||0),0),Ht=Ve+Pt+Kt;ke.push({period:Ce,revenue:$e,expenses:Ht,profit:$e-Ht})}else if(N==="weekly")for(let fe=4;fe>=0;fe--){const le=new Date(X);le.setDate(le.getDate()-fe*7);const Ie=new Date(le);Ie.setDate(Ie.getDate()-6);const Ce=Ie.toLocaleDateString("default",{month:"short",day:"numeric"}),je=le.toLocaleDateString("default",{month:"short",day:"numeric"}),$e=`${Ce} - ${je}`,Ye=(H||[]).filter(xt=>{const Tt=new Date(xt.date);return Tt>=Ie&&Tt<=le}),qe=Ye.reduce((xt,Tt)=>xt+(Tt.paytmAmount||0)+(Tt.cashAmount||0)+(Tt.onlineSales||0),0),Ve=(J||[]).filter(xt=>{const Tt=new Date(xt.date);return Tt>=Ie&&Tt<=le}),Pt=(te||[]).filter(xt=>{const Tt=new Date(xt.date);return Tt>=Ie&&Tt<=le}),Kt=Ve.reduce((xt,Tt)=>xt+(Tt.totalCost||0),0),Ht=Pt.reduce((xt,Tt)=>xt+(Tt.amount||0),0),Ft=Ye.reduce((xt,Tt)=>xt+(Tt.employeeSalary||0),0),Bt=Kt+Ht+Ft;ke.push({period:$e,revenue:qe,expenses:Bt,profit:qe-Bt})}else if(N==="monthly")for(let fe=4;fe>=0;fe--){const le=new Date(X);le.setMonth(le.getMonth()-fe);const Ie=le.toLocaleDateString("default",{month:"short",year:"2-digit"}),Ce=le.getMonth(),je=le.getFullYear(),$e=(H||[]).filter(Le=>{const ot=new Date(Le.date);return ot.getMonth()===Ce&&ot.getFullYear()===je}),Ye=$e.reduce((Le,ot)=>Le+(ot.paytmAmount||0)+(ot.cashAmount||0)+(ot.onlineSales||0),0),qe=(J||[]).filter(Le=>{const ot=new Date(Le.date);return ot.getMonth()===Ce&&ot.getFullYear()===je}),Ve=(te||[]).filter(Le=>{const ot=new Date(Le.date);return ot.getMonth()===Ce&&ot.getFullYear()===je}),Pt=(ie||[]).filter(Le=>{const ot=new Date(Le.date);return ot.getMonth()===Ce&&ot.getFullYear()===je}),Kt=qe.reduce((Le,ot)=>Le+(ot.totalCost||0),0),Ht=Ve.reduce((Le,ot)=>Le+(ot.amount||0),0),Ft=Pt.reduce((Le,ot)=>Le+(ot.amount||0),0),Bt=$e.reduce((Le,ot)=>Le+(ot.employeeSalary||0),0);let xt=0,Tt=Y.filter(Le=>{const ot=new Date(Le.month+"-01");return ot.getMonth()===Ce&&ot.getFullYear()===je});if(m){const Le=we.map(ot=>ot.id);Tt=Tt.filter(ot=>Le.includes(ot.employeeId))}xt=Tt.reduce((Le,ot)=>{const Fr=we.find(Or=>Or.id===ot.employeeId);return Fr&&Fr.type==="fulltime"?Le+(ot.amount||0):Le},0);const dr=Kt+Ht+Ft+Bt+xt;ke.push({period:Ie,revenue:Ye,expenses:dr,profit:Ye-dr})}else if(N==="yearly")for(let fe=4;fe>=0;fe--){const le=X.getFullYear()-fe,Ie=(H||[]).filter(Tt=>new Date(Tt.date).getFullYear()===le),Ce=Ie.reduce((Tt,dr)=>Tt+(dr.paytmAmount||0)+(dr.cashAmount||0)+(dr.onlineSales||0),0),je=(J||[]).filter(Tt=>new Date(Tt.date).getFullYear()===le),$e=(te||[]).filter(Tt=>new Date(Tt.date).getFullYear()===le),Ye=(ie||[]).filter(Tt=>new Date(Tt.date).getFullYear()===le),qe=je.reduce((Tt,dr)=>Tt+(dr.totalCost||0),0),Ve=$e.reduce((Tt,dr)=>Tt+(dr.amount||0),0),Pt=Ye.reduce((Tt,dr)=>Tt+(dr.amount||0),0),Kt=Ie.reduce((Tt,dr)=>Tt+(dr.employeeSalary||0),0);let Ht=0,Ft=Y;if(m){const Tt=we.map(dr=>dr.id);Ft=Ft.filter(dr=>Tt.includes(dr.employeeId))}Ht=Ft.reduce((Tt,dr)=>{const Le=we.find(ot=>ot.id===dr.employeeId);return Le&&Le.type==="fulltime"?Tt+(dr.amount||0):Tt},0)*12;const xt=qe+Ve+Pt+Kt+Ht;ke.push({period:le.toString(),revenue:Ce,expenses:xt,profit:Ce-xt})}else if(N==="custom")return ct;return ke})(),Lr=(()=>{const X={};return J.forEach(fe=>{const le=fe.category||"Other";X[le]||(X[le]=0),X[le]+=fe.totalCost||0}),te.forEach(fe=>{const le=fe.category||"Other",Ie=z2[le]||le;X[Ie]||(X[Ie]=0),X[Ie]+=fe.amount||0}),ie.forEach(fe=>{const le=fe.category||"Other",Ie=W2[le]||le;X[Ie]||(X[Ie]=0),X[Ie]+=fe.amount||0}),ve.salaryExpenses>0&&(X[" Salaries"]=ve.salaryExpenses),Object.keys(X).map(fe=>({name:Hm[fe]||fe,value:X[fe],percentage:(X[fe]/ve.totalExpenses*100).toFixed(1)})).sort((fe,le)=>le.value-fe.value)})(),rn=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],Cr=H.filter(ke=>ke.approvalRequired===!1&&ke.approvedBy).reduce((ke,fe)=>{const le=fe.salesDiscrepancy!==void 0?fe.salesDiscrepancy:fe.cashOffset||0;return ke+(le<0?Math.abs(le):0)},0),Br=ve.netProfit,Ls=Br-Cr;return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),s&&!1]}),!F&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&a.jsx("div",{onClick:()=>O(!0),className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all cursor-pointer hover:shadow-md ${E===0?"bg-green-50 border-green-200 hover:bg-green-100":"bg-orange-50 border-orange-200 hover:bg-orange-100"}`,children:a.jsx("div",{className:"flex items-center gap-3",children:E===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(wn,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-green-900",children:[a.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),a.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}),a.jsx("div",{className:"text-green-600 text-sm",children:"Click to view"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(pE,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-orange-900",children:[a.jsx("span",{className:"text-orange-700",children:E})," ",E===1?"person is":"people are"," on leave today"]}),a.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]}),a.jsx("div",{className:"text-orange-600 text-sm",children:"Click to view details"})]})})}),(s||i||o||l)&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:l?"Store Analytics Dashboard":"Analytics Dashboard"}),!l&&a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[a.jsx("button",{onClick:()=>d("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${u==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vc,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),a.jsx("button",{onClick:()=>d("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${u==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(On,{className:"w-4 h-4"}),a.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),a.jsx("p",{className:"text-purple-700 text-sm",children:u==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),u==="store"&&a.jsx(a.Fragment,{children:s||i||o?a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),a.jsxs("select",{value:f||"",onChange:X=>p(X.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[a.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(X=>a.jsxs("option",{value:X.id,children:[X.name," (ID: ",X.id,")"]},X.id))]})]})}):e.user?.storeId&&a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vc,{className:"w-6 h-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),a.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(X=>X.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),u==="production"&&a.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:s||i?a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),a.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),a.jsxs("select",{value:vt||"",onChange:X=>{const ke=X.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",ke),bt(ke)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[!vt&&a.jsx("option",{value:"",children:"Select Production House"}),e.productionHouses?.map(X=>a.jsxs("option",{value:X.id,children:[X.name," (ID: ",X.id,")"]},X.id))]})]}):o&&e.user?.storeId?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(On,{className:"w-6 h-6 text-orange-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),a.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const X=e.stores?.find(fe=>fe.id===e.user?.storeId);return e.productionHouses?.find(fe=>fe.id===X?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:u==="store"?a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[a.jsxs("button",{onClick:()=>v("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(pn,{className:`w-6 h-6 ${x==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),x==="profit"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>v("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Jn,{className:`w-6 h-6 ${x==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),x==="expense"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>v("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(Vc,{className:`w-6 h-6 ${x==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),x==="sales"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>v("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(rr,{className:`w-6 h-6 ${x==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),x==="datacapture"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>v("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(G7,{className:`w-6 h-6 ${x==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),x==="production-requests"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>v("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(fr,{className:`w-6 h-6 ${x==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),x==="store-recalibration"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>v("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(On,{className:`w-6 h-6 ${x==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),x==="production"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),a.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),v("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${x==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(fr,{className:`w-6 h-6 ${x==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),a.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),x==="recalibration-reports"&&a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),x==="profit"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(X=>a.jsx("button",{onClick:()=>k(X),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===X?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:X=>_({...S,from:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:X=>_({...S,to:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",ve.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:ue()})]}),a.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",ve.totalExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:ue()})]}),a.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ls.toLocaleString()]}),ve.totalRevenue>0?a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[a.jsx(pn,{className:"w-3 h-3"}),"Comparison available after multiple periods"]}):a.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),a.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[ve.profitMargin.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(pn,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",Br.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",Cr.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",a.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),a.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",Ls.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-500",children:ve.totalRevenue>0?`${(Ls/ve.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),Cr>0&&a.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Hr,{className:"w-4 h-4 text-amber-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",Cr.toLocaleString(),"."]})]})})]}),a.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Profit Trend - ",N==="daily"?"Last 5 Days":N==="weekly"?"Last 5 Weeks":N==="monthly"?"Last 5 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Bn,{width:"100%",height:250,children:a.jsxs(si,{data:Tr,barGap:8,barCategoryGap:"20%",children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(An,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(vn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Ur,{content:a.jsx(B1,{})}),a.jsx(da,{wrapperStyle:{fontSize:"12px"}}),a.jsx(gr,{dataKey:"revenue",fill:"#a5b4fc",name:"Revenue",radius:[8,8,0,0],maxBarSize:60}),a.jsx(gr,{dataKey:"expenses",fill:"#fca5a5",name:"Expenses",radius:[8,8,0,0],maxBarSize:60}),a.jsx(gr,{dataKey:"profit",fill:"#86efac",name:"Profit",radius:[8,8,0,0],maxBarSize:60})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(Jn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Revenue Breakdown"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Online Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",ve.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-green-600",children:[(ve.onlineRevenue/ve.totalRevenue*100).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center bg-blue-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Offline Sales"}),a.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",children:["",ve.offlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"text-xs sm:text-sm text-blue-600",children:[(ve.offlineRevenue/ve.totalRevenue*100).toFixed(0),"%"]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[a.jsx(pn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Key Metrics"})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Cost-to-Revenue Ratio"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:ve.totalRevenue>0?`${(ve.totalExpenses/ve.totalRevenue*100).toFixed(1)}%`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:ve.totalRevenue>0&&ve.totalExpenses/ve.totalRevenue<.7?" Healthy ratio":ve.totalRevenue>0?" High expense ratio":"No sales yet"})]}),a.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Profit per 100 Revenue"}),a.jsx("div",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:ve.totalRevenue>0?`${(ve.netProfit/ve.totalRevenue*100).toFixed(1)}`:"N/A"}),a.jsx("div",{className:"text-xs text-gray-600",children:ve.totalRevenue>0&&ve.profitMargin>30?" Excellent margins":ve.totalRevenue>0&&ve.profitMargin>15?" Good margins":ve.totalRevenue>0&&ve.profitMargin>0?" Thin margins":ve.totalRevenue>0?" Operating at loss":"No sales yet"})]})]})]})]})]})}),x==="expense"&&a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(X=>a.jsx("button",{onClick:()=>k(X),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===X?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:X=>_({...S,from:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:X=>_({...S,to:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.totalExpenses.toLocaleString()]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.inventoryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ve.inventoryExpenses/ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ve.salaryExpenses/ve.totalExpenses*100).toFixed(1),"% of total"]})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[a.jsxs("div",{className:"w-full lg:w-1/2 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),a.jsx("div",{className:"relative bg-white rounded-2xl p-6 shadow-lg",children:a.jsx(Bn,{width:"100%",height:320,children:a.jsxs(PF,{children:[a.jsx("defs",{children:rn.map((X,ke)=>a.jsxs("linearGradient",{id:`gradient-${ke}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:X,stopOpacity:.9}),a.jsx("stop",{offset:"100%",stopColor:X,stopOpacity:.7})]},`gradient-${ke}`))}),a.jsx(Di,{data:Lr,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1,strokeDasharray:"3 3"},label:({percentage:X})=>`${X}%`,outerRadius:110,innerRadius:40,fill:"#8884d8",dataKey:"value",paddingAngle:2,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:Lr.map((X,ke)=>a.jsx(Gl,{fill:`url(#gradient-${ke%rn.length})`,stroke:"#fff",strokeWidth:3},`cell-${ke}`))}),a.jsx(Ur,{content:a.jsx(Nme,{})})]})})})]}),a.jsx("div",{className:"w-full lg:w-1/2 space-y-3",children:Lr.map((X,ke)=>a.jsxs("div",{className:"group relative border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer bg-white overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${rn[ke%rn.length]}40, ${rn[ke%rn.length]}10)`}}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{background:`linear-gradient(135deg, ${rn[ke%rn.length]}, ${rn[(ke+1)%rn.length]})`}}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:X.name})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm font-semibold text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[X.percentage,"%"]})})]}),a.jsxs("div",{className:"text-xl font-semibold text-gray-900 group-hover:text-gray-700 transition-colors",children:["",X.value.toLocaleString()]}),a.jsx("div",{className:"mt-3 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:`${X.percentage}%`,background:`linear-gradient(90deg, ${rn[ke%rn.length]}, ${rn[(ke+1)%rn.length]})`}})})]})]},X.name))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(N==="monthly"||N==="yearly"||N==="custom")&&ve.permanentEmployeeExpenses>0&&a.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Hr,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Permanent employee salaries (",ve.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ve.contractWorkerExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ve.permanentEmployeeExpenses.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:N==="monthly"||N==="yearly"||N==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly/yearly views"})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ve.overheadExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(ve.overheadExpenses/ve.totalExpenses*100).toFixed(1),"% of total expenses"]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),a.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ve.fixedCostsTotal.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ve.fixedCostsTotal/ve.totalExpenses*100).toFixed(1),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ve.electricityExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ve.fixedCostsTotal>0?(ve.electricityExpenses/ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ve.rentExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ve.fixedCostsTotal>0?(ve.rentExpenses/ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),a.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",ve.salaryExpenses.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[ve.fixedCostsTotal>0?(ve.salaryExpenses/ve.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Bn,{width:"100%",height:280,children:a.jsxs(si,{data:[{name:" Electricity",amount:ve.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:ve.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:ve.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(An,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),a.jsx(vn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Ur,{content:a.jsx(B1,{})}),a.jsx(gr,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:ve.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:ve.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:ve.salaryExpenses,fill:"#a78bfa"}].map((X,ke)=>a.jsx(Gl,{fill:X.fill},`cell-${ke}`))})]})})})})]})]})}),x==="sales"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>b("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${y==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Vc,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),a.jsx("button",{onClick:()=>b("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${y==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(wp,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),y==="revenue"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:["daily","weekly","monthly","yearly","custom"].map(X=>a.jsx("button",{onClick:()=>k(X),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${N===X?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),N==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),a.jsx("input",{type:"date",value:S.from,onChange:X=>_({...S,from:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),a.jsx("input",{type:"date",value:S.to,onChange:X=>_({...S,to:X.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.totalRevenue.toLocaleString()]}),a.jsx("div",{className:"text-xs text-gray-600",children:ue()})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.onlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ve.onlineRevenue/ve.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),a.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",ve.offlineRevenue.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-600",children:[(ve.offlineRevenue/ve.totalRevenue*100).toFixed(0),"% of total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Transactions"}),a.jsx("div",{className:"text-2xl sm:text-3xl text-gray-900",children:H.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Sales records"})]})]}),a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",N==="daily"?"Last 10 Days":N==="weekly"?"Last 10 Weeks":N==="monthly"?"Last 10 Months":N==="yearly"?"Last 5 Years":"Custom Range"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[300px]",children:a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(si,{data:Qe,barCategoryGap:"25%",children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(An,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),a.jsx(vn,{stroke:"#666",tick:{fontSize:12}}),a.jsx(Ur,{content:a.jsx(B1,{})}),a.jsx(da,{wrapperStyle:{fontSize:"12px"}}),a.jsx(gr,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),a.jsx(gr,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80})]})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Vc,{className:"w-5 h-5 text-green-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),a.jsxs("span",{className:"text-sm text-green-600",children:[(ve.onlineRevenue/ve.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ve.onlineRevenue.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),a.jsxs("span",{className:"text-sm text-blue-600",children:[(ve.offlineRevenue/ve.totalRevenue*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",ve.offlineRevenue.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(pn,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Metrics"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Average Transaction"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",H.length>0?(ve.totalRevenue/H.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per sale"})]}),a.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Profit per Sale"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",H.length>0?(ve.netProfit/H.length).toFixed(0):0]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Average margin"})]})]})]})]})]}),y==="category"&&a.jsx(jme,{context:e,selectedStoreId:t})]}),x==="datacapture"&&a.jsx("div",{children:a.jsx(xoe,{context:e,selectedStoreId:t})}),x==="production"&&a.jsxs("div",{children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),a.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"custom",label:"Custom Range"}].map(X=>a.jsx("button",{onClick:()=>pt(X.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${st===X.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:X.label},X.value))})}),st==="custom"&&a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:Mt,onChange:X=>et(X.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:mt,onChange:X=>It(X.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[a.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),a.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:X,endDate:ke}=ar(),fe=new Date(X).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),le=new Date(ke).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return X===ke?fe:`${fe} - ${le}`})()})]})]})}),a.jsx("div",{className:"hidden",children:a.jsx("select",{value:ut||"",onChange:X=>at(X.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const X=vt;return ye.filter(fe=>{if(!X)return!0;const le=fe.storeId===X,Ie=fe.productionHouseId===X,Ce=fe.productionHouseId||fe.storeId;return le||Ie||Ce===X}).map(fe=>fe.date).filter((fe,le,Ie)=>Ie.indexOf(fe)===le).sort((fe,le)=>le.localeCompare(fe)).map(fe=>a.jsx("option",{value:fe,children:new Date(fe).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},fe))})()})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(()=>{const X=vt;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",u),console.log("  - selectedProductionHouseId:",vt),console.log("  - effectiveStoreId:",m),console.log("  - filterById:",X),console.log("  - Total production records:",ye.length);const ke=X?e.productionHouses?.find(qe=>qe.id===X):null;console.log("  - Selected production house object:",ke);const{startDate:fe,endDate:le}=ar();console.log(" Date Range Filter:",{rangeType:st,startDate:fe,endDate:le,customStart:Mt,customEnd:mt});const Ie=ye.filter(qe=>{if(qe.date<fe||qe.date>le)return console.log(" Date filter excluded record:",{date:qe.date,startDate:fe,endDate:le}),!1;if(!X)return!0;console.log(" Filtering production record:",{recordStoreId:qe.storeId,recordProductionHouseId:qe.productionHouseId,filterById:X,date:qe.date});const Ve=qe.storeId===X,Pt=qe.productionHouseId===X;let Kt=qe.productionHouseId;if((!Kt||Kt.startsWith("STORE-"))&&qe.storeId){const Bt=K.length>0?K:e.stores||[],xt=Bt.find(Tt=>Tt.id===qe.storeId);console.log("     Production Summary - Store lookup:",{pStoreId:qe.storeId,localStoresCount:K.length,contextStoresCount:e.stores?.length||0,allStoresCount:Bt.length,foundStore:xt?{id:xt.id,name:xt.name,productionHouseId:xt.productionHouseId}:null}),Kt=xt?.productionHouseId||null}const Ht=Kt||qe.storeId;return console.log("   Checking record:",{recordId:qe.id.slice(0,8),recordStoreId:qe.storeId,recordProductionHouseId:qe.productionHouseId,resolvedProductionHouseId:Kt,phId:Ht,filterById:X,matchesStoreId:Ve,matchesProductionHouseId:Pt,localStores:K.length,match:Ve||Pt||Ht===X}),Ve||Pt||Ht===X});console.log("  - Filtered production records:",Ie.length);const Ce=Ie.reduce((qe,Ve)=>qe+(Ve.chickenMomos?.final||0)+(Ve.chickenCheeseMomos?.final||0)+(Ve.vegMomos?.final||0)+(Ve.cheeseCornMomos?.final||0)+(Ve.paneerMomos?.final||0)+(Ve.vegKurkureMomos?.final||0)+(Ve.chickenKurkureMomos?.final||0),0),je=Ie.reduce((qe,Ve)=>qe+(Ve.wastage?.dough||0)+(Ve.wastage?.stuffing||0)+(Ve.wastage?.batter||0)+(Ve.wastage?.coating||0),0),$e=Ie.filter(qe=>qe.approvalStatus==="approved").length,Ye=Ie.filter(qe=>qe.approvalStatus==="pending").length;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(On,{className:"w-6 h-6 text-orange-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:Ce.toLocaleString()}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"pieces"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ps,{className:"w-6 h-6 text-red-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:je.toFixed(2)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"kg"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(dE,{className:"w-6 h-6 text-green-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:$e}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Hr,{className:"w-6 h-6 text-yellow-600"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-gray-900",children:Ye}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]})]})})()}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),u==="production"&&(i||o)&&a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsxs("button",{onClick:()=>{Nt(JSON.parse(JSON.stringify(Se))),Ee(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Stock Alert Thresholds",children:[a.jsx(qo,{className:"w-5 h-5"}),"Alert Settings"]}),a.jsxs("button",{onClick:()=>{wt(Ke),Qt(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Momos Per Plate",children:[a.jsx(qo,{className:"w-5 h-5"}),"Plate Settings"]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{onClick:()=>oe(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[a.jsx(Dr,{className:"w-5 h-5"}),"Recalibrate Stock"]}),Q&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",new Date(Q.date).toLocaleDateString()]}),se&&!Q&&a.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),(i||s)&&n&&a.jsxs("button",{onClick:()=>{console.log(" Manage Items button clicked in Analytics"),n()},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Manage inventory items",children:[a.jsx(rr,{className:"w-5 h-5"}),"Manage Items"]})]}),u==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),a.jsxs("select",{value:vt||"all",onChange:X=>{const ke=X.target.value==="all"?null:X.target.value;console.log(" Production House Selector Changed:",ke),bt(ke)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(X=>a.jsxs("option",{value:X.id,children:[X.name," (ID: ",X.id,")"]},X.id))]})]})]})}),(()=>{const X=vt;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",u),console.log("  - selectedProductionHouseId:",vt),console.log("  - effectiveProductionHouseId:",X);const ke=X?e.productionHouses?.find(Le=>Le.id===X):null;console.log("  - Selected production house for stock:",ke),console.log("  - Total production records available:",ye.length),ye.length>0&&ye.length<=3&&console.log("  - All production records:",ye.map(Le=>({id:Le.id,storeId:Le.storeId,productionHouseId:Le.productionHouseId,date:Le.date})));const fe=ye.filter(Le=>{if(!X)return!0;const ot=Le.storeId===X,Fr=Le.productionHouseId===X;let Or=Le.productionHouseId;(!Or||Or.startsWith("STORE-"))&&Le.storeId&&(Or=(K.length>0?K:e.stores||[]).find(Za=>Za.id===Le.storeId)?.productionHouseId||null);const ra=Or||Le.storeId;return ot||Fr||ra===X});console.log("  - Filtered production for stock status:",fe.length),fe.length>0&&console.log("  - Sample production record:",{id:fe[0].id,storeId:fe[0].storeId,productionHouseId:fe[0].productionHouseId,date:fe[0].date});const le=new Date().toISOString().substring(0,7),Ie=fe.filter(Le=>Le.date.startsWith(le));console.log("  - Monthly filtered production:",Ie.length,"for month:",le),Ie.length>0&&console.log("  - Sample monthly production record:",Ie[0]);const Ce=e.inventoryItems?.filter(Le=>Le.category==="finished_product"&&Le.isActive&&(Le.linkedEntityType==="global"||Le.linkedEntityType==="production_house"&&Le.linkedEntityId===X))||[],je=Le=>Le.replace(/_([a-z])/g,ot=>ot[1].toUpperCase()),$e=Le=>{const ot=Le.replace(/_momo(s)?$/i,"");return je(ot)},Ye={};Ce.forEach(Le=>{const ot=$e(Le.name);Ye[ot]=0}),Ie.forEach(Le=>{Ce.forEach(ot=>{const Fr=$e(ot.name);let Or=0;const ra=Le[Fr+"Momos"],Ha=Le[Fr];ra?Or=typeof ra=="object"?ra.final||0:ra:Ha&&(Or=typeof Ha=="object"?Ha.final||0:Ha),Ye[Fr]=(Ye[Fr]||0)+Or})});let qe=X;if(X&&X.startsWith("STORE-")){const Le=e.stores?.find(ot=>ot.id===X);Le?.productionHouseId&&(qe=Le.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:X,resolvedUUID:qe}))}const Ve=e.productionRequests?.filter(Le=>{if(Le.status!=="delivered")return!1;const ot=Le.deliveredDate||Le.requestDate||Le.createdAt;if(!ot||!ot.startsWith(le))return console.log(" Filtered out request - wrong month:",{requestId:Le.id.slice(0,8),requestDate:ot,currentMonth:le,matches:ot?.startsWith(le)}),!1;const Fr=K.length>0?K:e.stores||[],Or=Fr.find(ra=>ra.id===Le.storeId);if(qe){const ra=Or?.productionHouseId===qe;return console.log(" Checking production request:",{requestId:Le.id.slice(0,8),storeId:Le.storeId,storeName:Or?.name,storeProductionHouseId:Or?.productionHouseId,productionHouseUUID:qe,deliveredDate:Le.deliveredDate,availableStores:Fr.length,matches:ra}),ra}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:X,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(Le=>Le.status==="delivered").length||0,fulfilledRequestsCount:Ve.length,stores:e.stores?.map(Le=>({id:Le.id,name:Le.name,productionHouseId:Le.productionHouseId}))||[],filteredProductionRecords:fe.length,allProductionData:ye.map(Le=>({id:Le.id.slice(0,8),date:Le.date,productionHouseId:Le.productionHouseId,storeId:Le.storeId,resolvedId:Le.productionHouseId||Le.storeId})),sampleRequest:Ve[0],sampleRequestData:Ve[0]?{id:Ve[0].id,storeId:Ve[0].storeId,requestDate:Ve[0].requestDate,status:Ve[0].status,chickenMomos:Ve[0].chickenMomos,vegMomos:Ve[0].vegMomos}:null});const Pt={};Ce.forEach(Le=>{const ot=$e(Le.name);Pt[ot]=0}),Ve.forEach(Le=>{Ce.forEach(ot=>{const Fr=$e(ot.name),Or=Le[Fr+"Momos"]||Le[Fr]||0;Pt[Fr]=(Pt[Fr]||0)+Or})});const Kt={};Ce.forEach(Le=>{const ot=$e(Le.name);Kt[ot]=se?.[ot]||se?.[Le.name]||se?.[Le.id]||0}),console.log(" Stock Calculation with Carry-Forward:"),console.log("  previousMonthStock (raw):",se),console.log("  Opening Balance (processed):",Kt),console.log("  Current Month Production:",Ye),console.log("  Current Month Deliveries:",Pt);const Ht={};Ce.forEach(Le=>{const ot=$e(Le.name);Ht[ot]=(Kt[ot]||0)+(Ye[ot]||0)-(Pt[ot]||0)}),console.log("  Final Stock:",Ht);const Ft=e.inventoryItems?.filter(Le=>Le.category==="finished_product"&&Le.isActive&&(Le.linkedEntityType==="global"||Le.linkedEntityType==="production_house"&&Le.linkedEntityId===X))||[];console.log(" Finished Products for Stock Display:",Ft.map(Le=>{const ot=$e(Le.name);return{name:Le.name,displayName:Le.displayName,stock:Ht[ot]}}));const Bt=Le=>Le.replace(/_([a-z])/g,ot=>ot[1].toUpperCase()),xt={chicken:"purple",chickenCheese:"pink",chicken_cheese:"pink",veg:"green",cheeseCorn:"yellow",cheese_corn:"yellow",paneer:"blue",vegKurkure:"teal",veg_kurkure:"teal",chickenKurkure:"red",chicken_kurkure:"red"},Tt=Ft.map(Le=>{const ot=Le.name.replace(/_momo(s)?$/i,""),Fr=Bt(ot);return{key:Le.name,camelKey:Fr,label:Le.displayName,color:xt[ot]||xt[Fr]||"indigo",unit:Le.unit}}),dr=Object.values(Kt).some(Le=>Le>0);return fe.length===0&&!dr?a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:X?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):a.jsxs(a.Fragment,{children:[Kt&&Object.values(Kt).some(Le=>Le>0)&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(fr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",a.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:Q?`Opening balance from recalibration on ${new Date(Q.date).toLocaleDateString()}`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Tt.map(({key:Le,camelKey:ot,label:Fr,color:Or,unit:ra})=>{const Ha=Kt[ot]||Kt[Le]||0,Ca=Ye[ot]||Ye[Le]||0,Za=Pt[ot]||Pt[Le]||0,gn=Ht[ot]||Ht[Le]||0,Bs=Ha>0||Ca>0||Za>0||gn!==void 0,Aa=Se[ot]??Se[Le]??{high:600,medium:300,low:150},Us=gn<Aa.low,Bf=gn>=Aa.low&&gn<Aa.medium,sd=gn>=Aa.medium&&gn<Aa.high,bo=gn>=Aa.high;let Fi="",$i="",Hs="";gn<0?(Fi=" Over-distributed",$i="bg-red-100 border-red-300 text-red-800",Hs="text-red-600"):Bs&&Us?(Fi=" Critical: Below Low Threshold",$i="bg-red-100 border-red-300 text-red-800",Hs="text-red-600"):Bs&&Bf?(Fi=" Low: Between Low & Medium",$i="bg-orange-100 border-orange-300 text-orange-800",Hs="text-orange-600"):Bs&&sd?(Fi=" Medium: Between Medium & High",$i="bg-yellow-100 border-yellow-300 text-yellow-800",Hs="text-yellow-700"):Bs&&bo&&(Fi=" Healthy: Above High Threshold",$i="bg-green-100 border-green-300 text-green-800",Hs="text-green-600");const id=Ca>0?(gn/Ca*100).toFixed(0):"0";return a.jsxs("div",{className:`bg-gradient-to-br from-${Or}-50 to-${Or}-100 border-2 border-${Or}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:Fr}),a.jsx("div",{className:"space-y-2",children:Bs?a.jsxs(a.Fragment,{children:[Ha>0&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),a.jsx("span",{className:"text-xl font-bold text-blue-800",children:Ha})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),a.jsx("span",{className:`text-lg font-bold text-${Or}-600`,children:Ca})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),a.jsx("span",{className:`text-lg font-bold text-${Or}-700`,children:Za})]}),a.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:`text-2xl font-bold ${Hs||`text-${Or}-800`}`,children:[gn," pcs / ",Math.round(gn/Ke)," plates"]})})]}),Ca>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:a.jsxs("span",{children:[id,"% remaining"]})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${Us||gn<0?"bg-red-500":Bf?"bg-orange-500":sd?"bg-yellow-500":bo?"bg-green-500":`bg-${Or}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(id)))}%`}})})]})]}),Fi&&a.jsx("div",{className:`border rounded-lg px-2 py-1 mt-2 ${$i}`,children:a.jsx("p",{className:"text-xs font-semibold",children:Fi})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-2 py-1 mt-2",children:a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Low"}),a.jsx("div",{className:"font-semibold text-red-600",children:Aa.low})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"Med"}),a.jsx("div",{className:"font-semibold text-yellow-600",children:Aa.medium})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600",children:"High"}),a.jsx("div",{className:"font-semibold text-green-600",children:Aa.high})]})]})})]}):a.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Stock"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"0"}),a.jsx("span",{className:"text-xs text-gray-500",children:ra||"pieces"})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-2 py-1 mt-2",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" Track in production logging to see stock"})})]})})]},Le)})})]})})()]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(X=>a.jsx("button",{onClick:()=>k(X),className:`px-4 py-2 rounded-lg text-sm transition-colors ${N===X?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),N==="custom"&&a.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),a.jsx("input",{type:"date",value:S.from,onChange:X=>_({...S,from:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),a.jsx("input",{type:"date",value:S.to,onChange:X=>_({...S,to:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),a.jsx(Bn,{width:"100%",height:400,children:a.jsxs(si,{data:(()=>{const X=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt;X&&e.productionHouses?.find(le=>le.id===X||le.storeId===X);const ke=ye.filter(le=>{if(X){const Ie=le.storeId===X,Ce=le.productionHouseId===X;let je=le.productionHouseId;(!je||je.startsWith("STORE-"))&&le.storeId&&(je=e.stores?.find(Ve=>Ve.id===le.storeId)?.productionHouseId||null);const $e=je||le.storeId;if(!(Ie||Ce||$e===X))return!1}return N==="custom"?le.date>=S.from&&le.date<=S.to:!0}),fe=new Map;return ke.forEach(le=>{let Ie=le.date,Ce=le.date;if(N==="weekly"){const $e=new Date(le.date),Ye=new Date($e.setDate($e.getDate()-$e.getDay())),qe=new Date(Ye);qe.setDate(qe.getDate()+6),Ie=Ye.toISOString().split("T")[0],Ce=`${Ye.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${qe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else N==="monthly"?(Ie=le.date.substring(0,7),Ce=Ie):N==="yearly"&&(Ie=le.date.substring(0,4),Ce=Ie);fe.has(Ie)||fe.set(Ie,{period:Ce,chickenMomos:0,chickenCheeseMomos:0,vegMomos:0,cheeseCornMomos:0,paneerMomos:0,vegKurkure:0,chickenKurkure:0});const je=fe.get(Ie);je.chickenMomos+=le.chickenMomos?.final||0,je.chickenCheeseMomos+=le.chickenCheeseMomos?.final||0,je.vegMomos+=le.vegMomos?.final||0,je.cheeseCornMomos+=le.cheeseCornMomos?.final||0,je.paneerMomos+=le.paneerMomos?.final||0,je.vegKurkure+=le.vegKurkureMomos?.final||0,je.chickenKurkure+=le.chickenKurkureMomos?.final||0}),Array.from(fe.values()).sort((le,Ie)=>le.period.localeCompare(Ie.period))})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(An,{dataKey:"period",tick:{fontSize:12},stroke:"#666",angle:N==="weekly"?-15:0,textAnchor:N==="weekly"?"end":"middle",height:N==="weekly"?60:30}),a.jsx(vn,{tick:{fontSize:12},stroke:"#666",label:{value:"Pieces",angle:-90,position:"insideLeft"}}),a.jsx(Ur,{content:a.jsx(kme,{})}),a.jsx(da,{}),a.jsx(gr,{dataKey:"chickenMomos",name:"Chicken Momos",fill:"#ef4444"}),a.jsx(gr,{dataKey:"chickenCheeseMomos",name:"Chicken Cheese",fill:"#f97316"}),a.jsx(gr,{dataKey:"vegMomos",name:"Veg Momos",fill:"#10b981"}),a.jsx(gr,{dataKey:"cheeseCornMomos",name:"Cheese Corn",fill:"#fbbf24"}),a.jsx(gr,{dataKey:"paneerMomos",name:"Paneer Momos",fill:"#3b82f6"}),a.jsx(gr,{dataKey:"vegKurkure",name:"Veg Kurkure",fill:"#84cc16"}),a.jsx(gr,{dataKey:"chickenKurkure",name:"Chicken Kurkure",fill:"#f59e0b"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),a.jsx(Bn,{width:"100%",height:250,children:a.jsxs(dh,{data:(()=>{const X=[];for(let ke=4;ke>=0;ke--){const fe=new Date;fe.setDate(fe.getDate()-ke);const le=fe.toISOString().split("T")[0],Ce=ye.filter(je=>{const $e=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt;if($e){const Ye=je.storeId===$e,qe=je.productionHouseId===$e,Ve=je.productionHouseId||je.storeId;if(!(Ye||qe||Ve===$e))return!1}return je.date===le}).reduce((je,$e)=>je+($e.wastage?.dough||0)+($e.wastage?.stuffing||0)+($e.wastage?.batter||0)+($e.wastage?.coating||0),0);X.push({date:le.substring(5),wastage:Ce})}return X})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#fca5a5"}),a.jsx(An,{dataKey:"date",tick:{fontSize:10}}),a.jsx(vn,{tick:{fontSize:10}}),a.jsx(Ur,{}),a.jsx(ui,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),a.jsx(Bn,{width:"100%",height:250,children:a.jsxs(dh,{data:(()=>{const X=[];for(let ke=4;ke>=0;ke--){const fe=new Date;fe.setDate(fe.getDate()-ke*7);const le=new Date(fe.setDate(fe.getDate()-fe.getDay())),Ie=new Date(le);Ie.setDate(Ie.getDate()+6);const je=ye.filter($e=>{const Ye=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt;if(Ye){const qe=$e.storeId===Ye,Ve=$e.productionHouseId===Ye,Pt=$e.productionHouseId||$e.storeId;if(!(qe||Ve||Pt===Ye))return!1}return $e.date>=le.toISOString().split("T")[0]&&$e.date<=Ie.toISOString().split("T")[0]}).reduce(($e,Ye)=>$e+(Ye.wastage?.dough||0)+(Ye.wastage?.stuffing||0)+(Ye.wastage?.batter||0)+(Ye.wastage?.coating||0),0);X.push({week:`W${5-ke}`,wastage:je})}return X})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#fed7aa"}),a.jsx(An,{dataKey:"week",tick:{fontSize:10}}),a.jsx(vn,{tick:{fontSize:10}}),a.jsx(Ur,{}),a.jsx(ui,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),a.jsx(Bn,{width:"100%",height:250,children:a.jsxs(dh,{data:(()=>{const X=[];for(let ke=4;ke>=0;ke--){const fe=new Date;fe.setMonth(fe.getMonth()-ke);const le=fe.toISOString().substring(0,7),Ce=ye.filter(je=>{const $e=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt;if($e){const Ye=je.storeId===$e,qe=je.productionHouseId===$e,Ve=je.productionHouseId||je.storeId;if(!(Ye||qe||Ve===$e))return!1}return je.date.startsWith(le)}).reduce((je,$e)=>je+($e.wastage?.dough||0)+($e.wastage?.stuffing||0)+($e.wastage?.batter||0)+($e.wastage?.coating||0),0);X.push({month:le.substring(5),wastage:Ce})}return X})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#fde68a"}),a.jsx(An,{dataKey:"month",tick:{fontSize:10}}),a.jsx(vn,{tick:{fontSize:10}}),a.jsx(Ur,{}),a.jsx(ui,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),a.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(X=>a.jsx("button",{onClick:()=>P(X),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${w===X?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),a.jsx(Bn,{width:"100%",height:400,children:a.jsxs(si,{data:(()=>{const X=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt,ke=ye.filter(le=>{if(X){const je=le.storeId===X,$e=le.productionHouseId===X,Ye=le.productionHouseId||le.storeId;if(!(je||$e||Ye===X))return!1}if(w==="custom")return le.date>=S.from&&le.date<=S.to;const Ie=new Date,Ce=new Date(le.date);if(w==="daily"){const je=new Date(Ie);return je.setDate(je.getDate()-5),Ce>=je}else if(w==="weekly"){const je=new Date(Ie);return je.setDate(je.getDate()-35),Ce>=je}else if(w==="monthly"){const je=new Date(Ie);return je.setMonth(je.getMonth()-5),Ce>=je}else if(w==="yearly"){const je=new Date(Ie);return je.setFullYear(je.getFullYear()-5),Ce>=je}return!0}),fe=new Map;return ke.forEach(le=>{let Ie=le.date,Ce=le.date;if(w==="weekly"){const $e=new Date(le.date),Ye=new Date($e.setDate($e.getDate()-$e.getDay())),qe=new Date(Ye);qe.setDate(qe.getDate()+6),Ie=Ye.toISOString().split("T")[0],Ce=`${Ye.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${qe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else w==="monthly"?(Ie=le.date.substring(0,7),Ce=Ie):w==="yearly"&&(Ie=le.date.substring(0,4),Ce=Ie);fe.has(Ie)||fe.set(Ie,{period:Ce,dough:0,stuffing:0,batter:0,coating:0});const je=fe.get(Ie);je.dough+=le.wastage?.dough||0,je.stuffing+=le.wastage?.stuffing||0,je.batter+=le.wastage?.batter||0,je.coating+=le.wastage?.coating||0}),Array.from(fe.values()).sort((le,Ie)=>le.period.localeCompare(Ie.period))})(),children:[a.jsx(la,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),a.jsx(An,{dataKey:"period",tick:{fontSize:12},angle:w==="weekly"?-15:0,textAnchor:w==="weekly"?"end":"middle",height:w==="weekly"?60:30}),a.jsx(vn,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),a.jsx(Ur,{content:a.jsx(Sme,{})}),a.jsx(da,{}),a.jsx(gr,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),a.jsx(gr,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),a.jsx(gr,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),a.jsx(gr,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),s&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(dE,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),ce?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{Me(Oe),ae(De),me(!1),Nr.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Zi,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:()=>{me(!1),q(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4"}),"Cancel"]})]}):a.jsxs("button",{onClick:()=>{q(JSON.parse(JSON.stringify(ge))),Be(Ne),me(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(V1,{className:"w-4 h-4"}),"Edit SOP"]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[a.jsx(Hr,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),a.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:ce?De:Ne,onChange:X=>{ce&&Be(Number(X.target.value))},disabled:!ce,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),a.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(ce?Oe:ge).map(([X,ke])=>{const fe={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"text-gray-900 mb-3",children:fe[X]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),a.jsx("input",{type:"number",value:ke.dough,disabled:!ce,onChange:le=>{ce&&q({...Oe,[X]:{...Oe[X],dough:Number(le.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ce?"bg-white":"bg-gray-100"}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),a.jsx("input",{type:"number",value:ke.stuffing,disabled:!ce,onChange:le=>{ce&&q({...Oe,[X]:{...Oe[X],stuffing:Number(le.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ce?"bg-white":"bg-gray-100"}`})]}),ke.batter!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),a.jsx("input",{type:"number",value:ke.batter,disabled:!ce,onChange:le=>{ce&&q({...Oe,[X]:{...Oe[X],batter:Number(le.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ce?"bg-white":"bg-gray-100"}`})]}),ke.coating!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),a.jsx("input",{type:"number",value:ke.coating,disabled:!ce,onChange:le=>{ce&&q({...Oe,[X]:{...Oe[X],coating:Number(le.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${ce?"bg-white":"bg-gray-100"}`})]})]})]},X)})})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[a.jsx(pn,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),a.jsx(Ja,{label:"Date:",value:Ge,onChange:Et})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),a.jsx("div",{className:"space-y-6",children:(()=>{const X=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt;console.log(" SOP Compliance Filter - analyticsMode:",u),console.log(" SOP Compliance Filter - selectedProductionHouseId:",vt),console.log(" SOP Compliance Filter - effectiveStoreId:",m),console.log(" SOP Compliance Filter - filterById:",X),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",Ge),console.log(" SOP Compliance Filter - All production dates:",[...new Set(ye.map(le=>le.date))]),console.log(" SOP Compliance Filter - Total production records:",ye.length),console.log(" SOP Compliance Filter - Approved production records:",ye.filter(le=>le.approvalStatus==="approved").length);const ke=[Ge],fe=[];for(const le of ke){const Ie=ye.filter($e=>{const Ye=u==="production"?vt:e.user?.designation==="production_incharge"?m:vt,Ve=(K.length>0?K:e.stores||[]).filter(ot=>ot.productionHouseId===Ye).map(ot=>ot.id),Pt=$e.storeId===Ye,Kt=$e.productionHouseId===Ye,Ft=($e.productionHouseId||$e.storeId)===Ye,Bt=$e.storeId&&Ve.includes($e.storeId),xt=$e.date===le,Tt=$e.approvalStatus==="approved",dr=Pt||Kt||Ft||Bt,Le=dr&&xt&&Tt;return console.log(" SOP Compliance - Checking production record:",{date:$e.date,storeId:$e.storeId,productionHouseId:$e.productionHouseId,approvalStatus:$e.approvalStatus,filterById:Ye,mappedStoreIds:Ve,matchesStoreId:Pt,matchesProductionHouseId:Kt,matchesFallback:Ft,matchesMappedStore:Bt,matchesDate:xt,isApproved:Tt,passesFilter:dr,finalResult:Le}),Ye&&!dr?!1:xt&&Tt});if(console.log(` SOP Compliance - Date ${le}: Found ${Ie.length} production records`),Ie.length===0)continue;const Ce={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},je={};Ie.forEach($e=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(Ye=>{const qe=$e[Ye];if(qe&&qe.final>0){const Ve=Ce[Ye];je[Ve]||(je[Ve]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),je[Ve].quantity+=qe.final,je[Ve].totalDough+=qe.dough||0,je[Ve].totalStuffing+=qe.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(Ye=>{const qe=$e[Ye];if(qe&&qe.final>0){const Ve=Ce[Ye];je[Ve]||(je[Ve]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),je[Ve].quantity+=qe.final,je[Ve].totalBatter+=qe.batter||0,je[Ve].totalCoating+=qe.coating||0}})}),fe.push({date:le,usage:je})}return fe.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Hr,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsxs("p",{children:["No approved production data found for ",new Date(Ge).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),a.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):fe.map(({date:le,usage:Ie})=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-gray-900 mb-4",children:new Date(le).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(Ie).map(([Ce,je])=>{if(je.quantity===0||Ce==="vegKurkure"||Ce==="chickenKurkure")return null;const $e={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},Ye=je.quantity>0?je.totalDough*1e3/je.quantity:0,qe=je.quantity>0?je.totalStuffing*1e3/je.quantity:0,Ve=je.quantity>0?je.totalBatter*1e3/je.quantity:0,Pt=je.quantity>0?je.totalCoating*1e3/je.quantity:0,Kt=ge[Ce].dough>0?(Ye-ge[Ce].dough)/ge[Ce].dough*100:0,Ht=ge[Ce].stuffing>0?(qe-ge[Ce].stuffing)/ge[Ce].stuffing*100:0,Ft=ge[Ce].batter>0?(Ve-ge[Ce].batter)/ge[Ce].batter*100:0,Bt=ge[Ce].coating>0?(Pt-ge[Ce].coating)/ge[Ce].coating*100:0,xt=1-Ne/100,Tt=1+Ne/100,dr=Ye>=ge[Ce].dough*xt&&Ye<=ge[Ce].dough*Tt,Le=qe>=ge[Ce].stuffing*xt&&qe<=ge[Ce].stuffing*Tt,ot=!ge[Ce].batter||Ve>=ge[Ce].batter*xt&&Ve<=ge[Ce].batter*Tt,Fr=!ge[Ce].coating||Pt>=ge[Ce].coating*xt&&Pt<=ge[Ce].coating*Tt,Or=dr&&Le&&ot&&Fr;return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${Or?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-900",children:$e[Ce]}),Or?a.jsx(Zi,{className:"w-5 h-5 text-green-600"}):a.jsx(Hr,{className:"w-5 h-5 text-red-600"})]}),a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",je.quantity," pcs"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:`flex justify-between items-center ${dr?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Dough:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Ye.toFixed(1),"g / ",ge[Ce].dough,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Kt)>Ne?"text-red-600":"text-green-600"}`,children:[Kt>0?"+":"",Kt.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:`flex justify-between items-center ${Le?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Stuffing:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[qe.toFixed(1),"g / ",ge[Ce].stuffing,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Ht)>Ne?"text-red-600":"text-green-600"}`,children:[Ht>0?"+":"",Ht.toFixed(1),"%"]})]})]}),ge[Ce].batter&&a.jsxs("div",{className:`flex justify-between items-center ${ot?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Batter:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Ve.toFixed(1),"g / ",ge[Ce].batter,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Ft)>Ne?"text-red-600":"text-green-600"}`,children:[Ft>0?"+":"",Ft.toFixed(1),"%"]})]})]}),ge[Ce].coating&&a.jsxs("div",{className:`flex justify-between items-center ${Fr?"text-gray-700":"text-red-700 font-semibold"}`,children:[a.jsx("span",{children:"Coating:"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{children:[Pt.toFixed(1),"g / ",ge[Ce].coating,"g"]}),a.jsxs("div",{className:`text-[10px] ${Math.abs(Bt)>Ne?"text-red-600":"text-green-600"}`,children:[Bt>0?"+":"",Bt.toFixed(1),"%"]})]})]})]})]},Ce)})})]},le))})()})]})]})]}),x==="production-requests"&&a.jsx("div",{children:a.jsx(voe,{context:e,highlightRequestId:r||null,selectedStoreId:f,onNavigateToManageItems:n})}),x==="recalibration-reports"&&a.jsx("div",{children:a.jsx(WI,{context:e,selectedStoreId:u==="production"?vt:t,onOpenRecalibration:()=>oe(!0),locationType:"production_house"})}),x==="store-recalibration"&&a.jsx("div",{children:a.jsx(WI,{context:e,selectedStoreId:m,locationType:"store"})})]}),U&&a.jsx(sN,{context:e,selectedStoreId:u==="production"?vt:m,onClose:()=>{oe(!1),u==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),xe(null),ee(null),setTimeout(()=>{console.log(" Timeout complete - fetching latest recalibration..."),gt()},1500))},isProductionHouse:u==="production"}),ze&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(qo,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Stock Alert Thresholds"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Customize alert levels for each momo type"})]})]}),a.jsx("button",{onClick:()=>{Ee(!1),Nt({})},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(en,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-green-200",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-yellow-200",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-orange-200",children:[a.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-red-200",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),a.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),a.jsx("div",{className:"p-6 space-y-6",children:(e.inventoryItems?.filter(fe=>fe.category==="finished_product"&&fe.isActive)||[]).map(fe=>{const le=fe.name.replace(/_([a-z])/g,Ie=>Ie[1].toUpperCase());return{key:fe.name,camelKey:le,label:fe.displayName}}).map(({key:fe,camelKey:le,label:Ie})=>{const Ce=He[le]??Se[le]??{high:600,medium:300,low:150};return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-3",children:Ie}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-green-700 font-semibold mb-1 block",children:"High Threshold (plates)"}),a.jsx("input",{type:"number",value:Ce.high,onChange:je=>{Nt({...He,[le]:{...Ce,high:Number(je.target.value)}})},className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",placeholder:"e.g., 1200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-yellow-700 font-semibold mb-1 block",children:"Medium Threshold (plates)"}),a.jsx("input",{type:"number",value:Ce.medium,onChange:je=>{Nt({...He,[le]:{...Ce,medium:Number(je.target.value)}})},className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"e.g., 600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-red-700 font-semibold mb-1 block",children:"Low Threshold (plates)"}),a.jsx("input",{type:"number",value:Ce.low,onChange:je=>{Nt({...He,[le]:{...Ce,low:Number(je.target.value)}})},className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50",placeholder:"e.g., 300"})]})]})]},le)})}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{Ee(!1),Nt({})},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{Fe(He),Ee(!1),Nt({}),Nr.success("Stock alert thresholds updated successfully")},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2",children:[a.jsx(Zi,{className:"w-5 h-5"}),"Save Thresholds"]})]})]})}),ft&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 p-6 rounded-t-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:a.jsx(qo,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl text-white",children:"Plate Conversion Settings"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Configure momos per plate"})]})]}),a.jsx("button",{onClick:()=>{Qt(!1),wt(Ke)},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:a.jsx(en,{className:"w-6 h-6 text-white"})})]})]}),a.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[a.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),a.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",a.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:yt,onChange:X=>{const ke=Number(X.target.value);ke>=1&&ke<=20&&wt(ke)},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-center text-2xl font-bold",placeholder:"6"}),a.jsx("p",{className:"text-xs text-blue-700 mt-2 text-center",children:"Enter a number between 1 and 20"})]}),a.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Stock Available:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["170 pcs / ",Math.round(170/yt)," plates"]})]})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{Qt(!1),wt(Ke)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),a.jsxs("button",{onClick:()=>{kt(yt),localStorage.setItem("momosPerPlate",yt.toString()),Qt(!1),Nr.success(`Plate conversion updated: ${yt} momos per plate`)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2",children:[a.jsx(Zi,{className:"w-5 h-5"}),"Save Settings"]})]})]})}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pE,{className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl",children:"Leave Details - Today"})]}),a.jsx("button",{onClick:()=>O(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:E===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(wn,{className:"w-8 h-8 text-green-600"})}),a.jsx("p",{className:"text-lg text-gray-900 mb-2",children:"Everyone is working today! "}),a.jsx("p",{className:"text-sm text-gray-600",children:e.user?.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"text-xl font-bold text-orange-600",children:E})," ",E===1?"employee":"employees"," on leave"]})}),a.jsx("div",{className:"space-y-3",children:M.map((X,ke)=>a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx(wn,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 font-semibold",children:X.employeeName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",X.employeeId]})]})]}),a.jsxs("div",{className:"ml-12 space-y-1",children:[X.storeName&&X.storeName!=="N/A"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(rr,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-gray-700",children:X.storeName}),X.storeId&&X.storeId!=="N/A"&&a.jsxs("span",{className:"text-gray-500",children:["(",X.storeId,")"]})]}),X.reason&&a.jsxs("div",{className:"flex items-start gap-2 text-sm mt-2",children:[a.jsx(Si,{className:"w-4 h-4 text-gray-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Reason:"}),a.jsx("p",{className:"text-gray-700",children:X.reason})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Date: ",new Date(X.leaveDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]})]})]})]}),a.jsx("div",{className:"ml-4",children:a.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Approved"})})]})},X.id||ke))})]})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200",children:a.jsx("button",{onClick:()=>O(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}function VI({userRole:e,selectedStoreId:t,currentUserId:r}){const[n,s]=L.useState("today"),[i,o]=L.useState(""),[l,u]=L.useState(""),[d,f]=L.useState("csv"),[p,m]=L.useState(!1),[x,v]=L.useState(!1),[y,b]=L.useState(null),[N,k]=L.useState(null),w=Bu();L.useEffect(()=>{(async()=>{const{data:{session:O}}=await w.auth.getSession();O?.access_token&&k(O.access_token)})()},[]);const P=()=>{const A=new Date;let O,F;switch(n){case"today":O=A.toISOString().split("T")[0],F=O;break;case"weekly":const W=new Date(A);W.setDate(A.getDate()-7),O=W.toISOString().split("T")[0],F=A.toISOString().split("T")[0];break;case"monthly":const Y=new Date(A.getFullYear(),A.getMonth(),1),Z=new Date(A.getFullYear(),A.getMonth()+1,0);O=Y.toISOString().split("T")[0],F=Z.toISOString().split("T")[0];break;case"custom":O=i,F=l;break}return{startDate:O,endDate:F}},S=async()=>{const{startDate:A,endDate:O}=P();if(!A||!O)return alert("Please select a valid date range"),null;if(!N)return alert("Not authenticated. Please log in again."),null;try{m(!0);const[F,W,Y,Z,re,ne]=await Promise.all([Vm(N),eN(N),tN(N),Zo(),Yo(),rN()]),U=(ce,me="date")=>ce.filter(Oe=>{const q=Oe[me],Ne=q>=A&&q<=O;if(t){const De=Oe.storeId===t;return Ne&&De}return Ne}),oe=U(F),K=U(W),R=U(Y),Q=U(re),ee=U(ne);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:F.length,filteredInventory:oe.length,totalSales:Y.length,filteredSales:R.length,totalOverheads:W.length,filteredOverheads:K.length,sampleSalesStoreIds:Y.slice(0,3).map(ce=>({date:ce.date,storeId:ce.storeId})),sampleOverheadStoreIds:W.slice(0,3).map(ce=>({date:ce.date,storeId:ce.storeId}))});const se=oe.reduce((ce,me)=>ce+(me.totalCost||0),0),xe=K.reduce((ce,me)=>ce+(me.amount||0),0),ge=R.reduce((ce,me)=>ce+(me.offlineSales||0)+(me.onlineSales||0),0),Me=Q.reduce((ce,me)=>ce+(me.amount||0),0);return{startDate:A,endDate:O,storeId:t,inventory:oe,overheads:K,sales:R,employees:Z,payouts:Q,production:ee,summary:{totalInventorySpend:se,totalOverheadSpend:xe,totalSales:ge,totalPayouts:Me}}}catch(F){return console.error("Error fetching export data:",F),alert("Failed to fetch data for export"),null}finally{m(!1)}},_=async()=>{const A=await S();A&&(b(A),v(!0))},E=A=>{let O=`Data Export Report
`;return O+=`Period: ${A.startDate} to ${A.endDate}
`,A.storeId&&(O+=`Store ID: ${A.storeId}
`),O+=`Generated on: ${new Date().toLocaleString()}

`,O+=`SUMMARY
`,O+=`Total Inventory Spend,${A.summary.totalInventorySpend.toLocaleString()}
`,O+=`Total Overhead Spend,${A.summary.totalOverheadSpend.toLocaleString()}
`,O+=`Total Sales,${A.summary.totalSales.toLocaleString()}
`,O+=`Total Payouts,${A.summary.totalPayouts.toLocaleString()}
`,O+=`Net Profit/Loss,${(A.summary.totalSales-A.summary.totalInventorySpend-A.summary.totalOverheadSpend-A.summary.totalPayouts).toLocaleString()}

`,O+=`
INVENTORY ITEMS
`,O+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,A.inventory.forEach(F=>{O+=`${F.date},"${F.category}","${F.itemName}",${F.quantity},"${F.unit}",${F.price||0},${F.totalCost}
`}),A.production&&A.production.length>0&&(O+=`
PRODUCTION DATA
`,O+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,A.production.forEach(F=>{O+=`${F.date},${F.chickenMomos?.final||0},${F.chickenCheeseMomos?.final||0},${F.vegMomos?.final||0},${F.cheeseCornMomos?.final||0},${F.paneerMomos?.final||0},${F.vegKurkureMomos?.final||0},${F.chickenKurkureMomos?.final||0},${F.wastage?.total||0}
`})),O+=`
OVERHEAD EXPENSES
`,O+=`Date,Category,Description,Amount
`,A.overheads.forEach(F=>{O+=`${F.date},"${F.category}","${F.description||"-"}",${F.amount}
`}),O+=`
SALES DATA
`,O+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,A.sales.forEach(F=>{O+=`${F.date},${F.paytmAmount||0},${F.cashAmount||0},${F.onlineSales||0},${F.employeeSalary||0},${F.actualCashInHand||0},${F.cashOffset||0},"${F.approvalRequired?"Pending Approval":"Approved"}"
`}),O+=`
EMPLOYEE PAYOUTS
`,O+=`Date,Employee Name,Employee ID,Amount
`,A.payouts.forEach(F=>{const W=A.employees.find(Y=>Y.id===F.employeeId);O+=`${F.date},"${F.employeeName}","${W?.employeeId||"-"}",${F.amount}
`}),O+=`
EMPLOYEE MASTER LIST
`,O+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,A.employees.forEach(F=>{O+=`"${F.employeeId}","${F.name}","${F.type}","${F.role||"-"}","${F.phone}",${F.dailyRate||"-"}
`}),O},C=A=>E(A),M=A=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${A.startDate} to ${A.endDate}</p>
          ${A.storeId?`<p><strong>Store ID:</strong> ${A.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${A.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${A.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${A.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${A.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(A.summary.totalSales-A.summary.totalInventorySpend-A.summary.totalOverheadSpend-A.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${A.inventory.map(F=>`
                <tr>
                  <td>${F.date}</td>
                  <td>${F.category}</td>
                  <td>${F.itemName}</td>
                  <td>${F.quantity}</td>
                  <td>${F.unit}</td>
                  <td>${F.price||0}</td>
                  <td>${F.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${A.production&&A.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${A.production.map(F=>`
                <tr>
                  <td>${F.date}</td>
                  <td>${F.chickenMomos?.final||0}</td>
                  <td>${F.chickenCheeseMomos?.final||0}</td>
                  <td>${F.vegMomos?.final||0}</td>
                  <td>${F.cheeseCornMomos?.final||0}</td>
                  <td>${F.paneerMomos?.final||0}</td>
                  <td>${F.vegKurkureMomos?.final||0}</td>
                  <td>${F.chickenKurkureMomos?.final||0}</td>
                  <td>${F.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${A.overheads.map(F=>`
                <tr>
                  <td>${F.date}</td>
                  <td>${F.category}</td>
                  <td>${F.description||"-"}</td>
                  <td>${F.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${A.sales.map(F=>`
                <tr>
                  <td>${F.date}</td>
                  <td>${F.paytmAmount||0}</td>
                  <td>${F.cashAmount||0}</td>
                  <td>${F.onlineSales||0}</td>
                  <td>${F.employeeSalary||0}</td>
                  <td>${F.actualCashInHand||0}</td>
                  <td>${F.cashOffset||0}</td>
                  <td>${F.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${A.payouts.map(F=>{const W=A.employees.find(Y=>Y.id===F.employeeId);return`
                  <tr>
                    <td>${F.date}</td>
                    <td>${F.employeeName}</td>
                    <td>${W?.employeeId||"-"}</td>
                    <td>${F.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${A.employees.map(F=>`
                <tr>
                  <td>${F.employeeId}</td>
                  <td>${F.name}</td>
                  <td>${F.type}</td>
                  <td>${F.role||"-"}</td>
                  <td>${F.phone}</td>
                  <td>${F.dailyRate?""+F.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,D=async()=>{const A=await S();if(!A)return;let O,F,W;const Y=`${A.startDate}_to_${A.endDate}`;switch(d){case"csv":O=E(A),F="text/csv",W=`export_${Y}.csv`;break;case"excel":O=C(A),F="application/vnd.ms-excel",W=`export_${Y}.xls`;break;case"pdf":O=M(A),F="text/html",W=`export_${Y}.html`;break;default:return}const Z=new Blob([O],{type:F}),re=URL.createObjectURL(Z),ne=document.createElement("a");ne.href=re,ne.download=W,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(re),alert(`Data exported successfully as ${W}`)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),a.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&a.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Dr,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${n==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Today"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),a.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${n==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Last 7 Days"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),a.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${n==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"This Month"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),a.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${n==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[a.jsx("div",{className:"font-medium",children:"Custom"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),n==="custom"&&a.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:i,onChange:A=>o(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:l,onChange:A=>u(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Si,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${d==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(V9,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),a.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${d==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(wp,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"Excel"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),a.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${d==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[a.jsx(Si,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("div",{className:"font-medium",children:"PDF/HTML"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[a.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),a.jsx("li",{children:" Production Data with all momo types and wastage"}),a.jsx("li",{children:" All Overhead Expenses categorized"}),a.jsx("li",{children:" Sales Data with payment breakdowns"}),a.jsx("li",{children:" Employee Payouts with detailed records"}),a.jsx("li",{children:" Employee Master List"}),a.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:_,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[a.jsx(Si,{className:"w-5 h-5"}),"Preview Data"]}),a.jsxs("button",{onClick:D,disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(wi,{className:"w-5 h-5"}),p?"Generating...":"Export Data"]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),a.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),a.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),a.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})}),e==="cluster_head"&&a.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-lg",children:""})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Production Data Cleanup"}),a.jsxs("p",{className:"text-sm text-red-800 mb-4",children:["Remove ALL transactional data (inventory logs, sales, stock requests, production data, notifications, etc.) to prepare for production launch.",a.jsx("strong",{className:"block mt-2",children:" This will DELETE:"})]}),a.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4 mb-3",children:[a.jsx("li",{children:" All inventory purchase logs"}),a.jsx("li",{children:" All sales records"}),a.jsx("li",{children:" All production logs & requests"}),a.jsx("li",{children:" All stock requests & recalibrations"}),a.jsx("li",{children:" All overhead & fixed costs"}),a.jsx("li",{children:" All notifications"})]}),a.jsx("p",{className:"text-sm text-green-800 mb-4",children:a.jsx("strong",{className:"block mt-2",children:" This will PRESERVE:"})}),a.jsxs("ul",{className:"text-sm text-green-800 space-y-1 ml-4 mb-4",children:[a.jsx("li",{children:" Inventory Items (product metadata)"}),a.jsx("li",{children:" Employee Master Data"}),a.jsx("li",{children:" Employee Payouts, Timesheets & Leaves"}),a.jsx("li",{children:" Stores & Production Houses"})]}),a.jsxs("button",{onClick:async()=>{if(confirm(` CRITICAL WARNING: This will PERMANENTLY remove ALL transactional data:

 Inventory logs, Sales, Production data, Stock requests, Overheads, Fixed costs, Notifications

 PRESERVED: Inventory items metadata, Employee master data, Payouts, Timesheets, Leaves, Stores, Production houses

This action CANNOT be undone!

Are you absolutely sure you want to proceed?`))try{m(!0);const A=await Z6();alert(` ${A.message}

 Total Deleted: ${A.totalDeleted} records

 Breakdown:
- Inventory Logs: ${A.stats.inventory}
- Sales: ${A.stats.sales}
- Item Sales: ${A.stats.itemSales}
- Overheads: ${A.stats.overheads}
- Fixed Costs: ${A.stats.fixedCosts}
- Stock Requests: ${A.stats.stockRequests}
- Stock Recalibrations: ${A.stats.stockRecalibrations}
- Production Data: ${A.stats.productionData}
- Production Requests: ${A.stats.productionRequests}
- Notifications: ${A.stats.notifications}`),window.location.reload()}catch(A){console.error("Error during cleanup:",A),alert(` Failed to cleanup production data: ${A.message}`)}finally{m(!1)}},disabled:p,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[a.jsx("span",{children:""}),p?"Cleaning up...":"Cleanup Production Data"]}),a.jsx("p",{className:"text-xs text-red-700 mt-3",children:" This action cannot be undone. Make sure you have exported all necessary data first."})]})]})})]}),x&&y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),a.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),a.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),a.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),a.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),a.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[a.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&a.jsxs("p",{children:["Store ID: ",y.storeId]}),a.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const _me=(e,t,r,n,s,i)=>{const o=s.reduce((d,f)=>d+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${n}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${n}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(d=>`
              <tr>
                <td>${new Date(d.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${d.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${n}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${n} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})};function GI({employeeId:e}){const[t,r]=L.useState(null),[n,s]=L.useState([]),[i,o]=L.useState(!0),[l,u]=L.useState("payouts"),[d,f]=L.useState(()=>{const C=new Date;return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`}),[p,m]=L.useState(null),[x,v]=L.useState(null);L.useEffect(()=>{y()},[e]);const y=async()=>{try{o(!0);const C=await Zo(),M=C.find(D=>D.employeeId===e);if(M){r(M);const A=(await Yo()).filter(O=>O.employeeId===M.id);if(s(A),M.inchargeId){const O=C.find(F=>F.id===M.inchargeId);if(O&&(m(O),O.inchargeId)){const F=C.find(W=>W.id===O.inchargeId);F&&v(F)}}}}catch(C){console.error("Error loading employee data:",C)}finally{o(!1)}},N=(()=>{if(!d)return n;const[C,M]=d.split("-");return n.filter(D=>{const A=new Date(D.date);return A.getFullYear()===parseInt(C)&&A.getMonth()+1===parseInt(M)})})(),k=N.reduce((C,M)=>C+M.amount,0),w=(C,M)=>!C&&!M?"N/A":C?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[C]||C:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[M||""]||M||"N/A",P=C=>["January","February","March","April","May","June","July","August","September","October","November","December"][C],_=(()=>{const C=new Date,M=[];for(let D=0;D<12;D++){const A=new Date(C.getFullYear(),C.getMonth()-D,1),O=P(A.getMonth()),F=A.getFullYear().toString(),W=n.filter(ne=>{const U=new Date(ne.date);return U.getMonth()===A.getMonth()&&U.getFullYear()===A.getFullYear()}),Y=W.reduce((ne,U)=>ne+U.amount,0),Z=new Date(A.getFullYear(),A.getMonth()+1,5),re=C>=Z;M.push({month:O,year:F,payouts:W,total:Y,isAvailable:re})}return M})(),E=()=>{const C=[],M=new Date;for(let D=0;D<12;D++){const A=new Date(M.getFullYear(),M.getMonth()-D,1),O=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}`;C.push({value:O,label:A.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return C};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),a.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),a.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ji,{className:"w-4 h-4"}),a.jsx("span",{children:"My Payouts"})]})}),a.jsx("button",{onClick:()=>u("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ka,{className:"w-4 h-4"}),a.jsx("span",{children:"My Manager"})]})})]})]}),a.jsxs("div",{className:"p-6",children:[l==="payouts"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[a.jsx(Dr,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),a.jsx("select",{value:d,onChange:C=>f(C.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:E().map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),a.jsx(Jn,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",k.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N.length," payment",N.length!==1?"s":""]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),a.jsx(pn,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("div",{className:"text-2xl text-gray-900",children:["",N.length>0?Math.round(k/N.length).toLocaleString():0]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),a.jsx(Ji,{className:"w-5 h-5 text-purple-600"})]}),a.jsx("div",{className:"text-2xl text-gray-900",children:N.length}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),N.length===0?a.jsxs("div",{className:"p-12 text-center bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ji,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),a.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):a.jsx("div",{className:"overflow-x-auto bg-white",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:N.sort((C,M)=>new Date(M.date).getTime()-new Date(C.date).getTime()).map(C=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(C.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",C.amount.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},C.id))})]})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Si,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),a.jsx("div",{className:"p-6 bg-white",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map((C,M)=>a.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${C.isAvailable&&C.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 font-semibold",children:[C.month," ",C.year]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[C.payouts.length," payment",C.payouts.length!==1?"s":""]})]}),C.isAvailable&&C.payouts.length>0?a.jsxs("button",{onClick:()=>_me(t.name,t.employeeId,C.month,C.year,C.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[a.jsx(wi,{className:"w-4 h-4"}),"Download"]}):a.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:C.payouts.length===0?"No Data":"Not Available"})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),a.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",C.total.toLocaleString("en-IN")]})]})]},M))})})]})]}),l==="manager"&&a.jsx("div",{children:p?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:p.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:p.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(H0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(H0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(wh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(vp,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:w(p.designation,p.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(ka,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:p.employeeId||"N/A"})]})]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),a.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),x&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:x.name}),a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),a.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:x.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),x&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(H0,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(H0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.phone||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(wh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(vp,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),a.jsx("div",{className:"font-medium text-gray-900",children:w(x.designation,x.role)||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[a.jsx(ka,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),a.jsx("div",{className:"font-medium text-gray-900",children:x.employeeId||"N/A"})]})]})]})]}),x&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),a.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),a.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ka,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-sm",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),a.jsx("li",{children:" This dashboard shows only your personal payout history"}),a.jsx("li",{children:" For any discrepancies, please contact your manager"}),a.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),a.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function Eme({onLogin:e,onSignup:t,error:r}){const[n,s]=L.useState(!1),[i,o]=L.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,u]=L.useState(!1),d=async f=>{f.preventDefault(),u(!0);try{n?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:a.jsx(rr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),a.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n?"Create your account":"Sign in to your account"})]}),r&&a.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),a.jsxs("form",{onSubmit:d,className:"space-y-3 sm:space-y-4",children:[n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:n})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:n,children:[a.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),a.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"})]})]}),i.role==="employee"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:n&&i.role==="employee"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),n&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?a.jsx("span",{children:"Processing..."}):a.jsxs(a.Fragment,{children:[n?a.jsx(Ni,{className:"w-5 h-5"}):a.jsx(y9,{className:"w-5 h-5"}),n?"Create Account":"Sign In"]})})]}),a.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:a.jsx("button",{onClick:()=>{s(!n),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function Tme({user:e}){const[t,r]=L.useState(d(new Date)),[n,s]=L.useState([]),[i,o]=L.useState(!1),[l,u]=L.useState([]);L.useEffect(()=>{p(),m()},[t]);function d(C){const M=new Date(C),D=M.getDay(),A=M.getDate()-D+(D===0?-6:1);return new Date(M.setDate(A))}function f(C){const M=[];for(let D=0;D<7;D++){const A=new Date(C);A.setDate(C.getDate()+D),M.push(A)}return M}const p=async()=>{try{o(!0);const C=await Th(e.employeeId);s(C)}catch(C){console.error("Error loading timesheet:",C)}finally{o(!1)}},m=async()=>{try{const C=await Hu(e.employeeId);u(C.filter(M=>M.status==="approved"||M.status==="pending"))}catch(C){console.error("Error loading leaves:",C)}},x=C=>{const M=C.toISOString().split("T")[0];return l.some(D=>D.leaveDate===M)},v=C=>{const M=C.toISOString().split("T")[0],D=n.find(A=>A.date===M);return D||{employeeId:e.employeeId,date:M,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:x(C)}},y=(C,M)=>{if(!C||!M)return 0;const[D,A]=C.split(":").map(Number),[O,F]=M.split(":").map(Number),W=D*60+A;return(O*60+F-W)/60},b=(C,M,D)=>{const A=C.toISOString().split("T")[0],O=n.find(Y=>Y.date===A);let F;O?F={...O,[M]:D}:F={employeeId:e.employeeId,date:A,startTime:M==="startTime"?D:"",endTime:M==="endTime"?D:"",totalHours:0,status:"pending",isLeave:!1},F.totalHours=y(F.startTime,F.endTime);const W=n.filter(Y=>Y.date!==A);s([...W,F])},N=async C=>{const M=v(C);if(!M.startTime||!M.endTime){alert("Please enter both start and end times");return}if(M.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(M),await p(),alert("Timesheet saved successfully")}catch(D){console.error("Error saving timesheet:",D),alert("Error saving timesheet")}finally{o(!1)}},k=async()=>{const M=f(t).map(D=>v(D)).filter(D=>D.startTime&&D.endTime);if(M.length===0){alert("Please enter timesheet data for at least one day");return}for(const D of M)if(D.totalHours<4){alert(`${D.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(M),await p(),alert("Week timesheet saved successfully")}catch(D){console.error("Error saving week timesheet:",D),alert("Error saving week timesheet")}finally{o(!1)}},w=()=>{const C=new Date(t);C.setDate(C.getDate()-7),r(C)},P=()=>{const C=new Date(t);C.setDate(C.getDate()+7),r(C)},S=async()=>{try{o(!0);const C=new Date(t);C.setDate(C.getDate()-7);const M=f(C),D=await Th(e.employeeId),A=M.map(Y=>{const Z=Y.toISOString().split("T")[0];return D.find(re=>re.date===Z)}).filter(Boolean);if(A.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const O=f(t),F=[];if(O.forEach((Y,Z)=>{const re=Y.toISOString().split("T")[0],ne=A[Z],U=n.find(K=>K.date===re);!x(Y)&&ne&&ne.startTime&&ne.endTime&&(!U||U.status!=="approved")&&F.push({employeeId:e.employeeId,date:re,startTime:ne.startTime,endTime:ne.endTime,totalHours:ne.totalHours,status:"pending",isLeave:!1})}),F.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const W=[...n];F.forEach(Y=>{const Z=W.findIndex(re=>re.date===Y.date);Z>=0?W[Z]=Y:W.push(Y)}),s(W),alert(`Copied ${F.length} day(s) from previous week! Don't forget to save.`)}catch(C){console.error("Error copying from previous week:",C),alert("Error copying data from previous week")}finally{o(!1)}},_=f(t),E=new Date(t);return E.setDate(E.getDate()+6),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),a.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(z1,{className:"w-4 h-4"}),"Previous Week"]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[a.jsx(Dr,{className:"w-5 h-5 text-purple-600"}),a.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",E.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),a.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",a.jsx(Go,{className:"w-4 h-4"})]})]}),a.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:a.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(J7,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map((C,M)=>{const D=v(C),A=x(C);return a.jsxs("tr",{className:A?"bg-yellow-50":M%2===0?"bg-gray-50":"bg-white",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:C.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:C.toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:A?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:D.startTime,onChange:O=>b(C,"startTime",O.target.value),disabled:D.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:A?a.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):a.jsx("input",{type:"time",value:D.endTime,onChange:O=>b(C,"endTime",O.target.value),disabled:D.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),a.jsx("td",{className:"px-6 py-4",children:A?a.jsx("span",{className:"text-yellow-700",children:"-"}):a.jsx("span",{className:`${D.totalHours>=4?"text-green-700":D.totalHours>0?"text-red-700":"text-gray-500"}`,children:D.totalHours>0?`${D.totalHours.toFixed(2)} hrs`:"-"})}),a.jsx("td",{className:"px-6 py-4",children:A?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Hr,{className:"w-4 h-4"}),"Leave"]}):D.status==="approved"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(fr,{className:"w-4 h-4"}),"Approved"]}):D.status==="rejected"?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(hi,{className:"w-4 h-4"}),"Rejected"]}):D.startTime&&D.endTime?a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Zn,{className:"w-4 h-4"}),"Pending"]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),a.jsx("td",{className:"px-6 py-4",children:!A&&D.status!=="approved"&&a.jsxs("button",{onClick:()=>N(C),disabled:i||!D.startTime||!D.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[a.jsx(zl,{className:"w-4 h-4"}),"Save"]})})]},M)})})]})})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("button",{onClick:k,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[a.jsx(zl,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function Cme({user:e}){const[t,r]=L.useState([]),[n,s]=L.useState(0),[i,o]=L.useState(0),[l,u]=L.useState(!1),[d,f]=L.useState(!1),[p,m]=L.useState({leaveDate:"",leaveType:"full",reason:""});L.useEffect(()=>{x(),v()},[]),L.useEffect(()=>{y()},[t,n]);const x=async()=>{try{u(!0);const w=await Hu(e.employeeId);r(w)}catch(w){console.error("Error loading leaves:",w)}finally{u(!1)}},v=async()=>{try{const w=await _D(e.employeeId,e.joiningDate||"2024-01-01");s(w)}catch(w){console.error("Error calculating leave balance:",w)}},y=()=>{const P=t.filter(S=>S.status==="pending").reduce((S,_)=>{const E=_.leaveType||"full";return S+(E==="half"?.5:1)},0);o(Math.max(0,n-P))},b=async()=>{if(!p.leaveDate||!p.reason){alert("Please fill all fields");return}if(t.find(P=>P.leaveDate===p.leaveDate)){alert("Leave already applied for this date");return}if(n<=0){alert("Insufficient leave balance");return}try{u(!0);const P={employeeId:e.employeeId,leaveDate:p.leaveDate,leaveType:p.leaveType,reason:p.reason,status:"pending",appliedAt:new Date().toISOString()};await SD(P),await x(),await v(),m({leaveDate:"",leaveType:"full",reason:""}),f(!1),alert("Leave application submitted successfully")}catch(P){console.error("Error applying leave:",P),alert("Error applying leave")}finally{u(!1)}},N=w=>{switch(w){case"approved":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[a.jsx(fr,{className:"w-4 h-4"}),"Approved"]});case"rejected":return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[a.jsx(hi,{className:"w-4 h-4"}),"Rejected"]});default:return a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Zn,{className:"w-4 h-4"}),"Pending"]})}},k=[...t].sort((w,P)=>new Date(P.leaveDate).getTime()-new Date(w.leaveDate).getTime());return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),a.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-lg mb-4 opacity-90",children:"Leave Balance"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Current Balance"}),a.jsx("div",{className:"text-5xl mb-1",children:n}),a.jsx("p",{className:"text-xs opacity-75",children:"approved leaves deducted"})]}),i!==n&&a.jsxs("div",{className:"pt-4 border-t border-white/20",children:[a.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Projected Balance"}),a.jsx("div",{className:"text-3xl mb-1",children:i}),a.jsx("p",{className:"text-xs opacity-75",children:"if all pending leaves are approved"})]}),a.jsx("p",{className:"text-sm opacity-75 mt-4",children:"3 leaves/month  accumulates monthly  resets yearly"})]}),a.jsx("div",{className:"bg-white/20 rounded-full p-6",children:a.jsx(Dr,{className:"w-16 h-16"})})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>f(!d),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[a.jsx(ao,{className:"w-5 h-5"}),"Apply for Leave"]})}),d&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),a.jsx("input",{type:"date",value:p.leaveDate,onChange:w=>m({...p,leaveDate:w.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Type"}),a.jsxs("select",{value:p.leaveType,onChange:w=>m({...p,leaveType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"full",children:"Full Day"}),a.jsx("option",{value:"half",children:"Half Day"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),a.jsx("input",{type:"text",value:p.reason,onChange:w=>m({...p,reason:w.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:b,disabled:l,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),a.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),l?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):k.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:k.map((w,P)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(w.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(w.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(w.leaveType||"full")==="full"?"Full Day":"Half Day"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:w.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.appliedAt?new Date(w.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:N(w.status)}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.approvedBy||"-"})]},P))})]})})]}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-900",children:[a.jsx("p",{className:"mb-2",children:a.jsx("strong",{children:"Leave Policy:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),a.jsx("li",{children:"Unused leaves carry forward within the year"}),a.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),a.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),a.jsx("li",{children:"All leave applications require manager approval"}),a.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function Ame({managerId:e}){const[t,r]=L.useState(!1),[n,s]=L.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${Pn}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const u=`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",u);const d=await fetch(u,{headers:{Authorization:`Bearer ${Pn}`}});console.log("Manager route status:",d.status);const f=await d.text();console.log("Manager route response:",f),o.managerRoute={url:u,status:d.status,ok:d.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(bp,{className:"w-6 h-6 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),a.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?a.jsxs(a.Fragment,{children:[a.jsx(m9,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):a.jsxs(a.Fragment,{children:[a.jsx(bp,{className:"w-4 h-4"}),"Test Routes"]})}),n&&a.jsxs("div",{className:"mt-4 space-y-3",children:[n.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",n.error]})}),n.allEmployees&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.allEmployees.ok?a.jsx(fr,{className:"w-4 h-4 text-green-600"}):a.jsx(hi,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",n.allEmployees.status]})]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.allEmployees.data,null,2)})]}),n.managerRoute&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.managerRoute.ok?a.jsx(fr,{className:"w-4 h-4 text-green-600"}):a.jsx(hi,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",n.managerRoute.status]})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",n.managerRoute.url]}),a.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(n.managerRoute.data,null,2)})]})]})]})}function Ome({managerId:e,role:t,selectedStoreId:r,isIncharge:n=!1,inchargeDesignation:s=null}){const[i,o]=L.useState([]),[l,u]=L.useState(""),[d,f]=L.useState([]),[p,m]=L.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",n),console.log("ApproveTimesheets: inchargeDesignation =",s);const x=L.useMemo(()=>{let _=i;return r&&(_=_.filter(E=>E.storeId===r||E.storeId===null||E.storeId===void 0)),n&&e&&(_=_.filter(E=>E.inchargeId===e)),_},[i,r,n,e]);L.useEffect(()=>{v()},[]),L.useEffect(()=>{x.length>0&&!x.find(_=>_.employeeId===l)?u(x[0].employeeId):x.length===0&&u("")},[x]),L.useEffect(()=>{l&&y()},[l]);const v=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",n);let _;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),_=await Gm(e),console.log("ApproveTimesheets: Received managers:",_),_.length>0&&(console.log(" MANAGERS RETURNED:"),_.forEach(E=>{console.log(`  - ${E.employeeId} (${E.name}) - clusterHeadId: ${E.clusterHeadId}, role: ${E.role}`)}))):n?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),_=await nN(e),console.log("ApproveTimesheets: Received employees under incharge:",_)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),_=await Wl(e),console.log("ApproveTimesheets: Received employees:",_)),o(_),_.length>0?u(_[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(_){console.error("Error loading employees:",_)}},y=async()=>{try{m(!0);const _=await Th(l);f(_.filter(E=>E.status==="pending"))}catch(_){console.error("Error loading timesheets:",_)}finally{m(!1)}},b=async _=>{try{m(!0),await(void 0)(_,e),await y(),alert("Timesheet approved successfully")}catch(E){console.error("Error approving timesheet:",E),alert("Error approving timesheet")}finally{m(!1)}},N=async _=>{const E=prompt("Enter rejection reason:");if(E)try{m(!0),await(void 0)(_,e,E),await y(),alert("Timesheet rejected")}catch(C){console.error("Error rejecting timesheet:",C),alert("Error rejecting timesheet")}finally{m(!1)}},k=d.length,w=i.find(_=>_.employeeId===l),P=t==="cluster_head"?"Operations Manager":"Employee",S=t==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",P," Timesheets"]}),a.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",S," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&a.jsx(Ame,{managerId:e}),k>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[k," timesheet",k>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",P]}),a.jsxs("select",{value:l,onChange:_=>u(_.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",P," --"]}),x.map(_=>a.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]}),t==="cluster_head"&&i.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),a.jsx("div",{className:"space-y-1",children:i.map(_=>a.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:_.employeeId}),a.jsx("span",{children:_.name}),a.jsxs("span",{className:"text-blue-600",children:["(",_.role,")"]})]},_.employeeId))}),a.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",a.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),w&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(ka,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:w.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",w.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",w.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),p?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):d.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((_,E)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(_.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(_.date).toLocaleDateString("en-US",{weekday:"short"})}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:_.startTime}),a.jsx("td",{className:"px-6 py-4 text-gray-900",children:_.endTime}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`${_.totalHours>=8?"text-green-700":_.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[_.totalHours.toFixed(2)," hrs"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[a.jsx(Zn,{className:"w-4 h-4"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>b(_.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(fr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>N(_.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(hi,{className:"w-4 h-4"}),"Reject"]})]})})]},E))})]})})]})]})})}function Pme({managerId:e,managerName:t,role:r,selectedStoreId:n,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=L.useState([]),[u,d]=L.useState(""),[f,p]=L.useState([]),[m,x]=L.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const v=L.useMemo(()=>{let E=o;return n&&(E=E.filter(C=>C.storeId===n||C.storeId===null||C.storeId===void 0)),s&&e&&(E=E.filter(C=>C.inchargeId===e)),E},[o,n,s,e]);L.useEffect(()=>{y()},[]),L.useEffect(()=>{v.length>0&&!v.find(E=>E.employeeId===u)?d(v[0].employeeId):v.length===0&&d("")},[v]),L.useEffect(()=>{u&&b()},[u]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let E;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),E=await Gm(e),console.log("ApproveLeaves: Received managers:",E)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),E=await nN(e),console.log("ApproveLeaves: Received employees under incharge:",E)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),E=await Wl(e),console.log("ApproveLeaves: Received employees:",E)),l(E),E.length>0?d(E[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(E){console.error("Error loading employees:",E)}},b=async()=>{try{x(!0);const E=await Hu(u);p(E.filter(C=>C.status==="pending"))}catch(E){console.error("Error loading leaves:",E)}finally{x(!1)}},N=async E=>{try{x(!0),console.log("Attempting to approve leave:",E),console.log("api.approveLeave function exists?",typeof ij),console.log("Available API functions:",Object.keys(JH).filter(C=>C.includes("Leave"))),await ij(E,e,t),await b(),alert("Leave approved successfully")}catch(C){console.error("Error approving leave:",C),alert("Error approving leave")}finally{x(!1)}},k=async E=>{const C=prompt("Enter rejection reason:");if(C)try{x(!0),await ED(E,e,t,C),await b(),alert("Leave rejected")}catch(M){console.error("Error rejecting leave:",M),alert("Error rejecting leave")}finally{x(!1)}},w=f.length,P=o.find(E=>E.employeeId===u),S=r==="cluster_head"?"Operations Manager":"Employee",_=r==="cluster_head"?"Operations Managers":"Employees";return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",S," Leaves"]}),a.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),w>0&&a.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-yellow-900 font-medium",children:[w," leave application",w>1?"s":""," pending approval"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",_," Found"]}),a.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&a.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[a.jsxs("li",{children:[" Go to ",a.jsx("strong",{children:"Employee Management"}),"  ",a.jsx("strong",{children:"Hierarchy Management"})," tab"]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),a.jsxs("li",{children:[" Make sure ",a.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",a.jsx("strong",{children:e})]}),a.jsxs("li",{children:[" Click ",a.jsx("strong",{children:"Save Changes"})]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",S]}),a.jsxs("select",{value:u,onChange:E=>d(E.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["-- Select ",S," --"]}),v.map(E=>a.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]})]}),P&&a.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(ka,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl mb-1",children:P.name}),a.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",P.employeeId]}),a.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",P.email]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),m?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),a.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((E,C)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(E.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(E.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(E.leaveType||"full")==="full"?"Full Day":"Half Day"})}),a.jsx("td",{className:"px-6 py-4 text-gray-700",children:E.reason}),a.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:E.appliedAt?new Date(E.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>N(E.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(fr,{className:"w-4 h-4"}),"Approve"]}),a.jsxs("button",{onClick:()=>k(E.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[a.jsx(hi,{className:"w-4 h-4"}),"Reject"]})]})})]},C))})]})})]})]})})}function Ime({managerId:e,role:t}){const[r,n]=L.useState([]),[s,i]=L.useState([]),[o,l]=L.useState(!1),[u,d]=L.useState({});L.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const p=await Wl(e);n(p);const m={};for(const x of p){const[v,y]=await Promise.all([Th(x.employeeId),Hu(x.employeeId)]);m[x.employeeId]={pendingTimesheets:v.filter(b=>b.status==="pending").length,pendingLeaves:y.filter(b=>b.status==="pending").length,approvedTimesheets:v.filter(b=>b.status==="approved").length,totalLeaves:y.filter(b=>b.status==="approved").length}}d(m)}else{const p=await Gm(e);i(p);const m={};for(const x of p){const v=await Wl(x.employeeId);m[x.employeeId]={employeeCount:v.length,...x.stats}}d(m)}}catch(p){if(p instanceof Error&&(p.message==="Not authenticated"||p.message==="Unauthorized"))return;console.error("Error loading data:",p)}finally{l(!1)}};return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),a.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(wn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),a.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Zn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingTimesheets||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Dr,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:Object.values(u).reduce((p,m)=>p+(m.pendingLeaves||0),0)}),a.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(p=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:p.name.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg text-gray-900",children:p.name}),a.jsx("p",{className:"text-sm text-gray-600",children:p.employeeId})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(wh,{className:"w-4 h-4"}),p.email]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Dr,{className:"w-4 h-4"}),"Joined: ",p.joiningDate?new Date(p.joiningDate).toLocaleDateString():"N/A"]})]}),u[p.employeeId]&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),a.jsx("div",{className:"text-xl text-yellow-700",children:u[p.employeeId].pendingTimesheets})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),a.jsx("div",{className:"text-xl text-pink-700",children:u[p.employeeId].pendingLeaves})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),a.jsx("div",{className:"text-xl text-green-700",children:u[p.employeeId].approvedTimesheets})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),a.jsx("div",{className:"text-xl text-blue-700",children:u[p.employeeId].totalLeaves})]})]}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),a.jsx("div",{className:"text-2xl text-purple-700",children:u[p.employeeId].employeeCount})]})})})})]},p.employeeId))}),(t==="manager"?r:s).length===0&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ka,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function m8({employee:e,onClose:t,onSave:r,clusterHeadId:n}){const[s,i]=L.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=L.useState(!1),[u,d]=L.useState([]);L.useEffect(()=>{f()},[]);const f=async()=>{try{const m=await Uu();d(m)}catch(m){console.error("Error loading stores:",m)}},p=async()=>{try{l(!0);const m={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(m.clusterHeadId=s.clusterHeadId||null),await Xm(e.employeeId,m),alert("Employee details updated successfully!"),r(),t()}catch(m){console.error("Error updating employee:",m),alert("Failed to update employee details")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:a.jsx(ka,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),a.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(en,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(ka,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Name:"}),a.jsx("span",{children:e.name})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(wh,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Email:"}),a.jsx("span",{children:e.email})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(vp,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),a.jsxs("select",{value:s.role,onChange:m=>i({...s,role:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(wn,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),a.jsx("input",{type:"text",value:s.clusterHeadId,onChange:m=>i({...s,clusterHeadId:m.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(vp,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),a.jsxs("select",{value:s.designation||"",onChange:m=>i({...s,designation:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Designation"}),a.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge"}),a.jsx("option",{value:"store_ops",children:"Store Operations"}),a.jsx("option",{value:"production_ops",children:"Production Operations"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Vo,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),a.jsxs("select",{value:s.storeId||"",onChange:m=>i({...s,storeId:m.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Store"}),u.map(m=>a.jsx("option",{value:m.id,children:m.name},m.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Vo,{className:"w-4 h-4 inline mr-2"}),"Department"]}),a.jsxs("select",{value:s.department||"",onChange:m=>i({...s,department:m.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Department"}),a.jsx("option",{value:"store_operations",children:"Store Operations"}),a.jsx("option",{value:"production",children:"Production"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),a.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),a.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[a.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:p,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[a.jsx(zl,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function Dme({clusterHeadId:e}){const[t,r]=L.useState([]),[n,s]=L.useState([]),[i,o]=L.useState([]),[l,u]=L.useState(!1),[d,f]=L.useState(null),[p,m]=L.useState({}),[x,v]=L.useState(null),[y,b]=L.useState(null);L.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0);const D=await Ps();console.log("All employees loaded:",D),console.log("Current cluster head ID:",e);const A=D.filter(Y=>(Y.role==="employee"||Y.role==="manager")&&Y.role!=="cluster_head");r(A),console.log("Filtered employees and managers:",A);const O=D.filter(Y=>Y.role==="manager"&&Y.clusterHeadId===e);s(O);const F=D.filter(Y=>Y.role==="cluster_head");o(F),console.log("Available managers (role=manager, clusterHeadId="+e+"):",O),console.log("Available cluster heads:",F);const W={};A.forEach(Y=>{Y.managerId&&(W[Y.employeeId]=Y.managerId)}),m(W)}catch(D){if(D instanceof Error&&(D.message==="Not authenticated"||D.message==="Unauthorized"))return;console.error("Error loading data:",D),alert("Failed to load data")}finally{u(!1)}},k=(D,A)=>{m(O=>({...O,[D]:A}))},w=async D=>{try{f(D);const A=p[D];if(!A){alert("Please select a manager");return}await Ym(D,A),alert("Manager assigned successfully!"),await N()}catch(A){console.error("Error assigning manager:",A),alert("Failed to assign manager")}finally{f(null)}},P=async(D,A)=>{if(confirm(`Are you sure you want to promote ${A} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{v(D),await Xm(D,{role:"manager",clusterHeadId:e}),alert(`${A} has been promoted to Manager!`),await N()}catch(O){console.error("Error promoting to manager:",O),alert("Failed to promote employee to manager")}finally{v(null)}},S=t.filter(D=>!D.managerId),_=t.filter(D=>D.managerId),E=D=>{if(!D)return"Unassigned";const A=n.find(F=>F.employeeId===D);if(A)return A.name;const O=i.find(F=>F.employeeId===D);return O?`${O.name} (Cluster Head)`:"Unknown Manager"},C=D=>{const A=[];return D.role==="manager"?(A.push(...i),A.push(...n.filter(O=>O.employeeId!==D.employeeId))):A.push(...n.filter(O=>O.employeeId!==D.employeeId)),A},M=D=>{if(!D)return a.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const A={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:A[D]||D})};return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading..."})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(wn,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(fr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(Hr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]})})]}),n.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx(Hr,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),a.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):a.jsxs(a.Fragment,{children:[S.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[a.jsx(Hr,{className:"w-5 h-5"}),"Unassigned Employees (",S.length,")"]}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(D=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name}),a.jsx("div",{className:"text-sm text-gray-500",children:D.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:D.employeeId}),D.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),D.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M(D.designation)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[D.employeeId]||"",onChange:A=>k(D.employeeId,A.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),C(D).map(A=>a.jsxs("option",{value:A.employeeId,children:[A.name," (",A.employeeId,")"]},A.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(D.employeeId),disabled:!p[D.employeeId]||d===D.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(zl,{className:"w-4 h-4"}),d===D.employeeId?"Saving...":"Assign"]}),D.role==="employee"&&a.jsxs("button",{onClick:()=>P(D.employeeId,D.name),disabled:x===D.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(uE,{className:"w-4 h-4"}),x===D.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>b(D),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(V1,{className:"w-4 h-4"}),"Edit"]})]})})]},D.employeeId))})]})})]}),_.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[a.jsx(fr,{className:"w-5 h-5"}),"Assigned Employees (",_.length,")"]}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),a.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(D=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name}),a.jsx("div",{className:"text-sm text-gray-500",children:D.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:D.employeeId}),D.role==="employee"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),D.role==="manager"&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M(D.designation)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:E(D.managerId)}),D.managerId&&a.jsx("div",{className:"text-xs text-gray-500",children:D.managerId})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:p[D.employeeId]||D.managerId||"",onChange:A=>k(D.employeeId,A.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Select a manager..."}),C(D).map(A=>a.jsxs("option",{value:A.employeeId,children:[A.name," (",A.employeeId,")"]},A.employeeId))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>w(D.employeeId),disabled:!p[D.employeeId]||p[D.employeeId]===D.managerId||d===D.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(zl,{className:"w-4 h-4"}),d===D.employeeId?"Saving...":"Update"]}),D.role==="employee"&&a.jsxs("button",{onClick:()=>P(D.employeeId,D.name),disabled:x===D.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[a.jsx(uE,{className:"w-4 h-4"}),x===D.employeeId?"Promoting...":"Promote"]}),a.jsxs("button",{onClick:()=>b(D),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(V1,{className:"w-4 h-4"}),"Edit"]})]})})]},D.employeeId))})]})})]}),t.length===0&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[a.jsx(wn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),a.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&a.jsx(m8,{employee:y,onClose:()=>b(null),onSave:N,clusterHeadId:e})]})}function YI({currentUser:e}){const[t,r]=L.useState([]),[n,s]=L.useState(!0);L.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await Ps(),p=f.find(N=>N.employeeId===e.employeeId);if(!p){s(!1);return}console.log("[Hierarchy Debug] Current user record:",p);const m=[p];let x=p,v=0;const y=10;for(;x&&v<y;){const N=x.clusterHeadId||x.managerId||x.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",N,"for",x.name),!N)break;const k=f.find(w=>w.employeeId===N);if(console.log("[Hierarchy Debug] Found superior:",k),k){if(m.some(w=>w.employeeId===k.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(m.push(k),x=k,k.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;v++}const b=m.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",b),r(b)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(p=>p[0]).join("").toUpperCase().slice(0,2),l=(f,p)=>!f&&!p?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[p||""]||p||"N/A",u=(f,p)=>p?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",d=(f,p)=>p?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return n?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?a.jsx("div",{className:"flex flex-col items-center",children:t.map((f,p)=>{const m=f.employeeId===e.employeeId,x=p===t.length-1;return a.jsxs("div",{className:"w-full flex flex-col items-center",children:[a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"inline-block",children:[a.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${u(f,m)}`,children:a.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),a.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${d(f,m)}`,children:[a.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),a.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),m&&a.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!x&&a.jsxs("div",{className:"flex flex-col items-center my-6",children:[a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsx(qm,{className:"w-6 h-6 text-gray-400"}),a.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),a.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function g8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:n=null}){const[s,i]=L.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=L.useState(0),[u,d]=L.useState(!1),f=e.role==="employee",p=e.role==="manager",m=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(p||m)&&!e.employeeId&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),a.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"You won't be able to see employees assigned to you"}),a.jsx("li",{children:"Approval workflows won't work properly"}),a.jsx("li",{children:"Employees you create won't be linked to your account"})]}),a.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[a.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),a.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Zn,{className:"w-4 h-4"}),"Update Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Dr,{className:"w-4 h-4"}),"Apply for Leave"]}),a.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(p6,{className:"w-4 h-4"}),"Hierarchy"]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Zn,{className:"w-4 h-4"}),"My Timesheet"]}),a.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(Dr,{className:"w-4 h-4"}),"My Leave"]}),a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve Leaves"]}),a.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(wn,{className:"w-4 h-4"}),"My Team"]})]}),m&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),a.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(ls,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),a.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(wn,{className:"w-4 h-4"}),"Manager Overview"]}),a.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(nB,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),a.jsxs("div",{children:[s==="timesheet"&&a.jsx(Tme,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&a.jsx(Cme,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(p||m||r)&&a.jsx(Ome,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="approve-leave"&&(p||m||r)&&a.jsx(Pme,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:n}),s==="team"&&p&&a.jsx(Ime,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&a.jsx(YI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&m&&a.jsx(YI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&m&&a.jsx(Dme,{clusterHeadId:e.employeeId||""},o)]})]})}function x8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,n=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return a.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Go,{className:"w-5 h-5 text-gray-400"}),a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:a.jsx(ni,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:n(e.designation)})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&a.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&a.jsx("div",{className:"space-y-3",children:e.managers.map(s=>a.jsx(x8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[a.jsx(Go,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(ka,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function Mme({userRole:e,selectedStoreId:t,accessToken:r}){const[n,s]=L.useState([]),[i,o]=L.useState([]),[l,u]=L.useState([]),[d,f]=L.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[p,m]=L.useState(!1),[x,v]=L.useState(!1),[y,b]=L.useState(!1),[N,k]=L.useState(null),[w,P]=L.useState(null),[S,_]=L.useState([]),[E,C]=L.useState([]);L.useEffect(()=>{M()},[t]);const M=async()=>{if(!r){console.error("No access token available");return}try{m(!0);const O=await ND(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:O.hierarchy?.length||0,unassignedManagersCount:O.unassignedManagers?.length||0,unassignedEmployeesCount:O.unassignedEmployees?.length||0,stats:O.stats,selectedStoreId:t}),s(O.hierarchy||[]),o(O.unassignedManagers||[]),u(O.unassignedEmployees||[]),f(O.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const Y=await a5(r);_(Y)}catch{console.log("User not authorized to view all cluster heads")}const W=(await Ps()).filter(Y=>Y.role==="manager");C(W)}catch(O){console.error("Error loading hierarchy:",O),O instanceof Error&&!O.message.includes("JWT")&&!O.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{m(!1)}},D=async(O,F)=>{try{await(void 0)(O,F),alert("Cluster head assigned successfully!"),v(!1),k(null),await M()}catch(W){console.error("Error assigning cluster head:",W),alert("Failed to assign cluster head")}},A=async(O,F)=>{try{await Ym(O,F),alert("Manager assigned successfully!"),b(!1),P(null),await M()}catch(W){console.error("Error assigning manager:",W),alert("Failed to assign manager")}};return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),a.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Vo,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalClusterHeads}),a.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ni,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalManagers}),a.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),a.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(wn,{className:"w-12 h-12 opacity-80"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl",children:d.totalEmployees}),a.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),a.jsx(p6,{className:"w-6 h-6 text-purple-600"})]}),n.length===0&&i.length===0&&l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsx("div",{className:"space-y-6 mb-6",children:n.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:a.jsx(Vo,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:O.name}),a.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),O.managers&&O.managers.length>0&&a.jsx("div",{className:"p-4 bg-gray-50",children:O.managers.map(F=>a.jsx(x8,{manager:F},F.employeeId))})]},O.employeeId))}),i.length>0&&i.some(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0)&&a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0).map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:a.jsx(ni,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:"text-gray-900",children:O.name}),a.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),(O.incharges||O.employees)&&a.jsxs("div",{className:"p-4 space-y-4",children:[O.incharges&&O.incharges.length>0&&a.jsx("div",{className:"space-y-3",children:O.incharges.map(F=>a.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[a.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Go,{className:"w-4 h-4 text-indigo-400"}),a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:a.jsx(ni,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-900",children:F.name}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:F.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:F.employeeId})]})]})}),F.employees&&F.employees.length>0&&a.jsx("div",{className:"p-3",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:F.employees.map(W=>a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[a.jsx(Go,{className:"w-3 h-3 text-gray-300"}),a.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:a.jsx(ka,{className:"w-3 h-3"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs text-gray-900 truncate",children:W.name}),a.jsx("div",{className:"text-xs text-gray-500 truncate",children:W.employeeId})]})]},W.employeeId))})})]},F.employeeId))}),O.employees&&O.employees.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.employees.map(F=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[a.jsx(Go,{className:"w-4 h-4 text-gray-400"}),a.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:a.jsx(ka,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 truncate",children:F.name}),a.jsx("div",{className:"text-xs text-gray-600 truncate",children:F.employeeId})]})]},F.employeeId))})]})]})]},O.employeeId))]})]})]}),(i.length>0||l.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),a.jsx("div",{className:"space-y-3",children:i.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(ni,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:O.name}),a.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),e==="cluster_head"&&a.jsx("button",{onClick:()=>{k(O),v(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},O.employeeId))})]}),l.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),a.jsx("div",{className:"space-y-3",children:l.map(O=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(ka,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:O.name}),a.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&a.jsx("button",{onClick:()=>{P(O),b(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},O.employeeId))})]})]}),x&&N&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",a.jsx("strong",{children:N.name})," (",N.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),a.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),S.map(O=>a.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const O=document.getElementById("clusterHeadSelect");O.value?D(N.employeeId,O.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{v(!1),k(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",a.jsx("strong",{children:w.name})," (",w.employeeId,")"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),a.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),E.map(O=>a.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{const O=document.getElementById("managerSelect");O.value?A(w.employeeId,O.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),a.jsx("button",{onClick:()=>{b(!1),P(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function Rme({user:e,selectedStoreId:t}){const[r,n]=L.useState("employees"),[s,i]=L.useState([]),[o,l]=L.useState([]),[u,d]=L.useState(!1),[f,p]=L.useState([]),[m,x]=L.useState(!1),[v,y]=L.useState(!1),[b,N]=L.useState(!1),[k,w]=L.useState(null),[P,S]=L.useState(""),[_,E]=L.useState(null),[C,M]=L.useState(!1),[D,A]=L.useState(!1),[O,F]=L.useState(null),[W,Y]=L.useState(""),[Z,re]=L.useState(""),[ne,U]=L.useState(!1),[oe,K]=L.useState(null),[R,Q]=L.useState(""),[ee,se]=L.useState("manager"),[xe,ge]=L.useState([]),[Me,ce]=L.useState([]),[me,Oe]=L.useState(!1),[q,Ne]=L.useState(null),[ae,De]=L.useState("employee"),[Be,Se]=L.useState(!1),[Fe,ze]=L.useState(null),[Ee,He]=L.useState(""),[Nt,Ke]=L.useState(!1),[kt,ft]=L.useState(null),[Qt,yt]=L.useState(!1),[wt,vt]=L.useState(null),[bt,Gt]=L.useState("none"),[tn,ur]=L.useState(!1),[zr,ye]=L.useState(null),[ut,at]=L.useState(""),[Ge,Et]=L.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const st=e.role==="manager",pt=e.role==="cluster_head";L.useEffect(()=>{Ge.role==="cluster_head"&&Et(V=>({...V,employmentType:"fulltime"}))},[Ge.role]),L.useEffect(()=>{et(),pt&&Mt()},[t]);const Mt=async()=>{try{const V=await Uu();p(V)}catch(V){if(V instanceof Error&&(V.message==="Not authenticated"||V.message==="Unauthorized"))return;console.error("Error loading stores:",V)}},et=async()=>{try{x(!0);let V;st&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),V=await Wl(e.employeeId),console.log(" Loaded employees:",V)):pt?(console.log(" Loading all employees for cluster head"),V=await Ps(),t&&(V=V.filter(ue=>ue.storeId===t||ue.storeId===null||ue.storeId===void 0))):V=await Ps(),i(V);try{const ue=await lD();l(ue)}catch(ue){console.error("Error loading archived employees:",ue)}}catch(V){console.error("Error loading employees:",V),alert("Failed to load employees")}finally{x(!1)}},mt=async()=>{try{const ue=(await Ps()).map(ve=>{const Xe=ve.employeeId.match(/BM(\d+)/);return Xe?parseInt(Xe[1]):0}).filter(ve=>ve>0);return`BM${(ue.length>0?Math.max(...ue)+1:1).toString().padStart(3,"0")}`}catch(V){return console.error("Error generating employee ID:",V),`BM${Date.now().toString().slice(-3)}`}},It=(V,ue)=>{const _e=V.target.files?.[0];if(!_e)return;const ve=new FileReader;ve.onloadend=()=>{const Xe=ve.result;ue==="front"?Y(Xe):re(Xe)},ve.readAsDataURL(_e)},ar=async()=>{if(!Ge.name||!Ge.email||!Ge.password){alert("Please fill all required fields");return}if(st&&Ge.role==="manager"){alert("Only Cluster Heads can create managers");return}try{x(!0);const V=await mt(),ue={employeeId:V,name:Ge.name,email:Ge.email,password:Ge.password,role:Ge.role,employmentType:Ge.employmentType,joiningDate:Ge.joiningDate,dob:Ge.dob,phone:Ge.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};Ge.role==="employee"?(ue.managerId=e.employeeId,st&&e.storeId&&(ue.storeId=e.storeId)):Ge.role==="manager"&&(ue.clusterHeadId=e.employeeId,Ge.storeId&&(ue.storeId=Ge.storeId)),W&&(ue.aadharFront=W),Z&&(ue.aadharBack=Z),await cD(ue),alert(` Employee created successfully!
      
Employee ID: ${V}
Name: ${Ge.name}
Email: ${Ge.email}
Password: ${Ge.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),Et({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),Y(""),re(""),y(!1),await et()}catch(V){console.error("Error creating employee:",V),alert("Failed to create employee. Email might already be in use.")}finally{x(!1)}},gt=async V=>{if(confirm("Are you sure you want to delete this employee?"))try{x(!0),await uD(V),alert("Employee deleted successfully"),await et()}catch(ue){console.error("Error deleting employee:",ue),alert("Failed to delete employee")}finally{x(!1)}},lr=V=>{w(V),N(!0)},Sr=async()=>{if(!zr||!ut){alert("Please enter a new password");return}try{x(!0);const V=await hD(zr.employeeId,ut);alert(` Password reset successfully!

Employee: ${V.credentials.employeeId} - ${zr.name}
Email: ${V.credentials.email}
New Password: ${V.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),ur(!1),ye(null),at("")}catch(V){console.error("Error resetting password:",V),alert("Failed to reset password: "+(V instanceof Error?V.message:"Unknown error"))}finally{x(!1)}},ht=async()=>{if(k)try{x(!0);const V={name:k.name,email:k.email,role:k.role,employmentType:k.employmentType,joiningDate:k.joiningDate,dob:k.dob,phone:k.phone,status:k.status};console.log("Updating employee with data:",V),await Xm(k.employeeId,V),alert("Employee updated successfully!"),N(!1),w(null),await et()}catch(V){console.error("Error updating employee - full error:",V),console.error("Error updating employee - error message:",V instanceof Error?V.message:String(V)),alert(`Failed to update employee: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},sr=()=>{const V=s.length,ue=s.filter(ct=>ct.role==="manager").length,_e=s.filter(ct=>ct.employmentType==="fulltime").length,ve=s.filter(ct=>ct.employmentType==="contract").length,Xe=s.filter(ct=>ct.status==="active").length;return{total:V,managers:ue,fulltime:_e,contract:ve,active:Xe}},qt=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{x(!0);const V=await fD();F(V),A(!0),await et()}catch(V){console.error("Error running migration:",V),alert(`Migration failed: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},Xr=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{x(!0);const V=await yD();alert(` Successfully synced ${V.synced} employee designations!

${V.skipped>0?`Skipped ${V.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await et()}catch(V){console.error("Error syncing designations:",V),alert(`Sync failed: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},wr=async V=>{try{const ue=await Ps(),_e=ue.filter(Xe=>Xe.role==="manager"),ve=ue.filter(Xe=>Xe.designation==="store_incharge"||Xe.designation==="production_incharge");ge(_e),ce(ve),K(V),V.inchargeId?(se("incharge"),Q(V.inchargeId)):(se("manager"),Q(V.managerId||"")),U(!0)}catch(ue){console.error("Error loading managers:",ue),alert("Failed to load managers")}},pr=async()=>{if(!oe||!R){alert("Please select a supervisor");return}try{x(!0),ee==="incharge"?(await xD(oe.employeeId,R),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await Ym(oe.employeeId,R),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),U(!1),K(null),Q(""),await et()}catch(V){console.error("Error assigning supervisor:",V),alert(`Failed to assign supervisor: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},B=V=>{if(!V)return"No manager assigned";const ue=s.find(_e=>_e.employeeId===V);return ue?`${ue.name} (${ue.employeeId})`:`Manager ${V}`},z=V=>{Ne(V),De(V.role),Oe(!0)},H=async()=>{if(q)try{x(!0),await pD(q.employeeId,ae),alert(`Role updated successfully from "${q.role}" to "${ae}"!`),Oe(!1),Ne(null),await et()}catch(V){console.error("Error updating role:",V),alert(`Failed to update role: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},J=V=>{ze(V),He(V.storeId||""),Se(!0)},te=async()=>{if(!(!Fe||!Ee))try{x(!0),await mD(Fe.employeeId,Ee);const V=f.find(ue=>ue.id===Ee)?.name||Ee;alert(`Store updated successfully! ${Fe.name} is now assigned to ${V}`),Se(!1),ze(null),await et()}catch(V){console.error("Error updating store:",V),alert(`Failed to update store: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},ie=V=>{vt(V),V.designation==="store_incharge"?Gt("store_incharge"):V.designation==="production_incharge"?Gt("production_incharge"):Gt("none"),yt(!0)},we=async()=>{if(wt)try{x(!0);const V=bt==="none"?null:bt,ue=bt==="store_incharge"?"store_operations":bt==="production_incharge"?"production":null;await gD(wt.employeeId,V,ue);const _e=bt==="store_incharge"?"Store Incharge":bt==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${wt.name} is now ${_e}`),yt(!1),vt(null),await et()}catch(V){console.error("Error updating designation:",V),alert(`Failed to update designation: ${V instanceof Error?V.message:String(V)}`)}finally{x(!1)}},Pe=sr();return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),a.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Pe.total})]}),a.jsx(wn,{className:"w-8 h-8 text-purple-500"})]})}),pt&&a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Pe.managers})]}),a.jsx(wn,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Pe.fulltime})]}),a.jsx(Si,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Pe.contract})]}),a.jsx(Si,{className:"w-8 h-8 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),a.jsx("p",{className:"text-2xl text-gray-900",children:Pe.active})]}),a.jsx(wn,{className:"w-8 h-8 text-pink-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>n("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(wn,{className:"w-5 h-5"}),a.jsx("span",{children:"Employee List"})]})}),a.jsx("button",{onClick:()=>n("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(wn,{className:"w-5 h-5"}),a.jsx("span",{children:"Hierarchy"})]})}),a.jsx("button",{onClick:()=>n("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Jn,{className:"w-5 h-5"}),a.jsx("span",{children:"Payroll"})]})}),a.jsx("button",{onClick:()=>n("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Zn,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?a.jsx(Mme,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?a.jsx(DF,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?a.jsx(g8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(I9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:P,onChange:V=>S(V.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(Ni,{className:"w-5 h-5"}),"Add ",pt?"Employee/Manager":"Employee"]}),pt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(c9,{className:"w-5 h-5"}),"Create Login Accounts"]}),a.jsxs("button",{onClick:qt,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[a.jsx(jp,{className:"w-5 h-5"}),"Migrate Stores"]}),a.jsxs("button",{onClick:Xr,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[a.jsx(ni,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsxs("h2",{className:"text-2xl",children:["Create New ",pt?"Employee/Manager":"Employee"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[pt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:Ge.role,onChange:V=>Et({...Ge,role:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:Ge.employmentType,onChange:V=>Et({...Ge,employmentType:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:Ge.role==="cluster_head",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),Ge.role!=="cluster_head"&&a.jsx("option",{value:"contract",children:"Contract"})]}),Ge.role==="cluster_head"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:Ge.name,onChange:V=>Et({...Ge,name:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:Ge.email,onChange:V=>Et({...Ge,email:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:Ge.password,onChange:V=>Et({...Ge,password:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:Ge.dob,onChange:V=>Et({...Ge,dob:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:Ge.phone,onChange:V=>Et({...Ge,phone:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:Ge.joiningDate,onChange:V=>Et({...Ge,joiningDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),pt&&Ge.role==="manager"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),a.jsxs("select",{value:Ge.storeId,onChange:V=>Et({...Ge,storeId:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(V=>a.jsxs("option",{value:V.id,children:[V.name," ",V.location&&`- ${V.location}`]},V.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),st&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),Ge.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Kd,{className:"w-5 h-5"}),W?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:V=>It(V,"front"),className:"hidden"})]}),W&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Kd,{className:"w-5 h-5"}),Z?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:V=>It(V,"back"),className:"hidden"})]}),Z&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:ar,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Creating...":"Create Employee"}),a.jsx("button",{onClick:()=>{y(!1),Et({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),Y(""),re("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),b&&k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[pt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),a.jsxs("select",{value:k.role,onChange:V=>w({...k,role:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"manager",children:"Manager"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),a.jsxs("select",{value:k.employmentType,onChange:V=>w({...k,employmentType:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"fulltime",children:"Full-Time"}),a.jsx("option",{value:"contract",children:"Contract"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:k.name,onChange:V=>w({...k,name:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:k.email,onChange:V=>w({...k,email:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),a.jsx("input",{type:"date",value:k.dob,onChange:V=>w({...k,dob:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:k.phone,onChange:V=>w({...k,phone:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),a.jsx("input",{type:"date",value:k.joiningDate,onChange:V=>w({...k,joiningDate:V.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),k.role==="employee"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Kd,{className:"w-5 h-5"}),W?"Change Front":"Upload Front",a.jsx("input",{type:"file",accept:"image/*",onChange:V=>It(V,"front"),className:"hidden"})]}),W&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[a.jsx(Kd,{className:"w-5 h-5"}),Z?"Change Back":"Upload Back",a.jsx("input",{type:"file",accept:"image/*",onChange:V=>It(V,"back"),className:"hidden"})]}),Z&&a.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:ht,disabled:m,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Employee"}),a.jsx("button",{onClick:()=>{N(!1),w(null),Y(""),re("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),pt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),pt&&a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?a.jsx("tr",{children:a.jsx("td",{colSpan:pt?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const V=s.filter(ue=>P===""||ue.employeeId.toLowerCase().includes(P.toLowerCase())||ue.name.toLowerCase().includes(P.toLowerCase())||ue.email.toLowerCase().includes(P.toLowerCase()));return V.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:pt?10:8,className:"px-6 py-8 text-center text-gray-500",children:P?"No employees found matching your search":"No employees found"})}):V.map(ue=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:ue.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:ue.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:ue.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.role==="manager"?"bg-blue-100 text-blue-700":ue.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:ue.role==="manager"?"Manager":ue.role==="cluster_head"?"Cluster Head":"Employee"})}),pt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue.storeId?a.jsx("span",{className:"text-sm text-gray-900",children:f.find(_e=>_e.id===ue.storeId)?.name||ue.storeId}):a.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),pt&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue.designation==="operations_incharge"?a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):ue.designation==="store_incharge"?a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):ue.designation==="production_incharge"?a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):ue.designation==="store_ops"?a.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):ue.designation==="production_ops"?a.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):a.jsx("span",{className:"text-sm text-gray-400",children:""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:ue.employmentType==="fulltime"?"Full-Time":"Contract"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(ue.joiningDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ue.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ue.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>E(ue),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(Si,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>gt(ue.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(ps,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>lr(ue),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:a.jsx(ji,{className:"w-5 h-5"})}),pt&&a.jsx("button",{onClick:()=>{ft(ue),Ke(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:a.jsx(ni,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{ye(ue),ur(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:a.jsx(d9,{className:"w-5 h-5"})}),pt&&ue.role==="employee"&&a.jsx("button",{onClick:()=>wr(ue),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:a.jsx(ni,{className:"w-5 h-5"})}),pt&&ue.role!=="cluster_head"&&a.jsx("button",{onClick:()=>J(ue),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:a.jsx(Ci,{className:"w-5 h-5"})}),pt&&ue.role==="employee"&&a.jsx("button",{onClick:()=>ie(ue),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:a.jsx(ni,{className:"w-5 h-5"})}),pt&&!["employee","manager","cluster_head"].includes(ue.role)&&a.jsx("button",{onClick:()=>z(ue),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:a.jsx(Hr,{className:"w-5 h-5"})})]})})]},ue.employeeId))})()})]})})}),pt&&o.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zn,{className:"w-6 h-6 text-gray-500"}),a.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),a.jsx("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:u?"Hide":"Show"})]}),u&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(V=>{const ue=new Date(V.joiningDate||V.createdAt),_e=new Date(V.releasedAt),ve=_e.getTime()-ue.getTime(),Xe=Math.floor(ve/(1e3*60*60*24)),ct=Math.floor(Xe/365),tt=Math.floor(Xe%365/30),Qe=Xe%30;let Ut="";return ct>0&&(Ut+=`${ct}y `),tt>0&&(Ut+=`${tt}m `),(Qe>0||Ut==="")&&(Ut+=`${Qe}d`),a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:V.employeeId})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:V.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${V.role==="manager"?"bg-blue-100 text-blue-700":V.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:V.role==="cluster_head"?"Cluster Head":V.role.charAt(0).toUpperCase()+V.role.slice(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(V.joiningDate||V.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:_e.toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-green-600",children:["",V.totalEarnings?.toLocaleString()||"0"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:Ut.trim()})]},V.employeeId)})})]})})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),a.jsx("p",{className:"text-gray-900",children:_.employeeId})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("p",{className:"text-gray-900",children:_.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:_.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("p",{className:"text-gray-900",children:_.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),a.jsx("p",{className:"text-gray-900",children:_.employmentType})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),a.jsx("p",{className:"text-gray-900",children:new Date(_.joiningDate).toLocaleDateString()})]}),_.dob&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),a.jsx("p",{className:"text-gray-900",children:new Date(_.dob).toLocaleDateString()})]}),_.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:_.phone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),a.jsx("p",{className:"text-gray-900",children:_.status})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),a.jsx("p",{className:"text-gray-900",children:_.createdBy})]}),_.designation&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),a.jsx("p",{className:"text-gray-900",children:_.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),_.department&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),a.jsx("p",{className:"text-gray-900",children:_.department==="store_operations"?"Store Operations":"Production"})]}),_.managerId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),a.jsx("p",{className:"text-gray-900",children:B(_.managerId)})]}),_.inchargeId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),a.jsx("p",{className:"text-gray-900",children:B(_.inchargeId)})]})]}),_.aadharFront&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),a.jsx("img",{src:_.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),_.aadharBack&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),a.jsx("img",{src:_.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),a.jsx("button",{onClick:()=>E(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),C&&a.jsx(IF,{onClose:()=>M(!1),employees:s.filter(V=>V.status==="active")}),D&&O&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:a.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[a.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.total})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.updated})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),a.jsx("p",{className:"text-2xl text-green-900",children:O.summary.skipped})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),a.jsx("p",{className:"text-2xl text-yellow-900",children:O.summary.needsManualAssignment||0})]}),O.summary.errors>0&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),a.jsx("p",{className:"text-2xl text-red-900",children:O.summary.errors})]})]})]}),O.updates&&O.updates.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:O.updates.map((V,ue)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:V.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:V.assignedStoreId})]},ue))})]})})]}),O.manualAssignmentNeeded&&O.manualAssignmentNeeded.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),a.jsx("tbody",{className:"divide-y divide-yellow-200",children:O.manualAssignmentNeeded.map((V,ue)=>a.jsxs("tr",{className:"hover:bg-yellow-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:V.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:V.reason})]},ue))})]})}),a.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),O.errorDetails&&O.errorDetails.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),a.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-red-100 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),a.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),a.jsx("tbody",{className:"divide-y divide-red-200",children:O.errorDetails.map((V,ue)=>a.jsxs("tr",{className:"hover:bg-red-100",children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.employeeId}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:V.name}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:V.role}),a.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:V.reason})]},ue))})]})})]}),a.jsx("button",{onClick:()=>A(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),ne&&oe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),a.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[oe.name," (",oe.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[(oe.managerId||oe.inchargeId)&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),a.jsx("p",{className:"text-blue-900",children:oe.inchargeId?`${B(oe.inchargeId)} (Incharge)`:B(oe.managerId||"")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"manager",checked:ee==="manager",onChange:V=>{se(V.target.value),Q("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",value:"incharge",checked:ee==="incharge",onChange:V=>{se(V.target.value),Q("")},className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",ee==="manager"?"Operations Manager":"Incharge"," *"]}),a.jsxs("select",{value:R,onChange:V=>Q(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsxs("option",{value:"",children:["Select ",ee==="manager"?"a manager":"an incharge","..."]}),ee==="manager"?xe.map(V=>a.jsxs("option",{value:V.employeeId,children:[V.name," (",V.employeeId,")",V.storeId?` - Store: ${V.storeId}`:" - No store assigned"]},V.employeeId)):Me.map(V=>a.jsxs("option",{value:V.employeeId,children:[V.name," (",V.employeeId,") - ",V.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},V.employeeId))]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",ee==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:pr,disabled:m||!R,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Supervisor"}),a.jsx("button",{onClick:()=>{U(!1),K(null),Q(""),se("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),me&&q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[q.name," (",q.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-orange-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[a.jsx("strong",{children:"Invalid Role Detected:"}),' "',q.role,'"']}),a.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),a.jsxs("select",{value:ae,onChange:V=>De(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),a.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),a.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:H,disabled:m,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Role"}),a.jsx("button",{onClick:()=>{Oe(!1),Ne(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Be&&Fe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),a.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[Fe.name," (",Fe.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ci,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[a.jsx("strong",{children:"Current Store:"})," ",Fe.storeId?f.find(V=>V.id===Fe.storeId)?.name||Fe.storeId:"No store assigned"]}),a.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),a.jsxs("select",{value:Ee,onChange:V=>He(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a store..."}),f.map(V=>a.jsxs("option",{value:V.id,children:[V.name," - ",V.location]},V.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),Ee&&Ee!==Fe.storeId&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:te,disabled:m||!Ee,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Updating...":"Update Store"}),a.jsx("button",{onClick:()=>{Se(!1),ze(null),He("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Qt&&wt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),a.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[wt.name," (",wt.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ni,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:a.jsx("strong",{children:"Department Incharge Designations"})}),a.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Current Designation:"})," ",wt.designation==="store_incharge"?"Store Incharge":wt.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),wt.department&&a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",wt.department==="store_operations"?"Store Operations":"Production"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),a.jsxs("select",{value:bt,onChange:V=>Gt(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),a.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),a.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),bt!=="none"&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[bt==="store_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Store Incharge Responsibilities:"}),a.jsx("br",{})," Customer-facing operations and administration",a.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",a.jsx("br",{})," Reports to Operations Manager"]}),bt==="production_incharge"&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Production Incharge Responsibilities:"}),a.jsx("br",{})," Food preparation, quality control, production planning",a.jsx("br",{})," Manages Momo Makers and production team",a.jsx("br",{})," Reports to Operations Manager"]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:we,disabled:m,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Assigning...":"Assign Designation"}),a.jsx("button",{onClick:()=>{yt(!1),vt(null),Gt("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),tn&&zr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[a.jsx("h2",{className:"text-2xl",children:"Reset Password"}),a.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[zr.name," (",zr.employeeId,")"]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),a.jsx("input",{type:"text",value:zr.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),a.jsx("input",{type:"text",value:ut,onChange:V=>at(V.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Sr,disabled:m||!ut,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:m?"Resetting...":"Reset Password"}),a.jsx("button",{onClick:()=>{ur(!1),ye(null),at("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Nt&&kt&&a.jsx(m8,{employee:kt,onClose:()=>{Ke(!1),ft(null)},onSave:()=>{et()}})]})]})})}function XI({onNavigate:e}){const[t,r]=L.useState([]),[n,s]=L.useState(!1),[i,o]=L.useState(!1);L.useEffect(()=>{l();const x=setInterval(l,3e4);return()=>clearInterval(x)},[]);const l=async()=>{try{const x=await eD();r(x)}catch{r([])}},u=async x=>{try{await tD(x),r(t.map(v=>v.id===x?{...v,read:!0}:v))}catch(v){console.error("Error marking notification as read:",v)}},d=async()=>{o(!0);try{await rD(),r(t.map(x=>({...x,read:!0})))}catch(x){console.error("Error marking all as read:",x)}finally{o(!1)}},f=x=>{if(x.read||u(x.id),e)switch(x.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",x.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",x.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",x.relatedDate||void 0,x.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",x.relatedDate||void 0,x.relatedId||void 0);break;case"stock_request_delayed":e("production-requests",x.relatedDate||void 0,x.relatedId||void 0);break}s(!1)},p=x=>x.includes("approved")?a.jsx(fr,{className:"w-5 h-5 text-green-600"}):x.includes("rejected")?a.jsx(en,{className:"w-5 h-5 text-red-600"}):x.includes("pending")||x.includes("request")?a.jsx(Zn,{className:"w-5 h-5 text-orange-600"}):x.includes("logged")?a.jsx(fr,{className:"w-5 h-5 text-blue-600"}):a.jsx(Cn,{className:"w-5 h-5 text-blue-600"}),m=t.filter(x=>!x.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[a.jsx(yp,{className:"w-6 h-6"}),m>0&&a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:m>99?"99+":m})]}),n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-gray-900",children:"Notifications"}),m>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m," unread"]})]}),m>0&&a.jsx("button",{onClick:d,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),a.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(yp,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),a.jsx("p",{children:"No notifications"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:t.map(x=>a.jsx("button",{onClick:()=>f(x),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${x.read?"":"bg-blue-50"}`,children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:p(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-sm ${x.read?"text-gray-700":"font-medium text-gray-900"}`,children:x.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:x.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Fme(x.createdAt)})]}),!x.read&&a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},x.id))})})]})]})]})}function Fme(e){const t=new Date(e),r=new Date,n=r.getTime()-t.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}function $me({stores:e,selectedStoreId:t,onStoreChange:r,showAllStores:n=!0}){const s=e.find(o=>o.id===t),i=!t;return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:a.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:a.jsx(Ci,{className:"w-6 h-6 text-purple-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t||"all",onChange:o=>r(o.target.value==="all"?null:o.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[n&&a.jsx("option",{value:"all",children:" All Stores (Combined View)"}),e.map(o=>a.jsxs("option",{value:o.id,children:[" ",o.name," ",o.location&&`- ${o.location}`]},o.id))]}),a.jsx(qm,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),s?.location&&a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[a.jsx(K2,{className:"w-3 h-3"}),a.jsx("span",{children:s.location})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[a.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),a.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:e.length})]})})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-blue-500":"bg-green-500"} animate-pulse`}),a.jsx("span",{className:"text-gray-600",children:i?"Viewing all store data":`Viewing ${s?.name||"store"} only`})]}),a.jsxs("span",{className:"text-purple-600 font-medium",children:[i?e.length:1," store",i&&e.length!==1||!i&&!1?"s":""," active"]})]})})]})}),e.length<=5&&a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n&&a.jsx("button",{onClick:()=>r(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${i?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),e.map(o=>a.jsxs("button",{onClick:()=>r(o.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${t===o.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",o.name]},o.id))]})]})}function Lme(){const[e,t]=L.useState(!1),[r,n]=L.useState(!1),[s,i]=L.useState(""),[o,l]=L.useState(null),u=async()=>{try{t(!0),i(""),n(!1);const d=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await d.json();if(!d.ok)throw new Error(f.error||f.details||"Failed to setup account");n(!0),l(f),console.log("Setup successful:",f)}catch(d){console.error("Setup error:",d),i(d instanceof Error?d.message:"Failed to setup account")}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ni,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx(fr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),a.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),a.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Password:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Name:"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Role:"}),a.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),a.jsx("button",{onClick:u,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?a.jsxs(a.Fragment,{children:[a.jsx(fr,{className:"w-5 h-5"}),"Account Created"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ni,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&a.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),a.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[a.jsx("li",{children:" Delete any existing account with this email"}),a.jsx("li",{children:" Create a new cluster head account"}),a.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),a.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function JI({context:e,selectedStoreId:t}){const[r,n]=L.useState(new Date().toISOString().split("T")[0]),[s,i]=L.useState("entry"),o=e.user?.designation==="production_incharge",l=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge";e.user?.role;const u=o,d=l,f=L.useMemo(()=>{const y=t||e.user?.storeId;console.log(" ProductionManagement - effectiveStoreId:",y),console.log(" ProductionManagement - selectedStoreId prop:",t),console.log(" ProductionManagement - user storeId:",e.user?.storeId),console.log(" ProductionManagement - all production storeIds:",e.productionData.map(N=>({date:N.date,storeId:N.storeId})));const b=y?e.productionData.filter(N=>N.storeId===y):e.productionData;return console.log(" ProductionManagement - filtered production count:",b.length),b.find(N=>N.date===r)},[e.productionData,r,t,e.user?.storeId]),[p,m]=L.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});L.useEffect(()=>{m(f?{date:f.date,chickenMomos:f.chickenMomos,chickenCheeseMomos:f.chickenCheeseMomos,vegMomos:f.vegMomos,cheeseCornMomos:f.cheeseCornMomos,paneerMomos:f.paneerMomos,vegKurkureMomos:f.vegKurkureMomos,chickenKurkureMomos:f.chickenKurkureMomos,wastage:f.wastage,sauces:f.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,f]);const x=async y=>{y.preventDefault();const b={...p,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",b.storeId),console.log("  - Production data productionHouseId:",b.productionHouseId),console.log("  - Full production data:",b);try{f?(await e.updateProductionData(f.id,b),alert("Production data updated successfully!")):(await e.addProductionData(b),alert("Production data saved successfully!"))}catch(N){console.error("Error saving production data:",N),alert("Failed to save production data. Please try again.")}},v=async()=>{if(f)try{await e.approveProductionData(f.id);const y=e.productionHouses.find(b=>b.productionHeadId===e.user?.employeeId);if(y&&f){const b={...y.inventory},N=f;Object.entries({chickenMomos:"chicken",chickenCheeseMomos:"chickenCheese",vegMomos:"veg",cheeseCornMomos:"cheeseCorn",paneerMomos:"paneer",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"}).forEach(([w,P])=>{const S=N[w]?.final||0;S>0&&(b[P]=(b[P]||0)+S,console.log(`   Added ${S} ${P} from ${w}`))}),N.items&&Object.entries(N.items).forEach(([w,P])=>{const S=P?.final||0;S>0&&(b[w]=(b[w]||0)+S,console.log(`   Added ${S} ${w} from dynamic items`))}),await e.updateProductionHouseInventory(y.id,b),console.log(" Production house inventory updated after approval:",b)}alert("Production data approved successfully! Inventory updated.")}catch(y){console.error("Error approving production:",y),alert("Failed to approve production data. Please try again.")}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(On,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),d&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[a.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),a.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const y=e.productionData.filter(b=>b.approvalStatus==="pending"&&(!e.user?.storeId||b.storeId===e.user.storeId)).length;return y>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:y})})()]})]}),s==="approvals"&&d&&a.jsx("div",{className:"space-y-4",children:(()=>{const y=e.productionData.filter(b=>b.approvalStatus==="pending"&&(!e.user?.storeId||b.storeId===e.user.storeId)).sort((b,N)=>new Date(N.date).getTime()-new Date(b.date).getTime());return y.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(fr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):y.map(b=>{const N=b.chickenMomos.final+b.chickenCheeseMomos.final+b.vegMomos.final+b.cheeseCornMomos.final+b.paneerMomos.final+b.vegKurkureMomos.final+b.chickenKurkureMomos.final,k=b.wastage.dough+b.wastage.stuffing+b.wastage.batter+b.wastage.coating;return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Cn,{className:"w-5 h-5 text-yellow-600"}),a.jsx("h3",{className:"text-xl text-gray-900",children:new Date(b.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",b.createdBy]})]}),a.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(b.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(ls,{className:"w-5 h-5"}),"Approve"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[N," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[k.toFixed(2)," kg"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[b.vegKurkureMomos.final+b.chickenKurkureMomos.final," pcs"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),a.jsxs("p",{className:"text-2xl text-gray-900",children:[b.chickenMomos.final+b.chickenCheeseMomos.final+b.vegMomos.final+b.cheeseCornMomos.final+b.paneerMomos.final," ","pcs"]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[b.chickenMomos.final>0&&a.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chicken"}),a.jsxs("p",{className:"text-gray-900",children:[b.chickenMomos.final," pcs"]})]}),b.chickenCheeseMomos.final>0&&a.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),a.jsxs("p",{className:"text-gray-900",children:[b.chickenCheeseMomos.final," pcs"]})]}),b.vegMomos.final>0&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg"}),a.jsxs("p",{className:"text-gray-900",children:[b.vegMomos.final," pcs"]})]}),b.cheeseCornMomos.final>0&&a.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),a.jsxs("p",{className:"text-gray-900",children:[b.cheeseCornMomos.final," pcs"]})]}),b.paneerMomos.final>0&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Paneer"}),a.jsxs("p",{className:"text-gray-900",children:[b.paneerMomos.final," pcs"]})]}),b.vegKurkureMomos.final>0&&a.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[b.vegKurkureMomos.final," pcs"]})]}),b.chickenKurkureMomos.final>0&&a.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[a.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),a.jsxs("p",{className:"text-gray-900",children:[b.chickenKurkureMomos.final," pcs"]})]})]})]})]},b.id)})})()}),s==="entry"&&a.jsxs(a.Fragment,{children:[a.jsx(Zm,{selectedDate:r,onDateChange:n}),f&&f.approvalStatus==="pending"&&a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cn,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),f&&f.approvalStatus==="approved"&&a.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fr,{className:"w-5 h-5 text-green-600"}),a.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",f.approvedBy]})]})}),d&&f&&f.approvalStatus==="pending"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(ls,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",f.createdBy," is awaiting your approval."]}),a.jsxs("button",{onClick:v,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(ls,{className:"w-5 h-5"}),"Approve Production Data"]})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(M7,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenMomos.dough,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenMomos.stuffing,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.chickenMomos.final,onChange:y=>m({...p,chickenMomos:{...p.chickenMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenCheeseMomos.dough,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenCheeseMomos.stuffing,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.chickenCheeseMomos.final,onChange:y=>m({...p,chickenCheeseMomos:{...p.chickenCheeseMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegMomos.dough,onChange:y=>m({...p,vegMomos:{...p.vegMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegMomos.stuffing,onChange:y=>m({...p,vegMomos:{...p.vegMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.vegMomos.final,onChange:y=>m({...p,vegMomos:{...p.vegMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.cheeseCornMomos.dough,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.cheeseCornMomos.stuffing,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.cheeseCornMomos.final,onChange:y=>m({...p,cheeseCornMomos:{...p.cheeseCornMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.paneerMomos.dough,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,dough:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.paneerMomos.stuffing,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),a.jsx("input",{type:"number",value:p.paneerMomos.final,onChange:y=>m({...p,paneerMomos:{...p.paneerMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(On,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegKurkureMomos.batter,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,batter:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.vegKurkureMomos.coating,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,coating:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:p.vegKurkureMomos.final,onChange:y=>m({...p,vegKurkureMomos:{...p.vegKurkureMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[a.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenKurkureMomos.batter,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,batter:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.chickenKurkureMomos.coating,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,coating:parseFloat(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),a.jsx("input",{type:"number",value:p.chickenKurkureMomos.final,onChange:y=>m({...p,chickenKurkureMomos:{...p.chickenKurkureMomos,final:parseInt(y.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!u})]})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(ps,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.dough,onChange:y=>m({...p,wastage:{...p.wastage,dough:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.stuffing,onChange:y=>m({...p,wastage:{...p.wastage,stuffing:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.batter,onChange:y=>m({...p,wastage:{...p.wastage,batter:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:p.wastage.coating,onChange:y=>m({...p,wastage:{...p.wastage,coating:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(H9,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),a.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.panfriedSauce,onChange:y=>m({...p,sauces:{...p.sauces,panfriedSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.chilliChickenSauce,onChange:y=>m({...p,sauces:{...p.sauces,chilliChickenSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.spicyKoreanSauce,onChange:y=>m({...p,sauces:{...p.sauces,spicyKoreanSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.hotGarlicSauce,onChange:y=>m({...p,sauces:{...p.sauces,hotGarlicSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.tandooriSauce,onChange:y=>m({...p,sauces:{...p.sauces,tandooriSauce:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.soupPremix,onChange:y=>m({...p,sauces:{...p.sauces,soupPremix:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.greenMayoChutney,onChange:y=>m({...p,sauces:{...p.sauces,greenMayoChutney:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),a.jsx("input",{type:"number",step:"0.01",value:p.sauces.spicyRedChutney,onChange:y=>m({...p,sauces:{...p.sauces,spicyRedChutney:parseFloat(y.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!u})]})]})})]}),u&&a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg",children:f?"Update Production Data":"Save Production Data"})})]})]})]})}function Bme({onStoreCreated:e,userRole:t}){const[r,n]=L.useState([]),[s,i]=L.useState([]),[o,l]=L.useState([]),[u,d]=L.useState(!0),[f,p]=L.useState(!1),[m,x]=L.useState(null),[v,y]=L.useState(null),[b,N]=L.useState(null),[k,w]=L.useState(""),[P,S]=L.useState(""),[_,E]=L.useState(!1),[C,M]=L.useState(""),[D,A]=L.useState(""),[O,F]=L.useState(!1),[W,Y]=L.useState(""),[Z,re]=L.useState(!1),[ne,U]=L.useState(""),[oe,K]=L.useState(!1);L.useEffect(()=>{R(),Q(),ee()},[]);const R=async()=>{try{const Fe=await Uu();n(Fe)}catch(Fe){if(Fe instanceof Error&&(Fe.message==="Not authenticated"||Fe.message==="Unauthorized"))return;console.error("Error loading stores:",Fe)}finally{d(!1)}},Q=async()=>{try{const ze=(await Ps()).filter(Ee=>Ee.role==="manager");i(ze)}catch(Fe){console.error("Error loading managers:",Fe)}},ee=async()=>{try{const Fe=await Ch();l(Fe)}catch(Fe){console.error("Error loading production houses:",Fe)}},se=async Fe=>{if(Fe.preventDefault(),!k.trim()){alert("Please enter a store name");return}E(!0);try{await nD(k,P),w(""),S(""),p(!1),await R(),e&&e()}catch(ze){console.error("Error creating store:",ze),alert(ze.message||"Failed to create store")}finally{E(!1)}},xe=Fe=>{x(Fe.id),M(Fe.name),A(Fe.location)},ge=async Fe=>{if(!C.trim()){alert("Please enter a store name");return}F(!0);try{await iD(Fe,C,D),x(null),await R()}catch(ze){console.error("Error updating store:",ze),alert(ze.message||"Failed to update store")}finally{F(!1)}},Me=()=>{x(null),M(""),A("")},ce=Fe=>{y(Fe.id),Y(Fe.managerId||"")},me=async Fe=>{if(!W){alert("Please select a manager");return}re(!0);try{await aD(Fe,W),y(null),Y(""),await R(),await Q(),alert("Manager assigned successfully!")}catch(ze){console.error("Error assigning manager:",ze),alert(ze.message||"Failed to assign manager")}finally{re(!1)}},Oe=()=>{y(null),Y("")},q=async Fe=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${Fe.name}? This will assign all data without a store to this store.`))try{const ze=await oD(Fe.id);alert(` Migration successful!

Inventory: ${ze.migratedCount.inventory}
Overheads: ${ze.migratedCount.overheads}
Sales: ${ze.migratedCount.sales}
Employees: ${ze.migratedCount.employees}
Timesheets: ${ze.migratedCount.timesheets}
Leaves: ${ze.migratedCount.leaves}
Payouts: ${ze.migratedCount.payouts}`)}catch(ze){console.error("Error migrating data:",ze),alert(ze.message||"Failed to migrate data")}},Ne=Fe=>{N(Fe.id),U(Fe.productionHouseId||"")},ae=async Fe=>{if(!ne){alert("Please select a production house");return}K(!0);try{await sD(Fe,ne),N(null),U(""),await R(),await ee(),e&&e(),alert("Production house assigned successfully!")}catch(ze){console.error("Error assigning production house:",ze),alert(ze.message||"Failed to assign production house")}finally{K(!1)}},De=()=>{N(null),U("")},Be=Fe=>{if(!Fe)return null;const ze=s.find(Ee=>Ee.employeeId===Fe);return ze?`${ze.name} (${ze.employeeId})`:"Unknown Manager"},Se=Fe=>{if(!Fe)return null;const ze=o.find(Ee=>Ee.id===Fe);return ze?`${ze.name} (${ze.id})`:"Unknown Production House"};return u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),a.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[a.jsx(ao,{className:"w-5 h-5"}),"Create Store"]})]}),f&&a.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),a.jsxs("form",{onSubmit:se,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:k,onChange:Fe=>w(Fe.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),a.jsx("input",{type:"text",value:P,onChange:Fe=>S(Fe.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:_?"Creating...":"Create Store"}),a.jsx("button",{type:"button",onClick:()=>{p(!1),w(""),S("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?a.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[a.jsx(Ci,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(Fe=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:m===Fe.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),a.jsx("input",{type:"text",value:C,onChange:ze=>M(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:D,onChange:ze=>A(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ge(Fe.id),disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[a.jsx(Zi,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:Me,disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(en,{className:"w-4 h-4"}),"Cancel"]})]})]}):v===Fe.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",Fe.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),a.jsxs("select",{value:W,onChange:ze=>Y(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a manager..."}),s.filter(ze=>!ze.storeId||ze.storeId===Fe.id).map(ze=>a.jsxs("option",{value:ze.employeeId,children:[ze.name," (",ze.employeeId,")"]},ze.employeeId))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>me(Fe.id),disabled:Z||!W,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(Zi,{className:"w-4 h-4"}),Z?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:Oe,disabled:Z,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(en,{className:"w-4 h-4"}),"Cancel"]})]})]}):b===Fe.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-gray-900",children:["Assign Production House to ",Fe.name]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Production House"}),a.jsxs("select",{value:ne,onChange:ze=>U(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Choose a production house..."}),o.map(ze=>a.jsx("option",{value:ze.id,children:ze.name},ze.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which production house will serve this store"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>ae(Fe.id),disabled:oe||!ne,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[a.jsx(Zi,{className:"w-4 h-4"}),oe?"Assigning...":"Assign"]}),a.jsxs("button",{onClick:De,disabled:oe,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[a.jsx(en,{className:"w-4 h-4"}),"Cancel"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ci,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-gray-900",children:Fe.name})]}),a.jsx("button",{onClick:()=>xe(Fe),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:a.jsx(ji,{className:"w-4 h-4"})})]}),Fe.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[a.jsx(K2,{className:"w-4 h-4"}),a.jsx("span",{children:Fe.location})]}),a.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ka,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Fe.managerId?a.jsx("span",{className:"text-green-600",children:Be(Fe.managerId)}):a.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(On,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:Fe.productionHouseId?a.jsx("span",{className:"text-green-600",children:Se(Fe.productionHouseId)}):a.jsx("span",{className:"text-orange-600",children:"No Production House Mapped"})})]}),a.jsxs("button",{onClick:()=>ce(Fe),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[a.jsx(ni,{className:"w-4 h-4"}),Fe.managerId?"Change Manager":"Assign Manager"]}),a.jsxs("button",{onClick:()=>Ne(Fe),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:[a.jsx(On,{className:"w-4 h-4"}),Fe.productionHouseId?"Change Production House":"Assign Production House"]}),t==="cluster_head"&&a.jsxs("button",{onClick:()=>q(Fe),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[a.jsx(wi,{className:"w-4 h-4"}),"Migrate Data"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",Fe.id]})]})]})},Fe.id))})]})}function Ume({context:e,stores:t,employees:r,onRefreshStores:n}){const[s,i]=L.useState(!1),[o,l]=L.useState(!1),[u,d]=L.useState({name:"",location:"",productionHeadId:""}),[f,p]=L.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),m=r.filter(w=>w.designation==="production_incharge"),x=async w=>{w.preventDefault();try{await e.addProductionHouse({name:u.name,location:u.location,productionHeadId:u.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),d({name:"",location:"",productionHeadId:""})}catch(P){console.error("Error creating production house:",P),alert("Failed to create production house. Please try again.")}},v=async(w,P)=>{try{if(!e.user?.accessToken)return;await $D(e.user.accessToken,w,P),await e.updateProductionHouse(w,{productionHeadId:P}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(S){console.error("Error assigning production head:",S),alert("Failed to assign production head. Please try again.")}},y=async(w,P)=>{try{if(!e.user?.accessToken)return;await LD(e.user.accessToken,w,P),alert("Store assigned to production house successfully!"),n()}catch(S){console.error("Error assigning store:",S),alert("Failed to assign store. Please try again.")}},b=async(w,P)=>{if(window.confirm(`Are you sure you want to delete "${P}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(w),alert("Production house deleted successfully!")}catch(_){console.error("Error deleting production house:",_),alert("Failed to delete production house. Please try again.")}},N=async()=>{if(!f.fromHouseId||!f.toHouseId){alert("Please select both source and destination production houses");return}if(f.fromHouseId===f.toHouseId){alert("Source and destination cannot be the same");return}const w=Object.values(f.quantities).reduce((E,C)=>E+C,0);if(w===0){alert("Please enter quantities to transfer");return}const P=e.productionHouses.find(E=>E.id===f.fromHouseId),S=e.productionHouses.find(E=>E.id===f.toHouseId);if(window.confirm(`Transfer ${w} pieces from "${P?.name}" to "${S?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await HD(e.user.accessToken,f.fromHouseId,f.toHouseId,f.quantities);const E=await Ch(e.user.accessToken);e.setProductionHouses(E),alert("Inventory transferred successfully!"),l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(E){console.error("Error transferring inventory:",E),alert(`Failed to transfer inventory: ${E.message||"Unknown error"}`)}},k=()=>{const w=e.productionHouses.find(P=>P.id===f.fromHouseId);if(!w){alert("Please select a source production house first");return}p({...f,quantities:{chicken:w.inventory.chicken,chickenCheese:w.inventory.chickenCheese,veg:w.inventory.veg,cheeseCorn:w.inventory.cheeseCorn,paneer:w.inventory.paneer,vegKurkure:w.inventory.vegKurkure,chickenKurkure:w.inventory.chickenKurkure}})};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(On,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5"}),"Transfer Inventory"]}),a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[a.jsx(ao,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",required:!0,value:u.name,onChange:w=>d({...u,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),a.jsx("input",{type:"text",required:!0,value:u.location,onChange:w=>d({...u,location:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),a.jsxs("select",{value:u.productionHeadId,onChange:w=>d({...u,productionHeadId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Production Head"}),m.map(w=>a.jsxs("option",{value:w.employeeId,children:[w.name," (",w.employeeId,")"]},w.employeeId))]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{i(!1),d({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[a.jsx(rr,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),a.jsxs("select",{value:f.fromHouseId,onChange:w=>p({...f,fromHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(w=>a.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),a.jsxs("select",{value:f.toHouseId,onChange:w=>p({...f,toHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(w=>w.id!==f.fromHouseId).map(w=>a.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]})]}),f.fromHouseId&&(()=>{const w=e.productionHouses.find(P=>P.id===f.fromHouseId);return w?a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",w.name]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chicken})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.veg})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.paneer})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenKurkure})]})]})]}):null})(),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),a.jsx("button",{type:"button",onClick:k,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chicken,onChange:w=>p({...f,quantities:{...f.quantities,chicken:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenCheese,onChange:w=>p({...f,quantities:{...f.quantities,chickenCheese:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.veg,onChange:w=>p({...f,quantities:{...f.quantities,veg:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.cheeseCorn,onChange:w=>p({...f,quantities:{...f.quantities,cheeseCorn:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.paneer,onChange:w=>p({...f,quantities:{...f.quantities,paneer:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.vegKurkure,onChange:w=>p({...f,quantities:{...f.quantities,vegKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),a.jsx("input",{type:"number",min:"0",value:f.quantities.chickenKurkure,onChange:w=>p({...f,quantities:{...f.quantities,chickenKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),a.jsx("span",{className:"text-2xl text-green-600",children:Object.values(f.quantities).reduce((w,P)=>w+P,0)})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),p({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(On,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),a.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[a.jsx(ao,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(w=>{const P=m.find(E=>E.employeeId===w.productionHeadId),S=t.filter(E=>E.productionHouseId===w.id),_=Object.values(w.inventory).reduce((E,C)=>E+C,0);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:w.name}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(s9,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",w.id]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K2,{className:"w-4 h-4"}),a.jsx("span",{children:w.location})]}),P&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ka,{className:"w-4 h-4"}),a.jsxs("span",{children:[P.name," (",P.employeeId,")"]})]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),a.jsxs("div",{className:"text-2xl text-purple-600",children:[_," pcs"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(rr,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[a.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chicken})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenCheese})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.veg})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.cheeseCorn})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.paneer})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.vegKurkure})]}),a.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),a.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenKurkure})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),P&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const C=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",C.production);const M=C.production.filter(D=>D.storeId==="STORE-1766938921191-9LCH05"||D.productionHouseId==="STORE-1766938921191-9LCH05"||D.productionHouseId===w.id);console.log(" Records related to this production house:",M),console.log(" Current Production House ID:",w.id),console.log(" Records by productionHouseId:"),M.forEach(D=>{console.log(`  - Record ${D.id.slice(0,8)} (${D.date}): storeId=${D.storeId}, productionHouseId=${D.productionHouseId}`)}),alert(`Found ${M.length} records related to this production house.

Check console for details (F12).`)}catch(E){console.error("Error fetching production data:",E),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),a.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const E=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${w.id}`);if(!(!E||E.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${E}?

This will update them to use the correct production house ID: ${w.id}`))try{const C=await BD(e.user.accessToken,w.id,E.trim());alert(` Fixed ${C.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(C){console.error("Error fixing records:",C),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),a.jsxs("select",{value:w.productionHeadId||"",onChange:E=>v(w.id,E.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"No Production Head Assigned"}),m.map(E=>a.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",S.length,")"]}),S.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map(E=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:E.name}),a.jsx("div",{className:"text-sm text-gray-600",children:E.location})]})},E.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>b(w.id,w.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[a.jsx(ps,{className:"w-5 h-5"}),"Delete Production House"]})})]},w.id)})}),e.productionHouses.length>0&&a.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[a.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(w=>!w.productionHouseId).length===0?a.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):a.jsx("div",{className:"space-y-3",children:t.filter(w=>!w.productionHouseId).map(w=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-900",children:w.name}),a.jsx("div",{className:"text-sm text-gray-600",children:w.location})]}),a.jsxs("select",{onChange:P=>P.target.value&&y(w.id,P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[a.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(P=>a.jsx("option",{value:P.id,children:P.name},P.id))]})]},w.id))})]})]})}function Hme({context:e}){const[t,r]=L.useState([]),[n,s]=L.useState([]),[i,o]=L.useState(!1),[l,u]=L.useState(!1);L.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),L.useEffect(()=>{const x=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),v=JSON.stringify([...n].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());u(x||v)},[t,n,e.managedStoreIds,e.managedProductionHouseIds]);const d=x=>{r(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},f=x=>{s(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},p=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){Nr.error("Employee ID not found");return}o(!0);try{await n5(e.user.accessToken,e.user.employeeId,t,n),Nr.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(x){console.error("Error updating cluster assignments:",x),Nr.error("Failed to update cluster assignments")}finally{o(!1)}},m=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(qo,{className:"w-8 h-8"}),a.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),a.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[a.jsx(Ci,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),a.jsx("p",{className:"text-3xl",children:t.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[a.jsx(Vo,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),a.jsx("p",{className:"text-3xl",children:n.length}),a.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[a.jsx(wn,{className:"w-8 h-8 mb-2 opacity-90"}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),a.jsx("p",{className:"text-3xl",children:t.length+n.length}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Ci,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(x=>{const v=t.includes(x.id);return a.jsxs("button",{onClick:()=>d(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&a.jsx(fr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Vo,{className:"w-5 h-5 text-purple-600"}),a.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[n.length," selected"]})]}),e.productionHouses.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(x=>{const v=n.includes(x.id);return a.jsxs("button",{onClick:()=>f(x.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${v?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[a.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${v?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:v&&a.jsx(fr,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:x.name}),a.jsx("p",{className:"text-xs text-gray-500",children:x.location})]})]},x.id)})})]}),l&&a.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:a.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[a.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),a.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fr,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function qme({context:e,stores:t,employees:r,onRefreshStores:n}){const s=e.user?.role==="cluster_head",[i,o]=L.useState(s?"cluster-management":"stores");return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[a.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:a.jsx(rr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-white mb-1",children:"Assets Management"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Manage your stores and production houses"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[s&&a.jsxs("button",{onClick:()=>o("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(qo,{className:"w-5 h-5"}),a.jsx("span",{children:"Cluster Settings"})]}),a.jsxs("button",{onClick:()=>o("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Ci,{className:"w-5 h-5"}),a.jsx("span",{children:"Stores"})]}),a.jsxs("button",{onClick:()=>o("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Production Houses"})]})]})]})]})}),a.jsx("div",{children:i==="cluster-management"?a.jsx(Hme,{context:e}):i==="stores"?a.jsx(Bme,{onStoreCreated:n,userRole:e.user?.role}):a.jsx(Ume,{context:e,stores:t,employees:r,onRefreshStores:n})})]})}function QI({context:e,stores:t}){const[r,n]=L.useState("my-requests"),[s,i]=L.useState(!1),[o,l]=L.useState({requestId:null,quantities:{},notes:""}),u=e.user?.designation==="store_incharge",d=e.user?.designation==="production_incharge",f=t.find(S=>S.id===e.user?.storeId),p=e.productionHouses.find(S=>S.productionHeadId===e.user?.employeeId),[m,x]=L.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),v=async S=>{if(S.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const _=e.productionHouses.find(C=>C.id===f.productionHouseId);if(!_){alert("Production house not found");return}if(!Object.values(m).some(C=>C>0)){alert("Please enter at least one quantity greater than 0");return}try{await e.createStockRequest({storeId:f.id,storeName:f.name,productionHouseId:_.id,productionHouseName:_.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:m}),alert("Stock request created successfully!"),i(!1),x({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(C){console.error("Error creating stock request:",C),alert("Failed to create stock request. Please try again.")}},y=async S=>{p&&l({requestId:S.id,quantities:{...S.requestedQuantities},notes:""})},b=async S=>{if(S.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(_){console.error("Error fulfilling request:",_),alert("Failed to fulfill request. Please try again.")}},N=u?e.stockRequests.filter(S=>S.storeId===e.user?.storeId):[],k=d&&p?e.stockRequests.filter(S=>S.productionHouseId===p.id&&S.status==="pending"):[],w=S=>{switch(S){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=S=>{switch(S){case"pending":return a.jsx(Zn,{className:"w-4 h-4"});case"fulfilled":return a.jsx(fr,{className:"w-4 h-4"});case"partially_fulfilled":return a.jsx(pn,{className:"w-4 h-4"});case"cancelled":return a.jsx(hi,{className:"w-4 h-4"});default:return a.jsx(Hr,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[a.jsx(rr,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:[u&&"Request stock from your production house",d&&"Fulfill stock requests from stores"]})]}),u&&a.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Np,{className:"w-5 h-5"}),"New Request"]})]}),u&&f&&!f.productionHouseId&&a.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(u||d)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[u&&a.jsxs("button",{onClick:()=>n("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",N.length,")"]}),d&&a.jsxs("button",{onClick:()=>n("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",k.length>0&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:k.length})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chicken,onChange:S=>x({...m,chicken:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenCheese,onChange:S=>x({...m,chickenCheese:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),a.jsx("input",{type:"number",min:"0",value:m.veg,onChange:S=>x({...m,veg:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),a.jsx("input",{type:"number",min:"0",value:m.cheeseCorn,onChange:S=>x({...m,cheeseCorn:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),a.jsx("input",{type:"number",min:"0",value:m.paneer,onChange:S=>x({...m,paneer:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.vegKurkure,onChange:S=>x({...m,vegKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),a.jsx("input",{type:"number",min:"0",value:m.chickenKurkure,onChange:S=>x({...m,chickenKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:a.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([S,_])=>{const E=p?.inventory[S]||0;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[S.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase()),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",E,")"]})]}),a.jsx("input",{type:"number",min:"0",max:E,value:_,onChange:C=>l({...o,quantities:{...o.quantities,[S]:parseInt(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},S)})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:o.notes,onChange:S=>l({...o,notes:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&N.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),a.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&k.length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[a.jsx(fr,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&N.map(S=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",S.productionHouseName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(S.status)}`,children:[P(S.status),S.status.replace("_"," ").toUpperCase()]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(S.requestDate).toLocaleDateString()]})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(S.requestedQuantities).map(([_,E])=>E>0&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:_.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:S.fulfilledQuantities?`${S.fulfilledQuantities[_]} / ${E}`:E})]},_))}),S.notes&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),a.jsx("div",{className:"text-sm text-blue-900",children:S.notes})]}),S.fulfilledBy&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",S.fulfilledByName," on ",new Date(S.fulfillmentDate).toLocaleDateString()]})]},S.id)),r==="pending-fulfillment"&&k.map(S=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",S.storeName]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(S.status)}`,children:[P(S.status),"PENDING"]})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",S.requestedByName," on ",new Date(S.requestDate).toLocaleDateString()]})]}),a.jsxs("button",{onClick:()=>y(S),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(fr,{className:"w-4 h-4"}),"Fulfill"]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(S.requestedQuantities).map(([_,E])=>{const C=p?.inventory[_]||0,M=C>=E;return E>0&&a.jsxs("div",{className:`rounded-lg p-3 ${M?"bg-green-50":"bg-red-50"}`,children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:_.replace(/([A-Z])/g," $1").replace(/^./,D=>D.toUpperCase())}),a.jsx("div",{className:"text-lg text-gray-900",children:E}),a.jsxs("div",{className:`text-xs ${M?"text-green-600":"text-red-600"}`,children:["Available: ",C]})]},_)})})]},S.id))]})]})}const zme=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Wme=(e,t)=>({classGroupId:e,validator:t}),y8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Bm="-",ZI=[],Kme="arbitrary..",Vme=e=>{const t=Yme(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Gme(o);const l=o.split(Bm),u=l[0]===""&&l.length>1?1:0;return v8(l,u,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const u=n[o],d=r[o];return u?d?zme(d,u):u:d||ZI}return r[o]||ZI}}},v8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const d=v8(e,t+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=t===0?e.join(Bm):e.slice(t).join(Bm),u=o.length;for(let d=0;d<u;d++){const f=o[d];if(f.validator(l))return f.classGroupId}},Gme=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Kme+n:void 0})(),Yme=e=>{const{theme:t,classGroups:r}=e;return Xme(r,t)},Xme=(e,t)=>{const r=y8();for(const n in e){const s=e[n];Rk(s,r,n,t)}return r},Rk=(e,t,r,n)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];Jme(o,t,r,n)}},Jme=(e,t,r,n)=>{if(typeof e=="string"){Qme(e,t,r);return}if(typeof e=="function"){Zme(e,t,r,n);return}ege(e,t,r,n)},Qme=(e,t,r)=>{const n=e===""?t:b8(t,e);n.classGroupId=r},Zme=(e,t,r,n)=>{if(tge(e)){Rk(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Wme(r,e))},ege=(e,t,r,n)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,u]=s[o];Rk(u,b8(t,l),r,n)}},b8=(e,t)=>{let r=e;const n=t.split(Bm),s=n.length;for(let i=0;i<s;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=y8(),r.nextPart.set(o,l)),r=l}return r},tge=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,rge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},H2="!",e6=":",nge=[],t6=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),age=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,u=0,d;const f=s.length;for(let y=0;y<f;y++){const b=s[y];if(o===0&&l===0){if(b===e6){i.push(s.slice(u,y)),u=y+1;continue}if(b==="/"){d=y;continue}}b==="["?o++:b==="]"?o--:b==="("?l++:b===")"&&l--}const p=i.length===0?s:s.slice(u);let m=p,x=!1;p.endsWith(H2)?(m=p.slice(0,-1),x=!0):p.startsWith(H2)&&(m=p.slice(1),x=!0);const v=d&&d>u?d-u:void 0;return t6(i,x,m,v)};if(t){const s=t+e6,i=n;n=o=>o.startsWith(s)?i(o.slice(s.length)):t6(nge,!1,o,void 0,!0)}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},sge=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",u=t.has(o);l||u?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(o)):s.push(o)}return s.length>0&&(s.sort(),n.push(...s)),n}},ige=e=>({cache:rge(e.cacheSize),parseClassName:age(e),sortModifiers:sge(e),...Vme(e)}),oge=/\s+/,lge=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(oge);let u="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:p,modifiers:m,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:y}=r(f);if(p){u=f+(u.length>0?" "+u:u);continue}let b=!!y,N=n(b?v.substring(0,y):v);if(!N){if(!b){u=f+(u.length>0?" "+u:u);continue}if(N=n(v),!N){u=f+(u.length>0?" "+u:u);continue}b=!1}const k=m.length===0?"":m.length===1?m[0]:i(m).join(":"),w=x?k+H2:k,P=w+N;if(o.indexOf(P)>-1)continue;o.push(P);const S=s(N,b);for(let _=0;_<S.length;++_){const E=S[_];o.push(w+E)}u=f+(u.length>0?" "+u:u)}return u},cge=(...e)=>{let t=0,r,n,s="";for(;t<e.length;)(r=e[t++])&&(n=w8(r))&&(s&&(s+=" "),s+=n);return s},w8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=w8(e[n]))&&(r&&(r+=" "),r+=t);return r},uge=(e,...t)=>{let r,n,s,i;const o=u=>{const d=t.reduce((f,p)=>p(f),e());return r=ige(d),n=r.cache.get,s=r.cache.set,i=l,l(u)},l=u=>{const d=n(u);if(d)return d;const f=lge(u,r);return s(u,f),f};return i=o,(...u)=>i(cge(...u))},dge=[],Fn=e=>{const t=r=>r[e]||dge;return t.isThemeGetter=!0,t},j8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,N8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,hge=/^\d+\/\d+$/,fge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pge=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kc=e=>hge.test(e),hr=e=>!!e&&!Number.isNaN(Number(e)),Fo=e=>!!e&&Number.isInteger(Number(e)),U1=e=>e.endsWith("%")&&hr(e.slice(0,-1)),Gi=e=>fge.test(e),yge=()=>!0,vge=e=>pge.test(e)&&!mge.test(e),k8=()=>!1,bge=e=>gge.test(e),wge=e=>xge.test(e),jge=e=>!At(e)&&!Ot(e),Nge=e=>nd(e,E8,k8),At=e=>j8.test(e),Sl=e=>nd(e,T8,vge),H1=e=>nd(e,Tge,hr),r6=e=>nd(e,S8,k8),kge=e=>nd(e,_8,wge),mp=e=>nd(e,C8,bge),Ot=e=>N8.test(e),Wd=e=>ad(e,T8),Sge=e=>ad(e,Cge),n6=e=>ad(e,S8),_ge=e=>ad(e,E8),Ege=e=>ad(e,_8),gp=e=>ad(e,C8,!0),nd=(e,t,r)=>{const n=j8.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},ad=(e,t,r=!1)=>{const n=N8.exec(e);return n?n[1]?t(n[1]):r:!1},S8=e=>e==="position"||e==="percentage",_8=e=>e==="image"||e==="url",E8=e=>e==="length"||e==="size"||e==="bg-size",T8=e=>e==="length",Tge=e=>e==="number",Cge=e=>e==="family-name",C8=e=>e==="shadow",Age=()=>{const e=Fn("color"),t=Fn("font"),r=Fn("text"),n=Fn("font-weight"),s=Fn("tracking"),i=Fn("leading"),o=Fn("breakpoint"),l=Fn("container"),u=Fn("spacing"),d=Fn("radius"),f=Fn("shadow"),p=Fn("inset-shadow"),m=Fn("text-shadow"),x=Fn("drop-shadow"),v=Fn("blur"),y=Fn("perspective"),b=Fn("aspect"),N=Fn("ease"),k=Fn("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...P(),Ot,At],_=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],C=()=>[Ot,At,u],M=()=>[Kc,"full","auto",...C()],D=()=>[Fo,"none","subgrid",Ot,At],A=()=>["auto",{span:["full",Fo,Ot,At]},Fo,Ot,At],O=()=>[Fo,"auto",Ot,At],F=()=>["auto","min","max","fr",Ot,At],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Y=()=>["start","end","center","stretch","center-safe","end-safe"],Z=()=>["auto",...C()],re=()=>[Kc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],ne=()=>[e,Ot,At],U=()=>[...P(),n6,r6,{position:[Ot,At]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",_ge,Nge,{size:[Ot,At]}],R=()=>[U1,Wd,Sl],Q=()=>["","none","full",d,Ot,At],ee=()=>["",hr,Wd,Sl],se=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[hr,U1,n6,r6],Me=()=>["","none",v,Ot,At],ce=()=>["none",hr,Ot,At],me=()=>["none",hr,Ot,At],Oe=()=>[hr,Ot,At],q=()=>[Kc,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gi],breakpoint:[Gi],color:[yge],container:[Gi],"drop-shadow":[Gi],ease:["in","out","in-out"],font:[jge],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gi],shadow:[Gi],spacing:["px",hr],text:[Gi],"text-shadow":[Gi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kc,At,Ot,b]}],container:["container"],columns:[{columns:[hr,At,Ot,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Fo,"auto",Ot,At]}],basis:[{basis:[Kc,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[hr,Kc,"auto","initial","none",At]}],grow:[{grow:["",hr,Ot,At]}],shrink:[{shrink:["",hr,Ot,At]}],order:[{order:[Fo,"first","last","none",Ot,At]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...Y(),"normal"]}],"justify-self":[{"justify-self":["auto",...Y()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...Y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Y(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...Y(),"baseline"]}],"place-self":[{"place-self":["auto",...Y()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:Z()}],mx:[{mx:Z()}],my:[{my:Z()}],ms:[{ms:Z()}],me:[{me:Z()}],mt:[{mt:Z()}],mr:[{mr:Z()}],mb:[{mb:Z()}],ml:[{ml:Z()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[l,"screen",...re()]}],"min-w":[{"min-w":[l,"screen","none",...re()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",r,Wd,Sl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ot,H1]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",U1,At]}],"font-family":[{font:[Sge,At,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ot,At]}],"line-clamp":[{"line-clamp":[hr,"none",Ot,H1]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",Ot,At]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ot,At]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[hr,"from-font","auto",Ot,Sl]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[hr,"auto",Ot,At]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot,At]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot,At]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Fo,Ot,At],radial:["",Ot,At],conic:[Fo,Ot,At]},Ege,kge]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[hr,Ot,At]}],"outline-w":[{outline:["",hr,Wd,Sl]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",f,gp,mp]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",p,gp,mp]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[hr,Sl]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",m,gp,mp]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[hr,Ot,At]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[hr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[Ot,At]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[hr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ot,At]}],filter:[{filter:["","none",Ot,At]}],blur:[{blur:Me()}],brightness:[{brightness:[hr,Ot,At]}],contrast:[{contrast:[hr,Ot,At]}],"drop-shadow":[{"drop-shadow":["","none",x,gp,mp]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",hr,Ot,At]}],"hue-rotate":[{"hue-rotate":[hr,Ot,At]}],invert:[{invert:["",hr,Ot,At]}],saturate:[{saturate:[hr,Ot,At]}],sepia:[{sepia:["",hr,Ot,At]}],"backdrop-filter":[{"backdrop-filter":["","none",Ot,At]}],"backdrop-blur":[{"backdrop-blur":Me()}],"backdrop-brightness":[{"backdrop-brightness":[hr,Ot,At]}],"backdrop-contrast":[{"backdrop-contrast":[hr,Ot,At]}],"backdrop-grayscale":[{"backdrop-grayscale":["",hr,Ot,At]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[hr,Ot,At]}],"backdrop-invert":[{"backdrop-invert":["",hr,Ot,At]}],"backdrop-opacity":[{"backdrop-opacity":[hr,Ot,At]}],"backdrop-saturate":[{"backdrop-saturate":[hr,Ot,At]}],"backdrop-sepia":[{"backdrop-sepia":["",hr,Ot,At]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ot,At]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[hr,"initial",Ot,At]}],ease:[{ease:["linear","initial",N,Ot,At]}],delay:[{delay:[hr,Ot,At]}],animate:[{animate:["none",k,Ot,At]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Ot,At]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[Ot,At,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:q()}],"translate-x":[{"translate-x":q()}],"translate-y":[{"translate-y":q()}],"translate-z":[{"translate-z":q()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot,At]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot,At]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[hr,Wd,Sl,H1]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Oge=uge(Age);function A8(...e){return Oge(tr(e))}function bn({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:A8("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function a6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pge(...e){return t=>{let r=!1;const n=e.map(s=>{const i=a6(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():a6(e[s],null)}}}}var Ige=Symbol.for("react.lazy"),Um=x7[" use ".trim().toString()];function Dge(e){return typeof e=="object"&&e!==null&&"then"in e}function O8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ige&&"_payload"in e&&Dge(e._payload)}function Mge(e){const t=Fge(e),r=L.forwardRef((n,s)=>{let{children:i,...o}=n;O8(i)&&typeof Um=="function"&&(i=Um(i._payload));const l=L.Children.toArray(i),u=l.find(Lge);if(u){const d=u.props.children,f=l.map(p=>p===u?L.Children.count(d)>1?L.Children.only(null):L.isValidElement(d)?d.props.children:null:p);return a.jsx(t,{...o,ref:s,children:L.isValidElement(d)?L.cloneElement(d,void 0,f):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var Rge=Mge("Slot");function Fge(e){const t=L.forwardRef((r,n)=>{let{children:s,...i}=r;if(O8(s)&&typeof Um=="function"&&(s=Um(s._payload)),L.isValidElement(s)){const o=Uge(s),l=Bge(i,s.props);return s.type!==L.Fragment&&(l.ref=n?Pge(n,o):o),L.cloneElement(s,l)}return L.Children.count(s)>1?L.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $ge=Symbol("radix.slottable");function Lge(e){return L.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$ge}function Bge(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Uge(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const s6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,i6=tr,Hge=(e,t)=>r=>{var n;if(t?.variants==null)return i6(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const f=r?.[d],p=i?.[d];if(f===null)return null;const m=s6(f)||s6(p);return s[d][m]}),l=r&&Object.entries(r).reduce((d,f)=>{let[p,m]=f;return m===void 0||(d[p]=m),d},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:p,className:m,...x}=f;return Object.entries(x).every(v=>{let[y,b]=v;return Array.isArray(b)?b.includes({...i,...l}[y]):{...i,...l}[y]===b})?[...d,p,m]:d},[]);return i6(e,o,u,r?.class,r?.className)},qge=Hge("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Nf({className:e,variant:t,asChild:r=!1,...n}){const s=r?Rge:"span";return a.jsx(s,{"data-slot":"badge",className:A8(qge({variant:t}),e),...n})}function zge({context:e,stores:t}){const r=L.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),u={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{u.chicken+=y.chickenMomos?.final||0,u.chickenCheese+=y.chickenCheeseMomos?.final||0,u.veg+=y.vegMomos?.final||0,u.cheeseCorn+=y.cheeseCornMomos?.final||0,u.paneer+=y.paneerMomos?.final||0,u.vegKurkure+=y.vegKurkureMomos?.final||0,u.chickenKurkure+=y.chickenKurkureMomos?.final||0});const d=Object.fromEntries(Object.entries(u).map(([y,b])=>[y,l.length>0?b/30:0])),f=7,p=[];for(let y=1;y<=f;y++){const b=new Date;b.setDate(b.getDate()+y);const N=b.getDay(),k=N===0||N===6?1.3:1;p.push({date:b.toISOString().split("T")[0],dayName:b.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*k*100),recommendedProduction:Math.round(o*k*110),isWeekend:N===0||N===6})}const m=t.map(y=>{const N=e.stockRequests.filter(_=>_.storeId===y.id&&_.status==="fulfilled").reduce((_,E)=>_+(E.fulfilledQuantities?Object.values(E.fulfilledQuantities).reduce((C,M)=>C+M,0):0),0),w=e.salesData.filter(_=>_.storeId===y.id&&new Date(_.date)>=s).length/30,P=w>0?N/(w*10):99;let S="low";return P<2?S="critical":P<4?S="high":P<7&&(S="medium"),{storeName:y.name,currentStock:N,avgDailySales:Math.round(w*10),daysUntilStockout:Math.round(P),riskLevel:S,recommendedOrder:Math.round(w*10*7)}}),x=Object.entries(d).map(([y,b])=>{const N=b,k=Math.round(N*1.15),w=N>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(N),recommended:k,efficiency:w,status:N>=k*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),v=[];for(let y=0;y<6;y++){const b=new Date;b.setMonth(b.getMonth()-(5-y));const N=e.salesData.filter(k=>{const w=new Date(k.date);return w.getMonth()===b.getMonth()&&w.getFullYear()===b.getFullYear()}).reduce((k,w)=>k+(w.onlineSales||0)+(w.offlineSales||0),0);v.push({month:b.toLocaleDateString("en-US",{month:"short"}),sales:N})}return{forecast:p,storeRisks:m,optimalSchedule:x,monthlyTrend:v,avgDailyProductionByType:d}},[e,t]),n=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(V2,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),a.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),a.jsxs(bn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Dr,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>a.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),a.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),a.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),a.jsxs(bn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(Hr,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),a.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-sm",children:s.storeName}),a.jsxs(Nf,{className:`${n(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),a.jsx("p",{className:"text-lg",children:s.currentStock})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),a.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),a.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),a.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(bn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(si,{data:r.forecast,children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{dataKey:"dayName",tick:{fontSize:12}}),a.jsx(vn,{tick:{fontSize:12}}),a.jsx(Ur,{}),a.jsx(da,{}),a.jsx(gr,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),a.jsx(gr,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),a.jsxs(bn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),a.jsx(Bn,{width:"100%",height:300,children:a.jsxs(dh,{data:r.monthlyTrend,children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{dataKey:"month",tick:{fontSize:12}}),a.jsx(vn,{tick:{fontSize:12}}),a.jsx(Ur,{}),a.jsx(da,{}),a.jsx(ui,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),a.jsxs(bn,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[a.jsx(pn,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),a.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm capitalize",children:s.product}),a.jsx(Nf,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-muted-foreground",children:"Current"}),a.jsxs("span",{children:[s.current,"/day"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),a.jsx(k7,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{className:"w-24 text-right",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),a.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function Wge({context:e,stores:t}){const[r,n]=L.useState("score"),[s,i]=L.useState("30days"),o=L.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,p=new Date;p.setDate(p.getDate()-f);const m=new Date;m.setDate(m.getDate()-f*2);const x=new Date(p),v=t.map(y=>{const b=e.salesData.filter(Z=>Z.storeId===y.id&&new Date(Z.date)>=p).reduce((Z,re)=>Z+(re.onlineSales||0)+(re.offlineSales||0),0),N=e.salesData.filter(Z=>Z.storeId===y.id&&new Date(Z.date)>=m&&new Date(Z.date)<x).reduce((Z,re)=>Z+(re.onlineSales||0)+(re.offlineSales||0),0),k=N>0?(b-N)/N*100:b>0?100:0,w=e.stockRequests.filter(Z=>Z.storeId===y.id&&new Date(Z.requestDate)>=p),P=w.length,S=w.filter(Z=>Z.status==="fulfilled"||Z.status==="partially_fulfilled"),_=w.reduce((Z,re)=>Z+Object.values(re.requestedQuantities).reduce((ne,U)=>ne+U,0),0),E=S.reduce((Z,re)=>Z+(re.fulfilledQuantities?Object.values(re.fulfilledQuantities).reduce((ne,U)=>ne+U,0):0),0),C=_>0?E/_*100:0,M=P>0?_/P:0,D=E>0?b/E*(C/100):0,A=Math.min(b/1e5*100,100),O=C,F=Math.max(0,Math.min(k+50,100)),W=Math.min(D,100),Y=A*.35+O*.25+F*.25+W*.15;return{storeId:y.id,storeName:y.name,totalSales:b,totalRequests:P,fulfillmentRate:C,avgRequestSize:M,salesGrowth:k,efficiency:D,overallScore:Y,rank:0}});return v.sort((y,b)=>b.overallScore-y.overallScore),v.forEach((y,b)=>{y.rank=b+1}),r==="sales"?v.sort((y,b)=>b.totalSales-y.totalSales):r==="efficiency"&&v.sort((y,b)=>b.efficiency-y.efficiency),v},[e,t,s,r]),l=L.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(p=>[p.storeName,p.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(p=>[p.storeName,Math.max(0,Math.min(p.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(p=>[p.storeName,Math.min(p.totalRequests/10*100,100)]))}]},[o]),u=f=>f===1?{icon:G1,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:cE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:cE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:V2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},d=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx(G1,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),a.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"30days",children:"Last 30 Days"}),a.jsx("option",{value:"90days",children:"Last 90 Days"})]}),a.jsxs("select",{value:r,onChange:f=>n(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"score",children:"Overall Score"}),a.jsx("option",{value:"sales",children:"Total Sales"}),a.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,p)=>{const m=u(f.rank),x=m.icon;return a.jsxs(bn,{className:"p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(Nf,{className:`${m.color} border text-lg px-3 py-1`,children:m.label}),a.jsx(x,{className:"h-8 w-8 text-purple-600"})]}),a.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),a.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sales"}),a.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Growth"}),a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?a.jsx(f6,{className:"inline h-4 w-4"}):a.jsx(qm,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(bn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),a.jsx(Bn,{width:"100%",height:350,children:a.jsxs(ooe,{data:l,children:[a.jsx(PR,{}),a.jsx(Qu,{dataKey:"metric",tick:{fontSize:12}}),a.jsx(Ju,{angle:90,domain:[0,100],tick:{fontSize:10}}),a.jsx(Ul,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&a.jsx(Ul,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&a.jsx(Ul,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),a.jsx(da,{})]})})]}),a.jsxs(bn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),a.jsx(Bn,{width:"100%",height:350,children:a.jsxs(si,{data:d,children:[a.jsx(la,{strokeDasharray:"3 3"}),a.jsx(An,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),a.jsx(vn,{yAxisId:"left",tick:{fontSize:12}}),a.jsx(vn,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),a.jsx(Ur,{}),a.jsx(da,{}),a.jsx(gr,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),a.jsx(gr,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),a.jsxs(bn,{className:"p-6",children:[a.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),a.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),a.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),a.jsx("tbody",{children:o.map(f=>{const p=u(f.rank);return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-2",children:a.jsx(Nf,{className:`${p.color} border text-xs`,children:p.label})}),a.jsx("td",{className:"py-3 px-2",children:f.storeName}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),a.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),a.jsx("td",{className:"text-right py-3 px-2",children:a.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function Kge({context:e,productionHouses:t,onNavigateToManageItems:r}){const[n,s]=L.useState(new Date().toISOString().split("T")[0]),[i,o]=L.useState(null),[l,u]=L.useState([]),[d,f]=L.useState(!0),[p,m]=L.useState({}),x=async()=>{try{const k=Bu(),{data:{session:w}}=await k.auth.getSession();return w?.access_token||null}catch(k){return console.error("Error getting fresh token:",k),null}};L.useEffect(()=>{(async()=>{const w=await x();if(!w){console.error("No access token available"),f(!1);return}try{const P=await Jm(w);u(P)}catch(P){console.error("Error loading production requests:",P)}finally{f(!1)}})()},[]),L.useEffect(()=>{const k=async()=>{const w=await x();if(!w)return;console.log(" Loading production house opening balances..."),console.log("  Production houses count:",t.length),console.log("  Inventory items count:",e.inventoryItems?.length||0);const P=new Date().toISOString().substring(0,7),S={};for(const _ of t){console.log(`  Fetching recalibration for ${_.name} (${_.id})...`);try{const E=await Xo(w,_.id,"production_house");if(console.log(`  Recalibration response for ${_.name}:`,E),E?.record){const C=E.record.date.substring(0,7);if(console.log(`  Recalibration date: ${C}, Current month: ${P}`),C===P){const M={};E.record.items.forEach(D=>{const A=e.inventoryItems?.find(O=>O.id===D.itemId||O.name===D.itemId);if(console.log(`    Item ${D.itemId}: ${A?"Found":"NOT FOUND"}`,A),A){const O=A.name.replace(/_([a-z])/g,F=>F[1].toUpperCase());M[O]=D.actualQuantity,console.log(`    Mapped to ${O} = ${D.actualQuantity}`)}}),S[_.id]=M,console.log(` Loaded opening balance for ${_.name}:`,M)}else console.log(`   Recalibration month ${C} doesn't match current month ${P}`)}else console.log(`   No recalibration found for ${_.name}`)}catch(E){console.error(` Error fetching recalibration for ${_.name}:`,E)}}console.log(" Final opening balances:",S),m(S)};t.length>0&&e.inventoryItems&&e.inventoryItems.length>0?k():console.log(" Skipping opening balance load:",{productionHousesCount:t.length,inventoryItemsCount:e.inventoryItems?.length||0})},[t,e.inventoryItems]);const v=L.useMemo(()=>{if(d)return[];const k=[];return console.log(" Production Houses:",t),console.log(" Production Requests:",l),console.log(" Selected Date:",n),t.forEach(w=>{console.log(`
 Processing house: ${w.name} (${w.id})`);const P=e.productionData.filter(U=>U.productionHouseId===w.id&&U.date<=n),S=l?.filter(U=>{if(!U.deliveredAt||U.status!=="delivered")return!1;let oe;if(U.deliveredAt.includes("/")){const ee=U.deliveredAt.split(",")[0].split("/");oe=`${ee[2]}-${ee[1].padStart(2,"0")}-${ee[0].padStart(2,"0")}`}else U.deliveredAt.includes("T")?oe=U.deliveredAt.split("T")[0]:oe=U.deliveredAt.split(" ")[0];const K=e.stores.find(ee=>ee.id===U.storeId),R=K?.productionHouseId===w.id,Q=oe<=n;return console.log(`     Request ${U.id}: storeId=${U.storeId}, store.productionHouseId=${K?.productionHouseId}, houseId=${w.id}, deliveredDate=${oe}, isForThisHouse=${R}, isBeforeOrOnDate=${Q}, status=${U.status}`),R&&Q})||[];console.log(`   Total delivered requests for ${w.name}: ${S.length}`),S.forEach(U=>{console.log(`    - Request: chicken=${U.chickenMomos}, chickenCheese=${U.chickenCheeseMomos}, deliveredAt=${U.deliveredAt}`)});const _=e.productionData.find(U=>U.productionHouseId===w.id&&U.date===n),E=l?.filter(U=>{if(!U.deliveredAt||U.status!=="delivered")return!1;let oe;if(U.deliveredAt.includes("/")){const R=U.deliveredAt.split(",")[0].split("/");oe=`${R[2]}-${R[1].padStart(2,"0")}-${R[0].padStart(2,"0")}`}else U.deliveredAt.includes("T")?oe=U.deliveredAt.split("T")[0]:oe=U.deliveredAt.split(" ")[0];return e.stores.find(R=>R.id===U.storeId)?.productionHouseId===w.id&&oe===n})||[],C={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0},M=p[w.id]||{},D={chickenMomo:"chicken",chickenCheeseMomo:"chickenCheese",vegMomo:"veg",cheeseCornMomo:"cheeseCorn",paneerMomo:"paneer",vegKurkureMomo:"vegKurkure",chickenKurkureMomo:"chickenKurkure",schezwanMomo:"schezwan"};Object.keys(M).forEach(U=>{const oe=D[U]||U;oe in C&&(C[oe]=M[U],console.log(`   Applied opening balance: ${U} -> ${oe} = ${M[U]}`))}),P.forEach(U=>{C.chicken+=U.chickenMomos?.final||0,C.chickenCheese+=U.chickenCheeseMomos?.final||0,C.veg+=U.vegMomos?.final||0,C.cheeseCorn+=U.cheeseCornMomos?.final||0,C.paneer+=U.paneerMomos?.final||0,C.vegKurkure+=U.vegKurkureMomos?.final||0,C.chickenKurkure+=U.chickenKurkureMomos?.final||0,C.schezwan+=U.schezwanMomos?.final||0});const A={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};S.forEach(U=>{A.chicken+=U.chickenMomos||0,A.chickenCheese+=U.chickenCheeseMomos||0,A.veg+=U.vegMomos||0,A.cheeseCorn+=U.cheeseCornMomos||0,A.paneer+=U.paneerMomos||0,A.vegKurkure+=U.vegKurkureMomos||0,A.chickenKurkure+=U.chickenKurkureMomos||0,A.schezwan+=U.schezwanMomos||0});const O={chicken:_?.chickenMomos?.final||0,chickenCheese:_?.chickenCheeseMomos?.final||0,veg:_?.vegMomos?.final||0,cheeseCorn:_?.cheeseCornMomos?.final||0,paneer:_?.paneerMomos?.final||0,vegKurkure:_?.vegKurkureMomos?.final||0,chickenKurkure:_?.chickenKurkureMomos?.final||0,schezwan:_?.schezwanMomos?.final||0},F={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};E.forEach(U=>{F.chicken+=U.chickenMomos||0,F.chickenCheese+=U.chickenCheeseMomos||0,F.veg+=U.vegMomos||0,F.cheeseCorn+=U.cheeseCornMomos||0,F.paneer+=U.paneerMomos||0,F.vegKurkure+=U.vegKurkureMomos||0,F.chickenKurkure+=U.chickenKurkureMomos||0,F.schezwan+=U.schezwanMomos||0});const W={chicken:{produced:O.chicken,sent:F.chicken,available:Math.max(0,C.chicken-A.chicken),percentage:0},chickenCheese:{produced:O.chickenCheese,sent:F.chickenCheese,available:Math.max(0,C.chickenCheese-A.chickenCheese),percentage:0},veg:{produced:O.veg,sent:F.veg,available:Math.max(0,C.veg-A.veg),percentage:0},cheeseCorn:{produced:O.cheeseCorn,sent:F.cheeseCorn,available:Math.max(0,C.cheeseCorn-A.cheeseCorn),percentage:0},paneer:{produced:O.paneer,sent:F.paneer,available:Math.max(0,C.paneer-A.paneer),percentage:0},vegKurkure:{produced:O.vegKurkure,sent:F.vegKurkure,available:Math.max(0,C.vegKurkure-A.vegKurkure),percentage:0},chickenKurkure:{produced:O.chickenKurkure,sent:F.chickenKurkure,available:Math.max(0,C.chickenKurkure-A.chickenKurkure),percentage:0},schezwan:{produced:O.schezwan,sent:F.schezwan,available:Math.max(0,C.schezwan-A.schezwan),percentage:0}};Object.keys(W).forEach(U=>{const oe=W[U];C[U]>0?oe.percentage=oe.available/C[U]*100:oe.percentage=0});const Y=Object.values(O).reduce((U,oe)=>U+oe,0),Z=_?(_.wastage?.dough||0)+(_.wastage?.stuffing||0)+(_.wastage?.batter||0)+(_.wastage?.coating||0):0,re=e.productionData.filter(U=>U.productionHouseId===w.id&&U.date===n&&U.approvalStatus==="approved").length,ne=e.productionData.filter(U=>U.productionHouseId===w.id&&U.date===n&&U.approvalStatus==="pending").length;k.push({productionHouseId:w.id,productionHouseName:w.name,date:n,stock:W,totalProduced:Y,totalWastage:Z,approvedEntries:re,pendingApproval:ne}),console.log(`   Stock entry created for ${w.name}:`,{totalProduced:Y,totalWastage:Z,availableStock:W,hasOpeningBalance:Object.keys(M).length>0,openingBalance:M})}),console.log(" Final stocks array:",k),k},[e.productionData,e.stores,l,t,n,p]),y=i?v.filter(k=>k.productionHouseId===i):v,b={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos",schezwan:"Schezwan Momos"},N=k=>k>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:k>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:k>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:k>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx(bn,{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(o9,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"Dynamic Inventory Items"}),a.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["You can now add custom production items beyond the default 7 momo types! Manage all items from the ",a.jsx("strong",{children:'"Manage Items"'})," page in the navigation."]}),a.jsx("p",{className:"text-xs text-orange-600",children:" Items can be production house-specific or global (available to all facilities)"})]})]})}),a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),a.jsx("p",{className:"text-muted-foreground",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("input",{type:"date",value:n,onChange:k=>s(k.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),a.jsxs("select",{value:i||"all",onChange:k=>o(k.target.value==="all"?null:k.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[a.jsx("option",{value:"all",children:"All Production Houses"}),t.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]}),r&&(e.user?.role==="manager"||e.user?.role==="cluster_head")&&a.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]}),y.map(k=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(bn,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(rr,{className:"h-5 w-5 text-orange-600"}),a.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),a.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:k.totalProduced.toLocaleString()}),a.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),a.jsxs(bn,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(G2,{className:"h-5 w-5 text-red-600"}),a.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),a.jsx("p",{className:"text-3xl text-red-900 mb-1",children:k.totalWastage.toFixed(2)}),a.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),a.jsxs(bn,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(pn,{className:"h-5 w-5 text-green-600"}),a.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),a.jsx("p",{className:"text-3xl text-green-900 mb-1",children:k.approvedEntries}),a.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),a.jsxs(bn,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Dr,{className:"h-5 w-5 text-yellow-600"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),a.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:k.pendingApproval}),a.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),a.jsxs(bn,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(On,{className:"h-5 w-5 text-orange-600"}),a.jsxs("h3",{className:"text-lg",children:[k.productionHouseName," - Stock Status"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(k.stock).map(([w,P])=>{const S=N(P.percentage);return a.jsxs("div",{className:`p-4 rounded-lg border-2 ${S.bg} ${S.border}`,children:[a.jsx("h4",{className:"text-sm mb-3",children:b[w]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"This Month Produced:"}),a.jsx("span",{className:S.text,children:P.produced})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),a.jsx("span",{className:"text-red-600",children:P.sent})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"",children:"Stock Available:"}),a.jsx("span",{className:`text-lg ${S.text}`,children:P.available})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"flex justify-between text-xs",children:a.jsxs("span",{children:[P.percentage.toFixed(0),"% remaining"]})}),a.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${S.bar} transition-all duration-300`,style:{width:`${Math.min(P.percentage,100)}%`}})})]})]})]})]},w)})})]})]},k.productionHouseId)),y.length===0&&a.jsxs(bn,{className:"p-12 text-center",children:[a.jsx(On,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),a.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function o6({context:e,stores:t,onNavigateToManageItems:r}){const[n,s]=useState("dashboard");return a.jsx("div",{className:"min-h-screen bg-background p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:a.jsx(rr,{className:"h-6 w-6 text-white"})})})]}),a.jsxs(Tabs,{value:n,onValueChange:i=>s(i),className:"space-y-6",children:[a.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[a.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[a.jsx(q1,{className:"h-4 w-4"}),"Dashboard"]}),a.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Stock"]}),a.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[a.jsx(yp,{className:"h-4 w-4"}),"Alerts"]}),a.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[a.jsx(Np,{className:"h-4 w-4"}),"Requests"]}),a.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[a.jsx(Si,{className:"h-4 w-4"}),"Reports"]}),a.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[a.jsx(V2,{className:"h-4 w-4"}),"Forecast"]}),a.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[a.jsx(G1,{className:"h-4 w-4"}),"Rankings"]})]}),a.jsx(TabsContent,{value:"dashboard",children:a.jsx(InventoryDashboard,{context:e,stores:t})}),a.jsx(TabsContent,{value:"stock-status",children:a.jsx(Kge,{context:e,productionHouses:e.productionHouses,onNavigateToManageItems:r})}),a.jsx(TabsContent,{value:"alerts",children:a.jsx(InventoryAlerts,{context:e,stores:t})}),a.jsx(TabsContent,{value:"requests",children:a.jsx(EnhancedProductionRequests,{context:e,stores:t})}),a.jsx(TabsContent,{value:"reports",children:a.jsx(ReportsVisualization,{context:e,stores:t})}),a.jsx(TabsContent,{value:"predictive",children:a.jsx(zge,{context:e,stores:t})}),a.jsx(TabsContent,{value:"performance",children:a.jsx(Wge,{context:e,stores:t})})]})]})})}function l6({context:e}){const[t,r]=L.useState([]),[n,s]=L.useState(!0),[i,o]=L.useState(!1),[l,u]=L.useState(null),[d,f]=L.useState(null),[p,m]=L.useState(null),[x,v]=L.useState({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),[y,b]=L.useState("all"),[N,k]=L.useState("all");L.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const O=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,{headers:{Authorization:`Bearer ${Pn}`}});if(!O.ok)throw new Error("Failed to load inventory items");const F=await O.json();r(F.items||[])}catch(O){console.error("Error loading items:",O),f(O instanceof Error?O.message:"Failed to load items")}finally{s(!1)}},P=async O=>{O.preventDefault(),f(null),m(null);try{const W={name:x.displayName.toLowerCase().replace(/\s+/g,"_"),displayName:x.displayName,category:x.category,unit:x.unit,linkedEntityType:x.linkedEntityType,linkedEntityId:x.linkedEntityType==="global"?void 0:x.linkedEntityId,userId:e.user?.employeeId||"unknown"},Y=l?`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${l}`:`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,Z=await fetch(Y,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify(W)});if(!Z.ok){const re=await Z.json();throw new Error(re.error||"Failed to save item")}m(l?"Item updated successfully!":"Item created successfully!"),o(!1),u(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),await w()}catch(F){console.error("Error saving item:",F),f(F instanceof Error?F.message:"Failed to save item")}},S=O=>{u(O.id),v({displayName:O.displayName,category:O.category,unit:O.unit,linkedEntityType:O.linkedEntityType,linkedEntityId:O.linkedEntityId||""}),o(!0)},_=async O=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pn}`}})).ok)throw new Error("Failed to delete item");m("Item deleted successfully!"),await w()}catch(F){console.error("Error deleting item:",F),f(F instanceof Error?F.message:"Failed to delete item")}},E=async()=>{if(confirm("This will add the 7 default momo types as global items. Continue?"))try{if(s(!0),!(await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${Pn}`}})).ok)throw new Error("Failed to initialize defaults");m("Default items initialized successfully!"),await w()}catch(O){console.error("Error initializing defaults:",O),f(O instanceof Error?O.message:"Failed to initialize defaults")}finally{s(!1)}},C=()=>{o(!1),u(null),v({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""})},M=t.filter(O=>!(y!=="all"&&O.category!==y||N!=="all"&&O.linkedEntityType!==N)),D=O=>{switch(O){case"finished_product":return"bg-purple-100 text-purple-800";case"raw_material":return"bg-blue-100 text-blue-800";case"sauce_chutney":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},A=O=>{switch(O){case"store":return a.jsx(Ci,{className:"w-4 h-4"});case"production_house":return a.jsx(On,{className:"w-4 h-4"});default:return a.jsx(rr,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Inventory Items Master"}),a.jsx("p",{className:"text-gray-600",children:"Manage all inventory items for stores and production houses"})]}),a.jsxs("div",{className:"flex gap-3",children:[t.length===0&&a.jsx("button",{onClick:E,disabled:n,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50",children:"Initialize Defaults"}),a.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[a.jsx(ao,{className:"w-5 h-5"}),"Add New Item"]})]})]}),d&&a.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[a.jsx(Hr,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-red-800",children:d}),a.jsx("button",{onClick:()=>f(null),className:"ml-auto",children:a.jsx(en,{className:"w-4 h-4 text-red-600"})})]}),p&&a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[a.jsx(Zi,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-green-800",children:p}),a.jsx("button",{onClick:()=>m(null),className:"ml-auto",children:a.jsx(en,{className:"w-4 h-4 text-green-600"})})]}),i&&a.jsxs(bn,{className:"p-6 border-2 border-purple-200",children:[a.jsx("h2",{className:"text-xl mb-4",children:l?"Edit Item":"Add New Item"}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Display Name *"}),a.jsx("input",{type:"text",value:x.displayName,onChange:O=>v({...x,displayName:O.target.value}),placeholder:"e.g., Schezwan Momo",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Category *"}),a.jsxs("select",{value:x.category,onChange:O=>v({...x,category:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"finished_product",children:"Finished Product"}),a.jsx("option",{value:"raw_material",children:"Raw Material"}),a.jsx("option",{value:"sauce_chutney",children:"Sauce/Chutney"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Unit *"}),a.jsxs("select",{value:x.unit,onChange:O=>v({...x,unit:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"pieces",children:"Pieces"}),a.jsx("option",{value:"kg",children:"Kilograms (kg)"}),a.jsx("option",{value:"liters",children:"Liters"}),a.jsx("option",{value:"grams",children:"Grams"}),a.jsx("option",{value:"ml",children:"Milliliters (ml)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Link To *"}),a.jsxs("select",{value:x.linkedEntityType,onChange:O=>v({...x,linkedEntityType:O.target.value,linkedEntityId:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"global",children:"All (Global)"}),a.jsx("option",{value:"store",children:"Specific Store"}),a.jsx("option",{value:"production_house",children:"Specific Production House"})]})]}),x.linkedEntityType==="store"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Store *"}),a.jsxs("select",{value:x.linkedEntityId,onChange:O=>v({...x,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Store --"}),e.stores?.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})]}),x.linkedEntityType==="production_house"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Production House *"}),a.jsxs("select",{value:x.linkedEntityId,onChange:O=>v({...x,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"-- Select Production House --"}),e.productionHouses?.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:C,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:l?"Update Item":"Add Item"})]})]})]}),a.jsx(bn,{className:"p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Category"}),a.jsxs("select",{value:y,onChange:O=>b(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"finished_product",children:"Finished Products"}),a.jsx("option",{value:"raw_material",children:"Raw Materials"}),a.jsx("option",{value:"sauce_chutney",children:"Sauces/Chutneys"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Type"}),a.jsxs("select",{value:N,onChange:O=>k(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"global",children:"Global Items"}),a.jsx("option",{value:"store",children:"Store Specific"}),a.jsx("option",{value:"production_house",children:"Production House Specific"})]})]})]})}),n?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading items..."})]}):M.length===0?a.jsxs(bn,{className:"p-12 text-center",children:[a.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No items found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first inventory item"}),t.length===0&&a.jsx("button",{onClick:E,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:"Initialize Default Items"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(O=>a.jsxs(bn,{className:"p-4 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[A(O.linkedEntityType),a.jsx("h3",{className:"font-semibold text-gray-900",children:O.displayName})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>S(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:a.jsx(ji,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>_(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:a.jsx(ps,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nf,{className:D(O.category),children:O.category.replace("_"," ").toUpperCase()}),a.jsxs("span",{className:"text-gray-500",children:[" ",O.unit]})]}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Scope:"})," ",O.linkedEntityType==="global"?"All Entities":O.linkedEntityType==="store"?`Store: ${e.stores?.find(F=>F.id===O.linkedEntityId)?.name||"Unknown"}`:`Production House: ${e.productionHouses?.find(F=>F.id===O.linkedEntityId)?.name||"Unknown"}`]}),a.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:["Created: ",new Date(O.createdAt).toLocaleDateString()]})]})]},O.id))}),a.jsx(bn,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-purple-600",children:t.filter(O=>O.isActive).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-blue-600",children:t.filter(O=>O.linkedEntityType==="global").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Global Items"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-green-600",children:t.filter(O=>O.linkedEntityType==="store").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Store Specific"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-orange-600",children:t.filter(O=>O.linkedEntityType==="production_house").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Production House"})]})]})})]})}function c6(){const e=L.useRef(""),t=L.useRef(null);return L.useEffect(()=>{console.log(" Stock Request Reminder Scheduler initialized");const r=async()=>{const n=new Date,s=n.getHours(),i=n.toISOString().split("T")[0];if(s===15&&e.current!==i){console.log(" 3PM - Time to send stock request reminders!");try{const o=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/send-stock-request-reminders`,{method:"POST",headers:{Authorization:`Bearer ${Pn}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();console.log(" Stock request reminders sent successfully:",l),e.current=i}else console.error(" Failed to send stock request reminders:",o.statusText)}catch(o){console.error(" Error sending stock request reminders:",o)}}};return t.current=setInterval(r,900*1e3),r(),()=>{t.current&&clearInterval(t.current)}},[]),null}function Vge({user:e,productionData:t}){const[r,n]=L.useState(!1),[s,i]=L.useState(!1),[o,l]=L.useState(null),[u,d]=L.useState(!1),[f,p]=L.useState(null),m=async()=>{if(e?.accessToken){i(!0),l(null);try{const v=await Q6(e.accessToken);l(` ${v.message}`),console.log("Migration successful:",v)}catch(v){l(` Error: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Migration failed:",v)}finally{i(!1)}}},x=async()=>{if(e?.accessToken){d(!0),p(null);try{const v=await VD(e.accessToken);p(` ${v.message}

Total Checked: ${v.totalChecked}
`+(v.fixed.length>0?`
Fixed Requests:
${v.fixed.map(y=>`   ${y.storeId}: ${y.oldProductionHouseId}  ${y.newProductionHouseId} (${y.status})`).join(`
`)}`:"")),console.log("Stock request fix successful:",v)}catch(v){p(` Error: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Stock request fix failed:",v)}finally{d(!1)}}};return r?a.jsxs("div",{className:"fixed bottom-4 right-4 bg-white rounded-xl shadow-2xl p-6 max-w-2xl max-h-[80vh] overflow-auto z-50 border-2 border-purple-600",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg text-gray-900",children:"Debug Panel"}),a.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Current User:"}),a.jsx("pre",{className:"text-xs text-gray-800 overflow-auto",children:JSON.stringify(e,null,2)})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"User Role Check:"}),a.jsxs("div",{className:"text-xs space-y-1",children:[a.jsxs("p",{children:["Role: ",a.jsx("strong",{children:e?.role})]}),a.jsxs("p",{children:["Designation: ",a.jsx("strong",{children:e?.designation||"none"})]}),a.jsxs("p",{children:["Store ID: ",a.jsx("strong",{children:e?.storeId||"none"})]}),a.jsxs("p",{children:["Is Operations Manager: ",a.jsx("strong",{children:e?.role==="manager"&&e?.designation!=="store_incharge"&&e?.designation!=="production_incharge"?"YES":"NO"})]}),a.jsxs("p",{children:["Is Cluster Head: ",a.jsx("strong",{children:e?.role==="cluster_head"?"YES":"NO"})]}),a.jsxs("p",{children:["Is Production Incharge: ",a.jsx("strong",{children:e?.designation==="production_incharge"?"YES":"NO"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Production Data Status:"}),a.jsxs("div",{className:"text-xs space-y-1",children:[a.jsxs("p",{children:["Total Production Entries: ",a.jsx("strong",{children:t.length})]}),a.jsxs("p",{children:["Pending Approvals: ",a.jsx("strong",{children:t.filter(v=>v.approvalStatus==="pending").length})]}),a.jsxs("p",{children:["Approved: ",a.jsx("strong",{children:t.filter(v=>v.approvalStatus==="approved").length})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Recent Production Entries:"}),a.jsx("div",{className:"text-xs space-y-2 max-h-60 overflow-auto",children:t.slice(0,5).map((v,y)=>a.jsxs("div",{className:"bg-white p-2 rounded border border-gray-200",children:[a.jsxs("p",{children:["Date: ",v.date]}),a.jsxs("p",{children:["Status: ",v.approvalStatus]}),a.jsxs("p",{children:["Created By: ",v.createdBy]}),a.jsxs("p",{children:["Store ID: ",v.storeId||"none"]})]},y))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Instructions:"}),a.jsxs("ol",{className:"text-xs space-y-1 list-decimal list-inside",children:[a.jsx("li",{children:'Check if "Is Operations Manager" shows YES'}),a.jsx("li",{children:"Check if you have pending production entries"}),a.jsx("li",{children:"Click the button below to create notifications for existing entries"}),a.jsx("li",{children:"Or submit NEW production data (after backend changes)"}),a.jsx("li",{children:"Check browser console for backend logs"}),a.jsx("li",{children:"Check notifications (bell icon)"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Create Notifications for Existing Entries:"}),a.jsxs("button",{onClick:m,disabled:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(yp,{className:"w-4 h-4"}),s?"Creating Notifications...":"Create Notifications Now"]}),o&&a.jsx("div",{className:"mt-3 p-3 bg-white rounded border border-gray-300 text-xs",children:o}),a.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["This will create notifications for all ",t.filter(v=>v.approvalStatus==="pending").length," pending production entries."]})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm text-gray-700 mb-2",children:"Fix Stock Request Production House Mapping:"}),a.jsxs("button",{onClick:x,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(bp,{className:"w-4 h-4"}),u?"Fixing Stock Requests...":"Fix Stock Requests Now"]}),f&&a.jsx("div",{className:"mt-3 p-3 bg-white rounded border border-gray-300 text-xs whitespace-pre-wrap font-mono",children:f}),a.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"This will ensure all stock requests have the correct productionHouseId based on store mapping."})]})]})]}):a.jsx("button",{onClick:()=>n(!0),className:"fixed bottom-4 right-4 p-3 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 z-50",children:a.jsx(bp,{className:"w-6 h-6"})})}function Fk(){return"serviceWorker"in navigator&&"PushManager"in window}const Gge=`
// Service Worker for Push Notifications
self.addEventListener('install', (event) => {
  console.log('Service Worker installed');
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  console.log('Service Worker activated');
  event.waitUntil(clients.claim());
});

self.addEventListener('push', (event) => {
  console.log('Push notification received:', event);
  
  let notificationData = {
    title: 'Bhandar-IMS',
    body: 'You have a new notification',
    icon: '/icon-192x192.png',
    badge: '/badge-72x72.png',
    tag: 'bhandar-notification',
    requireInteraction: false,
  };

  if (event.data) {
    try {
      const data = event.data.json();
      notificationData = {
        ...notificationData,
        title: data.title || notificationData.title,
        body: data.message || data.body || notificationData.body,
        icon: data.icon || notificationData.icon,
        tag: data.tag || notificationData.tag,
        data: data,
      };
    } catch (e) {
      console.error('Error parsing push data:', e);
      notificationData.body = event.data.text();
    }
  }

  event.waitUntil(
    self.registration.showNotification(notificationData.title, {
      body: notificationData.body,
      icon: notificationData.icon,
      badge: notificationData.badge,
      tag: notificationData.tag,
      requireInteraction: notificationData.requireInteraction,
      data: notificationData.data,
    })
  );
});

self.addEventListener('notificationclick', (event) => {
  console.log('Notification clicked:', event);
  event.notification.close();
  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {
      for (const client of clientList) {
        if (client.url.includes(self.registration.scope) && 'focus' in client) {
          return client.focus();
        }
      }
      if (clients.openWindow) {
        return clients.openWindow('/');
      }
    })
  );
});
`;async function Yge(){if(!Fk())return null;try{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully from /sw.js"),e}catch{console.log(" /sw.js not found, using inline service worker");const t=new Blob([Gge],{type:"application/javascript"}),r=URL.createObjectURL(t),n=await navigator.serviceWorker.register(r,{scope:"/"});return console.log(" Service Worker registered successfully (inline)"),n}}catch{return null}}function Xge(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}async function Jge(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xge(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function u6(e,t){try{if(!(await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function Qge(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Zge(e,t){if(!Fk())return console.log(" Push notifications not supported in this browser"),!1;try{const r=await Yge();if(!r)return console.log(" Service worker registration failed - push notifications unavailable"),!1;await navigator.serviceWorker.ready;const n=await Qge(r);if(n)return console.log(" Push notifications already enabled"),await u6(n,e),!0;const s=Notification.permission;if(s==="denied")return console.log(" Push notifications blocked. To enable: Click  icon in address bar  Allow notifications"),!1;if(s==="default")return console.log(" Push notifications available. Click the notification bell to enable."),!1;if(s==="granted"){const i=await Jge(r,t);return i?(await u6(i,e),console.log(" Push notifications enabled successfully"),!0):(console.log(" Failed to create push subscription"),!1)}return!1}catch(r){return console.log(" Push notifications unavailable:",r instanceof Error?r.message:"Unknown error"),!1}}function exe(){const[e,t]=L.useState("analytics"),[r,n]=L.useState(null),[s,i]=L.useState(null),[o,l]=L.useState(!0),[u,d]=L.useState(null),[f,p]=L.useState([]),[m,x]=L.useState([]),[v,y]=L.useState([]),[b,N]=L.useState([]),[k,w]=L.useState([]),[P,S]=L.useState([]),[_,E]=L.useState(!1),[C,M]=L.useState(null),[D,A]=L.useState(!1),[O,F]=L.useState([]),[W,Y]=L.useState(null),[Z,re]=L.useState([]),[ne,U]=L.useState([]),[oe,K]=L.useState([]),[R,Q]=L.useState([]),[ee,se]=L.useState([]),[xe,ge]=L.useState([]),[Me,ce]=L.useState([]),me=Bu(),q=new URLSearchParams(window.location.search).get("setup")==="cluster-head",Ne=async()=>{try{const B=await Uu();F(B)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading stores:",B)}},ae=async()=>{try{const B=await Ps();Q(B)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading employees:",B)}},De=async B=>{try{const z=await r5(B);z&&(se(z.managedStoreIds||[]),ge(z.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:z.managedStoreIds?.length||0,productionHouses:z.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},Be=async B=>{E(!0),M(null);try{const[z,H,J,te,ie,we,Pe,V,ue,_e]=await Promise.all([Vm(B),eN(B),$6(B),tN(B),Qm(B),rN(),Ch(B),qD(B),Jm(B),Gd()]);console.log(" Loaded Inventory Items:",z.length),console.log(" Loaded Overhead Items:",H.length),console.log(" Loaded Fixed Cost Items:",J.length);const ve=Array.from(new Map(z.map(Cr=>[Cr.id,Cr])).values()),Xe=Array.from(new Map(H.map(Cr=>[Cr.id,Cr])).values()),ct=Array.from(new Map(J.map(Cr=>[Cr.id,Cr])).values()),tt=Array.from(new Map(te.map(Cr=>[Cr.id,Cr])).values()),Qe=Array.from(new Map(we.map(Cr=>[Cr.id,Cr])).values()),Ut=z.length-ve.length,Tr=H.length-Xe.length,Rr=J.length-ct.length,Lr=te.length-tt.length,rn=we.length-Qe.length,$s=Ut+Tr+Rr+Lr+rn;console.log(" After deduplication:"),console.log("Inventory: Before:",z.length," After:",ve.length),console.log("Overheads: Before:",H.length," After:",Xe.length),console.log("Fixed Costs: Before:",J.length," After:",ct.length),console.log("Sales: Before:",te.length," After:",tt.length),$s>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const Br=await me.auth.getUser(B),Ls=Br.data?.user?.user_metadata?.role;if(Br.data?.user&&Ls==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const X=await H6(B);console.log(` Cleaned ${X.removed} duplicates successfully`)}}catch(Br){console.log("Auto-cleanup skipped:",Br instanceof Error?Br.message:"Unknown error")}},1500)),p(ve),x(Xe),y(ct),N(tt),w(ie.data||[]),S(Qe),re(Pe),console.log(" Loaded Stock Requests from API:",V.length,V),U(V),K(ue),ce(_e)}catch(z){if(z instanceof Error&&(z.message==="Not authenticated"||z.message==="Unauthorized"))return;console.error("Error loading data:",z),M("Failed to load inventory data. Please refresh the page.")}finally{E(!1)}},Se=async()=>{try{const B=await Gd();if(B.length===0){console.log(" No inventory items found, initializing defaults...");try{await jD();const z=await Gd();ce(z),console.log(` Initialized ${z.length} default inventory items`);return}catch(z){console.error("Error initializing default items:",z),ce([]);return}}ce(B),await Fe(B)}catch(B){console.error("Error loading inventory items:",B),ce([])}},Fe=async B=>{const z=[{name:"chicken",displayName:"Chicken Momos",variations:["chicken momo","chicken momos"]},{name:"chickenCheese",displayName:"Chicken Cheese Momos",variations:["chicken cheese momo","chicken cheese momos","chicken cheese"]},{name:"veg",displayName:"Veg Momos",variations:["veg momo","veg momos","vegetable momos"]},{name:"cheeseCorn",displayName:"Cheese Corn Momos",variations:["cheese corn momo","cheese corn momos","corn cheese"]},{name:"paneer",displayName:"Paneer Momos",variations:["paneer momo","paneer momos"]},{name:"vegKurkure",displayName:"Veg Kurkure Momos",variations:["veg kurkure momo","veg kurkure momos","veg kurkure"]},{name:"chickenKurkure",displayName:"Chicken Kurkure Momos",variations:["chicken kurkure momo","chicken kurkure momos","chicken kurkure"]}];try{let H=!1;for(const J of z){let te=B.find(ie=>ie.name.toLowerCase()===J.name.toLowerCase());te||(te=B.find(ie=>{const we=ie.displayName.toLowerCase(),Pe=J.displayName.toLowerCase();return we===Pe||we.replace(/\s*momos?\s*/i,"").trim()===Pe.replace(/\s*momos?\s*/i,"").trim()?!0:J.variations.some(V=>we.includes(V.toLowerCase()))})),te?te.name!==J.name&&(console.log(` Updating inventory item name: "${te.displayName}" from "${te.name}" to "${J.name}"`),await wD(te.id,{name:J.name,displayName:J.displayName}),H=!0):(console.log(` Creating core inventory item: ${J.displayName}`),await bD({name:J.name,displayName:J.displayName,category:"finished_product",unit:"pieces",linkedEntityType:"global",createdBy:"system"}),H=!0)}if(H){const J=await Gd();ce(J)}}catch(H){console.error("Error ensuring core momos exist:",H)}};L.useEffect(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),(async()=>{try{const{data:{session:z}}=await me.auth.getSession();if(z?.user){let H=null,J=z.user.user_metadata?.designation||null;if(z.user.user_metadata?.employeeId)try{const we=(await Zo()).find(Pe=>Pe.employeeId===z.user.user_metadata?.employeeId);we&&(H=we.storeId||null,J=we.designation||J)}catch(ie){console.error("Error fetching employee storeId on session check:",ie)}const te={email:z.user.email||"",name:z.user.user_metadata?.name||z.user.email?.split("@")[0]||"User",role:z.user.user_metadata?.role||"manager",employeeId:z.user.user_metadata?.employeeId||null,accessToken:z.access_token,storeId:H,designation:J};n(te),await Be(z.access_token),(te.role==="cluster_head"||te.role==="manager")&&(await Ne(),await ae(),te.role==="cluster_head"&&await De(z.access_token))}}catch(z){console.log("Session check error:",z)}finally{l(!1)}})()},[]),L.useEffect(()=>{r&&(async()=>{try{if(!Fk()){console.log("Push notifications not supported on this device");return}const z=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${Pn}`}});if(!z.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const H=await z.json();if(!H.configured||!H.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const J=r.employeeId||r.email;await Zge(J,H.publicKey)&&console.log(" Push notifications enabled successfully for user:",J)}catch(z){console.log(" Push notifications setup skipped:",z instanceof Error?z.message:"Unknown error")}})()},[r]);const ze=async(B,z)=>{i(null);try{const{data:H,error:J}=await me.auth.signInWithPassword({email:B,password:z});if(J){i(J.message);return}if(H.user&&H.session){let te=null,ie=H.user.user_metadata?.designation||null;if(H.user.user_metadata?.employeeId)try{const V=(await Zo()).find(ue=>ue.employeeId===H.user.user_metadata?.employeeId);V&&(te=V.storeId||null,ie=V.designation||ie)}catch(Pe){console.error("Error fetching employee storeId:",Pe)}const we={email:H.user.email||"",name:H.user.user_metadata?.name||H.user.email?.split("@")[0]||"User",role:H.user.user_metadata?.role||"manager",employeeId:H.user.user_metadata?.employeeId||null,accessToken:H.session.access_token,storeId:te,designation:ie};n(we),await Be(H.session.access_token),(we.role==="cluster_head"||we.role==="manager")&&(await Ne(),await ae())}}catch(H){console.log("Login error:",H),i("Failed to sign in. Please try again.")}},Ee=async(B,z,H,J)=>{i(null);try{const te=await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify({email:B,password:z,name:H,role:J,employeeId:J==="cluster_head"?"BM001":null})}),ie=await te.json();if(!te.ok){i(ie.error||"Failed to create account");return}if(!ie.user){i("Failed to create account");return}if(J==="cluster_head")try{await fetch(`https://${ja}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pn}`},body:JSON.stringify({employeeId:"BM001",name:H,email:B,role:"cluster_head",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:ie.user.id})})}catch(we){console.log("Error creating unified employee record:",we)}await ze(B,z)}catch(te){console.log("Signup error:",te),i("Failed to create account. Please try again.")}},He=async()=>{await me.auth.signOut(),n(null),p([]),x([]),y([]),N([]),t("sales")},gt={inventory:f,overheads:m,fixedCosts:v,salesData:b,categorySalesData:k,productionData:P,productionHouses:Z,stockRequests:ne,productionRequests:oe,stores:O,managedStoreIds:ee,managedProductionHouseIds:xe,inventoryItems:Me,loadInventoryItems:Se,addInventoryItem:async B=>{if(r)try{const z={...B,storeId:r.storeId||B.storeId},H=await P6(r.accessToken,z);p([...f,H])}catch(z){throw console.error("Error adding inventory item:",z),z}},addOverheadItem:async B=>{if(r)try{const z={...B,storeId:r.storeId||B.storeId},H=await M6(r.accessToken,z);x([...m,H])}catch(z){throw console.error("Error adding overhead item:",z),z}},addFixedCostItem:async B=>{if(r)try{const z={...B,storeId:r.storeId||B.storeId},H=await L6(r.accessToken,z);y([...v,H])}catch(z){throw console.error("Error adding fixed cost item:",z),z}},updateInventoryItem:async(B,z)=>{if(r)try{const H={...z,storeId:r.storeId||z.storeId},J=await I6(r.accessToken,B,H);p(f.map(te=>te.id===B?J:te))}catch(H){throw console.error("Error updating inventory item:",H),H}},updateOverheadItem:async(B,z)=>{if(r)try{const H={...z,storeId:r.storeId||z.storeId},J=await R6(r.accessToken,B,H);x(m.map(te=>te.id===B?J:te))}catch(H){throw console.error("Error updating overhead item:",H),H}},updateFixedCostItem:async(B,z)=>{if(r)try{const H={...z,storeId:r.storeId||z.storeId},J=await B6(r.accessToken,B,H);y(v.map(te=>te.id===B?J:te))}catch(H){throw console.error("Error updating fixed cost item:",H),H}},deleteInventoryItem:async B=>{if(r)try{await D6(r.accessToken,B),p(f.filter(z=>z.id!==B))}catch(z){throw console.error("Error deleting inventory item:",z),z}},deleteOverheadItem:async B=>{if(r)try{await F6(r.accessToken,B),x(m.filter(z=>z.id!==B))}catch(z){throw console.error("Error deleting overhead item:",z),z}},deleteFixedCostItem:async B=>{if(r)try{await U6(r.accessToken,B),y(v.filter(z=>z.id!==B))}catch(z){throw console.error("Error deleting fixed cost item:",z),z}},addSalesData:async B=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const z={...B,storeId:r.storeId||B.storeId},H=await q6(r.accessToken,z);N([...b,H])}catch(z){throw console.error("Error adding sales data:",z),z}},updateSalesData:async(B,z)=>{if(r)try{const H={...z,storeId:r.storeId||z.storeId},J=await z6(r.accessToken,B,H);N(b.map(te=>te.id===B?J:te))}catch(H){throw console.error("Error updating sales data:",H),H}},approveSalesData:async B=>{if(r)try{const z=await W6(r.accessToken,B);N(b.map(H=>H.id===B?z:H))}catch(z){throw console.error("Error approving sales data:",z),z}},requestSalesApproval:async(B,z,H)=>{if(r)try{const J=await K6(r.accessToken,B,z,H);N(b.map(te=>te.id===B?J:te))}catch(J){throw console.error("Error requesting sales approval:",J),J}},approveDiscrepancy:async B=>{if(r)try{const z=await V6(r.accessToken,B);N(b.map(H=>H.id===B?z:H))}catch(z){throw console.error("Error approving discrepancy:",z),z}},rejectDiscrepancy:async(B,z)=>{if(r)try{const H=await G6(r.accessToken,B,z);N(b.map(J=>J.id===B?H:J))}catch(H){throw console.error("Error rejecting discrepancy:",H),H}},addProductionData:async B=>{if(r)try{const z={...B,storeId:r.storeId||B.storeId},H=await Y6(z);S([...P,H])}catch(z){throw console.error("Error adding production data:",z),z}},updateProductionData:async(B,z)=>{if(r)try{const H={...z,storeId:r.storeId||z.storeId},J=await X6(B,H);S(P.map(te=>te.id===B?J:te))}catch(H){throw console.error("Error updating production data:",H),H}},approveProductionData:async B=>{if(r)try{const z=await J6(B);S(P.map(H=>H.id===B?z:H))}catch(z){throw console.error("Error approving production data:",z),z}},addProductionHouse:async B=>{if(r)try{const z=await MD(r.accessToken,B);re([...Z,z])}catch(z){throw console.error("Error creating production house:",z),z}},updateProductionHouse:async(B,z)=>{if(r)try{const H=await RD(r.accessToken,B,z);re(Z.map(J=>J.id===B?H:J))}catch(H){throw console.error("Error updating production house:",H),H}},updateProductionHouseInventory:async(B,z)=>{if(r)try{const H=await FD(r.accessToken,B,z);re(Z.map(J=>J.id===B?H:J))}catch(H){throw console.error("Error updating production house inventory:",H),H}},deleteProductionHouse:async B=>{if(r)try{await UD(r.accessToken,B),re(Z.filter(z=>z.id!==B))}catch(z){throw console.error("Error deleting production house:",z),z}},setProductionHouses:re,createStockRequest:async B=>{if(r)try{const z=await zD(r.accessToken,B);U([...ne,z])}catch(z){throw console.error("Error creating stock request:",z),z}},fulfillStockRequest:async(B,z,H,J,te)=>{if(r)try{const ie=await WD(r.accessToken,B,z,H,J,te);U(ne.map(Pe=>Pe.id===B?ie:Pe));const we=await Ch(r.accessToken);re(we)}catch(ie){throw console.error("Error fulfilling stock request:",ie),ie}},cancelStockRequest:async B=>{if(r)try{const z=await KD(r.accessToken,B);U(ne.map(H=>H.id===B?z:H))}catch(z){throw console.error("Error cancelling stock request:",z),z}},isManager:r?.role==="manager",user:r};if(o)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(rr,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(q)return a.jsx(Lme,{});if(!r)return a.jsx(Eme,{onLogin:ze,onSignup:Ee,error:s});const lr=r.role==="cluster_head",Sr=r.role==="employee",ht=r.role==="employee"&&r.designation==="store_incharge",sr=r.designation==="production_incharge",qt=ht||sr,Xr=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",wr=r.role==="manager",pr=sr||Xr||lr;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:lr,isEmployee:Sr,isManager:wr,isStoreIncharge:ht,isProductionIncharge:sr,isOperationsManager:Xr,isAnyIncharge:qt,canViewProduction:pr}),console.log(" Current activeView:",e),Sr?a.jsxs(a.Fragment,{children:[a.jsx(c6,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",ht?"Store Incharge":sr?"Production Head":"Employee"]})]})}),a.jsx("button",{onClick:()=>A(!D),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:D?a.jsx(en,{className:"w-5 h-5"}):a.jsx(hE,{className:"w-5 h-5"})}),a.jsxs("div",{className:"hidden lg:flex gap-2",children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(pn,{className:"w-4 h-4"}),a.jsx("span",{children:"Analytics"})]}),qt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Jn,{className:"w-4 h-4"}),a.jsx("span",{children:"Sales"})]})]}),pr&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(On,{className:"w-4 h-4"}),a.jsx("span",{children:"Production"})]}),qt&&a.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Stock Requests"})]}),wr&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(q1,{className:"w-4 h-4"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory-items"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory-items"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(wn,{className:"w-4 h-4"}),a.jsx("span",{children:qt?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(Zn,{className:"w-4 h-4"}),a.jsx("span",{children:"Attendance"})]}),qt&&a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[a.jsx(wi,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]}),qt&&a.jsx(XI,{onNavigate:(B,z,H)=>{B==="sales"&&(t("sales"),d(null)),B==="production"&&(t("production"),d(null)),B==="attendance"&&(t("employees"),d(null)),B==="production-requests"&&(console.log(" Production request notification clicked, requestId:",H),d(null),setTimeout(()=>{d(H||null),t("analytics")},0))}}),a.jsxs("button",{onClick:He,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[a.jsx(U0,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})]}),D&&a.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{t("analytics"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(pn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),qt&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("inventory"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Jn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]})]}),pr&&a.jsxs("button",{onClick:()=>{t("production"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),qt&&a.jsxs("button",{onClick:()=>{t("stock-requests"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Stock Requests"})]}),wr&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("advanced-inventory"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(q1,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory-items"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory-items"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Manage Items"})]})]}),a.jsxs("button",{onClick:()=>{t("payroll"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(wn,{className:"w-5 h-5"}),a.jsx("span",{children:qt?"Payroll":"My Payouts"})]}),a.jsxs("button",{onClick:()=>{t("attendance"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(Zn,{className:"w-5 h-5"}),a.jsx("span",{children:"Attendance"})]}),qt&&a.jsxs("button",{onClick:()=>{t("export"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[a.jsx(wi,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:He,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[a.jsx(U0,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),a.jsx("main",{className:"pb-6",children:e==="analytics"?a.jsx(KI,{context:gt,highlightRequestId:u,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory"&&qt?a.jsx(LE,{context:gt}):e==="sales"&&qt?a.jsx(UP,{context:gt,selectedStoreId:W}):e==="production"&&pr?a.jsx(JI,{context:gt,selectedStoreId:W}):e==="payroll"?qt?a.jsx(DF,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):a.jsx(GI,{employeeId:r.employeeId||""}):e==="attendance"?a.jsx(g8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:qt,inchargeDesignation:r.designation}):e==="export"&&qt?a.jsx(VI,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&qt?a.jsx(QI,{context:gt,stores:O}):e==="advanced-inventory"&&wr?a.jsx(o6,{context:gt,stores:O,onNavigateToManageItems:()=>t("inventory-items")}):e==="inventory-items"&&(wr||qt)?(console.log(" Rendering InventoryItemsManagement:",{activeView:e,isManager:wr,isAnyIncharge:qt}),a.jsx(l6,{context:gt})):(console.log(" Falling through to EmployeeDashboard:",{activeView:e,isManager:wr,isAnyIncharge:qt}),a.jsx(GI,{employeeId:r.employeeId||""}))})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(c6,{}),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),a.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(XI,{onNavigate:(B,z,H)=>{B==="sales"?(t("sales"),d(null)):B==="attendance"||B==="leave"?(t("employees"),d(null)):B==="production"?(t("production"),d(null)):B==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",H),d(null),setTimeout(()=>{d(H||null),t("analytics")},0))}}),a.jsx("button",{onClick:()=>A(!D),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:D?a.jsx(en,{className:"w-5 h-5"}):a.jsx(hE,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[lr?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(pn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Jn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),pr&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(On,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ni,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Assets"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(wi,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(pn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),a.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Jn,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),a.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(rr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Inventory"})]}),pr&&a.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(On,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),a.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(Ni,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),a.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[a.jsx(wi,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Export"})]})]}),a.jsxs("button",{onClick:He,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[a.jsx(U0,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),D&&a.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[lr?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(pn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),a.jsxs("button",{onClick:()=>{t("sales"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(Jn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),pr&&a.jsxs("button",{onClick:()=>{t("production"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Ni,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("assets"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Assets"})]}),a.jsxs("button",{onClick:()=>{t("export"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(wi,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{t("analytics"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[a.jsx(pn,{className:"w-5 h-5"}),a.jsx("span",{children:"Analytics"})]}),a.jsxs("button",{onClick:()=>{t("sales"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[a.jsx(Jn,{className:"w-5 h-5"}),a.jsx("span",{children:"Sales"})]}),a.jsxs("button",{onClick:()=>{t("inventory"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[a.jsx(rr,{className:"w-5 h-5"}),a.jsx("span",{children:"Inventory"})]}),pr&&a.jsxs("button",{onClick:()=>{t("production"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(On,{className:"w-5 h-5"}),a.jsx("span",{children:"Production"})]}),a.jsxs("button",{onClick:()=>{t("employees"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[a.jsx(Ni,{className:"w-5 h-5"}),a.jsx("span",{children:"Employees"})]}),a.jsxs("button",{onClick:()=>{t("export"),A(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[a.jsx(wi,{className:"w-5 h-5"}),a.jsx("span",{children:"Export"})]})]}),a.jsxs("button",{onClick:He,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(U0,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})]})]})}),lr&&O.length>0&&e!=="analytics"&&a.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx($me,{stores:O,selectedStoreId:W,onStoreChange:Y,showAllStores:!0})})}),C&&a.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[a.jsx(Hr,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm",children:C}),a.jsx("button",{onClick:()=>r&&Be(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),_&&a.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[a.jsx(rr,{className:"w-5 h-5 animate-pulse"}),a.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),a.jsx("main",{className:"pb-6",children:e==="sales"?a.jsx(UP,{context:gt,selectedStoreId:W}):e==="inventory"?r.role==="manager"?a.jsx(nq,{context:gt,selectedStoreId:W,employees:R}):a.jsx(LE,{context:gt,selectedStoreId:W}):e==="analytics"?a.jsx(KI,{context:gt,selectedStoreId:W,highlightRequestId:u,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="export"?a.jsx(VI,{userRole:r.role,selectedStoreId:W,currentUserId:r.email}):e==="employees"?a.jsx(Rme,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:W}):e==="assets"?a.jsx(qme,{context:gt,stores:O,employees:R,onRefreshStores:Ne}):e==="production"&&pr?a.jsx(JI,{context:gt,selectedStoreId:W}):e==="stock-requests"?a.jsx(QI,{context:gt,stores:O}):e==="advanced-inventory"?a.jsx(o6,{context:gt,stores:O,onNavigateToManageItems:()=>{console.log(" App.tsx (Manager): Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory-items"?(console.log(" Rendering InventoryItemsManagement (Manager section):",{activeView:e,isManager:wr}),a.jsx(l6,{context:gt})):a.jsx(loe,{context:gt})}),a.jsx(Vge,{user:r,productionData:P})]})]})}g7.createRoot(document.getElementById("root")).render(a.jsx(exe,{}));
