function K7(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(a,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uy={exports:{}},nh={},Hy={exports:{}},Tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function V7(){if(CE)return Tr;CE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function v(L,D,Y){this.props=L,this.context=D,this.refs=y,this.updater=Y||g}v.prototype.isReactComponent={},v.prototype.setState=function(L,D){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,D,"setState")},v.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=v.prototype;function k(L,D,Y){this.props=L,this.context=D,this.refs=y,this.updater=Y||g}var w=k.prototype=new N;w.constructor=k,b(w,v.prototype),w.isPureReactComponent=!0;var A=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(L,D,Y){var V,ee={},ge=null,ke=null;if(D!=null)for(V in D.ref!==void 0&&(ke=D.ref),D.key!==void 0&&(ge=""+D.key),D)S.call(D,V)&&!E.hasOwnProperty(V)&&(ee[V]=D[V]);var Ce=arguments.length-2;if(Ce===1)ee.children=Y;else if(1<Ce){for(var ce=Array(Ce),me=0;me<Ce;me++)ce[me]=arguments[me+2];ee.children=ce}if(L&&L.defaultProps)for(V in Ce=L.defaultProps,Ce)ee[V]===void 0&&(ee[V]=Ce[V]);return{$$typeof:e,type:L,key:ge,ref:ke,props:ee,_owner:_.current}}function I(L,D){return{$$typeof:e,type:L.type,key:D,ref:L.ref,props:L.props,_owner:L._owner}}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function M(L){var D={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Y){return D[Y]})}var O=/\/+/g;function U(L,D){return typeof L=="object"&&L!==null&&L.key!=null?M(""+L.key):D.toString(36)}function ie(L,D,Y,V,ee){var ge=typeof L;(ge==="undefined"||ge==="boolean")&&(L=null);var ke=!1;if(L===null)ke=!0;else switch(ge){case"string":case"number":ke=!0;break;case"object":switch(L.$$typeof){case e:case t:ke=!0}}if(ke)return ke=L,ee=ee(ke),L=V===""?"."+U(ke,0):V,A(ee)?(Y="",L!=null&&(Y=L.replace(O,"$&/")+"/"),ie(ee,D,Y,"",function(me){return me})):ee!=null&&(B(ee)&&(ee=I(ee,Y+(!ee.key||ke&&ke.key===ee.key?"":(""+ee.key).replace(O,"$&/")+"/")+L)),D.push(ee)),1;if(ke=0,V=V===""?".":V+":",A(L))for(var Ce=0;Ce<L.length;Ce++){ge=L[Ce];var ce=V+U(ge,Ce);ke+=ie(ge,D,Y,ce,ee)}else if(ce=p(L),typeof ce=="function")for(L=ce.call(L),Ce=0;!(ge=L.next()).done;)ge=ge.value,ce=V+U(ge,Ce++),ke+=ie(ge,D,Y,ce,ee);else if(ge==="object")throw D=String(L),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ke}function X(L,D,Y){if(L==null)return L;var V=[],ee=0;return ie(L,V,"","",function(ge){return D.call(Y,ge,ee++)}),V}function re(L){if(L._status===-1){var D=L._result;D=D(),D.then(function(Y){(L._status===0||L._status===-1)&&(L._status=1,L._result=Y)},function(Y){(L._status===0||L._status===-1)&&(L._status=2,L._result=Y)}),L._status===-1&&(L._status=0,L._result=D)}if(L._status===1)return L._result.default;throw L._result}var oe={current:null},Q={transition:null},F={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:Q,ReactCurrentOwner:_};function J(){throw Error("act(...) is not supported in production builds of React.")}return Tr.Children={map:X,forEach:function(L,D,Y){X(L,function(){D.apply(this,arguments)},Y)},count:function(L){var D=0;return X(L,function(){D++}),D},toArray:function(L){return X(L,function(D){return D})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Tr.Component=v,Tr.Fragment=r,Tr.Profiler=s,Tr.PureComponent=k,Tr.StrictMode=a,Tr.Suspense=d,Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,Tr.act=J,Tr.cloneElement=function(L,D,Y){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var V=b({},L.props),ee=L.key,ge=L.ref,ke=L._owner;if(D!=null){if(D.ref!==void 0&&(ge=D.ref,ke=_.current),D.key!==void 0&&(ee=""+D.key),L.type&&L.type.defaultProps)var Ce=L.type.defaultProps;for(ce in D)S.call(D,ce)&&!E.hasOwnProperty(ce)&&(V[ce]=D[ce]===void 0&&Ce!==void 0?Ce[ce]:D[ce])}var ce=arguments.length-2;if(ce===1)V.children=Y;else if(1<ce){Ce=Array(ce);for(var me=0;me<ce;me++)Ce[me]=arguments[me+2];V.children=Ce}return{$$typeof:e,type:L.type,key:ee,ref:ge,props:V,_owner:ke}},Tr.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},Tr.createElement=C,Tr.createFactory=function(L){var D=C.bind(null,L);return D.type=L,D},Tr.createRef=function(){return{current:null}},Tr.forwardRef=function(L){return{$$typeof:l,render:L}},Tr.isValidElement=B,Tr.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:re}},Tr.memo=function(L,D){return{$$typeof:u,type:L,compare:D===void 0?null:D}},Tr.startTransition=function(L){var D=Q.transition;Q.transition={};try{L()}finally{Q.transition=D}},Tr.unstable_act=J,Tr.useCallback=function(L,D){return oe.current.useCallback(L,D)},Tr.useContext=function(L){return oe.current.useContext(L)},Tr.useDebugValue=function(){},Tr.useDeferredValue=function(L){return oe.current.useDeferredValue(L)},Tr.useEffect=function(L,D){return oe.current.useEffect(L,D)},Tr.useId=function(){return oe.current.useId()},Tr.useImperativeHandle=function(L,D,Y){return oe.current.useImperativeHandle(L,D,Y)},Tr.useInsertionEffect=function(L,D){return oe.current.useInsertionEffect(L,D)},Tr.useLayoutEffect=function(L,D){return oe.current.useLayoutEffect(L,D)},Tr.useMemo=function(L,D){return oe.current.useMemo(L,D)},Tr.useReducer=function(L,D,Y){return oe.current.useReducer(L,D,Y)},Tr.useRef=function(L){return oe.current.useRef(L)},Tr.useState=function(L){return oe.current.useState(L)},Tr.useSyncExternalStore=function(L,D,Y){return oe.current.useSyncExternalStore(L,D,Y)},Tr.useTransition=function(){return oe.current.useTransition()},Tr.version="18.3.1",Tr}var AE;function b2(){return AE||(AE=1,Hy.exports=V7()),Hy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function G7(){if(TE)return nh;TE=1;var e=b2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var f,m={},p=null,g=null;u!==void 0&&(p=""+u),d.key!==void 0&&(p=""+d.key),d.ref!==void 0&&(g=d.ref);for(f in d)a.call(d,f)&&!i.hasOwnProperty(f)&&(m[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:l,key:p,ref:g,props:m,_owner:s.current}}return nh.Fragment=r,nh.jsx=o,nh.jsxs=o,nh}var OE;function Y7(){return OE||(OE=1,Uy.exports=G7()),Uy.exports}var n=Y7(),um={},qy={exports:{}},gs={},zy={exports:{}},Wy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function X7(){return PE||(PE=1,(function(e){function t(Q,F){var J=Q.length;Q.push(F);e:for(;0<J;){var L=J-1>>>1,D=Q[L];if(0<s(D,F))Q[L]=F,Q[J]=D,J=L;else break e}}function r(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var F=Q[0],J=Q.pop();if(J!==F){Q[0]=J;e:for(var L=0,D=Q.length,Y=D>>>1;L<Y;){var V=2*(L+1)-1,ee=Q[V],ge=V+1,ke=Q[ge];if(0>s(ee,J))ge<D&&0>s(ke,ee)?(Q[L]=ke,Q[ge]=J,L=ge):(Q[L]=ee,Q[V]=J,L=V);else if(ge<D&&0>s(ke,J))Q[L]=ke,Q[ge]=J,L=ge;else break e}}return F}function s(Q,F){var J=Q.sortIndex-F.sortIndex;return J!==0?J:Q.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],u=[],f=1,m=null,p=3,g=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Q){for(var F=r(u);F!==null;){if(F.callback===null)a(u);else if(F.startTime<=Q)a(u),F.sortIndex=F.expirationTime,t(d,F);else break;F=r(u)}}function A(Q){if(y=!1,w(Q),!b)if(r(d)!==null)b=!0,re(S);else{var F=r(u);F!==null&&oe(A,F.startTime-Q)}}function S(Q,F){b=!1,y&&(y=!1,N(C),C=-1),g=!0;var J=p;try{for(w(F),m=r(d);m!==null&&(!(m.expirationTime>F)||Q&&!M());){var L=m.callback;if(typeof L=="function"){m.callback=null,p=m.priorityLevel;var D=L(m.expirationTime<=F);F=e.unstable_now(),typeof D=="function"?m.callback=D:m===r(d)&&a(d),w(F)}else a(d);m=r(d)}if(m!==null)var Y=!0;else{var V=r(u);V!==null&&oe(A,V.startTime-F),Y=!1}return Y}finally{m=null,p=J,g=!1}}var _=!1,E=null,C=-1,I=5,B=-1;function M(){return!(e.unstable_now()-B<I)}function O(){if(E!==null){var Q=e.unstable_now();B=Q;var F=!0;try{F=E(!0,Q)}finally{F?U():(_=!1,E=null)}}else _=!1}var U;if(typeof k=="function")U=function(){k(O)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,X=ie.port2;ie.port1.onmessage=O,U=function(){X.postMessage(null)}}else U=function(){v(O,0)};function re(Q){E=Q,_||(_=!0,U())}function oe(Q,F){C=v(function(){Q(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,re(S))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var J=p;p=F;try{return Q()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,F){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=p;p=Q;try{return F()}finally{p=J}},e.unstable_scheduleCallback=function(Q,F,J){var L=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?L+J:L):J=L,Q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=J+D,Q={id:f++,callback:F,priorityLevel:Q,startTime:J,expirationTime:D,sortIndex:-1},J>L?(Q.sortIndex=J,t(u,Q),r(d)===null&&Q===r(u)&&(y?(N(C),C=-1):y=!0,oe(A,J-L))):(Q.sortIndex=D,t(d,Q),b||g||(b=!0,re(S))),Q},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(Q){var F=p;return function(){var J=p;p=F;try{return Q.apply(this,arguments)}finally{p=J}}}})(Wy)),Wy}var IE;function J7(){return IE||(IE=1,zy.exports=X7()),zy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function Q7(){if(DE)return gs;DE=1;var e=b2(),t=J7();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)a.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(c){return d.call(m,c)?!0:d.call(f,c)?!1:u.test(c)?m[c]=!0:(f[c]=!0,!1)}function g(c,h,x,j){if(x!==null&&x.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return j?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function b(c,h,x,j){if(h===null||typeof h>"u"||g(c,h,x,j))return!0;if(j)return!1;if(x!==null)switch(x.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,x,j,T,R,te){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=j,this.attributeNamespace=T,this.mustUseProperty=x,this.propertyName=c,this.type=h,this.sanitizeURL=R,this.removeEmptyString=te}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){v[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];v[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){v[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){v[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){v[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){v[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){v[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){v[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){v[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function k(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(N,k);v[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){v[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function w(c,h,x,j){var T=v.hasOwnProperty(h)?v[h]:null;(T!==null?T.type!==0:j||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(b(h,x,T,j)&&(x=null),j||T===null?p(h)&&(x===null?c.removeAttribute(h):c.setAttribute(h,""+x)):T.mustUseProperty?c[T.propertyName]=x===null?T.type===3?!1:"":x:(h=T.attributeName,j=T.attributeNamespace,x===null?c.removeAttribute(h):(T=T.type,x=T===3||T===4&&x===!0?"":""+x,j?c.setAttributeNS(j,h,x):c.setAttribute(h,x))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),Q=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=Q&&c[Q]||c["@@iterator"],typeof c=="function"?c:null)}var J=Object.assign,L;function D(c){if(L===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);L=h&&h[1]||""}return`
`+L+c}var Y=!1;function V(c,h){if(!c||Y)return"";Y=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ue){var j=Ue}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ue){j=Ue}c.call(h.prototype)}else{try{throw Error()}catch(Ue){j=Ue}c()}}catch(Ue){if(Ue&&j&&typeof Ue.stack=="string"){for(var T=Ue.stack.split(`
`),R=j.stack.split(`
`),te=T.length-1,xe=R.length-1;1<=te&&0<=xe&&T[te]!==R[xe];)xe--;for(;1<=te&&0<=xe;te--,xe--)if(T[te]!==R[xe]){if(te!==1||xe!==1)do if(te--,xe--,0>xe||T[te]!==R[xe]){var _e=`
`+T[te].replace(" at new "," at ");return c.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",c.displayName)),_e}while(1<=te&&0<=xe);break}}}finally{Y=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?D(c):""}function ee(c){switch(c.tag){case 5:return D(c.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return c=V(c.type,!1),c;case 11:return c=V(c.type.render,!1),c;case 1:return c=V(c.type,!0),c;default:return""}}function ge(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case E:return"Fragment";case _:return"Portal";case I:return"Profiler";case C:return"StrictMode";case U:return"Suspense";case ie:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case M:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case O:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case X:return h=c.displayName||null,h!==null?h:ge(c.type)||"Memo";case re:h=c._payload,c=c._init;try{return ge(c(h))}catch{}}return null}function ke(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(h);case 8:return h===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ce(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ce(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function me(c){var h=ce(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),j=""+c[h];if(!c.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var T=x.get,R=x.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return T.call(this)},set:function(te){j=""+te,R.call(this,te)}}),Object.defineProperty(c,h,{enumerable:x.enumerable}),{getValue:function(){return j},setValue:function(te){j=""+te},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Oe(c){c._valueTracker||(c._valueTracker=me(c))}function G(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var x=h.getValue(),j="";return c&&(j=ce(c)?c.checked?"true":"false":c.value),c=j,c!==x?(h.setValue(c),!0):!1}function ze(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ye(c,h){var x=h.checked;return J({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function ct(c,h){var x=h.defaultValue==null?"":h.defaultValue,j=h.checked!=null?h.checked:h.defaultChecked;x=Ce(h.value!=null?h.value:x),c._wrapperState={initialChecked:j,initialValue:x,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function We(c,h){h=h.checked,h!=null&&w(c,"checked",h,!1)}function Pe(c,h){We(c,h);var x=Ce(h.value),j=h.type;if(x!=null)j==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(j==="submit"||j==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?tt(c,h.type,x):h.hasOwnProperty("defaultValue")&&tt(c,h.type,Ce(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function Ne(c,h,x){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var j=h.type;if(!(j!=="submit"&&j!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,x||h===c.value||(c.value=h),c.defaultValue=h}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function tt(c,h,x){(h!=="number"||ze(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var He=Array.isArray;function pt(c,h,x,j){if(c=c.options,h){h={};for(var T=0;T<x.length;T++)h["$"+x[T]]=!0;for(x=0;x<c.length;x++)T=h.hasOwnProperty("$"+c[x].value),c[x].selected!==T&&(c[x].selected=T),T&&j&&(c[x].defaultSelected=!0)}else{for(x=""+Ce(x),h=null,T=0;T<c.length;T++){if(c[T].value===x){c[T].selected=!0,j&&(c[T].defaultSelected=!0);return}h!==null||c[T].disabled||(h=c[T])}h!==null&&(h.selected=!0)}}function Vt(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function hr(c,h){var x=h.value;if(x==null){if(x=h.children,h=h.defaultValue,x!=null){if(h!=null)throw Error(r(92));if(He(x)){if(1<x.length)throw Error(r(93));x=x[0]}h=x}h==null&&(h=""),x=h}c._wrapperState={initialValue:Ce(x)}}function Jt(c,h){var x=Ce(h.value),j=Ce(h.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),h.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),j!=null&&(c.defaultValue=""+j)}function Dr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Hr(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Hr(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var qt,Cr=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,x,j,T){MSApp.execUnsafeLocalFunction(function(){return c(h,x,j,T)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(qt=qt||document.createElement("div"),qt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=qt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function kt(c,h){if(h){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=h;return}}c.textContent=h}var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$e=["Webkit","ms","Moz","O"];Object.keys(Gt).forEach(function(c){$e.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),Gt[h]=Gt[c]})});function Ie(c,h,x){return h==null||typeof h=="boolean"||h===""?"":x||typeof h!="number"||h===0||Gt.hasOwnProperty(c)&&Gt[c]?(""+h).trim():h+"px"}function Et(c,h){c=c.style;for(var x in h)if(h.hasOwnProperty(x)){var j=x.indexOf("--")===0,T=Ie(x,h[x],j);x==="float"&&(x="cssFloat"),j?c.setProperty(x,T):c[x]=T}}var Be=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(c,h){if(h){if(Be[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function St(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function Qt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Tt=null,Zt=null,xn=null;function bt(c){if(c=Hu(c)){if(typeof Tt!="function")throw Error(r(280));var h=c.stateNode;h&&(h=Sf(h),Tt(c.stateNode,c.type,h))}}function tn(c){Zt?xn?xn.push(c):xn=[c]:Zt=c}function Rn(){if(Zt){var c=Zt,h=xn;if(xn=Zt=null,bt(c),h)for(c=0;c<h.length;c++)bt(h[c])}}function Bt(c,h){return c(h)}function Ut(){}var yn=!1;function rn(c,h,x){if(yn)return c(h,x);yn=!0;try{return Bt(c,h,x)}finally{yn=!1,(Zt!==null||xn!==null)&&(Ut(),Rn())}}function kr(c,h){var x=c.stateNode;if(x===null)return null;var j=Sf(x);if(j===null)return null;x=j[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(c=c.type,j=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!j;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(r(231,h,typeof x));return x}var we=!1;if(l)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){we=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{we=!1}function it(c,h,x,j,T,R,te,xe,_e){var Ue=Array.prototype.slice.call(arguments,3);try{h.apply(x,Ue)}catch(dt){this.onError(dt)}}var jt=!1,gt=null,H=!1,se=null,ne={onError:function(c){jt=!0,gt=c}};function Z(c,h,x,j,T,R,te,xe,_e){jt=!1,gt=null,it.apply(ne,arguments)}function q(c,h,x,j,T,R,te,xe,_e){if(Z.apply(this,arguments),jt){if(jt){var Ue=gt;jt=!1,gt=null}else throw Error(r(198));H||(H=!0,se=Ue)}}function W(c){var h=c,x=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(x=h.return),c=h.return;while(c)}return h.tag===3?x:null}function ae(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function de(c){if(W(c)!==c)throw Error(r(188))}function z(c){var h=c.alternate;if(!h){if(h=W(c),h===null)throw Error(r(188));return h!==c?null:c}for(var x=c,j=h;;){var T=x.return;if(T===null)break;var R=T.alternate;if(R===null){if(j=T.return,j!==null){x=j;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===x)return de(T),c;if(R===j)return de(T),h;R=R.sibling}throw Error(r(188))}if(x.return!==j.return)x=T,j=R;else{for(var te=!1,xe=T.child;xe;){if(xe===x){te=!0,x=T,j=R;break}if(xe===j){te=!0,j=T,x=R;break}xe=xe.sibling}if(!te){for(xe=R.child;xe;){if(xe===x){te=!0,x=R,j=T;break}if(xe===j){te=!0,j=R,x=T;break}xe=xe.sibling}if(!te)throw Error(r(189))}}if(x.alternate!==j)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?c:h}function le(c){return c=z(c),c!==null?fe(c):null}function fe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=fe(c);if(h!==null)return h;c=c.sibling}return null}var De=t.unstable_scheduleCallback,Ve=t.unstable_cancelCallback,Qe=t.unstable_shouldYield,Ke=t.unstable_requestPaint,Ge=t.unstable_now,Ct=t.unstable_getCurrentPriorityLevel,Yt=t.unstable_ImmediatePriority,Xt=t.unstable_UserBlockingPriority,wr=t.unstable_NormalPriority,nn=t.unstable_LowPriority,ln=t.unstable_IdlePriority,Ze=null,Lr=null;function ue(c){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(Ze,c,void 0,(c.current.flags&128)===128)}catch{}}var Ee=Math.clz32?Math.clz32:Ot,Re=Math.log,xt=Math.LN2;function Ot(c){return c>>>=0,c===0?32:31-(Re(c)/xt|0)|0}var ht=64,ut=4194304;function Yr(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Nn(c,h){var x=c.pendingLanes;if(x===0)return 0;var j=0,T=c.suspendedLanes,R=c.pingedLanes,te=x&268435455;if(te!==0){var xe=te&~T;xe!==0?j=Yr(xe):(R&=te,R!==0&&(j=Yr(R)))}else te=x&~T,te!==0?j=Yr(te):R!==0&&(j=Yr(R));if(j===0)return 0;if(h!==0&&h!==j&&(h&T)===0&&(T=j&-j,R=h&-h,T>=R||T===16&&(R&4194240)!==0))return h;if((j&4)!==0&&(j|=x&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=j;0<h;)x=31-Ee(h),T=1<<x,j|=c[x],h&=~T;return j}function Ma(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tr(c,h){for(var x=c.suspendedLanes,j=c.pingedLanes,T=c.expirationTimes,R=c.pendingLanes;0<R;){var te=31-Ee(R),xe=1<<te,_e=T[te];_e===-1?((xe&x)===0||(xe&j)!==0)&&(T[te]=Ma(xe,h)):_e<=h&&(c.expiredLanes|=xe),R&=~xe}}function K(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Se(){var c=ht;return ht<<=1,(ht&4194240)===0&&(ht=64),c}function be(c){for(var h=[],x=0;31>x;x++)h.push(c);return h}function he(c,h,x){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Ee(h),c[h]=x}function ve(c,h){var x=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var j=c.eventTimes;for(c=c.expirationTimes;0<x;){var T=31-Ee(x),R=1<<T;h[T]=0,j[T]=-1,c[T]=-1,x&=~R}}function je(c,h){var x=c.entangledLanes|=h;for(c=c.entanglements;x;){var j=31-Ee(x),T=1<<j;T&h|c[j]&h&&(c[j]|=h),x&=~T}}var pe=0;function Le(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Xe,at,et,rr,sr,At=!1,er=[],Sr=null,Ar=null,Xr=null,Fn=new Map,zn=new Map,Nt=[],rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Te(c,h){switch(c){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Fn.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(h.pointerId)}}function Pt(c,h,x,j,T,R){return c===null||c.nativeEvent!==R?(c={blockedOn:h,domEventName:x,eventSystemFlags:j,nativeEvent:R,targetContainers:[T]},h!==null&&(h=Hu(h),h!==null&&at(h)),c):(c.eventSystemFlags|=j,h=c.targetContainers,T!==null&&h.indexOf(T)===-1&&h.push(T),c)}function _r(c,h,x,j,T){switch(h){case"focusin":return Sr=Pt(Sr,c,h,x,j,T),!0;case"dragenter":return Ar=Pt(Ar,c,h,x,j,T),!0;case"mouseover":return Xr=Pt(Xr,c,h,x,j,T),!0;case"pointerover":var R=T.pointerId;return Fn.set(R,Pt(Fn.get(R)||null,c,h,x,j,T)),!0;case"gotpointercapture":return R=T.pointerId,zn.set(R,Pt(zn.get(R)||null,c,h,x,j,T)),!0}return!1}function zt(c){var h=Cl(c.target);if(h!==null){var x=W(h);if(x!==null){if(h=x.tag,h===13){if(h=ae(x),h!==null){c.blockedOn=h,sr(c.priority,function(){et(x)});return}}else if(h===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function fr(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var x=oi(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var j=new x.constructor(x.type,x);mt=j,x.target.dispatchEvent(j),mt=null}else return h=Hu(x),h!==null&&at(h),c.blockedOn=x,!1;h.shift()}return!0}function cn(c,h,x){fr(c)&&x.delete(h)}function Jr(){At=!1,Sr!==null&&fr(Sr)&&(Sr=null),Ar!==null&&fr(Ar)&&(Ar=null),Xr!==null&&fr(Xr)&&(Xr=null),Fn.forEach(cn),zn.forEach(cn)}function Qr(c,h){c.blockedOn===h&&(c.blockedOn=null,At||(At=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jr)))}function Zr(c){function h(T){return Qr(T,c)}if(0<er.length){Qr(er[0],c);for(var x=1;x<er.length;x++){var j=er[x];j.blockedOn===c&&(j.blockedOn=null)}}for(Sr!==null&&Qr(Sr,c),Ar!==null&&Qr(Ar,c),Xr!==null&&Qr(Xr,c),Fn.forEach(h),zn.forEach(h),x=0;x<Nt.length;x++)j=Nt[x],j.blockedOn===c&&(j.blockedOn=null);for(;0<Nt.length&&(x=Nt[0],x.blockedOn===null);)zt(x),x.blockedOn===null&&Nt.shift()}var ta=A.ReactCurrentBatchConfig,ra=!0;function ro(c,h,x,j){var T=pe,R=ta.transition;ta.transition=null;try{pe=1,Mc(c,h,x,j)}finally{pe=T,ta.transition=R}}function ff(c,h,x,j){var T=pe,R=ta.transition;ta.transition=null;try{pe=4,Mc(c,h,x,j)}finally{pe=T,ta.transition=R}}function Mc(c,h,x,j){if(ra){var T=oi(c,h,x,j);if(T===null)Ox(c,h,j,El,x),Te(c,j);else if(_r(T,c,h,x,j))j.stopPropagation();else if(Te(c,j),h&4&&-1<rt.indexOf(c)){for(;T!==null;){var R=Hu(T);if(R!==null&&Xe(R),R=oi(c,h,x,j),R===null&&Ox(c,h,j,El,x),R===T)break;T=R}T!==null&&j.stopPropagation()}else Ox(c,h,j,null,x)}}var El=null;function oi(c,h,x,j){if(El=null,c=Qt(j),c=Cl(c),c!==null)if(h=W(c),h===null)c=null;else if(x=h.tag,x===13){if(c=ae(h),c!==null)return c;c=null}else if(x===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return El=c,null}function no(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ct()){case Yt:return 1;case Xt:return 4;case wr:case nn:return 16;case ln:return 536870912;default:return 16}default:return 16}}var Za=null,Rc=null,mf=null;function pS(){if(mf)return mf;var c,h=Rc,x=h.length,j,T="value"in Za?Za.value:Za.textContent,R=T.length;for(c=0;c<x&&h[c]===T[c];c++);var te=x-c;for(j=1;j<=te&&h[x-j]===T[R-j];j++);return mf=T.slice(c,1<j?1-j:void 0)}function pf(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function gf(){return!0}function gS(){return!1}function js(c){function h(x,j,T,R,te){this._reactName=x,this._targetInst=T,this.type=j,this.nativeEvent=R,this.target=te,this.currentTarget=null;for(var xe in c)c.hasOwnProperty(xe)&&(x=c[xe],this[xe]=x?x(R):R[xe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?gf:gS,this.isPropagationStopped=gS,this}return J(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=gf)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=gf)},persist:function(){},isPersistent:gf}),h}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gx=js(Fc),Ou=J({},Fc,{view:0,detail:0}),v8=js(Ou),xx,yx,Pu,xf=J({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bx,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Pu&&(Pu&&c.type==="mousemove"?(xx=c.screenX-Pu.screenX,yx=c.screenY-Pu.screenY):yx=xx=0,Pu=c),xx)},movementY:function(c){return"movementY"in c?c.movementY:yx}}),xS=js(xf),b8=J({},xf,{dataTransfer:0}),w8=js(b8),j8=J({},Ou,{relatedTarget:0}),vx=js(j8),N8=J({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),k8=js(N8),S8=J({},Fc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_8=js(S8),E8=J({},Fc,{data:0}),yS=js(E8),C8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O8(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=T8[c])?!!h[c]:!1}function bx(){return O8}var P8=J({},Ou,{key:function(c){if(c.key){var h=C8[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=pf(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?A8[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bx,charCode:function(c){return c.type==="keypress"?pf(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?pf(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),I8=js(P8),D8=J({},xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vS=js(D8),M8=J({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bx}),R8=js(M8),F8=J({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),$8=js(F8),L8=J({},xf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),B8=js(L8),U8=[9,13,27,32],wx=l&&"CompositionEvent"in window,Iu=null;l&&"documentMode"in document&&(Iu=document.documentMode);var H8=l&&"TextEvent"in window&&!Iu,bS=l&&(!wx||Iu&&8<Iu&&11>=Iu),wS=" ",jS=!1;function NS(c,h){switch(c){case"keyup":return U8.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var $c=!1;function q8(c,h){switch(c){case"compositionend":return kS(h);case"keypress":return h.which!==32?null:(jS=!0,wS);case"textInput":return c=h.data,c===wS&&jS?null:c;default:return null}}function z8(c,h){if($c)return c==="compositionend"||!wx&&NS(c,h)?(c=pS(),mf=Rc=Za=null,$c=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return bS&&h.locale!=="ko"?null:h.data;default:return null}}var W8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!W8[c.type]:h==="textarea"}function _S(c,h,x,j){tn(j),h=jf(h,"onChange"),0<h.length&&(x=new gx("onChange","change",null,x,j),c.push({event:x,listeners:h}))}var Du=null,Mu=null;function K8(c){zS(c,0)}function yf(c){var h=qc(c);if(G(h))return c}function V8(c,h){if(c==="change")return h}var ES=!1;if(l){var jx;if(l){var Nx="oninput"in document;if(!Nx){var CS=document.createElement("div");CS.setAttribute("oninput","return;"),Nx=typeof CS.oninput=="function"}jx=Nx}else jx=!1;ES=jx&&(!document.documentMode||9<document.documentMode)}function AS(){Du&&(Du.detachEvent("onpropertychange",TS),Mu=Du=null)}function TS(c){if(c.propertyName==="value"&&yf(Mu)){var h=[];_S(h,Mu,c,Qt(c)),rn(K8,h)}}function G8(c,h,x){c==="focusin"?(AS(),Du=h,Mu=x,Du.attachEvent("onpropertychange",TS)):c==="focusout"&&AS()}function Y8(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return yf(Mu)}function X8(c,h){if(c==="click")return yf(h)}function J8(c,h){if(c==="input"||c==="change")return yf(h)}function Q8(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var li=typeof Object.is=="function"?Object.is:Q8;function Ru(c,h){if(li(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var x=Object.keys(c),j=Object.keys(h);if(x.length!==j.length)return!1;for(j=0;j<x.length;j++){var T=x[j];if(!d.call(h,T)||!li(c[T],h[T]))return!1}return!0}function OS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function PS(c,h){var x=OS(c);c=0;for(var j;x;){if(x.nodeType===3){if(j=c+x.textContent.length,c<=h&&j>=h)return{node:x,offset:h-c};c=j}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=OS(x)}}function IS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?IS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function DS(){for(var c=window,h=ze();h instanceof c.HTMLIFrameElement;){try{var x=typeof h.contentWindow.location.href=="string"}catch{x=!1}if(x)c=h.contentWindow;else break;h=ze(c.document)}return h}function kx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function Z8(c){var h=DS(),x=c.focusedElem,j=c.selectionRange;if(h!==x&&x&&x.ownerDocument&&IS(x.ownerDocument.documentElement,x)){if(j!==null&&kx(x)){if(h=j.start,c=j.end,c===void 0&&(c=h),"selectionStart"in x)x.selectionStart=h,x.selectionEnd=Math.min(c,x.value.length);else if(c=(h=x.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var T=x.textContent.length,R=Math.min(j.start,T);j=j.end===void 0?R:Math.min(j.end,T),!c.extend&&R>j&&(T=j,j=R,R=T),T=PS(x,R);var te=PS(x,j);T&&te&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==te.node||c.focusOffset!==te.offset)&&(h=h.createRange(),h.setStart(T.node,T.offset),c.removeAllRanges(),R>j?(c.addRange(h),c.extend(te.node,te.offset)):(h.setEnd(te.node,te.offset),c.addRange(h)))}}for(h=[],c=x;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<h.length;x++)c=h[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var e7=l&&"documentMode"in document&&11>=document.documentMode,Lc=null,Sx=null,Fu=null,_x=!1;function MS(c,h,x){var j=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;_x||Lc==null||Lc!==ze(j)||(j=Lc,"selectionStart"in j&&kx(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Fu&&Ru(Fu,j)||(Fu=j,j=jf(Sx,"onSelect"),0<j.length&&(h=new gx("onSelect","select",null,h,x),c.push({event:h,listeners:j}),h.target=Lc)))}function vf(c,h){var x={};return x[c.toLowerCase()]=h.toLowerCase(),x["Webkit"+c]="webkit"+h,x["Moz"+c]="moz"+h,x}var Bc={animationend:vf("Animation","AnimationEnd"),animationiteration:vf("Animation","AnimationIteration"),animationstart:vf("Animation","AnimationStart"),transitionend:vf("Transition","TransitionEnd")},Ex={},RS={};l&&(RS=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function bf(c){if(Ex[c])return Ex[c];if(!Bc[c])return c;var h=Bc[c],x;for(x in h)if(h.hasOwnProperty(x)&&x in RS)return Ex[c]=h[x];return c}var FS=bf("animationend"),$S=bf("animationiteration"),LS=bf("animationstart"),BS=bf("transitionend"),US=new Map,HS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ho(c,h){US.set(c,h),i(h,[c])}for(var Cx=0;Cx<HS.length;Cx++){var Ax=HS[Cx],t7=Ax.toLowerCase(),r7=Ax[0].toUpperCase()+Ax.slice(1);Ho(t7,"on"+r7)}Ho(FS,"onAnimationEnd"),Ho($S,"onAnimationIteration"),Ho(LS,"onAnimationStart"),Ho("dblclick","onDoubleClick"),Ho("focusin","onFocus"),Ho("focusout","onBlur"),Ho(BS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n7=new Set("cancel close invalid load scroll toggle".split(" ").concat($u));function qS(c,h,x){var j=c.type||"unknown-event";c.currentTarget=x,q(j,h,void 0,c),c.currentTarget=null}function zS(c,h){h=(h&4)!==0;for(var x=0;x<c.length;x++){var j=c[x],T=j.event;j=j.listeners;e:{var R=void 0;if(h)for(var te=j.length-1;0<=te;te--){var xe=j[te],_e=xe.instance,Ue=xe.currentTarget;if(xe=xe.listener,_e!==R&&T.isPropagationStopped())break e;qS(T,xe,Ue),R=_e}else for(te=0;te<j.length;te++){if(xe=j[te],_e=xe.instance,Ue=xe.currentTarget,xe=xe.listener,_e!==R&&T.isPropagationStopped())break e;qS(T,xe,Ue),R=_e}}}if(H)throw c=se,H=!1,se=null,c}function vn(c,h){var x=h[Fx];x===void 0&&(x=h[Fx]=new Set);var j=c+"__bubble";x.has(j)||(WS(h,c,2,!1),x.add(j))}function Tx(c,h,x){var j=0;h&&(j|=4),WS(x,c,j,h)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Lu(c){if(!c[wf]){c[wf]=!0,a.forEach(function(x){x!=="selectionchange"&&(n7.has(x)||Tx(x,!1,c),Tx(x,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[wf]||(h[wf]=!0,Tx("selectionchange",!1,h))}}function WS(c,h,x,j){switch(no(h)){case 1:var T=ro;break;case 4:T=ff;break;default:T=Mc}x=T.bind(null,h,x,c),T=void 0,!we||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(T=!0),j?T!==void 0?c.addEventListener(h,x,{capture:!0,passive:T}):c.addEventListener(h,x,!0):T!==void 0?c.addEventListener(h,x,{passive:T}):c.addEventListener(h,x,!1)}function Ox(c,h,x,j,T){var R=j;if((h&1)===0&&(h&2)===0&&j!==null)e:for(;;){if(j===null)return;var te=j.tag;if(te===3||te===4){var xe=j.stateNode.containerInfo;if(xe===T||xe.nodeType===8&&xe.parentNode===T)break;if(te===4)for(te=j.return;te!==null;){var _e=te.tag;if((_e===3||_e===4)&&(_e=te.stateNode.containerInfo,_e===T||_e.nodeType===8&&_e.parentNode===T))return;te=te.return}for(;xe!==null;){if(te=Cl(xe),te===null)return;if(_e=te.tag,_e===5||_e===6){j=R=te;continue e}xe=xe.parentNode}}j=j.return}rn(function(){var Ue=R,dt=Qt(x),ft=[];e:{var lt=US.get(c);if(lt!==void 0){var It=gx,Rt=c;switch(c){case"keypress":if(pf(x)===0)break e;case"keydown":case"keyup":It=I8;break;case"focusin":Rt="focus",It=vx;break;case"focusout":Rt="blur",It=vx;break;case"beforeblur":case"afterblur":It=vx;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=xS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=w8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=R8;break;case FS:case $S:case LS:It=k8;break;case BS:It=$8;break;case"scroll":It=v8;break;case"wheel":It=B8;break;case"copy":case"cut":case"paste":It=_8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=vS}var Lt=(h&4)!==0,$n=!Lt&&c==="scroll",Me=Lt?lt!==null?lt+"Capture":null:lt;Lt=[];for(var Ae=Ue,Fe;Ae!==null;){Fe=Ae;var vt=Fe.stateNode;if(Fe.tag===5&&vt!==null&&(Fe=vt,Me!==null&&(vt=kr(Ae,Me),vt!=null&&Lt.push(Bu(Ae,vt,Fe)))),$n)break;Ae=Ae.return}0<Lt.length&&(lt=new It(lt,Rt,null,x,dt),ft.push({event:lt,listeners:Lt}))}}if((h&7)===0){e:{if(lt=c==="mouseover"||c==="pointerover",It=c==="mouseout"||c==="pointerout",lt&&x!==mt&&(Rt=x.relatedTarget||x.fromElement)&&(Cl(Rt)||Rt[ao]))break e;if((It||lt)&&(lt=dt.window===dt?dt:(lt=dt.ownerDocument)?lt.defaultView||lt.parentWindow:window,It?(Rt=x.relatedTarget||x.toElement,It=Ue,Rt=Rt?Cl(Rt):null,Rt!==null&&($n=W(Rt),Rt!==$n||Rt.tag!==5&&Rt.tag!==6)&&(Rt=null)):(It=null,Rt=Ue),It!==Rt)){if(Lt=xS,vt="onMouseLeave",Me="onMouseEnter",Ae="mouse",(c==="pointerout"||c==="pointerover")&&(Lt=vS,vt="onPointerLeave",Me="onPointerEnter",Ae="pointer"),$n=It==null?lt:qc(It),Fe=Rt==null?lt:qc(Rt),lt=new Lt(vt,Ae+"leave",It,x,dt),lt.target=$n,lt.relatedTarget=Fe,vt=null,Cl(dt)===Ue&&(Lt=new Lt(Me,Ae+"enter",Rt,x,dt),Lt.target=Fe,Lt.relatedTarget=$n,vt=Lt),$n=vt,It&&Rt)t:{for(Lt=It,Me=Rt,Ae=0,Fe=Lt;Fe;Fe=Uc(Fe))Ae++;for(Fe=0,vt=Me;vt;vt=Uc(vt))Fe++;for(;0<Ae-Fe;)Lt=Uc(Lt),Ae--;for(;0<Fe-Ae;)Me=Uc(Me),Fe--;for(;Ae--;){if(Lt===Me||Me!==null&&Lt===Me.alternate)break t;Lt=Uc(Lt),Me=Uc(Me)}Lt=null}else Lt=null;It!==null&&KS(ft,lt,It,Lt,!1),Rt!==null&&$n!==null&&KS(ft,$n,Rt,Lt,!0)}}e:{if(lt=Ue?qc(Ue):window,It=lt.nodeName&&lt.nodeName.toLowerCase(),It==="select"||It==="input"&&lt.type==="file")var Ht=V8;else if(SS(lt))if(ES)Ht=J8;else{Ht=Y8;var nr=G8}else(It=lt.nodeName)&&It.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(Ht=X8);if(Ht&&(Ht=Ht(c,Ue))){_S(ft,Ht,x,dt);break e}nr&&nr(c,lt,Ue),c==="focusout"&&(nr=lt._wrapperState)&&nr.controlled&&lt.type==="number"&&tt(lt,"number",lt.value)}switch(nr=Ue?qc(Ue):window,c){case"focusin":(SS(nr)||nr.contentEditable==="true")&&(Lc=nr,Sx=Ue,Fu=null);break;case"focusout":Fu=Sx=Lc=null;break;case"mousedown":_x=!0;break;case"contextmenu":case"mouseup":case"dragend":_x=!1,MS(ft,x,dt);break;case"selectionchange":if(e7)break;case"keydown":case"keyup":MS(ft,x,dt)}var ar;if(wx)e:{switch(c){case"compositionstart":var xr="onCompositionStart";break e;case"compositionend":xr="onCompositionEnd";break e;case"compositionupdate":xr="onCompositionUpdate";break e}xr=void 0}else $c?NS(c,x)&&(xr="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(xr="onCompositionStart");xr&&(bS&&x.locale!=="ko"&&($c||xr!=="onCompositionStart"?xr==="onCompositionEnd"&&$c&&(ar=pS()):(Za=dt,Rc="value"in Za?Za.value:Za.textContent,$c=!0)),nr=jf(Ue,xr),0<nr.length&&(xr=new yS(xr,c,null,x,dt),ft.push({event:xr,listeners:nr}),ar?xr.data=ar:(ar=kS(x),ar!==null&&(xr.data=ar)))),(ar=H8?q8(c,x):z8(c,x))&&(Ue=jf(Ue,"onBeforeInput"),0<Ue.length&&(dt=new yS("onBeforeInput","beforeinput",null,x,dt),ft.push({event:dt,listeners:Ue}),dt.data=ar))}zS(ft,h)})}function Bu(c,h,x){return{instance:c,listener:h,currentTarget:x}}function jf(c,h){for(var x=h+"Capture",j=[];c!==null;){var T=c,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=kr(c,x),R!=null&&j.unshift(Bu(c,R,T)),R=kr(c,h),R!=null&&j.push(Bu(c,R,T))),c=c.return}return j}function Uc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function KS(c,h,x,j,T){for(var R=h._reactName,te=[];x!==null&&x!==j;){var xe=x,_e=xe.alternate,Ue=xe.stateNode;if(_e!==null&&_e===j)break;xe.tag===5&&Ue!==null&&(xe=Ue,T?(_e=kr(x,R),_e!=null&&te.unshift(Bu(x,_e,xe))):T||(_e=kr(x,R),_e!=null&&te.push(Bu(x,_e,xe)))),x=x.return}te.length!==0&&c.push({event:h,listeners:te})}var a7=/\r\n?/g,s7=/\u0000|\uFFFD/g;function VS(c){return(typeof c=="string"?c:""+c).replace(a7,`
`).replace(s7,"")}function Nf(c,h,x){if(h=VS(h),VS(c)!==h&&x)throw Error(r(425))}function kf(){}var Px=null,Ix=null;function Dx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,i7=typeof clearTimeout=="function"?clearTimeout:void 0,GS=typeof Promise=="function"?Promise:void 0,o7=typeof queueMicrotask=="function"?queueMicrotask:typeof GS<"u"?function(c){return GS.resolve(null).then(c).catch(l7)}:Mx;function l7(c){setTimeout(function(){throw c})}function Rx(c,h){var x=h,j=0;do{var T=x.nextSibling;if(c.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"){if(j===0){c.removeChild(T),Zr(h);return}j--}else x!=="$"&&x!=="$?"&&x!=="$!"||j++;x=T}while(x);Zr(h)}function qo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function YS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(h===0)return c;h--}else x==="/$"&&h++}c=c.previousSibling}return null}var Hc=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Hc,Uu="__reactProps$"+Hc,ao="__reactContainer$"+Hc,Fx="__reactEvents$"+Hc,c7="__reactListeners$"+Hc,d7="__reactHandles$"+Hc;function Cl(c){var h=c[Pi];if(h)return h;for(var x=c.parentNode;x;){if(h=x[ao]||x[Pi]){if(x=h.alternate,h.child!==null||x!==null&&x.child!==null)for(c=YS(c);c!==null;){if(x=c[Pi])return x;c=YS(c)}return h}c=x,x=c.parentNode}return null}function Hu(c){return c=c[Pi]||c[ao],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function qc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Sf(c){return c[Uu]||null}var $x=[],zc=-1;function zo(c){return{current:c}}function bn(c){0>zc||(c.current=$x[zc],$x[zc]=null,zc--)}function dn(c,h){zc++,$x[zc]=c.current,c.current=h}var Wo={},Ra=zo(Wo),us=zo(!1),Al=Wo;function Wc(c,h){var x=c.type.contextTypes;if(!x)return Wo;var j=c.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===h)return j.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in x)T[R]=h[R];return j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=T),T}function hs(c){return c=c.childContextTypes,c!=null}function _f(){bn(us),bn(Ra)}function XS(c,h,x){if(Ra.current!==Wo)throw Error(r(168));dn(Ra,h),dn(us,x)}function JS(c,h,x){var j=c.stateNode;if(h=h.childContextTypes,typeof j.getChildContext!="function")return x;j=j.getChildContext();for(var T in j)if(!(T in h))throw Error(r(108,ke(c)||"Unknown",T));return J({},x,j)}function Ef(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Wo,Al=Ra.current,dn(Ra,c),dn(us,us.current),!0}function QS(c,h,x){var j=c.stateNode;if(!j)throw Error(r(169));x?(c=JS(c,h,Al),j.__reactInternalMemoizedMergedChildContext=c,bn(us),bn(Ra),dn(Ra,c)):bn(us),dn(us,x)}var so=null,Cf=!1,Lx=!1;function ZS(c){so===null?so=[c]:so.push(c)}function u7(c){Cf=!0,ZS(c)}function Ko(){if(!Lx&&so!==null){Lx=!0;var c=0,h=pe;try{var x=so;for(pe=1;c<x.length;c++){var j=x[c];do j=j(!0);while(j!==null)}so=null,Cf=!1}catch(T){throw so!==null&&(so=so.slice(c+1)),De(Yt,Ko),T}finally{pe=h,Lx=!1}}return null}var Kc=[],Vc=0,Af=null,Tf=0,Us=[],Hs=0,Tl=null,io=1,oo="";function Ol(c,h){Kc[Vc++]=Tf,Kc[Vc++]=Af,Af=c,Tf=h}function e_(c,h,x){Us[Hs++]=io,Us[Hs++]=oo,Us[Hs++]=Tl,Tl=c;var j=io;c=oo;var T=32-Ee(j)-1;j&=~(1<<T),x+=1;var R=32-Ee(h)+T;if(30<R){var te=T-T%5;R=(j&(1<<te)-1).toString(32),j>>=te,T-=te,io=1<<32-Ee(h)+T|x<<T|j,oo=R+c}else io=1<<R|x<<T|j,oo=c}function Bx(c){c.return!==null&&(Ol(c,1),e_(c,1,0))}function Ux(c){for(;c===Af;)Af=Kc[--Vc],Kc[Vc]=null,Tf=Kc[--Vc],Kc[Vc]=null;for(;c===Tl;)Tl=Us[--Hs],Us[Hs]=null,oo=Us[--Hs],Us[Hs]=null,io=Us[--Hs],Us[Hs]=null}var Ns=null,ks=null,kn=!1,ci=null;function t_(c,h){var x=Ks(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=c,h=c.deletions,h===null?(c.deletions=[x],c.flags|=16):h.push(x)}function r_(c,h){switch(c.tag){case 5:var x=c.type;return h=h.nodeType!==1||x.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Ns=c,ks=qo(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Ns=c,ks=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(x=Tl!==null?{id:io,overflow:oo}:null,c.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=Ks(18,null,null,0),x.stateNode=h,x.return=c,c.child=x,Ns=c,ks=null,!0):!1;default:return!1}}function Hx(c){return(c.mode&1)!==0&&(c.flags&128)===0}function qx(c){if(kn){var h=ks;if(h){var x=h;if(!r_(c,h)){if(Hx(c))throw Error(r(418));h=qo(x.nextSibling);var j=Ns;h&&r_(c,h)?t_(j,x):(c.flags=c.flags&-4097|2,kn=!1,Ns=c)}}else{if(Hx(c))throw Error(r(418));c.flags=c.flags&-4097|2,kn=!1,Ns=c}}}function n_(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ns=c}function Of(c){if(c!==Ns)return!1;if(!kn)return n_(c),kn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!Dx(c.type,c.memoizedProps)),h&&(h=ks)){if(Hx(c))throw a_(),Error(r(418));for(;h;)t_(c,h),h=qo(h.nextSibling)}if(n_(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(h===0){ks=qo(c.nextSibling);break e}h--}else x!=="$"&&x!=="$!"&&x!=="$?"||h++}c=c.nextSibling}ks=null}}else ks=Ns?qo(c.stateNode.nextSibling):null;return!0}function a_(){for(var c=ks;c;)c=qo(c.nextSibling)}function Gc(){ks=Ns=null,kn=!1}function zx(c){ci===null?ci=[c]:ci.push(c)}var h7=A.ReactCurrentBatchConfig;function qu(c,h,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var j=x.stateNode}if(!j)throw Error(r(147,c));var T=j,R=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===R?h.ref:(h=function(te){var xe=T.refs;te===null?delete xe[R]:xe[R]=te},h._stringRef=R,h)}if(typeof c!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,c))}return c}function Pf(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function s_(c){var h=c._init;return h(c._payload)}function i_(c){function h(Me,Ae){if(c){var Fe=Me.deletions;Fe===null?(Me.deletions=[Ae],Me.flags|=16):Fe.push(Ae)}}function x(Me,Ae){if(!c)return null;for(;Ae!==null;)h(Me,Ae),Ae=Ae.sibling;return null}function j(Me,Ae){for(Me=new Map;Ae!==null;)Ae.key!==null?Me.set(Ae.key,Ae):Me.set(Ae.index,Ae),Ae=Ae.sibling;return Me}function T(Me,Ae){return Me=el(Me,Ae),Me.index=0,Me.sibling=null,Me}function R(Me,Ae,Fe){return Me.index=Fe,c?(Fe=Me.alternate,Fe!==null?(Fe=Fe.index,Fe<Ae?(Me.flags|=2,Ae):Fe):(Me.flags|=2,Ae)):(Me.flags|=1048576,Ae)}function te(Me){return c&&Me.alternate===null&&(Me.flags|=2),Me}function xe(Me,Ae,Fe,vt){return Ae===null||Ae.tag!==6?(Ae=My(Fe,Me.mode,vt),Ae.return=Me,Ae):(Ae=T(Ae,Fe),Ae.return=Me,Ae)}function _e(Me,Ae,Fe,vt){var Ht=Fe.type;return Ht===E?dt(Me,Ae,Fe.props.children,vt,Fe.key):Ae!==null&&(Ae.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===re&&s_(Ht)===Ae.type)?(vt=T(Ae,Fe.props),vt.ref=qu(Me,Ae,Fe),vt.return=Me,vt):(vt=rm(Fe.type,Fe.key,Fe.props,null,Me.mode,vt),vt.ref=qu(Me,Ae,Fe),vt.return=Me,vt)}function Ue(Me,Ae,Fe,vt){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Fe.containerInfo||Ae.stateNode.implementation!==Fe.implementation?(Ae=Ry(Fe,Me.mode,vt),Ae.return=Me,Ae):(Ae=T(Ae,Fe.children||[]),Ae.return=Me,Ae)}function dt(Me,Ae,Fe,vt,Ht){return Ae===null||Ae.tag!==7?(Ae=Ll(Fe,Me.mode,vt,Ht),Ae.return=Me,Ae):(Ae=T(Ae,Fe),Ae.return=Me,Ae)}function ft(Me,Ae,Fe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=My(""+Ae,Me.mode,Fe),Ae.return=Me,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case S:return Fe=rm(Ae.type,Ae.key,Ae.props,null,Me.mode,Fe),Fe.ref=qu(Me,null,Ae),Fe.return=Me,Fe;case _:return Ae=Ry(Ae,Me.mode,Fe),Ae.return=Me,Ae;case re:var vt=Ae._init;return ft(Me,vt(Ae._payload),Fe)}if(He(Ae)||F(Ae))return Ae=Ll(Ae,Me.mode,Fe,null),Ae.return=Me,Ae;Pf(Me,Ae)}return null}function lt(Me,Ae,Fe,vt){var Ht=Ae!==null?Ae.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Ht!==null?null:xe(Me,Ae,""+Fe,vt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case S:return Fe.key===Ht?_e(Me,Ae,Fe,vt):null;case _:return Fe.key===Ht?Ue(Me,Ae,Fe,vt):null;case re:return Ht=Fe._init,lt(Me,Ae,Ht(Fe._payload),vt)}if(He(Fe)||F(Fe))return Ht!==null?null:dt(Me,Ae,Fe,vt,null);Pf(Me,Fe)}return null}function It(Me,Ae,Fe,vt,Ht){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Me=Me.get(Fe)||null,xe(Ae,Me,""+vt,Ht);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case S:return Me=Me.get(vt.key===null?Fe:vt.key)||null,_e(Ae,Me,vt,Ht);case _:return Me=Me.get(vt.key===null?Fe:vt.key)||null,Ue(Ae,Me,vt,Ht);case re:var nr=vt._init;return It(Me,Ae,Fe,nr(vt._payload),Ht)}if(He(vt)||F(vt))return Me=Me.get(Fe)||null,dt(Ae,Me,vt,Ht,null);Pf(Ae,vt)}return null}function Rt(Me,Ae,Fe,vt){for(var Ht=null,nr=null,ar=Ae,xr=Ae=0,xa=null;ar!==null&&xr<Fe.length;xr++){ar.index>xr?(xa=ar,ar=null):xa=ar.sibling;var Br=lt(Me,ar,Fe[xr],vt);if(Br===null){ar===null&&(ar=xa);break}c&&ar&&Br.alternate===null&&h(Me,ar),Ae=R(Br,Ae,xr),nr===null?Ht=Br:nr.sibling=Br,nr=Br,ar=xa}if(xr===Fe.length)return x(Me,ar),kn&&Ol(Me,xr),Ht;if(ar===null){for(;xr<Fe.length;xr++)ar=ft(Me,Fe[xr],vt),ar!==null&&(Ae=R(ar,Ae,xr),nr===null?Ht=ar:nr.sibling=ar,nr=ar);return kn&&Ol(Me,xr),Ht}for(ar=j(Me,ar);xr<Fe.length;xr++)xa=It(ar,Me,xr,Fe[xr],vt),xa!==null&&(c&&xa.alternate!==null&&ar.delete(xa.key===null?xr:xa.key),Ae=R(xa,Ae,xr),nr===null?Ht=xa:nr.sibling=xa,nr=xa);return c&&ar.forEach(function(tl){return h(Me,tl)}),kn&&Ol(Me,xr),Ht}function Lt(Me,Ae,Fe,vt){var Ht=F(Fe);if(typeof Ht!="function")throw Error(r(150));if(Fe=Ht.call(Fe),Fe==null)throw Error(r(151));for(var nr=Ht=null,ar=Ae,xr=Ae=0,xa=null,Br=Fe.next();ar!==null&&!Br.done;xr++,Br=Fe.next()){ar.index>xr?(xa=ar,ar=null):xa=ar.sibling;var tl=lt(Me,ar,Br.value,vt);if(tl===null){ar===null&&(ar=xa);break}c&&ar&&tl.alternate===null&&h(Me,ar),Ae=R(tl,Ae,xr),nr===null?Ht=tl:nr.sibling=tl,nr=tl,ar=xa}if(Br.done)return x(Me,ar),kn&&Ol(Me,xr),Ht;if(ar===null){for(;!Br.done;xr++,Br=Fe.next())Br=ft(Me,Br.value,vt),Br!==null&&(Ae=R(Br,Ae,xr),nr===null?Ht=Br:nr.sibling=Br,nr=Br);return kn&&Ol(Me,xr),Ht}for(ar=j(Me,ar);!Br.done;xr++,Br=Fe.next())Br=It(ar,Me,xr,Br.value,vt),Br!==null&&(c&&Br.alternate!==null&&ar.delete(Br.key===null?xr:Br.key),Ae=R(Br,Ae,xr),nr===null?Ht=Br:nr.sibling=Br,nr=Br);return c&&ar.forEach(function(W7){return h(Me,W7)}),kn&&Ol(Me,xr),Ht}function $n(Me,Ae,Fe,vt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===E&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case S:e:{for(var Ht=Fe.key,nr=Ae;nr!==null;){if(nr.key===Ht){if(Ht=Fe.type,Ht===E){if(nr.tag===7){x(Me,nr.sibling),Ae=T(nr,Fe.props.children),Ae.return=Me,Me=Ae;break e}}else if(nr.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===re&&s_(Ht)===nr.type){x(Me,nr.sibling),Ae=T(nr,Fe.props),Ae.ref=qu(Me,nr,Fe),Ae.return=Me,Me=Ae;break e}x(Me,nr);break}else h(Me,nr);nr=nr.sibling}Fe.type===E?(Ae=Ll(Fe.props.children,Me.mode,vt,Fe.key),Ae.return=Me,Me=Ae):(vt=rm(Fe.type,Fe.key,Fe.props,null,Me.mode,vt),vt.ref=qu(Me,Ae,Fe),vt.return=Me,Me=vt)}return te(Me);case _:e:{for(nr=Fe.key;Ae!==null;){if(Ae.key===nr)if(Ae.tag===4&&Ae.stateNode.containerInfo===Fe.containerInfo&&Ae.stateNode.implementation===Fe.implementation){x(Me,Ae.sibling),Ae=T(Ae,Fe.children||[]),Ae.return=Me,Me=Ae;break e}else{x(Me,Ae);break}else h(Me,Ae);Ae=Ae.sibling}Ae=Ry(Fe,Me.mode,vt),Ae.return=Me,Me=Ae}return te(Me);case re:return nr=Fe._init,$n(Me,Ae,nr(Fe._payload),vt)}if(He(Fe))return Rt(Me,Ae,Fe,vt);if(F(Fe))return Lt(Me,Ae,Fe,vt);Pf(Me,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Ae!==null&&Ae.tag===6?(x(Me,Ae.sibling),Ae=T(Ae,Fe),Ae.return=Me,Me=Ae):(x(Me,Ae),Ae=My(Fe,Me.mode,vt),Ae.return=Me,Me=Ae),te(Me)):x(Me,Ae)}return $n}var Yc=i_(!0),o_=i_(!1),If=zo(null),Df=null,Xc=null,Wx=null;function Kx(){Wx=Xc=Df=null}function Vx(c){var h=If.current;bn(If),c._currentValue=h}function Gx(c,h,x){for(;c!==null;){var j=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,j!==null&&(j.childLanes|=h)):j!==null&&(j.childLanes&h)!==h&&(j.childLanes|=h),c===x)break;c=c.return}}function Jc(c,h){Df=c,Wx=Xc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(fs=!0),c.firstContext=null)}function qs(c){var h=c._currentValue;if(Wx!==c)if(c={context:c,memoizedValue:h,next:null},Xc===null){if(Df===null)throw Error(r(308));Xc=c,Df.dependencies={lanes:0,firstContext:c}}else Xc=Xc.next=c;return h}var Pl=null;function Yx(c){Pl===null?Pl=[c]:Pl.push(c)}function l_(c,h,x,j){var T=h.interleaved;return T===null?(x.next=x,Yx(h)):(x.next=T.next,T.next=x),h.interleaved=x,lo(c,j)}function lo(c,h){c.lanes|=h;var x=c.alternate;for(x!==null&&(x.lanes|=h),x=c,c=c.return;c!==null;)c.childLanes|=h,x=c.alternate,x!==null&&(x.childLanes|=h),x=c,c=c.return;return x.tag===3?x.stateNode:null}var Vo=!1;function Xx(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c_(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function co(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Go(c,h,x){var j=c.updateQueue;if(j===null)return null;if(j=j.shared,(Fr&2)!==0){var T=j.pending;return T===null?h.next=h:(h.next=T.next,T.next=h),j.pending=h,lo(c,x)}return T=j.interleaved,T===null?(h.next=h,Yx(j)):(h.next=T.next,T.next=h),j.interleaved=h,lo(c,x)}function Mf(c,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,je(c,x)}}function d_(c,h){var x=c.updateQueue,j=c.alternate;if(j!==null&&(j=j.updateQueue,x===j)){var T=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var te={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};R===null?T=R=te:R=R.next=te,x=x.next}while(x!==null);R===null?T=R=h:R=R.next=h}else T=R=h;x={baseState:j.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:j.shared,effects:j.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=h:c.next=h,x.lastBaseUpdate=h}function Rf(c,h,x,j){var T=c.updateQueue;Vo=!1;var R=T.firstBaseUpdate,te=T.lastBaseUpdate,xe=T.shared.pending;if(xe!==null){T.shared.pending=null;var _e=xe,Ue=_e.next;_e.next=null,te===null?R=Ue:te.next=Ue,te=_e;var dt=c.alternate;dt!==null&&(dt=dt.updateQueue,xe=dt.lastBaseUpdate,xe!==te&&(xe===null?dt.firstBaseUpdate=Ue:xe.next=Ue,dt.lastBaseUpdate=_e))}if(R!==null){var ft=T.baseState;te=0,dt=Ue=_e=null,xe=R;do{var lt=xe.lane,It=xe.eventTime;if((j&lt)===lt){dt!==null&&(dt=dt.next={eventTime:It,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var Rt=c,Lt=xe;switch(lt=h,It=x,Lt.tag){case 1:if(Rt=Lt.payload,typeof Rt=="function"){ft=Rt.call(It,ft,lt);break e}ft=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Lt.payload,lt=typeof Rt=="function"?Rt.call(It,ft,lt):Rt,lt==null)break e;ft=J({},ft,lt);break e;case 2:Vo=!0}}xe.callback!==null&&xe.lane!==0&&(c.flags|=64,lt=T.effects,lt===null?T.effects=[xe]:lt.push(xe))}else It={eventTime:It,lane:lt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},dt===null?(Ue=dt=It,_e=ft):dt=dt.next=It,te|=lt;if(xe=xe.next,xe===null){if(xe=T.shared.pending,xe===null)break;lt=xe,xe=lt.next,lt.next=null,T.lastBaseUpdate=lt,T.shared.pending=null}}while(!0);if(dt===null&&(_e=ft),T.baseState=_e,T.firstBaseUpdate=Ue,T.lastBaseUpdate=dt,h=T.shared.interleaved,h!==null){T=h;do te|=T.lane,T=T.next;while(T!==h)}else R===null&&(T.shared.lanes=0);Ml|=te,c.lanes=te,c.memoizedState=ft}}function u_(c,h,x){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var j=c[h],T=j.callback;if(T!==null){if(j.callback=null,j=x,typeof T!="function")throw Error(r(191,T));T.call(j)}}}var zu={},Ii=zo(zu),Wu=zo(zu),Ku=zo(zu);function Il(c){if(c===zu)throw Error(r(174));return c}function Jx(c,h){switch(dn(Ku,h),dn(Wu,c),dn(Ii,zu),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:ot(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=ot(h,c)}bn(Ii),dn(Ii,h)}function Qc(){bn(Ii),bn(Wu),bn(Ku)}function h_(c){Il(Ku.current);var h=Il(Ii.current),x=ot(h,c.type);h!==x&&(dn(Wu,c),dn(Ii,x))}function Qx(c){Wu.current===c&&(bn(Ii),bn(Wu))}var Cn=zo(0);function Ff(c){for(var h=c;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Zx=[];function ey(){for(var c=0;c<Zx.length;c++)Zx[c]._workInProgressVersionPrimary=null;Zx.length=0}var $f=A.ReactCurrentDispatcher,ty=A.ReactCurrentBatchConfig,Dl=0,An=null,na=null,pa=null,Lf=!1,Vu=!1,Gu=0,f7=0;function Fa(){throw Error(r(321))}function ry(c,h){if(h===null)return!1;for(var x=0;x<h.length&&x<c.length;x++)if(!li(c[x],h[x]))return!1;return!0}function ny(c,h,x,j,T,R){if(Dl=R,An=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,$f.current=c===null||c.memoizedState===null?x7:y7,c=x(j,T),Vu){R=0;do{if(Vu=!1,Gu=0,25<=R)throw Error(r(301));R+=1,pa=na=null,h.updateQueue=null,$f.current=v7,c=x(j,T)}while(Vu)}if($f.current=Hf,h=na!==null&&na.next!==null,Dl=0,pa=na=An=null,Lf=!1,h)throw Error(r(300));return c}function ay(){var c=Gu!==0;return Gu=0,c}function Di(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pa===null?An.memoizedState=pa=c:pa=pa.next=c,pa}function zs(){if(na===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=na.next;var h=pa===null?An.memoizedState:pa.next;if(h!==null)pa=h,na=c;else{if(c===null)throw Error(r(310));na=c,c={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},pa===null?An.memoizedState=pa=c:pa=pa.next=c}return pa}function Yu(c,h){return typeof h=="function"?h(c):h}function sy(c){var h=zs(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=na,T=j.baseQueue,R=x.pending;if(R!==null){if(T!==null){var te=T.next;T.next=R.next,R.next=te}j.baseQueue=T=R,x.pending=null}if(T!==null){R=T.next,j=j.baseState;var xe=te=null,_e=null,Ue=R;do{var dt=Ue.lane;if((Dl&dt)===dt)_e!==null&&(_e=_e.next={lane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),j=Ue.hasEagerState?Ue.eagerState:c(j,Ue.action);else{var ft={lane:dt,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null};_e===null?(xe=_e=ft,te=j):_e=_e.next=ft,An.lanes|=dt,Ml|=dt}Ue=Ue.next}while(Ue!==null&&Ue!==R);_e===null?te=j:_e.next=xe,li(j,h.memoizedState)||(fs=!0),h.memoizedState=j,h.baseState=te,h.baseQueue=_e,x.lastRenderedState=j}if(c=x.interleaved,c!==null){T=c;do R=T.lane,An.lanes|=R,Ml|=R,T=T.next;while(T!==c)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function iy(c){var h=zs(),x=h.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var j=x.dispatch,T=x.pending,R=h.memoizedState;if(T!==null){x.pending=null;var te=T=T.next;do R=c(R,te.action),te=te.next;while(te!==T);li(R,h.memoizedState)||(fs=!0),h.memoizedState=R,h.baseQueue===null&&(h.baseState=R),x.lastRenderedState=R}return[R,j]}function f_(){}function m_(c,h){var x=An,j=zs(),T=h(),R=!li(j.memoizedState,T);if(R&&(j.memoizedState=T,fs=!0),j=j.queue,oy(x_.bind(null,x,j,c),[c]),j.getSnapshot!==h||R||pa!==null&&pa.memoizedState.tag&1){if(x.flags|=2048,Xu(9,g_.bind(null,x,j,T,h),void 0,null),ga===null)throw Error(r(349));(Dl&30)!==0||p_(x,h,T)}return T}function p_(c,h,x){c.flags|=16384,c={getSnapshot:h,value:x},h=An.updateQueue,h===null?(h={lastEffect:null,stores:null},An.updateQueue=h,h.stores=[c]):(x=h.stores,x===null?h.stores=[c]:x.push(c))}function g_(c,h,x,j){h.value=x,h.getSnapshot=j,y_(h)&&v_(c)}function x_(c,h,x){return x(function(){y_(h)&&v_(c)})}function y_(c){var h=c.getSnapshot;c=c.value;try{var x=h();return!li(c,x)}catch{return!0}}function v_(c){var h=lo(c,1);h!==null&&fi(h,c,1,-1)}function b_(c){var h=Di();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:c},h.queue=c,c=c.dispatch=g7.bind(null,An,c),[h.memoizedState,c]}function Xu(c,h,x,j){return c={tag:c,create:h,destroy:x,deps:j,next:null},h=An.updateQueue,h===null?(h={lastEffect:null,stores:null},An.updateQueue=h,h.lastEffect=c.next=c):(x=h.lastEffect,x===null?h.lastEffect=c.next=c:(j=x.next,x.next=c,c.next=j,h.lastEffect=c)),c}function w_(){return zs().memoizedState}function Bf(c,h,x,j){var T=Di();An.flags|=c,T.memoizedState=Xu(1|h,x,void 0,j===void 0?null:j)}function Uf(c,h,x,j){var T=zs();j=j===void 0?null:j;var R=void 0;if(na!==null){var te=na.memoizedState;if(R=te.destroy,j!==null&&ry(j,te.deps)){T.memoizedState=Xu(h,x,R,j);return}}An.flags|=c,T.memoizedState=Xu(1|h,x,R,j)}function j_(c,h){return Bf(8390656,8,c,h)}function oy(c,h){return Uf(2048,8,c,h)}function N_(c,h){return Uf(4,2,c,h)}function k_(c,h){return Uf(4,4,c,h)}function S_(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function __(c,h,x){return x=x!=null?x.concat([c]):null,Uf(4,4,S_.bind(null,h,c),x)}function ly(){}function E_(c,h){var x=zs();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&ry(h,j[1])?j[0]:(x.memoizedState=[c,h],c)}function C_(c,h){var x=zs();h=h===void 0?null:h;var j=x.memoizedState;return j!==null&&h!==null&&ry(h,j[1])?j[0]:(c=c(),x.memoizedState=[c,h],c)}function A_(c,h,x){return(Dl&21)===0?(c.baseState&&(c.baseState=!1,fs=!0),c.memoizedState=x):(li(x,h)||(x=Se(),An.lanes|=x,Ml|=x,c.baseState=!0),h)}function m7(c,h){var x=pe;pe=x!==0&&4>x?x:4,c(!0);var j=ty.transition;ty.transition={};try{c(!1),h()}finally{pe=x,ty.transition=j}}function T_(){return zs().memoizedState}function p7(c,h,x){var j=Qo(c);if(x={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null},O_(c))P_(h,x);else if(x=l_(c,h,x,j),x!==null){var T=ts();fi(x,c,j,T),I_(x,h,j)}}function g7(c,h,x){var j=Qo(c),T={lane:j,action:x,hasEagerState:!1,eagerState:null,next:null};if(O_(c))P_(h,T);else{var R=c.alternate;if(c.lanes===0&&(R===null||R.lanes===0)&&(R=h.lastRenderedReducer,R!==null))try{var te=h.lastRenderedState,xe=R(te,x);if(T.hasEagerState=!0,T.eagerState=xe,li(xe,te)){var _e=h.interleaved;_e===null?(T.next=T,Yx(h)):(T.next=_e.next,_e.next=T),h.interleaved=T;return}}catch{}finally{}x=l_(c,h,T,j),x!==null&&(T=ts(),fi(x,c,j,T),I_(x,h,j))}}function O_(c){var h=c.alternate;return c===An||h!==null&&h===An}function P_(c,h){Vu=Lf=!0;var x=c.pending;x===null?h.next=h:(h.next=x.next,x.next=h),c.pending=h}function I_(c,h,x){if((x&4194240)!==0){var j=h.lanes;j&=c.pendingLanes,x|=j,h.lanes=x,je(c,x)}}var Hf={readContext:qs,useCallback:Fa,useContext:Fa,useEffect:Fa,useImperativeHandle:Fa,useInsertionEffect:Fa,useLayoutEffect:Fa,useMemo:Fa,useReducer:Fa,useRef:Fa,useState:Fa,useDebugValue:Fa,useDeferredValue:Fa,useTransition:Fa,useMutableSource:Fa,useSyncExternalStore:Fa,useId:Fa,unstable_isNewReconciler:!1},x7={readContext:qs,useCallback:function(c,h){return Di().memoizedState=[c,h===void 0?null:h],c},useContext:qs,useEffect:j_,useImperativeHandle:function(c,h,x){return x=x!=null?x.concat([c]):null,Bf(4194308,4,S_.bind(null,h,c),x)},useLayoutEffect:function(c,h){return Bf(4194308,4,c,h)},useInsertionEffect:function(c,h){return Bf(4,2,c,h)},useMemo:function(c,h){var x=Di();return h=h===void 0?null:h,c=c(),x.memoizedState=[c,h],c},useReducer:function(c,h,x){var j=Di();return h=x!==void 0?x(h):h,j.memoizedState=j.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},j.queue=c,c=c.dispatch=p7.bind(null,An,c),[j.memoizedState,c]},useRef:function(c){var h=Di();return c={current:c},h.memoizedState=c},useState:b_,useDebugValue:ly,useDeferredValue:function(c){return Di().memoizedState=c},useTransition:function(){var c=b_(!1),h=c[0];return c=m7.bind(null,c[1]),Di().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,x){var j=An,T=Di();if(kn){if(x===void 0)throw Error(r(407));x=x()}else{if(x=h(),ga===null)throw Error(r(349));(Dl&30)!==0||p_(j,h,x)}T.memoizedState=x;var R={value:x,getSnapshot:h};return T.queue=R,j_(x_.bind(null,j,R,c),[c]),j.flags|=2048,Xu(9,g_.bind(null,j,R,x,h),void 0,null),x},useId:function(){var c=Di(),h=ga.identifierPrefix;if(kn){var x=oo,j=io;x=(j&~(1<<32-Ee(j)-1)).toString(32)+x,h=":"+h+"R"+x,x=Gu++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=f7++,h=":"+h+"r"+x.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},y7={readContext:qs,useCallback:E_,useContext:qs,useEffect:oy,useImperativeHandle:__,useInsertionEffect:N_,useLayoutEffect:k_,useMemo:C_,useReducer:sy,useRef:w_,useState:function(){return sy(Yu)},useDebugValue:ly,useDeferredValue:function(c){var h=zs();return A_(h,na.memoizedState,c)},useTransition:function(){var c=sy(Yu)[0],h=zs().memoizedState;return[c,h]},useMutableSource:f_,useSyncExternalStore:m_,useId:T_,unstable_isNewReconciler:!1},v7={readContext:qs,useCallback:E_,useContext:qs,useEffect:oy,useImperativeHandle:__,useInsertionEffect:N_,useLayoutEffect:k_,useMemo:C_,useReducer:iy,useRef:w_,useState:function(){return iy(Yu)},useDebugValue:ly,useDeferredValue:function(c){var h=zs();return na===null?h.memoizedState=c:A_(h,na.memoizedState,c)},useTransition:function(){var c=iy(Yu)[0],h=zs().memoizedState;return[c,h]},useMutableSource:f_,useSyncExternalStore:m_,useId:T_,unstable_isNewReconciler:!1};function di(c,h){if(c&&c.defaultProps){h=J({},h),c=c.defaultProps;for(var x in c)h[x]===void 0&&(h[x]=c[x]);return h}return h}function cy(c,h,x,j){h=c.memoizedState,x=x(j,h),x=x==null?h:J({},h,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var qf={isMounted:function(c){return(c=c._reactInternals)?W(c)===c:!1},enqueueSetState:function(c,h,x){c=c._reactInternals;var j=ts(),T=Qo(c),R=co(j,T);R.payload=h,x!=null&&(R.callback=x),h=Go(c,R,T),h!==null&&(fi(h,c,T,j),Mf(h,c,T))},enqueueReplaceState:function(c,h,x){c=c._reactInternals;var j=ts(),T=Qo(c),R=co(j,T);R.tag=1,R.payload=h,x!=null&&(R.callback=x),h=Go(c,R,T),h!==null&&(fi(h,c,T,j),Mf(h,c,T))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var x=ts(),j=Qo(c),T=co(x,j);T.tag=2,h!=null&&(T.callback=h),h=Go(c,T,j),h!==null&&(fi(h,c,j,x),Mf(h,c,j))}};function D_(c,h,x,j,T,R,te){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(j,R,te):h.prototype&&h.prototype.isPureReactComponent?!Ru(x,j)||!Ru(T,R):!0}function M_(c,h,x){var j=!1,T=Wo,R=h.contextType;return typeof R=="object"&&R!==null?R=qs(R):(T=hs(h)?Al:Ra.current,j=h.contextTypes,R=(j=j!=null)?Wc(c,T):Wo),h=new h(x,R),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=qf,c.stateNode=h,h._reactInternals=c,j&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=R),h}function R_(c,h,x,j){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,j),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,j),h.state!==c&&qf.enqueueReplaceState(h,h.state,null)}function dy(c,h,x,j){var T=c.stateNode;T.props=x,T.state=c.memoizedState,T.refs={},Xx(c);var R=h.contextType;typeof R=="object"&&R!==null?T.context=qs(R):(R=hs(h)?Al:Ra.current,T.context=Wc(c,R)),T.state=c.memoizedState,R=h.getDerivedStateFromProps,typeof R=="function"&&(cy(c,h,R,x),T.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&qf.enqueueReplaceState(T,T.state,null),Rf(c,x,T,j),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function Zc(c,h){try{var x="",j=h;do x+=ee(j),j=j.return;while(j);var T=x}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:c,source:h,stack:T,digest:null}}function uy(c,h,x){return{value:c,source:null,stack:x??null,digest:h??null}}function hy(c,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var b7=typeof WeakMap=="function"?WeakMap:Map;function F_(c,h,x){x=co(-1,x),x.tag=3,x.payload={element:null};var j=h.value;return x.callback=function(){Xf||(Xf=!0,Ey=j),hy(c,h)},x}function $_(c,h,x){x=co(-1,x),x.tag=3;var j=c.type.getDerivedStateFromError;if(typeof j=="function"){var T=h.value;x.payload=function(){return j(T)},x.callback=function(){hy(c,h)}}var R=c.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(x.callback=function(){hy(c,h),typeof j!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var te=h.stack;this.componentDidCatch(h.value,{componentStack:te!==null?te:""})}),x}function L_(c,h,x){var j=c.pingCache;if(j===null){j=c.pingCache=new b7;var T=new Set;j.set(h,T)}else T=j.get(h),T===void 0&&(T=new Set,j.set(h,T));T.has(x)||(T.add(x),c=D7.bind(null,c,h,x),h.then(c,c))}function B_(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function U_(c,h,x,j,T){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=co(-1,1),h.tag=2,Go(x,h,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var w7=A.ReactCurrentOwner,fs=!1;function es(c,h,x,j){h.child=c===null?o_(h,null,x,j):Yc(h,c.child,x,j)}function H_(c,h,x,j,T){x=x.render;var R=h.ref;return Jc(h,T),j=ny(c,h,x,j,R,T),x=ay(),c!==null&&!fs?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,uo(c,h,T)):(kn&&x&&Bx(h),h.flags|=1,es(c,h,j,T),h.child)}function q_(c,h,x,j,T){if(c===null){var R=x.type;return typeof R=="function"&&!Dy(R)&&R.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=R,z_(c,h,R,j,T)):(c=rm(x.type,null,j,h,h.mode,T),c.ref=h.ref,c.return=h,h.child=c)}if(R=c.child,(c.lanes&T)===0){var te=R.memoizedProps;if(x=x.compare,x=x!==null?x:Ru,x(te,j)&&c.ref===h.ref)return uo(c,h,T)}return h.flags|=1,c=el(R,j),c.ref=h.ref,c.return=h,h.child=c}function z_(c,h,x,j,T){if(c!==null){var R=c.memoizedProps;if(Ru(R,j)&&c.ref===h.ref)if(fs=!1,h.pendingProps=j=R,(c.lanes&T)!==0)(c.flags&131072)!==0&&(fs=!0);else return h.lanes=c.lanes,uo(c,h,T)}return fy(c,h,x,j,T)}function W_(c,h,x){var j=h.pendingProps,T=j.children,R=c!==null?c.memoizedState:null;if(j.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(td,Ss),Ss|=x;else{if((x&1073741824)===0)return c=R!==null?R.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,dn(td,Ss),Ss|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=R!==null?R.baseLanes:x,dn(td,Ss),Ss|=j}else R!==null?(j=R.baseLanes|x,h.memoizedState=null):j=x,dn(td,Ss),Ss|=j;return es(c,h,T,x),h.child}function K_(c,h){var x=h.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function fy(c,h,x,j,T){var R=hs(x)?Al:Ra.current;return R=Wc(h,R),Jc(h,T),x=ny(c,h,x,j,R,T),j=ay(),c!==null&&!fs?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~T,uo(c,h,T)):(kn&&j&&Bx(h),h.flags|=1,es(c,h,x,T),h.child)}function V_(c,h,x,j,T){if(hs(x)){var R=!0;Ef(h)}else R=!1;if(Jc(h,T),h.stateNode===null)Wf(c,h),M_(h,x,j),dy(h,x,j,T),j=!0;else if(c===null){var te=h.stateNode,xe=h.memoizedProps;te.props=xe;var _e=te.context,Ue=x.contextType;typeof Ue=="object"&&Ue!==null?Ue=qs(Ue):(Ue=hs(x)?Al:Ra.current,Ue=Wc(h,Ue));var dt=x.getDerivedStateFromProps,ft=typeof dt=="function"||typeof te.getSnapshotBeforeUpdate=="function";ft||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(xe!==j||_e!==Ue)&&R_(h,te,j,Ue),Vo=!1;var lt=h.memoizedState;te.state=lt,Rf(h,j,te,T),_e=h.memoizedState,xe!==j||lt!==_e||us.current||Vo?(typeof dt=="function"&&(cy(h,x,dt,j),_e=h.memoizedState),(xe=Vo||D_(h,x,xe,j,lt,_e,Ue))?(ft||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(h.flags|=4194308)):(typeof te.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=j,h.memoizedState=_e),te.props=j,te.state=_e,te.context=Ue,j=xe):(typeof te.componentDidMount=="function"&&(h.flags|=4194308),j=!1)}else{te=h.stateNode,c_(c,h),xe=h.memoizedProps,Ue=h.type===h.elementType?xe:di(h.type,xe),te.props=Ue,ft=h.pendingProps,lt=te.context,_e=x.contextType,typeof _e=="object"&&_e!==null?_e=qs(_e):(_e=hs(x)?Al:Ra.current,_e=Wc(h,_e));var It=x.getDerivedStateFromProps;(dt=typeof It=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(xe!==ft||lt!==_e)&&R_(h,te,j,_e),Vo=!1,lt=h.memoizedState,te.state=lt,Rf(h,j,te,T);var Rt=h.memoizedState;xe!==ft||lt!==Rt||us.current||Vo?(typeof It=="function"&&(cy(h,x,It,j),Rt=h.memoizedState),(Ue=Vo||D_(h,x,Ue,j,lt,Rt,_e)||!1)?(dt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(j,Rt,_e),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(j,Rt,_e)),typeof te.componentDidUpdate=="function"&&(h.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof te.componentDidUpdate!="function"||xe===c.memoizedProps&&lt===c.memoizedState||(h.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||xe===c.memoizedProps&&lt===c.memoizedState||(h.flags|=1024),h.memoizedProps=j,h.memoizedState=Rt),te.props=j,te.state=Rt,te.context=_e,j=Ue):(typeof te.componentDidUpdate!="function"||xe===c.memoizedProps&&lt===c.memoizedState||(h.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||xe===c.memoizedProps&&lt===c.memoizedState||(h.flags|=1024),j=!1)}return my(c,h,x,j,R,T)}function my(c,h,x,j,T,R){K_(c,h);var te=(h.flags&128)!==0;if(!j&&!te)return T&&QS(h,x,!1),uo(c,h,R);j=h.stateNode,w7.current=h;var xe=te&&typeof x.getDerivedStateFromError!="function"?null:j.render();return h.flags|=1,c!==null&&te?(h.child=Yc(h,c.child,null,R),h.child=Yc(h,null,xe,R)):es(c,h,xe,R),h.memoizedState=j.state,T&&QS(h,x,!0),h.child}function G_(c){var h=c.stateNode;h.pendingContext?XS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&XS(c,h.context,!1),Jx(c,h.containerInfo)}function Y_(c,h,x,j,T){return Gc(),zx(T),h.flags|=256,es(c,h,x,j),h.child}var py={dehydrated:null,treeContext:null,retryLane:0};function gy(c){return{baseLanes:c,cachePool:null,transitions:null}}function X_(c,h,x){var j=h.pendingProps,T=Cn.current,R=!1,te=(h.flags&128)!==0,xe;if((xe=te)||(xe=c!==null&&c.memoizedState===null?!1:(T&2)!==0),xe?(R=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),dn(Cn,T&1),c===null)return qx(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(te=j.children,c=j.fallback,R?(j=h.mode,R=h.child,te={mode:"hidden",children:te},(j&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=te):R=nm(te,j,0,null),c=Ll(c,j,x,null),R.return=h,c.return=h,R.sibling=c,h.child=R,h.child.memoizedState=gy(x),h.memoizedState=py,c):xy(h,te));if(T=c.memoizedState,T!==null&&(xe=T.dehydrated,xe!==null))return j7(c,h,te,j,xe,T,x);if(R){R=j.fallback,te=h.mode,T=c.child,xe=T.sibling;var _e={mode:"hidden",children:j.children};return(te&1)===0&&h.child!==T?(j=h.child,j.childLanes=0,j.pendingProps=_e,h.deletions=null):(j=el(T,_e),j.subtreeFlags=T.subtreeFlags&14680064),xe!==null?R=el(xe,R):(R=Ll(R,te,x,null),R.flags|=2),R.return=h,j.return=h,j.sibling=R,h.child=j,j=R,R=h.child,te=c.child.memoizedState,te=te===null?gy(x):{baseLanes:te.baseLanes|x,cachePool:null,transitions:te.transitions},R.memoizedState=te,R.childLanes=c.childLanes&~x,h.memoizedState=py,j}return R=c.child,c=R.sibling,j=el(R,{mode:"visible",children:j.children}),(h.mode&1)===0&&(j.lanes=x),j.return=h,j.sibling=null,c!==null&&(x=h.deletions,x===null?(h.deletions=[c],h.flags|=16):x.push(c)),h.child=j,h.memoizedState=null,j}function xy(c,h){return h=nm({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function zf(c,h,x,j){return j!==null&&zx(j),Yc(h,c.child,null,x),c=xy(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function j7(c,h,x,j,T,R,te){if(x)return h.flags&256?(h.flags&=-257,j=uy(Error(r(422))),zf(c,h,te,j)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(R=j.fallback,T=h.mode,j=nm({mode:"visible",children:j.children},T,0,null),R=Ll(R,T,te,null),R.flags|=2,j.return=h,R.return=h,j.sibling=R,h.child=j,(h.mode&1)!==0&&Yc(h,c.child,null,te),h.child.memoizedState=gy(te),h.memoizedState=py,R);if((h.mode&1)===0)return zf(c,h,te,null);if(T.data==="$!"){if(j=T.nextSibling&&T.nextSibling.dataset,j)var xe=j.dgst;return j=xe,R=Error(r(419)),j=uy(R,j,void 0),zf(c,h,te,j)}if(xe=(te&c.childLanes)!==0,fs||xe){if(j=ga,j!==null){switch(te&-te){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(j.suspendedLanes|te))!==0?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,lo(c,T),fi(j,c,T,-1))}return Iy(),j=uy(Error(r(421))),zf(c,h,te,j)}return T.data==="$?"?(h.flags|=128,h.child=c.child,h=M7.bind(null,c),T._reactRetry=h,null):(c=R.treeContext,ks=qo(T.nextSibling),Ns=h,kn=!0,ci=null,c!==null&&(Us[Hs++]=io,Us[Hs++]=oo,Us[Hs++]=Tl,io=c.id,oo=c.overflow,Tl=h),h=xy(h,j.children),h.flags|=4096,h)}function J_(c,h,x){c.lanes|=h;var j=c.alternate;j!==null&&(j.lanes|=h),Gx(c.return,h,x)}function yy(c,h,x,j,T){var R=c.memoizedState;R===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:j,tail:x,tailMode:T}:(R.isBackwards=h,R.rendering=null,R.renderingStartTime=0,R.last=j,R.tail=x,R.tailMode=T)}function Q_(c,h,x){var j=h.pendingProps,T=j.revealOrder,R=j.tail;if(es(c,h,j.children,x),j=Cn.current,(j&2)!==0)j=j&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&J_(c,x,h);else if(c.tag===19)J_(c,x,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}j&=1}if(dn(Cn,j),(h.mode&1)===0)h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)c=x.alternate,c!==null&&Ff(c)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),yy(h,!1,T,x,R);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(c=T.alternate,c!==null&&Ff(c)===null){h.child=T;break}c=T.sibling,T.sibling=x,x=T,T=c}yy(h,!0,x,null,R);break;case"together":yy(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Wf(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function uo(c,h,x){if(c!==null&&(h.dependencies=c.dependencies),Ml|=h.lanes,(x&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,x=el(c,c.pendingProps),h.child=x,x.return=h;c.sibling!==null;)c=c.sibling,x=x.sibling=el(c,c.pendingProps),x.return=h;x.sibling=null}return h.child}function N7(c,h,x){switch(h.tag){case 3:G_(h),Gc();break;case 5:h_(h);break;case 1:hs(h.type)&&Ef(h);break;case 4:Jx(h,h.stateNode.containerInfo);break;case 10:var j=h.type._context,T=h.memoizedProps.value;dn(If,j._currentValue),j._currentValue=T;break;case 13:if(j=h.memoizedState,j!==null)return j.dehydrated!==null?(dn(Cn,Cn.current&1),h.flags|=128,null):(x&h.child.childLanes)!==0?X_(c,h,x):(dn(Cn,Cn.current&1),c=uo(c,h,x),c!==null?c.sibling:null);dn(Cn,Cn.current&1);break;case 19:if(j=(x&h.childLanes)!==0,(c.flags&128)!==0){if(j)return Q_(c,h,x);h.flags|=128}if(T=h.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),dn(Cn,Cn.current),j)break;return null;case 22:case 23:return h.lanes=0,W_(c,h,x)}return uo(c,h,x)}var Z_,vy,eE,tE;Z_=function(c,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},vy=function(){},eE=function(c,h,x,j){var T=c.memoizedProps;if(T!==j){c=h.stateNode,Il(Ii.current);var R=null;switch(x){case"input":T=Ye(c,T),j=Ye(c,j),R=[];break;case"select":T=J({},T,{value:void 0}),j=J({},j,{value:void 0}),R=[];break;case"textarea":T=Vt(c,T),j=Vt(c,j),R=[];break;default:typeof T.onClick!="function"&&typeof j.onClick=="function"&&(c.onclick=kf)}_t(x,j);var te;x=null;for(Ue in T)if(!j.hasOwnProperty(Ue)&&T.hasOwnProperty(Ue)&&T[Ue]!=null)if(Ue==="style"){var xe=T[Ue];for(te in xe)xe.hasOwnProperty(te)&&(x||(x={}),x[te]="")}else Ue!=="dangerouslySetInnerHTML"&&Ue!=="children"&&Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&Ue!=="autoFocus"&&(s.hasOwnProperty(Ue)?R||(R=[]):(R=R||[]).push(Ue,null));for(Ue in j){var _e=j[Ue];if(xe=T?.[Ue],j.hasOwnProperty(Ue)&&_e!==xe&&(_e!=null||xe!=null))if(Ue==="style")if(xe){for(te in xe)!xe.hasOwnProperty(te)||_e&&_e.hasOwnProperty(te)||(x||(x={}),x[te]="");for(te in _e)_e.hasOwnProperty(te)&&xe[te]!==_e[te]&&(x||(x={}),x[te]=_e[te])}else x||(R||(R=[]),R.push(Ue,x)),x=_e;else Ue==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,xe=xe?xe.__html:void 0,_e!=null&&xe!==_e&&(R=R||[]).push(Ue,_e)):Ue==="children"?typeof _e!="string"&&typeof _e!="number"||(R=R||[]).push(Ue,""+_e):Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ue)?(_e!=null&&Ue==="onScroll"&&vn("scroll",c),R||xe===_e||(R=[])):(R=R||[]).push(Ue,_e))}x&&(R=R||[]).push("style",x);var Ue=R;(h.updateQueue=Ue)&&(h.flags|=4)}},tE=function(c,h,x,j){x!==j&&(h.flags|=4)};function Ju(c,h){if(!kn)switch(c.tailMode){case"hidden":h=c.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:j.sibling=null}}function $a(c){var h=c.alternate!==null&&c.alternate.child===c.child,x=0,j=0;if(h)for(var T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags&14680064,j|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)x|=T.lanes|T.childLanes,j|=T.subtreeFlags,j|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=j,c.childLanes=x,h}function k7(c,h,x){var j=h.pendingProps;switch(Ux(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(h),null;case 1:return hs(h.type)&&_f(),$a(h),null;case 3:return j=h.stateNode,Qc(),bn(us),bn(Ra),ey(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(c===null||c.child===null)&&(Of(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ci!==null&&(Ty(ci),ci=null))),vy(c,h),$a(h),null;case 5:Qx(h);var T=Il(Ku.current);if(x=h.type,c!==null&&h.stateNode!=null)eE(c,h,x,j,T),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!j){if(h.stateNode===null)throw Error(r(166));return $a(h),null}if(c=Il(Ii.current),Of(h)){j=h.stateNode,x=h.type;var R=h.memoizedProps;switch(j[Pi]=h,j[Uu]=R,c=(h.mode&1)!==0,x){case"dialog":vn("cancel",j),vn("close",j);break;case"iframe":case"object":case"embed":vn("load",j);break;case"video":case"audio":for(T=0;T<$u.length;T++)vn($u[T],j);break;case"source":vn("error",j);break;case"img":case"image":case"link":vn("error",j),vn("load",j);break;case"details":vn("toggle",j);break;case"input":ct(j,R),vn("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!R.multiple},vn("invalid",j);break;case"textarea":hr(j,R),vn("invalid",j)}_t(x,R),T=null;for(var te in R)if(R.hasOwnProperty(te)){var xe=R[te];te==="children"?typeof xe=="string"?j.textContent!==xe&&(R.suppressHydrationWarning!==!0&&Nf(j.textContent,xe,c),T=["children",xe]):typeof xe=="number"&&j.textContent!==""+xe&&(R.suppressHydrationWarning!==!0&&Nf(j.textContent,xe,c),T=["children",""+xe]):s.hasOwnProperty(te)&&xe!=null&&te==="onScroll"&&vn("scroll",j)}switch(x){case"input":Oe(j),Ne(j,R,!0);break;case"textarea":Oe(j),Dr(j);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(j.onclick=kf)}j=T,h.updateQueue=j,j!==null&&(h.flags|=4)}else{te=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Hr(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=te.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof j.is=="string"?c=te.createElement(x,{is:j.is}):(c=te.createElement(x),x==="select"&&(te=c,j.multiple?te.multiple=!0:j.size&&(te.size=j.size))):c=te.createElementNS(c,x),c[Pi]=h,c[Uu]=j,Z_(c,h,!1,!1),h.stateNode=c;e:{switch(te=St(x,j),x){case"dialog":vn("cancel",c),vn("close",c),T=j;break;case"iframe":case"object":case"embed":vn("load",c),T=j;break;case"video":case"audio":for(T=0;T<$u.length;T++)vn($u[T],c);T=j;break;case"source":vn("error",c),T=j;break;case"img":case"image":case"link":vn("error",c),vn("load",c),T=j;break;case"details":vn("toggle",c),T=j;break;case"input":ct(c,j),T=Ye(c,j),vn("invalid",c);break;case"option":T=j;break;case"select":c._wrapperState={wasMultiple:!!j.multiple},T=J({},j,{value:void 0}),vn("invalid",c);break;case"textarea":hr(c,j),T=Vt(c,j),vn("invalid",c);break;default:T=j}_t(x,T),xe=T;for(R in xe)if(xe.hasOwnProperty(R)){var _e=xe[R];R==="style"?Et(c,_e):R==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&Cr(c,_e)):R==="children"?typeof _e=="string"?(x!=="textarea"||_e!=="")&&kt(c,_e):typeof _e=="number"&&kt(c,""+_e):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(s.hasOwnProperty(R)?_e!=null&&R==="onScroll"&&vn("scroll",c):_e!=null&&w(c,R,_e,te))}switch(x){case"input":Oe(c),Ne(c,j,!1);break;case"textarea":Oe(c),Dr(c);break;case"option":j.value!=null&&c.setAttribute("value",""+Ce(j.value));break;case"select":c.multiple=!!j.multiple,R=j.value,R!=null?pt(c,!!j.multiple,R,!1):j.defaultValue!=null&&pt(c,!!j.multiple,j.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=kf)}switch(x){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return $a(h),null;case 6:if(c&&h.stateNode!=null)tE(c,h,c.memoizedProps,j);else{if(typeof j!="string"&&h.stateNode===null)throw Error(r(166));if(x=Il(Ku.current),Il(Ii.current),Of(h)){if(j=h.stateNode,x=h.memoizedProps,j[Pi]=h,(R=j.nodeValue!==x)&&(c=Ns,c!==null))switch(c.tag){case 3:Nf(j.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Nf(j.nodeValue,x,(c.mode&1)!==0)}R&&(h.flags|=4)}else j=(x.nodeType===9?x:x.ownerDocument).createTextNode(j),j[Pi]=h,h.stateNode=j}return $a(h),null;case 13:if(bn(Cn),j=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(kn&&ks!==null&&(h.mode&1)!==0&&(h.flags&128)===0)a_(),Gc(),h.flags|=98560,R=!1;else if(R=Of(h),j!==null&&j.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Pi]=h}else Gc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;$a(h),R=!1}else ci!==null&&(Ty(ci),ci=null),R=!0;if(!R)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=x,h):(j=j!==null,j!==(c!==null&&c.memoizedState!==null)&&j&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Cn.current&1)!==0?aa===0&&(aa=3):Iy())),h.updateQueue!==null&&(h.flags|=4),$a(h),null);case 4:return Qc(),vy(c,h),c===null&&Lu(h.stateNode.containerInfo),$a(h),null;case 10:return Vx(h.type._context),$a(h),null;case 17:return hs(h.type)&&_f(),$a(h),null;case 19:if(bn(Cn),R=h.memoizedState,R===null)return $a(h),null;if(j=(h.flags&128)!==0,te=R.rendering,te===null)if(j)Ju(R,!1);else{if(aa!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(te=Ff(c),te!==null){for(h.flags|=128,Ju(R,!1),j=te.updateQueue,j!==null&&(h.updateQueue=j,h.flags|=4),h.subtreeFlags=0,j=x,x=h.child;x!==null;)R=x,c=j,R.flags&=14680066,te=R.alternate,te===null?(R.childLanes=0,R.lanes=c,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=te.childLanes,R.lanes=te.lanes,R.child=te.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=te.memoizedProps,R.memoizedState=te.memoizedState,R.updateQueue=te.updateQueue,R.type=te.type,c=te.dependencies,R.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return dn(Cn,Cn.current&1|2),h.child}c=c.sibling}R.tail!==null&&Ge()>rd&&(h.flags|=128,j=!0,Ju(R,!1),h.lanes=4194304)}else{if(!j)if(c=Ff(te),c!==null){if(h.flags|=128,j=!0,x=c.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),Ju(R,!0),R.tail===null&&R.tailMode==="hidden"&&!te.alternate&&!kn)return $a(h),null}else 2*Ge()-R.renderingStartTime>rd&&x!==1073741824&&(h.flags|=128,j=!0,Ju(R,!1),h.lanes=4194304);R.isBackwards?(te.sibling=h.child,h.child=te):(x=R.last,x!==null?x.sibling=te:h.child=te,R.last=te)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Ge(),h.sibling=null,x=Cn.current,dn(Cn,j?x&1|2:x&1),h):($a(h),null);case 22:case 23:return Py(),j=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==j&&(h.flags|=8192),j&&(h.mode&1)!==0?(Ss&1073741824)!==0&&($a(h),h.subtreeFlags&6&&(h.flags|=8192)):$a(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function S7(c,h){switch(Ux(h),h.tag){case 1:return hs(h.type)&&_f(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Qc(),bn(us),bn(Ra),ey(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Qx(h),null;case 13:if(bn(Cn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Gc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return bn(Cn),null;case 4:return Qc(),null;case 10:return Vx(h.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var Kf=!1,La=!1,_7=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function ed(c,h){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(j){Tn(c,h,j)}else x.current=null}function by(c,h,x){try{x()}catch(j){Tn(c,h,j)}}var rE=!1;function E7(c,h){if(Px=ra,c=DS(),kx(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var j=x.getSelection&&x.getSelection();if(j&&j.rangeCount!==0){x=j.anchorNode;var T=j.anchorOffset,R=j.focusNode;j=j.focusOffset;try{x.nodeType,R.nodeType}catch{x=null;break e}var te=0,xe=-1,_e=-1,Ue=0,dt=0,ft=c,lt=null;t:for(;;){for(var It;ft!==x||T!==0&&ft.nodeType!==3||(xe=te+T),ft!==R||j!==0&&ft.nodeType!==3||(_e=te+j),ft.nodeType===3&&(te+=ft.nodeValue.length),(It=ft.firstChild)!==null;)lt=ft,ft=It;for(;;){if(ft===c)break t;if(lt===x&&++Ue===T&&(xe=te),lt===R&&++dt===j&&(_e=te),(It=ft.nextSibling)!==null)break;ft=lt,lt=ft.parentNode}ft=It}x=xe===-1||_e===-1?null:{start:xe,end:_e}}else x=null}x=x||{start:0,end:0}}else x=null;for(Ix={focusedElem:c,selectionRange:x},ra=!1,Dt=h;Dt!==null;)if(h=Dt,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Dt=c;else for(;Dt!==null;){h=Dt;try{var Rt=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Rt!==null){var Lt=Rt.memoizedProps,$n=Rt.memoizedState,Me=h.stateNode,Ae=Me.getSnapshotBeforeUpdate(h.elementType===h.type?Lt:di(h.type,Lt),$n);Me.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Fe=h.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(vt){Tn(h,h.return,vt)}if(c=h.sibling,c!==null){c.return=h.return,Dt=c;break}Dt=h.return}return Rt=rE,rE=!1,Rt}function Qu(c,h,x){var j=h.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var T=j=j.next;do{if((T.tag&c)===c){var R=T.destroy;T.destroy=void 0,R!==void 0&&by(h,x,R)}T=T.next}while(T!==j)}}function Vf(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&c)===c){var j=x.create;x.destroy=j()}x=x.next}while(x!==h)}}function wy(c){var h=c.ref;if(h!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof h=="function"?h(c):h.current=c}}function nE(c){var h=c.alternate;h!==null&&(c.alternate=null,nE(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Pi],delete h[Uu],delete h[Fx],delete h[c7],delete h[d7])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function aE(c){return c.tag===5||c.tag===3||c.tag===4}function sE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||aE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function jy(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.nodeType===8?x.parentNode.insertBefore(c,h):x.insertBefore(c,h):(x.nodeType===8?(h=x.parentNode,h.insertBefore(c,x)):(h=x,h.appendChild(c)),x=x._reactRootContainer,x!=null||h.onclick!==null||(h.onclick=kf));else if(j!==4&&(c=c.child,c!==null))for(jy(c,h,x),c=c.sibling;c!==null;)jy(c,h,x),c=c.sibling}function Ny(c,h,x){var j=c.tag;if(j===5||j===6)c=c.stateNode,h?x.insertBefore(c,h):x.appendChild(c);else if(j!==4&&(c=c.child,c!==null))for(Ny(c,h,x),c=c.sibling;c!==null;)Ny(c,h,x),c=c.sibling}var Sa=null,ui=!1;function Yo(c,h,x){for(x=x.child;x!==null;)iE(c,h,x),x=x.sibling}function iE(c,h,x){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(Ze,x)}catch{}switch(x.tag){case 5:La||ed(x,h);case 6:var j=Sa,T=ui;Sa=null,Yo(c,h,x),Sa=j,ui=T,Sa!==null&&(ui?(c=Sa,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):Sa.removeChild(x.stateNode));break;case 18:Sa!==null&&(ui?(c=Sa,x=x.stateNode,c.nodeType===8?Rx(c.parentNode,x):c.nodeType===1&&Rx(c,x),Zr(c)):Rx(Sa,x.stateNode));break;case 4:j=Sa,T=ui,Sa=x.stateNode.containerInfo,ui=!0,Yo(c,h,x),Sa=j,ui=T;break;case 0:case 11:case 14:case 15:if(!La&&(j=x.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){T=j=j.next;do{var R=T,te=R.destroy;R=R.tag,te!==void 0&&((R&2)!==0||(R&4)!==0)&&by(x,h,te),T=T.next}while(T!==j)}Yo(c,h,x);break;case 1:if(!La&&(ed(x,h),j=x.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=x.memoizedProps,j.state=x.memoizedState,j.componentWillUnmount()}catch(xe){Tn(x,h,xe)}Yo(c,h,x);break;case 21:Yo(c,h,x);break;case 22:x.mode&1?(La=(j=La)||x.memoizedState!==null,Yo(c,h,x),La=j):Yo(c,h,x);break;default:Yo(c,h,x)}}function oE(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new _7),h.forEach(function(j){var T=R7.bind(null,c,j);x.has(j)||(x.add(j),j.then(T,T))})}}function hi(c,h){var x=h.deletions;if(x!==null)for(var j=0;j<x.length;j++){var T=x[j];try{var R=c,te=h,xe=te;e:for(;xe!==null;){switch(xe.tag){case 5:Sa=xe.stateNode,ui=!1;break e;case 3:Sa=xe.stateNode.containerInfo,ui=!0;break e;case 4:Sa=xe.stateNode.containerInfo,ui=!0;break e}xe=xe.return}if(Sa===null)throw Error(r(160));iE(R,te,T),Sa=null,ui=!1;var _e=T.alternate;_e!==null&&(_e.return=null),T.return=null}catch(Ue){Tn(T,h,Ue)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)lE(h,c),h=h.sibling}function lE(c,h){var x=c.alternate,j=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(hi(h,c),Mi(c),j&4){try{Qu(3,c,c.return),Vf(3,c)}catch(Lt){Tn(c,c.return,Lt)}try{Qu(5,c,c.return)}catch(Lt){Tn(c,c.return,Lt)}}break;case 1:hi(h,c),Mi(c),j&512&&x!==null&&ed(x,x.return);break;case 5:if(hi(h,c),Mi(c),j&512&&x!==null&&ed(x,x.return),c.flags&32){var T=c.stateNode;try{kt(T,"")}catch(Lt){Tn(c,c.return,Lt)}}if(j&4&&(T=c.stateNode,T!=null)){var R=c.memoizedProps,te=x!==null?x.memoizedProps:R,xe=c.type,_e=c.updateQueue;if(c.updateQueue=null,_e!==null)try{xe==="input"&&R.type==="radio"&&R.name!=null&&We(T,R),St(xe,te);var Ue=St(xe,R);for(te=0;te<_e.length;te+=2){var dt=_e[te],ft=_e[te+1];dt==="style"?Et(T,ft):dt==="dangerouslySetInnerHTML"?Cr(T,ft):dt==="children"?kt(T,ft):w(T,dt,ft,Ue)}switch(xe){case"input":Pe(T,R);break;case"textarea":Jt(T,R);break;case"select":var lt=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var It=R.value;It!=null?pt(T,!!R.multiple,It,!1):lt!==!!R.multiple&&(R.defaultValue!=null?pt(T,!!R.multiple,R.defaultValue,!0):pt(T,!!R.multiple,R.multiple?[]:"",!1))}T[Uu]=R}catch(Lt){Tn(c,c.return,Lt)}}break;case 6:if(hi(h,c),Mi(c),j&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,R=c.memoizedProps;try{T.nodeValue=R}catch(Lt){Tn(c,c.return,Lt)}}break;case 3:if(hi(h,c),Mi(c),j&4&&x!==null&&x.memoizedState.isDehydrated)try{Zr(h.containerInfo)}catch(Lt){Tn(c,c.return,Lt)}break;case 4:hi(h,c),Mi(c);break;case 13:hi(h,c),Mi(c),T=c.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(_y=Ge())),j&4&&oE(c);break;case 22:if(dt=x!==null&&x.memoizedState!==null,c.mode&1?(La=(Ue=La)||dt,hi(h,c),La=Ue):hi(h,c),Mi(c),j&8192){if(Ue=c.memoizedState!==null,(c.stateNode.isHidden=Ue)&&!dt&&(c.mode&1)!==0)for(Dt=c,dt=c.child;dt!==null;){for(ft=Dt=dt;Dt!==null;){switch(lt=Dt,It=lt.child,lt.tag){case 0:case 11:case 14:case 15:Qu(4,lt,lt.return);break;case 1:ed(lt,lt.return);var Rt=lt.stateNode;if(typeof Rt.componentWillUnmount=="function"){j=lt,x=lt.return;try{h=j,Rt.props=h.memoizedProps,Rt.state=h.memoizedState,Rt.componentWillUnmount()}catch(Lt){Tn(j,x,Lt)}}break;case 5:ed(lt,lt.return);break;case 22:if(lt.memoizedState!==null){uE(ft);continue}}It!==null?(It.return=lt,Dt=It):uE(ft)}dt=dt.sibling}e:for(dt=null,ft=c;;){if(ft.tag===5){if(dt===null){dt=ft;try{T=ft.stateNode,Ue?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(xe=ft.stateNode,_e=ft.memoizedProps.style,te=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,xe.style.display=Ie("display",te))}catch(Lt){Tn(c,c.return,Lt)}}}else if(ft.tag===6){if(dt===null)try{ft.stateNode.nodeValue=Ue?"":ft.memoizedProps}catch(Lt){Tn(c,c.return,Lt)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===c)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===c)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===c)break e;dt===ft&&(dt=null),ft=ft.return}dt===ft&&(dt=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:hi(h,c),Mi(c),j&4&&oE(c);break;case 21:break;default:hi(h,c),Mi(c)}}function Mi(c){var h=c.flags;if(h&2){try{e:{for(var x=c.return;x!==null;){if(aE(x)){var j=x;break e}x=x.return}throw Error(r(160))}switch(j.tag){case 5:var T=j.stateNode;j.flags&32&&(kt(T,""),j.flags&=-33);var R=sE(c);Ny(c,R,T);break;case 3:case 4:var te=j.stateNode.containerInfo,xe=sE(c);jy(c,xe,te);break;default:throw Error(r(161))}}catch(_e){Tn(c,c.return,_e)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function C7(c,h,x){Dt=c,cE(c)}function cE(c,h,x){for(var j=(c.mode&1)!==0;Dt!==null;){var T=Dt,R=T.child;if(T.tag===22&&j){var te=T.memoizedState!==null||Kf;if(!te){var xe=T.alternate,_e=xe!==null&&xe.memoizedState!==null||La;xe=Kf;var Ue=La;if(Kf=te,(La=_e)&&!Ue)for(Dt=T;Dt!==null;)te=Dt,_e=te.child,te.tag===22&&te.memoizedState!==null?hE(T):_e!==null?(_e.return=te,Dt=_e):hE(T);for(;R!==null;)Dt=R,cE(R),R=R.sibling;Dt=T,Kf=xe,La=Ue}dE(c)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,Dt=R):dE(c)}}function dE(c){for(;Dt!==null;){var h=Dt;if((h.flags&8772)!==0){var x=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:La||Vf(5,h);break;case 1:var j=h.stateNode;if(h.flags&4&&!La)if(x===null)j.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:di(h.type,x.memoizedProps);j.componentDidUpdate(T,x.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var R=h.updateQueue;R!==null&&u_(h,R,j);break;case 3:var te=h.updateQueue;if(te!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=h.child.stateNode;break;case 1:x=h.child.stateNode}u_(h,te,x)}break;case 5:var xe=h.stateNode;if(x===null&&h.flags&4){x=xe;var _e=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&x.focus();break;case"img":_e.src&&(x.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ue=h.alternate;if(Ue!==null){var dt=Ue.memoizedState;if(dt!==null){var ft=dt.dehydrated;ft!==null&&Zr(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}La||h.flags&512&&wy(h)}catch(lt){Tn(h,h.return,lt)}}if(h===c){Dt=null;break}if(x=h.sibling,x!==null){x.return=h.return,Dt=x;break}Dt=h.return}}function uE(c){for(;Dt!==null;){var h=Dt;if(h===c){Dt=null;break}var x=h.sibling;if(x!==null){x.return=h.return,Dt=x;break}Dt=h.return}}function hE(c){for(;Dt!==null;){var h=Dt;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{Vf(4,h)}catch(_e){Tn(h,x,_e)}break;case 1:var j=h.stateNode;if(typeof j.componentDidMount=="function"){var T=h.return;try{j.componentDidMount()}catch(_e){Tn(h,T,_e)}}var R=h.return;try{wy(h)}catch(_e){Tn(h,R,_e)}break;case 5:var te=h.return;try{wy(h)}catch(_e){Tn(h,te,_e)}}}catch(_e){Tn(h,h.return,_e)}if(h===c){Dt=null;break}var xe=h.sibling;if(xe!==null){xe.return=h.return,Dt=xe;break}Dt=h.return}}var A7=Math.ceil,Gf=A.ReactCurrentDispatcher,ky=A.ReactCurrentOwner,Ws=A.ReactCurrentBatchConfig,Fr=0,ga=null,Wn=null,_a=0,Ss=0,td=zo(0),aa=0,Zu=null,Ml=0,Yf=0,Sy=0,eh=null,ms=null,_y=0,rd=1/0,ho=null,Xf=!1,Ey=null,Xo=null,Jf=!1,Jo=null,Qf=0,th=0,Cy=null,Zf=-1,em=0;function ts(){return(Fr&6)!==0?Ge():Zf!==-1?Zf:Zf=Ge()}function Qo(c){return(c.mode&1)===0?1:(Fr&2)!==0&&_a!==0?_a&-_a:h7.transition!==null?(em===0&&(em=Se()),em):(c=pe,c!==0||(c=window.event,c=c===void 0?16:no(c.type)),c)}function fi(c,h,x,j){if(50<th)throw th=0,Cy=null,Error(r(185));he(c,x,j),((Fr&2)===0||c!==ga)&&(c===ga&&((Fr&2)===0&&(Yf|=x),aa===4&&Zo(c,_a)),ps(c,j),x===1&&Fr===0&&(h.mode&1)===0&&(rd=Ge()+500,Cf&&Ko()))}function ps(c,h){var x=c.callbackNode;tr(c,h);var j=Nn(c,c===ga?_a:0);if(j===0)x!==null&&Ve(x),c.callbackNode=null,c.callbackPriority=0;else if(h=j&-j,c.callbackPriority!==h){if(x!=null&&Ve(x),h===1)c.tag===0?u7(mE.bind(null,c)):ZS(mE.bind(null,c)),o7(function(){(Fr&6)===0&&Ko()}),x=null;else{switch(Le(j)){case 1:x=Yt;break;case 4:x=Xt;break;case 16:x=wr;break;case 536870912:x=ln;break;default:x=wr}x=jE(x,fE.bind(null,c))}c.callbackPriority=h,c.callbackNode=x}}function fE(c,h){if(Zf=-1,em=0,(Fr&6)!==0)throw Error(r(327));var x=c.callbackNode;if(nd()&&c.callbackNode!==x)return null;var j=Nn(c,c===ga?_a:0);if(j===0)return null;if((j&30)!==0||(j&c.expiredLanes)!==0||h)h=tm(c,j);else{h=j;var T=Fr;Fr|=2;var R=gE();(ga!==c||_a!==h)&&(ho=null,rd=Ge()+500,Fl(c,h));do try{P7();break}catch(xe){pE(c,xe)}while(!0);Kx(),Gf.current=R,Fr=T,Wn!==null?h=0:(ga=null,_a=0,h=aa)}if(h!==0){if(h===2&&(T=K(c),T!==0&&(j=T,h=Ay(c,T))),h===1)throw x=Zu,Fl(c,0),Zo(c,j),ps(c,Ge()),x;if(h===6)Zo(c,j);else{if(T=c.current.alternate,(j&30)===0&&!T7(T)&&(h=tm(c,j),h===2&&(R=K(c),R!==0&&(j=R,h=Ay(c,R))),h===1))throw x=Zu,Fl(c,0),Zo(c,j),ps(c,Ge()),x;switch(c.finishedWork=T,c.finishedLanes=j,h){case 0:case 1:throw Error(r(345));case 2:$l(c,ms,ho);break;case 3:if(Zo(c,j),(j&130023424)===j&&(h=_y+500-Ge(),10<h)){if(Nn(c,0)!==0)break;if(T=c.suspendedLanes,(T&j)!==j){ts(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=Mx($l.bind(null,c,ms,ho),h);break}$l(c,ms,ho);break;case 4:if(Zo(c,j),(j&4194240)===j)break;for(h=c.eventTimes,T=-1;0<j;){var te=31-Ee(j);R=1<<te,te=h[te],te>T&&(T=te),j&=~R}if(j=T,j=Ge()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*A7(j/1960))-j,10<j){c.timeoutHandle=Mx($l.bind(null,c,ms,ho),j);break}$l(c,ms,ho);break;case 5:$l(c,ms,ho);break;default:throw Error(r(329))}}}return ps(c,Ge()),c.callbackNode===x?fE.bind(null,c):null}function Ay(c,h){var x=eh;return c.current.memoizedState.isDehydrated&&(Fl(c,h).flags|=256),c=tm(c,h),c!==2&&(h=ms,ms=x,h!==null&&Ty(h)),c}function Ty(c){ms===null?ms=c:ms.push.apply(ms,c)}function T7(c){for(var h=c;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var j=0;j<x.length;j++){var T=x[j],R=T.getSnapshot;T=T.value;try{if(!li(R(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Zo(c,h){for(h&=~Sy,h&=~Yf,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var x=31-Ee(h),j=1<<x;c[x]=-1,h&=~j}}function mE(c){if((Fr&6)!==0)throw Error(r(327));nd();var h=Nn(c,0);if((h&1)===0)return ps(c,Ge()),null;var x=tm(c,h);if(c.tag!==0&&x===2){var j=K(c);j!==0&&(h=j,x=Ay(c,j))}if(x===1)throw x=Zu,Fl(c,0),Zo(c,h),ps(c,Ge()),x;if(x===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,$l(c,ms,ho),ps(c,Ge()),null}function Oy(c,h){var x=Fr;Fr|=1;try{return c(h)}finally{Fr=x,Fr===0&&(rd=Ge()+500,Cf&&Ko())}}function Rl(c){Jo!==null&&Jo.tag===0&&(Fr&6)===0&&nd();var h=Fr;Fr|=1;var x=Ws.transition,j=pe;try{if(Ws.transition=null,pe=1,c)return c()}finally{pe=j,Ws.transition=x,Fr=h,(Fr&6)===0&&Ko()}}function Py(){Ss=td.current,bn(td)}function Fl(c,h){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,i7(x)),Wn!==null)for(x=Wn.return;x!==null;){var j=x;switch(Ux(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&_f();break;case 3:Qc(),bn(us),bn(Ra),ey();break;case 5:Qx(j);break;case 4:Qc();break;case 13:bn(Cn);break;case 19:bn(Cn);break;case 10:Vx(j.type._context);break;case 22:case 23:Py()}x=x.return}if(ga=c,Wn=c=el(c.current,null),_a=Ss=h,aa=0,Zu=null,Sy=Yf=Ml=0,ms=eh=null,Pl!==null){for(h=0;h<Pl.length;h++)if(x=Pl[h],j=x.interleaved,j!==null){x.interleaved=null;var T=j.next,R=x.pending;if(R!==null){var te=R.next;R.next=T,j.next=te}x.pending=j}Pl=null}return c}function pE(c,h){do{var x=Wn;try{if(Kx(),$f.current=Hf,Lf){for(var j=An.memoizedState;j!==null;){var T=j.queue;T!==null&&(T.pending=null),j=j.next}Lf=!1}if(Dl=0,pa=na=An=null,Vu=!1,Gu=0,ky.current=null,x===null||x.return===null){aa=1,Zu=h,Wn=null;break}e:{var R=c,te=x.return,xe=x,_e=h;if(h=_a,xe.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Ue=_e,dt=xe,ft=dt.tag;if((dt.mode&1)===0&&(ft===0||ft===11||ft===15)){var lt=dt.alternate;lt?(dt.updateQueue=lt.updateQueue,dt.memoizedState=lt.memoizedState,dt.lanes=lt.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var It=B_(te);if(It!==null){It.flags&=-257,U_(It,te,xe,R,h),It.mode&1&&L_(R,Ue,h),h=It,_e=Ue;var Rt=h.updateQueue;if(Rt===null){var Lt=new Set;Lt.add(_e),h.updateQueue=Lt}else Rt.add(_e);break e}else{if((h&1)===0){L_(R,Ue,h),Iy();break e}_e=Error(r(426))}}else if(kn&&xe.mode&1){var $n=B_(te);if($n!==null){($n.flags&65536)===0&&($n.flags|=256),U_($n,te,xe,R,h),zx(Zc(_e,xe));break e}}R=_e=Zc(_e,xe),aa!==4&&(aa=2),eh===null?eh=[R]:eh.push(R),R=te;do{switch(R.tag){case 3:R.flags|=65536,h&=-h,R.lanes|=h;var Me=F_(R,_e,h);d_(R,Me);break e;case 1:xe=_e;var Ae=R.type,Fe=R.stateNode;if((R.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Xo===null||!Xo.has(Fe)))){R.flags|=65536,h&=-h,R.lanes|=h;var vt=$_(R,xe,h);d_(R,vt);break e}}R=R.return}while(R!==null)}yE(x)}catch(Ht){h=Ht,Wn===x&&x!==null&&(Wn=x=x.return);continue}break}while(!0)}function gE(){var c=Gf.current;return Gf.current=Hf,c===null?Hf:c}function Iy(){(aa===0||aa===3||aa===2)&&(aa=4),ga===null||(Ml&268435455)===0&&(Yf&268435455)===0||Zo(ga,_a)}function tm(c,h){var x=Fr;Fr|=2;var j=gE();(ga!==c||_a!==h)&&(ho=null,Fl(c,h));do try{O7();break}catch(T){pE(c,T)}while(!0);if(Kx(),Fr=x,Gf.current=j,Wn!==null)throw Error(r(261));return ga=null,_a=0,aa}function O7(){for(;Wn!==null;)xE(Wn)}function P7(){for(;Wn!==null&&!Qe();)xE(Wn)}function xE(c){var h=wE(c.alternate,c,Ss);c.memoizedProps=c.pendingProps,h===null?yE(c):Wn=h,ky.current=null}function yE(c){var h=c;do{var x=h.alternate;if(c=h.return,(h.flags&32768)===0){if(x=k7(x,h,Ss),x!==null){Wn=x;return}}else{if(x=S7(x,h),x!==null){x.flags&=32767,Wn=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{aa=6,Wn=null;return}}if(h=h.sibling,h!==null){Wn=h;return}Wn=h=c}while(h!==null);aa===0&&(aa=5)}function $l(c,h,x){var j=pe,T=Ws.transition;try{Ws.transition=null,pe=1,I7(c,h,x,j)}finally{Ws.transition=T,pe=j}return null}function I7(c,h,x,j){do nd();while(Jo!==null);if((Fr&6)!==0)throw Error(r(327));x=c.finishedWork;var T=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var R=x.lanes|x.childLanes;if(ve(c,R),c===ga&&(Wn=ga=null,_a=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Jf||(Jf=!0,jE(wr,function(){return nd(),null})),R=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||R){R=Ws.transition,Ws.transition=null;var te=pe;pe=1;var xe=Fr;Fr|=4,ky.current=null,E7(c,x),lE(x,c),Z8(Ix),ra=!!Px,Ix=Px=null,c.current=x,C7(x),Ke(),Fr=xe,pe=te,Ws.transition=R}else c.current=x;if(Jf&&(Jf=!1,Jo=c,Qf=T),R=c.pendingLanes,R===0&&(Xo=null),ue(x.stateNode),ps(c,Ge()),h!==null)for(j=c.onRecoverableError,x=0;x<h.length;x++)T=h[x],j(T.value,{componentStack:T.stack,digest:T.digest});if(Xf)throw Xf=!1,c=Ey,Ey=null,c;return(Qf&1)!==0&&c.tag!==0&&nd(),R=c.pendingLanes,(R&1)!==0?c===Cy?th++:(th=0,Cy=c):th=0,Ko(),null}function nd(){if(Jo!==null){var c=Le(Qf),h=Ws.transition,x=pe;try{if(Ws.transition=null,pe=16>c?16:c,Jo===null)var j=!1;else{if(c=Jo,Jo=null,Qf=0,(Fr&6)!==0)throw Error(r(331));var T=Fr;for(Fr|=4,Dt=c.current;Dt!==null;){var R=Dt,te=R.child;if((Dt.flags&16)!==0){var xe=R.deletions;if(xe!==null){for(var _e=0;_e<xe.length;_e++){var Ue=xe[_e];for(Dt=Ue;Dt!==null;){var dt=Dt;switch(dt.tag){case 0:case 11:case 15:Qu(8,dt,R)}var ft=dt.child;if(ft!==null)ft.return=dt,Dt=ft;else for(;Dt!==null;){dt=Dt;var lt=dt.sibling,It=dt.return;if(nE(dt),dt===Ue){Dt=null;break}if(lt!==null){lt.return=It,Dt=lt;break}Dt=It}}}var Rt=R.alternate;if(Rt!==null){var Lt=Rt.child;if(Lt!==null){Rt.child=null;do{var $n=Lt.sibling;Lt.sibling=null,Lt=$n}while(Lt!==null)}}Dt=R}}if((R.subtreeFlags&2064)!==0&&te!==null)te.return=R,Dt=te;else e:for(;Dt!==null;){if(R=Dt,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Qu(9,R,R.return)}var Me=R.sibling;if(Me!==null){Me.return=R.return,Dt=Me;break e}Dt=R.return}}var Ae=c.current;for(Dt=Ae;Dt!==null;){te=Dt;var Fe=te.child;if((te.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=te,Dt=Fe;else e:for(te=Ae;Dt!==null;){if(xe=Dt,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:Vf(9,xe)}}catch(Ht){Tn(xe,xe.return,Ht)}if(xe===te){Dt=null;break e}var vt=xe.sibling;if(vt!==null){vt.return=xe.return,Dt=vt;break e}Dt=xe.return}}if(Fr=T,Ko(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(Ze,c)}catch{}j=!0}return j}finally{pe=x,Ws.transition=h}}return!1}function vE(c,h,x){h=Zc(x,h),h=F_(c,h,1),c=Go(c,h,1),h=ts(),c!==null&&(he(c,1,h),ps(c,h))}function Tn(c,h,x){if(c.tag===3)vE(c,c,x);else for(;h!==null;){if(h.tag===3){vE(h,c,x);break}else if(h.tag===1){var j=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Xo===null||!Xo.has(j))){c=Zc(x,c),c=$_(h,c,1),h=Go(h,c,1),c=ts(),h!==null&&(he(h,1,c),ps(h,c));break}}h=h.return}}function D7(c,h,x){var j=c.pingCache;j!==null&&j.delete(h),h=ts(),c.pingedLanes|=c.suspendedLanes&x,ga===c&&(_a&x)===x&&(aa===4||aa===3&&(_a&130023424)===_a&&500>Ge()-_y?Fl(c,0):Sy|=x),ps(c,h)}function bE(c,h){h===0&&((c.mode&1)===0?h=1:(h=ut,ut<<=1,(ut&130023424)===0&&(ut=4194304)));var x=ts();c=lo(c,h),c!==null&&(he(c,h,x),ps(c,x))}function M7(c){var h=c.memoizedState,x=0;h!==null&&(x=h.retryLane),bE(c,x)}function R7(c,h){var x=0;switch(c.tag){case 13:var j=c.stateNode,T=c.memoizedState;T!==null&&(x=T.retryLane);break;case 19:j=c.stateNode;break;default:throw Error(r(314))}j!==null&&j.delete(h),bE(c,x)}var wE;wE=function(c,h,x){if(c!==null)if(c.memoizedProps!==h.pendingProps||us.current)fs=!0;else{if((c.lanes&x)===0&&(h.flags&128)===0)return fs=!1,N7(c,h,x);fs=(c.flags&131072)!==0}else fs=!1,kn&&(h.flags&1048576)!==0&&e_(h,Tf,h.index);switch(h.lanes=0,h.tag){case 2:var j=h.type;Wf(c,h),c=h.pendingProps;var T=Wc(h,Ra.current);Jc(h,x),T=ny(null,h,j,c,T,x);var R=ay();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,hs(j)?(R=!0,Ef(h)):R=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Xx(h),T.updater=qf,h.stateNode=T,T._reactInternals=h,dy(h,j,c,x),h=my(null,h,j,!0,R,x)):(h.tag=0,kn&&R&&Bx(h),es(null,h,T,x),h=h.child),h;case 16:j=h.elementType;e:{switch(Wf(c,h),c=h.pendingProps,T=j._init,j=T(j._payload),h.type=j,T=h.tag=$7(j),c=di(j,c),T){case 0:h=fy(null,h,j,c,x);break e;case 1:h=V_(null,h,j,c,x);break e;case 11:h=H_(null,h,j,c,x);break e;case 14:h=q_(null,h,j,di(j.type,c),x);break e}throw Error(r(306,j,""))}return h;case 0:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:di(j,T),fy(c,h,j,T,x);case 1:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:di(j,T),V_(c,h,j,T,x);case 3:e:{if(G_(h),c===null)throw Error(r(387));j=h.pendingProps,R=h.memoizedState,T=R.element,c_(c,h),Rf(h,j,null,x);var te=h.memoizedState;if(j=te.element,R.isDehydrated)if(R={element:j,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){T=Zc(Error(r(423)),h),h=Y_(c,h,j,x,T);break e}else if(j!==T){T=Zc(Error(r(424)),h),h=Y_(c,h,j,x,T);break e}else for(ks=qo(h.stateNode.containerInfo.firstChild),Ns=h,kn=!0,ci=null,x=o_(h,null,j,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Gc(),j===T){h=uo(c,h,x);break e}es(c,h,j,x)}h=h.child}return h;case 5:return h_(h),c===null&&qx(h),j=h.type,T=h.pendingProps,R=c!==null?c.memoizedProps:null,te=T.children,Dx(j,T)?te=null:R!==null&&Dx(j,R)&&(h.flags|=32),K_(c,h),es(c,h,te,x),h.child;case 6:return c===null&&qx(h),null;case 13:return X_(c,h,x);case 4:return Jx(h,h.stateNode.containerInfo),j=h.pendingProps,c===null?h.child=Yc(h,null,j,x):es(c,h,j,x),h.child;case 11:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:di(j,T),H_(c,h,j,T,x);case 7:return es(c,h,h.pendingProps,x),h.child;case 8:return es(c,h,h.pendingProps.children,x),h.child;case 12:return es(c,h,h.pendingProps.children,x),h.child;case 10:e:{if(j=h.type._context,T=h.pendingProps,R=h.memoizedProps,te=T.value,dn(If,j._currentValue),j._currentValue=te,R!==null)if(li(R.value,te)){if(R.children===T.children&&!us.current){h=uo(c,h,x);break e}}else for(R=h.child,R!==null&&(R.return=h);R!==null;){var xe=R.dependencies;if(xe!==null){te=R.child;for(var _e=xe.firstContext;_e!==null;){if(_e.context===j){if(R.tag===1){_e=co(-1,x&-x),_e.tag=2;var Ue=R.updateQueue;if(Ue!==null){Ue=Ue.shared;var dt=Ue.pending;dt===null?_e.next=_e:(_e.next=dt.next,dt.next=_e),Ue.pending=_e}}R.lanes|=x,_e=R.alternate,_e!==null&&(_e.lanes|=x),Gx(R.return,x,h),xe.lanes|=x;break}_e=_e.next}}else if(R.tag===10)te=R.type===h.type?null:R.child;else if(R.tag===18){if(te=R.return,te===null)throw Error(r(341));te.lanes|=x,xe=te.alternate,xe!==null&&(xe.lanes|=x),Gx(te,x,h),te=R.sibling}else te=R.child;if(te!==null)te.return=R;else for(te=R;te!==null;){if(te===h){te=null;break}if(R=te.sibling,R!==null){R.return=te.return,te=R;break}te=te.return}R=te}es(c,h,T.children,x),h=h.child}return h;case 9:return T=h.type,j=h.pendingProps.children,Jc(h,x),T=qs(T),j=j(T),h.flags|=1,es(c,h,j,x),h.child;case 14:return j=h.type,T=di(j,h.pendingProps),T=di(j.type,T),q_(c,h,j,T,x);case 15:return z_(c,h,h.type,h.pendingProps,x);case 17:return j=h.type,T=h.pendingProps,T=h.elementType===j?T:di(j,T),Wf(c,h),h.tag=1,hs(j)?(c=!0,Ef(h)):c=!1,Jc(h,x),M_(h,j,T),dy(h,j,T,x),my(null,h,j,!0,c,x);case 19:return Q_(c,h,x);case 22:return W_(c,h,x)}throw Error(r(156,h.tag))};function jE(c,h){return De(c,h)}function F7(c,h,x,j){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(c,h,x,j){return new F7(c,h,x,j)}function Dy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function $7(c){if(typeof c=="function")return Dy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===X)return 14}return 2}function el(c,h){var x=c.alternate;return x===null?(x=Ks(c.tag,h,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=h,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,h=c.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function rm(c,h,x,j,T,R){var te=2;if(j=c,typeof c=="function")Dy(c)&&(te=1);else if(typeof c=="string")te=5;else e:switch(c){case E:return Ll(x.children,T,R,h);case C:te=8,T|=8;break;case I:return c=Ks(12,x,h,T|2),c.elementType=I,c.lanes=R,c;case U:return c=Ks(13,x,h,T),c.elementType=U,c.lanes=R,c;case ie:return c=Ks(19,x,h,T),c.elementType=ie,c.lanes=R,c;case oe:return nm(x,T,R,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:te=10;break e;case M:te=9;break e;case O:te=11;break e;case X:te=14;break e;case re:te=16,j=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Ks(te,x,h,T),h.elementType=c,h.type=j,h.lanes=R,h}function Ll(c,h,x,j){return c=Ks(7,c,j,h),c.lanes=x,c}function nm(c,h,x,j){return c=Ks(22,c,j,h),c.elementType=oe,c.lanes=x,c.stateNode={isHidden:!1},c}function My(c,h,x){return c=Ks(6,c,null,h),c.lanes=x,c}function Ry(c,h,x){return h=Ks(4,c.children!==null?c.children:[],c.key,h),h.lanes=x,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function L7(c,h,x,j,T){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=be(0),this.expirationTimes=be(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.identifierPrefix=j,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function Fy(c,h,x,j,T,R,te,xe,_e){return c=new L7(c,h,x,xe,_e),h===1?(h=1,R===!0&&(h|=8)):h=0,R=Ks(3,null,null,h),c.current=R,R.stateNode=c,R.memoizedState={element:j,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xx(R),c}function B7(c,h,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:j==null?null:""+j,children:c,containerInfo:h,implementation:x}}function NE(c){if(!c)return Wo;c=c._reactInternals;e:{if(W(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(hs(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var x=c.type;if(hs(x))return JS(c,x,h)}return h}function kE(c,h,x,j,T,R,te,xe,_e){return c=Fy(x,j,!0,c,T,R,te,xe,_e),c.context=NE(null),x=c.current,j=ts(),T=Qo(x),R=co(j,T),R.callback=h??null,Go(x,R,T),c.current.lanes=T,he(c,T,j),ps(c,j),c}function am(c,h,x,j){var T=h.current,R=ts(),te=Qo(T);return x=NE(x),h.context===null?h.context=x:h.pendingContext=x,h=co(R,te),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=Go(T,h,te),c!==null&&(fi(c,T,te,R),Mf(c,T,te)),te}function sm(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function SE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<h?x:h}}function $y(c,h){SE(c,h),(c=c.alternate)&&SE(c,h)}function U7(){return null}var _E=typeof reportError=="function"?reportError:function(c){console.error(c)};function Ly(c){this._internalRoot=c}im.prototype.render=Ly.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));am(c,h,null,null)},im.prototype.unmount=Ly.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Rl(function(){am(null,c,null,null)}),h[ao]=null}};function im(c){this._internalRoot=c}im.prototype.unstable_scheduleHydration=function(c){if(c){var h=rr();c={blockedOn:null,target:c,priority:h};for(var x=0;x<Nt.length&&h!==0&&h<Nt[x].priority;x++);Nt.splice(x,0,c),x===0&&zt(c)}};function By(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function om(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function EE(){}function H7(c,h,x,j,T){if(T){if(typeof j=="function"){var R=j;j=function(){var Ue=sm(te);R.call(Ue)}}var te=kE(h,j,c,0,null,!1,!1,"",EE);return c._reactRootContainer=te,c[ao]=te.current,Lu(c.nodeType===8?c.parentNode:c),Rl(),te}for(;T=c.lastChild;)c.removeChild(T);if(typeof j=="function"){var xe=j;j=function(){var Ue=sm(_e);xe.call(Ue)}}var _e=Fy(c,0,!1,null,null,!1,!1,"",EE);return c._reactRootContainer=_e,c[ao]=_e.current,Lu(c.nodeType===8?c.parentNode:c),Rl(function(){am(h,_e,x,j)}),_e}function lm(c,h,x,j,T){var R=x._reactRootContainer;if(R){var te=R;if(typeof T=="function"){var xe=T;T=function(){var _e=sm(te);xe.call(_e)}}am(h,te,c,T)}else te=H7(x,h,c,T,j);return sm(te)}Xe=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var x=Yr(h.pendingLanes);x!==0&&(je(h,x|1),ps(h,Ge()),(Fr&6)===0&&(rd=Ge()+500,Ko()))}break;case 13:Rl(function(){var j=lo(c,1);if(j!==null){var T=ts();fi(j,c,1,T)}}),$y(c,1)}},at=function(c){if(c.tag===13){var h=lo(c,134217728);if(h!==null){var x=ts();fi(h,c,134217728,x)}$y(c,134217728)}},et=function(c){if(c.tag===13){var h=Qo(c),x=lo(c,h);if(x!==null){var j=ts();fi(x,c,h,j)}$y(c,h)}},rr=function(){return pe},sr=function(c,h){var x=pe;try{return pe=c,h()}finally{pe=x}},Tt=function(c,h,x){switch(h){case"input":if(Pe(c,x),h=x.name,x.type==="radio"&&h!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<x.length;h++){var j=x[h];if(j!==c&&j.form===c.form){var T=Sf(j);if(!T)throw Error(r(90));G(j),Pe(j,T)}}}break;case"textarea":Jt(c,x);break;case"select":h=x.value,h!=null&&pt(c,!!x.multiple,h,!1)}},Bt=Oy,Ut=Rl;var q7={usingClientEntryPoint:!1,Events:[Hu,qc,Sf,tn,Rn,Oy]},rh={findFiberByHostInstance:Cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z7={bundleType:rh.bundleType,version:rh.version,rendererPackageName:rh.rendererPackageName,rendererConfig:rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=le(c),c===null?null:c.stateNode},findFiberByHostInstance:rh.findFiberByHostInstance||U7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{Ze=cm.inject(z7),Lr=cm}catch{}}return gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q7,gs.createPortal=function(c,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!By(h))throw Error(r(200));return B7(c,h,null,x)},gs.createRoot=function(c,h){if(!By(c))throw Error(r(299));var x=!1,j="",T=_E;return h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(T=h.onRecoverableError)),h=Fy(c,1,!1,null,null,x,!1,j,T),c[ao]=h.current,Lu(c.nodeType===8?c.parentNode:c),new Ly(h)},gs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=le(h),c=c===null?null:c.stateNode,c},gs.flushSync=function(c){return Rl(c)},gs.hydrate=function(c,h,x){if(!om(h))throw Error(r(200));return lm(null,c,h,!0,x)},gs.hydrateRoot=function(c,h,x){if(!By(c))throw Error(r(405));var j=x!=null&&x.hydratedSources||null,T=!1,R="",te=_E;if(x!=null&&(x.unstable_strictMode===!0&&(T=!0),x.identifierPrefix!==void 0&&(R=x.identifierPrefix),x.onRecoverableError!==void 0&&(te=x.onRecoverableError)),h=kE(h,null,c,1,x??null,T,!1,R,te),c[ao]=h.current,Lu(c),j)for(c=0;c<j.length;c++)x=j[c],T=x._getVersion,T=T(x._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[x,T]:h.mutableSourceEagerHydrationData.push(x,T);return new im(h)},gs.render=function(c,h,x){if(!om(h))throw Error(r(200));return lm(null,c,h,!1,x)},gs.unmountComponentAtNode=function(c){if(!om(c))throw Error(r(40));return c._reactRootContainer?(Rl(function(){lm(null,null,c,!1,function(){c._reactRootContainer=null,c[ao]=null})}),!0):!1},gs.unstable_batchedUpdates=Oy,gs.unstable_renderSubtreeIntoContainer=function(c,h,x,j){if(!om(x))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return lm(c,h,x,!1,j)},gs.version="18.3.1-next-f1338f8080-20240426",gs}var ME;function HI(){if(ME)return qy.exports;ME=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qy.exports=Q7(),qy.exports}var RE;function Z7(){if(RE)return um;RE=1;var e=HI();return um.createRoot=e.createRoot,um.hydrateRoot=e.hydrateRoot,um}var e9=Z7(),P=b2();const ye=Gr(P),t9=K7({__proto__:null,default:ye},[P]),mg={fresh_produce:" Fresh Vegetables",spices_seasonings:" Grocery",dairy:" Dairy Products",meat:" Meat",packaging:" Packaging Materials",staff_essentials:" Staff Essentials"},FE={fresh_produce:["Tomato","Capsicum","Onion","Cabbage","Gandhoraj Lemon","Lemon","Pudina","Coriander Leaves","Garlic","Green Chilli","Ginger","Red Chilli","Carrot","Potato"],spices_seasonings:["Soya Sauce","Chilli Sauce","Vinegar","Oil","Salt","Sugar","Ajinomoto","Black Pepper","White Pepper","Peri Peri Masala","Baking Powder","Corn Flour","Maida"],dairy:["Butter","Cheese"],meat:["Chicken"],packaging:["Butter Paper","Carry Bag","Container","Tissue Paper"],staff_essentials:["Labour","Cleaning","Water","Electricity"]},w2={fuel:" Fuel Cost",travel:" Travel by Employee",transportation:" Goods Transportation Cost",marketing:" Marketing Cost",service_charge:" Service Charge (Food Aggregators)",repair:" Repair Cost",party:" Party Cost",lunch:" Lunch Cost",emergency_online:" Emergency Online Order (Blinkit)",personal_expense:" Personal Expense By an Employee",utensils:" Utensils",equipments:" Equipments",license:" License Cost",water_jar:" Water Jar",miscellaneous:" Miscellaneous Cost"},j2={electricity:" Electricity",rent:" Rent",lpg_gas:" LPG Gas Cost (Cylinders)"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n9=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),$E=e=>{const t=n9(e);return t.charAt(0).toUpperCase()+t.slice(1)},qI=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},d)=>P.createElement("svg",{ref:d,...a9,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:qI("lucide",s),...l},[...o.map(([u,f])=>P.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(e,t)=>{const r=P.forwardRef(({className:a,...s},i)=>P.createElement(s9,{ref:i,iconNode:t,className:qI(`lucide-${r9($E(e))}`,`lucide-${e}`,a),...s}));return r.displayName=$E(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xj=yt("activity",i9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],LE=yt("arrow-down",o9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Ky=yt("arrow-right-left",l9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],d9=yt("arrow-right",c9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],BE=yt("arrow-up",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],UE=yt("award",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yj=yt("bell",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],p9=yt("box",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Km=yt("briefcase",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],HE=yt("bug",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],fl=yt("building-2",y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Or=yt("calendar",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],N2=yt("chart-column",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bo=yt("check",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],N9=yt("chef-hat",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Y0=yt("chevron-down",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vj=yt("chevron-left",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ml=yt("chevron-right",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zI=yt("chevron-up",E9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],A9=yt("circle-arrow-down",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nr=yt("circle-alert",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],qE=yt("circle-arrow-up",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],or=yt("circle-check-big",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Qn=yt("circle-x",I9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],zE=yt("clipboard-check",D9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],R9=yt("clipboard-list",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],_n=yt("clock",F9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L9=yt("copy",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],pl=yt("credit-card",B9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ph=yt("database",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jn=yt("dollar-sign",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Os=yt("download",q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],W9=yt("droplet",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],V9=yt("eraser",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xo=yt("eye",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],Hn=yt("factory",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Vm=yt("file-spreadsheet",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fs=yt("file-text",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Z9=yt("hard-drive",Q9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tB=yt("hash",eB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nB=yt("info",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],sB=yt("key-round",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],oB=yt("key",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],cB=yt("layers",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Eo=yt("loader-circle",dB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],hB=yt("loader",uB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bj=yt("lock",fB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],pB=yt("log-in",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],gh=yt("log-out",gB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Wh=yt("mail",xB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],k2=yt("map-pin",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],WE=yt("menu",vB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M5 12h14",key:"1ays0h"}]],wB=yt("minus",bB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],WI=yt("network",jB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],dr=yt("package",NB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Li=yt("pen",kB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],hm=yt("phone",SB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qi=yt("plus",_B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],CB=yt("receipt",EB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wo=yt("refresh-cw",AB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vi=yt("save",TB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],KI=yt("search",OB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gm=yt("send",PB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bi=yt("settings",IB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MB=yt("shield-check",DB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],KE=yt("shopping-bag",RB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],gd=yt("shopping-cart",FB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xh=yt("smartphone",$B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]],BB=yt("soup",LB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jo=yt("square-check-big",UB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wj=yt("square-pen",HB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Gi=yt("store",qB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],WB=yt("table",zB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],S2=yt("target",KB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Rs=yt("trash-2",VB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],uc=yt("trending-down",GB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],pn=yt("trending-up",YB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ja=yt("triangle-alert",XB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],jj=yt("trophy",JB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Vy=yt("truck",QB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Zl=yt("upload",ZB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],tU=yt("user-check",eU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],Ni=yt("user-cog",rU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ui=yt("user-plus",nU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],VE=yt("user-x",aU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Va=yt("user",sU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Dn=yt("users",iU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],lU=yt("utensils",oU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ji=yt("wallet",cU);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qr=yt("x",dU),Pa="xssxnhrzxvtejavoqgwg",Zn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhzc3huaHJ6eHZ0ZWphdm9xZ3dnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwODAzNjksImV4cCI6MjA4MTY1NjM2OX0.boONpQZ8Xv2AzlDylEoKnAlGEW7DFsMQ0zEQ1S5LPGE";function pg(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function uU(e,t,r,a){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{u(a.next(f))}catch(m){o(m)}}function d(f){try{u(a.throw(f))}catch(m){o(m)}}function u(f){f.done?i(f.value):s(f.value).then(l,d)}u((a=a.apply(e,t||[])).next())})}const hU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class _2 extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class fU extends _2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class GE extends _2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class YE extends _2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Nj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Nj||(Nj={}));class mU{constructor(t,{headers:r={},customFetch:a,region:s=Nj.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=hU(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return uU(this,arguments,void 0,function*(r,a={}){var s;let i,o;try{const{headers:l,method:d,body:u,signal:f,timeout:m}=a;let p={},{region:g}=a;g||(g=this.region);const b=new URL(`${this.url}/${r}`);g&&g!=="any"&&(p["x-region"]=g,b.searchParams.set("forceFunctionRegion",g));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(p["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(p["Content-Type"]="application/json",y=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?y=JSON.stringify(u):y=u;let v=f;m&&(o=new AbortController,i=setTimeout(()=>o.abort(),m),f?(v=o.signal,f.addEventListener("abort",()=>o.abort())):v=o.signal);const N=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:y,signal:v}).catch(S=>{throw new fU(S)}),k=N.headers.get("x-relay-error");if(k&&k==="true")throw new GE(N);if(!N.ok)throw new YE(N);let w=((s=N.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),A;return w==="application/json"?A=yield N.json():w==="application/octet-stream"||w==="application/pdf"?A=yield N.blob():w==="text/event-stream"?A=N:w==="multipart/form-data"?A=yield N.formData():A=yield N.text(),{data:A,error:null,response:N}}catch(l){return{data:null,error:l,response:l instanceof YE||l instanceof GE?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var pU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},gU=class{constructor(e){var t,r,a;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(a=e.urlLengthLimit)!==null&&a!==void 0?a:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,d=null,u=i.status,f=i.statusText;if(i.ok){var m,p;if(r.method!=="HEAD"){var g;const N=await i.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?l=N:l=JSON.parse(N))}const y=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),v=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&v&&v.length>1&&(d=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,d=null,u=406,f="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,f="OK")}catch{i.status===404&&y===""?(u=204,f="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,f="OK"),o&&r.shouldThrowOnError)throw new pU(o)}return{error:o,data:l,count:d,status:u,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="",d="",u="";const f=i?.cause;if(f){var m,p,g,b;const N=(m=f?.message)!==null&&m!==void 0?m:"",k=(p=f?.code)!==null&&p!==void 0?p:"";l=`${(g=i?.name)!==null&&g!==void 0?g:"FetchError"}: ${i?.message}`,l+=`

Caused by: ${(b=f?.name)!==null&&b!==void 0?b:"Error"}: ${N}`,k&&(l+=` (${k})`),f?.stack&&(l+=`
${f.stack}`)}else{var y;l=(y=i?.stack)!==null&&y!==void 0?y:""}const v=this.url.toString().length;return i?.name==="AbortError"||i?.code==="ABORT_ERR"?(u="",d="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(d+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(f?.name==="HeadersOverflowError"||f?.code==="UND_ERR_HEADERS_OVERFLOW")&&(u="",d="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(d+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:l,hint:d,code:u},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},xU=class extends gU{select(e){let t=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const XE=new RegExp("[,()]");var xd=class extends xU{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(a=>typeof a=="string"&&XE.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(a=>typeof a=="string"&&XE.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},yU=class{constructor(e,{headers:t={},schema:r,fetch:a,urlLengthLimit:s=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=a,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:a}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:d}=this.cloneRequestState();return l.searchParams.set("select",o),a&&d.append("Prefer",`count=${a}`),new xd({method:s,url:l,headers:d,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var a;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",d.join(","))}}return new xd({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),a&&d.append("Prefer",`count=${a}`),s||d.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(u.length>0){const f=[...new Set(u)].map(m=>`"${m}"`);l.searchParams.set("columns",f.join(","))}}return new xd({method:o,url:l,headers:d,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const a="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new xd({method:a,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:a,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new xd({method:r,url:a,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function vU(e,t){if(Kh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bU(e){var t=vU(e,"string");return Kh(t)=="symbol"?t:t+""}function wU(e,t,r){return(t=bU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(a){wU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var jU=class VI{constructor(t,{headers:r={},schema:a,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=a,this.urlLengthLimit=o;const l=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(d,u)=>{const f=new AbortController,m=setTimeout(()=>f.abort(),i),p=u?.signal;if(p){if(p.aborted)return clearTimeout(m),l(d,u);const g=()=>{clearTimeout(m),f.abort()};return p.addEventListener("abort",g,{once:!0}),l(d,fm(fm({},u),{},{signal:f.signal})).finally(()=>{clearTimeout(m),p.removeEventListener("abort",g)})}return l(d,fm(fm({},u),{},{signal:f.signal})).finally(()=>clearTimeout(m))}:this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new yU(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new VI(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:a=!1,get:s=!1,count:i}={}){var o;let l;const d=new URL(`${this.url}/rpc/${t}`);let u;const f=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(f)),m=a&&Object.values(r).some(f);m?(l="POST",u=r):a||s?(l=a?"HEAD":"GET",Object.entries(r).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{d.searchParams.append(g,b)})):(l="POST",u=r);const p=new Headers(this.headers);return m?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new xd({method:l,url:d,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class NU{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const s=a.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kU="2.94.1",SU=`realtime-js/${kU}`,_U="1.0.0",GI="2.0.0",QE=GI,kj=1e4,EU=1e3,CU=100;var al;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(al||(al={}));var la;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(la||(la={}));var vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vi||(vi={}));var Sj;(function(e){e.websocket="websocket"})(Sj||(Sj={}));var Yl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Yl||(Yl={}));class AU{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,a;const s=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,a;const s=(a=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,a){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",d=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,f=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(f).length===0?"":JSON.stringify(f);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+l.length+o.length+u.length+m.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let b=new DataView(g),y=0;b.setUint8(y++,this.KINDS.userBroadcastPush),b.setUint8(y++,d.length),b.setUint8(y++,l.length),b.setUint8(y++,o.length),b.setUint8(y++,u.length),b.setUint8(y++,m.length),b.setUint8(y++,r),Array.from(d,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(l,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(o,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(u,N=>b.setUint8(y++,N.charCodeAt(0))),Array.from(m,N=>b.setUint8(y++,N.charCodeAt(0)));var v=new Uint8Array(g.byteLength+a.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(a),g.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return r(a)}if(typeof t=="string"){const a=JSON.parse(t),[s,i,o,l,d]=a;return r({join_ref:s,ref:i,topic:o,event:l,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),a=r.getUint8(0),s=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,a){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let d=this.HEADER_LENGTH+4;const u=a.decode(t.slice(d,d+s));d=d+s;const f=a.decode(t.slice(d,d+i));d=d+i;const m=a.decode(t.slice(d,d+o));d=d+o;const p=t.slice(d,t.byteLength),g=l===this.JSON_ENCODING?JSON.parse(a.decode(p)):p,b={type:this.BROADCAST_EVENT,event:f,payload:g};return o>0&&(b.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>r.includes(a)))}}class YI{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var un;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(un||(un={}));const ZE=(e,t,r={})=>{var a;const s=(a=r.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=TU(o,e,t,s),i),{}):{}},TU=(e,t,r,a)=>{const s=t.find(l=>l.name===e),i=s?.type,o=r[e];return i&&!a.includes(i)?XI(i,o):_j(o)},XI=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return DU(t,r)}switch(e){case un.bool:return OU(t);case un.float4:case un.float8:case un.int2:case un.int4:case un.int8:case un.numeric:case un.oid:return PU(t);case un.json:case un.jsonb:return IU(t);case un.timestamp:return MU(t);case un.abstime:case un.date:case un.daterange:case un.int4range:case un.int8range:case un.money:case un.reltime:case un.text:case un.time:case un.timestamptz:case un.timetz:case un.tsrange:case un.tstzrange:return _j(t);default:return _j(t)}},_j=e=>e,OU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},IU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},DU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>XI(t,l))}return e},MU=e=>typeof e=="string"?e.replace(" ","T"):e,JI=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Gy{constructor(t,r,a={},s=kj){this.channel=t,this.event=r,this.payload=a,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eC;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eC||(eC={}));class Eh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eh.syncState(this.state,s,i,o),this.pendingDiffs.forEach(d=>{this.state=Eh.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Eh.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(u,f)=>{o[u]||(d[u]=f)}),this.map(o,(u,f)=>{const m=i[u];if(m){const p=f.map(v=>v.presence_ref),g=m.map(v=>v.presence_ref),b=f.filter(v=>g.indexOf(v.presence_ref)<0),y=m.filter(v=>p.indexOf(v.presence_ref)<0);b.length>0&&(l[u]=b),y.length>0&&(d[u]=y)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:d},a,s)}static syncDiff(t,r,a,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(d),f.length>0){const m=t[l].map(g=>g.presence_ref),p=f.filter(g=>m.indexOf(g.presence_ref)<0);t[l].unshift(...p)}a(l,f,d)}),this.map(o,(l,d)=>{let u=t[l];if(!u)return;const f=d.map(m=>m.presence_ref);u=u.filter(m=>f.indexOf(m.presence_ref)<0),t[l]=u,s(l,u,d),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const s=t[a];return"metas"in s?r[a]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tC;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tC||(tC={}));var Ch;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ch||(Ch={}));var po;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(po||(po={}));class wd{constructor(t,r={config:{}},a){var s,i;if(this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=la.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gy(this,vi.join,this.params,this.timeout),this.rejoinTimer=new YI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=la.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=la.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=la.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=la.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=la.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vi.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Eh(this),this.broadcastEndpointURL=JI(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var a,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==la.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,u=(s=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(g=>g.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Ch.PRESENCE]&&this.bindings[Ch.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(g=>t?.(po.CHANNEL_ERROR,g)),this._onClose(()=>t?.(po.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){t?.(po.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(b=y?.length)!==null&&b!==void 0?b:0,N=[];for(let k=0;k<v;k++){const w=y[k],{filter:{event:A,schema:S,table:_,filter:E}}=w,C=g&&g[k];if(C&&C.event===A&&wd.isFilterValueEqual(C.schema,S)&&wd.isFilterValueEqual(C.table,_)&&wd.isFilterValueEqual(C.filter,E))N.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=la.errored,t?.(po.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(po.SUBSCRIBED);return}}).receive("error",g=>{this.state=la.errored,t?.(po.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t?.(po.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===la.joined&&t===Ch.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,a)}async httpSend(t,r,a={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const u=await l.json();d=u.error||u.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var a,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=la.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vi.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(s=>{a=new Gy(this,vi.leave,{},t),a.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=la.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const s=new AbortController,i=setTimeout(()=>s.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gy(this,t,r,a);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>CU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:u,join:f}=vi;if(a&&[l,d,u,f].indexOf(o)>=0&&a!==this._joinRef())return;let p=this._onMessage(o,r,a);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var b,y,v;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(y=g.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(p,a)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var b,y,v,N,k,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const A=g.id,S=(b=g.filter)===null||b===void 0?void 0:b.event;return A&&((y=r.ids)===null||y===void 0?void 0:y.includes(A))&&(S==="*"||S?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const A=(k=(N=g?.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((w=r?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:y,table:v,commit_timestamp:N,type:k,errors:w}=b;p=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:N,eventType:k,new:{},old:{},errors:w}),this._getPayloadRecords(b))}g.callback(p,a)})}_isClosed(){return this.state===la.closed}_isJoined(){return this.state===la.joined}_isJoining(){return this.state===la.joining}_isLeaving(){return this.state===la.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:a};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&wd.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vi.close,{},t)}_onError(t){this._on(vi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=la.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ZE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ZE(t.columns,t.old_record)),r}}const Yy=()=>{},mm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RU=[1e3,2e3,5e3,1e4],FU=1e4,$U=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LU{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kj,this.transport=null,this.heartbeatIntervalMs=mm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yy,this.ref=0,this.reconnectTimer=null,this.vsn=QE,this.logger=Yy,this.conn=null,this.sendBuffer=[],this.serializer=new AU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Sj.websocket}`,this.httpEndpoint=JI(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=NU.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case al.connecting:return Yl.Connecting;case al.open:return Yl.Open;case al.closing:return Yl.Closing;default:return Yl.Closed}}isConnected(){return this.connectionState()===Yl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===a);if(s)return s;{const i=new wd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${a} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(EU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},mm.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${a} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===al.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===al.open||this.conn.readyState===al.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(vi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${a}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([$U],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,a=!1;if(t)r=t,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:SU};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(vi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new YI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,s,i,o,l,d,u,f,m,p,g;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:kj,this.heartbeatIntervalMs=(s=t?.heartbeatIntervalMs)!==null&&s!==void 0?s:mm.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:Yy,this.vsn=(d=t?.vsn)!==null&&d!==void 0?d:QE,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:(b=>RU[b-1]||FU),this.vsn){case _U:this.encode=(f=t?.encode)!==null&&f!==void 0?f:((b,y)=>y(JSON.stringify(b))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:((b,y)=>y(JSON.parse(b)));break;case GI:this.encode=(p=t?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=t?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Vh=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function BU(e,t,r){const a=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&a.searchParams.set(s,i);return a.toString()}async function UU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function HU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:s,body:i,headers:o}){const l=BU(e.baseUrl,a,s),d=await UU(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...d,...o},body:i?JSON.stringify(i):void 0}),f=await u.text(),m=(u.headers.get("content-type")||"").includes("application/json"),p=m&&f?JSON.parse(f):f;if(!u.ok){const g=m?p:void 0,b=g?.error;throw new Vh(b?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:b?.type,icebergCode:b?.code,details:g})}return{status:u.status,headers:u.headers,data:p}}}}function pm(e){return e.join("")}var qU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:pm(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pm(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pm(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pm(e.namespace)}`}),!0}catch(t){if(t instanceof Vh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Vh&&r.status===409)return;throw r}}};function ad(e){return e.join("")}var zU=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ad(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Vh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Vh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},WU=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=HU({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new qU(this.client,t),this.tableOps=new zU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},gg=class extends Error{constructor(e,t="storage",r,a){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=a}};function xg(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var gm=class extends gg{constructor(e,t,r,a="storage"){super(e,a,t,r),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},QI=class extends gg{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const KU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),VU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ej=e=>{if(Array.isArray(e))return e.map(r=>Ej(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ej(a)}),t},GU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}function YU(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XU(e){var t=YU(e,"string");return Gh(t)=="symbol"?t:t+""}function JU(e,t,r){return(t=XU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(a){JU(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const nC=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},QU=async(e,t,r,a)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new gm(nC(o),i,l,a))}).catch(()=>{if(a==="vectors"){const o=i+"";t(new gm(s.statusText||`HTTP ${i} error`,i,o,a))}else{const o=i+"";t(new gm(s.statusText||`HTTP ${i} error`,i,o,a))}});else{const o=i+"";t(new gm(s.statusText||`HTTP ${i} error`,i,o,a))}}else t(new QI(nC(e),e,a))},ZU=(e,t,r,a)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!a?mr(mr({},s),r):(VU(a)?(s.headers=mr({"Content-Type":"application/json"},t?.headers),s.body=JSON.stringify(a)):s.body=a,t?.duplex&&(s.duplex=t.duplex),mr(mr({},s),r))};async function ah(e,t,r,a,s,i,o){return new Promise((l,d)=>{e(r,ZU(t,a,s,i)).then(u=>{if(!u.ok)throw u;if(a?.noResolveJson)return u;if(o==="vectors"){const f=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!f||!f.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>QU(u,d,a,o))})}function ZI(e="storage"){return{get:async(t,r,a,s)=>ah(t,"GET",r,a,s,void 0,e),post:async(t,r,a,s,i)=>ah(t,"POST",r,s,i,a,e),put:async(t,r,a,s,i)=>ah(t,"PUT",r,s,i,a,e),head:async(t,r,a,s)=>ah(t,"HEAD",r,mr(mr({},a),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,a,s,i)=>ah(t,"DELETE",r,s,i,a,e)}}const eH=ZI("storage"),{get:Yh,post:yi,put:Cj,head:tH,remove:E2}=eH,Is=ZI("vectors");var uu=class{constructor(e,t={},r,a="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=KU(r),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}}},rH=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}}};let eD;eD=Symbol.toStringTag;var nH=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[eD]="BlobDownloadBuilder",this.promise=null}asStream(){return new rH(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}}};const aH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var sH=class extends uu{constructor(e,t={},r,a){super(e,t,a,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,a){var s=this;return s.handleOperation(async()=>{let i;const o=mr(mr({},aC),a);let l=mr(mr({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",s.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),d&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a?.headers&&(l=mr(mr({},l),a.headers));const u=s._removeEmptyFolders(t),f=s._getFinalPath(u),m=await(e=="PUT"?Cj:yi)(s.fetch,`${s.url}/object/${f}`,i,mr({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{path:u,id:m.Id,fullPath:m.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,a){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let d;const u=mr({upsert:aC.upsert},a),f=mr(mr({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType),{path:i,fullPath:(await Cj(s.fetch,l.toString(),d,{headers:f})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e);const s=mr({},r.headers);t?.upsert&&(s["x-upsert"]="true");const i=await yi(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new gg("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var a=this;return a.handleOperation(async()=>await yi(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:a.headers}))}async copy(e,t,r){var a=this;return a.handleOperation(async()=>({path:(await yi(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(e,t,r){var a=this;return a.handleOperation(async()=>{let s=a._getFinalPath(e),i=await yi(a.fetch,`${a.url}/object/sign/${s}`,mr({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:a.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${a.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var a=this;return a.handleOperation(async()=>{const s=await yi(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:t,paths:e},{headers:a.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>mr(mr({},o),{},{signedUrl:o.signedURL?encodeURI(`${a.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"",i=this._getFinalPath(e),o=()=>Yh(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new nH(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>Ej(await Yh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await tH(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(xg(a)&&a instanceof QI){const s=a.originalError;if([400,404].includes(s?.status))return{data:!1,error:a}}throw a}}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&a.push(s);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&a.push(o);let l=a.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await E2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var a=this;return a.handleOperation(async()=>{const s=mr(mr(mr({},aH),t),{},{prefix:e||""});return await yi(a.fetch,`${a.url}/object/list/${a.bucketId}`,s,{headers:a.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const a=mr({},e);return await yi(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const iH="2.94.1",X0={"X-Client-Info":`storage-js/${iH}`};var oH=class extends uu{constructor(e,t={},r,a){const s=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=mr(mr({},X0),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Yh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Yh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await yi(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await Cj(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await yi(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await E2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},lH=class extends uu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=mr(mr({},X0),t);super(a,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await yi(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const a=r.toString(),s=a?`${t.url}/bucket?${a}`:`${t.url}/bucket`;return await Yh(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await E2(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!GU(e))throw new gg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new WU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(d){if(a)throw d;return{data:null,error:d}}}}})}},cH=class extends uu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=mr(mr({},X0),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Is.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Is.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},dH=class extends uu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=mr(mr({},X0),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},uH=class extends uu{constructor(e,t={},r){const a=e.replace(/\/$/,""),s=mr(mr({},X0),{},{"Content-Type":"application/json"},t);super(a,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Is.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},hH=class extends uH{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new fH(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},fH=class extends cH{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new mH(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},mH=class extends dH{constructor(e,t,r,a,s){super(e,t,s),this.vectorBucketName=r,this.indexName=a}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,mr(mr({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},pH=class extends oH{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new sH(this.url,this.headers,e,this.fetch)}get vectors(){return new hH(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lH(this.url+"/iceberg",this.headers,this.fetch)}};const tD="2.94.1",yd=30*1e3,Aj=3,Xy=Aj*yd,gH="http://localhost:9999",xH="supabase.auth.token",yH={"X-Client-Info":`gotrue-js/${tD}`},Tj="X-Supabase-Api-Version",rD={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vH=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bH=600*1e3;class Xh extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Wt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wH extends Xh{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function jH(e){return Wt(e)&&e.name==="AuthApiError"}class Xl extends Xh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Fo extends Xh{constructor(t,r,a,s){super(t,a,s),this.name=r,this.status=a}}class Es extends Fo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jy(e){return Wt(e)&&e.name==="AuthSessionMissingError"}class sd extends Fo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xm extends Fo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ym extends Fo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NH(e){return Wt(e)&&e.name==="AuthImplicitGrantRedirectError"}class sC extends Fo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kH extends Fo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Oj extends Fo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Qy(e){return Wt(e)&&e.name==="AuthRetryableFetchError"}class iC extends Fo{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Pj extends Fo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ym="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oC=` 	
\r=`.split(""),SH=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oC.length;t+=1)e[oC[t].charCodeAt(0)]=-2;for(let t=0;t<Ym.length;t+=1)e[Ym[t].charCodeAt(0)]=t;return e})();function lC(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Ym[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Ym[a]),t.queuedBits-=6}}function nD(e,t,r){const a=SH[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cC(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{CH(o,a,r)};for(let o=0;o<e.length;o+=1)nD(e.charCodeAt(o),s,i);return t.join("")}function _H(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function EH(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const s=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}_H(a,t)}}function CH(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ad(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)nD(e.charCodeAt(s),r,a);return new Uint8Array(t)}function AH(e){const t=[];return EH(e,r=>t.push(r)),new Uint8Array(t)}function ec(e){const t=[],r={queue:0,queuedBits:0},a=s=>{t.push(s)};return e.forEach(s=>lC(s,r,a)),lC(null,r,a),t.join("")}function TH(e){return Math.round(Date.now()/1e3)+e}function OH(){return Symbol("auth-callback")}const Ca=()=>typeof window<"u"&&typeof document<"u",Bl={tested:!1,writable:!1},aD=()=>{if(!Ca())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bl.tested)return Bl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bl.tested=!0,Bl.writable=!0}catch{Bl.tested=!0,Bl.writable=!1}return Bl.writable};function PH(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((a,s)=>{t[s]=a}),t}const sD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),IH=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ul=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ea=async(e,t)=>{await e.removeItem(t)};class yg{constructor(){this.promise=new yg.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}yg.promiseConstructor=Promise;function vm(e){const t=e.split(".");if(t.length!==3)throw new Pj("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!vH.test(t[a]))throw new Pj("JWT not in base64url format");return{header:JSON.parse(cC(t[0])),payload:JSON.parse(cC(t[1])),signature:Ad(t[2]),raw:{header:t[0],payload:t[1]}}}async function DH(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MH(e,t){return new Promise((a,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function RH(e){return("0"+e.toString(16)).substr(-2)}function FH(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*a));return s}return crypto.getRandomValues(t),Array.from(t,RH).join("")}async function $H(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(a);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function LH(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await $H(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function id(e,t,r=!1){const a=FH();let s=a;r&&(s+="/PASSWORD_RECOVERY"),await vd(e,`${t}-code-verifier`,s);const i=await LH(a);return[i,a===i?"plain":"s256"]}const BH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UH(e){const t=e.headers.get(Tj);if(!t||!t.match(BH))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function HH(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function qH(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function od(e){if(!zH.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WH(e,t){return new Proxy(e,{get:(r,a,s)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,s)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,a,s)}})}function dC(e){return JSON.parse(JSON.stringify(e))}const Kl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),KH=[502,503,504];async function uC(e){var t;if(!IH(e))throw new Oj(Kl(e),0);if(KH.includes(e.status))throw new Oj(Kl(e),e.status);let r;try{r=await e.json()}catch(i){throw new Xl(Kl(i),i)}let a;const s=UH(e);if(s&&s.getTime()>=rD["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new iC(Kl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Es}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new iC(Kl(r),e.status,r.weak_password.reasons);throw new wH(Kl(r),e.status||500,a)}const VH=(e,t,r,a)=>{const s={method:e,headers:t?.headers||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(a),Object.assign(Object.assign({},s),r))};async function cr(e,t,r,a){var s;const i=Object.assign({},a?.headers);i[Tj]||(i[Tj]=rD["2024-01-01"].name),a?.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(s=a?.query)!==null&&s!==void 0?s:{};a?.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await GH(e,t,r+l,{headers:i,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(d):{data:Object.assign({},d),error:null}}async function GH(e,t,r,a,s,i){const o=VH(t,a,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new Oj(Kl(d),0)}if(l.ok||await uC(l),a?.noResolveJson)return l;try{return await l.json()}catch(d){await uC(d)}}function xi(e){var t;let r=null;JH(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=TH(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function hC(e){const t=xi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function il(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YH(e){return{data:e,error:null}}function XH(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i}=e,o=pg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:a,redirect_to:s,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function fC(e){return e}function JH(e){return e.access_token&&e.refresh_token&&e.expires_in}const ev=["global","local","others"];class QH{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=sD(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=ev[0]){if(ev.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ev.join(", ")}`);try{return await cr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Wt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await cr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:il})}catch(a){if(Wt(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=pg(t,["options"]),s=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(s.new_email=a?.newEmail,delete s.newEmail),await cr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:XH,redirectTo:r?.redirectTo})}catch(r){if(Wt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await cr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:il})}catch(r){if(Wt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await cr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Wt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){od(t);try{return await cr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:il})}catch(r){if(Wt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){od(t);try{return await cr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:il})}catch(a){if(Wt(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){od(t);try{return await cr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:il})}catch(a){if(Wt(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){od(t.userId);try{const{data:r,error:a}=await cr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:a}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){od(t.userId),od(t.id);try{return{data:await cr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,a,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},f=await cr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fC});if(f.error)throw f.error;const m=await f.json(),p=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Wt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await cr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await cr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await cr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Wt(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await cr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await cr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Wt(r))return{data:null,error:r};throw r}}}function mC(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ld={debug:!!(globalThis&&aD()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ZH extends iD{}async function eq(e,t,r){ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),ld.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async s=>{if(s){ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ld.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZH(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ld.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function oD(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rq(e){return parseInt(e,16)}function nq(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function aq(e){var t;const{chainId:r,domain:a,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:d,resources:u,scheme:f,uri:m,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=oD(e.address),b=f?`${f}://${a}`:a,y=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${g}

${y}`;let N=`URI: ${m}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),l&&(N+=`
Not Before: ${l.toISOString()}`),d&&(N+=`
Request ID: ${d}`),u){let k=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);k+=`
- ${w}`}N+=k}return`${v}
${N}`}class Xn extends Error{constructor({message:t,code:r,cause:a,name:s}){var i;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=s??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Xm extends Xn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function sq({error:e,options:t}){var r,a,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Xn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Xn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Xn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Xn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Xn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Xn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Xn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(lD(o)){if(i.rp.id!==o)return new Xn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Xn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Xn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function iq({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Xn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(lD(a)){if(r.rpId!==a)return new Xn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Xn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class oq{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lq=new oq;function cq(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:a}=e,s=pg(e,["challenge","user","excludeCredentials"]),i=Ad(t).buffer,o=Object.assign(Object.assign({},r),{id:Ad(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const u=a[d];l.excludeCredentials[d]=Object.assign(Object.assign({},u),{id:Ad(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function dq(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,a=pg(e,["challenge","allowCredentials"]),s=Ad(t).buffer,i=Object.assign(Object.assign({},a),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ad(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function uq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ec(new Uint8Array(e.response.attestationObject)),clientDataJSON:ec(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,a=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ec(new Uint8Array(s.authenticatorData)),clientDataJSON:ec(new Uint8Array(s.clientDataJSON)),signature:ec(new Uint8Array(s.signature)),userHandle:s.userHandle?ec(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lD(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function pC(){var e,t;return!!(Ca()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fq(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Xm("Browser returned unexpected credential type",t)}:{data:null,error:new Xm("Empty credential response",t)}}catch(t){return{data:null,error:sq({error:t,options:e})}}}async function mq(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Xm("Browser returned unexpected credential type",t)}:{data:null,error:new Xm("Empty credential response",t)}}catch(t){return{data:null,error:iq({error:t,options:e})}}}const pq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jm(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),a={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))a[i]=o;else if(r(o))a[i]=o;else if(t(o)){const l=a[i];t(l)?a[i]=Jm(l,o):a[i]=Jm(o)}else a[i]=o}return a}function xq(e,t){return Jm(pq,e,t||{})}function yq(e,t){return Jm(gq,e,t||{})}class vq{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:a,signal:s},i){var o;try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:d};const u=s??lq.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;if(!f.name){const m=a;if(m)f.name=`${f.id}:${m}`;else{const g=(await this.client.getUser()).data.user,b=((o=g?.user_metadata)===null||o===void 0?void 0:o.name)||g?.email||g?.id||"User";f.name=`${f.id}:${b}`}}f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=xq(l.webauthn.credential_options.publicKey,i?.create),{data:m,error:p}=await fq({publicKey:f,signal:u});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}case"request":{const f=yq(l.webauthn.credential_options.publicKey,i?.request),{data:m,error:p}=await mq(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:u}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}}}catch(l){return Wt(l)?{data:null,error:l}:{data:null,error:new Xl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Xh("rpId is required for WebAuthn authentication")};try{if(!pC())return{data:null,error:new Xl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:a},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:a,credential_response:d.credential_response}})}catch(o){return Wt(o)?{data:null,error:o}:{data:null,error:new Xl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Xh("rpId is required for WebAuthn registration")};try{if(!pC())return{data:null,error:new Xl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:d,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:s},{create:i});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:a,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Wt(o)?{data:null,error:o}:{data:null,error:new Xl("Unexpected error in register",o)}}}}tq();const bq={url:gH,storageKey:xH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gC(e,t,r){return await r()}const cd={};class Jh{get jwks(){var t,r;return(r=(t=cd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){cd[this.storageKey]=Object.assign(Object.assign({},cd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=cd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cd[this.storageKey]=Object.assign(Object.assign({},cd[this.storageKey]),{cachedAt:t})}constructor(t){var r,a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},bq),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Jh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Jh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ca()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new QH({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=sD(i.fetch),this.lock=i.lock||gC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Ca()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=eq:this.lock=gC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:aD()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=mC(this.memoryStorage)),Ca()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tD}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},a="none";if(Ca()&&(r=PH(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),Ca()&&this.detectSessionInUrl&&a!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),NH(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Wt(r)?this._returnResult({error:r}):this._returnResult({error:new Xl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,s;try{const i=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:xi}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(Wt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,a,s;try{let i;if("email"in t){const{email:f,password:m,options:p}=t;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await id(this.storage,this.storageKey)),i=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:f,password:m,data:(r=p?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:b},xform:xi})}else if("phone"in t){const{phone:f,password:m,options:p}=t;i=await cr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(a=p?.data)!==null&&a!==void 0?a:{},channel:(s=p?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:xi})}else throw new xm("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Ea(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(i){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hC})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await cr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hC})}else throw new xm("You must provide either an email or phone number and a password");const{data:a,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!a||!a.session||!a.user){const i=new sd;return this._returnResult({data:{user:null,session:null},error:i})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:s})}catch(r){if(Wt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,a,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,a,s,i,o,l,d,u,f,m,p;let g,b;if("message"in t)g=t.message,b=t.signature;else{const{chain:y,wallet:v,statement:N,options:k}=t;let w;if(Ca())if(typeof v=="object")w=v;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")w=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const A=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=oD(S[0]);let E=(a=k?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!E){const I=await w.request({method:"eth_chainId"});E=rq(I)}const C={domain:A.host,address:_,statement:N,uri:A.href,version:"1",chainId:E,nonce:(s=k?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=k?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=k?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(u=k?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=k?.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=aq(C),b=await w.request({method:"personal_sign",params:[nq(g),_]})}try{const{data:y,error:v}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:b},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:xi});if(v)throw v;if(!y||!y.session||!y.user){const N=new sd;return this._returnResult({data:{user:null,session:null},error:N})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Wt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,a,s,i,o,l,d,u,f,m,p,g;let b,y;if("message"in t)b=t.message,y=t.signature;else{const{chain:v,wallet:N,statement:k,options:w}=t;let A;if(Ca())if(typeof N=="object")A=N;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))A=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const S=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const _=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),k?{statement:k}:null));let E;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")E=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)E=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)b=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(a=w?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((m=(f=w?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const _=await A.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=_}}try{const{data:v,error:N}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ec(y)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:xi});if(N)throw N;if(!v||!v.session||!v.user){const k=new sd;return this._returnResult({data:{user:null,session:null},error:k})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:N})}catch(v){if(Wt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Ul(this.storage,`${this.storageKey}-code-verifier`),[a,s]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new kH;const{data:i,error:o}=await cr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:xi});if(await Ea(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new sd;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:s,access_token:i,nonce:o}=t,l=await cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:xi}),{data:d,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d||!d.session||!d.user){const f=new sd;return this._returnResult({data:{user:null,session:null},error:f})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:u})}catch(r){if(Wt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,a,s,i,o;try{if("email"in t){const{email:l,options:d}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await id(this.storage,this.storageKey));const{error:m}=await cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:l,options:d}=t,{data:u,error:f}=await cr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new xm("You must provide either an email or phone number.")}catch(l){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,a;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await cr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xi});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:u,session:d},error:null})}catch(s){if(Wt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,a,s,i,o;try{let l=null,d=null;this.flowType==="pkce"&&([l,d]=await id(this.storage,this.storageKey));const u=await cr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:d}),headers:this.headers,xform:YH});return!((i=u.data)===null||i===void 0)&&i.url&&Ca()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Es;const{error:s}=await cr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Wt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:s,options:i}=t,{error:o}=await cr(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:a,type:s,options:i}=t,{data:o,error:l}=await cr(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new xm("You must provide either an email or phone number and a type")}catch(r){if(Wt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ul(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Xy:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await Ul(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Zy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=WH(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:il}):await this._useSession(async r=>{var a,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Es}:await cr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:il})})}catch(r){if(Wt(r))return Jy(r)&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:s,error:i}=a;if(i)throw i;if(!s.session)throw new Es;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await id(this.storage,this.storageKey));const{data:u,error:f}=await cr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:il});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(a){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Es;const r=Date.now()/1e3;let a=r,s=!0,i=null;const{payload:o}=vm(t.access_token);if(o.exp&&(a=o.exp,s=a<=r),s){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Wt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new Es;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Wt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ca())throw new ym("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ym(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ym("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sC("No code detected.");const{data:k,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=t;if(!i||!l||!o||!u)throw new ym("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let p=f+m;d&&(p=parseInt(d));const g=p-f;g*1e3<=yd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${m}s`);const b=p-m;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,f);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const N={provider_token:a,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(a){if(Wt(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ul(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i&&!Jy(i))return this._returnResult({error:i});const o=(a=s.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(jH(l)&&(l.status===404||l.status===401||l.status===403)||Jy(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=OH(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,s=null;this.flowType==="pkce"&&([a,s]=await id(this.storage,this.storageKey,!0));try{return await cr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:a,error:s}=await this._useSession(async i=>{var o,l,d,u,f;const{data:m,error:p}=i;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await cr(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ca()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:t.provider,url:a?.url},error:null})}catch(a){if(Wt(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var a;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:d,access_token:u,nonce:f}=t,m=await cr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=i?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:d,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:xi}),{data:p,error:g}=m;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new sd}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(s){if(await Ea(this.storage,`${this.storageKey}-code-verifier`),Wt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:o}=r;if(o)throw o;return await cr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await MH(async s=>(s>0&&await DH(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await cr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xi})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Qy(i)&&Date.now()+o-a<yd})}catch(a){if(this._debug(r,"error",a),Wt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),Ca()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const s=await Ul(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ul(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await vd(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o?.user)!==null&&t!==void 0?t:Zy()}else if(s&&!s.user&&!s.user){const o=await Ul(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await Ea(this.storage,this.storageKey+"-user"),await vd(this.storage,this.storageKey,s)):s.user=Zy()}if(this._debug(a,"session from storage",s),!this._isValidSession(s)){this._debug(a,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xy;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Xy}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Qy(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(a,"error",s),console.error(s);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yg;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Es;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Wt(i)){const o={data:null,error:i};return Qy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,a=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ea(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await vd(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=dC(s);await vd(this.storage,this.storageKey,i)}else{const s=dC(r);await vd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ea(this.storage,this.storageKey),await Ea(this.storage,this.storageKey+"-code-verifier"),await Ea(this.storage,this.storageKey+"-user"),this.userStorage&&await Ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ca()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((a.expires_at*1e3-t)/yd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yd}ms, refresh threshold is ${Aj} ticks`),s<=Aj&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iD)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ca()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const s=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&s.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await id(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(a?.queryParams){const i=new URLSearchParams(a.queryParams);s.push(i.toString())}return a?.skipBrowserRedirect&&s.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await cr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:u}=await cr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uq(t.webauthn.credential_response):hq(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:d}))})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await cr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=s?.session)===null||a===void 0?void 0:a.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cq(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:dq(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,a,s,i;if(t)try{const{payload:g}=vm(t);let b=null;g.aal&&(b=g.aal);let y=b;const{data:{user:v},error:N}=await this.getUser(t);if(N)return this._returnResult({data:null,error:N});((a=(r=v?.factors)===null||r===void 0?void 0:r.filter(A=>A.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(y="aal2");const w=g.amr||[];return{data:{currentLevel:b,nextLevel:y,currentAuthenticationMethods:w},error:null}}catch(g){if(Wt(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=vm(o.access_token);let u=null;d.aal&&(u=d.aal);let f=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=d.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:a},error:s}=r;return s?this._returnResult({data:null,error:s}):a?await cr(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Es})})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:s},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Es});const o=await cr(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ca()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Wt(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,r){try{return await this._useSession(async a=>{const{data:{session:s},error:i}=a;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Es});const o=await cr(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ca()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(a){if(Wt(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await cr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Es})})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:a},error:s}=r;return s?this._returnResult({data:null,error:s}):a?(await cr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Es})})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(l=>l.kid===t);if(a)return a;const s=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+bH>s)return a;const{data:i,error:o}=await cr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,a=i.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:g,error:b}=await this.getSession();if(b||!g.session)return this._returnResult({data:null,error:b});a=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:d}}=vm(a);r?.allowExpired||HH(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:g}=await this.getUser(a);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const f=qH(s.alg),m=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,o,AH(`${l}.${d}`)))throw new Pj("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(a){if(Wt(a))return this._returnResult({data:null,error:a});throw a}}}Jh.nextInstanceID={};const wq=Jh,jq="2.94.1";let yh="";typeof Deno<"u"?yh="deno":typeof document<"u"?yh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yh="react-native":yh="node";const Nq={"X-Client-Info":`supabase-js-${yh}/${jq}`},kq={headers:Nq},Sq={schema:"public"},_q={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Eq={};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function Cq(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aq(e){var t=Cq(e,"string");return Qh(t)=="symbol"?t:t+""}function Tq(e,t,r){return(t=Aq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function On(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(a){Tq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const Oq=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Pq=()=>Headers,Iq=(e,t,r)=>{const a=Oq(r),s=Pq();return async(i,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),a(i,On(On({},o),{},{headers:u}))}};function Dq(e){return e.endsWith("/")?e:e+"/"}function Mq(e,t){var r,a;const{db:s,auth:i,realtime:o,global:l}=e,{db:d,auth:u,realtime:f,global:m}=t,p={db:On(On({},d),s),auth:On(On({},u),i),realtime:On(On({},f),o),storage:{},global:On(On(On({},m),l),{},{headers:On(On({},(r=m?.headers)!==null&&r!==void 0?r:{}),(a=l?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function Rq(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Fq=class extends wq{constructor(e){super(e)}},$q=class{constructor(e,t,r){var a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Rq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Sq,realtime:Eq,auth:On(On({},_q),{},{storageKey:o}),global:kq},d=Mq(r??{},l);if(this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=d.auth)!==null&&u!==void 0?u:{},this.headers,d.global.fetch)}this.fetch=Iq(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(On({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new jU(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch,timeout:d.db.timeout,urlLengthLimit:d.db.urlLengthLimit}),this.storage=new pH(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new mU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:a}=await e.auth.getSession();return(t=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:s,storageKey:i,flowType:o,lock:l,debug:d,throwOnError:u},f,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fq({url:this.authUrl.href,headers:On(On({},p),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:s,flowType:o,lock:l,debug:d,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new LU(this.realtimeUrl.href,On(On({},e),{},{params:On(On({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Lq=(e,t,r)=>new $q(e,t,r);function Bq(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Bq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function hu(){return typeof window<"u"&&!window.__supabaseClient&&(window.__supabaseClient=Lq(`https://${Pa}.supabase.co`,Zn,{auth:{storageKey:`sb-${Pa}-auth-token`,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),window.__supabaseClient}const qe=`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d`;function pr(){return hu()}async function kc(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t)return null;const{data:{session:r},error:a}=await e.auth.refreshSession();return a||!r?(console.warn("Token refresh failed, using existing session:",a?.message||"No session returned"),t):r}let yC=!1;async function st(e,t,r){const a=await fetch(e,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r?.headers}});if(!a.ok){let i="Request failed",o=!1;try{const l=await a.json();i=l.error||l.message||`HTTP ${a.status}: ${a.statusText}`,o=!!l.warning}catch{i=`HTTP ${a.status}: ${a.statusText}`}throw console.error(`API Error [${e}]:`,i),a.status===401&&!yC&&(yC=!0,console.error("Session expired or invalid. Please log in again."),await pr().auth.signOut(),sessionStorage.getItem("logout_redirect_in_progress")||(sessionStorage.setItem("logout_redirect_in_progress","true"),setTimeout(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),window.location.reload()},100))),new Error(i)}const s=await a.json();return s.warning&&console.warn(`API Warning [${e}]:`,s.warning),s}async function vg(e){return(await st(`${qe}/inventory`,e)).inventory||[]}async function cD(e,t){return(await st(`${qe}/inventory`,e,{method:"POST",body:JSON.stringify(t)})).item}async function dD(e,t,r){return(await st(`${qe}/inventory/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function uD(e,t){await st(`${qe}/inventory/${t}`,e,{method:"DELETE"})}async function bg(e){return(await st(`${qe}/overheads`,e)).overheads||[]}async function hD(e,t){return(await st(`${qe}/overheads`,e,{method:"POST",body:JSON.stringify(t)})).item}async function fD(e,t,r){return(await st(`${qe}/overheads/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function mD(e,t){await st(`${qe}/overheads/${t}`,e,{method:"DELETE"})}async function pD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t)throw new Error("Not authenticated");return bg(t.access_token)}async function gD(e){return(await st(`${qe}/fixed-costs`,e)).fixedCosts||[]}async function xD(e,t){return(await st(`${qe}/fixed-costs`,e,{method:"POST",body:JSON.stringify(t)})).item}async function yD(e,t,r){return(await st(`${qe}/fixed-costs/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function vD(e,t){await st(`${qe}/fixed-costs/${t}`,e,{method:"DELETE"})}async function bD(e){return await st(`${qe}/cleanup-duplicates`,e,{method:"POST"})}async function Uq(e){return await st(`${qe}/sales/migrate-discrepancy`,e,{method:"POST"})}async function Hq(e){return await st(`${qe}/migrate-stock-request-timestamps`,e,{method:"POST"})}async function qq(e,t,r,a){return await st(`${qe}/fix-orphaned-store-data`,e,{method:"POST",body:JSON.stringify({targetStoreId:t,dataType:r,recordIds:a})})}async function C2(e){return(await st(`${qe}/sales`,e)).sales||[]}async function wD(e,t){return(await st(`${qe}/sales`,e,{method:"POST",body:JSON.stringify(t)})).item}async function jD(e,t,r){return(await st(`${qe}/sales/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).item}async function ND(e,t){return(await st(`${qe}/sales/${t}/approve`,e,{method:"POST"})).item}async function kD(e,t,r,a){return(await st(`${qe}/sales/${t}/request-approval`,e,{method:"POST",body:JSON.stringify({requestedCashInHand:r,requestedOffset:a})})).item}async function SD(e,t){return(await st(`${qe}/sales/${t}/approve-discrepancy`,e,{method:"POST"})).item}async function _D(e,t,r){return(await st(`${qe}/sales/${t}/reject-discrepancy`,e,{method:"POST",body:JSON.stringify({reason:r})})).item}async function wg(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/production`,t.access_token)).production||[]}async function ED(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/production`,r.access_token,{method:"POST",body:JSON.stringify(e)})).item}async function CD(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/production/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).item}async function AD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/production/${e}/approve`,r.access_token,{method:"POST"})).item}async function zq(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${qe}/production/migrate-notifications`,t.access_token,{method:"POST"})}async function TD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${qe}/production/cleanup-duplicates`,t.access_token,{method:"POST"})}async function Wq(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await st(`${qe}/clear-data`,t.access_token,{method:"DELETE"})}async function OD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return await st(`${qe}/cleanup-production-data`,t.access_token,{method:"POST"})}async function PD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)return[];try{return(await st(`${qe}/notifications`,t.access_token)).notifications}catch(r){return console.log("Unable to fetch notifications:",r instanceof Error?r.message:"Unknown error"),[]}}async function ID(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/notifications/${e}/read`,r.access_token,{method:"PUT"})).notification}async function DD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");await st(`${qe}/notifications/read-all`,t.access_token,{method:"PUT"})}async function fu(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/stores`,t.access_token)).stores}async function A2(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/stores`,a.access_token,{method:"POST",body:JSON.stringify({name:e,location:t})})).store}async function MD(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/stores/${e}/assign-manager`,a.access_token,{method:"PUT",body:JSON.stringify({managerId:t})})).store}async function RD(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/stores/${e}/assign-production-house`,a.access_token,{method:"PUT",body:JSON.stringify({productionHouseId:t})})).store}async function FD(e,t,r){const a=pr(),{data:{session:s}}=await a.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/stores/${e}`,s.access_token,{method:"PUT",body:JSON.stringify({name:t,location:r})})).store}async function $D(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return await st(`${qe}/stores/${e}/migrate-data`,r.access_token,{method:"POST"})}async function Kq(e){return await st(`${qe}/cleanup-duplicates`,e,{method:"POST"})}async function Vq(e){return await st(`${qe}/migrate-production-house-system`,e,{method:"POST"})}async function ti(e){if(e)return(await st(`${qe}/employees`,e)).employees||[];const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/employees`,r.access_token)).employees||[]}async function yl(){return ti()}async function LD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/archived-employees`,t.access_token)).employees||[]}async function BD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${qe}/unified-employees`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to create employee")}return await a.json()}async function UD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${qe}/unified-employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to delete employee")}return await a.json()}async function HD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=await fetch(`${qe}/employees/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"}});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to delete employee")}return await a.json()}async function qD(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");const s=await fetch(`${qe}/unified-employees/${e}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to reset password")}return await s.json()}async function hc(e,t){if(t)return(await st(`${qe}/unified-employees/manager/${e}`,t)).employees||[];const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/unified-employees/manager/${e}`,a.access_token)).employees||[]}async function jg(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/unified-employees/cluster-head/${e}`,r.access_token)).managers||[]}async function zD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${qe}/migrate-employee-stores`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to run migration")}return await r.json()}async function Ng(e,t){const r=await kc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${qe}/assign-manager-to-employee`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,managerId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to assign manager")}return await a.json()}async function WD(e,t){const r=await kc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${qe}/employee/${e}/role`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newRole:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update role")}return await a.json()}async function KD(e,t){const r=await kc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${qe}/employee/${e}/store`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({newStoreId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update store")}return await a.json()}async function VD(e,t,r){const a=await kc();if(!a)throw new Error("Not authenticated");const s=await fetch(`${qe}/employee/${e}/designation`,{method:"PUT",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({designation:t,department:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update designation")}return await s.json()}async function GD(e,t){const r=await kc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${qe}/employee/${e}/assign-incharge`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({inchargeId:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to assign incharge")}return await a.json()}async function T2(e){const t=await kc();if(!t)throw new Error("Not authenticated");const r=await fetch(`${qe}/employees/by-incharge/${e}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to fetch employees")}return await r.json()}async function YD(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");const r=await fetch(`${qe}/sync-designations`,{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to sync designations")}return await r.json()}async function kg(e,t){const r=await kc();if(!r)throw new Error("Not authenticated");const a=await fetch(`${qe}/unified-employees/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${r.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to update employee")}return await a.json()}async function fc(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/payouts`,t.access_token)).payouts||[]}async function XD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/payouts`,r.access_token,{method:"POST",body:JSON.stringify({payouts:e})})).payouts||[]}async function JD(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/payouts/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).payout}async function QD(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${qe}/payouts/${e}`,r.access_token,{method:"DELETE"})}async function Sg(e){try{return(await st(`${qe}/online-sales`,e)).sales||[]}catch(t){return console.error("Error fetching online sales data:",t),[]}}async function ZD(e,t){return(await st(`${qe}/online-sales`,e,{method:"POST",body:JSON.stringify(t)})).entry}async function _g(e){try{return(await st(`${qe}/online-payouts`,e)).payouts||[]}catch(t){return console.error("Error fetching online payout data:",t),[]}}async function e5(e,t){return(await st(`${qe}/online-payouts`,e,{method:"POST",body:JSON.stringify(t)})).entry}async function O2(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/salary-advances`,t.access_token)).salaryAdvances||[]}async function P2(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/salary-advances`,r.access_token,{method:"POST",body:JSON.stringify(e)})).salaryAdvance}async function Ij(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/salary-advances/${e}`,a.access_token,{method:"PUT",body:JSON.stringify(t)})).salaryAdvance}async function Gq(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${qe}/salary-advances/${e}`,r.access_token,{method:"DELETE"})}async function vh(e,t,r){try{const a=new URLSearchParams;e&&a.append("entityType",e),t&&a.append("entityId",t),r&&a.append("category",r);const s=await fetch(`${qe}/inventory-items?${a.toString()}`,{headers:{Authorization:`Bearer ${Zn}`}});if(!s.ok){const o=await s.text();return console.error(" Error fetching inventory items:",o),[]}return(await s.json()).items||[]}catch(a){return console.error(" Error fetching inventory items:",a),[]}}async function t5(e){const t=await fetch(`${qe}/inventory-items`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify(e)});if(!t.ok){const a=await t.json();throw new Error(a.error||"Failed to create inventory item")}return(await t.json()).item}async function r5(e,t){const r=await fetch(`${qe}/inventory-items/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update inventory item")}return(await r.json()).item}async function Yq(e){const t=await fetch(`${qe}/inventory-items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Zn}`}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Failed to delete inventory item")}}async function n5(){const e=await fetch(`${qe}/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${Zn}`}});if(!e.ok){const r=await e.json();throw new Error(r.error||"Failed to initialize default items")}return(await e.json()).items||[]}async function Xq(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");await st(`${qe}/cluster-heads/by-email/${encodeURIComponent(e)}`,r.access_token,{method:"DELETE"})}async function a5(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");const a=e?`${qe}/organizational-hierarchy?storeId=${encodeURIComponent(e)}`:`${qe}/organizational-hierarchy`,s=await st(a,r.access_token);return{hierarchy:s.hierarchy||[],unassignedManagers:s.unassignedManagers||[],unassignedEmployees:s.unassignedEmployees||[],stats:s.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}}}async function Zh(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/timesheets/${e}`,r.access_token)).timesheets||[]}async function mu(e,t){if(t)return(await st(`${qe}/leaves/${e}`,t)).leaves||[];const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/leaves/${e}`,a.access_token)).leaves||[]}async function s5(e){if(e)return(await st(`${qe}/leaves/all`,e)).leaves||[];const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/leaves/all`,r.access_token)).leaves||[]}async function i5(e){const t=pr(),{data:{session:r}}=await t.auth.getSession();if(!r?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/leaves`,r.access_token,{method:"POST",body:JSON.stringify(e)})).leave}async function o5(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/leaves/${e}/balance?joiningDate=${t}`,a.access_token)).balance||0}async function Dj(e,t,r){const a=pr(),{data:{session:s}}=await a.auth.getSession();if(!s?.access_token)throw new Error("Not authenticated");await st(`${qe}/leaves/${e}/approve`,s.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r})})}async function l5(e,t,r,a){const s=pr(),{data:{session:i}}=await s.auth.getSession();if(!i?.access_token)throw new Error("Not authenticated");await st(`${qe}/leaves/${e}/reject`,i.access_token,{method:"POST",body:JSON.stringify({managerId:t,managerName:r,reason:a})})}async function c5(){try{const e=await fetch(`${qe}/custom-items`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`}});return e.ok?(await e.json()).customItems||[]:(console.error("Failed to fetch custom items:",e.status,e.statusText),[])}catch(e){return console.error("Error fetching custom items:",e),[]}}async function d5(e,t){const r=pr(),{data:{session:a}}=await r.auth.getSession();if(!a?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/custom-items`,a.access_token,{method:"POST",body:JSON.stringify({category:e,itemName:t})})).customItem}async function Eg(e){return(await st(`${qe}/production-requests`,e)).requests||[]}async function I2(e,t){return(await st(`${qe}/production-requests`,e,{method:"POST",body:JSON.stringify(t)})).request}async function u5(e,t,r,a){return(await st(`${qe}/production-requests/${t}/status`,e,{method:"PUT",body:JSON.stringify({status:r,updatedBy:a})})).request}async function h5(e,t,r,a,s){return(await st(`${qe}/production-requests/${t}/ship`,e,{method:"PUT",body:JSON.stringify({shippedQuantities:r,shippingNotes:a,shippedBy:s})})).request}async function f5(e){return await st(`${qe}/production-requests/check-pending`,e,{method:"POST"})}async function Cg(e){return await st(`${qe}/sales-data`,e)}async function m5(e,t){return(await st(`${qe}/sales-data`,t,{method:"POST",body:JSON.stringify(e)})).record}async function p5(e,t){await st(`${qe}/sales-data/${e}`,t,{method:"DELETE"})}async function e0(){const e=pr(),{data:{session:t}}=await e.auth.getSession();if(!t?.access_token)throw new Error("Not authenticated");return(await st(`${qe}/production-houses`,t.access_token)).productionHouses||[]}async function g5(e,t){return(await st(`${qe}/production-houses`,e,{method:"POST",body:JSON.stringify(t)})).productionHouse}async function x5(e,t,r){return(await st(`${qe}/production-houses/${t}`,e,{method:"PUT",body:JSON.stringify(r)})).productionHouse}async function y5(e,t,r){return(await st(`${qe}/production-houses/${t}/inventory`,e,{method:"PUT",body:JSON.stringify({inventory:r})})).productionHouse}async function v5(e,t,r){return(await st(`${qe}/production-houses/${t}/assign-head`,e,{method:"PUT",body:JSON.stringify({productionHeadId:r})})).productionHouse}async function b5(e,t,r){return(await st(`${qe}/stores/${t}/assign-production-house`,e,{method:"PUT",body:JSON.stringify({productionHouseId:r})})).store}async function w5(e,t,r){return await st(`${qe}/production-houses/${t}/fix-records`,e,{method:"POST",body:JSON.stringify({oldStoreId:r})})}async function j5(e,t){await st(`${qe}/production-houses/${t}`,e,{method:"DELETE"})}async function N5(e,t,r,a){const s=await st(`${qe}/production-houses/transfer-inventory`,e,{method:"POST",body:JSON.stringify({fromHouseId:t,toHouseId:r,quantities:a})});return{fromHouse:s.fromHouse,toHouse:s.toHouse}}async function k5(e){return(await st(`${qe}/stock-requests`,e)).stockRequests||[]}async function S5(e,t){return(await st(`${qe}/stock-requests`,e,{method:"POST",body:JSON.stringify(t)})).stockRequest}async function _5(e,t,r,a,s,i){return(await st(`${qe}/stock-requests/${t}/fulfill`,e,{method:"PUT",body:JSON.stringify({fulfilledQuantities:r,fulfilledBy:a,fulfilledByName:s,notes:i})})).stockRequest}async function E5(e,t){return(await st(`${qe}/stock-requests/${t}/cancel`,e,{method:"PUT"})).stockRequest}async function Jq(e){return await st(`${qe}/fix-stock-requests`,e,{method:"POST"})}async function C5(e,t){return await st(`${qe}/stock-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function cl(e,t,r){const a=new Date().getTime(),s=r?`${qe}/stock-recalibration/latest/${t}?locationType=${r}&_t=${a}`:`${qe}/stock-recalibration/latest/${t}?_t=${a}`;return await st(s,e)}const Mj=cl;async function Qm(e,t,r){const a=r?`${qe}/stock-recalibration/history/${t}?locationType=${r}`:`${qe}/stock-recalibration/history/${t}`;return await st(a,e)}async function A5(e){return await st(`${qe}/stock-recalibration/pending-approval`,e)}async function T5(e,t){return await st(`${qe}/stock-recalibration/${t}/approve`,e,{method:"POST"})}async function O5(e,t,r){return await st(`${qe}/stock-recalibration/${t}/reject`,e,{method:"POST",body:JSON.stringify({reason:r})})}async function P5(e,t){return await st(`${qe}/online-cash-recalibration`,e,{method:"POST",body:JSON.stringify(t)})}async function D2(e,t){const r=new Date().getTime();return await st(`${qe}/online-cash-recalibration/latest/${t}?_t=${r}`,e)}async function Qq(e,t){return await st(`${qe}/online-cash-recalibration/history/${t}`,e)}async function Zq(e,t,r){return await st(`${qe}/online-cash-recalibration/${t}`,e,{method:"PUT",body:JSON.stringify(r)})}async function I5(e,t){return await st(`${qe}/online-cash-recalibration/${t}`,e,{method:"DELETE"})}async function D5(e){return(await st(`${qe}/online-cash-recalibration/all`,e))?.data||[]}async function M5(e,t,r,a){const s=localStorage.getItem("accessToken");if(!s)throw new Error("Not authenticated");await st(`${qe}/cash-conversion`,s,{method:"POST",body:JSON.stringify({storeId:e,date:t,amount:r,performedBy:a})})}async function R5(e,t){return(await st(`${qe}/online-loans`,e,{method:"POST",body:JSON.stringify(t)})).loan}async function F5(e,t){const r=t?`${qe}/online-loans?storeId=${t}`:`${qe}/online-loans`;return(await st(r,e)).loans||[]}async function $5(e,t,r){return(await st(`${qe}/online-loans/${t}/repay`,e,{method:"PUT",body:JSON.stringify(r)})).loan}async function L5(e,t){return(await st(`${qe}/stock-thresholds/${t}`,e)).thresholds}async function B5(e,t,r){return await st(`${qe}/stock-thresholds/${t}`,e,{method:"POST",body:JSON.stringify({thresholds:r})})}async function U5(e,t,r,a){let s=`${qe}/stock-recalibration/wastage-report?month=${t}`;return r&&(s+=`&locationId=${r}`),a&&(s+=`&locationType=${a}`),await st(s,e)}async function H5(e){return await st(`${qe}/cluster/info`,e)}async function q5(e,t,r,a){return await st(`${qe}/cluster/update-assignments`,e,{method:"POST",body:JSON.stringify({employeeId:t,managedStoreIds:r,managedProductionHouseIds:a})})}async function z5(e){return await st(`${qe}/cluster/all-cluster-heads`,e)}const ez=Object.freeze(Object.defineProperty({__proto__:null,addCustomItem:d5,addFixedCost:xD,addInventory:cD,addInventoryItem:t5,addOverhead:hD,addPayouts:XD,addProductionData:ED,addSalesData:wD,applyLeave:i5,applyOnlineLoan:R5,approveDiscrepancy:SD,approveLeave:Dj,approveProductionData:AD,approveRecalibration:T5,approveSalesData:ND,assignInchargeToEmployee:GD,assignManagerToEmployee:Ng,assignManagerToStore:MD,assignProductionHeadToHouse:v5,assignProductionHouseToStore:RD,assignStoreToProductionHouse:b5,cancelStockRequest:E5,checkPendingProductionRequests:f5,cleanDuplicates:Kq,cleanupDuplicateProduction:TD,cleanupDuplicates:bD,cleanupProductionData:OD,clearAllData:Wq,convertCashToOnline:M5,createProductionHouse:g5,createProductionRequest:I2,createSalaryAdvance:P2,createStockRequest:S5,createStore:A2,createUnifiedEmployee:BD,deleteClusterHeadByEmail:Xq,deleteEmployee:HD,deleteFixedCost:vD,deleteInventory:uD,deleteInventoryItem:Yq,deleteOnlineCashRecalibration:I5,deleteOverhead:mD,deletePayout:QD,deleteProductionHouse:j5,deleteSalaryAdvance:Gq,deleteSalesData:p5,deleteUnifiedEmployee:UD,fetchFixedCosts:gD,fetchInventory:vg,fetchInventoryItems:vh,fetchLatestRecalibration:Mj,fetchOnlineCashRecalibrations:D5,fetchOverheads:bg,fetchProductionData:wg,fetchProductionRequests:Eg,fetchSalesData:C2,fixOrphanedStoreData:qq,fixProductionRecords:w5,fixStockRequests:Jq,fulfillStockRequest:_5,getAllClusterHeads:z5,getAllEmployees:ti,getAllLeaves:s5,getAllRecalibrationsForApproval:A5,getArchivedEmployees:LD,getClusterInfo:H5,getCustomItems:c5,getEmployees:yl,getEmployeesByIncharge:T2,getEmployeesByManager:hc,getLastOnlineCashRecalibration:D2,getLastRecalibration:cl,getLeaveBalance:o5,getLeaves:mu,getManagersByClusterHead:jg,getMonthlyWastageReport:U5,getNotifications:PD,getOnlineCashRecalibrationHistory:Qq,getOnlineLoans:F5,getOnlinePayoutData:_g,getOnlineSalesData:Sg,getOrganizationalHierarchy:a5,getOverheads:pD,getPayouts:fc,getProductionHouses:e0,getRecalibrationHistory:Qm,getSalaryAdvances:O2,getSalesData:Cg,getStockRequests:k5,getStockThresholds:L5,getStores:fu,getTimesheets:Zh,initializeDefaultInventoryItems:n5,markAllNotificationsAsRead:DD,markNotificationAsRead:ID,migrateDataToStore:$D,migrateEmployeeStores:zD,migrateProductionHouseSystem:Vq,migrateProductionNotifications:zq,migrateSalesDiscrepancy:Uq,migrateStockRequestTimestamps:Hq,rejectDiscrepancy:_D,rejectLeave:l5,rejectRecalibration:O5,repayOnlineLoan:$5,requestSalesApproval:kD,resetEmployeePassword:qD,saveOnlinePayoutData:e5,saveOnlineSalesData:ZD,saveSalesData:m5,saveStockThresholds:B5,shipProductionRequest:h5,submitOnlineCashRecalibration:P5,submitStockRecalibration:C5,syncDesignations:YD,transferInventoryBetweenHouses:N5,updateClusterAssignments:q5,updateEmployeeDesignation:VD,updateEmployeeRole:WD,updateEmployeeStore:KD,updateFixedCost:yD,updateInventory:dD,updateInventoryItem:r5,updateOnlineCashRecalibration:Zq,updateOverhead:fD,updatePayout:JD,updateProductionData:CD,updateProductionHouse:x5,updateProductionHouseInventory:y5,updateProductionRequestStatus:u5,updateSalaryAdvance:Ij,updateSalesData:jD,updateStore:FD,updateUnifiedEmployee:kg},Symbol.toStringTag,{value:"Module"}));function tz({selectedDate:e,editingItem:t,onSubmit:r,onClose:a,onSuccess:s}){const[i,o]=P.useState({category:t?.category||"fresh_produce",itemName:t?.itemName||"",customItem:t?!FE[t.category].includes(t.itemName):!1,quantity:t?.quantity.toString()||"",unit:t?.unit||"kg",totalCost:t?.totalCost.toString()||"",paymentMethod:t?.paymentMethod||"cash",cashAmount:t?.cashAmount?.toString()||"",onlineAmount:t?.onlineAmount?.toString()||""}),[l,d]=P.useState({}),[u,f]=P.useState(!0),[m,p]=P.useState(!1),[g,b]=P.useState(""),[y,v]=P.useState(!1),N=P.useRef(null);P.useEffect(()=>{k()},[]),P.useEffect(()=>{const E=C=>{N.current&&!N.current.contains(C.target)&&v(!1)};return y&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[y]);const k=async()=>{try{const E=await c5(),C={};E.forEach(I=>{C[I.category]||(C[I.category]=[]),C[I.category].push(I.itemName)}),d(C)}catch(E){console.log("Could not load custom items:",E)}finally{f(!1)}},w=()=>{o({category:i.category,itemName:"",customItem:!1,quantity:"",unit:"kg",totalCost:"",paymentMethod:"cash",cashAmount:"",onlineAmount:""}),b("")},A=async E=>{if(E.preventDefault(),m){console.log(" Submission already in progress, ignoring duplicate request");return}if(!i.itemName||i.itemName.trim()===""){alert(" Please select an item name before submitting!"),console.error(" Attempted to submit inventory item without itemName:",i);return}if(i.paymentMethod==="both"){const X=parseFloat(i.cashAmount)||0,re=parseFloat(i.onlineAmount)||0,oe=parseFloat(i.totalCost)||0;if(Math.abs(X+re-oe)>.01){alert(` Split payment amounts (${X.toFixed(2)} + ${re.toFixed(2)} = ${(X+re).toFixed(2)}) must equal total cost (${oe.toFixed(2)})`);return}}p(!0);const C=parseFloat(i.quantity),I=parseFloat(i.totalCost),B=C>0?I/C:0,M=Math.round(C*100)/100,O=Math.round(I*100)/100,U=Math.round(B*100)/100;if(console.log(" Submitting inventory item:",{itemName:i.itemName,quantity:M,totalCost:O,costPerUnit:U,paymentMethod:i.paymentMethod}),i.customItem&&i.itemName)try{await d5(i.category,i.itemName),console.log("Custom item saved:",i.itemName),await k()}catch(X){console.error("Error saving custom item:",X)}let ie={paymentMethod:i.paymentMethod};if(i.paymentMethod==="both"){const X=parseFloat(i.cashAmount)||0,re=parseFloat(i.onlineAmount)||0;ie.cashAmount=Math.round(X*100)/100,ie.onlineAmount=Math.round(re*100)/100}else i.paymentMethod==="online"?(ie.onlineAmount=O,ie.cashAmount=0):i.paymentMethod==="cash"&&(ie.cashAmount=O,ie.onlineAmount=0);console.log(" Payment data being sent:",ie),await r({date:e,category:i.category,itemName:i.itemName,quantity:M,unit:i.unit,costPerUnit:U,totalCost:O,...ie}),p(!1),t||w(),s&&s()},S=[...new Set([...FE[i.category],...l[i.category]||[]])].sort((E,C)=>E.localeCompare(C)),_=g.trim()?S.filter(E=>E.toLowerCase().includes(g.toLowerCase())):S;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[t?"Edit":"Add"," Inventory Item"]}),n.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:i.category,onChange:E=>{o({...i,category:E.target.value,itemName:"",customItem:!1}),b("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(mg).map(([E,C])=>n.jsx("option",{value:E,children:C},E))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Item Name"}),i.customItem?n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"text",value:i.itemName,onChange:E=>o({...i,itemName:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter custom item name",required:!0}),n.jsx("button",{type:"button",onClick:()=>{o({...i,customItem:!1,itemName:""}),b("")},className:"text-sm text-blue-600 hover:text-blue-700",children:" Back to list"})]}):n.jsxs("div",{className:"relative space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(KI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx("input",{type:"text",value:g,onChange:E=>{b(E.target.value),v(!0)},onFocus:()=>v(!0),placeholder:i.itemName||"Search items...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.itemName&&!g&&n.jsx("div",{className:"absolute inset-y-0 left-10 right-10 flex items-center pointer-events-none",children:n.jsx("span",{className:"text-gray-900",children:i.itemName})}),n.jsx(Y0,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>v(!y)})]}),y&&n.jsxs("div",{ref:N,className:"absolute z-20 left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[_.length===0&&g?n.jsx("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"No items found"}):_.map(E=>n.jsx("div",{onClick:()=>{o({...i,itemName:E}),b(""),v(!1)},className:`px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors ${i.itemName===E?"bg-blue-100 font-medium":""}`,children:E},E)),n.jsx("div",{onClick:()=>{o({...i,customItem:!0,itemName:""}),b(""),v(!1)},className:"px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors border-t border-gray-200 text-blue-600 font-medium",children:"+ Add Custom Item"})]}),g&&!y&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Showing ",_.length," of ",S.length," items"]}),n.jsx("input",{type:"hidden",value:i.itemName,required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Quantity"}),n.jsx("input",{type:"number",step:"0.01",value:i.quantity,onChange:E=>o({...i,quantity:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Unit"}),n.jsxs("select",{value:i.unit,onChange:E=>o({...i,unit:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"kg",children:"kg"}),n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"L",children:"L"}),n.jsx("option",{value:"mL",children:"mL"}),n.jsx("option",{value:"pcs",children:"pcs"}),n.jsx("option",{value:"units",children:"units"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Cost ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.totalCost,onChange:E=>o({...i,totalCost:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Payment Method"}),n.jsxs("select",{value:i.paymentMethod,onChange:E=>{const C=E.target.value;o({...i,paymentMethod:C,cashAmount:C==="both"?i.cashAmount:"",onlineAmount:C==="both"?i.onlineAmount:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",required:!0,children:[n.jsx("option",{value:"cash",children:"Cash in Hand "}),n.jsx("option",{value:"online",children:"Online / Paytm "}),n.jsx("option",{value:"both",children:"Split Payment (Both) "})]})]}),i.paymentMethod==="both"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Split Payment Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.cashAmount,onChange:E=>o({...i,cashAmount:E.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-blue-900 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.onlineAmount,onChange:E=>o({...i,onlineAmount:E.target.value}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg",placeholder:"0.00",required:!0})]})]}),i.cashAmount&&i.onlineAmount&&i.totalCost&&n.jsx("div",{className:"text-xs",children:parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)===parseFloat(i.totalCost)?n.jsx("p",{className:"text-green-700 font-semibold",children:" Split amounts match total cost"}):n.jsxs("p",{className:"text-red-700 font-semibold",children:[" Split total: ",(parseFloat(i.cashAmount)+parseFloat(i.onlineAmount)).toFixed(2),"(Total Cost: ",parseFloat(i.totalCost).toFixed(2),")"]})})]}),i.quantity&&i.totalCost&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Cost per Unit"}),n.jsxs("p",{className:"text-gray-900",children:["",(parseFloat(i.totalCost)/parseFloat(i.quantity)).toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:m,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:m,children:[m&&n.jsx(Eo,{className:"w-4 h-4 animate-spin"}),m?"Saving...":t?"Update Item":"Add Item"]})]})]})]})})}const rz=[{value:"fuel",label:" Fuel Cost"},{value:"travel",label:" Travel by Employee"},{value:"transportation",label:" Goods Transportation Cost"},{value:"marketing",label:" Marketing Cost"},{value:"service_charge",label:" Service Charge (Food Aggregators)"},{value:"repair",label:" Repair Cost"},{value:"party",label:" Party Cost"},{value:"lunch",label:" Lunch Cost"},{value:"emergency_online",label:" Emergency Online Order (Blinkit)"},{value:"personal_expense",label:" Personal Expense By an Employee"},{value:"utensils",label:" Utensils"},{value:"equipments",label:" Equipments"},{value:"license",label:" License Cost"},{value:"water_jar",label:" Water Jar"},{value:"miscellaneous",label:" Miscellaneous Cost"}];function nz({selectedDate:e,onSubmit:t,onClose:r,editingItem:a,employees:s}){const[i,o]=P.useState({category:a?a.category:"fuel",description:a?a.description:"",amount:a?a.amount.toString():"",employeeId:a?.employeeId||"",employeeName:a?.employeeName||"",paymentMethod:a?.paymentMethod||"cash",cashAmount:a?.cashAmount?a.cashAmount.toString():"",onlineAmount:a?.onlineAmount?a.onlineAmount.toString():""}),[l,d]=P.useState(!1),u=parseFloat(i.amount||"0");P.useEffect(()=>{if(i.paymentMethod==="both"&&u>0&&!i.cashAmount&&!i.onlineAmount){const p=(u/2).toFixed(2);o(g=>({...g,cashAmount:p,onlineAmount:p}))}},[i.paymentMethod,u]),P.useEffect(()=>{if(i.category==="personal_expense"&&i.employeeId){const p=s.find(g=>g.employeeId===i.employeeId);p&&o(g=>({...g,employeeName:p.name}))}},[i.employeeId,i.category,s]);const f=()=>{if(i.paymentMethod!=="both")return!0;const p=parseFloat(i.cashAmount||"0"),g=parseFloat(i.onlineAmount||"0");return Math.abs(p+g-u)<.01},m=async p=>{if(p.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}if(!f()){alert("Cash and Online amounts must add up to the total amount!");return}d(!0);const g={date:e,category:i.category,description:i.description,amount:parseFloat(i.amount),paymentMethod:i.paymentMethod};i.category==="personal_expense"&&(g.employeeId=i.employeeId,g.employeeName=i.employeeName);let b={paymentMethod:i.paymentMethod};i.paymentMethod==="both"?(b.cashAmount=parseFloat(i.cashAmount),b.onlineAmount=parseFloat(i.onlineAmount)):i.paymentMethod==="online"?(b.onlineAmount=parseFloat(i.amount),b.cashAmount=0):i.paymentMethod==="cash"&&(b.cashAmount=parseFloat(i.amount),b.onlineAmount=0);const y={...g,...b};console.log(" Overhead payment data being sent:",b),await t(y),d(!1)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[a?"Edit":"Add"," Overhead Cost"]}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:i.category,onChange:p=>o({...i,category:p.target.value,employeeId:"",employeeName:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:rz.map(p=>n.jsx("option",{value:p.value,children:p.label},p.value))})]}),i.category==="personal_expense"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),n.jsxs("select",{value:i.employeeId,onChange:p=>o({...i,employeeId:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[n.jsx("option",{value:"",children:"Select Employee"}),s.map(p=>n.jsx("option",{value:p.employeeId,children:p.employeeId},p.id))]})]}),i.employeeId&&i.employeeName&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee Name"}),n.jsx("input",{type:"text",value:i.employeeName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Expense Description"}),n.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"What was the expense for?",required:!0})]})]}),i.category!=="personal_expense"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:i.description,onChange:p=>o({...i,description:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:p=>o({...i,amount:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:i.paymentMethod==="cash",onChange:p=>o({...i,paymentMethod:"cash"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:i.paymentMethod==="online",onChange:p=>o({...i,paymentMethod:"online"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:i.paymentMethod==="both",onChange:p=>o({...i,paymentMethod:"both"}),className:"w-4 h-4 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),i.paymentMethod==="both"&&u>0&&n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.cashAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,cashAmount:p.target.value,onlineAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:u,value:i.onlineAmount,onChange:p=>{const g=parseFloat(p.target.value||"0");o({...i,onlineAmount:p.target.value,cashAmount:(u-g).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[n.jsx("span",{className:"text-gray-700",children:"Total:"}),n.jsxs("span",{className:`font-medium ${f()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(i.cashAmount||"0")+parseFloat(i.onlineAmount||"0")).toFixed(2)," / ",u.toFixed(2)]})]}),!f()&&n.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",u.toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:l,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:l,children:[l&&n.jsx(Eo,{className:"w-4 h-4 animate-spin"}),l?"Saving...":a?"Update Overhead":"Add Overhead"]})]})]})]})})}function az({selectedDate:e,onSubmit:t,onClose:r,editingItem:a}){const[s,i]=P.useState({category:a?a.category:"electricity",description:a?a.description:"",amount:a?a.amount.toString():"",units:a?.units?a.units.toString():"",unitPrice:a?.unitPrice?a.unitPrice.toString():"",paymentMethod:a?.paymentMethod||"cash",cashAmount:a?.cashAmount?a.cashAmount.toString():"",onlineAmount:a?.onlineAmount?a.onlineAmount.toString():""}),[o,l]=P.useState(!1),d=s.category==="lpg_gas"&&s.units&&s.unitPrice?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount||"0");P.useEffect(()=>{if(s.paymentMethod==="both"&&d>0&&!s.cashAmount&&!s.onlineAmount){const m=(d/2).toFixed(2);i(p=>({...p,cashAmount:m,onlineAmount:m}))}},[s.paymentMethod,d]);const u=()=>{if(s.paymentMethod!=="both")return!0;const m=parseFloat(s.cashAmount||"0"),p=parseFloat(s.onlineAmount||"0");return Math.abs(m+p-d)<.01},f=m=>{if(m.preventDefault(),!u()){alert("Cash and Online amounts must add up to the total amount!");return}const p=s.category==="lpg_gas"?parseFloat(s.units)*parseFloat(s.unitPrice):parseFloat(s.amount),g={date:e,category:s.category,description:s.description,amount:p,paymentMethod:s.paymentMethod};s.category==="lpg_gas"&&(g.units=parseFloat(s.units),g.unitPrice=parseFloat(s.unitPrice)),s.paymentMethod==="both"?(g.cashAmount=parseFloat(s.cashAmount),g.onlineAmount=parseFloat(s.onlineAmount)):s.paymentMethod==="online"?(g.onlineAmount=p,g.cashAmount=0):s.paymentMethod==="cash"&&(g.cashAmount=p,g.onlineAmount=0),console.log(" Fixed cost payment data being sent:",{paymentMethod:g.paymentMethod,cashAmount:g.cashAmount,onlineAmount:g.onlineAmount}),l(!0),t(g).finally(()=>l(!1))};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-gray-900",children:[a?"Edit":"Add"," Fixed Cost"]}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),n.jsx("select",{value:s.category,onChange:m=>i({...s,category:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:Object.entries(j2).map(([m,p])=>n.jsx("option",{value:m,children:p},m))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:s.description,onChange:m=>i({...s,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:s.category==="lpg_gas"?"e.g., Commercial LPG cylinder purchase":"e.g., Monthly electricity bill, Store rent for December",required:!0})]}),s.category==="lpg_gas"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Number of Cylinders"}),n.jsx("input",{type:"number",step:"1",min:"1",value:s.units,onChange:m=>i({...s,units:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 2",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Price per Cylinder ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.unitPrice,onChange:m=>i({...s,unitPrice:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1450.00",required:!0})]}),s.units&&s.unitPrice&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"Total Amount:"})," ",d.toFixed(2)]})})]}):n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Amount ()"}),n.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:m=>i({...s,amount:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:s.paymentMethod==="cash",onChange:m=>i({...s,paymentMethod:"cash"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Cash in Hand"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Expected Cash in Hand"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:s.paymentMethod==="online",onChange:m=>i({...s,paymentMethod:"online"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Online Cash (Paytm)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Will reduce Online Cash in Hand (Paytm)"})]})]}),n.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"both",checked:s.paymentMethod==="both",onChange:m=>i({...s,paymentMethod:"both"}),className:"w-4 h-4 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-gray-900",children:" Both (Split Payment)"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Paid using both Cash and Online"})]})]})]})]}),s.paymentMethod==="both"&&d>0&&n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Split Payment Details"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.cashAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,cashAmount:m.target.value,onlineAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Online Amount ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",max:d,value:s.onlineAmount,onChange:m=>{const p=parseFloat(m.target.value||"0");i({...s,onlineAmount:m.target.value,cashAmount:(d-p).toFixed(2)})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),n.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-300",children:[n.jsx("span",{className:"text-gray-700",children:"Total:"}),n.jsxs("span",{className:`font-medium ${u()?"text-green-600":"text-red-600"}`,children:["",(parseFloat(s.cashAmount||"0")+parseFloat(s.onlineAmount||"0")).toFixed(2)," / ",d.toFixed(2)]})]}),!u()&&n.jsxs("p",{className:"text-xs text-red-600",children:[" Amounts must add up to ",d.toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:o,children:[o&&n.jsx(Eo,{className:"w-4 h-4 animate-spin"}),o?"Saving...":a?"Update Fixed Cost":"Add Fixed Cost"]})]})]})]})})}function sz({inventory:e,overheads:t,fixedCosts:r,onEditInventory:a,onDeleteInventory:s,onEditOverhead:i,onDeleteOverhead:o,onEditFixedCost:l,onDeleteFixedCost:d,isManager:u=!0}){const[f,m]=P.useState(null),[p,g]=P.useState(!1),b=N=>{const k=Math.round(N*100)/100;return k%1===0?k.toString():k.toFixed(2)},y=e.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),v=(N,k)=>{g(!0),N==="inventory"?s(k):N==="overhead"?o(k):d(k),m(null),g(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(dr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-gray-900",children:"Inventory Items"})]}),e.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No inventory items for this date"}):n.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([N,k])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:mg[N]}),n.jsx("div",{className:"space-y-2",children:k.map(w=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-gray-900",children:w.itemName})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-blue-600",children:["",w.totalCost.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>a(w),className:"p-1.5 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Edit",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"inventory",id:w.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(Rs,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[n.jsxs("span",{children:[b(w.quantity||0)," ",w.unit]}),n.jsxs("span",{children:["",b(w.costPerUnit||0),"/",w.unit]}),w.paymentMethod&&n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${w.paymentMethod==="cash"?"bg-green-100 text-green-800":w.paymentMethod==="online"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:w.paymentMethod==="cash"?" Cash":w.paymentMethod==="online"?" Online":` Split (${b(w.cashAmount||0)} + ${b(w.onlineAmount||0)})`})]})]},w.id))})]},N))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(CB,{className:"w-5 h-5 text-orange-600"}),n.jsx("h3",{className:"text-gray-900",children:"Overhead Costs"})]}),t.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No overhead costs for this date"}):n.jsx("div",{className:"space-y-3",children:t.map(N=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-orange-300 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-gray-900",children:w2[N.category]}),N.category==="personal_expense"&&N.employeeId&&N.employeeName&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Employee: ",N.employeeName," (ID: ",N.employeeId,")"]}),n.jsx("p",{className:"text-sm text-gray-500",children:N.description}),N.paymentMethod&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.paymentMethod==="cash"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),N.paymentMethod==="online"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),N.paymentMethod==="both"&&n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",N.cashAmount?.toLocaleString()]}),n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",N.onlineAmount?.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-orange-600",children:["",N.amount.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>i(N),className:"p-1.5 hover:bg-orange-50 rounded text-orange-600 transition-colors",title:"Edit",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"overhead",id:N.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(Rs,{className:"w-4 h-4"})})]})]})]})},N.id))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ji,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-gray-900",children:"Fixed Costs"})]}),r.length===0?n.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No fixed costs for this date"}):n.jsx("div",{className:"space-y-3",children:r.map(N=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-green-300 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-gray-900",children:j2[N.category]}),n.jsx("p",{className:"text-sm text-gray-500",children:N.description}),N.category==="lpg_gas"&&N.units&&N.unitPrice&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[N.units," cylinder",N.units>1?"s":"","  ",N.unitPrice.toLocaleString()]}),N.paymentMethod&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.paymentMethod==="cash"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:" Paid via Cash"}),N.paymentMethod==="online"&&n.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:" Paid via Paytm"}),N.paymentMethod==="both"&&n.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:[" Cash: ",N.cashAmount?.toLocaleString()]}),n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:[" Paytm: ",N.onlineAmount?.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-green-600",children:["",N.amount.toLocaleString()]}),u&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>l(N),className:"p-1.5 hover:bg-green-50 rounded text-green-600 transition-colors",title:"Edit",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>m({type:"fixedcost",id:N.id}),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",title:"Delete",children:n.jsx(Rs,{className:"w-4 h-4"})})]})]})]})},N.id))})]})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-4",children:"Confirm Delete"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete this ",f.type==="inventory"?"inventory item":f.type==="overhead"?"overhead cost":"fixed cost","? This action cannot be undone."]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsxs("button",{onClick:()=>v(f.type,f.id),disabled:p,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p&&n.jsx(Eo,{className:"w-4 h-4 animate-spin"}),p?"Deleting...":"Delete"]})]})]})})]})}const iz=5,oz=30,W5=(iz*60+oz)*60*1e3;function lz(){const e=new Date;return new Date(e.getTime()+W5).toISOString()}function Bn(){return lz().substring(0,10)}function Ag(e,t=!0){if(!e)return"Invalid Date";try{const r=t?new Date(new Date(e).getTime()+W5):new Date(e);if(isNaN(r.getTime()))return"Invalid Date";const a=r.getUTCDate(),s=r.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),i=r.getUTCFullYear();let o=r.getUTCHours();const l=r.getUTCMinutes(),d=o>=12?"PM":"AM";o=o%12||12;const u=l.toString().padStart(2,"0");return`${a} ${s} ${i}, ${o}:${u} ${d} IST`}catch{return"Invalid Date"}}function qa(e){if(!e)return"Invalid Date";const t=e.substring(0,10),[r,a,s]=t.split("-").map(Number);if(!r||!a||!s||isNaN(r)||isNaN(a)||isNaN(s))return"Invalid Date";const o=new Date(Date.UTC(r,a-1,s)).toLocaleString("en-US",{month:"short",timeZone:"UTC"});return`${s} ${o} ${r}`}const Tg=P.memo(function({selectedDate:t,onDateChange:r}){const[a,s]=P.useState(0),[i,o]=P.useState(!1);P.useEffect(()=>{const m=()=>{o(window.innerWidth<768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const l=P.useMemo(()=>{const m=Bn(),p=new Date(m);p.setDate(p.getDate()+a*7);const g=[];for(let b=-3;b<=3;b++){const y=new Date(p);y.setDate(y.getDate()+b),g.push(y.toISOString().split("T")[0])}return g},[a]);P.useEffect(()=>{if(!l.includes(t)){const m=new Date(t),p=new Date(Bn()),g=Math.floor((m.getTime()-p.getTime())/(1e3*60*60*24)),b=Math.floor(g/7);s(b)}},[t,l]);const d=()=>{s(0),r(Bn())},u=()=>{const m=a-1;s(m);const p=Bn(),g=new Date(p);g.setDate(g.getDate()+m*7);const b=g.toISOString().split("T")[0];r(b)},f=()=>{const m=a+1;s(m);const p=Bn(),g=new Date(p);g.setDate(g.getDate()+m*7);const b=g.toISOString().split("T")[0];r(b)};return i?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-gray-900",children:"Select Date"}),a!==0&&n.jsx("button",{type:"button",onClick:d,className:"px-3 py-1.5 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-xs",children:"Jump to Today"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("input",{type:"date",value:t,onChange:m=>r(m.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"})}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("button",{type:"button",onClick:u,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[n.jsx(vj,{className:"w-4 h-4"}),n.jsx("span",{children:"Prev Week"})]}),n.jsxs("button",{type:"button",onClick:f,className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-1 text-sm",children:[n.jsx("span",{children:"Next Week"}),n.jsx(ml,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:n.jsx("div",{className:"flex gap-2 pb-2 min-w-max",children:l.map(m=>{const p=new Date(m),g=m===Bn(),b=m===t;return n.jsxs("button",{type:"button",onClick:()=>r(m),className:`flex-shrink-0 p-2 rounded-lg text-center transition-all min-w-[60px] ${b?"bg-orange-600 text-white shadow-lg":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("div",{className:"text-base font-medium",children:p.getDate()}),n.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})})})]}):n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-gray-900",children:"Select Date"}),a!==0&&n.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:"Jump to Today"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Previous Week",children:[n.jsx(vj,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm",children:"Prev"})]}),n.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:l.map(m=>{const p=new Date(m),g=m===Bn(),b=m===t;return n.jsxs("button",{type:"button",onClick:()=>r(m),className:`p-3 rounded-lg text-center transition-all ${b?"bg-orange-600 text-white shadow-lg transform scale-105":g?"bg-orange-100 text-orange-800 border-2 border-orange-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"text-xs uppercase",children:p.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("div",{className:"text-lg font-medium",children:p.getDate()}),n.jsx("div",{className:"text-xs",children:p.toLocaleDateString("en-US",{month:"short"})})]},m)})}),n.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",title:"Next Week",children:[n.jsx("span",{className:"text-sm",children:"Next"}),n.jsx(ml,{className:"w-5 h-5"})]})]})]})});HI();function cz(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let Rj=1;class dz{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:a,...s}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Rj++,o=this.toasts.find(d=>d.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:a}),{...d,...t,id:i,dismissible:l,title:a}):d):this.addToast({title:a,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(a=>a({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let a;r.loading!==void 0&&(a=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=a!==void 0,o;const l=s.then(async u=>{if(o=["resolve",u],ye.isValidElement(u))i=!1,this.create({id:a,type:"default",message:u});else if(hz(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,b=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...b})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:a,type:"error",description:p,...b})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:a,type:"success",description:p,...b})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!ye.isValidElement(f)?f:{message:f};this.create({id:a,type:"error",description:m,...g})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((u,f)=>l.then(()=>o[0]==="reject"?f(o[1]):u(o[1])).catch(f));return typeof a!="string"&&typeof a!="number"?{unwrap:d}:Object.assign(a,{unwrap:d})},this.custom=(t,r)=>{const a=r?.id||Rj++;return this.create({jsx:t(a),id:a,...r}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Qs=new dz,uz=(e,t)=>{const r=t?.id||Rj++;return Qs.addToast({title:e,...t,id:r}),r},hz=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",fz=uz,mz=()=>Qs.toasts,pz=()=>Qs.getActiveToasts(),ur=Object.assign(fz,{success:Qs.success,info:Qs.info,warning:Qs.warning,error:Qs.error,custom:Qs.custom,message:Qs.message,promise:Qs.promise,dismiss:Qs.dismiss,loading:Qs.loading},{getHistory:mz,getToasts:pz});cz("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gz({context:e,selectedStoreId:t,employees:r}){const[a,s]=P.useState(Bn()),[i,o]=P.useState(!1),[l,d]=P.useState(!1),[u,f]=P.useState(!1),[m,p]=P.useState(null),[g,b]=P.useState(null),[y,v]=P.useState(null),N=t||e.user?.storeId;console.log(" InventoryManagement - effectiveStoreId:",N),console.log(" InventoryManagement - selectedStoreId prop:",t),console.log(" InventoryManagement - user storeId:",e.user?.storeId);const k=e.inventory.filter(C=>{const I=C.date===a,B=N?C.storeId===N:!0;return I&&B}),w=e.overheads.filter(C=>{const I=C.date===a,B=N?C.storeId===N:!0;return I&&B}),A=e.fixedCosts.filter(C=>{const I=C.date===a,B=N?C.storeId===N:!0;return I&&B}),S=k.reduce((C,I)=>C+I.totalCost,0),_=w.reduce((C,I)=>C+I.amount,0),E=A.reduce((C,I)=>C+I.amount,0);return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(Tg,{selectedDate:a,onDateChange:s}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[n.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",S.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[n.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",_.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[n.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",E.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[n.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(S+_+E).toLocaleString()]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[n.jsxs("button",{onClick:()=>o(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add inventory items",children:[n.jsx(qi,{className:"w-4 h-4"}),"Add Inventory Item"]}),n.jsxs("button",{onClick:()=>d(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add overhead costs",children:[n.jsx(qi,{className:"w-4 h-4"}),"Add Overhead"]}),n.jsxs("button",{onClick:()=>f(!0),disabled:!e.isManager,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:e.isManager?"":"Only managers can add fixed costs",children:[n.jsx(qi,{className:"w-4 h-4"}),"Add Fixed Cost"]})]}),n.jsx(sz,{inventory:k,overheads:w,fixedCosts:A,onEditInventory:C=>{p(C),o(!0)},onDeleteInventory:e.deleteInventoryItem,onEditOverhead:C=>{b(C),d(!0)},onDeleteOverhead:e.deleteOverheadItem,onEditFixedCost:C=>{v(C),f(!0)},onDeleteFixedCost:e.deleteFixedCostItem,isManager:e.isManager}),i&&n.jsx(tz,{selectedDate:a,editingItem:m,onSubmit:async C=>{try{m?(await e.updateInventoryItem(m.id,C),o(!1),p(null),ur.success("Inventory item updated successfully!")):(await e.addInventoryItem(C),ur.success("Inventory item added! You can add another item."))}catch{ur.error("Failed to save inventory item. Please try again.")}},onClose:()=>{o(!1),p(null)}}),l&&n.jsx(nz,{selectedDate:a,editingItem:g,employees:r,onSubmit:async C=>{try{g?await e.updateOverheadItem(g.id,C):await e.addOverheadItem(C),d(!1),b(null),ur.success("Overhead cost saved successfully!")}catch{alert("Failed to save overhead cost. Please try again.")}},onClose:()=>{d(!1),b(null)}}),u&&n.jsx(az,{selectedDate:a,editingItem:y,onSubmit:async C=>{try{y?await e.updateFixedCostItem(y.id,C):await e.addFixedCostItem(C),f(!1),v(null),ur.success("Fixed cost saved successfully!")}catch{alert("Failed to save fixed cost. Please try again.")}},onClose:()=>{f(!1),v(null)}})]})}function M2({context:e,selectedStoreId:t,onClose:r,onSaveSuccess:a,isProductionHouse:s,isStoreFinishedProducts:i=!1,currentCalculatedStock:o}){const[l,d]=P.useState([]),[u,f]=P.useState(!0),[m,p]=P.useState(!1),[g,b]=P.useState(null),[y,v]=P.useState(null),[N,k]=P.useState(!1),w=t||e.user?.storeId,A=e.stores?.find(L=>L.id===w),S=t||e.user?.storeId,_=s?e.productionHouses?.find(L=>L.id===S):e.stores?.find(L=>L.id===S),E=_?.name,C=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});new Date().getDate(),P.useEffect(()=>{I(),U()},[]);async function I(){try{if(f(!0),s||i)await B();else{const D=(await vg(e.user?.accessToken||"")).filter(ee=>w?ee.storeId===w:!1),Y=new Map;D.forEach(ee=>{Y.has(ee.id)||Y.set(ee.id,ee)});const V=Array.from(Y.values()).map(ee=>({itemId:ee.id,itemName:ee.itemName,category:ee.category,unit:ee.unit,systemQuantity:ee.quantity,actualQuantity:ee.quantity,difference:0,adjustmentType:null,notes:""}));d(V)}}catch(L){console.error("Error loading inventory:",L),v("Failed to load inventory data")}finally{f(!1)}}async function B(){let L=[];try{L=await wg(e.user?.accessToken||""),console.log(" Fetched raw production data for recalibration:",{totalRecords:L.length,sampleRecord:L[0]})}catch(We){console.error(" Failed to fetch production data for recalibration:",We),L=e.productionData||[]}const D=new Date().toISOString().substring(0,7);let Y=w,V=w,ee=w;if(w&&!w.startsWith("STORE-")){const We=e.productionHouses?.find(Pe=>Pe.uuid===w);We&&(console.log(" Resolved UUID to production house:",{uuid:w,storeId:We.id,name:We.name}),Y=We.id,V=w,ee=We.id)}let ge=Y;if(i)ee=Y;else if(Y&&Y.startsWith("STORE-")){const We=e.productionHouses?.find(Pe=>Pe.id===Y);if(We)V=We.uuid,ge=Y,ee=Y;else{const Pe=e.stores?.find(Ne=>Ne.id===Y);Pe?.productionHouseId&&(V=Pe.productionHouseId,ee=V)}}else ee=Y;let ke,Ce;if(i)ke=(e.productionRequests||[]).filter(Ne=>{if(Ne.status!=="delivered"||Ne.storeId!==w)return!1;const tt=Ne.deliveredDate||Ne.requestDate||Ne.createdAt;return tt&&tt.startsWith(D)}).reduce((Ne,tt)=>({chicken:Ne.chicken+(tt.chicken||0),chickenCheese:Ne.chickenCheese+(tt.chickenCheese||0),veg:Ne.veg+(tt.veg||0),cheeseCorn:Ne.cheeseCorn+(tt.cheeseCorn||0),paneer:Ne.paneer+(tt.paneer||0),vegKurkure:Ne.vegKurkure+(tt.vegKurkure||0),chickenKurkure:Ne.chickenKurkure+(tt.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Ce=(e.categorySalesData||[]).filter(Ne=>Ne.storeId!==w?!1:Ne.date&&Ne.date.startsWith(D)).reduce((Ne,tt)=>({chicken:Ne.chicken+(tt.data["Chicken Momos"]||0),chickenCheese:Ne.chickenCheese+(tt.data["Chicken Cheese Momos"]||0),veg:Ne.veg+(tt.data["Veg Momos"]||0),cheeseCorn:Ne.cheeseCorn+(tt.data["Corn Cheese Momos"]||0),paneer:Ne.paneer+(tt.data["Paneer Momos"]||0),vegKurkure:Ne.vegKurkure+(tt.data["Veg Kurkure Momos"]||0),chickenKurkure:Ne.chickenKurkure+(tt.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});else{console.log(" Production filtering for recalibration:",{currentMonth:D,productionHouseUUID:V,effectiveStoreId:w,totalProductionRecords:L.length,sampleProductionRecord:L[0],firstProductionDates:L.slice(0,3).map(He=>({date:He.date,type:typeof He.date}))});const We=L.filter(He=>{const pt=He.date||"",Vt=pt.startsWith(D)||pt.substring(0,7)===D,hr=He.storeId===V||He.storeId===w||He.storeId===ge,Jt=He.productionHouseId===V||He.productionHouseId===w||He.productionHouseId===ge,Dr=Vt&&(hr||Jt);return console.log(" Checking production record:",{date:He.date,dateSubstring:pt.substring(0,7),currentMonth:D,dateMatch:Vt,pStoreId:He.storeId,pProductionHouseId:He.productionHouseId,productionHouseUUID:V,effectiveStoreId:w,originalStoreId:ge,matchesStoreId:hr,matchesProductionHouseId:Jt,finalMatch:Dr}),Dr});console.log(" Filtered production count:",We.length),console.log(" Sample filtered production:",We[0]);const Pe=We.reduce((He,pt)=>({chicken:He.chicken+(pt.chickenMomos?.final||0),chickenCheese:He.chickenCheese+(pt.chickenCheeseMomos?.final||0),veg:He.veg+(pt.vegMomos?.final||0),cheeseCorn:He.cheeseCorn+(pt.cheeseCornMomos?.final||0),paneer:He.paneer+(pt.paneerMomos?.final||0),vegKurkure:He.vegKurkure+(pt.vegKurkureMomos?.final||0),chickenKurkure:He.chickenKurkure+(pt.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});ke={chicken:Pe.chicken-Pe.chickenKurkure,chickenCheese:Pe.chickenCheese,veg:Pe.veg-Pe.vegKurkure,cheeseCorn:Pe.cheeseCorn,paneer:Pe.paneer,vegKurkure:Pe.vegKurkure,chickenKurkure:Pe.chickenKurkure},console.log(" Raw production (before parent-child adjustment):",Pe),console.log(" Total produced (after parent-child adjustment):",ke),console.log(`    Chicken Momo: ${Pe.chicken} produced - ${Pe.chickenKurkure} used for kurkure = ${ke.chicken} net`),console.log(`    Veg Momo: ${Pe.veg} produced - ${Pe.vegKurkure} used for kurkure = ${ke.veg} net`),console.log(` Filtering requests - productionHouseUUID: ${V}, effectiveStoreId: ${w}, currentMonth: ${D}`),console.log(` Total production requests in context: ${(e.productionRequests||[]).length}`);let Ne=!1;Ce=(e.productionRequests||[]).filter(He=>{if(He.status!=="delivered")return!1;const pt=He.deliveredDate||He.requestDate||He.createdAt;if(!pt||!pt.startsWith(D))return!1;const Vt=e.stores?.find(Jt=>Jt.id===He.storeId),hr=Vt?.productionHouseId===V||Vt?.productionHouseId===w;return He.status==="delivered"&&pt?.startsWith(D)&&(console.log(` Request ${He.requestId}: storeId=${He.storeId}, store.productionHouseId=${Vt?.productionHouseId}, comparing to UUID=${V} or storeId=${w}, matches=${hr}`),hr&&!Ne&&(console.log(" First matching request structure:",{requestId:He.requestId,chickenMomos:He.chickenMomos,cheeseCornMomos:He.cheeseCornMomos,allKeys:Object.keys(He)}),Ne=!0)),hr}).reduce((He,pt)=>({chicken:He.chicken+(pt.chicken||0),chickenCheese:He.chickenCheese+(pt.chickenCheese||0),veg:He.veg+(pt.veg||0),cheeseCorn:He.cheeseCorn+(pt.cheeseCorn||0),paneer:He.paneer+(pt.paneer||0),vegKurkure:He.vegKurkure+(pt.vegKurkure||0),chickenKurkure:He.chickenKurkure+(pt.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}const ce=await M(ee,D,i);let me=null,Oe=null;try{const We=i?"store":"production_house",Pe=await cl(e.user?.accessToken||"",ee,We);if(Pe?.record){const Ne=Pe.record.date,tt=Ne.substring(0,7),He=parseInt(Ne.substring(8,10));if(console.log(" Latest recalibration check:",{recalDate:Ne,recalMonth:tt,currentMonth:D,recalDay:He,isSameMonth:tt===D,isMidMonth:He>1}),tt===D&&He>1){console.log(" Found mid-month recalibration - using as baseline!"),Oe=Ne,me={};const pt=Pe.record.items||[];for(const Vt of pt){const hr=e.inventoryItems?.find(Jt=>Jt.name===Vt.itemId||Jt.id===Vt.itemId);if(hr){const Dr=hr.name.replace(/_([a-z])/g,Hr=>Hr[1].toUpperCase()).replace(/Momo(s)?$/i,"");me[Dr]=Vt.actualQuantity,console.log(`   Recal stock: ${Vt.itemId} -> ${Dr} = ${Vt.actualQuantity}`)}}console.log(" Mid-month recalibration stock:",me)}}}catch(We){console.error("Error fetching latest recalibration for mid-month check:",We)}if(me&&Oe&&!i){console.log(" Recalculating with mid-month recalibration baseline...");const We=Oe.substring(0,10),Ne=L.filter(He=>(He.date||"")>We&&(He.storeId===V||He.storeId===w||He.storeId===ge||He.productionHouseId===V||He.productionHouseId===w||He.productionHouseId===ge)).reduce((He,pt)=>({chicken:He.chicken+(pt.chickenMomos?.final||0),chickenCheese:He.chickenCheese+(pt.chickenCheeseMomos?.final||0),veg:He.veg+(pt.vegMomos?.final||0),cheeseCorn:He.cheeseCorn+(pt.cheeseCornMomos?.final||0),paneer:He.paneer+(pt.paneerMomos?.final||0),vegKurkure:He.vegKurkure+(pt.vegKurkureMomos?.final||0),chickenKurkure:He.chickenKurkure+(pt.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});ke={chicken:Ne.chicken-Ne.chickenKurkure,chickenCheese:Ne.chickenCheese,veg:Ne.veg-Ne.vegKurkure,cheeseCorn:Ne.cheeseCorn,paneer:Ne.paneer,vegKurkure:Ne.vegKurkure,chickenKurkure:Ne.chickenKurkure},Ce=(e.productionRequests||[]).filter(He=>{if(He.status!=="delivered")return!1;const pt=He.deliveredDate||He.requestDate||He.createdAt;if(!pt||pt<Oe)return!1;const Vt=e.stores?.find(hr=>hr.id===He.storeId);return Vt?.productionHouseId===V||Vt?.productionHouseId===w}).reduce((He,pt)=>({chicken:He.chicken+(pt.chicken||0),chickenCheese:He.chickenCheese+(pt.chickenCheese||0),veg:He.veg+(pt.veg||0),cheeseCorn:He.cheeseCorn+(pt.cheeseCorn||0),paneer:He.paneer+(pt.paneer||0),vegKurkure:He.vegKurkure+(pt.vegKurkure||0),chickenKurkure:He.chickenKurkure+(pt.chickenKurkure||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),console.log("  Production AFTER recalibration:",ke),console.log("  Deliveries AFTER recalibration:",Ce)}console.log(" Recalibration - Location ID:",ee),console.log(" Recalibration - Is Store Finished Products:",i),console.log(" Recalibration - Opening Balance:",ce),console.log(" Recalibration - Mid-Month Recal Stock:",me),console.log(" Recalibration - Total Received/Produced:",ke),console.log(" Recalibration - Total Sent/Sold:",Ce);const G=e.inventoryItems?.filter(We=>We.category==="finished_product"&&We.isActive&&(We.linkedEntityType==="global"||We.linkedEntityType==="production_house"&&We.linkedEntityId===ee||We.linkedEntityType==="store"&&We.linkedEntityId===w))||[];console.log(" Recalibration - Finished Products from Context:",G.length);const ze=We=>We.replace(/_([a-z])/g,Pe=>Pe[1].toUpperCase()),Ye=We=>{const Pe=We.replace(/_momo(s)?$/i,"");return ze(Pe)},ct=G.map(We=>{const Pe=Ye(We.name);let Ne;if(o&&o[Pe]!==void 0)Ne=o[Pe],console.log(` ${We.displayName} (${We.name} -> ${Pe}): Using pre-calculated stock from Analytics = ${Ne}`);else{const tt=ce[Pe]||0,He=ke[Pe]||0,pt=Ce[Pe]||0;Ne=tt+He-pt,console.log(` ${We.displayName} (${We.name} -> ${Pe}): Opening=${tt}, Produced=${He}, Sent=${pt}, Stock=${Ne}`)}return{itemId:We.name,itemName:We.displayName,category:We.category,unit:We.unit,systemQuantity:Ne,actualQuantity:Ne,difference:0,adjustmentType:null,notes:""}});d(ct)}async function M(L,D,Y){if(!L)return{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};try{const V=Y?"store":"production_house",[ee,ge]=D.split("-").map(Number);let ke=ee,Ce=ge-1;Ce===0&&(Ce=12,ke=ee-1);const ce=`${ke}-${String(Ce).padStart(2,"0")}`;console.log(" fetchOpeningBalance - Location ID:",L),console.log(" fetchOpeningBalance - Location Type:",V),console.log(" fetchOpeningBalance - Current Month:",D),console.log(" fetchOpeningBalance - Looking for recalibration from:",ce);let me=await cl(e.user?.accessToken||"",L,V);if(!me?.record&&!Y){console.log("   No recalibration found with UUID, checking with mapped store ID...");const Oe=e.stores?.filter(G=>G.productionHouseId===L)||[];console.log("   Stores mapped to this production house:",Oe.map(G=>G.id));for(const G of Oe)if(console.log(`   Trying to fetch recalibration with store ID: ${G.id}`),me=await cl(e.user?.accessToken||"",G.id,V),me?.record){console.log(`    Found recalibration using store ID: ${G.id}`);break}}if(me?.record){const Oe=me.record.date.substring(0,7);console.log(" Recalibration Response:",me.record);const G=me.record.isOpeningBalance;if(console.log(" Recalibration date comparison:",{recalDate:Oe,currentMonth:D,previousMonthStr:ce,isOpeningBalance:G,isCurrentMonth:Oe===D,isPreviousMonth:Oe===ce,isOlder:Oe<ce}),Oe===D&&(G===!0||G===void 0)||Oe===ce||Oe<ce){const Ye=Pe=>Pe.replace(/_([a-z])/g,Ne=>Ne[1].toUpperCase()),ct=Pe=>{const Ne=Pe.replace(/_momo(s)?$/i,"");return Ye(Ne)},We={};return Oe===D&&G?(console.log(" Using current month opening balance recalibration (done on 1st)"),console.log("   Recalibration items:",me.record.items)):Oe===ce?console.log(" Using previous month recalibration as opening balance"):console.log(" Using older recalibration as opening balance from:",Oe),me.record.items.forEach(Pe=>{const Ne=ct(Pe.itemId);We[Ne]=Pe.actualQuantity,console.log(`   Opening balance mapping: ${Pe.itemId} -> ${Ne} = ${Pe.actualQuantity}`)}),console.log("   Parsed opening balance:",We),console.log(" Opening Balance Calculated:",We),We}}return console.log(" fetchOpeningBalance - No suitable recalibration found, calculating from transactions"),await O(L,D,Y)}catch(V){return console.error("Error fetching opening balance:",V),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}}async function O(L,D,Y){const[V,ee]=D.split("-").map(Number);let ge=V,ke=ee-1;ke===0&&(ke=12,ge=V-1);const Ce=`${ge}-${String(ke).padStart(2,"0")}`;if(console.log(" calculatePreviousMonthStock - Previous Month:",Ce),console.log(" calculatePreviousMonthStock - Is Store:",Y),Y){const ce=(e.productionRequests||[]).filter(G=>{if(G.status!=="delivered"||G.storeId!==L)return!1;const ze=G.deliveredDate||G.requestDate||G.createdAt;return ze&&ze.startsWith(Ce)}).reduce((G,ze)=>({chicken:G.chicken+(ze.chickenMomos||0),chickenCheese:G.chickenCheese+(ze.chickenCheeseMomos||0),veg:G.veg+(ze.vegMomos||0),cheeseCorn:G.cheeseCorn+(ze.cheeseCornMomos||0),paneer:G.paneer+(ze.paneerMomos||0),vegKurkure:G.vegKurkure+(ze.vegKurkureMomos||0),chickenKurkure:G.chickenKurkure+(ze.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Received:",ce),console.log(" calculatePreviousMonthStock - Context categorySalesData length:",(e.categorySalesData||[]).length);const me=(e.categorySalesData||[]).filter(G=>G.storeId!==L?!1:G.date&&G.date.startsWith(Ce)).reduce((G,ze)=>({chicken:G.chicken+(ze.data["Chicken Momos"]||0),chickenCheese:G.chickenCheese+(ze.data["Chicken Cheese Momos"]||0),veg:G.veg+(ze.data["Veg Momos"]||0),cheeseCorn:G.cheeseCorn+(ze.data["Corn Cheese Momos"]||0),paneer:G.paneer+(ze.data["Paneer Momos"]||0),vegKurkure:G.vegKurkure+(ze.data["Veg Kurkure Momos"]||0),chickenKurkure:G.chickenKurkure+(ze.data["Chicken Kurkure Momos"]||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0});console.log(" calculatePreviousMonthStock - Previous Sold:",me);const Oe={chicken:ce.chicken-me.chicken,chickenCheese:ce.chickenCheese-me.chickenCheese,veg:ce.veg-me.veg,cheeseCorn:ce.cheeseCorn-me.cheeseCorn,paneer:ce.paneer-me.paneer,vegKurkure:ce.vegKurkure-me.vegKurkure,chickenKurkure:ce.chickenKurkure-me.chickenKurkure};return console.log(" calculatePreviousMonthStock - Calculated Closing Stock:",Oe),Oe}else{const me=(e.productionData||[]).filter(ze=>ze.date.startsWith(Ce)?ze.storeId===L||ze.productionHouseId===L:!1).reduce((ze,Ye)=>({chicken:ze.chicken+(Ye.chickenMomos?.final||0),chickenCheese:ze.chickenCheese+(Ye.chickenCheeseMomos?.final||0),veg:ze.veg+(Ye.vegMomos?.final||0),cheeseCorn:ze.cheeseCorn+(Ye.cheeseCornMomos?.final||0),paneer:ze.paneer+(Ye.paneerMomos?.final||0),vegKurkure:ze.vegKurkure+(Ye.vegKurkureMomos?.final||0),chickenKurkure:ze.chickenKurkure+(Ye.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),Oe=(e.productionRequests||[]).filter(ze=>{if(ze.status!=="delivered")return!1;const Ye=ze.deliveredDate||ze.requestDate||ze.createdAt;if(!Ye||!Ye.startsWith(Ce))return!1;const ct=e.stores?.find(We=>We.id===ze.storeId);return ct?.productionHouseId===L||ct?.productionHouseId===w}).reduce((ze,Ye)=>({chicken:ze.chicken+(Ye.chickenMomos||0),chickenCheese:ze.chickenCheese+(Ye.chickenCheeseMomos||0),veg:ze.veg+(Ye.veg||0),cheeseCorn:ze.cheeseCorn+(Ye.cheeseCorn||0),paneer:ze.paneer+(Ye.paneerMomos||0),vegKurkure:ze.vegKurkure+(Ye.vegKurkureMomos||0),chickenKurkure:ze.chickenKurkure+(Ye.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),G={chicken:me.chicken-me.chickenKurkure,chickenCheese:me.chickenCheese,veg:me.veg-me.vegKurkure,cheeseCorn:me.cheeseCorn,paneer:me.paneer,vegKurkure:me.vegKurkure,chickenKurkure:me.chickenKurkure};return{chicken:G.chicken-Oe.chicken,chickenCheese:G.chickenCheese-Oe.chickenCheese,veg:G.veg-Oe.veg,cheeseCorn:G.cheeseCorn-Oe.cheeseCorn,paneer:G.paneer-Oe.paneer,vegKurkure:G.vegKurkure-Oe.vegKurkure,chickenKurkure:G.chickenKurkure-Oe.chickenKurkure}}}async function U(){try{const L=w;if(!L)return;const D=s?"production_house":"store",Y=await cl(e.user?.accessToken||"",L,D);Y.lastRecalibration&&b(Y.lastRecalibration)}catch(L){console.error("Error checking last recalibration:",L)}}function ie(L,D){const Y=parseFloat(D)||0;d(l.map(V=>{if(V.itemId===L){const ee=Y-V.systemQuantity;return{...V,actualQuantity:Y,difference:ee,adjustmentType:ee===0?null:V.adjustmentType}}return V}))}function X(L,D){d(l.map(Y=>Y.itemId===L?{...Y,adjustmentType:D}:Y))}function re(L,D){d(l.map(Y=>Y.itemId===L?{...Y,notes:D}:Y))}async function oe(){if(l.filter(D=>D.difference!==0&&!D.adjustmentType).length>0){v("Please select adjustment type (Wastage or Counting Error) for all items with differences");return}try{p(!0),v(null),console.log(` Submitting recalibration:
        - locationId: ${S}
        - locationType: ${s?"production_house":"store"}
        - locationName: ${E}
        - isProductionHouse: ${s}`);const D={locationId:S,locationType:s?"production_house":"store",locationName:E,items:l.map(Y=>({itemId:Y.itemId,itemName:Y.itemName,category:Y.category,unit:Y.unit,systemQuantity:Y.systemQuantity,actualQuantity:Y.actualQuantity,difference:Y.difference,adjustmentType:Y.adjustmentType,notes:Y.notes}))};await C5(e.user?.accessToken||"",D),k(!0),setTimeout(()=>{r(),a&&a()},2e3)}catch(D){console.error("Error submitting recalibration:",D),v(D instanceof Error?D.message:"Failed to submit recalibration")}finally{p(!1)}}const Q=l.length,F=l.filter(L=>L.difference!==0).length,J=l.filter(L=>L.adjustmentType==="wastage"&&L.difference<0).reduce((L,D)=>L+Math.abs(D.difference),0);return u?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wo,{className:"w-6 h-6 animate-spin text-purple-600"}),n.jsx("span",{className:"text-gray-700",children:"Loading inventory data..."})]})})}):N?n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-md",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(or,{className:"w-8 h-8 text-green-600"})}),n.jsx("h3",{className:"text-xl text-gray-900",children:"Recalibration Submitted!"}),n.jsx("p",{className:"text-gray-600 text-center",children:"Your recalibration has been submitted for approval."}),n.jsx("p",{className:"text-sm text-gray-500 text-center",children:"A manager or cluster head will review and approve it."})]})})}):n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full my-8",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Or,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Monthly Stock Recalibration"}),n.jsxs("p",{className:"text-white/80 text-sm",children:[E||A?.name," - ",C]})]})]}),n.jsx("button",{onClick:r,className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(Qn,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Items"}),n.jsx("div",{className:"text-2xl text-purple-600",children:Q})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-orange-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Items with Difference"}),n.jsx("div",{className:"text-2xl text-orange-600",children:F})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border-2 border-red-200",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),n.jsx("div",{className:"text-2xl text-red-600",children:J.toFixed(2)})]})]}),g&&n.jsxs("div",{className:"mt-4 bg-blue-50 border-2 border-blue-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(ja,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm text-blue-900 font-medium mb-1",children:"Last recalibration was performed on:"}),n.jsx("div",{className:"text-sm text-blue-700",children:Ag(g,!0)}),n.jsxs("div",{className:"text-xs text-blue-600 mt-1 flex items-center gap-1",children:[n.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full"}),"Timezone: Indian Standard Time (GMT+5:30)"]})]})]}),n.jsxs("div",{className:"mt-4 bg-green-50 border-2 border-green-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(or,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-green-900",children:"Stock recalibration is now enabled for the entire month. Operations Managers and Cluster Heads will be notified when you submit a recalibration."})]})]}),n.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:n.jsx("div",{className:"space-y-4",children:l.map((L,D)=>n.jsxs("div",{className:`bg-gradient-to-r ${L.difference!==0?"from-red-50 to-orange-50 border-red-200":"from-gray-50 to-gray-100 border-gray-200"} border-2 rounded-xl p-4`,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsxs("div",{className:"text-sm text-gray-500",children:["Item ",D+1]}),n.jsx("div",{className:"text-gray-900",children:L.itemName}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[L.category.replace(/_/g," "),"  ",L.unit]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Current Stock"}),n.jsxs("div",{className:"text-gray-900",children:[L.systemQuantity," ",L.unit]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Actual Count"}),n.jsx("input",{type:"number",step:"0.01",value:L.actualQuantity,onChange:Y=>ie(L.itemId,Y.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter count"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Difference"}),n.jsxs("div",{className:`text-lg ${L.difference>0?"text-green-600":L.difference<0?"text-red-600":"text-gray-600"}`,children:[L.difference>0?"+":"",L.difference.toFixed(2)]})]}),n.jsx("div",{className:"md:col-span-3",children:L.difference!==0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Adjustment Type *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>X(L.itemId,"wastage"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${L.adjustmentType==="wastage"?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-400"}`,children:"Wastage"}),n.jsx("button",{onClick:()=>X(L.itemId,"counting_error"),className:`px-3 py-1.5 rounded-lg text-sm border-2 transition-all ${L.adjustmentType==="counting_error"?"bg-orange-600 text-white border-orange-600":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:"Counting Error"})]})]})})]}),L.difference!==0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (Optional)"}),n.jsx("input",{type:"text",value:L.notes,onChange:Y=>re(L.itemId,Y.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Add any additional notes..."})]})]},L.itemId))})}),y&&n.jsx("div",{className:"px-6 pb-4",children:n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-3 flex items-start gap-3",children:[n.jsx(ja,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm text-red-900",children:y})]})}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:r,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:oe,disabled:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vi,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})})}function Fj({context:e,selectedStoreId:t}){const[r,a]=P.useState(new Date().toISOString().split("T")[0]),[s,i]=P.useState(!1),o=t||e.user?.storeId,l=e.inventory.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),d=e.overheads.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),u=e.fixedCosts.filter(N=>{const k=N.date===r,w=o?N.storeId===o:!0;return k&&w}),f=l.reduce((N,k)=>N+k.totalCost,0),m=d.reduce((N,k)=>N+k.amount,0),p=u.reduce((N,k)=>N+k.amount,0),g=l.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),b=d.reduce((N,k)=>(N[k.category]||(N[k.category]=[]),N[k.category].push(k),N),{}),y={fresh_produce:"Fresh Vegetables",spices_seasonings:"Grocery",dairy:"Dairy Products",meat:"Meat",packaging:"Packaging Materials",staff_essentials:"Staff Essentials",fuel:"Fuel",travel:"Travel",transportation:"Transportation",marketing:"Marketing",service_charge:"Service Charge",repair:"Repair & Maintenance",party:"Party Expenses",lunch:"Lunch",miscellaneous:"Miscellaneous",electricity:"Electricity",rent:"Rent"},v=e.user?.role==="cluster_head";return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xo,{className:"w-6 h-6 text-blue-600"}),n.jsx("h1",{className:"text-2xl text-gray-900",children:"Inventory Overview"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-50 border-2 border-amber-200 rounded-lg",children:[n.jsx(bj,{className:"w-4 h-4 text-amber-600"}),n.jsx("span",{className:"text-sm text-amber-800",children:"View Only"})]})]}),n.jsx(Tg,{selectedDate:r,onDateChange:a}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 shadow-lg shadow-blue-500/30",children:[n.jsx("p",{className:"text-sm text-blue-100 uppercase tracking-wide",children:"Inventory Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",f.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 shadow-lg shadow-orange-500/30",children:[n.jsx("p",{className:"text-sm text-orange-100 uppercase tracking-wide",children:"Overhead Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",m.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 shadow-lg shadow-green-500/30",children:[n.jsx("p",{className:"text-sm text-green-100 uppercase tracking-wide",children:"Fixed Cost"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",p.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 shadow-lg shadow-purple-500/30",children:[n.jsx("p",{className:"text-sm text-purple-100 uppercase tracking-wide",children:"Total Expenses"}),n.jsxs("p",{className:"text-white text-2xl mt-2",children:["",(f+m+p).toLocaleString()]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(dr,{className:"w-5 h-5 text-blue-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Inventory Items"})]}),Object.keys(g).length>0?n.jsx("div",{className:"space-y-6",children:Object.entries(g).map(([N,k])=>n.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Item Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Quantity"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Cost/Unit"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:w.itemName||n.jsx("span",{className:"text-red-600 italic",children:" Missing Name"})}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:[w.quantity," ",w.unit]}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:["",(w.costPerUnit||0).toFixed(2)]}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",(w.totalCost||0).toLocaleString()]})]},w.id))})]})})]},N))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(dr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No inventory items for this date"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(jn,{className:"w-5 h-5 text-orange-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Overhead Costs"})]}),Object.keys(b).length>0?n.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([N,k])=>n.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:y[N]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:w.description}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",w.amount.toLocaleString()]})]},w.id))})]})})]},N))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(jn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No overhead costs for this date"})]})]}),u.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(pn,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-xl text-gray-900",children:"Fixed Costs"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(N=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:y[N.category]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.description}),n.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900",children:["",N.amount.toLocaleString()]})]},N.id))})]})})]}),v&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",onClick:()=>i(!0),children:[n.jsx(Or,{className:"w-5 h-5 mr-2"}),"Monthly Stock Recalibration"]})}),s&&n.jsx(M2,{context:e,selectedStoreId:o,onClose:()=>i(!1)}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(bj,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsx("div",{children:n.jsx("p",{className:"text-sm text-blue-800",children:v?"You are viewing inventory data in read-only mode. Only Operations Managers can add or edit inventory items.":"You are viewing inventory data in read-only mode. To add or modify inventory items, please contact your Operations Manager."})})]})})]})}function K5(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=K5(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function yr(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=K5(e))&&(a&&(a+=" "),a+=t);return a}var tv,vC;function ws(){if(vC)return tv;vC=1;var e=Array.isArray;return tv=e,tv}var rv,bC;function V5(){if(bC)return rv;bC=1;var e=typeof dm=="object"&&dm&&dm.Object===Object&&dm;return rv=e,rv}var nv,wC;function Ji(){if(wC)return nv;wC=1;var e=V5(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return nv=r,nv}var av,jC;function J0(){if(jC)return av;jC=1;var e=Ji(),t=e.Symbol;return av=t,av}var sv,NC;function xz(){if(NC)return sv;NC=1;var e=J0(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),d=o[s];try{o[s]=void 0;var u=!0}catch{}var f=a.call(o);return u&&(l?o[s]=d:delete o[s]),f}return sv=i,sv}var iv,kC;function yz(){if(kC)return iv;kC=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return iv=r,iv}var ov,SC;function $o(){if(SC)return ov;SC=1;var e=J0(),t=xz(),r=yz(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return ov=o,ov}var lv,_C;function Lo(){if(_C)return lv;_C=1;function e(t){return t!=null&&typeof t=="object"}return lv=e,lv}var cv,EC;function pu(){if(EC)return cv;EC=1;var e=$o(),t=Lo(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return cv=a,cv}var dv,CC;function R2(){if(CC)return dv;CC=1;var e=ws(),t=pu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return dv=s,dv}var uv,AC;function wl(){if(AC)return uv;AC=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return uv=e,uv}var hv,TC;function F2(){if(TC)return hv;TC=1;var e=$o(),t=wl(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var d=e(l);return d==a||d==s||d==r||d==i}return hv=o,hv}var fv,OC;function vz(){if(OC)return fv;OC=1;var e=Ji(),t=e["__core-js_shared__"];return fv=t,fv}var mv,PC;function bz(){if(PC)return mv;PC=1;var e=vz(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return mv=r,mv}var pv,IC;function G5(){if(IC)return pv;IC=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return pv=r,pv}var gv,DC;function wz(){if(DC)return gv;DC=1;var e=F2(),t=bz(),r=wl(),a=G5(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,u=l.hasOwnProperty,f=RegExp("^"+d.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!r(p)||t(p))return!1;var g=e(p)?f:i;return g.test(a(p))}return gv=m,gv}var xv,MC;function jz(){if(MC)return xv;MC=1;function e(t,r){return t?.[r]}return xv=e,xv}var yv,RC;function Sc(){if(RC)return yv;RC=1;var e=wz(),t=jz();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return yv=r,yv}var vv,FC;function Og(){if(FC)return vv;FC=1;var e=Sc(),t=e(Object,"create");return vv=t,vv}var bv,$C;function Nz(){if($C)return bv;$C=1;var e=Og();function t(){this.__data__=e?e(null):{},this.size=0}return bv=t,bv}var wv,LC;function kz(){if(LC)return wv;LC=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return wv=e,wv}var jv,BC;function Sz(){if(BC)return jv;BC=1;var e=Og(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return jv=s,jv}var Nv,UC;function _z(){if(UC)return Nv;UC=1;var e=Og(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return Nv=a,Nv}var kv,HC;function Ez(){if(HC)return kv;HC=1;var e=Og(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return kv=r,kv}var Sv,qC;function Cz(){if(qC)return Sv;qC=1;var e=Nz(),t=kz(),r=Sz(),a=_z(),s=Ez();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,Sv=i,Sv}var _v,zC;function Az(){if(zC)return _v;zC=1;function e(){this.__data__=[],this.size=0}return _v=e,_v}var Ev,WC;function $2(){if(WC)return Ev;WC=1;function e(t,r){return t===r||t!==t&&r!==r}return Ev=e,Ev}var Cv,KC;function Pg(){if(KC)return Cv;KC=1;var e=$2();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return Cv=t,Cv}var Av,VC;function Tz(){if(VC)return Av;VC=1;var e=Pg(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return Av=a,Av}var Tv,GC;function Oz(){if(GC)return Tv;GC=1;var e=Pg();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return Tv=t,Tv}var Ov,YC;function Pz(){if(YC)return Ov;YC=1;var e=Pg();function t(r){return e(this.__data__,r)>-1}return Ov=t,Ov}var Pv,XC;function Iz(){if(XC)return Pv;XC=1;var e=Pg();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return Pv=t,Pv}var Iv,JC;function Ig(){if(JC)return Iv;JC=1;var e=Az(),t=Tz(),r=Oz(),a=Pz(),s=Iz();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,Iv=i,Iv}var Dv,QC;function L2(){if(QC)return Dv;QC=1;var e=Sc(),t=Ji(),r=e(t,"Map");return Dv=r,Dv}var Mv,ZC;function Dz(){if(ZC)return Mv;ZC=1;var e=Cz(),t=Ig(),r=L2();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Mv=a,Mv}var Rv,eA;function Mz(){if(eA)return Rv;eA=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Rv=e,Rv}var Fv,tA;function Dg(){if(tA)return Fv;tA=1;var e=Mz();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Fv=t,Fv}var $v,rA;function Rz(){if(rA)return $v;rA=1;var e=Dg();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return $v=t,$v}var Lv,nA;function Fz(){if(nA)return Lv;nA=1;var e=Dg();function t(r){return e(this,r).get(r)}return Lv=t,Lv}var Bv,aA;function $z(){if(aA)return Bv;aA=1;var e=Dg();function t(r){return e(this,r).has(r)}return Bv=t,Bv}var Uv,sA;function Lz(){if(sA)return Uv;sA=1;var e=Dg();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return Uv=t,Uv}var Hv,iA;function B2(){if(iA)return Hv;iA=1;var e=Dz(),t=Rz(),r=Fz(),a=$z(),s=Lz();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,Hv=i,Hv}var qv,oA;function Y5(){if(oA)return qv;oA=1;var e=B2(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var u=a.apply(this,o);return i.cache=d.set(l,u)||d,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,qv=r,qv}var zv,lA;function Bz(){if(lA)return zv;lA=1;var e=Y5(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return zv=r,zv}var Wv,cA;function Uz(){if(cA)return Wv;cA=1;var e=Bz(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,d,u){i.push(d?u.replace(r,"$1"):l||o)}),i});return Wv=a,Wv}var Kv,dA;function U2(){if(dA)return Kv;dA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return Kv=e,Kv}var Vv,uA;function Hz(){if(uA)return Vv;uA=1;var e=J0(),t=U2(),r=ws(),a=pu(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Vv=o,Vv}var Gv,hA;function X5(){if(hA)return Gv;hA=1;var e=Hz();function t(r){return r==null?"":e(r)}return Gv=t,Gv}var Yv,fA;function J5(){if(fA)return Yv;fA=1;var e=ws(),t=R2(),r=Uz(),a=X5();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return Yv=s,Yv}var Xv,mA;function Mg(){if(mA)return Xv;mA=1;var e=pu();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return Xv=t,Xv}var Jv,pA;function H2(){if(pA)return Jv;pA=1;var e=J5(),t=Mg();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return Jv=r,Jv}var Qv,gA;function Q5(){if(gA)return Qv;gA=1;var e=H2();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return Qv=t,Qv}var qz=Q5();const $s=Gr(qz);var Zv,xA;function zz(){if(xA)return Zv;xA=1;function e(t){return t==null}return Zv=e,Zv}var Wz=zz();const vr=Gr(Wz);var eb,yA;function Kz(){if(yA)return eb;yA=1;var e=$o(),t=ws(),r=Lo(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return eb=s,eb}var Vz=Kz();const mc=Gr(Vz);var Gz=F2();const ir=Gr(Gz);var Yz=wl();const gu=Gr(Yz);var tb={exports:{}},Wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function Xz(){if(vA)return Wr;vA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var N=v.$$typeof;switch(N){case e:switch(v=v.type,v){case r:case s:case a:case u:case f:return v;default:switch(v=v&&v.$$typeof,v){case l:case o:case d:case p:case m:case i:return v;default:return N}}case t:return N}}}return Wr.ContextConsumer=o,Wr.ContextProvider=i,Wr.Element=e,Wr.ForwardRef=d,Wr.Fragment=r,Wr.Lazy=p,Wr.Memo=m,Wr.Portal=t,Wr.Profiler=s,Wr.StrictMode=a,Wr.Suspense=u,Wr.SuspenseList=f,Wr.isAsyncMode=function(){return!1},Wr.isConcurrentMode=function(){return!1},Wr.isContextConsumer=function(v){return y(v)===o},Wr.isContextProvider=function(v){return y(v)===i},Wr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},Wr.isForwardRef=function(v){return y(v)===d},Wr.isFragment=function(v){return y(v)===r},Wr.isLazy=function(v){return y(v)===p},Wr.isMemo=function(v){return y(v)===m},Wr.isPortal=function(v){return y(v)===t},Wr.isProfiler=function(v){return y(v)===s},Wr.isStrictMode=function(v){return y(v)===a},Wr.isSuspense=function(v){return y(v)===u},Wr.isSuspenseList=function(v){return y(v)===f},Wr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===a||v===u||v===f||v===g||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===m||v.$$typeof===i||v.$$typeof===o||v.$$typeof===d||v.$$typeof===b||v.getModuleId!==void 0)},Wr.typeOf=y,Wr}var bA;function Jz(){return bA||(bA=1,tb.exports=Xz()),tb.exports}var Qz=Jz(),rb,wA;function Z5(){if(wA)return rb;wA=1;var e=$o(),t=Lo(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return rb=a,rb}var nb,jA;function Zz(){if(jA)return nb;jA=1;var e=Z5();function t(r){return e(r)&&r!=+r}return nb=t,nb}var eW=Zz();const Q0=Gr(eW);var tW=Z5();const rW=Gr(tW);var ss=function(t){return t===0?0:t>0?1:-1},tc=function(t){return mc(t)&&t.indexOf("%")===t.length-1},wt=function(t){return rW(t)&&!Q0(t)},nW=function(t){return vr(t)},ua=function(t){return wt(t)||mc(t)},aW=0,xu=function(t){var r=++aW;return"".concat(t||"").concat(r)},is=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!wt(t)&&!mc(t))return a;var i;if(tc(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Q0(i)&&(i=a),s&&i>r&&(i=r),i},ol=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},sW=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},Oa=function(t,r){return wt(t)&&wt(r)?function(a){return t+a*(r-t)}:function(){return r}};function Zm(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):$s(a,t))===r})}var iW=function(t,r){return wt(t)&&wt(r)?t-r:mc(t)&&mc(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Td(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function $j(e){"@babel/helpers - typeof";return $j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$j(e)}var oW=["viewBox","children"],lW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NA=["points","pathLength"],ab={svg:oW,polygon:NA,polyline:NA},q2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ep=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(P.isValidElement(t)&&(a=t.props),!gu(a))return null;var s={};return Object.keys(a).forEach(function(i){q2.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},cW=function(t,r,a){return function(s){return t(r,a,s),null}},pc=function(t,r,a){if(!gu(t)||$j(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];q2.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=cW(o,r,a))}),s},dW=["children"],uW=["children"];function kA(e,t){if(e==null)return{};var r=hW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Lj(e){"@babel/helpers - typeof";return Lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lj(e)}var SA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Co=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},_A=null,sb=null,z2=function e(t){if(t===_A&&Array.isArray(sb))return sb;var r=[];return P.Children.forEach(t,function(a){vr(a)||(Qz.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),sb=r,_A=t,r};function Ls(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return Co(s)}):a=[Co(t)],z2(e).forEach(function(s){var i=$s(s,"type.displayName")||$s(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function Ts(e,t){var r=Ls(e,t);return r&&r[0]}var EA=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!wt(a)||a<=0||!wt(s)||s<=0)},fW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],mW=function(t){return t&&t.type&&mc(t.type)&&fW.indexOf(t.type)>=0},pW=function(t){return t&&Lj(t)==="object"&&"clipDot"in t},gW=function(t,r,a,s){var i,o=(i=ab?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!ir(t)&&(s&&o.includes(r)||lW.includes(r))||a&&q2.includes(r)},Kt=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(P.isValidElement(t)&&(s=t.props),!gu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;gW((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},Bj=function e(t,r){if(t===r)return!0;var a=P.Children.count(t);if(a!==P.Children.count(r))return!1;if(a===0)return!0;if(a===1)return CA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!CA(i,o))return!1}return!0},CA=function(t,r){if(vr(t)&&vr(r))return!0;if(!vr(t)&&!vr(r)){var a=t.props||{},s=a.children,i=kA(a,dW),o=r.props||{},l=o.children,d=kA(o,uW);return s&&l?Td(i,d)&&Bj(s,l):!s&&!l?Td(i,d):!1}return!1},AA=function(t,r){var a=[],s={};return z2(t).forEach(function(i,o){if(mW(i))a.push(i);else if(i){var l=Co(i.type),d=r[l]||{},u=d.handler,f=d.once;if(u&&(!f||!s[l])){var m=u(i,l,o);a.push(m),s[l]=!0}}}),a},xW=function(t){var r=t&&t.type;return r&&SA[r]?SA[r]:null},yW=function(t,r){return z2(r).indexOf(t)},vW=["children","width","height","viewBox","className","style","title","desc"];function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uj.apply(this,arguments)}function bW(e,t){if(e==null)return{};var r=wW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Hj(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,d=e.desc,u=bW(e,vW),f=s||{width:r,height:a,x:0,y:0},m=yr("recharts-surface",i);return ye.createElement("svg",Uj({},Kt(u,!0,"svg"),{className:m,width:r,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),ye.createElement("title",null,l),ye.createElement("desc",null,d),t)}var jW=["children","className"];function qj(){return qj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qj.apply(this,arguments)}function NW(e,t){if(e==null)return{};var r=kW(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kW(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ir=ye.forwardRef(function(e,t){var r=e.children,a=e.className,s=NW(e,jW),i=yr("recharts-layer",a);return ye.createElement("g",qj({className:i},Kt(s,!0),{ref:t}),r)}),Ci=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},ib,TA;function SW(){if(TA)return ib;TA=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return ib=e,ib}var ob,OA;function _W(){if(OA)return ob;OA=1;var e=SW();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return ob=t,ob}var lb,PA;function eM(){if(PA)return lb;PA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function d(u){return l.test(u)}return lb=d,lb}var cb,IA;function EW(){if(IA)return cb;IA=1;function e(t){return t.split("")}return cb=e,cb}var db,DA;function CW(){if(DA)return db;DA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",b=u+"?",y="["+i+"]?",v="(?:"+g+"(?:"+[f,m,p].join("|")+")"+y+b+")*",N=y+b+v,k="(?:"+[f+l+"?",l,m,p,o].join("|")+")",w=RegExp(d+"(?="+d+")|"+k+N,"g");function A(S){return S.match(w)||[]}return db=A,db}var ub,MA;function AW(){if(MA)return ub;MA=1;var e=EW(),t=eM(),r=CW();function a(s){return t(s)?r(s):e(s)}return ub=a,ub}var hb,RA;function TW(){if(RA)return hb;RA=1;var e=_W(),t=eM(),r=AW(),a=X5();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,d=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return d[i]()+u}}return hb=s,hb}var fb,FA;function OW(){if(FA)return fb;FA=1;var e=TW(),t=e("toUpperCase");return fb=t,fb}var PW=OW();const Rg=Gr(PW);function fn(e){return function(){return e}}const tM=Math.cos,tp=Math.sin,Oi=Math.sqrt,rp=Math.PI,Fg=2*rp,zj=Math.PI,Wj=2*zj,Vl=1e-6,IW=Wj-Vl;function rM(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function DW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rM;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class MW{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rM:DW(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=a-t,u=s-r,f=o-t,m=l-r,p=f*f+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Vl)if(!(Math.abs(m*d-u*f)>Vl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=a-o,b=s-l,y=d*d+u*u,v=g*g+b*b,N=Math.sqrt(y),k=Math.sqrt(p),w=i*Math.tan((zj-Math.acos((y+p-v)/(2*N*k)))/2),A=w/k,S=w/N;Math.abs(A-1)>Vl&&this._append`L${t+A*f},${r+A*m}`,this._append`A${i},${i},0,0,${+(m*g>f*b)},${this._x1=t+S*d},${this._y1=r+S*u}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),d=a*Math.sin(s),u=t+l,f=r+d,m=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Vl||Math.abs(this._y1-f)>Vl)&&this._append`L${u},${f}`,a&&(p<0&&(p=p%Wj+Wj),p>IW?this._append`A${a},${a},0,1,${m},${t-l},${r-d}A${a},${a},0,1,${m},${this._x1=u},${this._y1=f}`:p>Vl&&this._append`A${a},${a},0,${+(p>=zj)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function W2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new MW(t)}function K2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nM(e){this._context=e}nM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $g(e){return new nM(e)}function aM(e){return e[0]}function sM(e){return e[1]}function iM(e,t){var r=fn(!0),a=null,s=$g,i=null,o=W2(l);e=typeof e=="function"?e:e===void 0?aM:fn(e),t=typeof t=="function"?t:t===void 0?sM:fn(t);function l(d){var u,f=(d=K2(d)).length,m,p=!1,g;for(a==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(m=d[u],u,d))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(m,u,d),+t(m,u,d));if(g)return i=null,g+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:fn(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:fn(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:fn(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,a!=null&&(i=s(a)),l):s},l.context=function(d){return arguments.length?(d==null?a=i=null:i=s(a=d),l):a},l}function bm(e,t,r){var a=null,s=fn(!0),i=null,o=$g,l=null,d=W2(u);e=typeof e=="function"?e:e===void 0?aM:fn(+e),t=typeof t=="function"?t:fn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?sM:fn(+r);function u(m){var p,g,b,y=(m=K2(m)).length,v,N=!1,k,w=new Array(y),A=new Array(y);for(i==null&&(l=o(k=d())),p=0;p<=y;++p){if(!(p<y&&s(v=m[p],p,m))===N)if(N=!N)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(w[b],A[b]);l.lineEnd(),l.areaEnd()}N&&(w[p]=+e(v,p,m),A[p]=+t(v,p,m),l.point(a?+a(v,p,m):w[p],r?+r(v,p,m):A[p]))}if(k)return l=null,k+""||null}function f(){return iM().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:fn(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:fn(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:fn(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:fn(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:fn(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:fn(+m),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:fn(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class oM{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function RW(e){return new oM(e,!0)}function FW(e){return new oM(e,!1)}const V2={draw(e,t){const r=Oi(t/rp);e.moveTo(r,0),e.arc(0,0,r,0,Fg)}},$W={draw(e,t){const r=Oi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},lM=Oi(1/3),LW=lM*2,BW={draw(e,t){const r=Oi(t/LW),a=r*lM;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},UW={draw(e,t){const r=Oi(t),a=-r/2;e.rect(a,a,r,r)}},HW=.8908130915292852,cM=tp(rp/10)/tp(7*rp/10),qW=tp(Fg/10)*cM,zW=-tM(Fg/10)*cM,WW={draw(e,t){const r=Oi(t*HW),a=qW*r,s=zW*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Fg*i/5,l=tM(o),d=tp(o);e.lineTo(d*r,-l*r),e.lineTo(l*a-d*s,d*a+l*s)}e.closePath()}},mb=Oi(3),KW={draw(e,t){const r=-Oi(t/(mb*3));e.moveTo(0,r*2),e.lineTo(-mb*r,-r),e.lineTo(mb*r,-r),e.closePath()}},Vs=-.5,Gs=Oi(3)/2,Kj=1/Oi(12),VW=(Kj/2+1)*3,GW={draw(e,t){const r=Oi(t/VW),a=r/2,s=r*Kj,i=a,o=r*Kj+r,l=-i,d=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(Vs*a-Gs*s,Gs*a+Vs*s),e.lineTo(Vs*i-Gs*o,Gs*i+Vs*o),e.lineTo(Vs*l-Gs*d,Gs*l+Vs*d),e.lineTo(Vs*a+Gs*s,Vs*s-Gs*a),e.lineTo(Vs*i+Gs*o,Vs*o-Gs*i),e.lineTo(Vs*l+Gs*d,Vs*d-Gs*l),e.closePath()}};function YW(e,t){let r=null,a=W2(s);e=typeof e=="function"?e:fn(e||V2),t=typeof t=="function"?t:fn(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:fn(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:fn(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function np(){}function ap(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function dM(e){this._context=e}dM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ap(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XW(e){return new dM(e)}function uM(e){this._context=e}uM.prototype={areaStart:np,areaEnd:np,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function JW(e){return new uM(e)}function hM(e){this._context=e}hM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:ap(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function QW(e){return new hM(e)}function fM(e){this._context=e}fM.prototype={areaStart:np,areaEnd:np,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ZW(e){return new fM(e)}function $A(e){return e<0?-1:1}function LA(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return($A(i)+$A(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function BA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function pb(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function sp(e){this._context=e}sp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pb(this,this._t0,BA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pb(this,BA(this,r=LA(this,e,t)),r);break;default:pb(this,this._t0,r=LA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function mM(e){this._context=new pM(e)}(mM.prototype=Object.create(sp.prototype)).point=function(e,t){sp.prototype.point.call(this,t,e)};function pM(e){this._context=e}pM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function eK(e){return new sp(e)}function tK(e){return new mM(e)}function gM(e){this._context=e}gM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=UA(e),s=UA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UA(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function rK(e){return new gM(e)}function Lg(e,t){this._context=e,this._t=t}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function nK(e){return new Lg(e,.5)}function aK(e){return new Lg(e,0)}function sK(e){return new Lg(e,1)}function Rd(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function Vj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function iK(e,t){return e[t]}function oK(e){const t=[];return t.key=e,t}function lK(){var e=fn([]),t=Vj,r=Rd,a=iK;function s(i){var o=Array.from(e.apply(this,arguments),oK),l,d=o.length,u=-1,f;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+a(m,o[l].key,u,i)]).data=m;for(l=0,f=K2(t(o));l<d;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:fn(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:fn(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?Vj:typeof i=="function"?i:fn(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Rd,s):r},s}function cK(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Rd(e,t)}}function dK(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Rd(e,t)}}function uK(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,d=0,u=0;l<o;++l){for(var f=e[t[l]],m=f[a][1]||0,p=f[a-1][1]||0,g=(m-p)/2,b=0;b<l;++b){var y=e[t[b]],v=y[a][1]||0,N=y[a-1][1]||0;g+=v-N}d+=m,u+=g*m}s[a-1][1]+=s[a-1][0]=r,d&&(r-=u/d)}s[a-1][1]+=s[a-1][0]=r,Rd(e,t)}}function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}var hK=["type","size","sizeType"];function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Gj.apply(this,arguments)}function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function qA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(r),!0).forEach(function(a){fK(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fK(e,t,r){return t=mK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mK(e){var t=pK(e,"string");return t0(t)=="symbol"?t:t+""}function pK(e,t){if(t0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(t0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gK(e,t){if(e==null)return{};var r=xK(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xK(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var xM={symbolCircle:V2,symbolCross:$W,symbolDiamond:BW,symbolSquare:UW,symbolStar:WW,symbolTriangle:KW,symbolWye:GW},yK=Math.PI/180,vK=function(t){var r="symbol".concat(Rg(t));return xM[r]||V2},bK=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*yK;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},wK=function(t,r){xM["symbol".concat(Rg(t))]=r},G2=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,d=gK(t,hK),u=qA(qA({},d),{},{type:a,size:i,sizeType:l}),f=function(){var v=vK(a),N=YW().type(v).size(bK(i,l,a));return N()},m=u.className,p=u.cx,g=u.cy,b=Kt(u,!0);return p===+p&&g===+g&&i===+i?ye.createElement("path",Gj({},b,{className:yr("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(g,")"),d:f()})):null};G2.registerSymbol=wK;function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function Yj(){return Yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yj.apply(this,arguments)}function zA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(r),!0).forEach(function(a){r0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function NK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kK(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vM(a.key),a)}}function SK(e,t,r){return t&&kK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _K(e,t,r){return t=ip(t),EK(e,yM()?Reflect.construct(t,r||[],ip(e).constructor):t.apply(e,r))}function EK(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CK(e)}function CK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yM=function(){return!!e})()}function ip(e){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ip(e)}function AK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Xj(e,t)}function r0(e,t,r){return t=vM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vM(e){var t=TK(e,"string");return Fd(t)=="symbol"?t:t+""}function TK(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ys=32,Y2=(function(e){function t(){return NK(this,t),_K(this,t,arguments)}return AK(t,e),SK(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Ys/2,o=Ys/6,l=Ys/3,d=a.inactive?s:a.color;if(a.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Ys,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ys,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ye.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ys/8,"h").concat(Ys,"v").concat(Ys*3/4,"h").concat(-Ys,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(a.legendIcon)){var u=jK({},a);return delete u.legendIcon,ye.cloneElement(a.legendIcon,u)}return ye.createElement(G2,{fill:d,cx:i,cy:i,size:Ys,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,d=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Ys,height:Ys},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,b){var y=g.formatter||d,v=yr(r0(r0({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var N=ir(g.value)?null:g.value;Ci(!ir(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=g.inactive?u:g.color;return ye.createElement("li",Yj({className:v,style:m,key:"legend-item-".concat(b)},pc(a.props,g,b)),ye.createElement(Hj,{width:o,height:o,viewBox:f,style:p},a.renderIcon(g)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},y?y(N,g,b):N))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(P.PureComponent);r0(Y2,"displayName","Legend");r0(Y2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var gb,WA;function OK(){if(WA)return gb;WA=1;var e=Ig();function t(){this.__data__=new e,this.size=0}return gb=t,gb}var xb,KA;function PK(){if(KA)return xb;KA=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return xb=e,xb}var yb,VA;function IK(){if(VA)return yb;VA=1;function e(t){return this.__data__.get(t)}return yb=e,yb}var vb,GA;function DK(){if(GA)return vb;GA=1;function e(t){return this.__data__.has(t)}return vb=e,vb}var bb,YA;function MK(){if(YA)return bb;YA=1;var e=Ig(),t=L2(),r=B2(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var d=l.__data__;if(!t||d.length<a-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return bb=s,bb}var wb,XA;function bM(){if(XA)return wb;XA=1;var e=Ig(),t=OK(),r=PK(),a=IK(),s=DK(),i=MK();function o(l){var d=this.__data__=new e(l);this.size=d.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,wb=o,wb}var jb,JA;function RK(){if(JA)return jb;JA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return jb=t,jb}var Nb,QA;function FK(){if(QA)return Nb;QA=1;function e(t){return this.__data__.has(t)}return Nb=e,Nb}var kb,ZA;function wM(){if(ZA)return kb;ZA=1;var e=B2(),t=RK(),r=FK();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,kb=a,kb}var Sb,eT;function jM(){if(eT)return Sb;eT=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return Sb=e,Sb}var _b,tT;function NM(){if(tT)return _b;tT=1;function e(t,r){return t.has(r)}return _b=e,_b}var Eb,rT;function kM(){if(rT)return Eb;rT=1;var e=wM(),t=jM(),r=NM(),a=1,s=2;function i(o,l,d,u,f,m){var p=d&a,g=o.length,b=l.length;if(g!=b&&!(p&&b>g))return!1;var y=m.get(o),v=m.get(l);if(y&&v)return y==l&&v==o;var N=-1,k=!0,w=d&s?new e:void 0;for(m.set(o,l),m.set(l,o);++N<g;){var A=o[N],S=l[N];if(u)var _=p?u(S,A,N,l,o,m):u(A,S,N,o,l,m);if(_!==void 0){if(_)continue;k=!1;break}if(w){if(!t(l,function(E,C){if(!r(w,C)&&(A===E||f(A,E,d,u,m)))return w.push(C)})){k=!1;break}}else if(!(A===S||f(A,S,d,u,m))){k=!1;break}}return m.delete(o),m.delete(l),k}return Eb=i,Eb}var Cb,nT;function $K(){if(nT)return Cb;nT=1;var e=Ji(),t=e.Uint8Array;return Cb=t,Cb}var Ab,aT;function LK(){if(aT)return Ab;aT=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return Ab=e,Ab}var Tb,sT;function X2(){if(sT)return Tb;sT=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return Tb=e,Tb}var Ob,iT;function BK(){if(iT)return Ob;iT=1;var e=J0(),t=$K(),r=$2(),a=kM(),s=LK(),i=X2(),o=1,l=2,d="[object Boolean]",u="[object Date]",f="[object Error]",m="[object Map]",p="[object Number]",g="[object RegExp]",b="[object Set]",y="[object String]",v="[object Symbol]",N="[object ArrayBuffer]",k="[object DataView]",w=e?e.prototype:void 0,A=w?w.valueOf:void 0;function S(_,E,C,I,B,M,O){switch(C){case k:if(_.byteLength!=E.byteLength||_.byteOffset!=E.byteOffset)return!1;_=_.buffer,E=E.buffer;case N:return!(_.byteLength!=E.byteLength||!M(new t(_),new t(E)));case d:case u:case p:return r(+_,+E);case f:return _.name==E.name&&_.message==E.message;case g:case y:return _==E+"";case m:var U=s;case b:var ie=I&o;if(U||(U=i),_.size!=E.size&&!ie)return!1;var X=O.get(_);if(X)return X==E;I|=l,O.set(_,E);var re=a(U(_),U(E),I,B,M,O);return O.delete(_),re;case v:if(A)return A.call(_)==A.call(E)}return!1}return Ob=S,Ob}var Pb,oT;function SM(){if(oT)return Pb;oT=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return Pb=e,Pb}var Ib,lT;function UK(){if(lT)return Ib;lT=1;var e=SM(),t=ws();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return Ib=r,Ib}var Db,cT;function HK(){if(cT)return Db;cT=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return Db=e,Db}var Mb,dT;function qK(){if(dT)return Mb;dT=1;function e(){return[]}return Mb=e,Mb}var Rb,uT;function zK(){if(uT)return Rb;uT=1;var e=HK(),t=qK(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Rb=i,Rb}var Fb,hT;function WK(){if(hT)return Fb;hT=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return Fb=e,Fb}var $b,fT;function KK(){if(fT)return $b;fT=1;var e=$o(),t=Lo(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return $b=a,$b}var Lb,mT;function J2(){if(mT)return Lb;mT=1;var e=KK(),t=Lo(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return Lb=i,Lb}var bh={exports:{}},Bb,pT;function VK(){if(pT)return Bb;pT=1;function e(){return!1}return Bb=e,Bb}bh.exports;var gT;function _M(){return gT||(gT=1,(function(e,t){var r=Ji(),a=VK(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,u=d||a;e.exports=u})(bh,bh.exports)),bh.exports}var Ub,xT;function Q2(){if(xT)return Ub;xT=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return Ub=r,Ub}var Hb,yT;function Z2(){if(yT)return Hb;yT=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Hb=t,Hb}var qb,vT;function GK(){if(vT)return qb;vT=1;var e=$o(),t=Z2(),r=Lo(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",u="[object Map]",f="[object Number]",m="[object Object]",p="[object RegExp]",g="[object Set]",b="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",w="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",_="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",M={};M[k]=M[w]=M[A]=M[S]=M[_]=M[E]=M[C]=M[I]=M[B]=!0,M[a]=M[s]=M[v]=M[i]=M[N]=M[o]=M[l]=M[d]=M[u]=M[f]=M[m]=M[p]=M[g]=M[b]=M[y]=!1;function O(U){return r(U)&&t(U.length)&&!!M[e(U)]}return qb=O,qb}var zb,bT;function EM(){if(bT)return zb;bT=1;function e(t){return function(r){return t(r)}}return zb=e,zb}var wh={exports:{}};wh.exports;var wT;function YK(){return wT||(wT=1,(function(e,t){var r=V5(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var d=s&&s.require&&s.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(wh,wh.exports)),wh.exports}var Wb,jT;function CM(){if(jT)return Wb;jT=1;var e=GK(),t=EM(),r=YK(),a=r&&r.isTypedArray,s=a?t(a):e;return Wb=s,Wb}var Kb,NT;function XK(){if(NT)return Kb;NT=1;var e=WK(),t=J2(),r=ws(),a=_M(),s=Q2(),i=CM(),o=Object.prototype,l=o.hasOwnProperty;function d(u,f){var m=r(u),p=!m&&t(u),g=!m&&!p&&a(u),b=!m&&!p&&!g&&i(u),y=m||p||g||b,v=y?e(u.length,String):[],N=v.length;for(var k in u)(f||l.call(u,k))&&!(y&&(k=="length"||g&&(k=="offset"||k=="parent")||b&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||s(k,N)))&&v.push(k);return v}return Kb=d,Kb}var Vb,kT;function JK(){if(kT)return Vb;kT=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return Vb=t,Vb}var Gb,ST;function AM(){if(ST)return Gb;ST=1;function e(t,r){return function(a){return t(r(a))}}return Gb=e,Gb}var Yb,_T;function QK(){if(_T)return Yb;_T=1;var e=AM(),t=e(Object.keys,Object);return Yb=t,Yb}var Xb,ET;function ZK(){if(ET)return Xb;ET=1;var e=JK(),t=QK(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return Xb=s,Xb}var Jb,CT;function Z0(){if(CT)return Jb;CT=1;var e=F2(),t=Z2();function r(a){return a!=null&&t(a.length)&&!e(a)}return Jb=r,Jb}var Qb,AT;function Bg(){if(AT)return Qb;AT=1;var e=XK(),t=ZK(),r=Z0();function a(s){return r(s)?e(s):t(s)}return Qb=a,Qb}var Zb,TT;function eV(){if(TT)return Zb;TT=1;var e=UK(),t=zK(),r=Bg();function a(s){return e(s,r,t)}return Zb=a,Zb}var ew,OT;function tV(){if(OT)return ew;OT=1;var e=eV(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,d,u,f){var m=l&t,p=e(i),g=p.length,b=e(o),y=b.length;if(g!=y&&!m)return!1;for(var v=g;v--;){var N=p[v];if(!(m?N in o:a.call(o,N)))return!1}var k=f.get(i),w=f.get(o);if(k&&w)return k==o&&w==i;var A=!0;f.set(i,o),f.set(o,i);for(var S=m;++v<g;){N=p[v];var _=i[N],E=o[N];if(d)var C=m?d(E,_,N,o,i,f):d(_,E,N,i,o,f);if(!(C===void 0?_===E||u(_,E,l,d,f):C)){A=!1;break}S||(S=N=="constructor")}if(A&&!S){var I=i.constructor,B=o.constructor;I!=B&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(A=!1)}return f.delete(i),f.delete(o),A}return ew=s,ew}var tw,PT;function rV(){if(PT)return tw;PT=1;var e=Sc(),t=Ji(),r=e(t,"DataView");return tw=r,tw}var rw,IT;function nV(){if(IT)return rw;IT=1;var e=Sc(),t=Ji(),r=e(t,"Promise");return rw=r,rw}var nw,DT;function TM(){if(DT)return nw;DT=1;var e=Sc(),t=Ji(),r=e(t,"Set");return nw=r,nw}var aw,MT;function aV(){if(MT)return aw;MT=1;var e=Sc(),t=Ji(),r=e(t,"WeakMap");return aw=r,aw}var sw,RT;function sV(){if(RT)return sw;RT=1;var e=rV(),t=L2(),r=nV(),a=TM(),s=aV(),i=$o(),o=G5(),l="[object Map]",d="[object Object]",u="[object Promise]",f="[object Set]",m="[object WeakMap]",p="[object DataView]",g=o(e),b=o(t),y=o(r),v=o(a),N=o(s),k=i;return(e&&k(new e(new ArrayBuffer(1)))!=p||t&&k(new t)!=l||r&&k(r.resolve())!=u||a&&k(new a)!=f||s&&k(new s)!=m)&&(k=function(w){var A=i(w),S=A==d?w.constructor:void 0,_=S?o(S):"";if(_)switch(_){case g:return p;case b:return l;case y:return u;case v:return f;case N:return m}return A}),sw=k,sw}var iw,FT;function iV(){if(FT)return iw;FT=1;var e=bM(),t=kM(),r=BK(),a=tV(),s=sV(),i=ws(),o=_M(),l=CM(),d=1,u="[object Arguments]",f="[object Array]",m="[object Object]",p=Object.prototype,g=p.hasOwnProperty;function b(y,v,N,k,w,A){var S=i(y),_=i(v),E=S?f:s(y),C=_?f:s(v);E=E==u?m:E,C=C==u?m:C;var I=E==m,B=C==m,M=E==C;if(M&&o(y)){if(!o(v))return!1;S=!0,I=!1}if(M&&!I)return A||(A=new e),S||l(y)?t(y,v,N,k,w,A):r(y,v,E,N,k,w,A);if(!(N&d)){var O=I&&g.call(y,"__wrapped__"),U=B&&g.call(v,"__wrapped__");if(O||U){var ie=O?y.value():y,X=U?v.value():v;return A||(A=new e),w(ie,X,N,k,A)}}return M?(A||(A=new e),a(y,v,N,k,w,A)):!1}return iw=b,iw}var ow,$T;function ek(){if($T)return ow;$T=1;var e=iV(),t=Lo();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return ow=r,ow}var lw,LT;function oV(){if(LT)return lw;LT=1;var e=bM(),t=ek(),r=1,a=2;function s(i,o,l,d){var u=l.length,f=u,m=!d;if(i==null)return!f;for(i=Object(i);u--;){var p=l[u];if(m&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++u<f;){p=l[u];var g=p[0],b=i[g],y=p[1];if(m&&p[2]){if(b===void 0&&!(g in i))return!1}else{var v=new e;if(d)var N=d(b,y,g,i,o,v);if(!(N===void 0?t(y,b,r|a,d,v):N))return!1}}return!0}return lw=s,lw}var cw,BT;function OM(){if(BT)return cw;BT=1;var e=wl();function t(r){return r===r&&!e(r)}return cw=t,cw}var dw,UT;function lV(){if(UT)return dw;UT=1;var e=OM(),t=Bg();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return dw=r,dw}var uw,HT;function PM(){if(HT)return uw;HT=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return uw=e,uw}var hw,qT;function cV(){if(qT)return hw;qT=1;var e=oV(),t=lV(),r=PM();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return hw=a,hw}var fw,zT;function dV(){if(zT)return fw;zT=1;function e(t,r){return t!=null&&r in Object(t)}return fw=e,fw}var mw,WT;function uV(){if(WT)return mw;WT=1;var e=J5(),t=J2(),r=ws(),a=Q2(),s=Z2(),i=Mg();function o(l,d,u){d=e(d,l);for(var f=-1,m=d.length,p=!1;++f<m;){var g=i(d[f]);if(!(p=l!=null&&u(l,g)))break;l=l[g]}return p||++f!=m?p:(m=l==null?0:l.length,!!m&&s(m)&&a(g,m)&&(r(l)||t(l)))}return mw=o,mw}var pw,KT;function hV(){if(KT)return pw;KT=1;var e=dV(),t=uV();function r(a,s){return a!=null&&t(a,s,e)}return pw=r,pw}var gw,VT;function fV(){if(VT)return gw;VT=1;var e=ek(),t=Q5(),r=hV(),a=R2(),s=OM(),i=PM(),o=Mg(),l=1,d=2;function u(f,m){return a(f)&&s(m)?i(o(f),m):function(p){var g=t(p,f);return g===void 0&&g===m?r(p,f):e(m,g,l|d)}}return gw=u,gw}var xw,GT;function yu(){if(GT)return xw;GT=1;function e(t){return t}return xw=e,xw}var yw,YT;function mV(){if(YT)return yw;YT=1;function e(t){return function(r){return r?.[t]}}return yw=e,yw}var vw,XT;function pV(){if(XT)return vw;XT=1;var e=H2();function t(r){return function(a){return e(a,r)}}return vw=t,vw}var bw,JT;function gV(){if(JT)return bw;JT=1;var e=mV(),t=pV(),r=R2(),a=Mg();function s(i){return r(i)?e(a(i)):t(i)}return bw=s,bw}var ww,QT;function Qi(){if(QT)return ww;QT=1;var e=cV(),t=fV(),r=yu(),a=ws(),s=gV();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return ww=i,ww}var jw,ZT;function IM(){if(ZT)return jw;ZT=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return jw=e,jw}var Nw,e4;function xV(){if(e4)return Nw;e4=1;function e(t){return t!==t}return Nw=e,Nw}var kw,t4;function yV(){if(t4)return kw;t4=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return kw=e,kw}var Sw,r4;function vV(){if(r4)return Sw;r4=1;var e=IM(),t=xV(),r=yV();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return Sw=a,Sw}var _w,n4;function bV(){if(n4)return _w;n4=1;var e=vV();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return _w=t,_w}var Ew,a4;function wV(){if(a4)return Ew;a4=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return Ew=e,Ew}var Cw,s4;function jV(){if(s4)return Cw;s4=1;function e(){}return Cw=e,Cw}var Aw,i4;function NV(){if(i4)return Aw;i4=1;var e=TM(),t=jV(),r=X2(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return Aw=s,Aw}var Tw,o4;function kV(){if(o4)return Tw;o4=1;var e=wM(),t=bV(),r=wV(),a=NM(),s=NV(),i=X2(),o=200;function l(d,u,f){var m=-1,p=t,g=d.length,b=!0,y=[],v=y;if(f)b=!1,p=r;else if(g>=o){var N=u?null:s(d);if(N)return i(N);b=!1,p=a,v=new e}else v=u?[]:y;e:for(;++m<g;){var k=d[m],w=u?u(k):k;if(k=f||k!==0?k:0,b&&w===w){for(var A=v.length;A--;)if(v[A]===w)continue e;u&&v.push(w),y.push(k)}else p(v,w,f)||(v!==y&&v.push(w),y.push(k))}return y}return Tw=l,Tw}var Ow,l4;function SV(){if(l4)return Ow;l4=1;var e=Qi(),t=kV();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return Ow=r,Ow}var _V=SV();const c4=Gr(_V);function DM(e,t,r){return t===!0?c4(e,r):ir(t)?c4(e,t):e}function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}var EV=["ref"];function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(a){Ug(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function CV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u4(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RM(a.key),a)}}function AV(e,t,r){return t&&u4(e.prototype,t),r&&u4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TV(e,t,r){return t=op(t),OV(e,MM()?Reflect.construct(t,r||[],op(e).constructor):t.apply(e,r))}function OV(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PV(e)}function PV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MM=function(){return!!e})()}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},op(e)}function IV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jj(e,t)}function Jj(e,t){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Jj(e,t)}function Ug(e,t,r){return t=RM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RM(e){var t=DV(e,"string");return $d(t)=="symbol"?t:t+""}function DV(e,t){if($d(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($d(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MV(e,t){if(e==null)return{};var r=RV(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function RV(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function FV(e){return e.value}function $V(e,t){if(ye.isValidElement(e))return ye.cloneElement(e,t);if(typeof e=="function")return ye.createElement(e,t);t.ref;var r=MV(t,EV);return ye.createElement(Y2,r)}var h4=1,Ga=(function(e){function t(){var r;CV(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=TV(this,t,[].concat(s)),Ug(r,"lastBoundingBox",{width:-1,height:-1}),r}return IV(t,e),AV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>h4||Math.abs(s.height-this.lastBoundingBox.height)>h4)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,d=s.margin,u=s.chartWidth,f=s.chartHeight,m,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((u||0)-g.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((f||0)-b.height)/2}}else p=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return fo(fo({},m),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,d=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,m=fo(fo({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return ye.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){a.wrapperNode=g}},$V(i,fo(fo({},this.props),{},{payload:DM(f,u,FV)})))}}],[{key:"getWithHeight",value:function(a,s){var i=fo(fo({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&wt(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(P.PureComponent);Ug(Ga,"displayName","Legend");Ug(Ga,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Pw,f4;function LV(){if(f4)return Pw;f4=1;var e=J0(),t=J2(),r=ws(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return Pw=s,Pw}var Iw,m4;function FM(){if(m4)return Iw;m4=1;var e=SM(),t=LV();function r(a,s,i,o,l){var d=-1,u=a.length;for(i||(i=t),l||(l=[]);++d<u;){var f=a[d];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return Iw=r,Iw}var Dw,p4;function BV(){if(p4)return Dw;p4=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),d=l.length;d--;){var u=l[t?d:++i];if(a(o[u],u,o)===!1)break}return r}}return Dw=e,Dw}var Mw,g4;function UV(){if(g4)return Mw;g4=1;var e=BV(),t=e();return Mw=t,Mw}var Rw,x4;function $M(){if(x4)return Rw;x4=1;var e=UV(),t=Bg();function r(a,s){return a&&e(a,s,t)}return Rw=r,Rw}var Fw,y4;function HV(){if(y4)return Fw;y4=1;var e=Z0();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,d=Object(s);(a?l--:++l<o)&&i(d[l],l,d)!==!1;);return s}}return Fw=t,Fw}var $w,v4;function tk(){if(v4)return $w;v4=1;var e=$M(),t=HV(),r=t(e);return $w=r,$w}var Lw,b4;function LM(){if(b4)return Lw;b4=1;var e=tk(),t=Z0();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,d,u){o[++i]=s(l,d,u)}),o}return Lw=r,Lw}var Bw,w4;function qV(){if(w4)return Bw;w4=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return Bw=e,Bw}var Uw,j4;function zV(){if(j4)return Uw;j4=1;var e=pu();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),d=a!==void 0,u=a===null,f=a===a,m=e(a);if(!u&&!m&&!l&&r>a||l&&d&&f&&!u&&!m||i&&d&&f||!s&&f||!o)return 1;if(!i&&!l&&!m&&r<a||m&&s&&o&&!i&&!l||u&&s&&o||!d&&o||!f)return-1}return 0}return Uw=t,Uw}var Hw,N4;function WV(){if(N4)return Hw;N4=1;var e=zV();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,d=o.length,u=s.length;++i<d;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var m=s[i];return f*(m=="desc"?-1:1)}}return r.index-a.index}return Hw=t,Hw}var qw,k4;function KV(){if(k4)return qw;k4=1;var e=U2(),t=H2(),r=Qi(),a=LM(),s=qV(),i=EM(),o=WV(),l=yu(),d=ws();function u(f,m,p){m.length?m=e(m,function(y){return d(y)?function(v){return t(v,y.length===1?y[0]:y)}:y}):m=[l];var g=-1;m=e(m,i(r));var b=a(f,function(y,v,N){var k=e(m,function(w){return w(y)});return{criteria:k,index:++g,value:y}});return s(b,function(y,v){return o(y,v,p)})}return qw=u,qw}var zw,S4;function VV(){if(S4)return zw;S4=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return zw=e,zw}var Ww,_4;function GV(){if(_4)return Ww;_4=1;var e=VV(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,d=t(o.length-s,0),u=Array(d);++l<d;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(a,this,f)}}return Ww=r,Ww}var Kw,E4;function YV(){if(E4)return Kw;E4=1;function e(t){return function(){return t}}return Kw=e,Kw}var Vw,C4;function BM(){if(C4)return Vw;C4=1;var e=Sc(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Vw=t,Vw}var Gw,A4;function XV(){if(A4)return Gw;A4=1;var e=YV(),t=BM(),r=yu(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Gw=a,Gw}var Yw,T4;function JV(){if(T4)return Yw;T4=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),d=t-(l-o);if(o=l,d>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Yw=a,Yw}var Xw,O4;function QV(){if(O4)return Xw;O4=1;var e=XV(),t=JV(),r=t(e);return Xw=r,Xw}var Jw,P4;function ZV(){if(P4)return Jw;P4=1;var e=yu(),t=GV(),r=QV();function a(s,i){return r(t(s,i,e),s+"")}return Jw=a,Jw}var Qw,I4;function Hg(){if(I4)return Qw;I4=1;var e=$2(),t=Z0(),r=Q2(),a=wl();function s(i,o,l){if(!a(l))return!1;var d=typeof o;return(d=="number"?t(l)&&r(o,l.length):d=="string"&&o in l)?e(l[o],i):!1}return Qw=s,Qw}var Zw,D4;function eG(){if(D4)return Zw;D4=1;var e=FM(),t=KV(),r=ZV(),a=Hg(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Zw=s,Zw}var tG=eG();const rk=Gr(tG);function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function Qj(){return Qj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qj.apply(this,arguments)}function rG(e,t){return iG(e)||sG(e,t)||aG(e,t)||nG()}function nG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aG(e,t){if(e){if(typeof e=="string")return M4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M4(e,t)}}function M4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function sG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iG(e){if(Array.isArray(e))return e}function R4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function e1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R4(Object(r),!0).forEach(function(a){oG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oG(e,t,r){return t=lG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lG(e){var t=cG(e,"string");return n0(t)=="symbol"?t:t+""}function cG(e,t){if(n0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(n0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dG(e){return Array.isArray(e)&&ua(e[0])&&ua(e[1])?e.join(" ~ "):e}var uG=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,d=t.labelStyle,u=d===void 0?{}:d,f=t.payload,m=t.formatter,p=t.itemSorter,g=t.wrapperClassName,b=t.labelClassName,y=t.label,v=t.labelFormatter,N=t.accessibilityLayer,k=N===void 0?!1:N,w=function(){if(f&&f.length){var O={padding:0,margin:0},U=(p?rk(f,p):f).map(function(ie,X){if(ie.type==="none")return null;var re=e1({display:"block",paddingTop:4,paddingBottom:4,color:ie.color||"#000"},l),oe=ie.formatter||m||dG,Q=ie.value,F=ie.name,J=Q,L=F;if(oe&&J!=null&&L!=null){var D=oe(Q,F,ie,X,f);if(Array.isArray(D)){var Y=rG(D,2);J=Y[0],L=Y[1]}else J=D}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:re},ua(L)?ye.createElement("span",{className:"recharts-tooltip-item-name"},L):null,ua(L)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},J),ye.createElement("span",{className:"recharts-tooltip-item-unit"},ie.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:O},U)}return null},A=e1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=e1({margin:0},u),_=!vr(y),E=_?y:"",C=yr("recharts-default-tooltip",g),I=yr("recharts-tooltip-label",b);_&&v&&f!==void 0&&f!==null&&(E=v(y,f));var B=k?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",Qj({className:C,style:A},B),ye.createElement("p",{className:I,style:S},ye.isValidElement(E)?E:"".concat(E)),w())};function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function wm(e,t,r){return t=hG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t=fG(e,"string");return a0(t)=="symbol"?t:t+""}function fG(e,t){if(a0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(a0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sh="recharts-tooltip-wrapper",mG={visibility:"hidden"};function pG(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return yr(sh,wm(wm(wm(wm({},"".concat(sh,"-right"),wt(r)&&t&&wt(t.x)&&r>=t.x),"".concat(sh,"-left"),wt(r)&&t&&wt(t.x)&&r<t.x),"".concat(sh,"-bottom"),wt(a)&&t&&wt(t.y)&&a>=t.y),"".concat(sh,"-top"),wt(a)&&t&&wt(t.y)&&a<t.y))}function F4(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&wt(i[a]))return i[a];var f=r[a]-l-s,m=r[a]+s;if(t[a])return o[a]?f:m;if(o[a]){var p=f,g=d[a];return p<g?Math.max(m,d[a]):Math.max(f,d[a])}var b=m+l,y=d[a]+u;return b>y?Math.max(f,d[a]):Math.max(m,d[a])}function gG(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xG(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,d=e.viewBox,u,f,m;return o.height>0&&o.width>0&&r?(f=F4({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=F4({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=gG({translateX:f,translateY:m,useTranslate3d:l})):u=mG,{cssProperties:u,cssClasses:pG({translateX:f,translateY:m,coordinate:r})}}function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function $4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function L4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(r),!0).forEach(function(a){eN(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vG(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,HM(a.key),a)}}function bG(e,t,r){return t&&vG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wG(e,t,r){return t=lp(t),jG(e,UM()?Reflect.construct(t,r||[],lp(e).constructor):t.apply(e,r))}function jG(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NG(e)}function NG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UM=function(){return!!e})()}function lp(e){return lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lp(e)}function kG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Zj(e,t)}function eN(e,t,r){return t=HM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HM(e){var t=SG(e,"string");return Ld(t)=="symbol"?t:t+""}function SG(e,t){if(Ld(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ld(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var B4=1,_G=(function(e){function t(){var r;yG(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=wG(this,t,[].concat(s)),eN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),eN(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return kG(t,e),bG(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>B4||Math.abs(a.height-this.state.lastBoundingBox.height)>B4)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.children,f=s.coordinate,m=s.hasPayload,p=s.isAnimationActive,g=s.offset,b=s.position,y=s.reverseDirection,v=s.useTranslate3d,N=s.viewBox,k=s.wrapperStyle,w=xG({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:b,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:N}),A=w.cssClasses,S=w.cssProperties,_=L4(L4({transition:p&&i?"transform ".concat(l,"ms ").concat(d):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},k);return ye.createElement("div",{tabIndex:-1,className:A,style:_,ref:function(C){a.wrapperNode=C}},u)}}])})(P.PureComponent),EG=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:EG()};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function U4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function H4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(r),!0).forEach(function(a){nk(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function CG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AG(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,zM(a.key),a)}}function TG(e,t,r){return t&&AG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OG(e,t,r){return t=cp(t),PG(e,qM()?Reflect.construct(t,r||[],cp(e).constructor):t.apply(e,r))}function PG(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IG(e)}function IG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qM=function(){return!!e})()}function cp(e){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cp(e)}function DG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tN(e,t)}function tN(e,t){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},tN(e,t)}function nk(e,t,r){return t=zM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zM(e){var t=MG(e,"string");return Bd(t)=="symbol"?t:t+""}function MG(e,t){if(Bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RG(e){return e.dataKey}function FG(e,t){return ye.isValidElement(e)?ye.cloneElement(e,t):typeof e=="function"?ye.createElement(e,t):ye.createElement(uG,t)}var mn=(function(e){function t(){return CG(this,t),OG(this,t,arguments)}return DG(t,e),TG(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,d=s.animationEasing,u=s.content,f=s.coordinate,m=s.filterNull,p=s.isAnimationActive,g=s.offset,b=s.payload,y=s.payloadUniqBy,v=s.position,N=s.reverseDirection,k=s.useTranslate3d,w=s.viewBox,A=s.wrapperStyle,S=b??[];m&&S.length&&(S=DM(b.filter(function(E){return E.value!=null&&(E.hide!==!0||a.props.includeHidden)}),y,RG));var _=S.length>0;return ye.createElement(_G,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:p,active:i,coordinate:f,hasPayload:_,offset:g,position:v,reverseDirection:N,useTranslate3d:k,viewBox:w,wrapperStyle:A},FG(u,H4(H4({},this.props),{},{payload:S})))}}])})(P.PureComponent);nk(mn,"displayName","Tooltip");nk(mn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var t1,q4;function $G(){if(q4)return t1;q4=1;var e=Ji(),t=function(){return e.Date.now()};return t1=t,t1}var r1,z4;function LG(){if(z4)return r1;z4=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return r1=t,r1}var n1,W4;function BG(){if(W4)return n1;W4=1;var e=LG(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return n1=r,n1}var a1,K4;function WM(){if(K4)return a1;K4=1;var e=BG(),t=wl(),r=pu(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(u){if(typeof u=="number")return u;if(r(u))return a;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var m=i.test(u);return m||o.test(u)?l(u.slice(2),m?2:8):s.test(u)?a:+u}return a1=d,a1}var s1,V4;function UG(){if(V4)return s1;V4=1;var e=wl(),t=$G(),r=WM(),a="Expected a function",s=Math.max,i=Math.min;function o(l,d,u){var f,m,p,g,b,y,v=0,N=!1,k=!1,w=!0;if(typeof l!="function")throw new TypeError(a);d=r(d)||0,e(u)&&(N=!!u.leading,k="maxWait"in u,p=k?s(r(u.maxWait)||0,d):p,w="trailing"in u?!!u.trailing:w);function A(U){var ie=f,X=m;return f=m=void 0,v=U,g=l.apply(X,ie),g}function S(U){return v=U,b=setTimeout(C,d),N?A(U):g}function _(U){var ie=U-y,X=U-v,re=d-ie;return k?i(re,p-X):re}function E(U){var ie=U-y,X=U-v;return y===void 0||ie>=d||ie<0||k&&X>=p}function C(){var U=t();if(E(U))return I(U);b=setTimeout(C,_(U))}function I(U){return b=void 0,w&&f?A(U):(f=m=void 0,g)}function B(){b!==void 0&&clearTimeout(b),v=0,f=y=m=b=void 0}function M(){return b===void 0?g:I(t())}function O(){var U=t(),ie=E(U);if(f=arguments,m=this,y=U,ie){if(b===void 0)return S(y);if(k)return clearTimeout(b),b=setTimeout(C,d),A(y)}return b===void 0&&(b=setTimeout(C,d)),g}return O.cancel=B,O.flush=M,O}return s1=o,s1}var i1,G4;function HG(){if(G4)return i1;G4=1;var e=UG(),t=wl(),r="Expected a function";function a(s,i,o){var l=!0,d=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),e(s,i,{leading:l,maxWait:i,trailing:d})}return i1=a,i1}var qG=HG();const KM=Gr(qG);function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s0(e)}function Y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y4(Object(r),!0).forEach(function(a){zG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zG(e,t,r){return t=WG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WG(e){var t=KG(e,"string");return s0(t)=="symbol"?t:t+""}function KG(e,t){if(s0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(s0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VG(e,t){return JG(e)||XG(e,t)||YG(e,t)||GG()}function GG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YG(e,t){if(e){if(typeof e=="string")return X4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X4(e,t)}}function X4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function XG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function JG(e){if(Array.isArray(e))return e}var ya=P.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,d=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,m=e.minHeight,p=e.maxHeight,g=e.children,b=e.debounce,y=b===void 0?0:b,v=e.id,N=e.className,k=e.onResize,w=e.style,A=w===void 0?{}:w,S=P.useRef(null),_=P.useRef();_.current=k,P.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var E=P.useState({containerWidth:s.width,containerHeight:s.height}),C=VG(E,2),I=C[0],B=C[1],M=P.useCallback(function(U,ie){B(function(X){var re=Math.round(U),oe=Math.round(ie);return X.containerWidth===re&&X.containerHeight===oe?X:{containerWidth:re,containerHeight:oe}})},[]);P.useEffect(function(){var U=function(F){var J,L=F[0].contentRect,D=L.width,Y=L.height;M(D,Y),(J=_.current)===null||J===void 0||J.call(_,D,Y)};y>0&&(U=KM(U,y,{trailing:!0,leading:!1}));var ie=new ResizeObserver(U),X=S.current.getBoundingClientRect(),re=X.width,oe=X.height;return M(re,oe),ie.observe(S.current),function(){ie.disconnect()}},[M,y]);var O=P.useMemo(function(){var U=I.containerWidth,ie=I.containerHeight;if(U<0||ie<0)return null;Ci(tc(o)||tc(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Ci(!r||r>0,"The aspect(%s) must be greater than zero.",r);var X=tc(o)?U:o,re=tc(d)?ie:d;r&&r>0&&(X?re=X/r:re&&(X=re*r),p&&re>p&&(re=p)),Ci(X>0||re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,re,o,d,f,m,r);var oe=!Array.isArray(g)&&Co(g.type).endsWith("Chart");return ye.Children.map(g,function(Q){return ye.isValidElement(Q)?P.cloneElement(Q,jm({width:X,height:re},oe?{style:jm({height:"100%",width:"100%",maxHeight:re,maxWidth:X},Q.props.style)}:{})):Q})},[r,g,d,p,m,f,I,o]);return ye.createElement("div",{id:v?"".concat(v):void 0,className:yr("recharts-responsive-container",N),style:jm(jm({},A),{},{width:o,height:d,minWidth:f,minHeight:m,maxHeight:p}),ref:S},O)}),Ud=function(t){return null};Ud.displayName="Cell";function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}function J4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(r),!0).forEach(function(a){QG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J4(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function QG(e,t,r){return t=ZG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZG(e){var t=eY(e,"string");return i0(t)=="symbol"?t:t+""}function eY(e,t){if(i0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(i0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dd={widthCache:{},cacheCount:0},tY=2e3,rY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q4="recharts_measurement_span";function nY(e){var t=rN({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ah=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jl.isSsr)return{width:0,height:0};var a=nY(r),s=JSON.stringify({text:t,copyStyle:a});if(dd.widthCache[s])return dd.widthCache[s];try{var i=document.getElementById(Q4);i||(i=document.createElement("span"),i.setAttribute("id",Q4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=rN(rN({},rY),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return dd.widthCache[s]=d,++dd.cacheCount>tY&&(dd.cacheCount=0,dd.widthCache={}),d}catch{return{width:0,height:0}}},aY=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function dp(e,t){return lY(e)||oY(e,t)||iY(e,t)||sY()}function sY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){if(e){if(typeof e=="string")return Z4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z4(e,t)}}function Z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function oY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lY(e){if(Array.isArray(e))return e}function cY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eO(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,uY(a.key),a)}}function dY(e,t,r){return t&&eO(e.prototype,t),r&&eO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uY(e){var t=hY(e,"string");return o0(t)=="symbol"?t:t+""}function hY(e,t){if(o0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(o0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pY=Object.keys(VM),jd="NaN";function gY(e,t){return e*VM[t]}var Nm=(function(){function e(t,r){cY(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!fY.test(r)&&(this.num=NaN,this.unit=""),pY.includes(r)&&(this.num=gY(t,r),this.unit="px")}return dY(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=mY.exec(r))!==null&&a!==void 0?a:[],i=dp(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function GM(e){if(e.includes(jd))return jd;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=tO.exec(t))!==null&&r!==void 0?r:[],s=dp(a,4),i=s[1],o=s[2],l=s[3],d=Nm.parse(i??""),u=Nm.parse(l??""),f=o==="*"?d.multiply(u):d.divide(u);if(f.isNaN())return jd;t=t.replace(tO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,p=(m=rO.exec(t))!==null&&m!==void 0?m:[],g=dp(p,4),b=g[1],y=g[2],v=g[3],N=Nm.parse(b??""),k=Nm.parse(v??""),w=y==="+"?N.add(k):N.subtract(k);if(w.isNaN())return jd;t=t.replace(rO,w.toString())}return t}var nO=/\(([^()]*)\)/;function xY(e){for(var t=e;t.includes("(");){var r=nO.exec(t),a=dp(r,2),s=a[1];t=t.replace(nO,GM(s))}return t}function yY(e){var t=e.replace(/\s+/g,"");return t=xY(t),t=GM(t),t}function vY(e){try{return yY(e)}catch{return jd}}function o1(e){var t=vY(e.slice(5,-1));return t===jd?"":t}var bY=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wY=["dx","dy","angle","className","breakAll"];function nN(){return nN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nN.apply(this,arguments)}function aO(e,t){if(e==null)return{};var r=jY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function jY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function sO(e,t){return _Y(e)||SY(e,t)||kY(e,t)||NY()}function NY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function SY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function _Y(e){if(Array.isArray(e))return e}var YM=/[ \f\n\r\t\v\u2028\u2029]+/,XM=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];vr(r)||(a?i=r.toString().split(""):i=r.toString().split(YM));var o=i.map(function(d){return{word:d,width:Ah(d,s).width}}),l=a?0:Ah("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},EY=function(t,r,a,s,i){var o=t.maxLines,l=t.children,d=t.style,u=t.breakAll,f=wt(o),m=l,p=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(re,oe){var Q=oe.word,F=oe.width,J=re[re.length-1];if(J&&(s==null||i||J.width+F+a<Number(s)))J.words.push(Q),J.width+=F+a;else{var L={words:[Q],width:F};re.push(L)}return re},[])},g=p(r),b=function(X){return X.reduce(function(re,oe){return re.width>oe.width?re:oe})};if(!f)return g;for(var y="",v=function(X){var re=m.slice(0,X),oe=XM({breakAll:u,style:d,children:re+y}).wordsWithComputedWidth,Q=p(oe),F=Q.length>o||b(Q).width>Number(s);return[F,Q]},N=0,k=m.length-1,w=0,A;N<=k&&w<=m.length-1;){var S=Math.floor((N+k)/2),_=S-1,E=v(_),C=sO(E,2),I=C[0],B=C[1],M=v(S),O=sO(M,1),U=O[0];if(!I&&!U&&(N=S+1),I&&U&&(k=S-1),!I&&U){A=B;break}w++}return A||g},oO=function(t){var r=vr(t)?[]:t.toString().split(YM);return[{words:r}]},CY=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!jl.isSsr){var d,u,f=XM({breakAll:o,children:s,style:i});if(f){var m=f.wordsWithComputedWidth,p=f.spaceWidth;d=m,u=p}else return oO(s);return EY({breakAll:o,children:s,maxLines:l,style:i},d,u,r,a)}return oO(s)},lO="#808080",gc=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,d=t.capHeight,u=d===void 0?"0.71em":d,f=t.scaleToFit,m=f===void 0?!1:f,p=t.textAnchor,g=p===void 0?"start":p,b=t.verticalAnchor,y=b===void 0?"end":b,v=t.fill,N=v===void 0?lO:v,k=aO(t,bY),w=P.useMemo(function(){return CY({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:m,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,m,k.style,k.width]),A=k.dx,S=k.dy,_=k.angle,E=k.className,C=k.breakAll,I=aO(k,wY);if(!ua(a)||!ua(i))return null;var B=a+(wt(A)?A:0),M=i+(wt(S)?S:0),O;switch(y){case"start":O=o1("calc(".concat(u,")"));break;case"middle":O=o1("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=o1("calc(".concat(w.length-1," * -").concat(l,")"));break}var U=[];if(m){var ie=w[0].width,X=k.width;U.push("scale(".concat((wt(X)?X/ie:1)/ie,")"))}return _&&U.push("rotate(".concat(_,", ").concat(B,", ").concat(M,")")),U.length&&(I.transform=U.join(" ")),ye.createElement("text",nN({},Kt(I,!0),{x:B,y:M,className:yr("recharts-text",E),textAnchor:g,fill:N.includes("url")?lO:N}),w.map(function(re,oe){var Q=re.words.join(C?"":" ");return ye.createElement("tspan",{x:B,dy:oe===0?O:l,key:"".concat(Q,"-").concat(oe)},Q)}))};function gl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function AY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ak(e){let t,r,a;e.length!==2?(t=gl,r=(l,d)=>gl(e(l),d),a=(l,d)=>e(l)-d):(t=e===gl||e===AY?e:TY,r=e,a=e);function s(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<0?u=m+1:f=m}while(u<f)}return u}function i(l,d,u=0,f=l.length){if(u<f){if(t(d,d)!==0)return f;do{const m=u+f>>>1;r(l[m],d)<=0?u=m+1:f=m}while(u<f)}return u}function o(l,d,u=0,f=l.length){const m=s(l,d,u,f-1);return m>u&&a(l[m-1],d)>-a(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function TY(){return 0}function JM(e){return e===null?NaN:+e}function*OY(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const PY=ak(gl),ef=PY.right;ak(JM).center;class cO extends Map{constructor(t,r=MY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(dO(this,t))}has(t){return super.has(dO(this,t))}set(t,r){return super.set(IY(this,t),r)}delete(t){return super.delete(DY(this,t))}}function dO({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function IY({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function DY({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function MY(e){return e!==null&&typeof e=="object"?e.valueOf():e}function RY(e=gl){if(e===gl)return QM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function QM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const FY=Math.sqrt(50),$Y=Math.sqrt(10),LY=Math.sqrt(2);function up(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=FY?10:i>=$Y?5:i>=LY?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?up(e,t,r*2):[l,d,u]}function aN(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?up(t,e,r):up(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function sN(e,t,r){return t=+t,e=+e,r=+r,up(e,t,r)[2]}function iN(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?sN(t,e,r):sN(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function uO(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function hO(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function ZM(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?QM:RY(s);a>r;){if(a-r>600){const d=a-r+1,u=t-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*m*(d-m)/d)*(u-d/2<0?-1:1),g=Math.max(r,Math.floor(t-u*m/d+p)),b=Math.min(a,Math.floor(t+(d-u)*m/d+p));ZM(e,t,g,b,s)}const i=e[t];let o=r,l=a;for(ih(e,r,t),s(e[a],i)>0&&ih(e,r,a);o<l;){for(ih(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?ih(e,r,l):(++l,ih(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function ih(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function BY(e,t,r){if(e=Float64Array.from(OY(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return hO(e);if(t>=1)return uO(e);var a,s=(a-1)*t,i=Math.floor(s),o=uO(ZM(e,i).subarray(0,i+1)),l=hO(e.subarray(i+1));return o+(l-o)*(s-i)}}function UY(e,t,r=JM){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function HY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function si(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const oN=Symbol("implicit");function sk(){var e=new cO,t=[],r=[],a=oN;function s(i){let o=e.get(i);if(o===void 0){if(a!==oN)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new cO;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return sk(t,r).unknown(a)},si.apply(s,arguments),s}function l0(){var e=sk().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,d=0,u=0,f=.5;delete e.unknown;function m(){var p=t().length,g=s<a,b=g?s:a,y=g?a:s;i=(y-b)/Math.max(1,p-d+u*2),l&&(i=Math.floor(i)),b+=(y-b-i*(p-d))*f,o=i*(1-d),l&&(b=Math.round(b),o=Math.round(o));var v=HY(p).map(function(N){return b+i*N});return r(g?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(d=Math.min(1,u=+p),m()):d},e.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),m()):d},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),m()):f},e.copy=function(){return l0(t(),[a,s]).round(l).paddingInner(d).paddingOuter(u).align(f)},si.apply(m(),arguments)}function eR(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eR(t())},e}function Th(){return eR(l0.apply(null,arguments).paddingInner(1))}function ik(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tR(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function tf(){}var c0=.7,hp=1/c0,Od="\\s*([+-]?\\d+)\\s*",d0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qY=/^#([0-9a-f]{3,8})$/,zY=new RegExp(`^rgb\\(${Od},${Od},${Od}\\)$`),WY=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),KY=new RegExp(`^rgba\\(${Od},${Od},${Od},${d0}\\)$`),VY=new RegExp(`^rgba\\(${zi},${zi},${zi},${d0}\\)$`),GY=new RegExp(`^hsl\\(${d0},${zi},${zi}\\)$`),YY=new RegExp(`^hsla\\(${d0},${zi},${zi},${d0}\\)$`),fO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ik(tf,u0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mO,formatHex:mO,formatHex8:XY,formatHsl:JY,formatRgb:pO,toString:pO});function mO(){return this.rgb().formatHex()}function XY(){return this.rgb().formatHex8()}function JY(){return rR(this).formatHsl()}function pO(){return this.rgb().formatRgb()}function u0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=qY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?gO(t):r===3?new vs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?km(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?km(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zY.exec(e))?new vs(t[1],t[2],t[3],1):(t=WY.exec(e))?new vs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=KY.exec(e))?km(t[1],t[2],t[3],t[4]):(t=VY.exec(e))?km(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GY.exec(e))?vO(t[1],t[2]/100,t[3]/100,1):(t=YY.exec(e))?vO(t[1],t[2]/100,t[3]/100,t[4]):fO.hasOwnProperty(e)?gO(fO[e]):e==="transparent"?new vs(NaN,NaN,NaN,0):null}function gO(e){return new vs(e>>16&255,e>>8&255,e&255,1)}function km(e,t,r,a){return a<=0&&(e=t=r=NaN),new vs(e,t,r,a)}function QY(e){return e instanceof tf||(e=u0(e)),e?(e=e.rgb(),new vs(e.r,e.g,e.b,e.opacity)):new vs}function lN(e,t,r,a){return arguments.length===1?QY(e):new vs(e,t,r,a??1)}function vs(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}ik(vs,lN,tR(tf,{brighter(e){return e=e==null?hp:Math.pow(hp,e),new vs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?c0:Math.pow(c0,e),new vs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vs(ic(this.r),ic(this.g),ic(this.b),fp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xO,formatHex:xO,formatHex8:ZY,formatRgb:yO,toString:yO}));function xO(){return`#${rc(this.r)}${rc(this.g)}${rc(this.b)}`}function ZY(){return`#${rc(this.r)}${rc(this.g)}${rc(this.b)}${rc((isNaN(this.opacity)?1:this.opacity)*255)}`}function yO(){const e=fp(this.opacity);return`${e===1?"rgb(":"rgba("}${ic(this.r)}, ${ic(this.g)}, ${ic(this.b)}${e===1?")":`, ${e})`}`}function fp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ic(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rc(e){return e=ic(e),(e<16?"0":"")+e.toString(16)}function vO(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ki(e,t,r,a)}function rR(e){if(e instanceof ki)return new ki(e.h,e.s,e.l,e.opacity);if(e instanceof tf||(e=u0(e)),!e)return new ki;if(e instanceof ki)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new ki(o,l,d,e.opacity)}function eX(e,t,r,a){return arguments.length===1?rR(e):new ki(e,t,r,a??1)}function ki(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}ik(ki,eX,tR(tf,{brighter(e){return e=e==null?hp:Math.pow(hp,e),new ki(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?c0:Math.pow(c0,e),new ki(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new vs(l1(e>=240?e-240:e+120,s,a),l1(e,s,a),l1(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new ki(bO(this.h),Sm(this.s),Sm(this.l),fp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fp(this.opacity);return`${e===1?"hsl(":"hsla("}${bO(this.h)}, ${Sm(this.s)*100}%, ${Sm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bO(e){return e=(e||0)%360,e<0?e+360:e}function Sm(e){return Math.max(0,Math.min(1,e||0))}function l1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ok=e=>()=>e;function tX(e,t){return function(r){return e+r*t}}function rX(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function nX(e){return(e=+e)==1?nR:function(t,r){return r-t?rX(t,r,e):ok(isNaN(t)?r:t)}}function nR(e,t){var r=t-e;return r?tX(e,r):ok(isNaN(e)?t:e)}const wO=(function e(t){var r=nX(t);function a(s,i){var o=r((s=lN(s)).r,(i=lN(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=nR(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=d(f),s.opacity=u(f),s+""}}return a.gamma=e,a})(1);function aX(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function sX(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iX(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=vu(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function oX(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function mp(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lX(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=vu(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var cN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c1=new RegExp(cN.source,"g");function cX(e){return function(){return e}}function dX(e){return function(t){return e(t)+""}}function uX(e,t){var r=cN.lastIndex=c1.lastIndex=0,a,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(a=cN.exec(e))&&(s=c1.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:mp(a,s)})),r=c1.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?dX(d[0].x):cX(t):(t=d.length,function(u){for(var f=0,m;f<t;++f)l[(m=d[f]).i]=m.x(u);return l.join("")})}function vu(e,t){var r=typeof t,a;return t==null||r==="boolean"?ok(t):(r==="number"?mp:r==="string"?(a=u0(t))?(t=a,wO):uX:t instanceof u0?wO:t instanceof Date?oX:sX(t)?aX:Array.isArray(t)?iX:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lX:mp)(e,t)}function lk(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function hX(e,t){t===void 0&&(t=e,e=vu);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function fX(e){return function(){return e}}function pp(e){return+e}var jO=[0,1];function os(e){return e}function dN(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fX(isNaN(t)?NaN:.5)}function mX(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function pX(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=dN(s,a),i=r(o,i)):(a=dN(a,s),i=r(i,o)),function(l){return i(a(l))}}function gX(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=dN(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=ef(e,l,1,a)-1;return i[d](s[d](l))}}function rf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qg(){var e=jO,t=jO,r=vu,a,s,i,o=os,l,d,u;function f(){var p=Math.min(e.length,t.length);return o!==os&&(o=mX(e[0],e[p-1])),l=p>2?gX:pX,d=u=null,m}function m(p){return p==null||isNaN(p=+p)?i:(d||(d=l(e.map(a),t,r)))(a(o(p)))}return m.invert=function(p){return o(s((u||(u=l(t,e.map(a),mp)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,pp),f()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),r=lk,f()},m.clamp=function(p){return arguments.length?(o=p?!0:os,f()):o!==os},m.interpolate=function(p){return arguments.length?(r=p,f()):r},m.unknown=function(p){return arguments.length?(i=p,m):i},function(p,g){return a=p,s=g,f()}}function ck(){return qg()(os,os)}function xX(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gp(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Hd(e){return e=gp(Math.abs(e)),e?e[1]:NaN}function yX(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>a&&(l=Math.max(1,a-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function vX(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function h0(e){if(!(t=bX.exec(e)))throw new Error("invalid format: "+e);var t;return new dk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}h0.prototype=dk.prototype;function dk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wX(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var xp;function jX(e,t){var r=gp(e,t);if(!r)return xp=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(xp=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+gp(e,Math.max(0,t+i-1))[0]}function NO(e,t){var r=gp(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const kO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xX,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>NO(e*100,t),r:NO,s:jX,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SO(e){return e}var _O=Array.prototype.map,EO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function NX(e){var t=e.grouping===void 0||e.thousands===void 0?SO:yX(_O.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?SO:vX(_O.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m,p){m=h0(m);var g=m.fill,b=m.align,y=m.sign,v=m.symbol,N=m.zero,k=m.width,w=m.comma,A=m.precision,S=m.trim,_=m.type;_==="n"?(w=!0,_="g"):kO[_]||(A===void 0&&(A=12),S=!0,_="g"),(N||g==="0"&&b==="=")&&(N=!0,g="0",b="=");var E=(p&&p.prefix!==void 0?p.prefix:"")+(v==="$"?r:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),C=(v==="$"?a:/[%p]/.test(_)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),I=kO[_],B=/[defgprs%]/.test(_);A=A===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function M(O){var U=E,ie=C,X,re,oe;if(_==="c")ie=I(O)+ie,O="";else{O=+O;var Q=O<0||1/O<0;if(O=isNaN(O)?d:I(Math.abs(O),A),S&&(O=wX(O)),Q&&+O==0&&y!=="+"&&(Q=!1),U=(Q?y==="("?y:l:y==="-"||y==="("?"":y)+U,ie=(_==="s"&&!isNaN(O)&&xp!==void 0?EO[8+xp/3]:"")+ie+(Q&&y==="("?")":""),B){for(X=-1,re=O.length;++X<re;)if(oe=O.charCodeAt(X),48>oe||oe>57){ie=(oe===46?s+O.slice(X+1):O.slice(X))+ie,O=O.slice(0,X);break}}}w&&!N&&(O=t(O,1/0));var F=U.length+O.length+ie.length,J=F<k?new Array(k-F+1).join(g):"";switch(w&&N&&(O=t(J+O,J.length?k-ie.length:1/0),J=""),b){case"<":O=U+O+ie+J;break;case"=":O=U+J+O+ie;break;case"^":O=J.slice(0,F=J.length>>1)+U+O+ie+J.slice(F);break;default:O=J+U+O+ie;break}return i(O)}return M.toString=function(){return m+""},M}function f(m,p){var g=Math.max(-8,Math.min(8,Math.floor(Hd(p)/3)))*3,b=Math.pow(10,-g),y=u((m=h0(m),m.type="f",m),{suffix:EO[8+g/3]});return function(v){return y(b*v)}}return{format:u,formatPrefix:f}}var _m,uk,aR;kX({thousands:",",grouping:[3],currency:["$",""]});function kX(e){return _m=NX(e),uk=_m.format,aR=_m.formatPrefix,_m}function SX(e){return Math.max(0,-Hd(Math.abs(e)))}function _X(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hd(t)/3)))*3-Hd(Math.abs(e)))}function EX(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hd(t)-Hd(e))+1}function sR(e,t,r,a){var s=iN(e,t,r),i;switch(a=h0(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=_X(s,o))&&(a.precision=i),aR(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=EX(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=SX(s))&&(a.precision=i-(a.type==="%")*2);break}}return uk(a)}function Nl(e){var t=e.domain;return e.ticks=function(r){var a=t();return aN(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return sR(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],d,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=sN(o,l,r),u===d)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function yp(){var e=ck();return e.copy=function(){return rf(e,yp())},si.apply(e,arguments),Nl(e)}function iR(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,pp),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return iR(e).unknown(t)},e=arguments.length?Array.from(e,pp):[0,1],Nl(r)}function oR(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function CO(e){return Math.log(e)}function AO(e){return Math.exp(e)}function CX(e){return-Math.log(-e)}function AX(e){return-Math.exp(-e)}function TX(e){return isFinite(e)?+("1e"+e):e<0?0:e}function OX(e){return e===10?TX:e===Math.E?Math.exp:t=>Math.pow(e,t)}function PX(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TO(e){return(t,r)=>-e(-t,r)}function hk(e){const t=e(CO,AO),r=t.domain;let a=10,s,i;function o(){return s=PX(a),i=OX(a),r()[0]<0?(s=TO(s),i=TO(i),e(CX,AX)):e(CO,AO),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],f=d[d.length-1];const m=f<u;m&&([u,f]=[f,u]);let p=s(u),g=s(f),b,y;const v=l==null?10:+l;let N=[];if(!(a%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(b=1;b<a;++b)if(y=p<0?b/i(-p):b*i(p),!(y<u)){if(y>f)break;N.push(y)}}else for(;p<=g;++p)for(b=a-1;b>=1;--b)if(y=p>0?b/i(-p):b*i(p),!(y<u)){if(y>f)break;N.push(y)}N.length*2<v&&(N=aN(u,f,v))}else N=aN(p,g,Math.min(g-p,v)).map(i);return m?N.reverse():N},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=a===10?"s":","),typeof d!="function"&&(!(a%1)&&(d=h0(d)).precision==null&&(d.trim=!0),d=uk(d)),l===1/0)return d;const u=Math.max(1,a*l/t.ticks().length);return f=>{let m=f/i(Math.round(s(f)));return m*a<a-.5&&(m*=a),m<=u?d(f):""}},t.nice=()=>r(oR(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function lR(){const e=hk(qg()).domain([1,10]);return e.copy=()=>rf(e,lR()).base(e.base()),si.apply(e,arguments),e}function OO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fk(e){var t=1,r=e(OO(t),PO(t));return r.constant=function(a){return arguments.length?e(OO(t=+a),PO(t)):t},Nl(r)}function cR(){var e=fk(qg());return e.copy=function(){return rf(e,cR()).constant(e.constant())},si.apply(e,arguments)}function IO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function IX(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DX(e){return e<0?-e*e:e*e}function mk(e){var t=e(os,os),r=1;function a(){return r===1?e(os,os):r===.5?e(IX,DX):e(IO(r),IO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},Nl(t)}function pk(){var e=mk(qg());return e.copy=function(){return rf(e,pk()).exponent(e.exponent())},si.apply(e,arguments),e}function MX(){return pk.apply(null,arguments).exponent(.5)}function DO(e){return Math.sign(e)*e*e}function RX(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function dR(){var e=ck(),t=[0,1],r=!1,a;function s(i){var o=RX(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(DO(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,pp)).map(DO)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return dR(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},si.apply(s,arguments),Nl(s)}function uR(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=UY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[ef(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(gl),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return uR().domain(e).range(t).unknown(a)},si.apply(i,arguments)}function hR(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[ef(a,d,0,r)]:i}function l(){var d=-1;for(a=new Array(r);++d<r;)a[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=r?[a[r-1],t]:[a[u-1],a[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return a.slice()},o.copy=function(){return hR().domain([e,t]).range(s).unknown(i)},si.apply(Nl(o),arguments)}function fR(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[ef(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return fR().domain(e).range(t).unknown(r)},si.apply(s,arguments)}const d1=new Date,u1=new Date;function ma(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>ma(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(d1.setTime(+i),u1.setTime(+o),e(d1),e(u1),Math.floor(r(d1,u1))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const vp=ma(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ma(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vp);vp.range;const No=1e3,ri=No*60,ko=ri*60,Po=ko*24,gk=Po*7,MO=Po*30,h1=Po*365,nc=ma(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*No)},(e,t)=>(t-e)/No,e=>e.getUTCSeconds());nc.range;const xk=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*No)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getMinutes());xk.range;const yk=ma(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getUTCMinutes());yk.range;const vk=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*No-e.getMinutes()*ri)},(e,t)=>{e.setTime(+e+t*ko)},(e,t)=>(t-e)/ko,e=>e.getHours());vk.range;const bk=ma(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ko)},(e,t)=>(t-e)/ko,e=>e.getUTCHours());bk.range;const nf=ma(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ri)/Po,e=>e.getDate()-1);nf.range;const zg=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Po,e=>e.getUTCDate()-1);zg.range;const mR=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Po,e=>Math.floor(e/Po));mR.range;function _c(e){return ma(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ri)/gk)}const Wg=_c(0),bp=_c(1),FX=_c(2),$X=_c(3),qd=_c(4),LX=_c(5),BX=_c(6);Wg.range;bp.range;FX.range;$X.range;qd.range;LX.range;BX.range;function Ec(e){return ma(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/gk)}const Kg=Ec(0),wp=Ec(1),UX=Ec(2),HX=Ec(3),zd=Ec(4),qX=Ec(5),zX=Ec(6);Kg.range;wp.range;UX.range;HX.range;zd.range;qX.range;zX.range;const wk=ma(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wk.range;const jk=ma(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jk.range;const Io=ma(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Io.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Io.range;const Do=ma(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Do.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Do.range;function pR(e,t,r,a,s,i){const o=[[nc,1,No],[nc,5,5*No],[nc,15,15*No],[nc,30,30*No],[i,1,ri],[i,5,5*ri],[i,15,15*ri],[i,30,30*ri],[s,1,ko],[s,3,3*ko],[s,6,6*ko],[s,12,12*ko],[a,1,Po],[a,2,2*Po],[r,1,gk],[t,1,MO],[t,3,3*MO],[e,1,h1]];function l(u,f,m){const p=f<u;p&&([u,f]=[f,u]);const g=m&&typeof m.range=="function"?m:d(u,f,m),b=g?g.range(u,+f+1):[];return p?b.reverse():b}function d(u,f,m){const p=Math.abs(f-u)/m,g=ak(([,,v])=>v).right(o,p);if(g===o.length)return e.every(iN(u/h1,f/h1,m));if(g===0)return vp.every(Math.max(iN(u,f,m),1));const[b,y]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return b.every(y)}return[l,d]}const[WX,KX]=pR(Do,jk,Kg,mR,bk,yk),[VX,GX]=pR(Io,wk,Wg,nf,vk,xk);function f1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function m1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oh(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function YX(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=lh(s),f=ch(s),m=lh(i),p=ch(i),g=lh(o),b=ch(o),y=lh(l),v=ch(l),N=lh(d),k=ch(d),w={a:oe,A:Q,b:F,B:J,c:null,d:UO,e:UO,f:yJ,g:CJ,G:TJ,H:pJ,I:gJ,j:xJ,L:gR,m:vJ,M:bJ,p:L,q:D,Q:zO,s:WO,S:wJ,u:jJ,U:NJ,V:kJ,w:SJ,W:_J,x:null,X:null,y:EJ,Y:AJ,Z:OJ,"%":qO},A={a:Y,A:V,b:ee,B:ge,c:null,d:HO,e:HO,f:MJ,g:WJ,G:VJ,H:PJ,I:IJ,j:DJ,L:yR,m:RJ,M:FJ,p:ke,q:Ce,Q:zO,s:WO,S:$J,u:LJ,U:BJ,V:UJ,w:HJ,W:qJ,x:null,X:null,y:zJ,Y:KJ,Z:GJ,"%":qO},S={a:B,A:M,b:O,B:U,c:ie,d:LO,e:LO,f:uJ,g:$O,G:FO,H:BO,I:BO,j:oJ,L:dJ,m:iJ,M:lJ,p:I,q:sJ,Q:fJ,s:mJ,S:cJ,u:eJ,U:tJ,V:rJ,w:ZX,W:nJ,x:X,X:re,y:$O,Y:FO,Z:aJ,"%":hJ};w.x=_(r,w),w.X=_(a,w),w.c=_(t,w),A.x=_(r,A),A.X=_(a,A),A.c=_(t,A);function _(ce,me){return function(Oe){var G=[],ze=-1,Ye=0,ct=ce.length,We,Pe,Ne;for(Oe instanceof Date||(Oe=new Date(+Oe));++ze<ct;)ce.charCodeAt(ze)===37&&(G.push(ce.slice(Ye,ze)),(Pe=RO[We=ce.charAt(++ze)])!=null?We=ce.charAt(++ze):Pe=We==="e"?" ":"0",(Ne=me[We])&&(We=Ne(Oe,Pe)),G.push(We),Ye=ze+1);return G.push(ce.slice(Ye,ze)),G.join("")}}function E(ce,me){return function(Oe){var G=oh(1900,void 0,1),ze=C(G,ce,Oe+="",0),Ye,ct;if(ze!=Oe.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(me&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(Ye=m1(oh(G.y,0,1)),ct=Ye.getUTCDay(),Ye=ct>4||ct===0?wp.ceil(Ye):wp(Ye),Ye=zg.offset(Ye,(G.V-1)*7),G.y=Ye.getUTCFullYear(),G.m=Ye.getUTCMonth(),G.d=Ye.getUTCDate()+(G.w+6)%7):(Ye=f1(oh(G.y,0,1)),ct=Ye.getDay(),Ye=ct>4||ct===0?bp.ceil(Ye):bp(Ye),Ye=nf.offset(Ye,(G.V-1)*7),G.y=Ye.getFullYear(),G.m=Ye.getMonth(),G.d=Ye.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),ct="Z"in G?m1(oh(G.y,0,1)).getUTCDay():f1(oh(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(ct+5)%7:G.w+G.U*7-(ct+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,m1(G)):f1(G)}}function C(ce,me,Oe,G){for(var ze=0,Ye=me.length,ct=Oe.length,We,Pe;ze<Ye;){if(G>=ct)return-1;if(We=me.charCodeAt(ze++),We===37){if(We=me.charAt(ze++),Pe=S[We in RO?me.charAt(ze++):We],!Pe||(G=Pe(ce,Oe,G))<0)return-1}else if(We!=Oe.charCodeAt(G++))return-1}return G}function I(ce,me,Oe){var G=u.exec(me.slice(Oe));return G?(ce.p=f.get(G[0].toLowerCase()),Oe+G[0].length):-1}function B(ce,me,Oe){var G=g.exec(me.slice(Oe));return G?(ce.w=b.get(G[0].toLowerCase()),Oe+G[0].length):-1}function M(ce,me,Oe){var G=m.exec(me.slice(Oe));return G?(ce.w=p.get(G[0].toLowerCase()),Oe+G[0].length):-1}function O(ce,me,Oe){var G=N.exec(me.slice(Oe));return G?(ce.m=k.get(G[0].toLowerCase()),Oe+G[0].length):-1}function U(ce,me,Oe){var G=y.exec(me.slice(Oe));return G?(ce.m=v.get(G[0].toLowerCase()),Oe+G[0].length):-1}function ie(ce,me,Oe){return C(ce,t,me,Oe)}function X(ce,me,Oe){return C(ce,r,me,Oe)}function re(ce,me,Oe){return C(ce,a,me,Oe)}function oe(ce){return o[ce.getDay()]}function Q(ce){return i[ce.getDay()]}function F(ce){return d[ce.getMonth()]}function J(ce){return l[ce.getMonth()]}function L(ce){return s[+(ce.getHours()>=12)]}function D(ce){return 1+~~(ce.getMonth()/3)}function Y(ce){return o[ce.getUTCDay()]}function V(ce){return i[ce.getUTCDay()]}function ee(ce){return d[ce.getUTCMonth()]}function ge(ce){return l[ce.getUTCMonth()]}function ke(ce){return s[+(ce.getUTCHours()>=12)]}function Ce(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=_(ce+="",w);return me.toString=function(){return ce},me},parse:function(ce){var me=E(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=_(ce+="",A);return me.toString=function(){return ce},me},utcParse:function(ce){var me=E(ce+="",!0);return me.toString=function(){return ce},me}}}var RO={"-":"",_:" ",0:"0"},ka=/^\s*\d+/,XX=/^%/,JX=/[\\^$*+?|[\]().{}]/g;function Ur(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function QX(e){return e.replace(JX,"\\$&")}function lh(e){return new RegExp("^(?:"+e.map(QX).join("|")+")","i")}function ch(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ZX(e,t,r){var a=ka.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function eJ(e,t,r){var a=ka.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function tJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function rJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function nJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function FO(e,t,r){var a=ka.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function $O(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function aJ(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function sJ(e,t,r){var a=ka.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function iJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function LO(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function oJ(e,t,r){var a=ka.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function BO(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function lJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function cJ(e,t,r){var a=ka.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function dJ(e,t,r){var a=ka.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function uJ(e,t,r){var a=ka.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function hJ(e,t,r){var a=XX.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function fJ(e,t,r){var a=ka.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function mJ(e,t,r){var a=ka.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function UO(e,t){return Ur(e.getDate(),t,2)}function pJ(e,t){return Ur(e.getHours(),t,2)}function gJ(e,t){return Ur(e.getHours()%12||12,t,2)}function xJ(e,t){return Ur(1+nf.count(Io(e),e),t,3)}function gR(e,t){return Ur(e.getMilliseconds(),t,3)}function yJ(e,t){return gR(e,t)+"000"}function vJ(e,t){return Ur(e.getMonth()+1,t,2)}function bJ(e,t){return Ur(e.getMinutes(),t,2)}function wJ(e,t){return Ur(e.getSeconds(),t,2)}function jJ(e){var t=e.getDay();return t===0?7:t}function NJ(e,t){return Ur(Wg.count(Io(e)-1,e),t,2)}function xR(e){var t=e.getDay();return t>=4||t===0?qd(e):qd.ceil(e)}function kJ(e,t){return e=xR(e),Ur(qd.count(Io(e),e)+(Io(e).getDay()===4),t,2)}function SJ(e){return e.getDay()}function _J(e,t){return Ur(bp.count(Io(e)-1,e),t,2)}function EJ(e,t){return Ur(e.getFullYear()%100,t,2)}function CJ(e,t){return e=xR(e),Ur(e.getFullYear()%100,t,2)}function AJ(e,t){return Ur(e.getFullYear()%1e4,t,4)}function TJ(e,t){var r=e.getDay();return e=r>=4||r===0?qd(e):qd.ceil(e),Ur(e.getFullYear()%1e4,t,4)}function OJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ur(t/60|0,"0",2)+Ur(t%60,"0",2)}function HO(e,t){return Ur(e.getUTCDate(),t,2)}function PJ(e,t){return Ur(e.getUTCHours(),t,2)}function IJ(e,t){return Ur(e.getUTCHours()%12||12,t,2)}function DJ(e,t){return Ur(1+zg.count(Do(e),e),t,3)}function yR(e,t){return Ur(e.getUTCMilliseconds(),t,3)}function MJ(e,t){return yR(e,t)+"000"}function RJ(e,t){return Ur(e.getUTCMonth()+1,t,2)}function FJ(e,t){return Ur(e.getUTCMinutes(),t,2)}function $J(e,t){return Ur(e.getUTCSeconds(),t,2)}function LJ(e){var t=e.getUTCDay();return t===0?7:t}function BJ(e,t){return Ur(Kg.count(Do(e)-1,e),t,2)}function vR(e){var t=e.getUTCDay();return t>=4||t===0?zd(e):zd.ceil(e)}function UJ(e,t){return e=vR(e),Ur(zd.count(Do(e),e)+(Do(e).getUTCDay()===4),t,2)}function HJ(e){return e.getUTCDay()}function qJ(e,t){return Ur(wp.count(Do(e)-1,e),t,2)}function zJ(e,t){return Ur(e.getUTCFullYear()%100,t,2)}function WJ(e,t){return e=vR(e),Ur(e.getUTCFullYear()%100,t,2)}function KJ(e,t){return Ur(e.getUTCFullYear()%1e4,t,4)}function VJ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?zd(e):zd.ceil(e),Ur(e.getUTCFullYear()%1e4,t,4)}function GJ(){return"+0000"}function qO(){return"%"}function zO(e){return+e}function WO(e){return Math.floor(+e/1e3)}var ud,bR,wR;YJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function YJ(e){return ud=YX(e),bR=ud.format,ud.parse,wR=ud.utcFormat,ud.utcParse,ud}function XJ(e){return new Date(e)}function JJ(e){return e instanceof Date?+e:+new Date(+e)}function Nk(e,t,r,a,s,i,o,l,d,u){var f=ck(),m=f.invert,p=f.domain,g=u(".%L"),b=u(":%S"),y=u("%I:%M"),v=u("%I %p"),N=u("%a %d"),k=u("%b %d"),w=u("%B"),A=u("%Y");function S(_){return(d(_)<_?g:l(_)<_?b:o(_)<_?y:i(_)<_?v:a(_)<_?s(_)<_?N:k:r(_)<_?w:A)(_)}return f.invert=function(_){return new Date(m(_))},f.domain=function(_){return arguments.length?p(Array.from(_,JJ)):p().map(XJ)},f.ticks=function(_){var E=p();return e(E[0],E[E.length-1],_??10)},f.tickFormat=function(_,E){return E==null?S:u(E)},f.nice=function(_){var E=p();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?p(oR(E,_)):f},f.copy=function(){return rf(f,Nk(e,t,r,a,s,i,o,l,d,u))},f}function QJ(){return si.apply(Nk(VX,GX,Io,wk,Wg,nf,vk,xk,nc,bR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZJ(){return si.apply(Nk(WX,KX,Do,jk,Kg,zg,bk,yk,nc,wR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vg(){var e=0,t=1,r,a,s,i,o=os,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function f(m){return function(p){var g,b;return arguments.length?([g,b]=p,o=m(g,b),u):[o(0),o(1)]}}return u.range=f(vu),u.rangeRound=f(lk),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),a=m(t),s=r===a?0:1/(a-r),u}}function kl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jR(){var e=Nl(Vg()(os));return e.copy=function(){return kl(e,jR())},Bo.apply(e,arguments)}function NR(){var e=hk(Vg()).domain([1,10]);return e.copy=function(){return kl(e,NR()).base(e.base())},Bo.apply(e,arguments)}function kR(){var e=fk(Vg());return e.copy=function(){return kl(e,kR()).constant(e.constant())},Bo.apply(e,arguments)}function kk(){var e=mk(Vg());return e.copy=function(){return kl(e,kk()).exponent(e.exponent())},Bo.apply(e,arguments)}function eQ(){return kk.apply(null,arguments).exponent(.5)}function SR(){var e=[],t=os;function r(a){if(a!=null&&!isNaN(a=+a))return t((ef(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(gl),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>BY(e,i/a))},r.copy=function(){return SR(t).domain(e)},Bo.apply(r,arguments)}function Gg(){var e=0,t=.5,r=1,a=1,s,i,o,l,d,u=os,f,m=!1,p;function g(y){return isNaN(y=+y)?p:(y=.5+((y=+f(y))-i)*(a*y<a*i?l:d),u(m?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(m=!!y,g):m},g.interpolator=function(y){return arguments.length?(u=y,g):u};function b(y){return function(v){var N,k,w;return arguments.length?([N,k,w]=v,u=hX(y,[N,k,w]),g):[u(0),u(.5),u(1)]}}return g.range=b(vu),g.rangeRound=b(lk),g.unknown=function(y){return arguments.length?(p=y,g):p},function(y){return f=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),a=i<s?-1:1,g}}function _R(){var e=Nl(Gg()(os));return e.copy=function(){return kl(e,_R())},Bo.apply(e,arguments)}function ER(){var e=hk(Gg()).domain([.1,1,10]);return e.copy=function(){return kl(e,ER()).base(e.base())},Bo.apply(e,arguments)}function CR(){var e=fk(Gg());return e.copy=function(){return kl(e,CR()).constant(e.constant())},Bo.apply(e,arguments)}function Sk(){var e=mk(Gg());return e.copy=function(){return kl(e,Sk()).exponent(e.exponent())},Bo.apply(e,arguments)}function tQ(){return Sk.apply(null,arguments).exponent(.5)}const KO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:l0,scaleDiverging:_R,scaleDivergingLog:ER,scaleDivergingPow:Sk,scaleDivergingSqrt:tQ,scaleDivergingSymlog:CR,scaleIdentity:iR,scaleImplicit:oN,scaleLinear:yp,scaleLog:lR,scaleOrdinal:sk,scalePoint:Th,scalePow:pk,scaleQuantile:uR,scaleQuantize:hR,scaleRadial:dR,scaleSequential:jR,scaleSequentialLog:NR,scaleSequentialPow:kk,scaleSequentialQuantile:SR,scaleSequentialSqrt:eQ,scaleSequentialSymlog:kR,scaleSqrt:MX,scaleSymlog:cR,scaleThreshold:fR,scaleTime:QJ,scaleUtc:ZJ,tickFormat:sR},Symbol.toStringTag,{value:"Module"}));var p1,VO;function Yg(){if(VO)return p1;VO=1;var e=pu();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=a(l);if(d!=null&&(u===void 0?d===d&&!e(d):s(d,u)))var u=d,f=l}return f}return p1=t,p1}var g1,GO;function AR(){if(GO)return g1;GO=1;function e(t,r){return t>r}return g1=e,g1}var x1,YO;function rQ(){if(YO)return x1;YO=1;var e=Yg(),t=AR(),r=yu();function a(s){return s&&s.length?e(s,r,t):void 0}return x1=a,x1}var nQ=rQ();const Xg=Gr(nQ);var y1,XO;function TR(){if(XO)return y1;XO=1;function e(t,r){return t<r}return y1=e,y1}var v1,JO;function aQ(){if(JO)return v1;JO=1;var e=Yg(),t=TR(),r=yu();function a(s){return s&&s.length?e(s,r,t):void 0}return v1=a,v1}var sQ=aQ();const Jg=Gr(sQ);var b1,QO;function iQ(){if(QO)return b1;QO=1;var e=U2(),t=Qi(),r=LM(),a=ws();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return b1=s,b1}var w1,ZO;function oQ(){if(ZO)return w1;ZO=1;var e=FM(),t=iQ();function r(a,s){return e(t(a,s),1)}return w1=r,w1}var lQ=oQ();const cQ=Gr(lQ);var j1,e3;function dQ(){if(e3)return j1;e3=1;var e=ek();function t(r,a){return e(r,a)}return j1=t,j1}var uQ=dQ();const bu=Gr(uQ);var wu=1e9,hQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ek,En=!0,ni="[DecimalError] ",oc=ni+"Invalid argument: ",_k=ni+"Exponent out of range: ",ju=Math.floor,Gl=Math.pow,fQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ds,va=1e7,wn=7,OR=9007199254740991,jp=ju(OR/wn),Mt={};Mt.absoluteValue=Mt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Mt.comparedTo=Mt.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*wn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Mt.dividedBy=Mt.div=function(e){return Ao(this,new this.constructor(e))};Mt.dividedToIntegerBy=Mt.idiv=function(e){var t=this,r=t.constructor;return on(Ao(t,new r(e),0,1),r.precision)};Mt.equals=Mt.eq=function(e){return!this.cmp(e)};Mt.exponent=function(){return ea(this)};Mt.greaterThan=Mt.gt=function(e){return this.cmp(e)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(e){return this.cmp(e)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(e){return this.cmp(e)<0};Mt.lessThanOrEqualTo=Mt.lte=function(e){return this.cmp(e)<1};Mt.logarithm=Mt.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ds))throw Error(ni+"NaN");if(r.s<1)throw Error(ni+(r.s?"NaN":"-Infinity"));return r.eq(Ds)?new a(0):(En=!1,t=Ao(f0(r,i),f0(e,i),i),En=!0,on(t,s))};Mt.minus=Mt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DR(t,e):PR(t,(e.s=-e.s,e))};Mt.modulo=Mt.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(ni+"NaN");return r.s?(En=!1,t=Ao(r,e,0,1).times(e),En=!0,r.minus(t)):on(new a(r),s)};Mt.naturalExponential=Mt.exp=function(){return IR(this)};Mt.naturalLogarithm=Mt.ln=function(){return f0(this)};Mt.negated=Mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Mt.plus=Mt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?PR(t,e):DR(t,(e.s=-e.s,e))};Mt.precision=Mt.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(oc+e);if(t=ea(s)+1,a=s.d.length-1,r=a*wn+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Mt.squareRoot=Mt.sqrt=function(){var e,t,r,a,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(ni+"NaN")}for(e=ea(l),En=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Hi(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=ju((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new d(t)):a=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=a,a=i.plus(Ao(l,i,o+2)).times(.5),Hi(i.d).slice(0,o)===(t=Hi(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(on(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return En=!0,on(a,r)};Mt.times=Mt.mul=function(e){var t,r,a,s,i,o,l,d,u,f=this,m=f.constructor,p=f.d,g=(e=new m(e)).d;if(!f.s||!e.s)return new m(0);for(e.s*=f.s,r=f.e+e.e,d=p.length,u=g.length,d<u&&(i=p,p=g,g=i,o=d,d=u,u=o),i=[],o=d+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=d+a;s>a;)l=i[s]+g[a]*p[s-a-1]+t,i[s--]=l%va|0,t=l/va|0;i[s]=(i[s]+t)%va|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,En?on(e,m.precision):e};Mt.toDecimalPlaces=Mt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Yi(e,0,wu),t===void 0?t=a.rounding:Yi(t,0,8),on(r,e+ea(r)+1,t))};Mt.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=xc(a,!0):(Yi(e,0,wu),t===void 0?t=s.rounding:Yi(t,0,8),a=on(new s(a),e+1,t),r=xc(a,!0,e+1)),r};Mt.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?xc(s):(Yi(e,0,wu),t===void 0?t=i.rounding:Yi(t,0,8),a=on(new i(s),e+ea(s)+1,t),r=xc(a.abs(),!1,e+ea(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Mt.toInteger=Mt.toint=function(){var e=this,t=e.constructor;return on(new t(e),ea(e)+1,t.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(e){var t,r,a,s,i,o,l=this,d=l.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d(Ds);if(l=new d(l),!l.s){if(e.s<1)throw Error(ni+"Infinity");return l}if(l.eq(Ds))return l;if(a=d.precision,e.eq(Ds))return on(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=OR){for(s=new d(Ds),t=Math.ceil(a/wn+4),En=!1;r%2&&(s=s.times(l),r3(s.d,t)),r=ju(r/2),r!==0;)l=l.times(l),r3(l.d,t);return En=!0,e.s<0?new d(Ds).div(s):on(s,a)}}else if(i<0)throw Error(ni+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,En=!1,s=e.times(f0(l,a+u)),En=!0,s=IR(s),s.s=i,s};Mt.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=ea(s),a=xc(s,r<=i.toExpNeg||r>=i.toExpPos)):(Yi(e,1,wu),t===void 0?t=i.rounding:Yi(t,0,8),s=on(new i(s),e,t),r=ea(s),a=xc(s,e<=r||r<=i.toExpNeg,e)),a};Mt.toSignificantDigits=Mt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Yi(e,1,wu),t===void 0?t=a.rounding:Yi(t,0,8)),on(new a(r),e,t)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ea(e),r=e.constructor;return xc(e,t<=r.toExpNeg||t>=r.toExpPos)};function PR(e,t){var r,a,s,i,o,l,d,u,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),En?on(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(a=d,i=-i,l=u.length):(a=u,s=o,l=d.length),o=Math.ceil(m/wn),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,a=u,u=d,d=a),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/va|0,d[i]%=va;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,En?on(t,m):t}function Yi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(oc+e)}function Hi(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=wn-a.length,r&&(i+=sl(r)),i+=a;o=e[t],a=o+"",r=wn-a.length,r&&(i+=sl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ao=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%va|0,o=i/va|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(a[l]!=s[l]){d=a[l]>s[l]?1:-1;break}return d}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*va+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,d,u,f,m,p,g,b,y,v,N,k,w,A,S,_,E,C,I=a.constructor,B=a.s==s.s?1:-1,M=a.d,O=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(ni+"Division by zero");for(d=a.e-s.e,E=O.length,S=M.length,g=new I(B),b=g.d=[],u=0;O[u]==(M[u]||0);)++u;if(O[u]>(M[u]||0)&&--d,i==null?k=i=I.precision:o?k=i+(ea(a)-ea(s))+1:k=i,k<0)return new I(0);if(k=k/wn+2|0,u=0,E==1)for(f=0,O=O[0],k++;(u<S||f)&&k--;u++)w=f*va+(M[u]||0),b[u]=w/O|0,f=w%O|0;else{for(f=va/(O[0]+1)|0,f>1&&(O=e(O,f),M=e(M,f),E=O.length,S=M.length),A=E,y=M.slice(0,E),v=y.length;v<E;)y[v++]=0;C=O.slice(),C.unshift(0),_=O[0],O[1]>=va/2&&++_;do f=0,l=t(O,y,E,v),l<0?(N=y[0],E!=v&&(N=N*va+(y[1]||0)),f=N/_|0,f>1?(f>=va&&(f=va-1),m=e(O,f),p=m.length,v=y.length,l=t(m,y,p,v),l==1&&(f--,r(m,E<p?C:O,p))):(f==0&&(l=f=1),m=O.slice()),p=m.length,p<v&&m.unshift(0),r(y,m,v),l==-1&&(v=y.length,l=t(O,y,E,v),l<1&&(f++,r(y,E<v?C:O,v))),v=y.length):l===0&&(f++,y=[0]),b[u++]=f,l&&y[0]?y[v++]=M[A]||0:(y=[M[A]],v=1);while((A++<S||y[0]!==void 0)&&k--)}return b[0]||b.shift(),g.e=d,on(g,o?i+ea(g)+1:i)}})();function IR(e,t){var r,a,s,i,o,l,d=0,u=0,f=e.constructor,m=f.precision;if(ea(e)>16)throw Error(_k+ea(e));if(!e.s)return new f(Ds);for(En=!1,l=m,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(Gl(2,u))/Math.LN10*2+5|0,l+=a,r=s=i=new f(Ds),f.precision=l;;){if(s=on(s.times(e),l),r=r.times(++d),o=i.plus(Ao(s,r,l)),Hi(o.d).slice(0,l)===Hi(i.d).slice(0,l)){for(;u--;)i=on(i.times(i),l);return f.precision=m,t==null?(En=!0,on(i,m)):i}i=o}}function ea(e){for(var t=e.e*wn,r=e.d[0];r>=10;r/=10)t++;return t}function N1(e,t,r){if(t>e.LN10.sd())throw En=!0,r&&(e.precision=r),Error(ni+"LN10 precision limit exceeded");return on(new e(e.LN10),t)}function sl(e){for(var t="";e--;)t+="0";return t}function f0(e,t){var r,a,s,i,o,l,d,u,f,m=1,p=10,g=e,b=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(ni+(g.s?"NaN":"-Infinity"));if(g.eq(Ds))return new y(0);if(t==null?(En=!1,u=v):u=t,g.eq(10))return t==null&&(En=!0),N1(y,u);if(u+=p,y.precision=u,r=Hi(b),a=r.charAt(0),i=ea(g),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)g=g.times(e),r=Hi(g.d),a=r.charAt(0),m++;i=ea(g),a>1?(g=new y("0."+r),i++):g=new y(a+"."+r.slice(1))}else return d=N1(y,u+2,v).times(i+""),g=f0(new y(a+"."+r.slice(1)),u-p).plus(d),y.precision=v,t==null?(En=!0,on(g,v)):g;for(l=o=g=Ao(g.minus(Ds),g.plus(Ds),u),f=on(g.times(g),u),s=3;;){if(o=on(o.times(f),u),d=l.plus(Ao(o,new y(s),u)),Hi(d.d).slice(0,u)===Hi(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(N1(y,u+2,v).times(i+""))),l=Ao(l,new y(m),u),y.precision=v,t==null?(En=!0,on(l,v)):l;l=d,s+=2}}function t3(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=ju(r/wn),e.d=[],a=(r+1)%wn,r<0&&(a+=wn),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=wn;a<s;)e.d.push(+t.slice(a,a+=wn));t=t.slice(a),a=wn-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),En&&(e.e>jp||e.e<-jp))throw Error(_k+r)}else e.s=0,e.e=0,e.d=[0];return e}function on(e,t,r){var a,s,i,o,l,d,u,f,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=wn,s=t,u=m[f=0];else{if(f=Math.ceil((a+1)/wn),i=m.length,f>=i)return e;for(u=i=m[f],o=1;i>=10;i/=10)o++;a%=wn,s=a-wn+o}if(r!==void 0&&(i=Gl(10,o-s-1),l=u/i%10|0,d=t<0||m[f+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(a>0?s>0?u/Gl(10,o-s):0:m[f-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=ea(e),m.length=1,t=t-i-1,m[0]=Gl(10,(wn-t%wn)%wn),e.e=ju(-t/wn)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=f,i=1,f--):(m.length=f+1,i=Gl(10,wn-a),m[f]=s>0?(u/Gl(10,o-s)%Gl(10,s)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==va&&(m[0]=1,++e.e);break}else{if(m[f]+=i,m[f]!=va)break;m[f--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(En&&(e.e>jp||e.e<-jp))throw Error(_k+ea(e));return e}function DR(e,t){var r,a,s,i,o,l,d,u,f,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),En?on(t,g):t;if(d=e.d,m=t.d,a=t.e,u=e.e,d=d.slice(),o=u-a,o){for(f=o<0,f?(r=d,o=-o,l=m.length):(r=m,a=u,l=d.length),s=Math.max(Math.ceil(g/wn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){f=d[s]<m[s];break}o=0}for(f&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=va-1;--d[i],d[s]+=va}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--a;return d[0]?(t.d=d,t.e=a,En?on(t,g):t):new p(0)}function xc(e,t,r){var a,s=ea(e),i=Hi(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+sl(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+sl(-s-1)+i,r&&(a=r-o)>0&&(i+=sl(a))):s>=o?(i+=sl(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+sl(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=sl(a))),e.s<0?"-"+i:i}function r3(e,t){if(e.length>t)return e.length=t,!0}function MR(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(oc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return t3(o,i.toString())}else if(typeof i!="string")throw Error(oc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,fQ.test(i))t3(o,i);else throw Error(oc+i)}if(s.prototype=Mt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=MR,s.config=s.set=mQ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function mQ(e){if(!e||typeof e!="object")throw Error(ni+"Object expected");var t,r,a,s=["precision",1,wu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(ju(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(oc+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(oc+r+": "+a);return this}var Ek=MR(hQ);Ds=new Ek(1);const an=Ek;function pQ(e){return vQ(e)||yQ(e)||xQ(e)||gQ()}function gQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xQ(e,t){if(e){if(typeof e=="string")return uN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uN(e,t)}}function yQ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vQ(e){if(Array.isArray(e))return uN(e)}function uN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var bQ=function(t){return t},RR={},FR=function(t){return t===RR},n3=function(t){return function r(){return arguments.length===0||arguments.length===1&&FR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},wQ=function e(t,r){return t===1?r:n3(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==RR}).length;return o>=t?r.apply(void 0,s):e(t-o,n3(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var f=s.map(function(m){return FR(m)?d.shift():m});return r.apply(void 0,pQ(f).concat(d))}))})},Qg=function(t){return wQ(t.length,t)},hN=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},jQ=Qg(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),NQ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return bQ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},fN=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},$R=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,a=t.apply(void 0,i)),a}};function kQ(e){var t;return e===0?t=1:t=Math.floor(new an(e).abs().log(10).toNumber())+1,t}function SQ(e,t,r){for(var a=new an(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var _Q=Qg(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),EQ=Qg(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),CQ=Qg(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const Zg={rangeStep:SQ,getDigitCount:kQ,interpolateNumber:_Q,uninterpolateNumber:EQ,uninterpolateTruncation:CQ};function mN(e){return OQ(e)||TQ(e)||LR(e)||AQ()}function AQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TQ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function OQ(e){if(Array.isArray(e))return pN(e)}function m0(e,t){return DQ(e)||IQ(e,t)||LR(e,t)||PQ()}function PQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LR(e,t){if(e){if(typeof e=="string")return pN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pN(e,t)}}function pN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function IQ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(d){s=!0,i=d}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function DQ(e){if(Array.isArray(e))return e}function BR(e){var t=m0(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function UR(e,t,r){if(e.lte(0))return new an(0);var a=Zg.getDigitCount(e.toNumber()),s=new an(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new an(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?d:new an(Math.ceil(d))}function MQ(e,t,r){var a=1,s=new an(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new an(10).pow(Zg.getDigitCount(e)-1),s=new an(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new an(Math.floor(e)))}else e===0?s=new an(Math.floor((t-1)/2)):r||(s=new an(Math.floor(e)));var o=Math.floor((t-1)/2),l=NQ(jQ(function(d){return s.add(new an(d-o).mul(a)).toNumber()}),hN);return l(0,t)}function HR(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new an(0),tickMin:new an(0),tickMax:new an(0)};var i=UR(new an(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new an(0):(o=new an(e).add(t).div(2),o=o.sub(new an(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),d=Math.ceil(new an(t).sub(o).div(i).toNumber()),u=l+d+1;return u>r?HR(e,t,r,a,s+1):(u<r&&(d=t>0?d+(r-u):d,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new an(l).mul(i)),tickMax:o.add(new an(d).mul(i))})}function RQ(e){var t=m0(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=BR([r,a]),d=m0(l,2),u=d[0],f=d[1];if(u===-1/0||f===1/0){var m=f===1/0?[u].concat(mN(hN(0,s-1).map(function(){return 1/0}))):[].concat(mN(hN(0,s-1).map(function(){return-1/0})),[f]);return r>a?fN(m):m}if(u===f)return MQ(u,s,i);var p=HR(u,f,o,i),g=p.step,b=p.tickMin,y=p.tickMax,v=Zg.rangeStep(b,y.add(new an(.1).mul(g)),g);return r>a?fN(v):v}function FQ(e,t){var r=m0(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=BR([a,s]),l=m0(o,2),d=l[0],u=l[1];if(d===-1/0||u===1/0)return[a,s];if(d===u)return[d];var f=Math.max(t,2),m=UR(new an(u).sub(d).div(f-1),i,0),p=[].concat(mN(Zg.rangeStep(new an(d),new an(u).sub(new an(.99).mul(m)),m)),[u]);return a>s?fN(p):p}var $Q=$R(RQ),LQ=$R(FQ),BQ="Invariant failed";function yc(e,t){throw new Error(BQ)}var UQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Np.apply(this,arguments)}function HQ(e,t){return KQ(e)||WQ(e,t)||zQ(e,t)||qQ()}function qQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zQ(e,t){if(e){if(typeof e=="string")return a3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a3(e,t)}}function a3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function WQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function KQ(e){if(Array.isArray(e))return e}function VQ(e,t){if(e==null)return{};var r=GQ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function GQ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function YQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XQ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,WR(a.key),a)}}function JQ(e,t,r){return t&&XQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QQ(e,t,r){return t=kp(t),ZQ(e,qR()?Reflect.construct(t,r||[],kp(e).constructor):t.apply(e,r))}function ZQ(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eZ(e)}function eZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qR=function(){return!!e})()}function kp(e){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kp(e)}function tZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gN(e,t)}function gN(e,t){return gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},gN(e,t)}function zR(e,t,r){return t=WR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WR(e){var t=rZ(e,"string");return Wd(t)=="symbol"?t:t+""}function rZ(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var af=(function(e){function t(){return YQ(this,t),QQ(this,t,arguments)}return tZ(t,e),JQ(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,d=a.data,u=a.dataPointFormatter,f=a.xAxis,m=a.yAxis,p=VQ(a,UQ),g=Kt(p,!1);this.props.direction==="x"&&f.type!=="number"&&yc();var b=d.map(function(y){var v=u(y,l),N=v.x,k=v.y,w=v.value,A=v.errorVal;if(!A)return null;var S=[],_,E;if(Array.isArray(A)){var C=HQ(A,2);_=C[0],E=C[1]}else _=E=A;if(i==="vertical"){var I=f.scale,B=k+s,M=B+o,O=B-o,U=I(w-_),ie=I(w+E);S.push({x1:ie,y1:M,x2:ie,y2:O}),S.push({x1:U,y1:B,x2:ie,y2:B}),S.push({x1:U,y1:M,x2:U,y2:O})}else if(i==="horizontal"){var X=m.scale,re=N+s,oe=re-o,Q=re+o,F=X(w-_),J=X(w+E);S.push({x1:oe,y1:J,x2:Q,y2:J}),S.push({x1:re,y1:F,x2:re,y2:J}),S.push({x1:oe,y1:F,x2:Q,y2:F})}return ye.createElement(Ir,Np({className:"recharts-errorBar",key:"bar-".concat(S.map(function(L){return"".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))},g),S.map(function(L){return ye.createElement("line",Np({},L,{key:"line-".concat(L.x1,"-").concat(L.x2,"-").concat(L.y1,"-").concat(L.y2)}))}))});return ye.createElement(Ir,{className:"recharts-errorBars"},b)}}])})(ye.Component);zR(af,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});zR(af,"displayName","ErrorBar");function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function s3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s3(Object(r),!0).forEach(function(a){nZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nZ(e,t,r){return t=aZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aZ(e){var t=sZ(e,"string");return p0(t)=="symbol"?t:t+""}function sZ(e,t){if(p0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(p0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KR=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ts(r,Ga);if(!o)return null;var l=Ga.defaultProps,d=l!==void 0?Hl(Hl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(a||[]).reduce(function(f,m){var p=m.item,g=m.props,b=g.sectors||g.data||[];return f.concat(b.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(a||[]).map(function(f){var m=f.item,p=m.type.defaultProps,g=p!==void 0?Hl(Hl({},p),m.props):{},b=g.dataKey,y=g.name,v=g.legendType,N=g.hide;return{inactive:N,dataKey:b,type:d.iconType||v||"square",color:Ck(m),value:y||b,payload:g}}),Hl(Hl(Hl({},d),Ga.getWithHeight(o,s)),{},{payload:u,item:o})};function g0(e){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g0(e)}function i3(e){return cZ(e)||lZ(e)||oZ(e)||iZ()}function iZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oZ(e,t){if(e){if(typeof e=="string")return xN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xN(e,t)}}function lZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cZ(e){if(Array.isArray(e))return xN(e)}function xN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function o3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(r),!0).forEach(function(a){Pd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pd(e,t,r){return t=dZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dZ(e){var t=uZ(e,"string");return g0(t)=="symbol"?t:t+""}function uZ(e,t){if(g0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(g0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qn(e,t,r){return vr(e)||vr(t)?r:ua(t)?$s(e,t,r):ir(t)?t(e):r}function Oh(e,t,r,a){var s=cQ(e,function(l){return qn(l,t)});if(r==="number"){var i=s.filter(function(l){return wt(l)||parseFloat(l)});return i.length?[Jg(i),Xg(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!vr(l)}):s;return o.map(function(l){return ua(l)||l instanceof Date?l:""})}var hZ=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,m=s[u].coordinate,p=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(ss(m-f)!==ss(p-m)){var b=[];if(ss(p-m)===ss(d[1]-d[0])){g=p;var y=m+d[1]-d[0];b[0]=Math.min(y,(y+f)/2),b[1]=Math.max(y,(y+f)/2)}else{g=f;var v=p+d[1]-d[0];b[0]=Math.min(m,(v+m)/2),b[1]=Math.max(m,(v+m)/2)}var N=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>N[0]&&t<=N[1]||t>=b[0]&&t<=b[1]){o=s[u].index;break}}else{var k=Math.min(f,p),w=Math.max(f,p);if(t>(k+m)/2&&t<=(w+m)/2){o=s[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A>0&&A<l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2&&t<=(a[A].coordinate+a[A+1].coordinate)/2||A===l-1&&t>(a[A].coordinate+a[A-1].coordinate)/2){o=a[A].index;break}return o},Ck=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,d;switch(s){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},fZ=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),d=0,u=l.length;d<u;d++)for(var f=i[l[d]].stackGroups,m=Object.keys(f),p=0,g=m.length;p<g;p++){var b=f[m[p]],y=b.items,v=b.cateAxisId,N=y.filter(function(E){return Co(E.type).indexOf("Bar")>=0});if(N&&N.length){var k=N[0].type.defaultProps,w=k!==void 0?Pn(Pn({},k),N[0].props):N[0].props,A=w.barSize,S=w[v];o[S]||(o[S]=[]);var _=vr(A)?r:A;o[S].push({item:N[0],stackList:N.slice(1),barSize:vr(_)?void 0:is(_,a,0)})}}return o},mZ=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,d=o.length;if(d<1)return null;var u=is(r,s,0,!0),f,m=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=s/d,b=o.reduce(function(A,S){return A+S.barSize||0},0);b+=(d-1)*u,b>=s&&(b-=(d-1)*u,u=0),b>=s&&g>0&&(p=!0,g*=.9,b=d*g);var y=(s-b)/2>>0,v={offset:y-u,size:0};f=o.reduce(function(A,S){var _={item:S.item,position:{offset:v.offset+v.size+u,size:p?g:S.barSize}},E=[].concat(i3(A),[_]);return v=E[E.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(C){E.push({item:C,position:v})}),E},m)}else{var N=is(a,s,0,!0);s-2*N-(d-1)*u<=0&&(u=0);var k=(s-2*N-(d-1)*u)/d;k>1&&(k>>=0);var w=l===+l?Math.min(k,l):k;f=o.reduce(function(A,S,_){var E=[].concat(i3(A),[{item:S.item,position:{offset:N+(k+u)*_+(k-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(C){E.push({item:C,position:E[E.length-1].position})}),E},m)}return f},pZ=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,d=o-(l.left||0)-(l.right||0),u=KR({children:i,legendWidth:d});if(u){var f=s||{},m=f.width,p=f.height,g=u.align,b=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&b==="middle")&&g!=="center"&&wt(t[g]))return Pn(Pn({},t),{},Pd({},g,t[g]+(m||0)));if((y==="horizontal"||y==="vertical"&&g==="center")&&b!=="middle"&&wt(t[b]))return Pn(Pn({},t),{},Pd({},b,t[b]+(p||0)))}return t},gZ=function(t,r,a){return vr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},VR=function(t,r,a,s,i){var o=r.props.children,l=Ls(o,af).filter(function(u){return gZ(s,i,u.props.direction)});if(l&&l.length){var d=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var m=qn(f,a);if(vr(m))return u;var p=Array.isArray(m)?[Jg(m),Xg(m)]:[m,m],g=d.reduce(function(b,y){var v=qn(f,y,0),N=p[0]-Math.abs(Array.isArray(v)?v[0]:v),k=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(N,b[0]),Math.max(k,b[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},xZ=function(t,r,a,s,i){var o=r.map(function(l){return VR(t,l,a,i,s)}).filter(function(l){return!vr(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},GR=function(t,r,a,s,i){var o=r.map(function(d){var u=d.props.dataKey;return a==="number"&&u&&VR(t,d,u,s)||Oh(t,u,a,i)});if(a==="number")return o.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,u){for(var f=0,m=u.length;f<m;f++)l[u[f]]||(l[u[f]]=!0,d.push(u[f]));return d},[])},YR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},XR=function(t,r,a,s){if(s)return t.map(function(d){return d.coordinate});var i,o,l=t.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===a&&(o=!0),d.coordinate});return i||l.push(r),o||l.push(a),l},So=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,d=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/d:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?ss(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(m){var p=i?i.indexOf(m):m;return{coordinate:s(p)+u,value:m,offset:u}});return f.filter(function(m){return!Q0(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,p){return{coordinate:s(m)+u,value:m,index:p,offset:u}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+u,value:m,offset:u}}):s.domain().map(function(m,p){return{coordinate:s(m)+u,value:i?i[m]:m,index:p,offset:u}})},k1=new WeakMap,Em=function(t,r){if(typeof r!="function")return t;k1.has(t)||k1.set(t,new WeakMap);var a=k1.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},JR=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:l0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:yp(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:Th(),realScaleType:"point"}:i==="category"?{scale:l0(),realScaleType:"band"}:{scale:yp(),realScaleType:"linear"};if(mc(s)){var d="scale".concat(Rg(s));return{scale:(KO[d]||Th)(),realScaleType:KO[d]?d:"point"}}return ir(s)?{scale:s}:{scale:Th(),realScaleType:"point"}},l3=1e-4,QR=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-l3,o=Math.max(s[0],s[1])+l3,l=t(r[0]),d=t(r[a-1]);(l<i||l>o||d<i||d>o)&&t.domain([r[0],r[a-1]])}},yZ=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},vZ=function(t,r){if(!r||r.length!==2||!wt(r[0])||!wt(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!wt(t[0])||t[0]<a)&&(i[0]=a),(!wt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},bZ=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var d=Q0(t[l][a][1])?t[l][a][0]:t[l][a][1];d>=0?(t[l][a][0]=i,t[l][a][1]=i+d,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+d,o=t[l][a][1])}},wZ=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=Q0(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},jZ={sign:bZ,expand:cK,none:Rd,silhouette:dK,wiggle:uK,positive:wZ},NZ=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=jZ[a],o=lK().keys(s).value(function(l,d){return+qn(l,d,0)}).order(Vj).offset(i);return o(t)},kZ=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,d={},u=l.reduce(function(m,p){var g,b=(g=p.type)!==null&&g!==void 0&&g.defaultProps?Pn(Pn({},p.type.defaultProps),p.props):p.props,y=b.stackId,v=b.hide;if(v)return m;var N=b[a],k=m[N]||{hasStack:!1,stackGroups:{}};if(ua(y)){var w=k.stackGroups[y]||{numericAxisId:a,cateAxisId:s,items:[]};w.items.push(p),k.hasStack=!0,k.stackGroups[y]=w}else k.stackGroups[xu("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return Pn(Pn({},m),{},Pd({},N,k))},d),f={};return Object.keys(u).reduce(function(m,p){var g=u[p];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(y,v){var N=g.stackGroups[v];return Pn(Pn({},y),{},Pd({},v,{numericAxisId:a,cateAxisId:s,items:N.items,stackedData:NZ(t,N.items,i)}))},b)}return Pn(Pn({},m),{},Pd({},p,g))},f)},ZR=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=a||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=$Q(u,i,l);return t.domain([Jg(f),Xg(f)]),{niceTicks:f}}if(i&&s==="number"){var m=t.domain(),p=LQ(m,i,l);return{niceTicks:p}}return null};function c3(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!vr(s[t.dataKey])){var l=Zm(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var d=qn(s,vr(o)?t.dataKey:o);return vr(d)?null:t.scale(d)}var d3=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var d=qn(o,r.dataKey,r.domain[l]);return vr(d)?null:r.scale(d)-i/2+s},SZ=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},_Z=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(ua(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},EZ=function(t){return t.reduce(function(r,a){return[Jg(a.concat([r[0]]).filter(wt)),Xg(a.concat([r[1]]).filter(wt))]},[1/0,-1/0])},eF=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,d=l.reduce(function(u,f){var m=EZ(f.slice(r,a+1));return[Math.min(u[0],m[0]),Math.max(u[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},u3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yN=function(t,r,a){if(ir(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(wt(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(u3.test(t[0])){var i=+u3.exec(t[0])[1];s[0]=r[0]-i}else ir(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(wt(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(h3.test(t[1])){var o=+h3.exec(t[1])[1];s[1]=r[1]+o}else ir(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},Sp=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=rk(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},f3=function(t,r,a){return!t||!t.length||bu(t,$s(a,"type.defaultProps.domain"))?r:t},tF=function(t,r){var a=t.type.defaultProps?Pn(Pn({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,d=a.tooltipType,u=a.chartType,f=a.hide;return Pn(Pn({},Kt(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Ck(t),value:qn(r,s),type:d,payload:r,chartType:u,hide:f})};function x0(e){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x0(e)}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(a){rF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function rF(e,t,r){return t=CZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CZ(e){var t=AZ(e,"string");return x0(t)=="symbol"?t:t+""}function AZ(e,t){if(x0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(x0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TZ(e,t){return DZ(e)||IZ(e,t)||PZ(e,t)||OZ()}function OZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PZ(e,t){if(e){if(typeof e=="string")return p3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p3(e,t)}}function p3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function IZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function DZ(e){if(Array.isArray(e))return e}var _p=Math.PI/180,MZ=function(t){return t*180/Math.PI},zr=function(t,r,a,s){return{x:t+Math.cos(-_p*s)*a,y:r+Math.sin(-_p*s)*a}},nF=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},aF=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.startAngle,u=t.endAngle,f=is(t.cx,o,o/2),m=is(t.cy,l,l/2),p=nF(o,l,a),g=is(t.innerRadius,p,0),b=is(t.outerRadius,p,p*.8),y=Object.keys(r);return y.reduce(function(v,N){var k=r[N],w=k.domain,A=k.reversed,S;if(vr(k.range))s==="angleAxis"?S=[d,u]:s==="radiusAxis"&&(S=[g,b]),A&&(S=[S[1],S[0]]);else{S=k.range;var _=S,E=TZ(_,2);d=E[0],u=E[1]}var C=JR(k,i),I=C.realScaleType,B=C.scale;B.domain(w).range(S),QR(B);var M=ZR(B,go(go({},k),{},{realScaleType:I})),O=go(go(go({},k),M),{},{range:S,radius:b,realScaleType:I,scale:B,cx:f,cy:m,innerRadius:g,outerRadius:b,startAngle:d,endAngle:u});return go(go({},v),{},rF({},N,O))},{})},RZ=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},FZ=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=RZ({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var d=(a-i)/l,u=Math.acos(d);return s>o&&(u=2*Math.PI-u),{radius:l,angle:MZ(u),angleInRadian:u}},$Z=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},LZ=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},g3=function(t,r){var a=t.x,s=t.y,i=FZ({x:a,y:s},r),o=i.radius,l=i.angle,d=r.innerRadius,u=r.outerRadius;if(o<d||o>u)return!1;if(o===0)return!0;var f=$Z(r),m=f.startAngle,p=f.endAngle,g=l,b;if(m<=p){for(;g>p;)g-=360;for(;g<m;)g+=360;b=g>=m&&g<=p}else{for(;g>m;)g-=360;for(;g<p;)g+=360;b=g>=p&&g<=m}return b?go(go({},r),{},{radius:o,angle:LZ(g,r)}):null},sF=function(t){return!P.isValidElement(t)&&!ir(t)&&typeof t!="boolean"?t.className:""};function y0(e){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y0(e)}var BZ=["offset"];function UZ(e){return WZ(e)||zZ(e)||qZ(e)||HZ()}function HZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qZ(e,t){if(e){if(typeof e=="string")return vN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vN(e,t)}}function zZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WZ(e){if(Array.isArray(e))return vN(e)}function vN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function KZ(e,t){if(e==null)return{};var r=VZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function x3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(r),!0).forEach(function(a){GZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GZ(e,t,r){return t=YZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YZ(e){var t=XZ(e,"string");return y0(t)=="symbol"?t:t+""}function XZ(e,t){if(y0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(y0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},v0.apply(this,arguments)}var JZ=function(t){var r=t.value,a=t.formatter,s=vr(t.children)?r:t.children;return ir(a)?a(s):s},QZ=function(t,r){var a=ss(r-t),s=Math.min(Math.abs(r-t),360);return a*s},ZZ=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,d=i,u=d.cx,f=d.cy,m=d.innerRadius,p=d.outerRadius,g=d.startAngle,b=d.endAngle,y=d.clockWise,v=(m+p)/2,N=QZ(g,b),k=N>=0?1:-1,w,A;s==="insideStart"?(w=g+k*o,A=y):s==="insideEnd"?(w=b-k*o,A=!y):s==="end"&&(w=b+k*o,A=y),A=N<=0?A:!A;var S=zr(u,f,v,w),_=zr(u,f,v,w+(A?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(_.x,",").concat(_.y),C=vr(t.id)?xu("recharts-radial-line-"):t.id;return ye.createElement("text",v0({},a,{dominantBaseline:"central",className:yr("recharts-radial-bar-label",l)}),ye.createElement("defs",null,ye.createElement("path",{id:C,d:E})),ye.createElement("textPath",{xlinkHref:"#".concat(C)},r))},eee=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,u=i.outerRadius,f=i.startAngle,m=i.endAngle,p=(f+m)/2;if(s==="outside"){var g=zr(o,l,u+a,p),b=g.x,y=g.y;return{x:b,y,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(d+u)/2,N=zr(o,l,v,p),k=N.x,w=N.y;return{x:k,y:w,textAnchor:"middle",verticalAnchor:"middle"}},tee=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,d=o.y,u=o.width,f=o.height,m=f>=0?1:-1,p=m*s,g=m>0?"end":"start",b=m>0?"start":"end",y=u>=0?1:-1,v=y*s,N=y>0?"end":"start",k=y>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:d-m*s,textAnchor:"middle",verticalAnchor:g};return oa(oa({},w),a?{height:Math.max(d-a.y,0),width:u}:{})}if(i==="bottom"){var A={x:l+u/2,y:d+f+p,textAnchor:"middle",verticalAnchor:b};return oa(oa({},A),a?{height:Math.max(a.y+a.height-(d+f),0),width:u}:{})}if(i==="left"){var S={x:l-v,y:d+f/2,textAnchor:N,verticalAnchor:"middle"};return oa(oa({},S),a?{width:Math.max(S.x-a.x,0),height:f}:{})}if(i==="right"){var _={x:l+u+v,y:d+f/2,textAnchor:k,verticalAnchor:"middle"};return oa(oa({},_),a?{width:Math.max(a.x+a.width-_.x,0),height:f}:{})}var E=a?{width:u,height:f}:{};return i==="insideLeft"?oa({x:l+v,y:d+f/2,textAnchor:k,verticalAnchor:"middle"},E):i==="insideRight"?oa({x:l+u-v,y:d+f/2,textAnchor:N,verticalAnchor:"middle"},E):i==="insideTop"?oa({x:l+u/2,y:d+p,textAnchor:"middle",verticalAnchor:b},E):i==="insideBottom"?oa({x:l+u/2,y:d+f-p,textAnchor:"middle",verticalAnchor:g},E):i==="insideTopLeft"?oa({x:l+v,y:d+p,textAnchor:k,verticalAnchor:b},E):i==="insideTopRight"?oa({x:l+u-v,y:d+p,textAnchor:N,verticalAnchor:b},E):i==="insideBottomLeft"?oa({x:l+v,y:d+f-p,textAnchor:k,verticalAnchor:g},E):i==="insideBottomRight"?oa({x:l+u-v,y:d+f-p,textAnchor:N,verticalAnchor:g},E):gu(i)&&(wt(i.x)||tc(i.x))&&(wt(i.y)||tc(i.y))?oa({x:l+is(i.x,u),y:d+is(i.y,f),textAnchor:"end",verticalAnchor:"end"},E):oa({x:l+u/2,y:d+f/2,textAnchor:"middle",verticalAnchor:"middle"},E)},ree=function(t){return"cx"in t&&wt(t.cx)};function wa(e){var t=e.offset,r=t===void 0?5:t,a=KZ(e,BZ),s=oa({offset:r},a),i=s.viewBox,o=s.position,l=s.value,d=s.children,u=s.content,f=s.className,m=f===void 0?"":f,p=s.textBreakAll;if(!i||vr(l)&&vr(d)&&!P.isValidElement(u)&&!ir(u))return null;if(P.isValidElement(u))return P.cloneElement(u,s);var g;if(ir(u)){if(g=P.createElement(u,s),P.isValidElement(g))return g}else g=JZ(s);var b=ree(i),y=Kt(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ZZ(s,g,y);var v=b?eee(s):tee(s);return ye.createElement(gc,v0({className:yr("recharts-label",m)},y,v,{breakAll:p}),g)}wa.displayName="Label";var iF=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,d=t.radius,u=t.innerRadius,f=t.outerRadius,m=t.x,p=t.y,g=t.top,b=t.left,y=t.width,v=t.height,N=t.clockWise,k=t.labelViewBox;if(k)return k;if(wt(y)&&wt(v)){if(wt(m)&&wt(p))return{x:m,y:p,width:y,height:v};if(wt(g)&&wt(b))return{x:g,y:b,width:y,height:v}}return wt(m)&&wt(p)?{x:m,y:p,width:0,height:0}:wt(r)&&wt(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||d||l||0,clockWise:N}:t.viewBox?t.viewBox:{}},nee=function(t,r){return t?t===!0?ye.createElement(wa,{key:"label-implicit",viewBox:r}):ua(t)?ye.createElement(wa,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===wa?P.cloneElement(t,{key:"label-implicit",viewBox:r}):ye.createElement(wa,{key:"label-implicit",content:t,viewBox:r}):ir(t)?ye.createElement(wa,{key:"label-implicit",content:t,viewBox:r}):gu(t)?ye.createElement(wa,v0({viewBox:r},t,{key:"label-implicit"})):null:null},aee=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=iF(t),o=Ls(s,wa).map(function(d,u){return P.cloneElement(d,{viewBox:r||i,key:"label-".concat(u)})});if(!a)return o;var l=nee(t.label,r||i);return[l].concat(UZ(o))};wa.parseViewBox=iF;wa.renderCallByParent=aee;var S1,y3;function see(){if(y3)return S1;y3=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return S1=e,S1}var iee=see();const oF=Gr(iee);function b0(e){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b0(e)}var oee=["valueAccessor"],lee=["data","dataKey","clockWise","id","textBreakAll"];function cee(e){return fee(e)||hee(e)||uee(e)||dee()}function dee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uee(e,t){if(e){if(typeof e=="string")return bN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(e,t)}}function hee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fee(e){if(Array.isArray(e))return bN(e)}function bN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ep.apply(this,arguments)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(a){mee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mee(e,t,r){return t=pee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pee(e){var t=gee(e,"string");return b0(t)=="symbol"?t:t+""}function gee(e,t){if(b0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(b0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w3(e,t){if(e==null)return{};var r=xee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var yee=function(t){return Array.isArray(t.value)?oF(t.value):t.value};function Wi(e){var t=e.valueAccessor,r=t===void 0?yee:t,a=w3(e,oee),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,d=a.textBreakAll,u=w3(a,lee);return!s||!s.length?null:ye.createElement(Ir,{className:"recharts-label-list"},s.map(function(f,m){var p=vr(i)?r(f,m):qn(f&&f.payload,i),g=vr(l)?{}:{id:"".concat(l,"-").concat(m)};return ye.createElement(wa,Ep({},Kt(f,!0),u,g,{parentViewBox:f.parentViewBox,value:p,textBreakAll:d,viewBox:wa.parseViewBox(vr(o)?f:b3(b3({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Wi.displayName="LabelList";function vee(e,t){return e?e===!0?ye.createElement(Wi,{key:"labelList-implicit",data:t}):ye.isValidElement(e)||ir(e)?ye.createElement(Wi,{key:"labelList-implicit",data:t,content:e}):gu(e)?ye.createElement(Wi,Ep({data:t},e,{key:"labelList-implicit"})):null:null}function bee(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Ls(a,Wi).map(function(o,l){return P.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=vee(e.label,t);return[i].concat(cee(s))}Wi.renderCallByParent=bee;function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function wN(){return wN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},wN.apply(this,arguments)}function j3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function N3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j3(Object(r),!0).forEach(function(a){wee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wee(e,t,r){return t=jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e){var t=Nee(e,"string");return w0(t)=="symbol"?t:t+""}function Nee(e,t){if(w0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(w0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kee=function(t,r){var a=ss(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},Cm=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,d=t.cornerRadius,u=t.cornerIsExternal,f=d*(l?1:-1)+s,m=Math.asin(d/f)/_p,p=u?i:i+o*m,g=zr(r,a,f,p),b=zr(r,a,s,p),y=u?i-o*m:i,v=zr(r,a,f*Math.cos(m*_p),y);return{center:g,circleTangency:b,lineTangency:v,theta:m}},lF=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,d=kee(o,l),u=o+d,f=zr(r,a,i,o),m=zr(r,a,i,u),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var g=zr(r,a,s,o),b=zr(r,a,s,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},See=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,d=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,m=ss(f-u),p=Cm({cx:r,cy:a,radius:i,angle:u,sign:m,cornerRadius:o,cornerIsExternal:d}),g=p.circleTangency,b=p.lineTangency,y=p.theta,v=Cm({cx:r,cy:a,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:d}),N=v.circleTangency,k=v.lineTangency,w=v.theta,A=d?Math.abs(u-f):Math.abs(u-f)-y-w;if(A<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):lF({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
  `);if(s>0){var _=Cm({cx:r,cy:a,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),E=_.circleTangency,C=_.lineTangency,I=_.theta,B=Cm({cx:r,cy:a,radius:s,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),M=B.circleTangency,O=B.lineTangency,U=B.theta,ie=d?Math.abs(u-f):Math.abs(u-f)-I-U;if(ie<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(ie>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},_ee={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cF=function(t){var r=N3(N3({},_ee),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,p=r.className;if(o<i||f===m)return null;var g=yr("recharts-sector",p),b=o-i,y=is(l,b,0,!0),v;return y>0&&Math.abs(f-m)<360?v=See({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(y,b/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:f,endAngle:m}):v=lF({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),ye.createElement("path",wN({},Kt(r,!0),{className:g,d:v,role:"img"}))};function j0(e){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j0(e)}function jN(){return jN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jN.apply(this,arguments)}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function S3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(a){Eee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Eee(e,t,r){return t=Cee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cee(e){var t=Aee(e,"string");return j0(t)=="symbol"?t:t+""}function Aee(e,t){if(j0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(j0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _3={curveBasisClosed:JW,curveBasisOpen:QW,curveBasis:XW,curveBumpX:RW,curveBumpY:FW,curveLinearClosed:ZW,curveLinear:$g,curveMonotoneX:eK,curveMonotoneY:tK,curveNatural:rK,curveStep:nK,curveStepAfter:sK,curveStepBefore:aK},Am=function(t){return t.x===+t.x&&t.y===+t.y},dh=function(t){return t.x},uh=function(t){return t.y},Tee=function(t,r){if(ir(t))return t;var a="curve".concat(Rg(t));return(a==="curveMonotone"||a==="curveBump")&&r?_3["".concat(a).concat(r==="vertical"?"Y":"X")]:_3[a]||$g},Oee=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,d=t.connectNulls,u=d===void 0?!1:d,f=Tee(a,l),m=u?i.filter(function(y){return Am(y)}):i,p;if(Array.isArray(o)){var g=u?o.filter(function(y){return Am(y)}):o,b=m.map(function(y,v){return S3(S3({},y),{},{base:g[v]})});return l==="vertical"?p=bm().y(uh).x1(dh).x0(function(y){return y.base.x}):p=bm().x(dh).y1(uh).y0(function(y){return y.base.y}),p.defined(Am).curve(f),p(b)}return l==="vertical"&&wt(o)?p=bm().y(uh).x1(dh).x0(o):wt(o)?p=bm().x(dh).y1(uh).y0(o):p=iM().x(dh).y(uh),p.defined(Am).curve(f),p(m)},Cp=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?Oee(t):s;return P.createElement("path",jN({},Kt(t,!1),ep(t),{className:yr("recharts-curve",r),d:o,ref:i}))},_1={exports:{}},E1,E3;function Pee(){if(E3)return E1;E3=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return E1=e,E1}var C1,C3;function Iee(){if(C3)return C1;C3=1;var e=Pee();function t(){}function r(){}return r.resetWarningCache=t,C1=function(){function a(o,l,d,u,f,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},C1}var A3;function Dee(){return A3||(A3=1,_1.exports=Iee()()),_1.exports}var Mee=Dee();const Kr=Gr(Mee),{getOwnPropertyNames:Ree,getOwnPropertySymbols:Fee}=Object,{hasOwnProperty:$ee}=Object.prototype;function A1(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function Tm(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const d=e(r,a,s);return i.delete(r),i.delete(a),d}}function Lee(e){return e?.[Symbol.toStringTag]}function T3(e){return Ree(e).concat(Fee(e))}const Bee=Object.hasOwn||((e,t)=>$ee.call(e,t));function Cc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Uee="__v",Hee="__o",qee="_owner",{getOwnPropertyDescriptor:O3,keys:P3}=Object;function zee(e,t){return e.byteLength===t.byteLength&&Ap(new Uint8Array(e),new Uint8Array(t))}function Wee(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function Kee(e,t){return e.byteLength===t.byteLength&&Ap(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Vee(e,t){return Cc(e.getTime(),t.getTime())}function Gee(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Yee(e,t){return e===t}function I3(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,d=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,m=0;for(;(l=u.next())&&!l.done;){if(s[m]){m++;continue}const p=o.value,g=l.value;if(r.equals(p[0],g[0],d,m,e,t,r)&&r.equals(p[1],g[1],p[0],g[0],e,t,r)){f=s[m]=!0;break}m++}if(!f)return!1;d++}return!0}const Xee=Cc;function Jee(e,t,r){const a=P3(e);let s=a.length;if(P3(t).length!==s)return!1;for(;s-- >0;)if(!dF(e,t,r,a[s]))return!1;return!0}function hh(e,t,r){const a=T3(e);let s=a.length;if(T3(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!dF(e,t,r,i)||(o=O3(e,i),l=O3(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Qee(e,t){return Cc(e.valueOf(),t.valueOf())}function Zee(e,t){return e.source===t.source&&e.flags===t.flags}function D3(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const d=t.values();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function Ap(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function ete(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dF(e,t,r,a){return(a===qee||a===Hee||a===Uee)&&(e.$$typeof||t.$$typeof)?!0:Bee(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const tte="[object ArrayBuffer]",rte="[object Arguments]",nte="[object Boolean]",ate="[object DataView]",ste="[object Date]",ite="[object Error]",ote="[object Map]",lte="[object Number]",cte="[object Object]",dte="[object RegExp]",ute="[object Set]",hte="[object String]",fte={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},mte="[object URL]",pte=Object.prototype.toString;function gte({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:m,areTypedArraysEqual:p,areUrlsEqual:g,unknownTagComparators:b}){return function(v,N,k){if(v===N)return!0;if(v==null||N==null)return!1;const w=typeof v;if(w!==typeof N)return!1;if(w!=="object")return w==="number"?l(v,N,k):w==="function"?i(v,N,k):!1;const A=v.constructor;if(A!==N.constructor)return!1;if(A===Object)return d(v,N,k);if(Array.isArray(v))return t(v,N,k);if(A===Date)return a(v,N,k);if(A===RegExp)return f(v,N,k);if(A===Map)return o(v,N,k);if(A===Set)return m(v,N,k);const S=pte.call(v);if(S===ste)return a(v,N,k);if(S===dte)return f(v,N,k);if(S===ote)return o(v,N,k);if(S===ute)return m(v,N,k);if(S===cte)return typeof v.then!="function"&&typeof N.then!="function"&&d(v,N,k);if(S===mte)return g(v,N,k);if(S===ite)return s(v,N,k);if(S===rte)return d(v,N,k);if(fte[S])return p(v,N,k);if(S===tte)return e(v,N,k);if(S===ate)return r(v,N,k);if(S===nte||S===lte||S===hte)return u(v,N,k);if(b){let _=b[S];if(!_){const E=Lee(v);E&&(_=b[E])}if(_)return _(v,N,k)}return!1}}function xte({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:zee,areArraysEqual:r?hh:Wee,areDataViewsEqual:Kee,areDatesEqual:Vee,areErrorsEqual:Gee,areFunctionsEqual:Yee,areMapsEqual:r?A1(I3,hh):I3,areNumbersEqual:Xee,areObjectsEqual:r?hh:Jee,arePrimitiveWrappersEqual:Qee,areRegExpsEqual:Zee,areSetsEqual:r?A1(D3,hh):D3,areTypedArraysEqual:r?A1(Ap,hh):Ap,areUrlsEqual:ete,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=Tm(a.areArraysEqual),i=Tm(a.areMapsEqual),o=Tm(a.areObjectsEqual),l=Tm(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function yte(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function vte({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,d){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,d,{cache:u,equals:a,meta:f,strict:s})};if(e)return function(l,d){return t(l,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,d){return t(l,d,i)}}const bte=Sl();Sl({strict:!0});Sl({circular:!0});Sl({circular:!0,strict:!0});Sl({createInternalComparator:()=>Cc});Sl({strict:!0,createInternalComparator:()=>Cc});Sl({circular:!0,createInternalComparator:()=>Cc});Sl({circular:!0,createInternalComparator:()=>Cc,strict:!0});function Sl(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=xte(e),o=gte(i),l=r?r(o):yte(o);return vte({circular:t,comparator:o,createState:a,equals:l,strict:s})}function wte(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function M3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):wte(s)};requestAnimationFrame(a)}function NN(e){"@babel/helpers - typeof";return NN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NN(e)}function jte(e){return _te(e)||Ste(e)||kte(e)||Nte()}function Nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(e,t){if(e){if(typeof e=="string")return R3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R3(e,t)}}function R3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ste(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _te(e){if(Array.isArray(e))return e}function Ete(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=jte(o),d=l[0],u=l.slice(1);if(typeof d=="number"){M3(s.bind(null,u),d);return}s(d),M3(s.bind(null,u));return}NN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function N0(e){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N0(e)}function F3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(r),!0).forEach(function(a){uF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uF(e,t,r){return t=Cte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cte(e){var t=Ate(e,"string");return N0(t)==="symbol"?t:String(t)}function Ate(e,t){if(N0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(N0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tte=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},Ote=function(t){return t},Pte=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Ph=function(t,r){return Object.keys(r).reduce(function(a,s){return $3($3({},a),{},uF({},s,t(s,r[s])))},{})},L3=function(t,r,a){return t.map(function(s){return"".concat(Pte(s)," ").concat(r,"ms ").concat(a)}).join(",")};function Ite(e,t){return Rte(e)||Mte(e,t)||hF(e,t)||Dte()}function Dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Rte(e){if(Array.isArray(e))return e}function Fte(e){return Bte(e)||Lte(e)||hF(e)||$te()}function $te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hF(e,t){if(e){if(typeof e=="string")return kN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kN(e,t)}}function Lte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bte(e){if(Array.isArray(e))return kN(e)}function kN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Tp=1e-4,fF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},mF=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},B3=function(t,r){return function(a){var s=fF(t,r);return mF(s,a)}},Ute=function(t,r){return function(a){var s=fF(t,r),i=[].concat(Fte(s.map(function(o,l){return o*l}).slice(1)),[0]);return mF(i,a)}},U3=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),f=Ite(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var m=B3(s,o),p=B3(i,l),g=Ute(s,o),b=function(N){return N>1?1:N<0?0:N},y=function(N){for(var k=N>1?1:N,w=k,A=0;A<8;++A){var S=m(w)-k,_=g(w);if(Math.abs(S-k)<Tp||_<Tp)return p(w);w=b(w-S/_)}return p(w)};return y.isStepper=!1,y},Hte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,d=function(f,m,p){var g=-(f-m)*a,b=p*i,y=p+(g-b)*l/1e3,v=p*l/1e3+f;return Math.abs(v-m)<Tp&&Math.abs(y)<Tp?[m,0]:[v,y]};return d.isStepper=!0,d.dt=l,d},qte=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return U3(s);case"spring":return Hte();default:if(s.split("(")[0]==="cubic-bezier")return U3(s)}return typeof s=="function"?s:null};function k0(e){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k0(e)}function H3(e){return Kte(e)||Wte(e)||pF(e)||zte()}function zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kte(e){if(Array.isArray(e))return _N(e)}function q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(r),!0).forEach(function(a){SN(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function SN(e,t,r){return t=Vte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vte(e){var t=Gte(e,"string");return k0(t)==="symbol"?t:String(t)}function Gte(e,t){if(k0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(k0(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yte(e,t){return Qte(e)||Jte(e,t)||pF(e,t)||Xte()}function Xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pF(e,t){if(e){if(typeof e=="string")return _N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _N(e,t)}}function _N(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Jte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Qte(e){if(Array.isArray(e))return e}var Op=function(t,r,a){return t+(r-t)*a},EN=function(t){var r=t.from,a=t.to;return r!==a},Zte=function e(t,r,a){var s=Ph(function(i,o){if(EN(o)){var l=t(o.from,o.to,o.velocity),d=Yte(l,2),u=d[0],f=d[1];return Aa(Aa({},o),{},{from:u,velocity:f})}return o},r);return a<1?Ph(function(i,o){return EN(o)?Aa(Aa({},o),{},{velocity:Op(o.velocity,s[i].velocity,a),from:Op(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const ere=(function(e,t,r,a,s){var i=Tte(e,t),o=i.reduce(function(v,N){return Aa(Aa({},v),{},SN({},N,[e[N],t[N]]))},{}),l=i.reduce(function(v,N){return Aa(Aa({},v),{},SN({},N,{from:e[N],velocity:0,to:t[N]}))},{}),d=-1,u,f,m=function(){return null},p=function(){return Ph(function(N,k){return k.from},l)},g=function(){return!Object.values(l).filter(EN).length},b=function(N){u||(u=N);var k=N-u,w=k/r.dt;l=Zte(r,l,w),s(Aa(Aa(Aa({},e),t),p())),u=N,g()||(d=requestAnimationFrame(m))},y=function(N){f||(f=N);var k=(N-f)/a,w=Ph(function(S,_){return Op.apply(void 0,H3(_).concat([r(k)]))},o);if(s(Aa(Aa(Aa({},e),t),w)),k<1)d=requestAnimationFrame(m);else{var A=Ph(function(S,_){return Op.apply(void 0,H3(_).concat([r(1)]))},o);s(Aa(Aa(Aa({},e),t),A))}};return m=r.isStepper?b:y,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}var tre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function rre(e,t){if(e==null)return{};var r=nre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nre(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function T1(e){return ore(e)||ire(e)||sre(e)||are()}function are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sre(e,t){if(e){if(typeof e=="string")return CN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CN(e,t)}}function ire(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ore(e){if(Array.isArray(e))return CN(e)}function CN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(r),!0).forEach(function(a){jh(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function jh(e,t,r){return t=gF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,gF(a.key),a)}}function dre(e,t,r){return t&&cre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gF(e){var t=ure(e,"string");return Kd(t)==="symbol"?t:String(t)}function ure(e,t){if(Kd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kd(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AN(e,t)}function AN(e,t){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},AN(e,t)}function fre(e){var t=mre();return function(){var a=Pp(e),s;if(t){var i=Pp(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return TN(this,s)}}function TN(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ON(e)}function ON(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pp(e){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pp(e)}var Ti=(function(e){hre(r,e);var t=fre(r);function r(a,s){var i;lre(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,d=o.attributeName,u=o.from,f=o.to,m=o.steps,p=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(ON(i)),i.changeStyle=i.changeStyle.bind(ON(i)),!l||g<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),TN(i);if(m&&m.length)i.state={style:m[0].style};else if(u){if(typeof p=="function")return i.state={style:u},TN(i);i.state={style:d?jh({},d,u):u}}else i.state={style:{}};return i}return dre(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,f=i.to,m=i.from,p=this.state.style;if(l){if(!o){var g={style:d?jh({},d,f):f};this.state&&p&&(d&&p[d]!==f||!d&&p!==f)&&this.setState(g);return}if(!(bte(s.to,f)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=b||u?m:s.to;if(this.state&&p){var v={style:d?jh({},d,y):y};(d&&p[d]!==y||!d&&p!==y)&&this.setState(v)}this.runAnimation(mi(mi({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,d=s.duration,u=s.easing,f=s.begin,m=s.onAnimationEnd,p=s.onAnimationStart,g=ere(o,l,qte(u),d,this.changeStyle),b=function(){i.stopJSAnimation=g()};this.manager.start([p,f,b,d,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,d=s.onAnimationStart,u=o[0],f=u.style,m=u.duration,p=m===void 0?0:m,g=function(y,v,N){if(N===0)return y;var k=v.duration,w=v.easing,A=w===void 0?"ease":w,S=v.style,_=v.properties,E=v.onAnimationEnd,C=N>0?o[N-1]:v,I=_||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(T1(y),[i.runJSAnimation.bind(i,{from:C.style,to:S,duration:k,easing:A}),k]);var B=L3(I,k,A),M=mi(mi(mi({},C.style),S),{},{transition:B});return[].concat(T1(y),[M,k,E]).filter(Ote)};return this.manager.start([d].concat(T1(o.reduce(g,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Ete());var i=s.begin,o=s.duration,l=s.attributeName,d=s.to,u=s.easing,f=s.onAnimationStart,m=s.onAnimationEnd,p=s.steps,g=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var y=l?jh({},l,d):d,v=L3(Object.keys(y),o,u);b.start([f,i,mi(mi({},y),{},{transition:v}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var d=rre(s,tre),u=P.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var m=function(g){var b=g.props,y=b.style,v=y===void 0?{}:y,N=b.className,k=P.cloneElement(g,mi(mi({},d),{},{style:mi(mi({},v),f),className:N}));return k};return u===1?m(P.Children.only(i)):ye.createElement("div",null,P.Children.map(i,function(p){return m(p)}))}}]),r})(P.PureComponent);Ti.displayName="Animate";Ti.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ti.propTypes={from:Kr.oneOfType([Kr.object,Kr.string]),to:Kr.oneOfType([Kr.object,Kr.string]),attributeName:Kr.string,duration:Kr.number,begin:Kr.number,easing:Kr.oneOfType([Kr.string,Kr.func]),steps:Kr.arrayOf(Kr.shape({duration:Kr.number.isRequired,style:Kr.object.isRequired,easing:Kr.oneOfType([Kr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Kr.func]),properties:Kr.arrayOf("string"),onAnimationEnd:Kr.func})),children:Kr.oneOfType([Kr.node,Kr.func]),isActive:Kr.bool,canBegin:Kr.bool,onAnimationEnd:Kr.func,shouldReAnimate:Kr.bool,onAnimationStart:Kr.func,onAnimationReStart:Kr.func};function S0(e){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S0(e)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ip.apply(this,arguments)}function pre(e,t){return vre(e)||yre(e,t)||xre(e,t)||gre()}function gre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(e,t){if(e){if(typeof e=="string")return W3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W3(e,t)}}function W3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function yre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function vre(e){if(Array.isArray(e))return e}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function V3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(a){bre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bre(e,t,r){return t=wre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wre(e){var t=jre(e,"string");return S0(t)=="symbol"?t:t+""}function jre(e,t){if(S0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(S0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G3=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,d=a>=0?1:-1,u=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,g=4;p<g;p++)m[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+d*m[0],",").concat(r)),f+="L ".concat(t+a-d*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+a,",").concat(r+l*m[1])),f+="L ".concat(t+a,",").concat(r+s-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+a-d*m[2],",").concat(r+s)),f+="L ".concat(t+d*m[3],",").concat(r+s),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+d*b,",").concat(r,`
            L `).concat(t+a-d*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+a,",").concat(r+l*b,`
            L `).concat(t+a,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+a-d*b,",").concat(r+s,`
            L `).concat(t+d*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return f},Nre=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),m=Math.min(o,o+d),p=Math.max(o,o+d);return a>=u&&a<=f&&s>=m&&s<=p}return!1},kre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ak=function(t){var r=V3(V3({},kre),t),a=P.useRef(),s=P.useState(-1),i=pre(s,2),o=i[0],l=i[1];P.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var A=a.current.getTotalLength();A&&l(A)}catch{}},[]);var d=r.x,u=r.y,f=r.width,m=r.height,p=r.radius,g=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,N=r.isAnimationActive,k=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||f===0||m===0)return null;var w=yr("recharts-rectangle",g);return k?ye.createElement(Ti,{canBegin:o>0,from:{width:f,height:m,x:d,y:u},to:{width:f,height:m,x:d,y:u},duration:y,animationEasing:b,isActive:k},function(A){var S=A.width,_=A.height,E=A.x,C=A.y;return ye.createElement(Ti,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:N,easing:b},ye.createElement("path",Ip({},Kt(r,!0),{className:w,d:G3(E,C,S,_,p),ref:a})))}):ye.createElement("path",Ip({},Kt(r,!0),{className:w,d:G3(d,u,f,m,p)}))},Sre=["points","className","baseLinePoints","connectNulls"];function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nd.apply(this,arguments)}function _re(e,t){if(e==null)return{};var r=Ere(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ere(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Y3(e){return Ore(e)||Tre(e)||Are(e)||Cre()}function Cre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Are(e,t){if(e){if(typeof e=="string")return PN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PN(e,t)}}function Tre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ore(e){if(Array.isArray(e))return PN(e)}function PN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var X3=function(t){return t&&t.x===+t.x&&t.y===+t.y},Pre=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(a){X3(a)?r[r.length-1].push(a):r[r.length-1].length>0&&r.push([])}),X3(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Ih=function(t,r){var a=Pre(t);r&&(a=[a.reduce(function(i,o){return[].concat(Y3(i),Y3(o))},[])]);var s=a.map(function(i){return i.reduce(function(o,l,d){return"".concat(o).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},Ire=function(t,r,a){var s=Ih(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Ih(r.reverse(),a).slice(1))},xF=function(t){var r=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,o=_re(t,Sre);if(!r||!r.length)return null;var l=yr("recharts-polygon",a);if(s&&s.length){var d=o.stroke&&o.stroke!=="none",u=Ire(r,s,i);return ye.createElement("g",{className:l},ye.createElement("path",Nd({},Kt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),d?ye.createElement("path",Nd({},Kt(o,!0),{fill:"none",d:Ih(r,i)})):null,d?ye.createElement("path",Nd({},Kt(o,!0),{fill:"none",d:Ih(s,i)})):null)}var f=Ih(r,i);return ye.createElement("path",Nd({},Kt(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},IN.apply(this,arguments)}var sf=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=yr("recharts-dot",i);return r===+r&&a===+a&&s===+s?P.createElement("circle",IN({},Kt(t,!1),ep(t),{className:o,cx:r,cy:a,r:s})):null};function _0(e){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_0(e)}var Dre=["x","y","top","left","width","height","className"];function DN(){return DN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},DN.apply(this,arguments)}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(a){Rre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Rre(e,t,r){return t=Fre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fre(e){var t=$re(e,"string");return _0(t)=="symbol"?t:t+""}function $re(e,t){if(_0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lre(e,t){if(e==null)return{};var r=Bre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Bre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Ure=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},Hre=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,d=t.left,u=d===void 0?0:d,f=t.width,m=f===void 0?0:f,p=t.height,g=p===void 0?0:p,b=t.className,y=Lre(t,Dre),v=Mre({x:a,y:i,top:l,left:u,width:m,height:g},y);return!wt(a)||!wt(i)||!wt(m)||!wt(g)||!wt(l)||!wt(u)?null:ye.createElement("path",DN({},Kt(v,!0),{className:yr("recharts-cross",b),d:Ure(a,i,m,g,l,u)}))},qre=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function E0(e){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E0(e)}function zre(e,t){if(e==null)return{};var r=Wre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Wre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mo.apply(this,arguments)}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function C0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(a){Kre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kre(e,t,r){return t=Vre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vre(e){var t=Gre(e,"string");return E0(t)=="symbol"?t:t+""}function Gre(e,t){if(E0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(E0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yre=function(t,r,a,s){var i="";return s.forEach(function(o,l){var d=zr(r,a,t,o);l?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},Xre=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var d=C0({stroke:"#ccc"},Kt(t,!1));return ye.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var f=zr(r,a,s,u),m=zr(r,a,i,u);return ye.createElement("line",Mo({},d,{key:"line-".concat(u),x1:f.x,y1:f.y,x2:m.x,y2:m.y}))}))},Jre=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.index,o=C0(C0({stroke:"#ccc"},Kt(t,!1)),{},{fill:"none"});return ye.createElement("circle",Mo({},o,{className:yr("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:a,r:s}))},Qre=function(t){var r=t.radius,a=t.index,s=C0(C0({stroke:"#ccc"},Kt(t,!1)),{},{fill:"none"});return ye.createElement("path",Mo({},s,{className:yr("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(a),d:Yre(r,t.cx,t.cy,t.polarAngles)}))},Zre=function(t){var r=t.polarRadius,a=t.gridType;return!r||!r.length?null:ye.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(s,i){var o=i;return a==="circle"?ye.createElement(Jre,Mo({key:o},t,{radius:s,index:i})):ye.createElement(Qre,Mo({key:o},t,{radius:s,index:i}))}))},yF=function(t){var r=t.cx,a=r===void 0?0:r,s=t.cy,i=s===void 0?0:s,o=t.innerRadius,l=o===void 0?0:o,d=t.outerRadius,u=d===void 0?0:d,f=t.gridType,m=f===void 0?"polygon":f,p=t.radialLines,g=p===void 0?!0:p,b=zre(t,qre);return u<=0?null:ye.createElement("g",{className:"recharts-polar-grid"},ye.createElement(Xre,Mo({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},b)),ye.createElement(Zre,Mo({cx:a,cy:i,innerRadius:l,outerRadius:u,gridType:m,radialLines:g},b)))};yF.displayName="PolarGrid";var O1,Z3;function ene(){if(Z3)return O1;Z3=1;var e=Yg(),t=AR(),r=Qi();function a(s,i){return s&&s.length?e(s,r(i,2),t):void 0}return O1=a,O1}var tne=ene();const rne=Gr(tne);var P1,e6;function nne(){if(e6)return P1;e6=1;var e=Yg(),t=Qi(),r=TR();function a(s,i){return s&&s.length?e(s,t(i,2),r):void 0}return P1=a,P1}var ane=nne();const sne=Gr(ane);var ine=["cx","cy","angle","ticks","axisLine"],one=["ticks","tick","angle","tickFormatter","stroke"];function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Dh.apply(this,arguments)}function t6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function ql(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t6(Object(r),!0).forEach(function(a){ex(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function r6(e,t){if(e==null)return{};var r=lne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,bF(a.key),a)}}function dne(e,t,r){return t&&n6(e.prototype,t),r&&n6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function une(e,t,r){return t=Dp(t),hne(e,vF()?Reflect.construct(t,r||[],Dp(e).constructor):t.apply(e,r))}function hne(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fne(e)}function fne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vF=function(){return!!e})()}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dp(e)}function mne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}function MN(e,t){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},MN(e,t)}function ex(e,t,r){return t=bF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bF(e){var t=pne(e,"string");return Vd(t)=="symbol"?t:t+""}function pne(e,t){if(Vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nu=(function(e){function t(){return cne(this,t),une(this,t,arguments)}return mne(t,e),dne(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,o=i.angle,l=i.cx,d=i.cy;return zr(l,d,s,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=rne(l,function(f){return f.coordinate||0}),u=sne(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,d=a.axisLine,u=r6(a,ine),f=l.reduce(function(b,y){return[Math.min(b[0],y.coordinate),Math.max(b[1],y.coordinate)]},[1/0,-1/0]),m=zr(s,i,f[0],o),p=zr(s,i,f[1],o),g=ql(ql(ql({},Kt(u,!1)),{},{fill:"none"},Kt(d,!1)),{},{x1:m.x,y1:m.y,x2:p.x,y2:p.y});return ye.createElement("line",Dh({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,d=s.tickFormatter,u=s.stroke,f=r6(s,one),m=this.getTickTextAnchor(),p=Kt(f,!1),g=Kt(o,!1),b=i.map(function(y,v){var N=a.getTickValueCoord(y),k=ql(ql(ql(ql({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(N.x,", ").concat(N.y,")")},p),{},{stroke:"none",fill:u},g),{},{index:v},N),{},{payload:y});return ye.createElement(Ir,Dh({className:yr("recharts-polar-radius-axis-tick",sF(o)),key:"tick-".concat(y.coordinate)},pc(a.props,y,v)),t.renderTickItem(o,k,d?d(y.value,v):y.value))});return ye.createElement(Ir,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,o=a.tick;return!s||!s.length?null:ye.createElement(Ir,{className:yr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),wa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var o;return ye.isValidElement(a)?o=ye.cloneElement(a,s):ir(a)?o=a(s):o=ye.createElement(gc,Dh({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(P.PureComponent);ex(Nu,"displayName","PolarRadiusAxis");ex(Nu,"axisType","radiusAxis");ex(Nu,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function Jl(){return Jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Jl.apply(this,arguments)}function a6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a6(Object(r),!0).forEach(function(a){tx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,jF(a.key),a)}}function xne(e,t,r){return t&&s6(e.prototype,t),r&&s6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yne(e,t,r){return t=Mp(t),vne(e,wF()?Reflect.construct(t,r||[],Mp(e).constructor):t.apply(e,r))}function vne(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bne(e)}function bne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wF=function(){return!!e})()}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mp(e)}function wne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RN(e,t)}function RN(e,t){return RN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},RN(e,t)}function tx(e,t,r){return t=jF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jF(e){var t=jne(e,"string");return Gd(t)=="symbol"?t:t+""}function jne(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nne=Math.PI/180,i6=1e-5,ku=(function(e){function t(){return gne(this,t),yne(this,t,arguments)}return wne(t,e),xne(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,o=s.cy,l=s.radius,d=s.orientation,u=s.tickSize,f=u||8,m=zr(i,o,l,a.coordinate),p=zr(i,o,l+(d==="inner"?-1:1)*f,a.coordinate);return{x1:m.x,y1:m.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*Nne),o;return i>i6?o=s==="outer"?"start":"end":i<-i6?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.radius,l=a.axisLine,d=a.axisLineType,u=zl(zl({},Kt(this.props,!1)),{},{fill:"none"},Kt(l,!1));if(d==="circle")return ye.createElement(sf,Jl({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,m=f.map(function(p){return zr(s,i,o,p.coordinate)});return ye.createElement(xF,Jl({className:"recharts-polar-angle-axis-line"},u,{points:m}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,d=s.tickFormatter,u=s.stroke,f=Kt(this.props,!1),m=Kt(o,!1),p=zl(zl({},f),{},{fill:"none"},Kt(l,!1)),g=i.map(function(b,y){var v=a.getTickLineCoord(b),N=a.getTickTextAnchor(b),k=zl(zl(zl({textAnchor:N},f),{},{stroke:"none",fill:u},m),{},{index:y,payload:b,x:v.x2,y:v.y2});return ye.createElement(Ir,Jl({className:yr("recharts-polar-angle-axis-tick",sF(o)),key:"tick-".concat(b.coordinate)},pc(a.props,b,y)),l&&ye.createElement("line",Jl({className:"recharts-polar-angle-axis-tick-line"},p,v)),o&&t.renderTickItem(o,k,d?d(b.value,y):b.value))});return ye.createElement(Ir,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!s||!s.length?null:ye.createElement(Ir,{className:yr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var o;return ye.isValidElement(a)?o=ye.cloneElement(a,s):ir(a)?o=a(s):o=ye.createElement(gc,Jl({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(P.PureComponent);tx(ku,"displayName","PolarAngleAxis");tx(ku,"axisType","angleAxis");tx(ku,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var I1,o6;function kne(){if(o6)return I1;o6=1;var e=AM(),t=e(Object.getPrototypeOf,Object);return I1=t,I1}var D1,l6;function Sne(){if(l6)return D1;l6=1;var e=$o(),t=kne(),r=Lo(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,d=o.call(Object);function u(f){if(!r(f)||e(f)!=a)return!1;var m=t(f);if(m===null)return!0;var p=l.call(m,"constructor")&&m.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==d}return D1=u,D1}var _ne=Sne();const Ene=Gr(_ne);var M1,c6;function Cne(){if(c6)return M1;c6=1;var e=$o(),t=Lo(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return M1=a,M1}var Ane=Cne();const Tne=Gr(Ane);function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A0(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Rp.apply(this,arguments)}function One(e,t){return Mne(e)||Dne(e,t)||Ine(e,t)||Pne()}function Pne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ine(e,t){if(e){if(typeof e=="string")return d6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d6(e,t)}}function d6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Dne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Mne(e){if(Array.isArray(e))return e}function u6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function h6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(r),!0).forEach(function(a){Rne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Rne(e,t,r){return t=Fne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fne(e){var t=$ne(e,"string");return A0(t)=="symbol"?t:t+""}function $ne(e,t){if(A0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(A0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f6=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Lne={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Bne=function(t){var r=h6(h6({},Lne),t),a=P.useRef(),s=P.useState(-1),i=One(s,2),o=i[0],l=i[1];P.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var w=a.current.getTotalLength();w&&l(w)}catch{}},[]);var d=r.x,u=r.y,f=r.upperWidth,m=r.lowerWidth,p=r.height,g=r.className,b=r.animationEasing,y=r.animationDuration,v=r.animationBegin,N=r.isUpdateAnimationActive;if(d!==+d||u!==+u||f!==+f||m!==+m||p!==+p||f===0&&m===0||p===0)return null;var k=yr("recharts-trapezoid",g);return N?ye.createElement(Ti,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:d,y:u},to:{upperWidth:f,lowerWidth:m,height:p,x:d,y:u},duration:y,animationEasing:b,isActive:N},function(w){var A=w.upperWidth,S=w.lowerWidth,_=w.height,E=w.x,C=w.y;return ye.createElement(Ti,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:b},ye.createElement("path",Rp({},Kt(r,!0),{className:k,d:f6(E,C,A,S,_),ref:a})))}):ye.createElement("g",null,ye.createElement("path",Rp({},Kt(r,!0),{className:k,d:f6(d,u,f,m,p)})))},Une=["option","shapeType","propTransformer","activeClassName","isActive"];function T0(e){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(e)}function Hne(e,t){if(e==null)return{};var r=qne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function qne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(a){zne(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zne(e,t,r){return t=Wne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wne(e){var t=Kne(e,"string");return T0(t)=="symbol"?t:t+""}function Kne(e,t){if(T0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(T0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vne(e,t){return Fp(Fp({},t),e)}function Gne(e,t){return e==="symbols"}function p6(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ye.createElement(Ak,r);case"trapezoid":return ye.createElement(Bne,r);case"sector":return ye.createElement(cF,r);case"symbols":if(Gne(t))return ye.createElement(G2,r);break;default:return null}}function Yne(e){return P.isValidElement(e)?e.props:e}function NF(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?Vne:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,d=Hne(e,Une),u;if(P.isValidElement(t))u=P.cloneElement(t,Fp(Fp({},d),Yne(t)));else if(ir(t))u=t(d);else if(Ene(t)&&!Tne(t)){var f=s(t,d);u=ye.createElement(p6,{shapeType:r,elementProps:f})}else{var m=d;u=ye.createElement(p6,{shapeType:r,elementProps:m})}return l?ye.createElement(Ir,{className:o},u):u}function rx(e,t){return t!=null&&"trapezoids"in e.props}function nx(e,t){return t!=null&&"sectors"in e.props}function O0(e,t){return t!=null&&"points"in e.props}function Xne(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function Jne(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function Qne(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function Zne(e,t){var r;return rx(e,t)?r=Xne:nx(e,t)?r=Jne:O0(e,t)&&(r=Qne),r}function eae(e,t){var r;return rx(e,t)?r="trapezoids":nx(e,t)?r="sectors":O0(e,t)&&(r="points"),r}function tae(e,t){if(rx(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(nx(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return O0(e,t)?t.payload:{}}function rae(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=eae(r,t),i=tae(r,t),o=a.filter(function(d,u){var f=bu(i,d),m=r.props[s].filter(function(b){var y=Zne(r,t);return y(b,t)}),p=r.props[s].indexOf(m[m.length-1]),g=u===p;return f&&g}),l=a.indexOf(o[o.length-1]);return l}var Wm;function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},kd.apply(this,arguments)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(a){ei(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,SF(a.key),a)}}function aae(e,t,r){return t&&x6(e.prototype,t),r&&x6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sae(e,t,r){return t=$p(t),iae(e,kF()?Reflect.construct(t,r||[],$p(e).constructor):t.apply(e,r))}function iae(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oae(e)}function oae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kF=function(){return!!e})()}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$p(e)}function lae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FN(e,t)}function FN(e,t){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},FN(e,t)}function ei(e,t,r){return t=SF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SF(e){var t=cae(e,"string");return Yd(t)=="symbol"?t:t+""}function cae(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zi=(function(e){function t(r){var a;return nae(this,t),a=sae(this,t,[r]),ei(a,"pieRef",null),ei(a,"sectorRefs",[]),ei(a,"id",xu("recharts-pie-")),ei(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),ir(s)&&s()}),ei(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),ir(s)&&s()}),a.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},a}return lae(t,e),aae(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,d=i.dataKey,u=i.valueKey,f=Kt(this.props,!1),m=Kt(o,!1),p=Kt(l,!1),g=o&&o.offsetRadius||20,b=a.map(function(y,v){var N=(y.startAngle+y.endAngle)/2,k=zr(y.cx,y.cy,y.outerRadius+g,N),w=hn(hn(hn(hn({},f),y),{},{stroke:"none"},m),{},{index:v,textAnchor:t.getTextAnchor(k.x,y.cx)},k),A=hn(hn(hn(hn({},f),y),{},{fill:"none",stroke:y.fill},p),{},{index:v,points:[zr(y.cx,y.cy,y.outerRadius,N),k]}),S=d;return vr(d)&&vr(u)?S="value":vr(d)&&(S=u),ye.createElement(Ir,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,w,qn(y,S)))});return ye.createElement(Ir,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,d=i.inactiveShape;return a.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&a.length!==1)return null;var m=s.isActiveIndex(f),p=d&&s.hasActiveIndex()?d:null,g=m?o:p,b=hn(hn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return ye.createElement(Ir,kd({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},pc(s.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),ye.createElement(NF,kd({option:g,isActive:m,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state,p=m.prevSectors,g=m.prevIsAnimationActive;return ye.createElement(Ti,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var y=b.t,v=[],N=i&&i[0],k=N.startAngle;return i.forEach(function(w,A){var S=p&&p[A],_=A>0?$s(w,"paddingAngle",0):0;if(S){var E=Oa(S.endAngle-S.startAngle,w.endAngle-w.startAngle),C=hn(hn({},w),{},{startAngle:k+_,endAngle:k+E(y)+_});v.push(C),k=C.endAngle}else{var I=w.endAngle,B=w.startAngle,M=Oa(0,I-B),O=M(y),U=hn(hn({},w),{},{startAngle:k+_,endAngle:k+O+_});v.push(U),k=U.endAngle}}),ye.createElement(Ir,null,a.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!bu(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,d=s.label,u=s.cx,f=s.cy,m=s.innerRadius,p=s.outerRadius,g=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!wt(u)||!wt(f)||!wt(m)||!wt(p))return null;var y=yr("recharts-pie",l);return ye.createElement(Ir,{tabIndex:this.props.rootTabIndex,className:y,ref:function(N){a.pieRef=N}},this.renderSectors(),d&&this.renderLabels(o),wa.renderCallByParent(this.props,null,!1),(!g||b)&&Wi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(ye.isValidElement(a))return ye.cloneElement(a,s);if(ir(a))return a(s);var o=yr("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return ye.createElement(Cp,kd({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,s,i){if(ye.isValidElement(a))return ye.cloneElement(a,s);var o=i;if(ir(a)&&(o=a(s),ye.isValidElement(o)))return o;var l=yr("recharts-pie-label-text",typeof a!="boolean"&&!ir(a)?a.className:"");return ye.createElement(gc,kd({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(P.PureComponent);Wm=Zi;ei(Zi,"displayName","Pie");ei(Zi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ei(Zi,"parseDeltaAngle",function(e,t){var r=ss(t-e),a=Math.min(Math.abs(t-e),360);return r*a});ei(Zi,"getRealPieData",function(e){var t=e.data,r=e.children,a=Kt(e,!1),s=Ls(r,Ud);return t&&t.length?t.map(function(i,o){return hn(hn(hn({payload:i},a),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return hn(hn({},a),i.props)}):[]});ei(Zi,"parseCoordinateOfPie",function(e,t){var r=t.top,a=t.left,s=t.width,i=t.height,o=nF(s,i),l=a+is(e.cx,s,s/2),d=r+is(e.cy,i,i/2),u=is(e.innerRadius,o,0),f=is(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:d,innerRadius:u,outerRadius:f,maxRadius:m}});ei(Zi,"getComposedData",function(e){var t=e.item,r=e.offset,a=t.type.defaultProps!==void 0?hn(hn({},t.type.defaultProps),t.props):t.props,s=Wm.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,o=a.startAngle,l=a.endAngle,d=a.paddingAngle,u=a.dataKey,f=a.nameKey,m=a.valueKey,p=a.tooltipType,g=Math.abs(a.minAngle),b=Wm.parseCoordinateOfPie(a,r),y=Wm.parseDeltaAngle(o,l),v=Math.abs(y),N=u;vr(u)&&vr(m)?(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):vr(u)&&(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=m);var k=s.filter(function(C){return qn(C,N,0)!==0}).length,w=(v>=360?k:k-1)*d,A=v-k*g-w,S=s.reduce(function(C,I){var B=qn(I,N,0);return C+(wt(B)?B:0)},0),_;if(S>0){var E;_=s.map(function(C,I){var B=qn(C,N,0),M=qn(C,f,I),O=(wt(B)?B:0)/S,U;I?U=E.endAngle+ss(y)*d*(B!==0?1:0):U=o;var ie=U+ss(y)*((B!==0?g:0)+O*A),X=(U+ie)/2,re=(b.innerRadius+b.outerRadius)/2,oe=[{name:M,value:B,payload:C,dataKey:N,type:p}],Q=zr(b.cx,b.cy,re,X);return E=hn(hn(hn({percent:O,cornerRadius:i,name:M,tooltipPayload:oe,midAngle:X,middleRadius:re,tooltipPosition:Q},C),b),{},{value:qn(C,N),startAngle:U,endAngle:ie,payload:C,paddingAngle:ss(y)*d}),E})}return hn(hn({},b),{},{sectors:_,data:s})});var R1,y6;function dae(){if(y6)return R1;y6=1;function e(t){return t&&t.length?t[0]:void 0}return R1=e,R1}var F1,v6;function uae(){return v6||(v6=1,F1=dae()),F1}var hae=uae();const fae=Gr(hae);var mae=["key"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function pae(e,t){if(e==null)return{};var r=gae(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function gae(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lp.apply(this,arguments)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(a){yo(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EF(a.key),a)}}function yae(e,t,r){return t&&w6(e.prototype,t),r&&w6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vae(e,t,r){return t=Bp(t),bae(e,_F()?Reflect.construct(t,r||[],Bp(e).constructor):t.apply(e,r))}function bae(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wae(e)}function wae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_F=function(){return!!e})()}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bp(e)}function jae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function $N(e,t){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},$N(e,t)}function yo(e,t,r){return t=EF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EF(e){var t=Nae(e,"string");return Xd(t)=="symbol"?t:t+""}function Nae(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lc=(function(e){function t(){var r;xae(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=vae(this,t,[].concat(s)),yo(r,"state",{isAnimationFinished:!1}),yo(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ir(o)&&o()}),yo(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ir(o)&&o()}),yo(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),yo(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return jae(t,e),yae(t,[{key:"renderDots",value:function(a){var s=this.props,i=s.dot,o=s.dataKey,l=Kt(this.props,!1),d=Kt(i,!0),u=a.map(function(f,m){var p=rs(rs(rs({key:"dot-".concat(m),r:3},l),d),{},{dataKey:o,cx:f.x,cy:f.y,index:m,payload:f});return t.renderDotItem(i,p)});return ye.createElement(Ir,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(a){var s=this.props,i=s.shape,o=s.dot,l=s.isRange,d=s.baseLinePoints,u=s.connectNulls,f;return ye.isValidElement(i)?f=ye.cloneElement(i,rs(rs({},this.props),{},{points:a})):ir(i)?f=i(rs(rs({},this.props),{},{points:a})):f=ye.createElement(xF,Lp({},Kt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:a,baseLinePoints:l?d:null,connectNulls:u})),ye.createElement(Ir,{className:"recharts-radar-polygon"},f,o?this.renderDots(a):null)}},{key:"renderPolygonWithAnimation",value:function(){var a=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,m=this.state.prevPoints;return ye.createElement(Ti,{begin:l,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,b=m&&m.length/i.length,y=i.map(function(v,N){var k=m&&m[Math.floor(N*b)];if(k){var w=Oa(k.x,v.x),A=Oa(k.y,v.y);return rs(rs({},v),{},{x:w(g),y:A(g)})}var S=Oa(v.cx,v.x),_=Oa(v.cy,v.y);return rs(rs({},v),{},{x:S(g),y:_(g)})});return a.renderPolygonStatically(y)})}},{key:"renderPolygon",value:function(){var a=this.props,s=a.points,i=a.isAnimationActive,o=a.isRange,l=this.state.prevPoints;return i&&s&&s.length&&!o&&(!l||!bu(l,s))?this.renderPolygonWithAnimation():this.renderPolygonStatically(s)}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.className,o=a.points,l=a.isAnimationActive;if(s||!o||!o.length)return null;var d=this.state.isAnimationFinished,u=yr("recharts-radar",i);return ye.createElement(Ir,{className:u},this.renderPolygon(),(!l||d)&&Wi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"renderDotItem",value:function(a,s){var i;if(ye.isValidElement(a))i=ye.cloneElement(a,s);else if(ir(a))i=a(s);else{var o=s.key,l=pae(s,mae);i=ye.createElement(sf,Lp({},l,{key:o,className:yr("recharts-radar-dot",typeof a!="boolean"?a.className:"")}))}return i}}])})(P.PureComponent);yo(lc,"displayName","Radar");yo(lc,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});yo(lc,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,a=e.displayedData,s=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,d=!1,u=[],f=r.type!=="number"?i??0:0;a.forEach(function(p,g){var b=qn(p,r.dataKey,g),y=qn(p,s),v=r.scale(b)+f,N=Array.isArray(y)?oF(y):y,k=vr(N)?void 0:t.scale(N);Array.isArray(y)&&y.length>=2&&(d=!0),u.push(rs(rs({},zr(o,l,k,v)),{},{name:b,value:y,cx:o,cy:l,radius:k,angle:v,payload:p}))});var m=[];return d&&u.forEach(function(p){if(Array.isArray(p.value)){var g=fae(p.value),b=vr(g)?void 0:t.scale(g);m.push(rs(rs({},p),{},{radius:b},zr(o,l,b,p.angle)))}else m.push(p)}),{points:u,isRange:d,baseLinePoints:m}});var $1,j6;function kae(){if(j6)return $1;j6=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,d=t(e((s-a)/(i||1)),0),u=Array(d);d--;)u[o?d:++l]=a,a+=i;return u}return $1=r,$1}var L1,N6;function CF(){if(N6)return L1;N6=1;var e=WM(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return L1=a,L1}var B1,k6;function Sae(){if(k6)return B1;k6=1;var e=kae(),t=Hg(),r=CF();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return B1=a,B1}var U1,S6;function _ae(){if(S6)return U1;S6=1;var e=Sae(),t=e();return U1=t,U1}var Eae=_ae();const Up=Gr(Eae);function P0(e){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P0(e)}function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function E6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(a){AF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AF(e,t,r){return t=Cae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cae(e){var t=Aae(e,"string");return P0(t)=="symbol"?t:t+""}function Aae(e,t){if(P0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(P0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tae=["Webkit","Moz","O","ms"],Oae=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Tae.reduce(function(i,o){return E6(E6({},i),{},AF({},o+a,r))},{});return s[t]=r,s};function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hp.apply(this,arguments)}function C6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(r),!0).forEach(function(a){As(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OF(a.key),a)}}function Iae(e,t,r){return t&&A6(e.prototype,t),r&&A6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dae(e,t,r){return t=qp(t),Mae(e,TF()?Reflect.construct(t,r||[],qp(e).constructor):t.apply(e,r))}function Mae(e,t){if(t&&(Jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rae(e)}function Rae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TF=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qp(e)}function Fae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LN(e,t)}function LN(e,t){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},LN(e,t)}function As(e,t,r){return t=OF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OF(e){var t=$ae(e,"string");return Jd(t)=="symbol"?t:t+""}function $ae(e,t){if(Jd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lae=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var d=r.length,u=Th().domain(Up(0,d)).range([i,i+o-l]),f=u.domain().map(function(m){return u(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(a),endX:u(s),scale:u,scaleValues:f}},T6=function(t){return t.changedTouches&&!!t.changedTouches.length},Qd=(function(e){function t(r){var a;return Pae(this,t),a=Dae(this,t,[r]),As(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),As(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),As(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),As(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),As(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),As(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),As(a,"handleSlideDragStart",function(s){var i=T6(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return Fae(t,e),Iae(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,d=l.gap,u=l.data,f=u.length-1,m=Math.min(s,i),p=Math.max(s,i),g=t.getIndexInRange(o,m),b=t.getIndexInRange(o,p);return{startIndex:g-g%d,endIndex:b===f?f:b-b%d}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,d=qn(i[a],l,a);return ir(o)?o(d,a):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,d=this.props,u=d.x,f=d.width,m=d.travellerWidth,p=d.startIndex,g=d.endIndex,b=d.onChange,y=a.pageX-i;y>0?y=Math.min(y,u+f-m-l,u+f-m-o):y<0&&(y=Math.max(y,u-o,u-l));var v=this.getIndex({startX:o+y,endX:l+y});(v.startIndex!==p||v.endIndex!==g)&&b&&b(v),this.setState({startX:o+y,endX:l+y,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=T6(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,d=s.startX,u=this.state[o],f=this.props,m=f.x,p=f.width,g=f.travellerWidth,b=f.onChange,y=f.gap,v=f.data,N={startX:this.state.startX,endX:this.state.endX},k=a.pageX-i;k>0?k=Math.min(k,m+p-g-u):k<0&&(k=Math.max(k,m-u)),N[o]=u+k;var w=this.getIndex(N),A=w.startIndex,S=w.endIndex,_=function(){var C=v.length-1;return o==="startX"&&(l>d?A%y===0:S%y===0)||l<d&&S===C||o==="endX"&&(l>d?S%y===0:A%y===0)||l>d&&S===C};this.setState(As(As({},o,u+k),"brushMoveStartX",a.pageX),function(){b&&_()&&b(w)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,d=o.startX,u=o.endX,f=this.state[s],m=l.indexOf(f);if(m!==-1){var p=m+a;if(!(p===-1||p>=l.length)){var g=l[p];s==="startX"&&g>=u||s==="endX"&&g<=d||this.setState(As({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.fill,u=a.stroke;return ye.createElement("rect",{stroke:u,fill:d,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.data,u=a.children,f=a.padding,m=P.Children.only(u);return m?ye.cloneElement(m,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,d=this.props,u=d.y,f=d.travellerWidth,m=d.height,p=d.traveller,g=d.ariaLabel,b=d.data,y=d.startIndex,v=d.endIndex,N=Math.max(a,this.props.x),k=H1(H1({},Kt(this.props,!1)),{},{x:N,y:u,width:f,height:m}),w=g||"Min value: ".concat((i=b[y])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[v])===null||o===void 0?void 0:o.name);return ye.createElement(Ir,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,k))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,d=i.stroke,u=i.travellerWidth,f=Math.min(a,s)+u,m=Math.max(Math.abs(s-a)-u,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:f,y:o,width:m,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,d=a.travellerWidth,u=a.stroke,f=this.state,m=f.startX,p=f.endX,g=5,b={pointerEvents:"none",fill:u};return ye.createElement(Ir,{className:"recharts-brush-texts"},ye.createElement(gc,Hp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,p)-g,y:o+l/2},b),this.getTextOfTick(s)),ye.createElement(gc,Hp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,p)+d+g,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,d=a.y,u=a.width,f=a.height,m=a.alwaysShowText,p=this.state,g=p.startX,b=p.endX,y=p.isTextActive,v=p.isSlideMoving,N=p.isTravellerMoving,k=p.isTravellerFocused;if(!s||!s.length||!wt(l)||!wt(d)||!wt(u)||!wt(f)||u<=0||f<=0)return null;var w=yr("recharts-brush",i),A=ye.Children.count(o)===1,S=Oae("userSelect","none");return ye.createElement(Ir,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(y||v||N||k||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,d=a.stroke,u=Math.floor(i+l/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:s,y:i,width:o,height:l,fill:d,stroke:"none"}),ye.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ye.isValidElement(a)?i=ye.cloneElement(a,s):ir(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,d=a.travellerWidth,u=a.updateId,f=a.startIndex,m=a.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return H1({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Lae({data:i,width:o,x:l,travellerWidth:d,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||d!==s.prevTravellerWidth)){s.scale.range([l,l+o-d]);var p=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);a[d]>s?l=d:o=d}return s>=a[l]?l:o}}])})(P.PureComponent);As(Qd,"displayName","Brush");As(Qd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var q1,O6;function Bae(){if(O6)return q1;O6=1;var e=tk();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return q1=t,q1}var z1,P6;function Uae(){if(P6)return z1;P6=1;var e=jM(),t=Qi(),r=Bae(),a=ws(),s=Hg();function i(o,l,d){var u=a(o)?e:r;return d&&s(o,l,d)&&(l=void 0),u(o,t(l,3))}return z1=i,z1}var Hae=Uae();const qae=Gr(Hae);var Ki=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},W1,I6;function zae(){if(I6)return W1;I6=1;var e=BM();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return W1=t,W1}var K1,D6;function Wae(){if(D6)return K1;D6=1;var e=zae(),t=$M(),r=Qi();function a(s,i){var o={};return i=r(i,3),t(s,function(l,d,u){e(o,d,i(l,d,u))}),o}return K1=a,K1}var Kae=Wae();const Vae=Gr(Kae);var V1,M6;function Gae(){if(M6)return V1;M6=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return V1=e,V1}var G1,R6;function Yae(){if(R6)return G1;R6=1;var e=tk();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return G1=t,G1}var Y1,F6;function Xae(){if(F6)return Y1;F6=1;var e=Gae(),t=Yae(),r=Qi(),a=ws(),s=Hg();function i(o,l,d){var u=a(o)?e:t;return d&&s(o,l,d)&&(l=void 0),u(o,r(l,3))}return Y1=i,Y1}var Jae=Xae();const PF=Gr(Jae);var Qae=["x","y"];function I0(e){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I0(e)}function BN(){return BN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},BN.apply(this,arguments)}function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$6(Object(r),!0).forEach(function(a){Zae(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Zae(e,t,r){return t=ese(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ese(e){var t=tse(e,"string");return I0(t)=="symbol"?t:t+""}function tse(e,t){if(I0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(I0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rse(e,t){if(e==null)return{};var r=nse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ase(e,t){var r=e.x,a=e.y,s=rse(e,Qae),i="".concat(r),o=parseInt(i,10),l="".concat(a),d=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),m="".concat(t.width||s.width),p=parseInt(m,10);return fh(fh(fh(fh(fh({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function L6(e){return ye.createElement(NF,BN({shapeType:"rectangle",propTransformer:ase,activeClassName:"recharts-active-bar"},e))}var sse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=wt(a)||nW(a);return i?t(a,s):(i||yc(),r)}},ise=["value","background"],IF;function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function ose(e,t){if(e==null)return{};var r=lse(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function lse(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zp.apply(this,arguments)}function B6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(r),!0).forEach(function(a){dl(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MF(a.key),a)}}function dse(e,t,r){return t&&U6(e.prototype,t),r&&U6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function use(e,t,r){return t=Wp(t),hse(e,DF()?Reflect.construct(t,r||[],Wp(e).constructor):t.apply(e,r))}function hse(e,t){if(t&&(Zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fse(e)}function fse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DF=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wp(e)}function mse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UN(e,t)}function UN(e,t){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},UN(e,t)}function dl(e,t,r){return t=MF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=pse(e,"string");return Zd(t)=="symbol"?t:t+""}function pse(e,t){if(Zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zd(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sn=(function(e){function t(){var r;cse(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=use(this,t,[].concat(s)),dl(r,"state",{isAnimationFinished:!1}),dl(r,"id",xu("recharts-bar-")),dl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),dl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return mse(t,e),dse(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,u=i.activeBar,f=Kt(this.props,!1);return a&&a.map(function(m,p){var g=p===d,b=g?u:o,y=Vn(Vn(Vn({},f),m),{},{isActive:g,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ye.createElement(Ir,zp({className:"recharts-bar-rectangle"},pc(s.props,m,p),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(p)}),ye.createElement(L6,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,d=s.animationBegin,u=s.animationDuration,f=s.animationEasing,m=s.animationId,p=this.state.prevData;return ye.createElement(Ti,{begin:d,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,y=i.map(function(v,N){var k=p&&p[N];if(k){var w=Oa(k.x,v.x),A=Oa(k.y,v.y),S=Oa(k.width,v.width),_=Oa(k.height,v.height);return Vn(Vn({},v),{},{x:w(b),y:A(b),width:S(b),height:_(b)})}if(o==="horizontal"){var E=Oa(0,v.height),C=E(b);return Vn(Vn({},v),{},{y:v.y+v.height-C,height:C})}var I=Oa(0,v.width),B=I(b);return Vn(Vn({},v),{},{width:B})});return ye.createElement(Ir,null,a.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!bu(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,d=Kt(this.props.background,!1);return i.map(function(u,f){u.value;var m=u.background,p=ose(u,ise);if(!m)return null;var g=Vn(Vn(Vn(Vn(Vn({},p),{},{fill:"#eee"},m),d),pc(a.props,u,f)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return ye.createElement(L6,zp({key:"background-bar-".concat(f),option:a.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Ls(f,af);if(!m)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,g=function(v,N){var k=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:k,errorVal:qn(v,N)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ye.createElement(Ir,b,m.map(function(y){return ye.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,d=a.yAxis,u=a.left,f=a.top,m=a.width,p=a.height,g=a.isAnimationActive,b=a.background,y=a.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,N=yr("recharts-bar",o),k=l&&l.allowDataOverflow,w=d&&d.allowDataOverflow,A=k||w,S=vr(y)?this.id:y;return ye.createElement(Ir,{className:N},k||w?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(S)},ye.createElement("rect",{x:k?u:u-m/2,y:w?f:f-p/2,width:k?m:m*2,height:w?p:p*2}))):null,ye.createElement(Ir,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!g||v)&&Wi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(P.PureComponent);IF=sn;dl(sn,"displayName","Bar");dl(sn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dl(sn,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,m=e.displayedData,p=e.offset,g=yZ(a,r);if(!g)return null;var b=t.layout,y=r.type.defaultProps,v=y!==void 0?Vn(Vn({},y),r.props):r.props,N=v.dataKey,k=v.children,w=v.minPointSize,A=b==="horizontal"?o:i,S=u?A.scale.domain():null,_=SZ({numericAxis:A}),E=Ls(k,Ud),C=m.map(function(I,B){var M,O,U,ie,X,re;u?M=vZ(u[f+B],S):(M=qn(I,N),Array.isArray(M)||(M=[_,M]));var oe=sse(w,IF.defaultProps.minPointSize)(M[1],B);if(b==="horizontal"){var Q,F=[o.scale(M[0]),o.scale(M[1])],J=F[0],L=F[1];O=d3({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:I,index:B}),U=(Q=L??J)!==null&&Q!==void 0?Q:void 0,ie=g.size;var D=J-L;if(X=Number.isNaN(D)?0:D,re={x:O,y:o.y,width:ie,height:o.height},Math.abs(oe)>0&&Math.abs(X)<Math.abs(oe)){var Y=ss(X||oe)*(Math.abs(oe)-Math.abs(X));U-=Y,X+=Y}}else{var V=[i.scale(M[0]),i.scale(M[1])],ee=V[0],ge=V[1];if(O=ee,U=d3({axis:o,ticks:d,bandSize:s,offset:g.offset,entry:I,index:B}),ie=ge-ee,X=g.size,re={x:i.x,y:U,width:i.width,height:X},Math.abs(oe)>0&&Math.abs(ie)<Math.abs(oe)){var ke=ss(ie||oe)*(Math.abs(oe)-Math.abs(ie));ie+=ke}}return Vn(Vn(Vn({},I),{},{x:O,y:U,width:ie,height:X,value:u?M:M[1],payload:I,background:re},E&&E[B]&&E[B].props),{},{tooltipPayload:[tF(r,I)],tooltipPosition:{x:O+ie/2,y:U+X/2}})});return Vn({data:C,layout:b},p)});function D0(e){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D0(e)}function gse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H6(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,RF(a.key),a)}}function xse(e,t,r){return t&&H6(e.prototype,t),r&&H6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q6(Object(r),!0).forEach(function(a){ax(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ax(e,t,r){return t=RF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=yse(e,"string");return D0(t)=="symbol"?t:t+""}function yse(e,t){if(D0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(D0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FF=function(t,r,a,s,i){var o=t.width,l=t.height,d=t.layout,u=t.children,f=Object.keys(r),m={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!Ts(u,sn);return f.reduce(function(g,b){var y=r[b],v=y.orientation,N=y.domain,k=y.padding,w=k===void 0?{}:k,A=y.mirror,S=y.reversed,_="".concat(v).concat(A?"Mirror":""),E,C,I,B,M;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var O=N[1]-N[0],U=1/0,ie=y.categoricalDomain.sort(iW);if(ie.forEach(function(V,ee){ee>0&&(U=Math.min((V||0)-(ie[ee-1]||0),U))}),Number.isFinite(U)){var X=U/O,re=y.layout==="vertical"?a.height:a.width;if(y.padding==="gap"&&(E=X*re/2),y.padding==="no-gap"){var oe=is(t.barCategoryGap,X*re),Q=X*re/2;E=Q-oe-(Q-oe)/re*oe}}}s==="xAxis"?C=[a.left+(w.left||0)+(E||0),a.left+a.width-(w.right||0)-(E||0)]:s==="yAxis"?C=d==="horizontal"?[a.top+a.height-(w.bottom||0),a.top+(w.top||0)]:[a.top+(w.top||0)+(E||0),a.top+a.height-(w.bottom||0)-(E||0)]:C=y.range,S&&(C=[C[1],C[0]]);var F=JR(y,i,p),J=F.scale,L=F.realScaleType;J.domain(N).range(C),QR(J);var D=ZR(J,bi(bi({},y),{},{realScaleType:L}));s==="xAxis"?(M=v==="top"&&!A||v==="bottom"&&A,I=a.left,B=m[_]-M*y.height):s==="yAxis"&&(M=v==="left"&&!A||v==="right"&&A,I=m[_]-M*y.width,B=a.top);var Y=bi(bi(bi({},y),D),{},{realScaleType:L,x:I,y:B,scale:J,width:s==="xAxis"?a.width:y.width,height:s==="yAxis"?a.height:y.height});return Y.bandSize=Sp(Y,D),!y.hide&&s==="xAxis"?m[_]+=(M?-1:1)*Y.height:y.hide||(m[_]+=(M?-1:1)*Y.width),bi(bi({},g),{},ax({},b,Y))},{})},$F=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},vse=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return $F({x:r,y:a},{x:s,y:i})},LF=(function(){function e(t){gse(this,e),this.scale=t}return xse(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();ax(LF,"EPS",1e-4);var Tk=function(t){var r=Object.keys(t).reduce(function(a,s){return bi(bi({},a),{},ax({},s,LF.create(t[s])))},{});return bi(bi({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Vae(s,function(d,u){return r[u].apply(d,{bandAware:o,position:l})})},isInRange:function(s){return PF(s,function(i,o){return r[o].isInRange(i)})}})};function bse(e){return(e%180+180)%180}var wse=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bse(s),o=i*Math.PI/180,l=Math.atan(a/r),d=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(d)},X1,z6;function jse(){if(z6)return X1;z6=1;var e=Qi(),t=Z0(),r=Bg();function a(s){return function(i,o,l){var d=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(m){return u(d[m],m,d)}}var f=s(i,o,l);return f>-1?d[u?i[f]:f]:void 0}}return X1=a,X1}var J1,W6;function Nse(){if(W6)return J1;W6=1;var e=CF();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return J1=t,J1}var Q1,K6;function kse(){if(K6)return Q1;K6=1;var e=IM(),t=Qi(),r=Nse(),a=Math.max;function s(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var u=l==null?0:r(l);return u<0&&(u=a(d+u,0)),e(i,t(o,3),u)}return Q1=s,Q1}var Z1,V6;function Sse(){if(V6)return Z1;V6=1;var e=jse(),t=kse(),r=e(t);return Z1=r,Z1}var _se=Sse();const Ese=Gr(_se);var Cse=Y5();const Ase=Gr(Cse);var Tse=Ase(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Ok=P.createContext(void 0),Pk=P.createContext(void 0),BF=P.createContext(void 0),UF=P.createContext({}),HF=P.createContext(void 0),qF=P.createContext(0),zF=P.createContext(0),G6=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,d=t.width,u=t.height,f=Tse(i);return ye.createElement(Ok.Provider,{value:a},ye.createElement(Pk.Provider,{value:s},ye.createElement(UF.Provider,{value:i},ye.createElement(BF.Provider,{value:f},ye.createElement(HF.Provider,{value:o},ye.createElement(qF.Provider,{value:u},ye.createElement(zF.Provider,{value:d},l)))))))},Ose=function(){return P.useContext(HF)},WF=function(t){var r=P.useContext(Ok);r==null&&yc();var a=r[t];return a==null&&yc(),a},Pse=function(){var t=P.useContext(Ok);return ol(t)},Ise=function(){var t=P.useContext(Pk),r=Ese(t,function(a){return PF(a.domain,Number.isFinite)});return r||ol(t)},KF=function(t){var r=P.useContext(Pk);r==null&&yc();var a=r[t];return a==null&&yc(),a},Dse=function(){var t=P.useContext(BF);return t},Mse=function(){return P.useContext(UF)},Ik=function(){return P.useContext(zF)},Dk=function(){return P.useContext(qF)};function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function Rse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,GF(a.key),a)}}function $se(e,t,r){return t&&Fse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lse(e,t,r){return t=Kp(t),Bse(e,VF()?Reflect.construct(t,r||[],Kp(e).constructor):t.apply(e,r))}function Bse(e,t){if(t&&(eu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Use(e)}function Use(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!e})()}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kp(e)}function Hse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HN(e,t)}function HN(e,t){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},HN(e,t)}function Y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function X6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y6(Object(r),!0).forEach(function(a){Mk(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Mk(e,t,r){return t=GF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=qse(e,"string");return eu(t)=="symbol"?t:t+""}function qse(e,t){if(eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(eu(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function zse(e,t){return Gse(e)||Vse(e,t)||Kse(e,t)||Wse()}function Wse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kse(e,t){if(e){if(typeof e=="string")return J6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J6(e,t)}}function J6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Vse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Gse(e){if(Array.isArray(e))return e}function qN(){return qN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qN.apply(this,arguments)}var Yse=function(t,r){var a;return ye.isValidElement(t)?a=ye.cloneElement(t,r):ir(t)?a=t(r):a=ye.createElement("line",qN({},r,{className:"recharts-reference-line-line"})),a},Xse=function(t,r,a,s,i,o,l,d,u){var f=i.x,m=i.y,p=i.width,g=i.height;if(a){var b=u.y,y=t.y.apply(b,{position:o});if(Ki(u,"discard")&&!t.y.isInRange(y))return null;var v=[{x:f+p,y},{x:f,y}];return d==="left"?v.reverse():v}if(r){var N=u.x,k=t.x.apply(N,{position:o});if(Ki(u,"discard")&&!t.x.isInRange(k))return null;var w=[{x:k,y:m+g},{x:k,y:m}];return l==="top"?w.reverse():w}if(s){var A=u.segment,S=A.map(function(_){return t.apply(_,{position:o})});return Ki(u,"discard")&&qae(S,function(_){return!t.isInRange(_)})?null:S}return null};function Jse(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,d=e.alwaysShow,u=Ose(),f=WF(s),m=KF(i),p=Dse();if(!u||!p)return null;Ci(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Tk({x:f.scale,y:m.scale}),b=ua(t),y=ua(r),v=a&&a.length===2,N=Xse(g,b,y,v,p,e.position,f.orientation,m.orientation,e);if(!N)return null;var k=zse(N,2),w=k[0],A=w.x,S=w.y,_=k[1],E=_.x,C=_.y,I=Ki(e,"hidden")?"url(#".concat(u,")"):void 0,B=X6(X6({clipPath:I},Kt(e,!0)),{},{x1:A,y1:S,x2:E,y2:C});return ye.createElement(Ir,{className:yr("recharts-reference-line",l)},Yse(o,B),wa.renderCallByParent(e,vse({x1:A,y1:S,x2:E,y2:C})))}var Rk=(function(e){function t(){return Rse(this,t),Lse(this,t,arguments)}return Hse(t,e),$se(t,[{key:"render",value:function(){return ye.createElement(Jse,this.props)}}])})(ye.Component);Mk(Rk,"displayName","ReferenceLine");Mk(Rk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zN.apply(this,arguments)}function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function Q6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q6(Object(r),!0).forEach(function(a){sx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Qse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zse(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XF(a.key),a)}}function eie(e,t,r){return t&&Zse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tie(e,t,r){return t=Vp(t),rie(e,YF()?Reflect.construct(t,r||[],Vp(e).constructor):t.apply(e,r))}function rie(e,t){if(t&&(tu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nie(e)}function nie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YF=function(){return!!e})()}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vp(e)}function aie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WN(e,t)}function WN(e,t){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},WN(e,t)}function sx(e,t,r){return t=XF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XF(e){var t=sie(e,"string");return tu(t)=="symbol"?t:t+""}function sie(e,t){if(tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(tu(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iie=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=Tk({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return Ki(t,"discard")&&!o.isInRange(l)?null:l},ix=(function(e){function t(){return Qse(this,t),tie(this,t,arguments)}return aie(t,e),eie(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,d=a.clipPathId,u=ua(s),f=ua(i);if(Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var m=iie(this.props);if(!m)return null;var p=m.x,g=m.y,b=this.props,y=b.shape,v=b.className,N=Ki(this.props,"hidden")?"url(#".concat(d,")"):void 0,k=Z6(Z6({clipPath:N},Kt(this.props,!0)),{},{cx:p,cy:g});return ye.createElement(Ir,{className:yr("recharts-reference-dot",v)},t.renderDot(y,k),wa.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])})(ye.Component);sx(ix,"displayName","ReferenceDot");sx(ix,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});sx(ix,"renderDot",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):ir(e)?r=e(t):r=ye.createElement(sf,zN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function KN(){return KN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},KN.apply(this,arguments)}function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(a){ox(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lie(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QF(a.key),a)}}function cie(e,t,r){return t&&lie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function die(e,t,r){return t=Gp(t),uie(e,JF()?Reflect.construct(t,r||[],Gp(e).constructor):t.apply(e,r))}function uie(e,t){if(t&&(ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hie(e)}function hie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JF=function(){return!!e})()}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gp(e)}function fie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VN(e,t)}function VN(e,t){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},VN(e,t)}function ox(e,t,r){return t=QF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QF(e){var t=mie(e,"string");return ru(t)=="symbol"?t:t+""}function mie(e,t){if(ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ru(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pie=function(t,r,a,s,i){var o=i.x1,l=i.x2,d=i.y1,u=i.y2,f=i.xAxis,m=i.yAxis;if(!f||!m)return null;var p=Tk({x:f.scale,y:m.scale}),g={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(d,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Ki(i,"discard")&&(!p.isInRange(g)||!p.isInRange(b))?null:$F(g,b)},lx=(function(e){function t(){return oie(this,t),die(this,t,arguments)}return fie(t,e),cie(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,d=a.className,u=a.alwaysShow,f=a.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=ua(s),p=ua(i),g=ua(o),b=ua(l),y=this.props.shape;if(!m&&!p&&!g&&!b&&!y)return null;var v=pie(m,p,g,b,this.props);if(!v&&!y)return null;var N=Ki(this.props,"hidden")?"url(#".concat(f,")"):void 0;return ye.createElement(Ir,{className:yr("recharts-reference-area",d)},t.renderRect(y,tP(tP({clipPath:N},Kt(this.props,!0)),v)),wa.renderCallByParent(this.props,v))}}])})(ye.Component);ox(lx,"displayName","ReferenceArea");ox(lx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ox(lx,"renderRect",function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):ir(e)?r=e(t):r=ye.createElement(Ak,KN({},t,{className:"recharts-reference-area-rect"})),r});function ZF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function gie(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return wse(a,r)}function xie(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function Yp(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function yie(e,t){return ZF(e,t+1)}function vie(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,d=0,u=1,f=o,m=function(){var b=a?.[d];if(b===void 0)return{v:ZF(a,u)};var y=d,v,N=function(){return v===void 0&&(v=r(b,y)),v},k=b.coordinate,w=d===0||Yp(e,k,N,f,l);w||(d=0,f=o,u+=1),w&&(f=k+e*(N()/2+s),d+=u)},p;u<=i.length;)if(p=m(),p)return p.v;return[]}function M0(e){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M0(e)}function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(r),!0).forEach(function(a){bie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bie(e,t,r){return t=wie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wie(e){var t=jie(e,"string");return M0(t)=="symbol"?t:t+""}function jie(e,t){if(M0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(M0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nie(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,d=t.end,u=function(p){var g=i[p],b,y=function(){return b===void 0&&(b=r(g,p)),b};if(p===o-1){var v=e*(g.coordinate+e*y()/2-d);i[p]=g=Ua(Ua({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else i[p]=g=Ua(Ua({},g),{},{tickCoord:g.coordinate});var N=Yp(e,g.tickCoord,y,l,d);N&&(d=g.tickCoord-e*(y()/2+s),i[p]=Ua(Ua({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function kie(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,d=t.start,u=t.end;if(i){var f=a[l-1],m=r(f,l-1),p=e*(f.coordinate+e*m/2-u);o[l-1]=f=Ua(Ua({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var g=Yp(e,f.tickCoord,function(){return m},d,u);g&&(u=f.tickCoord-e*(m/2+s),o[l-1]=Ua(Ua({},f),{},{isShow:!0}))}for(var b=i?l-1:l,y=function(k){var w=o[k],A,S=function(){return A===void 0&&(A=r(w,k)),A};if(k===0){var _=e*(w.coordinate-e*S()/2-d);o[k]=w=Ua(Ua({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[k]=w=Ua(Ua({},w),{},{tickCoord:w.coordinate});var E=Yp(e,w.tickCoord,S,d,u);E&&(d=w.tickCoord+e*(S()/2+s),o[k]=Ua(Ua({},w),{},{isShow:!0}))},v=0;v<b;v++)y(v);return o}function Fk(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,d=e.interval,u=e.tickFormatter,f=e.unit,m=e.angle;if(!s||!s.length||!a)return[];if(wt(d)||jl.isSsr)return yie(s,typeof d=="number"&&wt(d)?d:0);var p=[],g=l==="top"||l==="bottom"?"width":"height",b=f&&g==="width"?Ah(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(w,A){var S=ir(u)?u(w.value,A):w.value;return g==="width"?gie(Ah(S,{fontSize:t,letterSpacing:r}),b,m):Ah(S,{fontSize:t,letterSpacing:r})[g]},v=s.length>=2?ss(s[1].coordinate-s[0].coordinate):1,N=xie(i,v,g);return d==="equidistantPreserveStart"?vie(v,N,y,s,o):(d==="preserveStart"||d==="preserveStartEnd"?p=kie(v,N,y,s,o,d==="preserveStartEnd"):p=Nie(v,N,y,s,o),p.filter(function(k){return k.isShow}))}var Sie=["viewBox"],_ie=["viewBox"],Eie=["ticks"];function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Sd.apply(this,arguments)}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(a){$k(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ej(e,t){if(e==null)return{};var r=Cie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Cie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Aie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t$(a.key),a)}}function Tie(e,t,r){return t&&aP(e.prototype,t),r&&aP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oie(e,t,r){return t=Xp(t),Pie(e,e$()?Reflect.construct(t,r||[],Xp(e).constructor):t.apply(e,r))}function Pie(e,t){if(t&&(nu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iie(e)}function Iie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e$=function(){return!!e})()}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xp(e)}function Die(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GN(e,t)}function GN(e,t){return GN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},GN(e,t)}function $k(e,t,r){return t=t$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t$(e){var t=Mie(e,"string");return nu(t)=="symbol"?t:t+""}function Mie(e,t){if(nu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(nu(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Su=(function(e){function t(r){var a;return Aie(this,t),a=Oie(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Die(t,e),Tie(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=ej(a,Sie),l=this.props,d=l.viewBox,u=ej(l,_ie);return!Td(i,d)||!Td(o,u)||!Td(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,d=s.height,u=s.orientation,f=s.tickSize,m=s.mirror,p=s.tickMargin,g,b,y,v,N,k,w=m?-1:1,A=a.tickSize||f,S=wt(a.tickCoord)?a.tickCoord:a.coordinate;switch(u){case"top":g=b=a.coordinate,v=o+ +!m*d,y=v-w*A,k=y-w*p,N=S;break;case"left":y=v=a.coordinate,b=i+ +!m*l,g=b-w*A,N=g-w*p,k=S;break;case"right":y=v=a.coordinate,b=i+ +m*l,g=b+w*A,N=g+w*p,k=S;break;default:g=b=a.coordinate,v=o+ +m*d,y=v+w*A,k=y+w*p,N=S;break}return{line:{x1:g,y1:y,x2:b,y2:v},tick:{x:N,y:k}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,d=a.orientation,u=a.mirror,f=a.axisLine,m=sa(sa(sa({},Kt(this.props,!1)),Kt(f,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var p=+(d==="top"&&!u||d==="bottom"&&u);m=sa(sa({},m),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var g=+(d==="left"&&!u||d==="right"&&u);m=sa(sa({},m),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return ye.createElement("line",Sd({},m,{className:yr("recharts-cartesian-axis-line",$s(f,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,d=l.tickLine,u=l.stroke,f=l.tick,m=l.tickFormatter,p=l.unit,g=Fk(sa(sa({},this.props),{},{ticks:a}),s,i),b=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=Kt(this.props,!1),N=Kt(f,!1),k=sa(sa({},v),{},{fill:"none"},Kt(d,!1)),w=g.map(function(A,S){var _=o.getTickLineCoord(A),E=_.line,C=_.tick,I=sa(sa(sa(sa({textAnchor:b,verticalAnchor:y},v),{},{stroke:"none",fill:u},N),C),{},{index:S,payload:A,visibleTicksCount:g.length,tickFormatter:m});return ye.createElement(Ir,Sd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},pc(o.props,A,S)),d&&ye.createElement("line",Sd({},k,E,{className:yr("recharts-cartesian-axis-tick-line",$s(d,"className"))})),f&&t.renderTickItem(f,I,"".concat(ir(m)?m(A.value,S):A.value).concat(p||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,d=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var m=this.props,p=m.ticks,g=ej(m,Eie),b=p;return ir(d)&&(b=p&&p.length>0?d(this.props):d(g)),o<=0||l<=0||!b||!b.length?null:ye.createElement(Ir,{className:yr("recharts-cartesian-axis",u),ref:function(v){a.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),wa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=yr(s.className,"recharts-cartesian-axis-tick-value");return ye.isValidElement(a)?o=ye.cloneElement(a,sa(sa({},s),{},{className:l})):ir(a)?o=a(sa(sa({},s),{},{className:l})):o=ye.createElement(gc,Sd({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(P.Component);$k(Su,"displayName","CartesianAxis");$k(Su,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Rie=["x1","y1","x2","y2","key"],Fie=["offset"];function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(a){$ie(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $ie(e,t,r){return t=Lie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lie(e){var t=Bie(e,"string");return vc(t)=="symbol"?t:t+""}function Bie(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ac.apply(this,arguments)}function iP(e,t){if(e==null)return{};var r=Uie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Uie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Hie=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,d=t.ry;return ye.createElement("rect",{x:s,y:i,ry:d,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function r$(e,t){var r;if(ye.isValidElement(e))r=ye.cloneElement(e,t);else if(ir(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,d=iP(t,Rie),u=Kt(d,!1);u.offset;var f=iP(u,Fie);r=ye.createElement("line",ac({},f,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function qie(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Wa(Wa({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(d),index:d});return r$(s,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function zie(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,d){var u=Wa(Wa({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(d),index:d});return r$(s,u)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Wie(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],y=b?s+o-p:f[g+1]-p;if(y<=0)return null;var v=g%t.length;return ye.createElement("rect",{key:"react-".concat(g),y:p,x:a,height:y,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Kie(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,d=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var f=u.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==f[0]&&f.unshift(0);var m=f.map(function(p,g){var b=!f[g+1],y=b?i+l-p:f[g+1]-p;if(y<=0)return null;var v=g%a.length;return ye.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:y,height:d,stroke:"none",fill:a[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Vie=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return XR(Fk(Wa(Wa(Wa({},Su.defaultProps),a),{},{ticks:So(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Gie=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return XR(Fk(Wa(Wa(Wa({},Su.defaultProps),a),{},{ticks:So(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},hd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ha(e){var t,r,a,s,i,o,l=Ik(),d=Dk(),u=Mse(),f=Wa(Wa({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:hd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:hd.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:hd.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:hd.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:hd.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:hd.verticalFill,x:wt(e.x)?e.x:u.left,y:wt(e.y)?e.y:u.top,width:wt(e.width)?e.width:u.width,height:wt(e.height)?e.height:u.height}),m=f.x,p=f.y,g=f.width,b=f.height,y=f.syncWithTicks,v=f.horizontalValues,N=f.verticalValues,k=Pse(),w=Ise();if(!wt(g)||g<=0||!wt(b)||b<=0||!wt(m)||m!==+m||!wt(p)||p!==+p)return null;var A=f.verticalCoordinatesGenerator||Vie,S=f.horizontalCoordinatesGenerator||Gie,_=f.horizontalPoints,E=f.verticalPoints;if((!_||!_.length)&&ir(S)){var C=v&&v.length,I=S({yAxis:w?Wa(Wa({},w),{},{ticks:C?v:w.ticks}):void 0,width:l,height:d,offset:u},C?!0:y);Ci(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(vc(I),"]")),Array.isArray(I)&&(_=I)}if((!E||!E.length)&&ir(A)){var B=N&&N.length,M=A({xAxis:k?Wa(Wa({},k),{},{ticks:B?N:k.ticks}):void 0,width:l,height:d,offset:u},B?!0:y);Ci(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(vc(M),"]")),Array.isArray(M)&&(E=M)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(Hie,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),ye.createElement(qie,ac({},f,{offset:u,horizontalPoints:_,xAxis:k,yAxis:w})),ye.createElement(zie,ac({},f,{offset:u,verticalPoints:E,xAxis:k,yAxis:w})),ye.createElement(Wie,ac({},f,{horizontalPoints:_})),ye.createElement(Kie,ac({},f,{verticalPoints:E})))}Ha.displayName="CartesianGrid";var Yie=["type","layout","connectNulls","ref"],Xie=["key"];function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function oP(e,t){if(e==null)return{};var r=Jie(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Jie(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mh.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(a){wi(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fd(e){return toe(e)||eoe(e)||Zie(e)||Qie()}function Qie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zie(e,t){if(e){if(typeof e=="string")return YN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YN(e,t)}}function eoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function toe(e){if(Array.isArray(e))return YN(e)}function YN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a$(a.key),a)}}function noe(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aoe(e,t,r){return t=Jp(t),soe(e,n$()?Reflect.construct(t,r||[],Jp(e).constructor):t.apply(e,r))}function soe(e,t){if(t&&(au(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ioe(e)}function ioe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n$=function(){return!!e})()}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jp(e)}function ooe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}function XN(e,t){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},XN(e,t)}function wi(e,t,r){return t=a$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a$(e){var t=loe(e,"string");return au(t)=="symbol"?t:t+""}function loe(e,t){if(au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(au(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ys=(function(e){function t(){var r;roe(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=aoe(this,t,[].concat(s)),wi(r,"state",{isAnimationFinished:!0,totalLength:0}),wi(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),wi(r,"getStrokeDasharray",function(o,l,d){var u=d.reduce(function(N,k){return N+k});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/u),m=o%u,p=l-o,g=[],b=0,y=0;b<d.length;y+=d[b],++b)if(y+d[b]>m){g=[].concat(fd(d.slice(0,b)),[m-y]);break}var v=g.length%2===0?[0,p]:[p];return[].concat(fd(t.repeat(d,f)),fd(g),v).map(function(N){return"".concat(N,"px")}).join(", ")}),wi(r,"id",xu("recharts-line-")),wi(r,"pathRef",function(o){r.mainCurve=o}),wi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),wi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return ooe(t,e),noe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,u=i.layout,f=i.children,m=Ls(f,af);if(!m)return null;var p=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:qn(y.payload,v)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ye.createElement(Ir,g,m.map(function(b){return ye.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:l,yAxis:d,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,u=l.points,f=l.dataKey,m=Kt(this.props,!1),p=Kt(d,!0),g=u.map(function(y,v){var N=Cs(Cs(Cs({key:"dot-".concat(v),r:3},m),p),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return t.renderDotItem(d,N)}),b={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ye.createElement(Ir,Mh({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,d=l.type,u=l.layout,f=l.connectNulls;l.ref;var m=oP(l,Yie),p=Cs(Cs(Cs({},Kt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:d,layout:u,connectNulls:f});return ye.createElement(Cp,Mh({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,u=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,b=o.animateNewValues,y=o.width,v=o.height,N=this.state,k=N.prevPoints,w=N.totalLength;return ye.createElement(Ti,{begin:f,duration:m,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(k){var _=k.length/l.length,E=l.map(function(O,U){var ie=Math.floor(U*_);if(k[ie]){var X=k[ie],re=Oa(X.x,O.x),oe=Oa(X.y,O.y);return Cs(Cs({},O),{},{x:re(S),y:oe(S)})}if(b){var Q=Oa(y*2,O.x),F=Oa(v/2,O.y);return Cs(Cs({},O),{},{x:Q(S),y:F(S)})}return Cs(Cs({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(E,a,s)}var C=Oa(0,w),I=C(S),B;if(d){var M="".concat(d).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});B=i.getStrokeDasharray(I,w,M)}else B=i.generateSimpleStrokeDasharray(w,I);return i.renderCurveStatically(l,a,s,{strokeDasharray:B})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.totalLength;return l&&o&&o.length&&(!u&&f>0||!bu(u,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,d=s.className,u=s.xAxis,f=s.yAxis,m=s.top,p=s.left,g=s.width,b=s.height,y=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var N=this.state.isAnimationFinished,k=l.length===1,w=yr("recharts-line",d),A=u&&u.allowDataOverflow,S=f&&f.allowDataOverflow,_=A||S,E=vr(v)?this.id:v,C=(a=Kt(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=C.r,B=I===void 0?3:I,M=C.strokeWidth,O=M===void 0?2:M,U=pW(o)?o:{},ie=U.clipDot,X=ie===void 0?!0:ie,re=B*2+O;return ye.createElement(Ir,{className:w},A||S?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(E)},ye.createElement("rect",{x:A?p:p-g/2,y:S?m:m-b/2,width:A?g:g*2,height:S?b:b*2})),!X&&ye.createElement("clipPath",{id:"clipPath-dots-".concat(E)},ye.createElement("rect",{x:p-re/2,y:m-re/2,width:g+re,height:b+re}))):null,!k&&this.renderCurve(_,E),this.renderErrorBar(_,E),(k||o)&&this.renderDots(_,X,E),(!y||N)&&Wi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(fd(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(fd(o),fd(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(ye.isValidElement(a))i=ye.cloneElement(a,s);else if(ir(a))i=a(s);else{var o=s.key,l=oP(s,Xie),d=yr("recharts-line-dot",typeof a!="boolean"?a.className:"");i=ye.createElement(sf,Mh({key:o},l,{className:d}))}return i}}])})(P.PureComponent);wi(ys,"displayName","Line");wi(ys,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!jl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});wi(ys,"getComposedData",function(e){var t=e.props,r=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,d=e.displayedData,u=e.offset,f=t.layout,m=d.map(function(p,g){var b=qn(p,o);return f==="horizontal"?{x:c3({axis:r,ticks:s,bandSize:l,entry:p,index:g}),y:vr(b)?null:a.scale(b),value:b,payload:p}:{x:vr(b)?null:r.scale(b),y:c3({axis:a,ticks:i,bandSize:l,entry:p,index:g}),value:b,payload:p}});return Cs({points:m,layout:f},u)});function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function coe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function doe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o$(a.key),a)}}function uoe(e,t,r){return t&&doe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hoe(e,t,r){return t=Qp(t),foe(e,s$()?Reflect.construct(t,r||[],Qp(e).constructor):t.apply(e,r))}function foe(e,t){if(t&&(su(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return moe(e)}function moe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s$=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(e)}function poe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JN(e,t)}function JN(e,t){return JN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},JN(e,t)}function i$(e,t,r){return t=o$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o$(e){var t=goe(e,"string");return su(t)=="symbol"?t:t+""}function goe(e,t){if(su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(su(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QN(){return QN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},QN.apply(this,arguments)}function xoe(e){var t=e.xAxisId,r=Ik(),a=Dk(),s=WF(t);return s==null?null:P.createElement(Su,QN({},s,{className:yr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return So(o,!0)}}))}var ca=(function(e){function t(){return coe(this,t),hoe(this,t,arguments)}return poe(t,e),uoe(t,[{key:"render",value:function(){return P.createElement(xoe,this.props)}}])})(P.Component);i$(ca,"displayName","XAxis");i$(ca,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function yoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function voe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d$(a.key),a)}}function boe(e,t,r){return t&&voe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function woe(e,t,r){return t=Zp(t),joe(e,l$()?Reflect.construct(t,r||[],Zp(e).constructor):t.apply(e,r))}function joe(e,t){if(t&&(iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Noe(e)}function Noe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l$=function(){return!!e})()}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zp(e)}function koe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZN(e,t)}function ZN(e,t){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ZN(e,t)}function c$(e,t,r){return t=d$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d$(e){var t=Soe(e,"string");return iu(t)=="symbol"?t:t+""}function Soe(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(iu(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},e2.apply(this,arguments)}var _oe=function(t){var r=t.yAxisId,a=Ik(),s=Dk(),i=KF(r);return i==null?null:P.createElement(Su,e2({},i,{className:yr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return So(l,!0)}}))},Jn=(function(e){function t(){return yoe(this,t),woe(this,t,arguments)}return koe(t,e),boe(t,[{key:"render",value:function(){return P.createElement(_oe,this.props)}}])})(P.Component);c$(Jn,"displayName","YAxis");c$(Jn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function dP(e){return Toe(e)||Aoe(e)||Coe(e)||Eoe()}function Eoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Coe(e,t){if(e){if(typeof e=="string")return t2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t2(e,t)}}function Aoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Toe(e){if(Array.isArray(e))return t2(e)}function t2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var r2=function(t,r,a,s,i){var o=Ls(t,Rk),l=Ls(t,ix),d=[].concat(dP(o),dP(l)),u=Ls(t,lx),f="".concat(s,"Id"),m=s[0],p=r;if(d.length&&(p=d.reduce(function(y,v){if(v.props[f]===a&&Ki(v.props,"extendDomain")&&wt(v.props[m])){var N=v.props[m];return[Math.min(y[0],N),Math.max(y[1],N)]}return y},p)),u.length){var g="".concat(m,"1"),b="".concat(m,"2");p=u.reduce(function(y,v){if(v.props[f]===a&&Ki(v.props,"extendDomain")&&wt(v.props[g])&&wt(v.props[b])){var N=v.props[g],k=v.props[b];return[Math.min(y[0],N,k),Math.max(y[1],N,k)]}return y},p)}return i&&i.length&&(p=i.reduce(function(y,v){return wt(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},p)),p},tj={exports:{}},uP;function Ooe(){return uP||(uP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,m||d,p),b=r?r+u:u;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],g]:d._events[b].push(g):(d._events[b]=g,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new a:delete d._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)t.call(f,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,g=m.length,b=new Array(g);p<g;p++)b[p]=m[p].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,f,m,p,g,b){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],N=arguments.length,k,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),N){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,m),!0;case 4:return v.fn.call(v.context,f,m,p),!0;case 5:return v.fn.call(v.context,f,m,p,g),!0;case 6:return v.fn.call(v.context,f,m,p,g,b),!0}for(w=1,k=new Array(N-1);w<N;w++)k[w-1]=arguments[w];v.fn.apply(v.context,k)}else{var A=v.length,S;for(w=0;w<A;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),N){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,f);break;case 3:v[w].fn.call(v[w].context,f,m);break;case 4:v[w].fn.call(v[w].context,f,m,p);break;default:if(!k)for(S=1,k=new Array(N-1);S<N;S++)k[S-1]=arguments[S];v[w].fn.apply(v[w].context,k)}}return!0},l.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},l.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},l.prototype.removeListener=function(u,f,m,p){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===f&&(!p||b.once)&&(!m||b.context===m)&&o(this,g);else{for(var y=0,v=[],N=b.length;y<N;y++)(b[y].fn!==f||p&&!b[y].once||m&&b[y].context!==m)&&v.push(b[y]);v.length?this._events[g]=v.length===1?v[0]:v:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(tj)),tj.exports}var Poe=Ooe();const Ioe=Gr(Poe);var rj=new Ioe,nj="recharts.syncMouseEvents";function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function Doe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Moe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u$(a.key),a)}}function Roe(e,t,r){return t&&Moe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aj(e,t,r){return t=u$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u$(e){var t=Foe(e,"string");return R0(t)=="symbol"?t:t+""}function Foe(e,t){if(R0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(R0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $oe=(function(){function e(){Doe(this,e),aj(this,"activeIndex",0),aj(this,"coordinateList",[]),aj(this,"layout","horizontal")}return Roe(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,d=r.layout,u=d===void 0?null:d,f=r.offset,m=f===void 0?null:f,p=r.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,d=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((a=window)===null||a===void 0?void 0:a.scrollY)||0,m=i+d+u,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:p})}}}])})();function Loe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&wt(a)&&wt(s))return!0}return!1}function Boe(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function h$(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=zr(t,r,a,s),l=zr(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function Uoe(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,d=t.cy,u=t.innerRadius,f=t.outerRadius,m=t.angle,p=zr(l,d,u,m),g=zr(l,d,f,m);a=p.x,s=p.y,i=g.x,o=g.y}else return h$(t);return[{x:a,y:s},{x:i,y:o}]}function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(a){Hoe(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Hoe(e,t,r){return t=qoe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qoe(e){var t=zoe(e,"string");return F0(t)=="symbol"?t:t+""}function zoe(e,t){if(F0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(F0(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Woe(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,d=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,m=e.layout,p=e.chartName,g=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!g||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,y=Cp;if(p==="ScatterChart")b=o,y=Hre;else if(p==="BarChart")b=Boe(m,o,d,f),y=Ak;else if(m==="radial"){var v=h$(o),N=v.cx,k=v.cy,w=v.radius,A=v.startAngle,S=v.endAngle;b={cx:N,cy:k,startAngle:A,endAngle:S,innerRadius:w,outerRadius:w},y=cF}else b={points:Uoe(m,o,d)},y=Cp;var _=Om(Om(Om(Om({stroke:"#ccc",pointerEvents:"none"},d),b),Kt(g,!1)),{},{payload:l,payloadIndex:u,className:yr("recharts-tooltip-cursor",g.className)});return P.isValidElement(g)?P.cloneElement(g,_):P.createElement(y,_)}var Koe=["item"],Voe=["children","className","width","height","style","compact","title","desc"];function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_d.apply(this,arguments)}function fP(e,t){return Xoe(e)||Yoe(e,t)||m$(e,t)||Goe()}function Goe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yoe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(f){u=!0,s=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Xoe(e){if(Array.isArray(e))return e}function mP(e,t){if(e==null)return{};var r=Joe(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Joe(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Qoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zoe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,p$(a.key),a)}}function ele(e,t,r){return t&&Zoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tle(e,t,r){return t=eg(t),rle(e,f$()?Reflect.construct(t,r||[],eg(e).constructor):t.apply(e,r))}function rle(e,t){if(t&&(ou(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nle(e)}function nle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f$=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eg(e)}function ale(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n2(e,t)}function n2(e,t){return n2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},n2(e,t)}function lu(e){return ole(e)||ile(e)||m$(e)||sle()}function sle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m$(e,t){if(e){if(typeof e=="string")return a2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(e,t)}}function ile(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ole(e){if(Array.isArray(e))return a2(e)}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(a){lr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lr(e,t,r){return t=p$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p$(e){var t=lle(e,"string");return ou(t)=="symbol"?t:t+""}function lle(e,t){if(ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ou(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cle={xAxis:["bottom","top"],yAxis:["left","right"]},dle={width:"100%",height:"100%"},g$={x:0,y:0};function Pm(e){return e}var ule=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hle=function(t,r,a,s){var i=r.find(function(f){return f&&f.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Je(Je(Je({},s),zr(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,u=s.angle;return Je(Je(Je({},s),zr(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return g$},cx=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,d){var u=d.props.data;return u&&u.length?[].concat(lu(l),lu(u)):l},[]);return o.length>0?o:t&&t.length&&wt(s)&&wt(i)?t.slice(s,i+1):[]};function x$(e){return e==="number"?[0,"auto"]:void 0}var s2=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=cx(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(d,u){var f,m=(f=u.props.data)!==null&&f!==void 0?f:r;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;p=Zm(g,o.dataKey,s)}else p=m&&m[a]||l[a];return p?[].concat(lu(d),[tF(u,p)]):d},[])},gP=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=ule(i,a),l=t.orderedTooltipTicks,d=t.tooltipAxis,u=t.tooltipTicks,f=hZ(o,l,u,d);if(f>=0&&u){var m=u[f]&&u[f].value,p=s2(t,r,f,m),g=hle(a,l,f,i);return{activeTooltipIndex:f,activeLabel:m,activePayload:p,activeCoordinate:g}}return null},fle=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=t.stackOffset,g=YR(f,i);return a.reduce(function(b,y){var v,N=y.type.defaultProps!==void 0?Je(Je({},y.type.defaultProps),y.props):y.props,k=N.type,w=N.dataKey,A=N.allowDataOverflow,S=N.allowDuplicatedCategory,_=N.scale,E=N.ticks,C=N.includeHidden,I=N[o];if(b[I])return b;var B=cx(t.data,{graphicalItems:s.filter(function(D){var Y,V=o in D.props?D.props[o]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[o];return V===I}),dataStartIndex:d,dataEndIndex:u}),M=B.length,O,U,ie;Loe(N.domain,A,k)&&(O=yN(N.domain,null,A),g&&(k==="number"||_!=="auto")&&(ie=Oh(B,w,"category")));var X=x$(k);if(!O||O.length===0){var re,oe=(re=N.domain)!==null&&re!==void 0?re:X;if(w){if(O=Oh(B,w,k),k==="category"&&g){var Q=sW(O);S&&Q?(U=O,O=Up(0,M)):S||(O=f3(oe,O,y).reduce(function(D,Y){return D.indexOf(Y)>=0?D:[].concat(lu(D),[Y])},[]))}else if(k==="category")S?O=O.filter(function(D){return D!==""&&!vr(D)}):O=f3(oe,O,y).reduce(function(D,Y){return D.indexOf(Y)>=0||Y===""||vr(Y)?D:[].concat(lu(D),[Y])},[]);else if(k==="number"){var F=xZ(B,s.filter(function(D){var Y,V,ee=o in D.props?D.props[o]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[o],ge="hide"in D.props?D.props.hide:(V=D.type.defaultProps)===null||V===void 0?void 0:V.hide;return ee===I&&(C||!ge)}),w,i,f);F&&(O=F)}g&&(k==="number"||_!=="auto")&&(ie=Oh(B,w,"category"))}else g?O=Up(0,M):l&&l[I]&&l[I].hasStack&&k==="number"?O=p==="expand"?[0,1]:eF(l[I].stackGroups,d,u):O=GR(B,s.filter(function(D){var Y=o in D.props?D.props[o]:D.type.defaultProps[o],V="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return Y===I&&(C||!V)}),k,f,!0);if(k==="number")O=r2(m,O,I,i,E),oe&&(O=yN(oe,O,A));else if(k==="category"&&oe){var J=oe,L=O.every(function(D){return J.indexOf(D)>=0});L&&(O=J)}}return Je(Je({},b),{},lr({},I,Je(Je({},N),{},{axisType:i,domain:O,categoricalDomain:ie,duplicateDomain:U,originalDomain:(v=N.domain)!==null&&v!==void 0?v:X,isCategorical:g,layout:f})))},{})},mle=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,m=t.children,p=cx(t.data,{graphicalItems:a,dataStartIndex:d,dataEndIndex:u}),g=p.length,b=YR(f,i),y=-1;return a.reduce(function(v,N){var k=N.type.defaultProps!==void 0?Je(Je({},N.type.defaultProps),N.props):N.props,w=k[o],A=x$("number");if(!v[w]){y++;var S;return b?S=Up(0,g):l&&l[w]&&l[w].hasStack?(S=eF(l[w].stackGroups,d,u),S=r2(m,S,w,i)):(S=yN(A,GR(p,a.filter(function(_){var E,C,I=o in _.props?_.props[o]:(E=_.type.defaultProps)===null||E===void 0?void 0:E[o],B="hide"in _.props?_.props.hide:(C=_.type.defaultProps)===null||C===void 0?void 0:C.hide;return I===w&&!B}),"number",f),s.defaultProps.allowDataOverflow),S=r2(m,S,w,i)),Je(Je({},v),{},lr({},w,Je(Je({axisType:i},s.defaultProps),{},{hide:!0,orientation:$s(cle,"".concat(i,".").concat(y%2),null),domain:S,originalDomain:A,isCategorical:b,layout:f})))}return v},{})},ple=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,u=r.dataEndIndex,f=t.children,m="".concat(s,"Id"),p=Ls(f,i),g={};return p&&p.length?g=fle(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u}):o&&o.length&&(g=mle(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:u})),g},gle=function(t){var r=ol(t),a=So(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:rk(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Sp(r,a)}},xP=function(t){var r=t.children,a=t.defaultShowTooltip,s=Ts(r,Qd),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},xle=function(t){return!t||!t.length?!1:t.some(function(r){var a=Co(r&&r.type);return a&&a.indexOf("Bar")>=0})},yP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},yle=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,d=l===void 0?{}:l,u=a.width,f=a.height,m=a.children,p=a.margin||{},g=Ts(m,Qd),b=Ts(m,Ga),y=Object.keys(d).reduce(function(S,_){var E=d[_],C=E.orientation;return!E.mirror&&!E.hide?Je(Je({},S),{},lr({},C,S[C]+E.width)):S},{left:p.left||0,right:p.right||0}),v=Object.keys(o).reduce(function(S,_){var E=o[_],C=E.orientation;return!E.mirror&&!E.hide?Je(Je({},S),{},lr({},C,$s(S,"".concat(C))+E.height)):S},{top:p.top||0,bottom:p.bottom||0}),N=Je(Je({},v),y),k=N.bottom;g&&(N.bottom+=g.props.height||Qd.defaultProps.height),b&&r&&(N=pZ(N,s,a,r));var w=u-N.left-N.right,A=f-N.top-N.bottom;return Je(Je({brushBottom:k},N),{},{width:Math.max(w,0),height:Math.max(A,0)})},vle=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},dx=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,m=t.defaultProps,p=function(N,k){var w=k.graphicalItems,A=k.stackGroups,S=k.offset,_=k.updateId,E=k.dataStartIndex,C=k.dataEndIndex,I=N.barSize,B=N.layout,M=N.barGap,O=N.barCategoryGap,U=N.maxBarSize,ie=yP(B),X=ie.numericAxisName,re=ie.cateAxisName,oe=xle(w),Q=[];return w.forEach(function(F,J){var L=cx(N.data,{graphicalItems:[F],dataStartIndex:E,dataEndIndex:C}),D=F.type.defaultProps!==void 0?Je(Je({},F.type.defaultProps),F.props):F.props,Y=D.dataKey,V=D.maxBarSize,ee=D["".concat(X,"Id")],ge=D["".concat(re,"Id")],ke={},Ce=d.reduce(function(pt,Vt){var hr=k["".concat(Vt.axisType,"Map")],Jt=D["".concat(Vt.axisType,"Id")];hr&&hr[Jt]||Vt.axisType==="zAxis"||yc();var Dr=hr[Jt];return Je(Je({},pt),{},lr(lr({},Vt.axisType,Dr),"".concat(Vt.axisType,"Ticks"),So(Dr)))},ke),ce=Ce[re],me=Ce["".concat(re,"Ticks")],Oe=A&&A[ee]&&A[ee].hasStack&&_Z(F,A[ee].stackGroups),G=Co(F.type).indexOf("Bar")>=0,ze=Sp(ce,me),Ye=[],ct=oe&&fZ({barSize:I,stackGroups:A,totalSize:vle(Ce,re)});if(G){var We,Pe,Ne=vr(V)?U:V,tt=(We=(Pe=Sp(ce,me,!0))!==null&&Pe!==void 0?Pe:Ne)!==null&&We!==void 0?We:0;Ye=mZ({barGap:M,barCategoryGap:O,bandSize:tt!==ze?tt:ze,sizeList:ct[ge],maxBarSize:Ne}),tt!==ze&&(Ye=Ye.map(function(pt){return Je(Je({},pt),{},{position:Je(Je({},pt.position),{},{offset:pt.position.offset-tt/2})})}))}var He=F&&F.type&&F.type.getComposedData;He&&Q.push({props:Je(Je({},He(Je(Je({},Ce),{},{displayedData:L,props:N,dataKey:Y,item:F,bandSize:ze,barPosition:Ye,offset:S,stackedData:Oe,layout:B,dataStartIndex:E,dataEndIndex:C}))),{},lr(lr(lr({key:F.key||"item-".concat(J)},X,Ce[X]),re,Ce[re]),"animationId",_)),childIndex:yW(F,N.children),item:F})}),Q},g=function(N,k){var w=N.props,A=N.dataStartIndex,S=N.dataEndIndex,_=N.updateId;if(!EA({props:w}))return null;var E=w.children,C=w.layout,I=w.stackOffset,B=w.data,M=w.reverseStackOrder,O=yP(C),U=O.numericAxisName,ie=O.cateAxisName,X=Ls(E,a),re=kZ(B,X,"".concat(U,"Id"),"".concat(ie,"Id"),I,M),oe=d.reduce(function(D,Y){var V="".concat(Y.axisType,"Map");return Je(Je({},D),{},lr({},V,ple(w,Je(Je({},Y),{},{graphicalItems:X,stackGroups:Y.axisType===U&&re,dataStartIndex:A,dataEndIndex:S}))))},{}),Q=yle(Je(Je({},oe),{},{props:w,graphicalItems:X}),k?.legendBBox);Object.keys(oe).forEach(function(D){oe[D]=f(w,oe[D],Q,D.replace("Map",""),r)});var F=oe["".concat(ie,"Map")],J=gle(F),L=p(w,Je(Je({},oe),{},{dataStartIndex:A,dataEndIndex:S,updateId:_,graphicalItems:X,stackGroups:re,offset:Q}));return Je(Je({formattedGraphicalItems:L,graphicalItems:X,offset:Q,stackGroups:re},J),oe)},b=(function(v){function N(k){var w,A,S;return Qoe(this,N),S=tle(this,N,[k]),lr(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),lr(S,"accessibilityManager",new $oe),lr(S,"handleLegendBBoxUpdate",function(_){if(_){var E=S.state,C=E.dataStartIndex,I=E.dataEndIndex,B=E.updateId;S.setState(Je({legendBBox:_},g({props:S.props,dataStartIndex:C,dataEndIndex:I,updateId:B},Je(Je({},S.state),{},{legendBBox:_}))))}}),lr(S,"handleReceiveSyncEvent",function(_,E,C){if(S.props.syncId===_){if(C===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(E)}}),lr(S,"handleBrushChange",function(_){var E=_.startIndex,C=_.endIndex;if(E!==S.state.dataStartIndex||C!==S.state.dataEndIndex){var I=S.state.updateId;S.setState(function(){return Je({dataStartIndex:E,dataEndIndex:C},g({props:S.props,dataStartIndex:E,dataEndIndex:C,updateId:I},S.state))}),S.triggerSyncEvent({dataStartIndex:E,dataEndIndex:C})}}),lr(S,"handleMouseEnter",function(_){var E=S.getMouseInfo(_);if(E){var C=Je(Je({},E),{},{isTooltipActive:!0});S.setState(C),S.triggerSyncEvent(C);var I=S.props.onMouseEnter;ir(I)&&I(C,_)}}),lr(S,"triggeredAfterMouseMove",function(_){var E=S.getMouseInfo(_),C=E?Je(Je({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(C),S.triggerSyncEvent(C);var I=S.props.onMouseMove;ir(I)&&I(C,_)}),lr(S,"handleItemMouseEnter",function(_){S.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),lr(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),lr(S,"handleMouseMove",function(_){_.persist(),S.throttleTriggeredAfterMouseMove(_)}),lr(S,"handleMouseLeave",function(_){S.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};S.setState(E),S.triggerSyncEvent(E);var C=S.props.onMouseLeave;ir(C)&&C(E,_)}),lr(S,"handleOuterEvent",function(_){var E=xW(_),C=$s(S.props,"".concat(E));if(E&&ir(C)){var I,B;/.*touch.*/i.test(E)?B=S.getMouseInfo(_.changedTouches[0]):B=S.getMouseInfo(_),C((I=B)!==null&&I!==void 0?I:{},_)}}),lr(S,"handleClick",function(_){var E=S.getMouseInfo(_);if(E){var C=Je(Je({},E),{},{isTooltipActive:!0});S.setState(C),S.triggerSyncEvent(C);var I=S.props.onClick;ir(I)&&I(C,_)}}),lr(S,"handleMouseDown",function(_){var E=S.props.onMouseDown;if(ir(E)){var C=S.getMouseInfo(_);E(C,_)}}),lr(S,"handleMouseUp",function(_){var E=S.props.onMouseUp;if(ir(E)){var C=S.getMouseInfo(_);E(C,_)}}),lr(S,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),lr(S,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseDown(_.changedTouches[0])}),lr(S,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&S.handleMouseUp(_.changedTouches[0])}),lr(S,"handleDoubleClick",function(_){var E=S.props.onDoubleClick;if(ir(E)){var C=S.getMouseInfo(_);E(C,_)}}),lr(S,"handleContextMenu",function(_){var E=S.props.onContextMenu;if(ir(E)){var C=S.getMouseInfo(_);E(C,_)}}),lr(S,"triggerSyncEvent",function(_){S.props.syncId!==void 0&&rj.emit(nj,S.props.syncId,_,S.eventEmitterSymbol)}),lr(S,"applySyncEvent",function(_){var E=S.props,C=E.layout,I=E.syncMethod,B=S.state.updateId,M=_.dataStartIndex,O=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)S.setState(Je({dataStartIndex:M,dataEndIndex:O},g({props:S.props,dataStartIndex:M,dataEndIndex:O,updateId:B},S.state)));else if(_.activeTooltipIndex!==void 0){var U=_.chartX,ie=_.chartY,X=_.activeTooltipIndex,re=S.state,oe=re.offset,Q=re.tooltipTicks;if(!oe)return;if(typeof I=="function")X=I(Q,_);else if(I==="value"){X=-1;for(var F=0;F<Q.length;F++)if(Q[F].value===_.activeLabel){X=F;break}}var J=Je(Je({},oe),{},{x:oe.left,y:oe.top}),L=Math.min(U,J.x+J.width),D=Math.min(ie,J.y+J.height),Y=Q[X]&&Q[X].value,V=s2(S.state,S.props.data,X),ee=Q[X]?{x:C==="horizontal"?Q[X].coordinate:L,y:C==="horizontal"?D:Q[X].coordinate}:g$;S.setState(Je(Je({},_),{},{activeLabel:Y,activeCoordinate:ee,activePayload:V,activeTooltipIndex:X}))}else S.setState(_)}),lr(S,"renderCursor",function(_){var E,C=S.state,I=C.isTooltipActive,B=C.activeCoordinate,M=C.activePayload,O=C.offset,U=C.activeTooltipIndex,ie=C.tooltipAxisBandSize,X=S.getTooltipEventType(),re=(E=_.props.active)!==null&&E!==void 0?E:I,oe=S.props.layout,Q=_.key||"_recharts-cursor";return ye.createElement(Woe,{key:Q,activeCoordinate:B,activePayload:M,activeTooltipIndex:U,chartName:r,element:_,isActive:re,layout:oe,offset:O,tooltipAxisBandSize:ie,tooltipEventType:X})}),lr(S,"renderPolarAxis",function(_,E,C){var I=$s(_,"type.axisType"),B=$s(S.state,"".concat(I,"Map")),M=_.type.defaultProps,O=M!==void 0?Je(Je({},M),_.props):_.props,U=B&&B[O["".concat(I,"Id")]];return P.cloneElement(_,Je(Je({},U),{},{className:yr(I,U.className),key:_.key||"".concat(E,"-").concat(C),ticks:So(U,!0)}))}),lr(S,"renderPolarGrid",function(_){var E=_.props,C=E.radialLines,I=E.polarAngles,B=E.polarRadius,M=S.state,O=M.radiusAxisMap,U=M.angleAxisMap,ie=ol(O),X=ol(U),re=X.cx,oe=X.cy,Q=X.innerRadius,F=X.outerRadius;return P.cloneElement(_,{polarAngles:Array.isArray(I)?I:So(X,!0).map(function(J){return J.coordinate}),polarRadius:Array.isArray(B)?B:So(ie,!0).map(function(J){return J.coordinate}),cx:re,cy:oe,innerRadius:Q,outerRadius:F,key:_.key||"polar-grid",radialLines:C})}),lr(S,"renderLegend",function(){var _=S.state.formattedGraphicalItems,E=S.props,C=E.children,I=E.width,B=E.height,M=S.props.margin||{},O=I-(M.left||0)-(M.right||0),U=KR({children:C,formattedGraphicalItems:_,legendWidth:O,legendContent:u});if(!U)return null;var ie=U.item,X=mP(U,Koe);return P.cloneElement(ie,Je(Je({},X),{},{chartWidth:I,chartHeight:B,margin:M,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),lr(S,"renderTooltip",function(){var _,E=S.props,C=E.children,I=E.accessibilityLayer,B=Ts(C,mn);if(!B)return null;var M=S.state,O=M.isTooltipActive,U=M.activeCoordinate,ie=M.activePayload,X=M.activeLabel,re=M.offset,oe=(_=B.props.active)!==null&&_!==void 0?_:O;return P.cloneElement(B,{viewBox:Je(Je({},re),{},{x:re.left,y:re.top}),active:oe,label:X,payload:oe?ie:[],coordinate:U,accessibilityLayer:I})}),lr(S,"renderBrush",function(_){var E=S.props,C=E.margin,I=E.data,B=S.state,M=B.offset,O=B.dataStartIndex,U=B.dataEndIndex,ie=B.updateId;return P.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Em(S.handleBrushChange,_.props.onChange),data:I,x:wt(_.props.x)?_.props.x:M.left,y:wt(_.props.y)?_.props.y:M.top+M.height+M.brushBottom-(C.bottom||0),width:wt(_.props.width)?_.props.width:M.width,startIndex:O,endIndex:U,updateId:"brush-".concat(ie)})}),lr(S,"renderReferenceElement",function(_,E,C){if(!_)return null;var I=S,B=I.clipPathId,M=S.state,O=M.xAxisMap,U=M.yAxisMap,ie=M.offset,X=_.type.defaultProps||{},re=_.props,oe=re.xAxisId,Q=oe===void 0?X.xAxisId:oe,F=re.yAxisId,J=F===void 0?X.yAxisId:F;return P.cloneElement(_,{key:_.key||"".concat(E,"-").concat(C),xAxis:O[Q],yAxis:U[J],viewBox:{x:ie.left,y:ie.top,width:ie.width,height:ie.height},clipPathId:B})}),lr(S,"renderActivePoints",function(_){var E=_.item,C=_.activePoint,I=_.basePoint,B=_.childIndex,M=_.isRange,O=[],U=E.props.key,ie=E.item.type.defaultProps!==void 0?Je(Je({},E.item.type.defaultProps),E.item.props):E.item.props,X=ie.activeDot,re=ie.dataKey,oe=Je(Je({index:B,dataKey:re,cx:C.x,cy:C.y,r:4,fill:Ck(E.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Kt(X,!1)),ep(X));return O.push(N.renderActiveDot(X,oe,"".concat(U,"-activePoint-").concat(B))),I?O.push(N.renderActiveDot(X,Je(Je({},oe),{},{cx:I.x,cy:I.y}),"".concat(U,"-basePoint-").concat(B))):M&&O.push(null),O}),lr(S,"renderGraphicChild",function(_,E,C){var I=S.filterFormatItem(_,E,C);if(!I)return null;var B=S.getTooltipEventType(),M=S.state,O=M.isTooltipActive,U=M.tooltipAxis,ie=M.activeTooltipIndex,X=M.activeLabel,re=S.props.children,oe=Ts(re,mn),Q=I.props,F=Q.points,J=Q.isRange,L=Q.baseLine,D=I.item.type.defaultProps!==void 0?Je(Je({},I.item.type.defaultProps),I.item.props):I.item.props,Y=D.activeDot,V=D.hide,ee=D.activeBar,ge=D.activeShape,ke=!!(!V&&O&&oe&&(Y||ee||ge)),Ce={};B!=="axis"&&oe&&oe.props.trigger==="click"?Ce={onClick:Em(S.handleItemMouseEnter,_.props.onClick)}:B!=="axis"&&(Ce={onMouseLeave:Em(S.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Em(S.handleItemMouseEnter,_.props.onMouseEnter)});var ce=P.cloneElement(_,Je(Je({},I.props),Ce));function me(Vt){return typeof U.dataKey=="function"?U.dataKey(Vt.payload):null}if(ke)if(ie>=0){var Oe,G;if(U.dataKey&&!U.allowDuplicatedCategory){var ze=typeof U.dataKey=="function"?me:"payload.".concat(U.dataKey.toString());Oe=Zm(F,ze,X),G=J&&L&&Zm(L,ze,X)}else Oe=F?.[ie],G=J&&L&&L[ie];if(ge||ee){var Ye=_.props.activeIndex!==void 0?_.props.activeIndex:ie;return[P.cloneElement(_,Je(Je(Je({},I.props),Ce),{},{activeIndex:Ye})),null,null]}if(!vr(Oe))return[ce].concat(lu(S.renderActivePoints({item:I,activePoint:Oe,basePoint:G,childIndex:ie,isRange:J})))}else{var ct,We=(ct=S.getItemByXY(S.state.activeCoordinate))!==null&&ct!==void 0?ct:{graphicalItem:ce},Pe=We.graphicalItem,Ne=Pe.item,tt=Ne===void 0?_:Ne,He=Pe.childIndex,pt=Je(Je(Je({},I.props),Ce),{},{activeIndex:He});return[P.cloneElement(tt,pt),null,null]}return J?[ce,null,null]:[ce,null]}),lr(S,"renderCustomized",function(_,E,C){return P.cloneElement(_,Je(Je({key:"recharts-customized-".concat(C)},S.props),S.state))}),lr(S,"renderMap",{CartesianGrid:{handler:Pm,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Pm},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Pm},YAxis:{handler:Pm},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=k.id)!==null&&w!==void 0?w:xu("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=KM(S.triggeredAfterMouseMove,(A=k.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return ale(N,v),ele(N,[{key:"componentDidMount",value:function(){var w,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,A=w.children,S=w.data,_=w.height,E=w.layout,C=Ts(A,mn);if(C){var I=C.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,M=s2(this.state,S,I,B),O=this.state.tooltipTicks[I].coordinate,U=(this.state.offset.top+_)/2,ie=E==="horizontal",X=ie?{x:O,y:U}:{y:O,x:U},re=this.state.formattedGraphicalItems.find(function(Q){var F=Q.item;return F.type.name==="Scatter"});re&&(X=Je(Je({},X),re.props.points[I].tooltipPosition),M=re.props.points[I].tooltipPayload);var oe={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:B,activePayload:M,activeCoordinate:X};this.setState(oe),this.renderCursor(C),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,_;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){Bj([Ts(w.children,mn)],[Ts(this.props.children,mn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ts(this.props.children,mn);if(w&&typeof w.props.shared=="boolean"){var A=w.props.shared?"axis":"item";return l.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),_=aY(S),E={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},C=S.width/A.offsetWidth||1,I=this.inRange(E.chartX,E.chartY,C);if(!I)return null;var B=this.state,M=B.xAxisMap,O=B.yAxisMap,U=this.getTooltipEventType(),ie=gP(this.state,this.props.data,this.props.layout,I);if(U!=="axis"&&M&&O){var X=ol(M).scale,re=ol(O).scale,oe=X&&X.invert?X.invert(E.chartX):null,Q=re&&re.invert?re.invert(E.chartY):null;return Je(Je({},E),{},{xValue:oe,yValue:Q},ie)}return ie?Je(Je({},E),ie):null}},{key:"inRange",value:function(w,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,E=w/S,C=A/S;if(_==="horizontal"||_==="vertical"){var I=this.state.offset,B=E>=I.left&&E<=I.left+I.width&&C>=I.top&&C<=I.top+I.height;return B?{x:E,y:C}:null}var M=this.state,O=M.angleAxisMap,U=M.radiusAxisMap;if(O&&U){var ie=ol(O);return g3({x:E,y:C},ie)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,A=this.getTooltipEventType(),S=Ts(w,mn),_={};S&&A==="axis"&&(S.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=ep(this.props,this.handleOuterEvent);return Je(Je({},E),_)}},{key:"addListener",value:function(){rj.on(nj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){rj.removeListener(nj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,A,S){for(var _=this.state.formattedGraphicalItems,E=0,C=_.length;E<C;E++){var I=_[E];if(I.item===w||I.props.key===w.key||A===Co(I.item.type)&&S===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,A=this.state.offset,S=A.left,_=A.top,E=A.height,C=A.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:w},ye.createElement("rect",{x:S,y:_,height:E,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(A,S){var _=fP(S,2),E=_[0],C=_[1];return Je(Je({},A),{},lr({},E,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(A,S){var _=fP(S,2),E=_[0],C=_[1];return Je(Je({},A),{},lr({},E,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(w){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(w){var A=this.state,S=A.formattedGraphicalItems,_=A.activeItem;if(S&&S.length)for(var E=0,C=S.length;E<C;E++){var I=S[E],B=I.props,M=I.item,O=M.type.defaultProps!==void 0?Je(Je({},M.type.defaultProps),M.props):M.props,U=Co(M.type);if(U==="Bar"){var ie=(B.data||[]).find(function(Q){return Nre(w,Q)});if(ie)return{graphicalItem:I,payload:ie}}else if(U==="RadialBar"){var X=(B.data||[]).find(function(Q){return g3(w,Q)});if(X)return{graphicalItem:I,payload:X}}else if(rx(I,_)||nx(I,_)||O0(I,_)){var re=rae({graphicalItem:I,activeTooltipItem:_,itemData:O.data}),oe=O.activeIndex===void 0?re:O.activeIndex;return{graphicalItem:Je(Je({},I),{},{childIndex:oe}),payload:O0(I,_)?O.data[re]:I.props.data[re]}}}return null}},{key:"render",value:function(){var w=this;if(!EA(this))return null;var A=this.props,S=A.children,_=A.className,E=A.width,C=A.height,I=A.style,B=A.compact,M=A.title,O=A.desc,U=mP(A,Voe),ie=Kt(U,!1);if(B)return ye.createElement(G6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(Hj,_d({},ie,{width:E,height:C,title:M,desc:O}),this.renderClipPath(),AA(S,this.renderMap)));if(this.props.accessibilityLayer){var X,re;ie.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,ie.role=(re=this.props.role)!==null&&re!==void 0?re:"application",ie.onKeyDown=function(Q){w.accessibilityManager.keyboardEvent(Q)},ie.onFocus=function(){w.accessibilityManager.focus()}}var oe=this.parseEventsOfWrapper();return ye.createElement(G6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",_d({className:yr("recharts-wrapper",_),style:Je({position:"relative",cursor:"default",width:E,height:C},I)},oe,{ref:function(F){w.container=F}}),ye.createElement(Hj,_d({},ie,{width:E,height:C,title:M,desc:O,style:dle}),this.renderClipPath(),AA(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(P.Component);lr(b,"displayName",r),lr(b,"defaultProps",Je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),lr(b,"getDerivedStateFromProps",function(v,N){var k=v.dataKey,w=v.data,A=v.children,S=v.width,_=v.height,E=v.layout,C=v.stackOffset,I=v.margin,B=N.dataStartIndex,M=N.dataEndIndex;if(N.updateId===void 0){var O=xP(v);return Je(Je(Je({},O),{},{updateId:0},g(Je(Je({props:v},O),{},{updateId:0}),N)),{},{prevDataKey:k,prevData:w,prevWidth:S,prevHeight:_,prevLayout:E,prevStackOffset:C,prevMargin:I,prevChildren:A})}if(k!==N.prevDataKey||w!==N.prevData||S!==N.prevWidth||_!==N.prevHeight||E!==N.prevLayout||C!==N.prevStackOffset||!Td(I,N.prevMargin)){var U=xP(v),ie={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},X=Je(Je({},gP(N,w,E)),{},{updateId:N.updateId+1}),re=Je(Je(Je({},U),ie),X);return Je(Je(Je({},re),g(Je({props:v},re),N)),{},{prevDataKey:k,prevData:w,prevWidth:S,prevHeight:_,prevLayout:E,prevStackOffset:C,prevMargin:I,prevChildren:A})}if(!Bj(A,N.prevChildren)){var oe,Q,F,J,L=Ts(A,Qd),D=L&&(oe=(Q=L.props)===null||Q===void 0?void 0:Q.startIndex)!==null&&oe!==void 0?oe:B,Y=L&&(F=(J=L.props)===null||J===void 0?void 0:J.endIndex)!==null&&F!==void 0?F:M,V=D!==B||Y!==M,ee=!vr(w),ge=ee&&!V?N.updateId:N.updateId+1;return Je(Je({updateId:ge},g(Je(Je({props:v},N),{},{updateId:ge,dataStartIndex:D,dataEndIndex:Y}),N)),{},{prevChildren:A,dataStartIndex:D,dataEndIndex:Y})}return null}),lr(b,"renderActiveDot",function(v,N,k){var w;return P.isValidElement(v)?w=P.cloneElement(v,N):ir(v)?w=v(N):w=ye.createElement(sf,N),ye.createElement(Ir,{className:"recharts-active-dot",key:k},w)});var y=P.forwardRef(function(N,k){return ye.createElement(b,_d({},N,{ref:k}))});return y.displayName=b.displayName,y},Ed=dx({chartName:"LineChart",GraphicalChild:ys,axisComponents:[{axisType:"xAxis",AxisComp:ca},{axisType:"yAxis",AxisComp:Jn}],formatAxisMap:FF}),vo=dx({chartName:"BarChart",GraphicalChild:sn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ca},{axisType:"yAxis",AxisComp:Jn}],formatAxisMap:FF}),y$=dx({chartName:"PieChart",GraphicalChild:Zi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ku},{axisType:"radiusAxis",AxisComp:Nu}],formatAxisMap:aF,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),ble=dx({chartName:"RadarChart",GraphicalChild:lc,axisComponents:[{axisType:"angleAxis",AxisComp:ku},{axisType:"radiusAxis",AxisComp:Nu}],formatAxisMap:aF,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const vP=["#3b82f6","#f59e0b","#10b981","#ef4444","#8b5cf6","#ec4899"];function wle({context:e}){const t=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,inventory:u.inventory+d.totalCost})}),e.overheads.forEach(d=>{const u=l.get(d.date)||{inventory:0,overhead:0};l.set(d.date,{...u,overhead:u.overhead+d.amount})}),Array.from(l.entries()).map(([d,u])=>({date:qa(d),fullDate:d,inventory:u.inventory,overhead:u.overhead,total:u.inventory+u.overhead})).sort((d,u)=>d.fullDate.localeCompare(u.fullDate))},[e.inventory,e.overheads]),r=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.totalCost)}),e.overheads.forEach(d=>{const u=l.get(d.category)||0;l.set(d.category,u+d.amount)}),Array.from(l.entries()).map(([d,u])=>({name:mg[d]||w2[d]||d,value:u})).sort((d,u)=>u.value-d.value)},[e.inventory,e.overheads]),a=P.useMemo(()=>{const l=new Map;return e.inventory.forEach(d=>{const u=l.get(d.itemName)||0;l.set(d.itemName,u+d.totalCost)}),Array.from(l.entries()).map(([d,u])=>({name:d,value:u})).sort((d,u)=>u.value-d.value).slice(0,10)},[e.inventory]),s=e.inventory.reduce((l,d)=>l+d.totalCost,0),i=e.overheads.reduce((l,d)=>l+d.amount,0),o=s+i;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-gray-900",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive view of spending patterns and trends"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(gd,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Inventory Spend"})]}),n.jsxs("p",{className:"text-2xl",children:["",s.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(cB,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Overhead Spend"})]}),n.jsxs("p",{className:"text-2xl",children:["",i.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pn,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm opacity-90",children:"Total Expenses"})]}),n.jsxs("p",{className:"text-2xl",children:["",o.toLocaleString()]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Daily Spending Trends"}),n.jsx(ya,{width:"100%",height:300,children:n.jsxs(Ed,{data:t,children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{dataKey:"date"}),n.jsx(Jn,{}),n.jsx(mn,{formatter:l=>`${l.toLocaleString()}`}),n.jsx(Ga,{}),n.jsx(ys,{type:"monotone",dataKey:"inventory",stroke:"#3b82f6",name:"Inventory",strokeWidth:2}),n.jsx(ys,{type:"monotone",dataKey:"overhead",stroke:"#f59e0b",name:"Overhead",strokeWidth:2}),n.jsx(ys,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",name:"Total",strokeWidth:2})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Spending by Category"}),n.jsx(ya,{width:"100%",height:300,children:n.jsxs(y$,{children:[n.jsx(Zi,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:d})=>`${l} (${(d*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,d)=>n.jsx(Ud,{fill:vP[d%vP.length]},`cell-${d}`))}),n.jsx(mn,{formatter:l=>`${l.toLocaleString()}`})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-gray-900 mb-6",children:"Top Inventory Items"}),n.jsx(ya,{width:"100%",height:300,children:n.jsxs(vo,{data:a,layout:"vertical",children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{type:"number"}),n.jsx(Jn,{dataKey:"name",type:"category",width:100}),n.jsx(mn,{formatter:l=>`${l.toLocaleString()}`}),n.jsx(sn,{dataKey:"value",fill:"#3b82f6"})]})})]})]})]})}function jle({context:e,selectedStoreId:t,selectedDate:r,systemBalance:a,onClose:s,onSaveSuccess:i}){const[o,l]=P.useState(""),[d,u]=P.useState(""),[f,m]=P.useState("none"),[p,g]=P.useState(""),[b,y]=P.useState(!0),[v,N]=P.useState(!1),[k,w]=P.useState(null),[A,S]=P.useState(null),[_,E]=P.useState(!1),[C,I]=P.useState(""),B=t||e.user?.storeId,O=e.stores?.find(J=>J.id===B)?.name||"Unknown Store",U=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),ie=new Date().toISOString().slice(0,7),X=Bn(),re=C||r||X;P.useEffect(()=>{oe()},[]);async function oe(){try{if(y(!0),!B||!e.user?.accessToken)return;const L=(await D2(e.user.accessToken,B))?.recalibration||null;L&&L.month===ie&&(w(L),l(L.actualBalance.toString()),u(L.notes||""),m(L.discrepancyType||"none"),g(L.loanAmount?.toString()||""))}catch(J){console.error("Error fetching last recalibration:",J)}finally{y(!1)}}const Q=async J=>{if(J.preventDefault(),!e.user?.accessToken||!B){S("Missing authentication or store information");return}const L=parseFloat(o);if(isNaN(L)){S("Please enter a valid actual balance");return}try{N(!0),S(null);const D={storeId:B,storeName:O,month:ie,date:re,systemBalance:a,actualBalance:L,difference:L-a,notes:d,createdBy:e.user.email,approvalStatus:"approved",discrepancyType:f,loanAmount:f==="loan"?parseFloat(p):null};await P5(e.user.accessToken,D),E(!0),setTimeout(()=>{i&&i(),s()},1500)}catch(D){console.error("Error submitting recalibration:",D),S(D.message||"Failed to submit recalibration")}finally{N(!1)}};if(b)return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-xl p-8",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),n.jsx("p",{className:"text-gray-700",children:"Loading recalibration data..."})]})})});const F=o?parseFloat(o)-a:0;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:s,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:J=>J.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(xh,{className:"w-6 h-6"}),"Online Cash Recalibration"]}),n.jsxs("p",{className:"text-purple-100 mt-1",children:[O," - ",U]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Qn,{className:"w-6 h-6"})})]})}),_&&n.jsxs("div",{className:"m-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg flex items-center gap-3",children:[n.jsx(or,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-green-900",children:"Recalibration Saved Successfully!"}),n.jsx("p",{className:"text-sm text-green-700",children:"Your online cash balance has been updated."})]})]}),A&&n.jsxs("div",{className:"m-6 p-4 bg-red-50 border-2 border-red-200 rounded-lg flex items-center gap-3",children:[n.jsx(ja,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),n.jsx("p",{className:"text-red-900",children:A})]}),k&&n.jsx("div",{className:"m-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"Last Recalibration:"})," ",Ag(k.createdAt),n.jsx("br",{}),n.jsx("strong",{children:"Date:"})," ",new Date(k.date).toLocaleDateString("en-IN"),n.jsx("br",{}),"System Balance: ",k.systemBalance.toLocaleString()," | Actual Balance: ",k.actualBalance.toLocaleString()," | Difference: ",n.jsxs("span",{className:k.difference>=0?"text-green-700":"text-red-700",children:[k.difference>=0?"+":"","",k.difference.toLocaleString()]})]})}),n.jsx("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to delete this recalibration? This will recalculate the balance from the beginning of time."))try{await I5(e.user.accessToken,k.id),alert("Recalibration deleted successfully! The page will reload."),i&&i(),s()}catch(J){alert("Failed to delete recalibration: "+J.message)}},className:"px-3 py-1.5 bg-red-500 text-white text-xs font-medium rounded hover:bg-red-600 transition-colors whitespace-nowrap",children:"Delete"})]})}),n.jsxs("form",{onSubmit:Q,className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border-2 border-purple-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pn,{className:"w-5 h-5 text-purple-600"}),n.jsx("label",{className:"text-sm font-semibold text-purple-900 uppercase tracking-wide",children:"System Calculated Balance"})]}),n.jsxs("p",{className:"text-4xl font-bold text-purple-900",children:["",a.toLocaleString()]}),n.jsx("p",{className:"text-xs text-purple-700 mt-2",children:"This is the balance calculated from all your Paytm receipts, online sales, expenses, and commissions up to today."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Actual Balance (Verified) *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),n.jsx("input",{type:"number",step:"0.01",value:o,onChange:J=>l(J.target.value),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg",placeholder:"Enter actual balance from Paytm app",required:!0})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Check your actual Paytm/online wallet balance and enter it here"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Recalibration Date *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Or,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),n.jsx("input",{type:"date",value:C||X,onChange:J=>I(J.target.value),max:X,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg",required:!0})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Select the date for this recalibration (defaults to today)"})]}),o&&n.jsxs("div",{className:`p-4 rounded-lg border-2 ${F>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsx("p",{className:"text-sm font-semibold mb-1",children:"Difference (Actual - System):"}),n.jsxs("p",{className:`text-3xl font-bold ${F>=0?"text-green-700":"text-red-700"}`,children:[F>=0?"+":"","",F.toLocaleString()]}),Math.abs(F)>0&&n.jsx("p",{className:"text-xs mt-2 text-gray-700",children:F>0?" You have more cash than the system expected (surplus)":" You have less cash than the system expected (shortage)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes / Explanation"}),n.jsx("textarea",{value:d,onChange:J=>u(J.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Optional: Explain any discrepancies or special situations..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Discrepancy Type"}),n.jsxs("select",{value:f,onChange:J=>m(J.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[n.jsx("option",{value:"none",children:"None"}),n.jsx("option",{value:"mistake",children:"Mistake"}),n.jsx("option",{value:"loan",children:"Loan"})]})]}),f==="loan"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Loan Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),n.jsx("input",{type:"number",step:"0.01",value:p,onChange:J=>g(J.target.value),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg",placeholder:"Enter loan amount"})]})]}),n.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ja,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-900",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Monthly Recalibration"}),n.jsx("p",{children:"Recalibrate your online cash balance at the end of each month to ensure accuracy. This helps catch any missed entries, fees, or discrepancies."})]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsx("button",{type:"button",onClick:s,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:v,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:v||!o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vi,{className:"w-5 h-5"}),"Save Recalibration"]})})]})]})]})})}function Nle({context:e,selectedStoreId:t,selectedDate:r,onDateChange:a,onDataUpdate:s}){const[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState(""),[m,p]=P.useState(""),[g,b]=P.useState([]),[y,v]=P.useState([]),[N,k]=P.useState(!1),[w,A]=P.useState(!1),S=t||e.user?.storeId,_=e.user?.role==="manager"||e.user?.role==="cluster_head";P.useEffect(()=>{E()},[]);const E=async()=>{if(e.user){k(!0);try{const J=await Sg(e.user.accessToken),L=await _g(e.user.accessToken);b(J||[]),v(L||[])}catch(J){console.error("Error loading online data:",J)}finally{k(!1)}}},C=P.useMemo(()=>(S?g.filter(L=>L.storeId===S):g).find(L=>L.date===r),[g,r,S]),I=P.useMemo(()=>(S?y.filter(L=>L.storeId===S):y).find(L=>L.date===r),[y,r,S]);P.useEffect(()=>{C?(o(C.swiggySales.toString()),d(C.zomatoSales.toString())):(o(""),d("")),I?(f(I.swiggyPayout.toString()),p(I.zomatoPayout.toString())):(f(""),p(""))},[C,I,r]);const B=parseFloat(i)||0,M=parseFloat(l)||0,O=B+M,U=parseFloat(u)||0,ie=parseFloat(m)||0,X=U+ie,re=O-X,oe=X-O,Q=P.useMemo(()=>{const J=S?g.filter(V=>V.storeId===S):g,L=S?y.filter(V=>V.storeId===S):y,D=J.reduce((V,ee)=>V+ee.swiggySales+ee.zomatoSales,0),Y=L.reduce((V,ee)=>V+ee.swiggyPayout+ee.zomatoPayout,0);return{totalSales:D,totalPayouts:Y,netCommission:D-Y}},[g,y,S]),F=async J=>{if(J.preventDefault(),!(!e.user||!_)){A(!0);try{const L={id:C?.id||`ONLINE-SALES-${Date.now()}`,date:r,swiggySales:B,zomatoSales:M,storeId:S,createdAt:C?.createdAt||new Date().toISOString()};await ZD(e.user.accessToken,L);const D={id:I?.id||`ONLINE-PAYOUT-${Date.now()}`,date:r,swiggyPayout:U,zomatoPayout:ie,storeId:S,createdAt:I?.createdAt||new Date().toISOString()};if(await e5(e.user.accessToken,D),oe>0){const Y=e.salesData.find(V=>V.date===r&&(!S||V.storeId===S));Y&&await e.updateSalesData(Y.id,{...Y,paytmAmount:Y.paytmAmount+oe})}await E(),s&&s(),alert(" Online sales and payout data saved successfully!")}catch(L){console.error("Error saving online data:",L),alert(" Error saving online data. Please try again.")}finally{A(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Online Sales Management (Swiggy & Zomato)"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Track sales and payouts from food delivery aggregators. Extra payouts automatically add to Online Cash in Hand (Paytm)."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-green-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Sales (Till Now)"}),n.jsx(jn,{className:"w-5 h-5 text-green-600"})]}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Q.totalSales.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-blue-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Net Payout (Till Now)"}),n.jsx(ji,{className:"w-5 h-5 text-blue-600"})]}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",Q.totalPayouts.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Net Commission (Till Now)"}),n.jsx(pn,{className:"w-5 h-5 text-purple-600"})]}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",Q.netCommission.toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sales - Payout"})]})]}),n.jsxs("form",{onSubmit:F,className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-lg",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5"}),"Daily Entry for ",new Date(r).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-2",children:"Sales Data"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Swiggy Sales ()"}),n.jsx("input",{type:"number",step:"0.01",value:i,onChange:J=>o(J.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zomato Sales ()"}),n.jsx("input",{type:"number",step:"0.01",value:l,onChange:J=>d(J.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!_})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Online Sales"}),n.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",O.toFixed(2)]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-700 border-b pb-2",children:"Payout Data"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Swiggy Payout ()"}),n.jsx("input",{type:"number",step:"0.01",value:u,onChange:J=>f(J.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zomato Payout ()"}),n.jsx("input",{type:"number",step:"0.01",value:m,onChange:J=>p(J.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00",disabled:!_})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Payout"}),n.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",X.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-lg ${re>=0?"bg-purple-50 border-2 border-purple-200":"bg-red-50 border-2 border-red-200"}`,children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Net Commission (Sales - Payout)"}),n.jsxs("p",{className:`text-2xl font-bold ${re>=0?"text-purple-600":"text-red-600"}`,children:["",re.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["This is the commission ",re>=0?"earned":"deficit"]})]}),oe>0&&n.jsxs("div",{className:"p-4 rounded-lg bg-orange-50 border-2 border-orange-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Extra Payout (Payout - Sales)"}),n.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",oe.toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" This will be added to Online Cash in Hand (Paytm)"})]})]}),_&&n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"w-5 h-5"}),"Save Online Sales & Payout"]})})})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border-2 border-purple-200 shadow-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Daily Breakdown"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b-2 border-gray-200",children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Swiggy Sales"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Zomato Sales"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Total Sales"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Swiggy Payout"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Zomato Payout"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Total Payout"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Commission"})]})}),n.jsx("tbody",{children:(()=>{const J=new Set([...g.map(Y=>Y.date),...y.map(Y=>Y.date)]),L=S?g.filter(Y=>Y.storeId===S):g,D=S?y.filter(Y=>Y.storeId===S):y;return Array.from(J).sort((Y,V)=>V.localeCompare(Y)).map(Y=>{const V=L.find(ze=>ze.date===Y),ee=D.find(ze=>ze.date===Y),ge=V?.swiggySales||0,ke=V?.zomatoSales||0,Ce=ge+ke,ce=ee?.swiggyPayout||0,me=ee?.zomatoPayout||0,Oe=ce+me,G=Ce-Oe;return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700",children:new Date(Y).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),n.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ge.toFixed(2)]}),n.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ke.toFixed(2)]}),n.jsxs("td",{className:"py-3 px-4 text-right font-semibold text-green-600",children:["",Ce.toFixed(2)]}),n.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",ce.toFixed(2)]}),n.jsxs("td",{className:"py-3 px-4 text-right text-gray-700",children:["",me.toFixed(2)]}),n.jsxs("td",{className:"py-3 px-4 text-right font-semibold text-blue-600",children:["",Oe.toFixed(2)]}),n.jsxs("td",{className:`py-3 px-4 text-right font-semibold ${G>=0?"text-purple-600":"text-red-600"}`,children:["",G.toFixed(2)]})]},Y)})})()})]})})]})]})}function kle({context:e,selectedStoreId:t,selectedDate:r,onClose:a,onSaveSuccess:s}){const[i,o]=P.useState(""),[l,d]=P.useState(r||Bn()),[u,f]=P.useState(""),[m,p]=P.useState(!1),[g,b]=P.useState(null),[y,v]=P.useState(!1),N=t||e.user?.storeId,k=e.stores?.find(S=>S.id===N),w=k?.name||"Unknown Store";if(!N||!k)return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:a,children:n.jsx("div",{className:"bg-white rounded-xl max-w-lg w-full shadow-2xl p-6",onClick:S=>S.stopPropagation(),children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Store Not Selected"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Please select a store from the dropdown at the top of the page before applying for a loan."}),n.jsx("button",{onClick:a,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})})});const A=async S=>{if(S.preventDefault(),!e.user?.accessToken||!N){b("Missing authentication or store information");return}const _=parseFloat(i);if(isNaN(_)||_<=0){b("Please enter a valid loan amount");return}try{p(!0),b(null);const E={storeId:N,storeName:w,loanAmount:_,loanDate:l,notes:u,createdBy:e.user.email};await R5(e.user.accessToken,E),v(!0),setTimeout(()=>{s&&s(),a()},1500)}catch(E){console.error("Error applying for loan:",E),b(E.message||"Failed to apply for loan")}finally{p(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:a,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:S=>S.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(jn,{className:"w-6 h-6"}),"Apply for Loan"]}),n.jsx("p",{className:"text-purple-100 mt-1",children:w})]}),n.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Qn,{className:"w-6 h-6"})})]})}),y&&n.jsxs("div",{className:"m-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg flex items-center gap-3",children:[n.jsx(jn,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-green-900",children:"Loan Applied Successfully!"}),n.jsx("p",{className:"text-sm text-green-700",children:"The loan amount has been added to your Online Cash in Hand."})]})]}),g&&n.jsxs("div",{className:"m-6 p-4 bg-red-50 border-2 border-red-200 rounded-lg flex items-center gap-3",children:[n.jsx(Nr,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),n.jsx("p",{className:"text-red-900",children:g})]}),n.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Loan Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),n.jsx("input",{type:"number",step:"0.01",value:i,onChange:S=>o(S.target.value),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-lg",placeholder:"Enter loan amount",required:!0})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This amount will be added to your Online Cash in Hand (Paytm)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Loan Date *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Or,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),n.jsx("input",{type:"date",value:l,onChange:S=>d(S.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes / Purpose"}),n.jsxs("div",{className:"relative",children:[n.jsx(Fs,{className:"absolute left-3 top-3 text-gray-500 w-5 h-5"}),n.jsx("textarea",{value:u,onChange:S=>f(S.target.value),rows:3,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Purpose of loan, source, repayment terms, etc."})]})]}),n.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"font-semibold mb-1",children:" How Loans Work"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:["Loan amount is ",n.jsx("strong",{children:"added"})," to Online Cash in Hand (Paytm)"]}),n.jsx("li",{children:"Track active loans in the loan section below"}),n.jsx("li",{children:'Use "Repay Loan" to pay back (reduces Online Cash in Hand)'}),n.jsx("li",{children:"Supports partial and full repayments"})]})]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:m,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:m||!i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vi,{className:"w-5 h-5"}),"Apply for Loan"]})})]})]})]})})}function Sle({context:e,loan:t,selectedDate:r,onClose:a,onSaveSuccess:s}){const i=t.loanAmount-t.repaidAmount,[o,l]=P.useState(i.toString()),[d,u]=P.useState(r||Bn()),[f,m]=P.useState(""),[p,g]=P.useState(!1),[b,y]=P.useState(null),[v,N]=P.useState(!1),k=async A=>{if(A.preventDefault(),!e.user?.accessToken){y("Missing authentication");return}const S=parseFloat(o);if(isNaN(S)||S<=0){y("Please enter a valid repayment amount");return}if(S>i){y(`Repayment amount cannot exceed remaining amount (${i.toLocaleString()})`);return}try{g(!0),y(null),await $5(e.user.accessToken,t.id,{repaymentAmount:S,repaymentDate:d,notes:f}),N(!0),setTimeout(()=>{s&&s(),a()},1500)}catch(_){console.error("Error repaying loan:",_),y(_.message||"Failed to process loan repayment")}finally{g(!1)}},w=parseFloat(o)===i;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:a,children:n.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",onClick:A=>A.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(uc,{className:"w-6 h-6"}),"Repay Loan"]}),n.jsx("p",{className:"text-green-100 mt-1",children:t.storeName})]}),n.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Qn,{className:"w-6 h-6"})})]})}),v&&n.jsxs("div",{className:"m-6 p-4 bg-green-50 border-2 border-green-200 rounded-lg flex items-center gap-3",children:[n.jsx(uc,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-green-900",children:"Loan Repayment Successful!"}),n.jsx("p",{className:"text-sm text-green-700",children:"The amount has been deducted from your Online Cash in Hand."})]})]}),b&&n.jsxs("div",{className:"m-6 p-4 bg-red-50 border-2 border-red-200 rounded-lg flex items-center gap-3",children:[n.jsx(Nr,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),n.jsx("p",{className:"text-red-900",children:b})]}),n.jsxs("div",{className:"m-6 p-4 bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-purple-900 mb-3",children:"Loan Details"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-700",children:"Original Loan:"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:["",t.loanAmount.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-700",children:"Already Repaid:"}),n.jsxs("span",{className:"font-semibold text-green-700",children:["",t.repaidAmount.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between pt-2 border-t border-purple-300",children:[n.jsx("span",{className:"text-gray-700 font-semibold",children:"Remaining:"}),n.jsxs("span",{className:"font-bold text-purple-900 text-lg",children:["",i.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Loan Date:"}),n.jsx("span",{className:"text-gray-800",children:new Date(t.loanDate).toLocaleDateString("en-IN")})]})]})]}),n.jsxs("form",{onSubmit:k,className:"p-6 pt-0 space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Repayment Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-lg",children:""}),n.jsx("input",{type:"number",step:"0.01",value:o,onChange:A=>l(A.target.value),max:i,className:"w-full pl-8 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg",placeholder:"Enter repayment amount",required:!0})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsx("p",{className:"text-xs text-gray-600",children:w?" Full repayment":" Partial repayment"}),n.jsx("button",{type:"button",onClick:()=>l(i.toString()),className:"text-xs text-purple-600 hover:text-purple-700 font-medium",children:"Pay Full Amount"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Repayment Date *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Or,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-5 h-5"}),n.jsx("input",{type:"date",value:d,onChange:A=>u(A.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes (Optional)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Fs,{className:"absolute left-3 top-3 text-gray-500 w-5 h-5"}),n.jsx("textarea",{value:f,onChange:A=>m(A.target.value),rows:2,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Optional notes about this repayment..."})]})]}),n.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-900",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Important"}),n.jsxs("p",{children:["This repayment amount will be ",n.jsx("strong",{children:"deducted"})," from your Online Cash in Hand (Paytm) balance. Make sure you have sufficient funds."]})]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsx("button",{type:"button",onClick:a,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:p,children:"Cancel"}),n.jsx("button",{type:"submit",disabled:p||!o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vi,{className:"w-5 h-5"}),w?"Pay Full Amount":"Make Payment"]})})]})]})]})})}function bP({context:e,selectedStoreId:t}){const[r,a]=P.useState("offline"),[s,i]=P.useState(Bn()),[o,l]=P.useState([]),[d,u]=P.useState(!1),[f,m]=P.useState([]),[p,g]=P.useState(!1),b=ue=>ue.category==="service_charge"&&ue.description?.includes("Aggregator Commission")||ue.category==="commission",[y,v]=P.useState({offlineSales:"",paytmAmount:"",cashAmount:"",employeeSalary:"",previousCashInHand:"",usedOnlineMoney:"",actualCashInHand:""}),[N,k]=P.useState(!1),[w,A]=P.useState(null),[S,_]=P.useState(!1),[E,C]=P.useState(!1),[I,B]=P.useState(!1),[M,O]=P.useState(null),[U,ie]=P.useState(!1),[X,re]=P.useState(!1),[oe,Q]=P.useState(!1),[F,J]=P.useState(!1),[L,D]=P.useState(!1),[Y,V]=P.useState(!1),[ee,ge]=P.useState(""),[ke,Ce]=P.useState(!1),[ce,me]=P.useState(null),[Oe,G]=P.useState([]),[ze,Ye]=P.useState(!1),[ct,We]=P.useState(!1),[Pe,Ne]=P.useState(!1),[tt,He]=P.useState(null),pt=e.user?.role==="cluster_head",Vt=e.user?.role==="manager",hr=e.user?.designation==="store_incharge",Jt=e.user?.designation==="production_incharge",Dr=Vt&&!hr&&!Jt,Hr=Dr,ot=t||e.user?.storeId,[qt,Cr]=P.useState([]),[kt,Gt]=P.useState([]),[$e,Ie]=P.useState(!1),[Et,Be]=P.useState([]);P.useEffect(()=>{Zt()},[]),P.useEffect(()=>{_t()},[e.user]);const _t=async()=>{if(e.user?.accessToken)try{const ue=await fc();Be(ue)}catch(ue){console.error("Error loading employee payouts:",ue)}};P.useEffect(()=>{St()},[e.user]);const St=async()=>{if(e.user?.accessToken){u(!0);try{const ue=await _g(e.user.accessToken);l(ue)}catch(ue){console.error("Error loading online payout data:",ue)}finally{u(!1)}}};P.useEffect(()=>{mt()},[e.user]);const mt=async()=>{if(e.user?.accessToken){g(!0);try{const ue=await Sg(e.user.accessToken);m(ue)}catch(ue){console.error("Error loading online sales data:",ue)}finally{g(!1)}}};P.useEffect(()=>{Qt()},[e.user,ot]);const Qt=async()=>{if(e.user?.accessToken){Ye(!0);try{const ue=!ot||ot==="all"?void 0:ot,Ee=await F5(e.user.accessToken,ue);G(Ee)}catch(ue){console.error("Error loading online loans:",ue)}finally{Ye(!1)}}};P.useEffect(()=>{const ue=Ee=>{Ee.key==="Escape"&&E&&Qe()};if(E)return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[E]),P.useEffect(()=>{Tt()},[e.user,ot]);const Tt=async()=>{const ue=new Date,Ee=ue.getDate(),Re=ue.toISOString().slice(0,7);if(!ot||ot==="all"){me(null),Q(!1);return}if(e.user?.accessToken)try{J(!0);const Ot=(await D2(e.user.accessToken,ot))?.recalibration||null;me(Ot),console.log(" Loaded recalibration data:",Ot),Ee===1&&(!Ot||Ot.month!==Re)?Q(!0):Q(!1)}catch(xt){console.error("Error checking online recalibration status:",xt)}finally{J(!1)}},Zt=async()=>{Ie(!0);try{const Ee=(await yl()).filter(Re=>Re.type==="contract");Cr(Ee)}catch(ue){console.error("Error loading contract workers:",ue)}finally{Ie(!1)}};P.useEffect(()=>{xn()},[s,qt]);const xn=async()=>{if(qt.length!==0)try{const Ee=(await fc()).filter(ut=>ut.date===s),Re=qt.map(ut=>ut.id),xt=Ee.filter(ut=>Re.includes(ut.employeeId)),Ot=new Map;xt.forEach(ut=>{const Yr=Ot.get(ut.employeeId);(!Yr||new Date(ut.createdAt)>new Date(Yr.createdAt))&&Ot.set(ut.employeeId,ut)});const ht=Array.from(Ot.values()).map(ut=>({employeeId:ut.employeeId,amount:ut.amount.toString()}));Gt(ht)}catch(ue){console.error("Error loading payouts for date:",ue)}},bt=()=>{Gt([...kt,{employeeId:"",amount:""}])},tn=ue=>{Gt(kt.filter((Ee,Re)=>Re!==ue))},Rn=(ue,Ee,Re)=>{const xt=[...kt];xt[ue][Ee]=Re,Gt(xt)},Bt=P.useMemo(()=>kt.reduce((ue,Ee)=>ue+(parseFloat(Ee.amount)||0),0),[kt]),Ut=P.useMemo(()=>{console.log(" SalesManagement - effectiveStoreId:",ot),console.log(" SalesManagement - selectedStoreId prop:",t),console.log(" SalesManagement - user storeId:",e.user?.storeId),console.log(" SalesManagement - selectedDate:",s),console.log(" SalesManagement - all sales data:",e.salesData.map(Re=>({id:Re.id.substring(0,8),date:Re.date,storeId:Re.storeId,offlineSales:Re.offlineSales})));const ue=ot?e.salesData.filter(Re=>Re.storeId===ot):e.salesData;console.log(" SalesManagement - filtered sales:",ue.map(Re=>({id:Re.id.substring(0,8),date:Re.date,storeId:Re.storeId})));const Ee=ue.find(Re=>Re.date===s);return console.log(" SalesManagement - salesForDate result:",Ee?{id:Ee.id.substring(0,8),date:Ee.date,storeId:Ee.storeId}:"NOT FOUND"),Ee},[e.salesData,s,t,e.user?.storeId]),yn=P.useMemo(()=>e.salesData.length===0||!Ut&&e.salesData.every(ue=>ue.date>s),[e.salesData,s,Ut]);P.useMemo(()=>{const ue=new Date(s),Ee=ue.getFullYear(),Re=ue.getMonth(),xt=new Date(Ee,Re+1,0).getDate();return ue.getDate()===xt},[s]);const rn=P.useMemo(()=>new Date(s).getDate()===1,[s]),kr=P.useMemo(()=>new Date(s).getDay()===5,[s]),we=P.useMemo(()=>{const ue=new Date(s);ue.setDate(ue.getDate()-1);const Ee=ue.toISOString().split("T")[0];return e.salesData.find(Re=>Re.date===Ee)},[e.salesData,s]),nt=P.useMemo(()=>{const ue=e.inventory.filter(xt=>{const Ot=xt.date===s,ht=ot?xt.storeId===ot:!0;return Ot&&ht}).reduce((xt,Ot)=>xt+Ot.totalCost,0),Ee=e.overheads.filter(xt=>{const Ot=xt.date===s,ht=ot?xt.storeId===ot:!0;return Ot&&ht}).reduce((xt,Ot)=>xt+Ot.amount,0),Re=e.fixedCosts.filter(xt=>{const Ot=xt.date===s,ht=ot?xt.storeId===ot:!0;return Ot&&ht}).reduce((xt,Ot)=>xt+Ot.amount,0);return ue+Ee+Re},[e.inventory,e.overheads,e.fixedCosts,s,ot]),it=P.useMemo(()=>e.fixedCosts.filter(ue=>{const Ee=ue.date===s,Re=ot?ue.storeId===ot:!0;return Ee&&Re}).reduce((ue,Ee)=>Ee.paymentMethod==="cash"?ue+Ee.amount:Ee.paymentMethod==="both"&&Ee.cashAmount?ue+Ee.cashAmount:ue,0),[e.fixedCosts,s,ot]),jt=P.useMemo(()=>e.fixedCosts.filter(ue=>{const Ee=ue.date===s,Re=ot?ue.storeId===ot:!0;return Ee&&Re}).reduce((ue,Ee)=>Ee.paymentMethod==="online"?ue+Ee.amount:Ee.paymentMethod==="both"&&Ee.onlineAmount?ue+Ee.onlineAmount:ue,0),[e.fixedCosts,s,ot]),gt=P.useMemo(()=>e.overheads.filter(ue=>{const Ee=ue.date===s,Re=ot?ue.storeId===ot:!0;return Ee&&Re}).reduce((ue,Ee)=>Ee.paymentMethod==="cash"||!Ee.paymentMethod?ue+Ee.amount:Ee.paymentMethod==="both"&&Ee.cashAmount?ue+Ee.cashAmount:ue,0),[e.overheads,s,ot]),H=P.useMemo(()=>e.overheads.filter(ue=>{const Ee=ue.date===s,Re=ot?ue.storeId===ot:!0;return Ee&&Re}).reduce((ue,Ee)=>Ee.paymentMethod==="online"?ue+Ee.amount:Ee.paymentMethod==="both"&&Ee.onlineAmount?ue+Ee.onlineAmount:ue,0),[e.overheads,s,ot]),se=(ue,Ee,Re,xt)=>ue+xt+Ee-Re,ne=P.useMemo(()=>{const ue=parseFloat(y.previousCashInHand)||0,Ee=parseFloat(y.cashAmount)||0,Re=parseFloat(y.usedOnlineMoney)||0;return se(ue,Ee,nt,Re)},[y.previousCashInHand,y.cashAmount,nt,y.usedOnlineMoney]),Z=P.useMemo(()=>{const ue=parseFloat(y.actualCashInHand)||0;return ue===0?0:ue-ne},[y.actualCashInHand,ne]),q=Math.abs(Z)>500,W=P.useMemo(()=>{const ue=s.slice(0,7),Ee=ce&&ce.month===ue,Re=ot?e.salesData.filter(rt=>rt.storeId===ot):e.salesData,xt=ot?e.inventory.filter(rt=>rt.storeId===ot):e.inventory,Ot=ot?e.overheads.filter(rt=>rt.storeId===ot):e.overheads,ht=ot?e.fixedCosts.filter(rt=>rt.storeId===ot):e.fixedCosts,ut=Ee?ce.date:"2000-01-01",Yr=Ee?ce.actualBalance:0;console.log(" ONLINE CASH BALANCE CALCULATION:",{effectiveStoreId:ot,selectedDate:s,selectedMonth:ue,hasRecalibration:Ee,recalibrationDate:Ee?ce.date:"none",startingBalance:Yr,startDate:ut,totalSalesRecords:e.salesData.length,filteredSalesRecords:Re.length,totalInventoryRecords:e.inventory.length,filteredInventoryRecords:xt.length});const Nn=Re.filter(rt=>rt.date>=ut&&rt.date<s),Ma=Nn.reduce((rt,Te)=>rt+(Te.paytmAmount??0),0),tr=parseFloat(y.paytmAmount)||0,K=Ma+tr;console.log(" Paytm transactions included:",{count:Nn.length,historicalTransactions:Nn.map(rt=>({date:rt.date,amount:rt.paytmAmount})),historicalTotal:Ma,todaysPaytm:tr,totalIncludingToday:K});const be=(ot?o.filter(rt=>rt.storeId===ot):o).filter(rt=>rt.date>=ut&&rt.date<s),he=be.reduce((rt,Te)=>rt+(Te.swiggyPayout??0)+(Te.zomatoPayout??0),0),ve=parseFloat(y.onlineSales)||0,je=he+ve;console.log(" Online payout transactions included:",{count:be.length,historicalTransactions:be.map(rt=>({date:rt.date,swiggy:rt.swiggyPayout,zomato:rt.zomatoPayout})),historicalTotal:he,todaysOnlinePayouts:ve,totalIncludingToday:je});const pe=xt.filter(rt=>rt.date>=ut&&rt.date<s).reduce((rt,Te)=>Te.paymentMethod==="online"?rt+Te.totalCost:Te.paymentMethod==="both"&&Te.onlineAmount?rt+Te.onlineAmount:rt,0),Le=Ot.filter(rt=>rt.date>=ut&&rt.date<s&&!b(rt)).reduce((rt,Te)=>Te.paymentMethod==="online"?rt+Te.amount:Te.paymentMethod==="both"&&Te.onlineAmount?rt+Te.onlineAmount:rt,0),Xe=ht.filter(rt=>rt.date>=ut&&rt.date<s).reduce((rt,Te)=>Te.paymentMethod==="online"?rt+Te.amount:Te.paymentMethod==="both"&&Te.onlineAmount?rt+Te.onlineAmount:rt,0),at=Ot.filter(rt=>b(rt)&&rt.date>=ut&&rt.date<s).reduce((rt,Te)=>{const Pt=Te.paymentMethod||"online";return Pt==="online"?rt+(Te.amount||0):Pt==="both"?rt+(Te.onlineAmount||0):rt},0),et=pe+Le+Xe,rr=parseFloat(y.usedOnlineMoney)||0,sr=et+rr,At=ot?Oe.filter(rt=>rt.storeId===ot):Oe,er=At.filter(rt=>rt.loanDate>=ut&&rt.loanDate<s).reduce((rt,Te)=>rt+Te.loanAmount,0),Sr=At.filter(rt=>(rt.loanDate<ut||rt.loanDate,rt.repaidAmount>0&&rt.loanDate<s)).reduce((rt,Te)=>Te.loanDate>=ut&&Te.loanDate<s||Te.loanDate<ut?rt+Te.repaidAmount:rt,0),zn=(ot?Et.filter(rt=>!rt.storeId||rt.storeId===ot):Et).filter(rt=>rt.date>=ut&&rt.date<s).reduce((rt,Te)=>rt+(Te.amount||0),0)+Bt,Nt=Yr+K+je+er-sr-at-Sr-zn;return console.log(" Balance breakdown:",{startingBalance:Yr,allPaytmReceived:K,allOnlinePayouts:je,loansReceived:er,allUsedOnlineMoney:sr,allCommission:at,loanRepayments:Sr,allEmployeePayouts:zn,finalBalance:Nt}),Nt},[e.salesData,e.inventory,e.overheads,e.fixedCosts,o,Oe,Et,Bt,s,ot,ce,y.paytmAmount,y.onlineSales,y.usedOnlineMoney]),ae=P.useMemo(()=>{const ue=s.slice(0,7),Ee=ce&&ce.month===ue,Re=Ee?ce.date:"2000-01-01",xt=ot?e.salesData.filter(tr=>tr.storeId===ot):e.salesData,Ot=ot?e.fixedCosts.filter(tr=>tr.storeId===ot):e.fixedCosts,ht=ot?e.overheads.filter(tr=>tr.storeId===ot):e.overheads,ut=ot?e.inventory.filter(tr=>tr.storeId===ot):e.inventory,Yr=new Set;xt.filter(tr=>tr.date>=Re&&tr.date<=s).forEach(tr=>Yr.add(tr.date)),Ot.filter(tr=>tr.date>=Re&&tr.date<=s).forEach(tr=>Yr.add(tr.date)),ht.filter(tr=>tr.date>=Re&&tr.date<=s).forEach(tr=>Yr.add(tr.date)),ut.filter(tr=>tr.date>=Re&&tr.date<=s).forEach(tr=>Yr.add(tr.date)),ht.filter(tr=>b(tr)&&tr.date>=Re&&tr.date<=s).forEach(tr=>Yr.add(tr.date));const Nn=Array.from(Yr).sort();let Ma=Ee?ce.actualBalance:0;return console.log(" Daily Breakdown Calculation:",{hasRecalibration:Ee,recalibrationDate:Re,startingBalance:Ma,numberOfDays:Nn.length}),Nn.map(tr=>{const Se=xt.find(At=>At.date===tr)?.paytmAmount??0,be=Ot.filter(At=>At.date===tr).reduce((At,er)=>{const Sr=er.paymentMethod;return Sr==="online"?At+er.amount:Sr==="both"&&er.onlineAmount?At+er.onlineAmount:At},0),he=ht.filter(At=>At.date===tr&&!b(At)).reduce((At,er)=>{const Sr=er.paymentMethod||(er.description?.includes("Commission")?"online":void 0);return Sr==="online"?At+er.amount:Sr==="both"&&er.onlineAmount?At+er.onlineAmount:At},0),ve=ut.filter(At=>At.date===tr).reduce((At,er)=>er.paymentMethod==="online"?At+er.totalCost:er.paymentMethod==="both"&&er.onlineAmount?At+er.onlineAmount:At,0),je=ht.filter(At=>b(At)&&At.date===tr).reduce((At,er)=>{const Sr=er.paymentMethod||"online";return Sr==="online"?At+(er.amount||0):Sr==="both"?At+(er.onlineAmount||0):At},0),pe=ve+he+be,Xe=(ot?o.filter(At=>At.storeId===ot):o).find(At=>At.date===tr),at=Xe?(Xe.swiggyPayout??0)+(Xe.zomatoPayout??0):0,rr=(ot?Et.filter(At=>!At.storeId||At.storeId===ot):Et).filter(At=>At.date===tr).reduce((At,er)=>At+(er.amount||0),0),sr=Se+at-pe-je-rr;return Ma+=sr,{date:tr,paytmReceived:Se,onlinePayouts:at,usedOnlineMoney:pe,commission:je,employeePayouts:rr,inventoryCosts:ve,fixedCosts:be,overheadCosts:he,netChange:sr,runningBalance:Ma}})},[e.salesData,e.fixedCosts,e.overheads,e.inventory,o,Et,s,ot,ce]),de=P.useMemo(()=>{const ue=e.inventory.filter(Ee=>Ee.date===s).reduce((Ee,Re)=>Re.paymentMethod==="online"?Ee+Re.totalCost:Re.paymentMethod==="both"&&Re.onlineAmount?Ee+Re.onlineAmount:Ee,0);return console.log(` Inventory Online Total for ${s}:`,ue,"items:",e.inventory.filter(Ee=>Ee.date===s).map(Ee=>({name:Ee.itemName,payment:Ee.paymentMethod,total:Ee.totalCost}))),ue},[e.inventory,s]),z=P.useMemo(()=>{const ue=e.overheads.filter(ht=>ht.date===s),Ee=s.substring(0,7),Re=e.overheads.filter(ht=>ht.category==="service_charge"&&ht.date?.startsWith(Ee));console.log(` [OH] Month: ${Ee}, Service charges:`,Re.length,Re.map(ht=>({desc:ht.description,amt:ht.amount,payment:ht.paymentMethod})));const xt=e.overheads.filter(ht=>(ht.category==="service_charge"&&ht.description?.includes("Aggregator Commission")||ht.category==="commission")&&ht.date?.startsWith(Ee));console.log(" [OH] Commission entries found:",xt.length,xt.map(ht=>({category:ht.category,desc:ht.description,amt:ht.amount,payment:ht.paymentMethod})));let Ot=ue.reduce((ht,ut)=>{if(ut.category==="commission"||ut.category==="service_charge"&&ut.description?.includes("Aggregator Commission"))return console.log(" [OH] Skipping commission in daily loop:",{category:ut.category,desc:ut.description,amount:ut.amount}),ht;const Nn=ut.paymentMethod||void 0;return Nn==="online"?ht+ut.amount:Nn==="both"&&ut.onlineAmount?ht+ut.onlineAmount:ht},0);if(xt.length>0){const ht=new Date(s),ut=ht.getFullYear(),Yr=ht.getMonth(),Nn=new Date(ut,Yr+1,0).getDate(),Ma=ht.getDate();if(Ma===Nn){const K=xt.reduce((Se,be)=>{const he=be.paymentMethod||"online";return he==="online"?Se+be.amount:he==="both"&&be.onlineAmount?Se+be.onlineAmount:Se},0);console.log(` [OH] Adding FULL monthly commission (last day of month): ${K.toFixed(2)} (entries: ${xt.length})`),Ot+=K}else console.log(` [OH] Skipping commission (not last day): Day ${Ma}/${Nn}`)}return console.log(` Overhead Online Total for ${s}:`,Ot,"items:",ue.map(ht=>({category:ht.category,payment:ht.paymentMethod,total:ht.amount})),"commissions:",xt.map(ht=>({amount:ht.amount,payment:ht.paymentMethod,category:ht.category}))),Ot},[e.overheads,s]),le=P.useMemo(()=>{const ue=e.fixedCosts.filter(Ee=>Ee.date===s).reduce((Ee,Re)=>Re.paymentMethod==="online"?Ee+Re.amount:Re.paymentMethod==="both"&&Re.onlineAmount?Ee+Re.onlineAmount:Ee,0);return console.log(` Fixed Cost Online Total for ${s}:`,ue,"items:",e.fixedCosts.filter(Ee=>Ee.date===s).map(Ee=>({category:Ee.category,payment:Ee.paymentMethod,total:Ee.amount}))),ue},[e.fixedCosts,s]),fe=P.useMemo(()=>{const ue=de+z+le;return console.log(` TOTAL Online Expenses for ${s}:`,{inventory:de,overhead:z,fixedCost:le,total:ue}),ue},[de,z,le,s]),De=P.useMemo(()=>({inventory:de,overhead:z,fixedCost:le,total:fe}),[de,z,le,fe]);P.useEffect(()=>{if(Ut)v({offlineSales:(Ut.offlineSales??0).toString(),paytmAmount:(Ut.paytmAmount??0).toString(),cashAmount:(Ut.cashAmount??0).toString(),employeeSalary:(Ut.employeeSalary??0).toString(),previousCashInHand:(Ut.previousCashInHand??0).toString(),usedOnlineMoney:(Ut.usedOnlineMoney??0).toString(),actualCashInHand:(Ut.actualCashInHand??0).toString()}),k(!0),A(Ut.id);else{let ue=0;we&&(ue=we.actualCashInHand??0),v({offlineSales:"",paytmAmount:"",cashAmount:"",employeeSalary:"0",previousCashInHand:ue.toString(),usedOnlineMoney:fe.toString(),actualCashInHand:""}),k(!1),A(null)}},[s,Ut,we,fe]);const Ve=async ue=>{if(ue.preventDefault(),S){console.log(" Submission already in progress, ignoring duplicate request");return}O(ue),C(!0),B(!1)},Qe=()=>{C(!1),B(!1),O(null)},Ke=async()=>{if(!w)return;const ue=parseFloat(y.actualCashInHand)||0,Ee=ue-ne;if(confirm(`Request approval for cash discrepancy of ${Math.abs(Ee).toFixed(2)}?

This will notify the cluster head for approval.`))try{await e.requestSalesApproval(w,ue,Ee),alert("Approval request sent successfully!")}catch{alert("Failed to request approval. Please try again.")}},Ge=async ue=>{if(confirm("Approve this discrepancy? The new cash amount will be accepted."))try{await e.approveDiscrepancy(ue),alert("Discrepancy approved successfully!")}catch{alert("Failed to approve discrepancy. Please try again.")}},Ct=async ue=>{const Ee=prompt("Please enter reason for rejection:");if(Ee)try{await e.rejectDiscrepancy(ue,Ee),alert("Discrepancy rejected. Manager must pay the difference.")}catch{alert("Failed to reject discrepancy. Please try again.")}},Yt=async()=>{const ue=parseFloat(ee);if(!ue||ue<=0){alert("Please enter a valid amount to convert");return}const Ee=ne;if(ue>Ee){alert(`Cannot convert more than ${Ee.toFixed(2)} (your current expected cash in hand)`);return}if(confirm(`Convert ${ue.toFixed(2)} from Offline Cash to Online Cash (Paytm)?

Expected Cash: ${ne.toFixed(2)}  ${(ne-ue).toFixed(2)}
Online Cash: ${W.toFixed(2)}  ${(W+ue).toFixed(2)}`)){Ce(!0);try{await M5(ot,s,ue,e.user?.name||e.user?.email||"Unknown User"),await e.loadSalesData(),V(!1),ge(""),alert("Cash converted successfully!")}catch(Re){console.error("Error converting cash:",Re),alert(Re.message||"Failed to convert cash. Please try again.")}finally{Ce(!1)}}},Xt=P.useMemo(()=>{const Ee=(ot?f.filter(Re=>Re.storeId===ot):f).find(Re=>Re.date===s);return Ee?(Ee.swiggySales||0)+(Ee.zomatoSales||0):0},[f,s,ot]),wr=parseFloat(y.offlineSales)||0,nn=parseFloat(y.paytmAmount)||0,ln=parseFloat(y.cashAmount)||0,Ze=nn+ln,Lr=Math.abs(wr-Ze)>.01;return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(Tg,{selectedDate:s,onDateChange:i}),n.jsxs("div",{className:"flex gap-2 mb-6 mt-4",children:[n.jsxs("button",{onClick:()=>a("offline"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${r==="offline"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-white/50 text-gray-600 hover:bg-white/80 border border-purple-200"}`,children:[n.jsx(KE,{className:"inline-block w-5 h-5 mr-2"}),"Offline Sales"]}),n.jsxs("button",{onClick:()=>a("online"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${r==="online"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-white/50 text-gray-600 hover:bg-white/80 border border-purple-200"}`,children:[n.jsx(xh,{className:"inline-block w-5 h-5 mr-2"}),"Online Sales (Swiggy/Zomato)"]})]}),r==="online"&&n.jsx(Nle,{context:e,selectedStoreId:t,selectedDate:s,onDateChange:i,onDataUpdate:mt}),r==="offline"&&n.jsxs(n.Fragment,{children:[oe&&!L&&!F&&(()=>{const ue=new Date;return ue.getDate()===1||ue.getDate()<=7})()&&n.jsx("div",{className:"mt-6 bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-2 border-purple-400 rounded-xl p-6 shadow-lg animate-pulse",style:{animationDuration:"3s"},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(xh,{className:"w-7 h-7 text-purple-600"}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Monthly Online Cash Recalibration Required"})]}),n.jsxs("div",{className:"space-y-2 text-gray-700",children:[n.jsx("p",{className:"font-semibold text-purple-900",children:new Date().getDate()===1?"It's the 1st of the month! Time to recalibrate your Online Cash in Hand (Paytm) balance.":"Monthly recalibration reminder: Please recalibrate your Online Cash in Hand (Paytm) balance for this month."}),n.jsx("p",{className:"text-sm",children:"Monthly recalibration helps you:"}),n.jsxs("ul",{className:"text-sm space-y-1 ml-5 list-disc",children:[n.jsx("li",{children:"Verify your actual Paytm balance matches system records"}),n.jsx("li",{children:"Catch any missing transactions, fees, or discrepancies early"}),n.jsx("li",{children:"Maintain accurate financial tracking for your business"}),n.jsx("li",{children:"Categorize any differences as mistakes or loans"})]}),n.jsxs("p",{className:"text-xs text-purple-800 mt-3 bg-purple-100 rounded-lg p-2",children:[" ",n.jsx("strong",{children:"Important:"})," Please complete this recalibration as soon as possible to ensure accurate financial records."]})]}),n.jsxs("div",{className:"flex gap-3 mt-4",children:[n.jsxs("button",{onClick:()=>{re(!0),D(!0)},className:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5"}),"Recalibrate Now"]}),n.jsxs("button",{onClick:()=>D(!0),className:"px-5 py-2.5 bg-white text-gray-700 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium flex items-center gap-2",children:[n.jsx(qr,{className:"w-4 h-4"}),"Remind Me Later"]})]})]}),n.jsx("button",{onClick:()=>D(!0),className:"p-2 hover:bg-purple-100 rounded-lg transition-colors flex-shrink-0",title:"Dismiss",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]})}),kr&&e.isManager&&n.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ja,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-gray-900",children:"Weekly Cash Reporting - Friday"})]}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Today is Friday! Please report the actual cash left with you after entering today's sales data."}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:n.jsxs("p",{className:"text-gray-700",children:[n.jsx("strong",{children:"Important:"})," If the cash discrepancy exceeds 500, cluster head approval will be required before saving."]})})]}),pt&&n.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ue=>ue.approvalRequested&&!ue.approvedBy&&!ue.rejectedBy).length>0&&n.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ja,{className:"w-6 h-6 text-orange-600"}),n.jsx("h2",{className:"text-gray-900",children:"Discrepancy Approval Requests"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(ue=>ue.approvalRequested&&!ue.approvedBy&&!ue.rejectedBy).map(ue=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-gray-900 font-medium",children:qa(ue.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Expected Cash: ",(ue.actualCashInHand-ue.cashOffset).toFixed(2)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Actual Cash: ",ue.requestedCashInHand?.toFixed(2)]}),n.jsxs("p",{className:"text-sm font-semibold text-orange-600 mt-1",children:["Discrepancy: ",((ue.requestedCashInHand||0)-(ue.actualCashInHand-ue.cashOffset)).toFixed(2)]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Ge(ue.id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Approve"}),n.jsx("button",{onClick:()=>Ct(ue.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Reject"})]})]},ue.id))})]}),e.salesData.filter(ue=>ue.approvalRequired&&!ue.approvedBy&&!ue.approvalRequested).length>0&&n.jsxs("div",{className:"bg-[#FFF4E6] border-2 border-[#FFE4C4] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ja,{className:"w-6 h-6 text-[#E8A87C]"}),n.jsx("h2",{className:"text-gray-900",children:"Pending Approvals"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(ue=>ue.approvalRequired&&!ue.approvedBy&&!ue.approvalRequested).map(ue=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between border border-yellow-300",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900",children:qa(ue.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Cash Discrepancy: ",n.jsxs("span",{className:ue.cashOffset>0?"text-green-600":"text-red-600",children:[ue.cashOffset>0?"+":"","",ue.cashOffset.toFixed(2)]})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Expected: ",(ue.actualCashInHand-ue.cashOffset).toFixed(2)," | Actual: ",ue.actualCashInHand.toFixed(2)]})]}),n.jsx("button",{onClick:async()=>{try{await e.approveSalesData(ue.id),alert("Approved successfully!")}catch{alert("Failed to approve. Please try again.")}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Approve"})]},ue.id))})]})]}),Ut&&Ut.approvedBy&&n.jsxs("div",{className:"mt-6 bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(or,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Approved"})]}),n.jsxs("p",{className:"text-gray-700",children:[" Your sales entry for ",qa(Ut.date)," has been approved by ",Ut.approvedBy,"."]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[n.jsx(jn,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Entry"})]}),n.jsxs("form",{onSubmit:Ve,className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-[#D4E6F1] to-[#AED6F1] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(KE,{className:"w-5 h-5 text-[#5499C7]"}),"Offline Sales"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Total Offline Sales ()"}),n.jsx("input",{type:"number",step:"0.01",value:y.offlineSales,onChange:ue=>v({...y,offlineSales:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!Hr})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#FFF3E0] to-[#FFE0B2] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(pl,{className:"w-5 h-5 text-[#FFB74D]"}),"Payment Mode Distribution"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paytm ()"}),n.jsx("input",{type:"number",step:"0.01",value:y.paytmAmount,onChange:ue=>v({...y,paytmAmount:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!Hr})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash ()"}),n.jsx("input",{type:"number",step:"0.01",value:y.cashAmount,onChange:ue=>v({...y,cashAmount:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!Hr})]})]}),Lr&&n.jsxs("div",{className:"bg-red-100 border border-red-300 text-red-700 px-3 py-2 rounded-lg text-sm",children:[" Payment mode total (",Ze.toFixed(2),") doesn't match offline sales (",wr.toFixed(2),")"]}),!Lr&&wr>0&&n.jsxs("div",{className:"bg-green-100 border border-green-300 text-green-700 px-3 py-2 rounded-lg text-sm flex items-center gap-2",children:[n.jsx(or,{className:"w-4 h-4"}),"Payment modes match total sales"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#E0F2F7] to-[#B3E5FC] rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(A9,{className:"w-5 h-5 text-[#4FC3F7]"}),"Used Online Money"]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Amount Used from Paytm ()",fe>0&&n.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:["Auto: ",de.toFixed(2),"(Inv) + ",z.toFixed(2),"(OH) + ",le.toFixed(2),"(FC)"]})]}),n.jsx("input",{type:"number",step:"0.01",value:y.usedOnlineMoney,onChange:ue=>v({...y,usedOnlineMoney:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!Hr})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[n.jsx(Dn,{className:"w-5 h-5 text-purple-600"}),"Contract Worker Payouts"]}),e.isManager&&n.jsxs("button",{type:"button",onClick:bt,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[n.jsx(qi,{className:"w-4 h-4"}),"Add Worker"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3 text-sm text-blue-800",children:n.jsxs("p",{className:"flex items-center gap-2",children:[n.jsx(xh,{className:"w-4 h-4"}),n.jsxs("span",{children:[" Employee payouts are deducted from ",n.jsx("strong",{children:"Online Cash in Hand (Paytm)"}),", not from Expected Cash."]})]})}),$e?n.jsx("p",{className:"text-sm text-gray-500",children:"Loading workers..."}):qt.length===0?n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-gray-700",children:n.jsx("p",{children:"No contract workers found. Please add contract workers in the Payroll tab first."})}):n.jsxs("div",{className:"space-y-3",children:[kt.length===0?n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 text-sm text-gray-600",children:'No payouts entered for today. Click "Add Worker" to record a payout.'}):kt.map((ue,Ee)=>{const Re=qt.find(xt=>xt.id===ue.employeeId);return n.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-3 space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Select Worker"}),n.jsxs("select",{value:ue.employeeId,onChange:xt=>Rn(Ee,"employeeId",xt.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",disabled:!e.isManager,required:!0,children:[n.jsx("option",{value:"",children:"Choose a worker..."}),qt.map(xt=>n.jsxs("option",{value:xt.id,children:[xt.name," (",xt.employeeId,")"]},xt.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount Paid ()"}),n.jsx("input",{type:"number",step:"0.01",value:ue.amount,onChange:xt=>Rn(Ee,"amount",xt.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg text-sm",placeholder:Re?.dailyRate?`Suggested: ${Re.dailyRate}`:"Enter amount",disabled:!e.isManager,required:!0}),Re?.dailyRate&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Daily rate: ",Re.dailyRate]})]})]}),e.isManager&&n.jsx("button",{type:"button",onClick:()=>tn(Ee),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors mt-5",children:n.jsx(qr,{className:"w-4 h-4"})})]})},Ee)}),kt.length>0&&n.jsxs("div",{className:"bg-purple-600 text-white rounded-lg p-3 flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Total Contract Payouts:"}),n.jsxs("span",{className:"text-lg",children:["",Bt.toFixed(2)]})]})]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-3 bg-purple-50 p-2 rounded border border-purple-200",children:[" ",n.jsx("strong",{children:"Note:"})," Payouts entered here will automatically sync with the Payroll page. For permanent employees, use the Payroll tab."]}),Bt>0&&n.jsxs("p",{className:"text-xs text-purple-700 mt-2 bg-purple-100 p-2 rounded border border-purple-300 flex items-center gap-1",children:[" ",n.jsx("strong",{children:"Cash Impact:"})," ",Bt.toFixed(2)," will be deducted from Online Cash in Hand (Paytm)."]})]}),(yn||rn)&&n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(ji,{className:"w-5 h-5 text-amber-600"}),yn?"Opening Cash Balance (Day 1)":"Cash Left from Previous Month"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cash Left ()"}),n.jsx("input",{type:"number",step:"0.01",value:y.previousCashInHand,onChange:ue=>v({...y,previousCashInHand:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",disabled:!Hr,required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:yn?"Enter starting cash for the first day":"Enter cash left from previous month (after deducting all expenses and salaries)"})]})]}),!yn&&!rn&&n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border-2 border-gray-300",children:[n.jsxs("h3",{className:"text-gray-900 mb-2 flex items-center gap-2",children:[n.jsx(ji,{className:"w-5 h-5 text-gray-600"}),"Cash Left from Previous Day (Auto-Calculated)"]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("p",{className:"text-2xl text-gray-900",children:["",(parseFloat(y.previousCashInHand)||0).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" This is automatically calculated from previous day's cash left after deducting expenses (not including employee payouts).",rn&&" You can edit this only on the 1st of the month."]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-lg p-4",children:[n.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(ji,{className:"w-5 h-5 text-teal-600"}),"Cash Reconciliation"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-teal-200",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Expected Cash in Hand"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",ne.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previous Cash: ",(parseFloat(y.previousCashInHand)||0).toFixed(2)," + Amount Used from Paytm: ",(parseFloat(y.usedOnlineMoney)||0).toFixed(2)," + Cash Received: ",ln.toFixed(2)," - Expenses: ",nt.toFixed(2)," - Contract Payouts: ",Bt.toFixed(2)]}),n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View expense breakdown (all expenses incl. commission)"}),n.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[n.jsxs("p",{children:["Inventory Cost: ",(e.inventory.filter(Ee=>{const Re=Ee.date===s,xt=ot?Ee.storeId===ot:!0;return Re&&xt}).reduce((Ee,Re)=>Re.paymentMethod==="cash"||!Re.paymentMethod?Ee+Re.totalCost:Re.paymentMethod==="both"&&Re.cashAmount?Ee+Re.cashAmount:Ee,0)+De.inventory).toFixed(2)," (cash: ",e.inventory.filter(Ee=>{const Re=Ee.date===s,xt=ot?Ee.storeId===ot:!0;return Re&&xt}).reduce((Ee,Re)=>Re.paymentMethod==="cash"||!Re.paymentMethod?Ee+Re.totalCost:Re.paymentMethod==="both"&&Re.cashAmount?Ee+Re.cashAmount:Ee,0).toFixed(2),", online: ",De.inventory.toFixed(2),")"]}),n.jsxs("p",{children:["Overhead Cost: ",(e.overheads.filter(Ee=>{const Re=Ee.date===s,xt=ot?Ee.storeId===ot:!0;return Re&&xt}).reduce((Ee,Re)=>Re.paymentMethod==="cash"||!Re.paymentMethod?Ee+Re.amount:Re.paymentMethod==="both"&&Re.cashAmount?Ee+Re.cashAmount:Ee,0)+De.overhead).toFixed(2)," (cash: ",e.overheads.filter(Ee=>{const Re=Ee.date===s,xt=ot?Ee.storeId===ot:!0;return Re&&xt}).reduce((Ee,Re)=>Re.paymentMethod==="cash"||!Re.paymentMethod?Ee+Re.amount:Re.paymentMethod==="both"&&Re.cashAmount?Ee+Re.cashAmount:Ee,0).toFixed(2),", online: ",De.overhead.toFixed(2),")"]}),n.jsxs("p",{children:["Fixed Costs: ",(e.fixedCosts.filter(Ee=>{const Re=Ee.date===s,xt=ot?Ee.storeId===ot:!0;return Re&&xt}).reduce((Ee,Re)=>Re.paymentMethod==="cash"||!Re.paymentMethod?Ee+Re.amount:Re.paymentMethod==="both"&&Re.cashAmount?Ee+Re.cashAmount:Ee,0)+De.fixedCost).toFixed(2)," (cash + online)"]}),n.jsxs("p",{className:"font-medium mt-1",children:["Total: ",nt.toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Actual Cash in Hand ()"}),n.jsx("input",{type:"number",step:"0.01",value:y.actualCashInHand,onChange:ue=>v({...y,actualCashInHand:ue.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,disabled:!Hr}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Count and enter actual physical cash"})]}),Z!==0&&parseFloat(y.actualCashInHand)>0&&n.jsxs("div",{className:`p-3 rounded-lg border-2 ${Z>0?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[n.jsxs("p",{className:`font-semibold ${Z>0?"text-green-700":"text-red-700"}`,children:[Z>0?"Cash Excess":"Cash Shortage",": ",Math.abs(Z).toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Math.abs(Z)>500?" High discrepancy - requires approval from cluster head":"Discrepancy will be noted in records"})]})]})]}),N&&Ut&&n.jsx("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:n.jsxs("div",{className:"space-y-3",children:[q&&Ut.approvalRequested&&!Ut.approvedBy&&n.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg",children:["\\n                      ",n.jsx("p",{className:"font-semibold",children:" Pending Approval"}),n.jsx("p",{className:"mt-1",children:"This entry is waiting for cluster head approval due to high cash discrepancy."})]}),Ut.approvedBy&&n.jsxs("div",{className:"bg-green-50 border-2 border-green-300 text-green-700 px-4 py-3 rounded-lg",children:[n.jsx("p",{className:"font-semibold",children:" Approved"}),n.jsxs("p",{className:"mt-1",children:["Approved by: ",Ut.approvedBy]}),Ut.approvalDate&&n.jsxs("p",{className:"text-sm",children:["Date: ",new Date(Ut.approvalDate).toLocaleString()]})]}),Ut.rejectedBy&&n.jsx("div",{className:"bg-red-50 border-2 border-red-300 text-red-700 px-4 py-3 rounded-lg",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:" Rejected"}),n.jsxs("p",{className:"mt-1",children:["Rejected by: ",Ut.rejectedBy]}),Ut.rejectionDate&&n.jsxs("p",{className:"text-sm",children:["Date: ",new Date(Ut.rejectionDate).toLocaleString()]}),Ut.rejectionReason&&n.jsxs("p",{className:"mt-1 italic",children:["Reason: ",Ut.rejectionReason]}),n.jsx("p",{className:"mt-1 font-medium",children:"You must pay the discrepancy from your pocket."})]})})]})}),Hr&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{type:"submit",disabled:Lr||S,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[S&&n.jsx(Eo,{className:"w-5 h-5 animate-spin"}),S?"Saving...":N?"Update Sales Data":"Save Sales Data"]}),N&&w&&q&&!Ut?.approvedBy&&!Ut?.approvalRequested&&n.jsxs("button",{type:"button",onClick:Ke,className:"w-full px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(ja,{className:"w-5 h-5"}),"Request Approval from Cluster Head"]}),N&&Ut?.approvalRequested&&!Ut?.approvedBy&&!Ut?.rejectedBy&&n.jsx("div",{className:"w-full px-6 py-3 bg-orange-100 border-2 border-orange-300 text-orange-800 rounded-lg text-center",children:" Approval request sent - Waiting for cluster head response"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-[#B8E6B8] to-[#A3D9A5] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(jn,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Total Sales"})]}),n.jsxs("p",{className:"text-4xl",children:["",(wr+Xt).toLocaleString()]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700/20 space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Offline Sales:"}),n.jsxs("span",{children:["",wr.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Online Sales:"}),n.jsxs("span",{children:["",Xt.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#A8D8EA] to-[#93C5FD] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ji,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Payment Breakdown"})]}),n.jsxs("div",{className:"space-y-3 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Cash Received:"}),n.jsxs("span",{className:"text-2xl",children:["",ln.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Paytm Received:"}),n.jsxs("span",{className:"text-2xl",children:["",nn.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700/20",children:[n.jsx("span",{children:"Online Sales:"}),n.jsxs("span",{className:"text-xl",children:["",Xt.toLocaleString()]})]})]})]}),!yn&&n.jsxs("div",{className:"bg-gradient-to-br from-[#D8B5FF] to-[#C7A7FF] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Cash Status"})]}),ne>0&&n.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-1 px-3 py-1 bg-white/30 hover:bg-white/50 rounded-lg text-xs font-semibold transition-colors",title:"Convert Offline Cash to Online Cash (Paytm)",children:[n.jsx(Ky,{className:"w-3 h-3"}),"Convert to Online"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm",children:"Expected Cash"}),n.jsxs("p",{className:"text-3xl",children:["",ne.toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",(parseFloat(y.previousCashInHand)||0).toFixed(2)," + ",(parseFloat(y.usedOnlineMoney)||0).toFixed(2)," + ",ln.toFixed(2)," - ",nt.toFixed(2)," - ",it.toFixed(2)," - ",gt.toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:"Note: Employee payouts are deducted from Online Cash (Paytm)"})]}),y.actualCashInHand&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[n.jsx("p",{className:"text-sm",children:"Actual Cash"}),n.jsxs("p",{className:"text-3xl",children:["",(parseFloat(y.actualCashInHand)||0).toFixed(2)]})]}),Math.abs(Z)>0&&n.jsxs("div",{className:"pt-3 border-t border-gray-700/20",children:[n.jsx("p",{className:"text-sm",children:"Difference"}),n.jsxs("p",{className:`text-2xl ${Z>0?"text-green-700":"text-red-700"}`,children:[Z>0?"+":"","",Z.toFixed(2)]})]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#C7A7FF] to-[#B794F4] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(xh,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide",children:"Online Cash in Hand (Paytm)"})]}),n.jsxs("p",{className:"text-4xl mb-4",children:["",W.toLocaleString()]}),n.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[n.jsxs("div",{className:"flex justify-between text-green-700",children:[n.jsx("span",{children:"+ Paytm In:"}),n.jsxs("span",{children:["",(()=>{const Ee=e.onlineCashRecalibrations.filter(Ot=>Ot.storeId===ot&&Ot.date<=s).sort((Ot,ht)=>ht.date.localeCompare(Ot.date))[0]?.date||"0000-00-00";return((ot?e.salesData.filter(Ot=>Ot.storeId===ot&&Ot.date>Ee&&Ot.date<s):e.salesData.filter(Ot=>Ot.date>Ee&&Ot.date<s)).reduce((Ot,ht)=>Ot+(ht.paytmAmount??0),0)+nn).toLocaleString()})()]})]}),n.jsxs("div",{className:"flex justify-between text-emerald-700",children:[n.jsx("span",{children:"+ Online Payouts:"}),n.jsxs("span",{children:["",(()=>{const Ee=e.onlineCashRecalibrations.filter(Ot=>Ot.storeId===ot&&Ot.date<=s).sort((Ot,ht)=>ht.date.localeCompare(Ot.date))[0]?.date||"0000-00-00";return((ot?e.salesData.filter(Ot=>Ot.storeId===ot&&Ot.date>Ee&&Ot.date<s):e.salesData.filter(Ot=>Ot.date>Ee&&Ot.date<s)).reduce((Ot,ht)=>Ot+(ht.onlineSales??0),0)+Xt).toLocaleString()})()]})]}),n.jsxs("div",{className:"flex justify-between text-red-700",children:[n.jsx("span",{children:"- Used for Expenses:"}),n.jsxs("span",{children:["",(()=>{const Ee=e.onlineCashRecalibrations.filter(Re=>Re.storeId===ot&&Re.date<=s).sort((Re,xt)=>xt.date.localeCompare(Re.date))[0]?.date||"0000-00-00";return ae.filter(Re=>Re.date>Ee).reduce((Re,xt)=>Re+xt.usedOnlineMoney,0).toLocaleString()})()]})]}),n.jsxs("div",{className:"flex justify-between text-orange-700",children:[n.jsx("span",{children:"- Employee Payouts:"}),n.jsxs("span",{children:["",(()=>{const Ee=e.onlineCashRecalibrations.filter(Re=>Re.storeId===ot&&Re.date<=s).sort((Re,xt)=>xt.date.localeCompare(Re.date))[0]?.date||"0000-00-00";return ae.filter(Re=>Re.date>Ee).reduce((Re,xt)=>Re+(xt.employeePayouts||0),0).toLocaleString()})()]})]}),n.jsxs("div",{className:"flex justify-between text-gray-700 pt-2 border-t border-gray-700/20",children:[n.jsx("span",{children:"Used Today:"}),n.jsxs("span",{children:["",(parseFloat(y.usedOnlineMoney)||0).toLocaleString()]})]}),Bt>0&&n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Employee Payouts Today:"}),n.jsxs("span",{children:["",Bt.toLocaleString()]})]}),jt>0&&n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Fixed Costs Today (Online):"}),n.jsxs("span",{children:["",jt.toLocaleString()]})]}),H>0&&n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Overhead Costs Today (Online):"}),n.jsxs("span",{children:["",H.toLocaleString()]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>ie(!0),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-gray-800 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(pn,{className:"w-4 h-4"}),"Daily Breakdown"]}),n.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white/30 hover:bg-white/40 text-gray-800 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(Or,{className:"w-4 h-4"}),"Recalibrate"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#FFD700] to-[#FFA500] rounded-xl shadow-lg p-6 text-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ji,{className:"w-6 h-6"}),n.jsx("p",{className:"text-sm uppercase tracking-wide font-semibold",children:"Total Cash (Offline + Paytm)"})]}),n.jsxs("p",{className:"text-4xl font-bold mb-4",children:["",(ne+W).toLocaleString()]}),n.jsxs("div",{className:"space-y-2 text-sm bg-gray-800/10 rounded-lg p-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Expected Cash (Offline):"}),n.jsxs("span",{className:"text-xl font-semibold",children:["",ne.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-700/20",children:[n.jsx("span",{className:"font-medium",children:"Online Cash (Paytm):"}),n.jsxs("span",{className:"text-xl font-semibold",children:["",W.toLocaleString()]})]})]})]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(jn,{className:"w-6 h-6 text-purple-600"}),"Loan Management"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track loans taken and repayments made"})]}),n.jsxs("button",{onClick:()=>We(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-2 shadow-md",children:[n.jsx(qi,{className:"w-4 h-4"}),"Apply Loan"]})]}),(()=>{const ue=Oe.filter(Ot=>Ot.status==="active"),Ee=ue.reduce((Ot,ht)=>Ot+ht.loanAmount,0),Re=ue.reduce((Ot,ht)=>Ot+ht.repaidAmount,0),xt=ue.reduce((Ot,ht)=>Ot+(ht.loanAmount-ht.repaidAmount),0);return ue.length>0&&n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Active Loans"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["",Ee.toLocaleString()]})]}),n.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Repaid"}),n.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",Re.toLocaleString()]})]}),n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Remaining to Pay"}),n.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",xt.toLocaleString()]})]})]})})(),ze?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(Eo,{className:"w-6 h-6 animate-spin text-purple-600"}),n.jsx("span",{className:"ml-2 text-gray-600",children:"Loading loans..."})]}):Oe.length===0?n.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[n.jsx(jn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600",children:"No loans recorded yet"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Click "Apply Loan" to add a loan'})]}):n.jsx("div",{className:"space-y-3",children:Oe.map(ue=>{const Ee=ue.loanAmount-ue.repaidAmount,Re=ue.repaidAmount/ue.loanAmount*100;return n.jsxs("div",{className:`border-2 rounded-lg p-4 ${ue.status==="active"?"border-blue-200 bg-blue-50":"border-green-200 bg-green-50"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${ue.status==="active"?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"}`,children:ue.status==="active"?"Active":"Repaid"}),n.jsx("span",{className:"text-sm text-gray-600",children:new Date(ue.loanDate).toLocaleDateString("en-IN")})]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:ue.notes||"No notes"})]}),n.jsxs("div",{className:"text-right ml-4",children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Loan Amount"}),n.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",ue.loanAmount.toLocaleString()]})]})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[n.jsxs("span",{children:["Repaid: ",ue.repaidAmount.toLocaleString()]}),n.jsxs("span",{children:["Remaining: ",Ee.toLocaleString()]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${ue.status==="repaid"?"bg-green-500":"bg-blue-500"}`,style:{width:`${Re}%`}})}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1 text-center",children:[Re.toFixed(0),"% repaid"]})]}),ue.status==="active"&&n.jsxs("button",{onClick:()=>{He(ue),Ne(!0)},className:"w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(pl,{className:"w-4 h-4"}),"Repay Loan"]}),ue.status==="repaid"&&ue.repaymentDate&&n.jsxs("div",{className:"text-center text-xs text-green-700 mt-2",children:[" Fully repaid on ",new Date(ue.repaymentDate).toLocaleDateString("en-IN")]})]},ue.id)})})]})}),U&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>ie(!1),children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",onClick:ue=>ue.stopPropagation(),children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Paytm Daily Breakdown"}),n.jsx("p",{className:"text-purple-100 mt-1",children:"Complete transaction history"})]}),n.jsx("button",{onClick:()=>ie(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Total Received"}),n.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",ae.reduce((ue,Ee)=>ue+Ee.paytmReceived+Ee.onlinePayouts,0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Total Used"}),n.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["",ae.reduce((ue,Ee)=>ue+Ee.usedOnlineMoney+Ee.commission,0).toLocaleString()]})]}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Current Balance"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:["",W.toLocaleString()]})]})]}),n.jsx("div",{className:"space-y-2",children:ae.map((ue,Ee)=>{const Re=ue.runningBalance,xt=ue.date===s;return n.jsxs("div",{className:`border rounded-lg p-4 ${xt?"border-purple-400 bg-purple-50":"border-gray-200 bg-white"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{children:n.jsxs("p",{className:"font-semibold text-gray-900",children:[qa(ue.date),xt&&n.jsx("span",{className:"ml-2 text-xs bg-purple-500 text-white px-2 py-1 rounded-full",children:"Today"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Running Balance"}),n.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",Re.toLocaleString()]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[ue.paytmReceived>0&&n.jsxs("div",{className:"flex justify-between items-center bg-green-50 px-3 py-2 rounded",children:[n.jsx("span",{className:"text-green-700",children:"+ Paytm In:"}),n.jsxs("span",{className:"font-semibold text-green-800",children:["",ue.paytmReceived.toLocaleString()]})]}),ue.onlinePayouts>0&&n.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 px-3 py-2 rounded",children:[n.jsx("span",{className:"text-emerald-700",children:"+ Online Payouts:"}),n.jsxs("span",{className:"font-semibold text-emerald-800",children:["",ue.onlinePayouts.toLocaleString()]})]}),ue.usedOnlineMoney>0&&n.jsxs("div",{className:"flex justify-between items-center bg-red-50 px-3 py-2 rounded",children:[n.jsx("span",{className:"text-red-700",children:"- Used for Expenses:"}),n.jsxs("span",{className:"font-semibold text-red-800",children:["",ue.usedOnlineMoney.toLocaleString()]})]}),ue.commission>0&&n.jsxs("div",{className:"flex justify-between items-center bg-rose-50 px-3 py-2 rounded",children:[n.jsx("span",{className:"text-rose-700",children:"- Commission:"}),n.jsxs("span",{className:"font-semibold text-rose-800",children:["",ue.commission.toLocaleString()]})]}),ue.employeePayouts>0&&n.jsxs("div",{className:"flex justify-between items-center bg-orange-50 px-3 py-2 rounded",children:[n.jsx("span",{className:"text-orange-700",children:"- Employee Payouts:"}),n.jsxs("span",{className:"font-semibold text-orange-800",children:["",ue.employeePayouts.toLocaleString()]})]})]})]},ue.date)})})]})]})}),Dr&&n.jsxs("div",{className:"mt-6 space-y-4",children:[e.salesData.filter(ue=>ue.approvalStatus==="pending"&&ue.createdBy!==e.user?.employeeId).length>0&&n.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(jo,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),n.jsx("div",{className:"space-y-3",children:e.salesData.filter(ue=>ue.approvalStatus==="pending"&&ue.createdBy!==e.user?.employeeId).map(ue=>n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-gray-900 font-medium",children:qa(ue.date)}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by: ",ue.createdBy]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Total Sales:"}),n.jsxs("span",{className:"ml-1 font-medium",children:["",(ue.offlineSales+ue.onlineSales).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Cash in Hand:"}),n.jsxs("span",{className:"ml-1 font-medium",children:["",ue.actualCashInHand.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{try{await e.approveSalesData(ue.id),alert("Sales approved successfully!")}catch{alert("Failed to approve sales")}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Approve"}),n.jsx("button",{onClick:async()=>{try{await e.rejectSalesData(ue.id),alert("Sales rejected successfully!")}catch{alert("Failed to reject sales")}},className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:" Reject"})]})]},ue.id))})]}),e.salesData.filter(ue=>ue.approvalStatus==="pending"&&ue.createdBy!==e.user?.employeeId).length===0&&n.jsxs("div",{className:"bg-[#E8F5E9] border-2 border-[#A5D6A7] rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(jo,{className:"w-6 h-6 text-green-600"}),n.jsx("h2",{className:"text-gray-900",children:"Sales Pending Approval"})]}),n.jsx("p",{className:"text-gray-600",children:"No pending sales at the moment."})]})]})]}),X&&n.jsx(jle,{context:e,selectedStoreId:ot,selectedDate:s,systemBalance:W,onClose:()=>re(!1),onSaveSuccess:async()=>{await new Promise(ue=>setTimeout(ue,500)),window.location.reload()}}),ct&&n.jsx(kle,{context:e,selectedStoreId:ot,selectedDate:s,onClose:()=>We(!1),onSaveSuccess:async()=>{await Qt()}}),Pe&&tt&&n.jsx(Sle,{context:e,loan:tt,selectedDate:s,onClose:()=>{Ne(!1),He(null)},onSaveSuccess:async()=>{await Qt()}}),Y&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between text-white",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ky,{className:"w-6 h-6"}),n.jsx("h2",{className:"text-xl font-bold",children:"Convert Cash to Online"})]}),n.jsx("button",{onClick:()=>{V(!1),ge("")},className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Convert offline cash in hand to online cash (Paytm). This is useful when you transfer physical cash to your Paytm account."}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Expected Cash"}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["",ne.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Current Online Cash"}),n.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",W.toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Amount to Convert ()"}),n.jsx("input",{type:"number",value:ee,onChange:ue=>ge(ue.target.value),placeholder:"Enter amount",step:"0.01",min:"0",max:ne,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg",disabled:ke}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Max: ",ne.toFixed(2)]})]}),parseFloat(ee)>0&&n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"After Conversion:"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Expected Cash:"}),n.jsxs("span",{className:"font-bold text-gray-900",children:["",ne.toFixed(2),"  ",(ne-parseFloat(ee)).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Online Cash:"}),n.jsxs("span",{className:"font-bold text-purple-600",children:["",W.toFixed(2),"  ",(W+parseFloat(ee)).toFixed(2)]})]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{V(!1),ge("")},className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg font-semibold transition-colors",disabled:ke,children:"Cancel"}),n.jsx("button",{onClick:Yt,disabled:!ee||parseFloat(ee)<=0||ke,className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ke?n.jsxs(n.Fragment,{children:[n.jsx(Eo,{className:"w-4 h-4 animate-spin"}),"Converting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ky,{className:"w-4 h-4"}),"Convert"]})})]})]})]})})]})}function v$({onClose:e,employees:t}){const[r,a]=P.useState([]),[s,i]=P.useState({}),[o,l]=P.useState(!1),[d,u]=P.useState(null);P.useEffect(()=>{const g=t.filter(y=>y.type==="fulltime"||y.type==="Permanent");a(g);const b={};g.forEach(y=>{const v=y.email||`${y.name.toLowerCase().replace(/\s+/g,".")}@bhandar.com`,N=`Bhandar@${y.employeeId}`;b[y.id]={email:v,password:N}}),i(b)},[t]);const f=(g,b,y)=>{i(v=>({...v,[g]:{...v[g],[b]:y}}))},m=async()=>{l(!0),u(null);try{if(r.length===0){alert("No permanent employees found. Please add permanent employees first."),l(!1);return}const g=r.map(v=>({name:v.name,email:s[v.id].email,password:s[v.id].password,employeeId:v.employeeId}));console.log("Creating accounts for employees:",g);const b=await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/auth/create-employee-accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify({employees:g})}),y=await b.json();if(console.log("Server response:",y),!b.ok)throw console.error("Server error:",y),new Error(y.error||`Failed to create accounts (Status: ${b.status})`);u({deleted:y.deleted||0,failed:y.failed,message:y.message,details:[...y.results||[],...y.errors||[]]})}catch(g){console.error("Error creating employee accounts:",g),alert(`Failed to create employee accounts: ${g instanceof Error?g.message:String(g)}`)}finally{l(!1)}},p=()=>{const g=r.map(k=>({"Employee ID":k.employeeId,Name:k.name,Email:s[k.id].email,Password:s[k.id].password,"Monthly Salary":k.monthlySalary||0})),b=[Object.keys(g[0]).join(","),...g.map(k=>Object.values(k).join(","))].join(`
`),y=new Blob([b],{type:"text/csv"}),v=window.URL.createObjectURL(y),N=document.createElement("a");N.href=v,N.download="employee-credentials.csv",N.click(),window.URL.revokeObjectURL(v)};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx(Ui,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl",children:"Prepare Employee Login Credentials"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Generate signup credentials for ",r.length," permanent employees"]})]})]}),n.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[n.jsxs("h3",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[n.jsx(Nr,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Important: Employees Must Complete Signup"})]}),n.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:d.message||"Old accounts have been deleted. Employees must now signup using their credentials below."}),n.jsx("p",{className:"text-yellow-700 text-sm",children:'Download the credentials below and share them with employees. They should go to the login page and click "Sign up" to create their accounts.'})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[n.jsx(bo,{className:"w-5 h-5"}),n.jsx("span",{children:"Accounts Prepared"})]}),n.jsx("div",{className:"text-2xl mt-2",children:d.deleted})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx(Nr,{className:"w-5 h-5"}),n.jsx("span",{children:"Failed"})]}),n.jsx("div",{className:"text-2xl mt-2",children:d.failed})]})]}),n.jsx("div",{className:"space-y-2",children:d.details.map((g,b)=>n.jsx("div",{className:`p-3 rounded-lg border ${g.status==="created"?"bg-green-50 border-green-200":g.status==="updated"?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:g.email}),n.jsxs("span",{className:"text-sm",children:[g.status==="created"&&n.jsx("span",{className:"text-green-700",children:" Created"}),g.status==="updated"&&n.jsx("span",{className:"text-blue-700",children:" Updated"}),g.error&&n.jsxs("span",{className:"text-red-700",children:[" ",g.error]})]})]})},b))}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-yellow-800",children:" All accounts have been processed. Download the credentials CSV to share login information with employees."})})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-blue-800",children:["Review and modify the email addresses and passwords below before creating accounts. Default passwords follow the pattern: Bhandar@","{EmployeeID}"]})}),n.jsx("div",{className:"space-y-3",children:r.map(g=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:g.name}),n.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",g.employeeId]})]}),g.email&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Has Account"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[n.jsx(Wh,{className:"w-3 h-3"}),"Email Address"]}),n.jsx("input",{type:"email",value:s[g.id]?.email||"",onChange:b=>f(g.id,"email",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"employee@bhandar.com"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[n.jsx(bj,{className:"w-3 h-3"}),"Password"]}),n.jsx("input",{type:"text",value:s[g.id]?.password||"",onChange:b=>f(g.id,"password",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"Password123"})]})]})]},g.id))})]})}),n.jsx("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Download Credentials CSV"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Close"}),!d&&n.jsx("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Credentials..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ui,{className:"w-4 h-4"}),"Prepare Signup Credentials"]})})]})]})})]})})}function bs({value:e,onChange:t,label:r,className:a="",min:s,max:i}){const o=P.useRef(null),l=()=>{try{o.current?.showPicker?.()}catch{}},d=f=>f?qa(f):"Select date",u=a.includes("w-full");return n.jsxs("div",{className:u?"w-full":`flex items-center gap-2 ${a}`,children:[r&&n.jsx("label",{className:`text-sm text-gray-600 ${u?"block mb-2":"whitespace-nowrap"}`,children:r}),n.jsxs("div",{onClick:l,className:`relative flex items-center gap-2 px-4 py-2 border-2 border-gray-300 rounded-lg bg-white hover:border-purple-400 hover:bg-purple-50 transition-all cursor-pointer group ${u?"w-full":"min-w-[160px]"}`,children:[n.jsx(Or,{className:"w-4 h-4 text-gray-500 group-hover:text-purple-600 transition-colors flex-shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700 group-hover:text-purple-700 transition-colors flex-1",children:d(e)}),n.jsx("input",{ref:o,type:"date",value:e,onChange:f=>t(f.target.value),min:s,max:i,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10"})]})]})}const _le=(e,t,r,a,s,i)=>{const o=s.reduce((u,f)=>u+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${a}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${a}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(u=>`
              <tr>
                <td>${new Date(u.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>Salary Payment</td>
                <td style="text-align: right;">${u.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net Salary for ${r} ${a}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${a} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,d=window.open("","_blank");d&&(d.document.write(l),d.document.close(),d.onload=()=>{d.print()})};function Lk({userRole:e,selectedDate:t,userEmployeeId:r,userName:a,selectedStoreId:s,isIncharge:i=!1,inchargeDesignation:o=null}){const[l,d]=P.useState("contract"),[u,f]=P.useState([]),[m,p]=P.useState([]),[g,b]=P.useState([]),[y,v]=P.useState([]),[N,k]=P.useState(!0),[w,A]=P.useState(!1),[S,_]=P.useState(!1),[E,C]=P.useState(""),[I,B]=P.useState("current"),[M,O]=P.useState(""),[U,ie]=P.useState(""),X=()=>{const $e=new Date,Ie=$e.getFullYear(),Et=$e.getMonth(),Be=new Date(Ie,Et+1,0),_t=`${Ie}-${String(Et+1).padStart(2,"0")}-01`,St=Be.getDate(),mt=`${Ie}-${String(Et+1).padStart(2,"0")}-${String(St).padStart(2,"0")}`;return{start:_t,end:mt,monthName:$e.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},re=()=>{const $e=new Date,Ie=$e.getMonth()===0?$e.getFullYear()-1:$e.getFullYear(),Et=$e.getMonth()===0?11:$e.getMonth()-1,Be=new Date(Ie,Et,1),_t=new Date(Ie,Et+1,0),St=`${Ie}-${String(Et+1).padStart(2,"0")}-01`,mt=_t.getDate(),Qt=`${Ie}-${String(Et+1).padStart(2,"0")}-${String(mt).padStart(2,"0")}`;return{start:St,end:Qt,monthName:Be.toLocaleDateString("en-US",{month:"long",year:"numeric"})}},oe=X(),Q=re(),[F,J]=P.useState(!1),[L,D]=P.useState(null),[Y,V]=P.useState(!1),[ee,ge]=P.useState({employeeIds:[],amount:"",date:t}),[ke,Ce]=P.useState(!1),[ce,me]=P.useState(null),[Oe,G]=P.useState(!1),ze=P.useMemo(()=>{let $e=u;return s&&($e=$e.filter(Ie=>Ie.storeId===s||Ie.storeId===null||Ie.storeId===void 0)),i&&r&&($e=$e.filter(Ie=>Ie.type==="contract"?!0:Ie.type==="fulltime"?Ie.inchargeId===r:!1)),$e},[u,s,i,r]),Ye=P.useMemo(()=>{if(!s)return m;const $e=ze.map(Ie=>Ie.id);return m.filter(Ie=>$e.includes(Ie.employeeId))},[m,ze,s]),ct=P.useMemo(()=>{let $e;if(I==="current")$e=Ye.filter(Ie=>Ie.date>=oe.start&&Ie.date<=oe.end);else if(I==="last")$e=Ye.filter(Ie=>Ie.date>=Q.start&&Ie.date<=Q.end);else{if(!M||!U)return[];$e=Ye.filter(Ie=>Ie.date>=M&&Ie.date<=U)}return $e},[Ye,I,oe,Q,M,U]);P.useEffect(()=>{We()},[]);const We=async()=>{k(!0);try{console.log("Loading employees, payouts, salary advances, and overheads from server...");const[$e,Ie,Et,Be]=await Promise.all([yl(),fc(),O2(),pD()]);console.log("Loaded employees:",$e),console.log("Loaded payouts:",Ie),console.log("Loaded salary advances:",Et),console.log("Loaded overheads:",Be),f($e||[]),p(Ie||[]),b(Et||[]),v(Be||[])}catch($e){console.error("Error loading payroll data:",$e)}finally{k(!1)}},Pe=async $e=>{try{const Ie=g.find(_t=>_t.id===$e);if(!Ie)return;const Be={...Ie,status:"approved",approvedBy:a||r||"Cluster Head",approvedDate:new Date().toISOString()};await Ij($e,Be),alert("Salary advance approved successfully!"),We()}catch(Ie){console.error("Error approving salary advance:",Ie),alert("Failed to approve salary advance. Please try again.")}},Ne=async $e=>{const Ie=prompt("Please provide a reason for rejection:");if(Ie)try{const Et=g.find(_t=>_t.id===$e);if(!Et)return;const Be={...Et,status:"rejected",rejectionReason:Ie,approvedBy:a||r||"Cluster Head",approvedDate:new Date().toISOString()};await Ij($e,Be),alert("Salary advance rejected."),We()}catch(Et){console.error("Error rejecting salary advance:",Et),alert("Failed to reject salary advance. Please try again.")}},tt=async()=>{if(!E||!r)return;const $e=parseFloat(E);if(isNaN($e)||$e<=0){alert("Please enter a valid amount");return}try{const Ie=u.find(St=>St.employeeId===r);if(!Ie){alert("Employee not found");return}if(Ie.type!=="fulltime"){alert("Only permanent employees can apply for salary advance");return}if(g.some(St=>St.employeeId===Ie.id&&(St.status==="pending"||St.status==="approved"&&St.remainingAmount>0))){alert("You already have an active or pending salary advance");return}const Be=$e/4,_t={employeeId:Ie.id,employeeName:Ie.name,employeeEmployeeId:Ie.employeeId,amount:$e,monthlyDeduction:Be,remainingAmount:$e,status:"pending",requestDate:new Date().toISOString()};await P2(_t),alert("Salary advance request submitted successfully!"),_(!1),C(""),We()}catch(Ie){console.error("Error applying for salary advance:",Ie),alert("Failed to submit salary advance request. Please try again.")}},He=async()=>{if(ee.employeeIds.length===0||!ee.amount){alert("Please select employees and enter amount");return}if(!w)try{A(!0);const $e=ee.employeeIds.map(Et=>{const Be=u.find(_t=>_t.id===Et);return{id:crypto.randomUUID(),employeeId:Et,employeeName:Be?.name||"",amount:parseFloat(ee.amount),date:ee.date,storeId:s||void 0,createdAt:new Date().toISOString()}});console.log("Adding payouts:",$e);const Ie=await XD($e);console.log("Payouts added successfully:",Ie),p([...m,...$e]),V(!1),ge({employeeIds:[],amount:"",date:t}),alert("Payout added successfully!")}catch($e){console.error("Error adding payout:",$e);const Ie=$e instanceof Error?$e.message:"Unknown error occurred";alert(`Failed to add payout: ${Ie}`)}finally{A(!1)}},pt=async()=>{if(L)try{console.log("PayrollManagement: Updating employee:",L),await(void 0)(L.id,L),f(u.map($e=>$e.id===L.id?L:$e)),J(!1),D(null),alert("Employee updated successfully!")}catch($e){console.error("PayrollManagement: Error updating employee:",$e);const Ie=$e instanceof Error?$e.message:"Unknown error";alert(`Failed to update employee: ${Ie}`)}},Vt=async $e=>{if(confirm("Are you sure you want to delete this employee? This action cannot be undone."))try{await HD($e),f(u.filter(Ie=>Ie.id!==$e)),p(m.filter(Ie=>Ie.employeeId!==$e)),alert("Employee deleted successfully!")}catch(Ie){console.error("Error deleting employee:",Ie),alert("Failed to delete employee")}},hr=async()=>{if(ce)try{await JD(ce.id,{amount:ce.amount,date:ce.date}),p(m.map($e=>$e.id===ce.id?ce:$e)),Ce(!1),me(null),alert("Payout updated successfully!")}catch($e){console.error("Error updating payout:",$e),alert("Failed to update payout")}},Jt=async $e=>{if(confirm("Are you sure you want to delete this payout?"))try{await QD($e),p(m.filter(Ie=>Ie.id!==$e)),alert("Payout deleted successfully!")}catch(Ie){console.error("Error deleting payout:",Ie),alert("Failed to delete payout")}},Dr=()=>{const $e=ze.filter(St=>St.type==="contract"),Ie=ct.filter(St=>ze.find(Qt=>Qt.id===St.employeeId)?.type==="contract"),Et=Ie.reduce((St,mt)=>St+mt.amount,0),Be=$e.map(St=>{const mt=Ie.filter(Tt=>Tt.employeeId===St.id),Qt=new Set(mt.map(Tt=>Tt.date));return{...St,daysWorked:Qt.size,totalPay:mt.reduce((Tt,Zt)=>Tt+Zt.amount,0)}}),_t=Be.reduce((St,mt)=>St+mt.daysWorked,0);return{totalPayout:Et,employeeWorkDays:Be,totalDaysWorked:_t}},Hr=()=>{const $e=ze.filter(_t=>_t.type==="fulltime"),Ie=ct.filter(_t=>ze.find(mt=>mt.id===_t.employeeId)?.type==="fulltime"),Et=Ie.reduce((_t,St)=>_t+St.amount,0),Be=$e.map(_t=>{const St=Ie.filter(mt=>mt.employeeId===_t.id);return{..._t,totalPaid:St.reduce((mt,Qt)=>mt+Qt.amount,0),lastPayout:St.length>0?St[St.length-1]:null}});return{totalPayout:Et,employeePayouts:Be}},ot=$e=>{let Ie;if(I==="current")Ie=y.filter(Be=>Be.date>=oe.start&&Be.date<=oe.end);else if(I==="last")Ie=y.filter(Be=>Be.date>=Q.start&&Be.date<=Q.end);else{if(!M||!U)return 0;Ie=y.filter(Be=>Be.date>=M&&Be.date<=U)}return Ie.filter(Be=>Be.category==="personal_expense"&&Be.employeeId===$e).reduce((Be,_t)=>Be+_t.amount,0)},qt=$e=>$e.split(" ").map(Ie=>Ie[0]).join("").toUpperCase().slice(0,2),Cr=$e=>{const Ie=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-indigo-500"];return Ie[$e%Ie.length]};Dr(),Hr();const kt=l==="contract"?ze.filter($e=>$e.type==="contract"):ze.filter($e=>$e.type==="fulltime"),Gt=()=>e==="audit"?!1:l==="contract"&&e==="manager"||l==="permanent"&&e==="cluster_head";return N?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading payroll data..."})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Payroll Management"}),n.jsx("p",{className:"text-gray-600",children:"Manage and track employee payments"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("div",{className:"flex gap-8 px-6",children:[e==="manager"&&r&&n.jsx("button",{onClick:()=>d("my-payouts"),className:`py-4 border-b-2 transition-colors ${l==="my-payouts"?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"My Payouts"}),n.jsx("button",{onClick:()=>d("contract"),className:`py-4 border-b-2 transition-colors ${l==="contract"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Contract Employees"}),(e==="cluster_head"||e==="audit")&&n.jsx("button",{onClick:()=>d("permanent"),className:`py-4 border-b-2 transition-colors ${l==="permanent"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Permanent Employees"}),(e==="cluster_head"||e==="audit")&&n.jsx("button",{onClick:()=>d("advances"),className:`py-4 border-b-2 transition-colors ${l==="advances"?"border-purple-500 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pl,{className:"w-4 h-4"}),n.jsx("span",{children:"Salary Advances"}),g.filter($e=>$e.status==="pending").length>0&&n.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:g.filter($e=>$e.status==="pending").length})]})})]})}),n.jsxs("div",{className:"p-6 border-b border-gray-200 space-y-4",children:[n.jsx("div",{className:"flex gap-4 flex-wrap",children:Gt()&&n.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(jn,{className:"w-4 h-4"}),"Add Payout"]})}),n.jsx("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5 text-purple-700"}),n.jsx("span",{className:"text-gray-900",children:"View Period:"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>B("current"),className:`px-4 py-2 rounded-lg transition-colors ${I==="current"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Current Month"}),n.jsx("button",{onClick:()=>B("last"),className:`px-4 py-2 rounded-lg transition-colors ${I==="last"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Last Month"}),n.jsx("button",{onClick:()=>B("custom"),className:`px-4 py-2 rounded-lg transition-colors ${I==="custom"?"bg-purple-600 text-white":"bg-white text-gray-700 hover:bg-purple-50"}`,children:"Custom Range"})]}),I==="current"?n.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:n.jsx("span",{className:"text-gray-900 font-medium",children:oe.monthName})}):I==="last"?n.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg",children:n.jsx("span",{className:"text-gray-900 font-medium",children:Q.monthName})}):n.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[n.jsx(bs,{label:"From:",value:M,onChange:O}),n.jsx(bs,{label:"To:",value:U,onChange:ie})]})]})})]}),l==="contract"&&(()=>{const $e=u.filter(Be=>Be.type==="contract"),Ie=ct.filter(Be=>u.find(St=>St.id===Be.employeeId)?.type==="contract");console.log("Rendering contract tab"),console.log("Total employees:",u.length),console.log("Contract employees:",$e.length,$e),console.log("Contract payouts:",Ie.length,Ie);const Et=Ie.reduce((Be,_t)=>Be+_t.amount,0);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Contract Employees"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Daily rate workers"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),n.jsx("div",{className:"text-2xl text-blue-600",children:$e.length})]})]}),$e.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(Dn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No contract employees yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$e.map((Be,_t)=>{const St=Ie.filter(Tt=>Tt.employeeId===Be.id),mt=St.reduce((Tt,Zt)=>Tt+Zt.amount,0),Qt=new Set(St.map(Tt=>Tt.date)).size;return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full ${Cr(_t)} flex items-center justify-center text-white`,children:qt(Be.name)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:Be.name}),n.jsx("div",{className:"text-xs text-gray-500",children:Be.employeeId})]})]}),e!=="audit"&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{onClick:()=>{D(Be),J(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit employee",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Vt(Be.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete employee",children:n.jsx(Rs,{className:"w-4 h-4"})})]})]}),Be.role&&n.jsx("div",{className:"mb-2",children:n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Be.role})}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Phone:"}),n.jsx("span",{className:"text-gray-900",children:Be.phone})]}),Be.dailyRate&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),n.jsxs("span",{className:"text-green-600",children:["",Be.dailyRate]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Days Worked:"}),n.jsx("span",{className:"text-gray-900",children:Qt})]}),n.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[n.jsx("span",{className:"text-gray-600",children:"Total Paid:"}),n.jsxs("span",{className:"text-gray-900",children:["",mt.toLocaleString()]})]})]})]},Be.id)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Recent Payouts"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Individual payout records for ",I==="current"?oe.monthName:"selected period"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),n.jsxs("div",{className:"text-2xl text-green-600",children:["",Et.toLocaleString()]})]})]}),Ie.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts recorded for this period"}),n.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track contract employee payments"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e!=="audit"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:Ie.sort((Be,_t)=>new Date(_t.date).getTime()-new Date(Be.date).getTime()).map((Be,_t)=>{const St=u.find(mt=>mt.id===Be.employeeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${Cr(_t)} flex items-center justify-center text-white text-sm`,children:qt(Be.employeeName)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:Be.employeeName}),St?.role&&n.jsx("div",{className:"text-xs text-gray-500",children:St.role})]})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:St?.employeeId||"-"})}),n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:new Date(Be.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-gray-900",children:["",Be.amount.toLocaleString()]})}),e!=="audit"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{me(Be),Ce(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Jt(Be.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:n.jsx(Rs,{className:"w-4 h-4"})})]})})]},Be.id)})})]})})]})]})})(),l==="my-payouts"&&r&&(()=>{const $e=m.filter(bt=>bt.employeeId===r),Ie=u.find(bt=>bt.employeeId===r),Et=Ie?.type||"fulltime",Be=g.filter(bt=>bt.employeeId===Ie?.id),_t=Be.some(bt=>bt.status==="pending"||bt.status==="approved"&&bt.remainingAmount>0),St=new Date;St.getDate();const mt=[];for(let bt=0;bt<12;bt++){const tn=new Date(St.getFullYear(),St.getMonth()-bt,1),Rn=tn.toLocaleDateString("en-US",{month:"long"}),Bt=tn.getFullYear().toString(),Ut=tn.getMonth()+1,yn=new Date(tn.getFullYear(),tn.getMonth()+1,5),rn=St>=yn,kr=$e.filter(nt=>{const it=new Date(nt.date);return it.getMonth()+1===Ut&&it.getFullYear()===tn.getFullYear()}),we=kr.reduce((nt,it)=>nt+it.amount,0);mt.push({month:Rn,year:Bt,payouts:kr,total:we,isAvailable:rn})}const Qt=ct.filter(bt=>bt.employeeId===r),Tt=Qt.reduce((bt,tn)=>bt+tn.amount,0),Zt=Ie?ot(Ie.id):0,xn=-(Zt+Tt);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"My Payout History"}),n.jsx("p",{className:"text-sm text-gray-600",children:"View your salary records and download monthly payslips"})]}),Et==="fulltime"&&n.jsxs("button",{onClick:()=>_(!0),disabled:_t,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${_t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-md"}`,title:_t?"You already have an active salary advance":"Apply for salary advance",children:[n.jsx(pl,{className:"w-4 h-4"}),_t?"Advance Active":"Apply for Advance"]})]}),Be.length>0&&n.jsx("div",{className:"mb-6 space-y-3",children:Be.map(bt=>n.jsx("div",{className:`border-2 rounded-lg p-4 ${bt.status==="pending"?"border-yellow-300 bg-yellow-50":bt.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[bt.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(_n,{className:"w-5 h-5 text-yellow-600"}),n.jsx("span",{className:"font-medium text-yellow-900",children:"Advance Request Pending"})]}),bt.status==="approved"&&n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"font-medium text-green-900",children:"Advance Approved"})]}),bt.status==="rejected"&&n.jsxs(n.Fragment,{children:[n.jsx(Qn,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"font-medium text-red-900",children:"Advance Rejected"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",bt.amount.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",bt.monthlyDeduction.toLocaleString()]})]}),bt.status==="approved"&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["",bt.remainingAmount.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Request Date"}),n.jsx("p",{className:"text-sm text-gray-900",children:new Date(bt.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),bt.status==="approved"&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Deduction Period"}),n.jsx("p",{className:"text-sm text-gray-900",children:(()=>{const[tn,Rn]=bt.startMonth.split("-"),[Bt,Ut]=bt.endMonth.split("-"),yn=new Date(parseInt(tn),parseInt(Rn)-1,1),rn=new Date(parseInt(Bt),parseInt(Ut)-1,1),kr=yn.toLocaleDateString("en-US",{month:"short",year:"numeric"}),we=rn.toLocaleDateString("en-US",{month:"short",year:"numeric"});return`${kr} to ${we} (${bt.installments} months)`})()})]}),bt.status==="rejected"&&bt.rejectionReason&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-red-200",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Rejection Reason"}),n.jsx("p",{className:"text-sm text-red-900",children:bt.rejectionReason})]})]})})},bt.id))}),n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-6 mb-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Period"}),n.jsx("p",{className:"text-sm text-gray-700 font-medium",children:I==="current"?oe.monthName:I==="last"?Q.monthName:`${M} to ${U}`})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[Qt.length," payment",Qt.length!==1?"s":""]})})]}),n.jsxs("div",{className:"pt-4 border-t border-green-200 space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Gross Pay"}),n.jsxs("p",{className:"text-2xl text-green-600",children:["",Tt.toLocaleString()]})]}),Zt>0&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wB,{className:"w-4 h-4 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Personal Expenses"})]}),n.jsxs("p",{className:"text-xl text-red-600",children:["",Zt.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-green-300",children:[n.jsx("p",{className:"text-base font-semibold text-gray-900",children:"Net Amount"}),n.jsxs("p",{className:"text-3xl font-bold text-green-700",children:["",xn.toLocaleString()]})]})]})]})}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Fs,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Payslips are available for download after the 4th of each month"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:mt.map((bt,tn)=>n.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${bt.isAvailable&&bt.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold",children:[bt.month," ",bt.year]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[bt.payouts.length," payment",bt.payouts.length!==1?"s":""]})]}),bt.isAvailable&&bt.payouts.length>0?n.jsxs("button",{onClick:()=>_le(a||"Employee",r,bt.month,bt.year,bt.payouts,Et),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[n.jsx(Os,{className:"w-4 h-4"}),"Download"]}):n.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:bt.payouts.length===0?"No Data":"Not Available"})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",bt.total.toLocaleString("en-IN")]})]})]},tn))})]}),n.jsx("div",{className:"mb-4",children:n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Payment Details"})}),Qt.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts found for the selected period"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"})]})}),n.jsx("tbody",{children:Qt.sort((bt,tn)=>new Date(tn.date).getTime()-new Date(bt.date).getTime()).map(bt=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:new Date(bt.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:r})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-green-600",children:["",bt.amount.toLocaleString()]})})]},bt.id))})]})})]})})(),l==="permanent"&&(()=>{const $e=u.filter(Be=>Be.type==="fulltime"),Ie=ct.filter(Be=>u.find(St=>St.id===Be.employeeId)?.type==="fulltime"),Et=Ie.reduce((Be,_t)=>Be+_t.amount,0);return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Permanent Employees"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Full-time employees - Monthly/periodic payouts"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Employees"}),n.jsx("div",{className:"text-2xl text-blue-600",children:$e.length})]})]}),$e.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(Dn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No permanent employees yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Contact your cluster head to add employees"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Role"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Phone"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Last Payout"}),n.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Total Paid (",I==="current"?"This Month":I==="last"?"Last Month":"Period",")"]}),n.jsxs("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:["Personal Expenses (",I==="current"?"This Month":I==="last"?"Last Month":"Period",")"]}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Net Amount"}),e==="cluster_head"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:$e.map((Be,_t)=>{const St=Ie.filter(xn=>xn.employeeId===Be.id),mt=St.reduce((xn,bt)=>xn+bt.amount,0),Qt=ot(Be.id),Tt=-(Qt+mt),Zt=St.length>0?St.sort((xn,bt)=>new Date(bt.date).getTime()-new Date(xn.date).getTime())[0]:null;return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${Cr(_t)} flex items-center justify-center text-white text-sm`,children:qt(Be.name)}),n.jsx("div",{className:"text-gray-900",children:Be.name})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:Be.employeeId})}),n.jsx("td",{className:"py-4 px-4",children:Be.role&&n.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:Be.role})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:Be.phone})}),n.jsx("td",{className:"py-4 px-4",children:Zt?n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:new Date(Zt.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),n.jsxs("div",{className:"text-xs text-gray-500",children:["",Zt.amount.toLocaleString()]})]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"No payouts"})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-green-600",children:["",mt.toLocaleString()]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:Qt>0?n.jsxs("span",{className:"text-red-600",children:["- ",Qt.toLocaleString()]}):n.jsx("span",{className:"text-gray-400",children:"0"})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:`font-semibold ${Tt<0?"text-red-600":Tt>0?"text-green-600":"text-gray-900"}`,children:["",Tt.toLocaleString()]})}),e==="cluster_head"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{D(Be),J(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit employee",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Vt(Be.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete employee",children:n.jsx(Rs,{className:"w-4 h-4"})})]})})]},Be.id)})})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Payout History"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Salary payments for ",I==="current"?oe.monthName:I==="last"?Q.monthName:"selected period"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Payout"}),n.jsxs("div",{className:"text-2xl text-green-600",children:["",Et.toLocaleString()]})]})]}),Ie.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg",children:[n.jsx(jn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),n.jsx("p",{children:"No payouts recorded for this period"}),n.jsx("p",{className:"text-sm mt-2",children:"Add payouts to track permanent employee payments"})]}):n.jsx("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Employee ID"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm text-gray-600",children:"Date"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Amount"}),e==="cluster_head"&&n.jsx("th",{className:"text-right py-3 px-4 text-sm text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:Ie.sort((Be,_t)=>new Date(_t.date).getTime()-new Date(Be.date).getTime()).map((Be,_t)=>{const St=u.find(mt=>mt.id===Be.employeeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${Cr(_t)} flex items-center justify-center text-white text-sm`,children:qt(Be.employeeName)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:Be.employeeName}),St?.role&&n.jsx("div",{className:"text-xs text-gray-500",children:St.role})]})]})}),n.jsx("td",{className:"py-4 px-4",children:n.jsx("span",{className:"text-sm text-gray-600",children:St?.employeeId||"-"})}),n.jsx("td",{className:"py-4 px-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-900",children:new Date(Be.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("span",{className:"text-gray-900",children:["",Be.amount.toLocaleString()]})}),e==="cluster_head"&&n.jsx("td",{className:"py-4 px-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>{me(Be),Ce(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit payout",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>Jt(Be.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete payout",children:n.jsx(Rs,{className:"w-4 h-4"})})]})})]},Be.id)})})]})})]})]})})(),l==="advances"&&(e==="cluster_head"||e==="audit")&&(()=>{const $e=g.filter(Be=>Be.status==="pending"),Ie=g.filter(Be=>Be.status==="approved"),Et=g.filter(Be=>Be.status==="rejected");return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Salary Advance Requests"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Review and manage employee salary advance requests"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-700 mb-1",children:"Pending Requests"}),n.jsx("p",{className:"text-2xl font-semibold text-yellow-900",children:$e.length})]}),n.jsx(_n,{className:"w-10 h-10 text-yellow-400"})]})}),n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Approved"}),n.jsx("p",{className:"text-2xl font-semibold text-green-900",children:Ie.length})]}),n.jsx(or,{className:"w-10 h-10 text-green-400"})]})}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-red-700 mb-1",children:"Rejected"}),n.jsx("p",{className:"text-2xl font-semibold text-red-900",children:Et.length})]}),n.jsx(Qn,{className:"w-10 h-10 text-red-400"})]})})]}),$e.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(_n,{className:"w-5 h-5 text-yellow-600"}),"Pending Requests"]}),n.jsx("div",{className:"space-y-4",children:$e.map(Be=>n.jsxs("div",{className:"border-2 border-yellow-300 bg-yellow-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Be.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Employee ID: ",Be.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Requested on ",new Date(Be.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Amount"}),n.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["",Be.amount.toLocaleString("en-IN")]})]})]}),n.jsx("div",{className:"bg-white border border-yellow-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",Be.monthlyDeduction.toLocaleString("en-IN")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Installments"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Be.installments," months"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[_t,St]=Be.startMonth.split("-");return new Date(parseInt(_t),parseInt(St)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[_t,St]=Be.endMonth.split("-");return new Date(parseInt(_t),parseInt(St)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]})}),e==="cluster_head"&&n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:()=>Pe(Be.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md font-medium",children:[n.jsx(or,{className:"w-5 h-5"}),n.jsx("span",{children:"Approve"})]}),n.jsxs("button",{onClick:()=>Ne(Be.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 transition-all shadow-md font-medium",children:[n.jsx(Qn,{className:"w-5 h-5"}),n.jsx("span",{children:"Reject"})]})]})]},Be.id))})]}),Ie.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(or,{className:"w-5 h-5 text-green-600"}),"Approved Advances"]}),n.jsx("div",{className:"space-y-4",children:Ie.map(Be=>n.jsxs("div",{className:"border-2 border-green-300 bg-green-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Be.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Be.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Approved on ",new Date(Be.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Amount"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Be.amount.toLocaleString("en-IN")]}),n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Remaining: ",Be.remainingAmount.toLocaleString("en-IN")]})]})]}),n.jsxs("div",{className:"bg-white border border-green-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Progress"}),n.jsx("div",{className:"space-y-2",children:Be.deductions.map((_t,St)=>n.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${_t.deducted?"bg-green-100 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_t.deducted?n.jsx(or,{className:"w-4 h-4 text-green-600"}):n.jsx(_n,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:new Date(_t.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),n.jsxs("span",{className:`text-sm font-semibold ${_t.deducted?"text-green-700":"text-gray-700"}`,children:["",_t.amount.toLocaleString("en-IN")]})]},St))})]})]},Be.id))})]}),Et.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Qn,{className:"w-5 h-5 text-red-600"}),"Rejected Requests"]}),n.jsx("div",{className:"space-y-4",children:Et.map(Be=>n.jsxs("div",{className:"border-2 border-red-300 bg-red-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:Be.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Employee ID: ",Be.employeeEmployeeId]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Rejected on ",new Date(Be.approvedDate||"").toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Requested Amount"}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",Be.amount.toLocaleString("en-IN")]})]})]}),Be.rejectionReason&&n.jsxs("div",{className:"bg-white border border-red-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),n.jsx("p",{className:"text-sm text-red-700",children:Be.rejectionReason})]})]},Be.id))})]}),g.length===0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-12 text-center",children:[n.jsx(pl,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No Salary Advance Requests"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Employees can apply for salary advances from their dashboard"})]})]})})()]})]}),S&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Apply for Salary Advance"}),n.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-purple-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-purple-800 font-medium mb-1",children:"Recovery Terms"}),n.jsx("p",{className:"text-sm text-purple-700",children:"The advance will be automatically deducted from your salary over the next 4 months in equal installments."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Advance Amount *"}),n.jsx("input",{type:"number",value:E,onChange:$e=>C($e.target.value),placeholder:"Enter amount (e.g., 10000)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),E&&!isNaN(parseFloat(E))&&parseFloat(E)>0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Monthly Deduction Preview:"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",(parseFloat(E)/4).toLocaleString("en-IN"),"/month"]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"for 4 months"})]})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>{_(!1),C("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-gray-700",children:"Cancel"}),n.jsx("button",{onClick:tt,disabled:!E||isNaN(parseFloat(E))||parseFloat(E)<=0,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Request"})]})]})}),F&&L&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Employee"}),n.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee ID"}),n.jsx("input",{type:"text",value:L.employeeId,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),n.jsx("input",{type:"text",value:L.name,onChange:$e=>D({...L,name:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone *"}),n.jsx("input",{type:"tel",value:L.phone,onChange:$e=>D({...L,phone:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role (Optional)"}),n.jsx("input",{type:"text",value:L.role||"",onChange:$e=>D({...L,role:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),L.type==="contract"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Daily Rate (Optional)"}),n.jsx("input",{type:"number",value:L.dailyRate||"",onChange:$e=>D({...L,dailyRate:parseFloat($e.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:pt,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Employee"})]})]})}),Y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Add Payout"}),n.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Employees *"}),n.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:kt.map($e=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[n.jsx("input",{type:"checkbox",checked:ee.employeeIds.includes($e.id),onChange:Ie=>{Ie.target.checked?ge({...ee,employeeIds:[...ee.employeeIds,$e.id]}):ge({...ee,employeeIds:ee.employeeIds.filter(Et=>Et!==$e.id)})},className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm text-gray-900",children:[$e.name," (",$e.employeeId,")"]})]},$e.id))}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ee.employeeIds.length," employee(s) selected"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),n.jsx("input",{type:"number",step:"0.01",value:ee.amount,onChange:$e=>ge({...ee,amount:$e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter amount"})]}),n.jsx(bs,{label:"Date *",value:ee.date,onChange:$e=>ge({...ee,date:$e}),className:"w-full"})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:He,disabled:w,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:w?"Adding...":"Add Payout"})]})]})}),ke&&ce&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Edit Payout"}),n.jsx("button",{onClick:()=>Ce(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employee"}),n.jsx("input",{type:"text",value:ce.employeeName,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Amount () *"}),n.jsx("input",{type:"number",step:"0.01",value:ce.amount,onChange:$e=>me({...ce,amount:parseFloat($e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsx(bs,{label:"Date *",value:ce.date,onChange:$e=>me({...ce,date:$e}),className:"w-full"})]}),n.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[n.jsx("button",{onClick:()=>Ce(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:hr,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Payout"})]})]})}),Oe&&n.jsx(v$,{onClose:()=>G(!1),employees:u})]})}function Ele({context:e,selectedStoreId:t,selectedProductionHouseId:r}){const[a,s]=P.useState("thisMonth"),[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState([]),[m,p]=P.useState(null),[g,b]=P.useState(!0),[y,v]=P.useState(null),N=t||e.user?.storeId;P.useEffect(()=>{w()},[e.inventory,e.salesData,e.productionData,e.productionRequests,a,i,l,N]);const k=()=>{const C=new Date;let I=new Date,B=new Date(C);switch(a){case"day":I=new Date(C);break;case"thisMonth":I=new Date(C.getFullYear(),C.getMonth(),1),B=new Date(C);break;case"prevMonth":I=new Date(C.getFullYear(),C.getMonth()-1,1),B=new Date(C.getFullYear(),C.getMonth(),0);break;case"thisYear":I=new Date(C.getFullYear(),0,1),B=new Date(C);break;case"prevYear":I=new Date(C.getFullYear()-1,0,1),B=new Date(C.getFullYear()-1,11,31);break;case"custom":if(i&&l)return{startDate:new Date(i),endDate:new Date(l)};I=new Date(C),I.setDate(C.getDate()-7);break}return{startDate:I,endDate:B}},w=()=>{b(!0);const{startDate:C,endDate:I}=k();console.log(" DataCapture Context Check:",{hasProductionRequests:!!e.productionRequests,productionRequestsCount:e.productionRequests?.length||0,productionRequestsArray:e.productionRequests,firstThreeRequests:e.productionRequests?.slice(0,3)});const B=new Map,M=new Date(C);for(;M<=I;){const F=M.getFullYear(),J=String(M.getMonth()+1).padStart(2,"0"),L=String(M.getDate()).padStart(2,"0"),D=`${F}-${J}-${L}`;B.set(D,{date:D,inventoryLogged:!1,inventoryCount:0,inventoryLoggedAt:null,inventoryLoggedBy:"",salesLogged:!1,salesLoggedAt:null,salesLoggedBy:"",productionLogged:!1,productionLoggedAt:null,productionLoggedBy:"",stockRequestLogged:!1,stockRequestLoggedAt:null,stockRequestLoggedBy:"",cashDiscrepancy:0,managerEmail:"",managerName:"",status:"missing",lateEntry:!1}),M.setDate(M.getDate()+1)}const O=new Map;(N?e.inventory.filter(F=>F.storeId===N):e.inventory).forEach(F=>{O.has(F.date)||O.set(F.date,[]),O.get(F.date)?.push(F)}),O.forEach((F,J)=>{if(B.has(J)){const L=B.get(J);if(L.inventoryLogged=!0,L.inventoryCount=F.length,F.length>0){const D=F[0],V=D.id.split("-")[0];if(D.createdByName?L.inventoryLoggedBy=D.createdByName:D.createdByEmail?L.inventoryLoggedBy=D.createdByEmail:D.createdBy?typeof D.createdBy=="string"&&D.createdBy.includes("-")?L.inventoryLoggedBy=D.userId?`User ${D.userId.substring(0,8)}`:"Manager":L.inventoryLoggedBy=D.createdBy:D.userId?L.inventoryLoggedBy=`User ${D.userId.substring(0,8)}`:L.inventoryLoggedBy="Unknown User",V){const ee=parseInt(V);if(!isNaN(ee)&&ee>0){L.inventoryLoggedAt=new Date(ee).toISOString();const ge=new Date(ee),ke=new Date(J+"T23:59:59");L.lateEntry=ge>ke}}}}}),(N?e.salesData.filter(F=>F.storeId===N):e.salesData).forEach(F=>{if(B.has(F.date)){const J=B.get(F.date);J.salesLogged=!0,J.cashDiscrepancy=Math.abs(F.salesDiscrepancy!==void 0?F.salesDiscrepancy:F.cashOffset||0),F.createdByName?J.salesLoggedBy=F.createdByName:F.createdByEmail?J.salesLoggedBy=F.createdByEmail:F.createdBy?typeof F.createdBy=="string"&&F.createdBy.includes("-")?J.salesLoggedBy="Manager":J.salesLoggedBy=F.createdBy:J.salesLoggedBy="Unknown User",e.user&&(J.managerEmail=e.user.email,J.managerName=e.user.name);const L=F.id.split("-")[0];if(L){const D=parseInt(L);if(!isNaN(D)&&D>0){J.salesLoggedAt=new Date(D).toISOString();const Y=new Date(D),V=new Date(F.date+"T23:59:59");Y>V&&(J.lateEntry=!0)}}}}),e.productionData.forEach(F=>{if(B.has(F.date)){const J=B.get(F.date);J.productionLogged=!0;let L="";if(F.createdByName)L=F.createdByName;else if(F.createdByEmail)L=F.createdByEmail;else if(F.createdBy){const D=e.employees?.find(Y=>Y.employeeId===F.createdBy);D?L=D.name:typeof F.createdBy=="string"&&F.createdBy.includes("-")?L="Production Manager":L=F.createdBy}else L="Unknown User";if(J.productionLoggedBy=L,F.createdAt){J.productionLoggedAt=F.createdAt;const D=new Date(F.createdAt),Y=new Date(F.date+"T23:59:59");D>Y&&(J.lateEntry=!0)}else J.productionLoggedAt=new Date(F.date+"T12:00:00").toISOString()}});const re=N?e.productionRequests.filter(F=>F.storeId===N):e.productionRequests;console.log(" DataCapture - Stock Requests Debug:",{totalStockRequests:e.productionRequests.length,filteredStockRequests:re.length,effectiveStoreId:N,stockRequestDates:re.map(F=>F.requestDate),dateMapKeys:Array.from(B.keys()),stockRequestIds:re.map(F=>F.id),sampleRequest:re[0],dateRangeStart:Array.from(B.keys()).sort()[0],dateRangeEnd:Array.from(B.keys()).sort().reverse()[0]}),re.forEach(F=>{if(B.has(F.requestDate)){const J=B.get(F.requestDate);J.stockRequestLogged=!0,F.requestedByName?J.stockRequestLoggedBy=F.requestedByName:F.requestedBy?J.stockRequestLoggedBy=F.requestedBy:J.stockRequestLoggedBy="Unknown User";const L=F.id.split("-")[0];if(L){const D=parseInt(L);if(!isNaN(D)&&D>1e12){J.stockRequestLoggedAt=new Date(D).toISOString();const Y=new Date(D),V=new Date(F.requestDate+"T23:59:59");Y>V&&(J.lateEntry=!0)}else if(F.createdAt){J.stockRequestLoggedAt=F.createdAt;const Y=new Date(F.createdAt),V=new Date(F.requestDate+"T23:59:59");Y>V&&(J.lateEntry=!0)}else J.stockRequestLoggedAt=new Date(F.requestDate+"T12:00:00").toISOString()}else F.createdAt&&(J.stockRequestLoggedAt=F.createdAt)}}),B.forEach(F=>{const J=F.inventoryLogged,L=F.salesLogged;J&&L?F.status="complete":J||L?F.status="partial":F.status="missing"});const oe=Array.from(B.values()).sort((F,J)=>new Date(J.date).getTime()-new Date(F.date).getTime());f(oe);const Q={totalDays:oe.length,daysWithData:oe.filter(F=>F.status!=="missing").length,totalDiscrepancy:oe.reduce((F,J)=>F+J.cashDiscrepancy,0),avgDiscrepancy:0,completionRate:0,onTimeRate:0};Q.avgDiscrepancy=Q.totalDiscrepancy/(oe.filter(F=>F.salesLogged).length||1),Q.completionRate=oe.filter(F=>F.status==="complete").length/Q.totalDays*100,Q.onTimeRate=oe.filter(F=>F.status==="complete"&&!F.lateEntry).length/Q.totalDays*100,p(Q),b(!1)},A=C=>C?Ag(C):"-",S=C=>qa(C),_=C=>{switch(C){case"complete":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"missing":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=C=>{switch(C){case"complete":return n.jsx(or,{className:"w-5 h-5 text-green-600"});case"partial":return n.jsx(ja,{className:"w-5 h-5 text-yellow-600"});case"missing":return n.jsx(Qn,{className:"w-5 h-5 text-red-600"});default:return n.jsx(_n,{className:"w-5 h-5 text-gray-600"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-gray-900 mb-1",children:" Data Capture Monitor"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track daily data logging and manager performance"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{onClick:()=>s("day"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="day"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),n.jsx("button",{onClick:()=>s("thisMonth"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="thisMonth"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Month"}),n.jsx("button",{onClick:()=>s("prevMonth"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="prevMonth"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Last Month"}),n.jsx("button",{onClick:()=>s("thisYear"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="thisYear"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Year"}),n.jsx("button",{onClick:()=>s("prevYear"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="prevYear"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Last Year"}),n.jsx("button",{onClick:()=>s("custom"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a==="custom"?"bg-purple-100 text-purple-800 border-2 border-purple-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Custom"})]})]}),a==="custom"&&n.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[n.jsx(bs,{label:"Start Date",value:i,onChange:o}),n.jsx(bs,{label:"End Date",value:l,onChange:d})]})]}),m&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Or,{className:"w-5 h-5 text-blue-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),n.jsx("p",{className:"text-2xl text-gray-900",children:m.totalDays})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(or,{className:"w-5 h-5 text-green-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[m.completionRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_n,{className:"w-5 h-5 text-orange-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[m.onTimeRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(uc,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Discrepancy"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.totalDiscrepancy.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pn,{className:"w-5 h-5 text-purple-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Avg Discrepancy"})]}),n.jsxs("p",{className:"text-2xl text-gray-900",children:["",m.avgDiscrepancy.toFixed(2)]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Expense"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Sales"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Production"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Stock Requests"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Cash Discrepancy"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:g?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"Loading data..."})}):u.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No data for selected period"})}):u.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[C.lateEntry&&n.jsx(ja,{className:"w-4 h-4 text-orange-500",title:"Late Entry"}),n.jsx("span",{className:"text-sm text-gray-900",children:S(C.date)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[E(C.status),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_(C.status)}`,children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.inventoryLogged?n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{className:"text-gray-900",children:[C.inventoryCount," items"]}),n.jsx("p",{className:"text-gray-500",children:A(C.inventoryLoggedAt)}),C.inventoryLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.inventoryLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-gray-900",children:" Logged"}),n.jsx("p",{className:"text-gray-500",children:A(C.salesLoggedAt)}),C.salesLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.salesLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.productionLogged?n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-gray-900",children:" Logged"}),n.jsx("p",{className:"text-gray-500",children:A(C.productionLoggedAt)}),C.productionLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.productionLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.stockRequestLogged?n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"text-gray-900",children:" Logged"}),n.jsx("p",{className:"text-gray-500",children:A(C.stockRequestLoggedAt)}),C.stockRequestLoggedBy&&n.jsxs("p",{className:"text-xs text-gray-400",children:["By: ",C.stockRequestLoggedBy]})]}):n.jsx("span",{className:"text-sm text-gray-400",children:"Not logged"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.salesLogged?n.jsxs("span",{className:`text-sm ${C.cashDiscrepancy>500?"text-red-600":"text-gray-900"}`,children:["",C.cashDiscrepancy.toFixed(2)]}):n.jsx("span",{className:"text-sm text-gray-400",children:"-"})})]},C.date))})]})})}),n.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Legend:"}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-gray-600",children:"Complete - Both Inventory AND Sales logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"w-4 h-4 text-yellow-600"}),n.jsx("span",{className:"text-gray-600",children:"Partial - At least one data type logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qn,{className:"w-4 h-4 text-red-600"}),n.jsx("span",{className:"text-gray-600",children:"Missing - No data logged"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"text-gray-600",children:"Orange icon = Late entry (logged after midnight)"})]})]})]})]})}function Cle({storeId:e,accessToken:t,thresholds:r,onClose:a,onSave:s}){const[i,o]=P.useState(r),[l,d]=P.useState(!1),u=[{key:"chicken",label:"Chicken Momos"},{key:"chickenCheese",label:"Chicken Cheese Momos"},{key:"veg",label:"Veg Momos"},{key:"cheeseCorn",label:"Cheese Corn Momos"},{key:"paneer",label:"Paneer Momos"},{key:"vegKurkure",label:"Veg Kurkure Momos"},{key:"chickenKurkure",label:"Chicken Kurkure Momos"}],f=(p,g,b)=>{const y=parseInt(b)||0;o({...i,[p]:{...i[p],[g]:y}})},m=async()=>{try{d(!0),await B5(t,e,i),s(i),ur.success("Stock thresholds saved successfully"),a()}catch(p){console.error("Error saving thresholds:",p),ur.error("Failed to save thresholds")}finally{d(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-500 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:n.jsx(Bi,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-white",children:"Stock Alert Thresholds"}),n.jsx("p",{className:"text-sm text-white/80",children:"Customize alert levels for each momo type"})]})]}),n.jsx("button",{onClick:a,className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/30 transition-all",children:n.jsx(qr,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"How it works:"})," Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."]}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),n.jsx("div",{className:"space-y-4",children:u.map(({key:p,label:g})=>{const b=i[p]||{high:600,medium:300,low:150};return n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:g}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"High Threshold (plates)"}),n.jsx("input",{type:"number",value:b.high,onChange:y=>f(p,"high",y.target.value),className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Medium Threshold (plates)"}),n.jsx("input",{type:"number",value:b.medium,onChange:y=>f(p,"medium",y.target.value),className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",placeholder:"e.g., 600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Low Threshold (plates)"}),n.jsx("input",{type:"number",value:b.low,onChange:y=>f(p,"low",y.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"e.g., 300"})]})]})]},p)})})]}),n.jsxs("div",{className:"border-t-2 border-gray-200 p-6 bg-gray-50 flex justify-between items-center",children:[n.jsx("button",{onClick:a,className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:m,disabled:l,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 disabled:opacity-50",children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vi,{className:"w-5 h-5"}),"Save Thresholds"]})})]})]})})}function Ale({context:e,highlightRequestId:t,selectedStoreId:r,onNavigateToManageItems:a}){const[s,i]=P.useState([]),[o,l]=P.useState(!0),[d,u]=P.useState(!1),[f,m]=P.useState(""),[p,g]=P.useState("all"),[b,y]=P.useState("daily"),[v,N]=P.useState({from:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[k,w]=P.useState([]),[A,S]=P.useState({}),[_,E]=P.useState(""),C=()=>new Date().toISOString().split("T")[0],[I,B]=P.useState(C()),[M,O]=P.useState(null),[U,ie]=P.useState({}),[X,re]=P.useState({}),[oe,Q]=P.useState({}),[F,J]=P.useState({}),[L,D]=P.useState(!1),[Y,V]=P.useState(null),[ee,ge]=P.useState(null),[ke,Ce]=P.useState(!1),[ce,me]=P.useState({}),[Oe,G]=P.useState(!1),[ze,Ye]=P.useState(null),[ct,We]=P.useState({}),[Pe,Ne]=P.useState({}),[tt,He]=P.useState(!1),[pt,Vt]=P.useState(()=>{const we=localStorage.getItem("momosPerPlate");return we?parseInt(we,10):6}),[hr,Jt]=P.useState(!1),Dr=[{name:"Chaat Masala",unit:"pkt"},{name:"Peri-Peri Masala",unit:"pkt"},{name:"Black Salt",unit:"pkt"},{name:"Butter",unit:"pkt"},{name:"Burger",unit:"pkt"},{name:"Oil",unit:"litre"},{name:"Capsicum",unit:"pieces"},{name:"Onion",unit:"piece"},{name:"Fresh Cream",unit:"pkt"},{name:"Liquid Cheese",unit:"pkt"},{name:"Milk",unit:"pkt"},{name:"Lemon",unit:"pieces"},{name:"Coriander",unit:"bundle"},{name:"Tandoori Masala",unit:"pkt"},{name:"Sesame Seeds (Til)",unit:"pkt"},{name:"Chilli Flakes",unit:"pkt"},{name:"Tomato Ketchup",unit:"pkt"}],Hr=["Pan-Fried Sauce","Butter Makhani Sauce","Chilli Chicken Sauce","Korean Sauce","Red Sauce","Green Sauce","Soup Premix","Tandoori Sauce"],ot=["KOT Roll","Parcel Box","Table Box","Zomato Tape"],qt=e.user?.designation==="store_incharge",Cr=e.user?.designation==="production_incharge",kt=e.user?.role==="manager",Gt=e.user?.role==="cluster_head",$e=kt||Gt||Cr,Ie=P.useMemo(()=>(e.inventoryItems?.filter(we=>we.category==="finished_product"&&we.isActive)||[]).map(we=>{const nt=we.displayName.endsWith("Momo")?we.displayName+"s":we.displayName;return{key:we.name,camelKey:we.name.replace(/_([a-z])/g,it=>it[1].toUpperCase()),label:we.displayName,legacySalesKey:nt,unit:we.unit}}),[e.inventoryItems]),Et=async()=>{try{const we=hu(),{data:{session:nt}}=await we.auth.getSession();return nt?.access_token||null}catch(we){return console.error("Error getting fresh token:",we),null}};P.useEffect(()=>{console.log("ProductionRequests - User Info:",{role:e.user?.role,designation:e.user?.designation,isStoreIncharge:qt,isProductionHead:Cr,isOperationsHead:kt,isClusterHead:Gt,canViewAll:$e})},[e.user,qt,Cr,kt,Gt,$e]),P.useEffect(()=>{_t(),St(),Be()},[e.user,r]),P.useEffect(()=>{k.length>=0&&e.inventoryItems&&e.inventoryItems.length>0&&(V(null),ge(null),mt())},[k,e.user,r,e.inventoryItems]),P.useEffect(()=>{if(!qt||!e.user?.storeId)return;const we=()=>{const it=new Date,jt=it.getHours(),gt=it.getMinutes(),H=it.toISOString().split("T")[0];if(jt===15&&gt===0&&M!==H){const se=new Date(it);se.setDate(se.getDate()+1);const ne=se.toISOString().split("T")[0];s.some(q=>q.storeId===e.user?.storeId&&q.requestDate===ne&&q.status!=="cancelled")||(console.log(" 3 PM Reminder: No stock request found for tomorrow"),ur.warning(" Reminder: You haven't submitted a stock request for tomorrow yet!",{duration:1e4,description:"Please submit your production request to ensure timely preparation."}),O(H))}};we();const nt=setInterval(we,6e4);return()=>clearInterval(nt)},[qt,e.user,s,M]),P.useEffect(()=>{if(!Gt&&!Cr&&!kt)return;const we=async()=>{try{const it=await Et();if(!it)return;const jt=await f5(it);jt.notificationsSent>0&&console.log(` Sent ${jt.notificationsSent} notifications for ${jt.newPendingCount} delayed pending requests`)}catch(it){console.log("Background pending request check failed:",it)}};we();const nt=setInterval(we,1800*1e3);return()=>clearInterval(nt)},[Gt,Cr,kt]);const Be=async()=>{if(e.user)try{const we=r||e.user.storeId;if(!we)return;const nt=await Et();if(!nt)return;const it=await L5(nt,we);it&&me(it)}catch{console.log("No saved thresholds, using defaults")}},_t=async()=>{if(e.user)try{l(!0);const we=await Et();if(!we){console.error("No valid access token available");return}const nt=await Eg(we),it=r||e.user.storeId;let jt=nt;it?jt=nt.filter(gt=>gt.storeId===it):qt&&e.user.storeId?jt=nt.filter(gt=>gt.storeId===e.user.storeId):kt&&e.user.storeId&&!Gt&&(jt=nt.filter(gt=>gt.storeId===e.user.storeId)),console.log("Production Requests loaded:",{totalRequests:nt.length,filteredRequests:jt.length,userRole:e.user.role,userDesignation:e.user.designation}),i(jt)}catch(we){console.error("Error loading production requests:",we),ur.error("Failed to load production requests")}finally{l(!1)}},St=async()=>{if(e.user)try{const we=await Et();if(!we){console.error("No valid access token available");return}let it=(await Cg(we)).data||[];const jt=r||e.user.storeId;jt&&(it=it.filter(gt=>gt?.storeId===jt)),w(it)}catch(we){console.error("Error loading sales data:",we)}},mt=async()=>{const we=r||e.user?.storeId,nt=!we||we==="all";if(e.user?.accessToken){console.log(" ============================================"),console.log(" loadStoreOpeningBalance called"),console.log("  selectedStoreId:",r),console.log("  context.user.storeId:",e.user?.storeId),console.log("  effectiveStoreId:",we),console.log("  isAllStores:",nt),console.log("  context.stores count:",e.stores?.length||0),console.log("  Current salesData length:",k.length),console.log(" ============================================");try{const it=new Date().toISOString().substring(0,7);if(nt){console.log("   Calculating aggregate opening balance for all stores");const gt=e.stores||[];console.log("   All stores to aggregate:",gt.map(se=>({id:se.id,name:se.name})));let H={};Ie.forEach(({camelKey:se})=>{H[se]=0});for(const se of gt){console.log(`   Processing store: ${se.name} (${se.id})`);try{const ne=await Qm(e.user.accessToken,se.id,"store");if(ne?.history&&ne.history.length>0){const Z=ne.history.find(q=>q.date.substring(0,7)===it&&q.isOpeningBalance===!0);if(Z)console.log(`     Found OPENING BALANCE recalibration for ${se.name}, date: ${Z.date}`),Z.items.forEach(q=>{const W=e.inventoryItems?.find(ae=>ae.id===q.itemId||ae.name===q.itemId);if(W){const ae=W.name.replace(/_([a-z])/g,de=>de[1].toUpperCase());console.log(`      Adding ${q.actualQuantity} ${ae} from ${se.name}`),H[ae]+=q.actualQuantity}});else{console.log(`     No opening balance recalibration for ${se.name}, calculating from previous month`);const q=await Qt(se.id,it);console.log(`      Previous month balance for ${se.name}:`,q),Object.keys(q).forEach(W=>{H[W]+=q[W]})}}else{console.log(`     No recalibration history for ${se.name}, calculating from previous month`);const Z=await Qt(se.id,it);console.log(`      Previous month balance for ${se.name}:`,Z),Object.keys(Z).forEach(q=>{H[q]+=Z[q]})}}catch(ne){console.error(`     Error loading recalibration for ${se.name}:`,ne);const Z=await Qt(se.id,it);console.log(`      Previous month balance for ${se.name} (fallback):`,Z),Object.keys(Z).forEach(q=>{H[q]+=Z[q]})}console.log(`    Running total after ${se.name}:`,H)}console.log("   FINAL Aggregated opening balance for all stores:",H),V(H);return}if(!we){console.log("   No effectiveStoreId available, skipping recalibration fetch"),V({});return}try{const gt=await Qm(e.user.accessToken,we,"store");if(console.log(" Recalibration Check:"),console.log("  Total recalibrations found:",gt?.history?.length||0),gt?.history&&gt.history.length>0){const H=gt.history.find(W=>W.date.substring(0,7)===it&&W.isOpeningBalance===!0),ne=gt.history.filter(W=>W.date.substring(0,7)===it).sort((W,ae)=>new Date(ae.date).getTime()-new Date(W.date).getTime())[0],Z=H?null:gt.history.find(W=>W.date.substring(0,7)===it&&W.isOpeningBalance===void 0),q=H||Z;if(q){console.log("   Found opening balance recalibration:"),console.log("  Recalibration date:",q.date),console.log("  Recalibration month:",q.date.substring(0,7)),console.log("  Recalibration locationType:",q.locationType),console.log("  Recalibration locationName:",q.locationName),console.log("  Recalibration isOpeningBalance:",q.isOpeningBalance),console.log("  Current month:",it);const W={};if(console.log("   Processing recalibration items:",q.items.length),console.log("   Available inventory items:",e.inventoryItems?.length||0),q.items.forEach(ae=>{const de=e.inventoryItems?.find(z=>z.id===ae.itemId||z.name===ae.itemId);if(de){const z=de.name.replace(/_([a-z])/g,le=>le[1].toUpperCase());W[z]=ae.actualQuantity}}),console.log("   Using opening balance from recalibration:",W),V(W),ne&&ne.date!==q.date){console.log("   Found MORE RECENT recalibration (mid-month):"),console.log("    Date:",ne.date),console.log("    isOpeningBalance:",ne.isOpeningBalance);const ae={};ne.items.forEach(de=>{const z=e.inventoryItems?.find(le=>le.id===de.itemId||le.name===de.itemId);if(z){const le=z.name.replace(/_([a-z])/g,fe=>fe[1].toUpperCase());ae[le]=de.actualQuantity}}),ge({date:ne.date,stock:ae}),console.log("    Stock:",ae)}else ge(null);return}else console.log("   No opening balance recalibration found for current month, calculating from previous month")}else console.log("   No recalibration records found")}catch(gt){console.error(" Error fetching recalibration history (will calculate from previous month):",gt)}const jt=await Qt(we,it);V(jt)}catch(it){console.error("Error loading opening balance:",it);const jt={};Ie.forEach(({camelKey:gt})=>{jt[gt]=0}),V(jt)}}},Qt=async(we,nt)=>{if(!we){console.warn("   calculatePreviousMonthStoreStock called with empty storeId");const de={};return Ie.forEach(({camelKey:z})=>{de[z]=0}),de}const[it,jt]=nt.split("-").map(Number);let gt=it,H=jt-1;H===0&&(H=12,gt=it-1);const se=`${gt}-${String(H).padStart(2,"0")}`;console.log(" Store Opening Balance Calculation:"),console.log("  Store ID:",we),console.log("  Previous Month:",se);let ne={};try{const de=await cl(e.user.accessToken,we,"store");if(de?.record){const z=de.record.date.substring(0,7);console.log("   Found recalibration from:",z),z===se?(de.record.items.forEach(le=>{const fe=e.inventoryItems?.find(De=>De.id===le.itemId||De.name===le.itemId);if(fe){const De=fe.name.replace(/_([a-z])/g,Ve=>Ve[1].toUpperCase());ne[De]=le.actualQuantity}}),console.log("   Using previous month recalibration as opening:",ne)):(console.log("   Recalibration is from different month, assuming zero opening balance"),Ie.forEach(({camelKey:le})=>{ne[le]=0}))}else console.log("   No recalibration found, assuming zero opening balance"),Ie.forEach(({camelKey:z})=>{ne[z]=0})}catch(de){console.error("   Error fetching recalibration:",de),Ie.forEach(({camelKey:z})=>{ne[z]=0})}const Z=(e.productionRequests||[]).filter(de=>{if(de.status!=="delivered"||de.storeId!==we)return!1;const z=de.deliveredDate||de.requestDate||de.createdAt;return z&&z.startsWith(se)}).reduce((de,z)=>(Ie.forEach(({camelKey:le})=>{const fe=z[le]||0,De=z[le+"s"]||0;de[le]=(de[le]||0)+fe+De}),de),{}),W=(k||[]).filter(de=>de.storeId!==we?!1:de.date&&de.date.startsWith(se)).reduce((de,z)=>(Ie.forEach(({camelKey:le,legacySalesKey:fe})=>{let De=z.data?.[fe]||0;fe==="Cheese Corn Momos"&&De===0&&(De=z.data?.["Corn Cheese Momos"]||0),de[le]=(de[le]||0)+De}),de),{}),ae={};return Ie.forEach(({camelKey:de})=>{ae[de]=(ne[de]||0)+(Z[de]||0)-(W[de]||0)}),console.log("  Previous Month Opening Balance:",ne),console.log("  Previous Month Received:",Z),console.log("  Previous Month Sold:",W),console.log("  Calculated Closing Stock (= Opening + Received - Sold):",ae),ae},Tt=async we=>{if(we.preventDefault(),d){console.log(" Submission already in progress, ignoring duplicate request");return}if(console.log(" handleSubmitRequest called"),console.log("  User info:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),console.log("  Form data:",{momoQuantities:A,totalQuantity:Object.values(A).reduce((it,jt)=>it+jt,0),requestDate:I,notes:_}),!e.user?.accessToken||!e.user?.employeeId||!e.user?.storeId){console.error(" Missing user information:",{hasAccessToken:!!e.user?.accessToken,hasEmployeeId:!!e.user?.employeeId,hasStoreId:!!e.user?.storeId,user:e.user}),ur.error("Missing user information. Please ensure you are assigned to a store.");return}if(Object.values(A).reduce((it,jt)=>it+jt,0)===0){console.log(" No quantities specified"),ur.error("Please specify at least one item quantity");return}console.log(" Submitting request for date:",I);try{u(!0),console.log(" Validation passed, submitting request..."),await I2(e.user.accessToken,{requestDate:I,storeId:e.user.storeId,storeName:void 0,requestedBy:e.user.employeeId,requestedByName:e.user.name||e.user.email,...A,kitchenUtilities:Object.keys(U).length>0?U:void 0,sauces:Object.keys(X).length>0?X:void 0,utilities:Object.keys(oe).length>0?oe:void 0,notes:_}),console.log(" Request submitted successfully"),ur.success("Production request submitted successfully"),S({}),ie({}),re({}),Q({}),E(""),B(C()),await _t()}catch(it){console.error(" Error submitting production request:",it),ur.error(it.message||"Failed to submit request")}finally{u(!1)}},Zt=async(we,nt)=>{if(!(!e.user?.accessToken||!e.user?.employeeId))try{await u5(e.user.accessToken,we,nt,e.user.employeeId),ur.success(`Request marked as ${nt.replace("-"," ")}`),await _t()}catch(it){console.error("Error updating status:",it),ur.error("Failed to update status")}},xn=we=>{Ye(we);const nt={};["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos","vegKurkureMomos","chickenKurkureMomos"].forEach(jt=>{const gt=we[jt];gt>0&&(nt[jt]=gt)}),we.kitchenUtilities&&Object.entries(we.kitchenUtilities).forEach(([jt,gt])=>{nt[`kitchenUtility_${jt}`]=gt.quantity}),we.utilities&&Object.entries(we.utilities).forEach(([jt,gt])=>{nt[`utility_${jt}`]=gt}),We(nt),Ne({}),He(!1),G(!0)},bt=async()=>{if(!e.user?.accessToken||!e.user?.employeeId||!ze)return;if(!tt){ur.error("Please confirm your responsibility for shipping these items");return}const we=[];if(Object.entries(ct).forEach(([nt,it])=>{let jt=0;if(nt.startsWith("kitchenUtility_")){const H=nt.replace("kitchenUtility_","");jt=ze.kitchenUtilities?.[H]?.quantity||0}else if(nt.startsWith("utility_")){const H=nt.replace("utility_","");jt=ze.utilities?.[H]||0}else jt=ze[nt]||0;const gt=nt.toLowerCase().includes("sauce")||nt.toLowerCase().includes("mayo")||nt.toLowerCase().includes("schezwan");it!==jt&&!gt&&!Pe[nt]&&we.push(nt.replace("_"," "))}),we.length>0){ur.error(`Please add notes for items with different quantities: ${we.join(", ")}`);return}try{await h5(e.user.accessToken,ze.id,ct,Pe,e.user.employeeId),ur.success("Request marked as shipped with quantities recorded"),G(!1),await _t()}catch(nt){console.error("Error shipping request:",nt),ur.error(nt.message||"Failed to ship request")}},tn=we=>{switch(we){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"accepted":return"bg-blue-100 text-blue-800 border-blue-300";case"in-preparation":return"bg-purple-100 text-purple-800 border-purple-300";case"prepared":return"bg-indigo-100 text-indigo-800 border-indigo-300";case"shipped":return"bg-orange-100 text-orange-800 border-orange-300";case"partially-shipped":return"bg-amber-100 text-amber-800 border-amber-300";case"delivered":return"bg-green-100 text-green-800 border-green-300";case"partially-delivered":return"bg-lime-100 text-lime-800 border-lime-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},Rn=we=>{switch(we){case"pending":return n.jsx(_n,{className:"w-4 h-4"});case"accepted":return n.jsx(or,{className:"w-4 h-4"});case"in-preparation":return n.jsx(dr,{className:"w-4 h-4"});case"prepared":return n.jsx(or,{className:"w-4 h-4"});case"shipped":return n.jsx(Vy,{className:"w-4 h-4"});case"delivered":return n.jsx(or,{className:"w-4 h-4"});default:return n.jsx(_n,{className:"w-4 h-4"})}},Bt=s.filter(we=>!(f&&we.requestDate!==f||p!=="all"&&we.status!==p)),Ut={pending:Bt.filter(we=>we.status==="pending"),accepted:Bt.filter(we=>we.status==="accepted"),"in-preparation":Bt.filter(we=>we.status==="in-preparation"),prepared:Bt.filter(we=>we.status==="prepared"),shipped:Bt.filter(we=>we.status==="shipped"),delivered:Bt.filter(we=>we.status==="delivered")},yn=Bt.reduce((we,nt)=>{const it=nt.requestDate;return we[it]||(we[it]=[]),we[it].push(nt),we},{}),rn=Object.keys(yn).sort((we,nt)=>new Date(nt).getTime()-new Date(we).getTime()),kr=()=>{const we=new Date;let nt=[],it,jt=we;const gt=(Z,q)=>{if(q==="day")return Z.toLocaleDateString("en-US",{month:"short",day:"numeric"});if(q==="week"){const W=new Date(Z);W.setDate(Z.getDate()-Z.getDay());const ae=new Date(W);return ae.setDate(W.getDate()+6),`${W.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ae.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{if(q==="month")return Z.toLocaleDateString("en-US",{month:"short",year:"numeric"});if(q==="year")return Z.getFullYear().toString()}return Z.toLocaleDateString()},H=(Z,q)=>{const W=ae=>{const de=ae.getFullYear(),z=String(ae.getMonth()+1).padStart(2,"0"),le=String(ae.getDate()).padStart(2,"0");return`${de}-${z}-${le}`};if(q==="day")return W(Z);if(q==="week"){const ae=new Date(Z),de=ae.getDay();return ae.setDate(ae.getDate()-de),W(ae)}else{if(q==="month")return`${Z.getFullYear()}-${String(Z.getMonth()+1).padStart(2,"0")}`;if(q==="year")return Z.getFullYear().toString()}return W(Z)};if(b==="daily")for(let Z=4;Z>=0;Z--){const q=new Date(we);q.setDate(we.getDate()-Z),nt.push(H(q,"day"))}else if(b==="weekly")for(let Z=4;Z>=0;Z--){const q=new Date(we);q.setDate(we.getDate()-Z*7);const W=H(q,"week");nt.includes(W)||nt.push(W)}else if(b==="monthly")for(let Z=4;Z>=0;Z--){const q=new Date(we);q.setMonth(we.getMonth()-Z),nt.push(H(q,"month"))}else if(b==="yearly")for(let Z=4;Z>=0;Z--){const q=new Date(we);q.setFullYear(we.getFullYear()-Z),nt.push(H(q,"year"))}else if(b==="custom"){it=new Date(v.from),jt=new Date(v.to);const Z=Math.ceil((jt.getTime()-it.getTime())/(1e3*60*60*24));for(let q=0;q<=Z;q++){const W=new Date(it);W.setDate(it.getDate()+q),nt.push(H(W,"day"))}}console.log(" Chart Periods:",{filter:b,periods:nt,today:we.toISOString().split("T")[0]}),console.log(" Requests for chart:",{totalRequests:s.length,requestDates:s.map(Z=>({date:Z.requestDate,id:Z.id.slice(0,8),chickenMomo:Z.chickenMomo,chickenMomos:Z.chickenMomos}))});const se={};nt.forEach(Z=>{const q={period:Z};Ie.forEach(({label:W})=>{q[W]=0}),se[Z]=q}),s.forEach(Z=>{const q=new Date(Z.requestDate);let W;b==="daily"||b==="custom"?W=H(q,"day"):b==="weekly"?W=H(q,"week"):b==="monthly"?W=H(q,"month"):b==="yearly"&&(W=H(q,"year")),se[W]?Ie.forEach(({camelKey:ae,label:de})=>{const z=Z[ae]||0,le=Z[ae+"s"]||0;se[W][de]=(se[W][de]||0)+z+le}):console.log(" Request not matching any period:",{requestDate:Z.requestDate,periodKey:W,availablePeriods:nt})}),console.log(" Aggregated Period Data:",se);const ne=nt.map(Z=>{const q=se[Z],W=new Date(Z);let ae;return b==="daily"||b==="custom"?ae=gt(W,"day"):b==="weekly"?ae=gt(W,"week"):b==="monthly"?ae=gt(W,"month"):b==="yearly"&&(ae=gt(W,"year")),{name:ae,...q}});return console.log(" Final Chart Data:",ne),ne};return P.useEffect(()=>{if(t&&!o){const we=document.getElementById(`request-${t}`);we&&setTimeout(()=>{we.scrollIntoView({behavior:"smooth",block:"center"})},300)}},[t,o]),P.useEffect(()=>{rn.length>0&&Object.keys(F).length===0&&J({[rn[0]]:!0})},[rn,F]),o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-lg p-4 sm:p-6 text-white",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl mb-2",children:"Daily Stock Requests"}),n.jsxs("p",{className:"text-sm sm:text-base text-purple-100",children:[qt&&"Submit your daily stock requirements before 9:00 AM",Cr&&"Manage incoming stock requests and track fulfillment",(kt||Gt)&&"Monitor stock request workflow across stores"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6 border-2 border-green-200",children:[n.jsxs("div",{className:"mb-4 flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 flex items-center gap-2",children:[n.jsx(dr,{className:"w-6 h-6 text-green-600"}),"Store Stock Status"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total inventory received from production house - Stock sold"})]}),qt&&n.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap bg-gradient-to-r from-teal-600 to-emerald-600 text-white hover:from-teal-700 hover:to-emerald-700 shadow-lg",title:"Recalibrate store stock (Operations Managers and Cluster Heads will be notified)",children:[n.jsx(or,{className:"w-5 h-5"}),"Recalibrate Stock"]})]}),(r||e.user?.storeId,n.jsx("div",{className:"bg-gradient-to-r from-green-100 to-green-50 border-l-4 border-green-600 rounded-lg p-3 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5 text-green-700"}),n.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),n.jsx("p",{className:"text-xs text-green-700 ml-7",children:"Opening balance + Current month received - Current month sold"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Ce(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-green-600 text-green-700 rounded-lg hover:bg-green-50 transition-all",children:[n.jsx(Bi,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Alert Settings"})]}),(kt||Gt)&&n.jsxs("button",{onClick:()=>Jt(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(Bi,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Plate Config"})]}),a&&(kt||Gt)&&n.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]})})),(()=>{const we=r||e.user?.storeId,nt=new Date,it=5.5*60*60*1e3,gt=new Date(nt.getTime()+it).toISOString().substring(0,7);console.log(" Stock Status Calculation Debug:",{currentMonth:gt,totalRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(fe=>fe.status==="delivered").length||0,requestStatuses:e.productionRequests?.map(fe=>({id:fe.id.slice(0,8),status:fe.status,date:fe.requestDate}))||[]});const H=e.productionRequests?.filter(fe=>{if(fe.status!=="delivered"&&fe.status!=="pending")return!1;const De=fe.deliveredDate||fe.requestDate||fe.createdAt,Ve=De&&De.startsWith(gt);return console.log(" Delivered Request:",{id:fe.id.slice(0,8),status:fe.status,chicken:fe.chicken,chickenMomo:fe.chickenMomo,chickenMomos:fe.chickenMomos,chickenKurkure:fe.chickenKurkure,chickenKurkureMomo:fe.chickenKurkureMomo,chickenKurkureMomos:fe.chickenKurkureMomos,deliveryDate:De,matchesMonth:Ve}),Ve?!we||we==="all"?!0:fe.storeId===we:!1})||[],se=H.reduce((fe,De)=>(Ie.forEach(({camelKey:Ve})=>{const Qe=De[Ve]||0,Ke=De[Ve+"s"]||0;fe[Ve]=(fe[Ve]||0)+Qe+Ke}),fe),{});console.log(" After aggregation - deliveredRequests count:",H.length),console.log(" After aggregation - totalReceived:",se);const ne=k.filter(fe=>!fe.date||!fe.date.startsWith(gt)?!1:!we||we==="all"?!0:fe.storeId===we),Z=ne.reduce((fe,De)=>(Ie.forEach(({camelKey:Ve,legacySalesKey:Qe})=>{let Ke=De.data?.[Qe]||0;Qe==="Cheese Corn Momos"&&Ke===0&&(Ke=De.data?.["Corn Cheese Momos"]||0),fe[Ve]=(fe[Ve]||0)+Ke}),fe),{}),q=Y||Ie.reduce((fe,{camelKey:De})=>(fe[De]=0,fe),{});if(console.log(" Store Stock Status Calculation Debug:"),console.log("  storeOpeningBalance from state:",Y),console.log("  openingBalance being used:",q),console.log("  totalReceived:",se),console.log("   Chicken Momo (chicken) received:",se.chicken||0),console.log("   Chicken Kurkure (chickenKurkure) received:",se.chickenKurkure||0),console.log("  totalSales:",Z),console.log("  finishedProducts count:",Ie.length),Y===null)return console.log("   Opening balance not loaded yet, showing loading state"),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 mt-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Or,{className:"w-5 h-5 text-green-700"}),n.jsx("p",{className:"text-sm font-semibold text-green-900",children:"Store Stock Status (Current Month)"})]}),n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),n.jsx("p",{className:"ml-3 text-sm text-green-700",children:"Loading opening balance..."})]})]});const W={};if(ee){console.log("   Using MOST RECENT recalibration as baseline:"),console.log("    Recalibration date:",ee.date),console.log("    Recalibration stock:",ee.stock);const De=ee.date.substring(0,10),Ve={},Qe={};H.forEach(Ke=>{const Ge=Ke.deliveredDate||Ke.requestDate||Ke.createdAt,Ct=Ge?Ge.substring(0,10):"";Ct&&Ct>De&&Ie.forEach(({camelKey:Yt})=>{const Xt=Ke[Yt]||0;Ve[Yt]=(Ve[Yt]||0)+Xt})}),ne.forEach(Ke=>{const Ge=Ke.date,Ct=Ge?Ge.substring(0,10):"";Ct&&Ct>=De&&Ie.forEach(({camelKey:Yt,legacySalesKey:Xt})=>{let wr=Ke.data?.[Xt]||0;Xt==="Cheese Corn Momos"&&wr===0&&(wr=Ke.data?.["Corn Cheese Momos"]||0),Qe[Yt]=(Qe[Yt]||0)+wr})}),console.log("    Received AFTER recalibration:",Ve),console.log("    Sold AFTER recalibration:",Qe),Ie.forEach(({camelKey:Ke})=>{const Ge=ee.stock[Ke]||0,Ct=Ve[Ke]||0,Yt=Qe[Ke]||0;W[Ke]=Ge+Ct-Yt,console.log(`    ${Ke}: ${Ge} (recal) + ${Ct} (received) - ${Yt} (sold) = ${W[Ke]}`)})}else console.log("   Using opening balance (no mid-month recalibration)"),Ie.forEach(({camelKey:fe})=>{W[fe]=(q[fe]||0)+(se[fe]||0)-(Z[fe]||0)});console.log("  storeStock calculated:",W);const ae=["purple","pink","green","yellow","blue","teal","red","indigo","orange","cyan"],de=Object.values(se).reduce((fe,De)=>fe+De,0),z=Object.values(q).reduce((fe,De)=>fe+De,0),le=de+z;return console.log("  totalReceivedSum:",de),console.log("  totalOpeningBalanceSum:",z),console.log("  totalStockSum:",le),le===0?n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[n.jsx(dr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-600",children:["No inventory available for ",gt]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Stock will appear here once:"}),n.jsxs("ul",{className:"text-sm text-gray-500 mt-2 list-disc list-inside",children:[n.jsxs("li",{children:["Your requests are ",n.jsx("strong",{children:"delivered"})," by the production house"]}),n.jsx("li",{children:"OR you perform a stock recalibration (1st-5th of each month)"})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-4",children:' Tip: Check if your requests have been marked as "Delivered" below'})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Ie.map(({camelKey:fe,label:De},Ve)=>{const Qe=se[fe]||0,Ke=Z[fe]||0,Ge=W[fe]||0,Yt=(q[fe]||0)+Qe,Xt=ae[Ve%ae.length],wr=ce[fe]||{high:600,medium:300,low:150};let nn="high",ln="",Ze="",Lr="",ue="";Ge<=0?(nn="critical",ln="bg-red-100",Ze="text-red-700",Lr="border-red-300",ue="CRITICAL"):Ge<=wr.low?(nn="low",ln="bg-red-100",Ze="text-red-700",Lr="border-red-300",ue="LOW"):Ge<=wr.medium?(nn="medium",ln="bg-orange-100",Ze="text-orange-700",Lr="border-orange-300",ue="MEDIUM"):Ge<wr.high&&(nn="medium",ln="bg-yellow-100",Ze="text-yellow-700",Lr="border-yellow-300",ue="MEDIUM");const Ee=Yt>0?(Ge/Yt*100).toFixed(0):"0",Re=Ge<Yt*.2&&Yt>0;return n.jsxs("div",{className:`bg-gradient-to-br from-${Xt}-50 to-${Xt}-100 border-2 border-${Xt}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300 relative`,children:[nn!=="high"&&n.jsxs("div",{className:`absolute top-2 right-2 flex items-center gap-1 px-2 py-1 rounded-lg ${ln} border ${Lr}`,children:[n.jsx(ja,{className:`w-4 h-4 ${Ze}`}),n.jsx("span",{className:`text-xs font-semibold ${Ze} uppercase`,children:ue})]}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pr-20",children:De}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Total Received:"}),n.jsx("span",{className:`text-lg font-bold text-${Xt}-600`,children:Qe})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Total Sold:"}),n.jsx("span",{className:`text-lg font-bold text-${Xt}-700`,children:Ke})]}),n.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:`text-2xl font-bold ${Re||Ge<0?"text-red-600":`text-${Xt}-800`}`,children:[Ge," pcs / ",Math.round(Ge/pt)," plates"]})})]}),Yt>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:n.jsxs("span",{children:[Ee,"% remaining"]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${Re||Ge<0?"bg-red-500":`bg-${Xt}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Ee)))}%`}})})]})]}),(Re||Ge<0)&&n.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg px-2 py-1 mt-2",children:n.jsx("p",{className:"text-xs text-red-800 font-semibold",children:Ge<0?" Oversold":" Low Stock"})})]})]},fe)})})})()]}),qt&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Gm,{className:"w-5 h-5 text-purple-600"}),"Submit Stock Request"]}),new Date().getHours()>=9&&n.jsx("div",{className:"mb-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ja,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"It's past 9:00 AM"}),n.jsx("p",{className:"text-xs text-blue-800",children:"Same-day production requests are no longer accepted. The request date has been automatically set to tomorrow. You can also select any future date for advance orders."})]})]})}),n.jsxs("form",{onSubmit:Tt,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(bs,{label:"Request Date",value:I,onChange:B,className:"w-full"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Same-day requests must be submitted before 9:00 AM. After 9 AM, please select tomorrow or a future date for advance orders."})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-purple-600"}),"Momos Quantities"]}),n.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0 lg:grid-cols-3",children:Ie.map(({camelKey:we,label:nt})=>{const it=we==="chicken"?[150,300,450,600]:[60,120,180,300];return n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:nt}),n.jsx("input",{type:"number",min:"0",value:A[we]||0,onChange:jt=>S({...A,[we]:parseInt(jt.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base"}),n.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:it.map(jt=>n.jsx("button",{type:"button",onClick:()=>S({...A,[we]:jt}),className:"px-3 py-1.5 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm transition-colors",children:jt},jt))})]},we)})})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-purple-600"}),"Kitchen Utilities (Optional)"]}),n.jsx("div",{className:"space-y-3",children:Dr.map(we=>n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:[we.name," ",n.jsxs("span",{className:"text-gray-500 text-xs",children:["(in ",we.unit,")"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",min:"0",step:"0.01",value:U[we.name]?.quantity!==void 0?U[we.name].quantity:"",onChange:nt=>{const it=parseFloat(nt.target.value)||0;if(it>0)ie({...U,[we.name]:{quantity:it,unit:we.unit}});else{const jt={...U};delete jt[we.name],ie(jt)}},className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:`Quantity in ${we.unit}`}),n.jsx("div",{className:"flex items-center px-4 py-3 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 text-base font-medium min-w-[80px] justify-center",children:we.unit})]})]},we.name))})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-pink-600"}),"Sauces (Select Required Sauces)"]}),n.jsx("div",{className:"space-y-2 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:Hr.map(we=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg hover:border-purple-500 cursor-pointer transition-colors active:bg-purple-50",children:[n.jsx("input",{type:"checkbox",checked:X[we]||!1,onChange:nt=>{if(nt.target.checked)re({...X,[we]:!0});else{const it={...X};delete it[we],re(it)}},className:"w-5 h-5 text-purple-600 rounded focus:ring-purple-500 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-gray-700",children:we})]},we))})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-indigo-600"}),"Utilities (Quantity in Pieces)"]}),n.jsx("div",{className:"space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0",children:ot.map(we=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:we}),n.jsx("input",{type:"number",min:"0",value:oe[we]!==void 0?oe[we]:"",onChange:nt=>{const it=parseInt(nt.target.value)||0;if(it>0)Q({...oe,[we]:it});else{const jt={...oe};delete jt[we],Q(jt)}},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",placeholder:"Pieces"})]},we))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Additional Notes (Optional)"}),n.jsx("textarea",{value:_,onChange:we=>E(we.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none resize-none",placeholder:"Any special requirements or notes..."})]}),n.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base font-medium shadow-lg active:scale-95",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),n.jsx("span",{children:"Submitting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Gm,{className:"w-5 h-5"}),n.jsx("span",{children:"Submit Request"})]})})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:n.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:flex sm:flex-wrap sm:gap-3",children:[n.jsx("div",{className:"flex-1 sm:min-w-[200px]",children:n.jsx(bs,{label:"Filter by Date",value:f,onChange:m,className:"w-full"})}),n.jsxs("div",{className:"flex-1 sm:min-w-[200px]",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Filter by Status"}),n.jsxs("select",{value:p,onChange:we=>g(we.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-base",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"accepted",children:"Accepted"}),n.jsx("option",{value:"in-preparation",children:"In Preparation"}),n.jsx("option",{value:"prepared",children:"Prepared"}),n.jsx("option",{value:"shipped",children:"Shipped"}),n.jsx("option",{value:"delivered",children:"Delivered"})]})]}),(f||p!=="all")&&n.jsx("div",{className:"flex sm:items-end",children:n.jsx("button",{onClick:()=>{m(""),g("all")},className:"w-full sm:w-auto px-4 py-3 sm:py-2 text-sm text-purple-600 hover:text-purple-900 underline font-medium",children:"Clear Filters"})})]})}),$e&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:"Production Request Workflow"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute top-8 left-0 right-0 h-1 bg-gray-200",style:{zIndex:0}}),n.jsxs("div",{className:"relative grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",style:{zIndex:1},children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut.pending.length})})}),n.jsx("div",{className:"w-full bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(_n,{className:"w-3 h-3 text-yellow-600"}),n.jsx("p",{className:"text-xs text-yellow-800",children:"Pending"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut.accepted.length})})}),n.jsx("div",{className:"w-full bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(or,{className:"w-3 h-3 text-blue-600"}),n.jsx("p",{className:"text-xs text-blue-800",children:"Accepted"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-purple-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut["in-preparation"].length})})}),n.jsx("div",{className:"w-full bg-purple-50 border-2 border-purple-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(dr,{className:"w-3 h-3 text-purple-600"}),n.jsx("p",{className:"text-xs text-purple-800",children:"In Prep"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut.prepared.length})})}),n.jsx("div",{className:"w-full bg-indigo-50 border-2 border-indigo-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(or,{className:"w-3 h-3 text-indigo-600"}),n.jsx("p",{className:"text-xs text-indigo-800",children:"Prepared"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-orange-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut.shipped.length})})}),n.jsx("div",{className:"w-full bg-orange-50 border-2 border-orange-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(Vy,{className:"w-3 h-3 text-orange-600"}),n.jsx("p",{className:"text-xs text-orange-800",children:"Shipped"})]})})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center shadow-lg mb-3",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-2xl",children:Ut.delivered.length})})}),n.jsx("div",{className:"w-full bg-green-50 border-2 border-green-200 rounded-lg p-3 text-center",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(or,{className:"w-3 h-3 text-green-600"}),n.jsx("p",{className:"text-xs text-green-800",children:"Delivered"})]})})]})]})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-gray-900",children:Bt.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-yellow-600",children:Ut.pending.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Action"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-purple-600",children:Ut.accepted.length+Ut["in-preparation"].length+Ut.prepared.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl text-green-600",children:Ut.delivered.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6",children:[n.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pn,{className:"w-5 h-5 text-purple-600"}),n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Momo Orders by Type"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[{filter:"daily",label:"5 Days"},{filter:"weekly",label:"5 Weeks"},{filter:"monthly",label:"5 Months"},{filter:"yearly",label:"5 Years"},{filter:"custom",label:"Custom"}].map(({filter:we,label:nt})=>n.jsx("button",{onClick:()=>y(we),className:`px-3 py-2 rounded-lg text-xs sm:text-sm transition-colors flex-1 sm:flex-none ${b===we?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:nt},we))})]}),b==="custom"&&n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsx(bs,{label:"From Date",value:v.from,onChange:we=>N({...v,from:we})}),n.jsx(bs,{label:"To Date",value:v.to,onChange:we=>N({...v,to:we})})]}),n.jsx(ya,{width:"100%",height:400,children:n.jsxs(vo,{data:kr(),children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{dataKey:"name"}),n.jsx(Jn,{}),n.jsx(mn,{}),n.jsx(Ga,{}),Ie.map((we,nt)=>{const it=["#8b5cf6","#ec4899","#10b981","#f59e0b","#3b82f6","#14b8a6","#ef4444","#f97316"];return n.jsx(sn,{dataKey:we.label,name:we.label,fill:it[nt%it.length]},we.label)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h2",{className:"text-xl text-gray-900",children:[rn.length," Date",rn.length!==1?"s":""," with Requests"]}),rn.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[n.jsx(dr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No production requests found"})]}):rn.map(we=>{const nt=yn[we],it=F[we],jt=new Set(nt.map(H=>H.storeName)).size,gt=nt.reduce((H,se)=>(Ie.forEach(({camelKey:ne})=>{const Z=se[ne]||0,q=se[ne+"s"]||0;H[ne]=(H[ne]||0)+Z+q}),H),{});return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[n.jsxs("button",{onClick:()=>J({...F,[we]:!it}),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between gap-4 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(Or,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 truncate",children:new Date(we).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[nt.length," Request",nt.length!==1?"s":""," from"," ",jt," Store",jt!==1?"s":""]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:it?n.jsx(zI,{className:"w-5 h-5 text-gray-400"}):n.jsx(Y0,{className:"w-5 h-5 text-gray-400"})})]}),n.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-3 sm:p-4",children:[n.jsx("h4",{className:"text-xs sm:text-sm text-gray-700 mb-3",children:"Total Quantities for this Day"}),n.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-2 sm:gap-3",children:[gt.chicken>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-purple-600",children:gt.chicken}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken"})]}),gt.chickenCheese>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-pink-600",children:gt.chickenCheese}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Cheese"})]}),gt.veg>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-green-600",children:gt.veg}),n.jsx("p",{className:"text-xs text-gray-600",children:"Veg"})]}),gt.cheeseCorn>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-orange-600",children:gt.cheeseCorn}),n.jsx("p",{className:"text-xs text-gray-600",children:"Cheese Corn"})]}),gt.paneer>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-blue-600",children:gt.paneer}),n.jsx("p",{className:"text-xs text-gray-600",children:"Paneer"})]}),gt.vegKurkure>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-teal-600",children:gt.vegKurkure}),n.jsx("p",{className:"text-xs text-gray-600",children:"Veg Kurkure"})]}),gt.chickenKurkure>0&&n.jsxs("div",{className:"text-center bg-white rounded-lg p-2 sm:p-3",children:[n.jsx("p",{className:"text-lg sm:text-xl text-red-600",children:gt.chickenKurkure}),n.jsx("p",{className:"text-xs text-gray-600",children:"Chicken Kurkure"})]})]})]})}),it&&n.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-purple-600"}),"Requests by Store"]}),nt.map(H=>{const se=t===H.id,ne=H.status==="pending";return n.jsxs("div",{id:`request-${H.id}`,className:`
                              relative overflow-hidden rounded-xl transition-all duration-300 transform hover:scale-[1.01]
                              ${se?"border-4 border-purple-500 bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 shadow-2xl ring-4 ring-purple-300/50":ne?"border-4 border-yellow-400 bg-gradient-to-br from-yellow-50 via-orange-50 to-yellow-50 shadow-xl":"border-2 border-gray-200 bg-white shadow-lg"}
                            `,children:[ne&&n.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 h-2"}),n.jsxs("div",{className:"p-5",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:`
                                  px-4 py-2 rounded-full font-semibold shadow-md
                                  ${ne?"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900":"bg-gradient-to-r from-purple-400 to-pink-400 text-white"}
                                `,children:n.jsxs("span",{className:"text-sm flex items-center gap-2",children:[n.jsx("strong",{children:"Request ID:"})," ",H.id.slice(0,8).toUpperCase()]})}),se&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-full text-sm font-bold animate-bounce shadow-lg",children:" New Notification"}),ne&&!se&&n.jsx("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse shadow-lg",children:" ACTION REQUIRED"})]}),n.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[n.jsxs("div",{className:`
                                      px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-2 border-3 shadow-lg
                                      ${ne?"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 border-orange-500":tn(H.status)}
                                    `,children:[Rn(H.status),n.jsx("span",{className:"capitalize text-base",children:H.status.replace("-"," ")})]}),n.jsxs("div",{className:"flex items-center gap-2 text-base font-semibold text-gray-700 bg-white px-4 py-2 rounded-lg shadow-md",children:[n.jsx(Gi,{className:"w-5 h-5 flex-shrink-0 text-purple-600"}),n.jsx("span",{className:"truncate",children:H.storeName||"Unknown Store"})]})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[Cr&&H.status==="pending"&&n.jsx("button",{onClick:()=>Zt(H.id,"accepted"),className:"w-full sm:w-auto px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors text-sm font-medium",children:"Accept Request"}),Cr&&H.status==="accepted"&&n.jsx("button",{onClick:()=>Zt(H.id,"in-preparation"),className:"w-full sm:w-auto px-4 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 active:bg-purple-800 transition-colors text-sm font-medium",children:"Start Preparation"}),Cr&&H.status==="in-preparation"&&n.jsx("button",{onClick:()=>Zt(H.id,"prepared"),className:"w-full sm:w-auto px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors text-sm font-medium",children:"Mark as Prepared"}),Cr&&H.status==="prepared"&&n.jsx("button",{onClick:()=>xn(H),className:"w-full sm:w-auto px-4 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 active:bg-orange-800 transition-colors text-sm font-medium",children:"Mark as Shipped"}),qt&&(H.status==="shipped"||H.status==="partially-shipped")&&n.jsx("button",{onClick:()=>Zt(H.id,H.status==="partially-shipped"?"partially-delivered":"delivered"),className:"w-full sm:w-auto px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 active:bg-green-800 transition-colors text-sm font-medium",children:"Confirm Delivery"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[n.jsx(Va,{className:"w-4 h-4"}),n.jsxs("span",{children:["Requested by: ",H.requestedByName||H.requestedBy]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-xl p-4 mb-4 border-2 border-indigo-200 shadow-md",children:[n.jsxs("h5",{className:"text-base font-bold text-indigo-800 mb-4 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5"}),"Momos Quantities"]}),n.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-3",children:Ie.map(({camelKey:Z,label:q})=>{const W=H[Z];return!W||W===0?null:n.jsxs("div",{className:"text-center bg-white rounded-lg p-3 shadow-md border-2 border-indigo-200 hover:border-indigo-400 transition-all transform hover:scale-105",children:[n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:W}),n.jsx("p",{className:"text-xs font-semibold text-gray-700 mt-1",children:q.replace(" Momos","").replace(" Momo","")})]},Z)})})]}),H.kitchenUtilities&&Object.keys(H.kitchenUtilities).length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 via-purple-50 to-pink-100 rounded-xl p-5 mb-4 border-2 border-purple-300 shadow-lg",children:[n.jsxs("h5",{className:"text-base font-bold text-purple-900 mb-4 flex items-center gap-2",children:[n.jsx(lU,{className:"w-6 h-6 text-purple-700"}),"Kitchen Utilities"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(H.kitchenUtilities).map(([Z,q])=>n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md border-2 border-purple-200 hover:border-purple-400 transition-all transform hover:scale-105",children:[n.jsxs("p",{className:"text-2xl font-bold text-purple-700 mb-1",children:[q.quantity," ",n.jsx("span",{className:"text-sm font-semibold text-purple-600",children:q.unit})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Z})]},Z))})]}),H.sauces&&Object.keys(H.sauces).length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-pink-100 via-pink-50 to-rose-100 rounded-xl p-5 mb-4 border-2 border-pink-300 shadow-lg",children:[n.jsxs("h5",{className:"text-base font-bold text-pink-900 mb-4 flex items-center gap-2",children:[n.jsx(W9,{className:"w-6 h-6 text-pink-700"}),"Sauces Requested"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:Object.keys(H.sauces).map(Z=>n.jsx("span",{className:"px-5 py-3 bg-gradient-to-r from-pink-400 to-rose-400 text-white rounded-xl text-base font-bold shadow-lg hover:shadow-xl transform hover:scale-110 transition-all",children:Z},Z))})]}),H.utilities&&Object.keys(H.utilities).length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-indigo-100 via-indigo-50 to-blue-100 rounded-xl p-5 mb-4 border-2 border-indigo-300 shadow-lg",children:[n.jsxs("h5",{className:"text-base font-bold text-indigo-900 mb-4 flex items-center gap-2",children:[n.jsx(p9,{className:"w-6 h-6 text-indigo-700"}),"Utilities"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(H.utilities).map(([Z,q])=>n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md border-2 border-indigo-200 hover:border-indigo-400 transition-all transform hover:scale-105",children:[n.jsxs("p",{className:"text-2xl font-bold text-indigo-700 mb-1",children:[q," ",n.jsx("span",{className:"text-sm font-semibold text-indigo-600",children:"pcs"})]}),n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Z})]},Z))})]}),H.notes&&n.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 border-l-4 border-blue-500 p-4 rounded-lg mb-4 shadow-md",children:n.jsxs("p",{className:"text-base text-gray-900 font-semibold",children:[n.jsx("span",{className:"text-blue-700",children:" Notes:"})," ",H.notes]})}),n.jsx("div",{className:"pt-3 border-t border-gray-200",children:n.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500",children:[n.jsxs("div",{children:["Created: ",new Date(H.createdAt).toLocaleString()]}),H.acceptedAt&&n.jsxs("div",{children:["Accepted: ",new Date(H.acceptedAt).toLocaleString()]}),H.preparedAt&&n.jsxs("div",{children:["Prepared: ",new Date(H.preparedAt).toLocaleString()]}),H.shippedAt&&n.jsxs("div",{children:["Shipped: ",new Date(H.shippedAt).toLocaleString()]}),H.deliveredAt&&n.jsxs("div",{children:["Delivered: ",new Date(H.deliveredAt).toLocaleString()]})]})})]})]},H.id)})]})})]},we)})]}),L&&n.jsx(M2,{context:e,selectedStoreId:r||e.user?.storeId,onClose:()=>D(!1),isProductionHouse:!1,isStoreFinishedProducts:!0}),ke&&n.jsx(Cle,{storeId:r||e.user?.storeId||"",accessToken:e.user?.accessToken||"",thresholds:ce,onClose:()=>Ce(!1),onSave:we=>{me(we),Ce(!1)}}),hr&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),n.jsx("p",{className:"text-sm text-blue-100",children:"Set how many momos are in each plate"})]}),n.jsx("button",{onClick:()=>Jt(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:pt,onChange:we=>{const nt=parseInt(we.target.value)||6;Vt(nt),localStorage.setItem("momosPerPlate",nt.toString())},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:border-blue-600 focus:outline-none text-center text-2xl font-bold text-blue-900"}),n.jsx("p",{className:"text-center text-sm text-blue-700 mt-2",children:"pieces per plate"})]})]}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:n.jsx("button",{onClick:()=>Jt(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),Oe&&ze&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-pink-500 p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(Vy,{className:"w-6 h-6"}),"Confirm Shipping Details"]}),n.jsx("p",{className:"text-orange-100 mt-1",children:"Verify quantities and add notes for any changes"})]}),n.jsx("button",{onClick:()=>G(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-220px)]",children:n.jsxs("div",{className:"space-y-6",children:[Object.entries(ct).filter(([we])=>!we.startsWith("kitchenUtility_")&&!we.startsWith("utility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Momos"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ct).filter(([we])=>!we.startsWith("kitchenUtility_")&&!we.startsWith("utility_")).map(([we,nt])=>{const it=ze[we]||0,jt=we.replace(/([A-Z])/g," $1").replace(/^./,H=>H.toUpperCase()),gt=nt!==it;return n.jsx("div",{className:`border rounded-lg p-4 ${gt?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[jt,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",it,")"]})]}),n.jsx("input",{type:"number",min:"0",value:nt,onChange:H=>We({...ct,[we]:parseInt(H.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),gt&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[we]||"",onChange:H=>Ne({...Pe,[we]:H.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},we)})})]}),Object.entries(ct).filter(([we])=>we.startsWith("kitchenUtility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Kitchen Utilities"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ct).filter(([we])=>we.startsWith("kitchenUtility_")).map(([we,nt])=>{const it=we.replace("kitchenUtility_",""),jt=ze.kitchenUtilities?.[it]?.quantity||0,gt=ze.kitchenUtilities?.[it]?.unit||"",H=nt!==jt;return n.jsx("div",{className:`border rounded-lg p-4 ${H?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[it,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",jt," ",gt,")"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",min:"0",value:nt,onChange:se=>We({...ct,[we]:parseFloat(se.target.value)||0}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),n.jsx("span",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:gt})]})]}),H&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[we]||"",onChange:se=>Ne({...Pe,[we]:se.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},we)})})]}),Object.entries(ct).filter(([we])=>we.startsWith("utility_")).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Utilities"}),n.jsx("div",{className:"space-y-3",children:Object.entries(ct).filter(([we])=>we.startsWith("utility_")).map(([we,nt])=>{const it=we.replace("utility_",""),jt=ze.utilities?.[it]||0,gt=nt!==jt;return n.jsx("div",{className:`border rounded-lg p-4 ${gt?"border-amber-300 bg-amber-50":"border-gray-200"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[it,n.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Requested: ",jt," pcs)"]})]}),n.jsx("input",{type:"number",min:"0",value:nt,onChange:H=>We({...ct,[we]:parseInt(H.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),gt&&n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-amber-700 mb-1",children:"Reason for difference *"}),n.jsx("input",{type:"text",value:Pe[we]||"",onChange:H=>Ne({...Pe,[we]:H.target.value}),placeholder:"e.g., Insufficient stock",className:"w-full px-3 py-2 border border-amber-300 rounded-lg bg-white"})]})]})},we)})})]}),n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:tt,onChange:we=>He(we.target.checked),className:"mt-1 w-5 h-5 text-orange-600 rounded border-gray-300"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[n.jsx("strong",{className:"text-gray-900",children:"I confirm that I am responsible for shipping these items"})," and have verified the quantities above. I understand that any discrepancies must be documented with a valid reason."]})]})})]})}),n.jsxs("div",{className:"p-4 bg-gray-100 border-t flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>G(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all font-medium",children:"Cancel"}),n.jsx("button",{onClick:bt,disabled:!tt,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-pink-500 text-white rounded-lg hover:from-orange-600 hover:to-pink-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Shipping"})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var b$=1252,Tle=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Bk={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Uk=function(e){Tle.indexOf(e)!=-1&&(b$=Bk[0]=e)};function Ole(){Uk(1252)}var _i=function(e){Uk(e)};function w$(){_i(1200),Ole()}function wP(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function Ple(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function j$(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Nh=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Ple(e.slice(2)):t==254&&r==255?j$(e.slice(2)):t==65279?e.slice(1):e},Im=function(t){return String.fromCharCode(t)},jP=function(t){return String.fromCharCode(t)},$0,ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function NP(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,d=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,a=e.charCodeAt(u++),o=(r&3)<<4|a>>4,s=e.charCodeAt(u++),l=(a&15)<<2|s>>6,d=s&63,isNaN(a)?l=d=64:isNaN(s)&&(d=64),t+=ul.charAt(i)+ul.charAt(o)+ul.charAt(l)+ul.charAt(d);return t}function Bs(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=ul.indexOf(e.charAt(u++)),o=ul.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=ul.indexOf(e.charAt(u++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),d=ul.indexOf(e.charAt(u++)),s=(l&3)<<6|d,d!==64&&(t+=String.fromCharCode(s));return t}var Pr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Ac=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function vl(e){return Pr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function kP(e){return Pr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Si=function(t){return Pr?Ac(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Tc(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Hk(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Hk(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ll=Pr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Ac(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Ile(e){for(var t=[],r=0,a=e.length+250,s=vl(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=vl(65535),a=65530)}return t.push(s.slice(0,r)),ll(t)}var cs=/\u0000/g,kh=/[\u0001-\u0006]/g;function Id(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ei(e,t){var r=""+e;return r.length>=t?r:In("0",t-r.length)+r}function qk(e,t){var r=""+e;return r.length>=t?r:In(" ",t-r.length)+r}function tg(e,t){var r=""+e;return r.length>=t?r:r+In(" ",t-r.length)}function Dle(e,t){var r=""+Math.round(e);return r.length>=t?r:In("0",t-r.length)+r}function Mle(e,t){var r=""+e;return r.length>=t?r:In("0",t-r.length)+r}var SP=Math.pow(2,32);function md(e,t){if(e>SP||e<-SP)return Dle(e,t);var r=Math.round(e);return Mle(r,t)}function rg(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var _P=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],sj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Rle(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var jr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},EP={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Fle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ng(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,d=1,u=0,f=0,m=Math.floor(s);u<t&&(m=Math.floor(s),l=m*o+i,f=m*u+d,!(s-m<5e-8));)s=1/(s-m),i=o,o=l,d=u,u=f;if(f>t&&(u>t?(f=d,l=i):(f=u,l=o)),!r)return[0,a*l,f];var p=Math.floor(a*l/f);return[p,a*l-p*f,f]}function sc(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var d=new Date(1900,0,1);d.setDate(d.getDate()+a-1),o=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),a<60&&(i=(i+6)%7),r&&(i=qle(d,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var N$=new Date(1899,11,31,0,0,0),$le=N$.getTime(),Lle=new Date(1900,2,1,0,0,0);function k$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Lle&&(r+=1440*60*1e3),(r-($le+(e.getTimezoneOffset()-N$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function zk(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ble(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ule(e){var t=e<0?12:11,r=zk(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Hle(e){var t=zk(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function L0(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Ule(e):t===10?r=e.toFixed(10).substr(0,12):r=Hle(e),zk(Ble(r.toUpperCase()))}function bc(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):L0(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ai(14,k$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function qle(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function zle(e,t,r,a){var s="",i=0,o=0,l=r.y,d,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:d=l%100,u=2;break;default:d=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,u=t.length;break;case 3:return sj[r.m-1][1];case 5:return sj[r.m-1][0];default:return sj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,u=t.length;break;case 3:return _P[r.q][0];default:return _P[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ei(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Ei(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:d=l,u=1;break}var f=u>0?Ei(d,u):"";return f}function hl(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var S$=/%/g;function Wle(e,t,r){var a=t.replace(S$,""),s=t.length-a.length;return To(e,a,r*Math.pow(10,2*s))+In("%",s)}function Kle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return To(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function _$(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var E$=/# (\?+)( ?)\/( ?)(\d+)/;function Vle(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?In(" ",e[1].length+1+e[4].length):qk(o,e[1].length)+e[2]+"/"+e[3]+Ei(l,e[4].length))}function Gle(e,t,r){return r+(t===0?"":""+t)+In(" ",e[1].length+2+e[4].length)}var C$=/^#*0*\.([0#]+)/,A$=/\).*[0#]/,T$=/\(###\) ###\\?-####/;function ns(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function CP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function AP(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Yle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Xle(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Js(e,t,r){if(e.charCodeAt(0)===40&&!t.match(A$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Js("n",a,r):"("+Js("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Kle(e,t,r);if(t.indexOf("%")!==-1)return Wle(e,t,r);if(t.indexOf("E")!==-1)return _$(t,r);if(t.charCodeAt(0)===36)return"$"+Js(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+md(d,t.length);if(t.match(/^[#?]+$/))return s=md(r,0),s==="0"&&(s=""),s.length>t.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(E$))return Vle(i,d,u);if(t.match(/^#+0+$/))return u+md(d,t.length-t.indexOf("0"));if(i=t.match(C$))return s=CP(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ns(i[1])).replace(/\.$/,"."+ns(i[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+In("0",ns(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+CP(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+hl(md(d,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Js(e,t,-r):hl(""+(Math.floor(r)+Yle(r,i[1].length)))+"."+Ei(AP(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Js(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Id(Js(e,t.replace(/[\\-]/g,""),r)),o=0,Id(Id(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(T$))return s=Js(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ng(d,Math.pow(10,o)-1,!1),s=""+u,f=To("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=tg(l[2],o),f.length<i[4].length&&(f=ns(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ng(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?qk(l[1],o)+i[2]+"/"+i[3]+tg(l[2],o):In(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=md(r,0),t.length<=s.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return ns(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=AP(r,i[1].length),r<0?"-"+Js(e,t,-r):hl(Xle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Ei(0,3-b.length):"")+b})+"."+Ei(o,i[1].length);switch(t){case"###,##0.00":return Js(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=hl(md(d,0));return g!=="0"?u+g:"";case"###,###.00":return Js(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Js(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Jle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return To(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Qle(e,t,r){var a=t.replace(S$,""),s=t.length-a.length;return To(e,a,r*Math.pow(10,2*s))+In("%",s)}function O$(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+O$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,u,f){return d+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function $i(e,t,r){if(e.charCodeAt(0)===40&&!t.match(A$)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?$i("n",a,r):"("+$i("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Jle(e,t,r);if(t.indexOf("%")!==-1)return Qle(e,t,r);if(t.indexOf("E")!==-1)return O$(t,r);if(t.charCodeAt(0)===36)return"$"+$i(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,d=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ei(d,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(E$))return Gle(i,d,u);if(t.match(/^#+0+$/))return u+Ei(d,t.length-t.indexOf("0"));if(i=t.match(C$))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ns(i[1])).replace(/\.$/,"."+ns(i[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+In("0",ns(i[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+hl(""+d);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+$i(e,t,-r):hl(""+r)+"."+In("0",i[1].length);if(i=t.match(/^#,#*,#0/))return $i(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Id($i(e,t.replace(/[\\-]/g,""),r)),o=0,Id(Id(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(T$))return s=$i(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ng(d,Math.pow(10,o)-1,!1),s=""+u,f=To("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=tg(l[2],o),f.length<i[4].length&&(f=ns(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ng(d,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?qk(l[1],o)+i[2]+"/"+i[3]+tg(l[2],o):In(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ns(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var m=t.indexOf(".")-o,p=t.length-s.length-m;return ns(t.substr(0,m)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+$i(e,t,-r):hl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Ei(0,3-b.length):"")+b})+"."+Ei(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=hl(""+d);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return $i(e,t.slice(0,t.lastIndexOf(".")),r)+ns(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function To(e,t,r){return(r|0)===r?$i(e,t,r):Js(e,t,r)}function Zle(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var P$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _u(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":rg(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(P$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ece(e,t,r,a){for(var s=[],i="",o=0,l="",d="t",u,f,m,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!rg(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(m=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(m);s[s.length]={t:"t",v:i},++o;break;case"\\":var g=e.charAt(++o),b=g==="("||g===")"?g:"t";s[s.length]={t:b,v:g},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=sc(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},d=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=sc(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&d.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},d=l;break;case"A":case"a":case"":var y={t:l,v:l};if(u==null&&(u=sc(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",o+=5,p="h"):(y.t="t",++o),u==null&&y.t==="T")return"";s[s.length]=y,d=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(P$)){if(u==null&&(u=sc(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",_u(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},d=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var v=0,N=0,k;for(o=s.length-1,d="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,d="h",v<1&&(v=1);break;case"s":(k=s[o].v.match(/\.0+$/))&&(N=Math.max(N,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":d=s[o].t;break;case"m":d==="s"&&(s[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[o].v.match(/[Hh]/)&&(v=1),v<2&&s[o].v.match(/[Mm]/)&&(v=2),v<3&&s[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",A;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=zle(s[o].t.charCodeAt(0),s[o].v,u,N),s[o].t="t";break;case"n":case"?":for(A=o+1;s[A]!=null&&((l=s[A].t)==="?"||l==="D"||(l===" "||l==="t")&&s[A+1]!=null&&(s[A+1].t==="?"||s[A+1].t==="t"&&s[A+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[A].v==="/"||s[A].v===" "&&s[A+1]!=null&&s[A+1].t=="?"));)s[o].v+=s[A].v,s[A]={v:"",t:";"},++A;w+=s[o].v,o=A-1;break;case"G":s[o].t="t",s[o].v=bc(t,r);break}var S="",_,E;if(w.length>0){w.charCodeAt(0)==40?(_=t<0&&w.charCodeAt(0)===45?-t:t,E=To("n",w,_)):(_=t<0&&a>1?-t:t,E=To("n",w,_),_<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),A=E.length-1;var C=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){C=o;break}var I=s.length;if(C===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(A>=s[o].v.length-1?(A-=s[o].v.length,s[o].v=E.substr(A+1,s[o].v.length)):A<0?s[o].v="":(s[o].v=E.substr(0,A+1),A=-1),s[o].t="t",I=o);A>=0&&I<s.length&&(s[I].v=E.substr(0,A+1)+s[I].v)}else if(C!==s.length&&E.indexOf("E")===-1){for(A=E.indexOf(".")-1,o=C;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(f+1);f>=0;--f)A>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(S=E.charAt(A--)+S);s[o].v=S,s[o].t="t",I=o}for(A>=0&&I<s.length&&(s[I].v=E.substr(0,A+1)+s[I].v),A=E.indexOf(".")+1,o=C;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==C)){for(f=s[o].v.indexOf(".")>-1&&o===C?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,f);f<s[o].v.length;++f)A<E.length&&(S+=E.charAt(A++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(_=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=To(s[o].t,s[o].v,_),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var TP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function OP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function tce(e,t){var r=Zle(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(TP),l=r[1].match(TP);return OP(t,o)?[a,r[0]]:OP(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function ai(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:jr)[e],a==null&&(a=r.table&&r.table[EP[e]]||jr[EP[e]]),a==null&&(a=Fle[e]||"General");break}if(rg(a,0))return bc(t,r);t instanceof Date&&(t=k$(t,r.date1904));var s=tce(a,t);if(rg(s[1]))return bc(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ece(s[1],t,r,s[0])}function cc(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(jr[r]==null){t<0&&(t=r);continue}if(jr[r]==e){t=r;break}}t<0&&(t=391)}return jr[t]=e,t}function I$(){jr=Rle()}var rce={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},D$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function nce(e){var t=typeof e=="number"?jr[e]:e;return t=t.replace(D$,"(\\d+)"),new RegExp("^"+t+"$")}function ace(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,d=-1;(t.match(D$)||[]).forEach(function(m,p){var g=parseInt(r[p+1],10);switch(m.toLowerCase().charAt(0)){case"y":a=g;break;case"d":i=g;break;case"h":o=g;break;case"s":d=g;break;case"m":o>=0?l=g:s=g;break}}),d>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return o==-1&&l==-1&&d==-1?u:a==-1&&s==-1&&i==-1?f:u+"T"+f}var sce=(function(){var e={};e.version="1.2.0";function t(){for(var E=0,C=new Array(256),I=0;I!=256;++I)E=I,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,C[I]=E;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function a(E){var C=0,I=0,B=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)M[B]=E[B];for(B=0;B!=256;++B)for(I=E[B],C=256+B;C<4096;C+=256)I=M[C]=I>>>8^E[I&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?M.subarray(B*256,B*256+256):M.slice(B*256,B*256+256);return O}var s=a(r),i=s[0],o=s[1],l=s[2],d=s[3],u=s[4],f=s[5],m=s[6],p=s[7],g=s[8],b=s[9],y=s[10],v=s[11],N=s[12],k=s[13],w=s[14];function A(E,C){for(var I=C^-1,B=0,M=E.length;B<M;)I=I>>>8^r[(I^E.charCodeAt(B++))&255];return~I}function S(E,C){for(var I=C^-1,B=E.length-15,M=0;M<B;)I=w[E[M++]^I&255]^k[E[M++]^I>>8&255]^N[E[M++]^I>>16&255]^v[E[M++]^I>>>24]^y[E[M++]]^b[E[M++]]^g[E[M++]]^p[E[M++]]^m[E[M++]]^f[E[M++]]^u[E[M++]]^d[E[M++]]^l[E[M++]]^o[E[M++]]^i[E[M++]]^r[E[M++]];for(B+=15;M<B;)I=I>>>8^r[(I^E[M++])&255];return~I}function _(E,C){for(var I=C^-1,B=0,M=E.length,O=0,U=0;B<M;)O=E.charCodeAt(B++),O<128?I=I>>>8^r[(I^O)&255]:O<2048?(I=I>>>8^r[(I^(192|O>>6&31))&255],I=I>>>8^r[(I^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,U=E.charCodeAt(B++)&1023,I=I>>>8^r[(I^(240|O>>8&7))&255],I=I>>>8^r[(I^(128|O>>2&63))&255],I=I>>>8^r[(I^(128|U>>6&15|(O&3)<<4))&255],I=I>>>8^r[(I^(128|U&63))&255]):(I=I>>>8^r[(I^(224|O>>12&15))&255],I=I>>>8^r[(I^(128|O>>6&63))&255],I=I>>>8^r[(I^(128|O&63))&255]);return~I}return e.table=r,e.bstr=A,e.buf=S,e.str=_,e})(),Mr=(function(){var t={};t.version="1.2.1";function r(H,se){for(var ne=H.split("/"),Z=se.split("/"),q=0,W=0,ae=Math.min(ne.length,Z.length);q<ae;++q){if(W=ne[q].length-Z[q].length)return W;if(ne[q]!=Z[q])return ne[q]<Z[q]?-1:1}return ne.length-Z.length}function a(H){if(H.charAt(H.length-1)=="/")return H.slice(0,-1).indexOf("/")===-1?H:a(H.slice(0,-1));var se=H.lastIndexOf("/");return se===-1?H:H.slice(0,se+1)}function s(H){if(H.charAt(H.length-1)=="/")return s(H.slice(0,-1));var se=H.lastIndexOf("/");return se===-1?H:H.slice(se+1)}function i(H,se){typeof se=="string"&&(se=new Date(se));var ne=se.getHours();ne=ne<<6|se.getMinutes(),ne=ne<<5|se.getSeconds()>>>1,H.write_shift(2,ne);var Z=se.getFullYear()-1980;Z=Z<<4|se.getMonth()+1,Z=Z<<5|se.getDate(),H.write_shift(2,Z)}function o(H){var se=H.read_shift(2)&65535,ne=H.read_shift(2)&65535,Z=new Date,q=ne&31;ne>>>=5;var W=ne&15;ne>>>=4,Z.setMilliseconds(0),Z.setFullYear(ne+1980),Z.setMonth(W-1),Z.setDate(q);var ae=se&31;se>>>=5;var de=se&63;return se>>>=6,Z.setHours(se),Z.setMinutes(de),Z.setSeconds(ae<<1),Z}function l(H){Ta(H,0);for(var se={},ne=0;H.l<=H.length-4;){var Z=H.read_shift(2),q=H.read_shift(2),W=H.l+q,ae={};switch(Z){case 21589:ne=H.read_shift(1),ne&1&&(ae.mtime=H.read_shift(4)),q>5&&(ne&2&&(ae.atime=H.read_shift(4)),ne&4&&(ae.ctime=H.read_shift(4))),ae.mtime&&(ae.mt=new Date(ae.mtime*1e3));break}H.l=W,se[Z]=ae}return se}var d;function u(){return d||(d={})}function f(H,se){if(H[0]==80&&H[1]==75)return Tt(H,se);if((H[0]|32)==109&&(H[1]|32)==105)return rn(H,se);if(H.length<512)throw new Error("CFB file size "+H.length+" < 512");var ne=3,Z=512,q=0,W=0,ae=0,de=0,z=0,le=[],fe=H.slice(0,512);Ta(fe,0);var De=m(fe);switch(ne=De[0],ne){case 3:Z=512;break;case 4:Z=4096;break;case 0:if(De[1]==0)return Tt(H,se);default:throw new Error("Major Version: Expected 3 or 4 saw "+ne)}Z!==512&&(fe=H.slice(0,Z),Ta(fe,28));var Ve=H.slice(0,Z);p(fe,ne);var Qe=fe.read_shift(4,"i");if(ne===3&&Qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Qe);fe.l+=4,ae=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),de=fe.read_shift(4,"i"),q=fe.read_shift(4,"i"),z=fe.read_shift(4,"i"),W=fe.read_shift(4,"i");for(var Ke=-1,Ge=0;Ge<109&&(Ke=fe.read_shift(4,"i"),!(Ke<0));++Ge)le[Ge]=Ke;var Ct=g(H,Z);v(z,W,Ct,Z,le);var Yt=k(Ct,ae,le,Z);Yt[ae].name="!Directory",q>0&&de!==U&&(Yt[de].name="!MiniFAT"),Yt[le[0]].name="!FAT",Yt.fat_addrs=le,Yt.ssz=Z;var Xt={},wr=[],nn=[],ln=[];w(ae,Yt,Ct,wr,q,Xt,nn,de),b(nn,ln,wr),wr.shift();var Ze={FileIndex:nn,FullPaths:ln};return se&&se.raw&&(Ze.raw={header:Ve,sectors:Ct}),Ze}function m(H){if(H[H.l]==80&&H[H.l+1]==75)return[0,0];H.chk(ie,"Header Signature: "),H.l+=16;var se=H.read_shift(2,"u");return[H.read_shift(2,"u"),se]}function p(H,se){var ne=9;switch(H.l+=2,ne=H.read_shift(2)){case 9:if(se!=3)throw new Error("Sector Shift: Expected 9 saw "+ne);break;case 12:if(se!=4)throw new Error("Sector Shift: Expected 12 saw "+ne);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ne)}H.chk("0600","Mini Sector Shift: "),H.chk("000000000000","Reserved: ")}function g(H,se){for(var ne=Math.ceil(H.length/se)-1,Z=[],q=1;q<ne;++q)Z[q-1]=H.slice(q*se,(q+1)*se);return Z[ne-1]=H.slice(ne*se),Z}function b(H,se,ne){for(var Z=0,q=0,W=0,ae=0,de=0,z=ne.length,le=[],fe=[];Z<z;++Z)le[Z]=fe[Z]=Z,se[Z]=ne[Z];for(;de<fe.length;++de)Z=fe[de],q=H[Z].L,W=H[Z].R,ae=H[Z].C,le[Z]===Z&&(q!==-1&&le[q]!==q&&(le[Z]=le[q]),W!==-1&&le[W]!==W&&(le[Z]=le[W])),ae!==-1&&(le[ae]=Z),q!==-1&&Z!=le[Z]&&(le[q]=le[Z],fe.lastIndexOf(q)<de&&fe.push(q)),W!==-1&&Z!=le[Z]&&(le[W]=le[Z],fe.lastIndexOf(W)<de&&fe.push(W));for(Z=1;Z<z;++Z)le[Z]===Z&&(W!==-1&&le[W]!==W?le[Z]=le[W]:q!==-1&&le[q]!==q&&(le[Z]=le[q]));for(Z=1;Z<z;++Z)if(H[Z].type!==0){if(de=Z,de!=le[de])do de=le[de],se[Z]=se[de]+"/"+se[Z];while(de!==0&&le[de]!==-1&&de!=le[de]);le[Z]=-1}for(se[0]+="/",Z=1;Z<z;++Z)H[Z].type!==2&&(se[Z]+="/")}function y(H,se,ne){for(var Z=H.start,q=H.size,W=[],ae=Z;ne&&q>0&&ae>=0;)W.push(se.slice(ae*O,ae*O+O)),q-=O,ae=Ql(ne,ae*4);return W.length===0?da(0):ll(W).slice(0,H.size)}function v(H,se,ne,Z,q){var W=U;if(H===U){if(se!==0)throw new Error("DIFAT chain shorter than expected")}else if(H!==-1){var ae=ne[H],de=(Z>>>2)-1;if(!ae)return;for(var z=0;z<de&&(W=Ql(ae,z*4))!==U;++z)q.push(W);v(Ql(ae,Z-4),se-1,ne,Z,q)}}function N(H,se,ne,Z,q){var W=[],ae=[];q||(q=[]);var de=Z-1,z=0,le=0;for(z=se;z>=0;){q[z]=!0,W[W.length]=z,ae.push(H[z]);var fe=ne[Math.floor(z*4/Z)];if(le=z*4&de,Z<4+le)throw new Error("FAT boundary crossed: "+z+" 4 "+Z);if(!H[fe])break;z=Ql(H[fe],le)}return{nodes:W,data:UP([ae])}}function k(H,se,ne,Z){var q=H.length,W=[],ae=[],de=[],z=[],le=Z-1,fe=0,De=0,Ve=0,Qe=0;for(fe=0;fe<q;++fe)if(de=[],Ve=fe+se,Ve>=q&&(Ve-=q),!ae[Ve]){z=[];var Ke=[];for(De=Ve;De>=0;){Ke[De]=!0,ae[De]=!0,de[de.length]=De,z.push(H[De]);var Ge=ne[Math.floor(De*4/Z)];if(Qe=De*4&le,Z<4+Qe)throw new Error("FAT boundary crossed: "+De+" 4 "+Z);if(!H[Ge]||(De=Ql(H[Ge],Qe),Ke[De]))break}W[Ve]={nodes:de,data:UP([z])}}return W}function w(H,se,ne,Z,q,W,ae,de){for(var z=0,le=Z.length?2:0,fe=se[H].data,De=0,Ve=0,Qe;De<fe.length;De+=128){var Ke=fe.slice(De,De+128);Ta(Ke,64),Ve=Ke.read_shift(2),Qe=Yk(Ke,0,Ve-le),Z.push(Qe);var Ge={name:Qe,type:Ke.read_shift(1),color:Ke.read_shift(1),L:Ke.read_shift(4,"i"),R:Ke.read_shift(4,"i"),C:Ke.read_shift(4,"i"),clsid:Ke.read_shift(16),state:Ke.read_shift(4,"i"),start:0,size:0},Ct=Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2);Ct!==0&&(Ge.ct=A(Ke,Ke.l-8));var Yt=Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2)+Ke.read_shift(2);Yt!==0&&(Ge.mt=A(Ke,Ke.l-8)),Ge.start=Ke.read_shift(4,"i"),Ge.size=Ke.read_shift(4,"i"),Ge.size<0&&Ge.start<0&&(Ge.size=Ge.type=0,Ge.start=U,Ge.name=""),Ge.type===5?(z=Ge.start,q>0&&z!==U&&(se[z].name="!StreamData")):Ge.size>=4096?(Ge.storage="fat",se[Ge.start]===void 0&&(se[Ge.start]=N(ne,Ge.start,se.fat_addrs,se.ssz)),se[Ge.start].name=Ge.name,Ge.content=se[Ge.start].data.slice(0,Ge.size)):(Ge.storage="minifat",Ge.size<0?Ge.size=0:z!==U&&Ge.start!==U&&se[z]&&(Ge.content=y(Ge,se[z].data,(se[de]||{}).data))),Ge.content&&Ta(Ge.content,0),W[Qe]=Ge,ae.push(Ge)}}function A(H,se){return new Date((Ps(H,se+4)/1e7*Math.pow(2,32)+Ps(H,se)/1e7-11644473600)*1e3)}function S(H,se){return u(),f(d.readFileSync(H),se)}function _(H,se){var ne=se&&se.type;switch(ne||Pr&&Buffer.isBuffer(H)&&(ne="buffer"),ne||"base64"){case"file":return S(H,se);case"base64":return f(Si(Bs(H)),se);case"binary":return f(Si(H),se)}return f(H,se)}function E(H,se){var ne=se||{},Z=ne.root||"Root Entry";if(H.FullPaths||(H.FullPaths=[]),H.FileIndex||(H.FileIndex=[]),H.FullPaths.length!==H.FileIndex.length)throw new Error("inconsistent CFB structure");H.FullPaths.length===0&&(H.FullPaths[0]=Z+"/",H.FileIndex[0]={name:Z,type:5}),ne.CLSID&&(H.FileIndex[0].clsid=ne.CLSID),C(H)}function C(H){var se="Sh33tJ5";if(!Mr.find(H,"/"+se)){var ne=da(4);ne[0]=55,ne[1]=ne[3]=50,ne[2]=54,H.FileIndex.push({name:se,type:2,content:ne,size:4,L:69,R:69,C:69}),H.FullPaths.push(H.FullPaths[0]+se),I(H)}}function I(H,se){E(H);for(var ne=!1,Z=!1,q=H.FullPaths.length-1;q>=0;--q){var W=H.FileIndex[q];switch(W.type){case 0:Z?ne=!0:(H.FileIndex.pop(),H.FullPaths.pop());break;case 1:case 2:case 5:Z=!0,isNaN(W.R*W.L*W.C)&&(ne=!0),W.R>-1&&W.L>-1&&W.R==W.L&&(ne=!0);break;default:ne=!0;break}}if(!(!ne&&!se)){var ae=new Date(1987,1,19),de=0,z=Object.create?Object.create(null):{},le=[];for(q=0;q<H.FullPaths.length;++q)z[H.FullPaths[q]]=!0,H.FileIndex[q].type!==0&&le.push([H.FullPaths[q],H.FileIndex[q]]);for(q=0;q<le.length;++q){var fe=a(le[q][0]);Z=z[fe],Z||(le.push([fe,{name:s(fe).replace("/",""),type:1,clsid:re,ct:ae,mt:ae,content:null}]),z[fe]=!0)}for(le.sort(function(Qe,Ke){return r(Qe[0],Ke[0])}),H.FullPaths=[],H.FileIndex=[],q=0;q<le.length;++q)H.FullPaths[q]=le[q][0],H.FileIndex[q]=le[q][1];for(q=0;q<le.length;++q){var De=H.FileIndex[q],Ve=H.FullPaths[q];if(De.name=s(Ve).replace("/",""),De.L=De.R=De.C=-(De.color=1),De.size=De.content?De.content.length:0,De.start=0,De.clsid=De.clsid||re,q===0)De.C=le.length>1?1:-1,De.size=0,De.type=5;else if(Ve.slice(-1)=="/"){for(de=q+1;de<le.length&&a(H.FullPaths[de])!=Ve;++de);for(De.C=de>=le.length?-1:de,de=q+1;de<le.length&&a(H.FullPaths[de])!=a(Ve);++de);De.R=de>=le.length?-1:de,De.type=1}else a(H.FullPaths[q+1]||"")==a(Ve)&&(De.R=q+1),De.type=2}}}function B(H,se){var ne=se||{};if(ne.fileType=="mad")return kr(H,ne);switch(I(H),ne.fileType){case"zip":return xn(H,ne)}var Z=(function(Qe){for(var Ke=0,Ge=0,Ct=0;Ct<Qe.FileIndex.length;++Ct){var Yt=Qe.FileIndex[Ct];if(Yt.content){var Xt=Yt.content.length;Xt>0&&(Xt<4096?Ke+=Xt+63>>6:Ge+=Xt+511>>9)}}for(var wr=Qe.FullPaths.length+3>>2,nn=Ke+7>>3,ln=Ke+127>>7,Ze=nn+Ge+wr+ln,Lr=Ze+127>>7,ue=Lr<=109?0:Math.ceil((Lr-109)/127);Ze+Lr+ue+127>>7>Lr;)ue=++Lr<=109?0:Math.ceil((Lr-109)/127);var Ee=[1,ue,Lr,ln,wr,Ge,Ke,0];return Qe.FileIndex[0].size=Ke<<6,Ee[7]=(Qe.FileIndex[0].start=Ee[0]+Ee[1]+Ee[2]+Ee[3]+Ee[4]+Ee[5])+(Ee[6]+7>>3),Ee})(H),q=da(Z[7]<<9),W=0,ae=0;{for(W=0;W<8;++W)q.write_shift(1,X[W]);for(W=0;W<8;++W)q.write_shift(2,0);for(q.write_shift(2,62),q.write_shift(2,3),q.write_shift(2,65534),q.write_shift(2,9),q.write_shift(2,6),W=0;W<3;++W)q.write_shift(2,0);for(q.write_shift(4,0),q.write_shift(4,Z[2]),q.write_shift(4,Z[0]+Z[1]+Z[2]+Z[3]-1),q.write_shift(4,0),q.write_shift(4,4096),q.write_shift(4,Z[3]?Z[0]+Z[1]+Z[2]-1:U),q.write_shift(4,Z[3]),q.write_shift(-4,Z[1]?Z[0]-1:U),q.write_shift(4,Z[1]),W=0;W<109;++W)q.write_shift(-4,W<Z[2]?Z[1]+W:-1)}if(Z[1])for(ae=0;ae<Z[1];++ae){for(;W<236+ae*127;++W)q.write_shift(-4,W<Z[2]?Z[1]+W:-1);q.write_shift(-4,ae===Z[1]-1?U:ae+1)}var de=function(Qe){for(ae+=Qe;W<ae-1;++W)q.write_shift(-4,W+1);Qe&&(++W,q.write_shift(-4,U))};for(ae=W=0,ae+=Z[1];W<ae;++W)q.write_shift(-4,oe.DIFSECT);for(ae+=Z[2];W<ae;++W)q.write_shift(-4,oe.FATSECT);de(Z[3]),de(Z[4]);for(var z=0,le=0,fe=H.FileIndex[0];z<H.FileIndex.length;++z)fe=H.FileIndex[z],fe.content&&(le=fe.content.length,!(le<4096)&&(fe.start=ae,de(le+511>>9)));for(de(Z[6]+7>>3);q.l&511;)q.write_shift(-4,oe.ENDOFCHAIN);for(ae=W=0,z=0;z<H.FileIndex.length;++z)fe=H.FileIndex[z],fe.content&&(le=fe.content.length,!(!le||le>=4096)&&(fe.start=ae,de(le+63>>6)));for(;q.l&511;)q.write_shift(-4,oe.ENDOFCHAIN);for(W=0;W<Z[4]<<2;++W){var De=H.FullPaths[W];if(!De||De.length===0){for(z=0;z<17;++z)q.write_shift(4,0);for(z=0;z<3;++z)q.write_shift(4,-1);for(z=0;z<12;++z)q.write_shift(4,0);continue}fe=H.FileIndex[W],W===0&&(fe.start=fe.size?fe.start-1:U);var Ve=W===0&&ne.root||fe.name;if(le=2*(Ve.length+1),q.write_shift(64,Ve,"utf16le"),q.write_shift(2,le),q.write_shift(1,fe.type),q.write_shift(1,fe.color),q.write_shift(-4,fe.L),q.write_shift(-4,fe.R),q.write_shift(-4,fe.C),fe.clsid)q.write_shift(16,fe.clsid,"hex");else for(z=0;z<4;++z)q.write_shift(4,0);q.write_shift(4,fe.state||0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,fe.start),q.write_shift(4,fe.size),q.write_shift(4,0)}for(W=1;W<H.FileIndex.length;++W)if(fe=H.FileIndex[W],fe.size>=4096)if(q.l=fe.start+1<<9,Pr&&Buffer.isBuffer(fe.content))fe.content.copy(q,q.l,0,fe.size),q.l+=fe.size+511&-512;else{for(z=0;z<fe.size;++z)q.write_shift(1,fe.content[z]);for(;z&511;++z)q.write_shift(1,0)}for(W=1;W<H.FileIndex.length;++W)if(fe=H.FileIndex[W],fe.size>0&&fe.size<4096)if(Pr&&Buffer.isBuffer(fe.content))fe.content.copy(q,q.l,0,fe.size),q.l+=fe.size+63&-64;else{for(z=0;z<fe.size;++z)q.write_shift(1,fe.content[z]);for(;z&63;++z)q.write_shift(1,0)}if(Pr)q.l=q.length;else for(;q.l<q.length;)q.write_shift(1,0);return q}function M(H,se){var ne=H.FullPaths.map(function(z){return z.toUpperCase()}),Z=ne.map(function(z){var le=z.split("/");return le[le.length-(z.slice(-1)=="/"?2:1)]}),q=!1;se.charCodeAt(0)===47?(q=!0,se=ne[0].slice(0,-1)+se):q=se.indexOf("/")!==-1;var W=se.toUpperCase(),ae=q===!0?ne.indexOf(W):Z.indexOf(W);if(ae!==-1)return H.FileIndex[ae];var de=!W.match(kh);for(W=W.replace(cs,""),de&&(W=W.replace(kh,"!")),ae=0;ae<ne.length;++ae)if((de?ne[ae].replace(kh,"!"):ne[ae]).replace(cs,"")==W||(de?Z[ae].replace(kh,"!"):Z[ae]).replace(cs,"")==W)return H.FileIndex[ae];return null}var O=64,U=-2,ie="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",oe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(H,se,ne){u();var Z=B(H,ne);d.writeFileSync(se,Z)}function F(H){for(var se=new Array(H.length),ne=0;ne<H.length;++ne)se[ne]=String.fromCharCode(H[ne]);return se.join("")}function J(H,se){var ne=B(H,se);switch(se&&se.type||"buffer"){case"file":return u(),d.writeFileSync(se.filename,ne),ne;case"binary":return typeof ne=="string"?ne:F(ne);case"base64":return NP(typeof ne=="string"?ne:F(ne));case"buffer":if(Pr)return Buffer.isBuffer(ne)?ne:Ac(ne);case"array":return typeof ne=="string"?Si(ne):ne}return ne}var L;function D(H){try{var se=H.InflateRaw,ne=new se;if(ne._processChunk(new Uint8Array([3,0]),ne._finishFlushFlag),ne.bytesRead)L=H;else throw new Error("zlib does not expose bytesRead")}catch(Z){console.error("cannot use native zlib: "+(Z.message||Z))}}function Y(H,se){if(!L)return mt(H,se);var ne=L.InflateRaw,Z=new ne,q=Z._processChunk(H.slice(H.l),Z._finishFlushFlag);return H.l+=Z.bytesRead,q}function V(H){return L?L.deflateRawSync(H):kt(H)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ke=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(H){var se=(H<<1|H<<11)&139536|(H<<5|H<<15)&558144;return(se>>16|se>>8|se)&255}for(var ce=typeof Uint8Array<"u",me=ce?new Uint8Array(256):[],Oe=0;Oe<256;++Oe)me[Oe]=Ce(Oe);function G(H,se){var ne=me[H&255];return se<=8?ne>>>8-se:(ne=ne<<8|me[H>>8&255],se<=16?ne>>>16-se:(ne=ne<<8|me[H>>16&255],ne>>>24-se))}function ze(H,se){var ne=se&7,Z=se>>>3;return(H[Z]|(ne<=6?0:H[Z+1]<<8))>>>ne&3}function Ye(H,se){var ne=se&7,Z=se>>>3;return(H[Z]|(ne<=5?0:H[Z+1]<<8))>>>ne&7}function ct(H,se){var ne=se&7,Z=se>>>3;return(H[Z]|(ne<=4?0:H[Z+1]<<8))>>>ne&15}function We(H,se){var ne=se&7,Z=se>>>3;return(H[Z]|(ne<=3?0:H[Z+1]<<8))>>>ne&31}function Pe(H,se){var ne=se&7,Z=se>>>3;return(H[Z]|(ne<=1?0:H[Z+1]<<8))>>>ne&127}function Ne(H,se,ne){var Z=se&7,q=se>>>3,W=(1<<ne)-1,ae=H[q]>>>Z;return ne<8-Z||(ae|=H[q+1]<<8-Z,ne<16-Z)||(ae|=H[q+2]<<16-Z,ne<24-Z)||(ae|=H[q+3]<<24-Z),ae&W}function tt(H,se,ne){var Z=se&7,q=se>>>3;return Z<=5?H[q]|=(ne&7)<<Z:(H[q]|=ne<<Z&255,H[q+1]=(ne&7)>>8-Z),se+3}function He(H,se,ne){var Z=se&7,q=se>>>3;return ne=(ne&1)<<Z,H[q]|=ne,se+1}function pt(H,se,ne){var Z=se&7,q=se>>>3;return ne<<=Z,H[q]|=ne&255,ne>>>=8,H[q+1]=ne,se+8}function Vt(H,se,ne){var Z=se&7,q=se>>>3;return ne<<=Z,H[q]|=ne&255,ne>>>=8,H[q+1]=ne&255,H[q+2]=ne>>>8,se+16}function hr(H,se){var ne=H.length,Z=2*ne>se?2*ne:se+5,q=0;if(ne>=se)return H;if(Pr){var W=kP(Z);if(H.copy)H.copy(W);else for(;q<H.length;++q)W[q]=H[q];return W}else if(ce){var ae=new Uint8Array(Z);if(ae.set)ae.set(H);else for(;q<ne;++q)ae[q]=H[q];return ae}return H.length=Z,H}function Jt(H){for(var se=new Array(H),ne=0;ne<H;++ne)se[ne]=0;return se}function Dr(H,se,ne){var Z=1,q=0,W=0,ae=0,de=0,z=H.length,le=ce?new Uint16Array(32):Jt(32);for(W=0;W<32;++W)le[W]=0;for(W=z;W<ne;++W)H[W]=0;z=H.length;var fe=ce?new Uint16Array(z):Jt(z);for(W=0;W<z;++W)le[q=H[W]]++,Z<q&&(Z=q),fe[W]=0;for(le[0]=0,W=1;W<=Z;++W)le[W+16]=de=de+le[W-1]<<1;for(W=0;W<z;++W)de=H[W],de!=0&&(fe[W]=le[de+16]++);var De=0;for(W=0;W<z;++W)if(De=H[W],De!=0)for(de=G(fe[W],Z)>>Z-De,ae=(1<<Z+4-De)-1;ae>=0;--ae)se[de|ae<<De]=De&15|W<<4;return Z}var Hr=ce?new Uint16Array(512):Jt(512),ot=ce?new Uint16Array(32):Jt(32);if(!ce){for(var qt=0;qt<512;++qt)Hr[qt]=0;for(qt=0;qt<32;++qt)ot[qt]=0}(function(){for(var H=[],se=0;se<32;se++)H.push(5);Dr(H,ot,32);var ne=[];for(se=0;se<=143;se++)ne.push(8);for(;se<=255;se++)ne.push(9);for(;se<=279;se++)ne.push(7);for(;se<=287;se++)ne.push(8);Dr(ne,Hr,288)})();var Cr=(function(){for(var se=ce?new Uint8Array(32768):[],ne=0,Z=0;ne<ke.length-1;++ne)for(;Z<ke[ne+1];++Z)se[Z]=ne;for(;Z<32768;++Z)se[Z]=29;var q=ce?new Uint8Array(259):[];for(ne=0,Z=0;ne<ge.length-1;++ne)for(;Z<ge[ne+1];++Z)q[Z]=ne;function W(de,z){for(var le=0;le<de.length;){var fe=Math.min(65535,de.length-le),De=le+fe==de.length;for(z.write_shift(1,+De),z.write_shift(2,fe),z.write_shift(2,~fe&65535);fe-- >0;)z[z.l++]=de[le++]}return z.l}function ae(de,z){for(var le=0,fe=0,De=ce?new Uint16Array(32768):[];fe<de.length;){var Ve=Math.min(65535,de.length-fe);if(Ve<10){for(le=tt(z,le,+(fe+Ve==de.length)),le&7&&(le+=8-(le&7)),z.l=le/8|0,z.write_shift(2,Ve),z.write_shift(2,~Ve&65535);Ve-- >0;)z[z.l++]=de[fe++];le=z.l*8;continue}le=tt(z,le,+(fe+Ve==de.length)+2);for(var Qe=0;Ve-- >0;){var Ke=de[fe];Qe=(Qe<<5^Ke)&32767;var Ge=-1,Ct=0;if((Ge=De[Qe])&&(Ge|=fe&-32768,Ge>fe&&(Ge-=32768),Ge<fe))for(;de[Ge+Ct]==de[fe+Ct]&&Ct<250;)++Ct;if(Ct>2){Ke=q[Ct],Ke<=22?le=pt(z,le,me[Ke+1]>>1)-1:(pt(z,le,3),le+=5,pt(z,le,me[Ke-23]>>5),le+=3);var Yt=Ke<8?0:Ke-4>>2;Yt>0&&(Vt(z,le,Ct-ge[Ke]),le+=Yt),Ke=se[fe-Ge],le=pt(z,le,me[Ke]>>3),le-=3;var Xt=Ke<4?0:Ke-2>>1;Xt>0&&(Vt(z,le,fe-Ge-ke[Ke]),le+=Xt);for(var wr=0;wr<Ct;++wr)De[Qe]=fe&32767,Qe=(Qe<<5^de[fe])&32767,++fe;Ve-=Ct-1}else Ke<=143?Ke=Ke+48:le=He(z,le,1),le=pt(z,le,me[Ke]),De[Qe]=fe&32767,++fe}le=pt(z,le,0)-1}return z.l=(le+7)/8|0,z.l}return function(z,le){return z.length<8?W(z,le):ae(z,le)}})();function kt(H){var se=da(50+Math.floor(H.length*1.1)),ne=Cr(H,se);return se.slice(0,ne)}var Gt=ce?new Uint16Array(32768):Jt(32768),$e=ce?new Uint16Array(32768):Jt(32768),Ie=ce?new Uint16Array(128):Jt(128),Et=1,Be=1;function _t(H,se){var ne=We(H,se)+257;se+=5;var Z=We(H,se)+1;se+=5;var q=ct(H,se)+4;se+=4;for(var W=0,ae=ce?new Uint8Array(19):Jt(19),de=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z=1,le=ce?new Uint8Array(8):Jt(8),fe=ce?new Uint8Array(8):Jt(8),De=ae.length,Ve=0;Ve<q;++Ve)ae[ee[Ve]]=W=Ye(H,se),z<W&&(z=W),le[W]++,se+=3;var Qe=0;for(le[0]=0,Ve=1;Ve<=z;++Ve)fe[Ve]=Qe=Qe+le[Ve-1]<<1;for(Ve=0;Ve<De;++Ve)(Qe=ae[Ve])!=0&&(de[Ve]=fe[Qe]++);var Ke=0;for(Ve=0;Ve<De;++Ve)if(Ke=ae[Ve],Ke!=0){Qe=me[de[Ve]]>>8-Ke;for(var Ge=(1<<7-Ke)-1;Ge>=0;--Ge)Ie[Qe|Ge<<Ke]=Ke&7|Ve<<3}var Ct=[];for(z=1;Ct.length<ne+Z;)switch(Qe=Ie[Pe(H,se)],se+=Qe&7,Qe>>>=3){case 16:for(W=3+ze(H,se),se+=2,Qe=Ct[Ct.length-1];W-- >0;)Ct.push(Qe);break;case 17:for(W=3+Ye(H,se),se+=3;W-- >0;)Ct.push(0);break;case 18:for(W=11+Pe(H,se),se+=7;W-- >0;)Ct.push(0);break;default:Ct.push(Qe),z<Qe&&(z=Qe);break}var Yt=Ct.slice(0,ne),Xt=Ct.slice(ne);for(Ve=ne;Ve<286;++Ve)Yt[Ve]=0;for(Ve=Z;Ve<30;++Ve)Xt[Ve]=0;return Et=Dr(Yt,Gt,286),Be=Dr(Xt,$e,30),se}function St(H,se){if(H[0]==3&&!(H[1]&3))return[vl(se),2];for(var ne=0,Z=0,q=kP(se||1<<18),W=0,ae=q.length>>>0,de=0,z=0;(Z&1)==0;){if(Z=Ye(H,ne),ne+=3,Z>>>1)Z>>1==1?(de=9,z=5):(ne=_t(H,ne),de=Et,z=Be);else{ne&7&&(ne+=8-(ne&7));var le=H[ne>>>3]|H[(ne>>>3)+1]<<8;if(ne+=32,le>0)for(!se&&ae<W+le&&(q=hr(q,W+le),ae=q.length);le-- >0;)q[W++]=H[ne>>>3],ne+=8;continue}for(;;){!se&&ae<W+32767&&(q=hr(q,W+32767),ae=q.length);var fe=Ne(H,ne,de),De=Z>>>1==1?Hr[fe]:Gt[fe];if(ne+=De&15,De>>>=4,(De>>>8&255)===0)q[W++]=De;else{if(De==256)break;De-=257;var Ve=De<8?0:De-4>>2;Ve>5&&(Ve=0);var Qe=W+ge[De];Ve>0&&(Qe+=Ne(H,ne,Ve),ne+=Ve),fe=Ne(H,ne,z),De=Z>>>1==1?ot[fe]:$e[fe],ne+=De&15,De>>>=4;var Ke=De<4?0:De-2>>1,Ge=ke[De];for(Ke>0&&(Ge+=Ne(H,ne,Ke),ne+=Ke),!se&&ae<Qe&&(q=hr(q,Qe+100),ae=q.length);W<Qe;)q[W]=q[W-Ge],++W}}}return se?[q,ne+7>>>3]:[q.slice(0,W),ne+7>>>3]}function mt(H,se){var ne=H.slice(H.l||0),Z=St(ne,se);return H.l+=Z[1],Z[0]}function Qt(H,se){if(H)typeof console<"u"&&console.error(se);else throw new Error(se)}function Tt(H,se){var ne=H;Ta(ne,0);var Z=[],q=[],W={FileIndex:Z,FullPaths:q};E(W,{root:se.root});for(var ae=ne.length-4;(ne[ae]!=80||ne[ae+1]!=75||ne[ae+2]!=5||ne[ae+3]!=6)&&ae>=0;)--ae;ne.l=ae+4,ne.l+=4;var de=ne.read_shift(2);ne.l+=6;var z=ne.read_shift(4);for(ne.l=z,ae=0;ae<de;++ae){ne.l+=20;var le=ne.read_shift(4),fe=ne.read_shift(4),De=ne.read_shift(2),Ve=ne.read_shift(2),Qe=ne.read_shift(2);ne.l+=8;var Ke=ne.read_shift(4),Ge=l(ne.slice(ne.l+De,ne.l+De+Ve));ne.l+=De+Ve+Qe;var Ct=ne.l;ne.l=Ke+4,Zt(ne,le,fe,W,Ge),ne.l=Ct}return W}function Zt(H,se,ne,Z,q){H.l+=2;var W=H.read_shift(2),ae=H.read_shift(2),de=o(H);if(W&8257)throw new Error("Unsupported ZIP encryption");for(var z=H.read_shift(4),le=H.read_shift(4),fe=H.read_shift(4),De=H.read_shift(2),Ve=H.read_shift(2),Qe="",Ke=0;Ke<De;++Ke)Qe+=String.fromCharCode(H[H.l++]);if(Ve){var Ge=l(H.slice(H.l,H.l+Ve));(Ge[21589]||{}).mt&&(de=Ge[21589].mt),((q||{})[21589]||{}).mt&&(de=q[21589].mt)}H.l+=Ve;var Ct=H.slice(H.l,H.l+le);switch(ae){case 8:Ct=Y(H,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ae)}var Yt=!1;W&8&&(z=H.read_shift(4),z==134695760&&(z=H.read_shift(4),Yt=!0),le=H.read_shift(4),fe=H.read_shift(4)),le!=se&&Qt(Yt,"Bad compressed size: "+se+" != "+le),fe!=ne&&Qt(Yt,"Bad uncompressed size: "+ne+" != "+fe),nt(Z,Qe,Ct,{unsafe:!0,mt:de})}function xn(H,se){var ne=se||{},Z=[],q=[],W=da(1),ae=ne.compression?8:0,de=0,z=0,le=0,fe=0,De=0,Ve=H.FullPaths[0],Qe=Ve,Ke=H.FileIndex[0],Ge=[],Ct=0;for(z=1;z<H.FullPaths.length;++z)if(Qe=H.FullPaths[z].slice(Ve.length),Ke=H.FileIndex[z],!(!Ke.size||!Ke.content||Qe=="Sh33tJ5")){var Yt=fe,Xt=da(Qe.length);for(le=0;le<Qe.length;++le)Xt.write_shift(1,Qe.charCodeAt(le)&127);Xt=Xt.slice(0,Xt.l),Ge[De]=sce.buf(Ke.content,0);var wr=Ke.content;ae==8&&(wr=V(wr)),W=da(30),W.write_shift(4,67324752),W.write_shift(2,20),W.write_shift(2,de),W.write_shift(2,ae),Ke.mt?i(W,Ke.mt):W.write_shift(4,0),W.write_shift(-4,Ge[De]),W.write_shift(4,wr.length),W.write_shift(4,Ke.content.length),W.write_shift(2,Xt.length),W.write_shift(2,0),fe+=W.length,Z.push(W),fe+=Xt.length,Z.push(Xt),fe+=wr.length,Z.push(wr),W=da(46),W.write_shift(4,33639248),W.write_shift(2,0),W.write_shift(2,20),W.write_shift(2,de),W.write_shift(2,ae),W.write_shift(4,0),W.write_shift(-4,Ge[De]),W.write_shift(4,wr.length),W.write_shift(4,Ke.content.length),W.write_shift(2,Xt.length),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(4,0),W.write_shift(4,Yt),Ct+=W.l,q.push(W),Ct+=Xt.length,q.push(Xt),++De}return W=da(22),W.write_shift(4,101010256),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(2,De),W.write_shift(2,De),W.write_shift(4,Ct),W.write_shift(4,fe),W.write_shift(2,0),ll([ll(Z),ll(q),W])}var bt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function tn(H,se){if(H.ctype)return H.ctype;var ne=H.name||"",Z=ne.match(/\.([^\.]+)$/);return Z&&bt[Z[1]]||se&&(Z=(ne=se).match(/[\.\\]([^\.\\])+$/),Z&&bt[Z[1]])?bt[Z[1]]:"application/octet-stream"}function Rn(H){for(var se=NP(H),ne=[],Z=0;Z<se.length;Z+=76)ne.push(se.slice(Z,Z+76));return ne.join(`\r
`)+`\r
`}function Bt(H){var se=H.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(le){var fe=le.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});se=se.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),se.charAt(0)==`
`&&(se="=0D"+se.slice(1)),se=se.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ne=[],Z=se.split(`\r
`),q=0;q<Z.length;++q){var W=Z[q];if(W.length==0){ne.push("");continue}for(var ae=0;ae<W.length;){var de=76,z=W.slice(ae,ae+de);z.charAt(de-1)=="="?de--:z.charAt(de-2)=="="?de-=2:z.charAt(de-3)=="="&&(de-=3),z=W.slice(ae,ae+de),ae+=de,ae<W.length&&(z+="="),ne.push(z)}}return ne.join(`\r
`)}function Ut(H){for(var se=[],ne=0;ne<H.length;++ne){for(var Z=H[ne];ne<=H.length&&Z.charAt(Z.length-1)=="=";)Z=Z.slice(0,Z.length-1)+H[++ne];se.push(Z)}for(var q=0;q<se.length;++q)se[q]=se[q].replace(/[=][0-9A-Fa-f]{2}/g,function(W){return String.fromCharCode(parseInt(W.slice(1),16))});return Si(se.join(`\r
`))}function yn(H,se,ne){for(var Z="",q="",W="",ae,de=0;de<10;++de){var z=se[de];if(!z||z.match(/^\s*$/))break;var le=z.match(/^(.*?):\s*([^\s].*)$/);if(le)switch(le[1].toLowerCase()){case"content-location":Z=le[2].trim();break;case"content-type":W=le[2].trim();break;case"content-transfer-encoding":q=le[2].trim();break}}switch(++de,q.toLowerCase()){case"base64":ae=Si(Bs(se.slice(de).join("")));break;case"quoted-printable":ae=Ut(se.slice(de));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+q)}var fe=nt(H,Z.slice(ne.length),ae,{unsafe:!0});W&&(fe.ctype=W)}function rn(H,se){if(F(H.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ne=se&&se.root||"",Z=(Pr&&Buffer.isBuffer(H)?H.toString("binary"):F(H)).split(`\r
`),q=0,W="";for(q=0;q<Z.length;++q)if(W=Z[q],!!/^Content-Location:/i.test(W)&&(W=W.slice(W.indexOf("file")),ne||(ne=W.slice(0,W.lastIndexOf("/")+1)),W.slice(0,ne.length)!=ne))for(;ne.length>0&&(ne=ne.slice(0,ne.length-1),ne=ne.slice(0,ne.lastIndexOf("/")+1),W.slice(0,ne.length)!=ne););var ae=(Z[1]||"").match(/boundary="(.*?)"/);if(!ae)throw new Error("MAD cannot find boundary");var de="--"+(ae[1]||""),z=[],le=[],fe={FileIndex:z,FullPaths:le};E(fe);var De,Ve=0;for(q=0;q<Z.length;++q){var Qe=Z[q];Qe!==de&&Qe!==de+"--"||(Ve++&&yn(fe,Z.slice(De,q),ne),De=q)}return fe}function kr(H,se){var ne=se||{},Z=ne.boundary||"SheetJS";Z="------="+Z;for(var q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Z.slice(2)+'"',"","",""],W=H.FullPaths[0],ae=W,de=H.FileIndex[0],z=1;z<H.FullPaths.length;++z)if(ae=H.FullPaths[z].slice(W.length),de=H.FileIndex[z],!(!de.size||!de.content||ae=="Sh33tJ5")){ae=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ct){return"_x"+Ct.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ct){return"_u"+Ct.charCodeAt(0).toString(16)+"_"});for(var le=de.content,fe=Pr&&Buffer.isBuffer(le)?le.toString("binary"):F(le),De=0,Ve=Math.min(1024,fe.length),Qe=0,Ke=0;Ke<=Ve;++Ke)(Qe=fe.charCodeAt(Ke))>=32&&Qe<128&&++De;var Ge=De>=Ve*4/5;q.push(Z),q.push("Content-Location: "+(ne.root||"file:///C:/SheetJS/")+ae),q.push("Content-Transfer-Encoding: "+(Ge?"quoted-printable":"base64")),q.push("Content-Type: "+tn(de,ae)),q.push(""),q.push(Ge?Bt(fe):Rn(fe))}return q.push(Z+`--\r
`),q.join(`\r
`)}function we(H){var se={};return E(se,H),se}function nt(H,se,ne,Z){var q=Z&&Z.unsafe;q||E(H);var W=!q&&Mr.find(H,se);if(!W){var ae=H.FullPaths[0];se.slice(0,ae.length)==ae?ae=se:(ae.slice(-1)!="/"&&(ae+="/"),ae=(ae+se).replace("//","/")),W={name:s(se),type:2},H.FileIndex.push(W),H.FullPaths.push(ae),q||Mr.utils.cfb_gc(H)}return W.content=ne,W.size=ne?ne.length:0,Z&&(Z.CLSID&&(W.clsid=Z.CLSID),Z.mt&&(W.mt=Z.mt),Z.ct&&(W.ct=Z.ct)),W}function it(H,se){E(H);var ne=Mr.find(H,se);if(ne){for(var Z=0;Z<H.FileIndex.length;++Z)if(H.FileIndex[Z]==ne)return H.FileIndex.splice(Z,1),H.FullPaths.splice(Z,1),!0}return!1}function jt(H,se,ne){E(H);var Z=Mr.find(H,se);if(Z){for(var q=0;q<H.FileIndex.length;++q)if(H.FileIndex[q]==Z)return H.FileIndex[q].name=s(ne),H.FullPaths[q]=ne,!0}return!1}function gt(H){I(H,!0)}return t.find=M,t.read=_,t.parse=f,t.write=J,t.writeFile=Q,t.utils={cfb_new:we,cfb_add:nt,cfb_del:it,cfb_mov:jt,cfb_gc:gt,ReadShift:Rh,CheckField:rL,prep_blob:Ta,bconcat:ll,use_zlib:D,_deflateRaw:kt,_inflateRaw:mt,consts:oe},t})();function ice(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Xi(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function Wk(e){for(var t=[],r=Xi(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}var ag=new Date(1899,11,30,0,0,0);function ds(e,t){var r=e.getTime(),a=ag.getTime()+(e.getTimezoneOffset()-ag.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var M$=new Date,oce=ag.getTime()+(M$.getTimezoneOffset()-ag.getTimezoneOffset())*6e4,PP=M$.getTimezoneOffset();function ux(e){var t=new Date;return t.setTime(e*24*60*60*1e3+oce),t.getTimezoneOffset()!==PP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-PP)*6e4),t}function lce(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var IP=new Date("2017-02-19T19:06:09.000Z"),R$=isNaN(IP.getFullYear())?new Date("2/19/17"):IP,cce=R$.getFullYear()==2017;function Na(e,t){var r=new Date(e);if(cce)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(R$.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function wc(e,t){if(Pr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return _h(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return _h(j$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return _h(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return _h(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function Ia(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ia(e[r]));return t}function In(e,t){for(var r="";r.length<t;)r+=e;return r}function Ai(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var dce=["january","february","march","april","may","june","july","august","september","october","november","december"];function cu(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&dce.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var uce=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function F$(e){return e?e.content&&e.type?wc(e.content,!0):e.data?Nh(e.data):e.asNodeBuffer&&Pr?Nh(e.asNodeBuffer().toString("binary")):e.asBinary?Nh(e.asBinary()):e._data&&e._data.getContent?Nh(wc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function $$(e){if(!e)return null;if(e.data)return wP(e.data);if(e.asNodeBuffer&&Pr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?wP(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function hce(e){return e&&e.name.slice(-4)===".bin"?$$(e):F$(e)}function Zs(e,t){for(var r=e.FullPaths||Xi(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function Kk(e,t){var r=Zs(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Gn(e,t,r){if(!r)return hce(Kk(e,t));if(!t)return null;try{return Gn(e,t)}catch{return null}}function Ms(e,t,r){if(!r)return F$(Kk(e,t));if(!t)return null;try{return Ms(e,t)}catch{return null}}function fce(e,t,r){return $$(Kk(e,t))}function DP(e){for(var t=e.FullPaths||Xi(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function mce(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Pr?a=Ac(r):a=Ile(r),Mr.utils.cfb_add(e,t,a)}Mr.utils.cfb_add(e,t,r)}else e.file(t,r)}function L$(e,t){switch(t.type){case"base64":return Mr.read(e,{type:"base64"});case"binary":return Mr.read(e,{type:"binary"});case"buffer":case"array":return Mr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Sh(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var B$=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,pce=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,MP=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,gce=/<[^>]*>/g,Qa=B$.match(MP)?MP:gce,xce=/<\w*:/,yce=/<(\/?)\w+:/;function gr(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(pce),l=0,d="",u=0,f="",m="",p=1;if(o)for(u=0;u!=o.length;++u){for(m=o[u],i=0;i!=m.length&&m.charCodeAt(i)!==61;++i);for(f=m.slice(0,i).trim();m.charCodeAt(i+1)==32;)++i;for(p=(s=m.charCodeAt(i+1))==34||s==39?1:0,d=m.slice(i+1+p,m.length-p),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),a[f]=d,a[f.toLowerCase()]=d;else{var g=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(a[g]&&f.slice(l-3,l)=="ext")continue;a[g]=d,a[g.toLowerCase()]=d}}return a}function eo(e){return e.replace(yce,"<$1")}var U$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},vce=Wk(U$),$r=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,d){return U$[l]||String.fromCharCode(parseInt(d,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,d){return String.fromCharCode(parseInt(d,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),bce=/[&<>'"]/g,wce=/[\u0000-\u001f]/g;function Vk(e){var t=e+"";return t.replace(bce,function(r){return vce[r]}).replace(/\n/g,"<br/>").replace(wce,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var RP=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function Sn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function ij(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function FP(e){var t=vl(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function $P(e){return Ac(e,"binary").toString("utf8")}var Dm="foo bar baz",gn=Pr&&($P(Dm)==ij(Dm)&&$P||FP(Dm)==ij(Dm)&&FP)||ij,_h=Pr?function(e){return Ac(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},B0=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),H$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),jce=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Nce=/<\/?(?:vt:)?variant>/g,kce=/<(?:vt:)([^>]*)>([\s\S]*)</;function LP(e,t){var r=gr(e),a=e.match(jce(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(Nce,"").match(kce);o&&s.push({v:gn(o[2]),t:o[1]})}),s}var Sce=/(^\s|\s$|\n)/;function _ce(e){return Xi(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ece(e,t,r){return"<"+e+(r!=null?_ce(r):"")+(t!=null?(t.match(Sce)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Gk(e){if(Pr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return gn(Tc(Hk(e)));throw new Error("Bad input format: expected Buffer or string")}var U0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Cce={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},Ace=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function Tce(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function Oce(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var BP=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},UP=Pr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Ac(t)})):BP(e)}:BP,HP=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(_o(e,s)));return a.join("").replace(cs,"")},Yk=Pr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(cs,""):HP(e,t,r)}:HP,qP=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},q$=Pr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):qP(e,t,r)}:qP,zP=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(bd(e,s)));return a.join("")},of=Pr?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):zP(t,r,a)}:zP,z$=function(e,t){var r=Ps(e,t);return r>0?of(e,t+4,t+4+r-1):""},W$=z$,K$=function(e,t){var r=Ps(e,t);return r>0?of(e,t+4,t+4+r-1):""},V$=K$,G$=function(e,t){var r=2*Ps(e,t);return r>0?of(e,t+4,t+4+r-1):""},Y$=G$,X$=function(t,r){var a=Ps(t,r);return a>0?Yk(t,r+4,r+4+a):""},J$=X$,Q$=function(e,t){var r=Ps(e,t);return r>0?of(e,t+4,t+4+r):""},Z$=Q$,eL=function(e,t){return Tce(e,t)},sg=eL,tL=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Pr&&(W$=function(t,r){if(!Buffer.isBuffer(t))return z$(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},V$=function(t,r){if(!Buffer.isBuffer(t))return K$(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},Y$=function(t,r){if(!Buffer.isBuffer(t))return G$(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},J$=function(t,r){if(!Buffer.isBuffer(t))return X$(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},Z$=function(t,r){if(!Buffer.isBuffer(t))return Q$(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},sg=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):eL(t,r)},tL=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var bd=function(e,t){return e[t]},_o=function(e,t){return e[t+1]*256+e[t]},Pce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ps=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ql=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Ice=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Rh(e,t){var r="",a,s,i=[],o,l,d,u;switch(t){case"dbcs":if(u=this.l,Pr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(_o(this,u)),u+=2;e*=2;break;case"utf8":r=of(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Yk(this,this.l,this.l+e);break;case"wstr":return Rh.call(this,e,"dbcs");case"lpstr-ansi":r=W$(this,this.l),e=4+Ps(this,this.l);break;case"lpstr-cp":r=V$(this,this.l),e=4+Ps(this,this.l);break;case"lpwstr":r=Y$(this,this.l),e=4+2*Ps(this,this.l);break;case"lpp4":e=4+Ps(this,this.l),r=J$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ps(this,this.l),r=Z$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=bd(this,this.l+e++))!==0;)i.push(Im(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=_o(this,this.l+e))!==0;)i.push(Im(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=bd(this,u),this.l=u+1,l=Rh.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Im(_o(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return o=bd(this,u),this.l=u+1,l=Rh.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Im(bd(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return a=bd(this,this.l),this.l++,a;case 2:return a=(t==="i"?Pce:_o)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?Ql:Ice)(this,this.l),this.l+=4,a):(s=Ps(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=sg(this,this.l):s=sg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=q$(this,this.l,e);break}}return this.l+=e,r}var Dce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Mce=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Rce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Fce(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Rce(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,Dce(this,t,this.l);break;case 8:if(a=8,r==="f"){Oce(this,t,this.l);break}case 16:break;case-4:a=4,Mce(this,t,this.l);break}return this.l+=a,this}function rL(e,t){var r=q$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ta(e,t){e.l=t,e.read_shift=Rh,e.chk=rL,e.write_shift=Fce}function Ja(e,t){e.l+=t}function da(e){var t=vl(e);return Ta(t,0),t}function Uo(e,t,r){if(e){var a,s,i;Ta(e,e.l||0);for(var o=e.length,l=0,d=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=ug[l]||ug[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;d=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=d,t(f,u,l))return}}}function i2(){var e=[],t=Pr?256:2048,r=function(u){var f=da(u);return Ta(f,0),f},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(u){return a&&u<a.length-a.l?a:(s(),a=r(Math.max(u+1,t)))},o=function(){return s(),ll(e)},l=function(u){s(),a=u,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Fh(e,t,r){var a=Ia(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function WP(e,t,r){var a=Ia(e);return a.s=Fh(a.s,t.s,r),a.e=Fh(a.e,t.s,r),a}function $h(e,t){if(e.cRel&&e.c<0)for(e=Ia(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ia(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=br(e);return!e.cRel&&e.cRel!=null&&(r=Bce(r)),!e.rRel&&e.rRel!=null&&(r=$ce(r)),r}function oj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ha(e.s.c)+":"+(e.e.cRel?"":"$")+ha(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Da(e.s.r)+":"+(e.e.rRel?"":"$")+Da(e.e.r):$h(e.s,t.biff)+":"+$h(e.e,t.biff)}function Xk(e){return parseInt(Lce(e),10)-1}function Da(e){return""+(e+1)}function $ce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Lce(e){return e.replace(/\$(\d+)$/,"$1")}function Jk(e){for(var t=Uce(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function ha(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Bce(e){return e.replace(/^([A-Z])/,"$$$1")}function Uce(e){return e.replace(/^\$([A-Z])/,"$1")}function Hce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ls(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function br(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Eu(e){var t=e.indexOf(":");return t==-1?{s:ls(e),e:ls(e)}:{s:ls(e.slice(0,t)),e:ls(e.slice(t+1))}}function Rr(e,t){return typeof t>"u"||typeof t=="number"?Rr(e.s,e.e):(typeof e!="string"&&(e=br(e)),typeof t!="string"&&(t=br(t)),e==t?e:e+":"+t)}function Mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function KP(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=ai(e.z,r?ds(t):t)}catch{}try{return e.w=ai((e.XF||{}).numFmtId||(r?14:0),r?ds(t):t)}catch{return""+t}}function Ro(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Ic[e.v]||e.v:t==null?KP(e,e.v):KP(e,t))}function _l(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function nL(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?ls(a.origin):a.origin;o=d.r,l=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Mn(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[m].length;++p)if(!(typeof t[m][p]>"u")){var g={v:t[m][p]},b=o+m,y=l+p;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),t[m][p]&&typeof t[m][p]=="object"&&!Array.isArray(t[m][p])&&!(t[m][p]instanceof Date))g=t[m][p];else if(Array.isArray(g.v)&&(g.f=t[m][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(a.nullError)g.t="e",g.v=0;else if(a.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=a.dateNF||jr[14],a.cellDates?(g.t="d",g.w=ai(g.z,ds(g.v))):(g.t="n",g.v=ds(g.v),g.w=ai(g.z,g.v))):g.t="s";if(s)i[b]||(i[b]=[]),i[b][y]&&i[b][y].z&&(g.z=i[b][y].z),i[b][y]=g;else{var v=br({c:y,r:b});i[v]&&i[v].z&&(g.z=i[v].z),i[v]=g}}}return u.s.c<1e7&&(i["!ref"]=Rr(u)),i}function Cu(e,t){return nL(null,e,t)}function qce(e){return e.read_shift(4,"i")}function Xa(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function zce(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Qk(e,t){var r=e.l,a=e.read_shift(1),s=Xa(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),d=0;d!=l;++d)i.push(zce(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}var Wce=Qk;function ii(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Oc(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Kce=Xa;function Zk(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var Vce=Xa,o2=Zk;function eS(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?sg([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Ql(t,0)>>2;return r?s/100:s}function aL(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Pc=aL;function Ka(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Gce(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),d=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var u=dc[s];u&&(t.rgb=q0(u));break;case 2:t.rgb=q0([o,l,d]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Yce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function sL(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Xce(e){return sL(e,1)}function Jce(e){return sL(e,2)}var tS=2,xs=3,Mm=11,VP=12,ig=19,Rm=64,Qce=65,Zce=71,ede=4108,tde=4126,ba=80,iL=81,rde=[ba,iL],nde={1:{n:"CodePage",t:tS},2:{n:"Category",t:ba},3:{n:"PresentationFormat",t:ba},4:{n:"ByteCount",t:xs},5:{n:"LineCount",t:xs},6:{n:"ParagraphCount",t:xs},7:{n:"SlideCount",t:xs},8:{n:"NoteCount",t:xs},9:{n:"HiddenCount",t:xs},10:{n:"MultimediaClipCount",t:xs},11:{n:"ScaleCrop",t:Mm},12:{n:"HeadingPairs",t:ede},13:{n:"TitlesOfParts",t:tde},14:{n:"Manager",t:ba},15:{n:"Company",t:ba},16:{n:"LinksUpToDate",t:Mm},17:{n:"CharacterCount",t:xs},19:{n:"SharedDoc",t:Mm},22:{n:"HyperlinksChanged",t:Mm},23:{n:"AppVersion",t:xs,p:"version"},24:{n:"DigSig",t:Qce},26:{n:"ContentType",t:ba},27:{n:"ContentStatus",t:ba},28:{n:"Language",t:ba},29:{n:"Version",t:ba},255:{},2147483648:{n:"Locale",t:ig},2147483651:{n:"Behavior",t:ig},1919054434:{}},ade={1:{n:"CodePage",t:tS},2:{n:"Title",t:ba},3:{n:"Subject",t:ba},4:{n:"Author",t:ba},5:{n:"Keywords",t:ba},6:{n:"Comments",t:ba},7:{n:"Template",t:ba},8:{n:"LastAuthor",t:ba},9:{n:"RevNumber",t:ba},10:{n:"EditTime",t:Rm},11:{n:"LastPrinted",t:Rm},12:{n:"CreatedDate",t:Rm},13:{n:"ModifiedDate",t:Rm},14:{n:"PageCount",t:xs},15:{n:"WordCount",t:xs},16:{n:"CharCount",t:xs},17:{n:"Thumbnail",t:Zce},18:{n:"Application",t:ba},19:{n:"DocSecurity",t:xs},255:{},2147483648:{n:"Locale",t:ig},2147483651:{n:"Behavior",t:ig},1919054434:{}},GP={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},sde=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ide(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ode=ide([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dc=Ia(ode),Ic={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},oL={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},YP={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function lde(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function cde(e){var t=lde();if(!e||!e.match)return t;var r={};if((e.match(Qa)||[]).forEach(function(a){var s=gr(a);switch(s[0].replace(xce,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[YP[s.ContentType]]!==void 0&&t[YP[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Cce.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var Cd={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function l2(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Lh(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(Qa)||[]).forEach(function(s){var i=gr(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Sh(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}var dde="application/vnd.oasis.opendocument.spreadsheet";function ude(e,t){for(var r=Gk(e),a,s;a=U0.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=gr(a[0],!1),s.path=="/"&&s.type!==dde)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}var Bh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],hde=(function(){for(var e=new Array(Bh.length),t=0;t<Bh.length;++t){var r=Bh[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function lL(e){var t={};e=gn(e);for(var r=0;r<Bh.length;++r){var a=Bh[r],s=e.match(hde[r]);s!=null&&s.length>0&&(t[a[1]]=$r(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=Na(t[a[1]]))}return t}var fde=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function cL(e,t,r,a){var s=[];if(typeof e=="string")s=LP(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?LP(t,a).map(function(f){return f.v}):t,l=0,d=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(d=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=o.slice(l,l+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=o.slice(l,l+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=o.slice(l,l+d);break}l+=d}}function mde(e,t,r){var a={};return t||(t={}),e=gn(e),fde.forEach(function(s){var i=(e.match(B0(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=$r(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&cL(a.HeadingPairs,a.TitlesOfParts,t,r),t}var pde=/<[^>]+>[^<]*/g;function gde(e,t){var r={},a="",s=e.match(pde);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=gr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=$r(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var d=o.split(">"),u=d[0].slice(4),f=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[a]=$r(f);break;case"bool":r[a]=Sn(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(f);break;case"filetime":case"date":r[a]=Na(f);break;case"cy":case"error":r[a]=$r(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,d)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}var xde={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},lj;function yde(e,t,r){lj||(lj=Wk(xde)),t=lj[t]||t,e[t]=r}function rS(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function dL(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function uL(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function hL(e,t,r){return t===31?uL(e):dL(e,t,r)}function c2(e,t,r){return hL(e,t,r===!1?0:4)}function vde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return hL(e,t,0)}function bde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(cs,""),e.l-s&2&&(e.l+=2)}return r}function wde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(cs,"");return r}function jde(e){var t=e.l,r=og(e,iL);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=og(e,xs);return[r,a]}function Nde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(jde(e));return r}function XP(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(cs,"").replace(kh,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function fL(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function kde(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function og(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==VP&&a!==t&&rde.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===VP?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return dL(e,a,4).replace(cs,"");case 31:return uL(e);case 64:return rS(e);case 65:return fL(e);case 71:return kde(e);case 80:return c2(e,a,!i.raw).replace(cs,"");case 81:return vde(e,a).replace(cs,"");case 4108:return Nde(e);case 4126:case 4127:return a==4127?bde(e):wde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function JP(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,d=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),m=e.read_shift(4);i[o]=[f,m+r]}i.sort(function(k,w){return k[1]-w[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var g=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(g=!1,e.l=i[o][1]),g)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(p[b.n]=og(e,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_i(l=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(i[o][0]===1){if(l=p.CodePage=og(e,tS),_i(l),d!==-1){var y=e.l;e.l=i[d][1],u=XP(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){d=o,e.l=i[o+1][1];continue}u=XP(e,l)}else{var v=u[i[o][0]],N;switch(e[e.l]){case 65:e.l+=4,N=fL(e);break;case 30:e.l+=4,N=c2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,N=c2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,N=e.read_shift(4,"i");break;case 19:e.l+=4,N=e.read_shift(4);break;case 5:e.l+=4,N=e.read_shift(8,"f");break;case 11:e.l+=4,N=Ln(e,4);break;case 64:e.l+=4,N=Na(rS(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[v]=N}}return e.l=r+a,p}function QP(e,t,r){var a=e.content;if(!a)return{};Ta(a,0);var s,i,o,l,d=0;a.chk("feff","Byte Order: "),a.read_shift(2);var u=a.read_shift(4),f=a.read_shift(16);if(f!==Mr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),d=a.read_shift(4));var m=JP(a,t),p={SystemIdentifier:u};for(var g in m)p[g]=m[g];if(p.FMTID=i,s===1)return p;if(d-a.l==2&&(a.l+=2),a.l!==d)throw new Error("Length mismatch 2: "+a.l+" !== "+d);var b;try{b=JP(a,null)}catch{}for(g in b)p[g]=b[g];return p.FMTID=[i,o],p}function rl(e,t){return e.read_shift(t),null}function Sde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function Ln(e,t){return e.read_shift(t)===1}function Yn(e){return e.read_shift(2,"u")}function mL(e,t){return Sde(e,t,Yn)}function _de(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function lf(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function Ede(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,d={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),a&&(e.l+=l),d.t=f,s||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function jc(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function cf(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):jc(e,a,r)}function Dc(e,t,r){if(r.biff>5)return cf(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Cde(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Ade(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(cs,"");return a&&(e.l+=24),s}function Tde(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(cs,"");return r+o}function Ode(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Ade(e);case"0303000000000000c000000000000046":return Tde(e);default:throw new Error("Unsupported Moniker "+r)}}function Fm(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(cs,""):"";return r}function Pde(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,d,u="",f,m;s&16&&(i=Fm(e,r-e.l)),s&128&&(o=Fm(e,r-e.l)),(s&257)===257&&(l=Fm(e,r-e.l)),(s&257)===1&&(d=Ode(e,r-e.l)),s&8&&(u=Fm(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(m=rS(e)),e.l=r;var p=o||l||d||"";p&&u&&(p+="#"+u),p||(p="#"+u),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var g={Target:p};return f&&(g.guid=f),m&&(g.time=m),i&&(g.Tooltip=i),g}function pL(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function gL(e,t){var r=pL(e);return r[3]=0,r}function to(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Ide(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Dde(e,t,r){return t===0?"":Dc(e,t,r)}function Mde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function xL(e){var t=e.read_shift(2),r=eS(e);return[t,r]}function Rde(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=lf(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function hx(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function yL(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Fde=yL;function vL(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function $de(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Lde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ba(e){e.l+=2,e.l+=e.read_shift(2)}var Bde={0:Ba,4:Ba,5:Ba,6:Ba,7:Lde,8:Ba,9:Ba,10:Ba,11:Ba,12:Ba,13:$de,14:Ba,15:Ba,16:Ba,17:Ba,18:Ba,19:Ba,20:Ba,21:vL};function Ude(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Bde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function $m(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function Hde(e,t){return t===0||e.read_shift(2),1200}function qde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Dc(e,0,r);return e.read_shift(t+a-e.l),s}function zde(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function Wde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=lf(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function Kde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Ede(e));return i.Count=a,i.Unique=s,i}function Vde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Gde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Yde(e){var t=Ide(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Xde(e){return e.read_shift(2),e.read_shift(4)}function ZP(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function Jde(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:d,TabRatio:u}}function Qde(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function Zde(){}function eue(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=lf(e,0,r),a}function tue(e){var t=to(e);return t.isst=e.read_shift(4),t}function rue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=to(e);r.biff==2&&e.l++;var i=cf(e,a-e.l,r);return s.val=i,s}function nue(e,t,r){var a=e.read_shift(2),s=Dc(e,0,r);return[a,s]}var aue=Dc;function eI(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),d=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c:d}}}function sue(e){var t=e.read_shift(2),r=e.read_shift(2),a=xL(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function iue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(xL(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function oue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function lue(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),d=e.read_shift(2);return s.patternType=sde[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=d&127,s.icvBack=d>>7&127,s.fsxButton=d>>14&1),s}function cue(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=lue(e,t,a.fStyle,r),a}function due(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function tI(e,t,r){var a=to(e);(r.biff==2||t==9)&&++e.l;var s=_de(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function uue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=to(e),s=Ka(e);return a.val=s,a}var rI=Dde;function hue(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=jc(e,i),l=[];a>e.l;)l.push(cf(e));return[i,s,o,l]}function nI(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Rde(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var fue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function aI(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=jc(e,o,r);s&32&&(u=fue[u.charCodeAt(0)]);var f=a-e.l;r&&r.biff==2&&--f;var m=a==e.l||l===0||!(f>0)?[]:Gfe(e,f,r,l);return{chKey:i,Name:u,itab:d,rgce:m}}function bL(e,t,r){if(r.biff<8)return mue(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Mde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function mue(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=lf(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function pue(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=jc(e,a,r),o=jc(e,s,r);return[i,o]}function gue(e,t,r){var a=yL(e);e.l++;var s=e.read_shift(1);return t-=8,[Yfe(e,t,r),s,a]}function sI(e,t,r){var a=Fde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Kfe(e,t,r)]}function xue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function yue(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Dc(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function vue(e,t,r){return yue(e,t,r)}function bue(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(hx(e));return r}function wue(e,t,r){if(r&&r.biff<8)return Nue(e,t,r);var a=vL(e),s=Ude(e,t-22,a[1]);return{cmo:a,ft:s}}var jue={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Nue(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((jue[a]||Ja)(e,t,r)),{cmo:[s,a,i],ft:o}}function kue(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Cde(e,6,r);var l=e.read_shift(2);e.read_shift(2),Yn(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-a!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],m=jc(e,e.lens[u+1]-e.lens[u]-1);if(s+=m,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Sue(e,t){var r=hx(e);e.l+=16;var a=Pde(e,t-24);return[r,a]}function _ue(e,t){e.read_shift(2);var r=hx(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(cs,""),[r,a]}function Eue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=GP[r]||r,r=e.read_shift(2),t[1]=GP[r]||r,t}function Cue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(gL(e));return r}function Aue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(gL(e));return r}function Tue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function wL(e,t,r){if(!r.cellStyles)return Ja(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),d=e.read_shift(2);a==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:d};return(r.biff>=5||!r.biff)&&(u.level=d>>8&7),u}function Oue(e,t){var r={};return t<32||(e.l+=16,r.header=Ka(e),r.footer=Ka(e),e.l+=2),r}function Pue(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}var Iue=to,Due=mL,Mue=cf;function Rue(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function Fue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=to(e);++e.l;var s=Dc(e,t-7,r);return a.t="str",a.val=s,a}function $ue(e){var t=to(e);++e.l;var r=Ka(e);return t.t="n",t.val=r,t}function Lue(e){var t=to(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Bue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Uue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Hue(e,t,r){var a=e.l+t,s=to(e),i=e.read_shift(2),o=jc(e,i,r);return e.l=a,s.t="str",s.val=o,s}var que=[2,3,48,49,131,139,140,245],iI=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Wk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,d){var u=[],f=vl(1);switch(d.type){case"base64":f=Si(Bs(l));break;case"binary":f=Si(l);break;case"buffer":case"array":f=l;break}Ta(f,0);var m=f.read_shift(1),p=!!(m&136),g=!1,b=!1;switch(m){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var y=0,v=521;m==2&&(y=f.read_shift(2)),f.l+=3,m!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),m!=2&&(v=f.read_shift(2));var N=f.read_shift(2),k=d.codepage||1252;m!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(k=e[f[f.l]]),f.l+=1,f.l+=2),b&&(f.l+=36);for(var w=[],A={},S=Math.min(f.length,m==2?521:v-10-(g?264:0)),_=b?32:11;f.l<S&&f[f.l]!=13;)switch(A={},A.name=$0.utils.decode(k,f.slice(f.l,f.l+_)).replace(/[\u0000\r\n].*$/g,""),f.l+=_,A.type=String.fromCharCode(f.read_shift(1)),m!=2&&!b&&(A.offset=f.read_shift(4)),A.len=f.read_shift(1),m==2&&(A.offset=f.read_shift(2)),A.dec=f.read_shift(1),A.name.length&&w.push(A),m!=2&&(f.l+=b?13:14),A.type){case"B":(!g||A.len!=8)&&d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(f[f.l]!==13&&(f.l=v-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=v;var E=0,C=0;for(u[0]=[],C=0;C!=w.length;++C)u[0][C]=w[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=N;continue}for(++f.l,u[++E]=[],C=0,C=0;C!=w.length;++C){var I=f.slice(f.l,f.l+w[C].len);f.l+=w[C].len,Ta(I,0);var B=$0.utils.decode(k,I);switch(w[C].type){case"C":B.trim().length&&(u[E][C]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[E][C]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[E][C]=B;break;case"F":u[E][C]=parseFloat(B.trim());break;case"+":case"I":u[E][C]=b?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[E][C]=!0;break;case"N":case"F":u[E][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));u[E][C]="##MEMO##"+(b?parseInt(B.trim(),10):I.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[E][C]=+B||0);break;case"@":u[E][C]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[E][C]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[E][C]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][C]=-I.read_shift(-8,"f");break;case"B":if(g&&w[C].len==8){u[E][C]=I.read_shift(8,"f");break}case"G":case"P":I.l+=w[C].len;break;case"0":if(w[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[C].type)}}}if(m!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=w,u}function a(l,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var f=Cu(r(l,u),u);return f["!cols"]=u.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete u.DBF,f}function s(l,d){try{return _l(a(l,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,d){var u=d||{};if(+u.codepage>=0&&_i(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=i2(),m=g2(l,{header:1,raw:!0,cellDates:!0}),p=m[0],g=m.slice(1),b=l["!cols"]||[],y=0,v=0,N=0,k=1;for(y=0;y<p.length;++y){if(((b[y]||{}).DBF||{}).name){p[y]=b[y].DBF.name,++N;continue}if(p[y]!=null){if(++N,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(v=0;v<1024;++v)if(p.indexOf(p[y]+"_"+v)==-1){p[y]+="_"+v;break}}}}var w=Mn(l["!ref"]),A=[],S=[],_=[];for(y=0;y<=w.e.c-w.s.c;++y){var E="",C="",I=0,B=[];for(v=0;v<g.length;++v)g[v][y]!=null&&B.push(g[v][y]);if(B.length==0||p[y]==null){A[y]="?";continue}for(v=0;v<B.length;++v){switch(typeof B[v]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=B[v]instanceof Date?"D":"C";break;default:C="C"}I=Math.max(I,String(B[v]).length),E=E&&E!=C?"C":C}I>250&&(I=250),C=((b[y]||{}).DBF||{}).type,C=="C"&&b[y].DBF.len>I&&(I=b[y].DBF.len),E=="B"&&C=="N"&&(E="N",_[y]=b[y].DBF.dec,I=b[y].DBF.len),S[y]=E=="C"||C=="N"?I:i[E]||0,k+=S[y],A[y]=E}var M=f.next(32);for(M.write_shift(4,318902576),M.write_shift(4,g.length),M.write_shift(2,296+32*N),M.write_shift(2,k),y=0;y<4;++y)M.write_shift(4,0);for(M.write_shift(4,0|(+t[b$]||3)<<8),y=0,v=0;y<p.length;++y)if(p[y]!=null){var O=f.next(32),U=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,U,"sbcs"),O.write_shift(1,A[y]=="?"?"C":A[y],"sbcs"),O.write_shift(4,v),O.write_shift(1,S[y]||i[A[y]]||0),O.write_shift(1,_[y]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),v+=S[y]||i[A[y]]||0}var ie=f.next(264);for(ie.write_shift(4,13),y=0;y<65;++y)ie.write_shift(4,0);for(y=0;y<g.length;++y){var X=f.next(k);for(X.write_shift(1,0),v=0;v<p.length;++v)if(p[v]!=null)switch(A[v]){case"L":X.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":X.write_shift(8,g[y][v]||0,"f");break;case"N":var re="0";for(typeof g[y][v]=="number"&&(re=g[y][v].toFixed(_[v]||0)),N=0;N<S[v]-re.length;++N)X.write_shift(1,32);X.write_shift(1,re,"sbcs");break;case"D":g[y][v]?(X.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var oe=String(g[y][v]!=null?g[y][v]:"").slice(0,S[v]);for(X.write_shift(1,oe,"sbcs"),N=0;N<S[v]-oe.length;++N)X.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),zue=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Xi(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var b=e[g];return typeof b=="number"?jP(b):b},a=function(p,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?p:jP(y)};e["|"]=254;function s(p,g){switch(g.type){case"base64":return i(Bs(p),g);case"binary":return i(p,g);case"buffer":return i(Pr&&Buffer.isBuffer(p)?p.toString("binary"):Tc(p),g);case"array":return i(wc(p),g)}throw new Error("Unrecognized type "+g.type)}function i(p,g){var b=p.split(/[\n\r]+/),y=-1,v=-1,N=0,k=0,w=[],A=[],S=null,_={},E=[],C=[],I=[],B=0,M;for(+g.codepage>=0&&_i(+g.codepage);N!==b.length;++N){B=0;var O=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),U=O.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),ie=U[0],X;if(O.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&A.push(O.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,oe=!1,Q=!1,F=!1,J=-1,L=-1;for(k=1;k<U.length;++k)switch(U[k].charAt(0)){case"A":break;case"X":v=parseInt(U[k].slice(1))-1,oe=!0;break;case"Y":for(y=parseInt(U[k].slice(1))-1,oe||(v=0),M=w.length;M<=y;++M)w[M]=[];break;case"K":X=U[k].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(Ai(X))?isNaN(cu(X).getDate())||(X=Na(X)):(X=Ai(X),S!==null&&_u(S)&&(X=ux(X))),re=!0;break;case"E":F=!0;var D=Dd(U[k].slice(1),{r:y,c:v});w[y][v]=[w[y][v],D];break;case"S":Q=!0,w[y][v]=[w[y][v],"S5S"];break;case"G":break;case"R":J=parseInt(U[k].slice(1))-1;break;case"C":L=parseInt(U[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}if(re&&(w[y][v]&&w[y][v].length==2?w[y][v][0]=X:w[y][v]=X,S=null),Q){if(F)throw new Error("SYLK shared formula cannot have own formula");var Y=J>-1&&w[J][L];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");w[y][v][1]=OL(Y[1],{r:y-J,c:v-L})}break;case"F":var V=0;for(k=1;k<U.length;++k)switch(U[k].charAt(0)){case"X":v=parseInt(U[k].slice(1))-1,++V;break;case"Y":for(y=parseInt(U[k].slice(1))-1,M=w.length;M<=y;++M)w[M]=[];break;case"M":B=parseInt(U[k].slice(1))/20;break;case"F":break;case"G":break;case"P":S=A[parseInt(U[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=U[k].slice(1).split(" "),M=parseInt(I[0],10);M<=parseInt(I[1],10);++M)B=parseInt(I[2],10),C[M-1]=B===0?{hidden:!0}:{wch:B},du(C[M-1]);break;case"C":v=parseInt(U[k].slice(1))-1,C[v]||(C[v]={});break;case"R":y=parseInt(U[k].slice(1))-1,E[y]||(E[y]={}),B>0?(E[y].hpt=B,E[y].hpx=z0(B)):B===0&&(E[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}V<1&&(S=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(_["!rows"]=E),C.length>0&&(_["!cols"]=C),g&&g.sheetRows&&(w=w.slice(0,g.sheetRows)),[w,_]}function o(p,g){var b=s(p,g),y=b[0],v=b[1],N=Cu(y,g);return Xi(v).forEach(function(k){N[k]=v[k]}),N}function l(p,g){return _l(o(p,g),g)}function d(p,g,b,y){var v="C;Y"+(b+1)+";X"+(y+1)+";K";switch(p.t){case"n":v+=p.v||0,p.f&&!p.F&&(v+=";E"+T0e(p.f,{r:b,c:y}));break;case"b":v+=p.v?"TRUE":"FALSE";break;case"e":v+=p.w||p.v;break;case"d":v+='"'+(p.w||p.v)+'"';break;case"s":v+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(p,g){g.forEach(function(b,y){var v="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?v+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=cg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=dg(b.wpx)),typeof b.wch=="number"&&(v+=Math.round(b.wch))),v.charAt(v.length-1)!=" "&&p.push(v)})}function f(p,g){g.forEach(function(b,y){var v="F;";b.hidden?v+="M0;":b.hpt?v+="M"+20*b.hpt+";":b.hpx&&(v+="M"+20*CL(b.hpx)+";"),v.length>2&&p.push(v+"R"+(y+1))})}function m(p,g){var b=["ID;PWXL;N;E"],y=[],v=Mn(p["!ref"]),N,k=Array.isArray(p),w=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&f(b,p["!rows"]),b.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var A=v.s.r;A<=v.e.r;++A)for(var S=v.s.c;S<=v.e.c;++S){var _=br({r:A,c:S});N=k?(p[A]||[])[S]:p[_],!(!N||N.v==null&&(!N.f||N.F))&&y.push(d(N,p,A,S))}return b.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:m}})(),Wue=(function(){function e(i,o){switch(o.type){case"base64":return t(Bs(i),o);case"binary":return t(i,o);case"buffer":return t(Pr&&Buffer.isBuffer(i)?i.toString("binary"):Tc(i),o);case"array":return t(wc(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),d=-1,u=-1,f=0,m=[];f!==l.length;++f){if(l[f].trim()==="BOT"){m[++d]=[],u=0;continue}if(!(d<0)){var p=l[f].trim().split(","),g=p[0],b=p[1];++f;for(var y=l[f]||"";(y.match(/["]/g)||[]).length&1&&f<l.length-1;)y+=`
`+l[++f];switch(y=y.trim(),+g){case-1:if(y==="BOT"){m[++d]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?m[d][u]=!0:y==="FALSE"?m[d][u]=!1:isNaN(Ai(b))?isNaN(cu(b).getDate())?m[d][u]=b:m[d][u]=Na(b):m[d][u]=Ai(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),m[d][u++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(m=m.slice(0,o.sheetRows)),m}function r(i,o){return Cu(e(i,o),o)}function a(i,o){return _l(r(i,o),o)}var s=(function(){var i=function(d,u,f,m,p){d.push(u),d.push(f+","+m),d.push('"'+p.replace(/"/g,'""')+'"')},o=function(d,u,f,m){d.push(u+","+f),d.push(u==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(d){var u=[],f=Mn(d["!ref"]),m,p=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){o(u,-1,0,"BOT");for(var b=f.s.c;b<=f.e.c;++b){var y=br({r:g,c:b});if(m=p?(d[g]||[])[b]:d[y],!m){o(u,1,0,"");continue}switch(m.t){case"n":var v=m.w;!v&&m.v!=null&&(v=m.v),v==null?m.f&&!m.F?o(u,1,0,"="+m.f):o(u,1,0,""):o(u,0,v,"V");break;case"b":o(u,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=ai(m.z||jr[14],ds(Na(m.v)))),o(u,0,m.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var N=`\r
`,k=u.join(N);return k}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),Kue=(function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,p){for(var g=m.split(`
`),b=-1,y=-1,v=0,N=[];v!==g.length;++v){var k=g[v].trim().split(":");if(k[0]==="cell"){var w=ls(k[1]);if(N.length<=w.r)for(b=N.length;b<=w.r;++b)N[b]||(N[b]=[]);switch(b=w.r,y=w.c,k[2]){case"t":N[b][y]=e(k[3]);break;case"v":N[b][y]=+k[3];break;case"vtf":var A=k[k.length-1];case"vtc":switch(k[3]){case"nl":N[b][y]=!!+k[4];break;default:N[b][y]=+k[4];break}k[2]=="vtf"&&(N[b][y]=[N[b][y],A])}}}return p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),N}function a(m,p){return Cu(r(m,p),p)}function s(m,p){return _l(a(m,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(m){if(!m||!m["!ref"])return"";for(var p=[],g=[],b,y="",v=Eu(m["!ref"]),N=Array.isArray(m),k=v.s.r;k<=v.e.r;++k)for(var w=v.s.c;w<=v.e.c;++w)if(y=br({r:k,c:w}),b=N?(m[k]||[])[w]:m[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(t(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=t(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var A=ds(Na(b.v));g[2]="vtc",g[3]="nd",g[4]=""+A,g[5]=b.w||ai(b.z||jr[14],A);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(m){return[i,o,l,o,u(m),d].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:f}})(),H0=(function(){function e(f,m,p,g,b){b.raw?m[p][g]=f:f===""||(f==="TRUE"?m[p][g]=!0:f==="FALSE"?m[p][g]=!1:isNaN(Ai(f))?isNaN(cu(f).getDate())?m[p][g]=f:m[p][g]=Na(f):m[p][g]=Ai(f))}function t(f,m){var p=m||{},g=[];if(!f||f.length===0)return g;for(var b=f.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var v=10,N=0,k=0;k<=y;++k)N=b[k].indexOf(" "),N==-1?N=b[k].length:N++,v=Math.max(v,N);for(k=0;k<=y;++k){g[k]=[];var w=0;for(e(b[k].slice(0,v).trim(),g,k,w,p),w=1;w<=(b[k].length-v)/10+1;++w)e(b[k].slice(v+(w-1)*10,v+w*10).trim(),g,k,w,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(f){for(var m={},p=!1,g=0,b=0;g<f.length;++g)(b=f.charCodeAt(g))==34?p=!p:!p&&b in r&&(m[b]=(m[b]||0)+1);b=[];for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g]);if(!b.length){m=a;for(g in m)Object.prototype.hasOwnProperty.call(m,g)&&b.push([m[g],g])}return b.sort(function(y,v){return y[0]-v[0]||a[y[1]]-a[v[1]]}),r[b.pop()[1]]||44}function i(f,m){var p=m||{},g="",b=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=s(f.slice(0,1024)):p&&p.FS?g=p.FS:g=s(f.slice(0,1024));var v=0,N=0,k=0,w=0,A=0,S=g.charCodeAt(0),_=!1,E=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var I=p.dateNF!=null?nce(p.dateNF):null;function B(){var M=f.slice(w,A),O={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)O.t="z";else if(p.raw)O.t="s",O.v=M;else if(M.trim().length===0)O.t="s",O.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(O.t="s",O.v=M.slice(2,-1).replace(/""/g,'"')):P0e(M)?(O.t="n",O.f=M.slice(1)):(O.t="s",O.v=M);else if(M=="TRUE")O.t="b",O.v=!0;else if(M=="FALSE")O.t="b",O.v=!1;else if(!isNaN(k=Ai(M)))O.t="n",p.cellText!==!1&&(O.w=M),O.v=k;else if(!isNaN(cu(M).getDate())||I&&M.match(I)){O.z=p.dateNF||jr[14];var U=0;I&&M.match(I)&&(M=ace(M,p.dateNF,M.match(I)||[]),U=1),p.cellDates?(O.t="d",O.v=Na(M,U)):(O.t="n",O.v=ds(Na(M,U))),p.cellText!==!1&&(O.w=ai(O.z,O.v instanceof Date?ds(O.v):O.v)),p.cellNF||delete O.z}else O.t="s",O.v=M;if(O.t=="z"||(p.dense?(b[v]||(b[v]=[]),b[v][N]=O):b[br({c:N,r:v})]=O),w=A+1,C=f.charCodeAt(w),y.e.c<N&&(y.e.c=N),y.e.r<v&&(y.e.r=v),E==S)++N;else if(N=0,++v,p.sheetRows&&p.sheetRows<=v)return!0}e:for(;A<f.length;++A)switch(E=f.charCodeAt(A)){case 34:C===34&&(_=!_);break;case S:case 10:case 13:if(!_&&B())break e;break}return A-w>0&&B(),b["!ref"]=Rr(y),b}function o(f,m){return!(m&&m.PRN)||m.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,m):Cu(t(f,m),m)}function l(f,m){var p="",g=m.type=="string"?[0,0,0,0]:dS(f,m);switch(m.type){case"base64":p=Bs(f);break;case"binary":p=f;break;case"buffer":m.codepage==65001?p=f.toString("utf8"):m.codepage&&typeof $0<"u"||(p=Pr&&Buffer.isBuffer(f)?f.toString("binary"):Tc(f));break;case"array":p=wc(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+m.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=gn(p.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?p=gn(p):m.type=="binary"&&typeof $0<"u",p.slice(0,19)=="socialcalc:version:"?Kue.to_sheet(m.type=="string"?p:gn(p),m):o(p,m)}function d(f,m){return _l(l(f,m),m)}function u(f){for(var m=[],p=Mn(f["!ref"]),g,b=Array.isArray(f),y=p.s.r;y<=p.e.r;++y){for(var v=[],N=p.s.c;N<=p.e.c;++N){var k=br({r:y,c:N});if(g=b?(f[y]||[])[N]:f[k],!g||g.v==null){v.push("          ");continue}for(var w=(g.w||(Ro(g),g.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(N===0?" ":""))}m.push(v.join(""))}return m.join(`
`)}return{to_workbook:d,to_sheet:l,from_sheet:u}})();function Vue(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=zue.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return H0.to_workbook(e,t)}}var Uh=(function(){function e(D,Y,V){if(D){Ta(D,D.l||0);for(var ee=V.Enum||J;D.l<D.length;){var ge=D.read_shift(2),ke=ee[ge]||ee[65535],Ce=D.read_shift(2),ce=D.l+Ce,me=ke.f&&ke.f(D,Ce,V);if(D.l=ce,Y(me,ke,ge))return}}}function t(D,Y){switch(Y.type){case"base64":return r(Si(Bs(D)),Y);case"binary":return r(Si(D),Y);case"buffer":case"array":return r(D,Y)}throw"Unsupported type "+Y.type}function r(D,Y){if(!D)return D;var V=Y||{},ee=V.dense?[]:{},ge="Sheet1",ke="",Ce=0,ce={},me=[],Oe=[],G={s:{r:0,c:0},e:{r:0,c:0}},ze=V.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)V.Enum=J,e(D,function(Pe,Ne,tt){switch(tt){case 0:V.vers=Pe,Pe>=4096&&(V.qpro=!0);break;case 6:G=Pe;break;case 204:Pe&&(ke=Pe);break;case 222:ke=Pe;break;case 15:case 51:V.qpro||(Pe[1].v=Pe[1].v.slice(1));case 13:case 14:case 16:tt==14&&(Pe[2]&112)==112&&(Pe[2]&15)>1&&(Pe[2]&15)<15&&(Pe[1].z=V.dateNF||jr[14],V.cellDates&&(Pe[1].t="d",Pe[1].v=ux(Pe[1].v))),V.qpro&&Pe[3]>Ce&&(ee["!ref"]=Rr(G),ce[ge]=ee,me.push(ge),ee=V.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},Ce=Pe[3],ge=ke||"Sheet"+(Ce+1),ke="");var He=V.dense?(ee[Pe[0].r]||[])[Pe[0].c]:ee[br(Pe[0])];if(He){He.t=Pe[1].t,He.v=Pe[1].v,Pe[1].z!=null&&(He.z=Pe[1].z),Pe[1].f!=null&&(He.f=Pe[1].f);break}V.dense?(ee[Pe[0].r]||(ee[Pe[0].r]=[]),ee[Pe[0].r][Pe[0].c]=Pe[1]):ee[br(Pe[0])]=Pe[1];break}},V);else if(D[2]==26||D[2]==14)V.Enum=L,D[2]==14&&(V.qpro=!0,D.l=0),e(D,function(Pe,Ne,tt){switch(tt){case 204:ge=Pe;break;case 22:Pe[1].v=Pe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Pe[3]>Ce&&(ee["!ref"]=Rr(G),ce[ge]=ee,me.push(ge),ee=V.dense?[]:{},G={s:{r:0,c:0},e:{r:0,c:0}},Ce=Pe[3],ge="Sheet"+(Ce+1)),ze>0&&Pe[0].r>=ze)break;V.dense?(ee[Pe[0].r]||(ee[Pe[0].r]=[]),ee[Pe[0].r][Pe[0].c]=Pe[1]):ee[br(Pe[0])]=Pe[1],G.e.c<Pe[0].c&&(G.e.c=Pe[0].c),G.e.r<Pe[0].r&&(G.e.r=Pe[0].r);break;case 27:Pe[14e3]&&(Oe[Pe[14e3][0]]=Pe[14e3][1]);break;case 1537:Oe[Pe[0]]=Pe[1],Pe[0]==Ce&&(ge=Pe[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(ee["!ref"]=Rr(G),ce[ke||ge]=ee,me.push(ke||ge),!Oe.length)return{SheetNames:me,Sheets:ce};for(var Ye={},ct=[],We=0;We<Oe.length;++We)ce[me[We]]?(ct.push(Oe[We]||me[We]),Ye[Oe[We]]=ce[Oe[We]]||ce[me[We]]):(ct.push(Oe[We]),Ye[Oe[We]]={"!ref":"A1"});return{SheetNames:ct,Sheets:Ye}}function a(D,Y){var V=Y||{};if(+V.codepage>=0&&_i(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=i2(),ge=Mn(D["!ref"]),ke=Array.isArray(D),Ce=[];gi(ee,0,i(1030)),gi(ee,6,d(ge));for(var ce=Math.min(ge.e.r,8191),me=ge.s.r;me<=ce;++me)for(var Oe=Da(me),G=ge.s.c;G<=ge.e.c;++G){me===ge.s.r&&(Ce[G]=ha(G));var ze=Ce[G]+Oe,Ye=ke?(D[me]||[])[G]:D[ze];if(!(!Ye||Ye.t=="z"))if(Ye.t=="n")(Ye.v|0)==Ye.v&&Ye.v>=-32768&&Ye.v<=32767?gi(ee,13,g(me,G,Ye.v)):gi(ee,14,y(me,G,Ye.v));else{var ct=Ro(Ye);gi(ee,15,m(me,G,ct.slice(0,239)))}}return gi(ee,1),ee.end()}function s(D,Y){var V=Y||{};if(+V.codepage>=0&&_i(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=i2();gi(ee,0,o(D));for(var ge=0,ke=0;ge<D.SheetNames.length;++ge)(D.Sheets[D.SheetNames[ge]]||{})["!ref"]&&gi(ee,27,F(D.SheetNames[ge],ke++));var Ce=0;for(ge=0;ge<D.SheetNames.length;++ge){var ce=D.Sheets[D.SheetNames[ge]];if(!(!ce||!ce["!ref"])){for(var me=Mn(ce["!ref"]),Oe=Array.isArray(ce),G=[],ze=Math.min(me.e.r,8191),Ye=me.s.r;Ye<=ze;++Ye)for(var ct=Da(Ye),We=me.s.c;We<=me.e.c;++We){Ye===me.s.r&&(G[We]=ha(We));var Pe=G[We]+ct,Ne=Oe?(ce[Ye]||[])[We]:ce[Pe];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")gi(ee,23,B(Ye,We,Ce,Ne.v));else{var tt=Ro(Ne);gi(ee,22,E(Ye,We,Ce,tt.slice(0,239)))}}++Ce}}return gi(ee,1),ee.end()}function i(D){var Y=da(2);return Y.write_shift(2,D),Y}function o(D){var Y=da(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var V=0,ee=0,ge=0,ke=0;ke<D.SheetNames.length;++ke){var Ce=D.SheetNames[ke],ce=D.Sheets[Ce];if(!(!ce||!ce["!ref"])){++ge;var me=Eu(ce["!ref"]);V<me.e.r&&(V=me.e.r),ee<me.e.c&&(ee=me.e.c)}}return V>8191&&(V=8191),Y.write_shift(2,V),Y.write_shift(1,ge),Y.write_shift(1,ee),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function l(D,Y,V){var ee={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&V.qpro?(ee.s.c=D.read_shift(1),D.l++,ee.s.r=D.read_shift(2),ee.e.c=D.read_shift(1),D.l++,ee.e.r=D.read_shift(2),ee):(ee.s.c=D.read_shift(2),ee.s.r=D.read_shift(2),Y==12&&V.qpro&&(D.l+=2),ee.e.c=D.read_shift(2),ee.e.r=D.read_shift(2),Y==12&&V.qpro&&(D.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function d(D){var Y=da(8);return Y.write_shift(2,D.s.c),Y.write_shift(2,D.s.r),Y.write_shift(2,D.e.c),Y.write_shift(2,D.e.r),Y}function u(D,Y,V){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(ee[0].c=D.read_shift(1),ee[3]=D.read_shift(1),ee[0].r=D.read_shift(2),D.l+=2):(ee[2]=D.read_shift(1),ee[0].c=D.read_shift(2),ee[0].r=D.read_shift(2)),ee}function f(D,Y,V){var ee=D.l+Y,ge=u(D,Y,V);if(ge[1].t="s",V.vers==20768){D.l++;var ke=D.read_shift(1);return ge[1].v=D.read_shift(ke,"utf8"),ge}return V.qpro&&D.l++,ge[1].v=D.read_shift(ee-D.l,"cstr"),ge}function m(D,Y,V){var ee=da(7+V.length);ee.write_shift(1,255),ee.write_shift(2,Y),ee.write_shift(2,D),ee.write_shift(1,39);for(var ge=0;ge<ee.length;++ge){var ke=V.charCodeAt(ge);ee.write_shift(1,ke>=128?95:ke)}return ee.write_shift(1,0),ee}function p(D,Y,V){var ee=u(D,Y,V);return ee[1].v=D.read_shift(2,"i"),ee}function g(D,Y,V){var ee=da(7);return ee.write_shift(1,255),ee.write_shift(2,Y),ee.write_shift(2,D),ee.write_shift(2,V,"i"),ee}function b(D,Y,V){var ee=u(D,Y,V);return ee[1].v=D.read_shift(8,"f"),ee}function y(D,Y,V){var ee=da(13);return ee.write_shift(1,255),ee.write_shift(2,Y),ee.write_shift(2,D),ee.write_shift(8,V,"f"),ee}function v(D,Y,V){var ee=D.l+Y,ge=u(D,Y,V);if(ge[1].v=D.read_shift(8,"f"),V.qpro)D.l=ee;else{var ke=D.read_shift(2);A(D.slice(D.l,D.l+ke),ge),D.l+=ke}return ge}function N(D,Y,V){var ee=Y&32768;return Y&=-32769,Y=(ee?D:0)+(Y>=8192?Y-16384:Y),(ee?"":"$")+(V?ha(Y):Da(Y))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(D,Y){Ta(D,0);for(var V=[],ee=0,ge="",ke="",Ce="",ce="";D.l<D.length;){var me=D[D.l++];switch(me){case 0:V.push(D.read_shift(8,"f"));break;case 1:ke=N(Y[0].c,D.read_shift(2),!0),ge=N(Y[0].r,D.read_shift(2),!1),V.push(ke+ge);break;case 2:{var Oe=N(Y[0].c,D.read_shift(2),!0),G=N(Y[0].r,D.read_shift(2),!1);ke=N(Y[0].c,D.read_shift(2),!0),ge=N(Y[0].r,D.read_shift(2),!1),V.push(Oe+G+":"+ke+ge)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(D.read_shift(2));break;case 6:{for(var ze="";me=D[D.l++];)ze+=String.fromCharCode(me);V.push('"'+ze.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ce=V.pop(),Ce=V.pop(),V.push(["AND","OR"][me-20]+"("+Ce+","+ce+")");break;default:if(me<32&&w[me])ce=V.pop(),Ce=V.pop(),V.push(Ce+w[me]+ce);else if(k[me]){if(ee=k[me][1],ee==69&&(ee=D[D.l++]),ee>V.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+V.join("|")+"|");return}var Ye=V.slice(-ee);V.length-=ee,V.push(k[me][0]+"("+Ye.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}V.length==1?Y[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function S(D){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=D.read_shift(2),Y[3]=D[D.l++],Y[0].c=D[D.l++],Y}function _(D,Y){var V=S(D);return V[1].t="s",V[1].v=D.read_shift(Y-4,"cstr"),V}function E(D,Y,V,ee){var ge=da(6+ee.length);ge.write_shift(2,D),ge.write_shift(1,V),ge.write_shift(1,Y),ge.write_shift(1,39);for(var ke=0;ke<ee.length;++ke){var Ce=ee.charCodeAt(ke);ge.write_shift(1,Ce>=128?95:Ce)}return ge.write_shift(1,0),ge}function C(D,Y){var V=S(D);V[1].v=D.read_shift(2);var ee=V[1].v>>1;if(V[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return V[1].v=ee,V}function I(D,Y){var V=S(D),ee=D.read_shift(4),ge=D.read_shift(4),ke=D.read_shift(2);if(ke==65535)return ee===0&&ge===3221225472?(V[1].t="e",V[1].v=15):ee===0&&ge===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var Ce=ke&32768;return ke=(ke&32767)-16446,V[1].v=(1-Ce*2)*(ge*Math.pow(2,ke+32)+ee*Math.pow(2,ke)),V}function B(D,Y,V,ee){var ge=da(14);if(ge.write_shift(2,D),ge.write_shift(1,V),ge.write_shift(1,Y),ee==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var ke=0,Ce=0,ce=0,me=0;return ee<0&&(ke=1,ee=-ee),Ce=Math.log2(ee)|0,ee/=Math.pow(2,Ce-31),me=ee>>>0,(me&2147483648)==0&&(ee/=2,++Ce,me=ee>>>0),ee-=me,me|=2147483648,me>>>=0,ee*=Math.pow(2,32),ce=ee>>>0,ge.write_shift(4,ce),ge.write_shift(4,me),Ce+=16383+(ke?32768:0),ge.write_shift(2,Ce),ge}function M(D,Y){var V=I(D);return D.l+=Y-14,V}function O(D,Y){var V=S(D),ee=D.read_shift(4);return V[1].v=ee>>6,V}function U(D,Y){var V=S(D),ee=D.read_shift(8,"f");return V[1].v=ee,V}function ie(D,Y){var V=U(D);return D.l+=Y-10,V}function X(D,Y){return D[D.l+Y-1]==0?D.read_shift(Y,"cstr"):""}function re(D,Y){var V=D[D.l++];V>Y-1&&(V=Y-1);for(var ee="";ee.length<V;)ee+=String.fromCharCode(D[D.l++]);return ee}function oe(D,Y,V){if(!(!V.qpro||Y<21)){var ee=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var ge=D.read_shift(Y-21,"cstr");return[ee,ge]}}function Q(D,Y){for(var V={},ee=D.l+Y;D.l<ee;){var ge=D.read_shift(2);if(ge==14e3){for(V[ge]=[0,""],V[ge][0]=D.read_shift(2);D[D.l];)V[ge][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return V}function F(D,Y){var V=da(5+D.length);V.write_shift(2,14e3),V.write_shift(2,Y);for(var ee=0;ee<D.length;++ee){var ge=D.charCodeAt(ee);V[V.l++]=ge>127?95:ge}return V[V.l++]=0,V}var J={0:{n:"BOF",f:Yn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},L={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:_},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:oe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function Gue(e){var t={},r=e.match(Qa),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=gr(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=Bk[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var Yue=(function(){var e=B0("t"),t=B0("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:$r(o[1])},d=i.match(t);return d&&(l.s=Gue(d[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),Xue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var d=s.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),o.push("</"+d+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),Jue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Que=/<(?:\w+:)?r>/,Zue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function nS(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=$r(gn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=gn(e),r&&(a.h=Vk(a.t))):e.match(Que)&&(a.r=gn(e),a.t=$r(gn((e.replace(Zue,"").match(Jue)||[]).join("").replace(Qa,""))),r&&(a.h=Xue(Yue(a.r)))),a):{t:""}}var ehe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,the=/<(?:\w+:)?(?:si|sstItem)>/g,rhe=/<\/(?:\w+:)?(?:si|sstItem)>/;function nhe(e,t){var r=[],a="";if(!e)return r;var s=e.match(ehe);if(s){a=s[2].replace(the,"").split(rhe);for(var i=0;i!=a.length;++i){var o=nS(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=gr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}function ahe(e){return[e.read_shift(4),e.read_shift(4)]}function she(e,t){var r=[],a=!1;return Uo(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function jL(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function Oo(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function ihe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Oo(e,4),t.U=Oo(e,4),t.W=Oo(e,4),t}function ohe(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function lhe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(ohe(e));return t}function che(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function dhe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Oo(e,4),t.U=Oo(e,4),t.W=Oo(e,4),t}function uhe(e){var t=dhe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function NL(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function kL(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function hhe(e){var t=Oo(e);switch(t.Minor){case 2:return[t.Minor,fhe(e)];case 3:return[t.Minor,mhe()];case 4:return[t.Minor,phe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function fhe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=NL(e,r),s=kL(e,e.length-e.l);return{t:"Std",h:a,v:s}}function mhe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function phe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(Qa,function(i){var o=gr(i);switch(eo(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function ghe(e,t){var r={},a=r.EncryptionVersionInfo=Oo(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=NL(e,s),t-=s,r.EncryptionVerifier=kL(e,t),r}function xhe(e){var t={},r=t.EncryptionVersionInfo=Oo(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function yhe(e){var t=0,r,a=jL(e),s=a.length+1,i,o,l,d,u;for(r=vl(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,d=t<<1&32767,u=l|d,t=u^o;return t^52811}var SL=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],d=104,u=o.length-1;u>=0;--u)for(var f=o[u],m=0;m!=7;++m)f&64&&(l^=r[d]),f*=2,--d;return l};return function(o){for(var l=jL(o),d=i(l),u=l.length,f=vl(16),m=0;m!=16;++m)f[m]=0;var p,g,b;for((u&1)===1&&(p=d>>8,f[u]=s(e[0],p),--u,p=d&255,g=l[l.length-1],f[u]=s(g,p));u>0;)--u,p=d>>8,f[u]=s(l[u],p),--u,p=d&255,f[u]=s(l[u],p);for(u=15,b=15-l.length;b>0;)p=d>>8,f[u]=s(e[b],p),--u,--b,p=d&255,f[u]=s(l[u],p),--u,--b;return f}})(),vhe=function(e,t,r,a,s){s||(s=t),a||(a=SL(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},bhe=function(e){var t=0,r=SL(e);return function(a){var s=vhe("",a,t,r);return t=s[1],s[0]}};function whe(e,t,r,a){var s={key:Yn(e),verificationBytes:Yn(e)};return r.password&&(s.verifier=yhe(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=bhe(r.password)),s}function jhe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=xhe(e):a.Data=ghe(e,t),a}function Nhe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?jhe(e,t-2,a):whe(e,r.biff>=8?t:t-2,r,a),a}var khe=(function(){function e(s,i){switch(i.type){case"base64":return t(Bs(s),i);case"binary":return t(s,i);case"buffer":return t(Pr&&Buffer.isBuffer(s)?s.toString("binary"):Tc(s),i);case"array":return t(wc(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},d=s.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(f,m){Array.isArray(l)&&(l[m]=[]);for(var p=/\\\w+\b/g,g=0,b,y=-1;b=p.exec(f);){switch(b[0]){case"\\cell":var v=f.slice(g,p.lastIndex-b[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var N={v,t:"s"};Array.isArray(l)?l[m][y]=N:l[br({r:m,c:y})]=N}break}g=p.lastIndex}y>u.e.c&&(u.e.c=y)}),l["!ref"]=Rr(u),l}function r(s,i){return _l(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=Mn(s["!ref"]),l,d=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var m=br({r:u,c:f});l=d?(s[u]||[])[f]:s[m],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Ro(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function She(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function q0(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function _he(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,d=0,u=s+i;switch(d=o/(u>1?2-u:u),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,d,u/2]}function Ehe(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,d;if(r!==0)switch(l|0){case 0:case 6:d=s*l,o[0]+=s,o[1]+=d;break;case 1:d=s*(2-l),o[0]+=d,o[1]+=s;break;case 2:d=s*(l-2),o[1]+=s,o[2]+=d;break;case 3:d=s*(4-l),o[1]+=d,o[2]+=s;break;case 4:d=s*(l-4),o[2]+=s,o[0]+=d;break;case 5:d=s*(6-l),o[2]+=d,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function lg(e,t){if(t===0)return e;var r=_he(She(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),q0(Ehe(r))}var _L=6,Che=15,Ahe=1,as=_L;function cg(e){return Math.floor((e+Math.round(128/as)/256)*as)}function dg(e){return Math.floor((e-5)/as*100+.5)/100}function d2(e){return Math.round((e*as+5)/as*256)/256}function cj(e){return d2(dg(cg(e)))}function aS(e){var t=Math.abs(e-cj(e)),r=as;if(t>.005)for(as=Ahe;as<Che;++as)Math.abs(e-cj(e))<=t&&(t=Math.abs(e-cj(e)),r=as);as=r}function du(e){e.width?(e.wpx=cg(e.width),e.wch=dg(e.wpx),e.MDW=as):e.wpx?(e.wch=dg(e.wpx),e.width=d2(e.wch),e.MDW=as):typeof e.wch=="number"&&(e.width=d2(e.wch),e.wpx=cg(e.width),e.MDW=as),e.customWidth&&delete e.customWidth}var The=96,EL=The;function CL(e){return e*96/EL}function z0(e){return e*EL/96}var Ohe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Phe(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(Qa)||[]).forEach(function(o){var l=gr(o);switch(eo(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Sn(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Sn(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Ihe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(Qa)||[]).forEach(function(o){var l=gr(o);switch(eo(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Dhe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(Qa)||[]).forEach(function(o){var l=gr(o);switch(eo(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=gn(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Sn(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Sn(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Sn(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Sn(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Sn(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Sn(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Sn(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Bk[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Sn(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var d=dc[s.color.index];s.color.index==81&&(d=dc[1]),d||(d=dc[1]),s.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=lg(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Mhe(e,t,r){t.NumberFmt=[];for(var a=Xi(jr),s=0;s<a.length;++s)t.NumberFmt[a[s]]=jr[a[s]];var i=e[0].match(Qa);if(i)for(s=0;s<i.length;++s){var o=gr(i[s]);switch(eo(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=$r(gn(o.formatCode)),d=parseInt(o.numFmtId,10);if(t.NumberFmt[d]=l,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=l}cc(l,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}var Lm=["numFmtId","fillId","fontId","borderId","xfId"],Bm=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Rhe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(Qa)||[]).forEach(function(i){var o=gr(i),l=0;switch(eo(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Lm.length;++l)a[Lm[l]]&&(a[Lm[l]]=parseInt(a[Lm[l]],10));for(l=0;l<Bm.length;++l)a[Bm[l]]&&(a[Bm[l]]=Sn(a[Bm[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};o.vertical&&(d.vertical=o.vertical),o.horizontal&&(d.horizontal=o.horizontal),o.textRotation!=null&&(d.textRotation=o.textRotation),o.indent&&(d.indent=o.indent),o.wrapText&&(d.wrapText=Sn(o.wrapText)),a.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}var Fhe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,d,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var m;return(m=l.match(t))&&Mhe(m,f,u),(m=l.match(s))&&Dhe(m,f,d,u),(m=l.match(a))&&Ihe(m,f,d,u),(m=l.match(i))&&Phe(m,f,d,u),(m=l.match(r))&&Rhe(m,f,u),f}})();function $he(e,t){var r=e.read_shift(2),a=Xa(e);return[r,a]}function Lhe(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Yce(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var d=e.read_shift(1);switch(d>0&&(a.charset=d),e.l++,a.color=Gce(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=Xa(e),a}var Bhe=Ja;function Uhe(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}var Hhe=Ja;function qhe(e,t,r){var a={};a.NumberFmt=[];for(var s in jr)a.NumberFmt[s]=jr[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return Uo(e,function(d,u,f){switch(f){case 44:a.NumberFmt[d[0]]=d[1],cc(d[1],d[0]);break;case 43:a.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=lg(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),a}var zhe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Whe(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(Qa)||[]).forEach(function(s){var i=gr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[zhe.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function Khe(){}function Vhe(){}var Ghe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Yhe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Xhe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Jhe(e,t,r){t.themeElements={};var a;[["clrScheme",Ghe,Whe],["fontScheme",Yhe,Khe],["fmtScheme",Xhe,Vhe]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var Qhe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function AL(e,t){(!e||e.length===0)&&(e=Zhe());var r,a={};if(!(r=e.match(Qhe)))throw new Error("themeElements not found in theme");return Jhe(r[0],a,t),a.raw=e,a}function Zhe(e,t){var r=[B$];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function e0e(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=L$(i,{type:"array"})}catch{return}var l=Ms(o,"theme/theme/theme1.xml",!0);if(l)return AL(l,r)}}function t0e(e){return e.read_shift(4)}function r0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=n0e(e,4);break;case 2:t.xclrValue=pL(e);break;case 3:t.xclrValue=t0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function n0e(e,t){return Ja(e,t)}function a0e(e,t){return Ja(e,t)}function s0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=r0e(e);break;case 6:a[1]=a0e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function i0e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(s0e(e,r-e.l));return{ixfe:a,ext:i}}function o0e(e,t){t.forEach(function(r){r[0]})}function l0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Xa(e)}}function c0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function d0e(e){return e.l+=4,e.read_shift(4)!=0}function u0e(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Uo(e,function(d,u,f){switch(f){case 335:a.Types.push({name:d.name});break;case 51:d.forEach(function(m){l==1?a.Cell.push({type:a.Types[m[0]-1].name,index:m[1]}):l==0&&a.Value.push({type:a.Types[m[0]-1].name,index:m[1]})});break;case 337:l=d?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),a}function h0e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(Qa,function(l){var d=gr(l);switch(eo(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<a.Types.length;++u)a.Types[u].name==d.name&&(o=a.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[d.t-1].name,index:+d.v}):i==0&&a.Value.push({type:a.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+d.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return l}),a}function f0e(e){var t=[];if(!e)return t;var r=1;return(e.match(Qa)||[]).forEach(function(a){var s=gr(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function m0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=br(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function p0e(e,t,r){var a=[];return Uo(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function g0e(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Uo(e,function(l,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function x0e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function oI(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=ls(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var d=Mn(e["!ref"]||"BDWGO1000001:A1");d.s.r>l.r&&(d.s.r=l.r),d.e.r<l.r&&(d.e.r=l.r),d.s.c>l.c&&(d.s.c=l.c),d.e.c<l.c&&(d.e.c=l.c);var u=Rr(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var m=i.c.length-1;m>=0;--m){if(!r&&i.c[m].T)return;r&&!i.c[m].T&&i.c.splice(m,1)}if(r&&a){for(m=0;m<a.length;++m)if(f.a==a[m].id){f.a=a[m].name||f.a;break}}i.c.push(f)})}function y0e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var d=gr(l[0]),u={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},f=ls(d.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var m=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!m&&!!m[1]&&nS(m[1])||{r:"",t:"",h:""};u.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),u.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=p.h),a.push(u)}}}}),a}function v0e(e,t){var r=[],a=!1,s={},i=0;return e.replace(Qa,function(l,d){var u=gr(l);switch(eo(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=d+l.length;break;case"</text>":s.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function b0e(e,t){var r=[],a=!1;return e.replace(Qa,function(i){var o=gr(i);switch(eo(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function w0e(e){var t={};t.iauthor=e.read_shift(4);var r=Pc(e);return t.rfx=r.s,t.ref=br(r.s),e.l+=16,t}var j0e=Xa;function N0e(e,t){var r=[],a=[],s={},i=!1;return Uo(e,function(l,d,u){switch(u){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}var k0e="application/vnd.ms-office.vbaProject";function S0e(e){var t=Mr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Mr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Mr.write(t)}function _0e(){return{"!type":"dialog"}}function E0e(){return{"!type":"dialog"}}function C0e(){return{"!type":"macro"}}function A0e(){return{"!type":"macro"}}var Dd=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,d?u+=t.r:--u,s+(l?"":"$")+ha(f)+(d?"":"$")+Da(u)}return function(s,i){return t=i,s.replace(e,r)}})(),TL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,T0e=(function(){return function(t,r){return t.replace(TL,function(a,s,i,o,l,d){var u=Jk(o)-(i?0:r.c),f=Xk(d)-(l?0:r.r),m=f==0?"":l?f+1:"["+f+"]",p=u==0?"":i?u+1:"["+u+"]";return s+"R"+m+"C"+p})}})();function OL(e,t){return e.replace(TL,function(r,a,s,i,o,l){return a+(s=="$"?s+i:ha(Jk(i)+t.c))+(o=="$"?o+l:Da(Xk(l)+t.r))})}function O0e(e,t,r){var a=Eu(t),s=a.s,i=ls(r),o={r:i.r-s.r,c:i.c-s.c};return OL(e,o)}function P0e(e){return e.length!=1}function lI(e){return e.replace(/_xlfn\./g,"")}function Kn(e){e.l+=1}function bl(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function PL(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return IL(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=bl(e),l=bl(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function IL(e){var t=bl(e),r=bl(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function I0e(e,t,r){if(r.biff<8)return IL(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=bl(e),o=bl(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function DL(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return D0e(e);var a=e.read_shift(r&&r.biff==12?4:2),s=bl(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function D0e(e){var t=bl(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function M0e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function R0e(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return F0e(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function F0e(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function $0e(e,t,r){var a=(e[e.l++]&96)>>5,s=PL(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function L0e(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=PL(e,i,r);return[a,s,o]}function B0e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function U0e(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function H0e(e,t,r){var a=(e[e.l++]&96)>>5,s=I0e(e,t-1,r);return[a,s]}function q0e(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function cI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function z0e(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function W0e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function K0e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function V0e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function G0e(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function ML(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Y0e(e){return e.read_shift(2),ML(e)}function X0e(e){return e.read_shift(2),ML(e)}function J0e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=DL(e,0,r);return[a,s]}function Q0e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=R0e(e,0,r);return[a,s]}function Z0e(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=DL(e,0,r);return[a,s,i]}function efe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[tme[s],$L[s],a]}function tfe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:rfe(e);return[s,(i[0]===0?$L:eme)[i[1]]]}function rfe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function nfe(e,t,r){e.l+=r&&r.biff==2?3:4}function afe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function sfe(e){return e.l++,Ic[e.read_shift(1)]}function ife(e){return e.l++,e.read_shift(2)}function ofe(e){return e.l++,e.read_shift(1)!==0}function lfe(e){return e.l++,Ka(e)}function cfe(e,t,r){return e.l++,lf(e,t-1,r)}function dfe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ln(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Ic[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Ka(e);break;case 2:r[1]=Dc(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ufe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?Pc:hx)(e));return s}function hfe(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=dfe(e,r.biff);return o}function ffe(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function mfe(e,t,r){if(r.biff==5)return pfe(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function pfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function gfe(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function xfe(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function yfe(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function vfe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var bfe=Ja,wfe=Ja,jfe=Ja;function df(e,t,r){return e.l+=2,[M0e(e)]}function sS(e){return e.l+=6,[]}var Nfe=df,kfe=sS,Sfe=sS,_fe=df;function RL(e){return e.l+=2,[Yn(e),e.read_shift(2)&1]}var Efe=df,Cfe=RL,Afe=sS,Tfe=df,Ofe=df,Pfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Ife(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=Pfe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function Dfe(e){return e.l+=2,[e.read_shift(4)]}function Mfe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Rfe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Ffe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function $fe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Lfe(e){return e.l+=4,[0,0]}var dI={1:{n:"PtgExp",f:afe},2:{n:"PtgTbl",f:jfe},3:{n:"PtgAdd",f:Kn},4:{n:"PtgSub",f:Kn},5:{n:"PtgMul",f:Kn},6:{n:"PtgDiv",f:Kn},7:{n:"PtgPower",f:Kn},8:{n:"PtgConcat",f:Kn},9:{n:"PtgLt",f:Kn},10:{n:"PtgLe",f:Kn},11:{n:"PtgEq",f:Kn},12:{n:"PtgGe",f:Kn},13:{n:"PtgGt",f:Kn},14:{n:"PtgNe",f:Kn},15:{n:"PtgIsect",f:Kn},16:{n:"PtgUnion",f:Kn},17:{n:"PtgRange",f:Kn},18:{n:"PtgUplus",f:Kn},19:{n:"PtgUminus",f:Kn},20:{n:"PtgPercent",f:Kn},21:{n:"PtgParen",f:Kn},22:{n:"PtgMissArg",f:Kn},23:{n:"PtgStr",f:cfe},26:{n:"PtgSheet",f:Mfe},27:{n:"PtgEndSheet",f:Rfe},28:{n:"PtgErr",f:sfe},29:{n:"PtgBool",f:ofe},30:{n:"PtgInt",f:ife},31:{n:"PtgNum",f:lfe},32:{n:"PtgArray",f:q0e},33:{n:"PtgFunc",f:efe},34:{n:"PtgFuncVar",f:tfe},35:{n:"PtgName",f:ffe},36:{n:"PtgRef",f:J0e},37:{n:"PtgArea",f:$0e},38:{n:"PtgMemArea",f:gfe},39:{n:"PtgMemErr",f:bfe},40:{n:"PtgMemNoMem",f:wfe},41:{n:"PtgMemFunc",f:xfe},42:{n:"PtgRefErr",f:yfe},43:{n:"PtgAreaErr",f:B0e},44:{n:"PtgRefN",f:Q0e},45:{n:"PtgAreaN",f:H0e},46:{n:"PtgMemAreaN",f:Ffe},47:{n:"PtgMemNoMemN",f:$fe},57:{n:"PtgNameX",f:mfe},58:{n:"PtgRef3d",f:Z0e},59:{n:"PtgArea3d",f:L0e},60:{n:"PtgRefErr3d",f:vfe},61:{n:"PtgAreaErr3d",f:U0e},255:{}},Bfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ufe={1:{n:"PtgElfLel",f:RL},2:{n:"PtgElfRw",f:Tfe},3:{n:"PtgElfCol",f:Nfe},6:{n:"PtgElfRwV",f:Ofe},7:{n:"PtgElfColV",f:_fe},10:{n:"PtgElfRadical",f:Efe},11:{n:"PtgElfRadicalS",f:Afe},13:{n:"PtgElfColS",f:kfe},15:{n:"PtgElfColSV",f:Sfe},16:{n:"PtgElfRadicalLel",f:Cfe},25:{n:"PtgList",f:Ife},29:{n:"PtgSxName",f:Dfe},255:{}},Hfe={0:{n:"PtgAttrNoop",f:Lfe},1:{n:"PtgAttrSemi",f:G0e},2:{n:"PtgAttrIf",f:K0e},4:{n:"PtgAttrChoose",f:z0e},8:{n:"PtgAttrGoto",f:W0e},16:{n:"PtgAttrSum",f:nfe},32:{n:"PtgAttrBaxcel",f:cI},33:{n:"PtgAttrBaxcel",f:cI},64:{n:"PtgAttrSpace",f:Y0e},65:{n:"PtgAttrSpaceSemi",f:X0e},128:{n:"PtgAttrIfError",f:V0e},255:{}};function uf(e,t,r,a){if(a.biff<8)return Ja(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=hfe(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=ufe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Ja(e,t)),i}function hf(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=dI[i]||dI[Bfe[i]],(i===24||i===25)&&(s=(i===24?Ufe:Hfe)[e[e.l+1]]),!s||!s.f?Ja(e,t):o.push([s.n,s.f(e,t,r)]);return o}function qfe(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var zfe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Wfe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function FL(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];case 355:default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function uI(e,t,r){var a=FL(e,t,r);return a=="#REF"?a:Wfe(a,r)}function za(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],d,u,f,m=0,p=0,g,b="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",N=0,k=e[0].length;N<k;++N){var w=e[0][N];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=l.pop(),u=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=In(" ",e[0][y][1][1]);break;case 1:v=In("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}l.push(u+zfe[w[0]]+d);break;case"PtgIsect":d=l.pop(),u=l.pop(),l.push(u+" "+d);break;case"PtgUnion":d=l.pop(),u=l.pop(),l.push(u+","+d);break;case"PtgRange":d=l.pop(),u=l.pop(),l.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Fh(w[1][1],o,s),l.push($h(f,i));break;case"PtgRefN":f=r?Fh(w[1][1],r,s):w[1][1],l.push($h(f,i));break;case"PtgRef3d":m=w[1][1],f=Fh(w[1][2],o,s),b=uI(a,m,s),l.push(b+"!"+$h(f,i));break;case"PtgFunc":case"PtgFuncVar":var A=w[1][0],S=w[1][1];A||(A=0),A&=127;var _=A==0?[]:l.slice(-A);l.length-=A,S==="User"&&(S=_.shift()),l.push(S+"("+_.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":g=WP(w[1][1],r?{s:r}:o,s),l.push(oj(g,s));break;case"PtgArea":g=WP(w[1][1],o,s),l.push(oj(g,s));break;case"PtgArea3d":m=w[1][1],g=w[1][2],b=uI(a,m,s),l.push(b+"!"+oj(g,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=w[1][2];var E=(a.names||[])[p-1]||(a[0]||[])[p],C=E?E.Name:"SH33TJSNAME"+String(p);C&&C.slice(0,6)=="_xlfn."&&!s.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var I=w[1][1];p=w[1][2];var B;if(s.biff<=5)I<0&&(I=-I),a[I]&&(B=a[I][p]);else{var M="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][p]&&a[I][p].itab>0&&(M=a.SheetNames[a[I][p].itab-1]+"!"):M=a.SheetNames[p-1]+"!"),a[I]&&a[I][p])M+=a[I][p].Name;else if(a[0]&&a[0][p])M+=a[0][p].Name;else{var O=(FL(a,I,s)||"").split(";;");O[p-1]?M=O[p-1]:M+="SH33TJSERRX"}l.push(M);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var U="(",ie=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:U=In(" ",e[0][y][1][1])+U;break;case 3:U=In("\r",e[0][y][1][1])+U;break;case 4:ie=In(" ",e[0][y][1][1])+ie;break;case 5:ie=In("\r",e[0][y][1][1])+ie;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(U+l.pop()+ie);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var X={c:r.c,r:r.r};if(a.sharedf[br(f)]){var re=a.sharedf[br(f)];l.push(za(re,o,X,a,s))}else{var oe=!1;for(d=0;d!=a.arrayf.length;++d)if(u=a.arrayf[d],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(za(u[1],o,X,a,s)),oe=!0;break}oe||l.push(w[1])}break;case"PtgArray":l.push("{"+qfe(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&Q.indexOf(e[0][N][0])==-1){w=e[0][y];var F=!0;switch(w[1][0]){case 4:F=!1;case 0:v=In(" ",w[1][1]);break;case 5:F=!1;case 1:v=In("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((F?v:"")+l.pop()+(F?"":v)),y=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Kfe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ja(e,t-2)];var l=hf(e,o,r);return t!==o+s&&(i=uf(e,t-o-s,l,r)),e.l=a,[l,i]}function Vfe(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Ja(e,t-2)];var l=hf(e,o,r);return t!==o+s&&(i=uf(e,t-o-s,l,r)),e.l=a,[l,i]}function Gfe(e,t,r,a){var s=e.l+t,i=hf(e,a,r),o;return s!==e.l&&(o=uf(e,s-e.l,i,r)),[i,o]}function Yfe(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=hf(e,i,r);return i==65535?[[],Ja(e,t-2)]:(t!==i+2&&(s=uf(e,a-i-2,o,r)),[o,s])}function Xfe(e){var t;if(_o(e,e.l+6)!==65535)return[Ka(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function dj(e,t,r){var a=e.l+t,s=to(e);r.biff==2&&++e.l;var i=Xfe(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Vfe(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function fx(e,t,r){var a=e.read_shift(4),s=hf(e,a,r),i=e.read_shift(4),o=i>0?uf(e,i,s,r):null;return[s,o]}var Jfe=fx,mx=fx,Qfe=fx,Zfe=fx,eme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},$L={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},tme={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hI(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function uj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Hh={},Md={};function qh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function LL(e,t,r,a,s,i){try{a.cellNF&&(e.z=jr[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Na(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(jr[t]==null&&cc(rce[t]||"General",t),e.t==="e")e.w=e.w||Ic[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=L0(e.v);else if(e.t==="d"){var o=ds(e.v);(o|0)===o?e.w=o.toString(10):e.w=L0(o)}else{if(e.v===void 0)return"";e.w=bc(e.v,Md)}else e.t==="d"?e.w=ai(t,ds(e.v),Md):e.w=ai(t,e.v,Md)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=lg(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=lg(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function rme(e,t){var r=Mn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Rr(r))}var nme=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,ame=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,sme=/<(?:\w:)?hyperlink [^>]*>/mg,ime=/"(\w*:\w*)"/,ome=/<(?:\w:)?col\b[^>]*[\/]?>/g,lme=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,cme=/<(?:\w:)?pageMargins[^>]*\/>/g,BL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,dme=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ume=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function hme(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",m=e.match(ame);m?(u=e.slice(0,m.index),f=e.slice(m.index+m[0].length)):u=f=e;var p=u.match(BL);p?iS(p[0],l,s,r):(p=u.match(dme))&&fme(p[0],p[1]||"",l,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(ime);b&&rme(l,b[1])}var y=u.match(ume);y&&y[1]&&vme(y[1],s);var v=[];if(t.cellStyles){var N=u.match(ome);N&&gme(v,N)}m&&bme(m[1],l,t,d,i,o);var k=f.match(lme);k&&(l["!autofilter"]=xme(k[0]));var w=[],A=f.match(nme);if(A)for(g=0;g!=A.length;++g)w[g]=Mn(A[g].slice(A[g].indexOf('"')+1));var S=f.match(sme);S&&mme(l,S,a);var _=f.match(cme);if(_&&(l["!margins"]=pme(gr(_[0]))),!l["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(l["!ref"]=Rr(d)),t.sheetRows>0&&l["!ref"]){var E=Mn(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>d.e.r&&(E.e.r=d.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>d.e.c&&(E.e.c=d.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Rr(E))}return v.length>0&&(l["!cols"]=v),w.length>0&&(l["!merges"]=w),l}function iS(e,t,r,a){var s=gr(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=$r(gn(s.codeName)))}function fme(e,t,r,a,s){iS(e.slice(0,e.indexOf(">")),r,a,s)}function mme(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=gr(gn(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+$r(i.location))):(i.Target="#"+$r(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Mn(i.ref),d=l.s.r;d<=l.e.r;++d)for(var u=l.s.c;u<=l.e.c;++u){var f=br({c:u,r:d});a?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function pme(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function gme(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=gr(t[a],!0);s.hidden&&(s.hidden=Sn(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,aS(s.width)),du(s);i<=o;)e[i++]=Ia(s)}}function xme(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var yme=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function vme(e,t){t.Views||(t.Views=[{}]),(e.match(yme)||[]).forEach(function(r,a){var s=gr(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),Sn(s.rightToLeft)&&(t.Views[a].RTL=!0)})}var bme=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=B0("v"),o=B0("f");return function(d,u,f,m,p,g){for(var b=0,y="",v=[],N=[],k=0,w=0,A=0,S="",_,E,C=0,I=0,B,M,O=0,U=0,ie=Array.isArray(g.CellXf),X,re=[],oe=[],Q=Array.isArray(u),F=[],J={},L=!1,D=!!f.sheetStubs,Y=d.split(t),V=0,ee=Y.length;V!=ee;++V){y=Y[V].trim();var ge=y.length;if(ge!==0){var ke=0;e:for(b=0;b<ge;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(f&&f.cellStyles){if(E=gr(y.slice(ke,b),!0),C=E.r!=null?parseInt(E.r,10):C+1,I=-1,f.sheetRows&&f.sheetRows<C)continue;J={},L=!1,E.ht&&(L=!0,J.hpt=parseFloat(E.ht),J.hpx=z0(J.hpt)),E.hidden=="1"&&(L=!0,J.hidden=!0),E.outlineLevel!=null&&(L=!0,J.level=+E.outlineLevel),L&&(F[C-1]=J)}break;case"<":ke=b;break}if(ke>=b)break;if(E=gr(y.slice(ke,b),!0),C=E.r!=null?parseInt(E.r,10):C+1,I=-1,!(f.sheetRows&&f.sheetRows<C)){m.s.r>C-1&&(m.s.r=C-1),m.e.r<C-1&&(m.e.r=C-1),f&&f.cellStyles&&(J={},L=!1,E.ht&&(L=!0,J.hpt=parseFloat(E.ht),J.hpx=z0(J.hpt)),E.hidden=="1"&&(L=!0,J.hidden=!0),E.outlineLevel!=null&&(L=!0,J.level=+E.outlineLevel),L&&(F[C-1]=J)),v=y.slice(b).split(e);for(var Ce=0;Ce!=v.length&&v[Ce].trim().charAt(0)=="<";++Ce);for(v=v.slice(Ce),b=0;b!=v.length;++b)if(y=v[b].trim(),y.length!==0){if(N=y.match(r),k=b,w=0,A=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,N!=null&&N.length===2){for(k=0,S=N[1],w=0;w!=S.length&&!((A=S.charCodeAt(w)-64)<1||A>26);++w)k=26*k+A;--k,I=k}else++I;for(w=0;w!=y.length&&y.charCodeAt(w)!==62;++w);if(++w,E=gr(y.slice(0,w),!0),E.r||(E.r=br({r:C-1,c:I})),S=y.slice(w),_={t:""},(N=S.match(i))!=null&&N[1]!==""&&(_.v=$r(N[1])),f.cellFormula){if((N=S.match(o))!=null&&N[1]!==""){if(_.f=$r(gn(N[1])).replace(/\r\n/g,`
`),f.xlfn||(_.f=lI(_.f)),N[0].indexOf('t="array"')>-1)_.F=(S.match(s)||[])[1],_.F.indexOf(":")>-1&&re.push([Mn(_.F),_.F]);else if(N[0].indexOf('t="shared"')>-1){M=gr(N[0]);var ce=$r(gn(N[1]));f.xlfn||(ce=lI(ce)),oe[parseInt(M.si,10)]=[M,ce,E.r]}}else(N=S.match(/<f[^>]*\/>/))&&(M=gr(N[0]),oe[M.si]&&(_.f=O0e(oe[M.si][1],oe[M.si][2],E.r)));var me=ls(E.r);for(w=0;w<re.length;++w)me.r>=re[w][0].s.r&&me.r<=re[w][0].e.r&&me.c>=re[w][0].s.c&&me.c<=re[w][0].e.c&&(_.F=re[w][1])}if(E.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(D)_.t="z";else continue;else _.t=E.t||"n";switch(m.s.c>I&&(m.s.c=I),m.e.c<I&&(m.e.c=I),_.t){case"n":if(_.v==""||_.v==null){if(!D)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!D)continue;_.t="z"}else B=Hh[parseInt(_.v,10)],_.v=B.t,_.r=B.r,f.cellHTML&&(_.h=B.h);break;case"str":_.t="s",_.v=_.v!=null?gn(_.v):"",f.cellHTML&&(_.h=Vk(_.v));break;case"inlineStr":N=S.match(a),_.t="s",N!=null&&(B=nS(N[1]))?(_.v=B.t,f.cellHTML&&(_.h=B.h)):_.v="";break;case"b":_.v=Sn(_.v);break;case"d":f.cellDates?_.v=Na(_.v,1):(_.v=ds(Na(_.v,1)),_.t="n");break;case"e":(!f||f.cellText!==!1)&&(_.w=_.v),_.v=oL[_.v];break}if(O=U=0,X=null,ie&&E.s!==void 0&&(X=g.CellXf[E.s],X!=null&&(X.numFmtId!=null&&(O=X.numFmtId),f.cellStyles&&X.fillId!=null&&(U=X.fillId))),LL(_,O,U,f,p,g),f.cellDates&&ie&&_.t=="n"&&_u(jr[O])&&(_.t="d",_.v=ux(_.v)),E.cm&&f.xlmeta){var Oe=(f.xlmeta.Cell||[])[+E.cm-1];Oe&&Oe.type=="XLDAPR"&&(_.D=!0)}if(Q){var G=ls(E.r);u[G.r]||(u[G.r]=[]),u[G.r][G.c]=_}else u[E.r]=_}}}}F.length>0&&(u["!rows"]=F)}})();function wme(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}var jme=Pc;function Nme(){}function kme(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Kce(e),r}function Sme(e){var t=ii(e);return[t]}function _me(e){var t=Oc(e);return[t]}function Eme(e){var t=ii(e),r=e.read_shift(1);return[t,r,"b"]}function Cme(e){var t=Oc(e),r=e.read_shift(1);return[t,r,"b"]}function Ame(e){var t=ii(e),r=e.read_shift(1);return[t,r,"e"]}function Tme(e){var t=Oc(e),r=e.read_shift(1);return[t,r,"e"]}function Ome(e){var t=ii(e),r=e.read_shift(4);return[t,r,"s"]}function Pme(e){var t=Oc(e),r=e.read_shift(4);return[t,r,"s"]}function Ime(e){var t=ii(e),r=Ka(e);return[t,r,"n"]}function UL(e){var t=Oc(e),r=Ka(e);return[t,r,"n"]}function Dme(e){var t=ii(e),r=eS(e);return[t,r,"n"]}function Mme(e){var t=Oc(e),r=eS(e);return[t,r,"n"]}function Rme(e){var t=ii(e),r=Qk(e);return[t,r,"is"]}function Fme(e){var t=ii(e),r=Xa(e);return[t,r,"str"]}function $me(e){var t=Oc(e),r=Xa(e);return[t,r,"str"]}function Lme(e,t,r){var a=e.l+t,s=ii(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=mx(e,a-e.l,r);o[3]=za(l,null,s,r.supbooks,r)}else e.l=a;return o}function Bme(e,t,r){var a=e.l+t,s=ii(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=mx(e,a-e.l,r);o[3]=za(l,null,s,r.supbooks,r)}else e.l=a;return o}function Ume(e,t,r){var a=e.l+t,s=ii(e);s.r=r["!row"];var i=Ka(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=mx(e,a-e.l,r);o[3]=za(l,null,s,r.supbooks,r)}else e.l=a;return o}function Hme(e,t,r){var a=e.l+t,s=ii(e);s.r=r["!row"];var i=Xa(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=mx(e,a-e.l,r);o[3]=za(l,null,s,r.supbooks,r)}else e.l=a;return o}var qme=Pc;function zme(e,t){var r=e.l+t,a=Pc(e),s=Zk(e),i=Xa(e),o=Xa(e),l=Xa(e);e.l=r;var d={rfx:a,relId:s,loc:i,display:l};return o&&(d.Tooltip=o),d}function Wme(){}function Kme(e,t,r){var a=e.l+t,s=aL(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Jfe(e,a-e.l,r);o[1]=l}else e.l=a;return o}function Vme(e,t,r){var a=e.l+t,s=Pc(e),i=[s];if(r.cellFormula){var o=Zfe(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}var Gme=["left","right","top","bottom","header","footer"];function Yme(e){var t={};return Gme.forEach(function(r){t[r]=Ka(e)}),t}function Xme(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Jme(){}function Qme(){}function Zme(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var d=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=!1,p=!1,g,b,y,v,N,k,w,A,S,_=[];l.biff=12,l["!row"]=0;var E=0,C=!1,I=[],B={},M=l.supbooks||s.supbooks||[[]];if(M.sharedf=B,M.arrayf=I,M.SheetNames=s.SheetNames||s.Sheets.map(function(Q){return Q.name}),!l.supbooks&&(l.supbooks=M,s.Names))for(var O=0;O<s.Names.length;++O)M[0][O+1]=s.Names[O];var U=[],ie=[],X=!1;ug[16]={n:"BrtShortReal",f:UL};var re;if(Uo(e,function(F,J,L){if(!p)switch(L){case 148:u=F;break;case 0:g=F,l.sheetRows&&l.sheetRows<=g.r&&(p=!0),A=Da(v=g.r),l["!row"]=g.r,(F.hidden||F.hpt||F.level!=null)&&(F.hpt&&(F.hpx=z0(F.hpt)),ie[F.r]=F);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:F[2]},F[2]){case"n":b.v=F[1];break;case"s":w=Hh[F[1]],b.v=w.t,b.r=w.r;break;case"b":b.v=!!F[1];break;case"e":b.v=F[1],l.cellText!==!1&&(b.w=Ic[b.v]);break;case"str":b.t="s",b.v=F[1];break;case"is":b.t="s",b.v=F[1].t;break}if((y=o.CellXf[F[0].iStyleRef])&&LL(b,y.numFmtId,null,l,i,o),N=F[0].c==-1?N+1:F[0].c,l.dense?(d[v]||(d[v]=[]),d[v][N]=b):d[ha(N)+A]=b,l.cellFormula){for(C=!1,E=0;E<I.length;++E){var D=I[E];g.r>=D[0].s.r&&g.r<=D[0].e.r&&N>=D[0].s.c&&N<=D[0].e.c&&(b.F=Rr(D[0]),C=!0)}!C&&F.length>3&&(b.f=F[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>N&&(f.s.c=N),f.e.r<g.r&&(f.e.r=g.r),f.e.c<N&&(f.e.c=N),l.cellDates&&y&&b.t=="n"&&_u(jr[y.numFmtId])){var Y=sc(b.v);Y&&(b.t="d",b.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}re&&(re.type=="XLDAPR"&&(b.D=!0),re=void 0);break;case 1:case 12:if(!l.sheetStubs||m)break;b={t:"z",v:void 0},N=F[0].c==-1?N+1:F[0].c,l.dense?(d[v]||(d[v]=[]),d[v][N]=b):d[ha(N)+A]=b,f.s.r>g.r&&(f.s.r=g.r),f.s.c>N&&(f.s.c=N),f.e.r<g.r&&(f.e.r=g.r),f.e.c<N&&(f.e.c=N),re&&(re.type=="XLDAPR"&&(b.D=!0),re=void 0);break;case 176:_.push(F);break;case 49:re=((l.xlmeta||{}).Cell||[])[F-1];break;case 494:var V=a["!id"][F.relId];for(V?(F.Target=V.Target,F.loc&&(F.Target+="#"+F.loc),F.Rel=V):F.relId==""&&(F.Target="#"+F.loc),v=F.rfx.s.r;v<=F.rfx.e.r;++v)for(N=F.rfx.s.c;N<=F.rfx.e.c;++N)l.dense?(d[v]||(d[v]=[]),d[v][N]||(d[v][N]={t:"z",v:void 0}),d[v][N].l=F):(k=br({c:N,r:v}),d[k]||(d[k]={t:"z",v:void 0}),d[k].l=F);break;case 426:if(!l.cellFormula)break;I.push(F),S=l.dense?d[v][N]:d[ha(N)+A],S.f=za(F[1],f,{r:g.r,c:N},M,l),S.F=Rr(F[0]);break;case 427:if(!l.cellFormula)break;B[br(F[0].s)]=F[1],S=l.dense?d[v][N]:d[ha(N)+A],S.f=za(F[1],f,{r:g.r,c:N},M,l);break;case 60:if(!l.cellStyles)break;for(;F.e>=F.s;)U[F.e--]={width:F.w/256,hidden:!!(F.flags&1),level:F.level},X||(X=!0,aS(F.w/256)),du(U[F.e+1]);break;case 161:d["!autofilter"]={ref:Rr(F)};break;case 476:d["!margins"]=F;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),F.name&&(s.Sheets[r].CodeName=F.name),(F.above||F.left)&&(d["!outline"]={above:F.above,left:F.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),F.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:m=!0;break;case 36:m=!1;break;case 37:m=!0;break;case 38:m=!1;break;default:if(!J.T){if(!m||l.WTF)throw new Error("Unexpected record 0x"+L.toString(16))}}},l),delete l.supbooks,delete l["!row"],!d["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=Rr(u||f)),l.sheetRows&&d["!ref"]){var oe=Mn(d["!ref"]);l.sheetRows<=+oe.e.r&&(oe.e.r=l.sheetRows-1,oe.e.r>f.e.r&&(oe.e.r=f.e.r),oe.e.r<oe.s.r&&(oe.s.r=oe.e.r),oe.e.c>f.e.c&&(oe.e.c=f.e.c),oe.e.c<oe.s.c&&(oe.s.c=oe.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Rr(oe))}return _.length>0&&(d["!merges"]=_),U.length>0&&(d["!cols"]=U),ie.length>0&&(d["!rows"]=ie),d}function epe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=$r((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function tpe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,d=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(m){var p=epe(m);f.s.r=f.s.c=0,f.e.c=l,u=ha(l),p[0].forEach(function(g,b){o[u+Da(b)]={t:"n",v:g,z:p[1]},d=b}),f.e.r<d&&(f.e.r=d),++l}),l>0&&(o["!ref"]=Rr(f)),o}function rpe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(BL);return l&&iS(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function npe(e,t){e.l+=10;var r=Xa(e);return{name:r}}function ape(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Uo(e,function(d,u,f){switch(f){case 550:i["!rel"]=d;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),d.name&&(s.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var HL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],spe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ipe=[],ope=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function fI(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=Sn(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function mI(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=Sn(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function qL(e){mI(e.WBProps,HL),mI(e.CalcPr,ope),fI(e.WBView,spe),fI(e.Sheets,ipe),Md.date1904=Sn(e.WBProps.date1904)}var lpe="][*?/\\".split("");function cpe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return lpe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var dpe=/<\w+:workbook/;function upe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(Qa,function(d,u){var f=gr(d);switch(eo(f[0])){case"<?xml":break;case"<workbook":d.match(dpe)&&(s="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":HL.forEach(function(m){if(f[m[0]]!=null)switch(m[2]){case"bool":r.WBProps[m[0]]=Sn(f[m[0]]);break;case"int":r.WBProps[m[0]]=parseInt(f[m[0]],10);break;default:r.WBProps[m[0]]=f[m[0]]}}),f.codeName&&(r.WBProps.CodeName=gn(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=$r(gn(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=gn(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Sn(f.hidden||"0")&&(i.Hidden=!0),o=u+d.length;break;case"</definedName>":i.Ref=$r(gn(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return d}),Ace.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return qL(r),r}function hpe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=o2(e),r.name=Xa(e),r}function fpe(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Xa(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function mpe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function ppe(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Vce(e),o=Qfe(e,0,r),l=Zk(e);e.l=a;var d={Name:i,Ptg:o};return s<268435455&&(d.Sheet=s),l&&(d.Comment=l),d}function gpe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],ug[16]={n:"BrtFRTArchID$",f:mpe},Uo(e,function(d,u,f){switch(f){case 156:o.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=za(d.Ptg,null,null,o,t),delete t.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,d]):o[0]=[f,d],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(d),o.XTI=o.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(f),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(f),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),qL(r),r.Names=i,r.supbooks=o,r}function xpe(e,t,r){return t.slice(-4)===".bin"?gpe(e,r):upe(e,r)}function ype(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Zme(e,a,r,s,i,o,l):hme(e,a,r,s,i,o,l)}function vpe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?ape(e,a,r,s,i):rpe(e,a,r,s,i)}function bpe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?C0e():A0e()}function wpe(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?_0e():E0e()}function jpe(e,t,r,a){return t.slice(-4)===".bin"?qhe(e,r,a):Fhe(e,r,a)}function Npe(e,t,r){return AL(e,r)}function kpe(e,t,r){return t.slice(-4)===".bin"?she(e,r):nhe(e,r)}function Spe(e,t,r){return t.slice(-4)===".bin"?N0e(e,r):y0e(e,r)}function _pe(e,t,r){return t.slice(-4)===".bin"?p0e(e):f0e(e)}function Epe(e,t,r,a){return r.slice(-4)===".bin"?g0e(e,t,r,a):void 0}function Cpe(e,t,r){return t.slice(-4)===".bin"?u0e(e,t,r):h0e(e,t,r)}var zL=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,WL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function pi(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(zL),i,o,l,d;if(s)for(d=0;d!=s.length;++d)i=s[d].match(WL),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Ape(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(zL),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(WL),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var zh;function Tpe(e,t){var r=zh[e]||$r(e);return r==="General"?bc(t):ai(r,t)}function Ope(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Sn(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=Na(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[$r(t)]=s}function Ppe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Ic[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=L0(e.v):e.w=bc(e.v):e.w=Tpe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=zh[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&_u(a)){var s=sc(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Ipe(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Ohe[a.Pattern]||a.Pattern)}e[t.ID]=t}function Dpe(e,t,r,a,s,i,o,l,d,u){var f="General",m=a.StyleID,p={};u=u||{};var g=[],b=0;for(m===void 0&&l&&(m=l.StyleID),m===void 0&&o&&(m=o.StyleID);i[m]!==void 0&&(i[m].nf&&(f=i[m].nf),i[m].Interior&&g.push(i[m].Interior),!!i[m].Parent);)m=i[m].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=Sn(e);break;case"String":a.t="s",a.r=RP($r(e)),a.v=e.indexOf("<")>-1?$r(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(Na(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=$r(e):a.v<60&&(a.v=a.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=oL[e],u.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=RP(t||e));break}if(Ppe(a,f,u),u.cellFormula!==!1)if(a.Formula){var y=$r(a.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),a.f=Dd(y,s),delete a.Formula,a.ArrayRange=="RC"?a.F=Dd("RC:RC",s):a.ArrayRange&&(a.F=Dd(a.ArrayRange,s),d.push([Mn(a.F),a.F]))}else for(b=0;b<d.length;++b)s.r>=d[b][0].s.r&&s.r<=d[b][0].e.r&&s.c>=d[b][0].s.c&&s.c<=d[b][0].e.c&&(a.F=d[b][1]);u.cellStyles&&(g.forEach(function(v){!p.patternType&&v.patternType&&(p.patternType=v.patternType)}),a.s=p),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Mpe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function hj(e,t){var r=t||{};I$();var a=Nh(Gk(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=gn(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Ia(r);return o.type="string",H0.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){s.indexOf("<"+Ne)>=0&&(i=!0)}),i)return zpe(a,r);zh={"General Number":"General","General Date":jr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":jr[15],"Short Date":jr[14],"Long Time":jr[19],"Medium Time":jr[18],"Short Time":jr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:jr[2],Standard:jr[4],Percent:jr[10],Scientific:jr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,d=[],u,f={},m=[],p=r.dense?[]:{},g="",b={},y={},v=pi('<Data ss:Type="String">'),N=0,k=0,w=0,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},_={},E="",C=0,I=[],B={},M={},O=0,U=[],ie=[],X={},re=[],oe,Q=!1,F=[],J=[],L={},D=0,Y=0,V={Sheets:[],WBProps:{date1904:!1}},ee={};U0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ge="";l=U0.exec(a);)switch(l[3]=(ge=l[3]).toLowerCase()){case"data":if(ge=="data"){if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break}if(d[d.length-1][1])break;l[1]==="/"?Dpe(a.slice(N,l.index),E,v,d[d.length-1][0]=="comment"?X:b,{c:k,r:w},S,re[k],y,F,r):(E="",v=pi(l[0]),N=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(ie.length>0&&(b.c=ie),(!r.sheetRows||r.sheetRows>w)&&b.v!==void 0&&(r.dense?(p[w]||(p[w]=[]),p[w][k]=b):p[ha(k)+Da(w)]=b),b.HRef&&(b.l={Target:$r(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(D=k+(parseInt(b.MergeAcross,10)|0),Y=w+(parseInt(b.MergeDown,10)|0),I.push({s:{c:k,r:w},e:{c:D,r:Y}})),!r.sheetStubs)b.MergeAcross?k=D+1:++k;else if(b.MergeAcross||b.MergeDown){for(var ke=k;ke<=D;++ke)for(var Ce=w;Ce<=Y;++Ce)(ke>k||Ce>w)&&(r.dense?(p[Ce]||(p[Ce]=[]),p[Ce][ke]={t:"z"}):p[ha(ke)+Da(Ce)]={t:"z"});k=D+1}else++k;else b=Ape(l[0]),b.Index&&(k=+b.Index-1),k<A.s.c&&(A.s.c=k),k>A.e.c&&(A.e.c=k),l[0].slice(-2)==="/>"&&++k,ie=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<A.s.r&&(A.s.r=w),w>A.e.r&&(A.e.r=w),l[0].slice(-2)==="/>"&&(y=pi(l[0]),y.Index&&(w=+y.Index-1)),k=0,++w):(y=pi(l[0]),y.Index&&(w=+y.Index-1),L={},(y.AutoFitHeight=="0"||y.Height)&&(L.hpx=parseInt(y.Height,10),L.hpt=CL(L.hpx),J[w]=L),y.Hidden=="1"&&(L.hidden=!0,J[w]=L));break;case"worksheet":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));m.push(g),A.s.r<=A.e.r&&A.s.c<=A.e.c&&(p["!ref"]=Rr(A),r.sheetRows&&r.sheetRows<=A.e.r&&(p["!fullref"]=p["!ref"],A.e.r=r.sheetRows-1,p["!ref"]=Rr(A))),I.length&&(p["!merges"]=I),re.length>0&&(p["!cols"]=re),J.length>0&&(p["!rows"]=J),f[g]=p}else A={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=k=0,d.push([l[3],!1]),u=pi(l[0]),g=$r(u.Name),p=r.dense?[]:{},I=[],F=[],J=[],ee={name:g,Hidden:0},V.Sheets.push(ee);break;case"table":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;d.push([l[3],!1]),re=[],Q=!1}break;case"style":l[1]==="/"?Ipe(S,_,r):_=pi(l[0]);break;case"numberformat":_.nf=$r(pi(l[0]).Format||"General"),zh[_.nf]&&(_.nf=zh[_.nf]);for(var ce=0;ce!=392&&jr[ce]!=_.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(jr[ce]==null){cc(_.nf,ce);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(oe=pi(l[0]),oe.Hidden&&(oe.hidden=!0,delete oe.Hidden),oe.Width&&(oe.wpx=parseInt(oe.Width,10)),!Q&&oe.wpx>10){Q=!0,as=_L;for(var me=0;me<re.length;++me)re[me]&&du(re[me])}Q&&du(oe),re[oe.Index-1||re.length]=oe;for(var Oe=0;Oe<+oe.Span;++Oe)re[re.length]=Ia(oe);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var G=gr(l[0]),ze={Name:G.Name,Ref:Dd(G.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(ze.Sheet=V.Sheets.length-1),V.Names.push(ze);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=a.slice(C,l.index):C=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;_.Interior=pi(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?yde(B,ge,a.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else d.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Mpe(X),ie.push(X)}else d.push([l[3],!1]),u=pi(l[0]),X={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ye=pi(l[0]);p["!autofilter"]={ref:Dd(Ye.Range).replace(/\$/g,"")},d.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=d.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"null":break;default:if(d.length==0&&l[3]=="document"||d.length==0&&l[3]=="uof")return bI(a,r);var ct=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ct=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ct=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ct=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ct=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(O,l.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else O=l.index+l[0].length;break;case"header":p["!margins"]||qh(p["!margins"]={},"xlml"),isNaN(+gr(l[0]).Margin)||(p["!margins"].header=+gr(l[0]).Margin);break;case"footer":p["!margins"]||qh(p["!margins"]={},"xlml"),isNaN(+gr(l[0]).Margin)||(p["!margins"].footer=+gr(l[0]).Margin);break;case"pagemargins":var We=gr(l[0]);p["!margins"]||qh(p["!margins"]={},"xlml"),isNaN(+We.Top)||(p["!margins"].top=+We.Top),isNaN(+We.Left)||(p["!margins"].left=+We.Left),isNaN(+We.Right)||(p["!margins"].right=+We.Right),isNaN(+We.Bottom)||(p["!margins"].bottom=+We.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ct=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ct=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ct=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ct=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ct=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ct=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ct=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ct=!1}break;case"smarttags":break;default:ct=!1;break}if(ct||l[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Ope(M,ge,U,a.slice(O,l.index)):(U=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+d.join("|")}var Pe={};return!r.bookSheets&&!r.bookProps&&(Pe.Sheets=f),Pe.SheetNames=m,Pe.Workbook=V,Pe.SSF=Ia(jr),Pe.Props=B,Pe.Custprops=M,Pe}function u2(e,t){switch(cS(t=t||{}),t.type||"base64"){case"base64":return hj(Bs(e),t);case"binary":case"buffer":case"file":return hj(e,t);case"array":return hj(Tc(e),t)}}function Rpe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Xce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=Jce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Fpe=[60,1084,2066,2165,2175];function $pe(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var d=_o(r,r.l),u=h2[d],f=0;u!=null&&Fpe.indexOf(d)>-1;)i=_o(r,r.l+2),f=r.l+4,d==2066?f+=4:(d==2165||d==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=h2[d=_o(r,r.l)];var m=ll(o);Ta(m,0);var p=0;m.lens=[];for(var g=0;g<o.length;++g)m.lens.push(p),p+=o[g].length;if(m.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+m.length+" < "+a;return t.f(m,m.length,s)}function Ri(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=jr[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Ic[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=L0(e.v):e.w=bc(e.v):e.w=ai(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&_u(jr[a]||String(a))){var s=sc(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Um(e,t,r){return{v:e,ixfe:t,t:r}}function Lpe(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,d=[],u="",f={},m,p="",g,b,y,v,N={},k=[],w,A,S=[],_=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},I=function(kt){return kt<8?dc[kt]:kt<64&&_[kt-8]||dc[kt]},B=function(kt,Gt,$e){var Ie=Gt.XF.data;if(!(!Ie||!Ie.patternType||!$e||!$e.cellStyles)){Gt.s={},Gt.s.patternType=Ie.patternType;var Et;(Et=q0(I(Ie.icvFore)))&&(Gt.s.fgColor={rgb:Et}),(Et=q0(I(Ie.icvBack)))&&(Gt.s.bgColor={rgb:Et})}},M=function(kt,Gt,$e){if(!(L>1)&&!($e.sheetRows&&kt.r>=$e.sheetRows)){if($e.cellStyles&&Gt.XF&&Gt.XF.data&&B(kt,Gt,$e),delete Gt.ixfe,delete Gt.XF,m=kt,p=br(kt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),kt.r<o.s.r&&(o.s.r=kt.r),kt.c<o.s.c&&(o.s.c=kt.c),kt.r+1>o.e.r&&(o.e.r=kt.r+1),kt.c+1>o.e.c&&(o.e.c=kt.c+1),$e.cellFormula&&Gt.f){for(var Ie=0;Ie<k.length;++Ie)if(!(k[Ie][0].s.c>kt.c||k[Ie][0].s.r>kt.r)&&!(k[Ie][0].e.c<kt.c||k[Ie][0].e.r<kt.r)){Gt.F=Rr(k[Ie][0]),(k[Ie][0].s.c!=kt.c||k[Ie][0].s.r!=kt.r)&&delete Gt.f,Gt.f&&(Gt.f=""+za(k[Ie][1],o,kt,F,O));break}}$e.dense?(s[kt.r]||(s[kt.r]=[]),s[kt.r][kt.c]=Gt):s[p]=Gt}},O={enc:!1,sbcch:0,snames:[],sharedf:N,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var U,ie=[],X=[],re=[],oe=[],Q=!1,F=[];F.SheetNames=O.snames,F.sharedf=O.sharedf,F.arrayf=O.arrayf,F.names=[],F.XTI=[];var J=0,L=0,D=0,Y=[],V=[],ee;O.codepage=1200,_i(1200);for(var ge=!1;e.l<e.length-1;){var ke=e.l,Ce=e.read_shift(2);if(Ce===0&&J===10)break;var ce=e.l===e.length?0:e.read_shift(2),me=h2[Ce];if(me&&me.f){if(t.bookSheets&&J===133&&Ce!==133)break;if(J=Ce,me.r===2||me.r==12){var Oe=e.read_shift(2);if(ce-=2,!O.enc&&Oe!==Ce&&((Oe&255)<<8|Oe>>8)!==Ce)throw new Error("rt mismatch: "+Oe+"!="+Ce);me.r==12&&(e.l+=10,ce-=10)}var G={};if(Ce===10?G=me.f(e,ce,O):G=$pe(Ce,me,e,ce,O),L==0&&[9,521,1033,2057].indexOf(J)===-1)continue;switch(Ce){case 34:r.opts.Date1904=E.WBProps.date1904=G;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=G,!t.password)throw new Error("File is password-protected");if(G.valid==null)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=G;break;case 66:var ze=Number(G);switch(ze){case 21010:ze=1200;break;case 32768:ze=1e4;break;case 32769:ze=1252;break}_i(O.codepage=ze),ge=!0;break;case 317:O.rrtabid=G;break;case 25:O.winlocked=G;break;case 439:r.opts.RefreshAll=G;break;case 12:r.opts.CalcCount=G;break;case 16:r.opts.CalcDelta=G;break;case 17:r.opts.CalcIter=G;break;case 13:r.opts.CalcMode=G;break;case 14:r.opts.CalcPrecision=G;break;case 95:r.opts.CalcSaveRecalc=G;break;case 15:O.CalcRefMode=G;break;case 2211:r.opts.FullCalc=G;break;case 129:G.fDialog&&(s["!type"]="dialog"),G.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),G.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(G);break;case 430:F.push([G]),F[F.length-1].XTI=[];break;case 35:case 547:F[F.length-1].push(G);break;case 24:case 536:ee={Name:G.Name,Ref:za(G.rgce,o,null,F,O)},G.itab>0&&(ee.Sheet=G.itab-1),F.names.push(ee),F[0]||(F[0]=[],F[0].XTI=[]),F[F.length-1].push(G),G.Name=="_xlnm._FilterDatabase"&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&G.rgce[0][0][0]=="PtgArea3d"&&(V[G.itab-1]={ref:Rr(G.rgce[0][0][1][2])});break;case 22:O.ExternCount=G;break;case 23:F.length==0&&(F[0]=[],F[0].XTI=[]),F[F.length-1].XTI=F[F.length-1].XTI.concat(G),F.XTI=F.XTI.concat(G);break;case 2196:if(O.biff<8)break;ee!=null&&(ee.Comment=G[1]);break;case 18:s["!protect"]=G;break;case 19:G!==0&&O.WTF&&console.error("Password verifier: "+G);break;case 133:i[G.pos]=G,O.snames.push(G.name);break;case 10:{if(--L)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=Rr(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ye=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Rr(o),o.e.r=Ye}o.e.r++,o.e.c++}ie.length>0&&(s["!merges"]=ie),X.length>0&&(s["!objects"]=X),re.length>0&&(s["!cols"]=re),oe.length>0&&(s["!rows"]=oe),E.Sheets.push(C)}u===""?f=s:a[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[Ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),O.biffguess=G.BIFFVer==0,G.BIFFVer==0&&G.dt==4096&&(O.biff=5,ge=!0,_i(O.codepage=28591)),O.biff==8&&G.BIFFVer==0&&G.dt==16&&(O.biff=2),L++)break;if(s=t.dense?[]:{},O.biff<8&&!ge&&(ge=!0,_i(O.codepage=t.codepage||1252)),O.biff<5||G.BIFFVer==0&&G.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ct={pos:e.l-ce,name:u};i[ct.pos]=ct,O.snames.push(u)}else u=(i[ke]||{name:""}).name;G.dt==32&&(s["!type"]="chart"),G.dt==64&&(s["!type"]="macro"),ie=[],X=[],O.arrayf=k=[],re=[],oe=[],Q=!1,C={Hidden:(i[ke]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[G.r]||[])[G.c]:s[br({c:G.c,r:G.r})])&&++G.c,w={ixfe:G.ixfe,XF:S[G.ixfe]||{},v:G.val,t:"n"},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t);break;case 5:case 517:w={ixfe:G.ixfe,XF:S[G.ixfe],v:G.val,t:G.t},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t);break;case 638:w={ixfe:G.ixfe,XF:S[G.ixfe],v:G.rknum,t:"n"},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t);break;case 189:for(var We=G.c;We<=G.C;++We){var Pe=G.rkrec[We-G.c][0];w={ixfe:Pe,XF:S[Pe],v:G.rkrec[We-G.c][1],t:"n"},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:We,r:G.r},w,t)}break;case 6:case 518:case 1030:{if(G.val=="String"){l=G;break}if(w=Um(G.val,G.cell.ixfe,G.tt),w.XF=S[w.ixfe],t.cellFormula){var Ne=G.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var tt=Ne[0][0][1][0],He=Ne[0][0][1][1],pt=br({r:tt,c:He});N[pt]?w.f=""+za(G.formula,o,G.cell,F,O):w.F=((t.dense?(s[tt]||[])[He]:s[pt])||{}).F}else w.f=""+za(G.formula,o,G.cell,F,O)}D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M(G.cell,w,t),l=G}break;case 7:case 519:if(l)l.val=G,w=Um(G,l.cell.ixfe,"s"),w.XF=S[w.ixfe],t.cellFormula&&(w.f=""+za(l.formula,o,l.cell,F,O)),D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(G);var Vt=br(G[0].s);if(g=t.dense?(s[G[0].s.r]||[])[G[0].s.c]:s[Vt],t.cellFormula&&g){if(!l||!Vt||!g)break;g.f=""+za(G[1],o,G[0],F,O),g.F=Rr(G[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;N[br(l.cell)]=G[0],g=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[br(l.cell)],(g||{}).f=""+za(G[0],o,m,F,O)}}break;case 253:w=Um(d[G.isst].t,G.ixfe,"s"),d[G.isst].h&&(w.h=d[G.isst].h),w.XF=S[w.ixfe],D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:G.ixfe,XF:S[G.ixfe],t:"z"},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t));break;case 190:if(t.sheetStubs)for(var hr=G.c;hr<=G.C;++hr){var Jt=G.ixfe[hr-G.c];w={ixfe:Jt,XF:S[Jt],t:"z"},D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:hr,r:G.r},w,t)}break;case 214:case 516:case 4:w=Um(G.val,G.ixfe,"s"),w.XF=S[w.ixfe],D>0&&(w.z=Y[w.ixfe>>8&63]),Ri(w,t,r.opts.Date1904),M({c:G.c,r:G.r},w,t);break;case 0:case 512:L===1&&(o=G);break;case 252:d=G;break;case 1054:if(O.biff==4){Y[D++]=G[1];for(var Dr=0;Dr<D+163&&jr[Dr]!=G[1];++Dr);Dr>=163&&cc(G[1],D+163)}else cc(G[1],G[0]);break;case 30:{Y[D++]=G;for(var Hr=0;Hr<D+163&&jr[Hr]!=G;++Hr);Hr>=163&&cc(G,D+163)}break;case 229:ie=ie.concat(G);break;case 93:X[G.cmo[0]]=O.lastobj=G;break;case 438:O.lastobj.TxO=G;break;case 127:O.lastobj.ImData=G;break;case 440:for(v=G[0].s.r;v<=G[0].e.r;++v)for(y=G[0].s.c;y<=G[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[br({c:y,r:v})],g&&(g.l=G[1]);break;case 2048:for(v=G[0].s.r;v<=G[0].e.r;++v)for(y=G[0].s.c;y<=G[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[br({c:y,r:v})],g&&g.l&&(g.l.Tooltip=G[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;g=t.dense?(s[G[0].r]||[])[G[0].c]:s[br(G[0])];var ot=X[G[2]];g||(t.dense?(s[G[0].r]||(s[G[0].r]=[]),g=s[G[0].r][G[0].c]={t:"z"}):g=s[br(G[0])]={t:"z"},o.e.r=Math.max(o.e.r,G[0].r),o.s.r=Math.min(o.s.r,G[0].r),o.e.c=Math.max(o.e.c,G[0].c),o.s.c=Math.min(o.s.c,G[0].c)),g.c||(g.c=[]),b={a:G[1],t:ot.TxO.t},g.c.push(b)}break;case 2173:o0e(S[G.ixfe],G.ext);break;case 125:{if(!O.cellStyles)break;for(;G.e>=G.s;)re[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(G.flags&1)},Q||(Q=!0,aS(G.w/256)),du(re[G.e+1])}break;case 520:{var qt={};G.level!=null&&(oe[G.r]=qt,qt.level=G.level),G.hidden&&(oe[G.r]=qt,qt.hidden=!0),G.hpt&&(oe[G.r]=qt,qt.hpt=G.hpt,qt.hpx=z0(G.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||qh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ce]]=G;break;case 161:s["!margins"]||qh(s["!margins"]={}),s["!margins"].header=G.header,s["!margins"].footer=G.footer;break;case 574:G.RTL&&(E.Views[0].RTL=!0);break;case 146:_=G;break;case 2198:U=G;break;case 140:A=G;break;case 442:u?C.CodeName=G||C.name:E.WBProps.CodeName=G||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+Ce.toString(16)),e.l+=ce}return r.SheetNames=Xi(i).sort(function(Cr,kt){return Number(Cr)-Number(kt)}).map(function(Cr){return i[Cr].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&V.forEach(function(Cr,kt){r.Sheets[r.SheetNames[kt]]["!autofilter"]=Cr}),r.Strings=d,r.SSF=Ia(jr),O.enc&&(r.Encryption=O.enc),U&&(r.Themes=U),r.Metadata={},A!==void 0&&(r.Metadata.Country=A),F.names.length>0&&(E.Names=F.names),r.Workbook=E,r}var pI={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Bpe(e,t,r){var a=Mr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=QP(a,nde,pI.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Mr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=QP(o,ade,pI.SI);for(var d in l)t[d]==null&&(t[d]=l[d])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(cL(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function KL(e,t){t||(t={}),cS(t),w$(),t.codepage&&Uk(t.codepage);var r,a;if(e.FullPaths){if(Mr.find(e,"/encryption"))throw new Error("File is password-protected");r=Mr.find(e,"!CompObj"),a=Mr.find(e,"/Workbook")||Mr.find(e,"/Book")}else{switch(t.type){case"base64":e=Si(Bs(e));break;case"binary":e=Si(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ta(e,0),a={content:e}}var s,i;if(r&&Rpe(r),t.bookProps&&!t.bookSheets)s={};else{var o=Pr?"buffer":"array";if(a&&a.content)s=Lpe(a.content,t);else if((i=Mr.find(e,"PerfectOffice_MAIN"))&&i.content)s=Uh.to_workbook(i.content,(t.type=o,t));else if((i=Mr.find(e,"NativeContent_MAIN"))&&i.content)s=Uh.to_workbook(i.content,(t.type=o,t));else throw(i=Mr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Mr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=S0e(e))}var l={};return e.FullPaths&&Bpe(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}var ug={0:{f:wme},1:{f:Sme},2:{f:Dme},3:{f:Ame},4:{f:Eme},5:{f:Ime},6:{f:Fme},7:{f:Ome},8:{f:Hme},9:{f:Ume},10:{f:Lme},11:{f:Bme},12:{f:_me},13:{f:Mme},14:{f:Tme},15:{f:Cme},16:{f:UL},17:{f:$me},18:{f:Pme},19:{f:Qk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ppe},40:{},42:{},43:{f:Lhe},44:{f:$he},45:{f:Bhe},46:{f:Hhe},47:{f:Uhe},48:{},49:{f:qce},50:{},51:{f:c0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wL},62:{f:Rme},63:{f:m0e},64:{f:Jme},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ja,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Xme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:kme},148:{f:jme,p:16},151:{f:Wme},152:{},153:{f:fpe},154:{},155:{},156:{f:hpe},157:{},158:{},159:{T:1,f:ahe},160:{T:-1},161:{T:1,f:Pc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:qme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:l0e},336:{T:-1},337:{f:d0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:o2},357:{},358:{},359:{},360:{T:1},361:{},362:{f:bL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Kme},427:{f:Vme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Yme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Nme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:zme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:o2},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:j0e},633:{T:1},634:{T:-1},635:{T:1,f:w0e},636:{T:-1},637:{f:Wce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:npe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Qme},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},h2={6:{f:dj},10:{f:rl},12:{f:Yn},13:{f:Yn},14:{f:Ln},15:{f:Ln},16:{f:Ka},17:{f:Ln},18:{f:Ln},19:{f:Yn},20:{f:rI},21:{f:rI},23:{f:bL},24:{f:aI},25:{f:Ln},26:{},27:{},28:{f:vue},29:{},34:{f:Ln},35:{f:nI},38:{f:Ka},39:{f:Ka},40:{f:Ka},41:{f:Ka},42:{f:Ln},43:{f:Ln},47:{f:Nhe},49:{f:eue},51:{f:Yn},60:{},61:{f:Jde},64:{f:Ln},65:{f:Zde},66:{f:Yn},77:{},80:{},81:{},82:{},85:{f:Yn},89:{},90:{},91:{},92:{f:qde},93:{f:wue},94:{},95:{f:Ln},96:{},97:{},99:{f:Ln},125:{f:wL},128:{f:due},129:{f:zde},130:{f:Yn},131:{f:Ln},132:{f:Ln},133:{f:Wde},134:{},140:{f:Eue},141:{f:Yn},144:{},146:{f:Aue},151:{},152:{},153:{},154:{},155:{},156:{f:Yn},157:{},158:{},160:{f:Due},161:{f:Oue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:iue},190:{f:oue},193:{f:rl},197:{},198:{},199:{},200:{},201:{},202:{f:Ln},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Yn},220:{},221:{f:Ln},222:{},224:{f:cue},225:{f:Hde},226:{f:rl},227:{},229:{f:bue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Kde},253:{f:tue},255:{f:Vde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:mL},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ln},353:{f:rl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:hue},431:{f:Ln},432:{},433:{},434:{},437:{},438:{f:kue},439:{f:Ln},440:{f:Sue},441:{},442:{f:cf},443:{},444:{f:Yn},445:{},446:{},448:{f:rl},449:{f:Xde,r:2},450:{f:rl},512:{f:eI},513:{f:Iue},515:{f:uue},516:{f:rue},517:{f:tI},519:{f:Mue},520:{f:Gde},523:{},545:{f:sI},549:{f:ZP},566:{},574:{f:Qde},638:{f:sue},659:{},1048:{},1054:{f:nue},1084:{},1212:{f:gue},2048:{f:_ue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$m},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:rl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Tue,r:12},2173:{f:i0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ln,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:pue,r:12},2197:{},2198:{f:e0e,r:12},2199:{},2200:{},2201:{},2202:{f:xue,r:12},2203:{f:rl},2204:{},2205:{},2206:{},2207:{},2211:{f:Yde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Yn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Pue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Cue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:eI},1:{},2:{f:Lue},3:{f:$ue},4:{f:Fue},5:{f:tI},7:{f:Bue},8:{},9:{f:$m},11:{},22:{f:Yn},30:{f:aue},31:{},32:{},33:{f:sI},36:{},37:{f:ZP},50:{f:Uue},62:{},52:{},67:{},68:{f:Yn},69:{},86:{},126:{},127:{f:Rue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Hue},223:{},234:{},354:{},421:{},518:{f:dj},521:{f:$m},536:{f:aI},547:{f:nI},561:{},579:{},1030:{f:dj},1033:{f:$m},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gi(e,t,r,a){var s=t;if(!isNaN(s)){var i=(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&tL(r)&&e.push(r)}}function gI(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,d=uce(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,m=0,p=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<d.length;++o){var y=d[o].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(v!="<td"&&v!="<th")){var N=y.split(/<\/t[dh]>/i);for(l=0;l<N.length;++l){var k=N[l].trim();if(k.match(/<t[dh]/i)){for(var w=k,A=0;w.charAt(0)=="<"&&(A=w.indexOf(">"))>-1;)w=w.slice(A+1);for(var S=0;S<b.length;++S){var _=b[S];_.s.c==f&&_.s.r<u&&u<=_.e.r&&(f=_.e.c+1,S=-1)}var E=gr(k.slice(0,k.indexOf(">")));p=E.colspan?+E.colspan:1,((m=+E.rowspan)>1||p>1)&&b.push({s:{r:u,c:f},e:{r:u+(m||1)-1,c:f+p-1}});var C=E.t||E["data-t"]||"";if(!w.length){f+=p;continue}if(w=H$(w),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!w.length){f+=p;continue}var I={t:"s",v:w};r.raw||!w.trim().length||C=="s"||(w==="TRUE"?I={t:"b",v:!0}:w==="FALSE"?I={t:"b",v:!1}:isNaN(Ai(w))?isNaN(cu(w).getDate())||(I={t:"d",v:Na(w)},r.cellDates||(I={t:"n",v:ds(I.v)}),I.z=r.dateNF||jr[14]):I={t:"n",v:Ai(w)}),r.dense?(a[u]||(a[u]=[]),a[u][f]=I):a[br({r:u,c:f})]=I,f+=p}}}}return a["!ref"]=Rr(g),b.length&&(a["!merges"]=b),a}function Upe(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,d=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,d=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=br({r,c:o}),m=a.dense?(e[r]||[])[o]:e[f],p=m&&m.v!=null&&(m.h||Vk(m.w||(Ro(m),m.w)||""))||"",g={};l>1&&(g.rowspan=l),d>1&&(g.colspan=d),a.editable?p='<span contenteditable="true">'+p+"</span>":m&&(g["data-t"]=m&&m.t||"z",m.v!=null&&(g["data-v"]=m.v),m.z!=null&&(g["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+m.l.Target+'">'+p+"</a>")),g.id=(a.id||"sjs")+"-"+f,i.push(Ece("td",p,g))}}var b="<tr>";return b+i.join("")+"</tr>"}var Hpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',qpe="</body></html>";function zpe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _l(gI(r[0],t),t);var a=uS();return r.forEach(function(s,i){hS(a,gI(s,t),"Sheet"+(i+1))}),a}function Wpe(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Kpe(e,t){var r=t||{},a=r.header!=null?r.header:Hpe,s=r.footer!=null?r.footer:qpe,i=[a],o=Eu(e["!ref"]);r.dense=Array.isArray(e),i.push(Wpe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(Upe(e,o,l,r));return i.push("</table>"+s),i.join("")}function VL(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?ls(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),d=Math.min(a.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Eu(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var m=[],p=0,g=e["!rows"]||(e["!rows"]=[]),b=0,y=0,v=0,N=0,k=0,w=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&y<d;++b){var A=l[b];if(xI(A)){if(a.display)continue;g[y]={hidden:!0}}var S=A.children;for(v=N=0;v<S.length;++v){var _=S[v];if(!(a.display&&xI(_))){var E=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):H$(_.innerHTML),C=_.getAttribute("data-z")||_.getAttribute("z");for(p=0;p<m.length;++p){var I=m[p];I.s.c==N+i&&I.s.r<y+s&&y+s<=I.e.r&&(N=I.e.c+1-i,p=-1)}w=+_.getAttribute("colspan")||1,((k=+_.getAttribute("rowspan")||1)>1||w>1)&&m.push({s:{r:y+s,c:N+i},e:{r:y+s+(k||1)-1,c:N+i+(w||1)-1}});var B={t:"s",v:E},M=_.getAttribute("data-t")||_.getAttribute("t")||"";E!=null&&(E.length==0?B.t=M||"z":a.raw||E.trim().length==0||M=="s"||(E==="TRUE"?B={t:"b",v:!0}:E==="FALSE"?B={t:"b",v:!1}:isNaN(Ai(E))?isNaN(cu(E).getDate())||(B={t:"d",v:Na(E)},a.cellDates||(B={t:"n",v:ds(B.v)}),B.z=a.dateNF||jr[14]):B={t:"n",v:Ai(E)})),B.z===void 0&&C!=null&&(B.z=C);var O="",U=_.getElementsByTagName("A");if(U&&U.length)for(var ie=0;ie<U.length&&!(U[ie].hasAttribute("href")&&(O=U[ie].getAttribute("href"),O.charAt(0)!="#"));++ie);O&&O.charAt(0)!="#"&&(B.l={Target:O}),a.dense?(e[y+s]||(e[y+s]=[]),e[y+s][N+i]=B):e[br({c:N+i,r:y+s})]=B,u.e.c<N+i&&(u.e.c=N+i),N+=w}}++y}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=Rr(u),y>=d&&(e["!fullref"]=Rr((u.e.r=l.length-b+y-1+s,u))),e}function GL(e,t){var r=t||{},a=r.dense?[]:{};return VL(a,e,t)}function Vpe(e,t){return _l(GL(e,t),t)}function xI(e){var t="",r=Gpe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Gpe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Ype(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=$r(t.replace(/<[^>]*>/g,""));return[r]}var yI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function YL(e,t){var r=t||{},a=Gk(e),s=[],i,o,l={name:""},d="",u=0,f,m,p={},g=[],b=r.dense?[]:{},y,v,N={value:""},k="",w=0,A=[],S=-1,_=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,I={},B=[],M={},O=0,U=0,ie=[],X=1,re=1,oe=[],Q={Names:[]},F={},J=["",""],L=[],D={},Y="",V=0,ee=!1,ge=!1,ke=0;for(U0.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=U0.exec(a);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?b["!ref"]=Rr(E):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(b["!fullref"]=b["!ref"],E.e.r=r.sheetRows-1,b["!ref"]=Rr(E)),B.length&&(b["!merges"]=B),ie.length&&(b["!rows"]=ie),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),p[f.name]=b,ge=!1):y[0].charAt(y[0].length-2)!=="/"&&(f=gr(y[0],!1),S=_=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,b=r.dense?[]:{},B=[],ie=[],ge=!0);break;case"table-row-group":y[1]==="/"?--C:++C;break;case"table-row":case"":if(y[1]==="/"){S+=X,X=1;break}if(m=gr(y[0],!1),m.?S=m.-1:S==-1&&(S=0),X=+m["number-rows-repeated"]||1,X<10)for(ke=0;ke<X;++ke)C>0&&(ie[S+ke]={level:C});_=-1;break;case"covered-table-cell":y[1]!=="/"&&++_,r.sheetStubs&&(r.dense?(b[S]||(b[S]=[]),b[S][_]={t:"z"}):b[br({r:S,c:_})]={t:"z"}),k="",A=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++_,N=gr(y[0],!1),re=parseInt(N["number-columns-repeated"]||"1",10),v={t:"z",v:null},N.formula&&r.cellFormula!=!1&&(v.f=hI($r(N.formula))),(N.||N["value-type"])=="string"&&(v.t="s",v.v=$r(N["string-value"]||""),r.dense?(b[S]||(b[S]=[]),b[S][_]=v):b[br({r:S,c:_})]=v),_+=re-1;else if(y[1]!=="/"){++_,k="",w=0,A=[],re=1;var Ce=X?S+X-1:S;if(_>E.e.c&&(E.e.c=_),_<E.s.c&&(E.s.c=_),S<E.s.r&&(E.s.r=S),Ce>E.e.r&&(E.e.r=Ce),N=gr(y[0],!1),L=[],D={},v={t:N.||N["value-type"],v:null},r.cellFormula)if(N.formula&&(N.formula=$r(N.formula)),N["number-matrix-columns-spanned"]&&N["number-matrix-rows-spanned"]&&(O=parseInt(N["number-matrix-rows-spanned"],10)||0,U=parseInt(N["number-matrix-columns-spanned"],10)||0,M={s:{r:S,c:_},e:{r:S+O-1,c:_+U-1}},v.F=Rr(M),oe.push([M,v.F])),N.formula)v.f=hI(N.formula);else for(ke=0;ke<oe.length;++ke)S>=oe[ke][0].s.r&&S<=oe[ke][0].e.r&&_>=oe[ke][0].s.c&&_<=oe[ke][0].e.c&&(v.F=oe[ke][1]);switch((N["number-columns-spanned"]||N["number-rows-spanned"])&&(O=parseInt(N["number-rows-spanned"],10)||0,U=parseInt(N["number-columns-spanned"],10)||0,M={s:{r:S,c:_},e:{r:S+O-1,c:_+U-1}},B.push(M)),N["number-columns-repeated"]&&(re=parseInt(N["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Sn(N["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(N.value);break;case"percentage":v.t="n",v.v=parseFloat(N.value);break;case"currency":v.t="n",v.v=parseFloat(N.value);break;case"date":v.t="d",v.v=Na(N["date-value"]),r.cellDates||(v.t="n",v.v=ds(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=lce(N["time-value"])/86400,r.cellDates&&(v.t="d",v.v=ux(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(N.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",N["string-value"]!=null&&(k=$r(N["string-value"]),A=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(ee=!1,v.t==="s"&&(v.v=k||"",A.length&&(v.R=A),ee=w==0),F.Target&&(v.l=F),L.length>0&&(v.c=L,L=[]),k&&r.cellText!==!1&&(v.w=k),ee&&(v.t="z",delete v.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ce=0;ce<X;++ce){if(re=parseInt(N["number-columns-repeated"]||"1",10),r.dense)for(b[S+ce]||(b[S+ce]=[]),b[S+ce][_]=ce==0?v:Ia(v);--re>0;)b[S+ce][_+re]=Ia(v);else for(b[br({r:S+ce,c:_})]=v;--re>0;)b[br({r:S+ce,c:_+re})]=Ia(v);E.e.c<=_&&(E.e.c=_)}re=parseInt(N["number-columns-repeated"]||"1",10),_+=re-1,re=0,v={},k="",A=[]}F={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i;D.t=k,A.length&&(D.R=A),D.a=Y,L.push(D)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);Y="",V=0,k="",w=0,A=[];break;case"creator":y[1]==="/"?Y=a.slice(V,y.index):V=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",w=0,A=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(I[l.name]=d,(i=s.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(d="",l=gr(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=gr(y[0],!1),d+=yI[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=gr(y[0],!1),d+=yI[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":d+=a.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":o=gr(y[0],!1),J=uj(o["cell-range-address"]);var me={Name:o.name,Ref:J[0]+"!"+J[1]};ge&&(me.Sheet=g.length),Q.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!N||!N["string-value"])){var Oe=Ype(a.slice(w,y.index));k=(k.length>0?k+`
`:"")+Oe[0]}else gr(y[0],!1),w=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{J=uj(gr(y[0])["target-range-address"]),p[J[0]]["!autofilter"]={ref:J[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(F=gr(y[0],!1),!F.href)break;F.Target=$r(F.href),delete F.href,F.Target.charAt(0)=="#"&&F.Target.indexOf(".")>-1?(J=uj(F.Target.slice(1)),F.Target="#"+J[0]+"!"+J[1]):F.Target.match(/^\.\.[\\\/]/)&&(F.Target=F.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var G={Sheets:p,SheetNames:g,Workbook:Q};return r.bookSheets&&delete G.Sheets,G}function vI(e,t){t=t||{},Zs(e,"META-INF/manifest.xml")&&ude(Gn(e,"META-INF/manifest.xml"),t);var r=Ms(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=YL(gn(r),t);return Zs(e,"meta.xml")&&(a.Props=lL(Gn(e,"meta.xml"))),a}function bI(e,t){return YL(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function oS(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function f2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):gn(Tc(e))}function m2(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function wI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Xpe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function W0(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function fa(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ya(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=W0(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var d=r[0];e[r[0]++]>=128;);l=e.slice(d,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=W0(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function lS(e,t){return e?.map(function(r){return t(r.data)})||[]}function Jpe(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=W0(e,a),i=Ya(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:fa(i[1][0].data),messages:[]};i[2].forEach(function(l){var d=Ya(l.data),u=fa(d[3][0].data);o.messages.push({meta:d,data:e.slice(a[0],a[0]+u)}),a[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=fa(i[3][0].data)>>>0>0),r.push(o)}return r}function Qpe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=W0(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var d=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[m2(s)],d==0)throw new Error("Invalid offset 0");if(d>s[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(s.push(s[0].slice(-d)),u-=d;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-d,-d+u))}}var f=m2(s);if(f.length!=a)throw new Error("Unexpected length: ".concat(f.length," != ").concat(a));return f}function Zpe(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Qpe(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return m2(t)}function ege(e,t,r,a){var s=oS(e),i=s.getUint32(4,!0),o=(a>1?12:8)+wI(i&(a>1?3470:398))*4,l=-1,d=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=wI(i&(a>1?12288:4096))*4,i&16&&(d=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var m;switch(e[2]){case 0:break;case 2:m={t:"n",v:u};break;case 3:m={t:"s",v:t[d]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(l>-1)m={t:"s",v:r[l]};else if(d>-1)m={t:"s",v:t[d]};else if(!isNaN(u))m={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return m}function tge(e,t,r){var a=oS(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,d=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(d=Xpe(e,i),i+=16),s&2&&(u=a.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var m;switch(e[1]){case 0:break;case 2:m={t:"n",v:d};break;case 3:m={t:"s",v:t[l]};break;case 5:m={t:"d",v:f};break;case 6:m={t:"b",v:u>0};break;case 7:m={t:"n",v:u/86400};break;case 8:m={t:"e",v:0};break;case 9:if(o>-1)m={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:m={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return m}function rge(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return ege(e,t,r,e[0]);case 5:return tge(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function xl(e){var t=Ya(e);return W0(t[1][0].data)}function jI(e,t){var r=Ya(t.data),a=fa(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Ya(o.data),d=fa(l[1][0].data)>>>0;switch(a){case 1:i[d]=f2(l[3][0].data);break;case 8:{var u=e[xl(l[9][0].data)][0],f=Ya(u.data),m=e[xl(f[1][0].data)][0],p=fa(m.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=Ya(m.data);i[d]=g[3].map(function(b){return f2(b.data)}).join("")}break}}),i}function nge(e,t){var r,a,s,i,o,l,d,u,f,m,p,g,b,y,v=Ya(e),N=fa(v[1][0].data)>>>0,k=fa(v[2][0].data)>>>0,w=((a=(r=v[8])==null?void 0:r[0])==null?void 0:a.data)&&fa(v[8][0].data)>0||!1,A,S;if((i=(s=v[7])==null?void 0:s[0])!=null&&i.data&&t!=0)A=(l=(o=v[7])==null?void 0:o[0])==null?void 0:l.data,S=(u=(d=v[6])==null?void 0:d[0])==null?void 0:u.data;else if((m=(f=v[4])==null?void 0:f[0])!=null&&m.data&&t!=1)A=(g=(p=v[4])==null?void 0:p[0])==null?void 0:g.data,S=(y=(b=v[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var _=w?4:1,E=oS(A),C=[],I=0;I<A.length/2;++I){var B=E.getUint16(I*2,!0);B<65535&&C.push([I,B])}if(C.length!=k)throw"Expected ".concat(k," cells, found ").concat(C.length);var M=[];for(I=0;I<C.length-1;++I)M[C[I][0]]=S.subarray(C[I][1]*_,C[I+1][1]*_);return C.length>=1&&(M[C[C.length-1][0]]=S.subarray(C[C.length-1][1]*_)),{R:N,cells:M}}function age(e,t){var r,a=Ya(t.data),s=(r=a?.[7])!=null&&r[0]?fa(a[7][0].data)>>>0>0?1:0:-1,i=lS(a[5],function(o){return nge(o,s)});return{nrows:fa(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(d,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=d}),o},[])}}function sge(e,t,r){var a,s=Ya(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(fa(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(fa(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Rr(i);var o=Ya(s[4][0].data),l=jI(e,e[xl(o[4][0].data)][0]),d=(a=o[17])!=null&&a[0]?jI(e,e[xl(o[17][0].data)][0]):[],u=Ya(o[3][0].data),f=0;u[1].forEach(function(m){var p=Ya(m.data),g=e[xl(p[2][0].data)][0],b=fa(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=age(e,g);y.data.forEach(function(v,N){v.forEach(function(k,w){var A=br({r:f+N,c:w}),S=rge(k,l,d);S&&(r[A]=S)})}),f+=y.nrows})}function ige(e,t){var r=Ya(t.data),a={"!ref":"A1"},s=e[xl(r[2][0].data)],i=fa(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return sge(e,s[0],a),a}function oge(e,t){var r,a=Ya(t.data),s={name:(r=a[1])!=null&&r[0]?f2(a[1][0].data):"",sheets:[]},i=lS(a[2],xl);return i.forEach(function(o){e[o].forEach(function(l){var d=fa(l.meta[1][0].data);d==6e3&&s.sheets.push(ige(e,l))})}),s}function lge(e,t){var r=uS(),a=Ya(t.data),s=lS(a[1],xl);if(s.forEach(function(i){e[i].forEach(function(o){var l=fa(o.meta[1][0].data);if(l==2){var d=oge(e,o);d.sheets.forEach(function(u,f){hS(r,u,f==0?d.name:d.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function fj(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=Zpe(d.content)}catch(m){return console.log("?? "+d.content.length+" "+(m.message||m))}var f;try{f=Jpe(u)}catch(m){return console.log("## "+(m.message||m))}f.forEach(function(m){i[m.id]=m.messages,o.push(m.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&fa(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(d){i[d].forEach(function(u){var f=fa(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return lge(i,l)}function cge(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function cS(e){cge([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function dge(e){return Cd.WS.indexOf(e)>-1?"sheet":e==Cd.CS?"chart":e==Cd.DS?"dialog":e==Cd.MS?"macro":e&&e.length?e:"sheet"}function uge(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,dge(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function hge(e,t,r,a,s,i,o,l,d,u,f,m){try{i[a]=Lh(Ms(e,r,!0),t);var p=Gn(e,t),g;switch(l){case"sheet":g=ype(p,t,s,d,i[a],u,f,m);break;case"chart":if(g=vpe(p,t,s,d,i[a],u,f,m),!g||!g["!drawel"])break;var b=Sh(g["!drawel"].Target,t),y=l2(b),v=x0e(Ms(e,b,!0),Lh(Ms(e,y,!0),b)),N=Sh(v,b),k=l2(N);g=tpe(Ms(e,N,!0),N,d,Lh(Ms(e,k,!0),N),u,g);break;case"macro":g=bpe(p,t,s,d,i[a],u,f,m);break;case"dialog":g=wpe(p,t,s,d,i[a],u,f,m);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=g;var w=[];i&&i[a]&&Xi(i[a]).forEach(function(A){var S="";if(i[a][A].Type==Cd.CMNT){S=Sh(i[a][A].Target,t);var _=Spe(Gn(e,S,!0),S,d);if(!_||!_.length)return;oI(g,_,!1)}i[a][A].Type==Cd.TCMNT&&(S=Sh(i[a][A].Target,t),w=w.concat(v0e(Gn(e,S,!0),d)))}),w&&w.length&&oI(g,w,!0,d.people||[])}catch(A){if(d.WTF)throw A}}function Xs(e){return e.charAt(0)=="/"?e.slice(1):e}function fge(e,t){if(I$(),t=t||{},cS(t),Zs(e,"META-INF/manifest.xml")||Zs(e,"objectdata.xml"))return vI(e,t);if(Zs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof fj<"u"){if(e.FileIndex)return fj(e);var r=Mr.utils.cfb_new();return DP(e).forEach(function(ie){mce(r,ie,fce(e,ie))}),fj(r)}throw new Error("Unsupported NUMBERS file")}if(!Zs(e,"[Content_Types].xml"))throw Zs(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zs(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=DP(e),s=cde(Ms(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Gn(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Gn(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!t.bookSheets&&!t.bookProps){if(Hh=[],s.sst)try{Hh=kpe(Gn(e,Xs(s.sst)),s.sst,t)}catch(ie){if(t.WTF)throw ie}t.cellStyles&&s.themes.length&&(d=Npe(Ms(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=jpe(Gn(e,Xs(s.style)),s.style,d,t))}s.links.map(function(ie){try{var X=Lh(Ms(e,l2(Xs(ie))),ie);return Epe(Gn(e,Xs(ie)),X,ie,t)}catch{}});var f=xpe(Gn(e,Xs(s.workbooks[0])),s.workbooks[0],t),m={},p="";s.coreprops.length&&(p=Gn(e,Xs(s.coreprops[0]),!0),p&&(m=lL(p)),s.extprops.length!==0&&(p=Gn(e,Xs(s.extprops[0]),!0),p&&mde(p,m,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Ms(e,Xs(s.custprops[0]),!0),p&&(g=gde(p,t)));var b={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(X){return X.name}):m.Worksheets&&m.SheetNames.length>0&&(o=m.SheetNames),t.bookProps&&(b.Props=m,b.Custprops=g),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var y={};t.bookDeps&&s.calcchain&&(y=_pe(Gn(e,Xs(s.calcchain)),s.calcchain));var v=0,N={},k,w;{var A=f.Sheets;m.Worksheets=A.length,m.SheetNames=[];for(var S=0;S!=A.length;++S)m.SheetNames[S]=A[S].name}var _=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),C=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Zs(e,C)||(C="xl/_rels/workbook."+_+".rels");var I=Lh(Ms(e,C,!0),C.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Cpe(Gn(e,Xs(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=b0e(Gn(e,Xs(s.people[0])),t)),I&&(I=uge(I,f.Sheets));var B=Gn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=m.Worksheets;++v){var M="sheet";if(I&&I[v]?(k="xl/"+I[v][1].replace(/[\/]?xl\//,""),Zs(e,k)||(k=I[v][1]),Zs(e,k)||(k=C.replace(/_rels\/.*$/,"")+I[v][1]),M=I[v][2]):(k="xl/worksheets/sheet"+(v+1-B)+"."+_,k=k.replace(/sheet0\./,"sheet.")),w=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(m.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==v&&(O=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==m.SheetNames[v].toLowerCase()&&(O=1);if(!O)continue e}}hge(e,k,w,m.SheetNames[v],v,N,o,M,t,f,d,u)}return b={Directory:s,Workbook:f,Props:m,Custprops:g,Deps:y,Sheets:o,SheetNames:m.SheetNames,Strings:Hh,Styles:u,Themes:d,SSF:Ia(jr)},t&&t.bookFiles&&(e.files?(b.keys=a,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(ie,X){ie=ie.replace(/^Root Entry[\/]/,""),b.keys.push(ie),b.files[ie]=e.FileIndex[X]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=Gn(e,Xs(s.vba[0]),!0):s.defaults&&s.defaults.bin===k0e&&(b.vbaraw=Gn(e,"xl/vbaProject.bin",!0))),b}function mge(e,t){var r=t||{},a="Workbook",s=Mr.find(e,a);try{if(a="/!DataSpaces/Version",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(ihe(s.content),a="/!DataSpaces/DataSpaceMap",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=lhe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=che(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);uhe(s.content)}catch{}if(a="/EncryptionInfo",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=hhe(s.content);if(a="/EncryptedPackage",s=Mr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function dS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Bs(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function pge(e,t){return Mr.find(e,"EncryptedPackage")?mge(e,t):KL(e,t)}function gge(e,t){var r,a=e,s=t||{};return s.type||(s.type=Pr&&Buffer.isBuffer(e)?"buffer":"base64"),r=L$(a,s),fge(r,s)}function XL(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return u2(e.slice(r),t);default:break e}return H0.to_workbook(e,t)}function xge(e,t){var r="",a=dS(e,t);switch(t.type){case"base64":r=Bs(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=wc(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=gn(r)),t.type="binary",XL(r,t)}function yge(e,t){var r=e;return t.type=="base64"&&(r=Bs(r)),r=$0.utils.decode(1200,r.slice(2),"str"),t.type="binary",XL(r,t)}function vge(e){return e.match(/[^\x00-\x7F]/)?_h(e):e}function mj(e,t,r,a){return a?(r.type="string",H0.to_workbook(e,r)):H0.to_workbook(t,r)}function p2(e,t){w$();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return p2(new Uint8Array(e),(r=Ia(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Md={},r.dateNF&&(Md.dateNF=r.dateNF),r.type||(r.type=Pr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Pr?"buffer":"binary",a=ice(e),typeof Uint8Array<"u"&&!Pr&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=vge(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Ia(r),r.type="array",p2(Hk(a),r)}switch((s=dS(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return pge(Mr.read(a,r),r);break;case 9:if(s[1]<=8)return KL(a,r);break;case 60:return u2(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Vue(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Wue.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?gge(a,r):mj(e,a,r,i);case 239:return s[3]===60?u2(a,r):mj(e,a,r,i);case 255:if(s[1]===254)return yge(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Uh.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Uh.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return iI.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return khe.to_workbook(a,r);break;case 10:case 13:case 32:return xge(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return que.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?iI.to_workbook(a,r):mj(e,a,r,i)}function bge(e,t,r,a,s,i,o,l){var d=Da(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var g=t.s.c;g<=t.e.c;++g){var b=o?e[r][g]:e[a[g]+d];if(b===void 0||b.t===void 0){if(u===void 0)continue;i[g]!=null&&(p[i[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[g]!=null){if(y==null)if(b.t=="e"&&y===null)p[i[g]]=null;else if(u!==void 0)p[i[g]]=u;else if(f&&y===null)p[i[g]]=null;else continue;else p[i[g]]=f&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?y:Ro(b,y,l);y!=null&&(m=!1)}}return{row:p,isempty:m}}function g2(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",d={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?a=1:u.header==="A"?a=2:Array.isArray(u.header)?a=3:u.header==null&&(a=0),typeof f){case"string":d=Mn(f);break;case"number":d=Mn(e["!ref"]),d.s.r=f;break;default:d=f}a>0&&(s=0);var m=Da(d.s.r),p=[],g=[],b=0,y=0,v=Array.isArray(e),N=d.s.r,k=0,w={};v&&!e[N]&&(e[N]=[]);var A=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(k=d.s.c;k<=d.e.c;++k)if(!(A[k]||{}).hidden)switch(p[k]=ha(k),r=v?e[N][k]:e[p[k]+m],a){case 1:i[k]=k-d.s.c;break;case 2:i[k]=p[k];break;case 3:i[k]=u.header[k-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Ro(r,null,u),y=w[o]||0,!y)w[o]=1;else{do l=o+"_"+y++;while(w[l]);w[o]=y,w[l]=1}i[k]=l}for(N=d.s.r+s;N<=d.e.r;++N)if(!(S[N]||{}).hidden){var _=bge(e,d,N,p,a,i,v,u);(_.isempty===!1||(a===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=_.row)}return g.length=b,g}var NI=/"/g;function wge(e,t,r,a,s,i,o,l){for(var d=!0,u=[],f="",m=Da(r),p=t.s.c;p<=t.e.c;++p)if(a[p]){var g=l.dense?(e[r]||[])[p]:e[a[p]+m];if(g==null)f="";else if(g.v!=null){d=!1,f=""+(l.rawNumbers&&g.t=="n"?g.v:Ro(g,null,l));for(var b=0,y=0;b!==f.length;++b)if((y=f.charCodeAt(b))===s||y===i||y===34||l.forceQuotes){f='"'+f.replace(NI,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(d=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(NI,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&d?null:u.join(o)}function JL(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=Mn(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,d=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",m=[];a.dense=Array.isArray(e);for(var p=a.skipHidden&&e["!cols"]||[],g=a.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(m[b]=ha(b));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(f=wge(e,s,v,m,o,d,i,a),f!=null&&(a.strip&&(f=f.replace(u,"")),(f||a.blankrows!==!1)&&r.push((y++?l:"")+f)));return delete a.dense,r.join("")}function jge(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=JL(e,t);return r}function Nge(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=Mn(e["!ref"]),i="",o=[],l,d=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=ha(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=Da(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}d[d.length]=t+"="+a}return d}function QL(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var d=typeof a.origin=="string"?ls(a.origin):a.origin;o=d.r,l=d.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var m=Mn(i["!ref"]);f.e.c=Math.max(f.e.c,m.e.c),f.e.r=Math.max(f.e.r,m.e.r),o==-1&&(o=m.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var p=a.header||[],g=0;t.forEach(function(y,v){Xi(y).forEach(function(N){(g=p.indexOf(N))==-1&&(p[g=p.length]=N);var k=y[N],w="z",A="",S=br({c:l+g,r:o+v+s});u=K0(i,S),k&&typeof k=="object"&&!(k instanceof Date)?i[S]=k:(typeof k=="number"?w="n":typeof k=="boolean"?w="b":typeof k=="string"?w="s":k instanceof Date?(w="d",a.cellDates||(w="n",k=ds(k)),A=a.dateNF||jr[14]):k===null&&a.nullError&&(w="e",k=0),u?(u.t=w,u.v=k,delete u.w,delete u.R,A&&(u.z=A)):i[S]=u={t:w,v:k},A&&(u.z=A))})}),f.e.c=Math.max(f.e.c,l+p.length-1);var b=Da(o);if(s)for(g=0;g<p.length;++g)i[ha(g+l)+b]={t:"s",v:p[g]};return i["!ref"]=Rr(f),i}function kge(e,t){return QL(null,e,t)}function K0(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=ls(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?K0(e,br(t)):K0(e,br({r:t,c:r||0}))}function Sge(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function uS(){return{SheetNames:[],Sheets:{}}}function hS(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(cpe(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function _ge(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=Sge(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function Ege(e,t){return e.z=t,e}function ZL(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Cge(e,t,r){return ZL(e,"#"+t,r)}function Age(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Tge(e,t,r,a){for(var s=typeof t!="string"?t:Mn(t),i=typeof t=="string"?t:Rr(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var d=K0(e,o,l);d.t="n",d.F=i,delete d.v,o==s.s.r&&l==s.s.c&&(d.f=r,a&&(d.D=!0))}return e}var Oge={encode_col:ha,encode_row:Da,encode_cell:br,encode_range:Rr,decode_col:Jk,decode_row:Xk,split_cell:Hce,decode_cell:ls,decode_range:Eu,format_cell:Ro,sheet_add_aoa:nL,sheet_add_json:QL,sheet_add_dom:VL,aoa_to_sheet:Cu,json_to_sheet:kge,table_to_sheet:GL,table_to_book:Vpe,sheet_to_csv:JL,sheet_to_txt:jge,sheet_to_json:g2,sheet_to_html:Kpe,sheet_to_formulae:Nge,sheet_to_row_object_array:g2,sheet_get_cell:K0,book_new:uS,book_append_sheet:hS,book_set_sheet_visibility:_ge,cell_set_number_format:Ege,cell_set_hyperlink:ZL,cell_set_internal_link:Cge,cell_add_comment:Age,sheet_set_array_formula:Tge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Pge={"Chicken Momos":6,"Chicken Cheese Momos":6,"Veg Momos":6,"Paneer Momos":6,"Corn Cheese Momos":6,"Chicken Kurkure Momos":6,"Veg Kurkure Momos":6};function Ige({context:e,selectedStoreId:t}){const[r,a]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(!1),[d,u]=P.useState(new Date().toISOString().split("T")[0]),[f,m]=P.useState("today"),[p,g]=P.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[b,y]=P.useState(new Date().getDay()),[v,N]=P.useState(!1),[k,w]=P.useState(Pge),[A,S]=P.useState(new Set),_=t||e.user?.storeId||null,E=F=>{S(J=>{const L=new Set(J);return L.has(F)?L.delete(F):L.add(F),L})};P.useEffect(()=>{const F=localStorage.getItem("momoPlateConfig");if(F)try{w(JSON.parse(F))}catch(J){console.error("Failed to load plate config:",J)}},[]);const C=(F,J)=>{const L={...k,[F]:J};w(L),localStorage.setItem("momoPlateConfig",JSON.stringify(L))};P.useEffect(()=>{I()},[_]);const I=async()=>{try{i(!0);let J=(await Cg(e.user?.accessToken||"")).data||[];J=J.filter(L=>!!L&&!!L.storeId),_&&(J=J.filter(L=>L.storeId===_)),J.sort((L,D)=>new Date(D.date).getTime()-new Date(L.date).getTime()),a(J)}catch(F){console.error("Error loading sales data:",F),ur.error("Failed to load sales data")}finally{i(!1)}},B=F=>new Promise((J,L)=>{const D=new FileReader;D.onload=Y=>{try{const V=Y.target?.result,ee=p2(V,{type:"binary"}),ge=ee.SheetNames[0],ke=ee.Sheets[ge],Ce=Oge.sheet_to_json(ke),ce=M(Ce);J(ce)}catch(V){L(V)}},D.onerror=()=>L(new Error("Failed to read file")),D.readAsBinaryString(F)}),M=F=>{const J={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};return F.forEach(L=>{const D=String(L.Item||""),Y=Number(L["Total Quantity"]||L["Total Qua"]||0);if(!Y||Y===0||!D)return;const V=D.toLowerCase();if(V.includes("mania")&&V.includes("combo"))return;if(V.includes("platter")){V.includes("non veg")?(J["Chicken Momos"]+=6*Y,J["Chicken Cheese Momos"]+=6*Y):V.includes("veg")&&(J["Paneer Momos"]+=4*Y,J["Veg Momos"]+=4*Y,J["Corn Cheese Momos"]+=4*Y);return}let ee=6;if(V.includes("burger")){let ce=1;const me=D.match(/(\d+)\s*(?:pcs|pieces|piece)/i);me&&(ce=parseInt(me[1])),ee=ce*2}else{const Ce=D.match(/(\d+)\s*(?:pcs|pieces|piece)/i);if(Ce){let ce=parseInt(Ce[1]);const me=D.match(/pack of\s*(\d+)/i);me&&(ce*=parseInt(me[1])),ee=ce}}const ge=Y*ee;if(["drink","cola","campa","water","beverage","soup"].some(Ce=>V.includes(Ce)))return;let ke="Other";V.includes("kurkure")?V.includes("chicken")?ke="Chicken Kurkure Momos":V.includes("veg")&&(ke="Veg Kurkure Momos"):V.includes("paneer")?ke="Paneer Momos":V.includes("corn")&&V.includes("cheese")?ke="Corn Cheese Momos":V.includes("chicken")&&V.includes("cheese")?ke="Chicken Cheese Momos":V.includes("chicken")?ke="Chicken Momos":V.includes("veg")&&(ke="Veg Momos"),ke in J&&(J[ke]+=ge)}),J},O=async F=>{const J=F.target.files?.[0];if(!J)return;if(!J.name.endsWith(".xlsx")&&!J.name.endsWith(".xls")&&!J.name.endsWith(".csv")){ur.error("Please upload an Excel (.xlsx, .xls) or CSV file");return}let L="",D="";const Y=/_(\d{2})_(\d{2})_(\d{4})-\d{2}_\d{2}_\d{4}\./;let V=J.name.match(Y);if(V){const[,ge,ke,Ce]=V;L=`${Ce}-${ke}-${ge}`,D="range format"}else{const ge=/_(\d{2})_(\d{2})_(\d{4})\./;if(V=J.name.match(ge),V){const[,ke,Ce,ce]=V;L=`${ce}-${Ce}-${ke}`,D="single date format"}else{const ke=/(\d{4})-(\d{2})-(\d{2})/;V=J.name.match(ke),V&&(L=V[0],D="ISO date format")}}const ee=L||d;if(L?(console.log(` Extracted date from filename (${D}): ${J.name} -> ${L}`),u(L),ur.success(` Using date from filename: ${L}`,{duration:2e3})):(console.log(` Using manually selected date: ${d}`),ur.info(` Using manually selected date: ${d}`,{duration:2e3})),!ee){ur.error("Please select a date before uploading");return}if(!_){ur.error("Store ID not found");return}try{l(!0),ur.info("Processing file...",{duration:2e3});const ge=await B(J);ur.info("Uploading to server...",{duration:2e3});const ke=e.stores?.find(ce=>ce.id===_)?.name||"Unknown Store",Ce={id:`SALES-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,date:ee,storeId:_,storeName:ke,data:ge,uploadedBy:e.user?.name||"Unknown",uploadedAt:new Date().toISOString()};await m5(Ce,e.user?.accessToken||""),ur.success(` Sales data uploaded for ${ee}!`),await I(),F.target.value=""}catch(ge){console.error("Error uploading file:",ge),ur.error(`Failed to process file: ${ge instanceof Error?ge.message:"Unknown error"}`)}finally{l(!1)}},U=async F=>{if(window.confirm("Are you sure you want to delete this sales record?"))try{await p5(F,e.user?.accessToken||""),ur.success("Sales record deleted"),await I()}catch(J){console.error("Error deleting record:",J),ur.error("Failed to delete record")}},ie=F=>Object.values(F).reduce((J,L)=>J+L,0),X=F=>{const J=["#ef4444","#f97316","#22c55e","#3b82f6","#eab308","#8b5cf6","#06b6d4"];return J[F%J.length]},re=F=>({today:"Today",yesterday:"Yesterday",thisWeek:"This Week",previousWeek:"Previous Week",thisMonth:"This Month",previousMonth:"Previous Month",thisYear:"This Year",lastYear:"Last Year",custom:"Custom"})[F],oe=(F,J)=>{const L=new Date;L.setHours(0,0,0,0);let D,Y;switch(F){case"today":D=new Date(L),Y=new Date(L);break;case"yesterday":D=new Date(L),D.setDate(L.getDate()-1),Y=new Date(D);break;case"thisWeek":D=new Date(L),D.setDate(L.getDate()-L.getDay()),Y=new Date(L);break;case"previousWeek":D=new Date(L),D.setDate(L.getDate()-L.getDay()-7),Y=new Date(D),Y.setDate(D.getDate()+6);break;case"thisMonth":D=new Date(L.getFullYear(),L.getMonth(),1),Y=new Date(L);break;case"previousMonth":D=new Date(L.getFullYear(),L.getMonth()-1,1),Y=new Date(L.getFullYear(),L.getMonth(),0);break;case"thisYear":D=new Date(L.getFullYear(),0,1),Y=new Date(L);break;case"lastYear":D=new Date(L.getFullYear()-1,0,1),Y=new Date(L.getFullYear()-1,11,31);break;case"custom":return{start:J?.from||L.toISOString().split("T")[0],end:J?.to||L.toISOString().split("T")[0]};default:D=new Date(L),Y=new Date(L)}return{start:D.toISOString().split("T")[0],end:Y.toISOString().split("T")[0]}},Q=(F,J)=>{const L=new Date;L.setHours(0,0,0,0);let D,Y;switch(F){case"today":D=new Date(L),D.setDate(L.getDate()-1),Y=new Date(D);break;case"yesterday":D=new Date(L),D.setDate(L.getDate()-2),Y=new Date(D);break;case"thisWeek":D=new Date(L),D.setDate(L.getDate()-L.getDay()-7),Y=new Date(D),Y.setDate(D.getDate()+6);break;case"previousWeek":D=new Date(L),D.setDate(L.getDate()-L.getDay()-14),Y=new Date(D),Y.setDate(D.getDate()+6);break;case"thisMonth":D=new Date(L.getFullYear(),L.getMonth()-1,1),Y=new Date(L.getFullYear(),L.getMonth(),0);break;case"previousMonth":D=new Date(L.getFullYear(),L.getMonth()-2,1),Y=new Date(L.getFullYear(),L.getMonth()-1,0);break;case"thisYear":D=new Date(L.getFullYear()-1,0,1),Y=new Date(L.getFullYear()-1,11,31);break;case"lastYear":D=new Date(L.getFullYear()-2,0,1),Y=new Date(L.getFullYear()-2,11,31);break;case"custom":if(J){const V=new Date(J.from),ee=new Date(J.to),ge=Math.ceil((ee.getTime()-V.getTime())/(1e3*60*60*24)),ke=new Date(V);ke.setDate(V.getDate()-ge-1);const Ce=new Date(V);return Ce.setDate(V.getDate()-1),{start:ke.toISOString().split("T")[0],end:Ce.toISOString().split("T")[0]}}return{start:"",end:""};default:D=new Date(L),D.setDate(L.getDate()-1),Y=new Date(D)}return{start:D.toISOString().split("T")[0],end:Y.toISOString().split("T")[0]}};return s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading sales data..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(Vm,{className:"w-7 h-7 text-purple-600"}),"Daily Sales Data"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload daily sales XLSX files to track momo sales by category"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(bs,{value:d,onChange:u,max:new Date().toISOString().split("T")[0]}),n.jsxs("button",{onClick:()=>N(!v),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105",children:[n.jsx(Bi,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Plate Config"})]}),n.jsxs("label",{className:`px-6 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 cursor-pointer flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 ${o?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx(Zl,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:o?"Uploading...":"Upload XLSX"}),n.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:O,disabled:o,className:"hidden"})]})]})]}),n.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"font-medium mb-1",children:"File Format Requirements:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[n.jsxs("li",{children:["Must contain columns: ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Item"})," and ",n.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"Total Quantity"})]}),n.jsx("li",{children:'Item names should include momo type (e.g., "Chicken Pan-Fried Momos (8 pcs)")'}),n.jsx("li",{children:"Quantity should be the number of plates/items sold"})]})]})]})})]}),v&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Plate Configuration"}),n.jsx("p",{className:"text-sm text-blue-100",children:"Set how many pieces are in each plate for each momo type"})]}),n.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(Nr,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"p-6 space-y-4",children:Object.keys(k).map((F,J)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:X(J)}}),n.jsx("label",{className:"text-gray-900 font-medium",children:F})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:k[F],onChange:L=>C(F,parseInt(L.target.value)||6),className:"w-20 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center font-semibold"}),n.jsx("span",{className:"text-gray-600 text-sm",children:"pieces/plate"})]})]},F))}),n.jsx("div",{className:"p-6 bg-blue-50 border-t-2 border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(or,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"font-medium mb-1",children:"How it works:"}),n.jsxs("p",{children:["This configuration determines how pieces are converted to plates in the display. For example, if Chicken Momos has 6 pieces/plate and you sold 262 pieces, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"262 pcs / 44 plates"}),"."]})]})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-b-2xl flex justify-end",children:n.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Done"})})]})}),r.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(N2,{className:"w-7 h-7 text-teal-600"}),"Sales Trends by Category"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Analyze momo sales patterns across different time periods"})]}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:["today","yesterday","thisWeek","previousWeek","thisMonth","previousMonth","thisYear","lastYear","custom"].map(F=>n.jsx("button",{onClick:()=>m(F),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${f===F?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:re(F)},F))})]}),f==="custom"&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsx(bs,{label:"From Date",value:p.from,onChange:F=>g({...p,from:F})}),n.jsx(bs,{label:"To Date",value:p.to,onChange:F=>g({...p,to:F})})]})}),(()=>{const F=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Corn Cheese Momos","Chicken Kurkure Momos","Veg Kurkure Momos"],J=oe(f,p),L=Q(f,p),D={};F.forEach(V=>D[V]=0),r.forEach(V=>{V.date>=J.start&&V.date<=J.end&&Object.entries(V.data).forEach(([ee,ge])=>{ee in D&&(D[ee]+=ge)})});const Y={};return F.forEach(V=>Y[V]=0),r.forEach(V=>{V.date>=L.start&&V.date<=L.end&&Object.entries(V.data).forEach(([ee,ge])=>{ee in Y&&(Y[ee]+=ge)})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:F.map((V,ee)=>{const ge=D[V]||0,ke=Y[V]||0;let Ce=0;ke>0?Ce=(ge-ke)/ke*100:ge>0&&(Ce=100);const ce=Ce>0,me=Ce<0,Oe=X(ee);return n.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-5 border-2 border-gray-200 hover:shadow-lg transition-all duration-300 hover:scale-102",style:{borderLeftColor:Oe,borderLeftWidth:"4px"},children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:V}),n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Oe}})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-1",children:ge.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500",children:"pieces sold"})]}),ke>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${ce?"bg-green-100":me?"bg-red-100":"bg-gray-100"}`,children:[ce&&n.jsx(BE,{className:"w-3 h-3 text-green-600"}),me&&n.jsx(LE,{className:"w-3 h-3 text-red-600"}),n.jsxs("span",{className:`text-xs font-semibold ${ce?"text-green-700":me?"text-red-700":"text-gray-700"}`,children:[Math.abs(Ce).toFixed(1),"%"]})]}),n.jsx("span",{className:"text-xs text-gray-500",children:"vs previous"})]}),ke===0&&ge>0&&n.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"New sales in this period"}),ke===0&&ge===0&&n.jsx("div",{className:"text-xs text-gray-400",children:"No data for both periods"})]},V)})})})(),n.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const F={"Chicken Momos":0,"Chicken Cheese Momos":0,"Veg Momos":0,"Paneer Momos":0,"Corn Cheese Momos":0,"Chicken Kurkure Momos":0,"Veg Kurkure Momos":0};let J=[...r];if(f==="custom")J=J.filter(Y=>Y.date>=p.from&&Y.date<=p.to);else{const Y=new Date,V=new Date;f==="today"?V.setDate(Y.getDate()):f==="yesterday"?V.setDate(Y.getDate()-1):f==="thisWeek"?V.setDate(Y.getDate()-Y.getDay()):f==="previousWeek"?V.setDate(Y.getDate()-Y.getDay()-7):f==="thisMonth"?(V.setMonth(Y.getMonth()),V.setDate(1)):f==="previousMonth"?(V.setMonth(Y.getMonth()-1),V.setDate(1)):f==="thisYear"?(V.setFullYear(Y.getFullYear()),V.setMonth(0),V.setDate(1)):f==="lastYear"&&(V.setFullYear(Y.getFullYear()-1),V.setMonth(0),V.setDate(1)),J=J.filter(ee=>new Date(ee.date)>=V)}J.forEach(Y=>{Object.entries(Y.data).forEach(([V,ee])=>{F[V]+=ee})});const L=Object.values(F).reduce((Y,V)=>Y+V,0),D=Object.entries(F).sort((Y,V)=>V[1]-Y[1])[0];return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 border-2 border-teal-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Sales"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:L.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Top Category"}),n.jsx("p",{className:"text-lg text-gray-900",style:{fontWeight:"600"},children:D?.[0]?.split(" ")[0]||"N/A"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[D?.[1]?.toLocaleString()||0," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 border-2 border-pink-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Period"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:J.length>0?Math.round(L/J.length).toLocaleString():0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Data Points"}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:J.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"records"})]})]})})()})]}),r.length>0&&(()=>{const F={0:{dayName:"Sunday",counts:{}},1:{dayName:"Monday",counts:{}},2:{dayName:"Tuesday",counts:{}},3:{dayName:"Wednesday",counts:{}},4:{dayName:"Thursday",counts:{}},5:{dayName:"Friday",counts:{}},6:{dayName:"Saturday",counts:{}}},J=["Chicken Momos","Chicken Cheese Momos","Veg Momos","Paneer Momos","Corn Cheese Momos","Chicken Kurkure Momos","Veg Kurkure Momos"];Object.keys(F).forEach(V=>{J.forEach(ee=>{F[V].counts[ee]=[]})}),r.forEach(V=>{const ge=new Date(V.date).getDay().toString();Object.entries(V.data).forEach(([ke,Ce])=>{F[ge].counts[ke]&&F[ge].counts[ke].push(Ce)})});const L=Object.entries(F).map(([V,ee])=>{const ge={day:ee.dayName,dayNum:parseInt(V)};return J.forEach(ke=>{const Ce=ee.counts[ke],ce=Ce.length>0?Math.round(Ce.reduce((me,Oe)=>me+Oe,0)/Ce.length):0;ge[ke]=ce}),ge}),D=L.find(V=>V.dayNum===b);D&&J.map((V,ee)=>({category:V,average:D[V],fill:X(ee)}));const Y=[{num:0,name:"Sun",fullName:"Sunday"},{num:1,name:"Mon",fullName:"Monday"},{num:2,name:"Tue",fullName:"Tuesday"},{num:3,name:"Wed",fullName:"Wednesday"},{num:4,name:"Thu",fullName:"Thursday"},{num:5,name:"Fri",fullName:"Friday"},{num:6,name:"Sat",fullName:"Saturday"}];return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-2 flex items-center gap-3",children:[n.jsx(pn,{className:"w-7 h-7 text-indigo-600"}),"Weekly Pattern Analysis"]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Average momo sales by day of the week across all records"}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:Y.map(V=>n.jsx("button",{onClick:()=>y(V.num),className:`px-4 py-2 rounded-xl text-sm transition-all duration-300 transform hover:scale-105 ${b===V.num?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:V.name},V.num))})]}),(()=>{const V={};J.forEach(ge=>{let ke=0,Ce="";L.forEach(ce=>{ce[ge]>ke&&(ke=ce[ge],Ce=ce.day)}),V[ge]={day:Ce,avg:ke}});const ee=L.find(ge=>ge.dayNum===b);return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:J.map((ge,ke)=>{const Ce=ee?.[ge]||0,ce=V[ge];let me=0;const Oe=ee?.day===ce.day;ce.avg>0&&Ce>0&&(me=(Ce-ce.avg)/ce.avg*100);const G=X(ke);return n.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-5 border-2 border-gray-200 hover:shadow-lg transition-all duration-300 hover:scale-102",style:{borderLeftColor:G,borderLeftWidth:"4px"},children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:ge}),n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:G}})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-1",children:Math.round(Ce).toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-500",children:"avg pieces/day"})]}),Oe?n.jsx("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-yellow-100",children:n.jsx("span",{className:"text-xs font-semibold text-yellow-700",children:" Best day"})}):Ce>0&&ce.avg>0?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${me>=0?"bg-green-100":"bg-red-100"}`,children:[me>=0?n.jsx(BE,{className:"w-3 h-3 text-green-600"}):n.jsx(LE,{className:"w-3 h-3 text-red-600"}),n.jsxs("span",{className:`text-xs font-semibold ${me>=0?"text-green-700":"text-red-700"}`,children:[Math.abs(me).toFixed(1),"%"]})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:["vs ",ce.day.slice(0,3)]})]}),n.jsxs("p",{className:"text-xs text-gray-400",children:["Best: ",Math.round(ce.avg)," on ",ce.day]})]}):n.jsx("div",{className:"text-xs text-gray-400",children:"No sales data"})]},ge)})})})(),n.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{J.forEach(me=>{let Oe=0;L.forEach(G=>{G[me]>Oe&&(Oe=G[me],G.day)})});const V=L.reduce((me,Oe)=>{const G=J.reduce((Ye,ct)=>Ye+(me[ct]||0),0);return J.reduce((Ye,ct)=>Ye+(Oe[ct]||0),0)>G?Oe:me}),ee=J.reduce((me,Oe)=>me+(V[Oe]||0),0),ge=L.reduce((me,Oe)=>{const G=J.reduce((Ye,ct)=>Ye+(me[ct]||0),0);return J.reduce((Ye,ct)=>Ye+(Oe[ct]||0),0)<G?Oe:me}),ke=J.reduce((me,Oe)=>me+(ge[Oe]||0),0),Ce=L.find(me=>me.dayNum===b),ce=Ce?Object.entries(Ce).filter(([me])=>J.includes(me)).sort((me,Oe)=>Oe[1]-me[1])[0]:null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Busiest Day"}),n.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:V.day}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ee.toLocaleString()," pcs avg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border-2 border-orange-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Quietest Day"}),n.jsx("p",{className:"text-xl text-gray-900",style:{fontWeight:"700"},children:ge.day}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ke.toLocaleString()," pcs avg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" Top Seller Today"}),n.jsx("p",{className:"text-base text-gray-900",style:{fontWeight:"600"},children:ce?.[0]||"N/A"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce?`${ce[1].toLocaleString()} pcs avg`:"No data"})]})]})})()})]})})(),r.length===0?n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center border border-gray-100",children:[n.jsx(Vm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Sales Data Yet"}),n.jsx("p",{className:"text-gray-600",children:"Upload your first sales file to get started"})]}):n.jsx("div",{className:"space-y-4",children:r.map((F,J)=>{const L=ie(F.data),D=new Date(F.date),Y=A.has(F.id),V=F.storeName&&F.storeName!=="Unknown Store"?F.storeName:e.stores?.find(ee=>ee.id===F.storeId)?.name||F.storeName||"Unknown Store";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white cursor-pointer",onClick:()=>E(F.id),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Or,{className:"w-5 h-5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:D.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.jsxs("p",{className:"text-sm text-purple-100",children:[V,"  Total: ",L.toLocaleString()," pieces"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:ee=>{ee.stopPropagation(),U(F.id)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Delete record",children:n.jsx(Rs,{className:"w-5 h-5"})}),n.jsx("button",{className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-300",title:Y?"Expand":"Collapse",children:n.jsx("svg",{className:`w-5 h-5 transform transition-transform duration-300 ${Y?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),!Y&&n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(F.data).map(([ee,ge],ke)=>{const Ce=ge||0,ce=L>0?(Ce/L*100).toFixed(1):"0",me=X(ke),Oe=k[ee]||6,G=Math.floor(Ce/Oe);return n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-200 hover:shadow-md transition-all duration-300 hover:scale-105",style:{borderLeftColor:me,borderLeftWidth:"4px"},children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(dr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[ce,"%"]})]}),n.jsx("h4",{className:"text-sm text-gray-600 mb-1",children:ee}),n.jsx("p",{className:"text-2xl text-gray-900",style:{fontWeight:"700"},children:Ce.toLocaleString()}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"pieces"}),n.jsx("span",{className:"text-xs text-gray-400",children:""}),n.jsxs("p",{className:"text-xs text-gray-600 font-semibold",children:[G," plates"]})]})]},ee)})}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("span",{children:["Uploaded by ",F.uploadedBy]}),n.jsx("span",{children:new Date(F.uploadedAt).toLocaleString()})]})]})]},F.id)})})]})}function kI({context:e,selectedStoreId:t,onOpenRecalibration:r,locationType:a}){const s=e.user?.role==="cluster_head",i=e.user?.role==="manager",o=e.user?.designation==="production_incharge",l=e.user?.designation==="store_incharge",d=(s||i)&&!o&&!l,u=d?"pending":"history",[f,m]=P.useState(u),[p,g]=P.useState([]),[b,y]=P.useState([]),[v,N]=P.useState(null),[k,w]=P.useState(!1),[A,S]=P.useState(new Date().toISOString().substring(0,7)),[_,E]=P.useState(null),[C,I]=P.useState(!1),B=s&&!t||s&&a==="production_house"?"all-cluster-locations":t||e.user?.storeId;console.log(" RecalibrationReports - ID Debug:"),console.log("  - selectedStoreId (prop):",t),console.log("  - context.user?.storeId:",e.user?.storeId),console.log("  - effectiveStoreId (computed):",B),console.log("  - locationType:",a),console.log("  - isClusterHead:",s),console.log("  - Production Houses:",e.productionHouses?.map(Q=>({id:Q.id,name:Q.name}))),P.useEffect(()=>{f==="pending"&&d?M():f==="history"?O():f==="wastage"&&U()},[f,A,B,s,i,o,l]);async function M(){try{w(!0);const Q=await A5(e.user?.accessToken||"");g(Q.recalibrations||[])}catch(Q){console.error("Error fetching pending recalibrations:",Q),ur.error("Failed to fetch pending recalibrations")}finally{w(!1)}}async function O(){if(B)try{w(!0),console.log(" Fetching recalibration history:"),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",a),console.log("  - isClusterHead:",s),console.log("  - user.storeId:",e.user?.storeId);const Q=await Qm(e.user?.accessToken||"",B,a);console.log(" History response:",Q),console.log(" History records found:",Q?.history?.length||0),Q?.history?.length>0&&console.log(" Sample record locationIds:",Q.history.slice(0,3).map(F=>F.locationId)),y(Q.history||[])}catch(Q){console.error("Error fetching recalibration history:",Q),ur.error("Failed to fetch recalibration history")}finally{w(!1)}}async function U(){try{w(!0),console.log(" Fetching wastage report:"),console.log("  - month:",A),console.log("  - effectiveStoreId:",B),console.log("  - selectedStoreId:",t),console.log("  - locationType:",a),console.log("  - isClusterHead:",s);const Q=await U5(e.user?.accessToken||"",A,B,a);console.log(" Wastage response:",Q),console.log(" Wastage items found:",Q?.items?.length||0),Q?.items?.length>0&&console.log(" Sample item locationIds:",Q.items.slice(0,3).map(F=>F.locationId)),N(Q)}catch(Q){console.error("Error fetching wastage report:",Q),ur.error("Failed to fetch wastage report")}finally{w(!1)}}async function ie(Q){try{await T5(e.user?.accessToken||"",Q),ur.success("Recalibration approved successfully"),M()}catch(F){console.error("Error approving recalibration:",F),ur.error("Failed to approve recalibration")}}async function X(Q){const F=prompt("Please enter reason for rejection:");if(F)try{await O5(e.user?.accessToken||"",Q,F),ur.success("Recalibration rejected"),M()}catch(J){console.error("Error rejecting recalibration:",J),ur.error("Failed to reject recalibration")}}function re(Q){E(Q),I(!0)}const oe=Q=>new Date(Q).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white flex-1",children:[n.jsx("h2",{className:"text-2xl mb-2",children:"Stock Recalibration Reports"}),n.jsxs("p",{className:"text-purple-100",children:[f==="pending"&&"Review and approve monthly stock recalibrations",f==="history"&&"View historical recalibration records",f==="wastage"&&"Analyze monthly wastage and counting errors"]})]}),r&&f==="history"&&a!=="production_house"&&n.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5"}),"New Recalibration"]})]}),n.jsxs("div",{className:"flex gap-2 bg-white rounded-lg p-2 shadow-sm",children:[d&&n.jsx("button",{onClick:()=>m("pending"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="pending"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pending Approval"}),n.jsx("button",{onClick:()=>m("history"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="history"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"History"}),n.jsx("button",{onClick:()=>m("wastage"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${f==="wastage"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Wastage Report"})]}),f==="wastage"&&n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Month"}),n.jsx("input",{type:"month",value:A,onChange:Q=>S(Q.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"})]}),k?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(wo,{className:"w-12 h-12 text-purple-600 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]}):n.jsxs(n.Fragment,{children:[f==="pending"&&n.jsx("div",{className:"space-y-4",children:p.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(or,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No pending recalibrations"})]}):p.map(Q=>n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200 hover:border-purple-300 transition-all",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:Q.locationName}),n.jsxs("p",{className:"text-sm text-gray-500",children:[oe(Q.date),"  ",Q.locationType==="production_house"?"Production House":"Store"]})]}),n.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:"Pending Approval"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Wastage Items"}),n.jsx("p",{className:"text-xl text-red-700",children:Q.items?.filter(F=>F.adjustmentType==="wastage").length||0})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Counting Errors"}),n.jsx("p",{className:"text-xl text-orange-700",children:Q.items?.filter(F=>F.adjustmentType==="counting_error").length||0})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Total Items"}),n.jsx("p",{className:"text-xl text-blue-700",children:Q.items?.length||0})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>re(Q),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(xo,{className:"w-4 h-4"}),"View Details"]}),n.jsxs("button",{onClick:()=>ie(Q.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[n.jsx(or,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>X(Q.id),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[n.jsx(Qn,{className:"w-4 h-4"}),"Reject"]})]})]},Q.id))}),f==="history"&&n.jsx("div",{className:"space-y-4",children:b.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-12 text-center shadow-sm",children:[n.jsx(Or,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No recalibration history found"})]}):b.map(Q=>n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border-2 border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:Q.locationName}),n.jsx("p",{className:"text-sm text-gray-500",children:oe(Q.date)})]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${Q.status==="approved"?"bg-green-100 text-green-700":Q.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:Q.status?.charAt(0).toUpperCase()+Q.status?.slice(1)||"Pending"})]}),n.jsxs("button",{onClick:()=>re(Q),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[n.jsx(xo,{className:"w-4 h-4"}),"View Details"]})]},Q.id))}),f==="wastage"&&n.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:!v||v.items?.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(uc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"No wastage data for selected month"})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Wastage"}),n.jsx("p",{className:"text-2xl",children:v.summary?.totalWastage||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Counting Errors"}),n.jsx("p",{className:"text-2xl",children:v.summary?.totalCountingErrors||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"items"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Recalibrations"}),n.jsx("p",{className:"text-2xl",children:v.summary?.totalRecalibrations||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"this month"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Locations"}),n.jsx("p",{className:"text-2xl",children:v.summary?.uniqueLocations||0}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"stores/houses"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Wastage & Error Details"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item Name"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Location"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),n.jsx("tbody",{children:v.items?.map((Q,F)=>n.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[n.jsx("td",{className:"p-3 text-sm text-gray-900",children:Q.itemName}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.locationName}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.systemQuantity," ",Q.unit]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.actualQuantity," ",Q.unit]}),n.jsxs("td",{className:`p-3 text-sm text-center ${Q.difference<0?"text-red-600":"text-green-600"}`,children:[Q.difference>0?"+":"",Q.difference]}),n.jsx("td",{className:"p-3 text-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Q.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:Q.adjustmentType==="wastage"?"Wastage":"Counting Error"})}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.notes||"-"})]},F))})]})})]})]})})]}),C&&_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white",children:[n.jsx("h3",{className:"text-xl mb-1",children:_.locationName}),n.jsxs("p",{className:"text-purple-100 text-sm",children:[oe(_.date),"  ",_.locationType==="production_house"?"Production House":"Store"]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Item"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"System Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Actual Qty"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Difference"}),n.jsx("th",{className:"text-center p-3 text-sm text-gray-700",children:"Type"}),n.jsx("th",{className:"text-left p-3 text-sm text-gray-700",children:"Notes"})]})}),n.jsx("tbody",{children:_.items?.map((Q,F)=>n.jsxs("tr",{className:"border-b border-gray-200",children:[n.jsxs("td",{className:"p-3 text-sm text-gray-900",children:[Q.itemName,n.jsx("span",{className:"text-xs text-gray-500 block",children:Q.category})]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.systemQuantity," ",Q.unit]}),n.jsxs("td",{className:"p-3 text-sm text-center text-gray-900",children:[Q.actualQuantity," ",Q.unit]}),n.jsxs("td",{className:`p-3 text-sm text-center ${Q.difference<0?"text-red-600":Q.difference>0?"text-green-600":"text-gray-600"}`,children:[Q.difference>0?"+":"",Q.difference]}),n.jsx("td",{className:"p-3 text-center",children:Q.adjustmentType?n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Q.adjustmentType==="wastage"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:Q.adjustmentType==="wastage"?"Wastage":"Counting Error"}):n.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),n.jsx("td",{className:"p-3 text-sm text-gray-600",children:Q.notes||"-"})]},F))})]})})}),n.jsx("div",{className:"p-6 border-t border-gray-200",children:n.jsx("button",{onClick:()=>I(!1),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}const Dge=localStorage.getItem("DEBUG_MODE")==="true",Fi=Dge,_s={info:"",debug:"",warn:"",error:"",success:"",api:"",db:"",user:"",store:"",production:"",inventory:"",sales:"",analytics:""};class Mge{info(t,...r){console.log(`${_s.info} ${t}`,...r)}success(t,...r){console.log(`${_s.success} ${t}`,...r)}warn(t,...r){console.warn(`${_s.warn} ${t}`,...r)}error(t,r,...a){console.error(`${_s.error} ${t}`,r,...a)}debug(t,...r){Fi&&console.log(`${_s.debug} ${t}`,...r)}debugUser(t,...r){Fi&&console.log(`${_s.user} ${t}`,...r)}debugStore(t,...r){Fi&&console.log(`${_s.store} ${t}`,...r)}debugProduction(t,...r){Fi&&console.log(`${_s.production} ${t}`,...r)}debugInventory(t,...r){Fi&&console.log(`${_s.inventory} ${t}`,...r)}debugSales(t,...r){Fi&&console.log(`${_s.sales} ${t}`,...r)}debugAnalytics(t,...r){Fi&&console.log(`${_s.analytics} ${t}`,...r)}debugApi(t,...r){Fi&&console.log(`${_s.api} ${t}`,...r)}debugDb(t,...r){Fi&&console.log(`${_s.db} ${t}`,...r)}enableDebug(){localStorage.setItem("DEBUG_MODE","true"),console.log(" Debug mode enabled. Refresh the page to see debug logs.")}disableDebug(){localStorage.removeItem("DEBUG_MODE"),console.log(" Debug mode disabled. Refresh the page.")}isDebugEnabled(){return Fi}}const en=new Mge;typeof window<"u"&&(window.logger=en);function Rge(e,t){if(e.length===0)return"";const r=Object.keys(e[0]),a=r.join(","),s=e.map(i=>r.map(o=>{let l=i[o];return typeof l=="object"&&l!==null&&(l=JSON.stringify(l)),typeof l=="string"&&(l=l.replace(/"/g,'""'),(l.includes(",")||l.includes(`
`)||l.includes('"'))&&(l=`"${l}"`)),l??""}).join(","));return[a,...s].join(`
`)}function px(e,t,r){const a=Rge(t),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(s);i.setAttribute("href",o),i.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}function Fge(e,t){const r=JSON.stringify(t,null,2),a=new Blob([r],{type:"application/json;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(a);s.setAttribute("href",i),s.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.json`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function $ge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A","Cash Amount":a.cashAmount||0,"Paytm Amount":a.paytmAmount||0,"Online Sales":a.onlineSales||0,"Total Revenue":(a.cashAmount||0)+(a.paytmAmount||0)+(a.onlineSales||0),"Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));px("sales_report",r)}function Lge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A",Category:a.category,Item:a.itemName,Quantity:a.quantity,Unit:a.unit||"N/A","Unit Cost":a.unitCost||0,"Total Cost":a.totalCost||0,Vendor:a.vendor||"N/A","Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));px("inventory_report",r)}function Bge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A",Category:a.category,Description:a.description||"N/A",Amount:a.amount,"Payment Mode":a.paymentMode||"N/A","Created By":a.createdBy||"N/A","Created At":a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}));px("overhead_report",r)}function Uge(e,t){const r=e.map(a=>({Date:a.date,Store:a.storeName||t||"N/A","Approval Status":a.approvalStatus||"pending","Chicken Momos":a.chickenMomos?.final||0,"Chicken Cheese Momos":a.chickenCheeseMomos?.final||0,"Veg Momos":a.vegMomos?.final||0,"Cheese Corn Momos":a.cheeseCornMomos?.final||0,"Paneer Momos":a.paneerMomos?.final||0,"Veg Kurkure Momos":a.vegKurkureMomos?.final||0,"Chicken Kurkure Momos":a.chickenKurkureMomos?.final||0,"Total Production":(a.chickenMomos?.final||0)+(a.chickenCheeseMomos?.final||0)+(a.vegMomos?.final||0)+(a.cheeseCornMomos?.final||0)+(a.paneerMomos?.final||0)+(a.vegKurkureMomos?.final||0)+(a.chickenKurkureMomos?.final||0),"Dough Wastage":a.wastage?.dough||0,"Stuffing Wastage":a.wastage?.stuffing||0,"Batter Wastage":a.wastage?.batter||0,"Coating Wastage":a.wastage?.coating||0,"Total Wastage":(a.wastage?.dough||0)+(a.wastage?.stuffing||0)+(a.wastage?.batter||0)+(a.wastage?.coating||0),"Created By":a.createdBy||"N/A","Approved By":a.approvedBy||"N/A"}));px("production_report",r)}function Hge(e){const t={generatedAt:new Date().toISOString(),storeName:e.storeName||"All Stores",dateRange:e.dateRange,summary:{totalRevenue:e.metrics.totalRevenue,totalExpenses:e.metrics.totalExpenses,netProfit:e.metrics.netProfit,profitMargin:e.metrics.profitMargin,salesRecords:e.salesData.length,inventoryRecords:e.inventoryData.length,overheadRecords:e.overheadData.length,productionRecords:e.productionData?.length||0},salesData:e.salesData,inventoryData:e.inventoryData,overheadData:e.overheadData,productionData:e.productionData||[]};Fge("analytics_report",t)}function qge(e){e.salesData.length>0&&$ge(e.salesData,e.storeName),e.inventoryData.length>0&&setTimeout(()=>Lge(e.inventoryData,e.storeName),100),e.overheadData.length>0&&setTimeout(()=>Bge(e.overheadData,e.storeName),200),e.productionData&&e.productionData.length>0&&setTimeout(()=>Uge(e.productionData,e.storeName),300)}function zge({category:e,items:t,totalAmount:r,onClose:a}){const s=Object.values(t.reduce((l,d)=>{const u=d.itemName||d.description||"Unknown",f=d.unitPrice||d.amount||0,m=d.quantity||1,p=d.totalCost||d.totalPrice||d.amount||0;l[u]||(l[u]={itemName:u,totalSpent:0,quantity:0,avgUnitPrice:0,firstUnitPrice:f,lastUnitPrice:f,priceChange:0,priceChangePercent:0,transactionCount:0,firstDate:d.date,lastDate:d.date});const g=l[u];return g.totalSpent+=p,g.quantity+=m,g.transactionCount+=1,d.date<g.firstDate&&(g.firstDate=d.date,g.firstUnitPrice=f),d.date>g.lastDate&&(g.lastDate=d.date,g.lastUnitPrice=f),l},{})).map(l=>{const d=l.quantity>0?l.totalSpent/l.quantity:0,u=l.lastUnitPrice-l.firstUnitPrice,f=l.firstUnitPrice>0?u/l.firstUnitPrice*100:0;return{itemName:l.itemName,totalSpent:l.totalSpent,quantity:l.quantity,avgUnitPrice:d,firstUnitPrice:l.firstUnitPrice,lastUnitPrice:l.lastUnitPrice,priceChange:u,priceChangePercent:f,transactionCount:l.transactionCount}}),i=[...s].sort((l,d)=>d.totalSpent-l.totalSpent),o=[...s].filter(l=>l.transactionCount>1&&Math.abs(l.priceChangePercent)>.1).sort((l,d)=>Math.abs(d.priceChangePercent)-Math.abs(l.priceChangePercent));return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(N2,{className:"w-7 h-7"}),e," Breakdown"]}),n.jsxs("p",{className:"text-purple-100 mt-1",children:["Total Spent: ",r.toFixed(2),"  ",t.length," transactions  ",i.length," unique items"]})]}),n.jsx("button",{onClick:a,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:n.jsx(qr,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-6 border-2 border-blue-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-blue-600"}),"Top Items by Spend"]}),n.jsx("div",{className:"space-y-3",children:i.slice(0,10).map((l,d)=>{const u=l.totalSpent/r*100;return n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-blue-600 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:d+1}),n.jsx("span",{className:"font-medium text-gray-900",children:l.itemName})]}),n.jsxs("div",{className:"text-sm text-gray-600 mt-1 ml-8",children:[l.quantity.toFixed(2)," units  ",l.avgUnitPrice.toFixed(2),"/unit avg"]})]}),n.jsxs("div",{className:"text-right ml-4",children:[n.jsxs("div",{className:"font-bold text-gray-900",children:["",l.totalSpent.toFixed(2)]}),n.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[u.toFixed(1),"%"]})]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full",style:{width:`${u}%`}})})})]},`top-${l.itemName}-${d}`)})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-6 border-2 border-orange-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(pn,{className:"w-5 h-5 text-orange-600"}),"Biggest Price Fluctuations"]}),o.length===0?n.jsxs("div",{className:"bg-white rounded-lg p-8 text-center text-gray-500",children:[n.jsx(uc,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{children:"No significant price changes detected"}),n.jsx("p",{className:"text-sm mt-1",children:"Items need multiple purchases to show fluctuations"})]}):n.jsx("div",{className:"space-y-3",children:o.slice(0,10).map((l,d)=>{const u=l.priceChange>0;return n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:l.itemName}),n.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[l.transactionCount," purchases tracked"]})]}),n.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold ${u?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[u?n.jsx(pn,{className:"w-4 h-4"}):n.jsx(uc,{className:"w-4 h-4"}),u?"+":"",l.priceChangePercent.toFixed(1),"%"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3 text-sm",children:[n.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Initial Price"}),n.jsxs("div",{className:"font-semibold text-gray-900",children:["",l.firstUnitPrice.toFixed(2)]})]}),n.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Latest Price"}),n.jsxs("div",{className:"font-semibold text-gray-900",children:["",l.lastUnitPrice.toFixed(2)]})]})]}),n.jsxs("div",{className:`mt-2 text-xs font-medium ${u?"text-red-600":"text-green-600"}`,children:[u?"Increased":"Decreased"," by ",Math.abs(l.priceChange).toFixed(2),"/unit"]})]},`fluc-${l.itemName}-${d}`)})})]})]}),n.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border-2 border-purple-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(jn,{className:"w-5 h-5 text-purple-600"}),"Summary Statistics"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Transactions"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Avg per Item"}),n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.length>0?`${(r/i.length).toFixed(0)}`:"0"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Price Volatility"}),n.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[o.length,n.jsx("span",{className:"text-sm text-gray-600 font-normal ml-1",children:"items"})]})]})]})]})]})]})})}const Hm=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",a.value.toLocaleString()]})]},s))]}):null,Wge=({active:e,payload:t})=>{if(e&&t&&t.length){const r=t[0];return n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r.payload.fill}}),n.jsx("p",{className:"text-gray-900",style:{fontSize:"14px",fontWeight:"600"},children:r.name})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Amount:"}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:["",r.value.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx("span",{className:"text-gray-600",style:{fontSize:"13px"},children:"Percentage:"}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[r.payload.percentage,"%"]})]})]})]})}return null},Kge=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[a.value.toLocaleString()," pcs"]})]},s))]}):null,Vge=({active:e,payload:t,label:r})=>e&&t&&t.length?n.jsxs("div",{className:"bg-white px-4 py-3 rounded-xl shadow-lg border-2 border-gray-100",children:[n.jsx("p",{className:"text-gray-900 mb-2",style:{fontSize:"14px",fontWeight:"600"},children:r}),t.map((a,s)=>n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),n.jsxs("span",{className:"text-gray-700",style:{fontSize:"13px",fontWeight:"500"},children:[a.name,":"]}),n.jsxs("span",{className:"text-gray-900",style:{fontSize:"13px",fontWeight:"700"},children:[a.value.toFixed(2)," kg"]})]},s))]}):null;function x2({context:e,selectedStoreId:t,highlightRequestId:r,onNavigateToManageItems:a}){const[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!1);P.useEffect(()=>{(async()=>{if(e.user?.accessToken){u(!0);try{const[Se,be]=await Promise.all([Sg(e.user.accessToken),_g(e.user.accessToken)]);i(Se||[]),l(be||[])}catch(Se){console.error("Error loading online sales/payout data:",Se)}finally{u(!1)}}})()},[e.user?.accessToken]);const f=K=>K.category==="service_charge"&&K.description?.includes("Aggregator Commission")||K.category==="commission",m=e.user?.role==="cluster_head",p=e.user?.role==="manager",g=e.user?.role==="audit",b=e.user?.designation==="production_incharge",y=e.user?.designation==="store_incharge",[v,N]=P.useState(b?"production":"store"),[k,w]=P.useState(t||(m||p||b||g?null:e.user?.storeId)||null),A=v==="store"?k:null;en.debugStore("Analytics effectiveStoreId:",A),en.debugStore("Analytics mode:",v),console.log(" Local selected store ID:",k),console.log(" All stores in context:",e.stores),console.log(" Number of stores:",e.stores?.length);const[S,_]=P.useState(r?"production-requests":"profit"),[E,C]=P.useState(null);P.useEffect(()=>{en.debugAnalytics("activeView changed to:",S)},[S]),P.useEffect(()=>{v==="production"&&S!=="production"&&S!=="recalibration-reports"&&S!=="production-requests"?_("production"):(S==="production"||S==="recalibration-reports"||S==="production-requests")&&v==="store"?_("profit"):S==="store-recalibration"&&v==="production"&&_("production")},[v]);const[I,B]=P.useState("revenue"),[M,O]=P.useState("thisMonth"),[U,ie]=P.useState("thisMonth"),X=()=>{const K=new Date,Se=K.getFullYear(),be=String(K.getMonth()+1).padStart(2,"0"),he=String(K.getDate()).padStart(2,"0");return{from:`${Se}-${be}-01`,to:`${Se}-${be}-${he}`}},[re,oe]=P.useState(X()),[Q,F]=P.useState(0),[J,L]=P.useState([]),[D,Y]=P.useState(!1),[V,ee]=P.useState(!0),[ge,ke]=P.useState([]),[Ce,ce]=P.useState([]),[me,Oe]=P.useState(!1),[G,ze]=P.useState([]),[Ye,ct]=P.useState(null),[We,Pe]=P.useState(null),[Ne,tt]=P.useState({chickenMomos:{dough:25,stuffing:15},chickenCheeseMomos:{dough:25,stuffing:18},vegMomos:{dough:25,stuffing:12},cheeseCornMomos:{dough:25,stuffing:16},paneerMomos:{dough:25,stuffing:14},vegKurkure:{dough:28,stuffing:12,batter:10,coating:5},chickenKurkure:{dough:28,stuffing:15,batter:10,coating:5}}),[He,pt]=P.useState(!1),[Vt,hr]=P.useState(null),[Jt,Dr]=P.useState(5),[Hr,ot]=P.useState(5),[qt,Cr]=P.useState({chicken:{high:1200,medium:600,low:300},chickenCheese:{high:600,medium:300,low:150},veg:{high:600,medium:300,low:150},cheeseCorn:{high:600,medium:300,low:150},paneer:{high:600,medium:300,low:150},vegKurkure:{high:400,medium:200,low:100},chickenKurkure:{high:400,medium:200,low:100}}),[kt,Gt]=P.useState(!1),[$e,Ie]=P.useState({}),[Et,Be]=P.useState(()=>{const K=localStorage.getItem("momosPerPlate");return K?parseInt(K,10):6}),[_t,St]=P.useState(!1),[mt,Qt]=P.useState(6),[Tt,Zt]=P.useState(b&&e.user?.storeId||null),xn=e.salesData,bt=e.inventory,tn=e.overheads,Rn=e.fixedCosts,Bt=e.productionData,[Ut,yn]=P.useState(()=>{const K=Bt.map(Se=>Se.date).filter((Se,be,he)=>he.indexOf(Se)===be).sort((Se,be)=>be.localeCompare(Se));return K.length>0?K[0]:Bn()}),[rn,kr]=P.useState(()=>{const K=Bt.filter(Se=>Se.approvalStatus==="approved").map(Se=>Se.date).filter((Se,be,he)=>he.indexOf(Se)===be).sort((Se,be)=>be.localeCompare(Se));return K.length>0?K[0]:Bn()}),[we,nt]=P.useState("month"),[it,jt]=P.useState(""),[gt,H]=P.useState(""),se=()=>{const K=new Date;K.setHours(0,0,0,0);const Se=ve=>{const je=ve.getFullYear(),pe=String(ve.getMonth()+1).padStart(2,"0"),Le=String(ve.getDate()).padStart(2,"0");return`${je}-${pe}-${Le}`};let be,he;switch(we){case"today":be=new Date(K),he=new Date(K);break;case"week":be=new Date(K);const ve=be.getDay(),je=ve===0?-6:1-ve;be.setDate(be.getDate()+je),he=new Date(be),he.setDate(be.getDate()+6);break;case"month":be=new Date(K.getFullYear(),K.getMonth(),1),he=new Date(K.getFullYear(),K.getMonth()+1,0);break;case"year":be=new Date(K.getFullYear(),0,1),he=new Date(K.getFullYear(),11,31);break;case"custom":it&&gt?(be=new Date(it+"T00:00:00"),he=new Date(gt+"T00:00:00")):(be=new Date(K),he=new Date(K));break;default:be=new Date(K),he=new Date(K)}return{startDate:Se(be),endDate:Se(he)}};P.useEffect(()=>{const K=Tt,Se=Bt.filter(be=>{if(!K)return!0;const he=be.storeId===K,ve=be.productionHouseId===K,je=be.productionHouseId||be.storeId;return he||ve||je===K}).map(be=>be.date).filter((be,he,ve)=>ve.indexOf(be)===he).sort((be,he)=>he.localeCompare(be));Se.length>0?yn(Se[0]):yn(Bn())},[Tt,Bt]),P.useEffect(()=>{console.log(" Carry-Forward useEffect triggered:",{analyticsMode:v,selectedProductionHouseId:Tt,hasProductionData:!!e.productionData?.length,hasProductionRequests:!!e.productionRequests?.length}),v==="production"&&Tt?(console.log(" Conditions met - fetching opening balance..."),ne()):console.log(" Conditions not met for carry-forward")},[Tt,v,e.productionData,e.productionRequests]),P.useEffect(()=>{if((m||p||g)&&v==="production"&&!Tt&&e.productionHouses&&e.productionHouses.length>0){const K=e.productionHouses[0];console.log(" Auto-selecting first production house for Cluster Head/Manager:",K.id,K.name),Zt(K.id)}},[v,m,p,e.productionHouses]);async function ne(){try{const K=new Date().toISOString().substring(0,7);console.log(" Starting opening balance calculation:"),console.log("   Current month:",K),console.log("   Selected production house ID:",Tt),console.log("   Available production data records:",Bt.length),console.log("   Available production requests:",e.productionRequests?.length||0),console.log("   Available stores (local):",G.length);const Se=G.length>0?G:e.stores||[];let be=Tt;if(Tt&&Tt.startsWith("STORE-")){const pe=Se.find(Le=>Le.id===Tt);pe?.productionHouseId&&(be=pe.productionHouseId,console.log("   Resolved production house UUID:",be))}if(!be){console.log("    No production house UUID available, skipping recalibration fetch"),ct(null),Pe(null);return}let he=await Mj(e.user?.accessToken||"",be,"production_house");if(!he?.record&&be){console.log("   No recalibration found with UUID, checking with mapped store ID...");const pe=Se.filter(Le=>Le.productionHouseId===be);if(console.log("   Stores mapped to this production house:",pe.map(Le=>({id:Le.id,name:Le.name}))),pe&&pe.length>0)for(const Le of pe){console.log("   Trying to fetch recalibration with store ID:",Le.id);const Xe=await Mj(e.user?.accessToken||"",Le.id,"production_house");if(Xe?.record){console.log("    Found recalibration using store ID:",Le.id),he=Xe;break}}}console.log(" Recalibration Response:",he);let ve=null,je=null;if(he?.record){const pe=he.record.date.substring(0,7),Le=parseInt(he.record.date.substring(8,10));console.log(" Recalibration date comparison:",{recalDate:pe,recalDay:Le,currentMonth:K,isFirstOfMonth:Le===1,match:pe===K}),pe===K?Le===1?(console.log(" Recalibration on 1st of month - using as opening balance (RESET)"),console.log("   Recalibration items:",he.record.items),ve={},he.record.items.forEach(Xe=>{const at=e.inventoryItems?.find(et=>et.id===Xe.itemId||et.name===Xe.itemId);if(at){const rr=at.name.replace(/_([a-z])/g,sr=>sr[1].toUpperCase()).replace(/Momo(s)?$/i,"");ve[rr]=Xe.actualQuantity,console.log(`   Opening balance (1st of month): ${Xe.itemId} -> ${rr} = ${Xe.actualQuantity}`)}else ve[Xe.itemId]=Xe.actualQuantity,console.log(`   Opening balance item not found in inventory: ${Xe.itemId}, using as-is`)}),console.log("   Parsed opening balance:",ve)):(console.log(" Mid-month recalibration detected - keeping opening balance from previous month"),console.log(`   Recalibration date: ${he.record.date} (day ${Le})`),ve=q(be),je={},he.record.items.forEach(Xe=>{const at=e.inventoryItems?.find(et=>et.id===Xe.itemId||et.name===Xe.itemId);if(at){const rr=at.name.replace(/_([a-z])/g,sr=>sr[1].toUpperCase()).replace(/Momo(s)?$/i,"");je[rr]=Xe.actualQuantity,console.log(`   Mid-month stock override: ${Xe.itemId} -> ${rr} = ${Xe.actualQuantity}`)}else je[Xe.itemId]=Xe.actualQuantity}),console.log("   Mid-month recalibration stock:",je),console.log("   Opening balance (from previous month):",ve)):(console.log(" Recalibration from previous month, calculating forward..."),ve=Z(he.record,K))}else console.log(" No recalibration found, calculating from previous month..."),ve=q(be);ct(he?.record||null),Pe(ve),je?(window.__midMonthRecalibration=je,console.log(" Stored mid-month recalibration for stock override:",je)):delete window.__midMonthRecalibration,console.log(" Opening Balance Calculated:",ve)}catch(K){console.error("Error fetching recalibration:",K)}}function Z(K,Se){const be=K.date.substring(0,7),he={};K.items.forEach(Le=>{const Xe=e.inventoryItems?.find(at=>at.id===Le.itemId||at.name===Le.itemId);if(Xe){const et=Xe.name.replace(/_([a-z])/g,rr=>rr[1].toUpperCase()).replace(/Momo(s)?$/i,"");he[et]=Le.actualQuantity,console.log(`   Recalibration item mapping: ${Le.itemId} -> ${et} = ${Le.actualQuantity}`)}else he[Le.itemId]=Le.actualQuantity,console.log(`   Recalibration item not found in inventory: ${Le.itemId}, using as-is`)});const ve=new Date(be+"-01"),je=new Date(Se+"-01");let pe=new Date(ve);for(pe.setMonth(pe.getMonth()+1);pe<je;){const Le=pe.toISOString().substring(0,7),Xe=W(Tt,Le),at=ae(Tt,Le);["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(et=>{he[et]=(he[et]||0)+(Xe[et]||0)-(at[et]||0)}),pe.setMonth(pe.getMonth()+1)}return he}function q(K){const Se=new Date().toISOString().substring(0,7),[be,he]=Se.split("-").map(Number);let ve=be,je=he-1;je===0&&(je=12,ve=be-1);const pe=`${ve}-${String(je).padStart(2,"0")}`;console.log(" Calculating previous month closing stock for:",pe),console.log("   Current month:",Se," Previous month:",pe);const Le=W(K,pe),Xe=ae(K,pe),at={};return["chicken","chickenCheese","veg","cheeseCorn","paneer","vegKurkure","chickenKurkure"].forEach(et=>{at[et]=(Le[et]||0)-(Xe[et]||0)}),console.log("  Previous month production:",Le),console.log("  Previous month deliveries:",Xe),console.log("  Calculated closing stock:",at),at}function W(K,Se){if(!K)return console.log(" getMonthProduction called with null phId"),{};console.log(` Getting production for phId: ${K}, month: ${Se}`),console.log(`   Total production records available: ${Bt.length}`);const be=Bt.filter(he=>{if(!he.date.startsWith(Se))return!1;const ve=he.storeId===K,je=he.productionHouseId===K;let pe=he.productionHouseId;(!pe||pe.startsWith("STORE-"))&&he.storeId&&(pe=(G.length>0?G:e.stores||[]).find(et=>et.id===he.storeId)?.productionHouseId||null);const Le=pe||he.storeId;return ve||je||Le===K});return console.log(`   Filtered production records: ${be.length}`),be.reduce((he,ve)=>({chicken:he.chicken+(ve.chickenMomos?.final||0),chickenCheese:he.chickenCheese+(ve.chickenCheeseMomos?.final||0),veg:he.veg+(ve.vegMomos?.final||0),cheeseCorn:he.cheeseCorn+(ve.cheeseCornMomos?.final||0),paneer:he.paneer+(ve.paneerMomos?.final||0),vegKurkure:he.vegKurkure+(ve.vegKurkureMomos?.final||0),chickenKurkure:he.chickenKurkure+(ve.chickenKurkureMomos?.final||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}function ae(K,Se){if(!K)return console.log(" getMonthDeliveries called with null phId"),{};console.log(` Getting deliveries for phId: ${K}, month: ${Se}`),console.log(`   Total production requests available: ${e.productionRequests?.length||0}`);const be=G.length>0?G:e.stores||[];let he=K;if(K&&K.startsWith("STORE-")){const je=be.find(pe=>pe.id===K);je?.productionHouseId&&(he=je.productionHouseId,console.log(`   Resolved UUID: ${he}`))}const ve=(e.productionRequests||[]).filter(je=>{if(je.status!=="delivered")return!1;const pe=je.deliveredDate||je.requestDate||je.createdAt;return!pe||!pe.startsWith(Se)?!1:be.find(Xe=>Xe.id===je.storeId)?.productionHouseId===he});return console.log(`   Filtered delivered requests: ${ve.length}`),ve.reduce((je,pe)=>({chicken:je.chicken+(pe.chickenMomos||0),chickenCheese:je.chickenCheese+(pe.chickenCheeseMomos||0),veg:je.veg+(pe.vegMomos||0),cheeseCorn:je.cheeseCorn+(pe.cheeseCornMomos||0),paneer:je.paneer+(pe.paneerMomos||0),vegKurkure:je.vegKurkure+(pe.vegKurkureMomos||0),chickenKurkure:je.chickenKurkure+(pe.chickenKurkureMomos||0)}),{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}en.isDebugEnabled()&&(en.debugAnalytics("Production Data Debug:"),en.debugAnalytics("  - Total production records:",Bt.length),en.debugAnalytics("  - Production data records:",Bt.map(K=>({id:K.id,date:K.date,storeId:K.storeId,productionHouseId:K.productionHouseId,approvalStatus:K.approvalStatus,chickenMomos:K.chickenMomos?.final||0,totalProduction:(K.chickenMomos?.final||0)+(K.vegMomos?.final||0)+(K.chickenCheeseMomos?.final||0)+(K.cheeseCornMomos?.final||0)+(K.paneerMomos?.final||0)+(K.vegKurkureMomos?.final||0)+(K.chickenKurkureMomos?.final||0)}))),en.debugAnalytics("  - Selected production house ID:",Tt),en.debugAnalytics("  - Analytics mode:",v),en.debugAnalytics("  - User storeId:",e.user?.storeId),en.debugAnalytics("  - User designation:",e.user?.designation),en.debugAnalytics("  - Is Production Incharge:",b),en.debugAnalytics("  - Available production houses:",e.productionHouses.map(K=>({id:K.id,name:K.name}))),en.debugAnalytics("  - Available stores:",e.stores?.map(K=>({id:K.id,name:K.name,productionHouseId:K.productionHouseId}))),en.debugAnalytics("  - Production Incharge Specific:"),en.debugAnalytics("     - User storeId (should be production house ID):",e.user?.storeId),en.debugAnalytics("     - Does user storeId match any production house?",e.productionHouses.find(K=>K.id===e.user?.storeId)),en.debugAnalytics("     - Production data storeIds:",[...new Set(Bt.map(K=>K.storeId))]),en.debugAnalytics("     - Production data productionHouseIds:",[...new Set(Bt.map(K=>K.productionHouseId))]),en.debugAnalytics("     - Stores that map to user production house:",e.stores?.filter(K=>K.productionHouseId===e.user?.storeId).map(K=>({id:K.id,name:K.name}))));const de=(K,Se="date")=>{const be=new Date,he=new Date(be.getFullYear(),be.getMonth(),be.getDate());return K.filter(ve=>{const je=new Date(ve[Se]),pe=new Date(je.getFullYear(),je.getMonth(),je.getDate());switch(M){case"today":return pe.getTime()===he.getTime();case"yesterday":const Le=new Date(he);return Le.setDate(Le.getDate()-1),pe.getTime()===Le.getTime();case"thisWeek":const Xe=new Date(he),at=he.getDay(),et=at===0?-6:1-at;return Xe.setDate(he.getDate()+et),pe>=Xe&&pe<=he;case"thisMonth":const rr=new Date(he.getFullYear(),he.getMonth(),1);return pe>=rr&&pe<=he;case"lastWeek":const sr=new Date(he),At=he.getDay(),er=At===0?-13:-(At+6);sr.setDate(he.getDate()+er);const Sr=new Date(sr);return Sr.setDate(sr.getDate()+6),pe>=sr&&pe<=Sr;case"lastMonth":const Ar=new Date(he.getFullYear(),he.getMonth()-1,1),Xr=new Date(he.getFullYear(),he.getMonth(),0);return pe>=Ar&&pe<=Xr;case"custom":const Fn=new Date(re.from),zn=new Date(re.to);return pe>=Fn&&pe<=zn;default:return!0}})},z=de(xn),le=de(bt),fe=de(tn),De=de(Rn);console.log(" Before time filtering - payoutsData:",ge.length,"payouts"),console.log(" Payouts before filtering:",ge.map(K=>({id:K.id,date:K.date,amount:K.amount}))),console.log(" Sample payout object:",ge[0]),console.log(" All payout dates as strings:",ge.map(K=>K.date).join(", "));const Ve=de(ge,"date");console.log(" After time filtering - timeFilteredPayoutsData:",Ve.length,"payouts"),console.log(" Time filter:",M),console.log(" Current date for reference:",new Date().toISOString());const Qe=P.useMemo(()=>{en.debugSales("=== SALES DATA FILTERING ==="),en.debugSales("Total sales records (time-filtered):",z.length),en.debugSales("effectiveStoreId:",A),console.log("User role:",e.user?.role),console.log("All sales storeIds:",z.map(he=>he.storeId)),console.log("User storeId:",e.user?.storeId);const K=z.filter(he=>{const ve=new Date(he.date);return ve.getDate()===28&&ve.getMonth()===11});if(console.log("December 28th sales found:",K.length),K.forEach(he=>{console.log(`  - Date: ${he.date}, StoreId: ${he.storeId}, Revenue: ${(he.paytmAmount||0)+(he.cashAmount||0)+(he.onlineSales||0)}`)}),!A)return console.log("No store filter - returning all",z.length,"sales"),z;const Se=z.filter(he=>he.storeId===A);console.log("After store filtering (exact match only):",Se.length,"sales"),console.log("Filtered sales details:",Se.map(he=>({date:he.date,storeId:he.storeId,total:(he.offlineSales||0)+(he.onlineSales||0)})));const be=z.filter(he=>he.storeId!==A);return console.log("Filtered out (all non-matching storeIds):",be.length,"sales"),be.length>0&&console.log("Sample filtered out sales storeIds:",be.slice(0,5).map(he=>he.storeId)),console.log(" === END DEBUG ==="),Se},[z,A]),Ke=P.useMemo(()=>{console.log(" === INVENTORY DATA FILTERING DEBUG ==="),console.log("Total inventory records (time-filtered):",le.length),console.log("effectiveStoreId:",A);const K=le.filter(be=>{const he=new Date(be.date);return he.getDate()===28&&he.getMonth()===11});if(console.log("December 28th inventory found:",K.length),K.forEach(be=>{console.log(`  - Date: ${be.date}, StoreId: ${be.storeId}, Cost: ${be.totalCost||0}`)}),!A)return console.log("No store filter - returning all",le.length,"inventory items"),le;const Se=le.filter(be=>be.storeId===A);return console.log("After store filtering (exact match only):",Se.length,"inventory items"),console.log(" === END INVENTORY DEBUG ==="),Se},[le,A]),Ge=P.useMemo(()=>{console.log(" === OVERHEAD DATA FILTERING DEBUG ==="),console.log("Total overhead records (time-filtered):",fe.length),console.log("effectiveStoreId:",A);const K=fe.filter(be=>{const he=new Date(be.date);return he.getDate()===28&&he.getMonth()===11});if(console.log("December 28th overhead found:",K.length),K.forEach(be=>{console.log(`  - Date: ${be.date}, StoreId: ${be.storeId}, Amount: ${be.amount||0}`)}),!A)return console.log("No store filter - returning all",fe.length,"overhead items"),fe;const Se=fe.filter(be=>be.storeId===A);return console.log("After store filtering (exact match only):",Se.length,"overhead items"),console.log("Filtered overhead storeIds:",Se.map(be=>({date:be.date,storeId:be.storeId,amount:be.amount}))),console.log(" === END OVERHEAD DEBUG ==="),Se},[fe,A]),Ct=P.useMemo(()=>A?De.filter(K=>K.storeId===A):De,[De,A]),Yt=P.useMemo(()=>A?Ce.filter(K=>K.storeId===A):Ce,[Ce,A]),Xt=P.useMemo(()=>{let K=Ve;if(A){const Se=Yt.map(be=>be.id);K=K.filter(be=>Se.includes(be.employeeId))}return K},[Ve,Yt,A]);P.useEffect(()=>{(async()=>{try{console.log(" === LOADING PAYOUTS AND EMPLOYEES ===");const[Se,be]=await Promise.all([fc(),yl()]);console.log(" Raw payouts from API:",Se),console.log(" Number of payouts:",Se?.length||0),console.log(" Payout dates:",Se?.map(he=>({id:he.id,date:he.payoutDate,amount:he.amount}))),console.log(" Number of employees:",be?.length||0),ke(Se||[]),ce(be||[]),console.log(" === END LOADING PAYOUTS AND EMPLOYEES ===")}catch(Se){console.error(" Error loading payouts and employees:",Se),ke([]),ce([])}})()},[]),P.useEffect(()=>{(async()=>{if(console.log(" Store Loading Check:",{isClusterHead:m,analyticsMode:v,shouldLoad:m||v==="production"}),!(!m&&v!=="production"))try{const Se=await fu();ze(Se),console.log(" Loaded stores for analytics:",Se.length,"stores"),console.log(" Store details:",Se.map(be=>({id:be.id,name:be.name,productionHouseId:be.productionHouseId})))}catch(Se){console.error(" Error loading stores:",Se)}})()},[m,v]);const wr=async()=>{try{const K=hu(),{data:{session:Se}}=await K.auth.getSession();return Se?.access_token||null}catch(K){return console.error("Error getting fresh token:",K),null}};P.useEffect(()=>{(async()=>{if(e.user)try{ee(!0);const Se=await wr();if(!Se){console.error("No valid access token available");return}const be=Bn();if(e.user.role==="cluster_head"){const ve=(await s5(Se)).filter(Le=>Le.leaveDate===be&&Le.status==="approved"),je=await ti(Se),pe=new Map(je.map(Le=>[Le.employeeId,Le]));if(e.user.storeId){const Le=je.filter(et=>et.storeId===e.user.storeId||et.storeId===null||et.storeId===void 0).map(et=>et.employeeId),Xe=ve.filter(et=>Le.includes(et.employeeId)),at=Xe.map(et=>({...et,employeeName:pe.get(et.employeeId)?.name||"Unknown",storeId:pe.get(et.employeeId)?.storeId||"N/A",storeName:pe.get(et.employeeId)?.storeName||"N/A"}));F(Xe.length),L(at)}else{const Le=ve.map(Xe=>({...Xe,employeeName:pe.get(Xe.employeeId)?.name||"Unknown",storeId:pe.get(Xe.employeeId)?.storeId||"N/A",storeName:pe.get(Xe.employeeId)?.storeName||"N/A"}));F(ve.length),L(Le)}}else if(e.user.role==="manager"&&e.user.employeeId){const he=await hc(e.user.employeeId,Se),ve=new Map(he.map(pe=>[pe.employeeId,pe]));let je=[];for(const pe of he){const at=(await mu(pe.employeeId,Se)).filter(et=>et.leaveDate===be&&et.status==="approved").map(et=>({...et,employeeName:ve.get(et.employeeId)?.name||"Unknown",storeId:ve.get(et.employeeId)?.storeId||"N/A",storeName:ve.get(et.employeeId)?.storeName||"N/A"}));je.push(...at)}F(je.length),L(je)}else F(0),L([])}catch(Se){console.error("Error loading today's leaves:",Se),F(0)}finally{ee(!1)}})()},[e.user]),P.useEffect(()=>{console.log(" Analytics - highlightRequestId changed:",r),r&&(console.log(" Analytics - Switching to production-requests tab"),_("production-requests"))},[r]);const nn=()=>{switch(M){case"today":return"Today";case"yesterday":return"Yesterday";case"thisWeek":return"This week";case"thisMonth":return"This month";case"lastWeek":return"Last week";case"lastMonth":return"Last month";case"custom":return`${re.from} to ${re.to}`;default:return"Current period"}},ln=()=>{console.log(" === METRICS CALCULATION DEBUG ==="),console.log("Time filter:",M),console.log("Filtered sales data count:",Qe.length),console.log("Filtered inventory data count:",Ke.length),console.log("Filtered overhead data count:",Ge.length),console.log("Filtered fixed costs data count:",Ct.length);const K=Qe.reduce((Nt,rt)=>Nt+(rt.paytmAmount||0)+(rt.cashAmount||0)+(rt.onlineSales||0),0);console.log("Total revenue calculated:",K);const Se=Qe.reduce((Nt,rt)=>Nt+(rt.onlineSales||0),0),be=Qe.reduce((Nt,rt)=>Nt+(rt.paytmAmount||0)+(rt.cashAmount||0),0),he=Ke.reduce((Nt,rt)=>Nt+(rt.totalCost||0),0);console.log("Inventory expenses:",he);const ve=Ge.filter(Nt=>!f(Nt)).reduce((Nt,rt)=>Nt+(rt.amount||0),0);console.log(" DEBUG COMMISSION - Calculating from online sales/payout data");const je=s.filter(Nt=>{const rt=(()=>{switch(M){case"today":return Nt.date===Bn();case"yesterday":const Pt=new Date;return Pt.setDate(Pt.getDate()-1),Nt.date===Pt.toISOString().split("T")[0];case"thisWeek":const _r=new Date,zt=new Date(_r);return zt.setDate(_r.getDate()-_r.getDay()),new Date(Nt.date)>=zt&&new Date(Nt.date)<=_r;case"lastWeek":const fr=new Date;fr.setDate(fr.getDate()-fr.getDay()-1);const cn=new Date(fr);return cn.setDate(fr.getDate()-6),new Date(Nt.date)>=cn&&new Date(Nt.date)<=fr;case"thisMonth":const Jr=new Date().toISOString().slice(0,7);return Nt.date.startsWith(Jr);case"lastMonth":const Qr=new Date;Qr.setMonth(Qr.getMonth()-1);const Zr=Qr.toISOString().slice(0,7);return Nt.date.startsWith(Zr);case"custom":return Nt.date>=re.from&&Nt.date<=re.to;default:return!0}})(),Te=A?Nt.storeId===A:!0;return rt&&Te}),pe=o.filter(Nt=>{const rt=(()=>{switch(M){case"today":return Nt.date===Bn();case"yesterday":const Pt=new Date;return Pt.setDate(Pt.getDate()-1),Nt.date===Pt.toISOString().split("T")[0];case"thisWeek":const _r=new Date,zt=new Date(_r);return zt.setDate(_r.getDate()-_r.getDay()),new Date(Nt.date)>=zt&&new Date(Nt.date)<=_r;case"lastWeek":const fr=new Date;fr.setDate(fr.getDate()-fr.getDay()-1);const cn=new Date(fr);return cn.setDate(fr.getDate()-6),new Date(Nt.date)>=cn&&new Date(Nt.date)<=fr;case"thisMonth":const Jr=new Date().toISOString().slice(0,7);return Nt.date.startsWith(Jr);case"lastMonth":const Qr=new Date;Qr.setMonth(Qr.getMonth()-1);const Zr=Qr.toISOString().slice(0,7);return Nt.date.startsWith(Zr);case"custom":return Nt.date>=re.from&&Nt.date<=re.to;default:return!0}})(),Te=A?Nt.storeId===A:!0;return rt&&Te}),Le=je.reduce((Nt,rt)=>Nt+(rt.swiggySales||0)+(rt.zomatoSales||0),0),Xe=pe.reduce((Nt,rt)=>Nt+(rt.swiggyPayout||0)+(rt.zomatoPayout||0),0),at=Le-Xe;console.log(" DEBUG COMMISSION - Filtered online sales:",je.length),console.log(" DEBUG COMMISSION - Filtered online payouts:",pe.length),console.log(" DEBUG COMMISSION - Total online sales:",Le),console.log(" DEBUG COMMISSION - Total online payouts:",Xe),console.log(" DEBUG COMMISSION - Commission expenses:",at);const et=Ct.filter(Nt=>Nt.category==="electricity").reduce((Nt,rt)=>Nt+(rt.amount||0),0),rr=Ct.filter(Nt=>Nt.category==="rent").reduce((Nt,rt)=>Nt+(rt.amount||0),0);console.log(" === CONTRACT WORKER SALARY DEBUG ==="),console.log("Total filteredSalesData:",Qe.length);const sr=Qe.filter(Nt=>(Nt.employeeSalary||0)>0);console.log("Sales with employee salary:",sr.length),console.log("Sales with salary data:",sr.map(Nt=>({date:Nt.date,salary:Nt.employeeSalary})));const At=Qe.reduce((Nt,rt)=>Nt+(rt.employeeSalary||0),0);console.log("Total contract worker expenses:",At),console.log(" === END CONTRACT WORKER SALARY DEBUG ===");let er=0;if(console.log(" === PERMANENT EMPLOYEE SALARY DEBUG ==="),console.log("Time filter:",M),console.log("Total filteredPayoutsData:",Xt.length),console.log("Payouts data:",Xt),console.log("Filtered employees:",Yt.length),M==="thisMonth"||M==="lastMonth"||M==="custom"){let Nt=Xt;if(A){const rt=Yt.map(Te=>Te.id);Nt=Nt.filter(Te=>rt.includes(Te.employeeId)),console.log("Store filtered payouts:",Nt.length)}console.log("Relevant payouts for calculation:",Nt),er=Nt.reduce((rt,Te)=>{const Pt=Yt.find(_r=>_r.id===Te.employeeId);return console.log("Processing payout:",Te.id,"employeeId:",Te.employeeId,"amount:",Te.amount,"employee found:",Pt?`${Pt.name} (${Pt.type})`:"NOT FOUND"),Pt&&Pt.type==="fulltime"?(console.log("   Including permanent employee payout:",Te.amount),rt+(Te.amount||0)):(console.log("   Skipping (not fulltime or employee not found)"),rt)},0),console.log("Total permanent employee expenses calculated:",er)}else console.log("Skipping permanent employee calculation - time filter is:",M);console.log(" === END PERMANENT EMPLOYEE SALARY DEBUG ===");const Sr=At+er,Ar=et+rr+Sr,Xr=he+ve+Ar+at,Fn=K-Xr,zn=K>0?Fn/K*100:0;return console.log("Total expenses:",Xr),console.log("Commission expenses:",at),console.log("Net profit:",Fn),console.log(" === END METRICS DEBUG ==="),{totalRevenue:K,onlineRevenue:Se,offlineRevenue:be,commissionExpenses:at,totalExpenses:Xr,inventoryExpenses:he,overheadExpenses:ve,fixedCostsTotal:Ar,electricityExpenses:et,rentExpenses:rr,salaryExpenses:Sr,contractWorkerExpenses:At,permanentEmployeeExpenses:er,netProfit:Fn,profitMargin:zn}},Ze=P.useMemo(()=>ln(),[Qe,Ke,Ge,Ct,Xt,M]),Lr=()=>{const K={};return Qe.forEach(Se=>{const he=new Date(Se.date).toLocaleString("default",{month:"short"});K[he]||(K[he]={month:he,revenue:0,expenses:0,profit:0});const ve=(Se.paytmAmount||0)+(Se.cashAmount||0)+(Se.onlineSales||0);K[he].revenue+=ve}),Ke.forEach(Se=>{const he=new Date(Se.date).toLocaleString("default",{month:"short"});K[he]||(K[he]={month:he,revenue:0,expenses:0,profit:0}),K[he].expenses+=Se.totalCost||0}),Ge.forEach(Se=>{const he=new Date(Se.date).toLocaleString("default",{month:"short"});K[he]||(K[he]={month:he,revenue:0,expenses:0,profit:0}),K[he].expenses+=Se.amount||0}),Object.keys(K).forEach(Se=>{K[Se].profit=K[Se].revenue-K[Se].expenses}),Object.values(K)};P.useMemo(()=>Lr(),[Qe,Ke,Ge]);const ue=()=>{const K=new Date,Se=new Date(K.getFullYear(),K.getMonth(),K.getDate()),be=[],he=ve=>{const je=ve.toISOString().split("T")[0],pe=ve.toLocaleDateString("default",{month:"short",day:"numeric"}),Le=Qe.filter(rr=>rr.date===je),Xe=Le.reduce((rr,sr)=>rr+(sr.onlineSales||0),0),at=Le.reduce((rr,sr)=>rr+(sr.paytmAmount||0)+(sr.cashAmount||0),0),et=Xe+at;be.push({period:pe,online:Xe,offline:at,total:et})};if(M==="today")he(Se);else if(M==="yesterday"){const ve=new Date(Se);ve.setDate(ve.getDate()-1),he(ve)}else if(M==="thisWeek"){const ve=Se.getDay(),je=ve===0?-6:1-ve,pe=new Date(Se);pe.setDate(Se.getDate()+je);let Le=new Date(pe);for(;Le<=Se;)he(new Date(Le)),Le.setDate(Le.getDate()+1)}else if(M==="thisMonth"){const ve=new Date(Se.getFullYear(),Se.getMonth(),1);let je=new Date(ve);for(;je<=Se;)he(new Date(je)),je.setDate(je.getDate()+1)}else if(M==="lastWeek"){const ve=Se.getDay(),je=ve===0?-13:-(ve+6),pe=new Date(Se);pe.setDate(Se.getDate()+je);let Le=new Date(pe);for(let Xe=0;Xe<7;Xe++)he(new Date(Le)),Le.setDate(Le.getDate()+1)}else if(M==="lastMonth"){const ve=new Date(Se.getFullYear(),Se.getMonth()-1,1),je=new Date(Se.getFullYear(),Se.getMonth(),0);let pe=new Date(ve);for(;pe<=je;)he(new Date(pe)),pe.setDate(pe.getDate()+1)}else if(M==="custom"){const ve={};return Qe.forEach(je=>{const Le=new Date(je.date).toLocaleDateString("default",{month:"short",year:"2-digit"});ve[Le]||(ve[Le]={period:Le,online:0,offline:0,total:0});const Xe=je.onlineSales||0,at=(je.paytmAmount||0)+(je.cashAmount||0);ve[Le].online+=Xe,ve[Le].offline+=at,ve[Le].total+=Xe+at}),Object.values(ve)}return be},Ee=P.useMemo(()=>ue(),[Qe,M]),Re=()=>{const K={};console.log(" === CHART DATA PREPARATION DEBUG ==="),Qe.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0});const pe=(ve.paytmAmount||0)+(ve.cashAmount||0)+(ve.onlineSales||0);K[je].revenue+=pe,K[je].expenses+=ve.employeeSalary||0});const Se=s.filter(ve=>{const je=(()=>{switch(M){case"today":return ve.date===Bn();case"yesterday":const Le=new Date;return Le.setDate(Le.getDate()-1),ve.date===Le.toISOString().split("T")[0];case"thisWeek":const Xe=new Date,at=new Date(Xe);return at.setDate(Xe.getDate()-Xe.getDay()),new Date(ve.date)>=at&&new Date(ve.date)<=Xe;case"lastWeek":const et=new Date;et.setDate(et.getDate()-et.getDay()-1);const rr=new Date(et);return rr.setDate(et.getDate()-6),new Date(ve.date)>=rr&&new Date(ve.date)<=et;case"thisMonth":const sr=new Date().toISOString().slice(0,7);return ve.date.startsWith(sr);case"lastMonth":const At=new Date;At.setMonth(At.getMonth()-1);const er=At.toISOString().slice(0,7);return ve.date.startsWith(er);case"custom":return ve.date>=re.from&&ve.date<=re.to;default:return!0}})(),pe=A?ve.storeId===A:!0;return je&&pe}),be=o.filter(ve=>{const je=(()=>{switch(M){case"today":return ve.date===Bn();case"yesterday":const Le=new Date;return Le.setDate(Le.getDate()-1),ve.date===Le.toISOString().split("T")[0];case"thisWeek":const Xe=new Date,at=new Date(Xe);return at.setDate(Xe.getDate()-Xe.getDay()),new Date(ve.date)>=at&&new Date(ve.date)<=Xe;case"lastWeek":const et=new Date;et.setDate(et.getDate()-et.getDay()-1);const rr=new Date(et);return rr.setDate(et.getDate()-6),new Date(ve.date)>=rr&&new Date(ve.date)<=et;case"thisMonth":const sr=new Date().toISOString().slice(0,7);return ve.date.startsWith(sr);case"lastMonth":const At=new Date;At.setMonth(At.getMonth()-1);const er=At.toISOString().slice(0,7);return ve.date.startsWith(er);case"custom":return ve.date>=re.from&&ve.date<=re.to;default:return!0}})(),pe=A?ve.storeId===A:!0;return je&&pe});Se.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0});const pe=(ve.swiggySales||0)+(ve.zomatoSales||0);K[je].onlineSales||(K[je].onlineSales=0),K[je].onlineSales+=pe}),be.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0});const pe=(ve.swiggyPayout||0)+(ve.zomatoPayout||0);K[je].onlinePayouts||(K[je].onlinePayouts=0),K[je].onlinePayouts+=pe}),Object.keys(K).forEach(ve=>{const je=K[ve].onlineSales||0,pe=K[ve].onlinePayouts||0,Le=je-pe;K[ve].expenses+=Le,console.log(`Date ${ve}: onlineSales=${je}, onlinePayouts=${pe}, commission=${Le}`)}),Ke.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0}),K[je].expenses+=ve.totalCost||0}),Ge.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0}),K[je].expenses+=ve.amount||0}),Ct.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0}),K[je].expenses+=ve.amount||0}),Xt.forEach(ve=>{const je=ve.date;K[je]||(K[je]={revenue:0,expenses:0,profit:0});const pe=Yt.find(Le=>Le.id===ve.employeeId);pe&&pe.type==="fulltime"&&(K[je].expenses+=ve.amount||0)});const he=Object.keys(K).sort().map(ve=>{const je=K[ve],pe=je.revenue-je.expenses;return console.log(`Chart data for ${ve}: revenue=${je.revenue}, expenses=${je.expenses}, profit=${pe}`),{period:new Date(ve).toLocaleDateString("en-IN",{month:"short",day:"numeric"}),revenue:Math.round(je.revenue),expenses:Math.round(je.expenses),profit:Math.round(pe)}});return console.log(" === END CHART DATA DEBUG ==="),he},xt=P.useMemo(()=>Re(),[Qe,Ke,Ge,Ct,Xt,Yt,s,o,M,A,re]),ht=(()=>{const K={},Se={},be={};return Ke.forEach(ve=>{const je=ve.category||"Other";let pe=mg[je]||je;(je==="meat"||je==="dairy")&&(pe=" Meat & Dairy"),K[pe]||(K[pe]=0,Se[pe]=[],be[pe]="inventory"),K[pe]+=ve.totalCost||0,Se[pe].push(ve)}),Ge.forEach(ve=>{if(f(ve))return;const je=ve.category||"Other",pe=w2[je]||je;K[pe]||(K[pe]=0,Se[pe]=[],be[pe]="overhead"),K[pe]+=ve.amount||0,Se[pe].push(ve)}),Ct.forEach(ve=>{const je=ve.category||"Other",pe=j2[je]||je;K[pe]||(K[pe]=0,Se[pe]=[],be[pe]="fixed"),K[pe]+=ve.amount||0,Se[pe].push(ve)}),Ze.salaryExpenses>0&&(K[" Salaries"]=Ze.salaryExpenses,Se[" Salaries"]=[],be[" Salaries"]="salary"),Ze.commissionExpenses>0&&(K[" Aggregator Commission"]=Ze.commissionExpenses,Se[" Aggregator Commission"]=[],be[" Aggregator Commission"]="commission"),Object.keys(K).map(ve=>({name:ve,value:K[ve],percentage:parseFloat((K[ve]/Ze.totalExpenses*100).toFixed(1)),items:Se[ve]||[],type:be[ve]})).sort((ve,je)=>je.value-ve.value)})(),ut=["#ec4899","#a78bfa","#fbbf24","#34d399","#60a5fa","#f87171","#fb923c","#8b5cf6","#10b981","#f59e0b"],Nn=Qe.filter(Se=>Se.approvalRequired===!1&&Se.approvedBy).reduce((Se,be)=>{const he=be.salesDiscrepancy!==void 0?be.salesDiscrepancy:be.cashOffset||0;return Se+(he<0?Math.abs(he):0)},0),Ma=Ze.netProfit,tr=Ma-Nn;return n.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 sm:p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-4 sm:mb-8 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl text-gray-900 mb-1 sm:mb-2",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track revenue, expenses, and profitability"})]}),m&&!1]}),!V&&(e.user?.role==="cluster_head"||e.user?.role==="manager")&&n.jsx("div",{onClick:()=>Y(!0),className:`mb-4 sm:mb-6 rounded-lg shadow-sm border-2 p-4 transition-all cursor-pointer hover:shadow-md ${Q===0?"bg-green-50 border-green-200 hover:bg-green-100":"bg-orange-50 border-orange-200 hover:bg-orange-100"}`,children:n.jsx("div",{className:"flex items-center gap-3",children:Q===0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Dn,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-green-900",children:[n.jsx("span",{className:"text-green-600",children:""})," Everyone is working today"]}),n.jsx("p",{className:"text-sm text-green-700 mt-0.5",children:e.user.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}),n.jsx("div",{className:"text-green-600 text-sm",children:"Click to view"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(VE,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-orange-900",children:[n.jsx("span",{className:"text-orange-700",children:Q})," ",Q===1?"person is":"people are"," on leave today"]}),n.jsx("p",{className:"text-sm text-orange-700 mt-0.5",children:e.user.storeId?"In this store":"Across all stores"})]}),n.jsx("div",{className:"text-orange-600 text-sm",children:"Click to view details"})]})})}),(m||p||b||y||g)&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg mb-6 p-4 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-purple-900",style:{fontSize:"16px",fontWeight:"700"},children:y?"Store Analytics Dashboard":g?"Audit Analytics Dashboard":"Analytics Dashboard"}),!y&&n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm",children:[n.jsx("button",{onClick:()=>N("store"),className:`px-4 py-2 rounded-md transition-all duration-200 ${v==="store"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gd,{className:"w-4 h-4"}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Store Analytics"})]})}),n.jsx("button",{onClick:()=>N("production"),className:`px-4 py-2 rounded-md transition-all duration-200 ${v==="production"?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Hn,{className:"w-4 h-4"}),n.jsx("span",{style:{fontSize:"14px",fontWeight:"600"},children:"Production Analytics"})]})})]})]}),n.jsx("p",{className:"text-purple-700 text-sm",children:v==="store"?"Track revenue, expenses, and profitability across stores":"Monitor production metrics, wastage, and SOP compliance"})]}),v==="store"&&n.jsx(n.Fragment,{children:m||p||b||g?n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Store Selection"}),n.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"Select a store to view its analytics data"})]}),n.jsxs("select",{value:k||"",onChange:K=>w(K.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:[n.jsx("option",{value:"",children:"All Stores"}),e.stores?.map(K=>n.jsxs("option",{value:K.id,children:[K.name," (ID: ",K.id,")"]},K.id))]})]})}):e.user?.storeId&&n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gd,{className:"w-6 h-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Store Analytics"}),n.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:["Viewing data for: ",e.stores?.find(K=>K.id===e.user?.storeId)?.name||"Your Store"]})]})]})})}),v==="production"&&n.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl shadow-lg mb-6 p-4 border border-orange-200",children:m||p||g?n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production House Selection"}),n.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"View production metrics and recalibration data for a specific production house"})]}),n.jsxs("select",{value:Tt||"",onChange:K=>{const Se=K.target.value||null;console.log(" Production Analytics - Production House Selector Changed:",Se),Zt(Se)},className:"px-4 py-2 bg-white border-2 border-orange-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500",style:{fontSize:"14px",fontWeight:"600"},children:[!Tt&&n.jsx("option",{value:"",children:"Select Production House"}),e.productionHouses?.map(K=>n.jsxs("option",{value:K.id,children:[K.name," (ID: ",K.id,")"]},K.id))]})]}):b&&e.user?.storeId?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hn,{className:"w-6 h-6 text-orange-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-orange-900",style:{fontSize:"16px",fontWeight:"700"},children:"Your Production House Analytics"}),n.jsxs("p",{className:"text-orange-700 text-sm mt-1",children:["Viewing data for: ",(()=>{const K=e.stores?.find(be=>be.id===e.user?.storeId);return e.productionHouses?.find(be=>be.id===K?.productionHouseId)?.name||"Your Production House"})()]})]})]}):null}),n.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-lg mb-6 p-2 border border-gray-200",children:v==="store"?n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-2",children:[n.jsxs("button",{onClick:()=>_("profit"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="profit"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(pn,{className:`w-6 h-6 ${S==="profit"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Profit Analysis"})]}),S==="profit"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-emerald-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>_("expense"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="expense"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white shadow-lg shadow-rose-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(jn,{className:`w-6 h-6 ${S==="expense"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Expenses"})]}),S==="expense"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-rose-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>_("sales"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="sales"?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(gd,{className:`w-6 h-6 ${S==="sales"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Sales"})]}),S==="sales"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>_("datacapture"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="datacapture"?"bg-gradient-to-br from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(dr,{className:`w-6 h-6 ${S==="datacapture"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Data Capture"})]}),S==="datacapture"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-purple-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>_("production-requests"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="production-requests"?"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(R9,{className:`w-6 h-6 ${S==="production-requests"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Stock Requests"})]}),S==="production-requests"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-indigo-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>_("store-recalibration"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="store-recalibration"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(or,{className:`w-6 h-6 ${S==="store-recalibration"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),S==="store-recalibration"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:()=>_("production"),className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="production"?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(Hn,{className:`w-6 h-6 ${S==="production"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Production"})]}),S==="production"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-orange-500 rounded-full"})]}),n.jsxs("button",{onClick:()=>{console.log(" Recalibration button clicked!"),_("recalibration-reports")},className:`group relative px-4 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 ${S==="recalibration-reports"?"bg-gradient-to-br from-teal-500 to-teal-600 text-white shadow-lg shadow-teal-500/50":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md"}`,children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(or,{className:`w-6 h-6 ${S==="recalibration-reports"?"animate-bounce":"group-hover:scale-110 transition-transform"}`}),n.jsx("span",{className:"font-semibold text-sm",children:"Recalibration"})]}),S==="recalibration-reports"&&n.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-teal-500 rounded-full"})]})]})}),S==="profit"&&n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Profit Analysis"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Revenue, expenses, and profit breakdown"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(K=>n.jsx("button",{onClick:()=>O(K.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${M===K.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K.label},K.value))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{const K=e.stores?.find(Se=>Se.id===t)?.name||"All_Stores";Hge({salesData:Qe,inventoryData:Ke,overheadData:Ge,metrics:Ze,storeName:K,dateRange:M==="custom"?re:void 0}),ur.success("Analytics report exported!")},className:"px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[n.jsx(Os,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Export"}),n.jsx("span",{className:"sm:hidden",children:"JSON"})]}),n.jsxs("button",{onClick:()=>{const K=e.stores?.find(Se=>Se.id===t)?.name||"All_Stores";qge({salesData:Qe,inventoryData:Ke,overheadData:Ge,storeName:K}),ur.success("Data exported as CSV files!")},className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 text-xs sm:text-sm whitespace-nowrap",children:[n.jsx(Fs,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"CSV"})]})]})]})]}),M==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:re.from,onChange:K=>oe({...re,from:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:re.to,onChange:K=>oe({...re,to:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-blue-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Revenue"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ze.totalRevenue.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:nn()})]}),n.jsxs("div",{className:"bg-red-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ze.totalExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:nn()})]}),n.jsxs("div",{className:"bg-orange-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Aggregator Commission"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",Ze.commissionExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:Ze.onlineRevenue>0?`${(Ze.commissionExpenses/Ze.onlineRevenue*100).toFixed(1)}% of online`:"No data"})]}),n.jsxs("div",{className:"bg-green-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Net Profit"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:["",tr.toLocaleString()]}),Ze.totalRevenue>0?n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[n.jsx(pn,{className:"w-3 h-3"}),"Includes commission"]}):n.jsx("div",{className:"text-xs text-gray-600",children:"No data yet"})]}),n.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 sm:p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Profit Margin"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900 mb-1",children:[Ze.profitMargin.toFixed(1),"%"]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Of total revenue"})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 border-2 border-indigo-200",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(pn,{className:"w-5 h-5 text-indigo-600"}),"Profit Breakdown"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Unrealized Profit"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-indigo-600 mb-2",children:["",Ma.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Before cash discrepancies"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Cash Discrepancy (Loss)"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-red-600 mb-2",children:["-",Nn.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Approved losses"})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border-2 border-green-300",children:[n.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 flex items-center gap-1",children:["Realized Profit",n.jsx("span",{className:"text-xs text-green-600",children:"(Actual)"})]}),n.jsxs("div",{className:"text-xl sm:text-2xl text-green-600 mb-2",children:["",tr.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-500",children:Ze.totalRevenue>0?`${(tr/Ze.totalRevenue*100).toFixed(1)}% margin`:"No data yet"})]})]}),Nn>0&&n.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-4 h-4 text-amber-600 mt-0.5"}),n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("strong",{children:"Impact:"})," Cash discrepancies represent actual cash shortages that have been approved by management and reduce the realized profit by ",Nn.toLocaleString(),"."]})]})})]}),n.jsxs("div",{className:"mb-6 sm:mb-8 overflow-x-auto",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Daily Performance - ",nn()]}),n.jsx("div",{className:"min-w-[300px]",children:n.jsx(ya,{width:"100%",height:300,children:n.jsxs(Ed,{data:xt,children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(ca,{dataKey:"period",stroke:"#666",tick:{fontSize:11}}),n.jsx(Jn,{stroke:"#666",tick:{fontSize:11}}),n.jsx(mn,{content:n.jsx(Hm,{})}),n.jsx(Ga,{wrapperStyle:{fontSize:"12px"}}),n.jsx(ys,{type:"monotone",dataKey:"revenue",stroke:"#8b5cf6",strokeWidth:2.5,name:"Revenue",dot:{fill:"#8b5cf6",r:4}}),n.jsx(ys,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2.5,name:"Expenses",dot:{fill:"#ef4444",r:4}}),n.jsx(ys,{type:"monotone",dataKey:"profit",stroke:"#10b981",strokeWidth:2.5,name:"Profit",dot:{fill:"#10b981",r:4}})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[n.jsx(pn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Daily Profitability"})]}),xt.length>0?n.jsxs(n.Fragment,{children:[n.jsx(ya,{width:"100%",height:200,children:n.jsxs(vo,{data:xt,children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(ca,{dataKey:"period",stroke:"#666",tick:{fontSize:10}}),n.jsx(Jn,{stroke:"#666",tick:{fontSize:10}}),n.jsx(mn,{content:n.jsx(Hm,{})}),n.jsx(sn,{dataKey:"profit",fill:"#10b981",name:"Daily Profit",radius:[4,4,0,0]})]})}),n.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Best Day"}),n.jsx("div",{className:"text-sm font-bold text-green-600",children:xt.length>0?`${Math.max(...xt.map(K=>K.profit)).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Worst Day"}),n.jsx("div",{className:"text-sm font-bold text-red-600",children:xt.length>0?`${Math.min(...xt.map(K=>K.profit)).toLocaleString()}`:"N/A"})]})]})]}):n.jsx("div",{className:"text-center text-gray-500 py-8",children:"No data available"})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[n.jsx(jn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Profitability Metrics"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-purple-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Profit Margin"}),n.jsxs("div",{className:`text-lg font-bold ${Ze.profitMargin>30?"text-green-600":Ze.profitMargin>15?"text-yellow-600":"text-red-600"}`,children:[Ze.profitMargin.toFixed(1),"%"]})]}),n.jsx("div",{className:"text-xs text-gray-600",children:Ze.profitMargin>30?" Excellent":Ze.profitMargin>15?" Good":Ze.profitMargin>0?" Low":" Loss"})]}),n.jsxs("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Cost-to-Revenue"}),n.jsx("div",{className:`text-lg font-bold ${Ze.totalRevenue>0&&Ze.totalExpenses/Ze.totalRevenue<.7?"text-green-600":"text-orange-600"}`,children:Ze.totalRevenue>0?`${(Ze.totalExpenses/Ze.totalRevenue*100).toFixed(1)}%`:"N/A"})]}),n.jsx("div",{className:"text-xs text-gray-600",children:Ze.totalRevenue>0&&Ze.totalExpenses/Ze.totalRevenue<.7?" Efficient operations":" High cost ratio"})]}),n.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Avg Daily Profit"}),n.jsx("div",{className:"text-lg font-bold text-green-600",children:xt.length>0?`${Math.round(xt.reduce((K,Se)=>K+Se.profit,0)/xt.length).toLocaleString()}`:"N/A"})]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Per day in selected period"})]}),Ze.commissionExpenses>0&&n.jsxs("div",{className:"bg-orange-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Commission Impact"}),n.jsx("div",{className:"text-lg font-bold text-orange-600",children:Ze.totalRevenue>0?`${(Ze.commissionExpenses/(Ze.totalRevenue+Ze.commissionExpenses)*100).toFixed(1)}%`:"N/A"})]}),n.jsxs("div",{className:"text-xs text-gray-600",children:["",Ze.commissionExpenses.toLocaleString()," paid to aggregators"]})]})]})]})]})]})}),S==="expense"&&n.jsx("div",{children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Expense Breakdown"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Detailed analysis of all expenses by category"})]}),n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(K=>n.jsx("button",{onClick:()=>O(K.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${M===K.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K.label},K.value))})]}),M==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:re.from,onChange:K=>oe({...re,from:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:re.to,onChange:K=>oe({...re,to:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-100 to-red-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Expenses"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.totalExpenses.toLocaleString()]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-pink-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Inventory Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.inventoryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.inventoryExpenses/Ze.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Overhead Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.overheadExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.overheadExpenses/Ze.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Commission"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.commissionExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Ze.totalExpenses>0?(Ze.commissionExpenses/Ze.totalExpenses*100).toFixed(1):"0.0","% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-indigo-100 to-indigo-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Fixed Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",(Ze.fixedCostsTotal||0).toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[((Ze.fixedCostsTotal||0)/Ze.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Salary Costs"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.salaryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.salaryExpenses/Ze.totalExpenses*100).toFixed(1),"% of total"]})]})]}),n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Expense Distribution"}),n.jsxs("div",{className:"relative mb-8",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl blur-xl opacity-50"}),n.jsx("div",{className:"relative bg-white rounded-2xl p-8 shadow-lg",children:n.jsx(ya,{width:"100%",height:500,children:n.jsxs(y$,{children:[n.jsx("defs",{children:ut.map((K,Se)=>n.jsxs("linearGradient",{id:`gradient-${Se}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:K,stopOpacity:.9}),n.jsx("stop",{offset:"100%",stopColor:K,stopOpacity:.7})]},`gradient-${Se}`))}),n.jsx(Zi,{data:ht,cx:"50%",cy:"50%",labelLine:{stroke:"#666",strokeWidth:1.5,strokeDasharray:"3 3"},label:({name:K,percentage:Se})=>`${K}: ${Se}%`,outerRadius:180,innerRadius:90,fill:"#8884d8",dataKey:"value",paddingAngle:3,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ht.map((K,Se)=>n.jsx(Ud,{fill:`url(#gradient-${Se%ut.length})`,stroke:"#fff",strokeWidth:4},`cell-${Se}`))}),n.jsx(mn,{content:n.jsx(Wge,{})})]})})})]}),n.jsxs("div",{className:"space-y-6",children:[ht.filter(K=>K.type==="inventory").length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Inventory Items"}),n.jsx("div",{className:"space-y-2",children:ht.filter(K=>K.type==="inventory").map((K,Se)=>{const be=ht.indexOf(K);return n.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{C({category:K.name,items:K.items||[],amount:K.value})},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.name})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",K.value.toLocaleString()]}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[K.percentage,"%"]})]})]}),n.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${K.percentage}%`,background:`linear-gradient(90deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}})})]},K.name)})})]}),ht.filter(K=>K.type==="overhead").length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Overhead Costs"}),n.jsx("div",{className:"space-y-2",children:ht.filter(K=>K.type==="overhead").map((K,Se)=>{const be=ht.indexOf(K);return n.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{C({category:K.name,items:K.items||[],amount:K.value})},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.name})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",K.value.toLocaleString()]}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[K.percentage,"%"]})]})]}),n.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${K.percentage}%`,background:`linear-gradient(90deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}})})]},K.name)})})]}),ht.filter(K=>K.type==="fixed").length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Fixed Costs"}),n.jsx("div",{className:"space-y-2",children:ht.filter(K=>K.type==="fixed").map((K,Se)=>{const be=ht.indexOf(K);return n.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{C({category:K.name,items:K.items||[],amount:K.value})},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.name})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",K.value.toLocaleString()]}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[K.percentage,"%"]})]})]}),n.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${K.percentage}%`,background:`linear-gradient(90deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}})})]},K.name)})})]}),ht.filter(K=>K.type==="salary").length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2 px-2",children:" Salaries"}),n.jsx("div",{className:"space-y-2",children:ht.filter(K=>K.type==="salary").map((K,Se)=>{const be=ht.indexOf(K);return n.jsxs("div",{className:"group border border-gray-200 rounded-lg p-3 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer bg-white",onClick:()=>{C({category:K.name,items:K.items||[],amount:K.value})},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:`linear-gradient(135deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}}),n.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.name})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["",K.value.toLocaleString()]}),n.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-gray-100 px-2 py-1 rounded min-w-[3rem] text-center",children:[K.percentage,"%"]})]})]}),n.jsx("div",{className:"mt-2 h-1 bg-gray-100 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${K.percentage}%`,background:`linear-gradient(90deg, ${ut[be%ut.length]}, ${ut[(be+1)%ut.length]})`}})})]},K.name)})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Salary Breakdown"}),(M==="thisMonth"||M==="lastMonth"||M==="custom")&&Ze.permanentEmployeeExpenses>0&&n.jsx("div",{className:"mb-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("p",{className:"text-xs text-blue-800",children:[n.jsx("strong",{children:"Note:"})," Permanent employee salaries (",Ze.permanentEmployeeExpenses.toLocaleString(),") are monthly payouts and included in this view. Contract worker wages are date-filtered."]})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Contract Workers"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Ze.contractWorkerExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Daily wages from sales data"})]}),n.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Permanent Employees"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Ze.permanentEmployeeExpenses.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:M==="thisMonth"||M==="lastMonth"||M==="custom"?"Total monthly salary payouts (all periods)":"Only shown in monthly views"})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Overhead Costs"}),n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Overheads"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Ze.overheadExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[(Ze.overheadExpenses/Ze.totalExpenses*100).toFixed(1),"% of total expenses"]}),n.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Fuel, travel, marketing, and other variable costs"})]})]})]}),n.jsxs("div",{className:"mt-6 sm:mt-8 border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:"Fixed Costs Breakdown"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4",children:"Monthly fixed expenses breakdown"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Fixed Costs"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ze.fixedCostsTotal.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.fixedCostsTotal/Ze.totalExpenses*100).toFixed(1),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Electricity"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ze.electricityExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Ze.fixedCostsTotal>0?(Ze.electricityExpenses/Ze.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Rent"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ze.rentExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Ze.fixedCostsTotal>0?(Ze.rentExpenses/Ze.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:" Salaries"}),n.jsxs("div",{className:"text-xl sm:text-2xl text-gray-900",children:["",Ze.salaryExpenses.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Ze.fixedCostsTotal>0?(Ze.salaryExpenses/Ze.fixedCostsTotal*100).toFixed(1):0,"% of fixed"]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"min-w-[300px]",children:n.jsx(ya,{width:"100%",height:280,children:n.jsxs(vo,{data:[{name:" Electricity",amount:Ze.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ze.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ze.salaryExpenses,fill:"#a78bfa"}],barCategoryGap:"30%",children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(ca,{dataKey:"name",stroke:"#666",tick:{fontSize:12}}),n.jsx(Jn,{stroke:"#666",tick:{fontSize:12}}),n.jsx(mn,{content:n.jsx(Hm,{})}),n.jsx(sn,{dataKey:"amount",name:"Amount",radius:[8,8,0,0],maxBarSize:80,children:[{name:" Electricity",amount:Ze.electricityExpenses,fill:"#fbbf24"},{name:" Rent",amount:Ze.rentExpenses,fill:"#fb923c"},{name:" Salaries",amount:Ze.salaryExpenses,fill:"#a78bfa"}].map((K,Se)=>n.jsx(Ud,{fill:K.fill},`cell-${Se}`))})]})})})})]})]})}),S==="sales"&&n.jsxs("div",{children:[n.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 border border-gray-200",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>B("revenue"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${I==="revenue"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(gd,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Revenue Tracking"})]})}),n.jsx("button",{onClick:()=>B("category"),className:`flex-1 px-6 py-3 rounded-xl transition-all duration-300 transform hover:scale-105 ${I==="category"?"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Vm,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold",children:"Category Sales"})]})})]})}),I==="revenue"&&n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6 mb-4 sm:mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3 sm:gap-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1",children:"Revenue Analytics"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Track daily revenue from Paytm, Cash, and Online sales"})]}),n.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 sm:pb-0",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"thisWeek",label:"This Week"},{value:"thisMonth",label:"This Month"},{value:"lastWeek",label:"Last Week"},{value:"lastMonth",label:"Last Month"},{value:"custom",label:"Custom"}].map(K=>n.jsx("button",{onClick:()=>O(K.value),className:`px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm transition-colors whitespace-nowrap ${M===K.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K.label},K.value))})]}),M==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-4 sm:mb-6 bg-gray-50 p-3 sm:p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-500"}),n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"From:"}),n.jsx("input",{type:"date",value:re.from,onChange:K=>oe({...re,from:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:"To:"}),n.jsx("input",{type:"date",value:re.to,onChange:K=>oe({...re,to:K.target.value}),className:"flex-1 px-2 sm:px-3 py-1 sm:py-1.5 border border-gray-300 rounded-lg text-xs sm:text-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.totalRevenue.toLocaleString()]}),n.jsx("div",{className:"text-xs text-gray-600",children:nn()})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Online Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.onlineRevenue.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.onlineRevenue/Ze.totalRevenue*100).toFixed(0),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Offline Sales"}),n.jsxs("div",{className:"text-2xl sm:text-3xl text-gray-900",children:["",Ze.offlineRevenue.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[(Ze.offlineRevenue/Ze.totalRevenue*100).toFixed(0),"% of total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-4",children:[n.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-1",children:"Total Transactions"}),n.jsx("div",{className:"text-2xl sm:text-3xl text-gray-900",children:Qe.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Sales records"})]})]}),n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsxs("h3",{className:"text-base sm:text-lg text-gray-900 mb-4",children:["Sales Trend - ",nn()]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsx("div",{className:"min-w-[300px]",children:n.jsx(ya,{width:"100%",height:300,children:n.jsxs(vo,{data:Ee,barCategoryGap:"25%",children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n.jsx(ca,{dataKey:"period",stroke:"#666",tick:{fontSize:12}}),n.jsx(Jn,{stroke:"#666",tick:{fontSize:12}}),n.jsx(mn,{content:n.jsx(Hm,{})}),n.jsx(Ga,{wrapperStyle:{fontSize:"12px"}}),n.jsx(sn,{dataKey:"online",stackId:"a",fill:"#60a5fa",name:"Online Sales",radius:[0,0,0,0],maxBarSize:80}),n.jsx(sn,{dataKey:"offline",stackId:"a",fill:"#a78bfa",name:"Offline Sales",radius:[8,8,0,0],maxBarSize:80})]})})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(gd,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Payment Methods"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Online Payments"}),n.jsxs("span",{className:"text-sm text-green-600",children:[(Ze.onlineRevenue/Ze.totalRevenue*100).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Ze.onlineRevenue.toLocaleString()]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Cash & Paytm"}),n.jsxs("span",{className:"text-sm text-blue-600",children:[(Ze.offlineRevenue/Ze.totalRevenue*100).toFixed(1),"%"]})]}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Ze.offlineRevenue.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 sm:p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(pn,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Performance Metrics"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Average Transaction"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Qe.length>0?(Ze.totalRevenue/Qe.length).toFixed(0):0]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Per sale"})]}),n.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Profit per Sale"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",Qe.length>0?(Ze.netProfit/Qe.length).toFixed(0):0]}),n.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Average margin"})]})]})]})]})]}),I==="category"&&n.jsx(Ige,{context:e,selectedStoreId:t})]}),S==="datacapture"&&n.jsx("div",{children:n.jsx(Ele,{context:e,selectedStoreId:t})}),S==="production"&&n.jsxs("div",{children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg mb-6 p-4 border border-blue-200",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-blue-900",style:{fontSize:"16px",fontWeight:"700"},children:"Production Date Range"}),n.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"View production data for a selected time period"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"custom",label:"Custom Range"}].map(K=>n.jsx("button",{onClick:()=>nt(K.value),className:`px-4 py-2 rounded-lg text-sm border-2 transition-all ${we===K.value?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-blue-300 hover:border-blue-500"}`,style:{fontSize:"14px",fontWeight:"600"},children:K.label},K.value))})}),we==="custom"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 bg-white/50 p-3 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:it,onChange:K=>jt(K.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"text-xs text-blue-700 block mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:gt,onChange:K=>H(K.target.value),className:"w-full px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-blue-200",children:[n.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Selected Range:"}),n.jsx("div",{className:"text-sm text-blue-900 font-semibold",children:(()=>{const{startDate:K,endDate:Se}=se(),be=qa(K),he=qa(Se);return K===Se?be:`${be} - ${he}`})()})]})]})}),n.jsx("div",{className:"hidden",children:n.jsx("select",{value:Ut||"",onChange:K=>yn(K.target.value||null),className:"px-4 py-2 bg-white border-2 border-blue-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"14px",fontWeight:"600"},children:(()=>{const K=Tt;return Bt.filter(be=>{if(!K)return!0;const he=be.storeId===K,ve=be.productionHouseId===K,je=be.productionHouseId||be.storeId;return he||ve||je===K}).map(be=>be.date).filter((be,he,ve)=>ve.indexOf(be)===he).sort((be,he)=>he.localeCompare(be)).map(be=>n.jsx("option",{value:be,children:qa(be)},be))})()})}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(()=>{const K=Tt;console.log(" Production Summary Cards Filter Debug:"),console.log("  - analyticsMode:",v),console.log("  - selectedProductionHouseId:",Tt),console.log("  - effectiveStoreId:",A),console.log("  - filterById:",K),console.log("  - Total production records:",Bt.length);const Se=K?e.productionHouses?.find(at=>at.id===K):null;console.log("  - Selected production house object:",Se);const{startDate:be,endDate:he}=se();console.log(" Date Range Filter:",{rangeType:we,startDate:be,endDate:he,customStart:it,customEnd:gt});const ve=Bt.filter(at=>{if(at.date<be||at.date>he)return console.log(" Date filter excluded record:",{date:at.date,startDate:be,endDate:he}),!1;if(!K)return!0;console.log(" Filtering production record:",{recordStoreId:at.storeId,recordProductionHouseId:at.productionHouseId,filterById:K,date:at.date});const et=at.storeId===K,rr=at.productionHouseId===K;let sr=at.productionHouseId;if((!sr||sr.startsWith("STORE-"))&&at.storeId){const Sr=G.length>0?G:e.stores||[],Ar=Sr.find(Xr=>Xr.id===at.storeId);console.log("     Production Summary - Store lookup:",{pStoreId:at.storeId,localStoresCount:G.length,contextStoresCount:e.stores?.length||0,allStoresCount:Sr.length,foundStore:Ar?{id:Ar.id,name:Ar.name,productionHouseId:Ar.productionHouseId}:null}),sr=Ar?.productionHouseId||null}const At=sr||at.storeId;return console.log("   Checking record:",{recordId:at.id.slice(0,8),recordStoreId:at.storeId,recordProductionHouseId:at.productionHouseId,resolvedProductionHouseId:sr,phId:At,filterById:K,matchesStoreId:et,matchesProductionHouseId:rr,localStores:G.length,match:et||rr||At===K}),et||rr||At===K});console.log("  - Filtered production records:",ve.length);const je=ve.reduce((at,et)=>at+(et.chickenMomos?.final||0)+(et.chickenCheeseMomos?.final||0)+(et.vegMomos?.final||0)+(et.cheeseCornMomos?.final||0)+(et.paneerMomos?.final||0)+(et.vegKurkureMomos?.final||0)+(et.chickenKurkureMomos?.final||0),0),pe=ve.reduce((at,et)=>at+(et.wastage?.dough||0)+(et.wastage?.stuffing||0)+(et.wastage?.batter||0)+(et.wastage?.coating||0),0),Le=ve.filter(at=>at.approvalStatus==="approved").length,Xe=ve.filter(at=>at.approvalStatus==="pending").length;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Hn,{className:"w-6 h-6 text-orange-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Production"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:je.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"pieces"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Rs,{className:"w-6 h-6 text-red-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Wastage"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:pe.toFixed(2)}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"kg"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(zE,{className:"w-6 h-6 text-green-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Approved Entries"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Le}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Nr,{className:"w-6 h-6 text-yellow-600"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),n.jsx("p",{className:"text-3xl text-gray-900",children:Xe}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"records"})]})]})})()}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border-2 border-orange-200",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl text-gray-900 mb-1 flex items-center gap-2",children:[n.jsx(dr,{className:"w-6 h-6 text-orange-600"}),"Production House Stock Status"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),v==="production"&&(p||b)&&n.jsxs("div",{className:"flex gap-2 items-start",children:[n.jsxs("button",{onClick:()=>{Ie(JSON.parse(JSON.stringify(qt))),Gt(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Stock Alert Thresholds",children:[n.jsx(Bi,{className:"w-5 h-5"}),"Alert Settings"]}),n.jsxs("button",{onClick:()=>{Qt(Et),St(!0)},className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2 shadow-lg",title:"Configure Momos Per Plate",children:[n.jsx(Bi,{className:"w-5 h-5"}),"Plate Settings"]}),b&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("button",{onClick:()=>Oe(!0),className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Recalibrate production house stock (available on 1st of each month)",children:[n.jsx(Or,{className:"w-5 h-5"}),"Recalibrate Stock"]}),Ye&&Ye.date&&n.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Last recalibrated: ",qa(Ye.date)," IST"]}),We&&!Ye&&n.jsx("p",{className:"text-xs text-blue-600 text-center",children:" Using auto carry-forward from previous month"})]}),(p||m)&&a&&n.jsxs("button",{onClick:()=>{console.log(" Manage Items button clicked in Analytics"),a()},className:"flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg font-semibold",title:"Manage inventory items",children:[n.jsx(dr,{className:"w-5 h-5"}),"Manage Items"]})]}),v==="store"&&e.user?.role==="cluster_head"&&e.productionHouses&&e.productionHouses.length>0&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-gray-600",children:"Production House:"}),n.jsxs("select",{value:Tt||"all",onChange:K=>{const Se=K.target.value==="all"?null:K.target.value;console.log(" Production House Selector Changed:",Se),Zt(Se)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"All Production Houses"}),e.productionHouses.map(K=>n.jsxs("option",{value:K.id,children:[K.name," (ID: ",K.id,")"]},K.id))]})]})]})}),(()=>{const K=Tt;console.log(" Production House Stock Status Filter Debug:"),console.log("  - analyticsMode:",v),console.log("  - selectedProductionHouseId:",Tt),console.log("  - effectiveProductionHouseId:",K);const Se=K?e.productionHouses?.find(Te=>Te.id===K):null;console.log("  - Selected production house for stock:",Se),console.log("  - Total production records available:",Bt.length),Bt.length>0&&Bt.length<=3&&console.log("  - All production records:",Bt.map(Te=>({id:Te.id,storeId:Te.storeId,productionHouseId:Te.productionHouseId,date:Te.date})));const be=Bt.filter(Te=>{if(!K)return!0;const Pt=Te.storeId===K,_r=Te.productionHouseId===K;let zt=Te.productionHouseId;(!zt||zt.startsWith("STORE-"))&&Te.storeId&&(zt=(G.length>0?G:e.stores||[]).find(Qr=>Qr.id===Te.storeId)?.productionHouseId||null);const fr=zt||Te.storeId;return Pt||_r||fr===K});console.log("  - Filtered production for stock status:",be.length),be.length>0&&console.log("  - Sample production record:",{id:be[0].id,storeId:be[0].storeId,productionHouseId:be[0].productionHouseId,date:be[0].date});const he=new Date().toISOString().substring(0,7),ve=be.filter(Te=>Te.date.startsWith(he));console.log("  - Monthly filtered production:",ve.length,"for month:",he),ve.length>0&&console.log("  - Sample monthly production record:",ve[0]);const je=e.inventoryItems?.filter(Te=>Te.category==="finished_product"&&Te.isActive&&(Te.linkedEntityType==="global"||Te.linkedEntityType==="production_house"&&Te.linkedEntityId===K))||[],pe=Te=>Te.replace(/_([a-z])/g,Pt=>Pt[1].toUpperCase()),Le=Te=>{const Pt=Te.replace(/_momo(s)?$/i,"");return pe(Pt)},Xe={};je.forEach(Te=>{const Pt=Le(Te.name);Xe[Pt]=0}),ve.filter(Te=>Te.approvalStatus==="approved").forEach(Te=>{je.forEach(Pt=>{const _r=Le(Pt.name),zt=Te.data?.[Pt.name];let fr=0;if(zt!=null)fr=typeof zt=="object"?zt.final||zt.quantity||0:zt;else{const cn=Te[_r+"Momos"],Jr=Te[_r];cn?fr=typeof cn=="object"?cn.final||0:cn:Jr&&(fr=typeof Jr=="object"?Jr.final||0:Jr)}Xe[_r]=(Xe[_r]||0)+fr})});let at=K;if(K&&K.startsWith("STORE-")){const Te=e.stores?.find(Pt=>Pt.id===K);Te?.productionHouseId&&(at=Te.productionHouseId,console.log(" Resolved production house UUID:",{userStoreId:K,resolvedUUID:at}))}const et=e.productionRequests?.filter(Te=>{if(Te.status!=="delivered")return!1;const Pt=Te.deliveredDate||Te.requestDate||Te.createdAt;if(!Pt||!Pt.startsWith(he))return console.log(" Filtered out request - wrong month:",{requestId:Te.id.slice(0,8),requestDate:Pt,currentMonth:he,matches:Pt?.startsWith(he)}),!1;const _r=G.length>0?G:e.stores||[],zt=_r.find(fr=>fr.id===Te.storeId);if(at){const fr=zt?.productionHouseId===at;return console.log(" Checking production request:",{requestId:Te.id.slice(0,8),storeId:Te.storeId,storeName:zt?.name,storeProductionHouseId:zt?.productionHouseId,productionHouseUUID:at,deliveredDate:Te.deliveredDate,availableStores:_r.length,matches:fr}),fr}return!0})||[];console.log(" Production Stock Calculation:",{effectiveProductionHouseId:K,isProductionIncharge:e.user?.designation==="production_incharge",totalProductionRequests:e.productionRequests?.length||0,deliveredRequests:e.productionRequests?.filter(Te=>Te.status==="delivered").length||0,fulfilledRequestsCount:et.length,stores:e.stores?.map(Te=>({id:Te.id,name:Te.name,productionHouseId:Te.productionHouseId}))||[],filteredProductionRecords:be.length,allProductionData:Bt.map(Te=>({id:Te.id.slice(0,8),date:Te.date,productionHouseId:Te.productionHouseId,storeId:Te.storeId,resolvedId:Te.productionHouseId||Te.storeId})),sampleRequest:et[0],sampleRequestData:et[0]?{id:et[0].id,storeId:et[0].storeId,requestDate:et[0].requestDate,status:et[0].status,chickenMomos:et[0].chickenMomos,vegMomos:et[0].vegMomos}:null});const rr={};je.forEach(Te=>{const Pt=Le(Te.name);rr[Pt]=0}),et.forEach(Te=>{je.forEach(Pt=>{const _r=Le(Pt.name),zt=Te[_r+"Momos"]||Te[_r]||0;rr[_r]=(rr[_r]||0)+zt})});const sr={};je.forEach(Te=>{const Pt=Le(Te.name);sr[Pt]=We?.[Pt]||We?.[Te.name]||We?.[Te.id]||0}),console.log(" Stock Calculation with Carry-Forward:"),console.log("  previousMonthStock (raw):",We),console.log("  Opening Balance (processed):",sr),console.log("  Current Month Production (APPROVED ONLY):",Xe),console.log("  Current Month Deliveries:",rr),console.log("   Production Records Debug:"),console.log("    Total monthly production records:",ve.length),console.log("    Approved monthly production records:",ve.filter(Te=>Te.approvalStatus==="approved").length),console.log("    Sample production records:",ve.slice(0,3).map(Te=>({id:Te.id.slice(0,8),date:Te.date,approvalStatus:Te.approvalStatus,hasData:!!Te.data,dataKeys:Te.data?Object.keys(Te.data):[],sampleValue:Te.data?Te.data[Object.keys(Te.data)[0]]:null})));const At=window.__midMonthRecalibration,er=Ye?.date,Sr=At&&er;Sr&&(console.log("   Mid-Month Recalibration Detected:"),console.log("    Recalibration date:",er),console.log("    Recalibration stock:",At));const Ar={};if(Sr){const Te=er;console.log("    Recalibration date (date only):",Te.substring(0,10));const Pt={};je.forEach(zt=>{const fr=Le(zt.name);Pt[fr]=0}),be.filter(zt=>zt.approvalStatus==="approved").forEach(zt=>{const fr=Te.substring(0,10),cn=zt.date>fr;console.log("   Checking production after recalibration:",{id:zt.id.slice(0,8),date:zt.date,recalDateOnly:fr,isAfter:cn,hasData:!!zt.data,dataKeys:zt.data?Object.keys(zt.data):[],approvalStatus:zt.approvalStatus}),cn&&je.forEach(Jr=>{const Qr=Le(Jr.name),Zr=zt.data?.[Jr.name];let ta=0;if(Zr!=null)ta=typeof Zr=="object"?Zr.final||Zr.quantity||0:Zr;else{const ra=zt[Qr+"Momos"],ro=zt[Qr];ra?ta=typeof ra=="object"?ra.final||0:ra:ro&&(ta=typeof ro=="object"?ro.final||0:ro)}ta>0&&console.log(`     Adding production after recalibration: ${Jr.name} (${Qr}) = ${ta}`),Pt[Qr]=(Pt[Qr]||0)+ta})});const _r={};je.forEach(zt=>{const fr=Le(zt.name);_r[fr]=0}),et.forEach(zt=>{const fr=zt.deliveredDate||zt.requestDate||zt.createdAt;fr&&fr>Te&&je.forEach(cn=>{const Jr=Le(cn.name),Qr=zt[Jr+"Momos"]||zt[Jr]||0;_r[Jr]=(_r[Jr]||0)+Qr})}),console.log("    Production AFTER recalibration:",Pt),console.log("    Deliveries AFTER recalibration:",_r),je.forEach(zt=>{const fr=Le(zt.name),cn=At[fr]||0,Jr=Pt[fr]||0,Qr=_r[fr]||0;Ar[fr]=cn+Jr-Qr,console.log(`    ${fr}: ${cn} (recal) + ${Jr} (prod after) - ${Qr} (del after) = ${Ar[fr]}`)})}else je.forEach(Te=>{const Pt=Le(Te.name);Ar[Pt]=(sr[Pt]||0)+(Xe[Pt]||0)-(rr[Pt]||0)});console.log("  Final Stock:",Ar),window.__currentProductionHouseStock=Ar;const Xr=e.inventoryItems?.filter(Te=>Te.category==="finished_product"&&Te.isActive&&(Te.linkedEntityType==="global"||Te.linkedEntityType==="production_house"&&Te.linkedEntityId===K))||[];console.log(" Finished Products for Stock Display:",Xr.map(Te=>{const Pt=Le(Te.name);return{name:Te.name,displayName:Te.displayName,stock:Ar[Pt]}}));const Fn=Te=>Te.replace(/_([a-z])/g,Pt=>Pt[1].toUpperCase()),zn={chicken:"purple",chickenCheese:"pink",chicken_cheese:"pink",veg:"green",cheeseCorn:"yellow",cheese_corn:"yellow",paneer:"blue",vegKurkure:"teal",veg_kurkure:"teal",chickenKurkure:"red",chicken_kurkure:"red"},Nt=Xr.map(Te=>{const Pt=Te.name.replace(/_momo(s)?$/i,""),_r=Fn(Pt);return{key:Te.name,camelKey:_r,label:Te.displayName,color:zn[Pt]||zn[_r]||"indigo",unit:Te.unit}}),rt=Object.values(sr).some(Te=>Te>0);return be.length===0&&!rt?n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[n.jsx(dr,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"No Production Data"}),n.jsx("p",{className:"text-sm text-gray-600",children:K?"No production records found for the selected production house.":"No production records found. Start logging production to see stock status."})]}):n.jsxs(n.Fragment,{children:[sr&&Object.values(sr).some(Te=>Te>0)&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(or,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Automatic Stock Carry-Forward Active"}),n.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Stock calculation: ",n.jsx("span",{className:"font-mono",children:"Opening Balance + This Month's Production - Deliveries"})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:Ye&&Ye.date?`Opening balance from recalibration on ${qa(Ye.date)} (IST)`:"Opening balance auto-calculated from previous month's closing stock"})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Nt.map(({key:Te,camelKey:Pt,label:_r,color:zt,unit:fr})=>{const cn=sr[Pt]||sr[Te]||0,Jr=Xe[Pt]||Xe[Te]||0,Qr=rr[Pt]||rr[Te]||0,Zr=Ar[Pt]||Ar[Te]||0,ta=cn>0||Jr>0||Qr>0||Zr!==void 0,ra=qt[Pt]??qt[Te]??{high:600,medium:300,low:150},ro=Zr<ra.low,ff=Zr>=ra.low&&Zr<ra.medium,Mc=Zr>=ra.medium&&Zr<ra.high,El=Zr>=ra.high;let oi="",no="",Za="";Zr<0?(oi=" Over-distributed",no="bg-red-100 border-red-300 text-red-800",Za="text-red-600"):ta&&ro?(oi=" Critical: Below Low Threshold",no="bg-red-100 border-red-300 text-red-800",Za="text-red-600"):ta&&ff?(oi=" Low: Between Low & Medium",no="bg-orange-100 border-orange-300 text-orange-800",Za="text-orange-600"):ta&&Mc?(oi=" Medium: Between Medium & High",no="bg-yellow-100 border-yellow-300 text-yellow-800",Za="text-yellow-700"):ta&&El&&(oi=" Healthy: Above High Threshold",no="bg-green-100 border-green-300 text-green-800",Za="text-green-600");const Rc=Jr>0?(Zr/Jr*100).toFixed(0):"0";return n.jsxs("div",{className:`bg-gradient-to-br from-${zt}-50 to-${zt}-100 border-2 border-${zt}-200 rounded-xl p-4 hover:shadow-lg transition-all duration-300`,children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:_r}),n.jsx("div",{className:"space-y-2",children:ta?n.jsxs(n.Fragment,{children:[cn>0&&n.jsxs("div",{className:"flex justify-between items-center bg-blue-100 px-3 py-2 rounded-lg",children:[n.jsx("span",{className:"text-sm text-blue-700 font-semibold",children:"Opening Balance:"}),n.jsx("span",{className:"text-xl font-bold text-blue-800",children:cn})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"This Month Produced:"}),n.jsx("span",{className:`text-lg font-bold text-${zt}-600`,children:Jr})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Sent to Stores:"}),n.jsx("span",{className:`text-lg font-bold text-${zt}-700`,children:Qr})]}),n.jsxs("div",{className:"border-t-2 border-gray-300 pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Stock Available:"}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:`text-2xl font-bold ${Za||`text-${zt}-800`}`,children:[Zr," pcs / ",Math.round(Zr/Et)," plates"]})})]}),Jr>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:n.jsxs("span",{children:[Rc,"% remaining"]})}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${ro||Zr<0?"bg-red-500":ff?"bg-orange-500":Mc?"bg-yellow-500":El?"bg-green-500":`bg-${zt}-500`}`,style:{width:`${Math.min(100,Math.max(0,Number(Rc)))}%`}})})]})]}),oi&&n.jsx("div",{className:`border rounded-lg px-2 py-1 mt-2 ${no}`,children:n.jsx("p",{className:"text-xs font-semibold",children:oi})}),n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-2 py-1 mt-2",children:n.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"Low"}),n.jsx("div",{className:"font-semibold text-red-600",children:ra.low})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"Med"}),n.jsx("div",{className:"font-semibold text-yellow-600",children:ra.medium})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-600",children:"High"}),n.jsx("div",{className:"font-semibold text-green-600",children:ra.high})]})]})})]}):n.jsxs("div",{className:"bg-white/80 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Stock"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-bold text-gray-400",children:"0"}),n.jsx("span",{className:"text-xs text-gray-500",children:fr||"pieces"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-2 py-1 mt-2",children:n.jsx("p",{className:"text-xs text-yellow-800",children:" Track in production logging to see stock"})})]})})]},Te)})})]})})()]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Momo Production Analysis"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Daily, weekly, monthly, and yearly production trends"})]}),n.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(K=>n.jsx("button",{onClick:()=>O(K),className:`px-4 py-2 rounded-lg text-sm transition-colors ${M===K?"bg-orange-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K.charAt(0).toUpperCase()+K.slice(1)},K))})]}),M==="custom"&&n.jsx("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"From Date"}),n.jsx("input",{type:"date",value:re.from,onChange:K=>oe({...re,from:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"To Date"}),n.jsx("input",{type:"date",value:re.to,onChange:K=>oe({...re,to:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),n.jsx(ya,{width:"100%",height:400,children:n.jsxs(vo,{data:(()=>{const K=v==="production"?Tt:e.user?.designation==="production_incharge"?A:Tt;K&&e.productionHouses?.find(he=>he.id===K||he.storeId===K);const Se=Bt.filter(he=>{if(K){const ve=he.storeId===K,je=he.productionHouseId===K;let pe=he.productionHouseId;(!pe||pe.startsWith("STORE-"))&&he.storeId&&(pe=e.stores?.find(et=>et.id===he.storeId)?.productionHouseId||null);const Le=pe||he.storeId;if(!(ve||je||Le===K))return!1}return M==="custom"?he.date>=re.from&&he.date<=re.to:!0}),be=new Map;return Se.forEach(he=>{let ve=he.date,je=he.date;if(M==="weekly"){const Le=new Date(he.date),Xe=new Date(Le.setDate(Le.getDate()-Le.getDay())),at=new Date(Xe);at.setDate(at.getDate()+6),ve=Xe.toISOString().split("T")[0],je=`${Xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${at.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else M==="monthly"?(ve=he.date.substring(0,7),je=ve):M==="yearly"&&(ve=he.date.substring(0,4),je=ve);be.has(ve)||be.set(ve,{period:je,chickenMomos:0,chickenCheeseMomos:0,vegMomos:0,cheeseCornMomos:0,paneerMomos:0,vegKurkure:0,chickenKurkure:0});const pe=be.get(ve);pe.chickenMomos+=he.chickenMomos?.final||0,pe.chickenCheeseMomos+=he.chickenCheeseMomos?.final||0,pe.vegMomos+=he.vegMomos?.final||0,pe.cheeseCornMomos+=he.cheeseCornMomos?.final||0,pe.paneerMomos+=he.paneerMomos?.final||0,pe.vegKurkure+=he.vegKurkureMomos?.final||0,pe.chickenKurkure+=he.chickenKurkureMomos?.final||0}),Array.from(be.values()).sort((he,ve)=>he.period.localeCompare(ve.period))})(),children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(ca,{dataKey:"period",tick:{fontSize:12},stroke:"#666",angle:M==="weekly"?-15:0,textAnchor:M==="weekly"?"end":"middle",height:M==="weekly"?60:30}),n.jsx(Jn,{tick:{fontSize:12},stroke:"#666",label:{value:"Pieces",angle:-90,position:"insideLeft"}}),n.jsx(mn,{content:n.jsx(Kge,{})}),n.jsx(Ga,{}),n.jsx(sn,{dataKey:"chickenMomos",name:"Chicken Momos",fill:"#ef4444"}),n.jsx(sn,{dataKey:"chickenCheeseMomos",name:"Chicken Cheese",fill:"#f97316"}),n.jsx(sn,{dataKey:"vegMomos",name:"Veg Momos",fill:"#10b981"}),n.jsx(sn,{dataKey:"cheeseCornMomos",name:"Cheese Corn",fill:"#fbbf24"}),n.jsx(sn,{dataKey:"paneerMomos",name:"Paneer Momos",fill:"#3b82f6"}),n.jsx(sn,{dataKey:"vegKurkure",name:"Veg Kurkure",fill:"#84cc16"}),n.jsx(sn,{dataKey:"chickenKurkure",name:"Chicken Kurkure",fill:"#f59e0b"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-1",children:"Wastage Analysis"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Track and minimize production wastage"})]})}),(()=>{const K=v==="production"?Tt:e.user?.designation==="production_incharge"?A:Tt,Se=K?G.filter(pe=>pe.productionHouseId===K).map(pe=>pe.id):[],be=pe=>{if(!K)return!0;const Le=pe.storeId===K,Xe=pe.productionHouseId===K,at=pe.productionHouseId||pe.storeId,et=Se.includes(pe.storeId)||Se.includes(pe.productionHouseId);return Le||Xe||at===K||et};window.wastageFilterHelper={matchesProductionHouse:be,mappedStoreIds:Se,filterById:K};const he=Bt.filter(be),ve=he.reduce((pe,Le)=>pe+(Le.wastage?.dough||0)+(Le.wastage?.stuffing||0)+(Le.wastage?.batter||0)+(Le.wastage?.coating||0),0),je=he.filter(pe=>(pe.wastage?.dough||0)>0||(pe.wastage?.stuffing||0)>0||(pe.wastage?.batter||0)>0||(pe.wastage?.coating||0)>0);return console.log(" Wastage Analysis Debug:",{analyticsMode:v,selectedProductionHouseId:Tt,filterById:K,mappedStoreIds:Se,totalProductionRecords:Bt.length,filteredProductionRecords:he.length,recordsWithWastage:je.length,totalWastageAllTime:ve,sampleWastageData:he.slice(0,3).map(pe=>({date:pe.date,storeId:pe.storeId,productionHouseId:pe.productionHouseId,wastage:pe.wastage}))}),he.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-yellow-800 font-medium",children:" No production data found"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Please select a production house or ensure production data has been logged."})]}):je.length===0&&he.length>0?n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("p",{className:"text-blue-800 font-medium",children:" No wastage data recorded"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Found ",he.length," production record(s), but no wastage has been logged yet. Wastage values can be entered in the Production Management section."]})]}):null})(),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Daily Wastage Trend"}),n.jsx(ya,{width:"100%",height:250,children:n.jsxs(Ed,{data:(()=>{const K=[];for(let Se=4;Se>=0;Se--){const be=new Date;be.setDate(be.getDate()-Se);const he=be.toISOString().split("T")[0],ve=window.wastageFilterHelper,pe=Bt.filter(Le=>ve.matchesProductionHouse(Le)&&Le.date===he).reduce((Le,Xe)=>Le+(Xe.wastage?.dough||0)+(Xe.wastage?.stuffing||0)+(Xe.wastage?.batter||0)+(Xe.wastage?.coating||0),0);K.push({date:he.substring(5),wastage:pe})}return K})(),children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#fca5a5"}),n.jsx(ca,{dataKey:"date",tick:{fontSize:10}}),n.jsx(Jn,{tick:{fontSize:10}}),n.jsx(mn,{}),n.jsx(ys,{type:"monotone",dataKey:"wastage",stroke:"#dc2626",strokeWidth:2})]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Weekly Wastage Trend"}),n.jsx(ya,{width:"100%",height:250,children:n.jsxs(Ed,{data:(()=>{const K=[];for(let Se=4;Se>=0;Se--){const be=new Date;be.setDate(be.getDate()-Se*7);const he=new Date(be.setDate(be.getDate()-be.getDay())),ve=new Date(he);ve.setDate(ve.getDate()+6);const je=window.wastageFilterHelper,Le=Bt.filter(Xe=>je.matchesProductionHouse(Xe)&&Xe.date>=he.toISOString().split("T")[0]&&Xe.date<=ve.toISOString().split("T")[0]).reduce((Xe,at)=>Xe+(at.wastage?.dough||0)+(at.wastage?.stuffing||0)+(at.wastage?.batter||0)+(at.wastage?.coating||0),0);K.push({week:`W${5-Se}`,wastage:Le})}return K})(),children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#fed7aa"}),n.jsx(ca,{dataKey:"week",tick:{fontSize:10}}),n.jsx(Jn,{tick:{fontSize:10}}),n.jsx(mn,{}),n.jsx(ys,{type:"monotone",dataKey:"wastage",stroke:"#ea580c",strokeWidth:2})]})})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-3",children:"Monthly Wastage Trend"}),n.jsx(ya,{width:"100%",height:250,children:n.jsxs(Ed,{data:(()=>{const K=[];for(let Se=4;Se>=0;Se--){const be=new Date;be.setMonth(be.getMonth()-Se);const he=be.toISOString().substring(0,7),ve=window.wastageFilterHelper,pe=Bt.filter(Le=>ve.matchesProductionHouse(Le)&&Le.date.startsWith(he)).reduce((Le,Xe)=>Le+(Xe.wastage?.dough||0)+(Xe.wastage?.stuffing||0)+(Xe.wastage?.batter||0)+(Xe.wastage?.coating||0),0);K.push({month:he.substring(5),wastage:pe})}return K})(),children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#fde68a"}),n.jsx(ca,{dataKey:"month",tick:{fontSize:10}}),n.jsx(Jn,{tick:{fontSize:10}}),n.jsx(mn,{}),n.jsx(ys,{type:"monotone",dataKey:"wastage",stroke:"#ca8a04",strokeWidth:2})]})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-xl text-gray-900",children:"Wastage Breakdown by Type"}),n.jsx("div",{className:"flex gap-2",children:["daily","weekly","monthly","yearly","custom"].map(K=>n.jsx("button",{onClick:()=>ie(K),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${U===K?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:K.charAt(0).toUpperCase()+K.slice(1)},K))})]}),n.jsx(ya,{width:"100%",height:400,children:n.jsxs(vo,{data:(()=>{const K=window.wastageFilterHelper,Se=Bt.filter(he=>{if(!K.matchesProductionHouse(he))return!1;if(U==="custom")return he.date>=re.from&&he.date<=re.to;const ve=new Date,je=new Date(he.date);if(U==="daily"){const pe=new Date(ve);return pe.setDate(pe.getDate()-5),je>=pe}else if(U==="weekly"){const pe=new Date(ve);return pe.setDate(pe.getDate()-35),je>=pe}else if(U==="monthly"){const pe=new Date(ve);return pe.setMonth(pe.getMonth()-5),je>=pe}else if(U==="yearly"){const pe=new Date(ve);return pe.setFullYear(pe.getFullYear()-5),je>=pe}return!0}),be=new Map;return Se.forEach(he=>{let ve=he.date,je=he.date;if(U==="weekly"){const Le=new Date(he.date),Xe=new Date(Le.setDate(Le.getDate()-Le.getDay())),at=new Date(Xe);at.setDate(at.getDate()+6),ve=Xe.toISOString().split("T")[0],je=`${Xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${at.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else U==="monthly"?(ve=he.date.substring(0,7),je=ve):U==="yearly"&&(ve=he.date.substring(0,4),je=ve);be.has(ve)||be.set(ve,{period:je,dough:0,stuffing:0,batter:0,coating:0});const pe=be.get(ve);pe.dough+=he.wastage?.dough||0,pe.stuffing+=he.wastage?.stuffing||0,pe.batter+=he.wastage?.batter||0,pe.coating+=he.wastage?.coating||0}),Array.from(be.values()).sort((he,ve)=>he.period.localeCompare(ve.period))})(),children:[n.jsx(Ha,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),n.jsx(ca,{dataKey:"period",tick:{fontSize:12},angle:U==="weekly"?-15:0,textAnchor:U==="weekly"?"end":"middle",height:U==="weekly"?60:30}),n.jsx(Jn,{tick:{fontSize:12},label:{value:"kg",angle:-90,position:"insideLeft"}}),n.jsx(mn,{content:n.jsx(Vge,{})}),n.jsx(Ga,{}),n.jsx(sn,{dataKey:"dough",name:"Dough",fill:"#dc2626"}),n.jsx(sn,{dataKey:"stuffing",name:"Stuffing",fill:"#f97316"}),n.jsx(sn,{dataKey:"batter",name:"Batter",fill:"#fbbf24"}),n.jsx(sn,{dataKey:"coating",name:"Coating",fill:"#a855f7"})]})})]}),m&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg border-2 border-blue-200 p-6 mt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[n.jsx(zE,{className:"w-6 h-6 text-blue-600"}),"SOP Maintenance - Threshold Limits"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set standard ingredient usage per piece (in grams)"})]}),He?n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{tt(Vt),Dr(Hr),pt(!1),ur.success("SOP thresholds and diversion limit updated successfully")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(bo,{className:"w-4 h-4"}),"Save"]}),n.jsxs("button",{onClick:()=>{pt(!1),hr(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[n.jsx(qr,{className:"w-4 h-4"}),"Cancel"]})]}):n.jsxs("button",{onClick:()=>{hr(JSON.parse(JSON.stringify(Ne))),ot(Jt),pt(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(wj,{className:"w-4 h-4"}),"Edit SOP"]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold flex items-center gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600"}),"Maximum Allowed Diversion from SOP"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set the acceptable deviation range (%) from SOP standards. Using too little OR too much is non-compliant."})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"Max Diversion:"}),n.jsx("input",{type:"number",min:"0",max:"20",step:"1",value:He?Hr:Jt,onChange:K=>{He&&ot(Number(K.target.value))},disabled:!He,className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),n.jsx("span",{className:"text-gray-700",children:"%"})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(He?Vt:Ne).map(([K,Se])=>{const be={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese Momos",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn Momos",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"};return n.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("h4",{className:"text-gray-900 mb-3",children:be[K]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Dough (g/pc)"}),n.jsx("input",{type:"number",value:Se.dough,disabled:!He,onChange:he=>{He&&hr({...Vt,[K]:{...Vt[K],dough:Number(he.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${He?"bg-white":"bg-gray-100"}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Stuffing (g/pc)"}),n.jsx("input",{type:"number",value:Se.stuffing,disabled:!He,onChange:he=>{He&&hr({...Vt,[K]:{...Vt[K],stuffing:Number(he.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${He?"bg-white":"bg-gray-100"}`})]}),Se.batter!==void 0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Batter (g/pc)"}),n.jsx("input",{type:"number",value:Se.batter,disabled:!He,onChange:he=>{He&&hr({...Vt,[K]:{...Vt[K],batter:Number(he.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${He?"bg-white":"bg-gray-100"}`})]}),Se.coating!==void 0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-gray-600",children:"Coating (g/pc)"}),n.jsx("input",{type:"number",value:Se.coating,disabled:!He,onChange:he=>{He&&hr({...Vt,[K]:{...Vt[K],coating:Number(he.target.value)}})},className:`w-full px-2 py-1 border rounded text-sm ${He?"bg-white":"bg-gray-100"}`})]})]})]},K)})})]}),n.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-6 mt-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-xl text-gray-900 flex items-center gap-2",children:[n.jsx(pn,{className:"w-6 h-6 text-indigo-600"}),"Daily Ingredient Usage & SOP Compliance"]}),n.jsx(bs,{label:"Date:",value:rn,onChange:kr})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Regular momos only - Actual usage per piece vs SOP limits with diversion %"})]}),n.jsx("div",{className:"space-y-6",children:(()=>{const K=v==="production"?Tt:e.user?.designation==="production_incharge"?A:Tt;console.log(" SOP Compliance Filter - analyticsMode:",v),console.log(" SOP Compliance Filter - selectedProductionHouseId:",Tt),console.log(" SOP Compliance Filter - effectiveStoreId:",A),console.log(" SOP Compliance Filter - filterById:",K),console.log(" SOP Compliance Filter - user designation:",e.user?.designation),console.log(" SOP Compliance Filter - sopComplianceDate:",rn),console.log(" SOP Compliance Filter - All production dates:",[...new Set(Bt.map(he=>he.date))]),console.log(" SOP Compliance Filter - Total production records:",Bt.length),console.log(" SOP Compliance Filter - Approved production records:",Bt.filter(he=>he.approvalStatus==="approved").length);const Se=[rn],be=[];for(const he of Se){const ve=Bt.filter(Le=>{const Xe=v==="production"?Tt:e.user?.designation==="production_incharge"?A:Tt,et=(G.length>0?G:e.stores||[]).filter(Nt=>Nt.productionHouseId===Xe).map(Nt=>Nt.id),rr=Le.storeId===Xe,sr=Le.productionHouseId===Xe,er=(Le.productionHouseId||Le.storeId)===Xe,Sr=Le.storeId&&et.includes(Le.storeId),Ar=Le.date===he,Xr=Le.approvalStatus==="approved",Fn=rr||sr||er||Sr,zn=Fn&&Ar&&Xr;return console.log(" SOP Compliance - Checking production record:",{date:Le.date,storeId:Le.storeId,productionHouseId:Le.productionHouseId,approvalStatus:Le.approvalStatus,filterById:Xe,mappedStoreIds:et,matchesStoreId:rr,matchesProductionHouseId:sr,matchesFallback:er,matchesMappedStore:Sr,matchesDate:Ar,isApproved:Xr,passesFilter:Fn,finalResult:zn}),Xe&&!Fn?!1:Ar&&Xr});if(console.log(` SOP Compliance - Date ${he}: Found ${ve.length} production records`),ve.length===0)continue;const je={chickenMomos:"chickenMomos",chickenCheeseMomos:"chickenCheeseMomos",vegMomos:"vegMomos",cheeseCornMomos:"cheeseCornMomos",paneerMomos:"paneerMomos",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"},pe={};ve.forEach(Le=>{["chickenMomos","chickenCheeseMomos","vegMomos","cheeseCornMomos","paneerMomos"].forEach(Xe=>{const at=Le[Xe];if(at&&at.final>0){const et=je[Xe];pe[et]||(pe[et]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),pe[et].quantity+=at.final,pe[et].totalDough+=at.dough||0,pe[et].totalStuffing+=at.stuffing||0}}),["vegKurkureMomos","chickenKurkureMomos"].forEach(Xe=>{const at=Le[Xe];if(at&&at.final>0){const et=je[Xe];pe[et]||(pe[et]={quantity:0,totalDough:0,totalStuffing:0,totalBatter:0,totalCoating:0}),pe[et].quantity+=at.final,pe[et].totalBatter+=at.batter||0,pe[et].totalCoating+=at.coating||0}})}),be.push({date:he,usage:pe})}return be.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500",children:[n.jsx(Nr,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),n.jsxs("p",{children:["No approved production data found for ",qa(rn)]}),n.jsx("p",{className:"text-sm mt-1",children:"Production entries must be approved to appear here"})]}):be.map(({date:he,usage:ve})=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("h4",{className:"text-gray-900 mb-4",children:qa(he)}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(ve).map(([je,pe])=>{if(pe.quantity===0||je==="vegKurkure"||je==="chickenKurkure")return null;const Le={chickenMomos:"Chicken Momos",chickenCheeseMomos:"Chicken Cheese",vegMomos:"Veg Momos",cheeseCornMomos:"Cheese Corn",paneerMomos:"Paneer Momos",vegKurkure:"Veg Kurkure",chickenKurkure:"Chicken Kurkure"},Xe=pe.quantity>0?pe.totalDough*1e3/pe.quantity:0,at=pe.quantity>0?pe.totalStuffing*1e3/pe.quantity:0,et=pe.quantity>0?pe.totalBatter*1e3/pe.quantity:0,rr=pe.quantity>0?pe.totalCoating*1e3/pe.quantity:0,sr=Ne[je].dough>0?(Xe-Ne[je].dough)/Ne[je].dough*100:0,At=Ne[je].stuffing>0?(at-Ne[je].stuffing)/Ne[je].stuffing*100:0,er=Ne[je].batter>0?(et-Ne[je].batter)/Ne[je].batter*100:0,Sr=Ne[je].coating>0?(rr-Ne[je].coating)/Ne[je].coating*100:0,Ar=1-Jt/100,Xr=1+Jt/100,Fn=Xe>=Ne[je].dough*Ar&&Xe<=Ne[je].dough*Xr,zn=at>=Ne[je].stuffing*Ar&&at<=Ne[je].stuffing*Xr,Nt=!Ne[je].batter||et>=Ne[je].batter*Ar&&et<=Ne[je].batter*Xr,rt=!Ne[je].coating||rr>=Ne[je].coating*Ar&&rr<=Ne[je].coating*Xr,Te=Fn&&zn&&Nt&&rt;return n.jsxs("div",{className:`p-3 rounded-lg border-2 ${Te?"bg-green-50 border-green-300":"bg-red-50 border-red-300"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm text-gray-900",children:Le[je]}),Te?n.jsx(bo,{className:"w-5 h-5 text-green-600"}):n.jsx(Nr,{className:"w-5 h-5 text-red-600"})]}),n.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Qty: ",pe.quantity," pcs"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:`flex justify-between items-center ${Fn?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Dough:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[Xe.toFixed(1),"g / ",Ne[je].dough,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(sr)>Jt?"text-red-600":"text-green-600"}`,children:[sr>0?"+":"",sr.toFixed(1),"%"]})]})]}),n.jsxs("div",{className:`flex justify-between items-center ${zn?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Stuffing:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[at.toFixed(1),"g / ",Ne[je].stuffing,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(At)>Jt?"text-red-600":"text-green-600"}`,children:[At>0?"+":"",At.toFixed(1),"%"]})]})]}),Ne[je].batter&&n.jsxs("div",{className:`flex justify-between items-center ${Nt?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Batter:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[et.toFixed(1),"g / ",Ne[je].batter,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(er)>Jt?"text-red-600":"text-green-600"}`,children:[er>0?"+":"",er.toFixed(1),"%"]})]})]}),Ne[je].coating&&n.jsxs("div",{className:`flex justify-between items-center ${rt?"text-gray-700":"text-red-700 font-semibold"}`,children:[n.jsx("span",{children:"Coating:"}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{children:[rr.toFixed(1),"g / ",Ne[je].coating,"g"]}),n.jsxs("div",{className:`text-[10px] ${Math.abs(Sr)>Jt?"text-red-600":"text-green-600"}`,children:[Sr>0?"+":"",Sr.toFixed(1),"%"]})]})]})]})]},je)})})]},he))})()})]})]})]}),S==="production-requests"&&n.jsx("div",{children:n.jsx(Ale,{context:e,highlightRequestId:r||null,selectedStoreId:k,onNavigateToManageItems:a})}),S==="recalibration-reports"&&n.jsx("div",{children:n.jsx(kI,{context:e,selectedStoreId:v==="production"?Tt:t,onOpenRecalibration:()=>Oe(!0),locationType:"production_house"})}),S==="store-recalibration"&&n.jsx("div",{children:n.jsx(kI,{context:e,selectedStoreId:A,locationType:"store"})})]}),me&&n.jsx(M2,{context:e,selectedStoreId:v==="production"?Tt:A,currentCalculatedStock:v==="production"?window.__currentProductionHouseStock:void 0,onClose:()=>{Oe(!1),v==="production"&&(console.log(" Recalibration modal closed - refreshing data..."),Pe(null),ct(null),setTimeout(()=>{console.log(" Timeout complete - fetching latest recalibration..."),ne()},1500))},onSaveSuccess:()=>{console.log(" Recalibration saved successfully - triggering immediate refresh!"),Pe(null),ct(null),window.__currentProductionHouseStock=null,setTimeout(()=>{ne()},500)},isProductionHouse:v==="production"}),kt&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Bi,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Stock Alert Thresholds"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Customize alert levels for each momo type"})]})]}),n.jsx("button",{onClick:()=>{Gt(!1),Ie({})},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(qr,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Set three threshold levels for each momo type. When stock falls below these levels, color-coded alerts will appear on the stock cards."}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-green-200",children:[n.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"High: Stock above high threshold"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-yellow-200",children:[n.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Medium: Between medium and high"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-orange-200",children:[n.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Low: Between low and medium"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg p-2 border border-red-200",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Critical: Below low threshold or zero"})]})]})]}),n.jsx("div",{className:"p-6 space-y-6",children:(e.inventoryItems?.filter(be=>be.category==="finished_product"&&be.isActive)||[]).map(be=>{const he=be.name.replace(/_([a-z])/g,ve=>ve[1].toUpperCase());return{key:be.name,camelKey:he,label:be.displayName}}).map(({key:be,camelKey:he,label:ve})=>{const je=$e[he]??qt[he]??{high:600,medium:300,low:150};return n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-3",children:ve}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-green-700 font-semibold mb-1 block",children:"High Threshold (plates)"}),n.jsx("input",{type:"number",value:je.high,onChange:pe=>{Ie({...$e,[he]:{...je,high:Number(pe.target.value)}})},className:"w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",placeholder:"e.g., 1200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-yellow-700 font-semibold mb-1 block",children:"Medium Threshold (plates)"}),n.jsx("input",{type:"number",value:je.medium,onChange:pe=>{Ie({...$e,[he]:{...je,medium:Number(pe.target.value)}})},className:"w-full px-3 py-2 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-yellow-50",placeholder:"e.g., 600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-red-700 font-semibold mb-1 block",children:"Low Threshold (plates)"}),n.jsx("input",{type:"number",value:je.low,onChange:pe=>{Ie({...$e,[he]:{...je,low:Number(pe.target.value)}})},className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50",placeholder:"e.g., 300"})]})]})]},he)})}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:()=>{Gt(!1),Ie({})},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsxs("button",{onClick:()=>{Cr($e),Gt(!1),Ie({}),ur.success("Stock alert thresholds updated successfully")},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all flex items-center gap-2",children:[n.jsx(bo,{className:"w-5 h-5"}),"Save Thresholds"]})]})]})}),_t&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 p-6 rounded-t-2xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center border-2 border-white/30",children:n.jsx(Bi,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl text-white",children:"Plate Conversion Settings"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Configure momos per plate"})]})]}),n.jsx("button",{onClick:()=>{St(!1),Qt(Et)},className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-all",children:n.jsx(qr,{className:"w-6 h-6 text-white"})})]})]}),n.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[n.jsx("h3",{className:"text-gray-900 font-semibold mb-2",children:"How it works:"}),n.jsxs("p",{className:"text-sm text-gray-700",children:["Stock will be displayed as both pieces and plates. For example, if you have 170 momos and each plate contains 6 momos, it will show as ",n.jsx("span",{className:"font-mono bg-white px-2 py-1 rounded",children:"170 pcs / 28 plates"}),"."]})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("label",{className:"text-gray-900 font-semibold mb-3 block",children:"Momos Per Plate"}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-xl p-4",children:[n.jsx("input",{type:"number",min:"1",max:"20",value:mt,onChange:K=>{const Se=Number(K.target.value);Se>=1&&Se<=20&&Qt(Se)},className:"w-full px-4 py-3 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-center text-2xl font-bold",placeholder:"6"}),n.jsx("p",{className:"text-xs text-blue-700 mt-2 text-center",children:"Enter a number between 1 and 20"})]}),n.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Stock Available:"}),n.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["170 pcs / ",Math.round(170/mt)," plates"]})]})]})]}),n.jsxs("div",{className:"p-6 bg-gray-50 rounded-b-2xl border-t-2 border-gray-200 flex justify-between items-center",children:[n.jsx("button",{onClick:()=>{St(!1),Qt(Et)},className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all",children:"Cancel"}),n.jsxs("button",{onClick:()=>{Be(mt),localStorage.setItem("momosPerPlate",mt.toString()),St(!1),ur.success(`Plate conversion updated: ${mt} momos per plate`)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all flex items-center gap-2",children:[n.jsx(bo,{className:"w-5 h-5"}),"Save Settings"]})]})]})}),D&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(VE,{className:"w-6 h-6"}),n.jsx("h3",{className:"text-xl",children:"Leave Details - Today"})]}),n.jsx("button",{onClick:()=>Y(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:Q===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Dn,{className:"w-8 h-8 text-green-600"})}),n.jsx("p",{className:"text-lg text-gray-900 mb-2",children:"Everyone is working today! "}),n.jsx("p",{className:"text-sm text-gray-600",children:e.user?.storeId?"No employees on leave in this store":"No employees on leave across all stores"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("p",{className:"text-gray-700",children:[n.jsx("span",{className:"text-xl font-bold text-orange-600",children:Q})," ",Q===1?"employee":"employees"," on leave"]})}),n.jsx("div",{className:"space-y-3",children:J.map((K,Se)=>n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(Dn,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900 font-semibold",children:K.employeeName}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",K.employeeId]})]})]}),n.jsxs("div",{className:"ml-12 space-y-1",children:[K.storeName&&K.storeName!=="N/A"&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(dr,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{className:"text-gray-700",children:K.storeName}),K.storeId&&K.storeId!=="N/A"&&n.jsxs("span",{className:"text-gray-500",children:["(",K.storeId,")"]})]}),K.reason&&n.jsxs("div",{className:"flex items-start gap-2 text-sm mt-2",children:[n.jsx(Fs,{className:"w-4 h-4 text-gray-500 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 font-medium",children:"Reason:"}),n.jsx("p",{className:"text-gray-700",children:K.reason})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm mt-2",children:[n.jsx(Or,{className:"w-4 h-4 text-gray-500"}),n.jsxs("span",{className:"text-gray-600",children:["Date: ",qa(K.leaveDate)]})]})]})]}),n.jsx("div",{className:"ml-4",children:n.jsx("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Approved"})})]})},K.id||Se))})]})}),n.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end border-t border-gray-200",children:n.jsx("button",{onClick:()=>Y(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})}),E&&n.jsx(zge,{category:E.category,items:E.items,totalAmount:E.amount,onClose:()=>C(null)})]})}function SI({userRole:e,selectedStoreId:t,currentUserId:r}){const[a,s]=P.useState("today"),[i,o]=P.useState(""),[l,d]=P.useState(""),[u,f]=P.useState("csv"),[m,p]=P.useState(!1),[g,b]=P.useState(!1),[y,v]=P.useState(null),[N,k]=P.useState(null),w=hu();P.useEffect(()=>{(async()=>{const{data:{session:O}}=await w.auth.getSession();O?.access_token&&k(O.access_token)})()},[]);const A=()=>{const M=new Date;let O,U;switch(a){case"today":O=M.toISOString().split("T")[0],U=O;break;case"weekly":const ie=new Date(M);ie.setDate(M.getDate()-7),O=ie.toISOString().split("T")[0],U=M.toISOString().split("T")[0];break;case"monthly":const X=new Date(M.getFullYear(),M.getMonth(),1),re=new Date(M.getFullYear(),M.getMonth()+1,0);O=X.toISOString().split("T")[0],U=re.toISOString().split("T")[0];break;case"custom":O=i,U=l;break}return{startDate:O,endDate:U}},S=async()=>{const{startDate:M,endDate:O}=A();if(!M||!O)return alert("Please select a valid date range"),null;if(!N)return alert("Not authenticated. Please log in again."),null;try{p(!0);const[U,ie,X,re,oe,Q]=await Promise.all([vg(N),bg(N),C2(N),yl(),fc(),wg()]),F=(ce,me="date")=>ce.filter(Oe=>{const G=Oe[me],ze=G>=M&&G<=O;if(t){const ct=Oe.storeId===t;return ze&&ct}return ze}),J=F(U),L=F(ie),D=F(X),Y=F(oe),V=F(Q);console.log("Export Data Debug:",{selectedStoreId:t,totalInventory:U.length,filteredInventory:J.length,totalSales:X.length,filteredSales:D.length,totalOverheads:ie.length,filteredOverheads:L.length,sampleSalesStoreIds:X.slice(0,3).map(ce=>({date:ce.date,storeId:ce.storeId})),sampleOverheadStoreIds:ie.slice(0,3).map(ce=>({date:ce.date,storeId:ce.storeId}))});const ee=J.reduce((ce,me)=>ce+(me.totalCost||0),0),ge=L.reduce((ce,me)=>ce+(me.amount||0),0),ke=D.reduce((ce,me)=>ce+(me.offlineSales||0)+(me.onlineSales||0),0),Ce=Y.reduce((ce,me)=>ce+(me.amount||0),0);return{startDate:M,endDate:O,storeId:t,inventory:J,overheads:L,sales:D,employees:re,payouts:Y,production:V,summary:{totalInventorySpend:ee,totalOverheadSpend:ge,totalSales:ke,totalPayouts:Ce}}}catch(U){return console.error("Error fetching export data:",U),alert("Failed to fetch data for export"),null}finally{p(!1)}},_=async()=>{const M=await S();M&&(v(M),b(!0))},E=M=>{let O=`Data Export Report
`;return O+=`Period: ${M.startDate} to ${M.endDate}
`,M.storeId&&(O+=`Store ID: ${M.storeId}
`),O+=`Generated on: ${new Date().toLocaleString()}

`,O+=`SUMMARY
`,O+=`Total Inventory Spend,${M.summary.totalInventorySpend.toLocaleString()}
`,O+=`Total Overhead Spend,${M.summary.totalOverheadSpend.toLocaleString()}
`,O+=`Total Sales,${M.summary.totalSales.toLocaleString()}
`,O+=`Total Payouts,${M.summary.totalPayouts.toLocaleString()}
`,O+=`Net Profit/Loss,${(M.summary.totalSales-M.summary.totalInventorySpend-M.summary.totalOverheadSpend-M.summary.totalPayouts).toLocaleString()}

`,O+=`
INVENTORY ITEMS
`,O+=`Date,Category,Item Name,Quantity,Unit,Price per Unit,Total Cost
`,M.inventory.forEach(U=>{O+=`${U.date},"${U.category}","${U.itemName}",${U.quantity},"${U.unit}",${U.price||0},${U.totalCost}
`}),M.production&&M.production.length>0&&(O+=`
PRODUCTION DATA
`,O+=`Date,Chicken Momos,Chicken Cheese,Veg Momos,Cheese Corn,Paneer,Veg Kurkure,Chicken Kurkure,Wastage (kg)
`,M.production.forEach(U=>{O+=`${U.date},${U.chickenMomos?.final||0},${U.chickenCheeseMomos?.final||0},${U.vegMomos?.final||0},${U.cheeseCornMomos?.final||0},${U.paneerMomos?.final||0},${U.vegKurkureMomos?.final||0},${U.chickenKurkureMomos?.final||0},${U.wastage?.total||0}
`})),O+=`
OVERHEAD EXPENSES
`,O+=`Date,Category,Description,Amount
`,M.overheads.forEach(U=>{O+=`${U.date},"${U.category}","${U.description||"-"}",${U.amount}
`}),O+=`
SALES DATA
`,O+=`Date,Offline Sales (Paytm),Offline Sales (Cash),Online Sales,Employee Salaries,Cash in Hand,Cash Offset,Status
`,M.sales.forEach(U=>{O+=`${U.date},${U.paytmAmount||0},${U.cashAmount||0},${U.onlineSales||0},${U.employeeSalary||0},${U.actualCashInHand||0},${U.cashOffset||0},"${U.approvalRequired?"Pending Approval":"Approved"}"
`}),O+=`
EMPLOYEE PAYOUTS
`,O+=`Date,Employee Name,Employee ID,Amount
`,M.payouts.forEach(U=>{const ie=M.employees.find(X=>X.id===U.employeeId);O+=`${U.date},"${U.employeeName}","${ie?.employeeId||"-"}",${U.amount}
`}),O+=`
EMPLOYEE MASTER LIST
`,O+=`Employee ID,Name,Type,Role,Phone,Daily Rate
`,M.employees.forEach(U=>{O+=`"${U.employeeId}","${U.name}","${U.type}","${U.role||"-"}","${U.phone}",${U.dailyRate||"-"}
`}),O},C=M=>E(M),I=M=>`
      <html>
        <head>
          <title>Data Export Report</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h1 { color: #333; border-bottom: 2px solid #4F46E5; padding-bottom: 10px; }
            h2 { color: #4F46E5; margin-top: 30px; }
            table { width: 100%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #4F46E5; color: white; }
            .summary { background-color: #f0f9ff; padding: 15px; border-radius: 8px; margin: 20px 0; }
            .summary-item { display: flex; justify-content: space-between; padding: 5px 0; }
          </style>
        </head>
        <body>
          <h1>Data Export Report</h1>
          <p><strong>Period:</strong> ${M.startDate} to ${M.endDate}</p>
          ${M.storeId?`<p><strong>Store ID:</strong> ${M.storeId}</p>`:""}
          <p><strong>Generated on:</strong> ${new Date().toLocaleString()}</p>
          
          <div class="summary">
            <h2>Summary</h2>
            <div class="summary-item"><span>Total Inventory Spend:</span><span>${M.summary.totalInventorySpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Overhead Spend:</span><span>${M.summary.totalOverheadSpend.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Sales:</span><span>${M.summary.totalSales.toLocaleString()}</span></div>
            <div class="summary-item"><span>Total Payouts:</span><span>${M.summary.totalPayouts.toLocaleString()}</span></div>
            <div class="summary-item"><strong>Net Profit/Loss:</strong><strong>${(M.summary.totalSales-M.summary.totalInventorySpend-M.summary.totalOverheadSpend-M.summary.totalPayouts).toLocaleString()}</strong></div>
          </div>

          <h2>Inventory Items</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Item Name</th><th>Quantity</th><th>Unit</th><th>Price/Unit</th><th>Total Cost</th></tr>
            </thead>
            <tbody>
              ${M.inventory.map(U=>`
                <tr>
                  <td>${U.date}</td>
                  <td>${U.category}</td>
                  <td>${U.itemName}</td>
                  <td>${U.quantity}</td>
                  <td>${U.unit}</td>
                  <td>${U.price||0}</td>
                  <td>${U.totalCost}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          ${M.production&&M.production.length>0?`
          <h2>Production Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Chicken Momos</th><th>Chicken Cheese</th><th>Veg Momos</th><th>Cheese Corn</th><th>Paneer</th><th>Veg Kurkure</th><th>Chicken Kurkure</th><th>Wastage (kg)</th></tr>
            </thead>
            <tbody>
              ${M.production.map(U=>`
                <tr>
                  <td>${U.date}</td>
                  <td>${U.chickenMomos?.final||0}</td>
                  <td>${U.chickenCheeseMomos?.final||0}</td>
                  <td>${U.vegMomos?.final||0}</td>
                  <td>${U.cheeseCornMomos?.final||0}</td>
                  <td>${U.paneerMomos?.final||0}</td>
                  <td>${U.vegKurkureMomos?.final||0}</td>
                  <td>${U.chickenKurkureMomos?.final||0}</td>
                  <td>${U.wastage?.total||0}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          `:""}

          <h2>Overhead Expenses</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Category</th><th>Description</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${M.overheads.map(U=>`
                <tr>
                  <td>${U.date}</td>
                  <td>${U.category}</td>
                  <td>${U.description||"-"}</td>
                  <td>${U.amount}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Sales Data</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Offline (Paytm)</th><th>Offline (Cash)</th><th>Online</th><th>Salaries</th><th>Cash in Hand</th><th>Cash Offset</th><th>Status</th></tr>
            </thead>
            <tbody>
              ${M.sales.map(U=>`
                <tr>
                  <td>${U.date}</td>
                  <td>${U.paytmAmount||0}</td>
                  <td>${U.cashAmount||0}</td>
                  <td>${U.onlineSales||0}</td>
                  <td>${U.employeeSalary||0}</td>
                  <td>${U.actualCashInHand||0}</td>
                  <td>${U.cashOffset||0}</td>
                  <td>${U.approvalRequired?"Pending":"Approved"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <h2>Employee Payouts</h2>
          <table>
            <thead>
              <tr><th>Date</th><th>Employee Name</th><th>Employee ID</th><th>Amount</th></tr>
            </thead>
            <tbody>
              ${M.payouts.map(U=>{const ie=M.employees.find(X=>X.id===U.employeeId);return`
                  <tr>
                    <td>${U.date}</td>
                    <td>${U.employeeName}</td>
                    <td>${ie?.employeeId||"-"}</td>
                    <td>${U.amount}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <h2>Employee Master List</h2>
          <table>
            <thead>
              <tr><th>Employee ID</th><th>Name</th><th>Type</th><th>Role</th><th>Phone</th><th>Daily Rate</th></tr>
            </thead>
            <tbody>
              ${M.employees.map(U=>`
                <tr>
                  <td>${U.employeeId}</td>
                  <td>${U.name}</td>
                  <td>${U.type}</td>
                  <td>${U.role||"-"}</td>
                  <td>${U.phone}</td>
                  <td>${U.dailyRate?""+U.dailyRate:"-"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `,B=async()=>{const M=await S();if(!M)return;let O,U,ie;const X=`${M.startDate}_to_${M.endDate}`;switch(u){case"csv":O=E(M),U="text/csv",ie=`export_${X}.csv`;break;case"excel":O=C(M),U="application/vnd.ms-excel",ie=`export_${X}.xls`;break;case"pdf":O=I(M),U="text/html",ie=`export_${X}.html`;break;default:return}const re=new Blob([O],{type:U}),oe=URL.createObjectURL(re),Q=document.createElement("a");Q.href=oe,Q.download=ie,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(oe),alert(`Data exported successfully as ${ie}`)};return n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Export Data"}),n.jsx("p",{className:"text-gray-600",children:"Download comprehensive reports in multiple formats"}),t&&n.jsxs("div",{className:"mt-2 inline-block bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:["Store: ",t]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5 text-purple-600"}),"Select Date Range"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("button",{onClick:()=>s("today"),className:`p-4 rounded-lg border-2 transition-all ${a==="today"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Today"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current day"})]}),n.jsxs("button",{onClick:()=>s("weekly"),className:`p-4 rounded-lg border-2 transition-all ${a==="weekly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Last 7 Days"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Weekly data"})]}),n.jsxs("button",{onClick:()=>s("monthly"),className:`p-4 rounded-lg border-2 transition-all ${a==="monthly"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"This Month"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly data"})]}),n.jsxs("button",{onClick:()=>s("custom"),className:`p-4 rounded-lg border-2 transition-all ${a==="custom"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-purple-300"}`,children:[n.jsx("div",{className:"font-medium",children:"Custom"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Select range"})]})]}),a==="custom"&&n.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Start Date"}),n.jsx("input",{type:"date",value:i,onChange:M=>o(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"End Date"}),n.jsx("input",{type:"date",value:l,onChange:M=>d(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Fs,{className:"w-5 h-5 text-blue-600"}),"Select Export Format"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs("button",{onClick:()=>f("csv"),className:`p-4 rounded-lg border-2 transition-all ${u==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(WB,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"CSV"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel compatible"})]}),n.jsxs("button",{onClick:()=>f("excel"),className:`p-4 rounded-lg border-2 transition-all ${u==="excel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(Vm,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"Excel"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"XLS format"})]}),n.jsxs("button",{onClick:()=>f("pdf"),className:`p-4 rounded-lg border-2 transition-all ${u==="pdf"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300"}`,children:[n.jsx(Fs,{className:"w-8 h-8 mx-auto mb-2"}),n.jsx("div",{className:"font-medium",children:"PDF/HTML"}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Print ready"})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-[#E8D5F2] to-[#D4B5F0] rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Will Include:"}),n.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[n.jsx("li",{children:" Complete Inventory Items with quantities and costs"}),n.jsx("li",{children:" Production Data with all momo types and wastage"}),n.jsx("li",{children:" All Overhead Expenses categorized"}),n.jsx("li",{children:" Sales Data with payment breakdowns"}),n.jsx("li",{children:" Employee Payouts with detailed records"}),n.jsx("li",{children:" Employee Master List"}),n.jsx("li",{children:" Financial Summary with profit/loss calculations"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:_,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-purple-600 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:opacity-50",children:[n.jsx(Fs,{className:"w-5 h-5"}),"Preview Data"]}),n.jsxs("button",{onClick:B,disabled:m,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-colors disabled:opacity-50",children:[n.jsx(Os,{className:"w-5 h-5"}),m?"Generating...":"Export Data"]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Export Tips"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"}),n.jsx("li",{children:" PDF/HTML exports are best for printing or sharing reports"}),n.jsx("li",{children:" Custom date ranges allow you to export specific time periods"}),n.jsx("li",{children:" All monetary values are in Indian Rupees ()"})]})]})]})}),e==="cluster_head"&&n.jsx("div",{className:"mt-6 bg-red-50 border-2 border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-lg",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Production Data Cleanup"}),n.jsxs("p",{className:"text-sm text-red-800 mb-4",children:["Remove ALL transactional data (inventory logs, sales, stock requests, production data, notifications, etc.) to prepare for production launch.",n.jsx("strong",{className:"block mt-2",children:" This will DELETE:"})]}),n.jsxs("ul",{className:"text-sm text-red-800 space-y-1 ml-4 mb-3",children:[n.jsx("li",{children:" All inventory purchase logs"}),n.jsx("li",{children:" All sales records"}),n.jsx("li",{children:" All production logs & requests"}),n.jsx("li",{children:" All stock requests & recalibrations"}),n.jsx("li",{children:" All overhead & fixed costs"}),n.jsx("li",{children:" All notifications"})]}),n.jsx("p",{className:"text-sm text-green-800 mb-4",children:n.jsx("strong",{className:"block mt-2",children:" This will PRESERVE:"})}),n.jsxs("ul",{className:"text-sm text-green-800 space-y-1 ml-4 mb-4",children:[n.jsx("li",{children:" Inventory Items (product metadata)"}),n.jsx("li",{children:" Employee Master Data"}),n.jsx("li",{children:" Employee Payouts, Timesheets & Leaves"}),n.jsx("li",{children:" Stores & Production Houses"})]}),n.jsxs("button",{onClick:async()=>{if(confirm(` CRITICAL WARNING: This will PERMANENTLY remove ALL transactional data:

 Inventory logs, Sales, Production data, Stock requests, Overheads, Fixed costs, Notifications

 PRESERVED: Inventory items metadata, Employee master data, Payouts, Timesheets, Leaves, Stores, Production houses

This action CANNOT be undone!

Are you absolutely sure you want to proceed?`))try{p(!0);const M=await OD();alert(` ${M.message}

 Total Deleted: ${M.totalDeleted} records

 Breakdown:
- Inventory Logs: ${M.stats.inventory}
- Sales: ${M.stats.sales}
- Item Sales: ${M.stats.itemSales}
- Overheads: ${M.stats.overheads}
- Fixed Costs: ${M.stats.fixedCosts}
- Stock Requests: ${M.stats.stockRequests}
- Stock Recalibrations: ${M.stats.stockRecalibrations}
- Production Data: ${M.stats.productionData}
- Production Requests: ${M.stats.productionRequests}
- Notifications: ${M.stats.notifications}`),window.location.reload()}catch(M){console.error("Error during cleanup:",M),alert(` Failed to cleanup production data: ${M.message}`)}finally{p(!1)}},disabled:m,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[n.jsx("span",{children:""}),m?"Cleaning up...":"Cleanup Production Data"]}),n.jsx("p",{className:"text-xs text-red-700 mt-3",children:" This action cannot be undone. Make sure you have exported all necessary data first."})]})]})})]}),g&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Data Preview"}),n.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Summary"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Inventory"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalInventorySpend.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Overheads"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalOverheadSpend.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Sales"}),n.jsxs("div",{className:"text-xl text-green-600",children:["",y.summary.totalSales.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payouts"}),n.jsxs("div",{className:"text-xl text-gray-900",children:["",y.summary.totalPayouts.toLocaleString()]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium text-gray-900",children:"Net Profit/Loss:"}),n.jsxs("span",{className:`text-xl font-bold ${y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts>=0?"text-green-600":"text-red-600"}`,children:["",(y.summary.totalSales-y.summary.totalInventorySpend-y.summary.totalOverheadSpend-y.summary.totalPayouts).toLocaleString()]})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Inventory Items"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.inventory.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Production Logs"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.production?.length||0})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Overhead Entries"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.overheads.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Sales Records"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.sales.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payout Records"}),n.jsx("div",{className:"text-2xl text-gray-900",children:y.payouts.length})]})]}),n.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[n.jsxs("p",{children:["Period: ",y.startDate," to ",y.endDate]}),y.storeId&&n.jsxs("p",{children:["Store ID: ",y.storeId]}),n.jsx("p",{className:"mt-2",children:'Click "Export Data" to download the complete report'})]})]})]})})]})}const Gge=(e,t,r,a,s,i)=>{const o=s.reduce((u,f)=>u+f.amount,0),l=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Payslip - ${r} ${a}</title>
      <style>
        body {
          font-family: 'Arial', sans-serif;
          margin: 0;
          padding: 20px;
          color: #333;
        }
        .payslip-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #9333ea;
          padding: 30px;
          background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        .header {
          text-align: center;
          border-bottom: 3px solid #9333ea;
          padding-bottom: 20px;
          margin-bottom: 30px;
        }
        .company-name {
          font-size: 32px;
          font-weight: bold;
          color: #9333ea;
          margin-bottom: 5px;
        }
        .company-tagline {
          font-size: 14px;
          color: #666;
          font-style: italic;
        }
        .payslip-title {
          font-size: 24px;
          color: #9333ea;
          margin: 20px 0 10px 0;
          font-weight: bold;
        }
        .payslip-period {
          font-size: 16px;
          color: #666;
          margin-bottom: 20px;
        }
        .info-section {
          display: table;
          width: 100%;
          margin-bottom: 30px;
        }
        .info-row {
          display: table-row;
        }
        .info-label {
          display: table-cell;
          padding: 10px 0;
          font-weight: bold;
          color: #9333ea;
          width: 40%;
        }
        .info-value {
          display: table-cell;
          padding: 10px 0;
          color: #333;
        }
        .payment-table {
          width: 100%;
          border-collapse: collapse;
          margin: 20px 0;
          background: white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .payment-table th {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
        }
        .payment-table td {
          padding: 12px;
          border-bottom: 1px solid #e5e7eb;
        }
        .payment-table tr:last-child td {
          border-bottom: none;
        }
        .payment-table tr:nth-child(even) {
          background: #faf5ff;
        }
        .total-section {
          background: linear-gradient(135deg, #9333ea 0%, #c084fc 100%);
          color: white;
          padding: 20px;
          margin-top: 30px;
          border-radius: 8px;
          text-align: center;
        }
        .total-label {
          font-size: 18px;
          margin-bottom: 10px;
        }
        .total-amount {
          font-size: 36px;
          font-weight: bold;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 2px solid #9333ea;
          text-align: center;
          font-size: 12px;
          color: #666;
        }
        .signature-section {
          margin-top: 60px;
          display: flex;
          justify-content: space-between;
        }
        .signature-box {
          text-align: center;
          width: 45%;
        }
        .signature-line {
          border-top: 2px solid #9333ea;
          margin-top: 50px;
          padding-top: 10px;
          font-weight: bold;
          color: #9333ea;
        }
        @media print {
          body {
            padding: 0;
          }
          .payslip-container {
            border: none;
            box-shadow: none;
          }
        }
      </style>
    </head>
    <body>
      <div class="payslip-container">
        <div class="header">
          <div class="company-name">BHANDAR-IMS</div>
          <div class="company-tagline">Food Business Inventory Management System</div>
          <div class="payslip-title">SALARY SLIP</div>
          <div class="payslip-period">For the Month of ${r} ${a}</div>
        </div>
        
        <div class="info-section">
          <div class="info-row">
            <div class="info-label">Employee Name:</div>
            <div class="info-value">${e}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee ID:</div>
            <div class="info-value">${t}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Employee Type:</div>
            <div class="info-value">${i==="fulltime"?"Permanent":"Contract"}</div>
          </div>
          <div class="info-row">
            <div class="info-label">Payment Date:</div>
            <div class="info-value">${new Date().toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}</div>
          </div>
        </div>

        <table class="payment-table">
          <thead>
            <tr>
              <th>Payment Date</th>
              <th>Description</th>
              <th style="text-align: right;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
            ${s.map(u=>`
              <tr>
                <td>${new Date(u.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}</td>
                <td>${i==="fulltime"?"Salary Payment":"Daily Wage Payment"}</td>
                <td style="text-align: right;">${u.amount.toLocaleString("en-IN")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-label">Net ${i==="fulltime"?"Salary":"Payment"} for ${r} ${a}</div>
          <div class="total-amount">${o.toLocaleString("en-IN")}</div>
        </div>

        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line">Employee Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line">Authorized Signatory</div>
          </div>
        </div>

        <div class="footer">
          <p>This is a computer-generated payslip and does not require a signature.</p>
          <p> ${a} Bhandar-IMS. All rights reserved.</p>
        </div>
      </div>
    </body>
    </html>
  `,d=window.open("","_blank");d&&(d.document.write(l),d.document.close(),d.onload=()=>{d.print()})};function _I({employeeId:e}){const[t,r]=P.useState(null),[a,s]=P.useState([]),[i,o]=P.useState(!0),[l,d]=P.useState("payouts"),[u,f]=P.useState(()=>{const X=new Date;return`${X.getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}`}),[m,p]=P.useState(null),[g,b]=P.useState(null),[y,v]=P.useState([]),[N,k]=P.useState(!1),[w,A]=P.useState("");P.useEffect(()=>{S()},[e]);const S=async()=>{try{o(!0);const X=await yl(),re=X.find(oe=>oe.employeeId===e);if(re){r(re);const Q=(await fc()).filter(L=>L.employeeId===re.id);s(Q);const J=(await O2()).filter(L=>L.employeeId===re.id);if(v(J),re.inchargeId){const L=X.find(D=>D.id===re.inchargeId);if(L&&(p(L),L.inchargeId)){const D=X.find(Y=>Y.id===L.inchargeId);D&&b(D)}}}}catch(X){console.error("Error loading employee data:",X)}finally{o(!1)}},_=async()=>{try{const X=parseFloat(w);if(!X||X<=0){alert("Please enter a valid amount");return}if(!t.monthlySalary){alert("Your salary information is not available. Please contact HR.");return}if(X>t.monthlySalary){alert("Advance amount cannot exceed your monthly salary");return}if(y.find(V=>V.status==="pending"||V.status==="approved"&&V.remainingAmount>0)){alert("You already have an active or pending salary advance. Please wait for it to be processed or completed.");return}const oe=X/4,Q=new Date,F=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`,J=[];for(let V=0;V<4;V++){const ee=new Date(Q.getFullYear(),Q.getMonth()+V,1),ge=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`;J.push({month:ge,amount:oe,deducted:!1})}const L=new Date(Q.getFullYear(),Q.getMonth()+3,1),D=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`,Y={employeeId:t.id,employeeName:t.name,employeeEmployeeId:t.employeeId,amount:X,requestDate:new Date().toISOString(),status:"pending",installments:4,monthlyDeduction:oe,remainingAmount:X,startMonth:F,endMonth:D,deductions:J};await P2(Y),alert("Salary advance request submitted successfully! Your request will be reviewed by the Cluster Head."),k(!1),A(""),S()}catch(X){console.error("Error applying for salary advance:",X),alert("Failed to submit salary advance request. Please try again.")}},C=(()=>{if(!u)return a;const[X,re]=u.split("-");return a.filter(oe=>{const Q=new Date(oe.date);return Q.getFullYear()===parseInt(X)&&Q.getMonth()+1===parseInt(re)})})(),I=C.reduce((X,re)=>X+re.amount,0),B=(X,re)=>!X&&!re?"N/A":X?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[X]||X:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[re||""]||re||"N/A",M=X=>["January","February","March","April","May","June","July","August","September","October","November","December"][X],U=(()=>{const X=new Date,re=[];for(let oe=0;oe<12;oe++){const Q=new Date(X.getFullYear(),X.getMonth()-oe,1),F=M(Q.getMonth()),J=Q.getFullYear().toString(),L=a.filter(ee=>{const ge=new Date(ee.date);return ge.getMonth()===Q.getMonth()&&ge.getFullYear()===Q.getFullYear()}),D=L.reduce((ee,ge)=>ee+ge.amount,0),Y=new Date(Q.getFullYear(),Q.getMonth()+1,5),V=X>=Y;re.push({month:F,year:J,payouts:L,total:D,isAvailable:V})}return re})(),ie=()=>{const X=[],re=new Date;for(let oe=0;oe<12;oe++){const Q=new Date(re.getFullYear(),re.getMonth()-oe,1),F=`${Q.getFullYear()}-${String(Q.getMonth()+1).padStart(2,"0")}`;X.push({value:F,label:Q.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return X};return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your data..."})]})}):t?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Welcome, ",t.name,"!"]}),n.jsx("p",{className:"text-gray-600",children:"View your payout history and employee details"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("h2",{className:"text-lg text-gray-900 mb-4",children:"Employee Information"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.employeeId})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Name"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.name})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Type"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.type==="fulltime"?" Permanent":" Contract"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Role"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.role||"N/A"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Phone"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.phone})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),n.jsx("div",{className:"font-medium text-gray-900",children:t.email||"N/A"})]}),t.dailyRate&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Daily Rate"}),n.jsxs("div",{className:"font-medium text-gray-900",children:["",t.dailyRate]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-6",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"My Details"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>d("payouts"),className:`px-6 py-2 rounded-lg transition-colors ${l==="payouts"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"w-4 h-4"}),n.jsx("span",{children:"My Payouts"})]})}),n.jsx("button",{onClick:()=>d("advance"),className:`px-6 py-2 rounded-lg transition-colors ${l==="advance"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pl,{className:"w-4 h-4"}),n.jsx("span",{children:"Salary Advance"})]})}),n.jsx("button",{onClick:()=>d("manager"),className:`px-6 py-2 rounded-lg transition-colors ${l==="manager"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Va,{className:"w-4 h-4"}),n.jsx("span",{children:"My Manager"})]})})]})]}),n.jsxs("div",{className:"p-6",children:[l==="payouts"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("h3",{className:"text-lg text-gray-900 flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5 text-blue-600"}),"Select Month"]})}),n.jsx("select",{value:u,onChange:X=>f(X.target.value),className:"w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg",children:ie().map(X=>n.jsx("option",{value:X.value,children:X.label},X.value))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-6 border border-green-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Payouts"}),n.jsx(jn,{className:"w-5 h-5 text-green-600"})]}),n.jsxs("div",{className:"text-2xl text-gray-900",children:["",I.toLocaleString()]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[C.length," payment",C.length!==1?"s":""]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Average Payout"}),n.jsx(pn,{className:"w-5 h-5 text-blue-600"})]}),n.jsxs("div",{className:"text-2xl text-gray-900",children:["",C.length>0?Math.round(I/C.length).toLocaleString():0]}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Per payment"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-6 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Payment Days"}),n.jsx(ji,{className:"w-5 h-5 text-purple-600"})]}),n.jsx("div",{className:"text-2xl text-gray-900",children:C.length}),n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"This month"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden mb-6",children:[n.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Payout History"})}),C.length===0?n.jsxs("div",{className:"p-12 text-center bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(ji,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg text-gray-900 mb-2",children:"No Payouts Yet"}),n.jsx("p",{className:"text-gray-600",children:"No payouts recorded for the selected month."})]}):n.jsx("div",{className:"overflow-x-auto bg-white",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:C.sort((X,re)=>new Date(re.date).getTime()-new Date(X.date).getTime()).map(X=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(X.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),n.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:["",X.amount.toLocaleString()]}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.type==="fulltime"?"Salary":"Daily Wage"}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" Paid"})})]},X.id))})]})})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Monthly Payslips"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Payslips are available for download after the 4th of each month"})]}),n.jsx("div",{className:"p-6 bg-white",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map((X,re)=>n.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${X.isAvailable&&X.payouts.length>0?"border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 font-semibold",children:[X.month," ",X.year]}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[X.payouts.length," payment",X.payouts.length!==1?"s":""]})]}),X.isAvailable&&X.payouts.length>0?n.jsxs("button",{onClick:()=>Gge(t.name,t.employeeId,X.month,X.year,X.payouts,t.type),className:"flex items-center gap-2 px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",title:"Download Payslip",children:[n.jsx(Os,{className:"w-4 h-4"}),"Download"]}):n.jsx("div",{className:"px-3 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm cursor-not-allowed",children:X.payouts.length===0?"No Data":"Not Available"})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-300",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Amount"}),n.jsxs("p",{className:"text-xl text-gray-900 font-semibold",children:["",X.total.toLocaleString("en-IN")]})]})]},re))})})]})]}),l==="advance"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Salary Advance"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Apply for salary advance with automatic 4-month recovery"})]}),t.type==="fulltime"&&n.jsxs("button",{onClick:()=>k(!0),disabled:y.some(X=>X.status==="pending"||X.status==="approved"&&X.remainingAmount>0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(pl,{className:"w-5 h-5"}),n.jsx("span",{children:"Apply for Advance"})]})]}),t.type!=="fulltime"&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-800 font-medium",children:"Not Available"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Salary advance is only available for permanent employees"})]})]})}),y.length>0?n.jsx("div",{className:"space-y-4",children:y.map(X=>n.jsxs("div",{className:`border-2 rounded-xl p-6 ${X.status==="pending"?"border-yellow-300 bg-yellow-50":X.status==="approved"?"border-green-300 bg-green-50":"border-red-300 bg-red-50"}`,children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["",X.amount.toLocaleString("en-IN")," Advance"]}),X.status==="pending"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx(_n,{className:"w-3 h-3"}),"Pending Approval"]}),X.status==="approved"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[n.jsx(or,{className:"w-3 h-3"}),"Approved"]}),X.status==="rejected"&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:[n.jsx(Qn,{className:"w-3 h-3"}),"Rejected"]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Applied on ",new Date(X.requestDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})}),X.status==="rejected"&&X.rejectionReason&&n.jsxs("div",{className:"bg-red-100 border border-red-200 rounded-lg p-3 mb-4",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Rejection Reason:"}),n.jsx("p",{className:"text-sm text-red-700",children:X.rejectionReason})]}),X.status==="approved"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Monthly Deduction"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",X.monthlyDeduction.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Remaining Balance"}),n.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["",X.remainingAmount.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Start Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[re,oe]=X.startMonth.split("-");return new Date(parseInt(re),parseInt(oe)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"End Month"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:(()=>{const[re,oe]=X.endMonth.split("-");return new Date(parseInt(re),parseInt(oe)-1,1).toLocaleDateString("en-US",{month:"short",year:"numeric"})})()})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Deduction Schedule"}),n.jsx("div",{className:"space-y-2",children:X.deductions.map((re,oe)=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${re.deducted?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[re.deducted?n.jsx(or,{className:"w-5 h-5 text-green-600"}):n.jsx(_n,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(re.month+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),re.deducted&&re.deductedDate&&n.jsxs("p",{className:"text-xs text-gray-600",children:["Deducted on ",new Date(re.deductedDate).toLocaleDateString("en-IN")]})]})]}),n.jsxs("p",{className:`text-sm font-semibold ${re.deducted?"text-green-700":"text-gray-700"}`,children:["",re.amount.toLocaleString("en-IN")]})]},oe))})]})]})]},X.id))}):n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[n.jsx(pl,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No Salary Advances Yet"}),n.jsx("p",{className:"text-sm text-gray-500",children:t.type==="fulltime"?'Click "Apply for Advance" to request a salary advance':"Salary advance is only available for permanent employees"})]})]}),l==="manager"&&n.jsx("div",{children:m?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:m.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:m.name}),n.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Your Manager / Incharge"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:m.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[n.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(hm,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(hm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.phone||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Wh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.email||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Km,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),n.jsx("div",{className:"font-medium text-gray-900",children:B(m.designation,m.role)||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Va,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:m.employeeId||"N/A"})]})]})]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Manager"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Your manager is responsible for processing your payouts and leave requests"}),n.jsx("li",{children:" For any work-related queries or concerns, please contact your manager"}),n.jsx("li",{children:" Your manager has been assigned by the cluster head to oversee your work"})]})]})]})}),g&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-white text-2xl flex-shrink-0",children:g.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-1",children:g.name}),n.jsx("p",{className:"text-sm text-purple-700 font-medium mb-3",children:"Senior Manager / Incharge"}),n.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:g.type==="fulltime"?"Permanent Employee":"Contract Employee"})]})]})}),g&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[n.jsxs("h4",{className:"text-lg text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(hm,{className:"w-5 h-5 text-blue-600"}),"Contact Information"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(hm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Phone Number"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.phone||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Wh,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Email Address"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.email||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Km,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Role / Position"}),n.jsx("div",{className:"font-medium text-gray-900",children:B(g.designation,g.role)||"N/A"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[n.jsx(Va,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Employee ID"}),n.jsx("div",{className:"font-medium text-gray-900",children:g.employeeId||"N/A"})]})]})]})]}),g&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Senior Manager"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Your senior manager is responsible for processing your payouts and leave requests"}),n.jsx("li",{children:" For any work-related queries or concerns, please contact your senior manager"}),n.jsx("li",{children:" Your senior manager has been assigned by the cluster head to oversee your work"})]})]})]})})]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Va,{className:"w-10 h-10 text-gray-400"})}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Manager Assigned"}),n.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"You don't have a manager or incharge assigned yet. Please contact your cluster head for more information."})]})})]})]}),l==="payouts"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"About Your Payouts"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" All payouts are processed and recorded by your manager or cluster head"}),n.jsx("li",{children:" This dashboard shows only your personal payout history"}),n.jsx("li",{children:" For any discrepancies, please contact your manager"}),n.jsx("li",{children:" Payment history is available for the last 12 months"})]})]})]})}),N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Apply for Salary Advance"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Amount will be deducted over 4 months"})]}),n.jsx("button",{onClick:()=>{k(!1),A("")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Qn,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Your Monthly Salary"}),n.jsxs("p",{className:"text-2xl font-semibold text-purple-900",children:["",t.monthlySalary?.toLocaleString("en-IN")||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Amount ()"}),n.jsx("input",{type:"number",value:w,onChange:X=>A(X.target.value),placeholder:"Enter amount",max:t.monthlySalary||0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",t.monthlySalary?.toLocaleString("en-IN")]})]}),w&&parseFloat(w)>0&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Deduction Schedule:"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Monthly Deduction:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:["",(parseFloat(w)/4).toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Duration:"}),n.jsx("span",{className:"font-semibold text-blue-900",children:"4 Months"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-blue-800",children:"Total Amount:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:["",parseFloat(w).toLocaleString("en-IN")]})]})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"Important:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[n.jsx("li",{children:"Your request will be sent to Cluster Head for approval"}),n.jsx("li",{children:"The amount will be deducted equally over 4 months"}),n.jsx("li",{children:"Deductions will start from your next salary payment"}),n.jsx("li",{children:"You cannot apply for another advance until this one is recovered"})]})]})]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{k(!1),A("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),n.jsx("button",{onClick:_,disabled:!w||parseFloat(w)<=0||parseFloat(w)>(t.monthlySalary||0),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Submit Request"})]})]})})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"Employee Not Found"}),n.jsx("p",{className:"text-gray-600",children:"Your employee profile hasn't been set up yet. Please contact your manager or cluster head."})]})})}function y2({context:e,selectedStoreId:t}){const[r,a]=P.useState(new Date().toISOString().split("T")[0]),[s,i]=P.useState("entry"),[o,l]=P.useState(!1),[d,u]=P.useState(!1),[f,m]=P.useState(!1),p=e.user?.designation==="production_incharge",g=e.user?.role==="manager"&&e.user?.designation!=="store_incharge"&&e.user?.designation!=="production_incharge",b=e.user?.role==="cluster_head",y=p,v=g,N=g||b,k=P.useMemo(()=>{const C=t||e.user?.storeId;en.debugProduction("ProductionManagement - effectiveStoreId:",C),en.debugProduction("ProductionManagement - selectedStoreId prop:",t),en.debugProduction("ProductionManagement - user storeId:",e.user?.storeId);const I=C?e.productionData.filter(B=>B.storeId===C):e.productionData;return en.debugProduction("ProductionManagement - filtered production count:",I.length),I.find(B=>B.date===r)},[e.productionData,r,t,e.user?.storeId]),[w,A]=P.useState({date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}});P.useEffect(()=>{A(k?{date:k.date,chickenMomos:k.chickenMomos,chickenCheeseMomos:k.chickenCheeseMomos,vegMomos:k.vegMomos,cheeseCornMomos:k.cheeseCornMomos,paneerMomos:k.paneerMomos,vegKurkureMomos:k.vegKurkureMomos,chickenKurkureMomos:k.chickenKurkureMomos,wastage:k.wastage,sauces:k.sauces}:{date:r,chickenMomos:{dough:0,stuffing:0,final:0},chickenCheeseMomos:{dough:0,stuffing:0,final:0},vegMomos:{dough:0,stuffing:0,final:0},cheeseCornMomos:{dough:0,stuffing:0,final:0},paneerMomos:{dough:0,stuffing:0,final:0},vegKurkureMomos:{batter:0,coating:0,final:0},chickenKurkureMomos:{batter:0,coating:0,final:0},wastage:{dough:0,stuffing:0,batter:0,coating:0},sauces:{panfriedSauce:0,chilliChickenSauce:0,spicyKoreanSauce:0,hotGarlicSauce:0,tandooriSauce:0,soupPremix:0,greenMayoChutney:0,spicyRedChutney:0}})},[r,k]);const S=async C=>{if(C.preventDefault(),o){en.warn("Submission already in progress, ignoring duplicate request");return}const I={...w,date:r,createdBy:e.user?.employeeId||e.user?.email||"unknown",approvalStatus:"pending",approvedBy:null,approvedAt:null,storeId:e.user?.storeId||void 0,productionHouseId:e.user?.storeId||void 0};console.log(" Saving Production Data:"),console.log("  - User storeId:",e.user?.storeId),console.log("  - Production data storeId:",I.storeId),console.log("  - Production data productionHouseId:",I.productionHouseId),console.log("  - Full production data:",I);try{l(!0),k?(await e.updateProductionData(k.id,I),alert("Production data updated successfully!")):(await e.addProductionData(I),alert("Production data saved successfully!"))}catch(B){console.error("Error saving production data:",B),alert("Failed to save production data. Please try again.")}finally{l(!1)}},_=async()=>{if(k){if(d){console.log(" Approval already in progress, ignoring duplicate request");return}try{u(!0),await e.approveProductionData(k.id);const C=e.productionHouses.find(I=>I.productionHeadId===e.user?.employeeId);if(C&&k){const I={...C.inventory},B=k;Object.entries({chickenMomos:"chicken",chickenCheeseMomos:"chickenCheese",vegMomos:"veg",cheeseCornMomos:"cheeseCorn",paneerMomos:"paneer",vegKurkureMomos:"vegKurkure",chickenKurkureMomos:"chickenKurkure"}).forEach(([O,U])=>{const ie=B[O]?.final||0;ie>0&&(I[U]=(I[U]||0)+ie,console.log(`   Added ${ie} ${U} from ${O}`))}),B.items&&Object.entries(B.items).forEach(([O,U])=>{const ie=U?.final||0;ie>0&&(I[O]=(I[O]||0)+ie,console.log(`   Added ${ie} ${O} from dynamic items`))}),await e.updateProductionHouseInventory(C.id,I),console.log(" Production house inventory updated after approval:",I)}alert("Production data approved successfully! Inventory updated.")}catch(C){console.error("Error approving production:",C),alert("Failed to approve production data. Please try again.")}finally{u(!1)}}},E=async()=>{if(confirm("This will remove duplicate pending production entries, keeping only the original entry for each date. Continue?")){m(!0);try{const C=await TD();C.success&&(ur.success(C.message),C.duplicatesFound>0?(console.log(" Cleanup Details:",C.details),ur.info("Refreshing data...",{duration:2e3}),setTimeout(()=>{window.location.reload()},2e3)):(ur.info("No duplicate entries found!"),m(!1)))}catch(C){console.error("Error cleaning up duplicates:",C),ur.error("Failed to clean up duplicates. Please try again."),m(!1)}}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(Hn,{className:"w-8 h-8 text-orange-600"}),"Production Management"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Log daily production data for momos, sauces, and track wastage"})]}),b&&s==="approvals"&&n.jsxs("button",{onClick:E,disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[n.jsx(V9,{className:"w-4 h-4"}),f?"Cleaning...":"Clean Duplicates"]})]}),N&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[n.jsx("button",{onClick:()=>i("entry"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${s==="entry"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:"Production Entry"}),n.jsxs("button",{onClick:()=>i("approvals"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${s==="approvals"?"bg-orange-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Approvals",(()=>{const C=e.productionData.filter(I=>I.approvalStatus==="pending"&&(!e.user?.storeId||I.storeId===e.user.storeId)).length;return C>0&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s==="approvals"?"bg-white text-orange-600":"bg-orange-600 text-white"}`,children:C})})()]})]}),s==="approvals"&&N&&n.jsx("div",{className:"space-y-4",children:(()=>{const C=e.productionData.filter(I=>I.approvalStatus==="pending"&&(!e.user?.storeId||I.storeId===e.user.storeId)).sort((I,B)=>new Date(B.date).getTime()-new Date(I.date).getTime());return C.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(or,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-600",children:"No pending production approvals at this time."})]}):C.map(I=>{const B=I.chickenMomos.final+I.chickenCheeseMomos.final+I.vegMomos.final+I.cheeseCornMomos.final+I.paneerMomos.final+I.vegKurkureMomos.final+I.chickenKurkureMomos.final,M=I.wastage.dough+I.wastage.stuffing+I.wastage.batter+I.wastage.coating;return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ja,{className:"w-5 h-5 text-yellow-600"}),n.jsx("h3",{className:"text-xl text-gray-900",children:new Date(I.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted by: ",I.createdBy]})]}),n.jsxs("button",{onClick:async()=>{try{await e.approveProductionData(I.id),alert("Production data approved successfully!")}catch{alert("Failed to approve production data. Please try again.")}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(jo,{className:"w-5 h-5"}),"Approve"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Production"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[B," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Wastage"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[M.toFixed(2)," kg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Kurkure Production"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[I.vegKurkureMomos.final+I.chickenKurkureMomos.final," pcs"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Regular Momos"}),n.jsxs("p",{className:"text-2xl text-gray-900",children:[I.chickenMomos.final+I.chickenCheeseMomos.final+I.vegMomos.final+I.cheeseCornMomos.final+I.paneerMomos.final," ","pcs"]})]})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("h4",{className:"text-sm text-gray-700 mb-3",children:"Production Breakdown:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2 text-xs",children:[I.chickenMomos.final>0&&n.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chicken"}),n.jsxs("p",{className:"text-gray-900",children:[I.chickenMomos.final," pcs"]})]}),I.chickenCheeseMomos.final>0&&n.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chk Cheese"}),n.jsxs("p",{className:"text-gray-900",children:[I.chickenCheeseMomos.final," pcs"]})]}),I.vegMomos.final>0&&n.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Veg"}),n.jsxs("p",{className:"text-gray-900",children:[I.vegMomos.final," pcs"]})]}),I.cheeseCornMomos.final>0&&n.jsxs("div",{className:"bg-amber-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Cheese Corn"}),n.jsxs("p",{className:"text-gray-900",children:[I.cheeseCornMomos.final," pcs"]})]}),I.paneerMomos.final>0&&n.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Paneer"}),n.jsxs("p",{className:"text-gray-900",children:[I.paneerMomos.final," pcs"]})]}),I.vegKurkureMomos.final>0&&n.jsxs("div",{className:"bg-lime-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Veg Kurkure"}),n.jsxs("p",{className:"text-gray-900",children:[I.vegKurkureMomos.final," pcs"]})]}),I.chickenKurkureMomos.final>0&&n.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[n.jsx("p",{className:"text-gray-600",children:"Chk Kurkure"}),n.jsxs("p",{className:"text-gray-900",children:[I.chickenKurkureMomos.final," pcs"]})]})]})]})]},I.id)})})()}),s==="entry"&&n.jsxs(n.Fragment,{children:[n.jsx(Tg,{selectedDate:r,onDateChange:a}),k&&k.approvalStatus==="pending"&&n.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("p",{className:"text-gray-900",children:["Production data for ",new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," is awaiting approval from Operations Manager."]})]})}),k&&k.approvalStatus==="approved"&&n.jsx("div",{className:"bg-green-50 border-2 border-green-300 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"w-5 h-5 text-green-600"}),n.jsxs("p",{className:"text-gray-900",children:[" Production data approved by ",k.approvedBy]})]})}),v&&k&&k.approvalStatus==="pending"&&n.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-6 mb-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(jo,{className:"w-6 h-6 text-blue-600"}),"Approval Required"]}),n.jsxs("p",{className:"text-gray-700 mb-4",children:["Production data submitted by ",k.createdBy," is awaiting your approval."]}),n.jsxs("button",{onClick:_,disabled:d,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(jo,{className:"w-5 h-5"}),d?"Approving...":"Approve Production Data"]})]}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(N9,{className:"w-6 h-6 text-orange-600"}),"Regular Momos (Dough + Stuffing)"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.dough,onChange:C=>A({...w,chickenMomos:{...w.chickenMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenMomos.stuffing,onChange:C=>A({...w,chickenMomos:{...w.chickenMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:w.chickenMomos.final,onChange:C=>A({...w,chickenMomos:{...w.chickenMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Cheese Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.dough,onChange:C=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenCheeseMomos.stuffing,onChange:C=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:w.chickenCheeseMomos.final,onChange:C=>A({...w,chickenCheeseMomos:{...w.chickenCheeseMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.dough,onChange:C=>A({...w,vegMomos:{...w.vegMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.vegMomos.stuffing,onChange:C=>A({...w,vegMomos:{...w.vegMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:w.vegMomos.final,onChange:C=>A({...w,vegMomos:{...w.vegMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Cheese Corn Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.dough,onChange:C=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.cheeseCornMomos.stuffing,onChange:C=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:w.cheeseCornMomos.final,onChange:C=>A({...w,cheeseCornMomos:{...w.cheeseCornMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Paneer Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dough (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.dough,onChange:C=>A({...w,paneerMomos:{...w.paneerMomos,dough:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stuffing (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.paneerMomos.stuffing,onChange:C=>A({...w,paneerMomos:{...w.paneerMomos,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Momos (pcs)"}),n.jsx("input",{type:"number",value:w.paneerMomos.final,onChange:C=>A({...w,paneerMomos:{...w.paneerMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(Hn,{className:"w-6 h-6 text-purple-600"}),"Kurkure Momos (Batter + Coating)"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-lime-50 to-lime-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Veg Kurkure Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.batter,onChange:C=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,batter:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.vegKurkureMomos.coating,onChange:C=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,coating:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),n.jsx("input",{type:"number",value:w.vegKurkureMomos.final,onChange:C=>A({...w,vegKurkureMomos:{...w.vegKurkureMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[n.jsx("h3",{className:"text-gray-900 mb-4 font-semibold",children:"Chicken Kurkure Momos"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batter (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.batter,onChange:C=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,batter:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coating Mix (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.chickenKurkureMomos.coating,onChange:C=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,coating:parseFloat(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Kurkure (pcs)"}),n.jsx("input",{type:"number",value:w.chickenKurkureMomos.final,onChange:C=>A({...w,chickenKurkureMomos:{...w.chickenKurkureMomos,final:parseInt(C.target.value)||0}}),className:"w-full px-4 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:!y})]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(Rs,{className:"w-6 h-6 text-red-600"}),"Wastage Tracking"]}),n.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Dough Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.wastage.dough,onChange:C=>A({...w,wastage:{...w.wastage,dough:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Stuffing Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.wastage.stuffing,onChange:C=>A({...w,wastage:{...w.wastage,stuffing:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Batter Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.wastage.batter,onChange:C=>A({...w,wastage:{...w.wastage,batter:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Coating Wastage (kg)"}),n.jsx("input",{type:"number",step:"0.01",value:w.wastage.coating,onChange:C=>A({...w,wastage:{...w.wastage,coating:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(BB,{className:"w-6 h-6 text-pink-600"}),"Sauces & Chutneys"]}),n.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Panfried Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.panfriedSauce,onChange:C=>A({...w,sauces:{...w.sauces,panfriedSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chilli Chicken Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.chilliChickenSauce,onChange:C=>A({...w,sauces:{...w.sauces,chilliChickenSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Korean Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyKoreanSauce,onChange:C=>A({...w,sauces:{...w.sauces,spicyKoreanSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Hot Garlic Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.hotGarlicSauce,onChange:C=>A({...w,sauces:{...w.sauces,hotGarlicSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Tandoori Sauce (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.tandooriSauce,onChange:C=>A({...w,sauces:{...w.sauces,tandooriSauce:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Soup Premix (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.soupPremix,onChange:C=>A({...w,sauces:{...w.sauces,soupPremix:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Green Mayo Chutney (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.greenMayoChutney,onChange:C=>A({...w,sauces:{...w.sauces,greenMayoChutney:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Spicy Red Chutney (L)"}),n.jsx("input",{type:"number",step:"0.01",value:w.sauces.spicyRedChutney,onChange:C=>A({...w,sauces:{...w.sauces,spicyRedChutney:parseFloat(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:!y})]})]})})]}),y&&n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":k?"Update Production Data":"Save Production Data"})})]})]})]})}function Yge({user:e,inventory:t,overheads:r,fixedCosts:a,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,inventoryItems:p,onLogout:g,onDataUpdate:b}){const[y,v]=P.useState("analytics"),[N,k]=P.useState(null),[w,A]=P.useState(new Date().toISOString().split("T")[0]),S={inventory:t,overheads:r,fixedCosts:a,salesData:s,categorySalesData:i,productionData:o,productionHouses:l,stockRequests:d,productionRequests:u,employees:f,stores:m,managedStoreIds:[],managedProductionHouseIds:[],inventoryItems:p,loadInventoryItems:async()=>{},addInventoryItem:async()=>{},addOverheadItem:async()=>{},addFixedCostItem:async()=>{},updateInventoryItem:async()=>{},updateOverheadItem:async()=>{},updateFixedCostItem:async()=>{},deleteInventoryItem:async()=>{},deleteOverheadItem:async()=>{},deleteFixedCostItem:async()=>{},addSalesData:async()=>{},updateSalesData:async()=>{},approveSalesData:async()=>{},requestSalesApproval:async()=>{},approveDiscrepancy:async()=>{},rejectDiscrepancy:async()=>{},addProductionData:async()=>{},updateProductionData:async()=>{},approveProductionData:async()=>{},addProductionHouse:async()=>{},updateProductionHouse:async()=>{},updateProductionHouseInventory:async()=>{},deleteProductionHouse:async()=>{},setProductionHouses:()=>{},createStockRequest:async()=>{},fulfillStockRequest:async()=>{},cancelStockRequest:async()=>{},isManager:!1,user:e},_=[{id:"analytics",label:"Analytics",icon:N2},{id:"inventory",label:"Inventory",icon:dr},{id:"sales",label:"Sales",icon:jn},{id:"production",label:"Production",icon:Hn},{id:"payroll",label:"Payroll",icon:Dn}];return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-white/20 rounded-lg backdrop-blur-sm",children:n.jsx(MB,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-white text-lg font-bold",children:"Bhandar-IMS"}),n.jsx("p",{className:"text-xs text-slate-200",children:"Audit Dashboard"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-right hidden sm:block",children:[n.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),n.jsxs("p",{className:"text-xs text-slate-200 flex items-center justify-end gap-1",children:[n.jsx(xo,{className:"w-3 h-3"}),"Read-Only Access"]})]}),n.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all backdrop-blur-sm",children:[n.jsx(gh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),n.jsx("div",{className:"flex gap-2 pb-3 overflow-x-auto",children:_.map(E=>n.jsxs("button",{onClick:()=>v(E.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${y===E.id?"bg-white text-slate-800 shadow-lg":"text-white hover:bg-white/10"}`,children:[n.jsx(E.icon,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:E.label})]},E.id))})]})}),n.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-amber-800",children:[n.jsx(xo,{className:"w-5 h-5 flex-shrink-0"}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Audit Mode:"})," You have read-only access to all data. You cannot create, edit, or delete any records."]})]})}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[y==="analytics"&&n.jsx(x2,{context:S,selectedStoreId:N}),y==="inventory"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventory View"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to inventory data"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(xo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(Fj,{context:S,selectedStoreId:N})]}),y==="sales"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sales Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to sales records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(xo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Store"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Offline Sales"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Online Sales"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Cash"}),n.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Paytm"}),n.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"})]})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-12 text-gray-500",children:"No sales data available"})}):s.sort((E,C)=>new Date(C.date).getTime()-new Date(E.date).getTime()).slice(0,50).map(E=>{const C=m.find(I=>I.id===E.storeId);return n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(E.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),n.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:C?.name||"Unknown Store"}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.offlineSales.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.onlineSales.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.cashAmount.toLocaleString("en-IN")]}),n.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900 text-right",children:["",E.paytmAmount.toLocaleString("en-IN")]}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${E.approvalStatus==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:E.approvalStatus==="approved"?"Approved":"Pending"})})]},E.id)})})]})})]}),y==="production"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Production Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to production records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(xo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(y2,{context:S,selectedStoreId:N})]}),y==="payroll"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payroll Data"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View-only access to payroll records"})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-lg",children:[n.jsx(xo,{className:"w-4 h-4 text-gray-600"}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Read-Only"})]})]}),n.jsx(Lk,{userRole:"audit",selectedDate:w,userName:e.name,userEmail:e.email,employees:f,stores:m})]})]})]})}function Xge({onLogin:e,onSignup:t,error:r}){const[a,s]=P.useState(!1),[i,o]=P.useState({email:"",password:"",name:"",role:"employee",employeeId:""}),[l,d]=P.useState(!1),u=async f=>{if(f.preventDefault(),l){console.log(" Submission already in progress, ignoring duplicate request");return}d(!0);try{a?await t(i.email,i.password,i.name,i.role):await e(i.email,i.password)}finally{d(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 sm:p-8",children:[n.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-blue-600 rounded-full mb-3 sm:mb-4",children:n.jsx(dr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),n.jsx("h1",{className:"text-gray-900 mb-2",children:"Inventory Management"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:a?"Create your account":"Sign in to your account"})]}),r&&n.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-xs sm:text-sm text-red-600",children:r})}),n.jsxs("form",{onSubmit:u,className:"space-y-3 sm:space-y-4",children:[a&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Full Name"}),n.jsx("input",{type:"text",value:i.name,onChange:f=>o({...i,name:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your name",required:a})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),n.jsxs("select",{value:i.role,onChange:f=>o({...i,role:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",required:a,children:[n.jsx("option",{value:"employee",children:"Employee (View your payouts)"}),n.jsx("option",{value:"manager",children:"Manager (Manage inventory)"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head (View & approve)"}),n.jsx("option",{value:"audit",children:"Audit (View reports)"})]})]}),i.role==="employee"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Employee ID"}),n.jsx("input",{type:"text",value:i.employeeId,onChange:f=>o({...i,employeeId:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your Employee ID",required:a&&i.role==="employee"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must match the ID created by your manager"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:i.email,onChange:f=>o({...i,email:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your email",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password"}),n.jsx("input",{type:"password",value:i.password,onChange:f=>o({...i,password:f.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:"Enter your password",required:!0,minLength:6}),a&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters"})]}),n.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base touch-manipulation",children:l?n.jsxs(n.Fragment,{children:[n.jsx(Eo,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):n.jsxs(n.Fragment,{children:[a?n.jsx(Ui,{className:"w-5 h-5"}):n.jsx(pB,{className:"w-5 h-5"}),a?"Create Account":"Sign In"]})})]}),n.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:n.jsx("button",{onClick:()=>{s(!a),o({email:"",password:"",name:"",role:"employee",employeeId:""})},className:"text-sm text-blue-600 hover:text-blue-700 active:text-blue-800 touch-manipulation",children:a?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}function Jge({user:e}){const[t,r]=P.useState(u(new Date)),[a,s]=P.useState([]),[i,o]=P.useState(!1),[l,d]=P.useState([]);P.useEffect(()=>{m(),p()},[t]);function u(C){const I=new Date(C),B=I.getDay(),M=I.getDate()-B+(B===0?-6:1);return new Date(I.setDate(M))}function f(C){const I=[];for(let B=0;B<7;B++){const M=new Date(C);M.setDate(C.getDate()+B),I.push(M)}return I}const m=async()=>{try{o(!0);const C=await Zh(e.employeeId);s(C)}catch(C){console.error("Error loading timesheet:",C)}finally{o(!1)}},p=async()=>{try{const C=await mu(e.employeeId);d(C.filter(I=>I.status==="approved"||I.status==="pending"))}catch(C){console.error("Error loading leaves:",C)}},g=C=>{const I=C.toISOString().split("T")[0];return l.some(B=>B.leaveDate===I)},b=C=>{const I=C.toISOString().split("T")[0],B=a.find(M=>M.date===I);return B||{employeeId:e.employeeId,date:I,startTime:"",endTime:"",totalHours:0,status:"pending",isLeave:g(C)}},y=(C,I)=>{if(!C||!I)return 0;const[B,M]=C.split(":").map(Number),[O,U]=I.split(":").map(Number),ie=B*60+M;return(O*60+U-ie)/60},v=(C,I,B)=>{const M=C.toISOString().split("T")[0],O=a.find(X=>X.date===M);let U;O?U={...O,[I]:B}:U={employeeId:e.employeeId,date:M,startTime:I==="startTime"?B:"",endTime:I==="endTime"?B:"",totalHours:0,status:"pending",isLeave:!1},U.totalHours=y(U.startTime,U.endTime);const ie=a.filter(X=>X.date!==M);s([...ie,U])},N=async C=>{const I=b(C);if(!I.startTime||!I.endTime){alert("Please enter both start and end times");return}if(I.totalHours<4){alert("For half day, minimum 4 hours required");return}try{o(!0),await(void 0)(I),await m(),alert("Timesheet saved successfully")}catch(B){console.error("Error saving timesheet:",B),alert("Error saving timesheet")}finally{o(!1)}},k=async()=>{const I=f(t).map(B=>b(B)).filter(B=>B.startTime&&B.endTime);if(I.length===0){alert("Please enter timesheet data for at least one day");return}for(const B of I)if(B.totalHours<4){alert(`${B.date}: Minimum 4 hours required for half day`);return}try{o(!0),await(void 0)(I),await m(),alert("Week timesheet saved successfully")}catch(B){console.error("Error saving week timesheet:",B),alert("Error saving week timesheet")}finally{o(!1)}},w=()=>{const C=new Date(t);C.setDate(C.getDate()-7),r(C)},A=()=>{const C=new Date(t);C.setDate(C.getDate()+7),r(C)},S=async()=>{try{o(!0);const C=new Date(t);C.setDate(C.getDate()-7);const I=f(C),B=await Zh(e.employeeId),M=I.map(X=>{const re=X.toISOString().split("T")[0];return B.find(oe=>oe.date===re)}).filter(Boolean);if(M.length===0){alert("No timesheet data found in previous week to copy"),o(!1);return}const O=f(t),U=[];if(O.forEach((X,re)=>{const oe=X.toISOString().split("T")[0],Q=M[re],F=a.find(L=>L.date===oe);!g(X)&&Q&&Q.startTime&&Q.endTime&&(!F||F.status!=="approved")&&U.push({employeeId:e.employeeId,date:oe,startTime:Q.startTime,endTime:Q.endTime,totalHours:Q.totalHours,status:"pending",isLeave:!1})}),U.length===0){alert("All days in current week are either on leave or already have approved entries"),o(!1);return}const ie=[...a];U.forEach(X=>{const re=ie.findIndex(oe=>oe.date===X.date);re>=0?ie[re]=X:ie.push(X)}),s(ie),alert(`Copied ${U.length} day(s) from previous week! Don't forget to save.`)}catch(C){console.error("Error copying from previous week:",C),alert("Error copying data from previous week")}finally{o(!1)}},_=f(t),E=new Date(t);return E.setDate(E.getDate()+6),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"My Timesheet"}),n.jsx("p",{className:"text-gray-600",children:"Track your daily working hours"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[n.jsx(vj,{className:"w-4 h-4"}),"Previous Week"]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center gap-2 justify-center mb-1",children:[n.jsx(Or,{className:"w-5 h-5 text-purple-600"}),n.jsxs("span",{className:"text-lg text-gray-900",children:[t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," - ",E.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Week View"})]}),n.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:["Next Week",n.jsx(ml,{className:"w-4 h-4"})]})]}),n.jsx("div",{className:"flex justify-center pt-2 border-t border-gray-200",children:n.jsxs("button",{onClick:S,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(L9,{className:"w-4 h-4"}),"Copy from Previous Week"]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Day"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Start Time"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"End Time"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Total Hours"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map((C,I)=>{const B=b(C),M=g(C);return n.jsxs("tr",{className:M?"bg-yellow-50":I%2===0?"bg-gray-50":"bg-white",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:C.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:C.toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("td",{className:"px-6 py-4",children:M?n.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):n.jsx("input",{type:"time",value:B.startTime,onChange:O=>v(C,"startTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),n.jsx("td",{className:"px-6 py-4",children:M?n.jsx("span",{className:"text-yellow-700 text-sm",children:"On Leave"}):n.jsx("input",{type:"time",value:B.endTime,onChange:O=>v(C,"endTime",O.target.value),disabled:B.status==="approved",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100"})}),n.jsx("td",{className:"px-6 py-4",children:M?n.jsx("span",{className:"text-yellow-700",children:"-"}):n.jsx("span",{className:`${B.totalHours>=4?"text-green-700":B.totalHours>0?"text-red-700":"text-gray-500"}`,children:B.totalHours>0?`${B.totalHours.toFixed(2)} hrs`:"-"})}),n.jsx("td",{className:"px-6 py-4",children:M?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(Nr,{className:"w-4 h-4"}),"Leave"]}):B.status==="approved"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[n.jsx(or,{className:"w-4 h-4"}),"Approved"]}):B.status==="rejected"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[n.jsx(Qn,{className:"w-4 h-4"}),"Rejected"]}):B.startTime&&B.endTime?n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(_n,{className:"w-4 h-4"}),"Pending"]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"Not filled"})}),n.jsx("td",{className:"px-6 py-4",children:!M&&B.status!=="approved"&&n.jsxs("button",{onClick:()=>N(C),disabled:i||!B.startTime||!B.endTime,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[n.jsx(Vi,{className:"w-4 h-4"}),"Save"]})})]},I)})})]})})}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsxs("button",{onClick:k,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:[n.jsx(Vi,{className:"w-5 h-5"}),"Save Entire Week"]})})]})})}function Qge({user:e}){const[t,r]=P.useState([]),[a,s]=P.useState(0),[i,o]=P.useState(0),[l,d]=P.useState(!1),[u,f]=P.useState(!1),[m,p]=P.useState({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""});P.useEffect(()=>{g(),b()},[]),P.useEffect(()=>{y()},[t,a]);const g=async()=>{try{d(!0);const w=await mu(e.employeeId);r(w)}catch(w){console.error("Error loading leaves:",w)}finally{d(!1)}},b=async()=>{try{const w=await o5(e.employeeId,e.joiningDate||"2024-01-01");s(w)}catch(w){console.error("Error calculating leave balance:",w)}},y=()=>{const A=t.filter(S=>S.status==="pending").reduce((S,_)=>{const E=_.leaveType||"full";return S+(E==="half"?.5:1)},0);o(a-A)},v=async()=>{if(!m.leaveDate||!m.reason){alert("Please fill all fields");return}if(t.find(S=>S.leaveDate===m.leaveDate)){alert("Leave already applied for this date");return}const A=m.leaveType==="half"?.5:1;if(m.isAdvanceLeave){const S=new Date,_=S.getMonth(),E=S.getFullYear(),I=t.filter(M=>{const O=new Date(M.leaveDate);return M.isAdvanceLeave&&M.status==="approved"&&O.getMonth()===_&&O.getFullYear()===E}).reduce((M,O)=>{const U=O.leaveType||"full";return M+(U==="half"?.5:1)},0);if(I+A>2){alert(`You can only take maximum 2 days of advance leave per month. You have already used ${I} day(s).`);return}if(t.filter(M=>{const O=new Date(M.leaveDate);return M.status==="approved"&&O.getMonth()===_&&O.getFullYear()===E}).reduce((M,O)=>{const U=O.leaveType||"full";return M+(U==="half"?.5:1)},0)+A>5){alert("Maximum 5 days of leave allowed per month (including advance leave).");return}}else if(a<A){alert(`Insufficient leave balance. You have ${a} day(s) remaining. Consider applying for advance leave (max 2 days).`);return}try{d(!0);const S={employeeId:e.employeeId,leaveDate:m.leaveDate,leaveType:m.leaveType,isAdvanceLeave:m.isAdvanceLeave,reason:m.reason,status:"pending",appliedAt:new Date().toISOString()};await i5(S),await g(),await b(),p({leaveDate:"",leaveType:"full",isAdvanceLeave:!1,reason:""}),f(!1),alert("Leave application submitted successfully")}catch(S){console.error("Error applying leave:",S),alert("Error applying leave")}finally{d(!1)}},N=w=>{switch(w){case"approved":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[n.jsx(or,{className:"w-4 h-4"}),"Approved"]});case"rejected":return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:[n.jsx(Qn,{className:"w-4 h-4"}),"Rejected"]});default:return n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(_n,{className:"w-4 h-4"}),"Pending"]})}},k=[...t].sort((w,A)=>new Date(A.leaveDate).getTime()-new Date(w.leaveDate).getTime());return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Leave Management"}),n.jsx("p",{className:"text-gray-600",children:"Apply for leaves and track your leave balance"})]}),n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"text-lg mb-4 opacity-90",children:"Leave Balance"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Current Balance"}),n.jsxs("div",{className:`text-5xl mb-1 ${a<0?"text-red-200":""}`,children:[a,a<0&&n.jsx("span",{className:"text-sm ml-2 bg-red-500/30 px-2 py-1 rounded",children:"Negative"})]}),n.jsx("p",{className:"text-xs opacity-75",children:a<0?"You have taken advance leave - will be deducted next month":"approved leaves deducted"})]}),i!==a&&n.jsxs("div",{className:"pt-4 border-t border-white/20",children:[n.jsx("div",{className:"text-sm opacity-75 mb-1",children:"Projected Balance"}),n.jsx("div",{className:`text-3xl mb-1 ${i<0?"text-red-200":""}`,children:i}),n.jsx("p",{className:"text-xs opacity-75",children:"if all pending leaves are approved"})]}),n.jsx("p",{className:"text-sm opacity-75 mt-4",children:"3 leaves/month  max 5 days (3 regular + 2 advance)"})]}),n.jsx("div",{className:"bg-white/20 rounded-full p-6",children:n.jsx(Or,{className:"w-16 h-16"})})]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:()=>f(!u),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[n.jsx(qi,{className:"w-5 h-5"}),"Apply for Leave"]})}),u&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Apply for Leave"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Date"}),n.jsx("input",{type:"date",value:m.leaveDate,onChange:w=>p({...m,leaveDate:w.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Leave Type"}),n.jsxs("select",{value:m.leaveType,onChange:w=>p({...m,leaveType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"full",children:"Full Day"}),n.jsx("option",{value:"half",children:"Half Day"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Reason"}),n.jsx("input",{type:"text",value:m.reason,onChange:w=>p({...m,reason:w.target.value}),placeholder:"Enter reason for leave",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),n.jsx("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:m.isAdvanceLeave,onChange:w=>p({...m,isAdvanceLeave:w.target.checked}),className:"mt-1 w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Apply as Advance Leave"}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx(Nr,{className:"w-4 h-4 inline mr-1"}),"You can take up to 2 days advance leave per month. This will make your balance negative and will be deducted from next month's quota.",n.jsx("br",{}),n.jsx("span",{className:"font-medium",children:"Maximum total: 5 days/month (3 regular + 2 advance)"})]})]})]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:v,disabled:l,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",children:"Submit Application"}),n.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Leave History"})}),l?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):k.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Or,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No leave applications yet"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Approved By"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:k.map((w,A)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(w.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(w.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(w.leaveType||"full")==="full"?"Full Day":"Half Day"}),w.isAdvanceLeave&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Advance"})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:w.reason}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.appliedAt?new Date(w.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"-"}),n.jsx("td",{className:"px-6 py-4",children:N(w.status)}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:w.approvedBy||"-"})]},A))})]})})]}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-blue-900",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Leave Policy:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"3 leaves are credited on the 1st of each month (Jan: 3, Feb: 6, Mar: 9, etc.)"}),n.jsx("li",{children:"Unused leaves carry forward within the year"}),n.jsx("li",{children:"All unused leaves lapse on December 31st (reset to 0)"}),n.jsx("li",{children:"New year starts fresh with 3 leaves on January 1st"}),n.jsx("li",{children:"All leave applications require manager approval"}),n.jsx("li",{children:"Approved leaves will prevent timesheet entry for that day"})]})]})]})})]})})}function Zge({managerId:e}){const[t,r]=P.useState(!1),[a,s]=P.useState(null),i=async()=>{r(!0),s(null);const o={serverVersion:null,managerRoute:null,allEmployees:null};try{console.log("Testing server health...");const l=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{headers:{Authorization:`Bearer ${Zn}`}});o.allEmployees={status:l.status,ok:l.ok,data:l.ok?await l.json():await l.text()},console.log("Testing manager route with ID:",e);const d=`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees/manager/${e}`;console.log("Full URL:",d);const u=await fetch(d,{headers:{Authorization:`Bearer ${Zn}`}});console.log("Manager route status:",u.status);const f=await u.text();console.log("Manager route response:",f),o.managerRoute={url:d,status:u.status,ok:u.ok,data:f?JSON.parse(f):null},s(o)}catch(l){console.error("Route test error:",l),s({error:l instanceof Error?l.message:String(l),tests:o})}finally{r(!1)}};return n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(HE,{className:"w-6 h-6 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Route Debugger"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Test if the manager route is working"})]})]}),n.jsx("button",{onClick:i,disabled:t,className:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsx(hB,{className:"w-4 h-4 animate-spin"}),"Testing Routes..."]}):n.jsxs(n.Fragment,{children:[n.jsx(HE,{className:"w-4 h-4"}),"Test Routes"]})}),a&&n.jsxs("div",{className:"mt-4 space-y-3",children:[a.error&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:"Error:"})," ",a.error]})}),a.allEmployees&&n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.allEmployees.ok?n.jsx(or,{className:"w-4 h-4 text-green-600"}):n.jsx(Qn,{className:"w-4 h-4 text-red-600"}),n.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees - ",a.allEmployees.status]})]}),n.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(a.allEmployees.data,null,2)})]}),a.managerRoute&&n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.managerRoute.ok?n.jsx(or,{className:"w-4 h-4 text-green-600"}):n.jsx(Qn,{className:"w-4 h-4 text-red-600"}),n.jsxs("span",{className:"font-medium text-sm",children:["GET /unified-employees/manager/",e," - ",a.managerRoute.status]})]}),n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["URL: ",a.managerRoute.url]}),n.jsx("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(a.managerRoute.data,null,2)})]})]})]})}function exe({managerId:e,role:t,selectedStoreId:r,isIncharge:a=!1,inchargeDesignation:s=null}){const[i,o]=P.useState([]),[l,d]=P.useState(""),[u,f]=P.useState([]),[m,p]=P.useState(!1);console.log("ApproveTimesheets: managerId prop =",e),console.log("ApproveTimesheets: role prop =",t),console.log("ApproveTimesheets: isIncharge =",a),console.log("ApproveTimesheets: inchargeDesignation =",s);const g=P.useMemo(()=>{let _=i;return r&&(_=_.filter(E=>E.storeId===r||E.storeId===null||E.storeId===void 0)),a&&e&&(_=_.filter(E=>E.inchargeId===e)),_},[i,r,a,e]);P.useEffect(()=>{b()},[]),P.useEffect(()=>{g.length>0&&!g.find(_=>_.employeeId===l)?d(g[0].employeeId):g.length===0&&d("")},[g]),P.useEffect(()=>{l&&y()},[l]);const b=async()=>{try{console.log("ApproveTimesheets: Loading employees/managers for role:",t,"isIncharge:",a);let _;t==="cluster_head"?(console.log("ApproveTimesheets: Calling getManagersByClusterHead with clusterHeadId:",e),_=await jg(e),console.log("ApproveTimesheets: Received managers:",_),_.length>0&&(console.log(" MANAGERS RETURNED:"),_.forEach(E=>{console.log(`  - ${E.employeeId} (${E.name}) - clusterHeadId: ${E.clusterHeadId}, role: ${E.role}`)}))):a?(console.log("ApproveTimesheets: Calling getEmployeesByIncharge with inchargeId:",e),_=await T2(e),console.log("ApproveTimesheets: Received employees under incharge:",_)):(console.log("ApproveTimesheets: Calling getEmployeesByManager with managerId:",e),_=await hc(e),console.log("ApproveTimesheets: Received employees:",_)),o(_),_.length>0?d(_[0].employeeId):console.log("ApproveTimesheets: No employees/managers found")}catch(_){console.error("Error loading employees:",_)}},y=async()=>{try{p(!0);const _=await Zh(l);f(_.filter(E=>E.status==="pending"))}catch(_){console.error("Error loading timesheets:",_)}finally{p(!1)}},v=async _=>{try{p(!0),await(void 0)(_,e),await y(),alert("Timesheet approved successfully")}catch(E){console.error("Error approving timesheet:",E),alert("Error approving timesheet")}finally{p(!1)}},N=async _=>{const E=prompt("Enter rejection reason:");if(E)try{p(!0),await(void 0)(_,e,E),await y(),alert("Timesheet rejected")}catch(C){console.error("Error rejecting timesheet:",C),alert("Error rejecting timesheet")}finally{p(!1)}},k=u.length,w=i.find(_=>_.employeeId===l),A=t==="cluster_head"?"Operations Manager":"Employee",S=t==="cluster_head"?"Operations Managers":"Employees";return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",A," Timesheets"]}),n.jsx("p",{className:"text-gray-600",children:t==="cluster_head"?"Review and approve manager timesheet entries. Contract workers are paid per day worked and do not require attendance approval.":"Review and approve employee timesheet entries"})]}),!e&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-red-900 font-medium",children:"Manager ID Not Found"}),n.jsx("p",{className:"text-sm text-red-700",children:"Your account doesn't have an employee ID set. Please contact the administrator or log out and log back in."})]})]})}),e&&i.length===0&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",S," Found"]}),n.jsx("p",{className:"text-sm text-blue-700",children:t==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),t==="cluster_head"&&n.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[n.jsxs("li",{children:[" Go to ",n.jsx("strong",{children:"Employee Management"}),"  ",n.jsx("strong",{children:"Hierarchy Management"})," tab"]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),n.jsxs("li",{children:[" Make sure ",n.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",n.jsx("strong",{children:e})]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Save Changes"})]})]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),e&&i.length===0&&n.jsx(Zge,{managerId:e}),k>0&&n.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-yellow-900 font-medium",children:[k," timesheet",k>1?"s":""," pending approval"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",A]}),n.jsxs("select",{value:l,onChange:_=>d(_.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["-- Select ",A," --"]}),g.map(_=>n.jsxs("option",{value:_.employeeId,children:[_.name," (",_.employeeId,")"]},_.employeeId))]}),t==="cluster_head"&&i.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-2",children:[" Debug: ",i.length," manager",i.length>1?"s":""," with clusterHeadId = ",e]}),n.jsx("div",{className:"space-y-1",children:i.map(_=>n.jsxs("div",{className:"text-xs text-blue-800 flex items-center gap-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:_.employeeId}),n.jsx("span",{children:_.name}),n.jsxs("span",{className:"text-blue-600",children:["(",_.role,")"]})]},_.employeeId))}),n.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[" If you see unexpected managers here, go to ",n.jsx("strong",{children:"Employee Management  Hierarchy"})," and check their Cluster Head ID"]})]})]}),w&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Va,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl mb-1",children:w.name}),n.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",w.employeeId]}),n.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",w.email]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Timesheets"})}),m?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):u.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(_n,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No pending timesheets for this employee"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Day"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Start Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"End Time"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Total Hours"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map((_,E)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(_.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(_.date).toLocaleDateString("en-US",{weekday:"short"})}),n.jsx("td",{className:"px-6 py-4 text-gray-900",children:_.startTime}),n.jsx("td",{className:"px-6 py-4 text-gray-900",children:_.endTime}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:`${_.totalHours>=8?"text-green-700":_.totalHours>=4?"text-yellow-700":"text-red-700"}`,children:[_.totalHours.toFixed(2)," hrs"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm",children:[n.jsx(_n,{className:"w-4 h-4"}),"Pending"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>v(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(or,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>N(_.id),disabled:m,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(Qn,{className:"w-4 h-4"}),"Reject"]})]})})]},E))})]})})]})]})})}function txe({managerId:e,managerName:t,role:r,selectedStoreId:a,isIncharge:s=!1,inchargeDesignation:i=null}){const[o,l]=P.useState([]),[d,u]=P.useState(""),[f,m]=P.useState([]),[p,g]=P.useState(!1);console.log("ApproveLeaves: managerId prop =",e),console.log("ApproveLeaves: role prop =",r),console.log("ApproveLeaves: isIncharge =",s),console.log("ApproveLeaves: inchargeDesignation =",i);const b=P.useMemo(()=>{let E=o;return a&&(E=E.filter(C=>C.storeId===a||C.storeId===null||C.storeId===void 0)),s&&e&&(E=E.filter(C=>C.inchargeId===e)),E},[o,a,s,e]);P.useEffect(()=>{y()},[]),P.useEffect(()=>{b.length>0&&!b.find(E=>E.employeeId===d)?u(b[0].employeeId):b.length===0&&u("")},[b]),P.useEffect(()=>{d&&v()},[d]);const y=async()=>{try{console.log("ApproveLeaves: Loading employees/managers for role:",r,"isIncharge:",s);let E;r==="cluster_head"?(console.log("ApproveLeaves: Calling getManagersByClusterHead with clusterHeadId:",e),E=await jg(e),console.log("ApproveLeaves: Received managers:",E)):s?(console.log("ApproveLeaves: Calling getEmployeesByIncharge with inchargeId:",e),E=await T2(e),console.log("ApproveLeaves: Received employees under incharge:",E)):(console.log("ApproveLeaves: Calling getEmployeesByManager with managerId:",e),E=await hc(e),console.log("ApproveLeaves: Received employees:",E)),l(E),E.length>0?u(E[0].employeeId):console.log("ApproveLeaves: No employees/managers found")}catch(E){console.error("Error loading employees:",E)}},v=async()=>{try{g(!0);const E=await mu(d);m(E.filter(C=>C.status==="pending"))}catch(E){console.error("Error loading leaves:",E)}finally{g(!1)}},N=async E=>{try{g(!0),console.log("Attempting to approve leave:",E),console.log("api.approveLeave function exists?",typeof Dj),console.log("Available API functions:",Object.keys(ez).filter(C=>C.includes("Leave"))),await Dj(E,e,t),await v(),alert("Leave approved successfully")}catch(C){console.error("Error approving leave:",C),alert("Error approving leave")}finally{g(!1)}},k=async E=>{const C=prompt("Enter rejection reason:");if(C)try{g(!0),await l5(E,e,t,C),await v(),alert("Leave rejected")}catch(I){console.error("Error rejecting leave:",I),alert("Error rejecting leave")}finally{g(!1)}},w=f.length,A=o.find(E=>E.employeeId===d),S=r==="cluster_head"?"Operations Manager":"Employee",_=r==="cluster_head"?"Operations Managers":"Employees";return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl text-gray-900 mb-2",children:["Approve ",S," Leaves"]}),n.jsx("p",{className:"text-gray-600",children:r==="cluster_head"?"Review and approve manager leave applications. Contract workers do not require leave approval.":"Review and approve employee leave applications"})]}),w>0&&n.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-yellow-900 font-medium",children:[w," leave application",w>1?"s":""," pending approval"]}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Review and take action on pending requests"})]})]})}),e&&o.length===0&&n.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-900 font-medium",children:["No ",_," Found"]}),n.jsx("p",{className:"text-sm text-blue-700",children:r==="cluster_head"?`No managers are assigned to you (${e}). To fix this:`:"You don't have any employees assigned to you yet."}),r==="cluster_head"&&n.jsxs("ul",{className:"text-xs text-blue-700 mt-2 ml-4 space-y-1",children:[n.jsxs("li",{children:[" Go to ",n.jsx("strong",{children:"Employee Management"}),"  ",n.jsx("strong",{children:"Hierarchy Management"})," tab"]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Edit"})," on each manager (e.g., BM004)"]}),n.jsxs("li",{children:[" Make sure ",n.jsx("strong",{children:"Cluster Head ID"})," is set to your ID: ",n.jsx("strong",{children:e})]}),n.jsxs("li",{children:[" Click ",n.jsx("strong",{children:"Save Changes"})]})]}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Your ID: ",e]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",S]}),n.jsxs("select",{value:d,onChange:E=>u(E.target.value),className:"w-full md:w-1/3 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["-- Select ",S," --"]}),b.map(E=>n.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]})]}),A&&n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Va,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl mb-1",children:A.name}),n.jsxs("p",{className:"text-sm opacity-90",children:["Employee ID: ",A.employeeId]}),n.jsxs("p",{className:"text-sm opacity-90",children:["Email: ",A.email]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:"Pending Leave Applications"})}),p?n.jsx("div",{className:"p-12 text-center text-gray-500",children:"Loading..."}):f.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Or,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No pending leave applications for this employee"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Leave Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Reason"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Applied On"}),n.jsx("th",{className:"px-6 py-3 text-left text-sm text-gray-700",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((E,C)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 text-gray-900",children:new Date(E.leaveDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(E.leaveType||"full")==="full"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:(E.leaveType||"full")==="full"?"Full Day":"Half Day"})}),n.jsx("td",{className:"px-6 py-4 text-gray-700",children:E.reason}),n.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:E.appliedAt?new Date(E.appliedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>N(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(or,{className:"w-4 h-4"}),"Approve"]}),n.jsxs("button",{onClick:()=>k(E.id),disabled:p,className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm disabled:opacity-50",children:[n.jsx(Qn,{className:"w-4 h-4"}),"Reject"]})]})})]},C))})]})})]})]})})}function rxe({managerId:e,role:t}){const[r,a]=P.useState([]),[s,i]=P.useState([]),[o,l]=P.useState(!1),[d,u]=P.useState({});P.useEffect(()=>{f()},[]);const f=async()=>{try{if(l(!0),t==="manager"){const m=await hc(e);a(m);const p={};for(const g of m){const[b,y]=await Promise.all([Zh(g.employeeId),mu(g.employeeId)]);p[g.employeeId]={pendingTimesheets:b.filter(v=>v.status==="pending").length,pendingLeaves:y.filter(v=>v.status==="pending").length,approvedTimesheets:b.filter(v=>v.status==="approved").length,totalLeaves:y.filter(v=>v.status==="approved").length}}u(p)}else{const m=await jg(e);i(m);const p={};for(const g of m){const b=await hc(g.employeeId);p[g.employeeId]={employeeCount:b.length,...g.stats}}u(p)}}catch(m){if(m instanceof Error&&(m.message==="Not authenticated"||m.message==="Unauthorized"))return;console.error("Error loading data:",m)}finally{l(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t==="manager"?"My Team":"Manager Overview"}),n.jsx("p",{className:"text-gray-600",children:t==="manager"?"View all employees under your management":"View all managers and their team performance"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(Dn,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:t==="manager"?r.length:s.length}),n.jsx("div",{className:"text-sm opacity-90",children:t==="manager"?"Total Employees":"Total Managers"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(_n,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingTimesheets||0),0)}),n.jsx("div",{className:"text-sm opacity-90",children:"Pending Timesheets"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(Or,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:Object.values(d).reduce((m,p)=>m+(p.pendingLeaves||0),0)}),n.jsx("div",{className:"text-sm opacity-90",children:"Pending Leaves"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-purple-100 to-pink-100 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg text-gray-900",children:t==="manager"?"Employee List":"Manager List"})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:(t==="manager"?r:s).map(m=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl",children:m.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg text-gray-900",children:m.name}),n.jsx("p",{className:"text-sm text-gray-600",children:m.employeeId})]})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Wh,{className:"w-4 h-4"}),m.email]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Or,{className:"w-4 h-4"}),"Joined: ",m.joiningDate?new Date(m.joiningDate).toLocaleDateString():"N/A"]})]}),d[m.employeeId]&&n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t==="manager"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Timesheets"}),n.jsx("div",{className:"text-xl text-yellow-700",children:d[m.employeeId].pendingTimesheets})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Pending Leaves"}),n.jsx("div",{className:"text-xl text-pink-700",children:d[m.employeeId].pendingLeaves})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Approved Timesheets"}),n.jsx("div",{className:"text-xl text-green-700",children:d[m.employeeId].approvedTimesheets})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Leaves"}),n.jsx("div",{className:"text-xl text-blue-700",children:d[m.employeeId].totalLeaves})]})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 col-span-2",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Employees"}),n.jsx("div",{className:"text-2xl text-purple-700",children:d[m.employeeId].employeeCount})]})})})})]},m.employeeId))}),(t==="manager"?r:s).length===0&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Va,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:t==="manager"?"No employees found":"No managers found"})]})]})]})})}function e8({employee:e,onClose:t,onSave:r,clusterHeadId:a}){const[s,i]=P.useState({role:e.role,designation:e.designation||null,department:e.department||null,clusterHeadId:e.clusterHeadId||"",storeId:e.storeId||""}),[o,l]=P.useState(!1),[d,u]=P.useState([]);P.useEffect(()=>{f()},[]);const f=async()=>{try{const p=await fu();u(p)}catch(p){console.error("Error loading stores:",p)}},m=async()=>{try{l(!0);const p={role:s.role,designation:s.designation,department:s.department,storeId:s.storeId||null};s.role==="manager"&&(p.clusterHeadId=s.clusterHeadId||null),await kg(e.employeeId,p),alert("Employee details updated successfully!"),r(),t()}catch(p){console.error("Error updating employee:",p),alert("Failed to update employee details")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:n.jsx(Va,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold",children:"Edit Employee Details"}),n.jsxs("p",{className:"text-sm text-purple-100",children:[e.name," (",e.employeeId,")"]})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:n.jsx(qr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Va,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Name:"}),n.jsx("span",{children:e.name})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsx(Wh,{className:"w-4 h-4"}),n.jsx("span",{className:"font-medium",children:"Email:"}),n.jsx("span",{children:e.email})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Km,{className:"w-4 h-4 inline mr-2"}),"Role (System Permission Level)"]}),n.jsxs("select",{value:s.role,onChange:p=>i({...s,role:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role determines system permissions (who can manage whom)"})]}),s.role==="manager"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Dn,{className:"w-4 h-4 inline mr-2"}),"Cluster Head ID (Optional)"]}),n.jsx("input",{type:"text",value:s.clusterHeadId,onChange:p=>i({...s,clusterHeadId:p.target.value}),placeholder:"e.g., BM005 (leave empty if reporting to another manager)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only for top-level managers. Leave empty if this manager reports to another manager (set via Hierarchy tab instead)."})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Km,{className:"w-4 h-4 inline mr-2"}),"Designation (Job Title)"]}),n.jsxs("select",{value:s.designation||"",onChange:p=>i({...s,designation:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Designation"}),n.jsx("option",{value:"operations_incharge",children:"Operations Incharge"}),n.jsx("option",{value:"store_incharge",children:"Store Incharge"}),n.jsx("option",{value:"production_incharge",children:"Production Incharge"}),n.jsx("option",{value:"store_ops",children:"Store Operations"}),n.jsx("option",{value:"production_ops",children:"Production Operations"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Designation is the job title (appears in organization chart)"})]}),(s.designation==="store_incharge"||s.designation==="store_ops")&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(fl,{className:"w-4 h-4 inline mr-2"}),"Store Assignment"]}),n.jsxs("select",{value:s.storeId||"",onChange:p=>i({...s,storeId:p.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Store"}),d.map(p=>n.jsx("option",{value:p.id,children:p.name},p.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign to a specific store location"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(fl,{className:"w-4 h-4 inline mr-2"}),"Department"]}),n.jsxs("select",{value:s.department||"",onChange:p=>i({...s,department:p.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Department"}),n.jsx("option",{value:"store_operations",children:"Store Operations"}),n.jsx("option",{value:"production",children:"Production"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Department determines which operations they can manage"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Understanding Role vs Designation:"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Role"})," = System permission level (employee/manager/cluster_head)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Designation"})," = Job title (Store Incharge, Operations Manager, etc.)"]}),n.jsx("li",{children:' Example: BM008 can have role="manager" + designation="store_incharge"'}),n.jsx("li",{children:' This allows them to manage employees while having "Store Incharge" as their title'})]})]})]}),n.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex items-center justify-end gap-3 rounded-b-2xl border-t",children:[n.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:m,disabled:o,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[n.jsx(Vi,{className:"w-4 h-4"}),o?"Saving...":"Save Changes"]})]})]})})}function nxe({clusterHeadId:e}){const[t,r]=P.useState([]),[a,s]=P.useState([]),[i,o]=P.useState([]),[l,d]=P.useState(!1),[u,f]=P.useState(null),[m,p]=P.useState({}),[g,b]=P.useState(null),[y,v]=P.useState(null);P.useEffect(()=>{N()},[]);const N=async()=>{try{d(!0);const B=await ti();console.log("All employees loaded:",B),console.log("Current cluster head ID:",e);const M=B.filter(X=>(X.role==="employee"||X.role==="manager")&&X.role!=="cluster_head");r(M),console.log("Filtered employees and managers:",M);const O=B.filter(X=>X.role==="manager"&&X.clusterHeadId===e);s(O);const U=B.filter(X=>X.role==="cluster_head");o(U),console.log("Available managers (role=manager, clusterHeadId="+e+"):",O),console.log("Available cluster heads:",U);const ie={};M.forEach(X=>{X.managerId&&(ie[X.employeeId]=X.managerId)}),p(ie)}catch(B){if(B instanceof Error&&(B.message==="Not authenticated"||B.message==="Unauthorized"))return;console.error("Error loading data:",B),alert("Failed to load data")}finally{d(!1)}},k=(B,M)=>{p(O=>({...O,[B]:M}))},w=async B=>{try{f(B);const M=m[B];if(!M){alert("Please select a manager");return}await Ng(B,M),alert("Manager assigned successfully!"),await N()}catch(M){console.error("Error assigning manager:",M),alert("Failed to assign manager")}finally{f(null)}},A=async(B,M)=>{if(confirm(`Are you sure you want to promote ${M} to Manager? This will:

1. Change their role from Employee to Manager
2. Set their cluster head to ${e}
3. Allow them to manage other employees

Continue?`))try{b(B),await kg(B,{role:"manager",clusterHeadId:e}),alert(`${M} has been promoted to Manager!`),await N()}catch(O){console.error("Error promoting to manager:",O),alert("Failed to promote employee to manager")}finally{b(null)}},S=t.filter(B=>!B.managerId),_=t.filter(B=>B.managerId),E=B=>{if(!B)return"Unassigned";const M=a.find(U=>U.employeeId===B);if(M)return M.name;const O=i.find(U=>U.employeeId===B);return O?`${O.name} (Cluster Head)`:"Unknown Manager"},C=B=>{const M=[];return B.role==="manager"?(M.push(...i),M.push(...a.filter(O=>O.employeeId!==B.employeeId))):M.push(...a.filter(O=>O.employeeId!==B.employeeId)),M},I=B=>{if(!B)return n.jsx("span",{className:"text-gray-400 italic",children:"No designation"});const M={operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"};return n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:M[B]||B})};return l?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-gray-500",children:"Loading..."})}):n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Assign Managers to Employees"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage employee-manager relationships across your organization"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(Dn,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Employees"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx(or,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Assigned"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:n.jsx(Nr,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Unassigned"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.length})]})]})})]}),a.length===0?n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 text-center",children:[n.jsx(Nr,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"No Managers Available"}),n.jsx("p",{className:"text-yellow-700",children:"You need to create managers first before assigning them to employees."})]}):n.jsxs(n.Fragment,{children:[S.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-t-xl px-6 py-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-red-900 flex items-center gap-2",children:[n.jsx(Nr,{className:"w-5 h-5"}),"Unassigned Employees (",S.length,")"]}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:"These employees need to be assigned to a manager"})]}),n.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assign Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),n.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(B.designation)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("select",{value:m[B.employeeId]||"",onChange:M=>k(B.employeeId,M.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"",children:"Select a manager..."}),C(B).map(M=>n.jsxs("option",{value:M.employeeId,children:[M.name," (",M.employeeId,")"]},M.employeeId))]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!m[B.employeeId]||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(Vi,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Assign"]}),B.role==="employee"&&n.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(qE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),n.jsxs("button",{onClick:()=>v(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(wj,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),_.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-t-xl px-6 py-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[n.jsx(or,{className:"w-5 h-5"}),"Assigned Employees (",_.length,")"]}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:"These employees are already assigned to managers"})]}),n.jsx("div",{className:"bg-white rounded-b-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reassign Manager"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.name}),n.jsx("div",{className:"text-sm text-gray-500",children:B.email})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:B.employeeId}),B.role==="employee"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Employee"}),B.role==="manager"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Manager"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(B.designation)}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[n.jsx("div",{className:"text-sm text-gray-900",children:E(B.managerId)}),B.managerId&&n.jsx("div",{className:"text-xs text-gray-500",children:B.managerId})]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("select",{value:m[B.employeeId]||B.managerId||"",onChange:M=>k(B.employeeId,M.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm",children:[n.jsx("option",{value:"",children:"Select a manager..."}),C(B).map(M=>n.jsxs("option",{value:M.employeeId,children:[M.name," (",M.employeeId,")"]},M.employeeId))]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>w(B.employeeId),disabled:!m[B.employeeId]||m[B.employeeId]===B.managerId||u===B.employeeId,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(Vi,{className:"w-4 h-4"}),u===B.employeeId?"Saving...":"Update"]}),B.role==="employee"&&n.jsxs("button",{onClick:()=>A(B.employeeId,B.name),disabled:g===B.employeeId,className:"inline-flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors text-sm",children:[n.jsx(qE,{className:"w-4 h-4"}),g===B.employeeId?"Promoting...":"Promote"]}),n.jsxs("button",{onClick:()=>v(B),className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(wj,{className:"w-4 h-4"}),"Edit"]})]})})]},B.employeeId))})]})})]}),t.length===0&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-12 text-center",children:[n.jsx(Dn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Found"}),n.jsx("p",{className:"text-gray-600",children:"There are no employees in the system yet. Create employees first through the Employee Management tab."})]})]}),y&&n.jsx(e8,{employee:y,onClose:()=>v(null),onSave:N,clusterHeadId:e})]})}function EI({currentUser:e}){const[t,r]=P.useState([]),[a,s]=P.useState(!0);P.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const f=await ti(),m=f.find(N=>N.employeeId===e.employeeId);if(!m){s(!1);return}console.log("[Hierarchy Debug] Current user record:",m);const p=[m];let g=m,b=0;const y=10;for(;g&&b<y;){const N=g.clusterHeadId||g.managerId||g.inchargeId;if(console.log("[Hierarchy Debug] Looking for superior ID:",N,"for",g.name),!N)break;const k=f.find(w=>w.employeeId===N);if(console.log("[Hierarchy Debug] Found superior:",k),k){if(p.some(w=>w.employeeId===k.employeeId)){console.log("[Hierarchy Debug] Circular reference detected, breaking");break}if(p.push(k),g=k,k.role==="cluster_head"){console.log("[Hierarchy Debug] Reached cluster head");break}}else break;b++}const v=p.reverse();console.log("[Hierarchy Debug] Final reporting chain (top to bottom):",v),r(v)}catch(f){console.error("Error loading hierarchy:",f)}finally{s(!1)}},o=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),l=(f,m)=>!f&&!m?"N/A":f?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",operations_manager:"Operations Manager",store_ops:"Store Operations",production_ops:"Production Operations"}[f]||f:{cluster_head:"Cluster Head",manager:"Manager",employee:"Employee"}[m||""]||m||"N/A",d=(f,m)=>m?"bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200":f.role==="cluster_head"?"bg-gradient-to-br from-blue-500 to-indigo-500":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-gray-400 to-gray-500",u=(f,m)=>m?"bg-gradient-to-r from-purple-100 to-pink-100 border-purple-300":f.role==="cluster_head"?"bg-gradient-to-r from-blue-100 to-indigo-100 border-blue-300":f.role==="manager"||f.designation?.includes("incharge")||f.designation==="operations_manager"?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-300":"bg-gray-100 border-gray-300";return a?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Hierarchy"}),n.jsx("p",{className:"text-gray-600",children:"View your reporting chain from top to bottom"})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:t.length>0?n.jsx("div",{className:"flex flex-col items-center",children:t.map((f,m)=>{const p=f.employeeId===e.employeeId,g=m===t.length-1;return n.jsxs("div",{className:"w-full flex flex-col items-center",children:[n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"inline-block",children:[n.jsx("div",{className:`w-28 h-28 rounded-2xl flex items-center justify-center mb-4 ${d(f,p)}`,children:n.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xl text-gray-700",children:o(f.name)})})}),n.jsxs("div",{className:`px-6 py-3 rounded-lg border-2 ${u(f,p)}`,children:[n.jsx("p",{className:"font-semibold text-gray-900",children:f.name}),n.jsx("p",{className:"text-sm text-gray-700",children:l(f.designation,f.role)}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.employeeId}),p&&n.jsx("p",{className:"text-xs text-purple-600 mt-1 font-semibold",children:"(You)"})]})]})}),!g&&n.jsxs("div",{className:"flex flex-col items-center my-6",children:[n.jsx("div",{className:"w-px h-8 bg-gray-300"}),n.jsx(Y0,{className:"w-6 h-6 text-gray-400"}),n.jsx("div",{className:"w-px h-8 bg-gray-300"})]})]},f.employeeId)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(fl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg text-gray-600 mb-2",children:"No Hierarchy Found"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your organizational hierarchy hasn't been set up yet."})]})}),n.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Legend"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 ring-4 ring-purple-200 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"You (Current User)"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Cluster Head"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Manager / Incharge"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-500 rounded-lg"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Employee"})]})]})]})]})})}function t8({user:e,selectedStoreId:t,isIncharge:r=!1,inchargeDesignation:a=null}){const[s,i]=P.useState(()=>e.role==="employee"||e.role==="manager"?"timesheet":e.role==="cluster_head"?"approve-timesheet":"timesheet"),[o,l]=P.useState(0),[d,u]=P.useState(!1),f=e.role==="employee",m=e.role==="manager",p=e.role==="cluster_head";return console.log("AttendancePortal: user =",e),n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(m||p)&&!e.employeeId&&n.jsx("div",{className:"bg-red-50 border-b border-red-200 p-4",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-red-600 text-white rounded-full flex items-center justify-center text-sm",children:"!"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-red-900 font-medium",children:"Employee ID Not Found"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Your account doesn't have an employee ID associated with it. This means:"}),n.jsxs("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[n.jsx("li",{children:"You won't be able to see employees assigned to you"}),n.jsx("li",{children:"Approval workflows won't work properly"}),n.jsx("li",{children:"Employees you create won't be linked to your account"})]}),n.jsxs("p",{className:"text-sm text-red-800 mt-2 font-medium",children:[n.jsx("strong",{children:"Solution:"})," Log out and log back in. If the problem persists, your account needs to be recreated through the Employee Management system."]}),n.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Debug Info: email=",e.email,", role=",e.role,", employeeId=",e.employeeId||"NULL"]})]})]})})}),n.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-40",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center overflow-x-auto py-4 gap-2 scrollbar-hide",children:[f&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(_n,{className:"w-4 h-4"}),"Update Timesheet"]}),n.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Or,{className:"w-4 h-4"}),"Apply for Leave"]}),n.jsxs("button",{onClick:()=>i("hierarchy"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="hierarchy"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(WI,{className:"w-4 h-4"}),"Hierarchy"]})]}),m&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(_n,{className:"w-4 h-4"}),"My Timesheet"]}),n.jsxs("button",{onClick:()=>i("leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Or,{className:"w-4 h-4"}),"My Leave"]}),n.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(jo,{className:"w-4 h-4"}),"Approve Timesheets"]}),n.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(jo,{className:"w-4 h-4"}),"Approve Leaves"]}),n.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="team"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Dn,{className:"w-4 h-4"}),"My Team"]})]}),p&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i("approve-timesheet"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-timesheet"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(jo,{className:"w-4 h-4"}),"Approve Manager Timesheets"]}),n.jsxs("button",{onClick:()=>i("approve-leave"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="approve-leave"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(jo,{className:"w-4 h-4"}),"Approve Manager Leaves"]}),n.jsxs("button",{onClick:()=>i("managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(Dn,{className:"w-4 h-4"}),"Manager Overview"]}),n.jsxs("button",{onClick:()=>i("assign-managers"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all whitespace-nowrap flex-shrink-0 ${s==="assign-managers"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[n.jsx(tU,{className:"w-4 h-4"}),"Assign Managers"]})]})]})})}),n.jsxs("div",{children:[s==="timesheet"&&n.jsx(Jge,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email}}),s==="leave"&&n.jsx(Qge,{user:{employeeId:e.employeeId||"",name:e.name,email:e.email,joiningDate:e.joiningDate}}),s==="approve-timesheet"&&(m||p||r)&&n.jsx(exe,{managerId:e.employeeId||"",role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:a}),s==="approve-leave"&&(m||p||r)&&n.jsx(txe,{managerId:e.employeeId||"",managerName:e.name,role:e.role,selectedStoreId:t,isIncharge:r,inchargeDesignation:a}),s==="team"&&m&&n.jsx(rxe,{managerId:e.employeeId||"",role:"manager"},o),s==="hierarchy"&&f&&n.jsx(EI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="managers"&&p&&n.jsx(EI,{currentUser:{employeeId:e.employeeId||"",role:e.role,email:e.email,name:e.name}},o),s==="assign-managers"&&p&&n.jsx(nxe,{clusterHeadId:e.employeeId||""},o)]})]})}function r8({manager:e,level:t=0}){const r=e.managers&&e.managers.length>0||e.employees&&e.employees.length>0,a=s=>s?{operations_incharge:"Operations Incharge",store_incharge:"Store Incharge",production_incharge:"Production Incharge",store_ops:"Store Operations",production_ops:"Production Operations"}[s]||s:"Manager";return n.jsxs("div",{className:"mb-4 last:mb-0 border border-gray-200 rounded-lg bg-white",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ml,{className:"w-5 h-5 text-gray-400"}),n.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white",children:n.jsx(Ni,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"text-gray-900",children:e.name}),n.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:a(e.designation)})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[e.employeeId,"  ",e.email]})]})]})}),r&&n.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[e.managers&&e.managers.length>0&&n.jsx("div",{className:"space-y-3",children:e.managers.map(s=>n.jsx(r8,{manager:s,level:t+1},s.employeeId))}),e.employees&&e.employees.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.employees.map(s=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg border border-pink-100",children:[n.jsx(ml,{className:"w-4 h-4 text-gray-400"}),n.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:n.jsx(Va,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm text-gray-900 truncate",children:s.name}),n.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.employeeId})]})]},s.employeeId))})]})]})]})}function axe({userRole:e,selectedStoreId:t,accessToken:r}){const[a,s]=P.useState([]),[i,o]=P.useState([]),[l,d]=P.useState([]),[u,f]=P.useState({totalClusterHeads:0,totalManagers:0,totalEmployees:0}),[m,p]=P.useState(!1),[g,b]=P.useState(!1),[y,v]=P.useState(!1),[N,k]=P.useState(null),[w,A]=P.useState(null),[S,_]=P.useState([]),[E,C]=P.useState([]);P.useEffect(()=>{I()},[t]);const I=async()=>{if(!r){console.error("No access token available");return}try{p(!0);const O=await a5(t);if(console.log("[Hierarchy Frontend] Received data:",{hierarchyCount:O.hierarchy?.length||0,unassignedManagersCount:O.unassignedManagers?.length||0,unassignedEmployeesCount:O.unassignedEmployees?.length||0,stats:O.stats,selectedStoreId:t}),s(O.hierarchy||[]),o(O.unassignedManagers||[]),d(O.unassignedEmployees||[]),f(O.stats||{totalClusterHeads:0,totalManagers:0,totalEmployees:0}),e==="cluster_head")try{const X=await z5(r);_(X)}catch{console.log("User not authorized to view all cluster heads")}const ie=(await ti()).filter(X=>X.role==="manager");C(ie)}catch(O){console.error("Error loading hierarchy:",O),O instanceof Error&&!O.message.includes("JWT")&&!O.message.includes("Unauthorized")&&alert("Failed to load organizational hierarchy")}finally{p(!1)}},B=async(O,U)=>{try{await(void 0)(O,U),alert("Cluster head assigned successfully!"),b(!1),k(null),await I()}catch(ie){console.error("Error assigning cluster head:",ie),alert("Failed to assign cluster head")}},M=async(O,U)=>{try{await Ng(O,U),alert("Manager assigned successfully!"),v(!1),A(null),await I()}catch(ie){console.error("Error assigning manager:",ie),alert("Failed to assign manager")}};return m?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6 flex items-center justify-center",children:n.jsx("div",{className:"text-gray-500",children:"Loading hierarchy..."})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Organizational Hierarchy"}),n.jsx("p",{className:"text-gray-600",children:"Manage reporting relationships across the organization"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(fl,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalClusterHeads}),n.jsx("div",{className:"text-sm opacity-90",children:"Cluster Heads"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ni,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalManagers}),n.jsx("div",{className:"text-sm opacity-90",children:"Managers"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Dn,{className:"w-12 h-12 opacity-80"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-3xl",children:u.totalEmployees}),n.jsx("div",{className:"text-sm opacity-90",children:"Employees"})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl text-gray-900",children:"Organizational Structure"}),n.jsx(WI,{className:"w-6 h-6 text-purple-600"})]}),a.length===0&&i.length===0&&l.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(fl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No employees found. Create employees to get started."})]}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:"space-y-6 mb-6",children:a.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white",children:n.jsx(fl,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:O.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Cluster Head"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),O.managers&&O.managers.length>0&&n.jsx("div",{className:"p-4 bg-gray-50",children:O.managers.map(U=>n.jsx(r8,{manager:U},U.employeeId))})]},O.employeeId))}),i.length>0&&i.some(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0)&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 font-semibold",children:"Managers and Their Teams"}),i.filter(O=>O.employees&&O.employees.length>0||O.incharges&&O.incharges.length>0).map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white",children:n.jsx(Ni,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"text-gray-900",children:O.name}),n.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:"Manager"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[O.employeeId,"  ",O.email]})]})]})}),(O.incharges||O.employees)&&n.jsxs("div",{className:"p-4 space-y-4",children:[O.incharges&&O.incharges.length>0&&n.jsx("div",{className:"space-y-3",children:O.incharges.map(U=>n.jsxs("div",{className:"border border-indigo-200 rounded-lg overflow-hidden bg-indigo-50/50",children:[n.jsx("div",{className:"bg-gradient-to-r from-indigo-100 to-indigo-200 p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ml,{className:"w-4 h-4 text-indigo-400"}),n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white",children:n.jsx(Ni,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-gray-900",children:U.name}),n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded",children:U.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),n.jsx("div",{className:"text-xs text-gray-600",children:U.employeeId})]})]})}),U.employees&&U.employees.length>0&&n.jsx("div",{className:"p-3",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:U.employees.map(ie=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-indigo-100",children:[n.jsx(ml,{className:"w-3 h-3 text-gray-300"}),n.jsx("div",{className:"w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center text-white text-xs",children:n.jsx(Va,{className:"w-3 h-3"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs text-gray-900 truncate",children:ie.name}),n.jsx("div",{className:"text-xs text-gray-500 truncate",children:ie.employeeId})]})]},ie.employeeId))})})]},U.employeeId))}),O.employees&&O.employees.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Direct Reports:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.employees.map(U=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 rounded-lg",children:[n.jsx(ml,{className:"w-4 h-4 text-gray-400"}),n.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center text-white text-sm",children:n.jsx(Va,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm text-gray-900 truncate",children:U.name}),n.jsx("div",{className:"text-xs text-gray-600 truncate",children:U.employeeId})]})]},U.employeeId))})]})]})]},O.employeeId))]})]})]}),(i.length>0||l.length>0)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Managers"}),n.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:i.length})]}),n.jsx("div",{className:"space-y-3",children:i.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(Ni,{className:"w-5 h-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:O.name}),n.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),e==="cluster_head"&&n.jsx("button",{onClick:()=>{k(O),b(!0)},className:"w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Assign Cluster Head"})]},O.employeeId))})]}),l.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg text-gray-900",children:"Unassigned Employees"}),n.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 text-sm rounded-full",children:l.length})]}),n.jsx("div",{className:"space-y-3",children:l.map(O=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:n.jsx(Va,{className:"w-5 h-5 text-pink-600"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:O.name}),n.jsx("div",{className:"text-sm text-gray-600",children:O.employeeId})]})]})}),(e==="cluster_head"||e==="manager")&&n.jsx("button",{onClick:()=>{A(O),v(!0)},className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:"Assign Manager"})]},O.employeeId))})]})]}),g&&N&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Cluster Head to Manager"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Manager: ",n.jsx("strong",{children:N.name})," (",N.employeeId,")"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Cluster Head"}),n.jsxs("select",{id:"clusterHeadSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",disabled:!0,children:"Choose a cluster head..."}),S.map(O=>n.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const O=document.getElementById("clusterHeadSelect");O.value?B(N.employeeId,O.value):alert("Please select a cluster head")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),n.jsx("button",{onClick:()=>{b(!1),k(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})}),y&&w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Assign Manager to Employee"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Employee: ",n.jsx("strong",{children:w.name})," (",w.employeeId,")"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Manager"}),n.jsxs("select",{id:"managerSelect",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",disabled:!0,children:"Choose a manager..."}),E.map(O=>n.jsxs("option",{value:O.employeeId,children:[O.name," (",O.employeeId,")"]},O.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const O=document.getElementById("managerSelect");O.value?M(w.employeeId,O.value):alert("Please select a manager")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:shadow-lg transition-all",children:"Assign"}),n.jsx("button",{onClick:()=>{v(!1),A(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})]})})}function sxe({user:e,selectedStoreId:t}){const[r,a]=P.useState("employees"),[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!1),[f,m]=P.useState([]),[p,g]=P.useState(!1),[b,y]=P.useState(!1),[v,N]=P.useState(!1),[k,w]=P.useState(null),[A,S]=P.useState(""),[_,E]=P.useState(null),[C,I]=P.useState(!1),[B,M]=P.useState(!1),[O,U]=P.useState(null),[ie,X]=P.useState(""),[re,oe]=P.useState(""),[Q,F]=P.useState(!1),[J,L]=P.useState(null),[D,Y]=P.useState(""),[V,ee]=P.useState("manager"),[ge,ke]=P.useState([]),[Ce,ce]=P.useState([]),[me,Oe]=P.useState(!1),[G,ze]=P.useState(null),[Ye,ct]=P.useState("employee"),[We,Pe]=P.useState(!1),[Ne,tt]=P.useState(null),[He,pt]=P.useState(""),[Vt,hr]=P.useState(!1),[Jt,Dr]=P.useState(null),[Hr,ot]=P.useState(!1),[qt,Cr]=P.useState(null),[kt,Gt]=P.useState("none"),[$e,Ie]=P.useState(!1),[Et,Be]=P.useState(null),[_t,St]=P.useState(""),[mt,Qt]=P.useState({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""});console.log("EmployeeManagement: Current user:",e),console.log("EmployeeManagement: User employeeId:",e.employeeId),console.log("EmployeeManagement: User role:",e.role);const Tt=e.role==="manager",Zt=e.role==="cluster_head";P.useEffect(()=>{mt.role==="cluster_head"&&Qt(z=>({...z,employmentType:"fulltime"}))},[mt.role]),P.useEffect(()=>{bt(),Zt&&xn()},[t]);const xn=async()=>{try{const z=await fu();m(z)}catch(z){if(z instanceof Error&&(z.message==="Not authenticated"||z.message==="Unauthorized"))return;console.error("Error loading stores:",z)}},bt=async()=>{try{g(!0);let z;Tt&&e.employeeId?(console.log(" Loading employees for manager:",e.employeeId),z=await hc(e.employeeId),console.log(" Loaded employees:",z)):Zt?(console.log(" Loading all employees for cluster head"),z=await ti(),t&&(z=z.filter(le=>le.storeId===t||le.storeId===null||le.storeId===void 0))):z=await ti(),i(z);try{const le=await LD();l(le)}catch(le){console.error("Error loading archived employees:",le)}}catch(z){console.error("Error loading employees:",z),alert("Failed to load employees")}finally{g(!1)}},tn=async()=>{try{const le=(await ti()).map(De=>{const Ve=De.employeeId.match(/BM(\d+)/);return Ve?parseInt(Ve[1]):0}).filter(De=>De>0);return`BM${(le.length>0?Math.max(...le)+1:1).toString().padStart(3,"0")}`}catch(z){return console.error("Error generating employee ID:",z),`BM${Date.now().toString().slice(-3)}`}},Rn=(z,le)=>{const fe=z.target.files?.[0];if(!fe)return;const De=new FileReader;De.onloadend=()=>{const Ve=De.result;le==="front"?X(Ve):oe(Ve)},De.readAsDataURL(fe)},Bt=async()=>{if(!mt.name||!mt.email||!mt.password){alert("Please fill all required fields");return}if(Tt&&mt.role==="manager"){alert("Only Cluster Heads can create managers");return}try{g(!0);const z=await tn(),le={employeeId:z,name:mt.name,email:mt.email,password:mt.password,role:mt.role,employmentType:mt.employmentType,joiningDate:mt.joiningDate,dob:mt.dob,phone:mt.phone,status:"active",createdBy:e.email,createdAt:new Date().toISOString()};mt.role==="employee"?(le.managerId=e.employeeId,Tt&&e.storeId&&(le.storeId=e.storeId)):mt.role==="manager"&&(le.clusterHeadId=e.employeeId,mt.storeId&&(le.storeId=mt.storeId)),ie&&(le.aadharFront=ie),re&&(le.aadharBack=re),await BD(le),alert(` Employee created successfully!
      
Employee ID: ${z}
Name: ${mt.name}
Email: ${mt.email}
Password: ${mt.password}

 IMPORTANT: Save these credentials!
The employee can now login with their email and password.`),Qt({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),X(""),oe(""),y(!1),await bt()}catch(z){console.error("Error creating employee:",z),alert("Failed to create employee. Email might already be in use.")}finally{g(!1)}},Ut=async z=>{if(confirm("Are you sure you want to delete this employee?"))try{g(!0),await UD(z),alert("Employee deleted successfully"),await bt()}catch(le){console.error("Error deleting employee:",le),alert("Failed to delete employee")}finally{g(!1)}},yn=z=>{w(z),N(!0)},rn=async()=>{if(!Et||!_t){alert("Please enter a new password");return}try{g(!0);const z=await qD(Et.employeeId,_t);alert(` Password reset successfully!

Employee: ${z.credentials.employeeId} - ${Et.name}
Email: ${z.credentials.email}
New Password: ${z.credentials.password}

 IMPORTANT: Save these credentials and share them with the employee!`),Ie(!1),Be(null),St("")}catch(z){console.error("Error resetting password:",z),alert("Failed to reset password: "+(z instanceof Error?z.message:"Unknown error"))}finally{g(!1)}},kr=async()=>{if(k)try{g(!0);const z={name:k.name,email:k.email,role:k.role,employmentType:k.employmentType,joiningDate:k.joiningDate,dob:k.dob,phone:k.phone,status:k.status};console.log("Updating employee with data:",z),await kg(k.employeeId,z),alert("Employee updated successfully!"),N(!1),w(null),await bt()}catch(z){console.error("Error updating employee - full error:",z),console.error("Error updating employee - error message:",z instanceof Error?z.message:String(z)),alert(`Failed to update employee: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},we=()=>{const z=s.length,le=s.filter(Qe=>Qe.role==="manager").length,fe=s.filter(Qe=>Qe.employmentType==="fulltime").length,De=s.filter(Qe=>Qe.employmentType==="contract").length,Ve=s.filter(Qe=>Qe.status==="active").length;return{total:z,managers:le,fulltime:fe,contract:De,active:Ve}},nt=async()=>{if(confirm("This will assign storeIds to all employees based on their manager's store. Continue?"))try{g(!0);const z=await zD();U(z),M(!0),await bt()}catch(z){console.error("Error running migration:",z),alert(`Migration failed: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},it=async()=>{if(confirm("This will sync all employee designations (Store Incharge/Production Incharge) to their auth accounts. This ensures incharges can access their full features when they log in. Continue?"))try{g(!0);const z=await YD();alert(` Successfully synced ${z.synced} employee designations!

${z.skipped>0?`Skipped ${z.skipped} employees (no designation or no auth account)`:""}

 Store incharges should now log out and log back in to see their full features.`),await bt()}catch(z){console.error("Error syncing designations:",z),alert(`Sync failed: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},jt=async z=>{try{const le=await ti(),fe=le.filter(Ve=>Ve.role==="manager"),De=le.filter(Ve=>Ve.designation==="store_incharge"||Ve.designation==="production_incharge");ke(fe),ce(De),L(z),z.inchargeId?(ee("incharge"),Y(z.inchargeId)):(ee("manager"),Y(z.managerId||"")),F(!0)}catch(le){console.error("Error loading managers:",le),alert("Failed to load managers")}},gt=async()=>{if(!J||!D){alert("Please select a supervisor");return}try{g(!0),V==="incharge"?(await GD(J.employeeId,D),alert("Incharge assigned successfully! Employee has been assigned to their department.")):(await Ng(J.employeeId,D),alert("Operations Manager assigned successfully! Employee's store has been updated to match their new manager.")),F(!1),L(null),Y(""),await bt()}catch(z){console.error("Error assigning supervisor:",z),alert(`Failed to assign supervisor: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},H=z=>{if(!z)return"No manager assigned";const le=s.find(fe=>fe.employeeId===z);return le?`${le.name} (${le.employeeId})`:`Manager ${z}`},se=z=>{ze(z),ct(z.role),Oe(!0)},ne=async()=>{if(G)try{g(!0),await WD(G.employeeId,Ye),alert(`Role updated successfully from "${G.role}" to "${Ye}"!`),Oe(!1),ze(null),await bt()}catch(z){console.error("Error updating role:",z),alert(`Failed to update role: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},Z=z=>{tt(z),pt(z.storeId||""),Pe(!0)},q=async()=>{if(!(!Ne||!He))try{g(!0),await KD(Ne.employeeId,He);const z=f.find(le=>le.id===He)?.name||He;alert(`Store updated successfully! ${Ne.name} is now assigned to ${z}`),Pe(!1),tt(null),await bt()}catch(z){console.error("Error updating store:",z),alert(`Failed to update store: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},W=z=>{Cr(z),z.designation==="store_incharge"?Gt("store_incharge"):z.designation==="production_incharge"?Gt("production_incharge"):Gt("none"),ot(!0)},ae=async()=>{if(qt)try{g(!0);const z=kt==="none"?null:kt,le=kt==="store_incharge"?"store_operations":kt==="production_incharge"?"production":null;await VD(qt.employeeId,z,le);const fe=kt==="store_incharge"?"Store Incharge":kt==="production_incharge"?"Production Incharge":"Regular Employee";alert(`Designation updated! ${qt.name} is now ${fe}`),ot(!1),Cr(null),await bt()}catch(z){console.error("Error updating designation:",z),alert(`Failed to update designation: ${z instanceof Error?z.message:String(z)}`)}finally{g(!1)}},de=we();return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Employee Management"}),n.jsx("p",{className:"text-gray-600",children:"Unified employee, manager, and contract worker management"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),n.jsx("p",{className:"text-2xl text-gray-900",children:de.total})]}),n.jsx(Dn,{className:"w-8 h-8 text-purple-500"})]})}),Zt&&n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Managers"}),n.jsx("p",{className:"text-2xl text-gray-900",children:de.managers})]}),n.jsx(Dn,{className:"w-8 h-8 text-blue-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Full-Time"}),n.jsx("p",{className:"text-2xl text-gray-900",children:de.fulltime})]}),n.jsx(Fs,{className:"w-8 h-8 text-green-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Contract"}),n.jsx("p",{className:"text-2xl text-gray-900",children:de.contract})]}),n.jsx(Fs,{className:"w-8 h-8 text-orange-500"})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),n.jsx("p",{className:"text-2xl text-gray-900",children:de.active})]}),n.jsx(Dn,{className:"w-8 h-8 text-pink-500"})]})})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:n.jsxs("div",{className:"flex border-b border-gray-200",children:[n.jsx("button",{onClick:()=>a("employees"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="employees"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Dn,{className:"w-5 h-5"}),n.jsx("span",{children:"Employee List"})]})}),n.jsx("button",{onClick:()=>a("hierarchy"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="hierarchy"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Dn,{className:"w-5 h-5"}),n.jsx("span",{children:"Hierarchy"})]})}),n.jsx("button",{onClick:()=>a("payroll"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="payroll"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(jn,{className:"w-5 h-5"}),n.jsx("span",{children:"Payroll"})]})}),n.jsx("button",{onClick:()=>a("attendance"),className:`flex-1 px-6 py-4 text-center transition-colors ${r==="attendance"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(_n,{className:"w-5 h-5"}),n.jsx("span",{children:"Attendance"})]})})]})}),r==="hierarchy"?n.jsx(axe,{userRole:e.role,selectedStoreId:t,accessToken:e.accessToken}):r==="payroll"?n.jsx(Lk,{userRole:e.role,selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:e.employeeId,userName:e.name,selectedStoreId:t}):r==="attendance"?n.jsx(t8,{user:{employeeId:e.employeeId,name:e.name,email:e.email,role:e.role},selectedStoreId:t}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(KI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:A,onChange:z=>S(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(Ui,{className:"w-5 h-5"}),"Add ",Zt?"Employee/Manager":"Employee"]}),Zt&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(sB,{className:"w-5 h-5"}),"Create Login Accounts"]}),n.jsxs("button",{onClick:nt,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Assign store IDs to existing employees based on their manager's store",children:[n.jsx(wo,{className:"w-5 h-5"}),"Migrate Stores"]}),n.jsxs("button",{onClick:it,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50",title:"Sync employee designations to auth accounts so incharges can access their full features",children:[n.jsx(Ni,{className:"w-5 h-5"}),"Sync Designations"]})]})]})]})}),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsxs("h2",{className:"text-2xl",children:["Create New ",Zt?"Employee/Manager":"Employee"]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[Zt&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),n.jsxs("select",{value:mt.role,onChange:z=>Qt({...mt,role:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),n.jsxs("select",{value:mt.employmentType,onChange:z=>Qt({...mt,employmentType:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:mt.role==="cluster_head",children:[n.jsx("option",{value:"fulltime",children:"Full-Time"}),mt.role!=="cluster_head"&&n.jsx("option",{value:"contract",children:"Contract"})]}),mt.role==="cluster_head"&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cluster heads are always full-time employees"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",value:mt.name,onChange:z=>Qt({...mt,name:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),n.jsx("input",{type:"email",value:mt.email,onChange:z=>Qt({...mt,email:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Password *"}),n.jsx("input",{type:"password",value:mt.password,onChange:z=>Qt({...mt,password:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Create a password"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),n.jsx("input",{type:"date",value:mt.dob,onChange:z=>Qt({...mt,dob:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:mt.phone,onChange:z=>Qt({...mt,phone:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),n.jsx("input",{type:"date",value:mt.joiningDate,onChange:z=>Qt({...mt,joiningDate:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),Zt&&mt.role==="manager"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assign to Store *"}),n.jsxs("select",{value:mt.storeId,onChange:z=>Qt({...mt,storeId:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select a store..."}),f.map(z=>n.jsxs("option",{value:z.id,children:[z.name," ",z.location&&`- ${z.location}`]},z.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Manager will be assigned to this store"})]}),Tt&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-blue-800",children:" Employee will be assigned to your store automatically"})}),mt.role==="employee"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(Zl,{className:"w-5 h-5"}),ie?"Change Front":"Upload Front",n.jsx("input",{type:"file",accept:"image/*",onChange:z=>Rn(z,"front"),className:"hidden"})]}),ie&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(Zl,{className:"w-5 h-5"}),re?"Change Back":"Upload Back",n.jsx("input",{type:"file",accept:"image/*",onChange:z=>Rn(z,"back"),className:"hidden"})]}),re&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:Bt,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Creating...":"Create Employee"}),n.jsx("button",{onClick:()=>{y(!1),Qt({name:"",email:"",password:"",role:"employee",employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],dob:"",phone:"",storeId:e.storeId||""}),X(""),oe("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),v&&k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Edit Employee"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[Zt&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role *"}),n.jsxs("select",{value:k.role,onChange:z=>w({...k,role:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee"}),n.jsx("option",{value:"manager",children:"Manager"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Employment Type *"}),n.jsxs("select",{value:k.employmentType,onChange:z=>w({...k,employmentType:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"fulltime",children:"Full-Time"}),n.jsx("option",{value:"contract",children:"Contract"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name *"}),n.jsx("input",{type:"text",value:k.name,onChange:z=>w({...k,name:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter full name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email *"}),n.jsx("input",{type:"email",value:k.email,onChange:z=>w({...k,email:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"employee@example.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date of Birth"}),n.jsx("input",{type:"date",value:k.dob,onChange:z=>w({...k,dob:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Phone Number"}),n.jsx("input",{type:"tel",value:k.phone,onChange:z=>w({...k,phone:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"+91 9876543210"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Joining Date *"}),n.jsx("input",{type:"date",value:k.joiningDate,onChange:z=>w({...k,joiningDate:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),k.role==="employee"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Front)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(Zl,{className:"w-5 h-5"}),ie?"Change Front":"Upload Front",n.jsx("input",{type:"file",accept:"image/*",onChange:z=>Rn(z,"front"),className:"hidden"})]}),ie&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Aadhar Card (Back)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors",children:[n.jsx(Zl,{className:"w-5 h-5"}),re?"Change Back":"Upload Back",n.jsx("input",{type:"file",accept:"image/*",onChange:z=>Rn(z,"back"),className:"hidden"})]}),re&&n.jsx("span",{className:"text-sm text-green-600",children:" Uploaded"})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:kr,disabled:p,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Employee"}),n.jsx("button",{onClick:()=>{N(!1),w(null),X(""),oe("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-pink-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Role"}),Zt&&n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Store"}),Zt&&n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Designation"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Joining Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p?n.jsx("tr",{children:n.jsx("td",{colSpan:Zt?10:8,className:"px-6 py-8 text-center text-gray-500",children:"Loading employees..."})}):(()=>{const z=s.filter(le=>A===""||le.employeeId.toLowerCase().includes(A.toLowerCase())||le.name.toLowerCase().includes(A.toLowerCase())||le.email.toLowerCase().includes(A.toLowerCase()));return z.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:Zt?10:8,className:"px-6 py-8 text-center text-gray-500",children:A?"No employees found matching your search":"No employees found"})}):z.map(le=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:le.employeeId})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:le.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:le.email}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${le.role==="manager"?"bg-blue-100 text-blue-700":le.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:le.role==="manager"?"Manager":le.role==="cluster_head"?"Cluster Head":"Employee"})}),Zt&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:le.storeId?n.jsx("span",{className:"text-sm text-gray-900",children:f.find(fe=>fe.id===le.storeId)?.name||le.storeId}):n.jsx("span",{className:"text-sm text-red-600",children:"No Store"})}),Zt&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:le.designation==="operations_incharge"?n.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:"Operations Incharge"}):le.designation==="store_incharge"?n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:"Store Incharge"}):le.designation==="production_incharge"?n.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Production Incharge"}):le.designation==="store_ops"?n.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs",children:"Store Ops"}):le.designation==="production_ops"?n.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-600 rounded text-xs",children:"Production Ops"}):n.jsx("span",{className:"text-sm text-gray-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${le.employmentType==="fulltime"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:le.employmentType==="fulltime"?"Full-Time":"Contract"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(le.joiningDate).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${le.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:le.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E(le),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:n.jsx(Fs,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Ut(le.employeeId),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(Rs,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>yn(le),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Full Profile",children:n.jsx(Li,{className:"w-5 h-5"})}),Zt&&n.jsx("button",{onClick:()=>{Dr(le),hr(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Role & Designation",children:n.jsx(Ni,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{Be(le),Ie(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Reset Password",children:n.jsx(oB,{className:"w-5 h-5"})}),Zt&&le.role==="employee"&&n.jsx("button",{onClick:()=>jt(le),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Assign Supervisor (Manager or Incharge)",children:n.jsx(Ni,{className:"w-5 h-5"})}),Zt&&le.role!=="cluster_head"&&n.jsx("button",{onClick:()=>Z(le),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Change Store",children:n.jsx(Gi,{className:"w-5 h-5"})}),Zt&&le.role==="employee"&&n.jsx("button",{onClick:()=>W(le),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Assign Designation (Store/Production Incharge)",children:n.jsx(Ni,{className:"w-5 h-5"})}),Zt&&!["employee","manager","cluster_head"].includes(le.role)&&n.jsx("button",{onClick:()=>se(le),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Fix Role (Invalid Role Detected)",children:n.jsx(Nr,{className:"w-5 h-5"})})]})})]},le.employeeId))})()})]})})}),Zt&&o.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_n,{className:"w-6 h-6 text-gray-500"}),n.jsxs("h3",{className:"text-xl text-gray-700",children:["Past Employees (",o.length,")"]})]}),n.jsx("button",{onClick:()=>u(!d),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:d?"Hide":"Show"})]}),d&&n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Employee ID"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Joining Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Release Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Total Earnings"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-600 uppercase tracking-wider",children:"Duration"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(z=>{const le=new Date(z.joiningDate||z.createdAt),fe=new Date(z.releasedAt),De=fe.getTime()-le.getTime(),Ve=Math.floor(De/(1e3*60*60*24)),Qe=Math.floor(Ve/365),Ke=Math.floor(Ve%365/30),Ge=Ve%30;let Ct="";return Qe>0&&(Ct+=`${Qe}y `),Ke>0&&(Ct+=`${Ke}m `),(Ge>0||Ct==="")&&(Ct+=`${Ge}d`),n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:z.employeeId})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:z.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${z.role==="manager"?"bg-blue-100 text-blue-700":z.role==="cluster_head"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:z.role==="cluster_head"?"Cluster Head":z.role.charAt(0).toUpperCase()+z.role.slice(1)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:new Date(z.joiningDate||z.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:fe.toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("span",{className:"text-green-600",children:["",z.totalEarnings?.toLocaleString()||"0"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:Ct.trim()})]},z.employeeId)})})]})})]}),_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Employee Details"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),n.jsx("p",{className:"text-gray-900",children:_.employeeId})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),n.jsx("p",{className:"text-gray-900",children:_.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:_.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),n.jsx("p",{className:"text-gray-900",children:_.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Employment Type"}),n.jsx("p",{className:"text-gray-900",children:_.employmentType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),n.jsx("p",{className:"text-gray-900",children:new Date(_.joiningDate).toLocaleDateString()})]}),_.dob&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),n.jsx("p",{className:"text-gray-900",children:new Date(_.dob).toLocaleDateString()})]}),_.phone&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:_.phone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),n.jsx("p",{className:"text-gray-900",children:_.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),n.jsx("p",{className:"text-gray-900",children:_.createdBy})]}),_.designation&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Designation"}),n.jsx("p",{className:"text-gray-900",children:_.designation==="store_incharge"?"Store Incharge":"Production Incharge"})]}),_.department&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Department"}),n.jsx("p",{className:"text-gray-900",children:_.department==="store_operations"?"Store Operations":"Production"})]}),_.managerId&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Manager)"}),n.jsx("p",{className:"text-gray-900",children:H(_.managerId)})]}),_.inchargeId&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Reports To (Incharge)"}),n.jsx("p",{className:"text-gray-900",children:H(_.inchargeId)})]})]}),_.aadharFront&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Front)"}),n.jsx("img",{src:_.aadharFront,alt:"Aadhar Front",className:"w-full rounded-lg border border-gray-300"})]}),_.aadharBack&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Aadhar Card (Back)"}),n.jsx("img",{src:_.aadharBack,alt:"Aadhar Back",className:"w-full rounded-lg border border-gray-300"})]}),n.jsx("button",{onClick:()=>E(null),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})}),C&&n.jsx(v$,{onClose:()=>I(!1),employees:s.filter(z=>z.status==="active")}),B&&O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-xl",children:n.jsx("h2",{className:"text-2xl",children:"Store Migration Complete"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[n.jsx("h3",{className:"text-lg text-green-900 mb-2",children:"Migration Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:"Total Employees"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.total})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:" Updated"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.updated})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:" Skipped"}),n.jsx("p",{className:"text-2xl text-green-900",children:O.summary.skipped})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-yellow-700",children:" Needs Manual"}),n.jsx("p",{className:"text-2xl text-yellow-900",children:O.summary.needsManualAssignment||0})]}),O.summary.errors>0&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("p",{className:"text-sm text-red-700",children:" Errors"}),n.jsx("p",{className:"text-2xl text-red-900",children:O.summary.errors})]})]})]}),O.updates&&O.updates.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Successfully Updated"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-gray-700",children:"Store ID"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:O.updates.map((z,le)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-blue-600",children:z.assignedStoreId})]},le))})]})})]}),O.manualAssignmentNeeded&&O.manualAssignmentNeeded.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Needs Manual Store Assignment"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-yellow-200 rounded-lg bg-yellow-50",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-yellow-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-yellow-900",children:"Reason"})]})}),n.jsx("tbody",{className:"divide-y divide-yellow-200",children:O.manualAssignmentNeeded.map((z,le)=>n.jsxs("tr",{className:"hover:bg-yellow-100",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-yellow-800",children:z.reason})]},le))})]})}),n.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",n.jsx("strong",{children:"Action Required:"})," Go to Store Management to assign stores to managers, or assign managers to employees who don't have one."]})})]}),O.errorDetails&&O.errorDetails.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:" Errors"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-red-200 rounded-lg bg-red-50",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-red-100 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"ID"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Role"}),n.jsx("th",{className:"px-4 py-2 text-left text-sm text-red-900",children:"Error"})]})}),n.jsx("tbody",{className:"divide-y divide-red-200",children:O.errorDetails.map((z,le)=>n.jsxs("tr",{className:"hover:bg-red-100",children:[n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.employeeId}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:z.name}),n.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:z.role}),n.jsx("td",{className:"px-4 py-2 text-sm text-red-800",children:z.reason})]},le))})]})})]}),n.jsx("button",{onClick:()=>M(!1),className:"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white py-3 rounded-lg hover:shadow-lg transition-all",children:"Close"})]})]})}),Q&&J&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Assign Supervisor"}),n.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[J.name," (",J.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[(J.managerId||J.inchargeId)&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Current Supervisor"}),n.jsx("p",{className:"text-blue-900",children:J.inchargeId?`${H(J.inchargeId)} (Incharge)`:H(J.managerId||"")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supervisor Type *"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",value:"manager",checked:V==="manager",onChange:z=>{ee(z.target.value),Y("")},className:"mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Operations Manager"})]}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",value:"incharge",checked:V==="incharge",onChange:z=>{ee(z.target.value),Y("")},className:"mr-2"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Store/Production Incharge"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["Select ",V==="manager"?"Operations Manager":"Incharge"," *"]}),n.jsxs("select",{value:D,onChange:z=>Y(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsxs("option",{value:"",children:["Select ",V==="manager"?"a manager":"an incharge","..."]}),V==="manager"?ge.map(z=>n.jsxs("option",{value:z.employeeId,children:[z.name," (",z.employeeId,")",z.storeId?` - Store: ${z.storeId}`:" - No store assigned"]},z.employeeId)):Ce.map(z=>n.jsxs("option",{value:z.employeeId,children:[z.name," (",z.employeeId,") - ",z.designation==="store_incharge"?"Store Incharge":"Production Incharge"]},z.employeeId))]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",V==="manager"?"Employee's store will be automatically updated to match their manager's store":"Employee will be assigned to the incharge's department"]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:gt,disabled:p||!D,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Supervisor"}),n.jsx("button",{onClick:()=>{F(!1),L(null),Y(""),ee("manager")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),me&&G&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Fix Employee Role"}),n.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[G.name," (",G.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-orange-600 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-orange-800 mb-1",children:[n.jsx("strong",{children:"Invalid Role Detected:"}),' "',G.role,'"']}),n.jsx("p",{className:"text-xs text-orange-700",children:"This role is not recognized by the system. Please select a valid role below."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Correct Role *"}),n.jsxs("select",{value:Ye,onChange:z=>ct(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[n.jsx("option",{value:"employee",children:"Employee - Regular staff (can be fulltime or contract)"}),n.jsx("option",{value:"manager",children:"Manager - Manages employees and a store"}),n.jsx("option",{value:"cluster_head",children:"Cluster Head - Manages multiple stores"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:' Most workers (kitchen staff, delivery, etc.) should be "Employee"'})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:ne,disabled:p,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Role"}),n.jsx("button",{onClick:()=>{Oe(!1),ze(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),We&&Ne&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Change Employee Store"}),n.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:[Ne.name," (",Ne.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Gi,{className:"w-5 h-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-blue-900 mb-1",children:[n.jsx("strong",{children:"Current Store:"})," ",Ne.storeId?f.find(z=>z.id===Ne.storeId)?.name||Ne.storeId:"No store assigned"]}),n.jsx("p",{className:"text-xs text-blue-700",children:"Select a new store below to reassign this employee."})]})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select New Store *"}),n.jsxs("select",{value:He,onChange:z=>pt(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select a store..."}),f.map(z=>n.jsxs("option",{value:z.id,children:[z.name," - ",z.location]},z.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" This will update the employee's store assignment immediately"})]}),He&&He!==Ne.storeId&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsx("p",{className:"text-xs text-yellow-800",children:" This will move the employee to a different store. Their manager assignment will remain unchanged."})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:q,disabled:p||!He,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Updating...":"Update Store"}),n.jsx("button",{onClick:()=>{Pe(!1),tt(null),pt("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Hr&&qt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Assign Employee Designation"}),n.jsxs("p",{className:"text-sm text-indigo-100 mt-1",children:[qt.name," (",qt.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ni,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-indigo-900 mb-1",children:n.jsx("strong",{children:"Department Incharge Designations"})}),n.jsx("p",{className:"text-xs text-indigo-700",children:"Assign employees as Store Incharge or Production Incharge. They will manage other employees in their department."})]})]})}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("p",{className:"text-sm text-blue-900",children:[n.jsx("strong",{children:"Current Designation:"})," ",qt.designation==="store_incharge"?"Store Incharge":qt.designation==="production_incharge"?"Production Incharge":"Regular Employee"]}),qt.department&&n.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Department: ",qt.department==="store_operations"?"Store Operations":"Production"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Select Designation"}),n.jsxs("select",{value:kt,onChange:z=>Gt(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[n.jsx("option",{value:"none",children:"Regular Employee (No Designation)"}),n.jsx("option",{value:"store_incharge",children:"Store Incharge - Store Operations Department"}),n.jsx("option",{value:"production_incharge",children:"Production Incharge - Production Department"})]})]}),kt!=="none"&&n.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-gray-700",children:[kt==="store_incharge"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Store Incharge Responsibilities:"}),n.jsx("br",{})," Customer-facing operations and administration",n.jsx("br",{})," Manages Cashier, Kitchen Helper, Store Staff/Assistant",n.jsx("br",{})," Reports to Operations Manager"]}),kt==="production_incharge"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Production Incharge Responsibilities:"}),n.jsx("br",{})," Food preparation, quality control, production planning",n.jsx("br",{})," Manages Momo Makers and production team",n.jsx("br",{})," Reports to Operations Manager"]})]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:ae,disabled:p,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Assigning...":"Assign Designation"}),n.jsx("button",{onClick:()=>{ot(!1),Cr(null),Gt("none")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),$e&&Et&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[n.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-xl",children:[n.jsx("h2",{className:"text-2xl",children:"Reset Password"}),n.jsxs("p",{className:"text-sm text-orange-100 mt-1",children:[Et.name," (",Et.employeeId,")"]})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:" Important:"})," After resetting, save the new credentials and share them securely with the employee."]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Current Email"}),n.jsx("input",{type:"text",value:Et.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"New Password *"}),n.jsx("input",{type:"text",value:_t,onChange:z=>St(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter new password",autoFocus:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters. Use a strong, memorable password."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{onClick:rn,disabled:p||!_t,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50",children:p?"Resetting...":"Reset Password"}),n.jsx("button",{onClick:()=>{Ie(!1),Be(null),St("")},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-all",children:"Cancel"})]})]})]})}),Vt&&Jt&&n.jsx(e8,{employee:Jt,onClose:()=>{hr(!1),Dr(null)},onSave:()=>{bt()}})]})]})})}function CI({onNavigate:e}){const[t,r]=P.useState([]),[a,s]=P.useState(!1),[i,o]=P.useState(!1);P.useEffect(()=>{l();const g=setInterval(l,3e4);return()=>clearInterval(g)},[]);const l=async()=>{try{const g=await PD();r(g)}catch{r([])}},d=async g=>{try{await ID(g),r(t.map(b=>b.id===g?{...b,read:!0}:b))}catch(b){console.error("Error marking notification as read:",b)}},u=async()=>{o(!0);try{await DD(),r(t.map(g=>({...g,read:!0})))}catch(g){console.error("Error marking all as read:",g)}finally{o(!1)}},f=g=>{if(g.read||d(g.id),e)switch(g.type){case"sales_pending":case"sales_approved":case"sales_rejected":case"discrepancy_request":case"discrepancy_approved":case"discrepancy_rejected":e("sales",g.relatedDate||void 0);break;case"timesheet_pending":case"timesheet_approved":case"timesheet_rejected":e("attendance");break;case"leave_pending":case"leave_approved":case"leave_rejected":e("leave");break;case"production_pending":case"production_approved":e("production",g.relatedDate||void 0);break;case"production_request_new":case"production_request_accepted":case"production_request_in-preparation":case"production_request_prepared":case"production_request_shipped":case"production_request_delivered":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_new":case"stock_request_fulfilled":case"stock_request_partial":case"stock_request_cancelled":e("stock-requests",g.relatedDate||void 0,g.relatedId||void 0);break;case"stock_request_delayed":e("production-requests",g.relatedDate||void 0,g.relatedId||void 0);break}s(!1)},m=g=>g.includes("approved")?n.jsx(or,{className:"w-5 h-5 text-green-600"}):g.includes("rejected")?n.jsx(qr,{className:"w-5 h-5 text-red-600"}):g.includes("pending")||g.includes("request")?n.jsx(_n,{className:"w-5 h-5 text-orange-600"}):g.includes("logged")?n.jsx(or,{className:"w-5 h-5 text-blue-600"}):n.jsx(ja,{className:"w-5 h-5 text-blue-600"}),p=t.filter(g=>!g.read).length;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>s(!a),className:"relative p-2 text-white hover:bg-white/20 rounded-full transition-all backdrop-blur-sm border border-white/30","aria-label":"Notifications",children:[n.jsx(yj,{className:"w-6 h-6"}),p>0&&n.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-lg",children:p>99?"99+":p})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),n.jsxs("div",{className:"fixed md:absolute left-4 right-4 md:left-auto md:right-0 mt-2 md:w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[80vh] md:max-h-[600px] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-gray-900",children:"Notifications"}),p>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p," unread"]})]}),p>0&&n.jsx("button",{onClick:u,disabled:i,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Mark all read"})]}),n.jsx("div",{className:"overflow-y-auto flex-1",children:t.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(yj,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),n.jsx("p",{children:"No notifications"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:t.map(g=>n.jsx("button",{onClick:()=>f(g),className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${g.read?"":"bg-blue-50"}`,children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:m(g.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm ${g.read?"text-gray-700":"font-medium text-gray-900"}`,children:g.title}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:g.message}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ixe(g.createdAt)})]}),!g.read&&n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})})]})},g.id))})})]})]})]})}function ixe(e){const t=new Date(e),r=new Date,a=r.getTime()-t.getTime(),s=Math.floor(a/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})}const oxe=P.memo(function({stores:t,selectedStoreId:r,onStoreChange:a,showAllStores:s=!0}){const i=t.find(l=>l.id===r),o=!r;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 rounded-xl shadow-lg p-[2px]",children:n.jsxs("div",{className:"bg-white rounded-[10px] p-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:n.jsx(Gi,{className:"w-6 h-6 text-purple-600"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Current Store View"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:r||"all",onChange:l=>a(l.target.value==="all"?null:l.target.value),className:"w-full appearance-none bg-transparent border-none text-base font-semibold text-gray-900 focus:ring-0 focus:outline-none cursor-pointer pr-8",style:{paddingRight:"2rem"},children:[s&&n.jsx("option",{value:"all",children:" All Stores (Combined View)"}),t.map(l=>n.jsxs("option",{value:l.id,children:[" ",l.name," ",l.location&&`- ${l.location}`]},l.id))]}),n.jsx(Y0,{className:"absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 pointer-events-none"})]}),i?.location&&n.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-gray-600",children:[n.jsx(k2,{className:"w-3 h-3"}),n.jsx("span",{children:i.location})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 px-4 py-2 rounded-lg border border-purple-200",children:[n.jsx("div",{className:"text-xs text-gray-600 text-center",children:"Total Stores"}),n.jsx("div",{className:"text-2xl font-bold text-purple-600 text-center",children:t.length})]})})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-blue-500":"bg-green-500"} animate-pulse`}),n.jsx("span",{className:"text-gray-600",children:o?"Viewing all store data":`Viewing ${i?.name||"store"} only`})]}),n.jsxs("span",{className:"text-purple-600 font-medium",children:[o?t.length:1," store",o&&t.length!==1||!o&&!1?"s":""," active"]})]})})]})}),t.length<=5&&n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s&&n.jsx("button",{onClick:()=>a(null),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${o?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" All Stores"}),t.map(l=>n.jsxs("button",{onClick:()=>a(l.id),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${r===l.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" ",l.name]},l.id))]})]})});function lxe(){const[e,t]=P.useState(!1),[r,a]=P.useState(!1),[s,i]=P.useState(""),[o,l]=P.useState(null),d=async()=>{try{t(!0),i(""),a(!1);const u=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/setup-cluster-head`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify({email:"subham.tewari@bunnymomos.com",password:"Subham@186",name:"Subham Tewari"})}),f=await u.json();if(!u.ok)throw new Error(f.error||f.details||"Failed to setup account");a(!0),l(f),console.log("Setup successful:",f)}catch(u){console.error("Setup error:",u),i(u instanceof Error?u.message:"Failed to setup account")}finally{t(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-6",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ui,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setup Cluster Head Account"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"This will create a cluster head account for Subham Tewari"})]}),s&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:"Error"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:s})]})]}),r&&o&&n.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx(or,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-900",children:"Success!"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:o.message})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsx("span",{className:"font-medium text-gray-900",children:o.email})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),n.jsx("span",{className:"font-medium text-purple-600",children:o.employeeId})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Password:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]})]}),n.jsx("p",{className:"text-xs text-green-700 mt-3",children:"You can now log in with these credentials"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"subham.tewari@bunnymomos.com"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Password:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham@186"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Name:"}),n.jsx("span",{className:"font-medium text-gray-900",children:"Subham Tewari"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Role:"}),n.jsx("span",{className:"font-medium text-purple-600",children:"Cluster Head"})]})]}),n.jsx("button",{onClick:d,disabled:e||r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Setting up..."]}):r?n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"w-5 h-5"}),"Account Created"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ui,{className:"w-5 h-5"}),"Create Cluster Head Account"]})}),r&&n.jsx("a",{href:"/login",className:"block w-full text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Go to Login"})]}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("p",{className:"text-xs text-blue-900 font-medium mb-2",children:"What this will do:"}),n.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[n.jsx("li",{children:" Delete any existing account with this email"}),n.jsx("li",{children:" Create a new cluster head account"}),n.jsx("li",{children:" Generate a unique employee ID (e.g., BM001)"}),n.jsx("li",{children:" Set up proper permissions and access"})]})]})]})})}function cxe({onStoreCreated:e,userRole:t}){const[r,a]=P.useState([]),[s,i]=P.useState([]),[o,l]=P.useState([]),[d,u]=P.useState(!0),[f,m]=P.useState(!1),[p,g]=P.useState(null),[b,y]=P.useState(null),[v,N]=P.useState(null),[k,w]=P.useState(""),[A,S]=P.useState(""),[_,E]=P.useState(!1),[C,I]=P.useState(""),[B,M]=P.useState(""),[O,U]=P.useState(!1),[ie,X]=P.useState(""),[re,oe]=P.useState(!1),[Q,F]=P.useState(""),[J,L]=P.useState(!1);P.useEffect(()=>{D(),Y(),V()},[]);const D=async()=>{try{const Ne=await fu();a(Ne)}catch(Ne){if(Ne instanceof Error&&(Ne.message==="Not authenticated"||Ne.message==="Unauthorized"))return;console.error("Error loading stores:",Ne)}finally{u(!1)}},Y=async()=>{try{const tt=(await ti()).filter(He=>He.role==="manager");i(tt)}catch(Ne){console.error("Error loading managers:",Ne)}},V=async()=>{try{const Ne=await e0();l(Ne)}catch(Ne){console.error("Error loading production houses:",Ne)}},ee=async Ne=>{if(Ne.preventDefault(),!k.trim()){alert("Please enter a store name");return}E(!0);try{await A2(k,A),w(""),S(""),m(!1),await D(),e&&e()}catch(tt){console.error("Error creating store:",tt),alert(tt.message||"Failed to create store")}finally{E(!1)}},ge=Ne=>{g(Ne.id),I(Ne.name),M(Ne.location)},ke=async Ne=>{if(!C.trim()){alert("Please enter a store name");return}U(!0);try{await FD(Ne,C,B),g(null),await D()}catch(tt){console.error("Error updating store:",tt),alert(tt.message||"Failed to update store")}finally{U(!1)}},Ce=()=>{g(null),I(""),M("")},ce=Ne=>{y(Ne.id),X(Ne.managerId||"")},me=async Ne=>{if(!ie){alert("Please select a manager");return}oe(!0);try{await MD(Ne,ie),y(null),X(""),await D(),await Y(),alert("Manager assigned successfully!")}catch(tt){console.error("Error assigning manager:",tt),alert(tt.message||"Failed to assign manager")}finally{oe(!1)}},Oe=()=>{y(null),X("")},G=async Ne=>{if(confirm(`Migrate all existing data (inventory, sales, payroll, employees) to ${Ne.name}? This will assign all data without a store to this store.`))try{const tt=await $D(Ne.id);alert(` Migration successful!

Inventory: ${tt.migratedCount.inventory}
Overheads: ${tt.migratedCount.overheads}
Sales: ${tt.migratedCount.sales}
Employees: ${tt.migratedCount.employees}
Timesheets: ${tt.migratedCount.timesheets}
Leaves: ${tt.migratedCount.leaves}
Payouts: ${tt.migratedCount.payouts}`)}catch(tt){console.error("Error migrating data:",tt),alert(tt.message||"Failed to migrate data")}},ze=Ne=>{N(Ne.id),F(Ne.productionHouseId||"")},Ye=async Ne=>{if(!Q){alert("Please select a production house");return}L(!0);try{await RD(Ne,Q),N(null),F(""),await D(),await V(),e&&e(),alert("Production house assigned successfully!")}catch(tt){console.error("Error assigning production house:",tt),alert(tt.message||"Failed to assign production house")}finally{L(!1)}},ct=()=>{N(null),F("")},We=Ne=>{if(!Ne)return null;const tt=s.find(He=>He.employeeId===Ne);return tt?`${tt.name} (${tt.employeeId})`:"Unknown Manager"},Pe=Ne=>{if(!Ne)return null;const tt=o.find(He=>He.id===Ne);return tt?`${tt.name} (${tt.id})`:"Unknown Production House"};return d?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"text-gray-500",children:"Loading stores..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-gray-900 mb-1",children:" Store Management"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage your stores and assign managers"})]}),n.jsxs("button",{onClick:()=>m(!f),className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[n.jsx(qi,{className:"w-5 h-5"}),"Create Store"]})]}),f&&n.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:"Create New Store"}),n.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Store Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:k,onChange:Ne=>w(Ne.target.value),placeholder:"e.g., Downtown Branch, Main Street Store",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:A,onChange:Ne=>S(Ne.target.value),placeholder:"e.g., 123 Main St, City",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",disabled:_,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:_?"Creating...":"Create Store"}),n.jsx("button",{type:"button",onClick:()=>{m(!1),w(""),S("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.length===0?n.jsxs("div",{className:"col-span-full bg-white rounded-lg border border-gray-200 p-8 text-center",children:[n.jsx(Gi,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-gray-500 mb-2",children:"No stores yet"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Create your first store to get started"})]}):r.map(Ne=>n.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:p===Ne.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Store Name"}),n.jsx("input",{type:"text",value:C,onChange:tt=>I(tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",value:B,onChange:tt=>M(tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>ke(Ne.id),disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:[n.jsx(bo,{className:"w-4 h-4"}),"Save"]}),n.jsxs("button",{onClick:Ce,disabled:O,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(qr,{className:"w-4 h-4"}),"Cancel"]})]})]}):b===Ne.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h4",{className:"text-gray-900",children:["Assign Manager to ",Ne.name]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Manager"}),n.jsxs("select",{value:ie,onChange:tt=>X(tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Choose a manager..."}),s.filter(tt=>!tt.storeId||tt.storeId===Ne.id).map(tt=>n.jsxs("option",{value:tt.employeeId,children:[tt.name," (",tt.employeeId,")"]},tt.employeeId))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only unassigned managers or current manager shown"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>me(Ne.id),disabled:re||!ie,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[n.jsx(bo,{className:"w-4 h-4"}),re?"Assigning...":"Assign"]}),n.jsxs("button",{onClick:Oe,disabled:re,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(qr,{className:"w-4 h-4"}),"Cancel"]})]})]}):v===Ne.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h4",{className:"text-gray-900",children:["Assign Production House to ",Ne.name]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Select Production House"}),n.jsxs("select",{value:Q,onChange:tt=>F(tt.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Choose a production house..."}),o.map(tt=>n.jsx("option",{value:tt.id,children:tt.name},tt.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which production house will serve this store"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>Ye(Ne.id),disabled:J||!Q,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm disabled:opacity-50",children:[n.jsx(bo,{className:"w-4 h-4"}),J?"Assigning...":"Assign"]}),n.jsxs("button",{onClick:ct,disabled:J,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm disabled:opacity-50",children:[n.jsx(qr,{className:"w-4 h-4"}),"Cancel"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gi,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-gray-900",children:Ne.name})]}),n.jsx("button",{onClick:()=>ge(Ne),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:n.jsx(Li,{className:"w-4 h-4"})})]}),Ne.location&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[n.jsx(k2,{className:"w-4 h-4"}),n.jsx("span",{children:Ne.location})]}),n.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Va,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:Ne.managerId?n.jsx("span",{className:"text-green-600",children:We(Ne.managerId)}):n.jsx("span",{className:"text-orange-600",children:"No Manager Assigned"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Hn,{className:"w-4 h-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:Ne.productionHouseId?n.jsx("span",{className:"text-green-600",children:Pe(Ne.productionHouseId)}):n.jsx("span",{className:"text-orange-600",children:"No Production House Mapped"})})]}),n.jsxs("button",{onClick:()=>ce(Ne),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm",children:[n.jsx(Ni,{className:"w-4 h-4"}),Ne.managerId?"Change Manager":"Assign Manager"]}),n.jsxs("button",{onClick:()=>ze(Ne),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm",children:[n.jsx(Hn,{className:"w-4 h-4"}),Ne.productionHouseId?"Change Production House":"Assign Production House"]}),t==="cluster_head"&&n.jsxs("button",{onClick:()=>G(Ne),className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:[n.jsx(Os,{className:"w-4 h-4"}),"Migrate Data"]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ID: ",Ne.id]})]})]})},Ne.id))})]})}function dxe({context:e,stores:t,employees:r,onRefreshStores:a}){const[s,i]=P.useState(!1),[o,l]=P.useState(!1),[d,u]=P.useState({name:"",location:"",productionHeadId:""}),[f,m]=P.useState({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}}),p=r.filter(w=>w.designation==="production_incharge"),g=async w=>{w.preventDefault();try{await e.addProductionHouse({name:d.name,location:d.location,productionHeadId:d.productionHeadId||null,inventory:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0},createdBy:e.user?.employeeId||e.user?.email||"unknown"}),alert("Production house created successfully!"),i(!1),u({name:"",location:"",productionHeadId:""})}catch(A){console.error("Error creating production house:",A),alert("Failed to create production house. Please try again.")}},b=async(w,A)=>{try{if(!e.user?.accessToken)return;await v5(e.user.accessToken,w,A),await e.updateProductionHouse(w,{productionHeadId:A}),alert("Production head assigned successfully! Please refresh the page for changes to take effect.")}catch(S){console.error("Error assigning production head:",S),alert("Failed to assign production head. Please try again.")}},y=async(w,A)=>{try{if(!e.user?.accessToken)return;await b5(e.user.accessToken,w,A),alert("Store assigned to production house successfully!"),a()}catch(S){console.error("Error assigning store:",S),alert("Failed to assign store. Please try again.")}},v=async(w,A)=>{if(window.confirm(`Are you sure you want to delete "${A}"?

This action cannot be undone.`))try{await e.deleteProductionHouse(w),alert("Production house deleted successfully!")}catch(_){console.error("Error deleting production house:",_),alert("Failed to delete production house. Please try again.")}},N=async()=>{if(!f.fromHouseId||!f.toHouseId){alert("Please select both source and destination production houses");return}if(f.fromHouseId===f.toHouseId){alert("Source and destination cannot be the same");return}const w=Object.values(f.quantities).reduce((E,C)=>E+C,0);if(w===0){alert("Please enter quantities to transfer");return}const A=e.productionHouses.find(E=>E.id===f.fromHouseId),S=e.productionHouses.find(E=>E.id===f.toHouseId);if(window.confirm(`Transfer ${w} pieces from "${A?.name}" to "${S?.name}"?

This action cannot be undone.`))try{if(!e.user?.accessToken){alert("Not authenticated");return}await N5(e.user.accessToken,f.fromHouseId,f.toHouseId,f.quantities);const E=await e0(e.user.accessToken);e.setProductionHouses(E),alert("Inventory transferred successfully!"),l(!1),m({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})}catch(E){console.error("Error transferring inventory:",E),alert(`Failed to transfer inventory: ${E.message||"Unknown error"}`)}},k=()=>{const w=e.productionHouses.find(A=>A.id===f.fromHouseId);if(!w){alert("Please select a source production house first");return}m({...f,quantities:{chicken:w.inventory.chicken,chickenCheese:w.inventory.chickenCheese,veg:w.inventory.veg,cheeseCorn:w.inventory.cheeseCorn,paneer:w.inventory.paneer,vegKurkure:w.inventory.vegKurkure,chickenKurkure:w.inventory.chickenKurkure}})};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(Hn,{className:"w-8 h-8 text-purple-600"}),"Production House Management"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Manage production houses, inventory, and store mappings"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5"}),"Transfer Inventory"]}),n.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[n.jsx(qi,{className:"w-5 h-5"}),"New Production House"]})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create New Production House"}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Name *"}),n.jsx("input",{type:"text",required:!0,value:d.name,onChange:w=>u({...d,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Main Production House"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Location *"}),n.jsx("input",{type:"text",required:!0,value:d.location,onChange:w=>u({...d,location:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Sector 21, Dwarka"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Production Head (Optional)"}),n.jsxs("select",{value:d.productionHeadId,onChange:w=>u({...d,productionHeadId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select Production Head"}),p.map(w=>n.jsxs("option",{value:w.employeeId,children:[w.name," (",w.employeeId,")"]},w.employeeId))]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{i(!1),u({name:"",location:"",productionHeadId:""})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create"})]})]})]})}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(dr,{className:"w-6 h-6 text-blue-600"}),"Transfer Inventory Between Production Houses"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Source Production House *"}),n.jsxs("select",{value:f.fromHouseId,onChange:w=>m({...f,fromHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select source..."}),e.productionHouses.map(w=>n.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Destination Production House *"}),n.jsxs("select",{value:f.toHouseId,onChange:w=>m({...f,toHouseId:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Select destination..."}),e.productionHouses.filter(w=>w.id!==f.fromHouseId).map(w=>n.jsxs("option",{value:w.id,children:[w.name," - ",w.location]},w.id))]})]})]}),f.fromHouseId&&(()=>{const w=e.productionHouses.find(A=>A.id===f.fromHouseId);return w?n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[n.jsxs("h3",{className:"text-sm text-gray-900 mb-3",children:["Available Stock at ",w.name]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:[n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chicken})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Cheese"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenCheese})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Veg"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.veg})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Cheese Corn"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.cheeseCorn})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Paneer"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.paneer})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Veg Kurkure"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.vegKurkure})]}),n.jsxs("div",{className:"bg-white rounded p-2",children:[n.jsx("div",{className:"text-xs text-gray-600",children:"Chicken Kurkure"}),n.jsx("div",{className:"text-sm text-gray-900",children:w.inventory.chickenKurkure})]})]})]}):null})(),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm text-gray-900",children:"Transfer Quantities"}),n.jsx("button",{type:"button",onClick:k,className:"px-3 py-1.5 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:"Transfer All"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chicken,onChange:w=>m({...f,quantities:{...f.quantities,chicken:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Cheese"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chickenCheese,onChange:w=>m({...f,quantities:{...f.quantities,chickenCheese:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.veg,onChange:w=>m({...f,quantities:{...f.quantities,veg:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Cheese Corn"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.cheeseCorn,onChange:w=>m({...f,quantities:{...f.quantities,cheeseCorn:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Paneer"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.paneer,onChange:w=>m({...f,quantities:{...f.quantities,paneer:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Veg Kurkure"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.vegKurkure,onChange:w=>m({...f,quantities:{...f.quantities,vegKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-700 mb-1",children:"Chicken Kurkure"}),n.jsx("input",{type:"number",min:"0",value:f.quantities.chickenKurkure,onChange:w=>m({...f,quantities:{...f.quantities,chickenKurkure:parseInt(w.target.value)||0}}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),n.jsx("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Total Pieces to Transfer:"}),n.jsx("span",{className:"text-2xl text-green-600",children:Object.values(f.quantities).reduce((w,A)=>w+A,0)})]})}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{l(!1),m({fromHouseId:"",toHouseId:"",quantities:{chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}})},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"button",onClick:N,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Transfer Inventory"})]})]})]})}),n.jsx("div",{className:"space-y-6",children:e.productionHouses.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(Hn,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Production Houses Yet"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first production house to get started"}),n.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2",children:[n.jsx(qi,{className:"w-5 h-5"}),"Create Production House"]})]}):e.productionHouses.map(w=>{const A=p.find(E=>E.employeeId===w.productionHeadId),S=t.filter(E=>E.productionHouseId===w.id),_=Object.values(w.inventory).reduce((E,C)=>E+C,0);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl text-gray-900 mb-2",children:w.name}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(tB,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm font-mono bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["ID: ",w.id]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(k2,{className:"w-4 h-4"}),n.jsx("span",{children:w.location})]}),A&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Va,{className:"w-4 h-4"}),n.jsxs("span",{children:[A.name," (",A.employeeId,")"]})]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Total Inventory"}),n.jsxs("div",{className:"text-2xl text-purple-600",children:[_," pcs"]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"text-gray-900 mb-3 flex items-center gap-2",children:[n.jsx(dr,{className:"w-5 h-5 text-purple-600"}),"Current Stock Levels"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[n.jsxs("div",{className:"bg-red-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chicken})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Cheese"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenCheese})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.veg})]}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Cheese Corn"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.cheeseCorn})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Paneer"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.paneer})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Veg Kurkure"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.vegKurkure})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Chicken Kurkure"}),n.jsx("div",{className:"text-lg text-gray-900",children:w.inventory.chickenKurkure})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-sm text-gray-700",children:"Assign Production Head"}),A&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(e.user?.accessToken)try{const C=await(await fetch("https://xssxnhrzxvtejavoqgwg.supabase.co/functions/v1/make-server-c2dd9b9d/production",{headers:{Authorization:`Bearer ${e.user.accessToken}`}})).json();console.log(" ALL PRODUCTION RECORDS:",C.production);const I=C.production.filter(B=>B.storeId==="STORE-1766938921191-9LCH05"||B.productionHouseId==="STORE-1766938921191-9LCH05"||B.productionHouseId===w.id);console.log(" Records related to this production house:",I),console.log(" Current Production House ID:",w.id),console.log(" Records by productionHouseId:"),I.forEach(B=>{console.log(`  - Record ${B.id.slice(0,8)} (${B.date}): storeId=${B.storeId}, productionHouseId=${B.productionHouseId}`)}),alert(`Found ${I.length} records related to this production house.

Check console for details (F12).`)}catch(E){console.error("Error fetching production data:",E),alert("Failed to fetch data. Check console.")}},className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"Show current production records in console for debugging",children:" Debug Records"}),n.jsx("button",{onClick:async()=>{if(!e.user?.accessToken)return;const E=window.prompt(`Enter the OLD storeId to fix (the wrong ID that production records currently have):

For example: STORE-1766938921191-9LCH05

This will update all production records from that ID to the correct production house ID: ${w.id}`);if(!(!E||E.trim()==="")&&window.confirm(`Fix production records with OLD ID: ${E}?

This will update them to use the correct production house ID: ${w.id}`))try{const C=await w5(e.user.accessToken,w.id,E.trim());alert(` Fixed ${C.updatedCount} production records!

Please refresh the page.`),window.location.reload()}catch(C){console.error("Error fixing records:",C),alert("Failed to fix records. Please try again.")}},className:"px-3 py-1.5 bg-orange-600 text-white text-sm rounded-lg hover:bg-orange-700 transition-colors",title:"Fix old production records that have wrong productionHouseId",children:" Fix Old Records"})]})]}),n.jsxs("select",{value:w.productionHeadId||"",onChange:E=>b(w.id,E.target.value),className:"w-full md:w-96 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"No Production Head Assigned"}),p.map(E=>n.jsxs("option",{value:E.employeeId,children:[E.name," (",E.employeeId,")"]},E.employeeId))]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-gray-900 mb-3",children:["Mapped Stores (",S.length,")"]}),S.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:S.map(E=>n.jsx("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:E.name}),n.jsx("div",{className:"text-sm text-gray-600",children:E.location})]})},E.id))}):n.jsx("p",{className:"text-gray-500 text-sm",children:"No stores mapped to this production house yet"})]}),n.jsx("div",{className:"mt-4",children:n.jsxs("button",{onClick:()=>v(w.id,w.name),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[n.jsx(Rs,{className:"w-5 h-5"}),"Delete Production House"]})})]},w.id)})}),e.productionHouses.length>0&&n.jsxs("div",{className:"mt-8 bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200",children:[n.jsx("h3",{className:"text-lg text-gray-900 mb-4",children:" Unmapped Stores"}),t.filter(w=>!w.productionHouseId).length===0?n.jsx("p",{className:"text-gray-600",children:"All stores are mapped to production houses "}):n.jsx("div",{className:"space-y-3",children:t.filter(w=>!w.productionHouseId).map(w=>n.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-900",children:w.name}),n.jsx("div",{className:"text-sm text-gray-600",children:w.location})]}),n.jsxs("select",{onChange:A=>A.target.value&&y(w.id,A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"",children:[n.jsx("option",{value:"",children:"Assign to Production House"}),e.productionHouses.map(A=>n.jsx("option",{value:A.id,children:A.name},A.id))]})]},w.id))})]})]})}function uxe({context:e}){const[t,r]=P.useState([]),[a,s]=P.useState([]),[i,o]=P.useState(!1),[l,d]=P.useState(!1);P.useEffect(()=>{e.managedStoreIds&&e.managedProductionHouseIds&&(r(e.managedStoreIds),s(e.managedProductionHouseIds))},[e.managedStoreIds,e.managedProductionHouseIds]),P.useEffect(()=>{const g=JSON.stringify([...t].sort())!==JSON.stringify([...e.managedStoreIds||[]].sort()),b=JSON.stringify([...a].sort())!==JSON.stringify([...e.managedProductionHouseIds||[]].sort());d(g||b)},[t,a,e.managedStoreIds,e.managedProductionHouseIds]);const u=g=>{r(b=>b.includes(g)?b.filter(y=>y!==g):[...b,g])},f=g=>{s(b=>b.includes(g)?b.filter(y=>y!==g):[...b,g])},m=async()=>{if(!e.user?.employeeId||!e.user?.accessToken){ur.error("Employee ID not found");return}o(!0);try{await q5(e.user.accessToken,e.user.employeeId,t,a),ur.success("Cluster assignments updated successfully! Refreshing..."),setTimeout(()=>{window.location.reload()},1e3)}catch(g){console.error("Error updating cluster assignments:",g),ur.error("Failed to update cluster assignments")}finally{o(!1)}},p=()=>{r(e.managedStoreIds||[]),s(e.managedProductionHouseIds||[])};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Bi,{className:"w-8 h-8"}),n.jsx("h2",{className:"text-2xl",children:"Cluster Management"})]}),n.jsx("p",{className:"text-purple-100",children:"Assign stores and production houses to your cluster. You'll be able to view reports and analytics for all assigned locations."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:[n.jsx(Gi,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Assigned Stores"}),n.jsx("p",{className:"text-3xl",children:t.length}),n.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.stores.length," total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:[n.jsx(fl,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Production Houses"}),n.jsx("p",{className:"text-3xl",children:a.length}),n.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["of ",e.productionHouses.length," total"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white",children:[n.jsx(Dn,{className:"w-8 h-8 mb-2 opacity-90"}),n.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Locations"}),n.jsx("p",{className:"text-3xl",children:t.length+a.length}),n.jsx("p",{className:"text-xs opacity-75 mt-1",children:"in your cluster"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Gi,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Stores"}),n.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[t.length," selected"]})]}),e.stores.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No stores available"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.stores.map(g=>{const b=t.includes(g.id);return n.jsxs("button",{onClick:()=>u(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[n.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&n.jsx(or,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:g.name}),n.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(fl,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg text-gray-900",children:"Production Houses"}),n.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[a.length," selected"]})]}),e.productionHouses.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No production houses available"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.productionHouses.map(g=>{const b=a.includes(g.id);return n.jsxs("button",{onClick:()=>f(g.id),className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all text-left ${b?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[n.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center ${b?"border-purple-500 bg-purple-500":"border-gray-300 bg-white"}`,children:b&&n.jsx(or,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900",children:g.name}),n.jsx("p",{className:"text-xs text-gray-500",children:g.location})]})]},g.id)})})]}),l&&n.jsx("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 p-4 rounded-lg shadow-lg",children:n.jsxs("div",{className:"flex gap-3 max-w-4xl mx-auto",children:[n.jsx("button",{onClick:p,disabled:i,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel Changes"}),n.jsx("button",{onClick:m,disabled:i,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"w-5 h-5"}),"Save Cluster Assignments"]})})]})})]})}function hxe({context:e,stores:t,employees:r,onRefreshStores:a}){const s=e.user?.role==="cluster_head",[i,o]=P.useState(s?"cluster-management":"stores");return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-8 shadow-xl",children:[n.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-white/30",children:n.jsx(dr,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl text-white mb-1",children:"Assets Management"}),n.jsx("p",{className:"text-white/80 text-sm",children:"Manage your stores and production houses"})]})]}),n.jsxs("div",{className:"flex gap-3",children:[s&&n.jsxs("button",{onClick:()=>o("cluster-management"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="cluster-management"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Bi,{className:"w-5 h-5"}),n.jsx("span",{children:"Cluster Settings"})]}),n.jsxs("button",{onClick:()=>o("stores"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="stores"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Gi,{className:"w-5 h-5"}),n.jsx("span",{children:"Stores"})]}),n.jsxs("button",{onClick:()=>o("production-houses"),className:`flex items-center gap-2 px-6 py-3 rounded-xl transition-all backdrop-blur-sm border-2 ${i==="production-houses"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production Houses"})]})]})]})]})}),n.jsx("div",{children:i==="cluster-management"?n.jsx(uxe,{context:e}):i==="stores"?n.jsx(cxe,{onStoreCreated:a,userRole:e.user?.role}):n.jsx(dxe,{context:e,stores:t,employees:r,onRefreshStores:a})})]})}function AI({context:e,stores:t}){const[r,a]=P.useState("my-requests"),[s,i]=P.useState(!1),[o,l]=P.useState({requestId:null,quantities:{},notes:""}),d=e.user?.designation==="store_incharge",u=e.user?.designation==="production_incharge",f=t.find(S=>S.id===e.user?.storeId),m=e.productionHouses.find(S=>S.productionHeadId===e.user?.employeeId),[p,g]=P.useState({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0}),b=async S=>{if(S.preventDefault(),!f){alert("You must be assigned to a store to create requests");return}if(!f.productionHouseId){alert("Your store is not mapped to any production house. Contact cluster head.");return}const _=e.productionHouses.find(C=>C.id===f.productionHouseId);if(!_){alert("Production house not found");return}if(!Object.values(p).some(C=>C>0)){alert("Please enter at least one quantity greater than 0");return}try{const C={storeId:f.id,storeName:f.name,productionHouseId:_.id,productionHouseName:_.name,requestedBy:e.user?.employeeId||"",requestedByName:e.user?.name||"",requestDate:new Date().toISOString().split("T")[0],requestedQuantities:p};console.log(" FRONTEND: About to create stock request with data:",C),console.log(" User employeeId:",e.user?.employeeId),console.log(" User name:",e.user?.name),console.log(" Has access token:",!!e.user?.accessToken),await e.createStockRequest(C),console.log(" FRONTEND: Stock request created successfully!"),alert("Stock request created successfully!"),i(!1),g({chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0})}catch(C){console.error(" FRONTEND: Error creating stock request:",C),console.error(" Error details:",JSON.stringify(C,null,2)),alert("Failed to create stock request. Please try again.")}},y=async S=>{m&&l({requestId:S.id,quantities:{...S.requestedQuantities},notes:""})},v=async S=>{if(S.preventDefault(),!!o.requestId)try{await e.fulfillStockRequest(o.requestId,o.quantities,e.user?.employeeId||"",e.user?.name||"",o.notes||void 0),alert("Stock request fulfilled successfully!"),l({requestId:null,quantities:{},notes:""})}catch(_){console.error("Error fulfilling request:",_),alert("Failed to fulfill request. Please try again.")}},N=d?e.stockRequests.filter(S=>S.storeId===e.user?.storeId):[],k=u&&m?e.stockRequests.filter(S=>S.productionHouseId===m.id&&S.status==="pending"):[],w=S=>{switch(S){case"pending":return"bg-yellow-100 text-yellow-800";case"fulfilled":return"bg-green-100 text-green-800";case"partially_fulfilled":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=S=>{switch(S){case"pending":return n.jsx(_n,{className:"w-4 h-4"});case"fulfilled":return n.jsx(or,{className:"w-4 h-4"});case"partially_fulfilled":return n.jsx(pn,{className:"w-4 h-4"});case"cancelled":return n.jsx(Qn,{className:"w-4 h-4"});default:return n.jsx(Nr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl text-gray-900 flex items-center gap-3",children:[n.jsx(dr,{className:"w-8 h-8 text-blue-600"}),"Stock Request Management"]}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[d&&"Request stock from your production house",u&&"Fulfill stock requests from stores"]})]}),d&&n.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(Gm,{className:"w-5 h-5"}),"New Request"]})]}),d&&f&&!f.productionHouseId&&n.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-red-900",children:"Your store is not mapped to any production house. Please contact your cluster head to assign a production house."})]})}),(d||u)&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-1 mb-6 flex gap-2",children:[d&&n.jsxs("button",{onClick:()=>a("my-requests"),className:`flex-1 px-6 py-3 rounded-lg transition-all ${r==="my-requests"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["My Requests (",N.length,")"]}),u&&n.jsxs("button",{onClick:()=>a("pending-fulfillment"),className:`flex-1 px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 ${r==="pending-fulfillment"?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:["Pending Fulfillment",k.length>0&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r==="pending-fulfillment"?"bg-white text-blue-600":"bg-blue-600 text-white"}`,children:k.length})]})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Create Stock Request"}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chicken,onChange:S=>g({...p,chicken:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Cheese Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chickenCheese,onChange:S=>g({...p,chickenCheese:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Momos"}),n.jsx("input",{type:"number",min:"0",value:p.veg,onChange:S=>g({...p,veg:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Cheese Corn Momos"}),n.jsx("input",{type:"number",min:"0",value:p.cheeseCorn,onChange:S=>g({...p,cheeseCorn:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Paneer Momos"}),n.jsx("input",{type:"number",min:"0",value:p.paneer,onChange:S=>g({...p,paneer:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Veg Kurkure Momos"}),n.jsx("input",{type:"number",min:"0",value:p.vegKurkure,onChange:S=>g({...p,vegKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Chicken Kurkure Momos"}),n.jsx("input",{type:"number",min:"0",value:p.chickenKurkure,onChange:S=>g({...p,chickenKurkure:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Request"})]})]})]})}),o.requestId&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:"Fulfill Stock Request"}),n.jsxs("form",{onSubmit:v,className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:n.jsx("p",{className:"text-sm text-blue-900",children:"Adjust quantities based on available inventory. You can fulfill partially if stock is limited."})}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(o.quantities).map(([S,_])=>{const E=m?.inventory[S]||0;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:[S.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase()),n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Available: ",E,")"]})]}),n.jsx("input",{type:"number",min:"0",max:E,value:_,onChange:C=>l({...o,quantities:{...o.quantities,[S]:parseInt(C.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]},S)})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes (Optional)"}),n.jsx("textarea",{value:o.notes,onChange:S=>l({...o,notes:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any notes about this fulfillment..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l({requestId:null,quantities:{},notes:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Fulfill Request"})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[r==="my-requests"&&N.length===0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(dr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Stock Requests Yet"}),n.jsx("p",{className:"text-gray-600",children:"Create your first stock request to get momos from the production house"})]}),r==="pending-fulfillment"&&k.length===0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[n.jsx(or,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),n.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-600",children:"No pending stock requests to fulfill"})]}),r==="my-requests"&&N.map(S=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-lg text-gray-900",children:["Request to ",S.productionHouseName]}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(S.status)}`,children:[A(S.status),S.status.replace("_"," ").toUpperCase()]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested on ",new Date(S.requestDate).toLocaleDateString()]})]})}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:Object.entries(S.requestedQuantities).map(([_,E])=>E>0&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:_.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase())}),n.jsx("div",{className:"text-lg text-gray-900",children:S.fulfilledQuantities?`${S.fulfilledQuantities[_]} / ${E}`:E})]},_))}),S.notes&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[n.jsx("div",{className:"text-xs text-blue-900 mb-1",children:"Notes from Production Head:"}),n.jsx("div",{className:"text-sm text-blue-900",children:S.notes})]}),S.fulfilledBy&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Fulfilled by ",S.fulfilledByName," on ",new Date(S.fulfillmentDate).toLocaleDateString()]})]},S.id)),r==="pending-fulfillment"&&k.map(S=>n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-yellow-300",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-lg text-gray-900",children:["Request from ",S.storeName]}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs flex items-center gap-1 ${w(S.status)}`,children:[A(S.status),"PENDING"]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by ",S.requestedByName," on ",new Date(S.requestDate).toLocaleDateString()]})]}),n.jsxs("button",{onClick:()=>y(S),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[n.jsx(or,{className:"w-4 h-4"}),"Fulfill"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(S.requestedQuantities).map(([_,E])=>{const C=m?.inventory[_]||0,I=C>=E;return E>0&&n.jsxs("div",{className:`rounded-lg p-3 ${I?"bg-green-50":"bg-red-50"}`,children:[n.jsx("div",{className:"text-xs text-gray-600 mb-1",children:_.replace(/([A-Z])/g," $1").replace(/^./,B=>B.toUpperCase())}),n.jsx("div",{className:"text-lg text-gray-900",children:E}),n.jsxs("div",{className:`text-xs ${I?"text-green-600":"text-red-600"}`,children:["Available: ",C]})]},_)})})]},S.id))]})]})}const fxe=(e,t)=>{const r=new Array(e.length+t.length);for(let a=0;a<e.length;a++)r[a]=e[a];for(let a=0;a<t.length;a++)r[e.length+a]=t[a];return r},mxe=(e,t)=>({classGroupId:e,validator:t}),n8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),hg="-",TI=[],pxe="arbitrary..",gxe=e=>{const t=yxe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return xxe(o);const l=o.split(hg),d=l[0]===""&&l.length>1?1:0;return a8(l,d,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const d=a[o],u=r[o];return d?u?fxe(u,d):d:u||TI}return r[o]||TI}}},a8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],i=r.nextPart.get(s);if(i){const u=a8(e,t+1,i);if(u)return u}const o=r.validators;if(o===null)return;const l=t===0?e.join(hg):e.slice(t).join(hg),d=o.length;for(let u=0;u<d;u++){const f=o[u];if(f.validator(l))return f.classGroupId}},xxe=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?pxe+a:void 0})(),yxe=e=>{const{theme:t,classGroups:r}=e;return vxe(r,t)},vxe=(e,t)=>{const r=n8();for(const a in e){const s=e[a];fS(s,r,a,t)}return r},fS=(e,t,r,a)=>{const s=e.length;for(let i=0;i<s;i++){const o=e[i];bxe(o,t,r,a)}},bxe=(e,t,r,a)=>{if(typeof e=="string"){wxe(e,t,r);return}if(typeof e=="function"){jxe(e,t,r,a);return}Nxe(e,t,r,a)},wxe=(e,t,r)=>{const a=e===""?t:s8(t,e);a.classGroupId=r},jxe=(e,t,r,a)=>{if(kxe(e)){fS(e(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(mxe(r,e))},Nxe=(e,t,r,a)=>{const s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[l,d]=s[o];fS(d,s8(t,l),r,a)}},s8=(e,t)=>{let r=e;const a=t.split(hg),s=a.length;for(let i=0;i<s;i++){const o=a[i];let l=r.nextPart.get(o);l||(l=n8(),r.nextPart.set(o,l)),r=l}return r},kxe=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Sxe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const s=(i,o)=>{r[i]=o,t++,t>e&&(t=0,a=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=a[i])!==void 0)return s(i,o),o},set(i,o){i in r?r[i]=o:s(i,o)}}},v2="!",OI=":",_xe=[],PI=(e,t,r,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:s}),Exe=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=s=>{const i=[];let o=0,l=0,d=0,u;const f=s.length;for(let y=0;y<f;y++){const v=s[y];if(o===0&&l===0){if(v===OI){i.push(s.slice(d,y)),d=y+1;continue}if(v==="/"){u=y;continue}}v==="["?o++:v==="]"?o--:v==="("?l++:v===")"&&l--}const m=i.length===0?s:s.slice(d);let p=m,g=!1;m.endsWith(v2)?(p=m.slice(0,-1),g=!0):m.startsWith(v2)&&(p=m.slice(1),g=!0);const b=u&&u>d?u-d:void 0;return PI(i,g,p,b)};if(t){const s=t+OI,i=a;a=o=>o.startsWith(s)?i(o.slice(s.length)):PI(_xe,!1,o,void 0,!0)}if(r){const s=a;a=i=>r({className:i,parseClassName:s})}return a},Cxe=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let s=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",d=t.has(o);l||d?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(o)):s.push(o)}return s.length>0&&(s.sort(),a.push(...s)),a}},Axe=e=>({cache:Sxe(e.cacheSize),parseClassName:Exe(e),sortModifiers:Cxe(e),...gxe(e)}),Txe=/\s+/,Oxe=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(Txe);let d="";for(let u=l.length-1;u>=0;u-=1){const f=l[u],{isExternal:m,modifiers:p,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:y}=r(f);if(m){d=f+(d.length>0?" "+d:d);continue}let v=!!y,N=a(v?b.substring(0,y):b);if(!N){if(!v){d=f+(d.length>0?" "+d:d);continue}if(N=a(b),!N){d=f+(d.length>0?" "+d:d);continue}v=!1}const k=p.length===0?"":p.length===1?p[0]:i(p).join(":"),w=g?k+v2:k,A=w+N;if(o.indexOf(A)>-1)continue;o.push(A);const S=s(N,v);for(let _=0;_<S.length;++_){const E=S[_];o.push(w+E)}d=f+(d.length>0?" "+d:d)}return d},Pxe=(...e)=>{let t=0,r,a,s="";for(;t<e.length;)(r=e[t++])&&(a=i8(r))&&(s&&(s+=" "),s+=a);return s},i8=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=i8(e[a]))&&(r&&(r+=" "),r+=t);return r},Ixe=(e,...t)=>{let r,a,s,i;const o=d=>{const u=t.reduce((f,m)=>m(f),e());return r=Axe(u),a=r.cache.get,s=r.cache.set,i=l,l(d)},l=d=>{const u=a(d);if(u)return u;const f=Oxe(d,r);return s(d,f),f};return i=o,(...d)=>i(Pxe(...d))},Dxe=[],ia=e=>{const t=r=>r[e]||Dxe;return t.isThemeGetter=!0,t},o8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,l8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Mxe=/^\d+\/\d+$/,Rxe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fxe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$xe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Lxe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Bxe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pd=e=>Mxe.test(e),Er=e=>!!e&&!Number.isNaN(Number(e)),nl=e=>!!e&&Number.isInteger(Number(e)),pj=e=>e.endsWith("%")&&Er(e.slice(0,-1)),mo=e=>Rxe.test(e),Uxe=()=>!0,Hxe=e=>Fxe.test(e)&&!$xe.test(e),c8=()=>!1,qxe=e=>Lxe.test(e),zxe=e=>Bxe.test(e),Wxe=e=>!Ft(e)&&!$t(e),Kxe=e=>Au(e,h8,c8),Ft=e=>o8.test(e),Wl=e=>Au(e,f8,Hxe),gj=e=>Au(e,Jxe,Er),II=e=>Au(e,d8,c8),Vxe=e=>Au(e,u8,zxe),qm=e=>Au(e,m8,qxe),$t=e=>l8.test(e),mh=e=>Tu(e,f8),Gxe=e=>Tu(e,Qxe),DI=e=>Tu(e,d8),Yxe=e=>Tu(e,h8),Xxe=e=>Tu(e,u8),zm=e=>Tu(e,m8,!0),Au=(e,t,r)=>{const a=o8.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},Tu=(e,t,r=!1)=>{const a=l8.exec(e);return a?a[1]?t(a[1]):r:!1},d8=e=>e==="position"||e==="percentage",u8=e=>e==="image"||e==="url",h8=e=>e==="length"||e==="size"||e==="bg-size",f8=e=>e==="length",Jxe=e=>e==="number",Qxe=e=>e==="family-name",m8=e=>e==="shadow",Zxe=()=>{const e=ia("color"),t=ia("font"),r=ia("text"),a=ia("font-weight"),s=ia("tracking"),i=ia("leading"),o=ia("breakpoint"),l=ia("container"),d=ia("spacing"),u=ia("radius"),f=ia("shadow"),m=ia("inset-shadow"),p=ia("text-shadow"),g=ia("drop-shadow"),b=ia("blur"),y=ia("perspective"),v=ia("aspect"),N=ia("ease"),k=ia("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...A(),$t,Ft],_=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],C=()=>[$t,Ft,d],I=()=>[pd,"full","auto",...C()],B=()=>[nl,"none","subgrid",$t,Ft],M=()=>["auto",{span:["full",nl,$t,Ft]},nl,$t,Ft],O=()=>[nl,"auto",$t,Ft],U=()=>["auto","min","max","fr",$t,Ft],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],re=()=>["auto",...C()],oe=()=>[pd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],Q=()=>[e,$t,Ft],F=()=>[...A(),DI,II,{position:[$t,Ft]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",Yxe,Kxe,{size:[$t,Ft]}],D=()=>[pj,mh,Wl],Y=()=>["","none","full",u,$t,Ft],V=()=>["",Er,mh,Wl],ee=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[Er,pj,DI,II],Ce=()=>["","none",b,$t,Ft],ce=()=>["none",Er,$t,Ft],me=()=>["none",Er,$t,Ft],Oe=()=>[Er,$t,Ft],G=()=>[pd,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[mo],breakpoint:[mo],color:[Uxe],container:[mo],"drop-shadow":[mo],ease:["in","out","in-out"],font:[Wxe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[mo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[mo],shadow:[mo],spacing:["px",Er],text:[mo],"text-shadow":[mo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pd,Ft,$t,v]}],container:["container"],columns:[{columns:[Er,Ft,$t,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[nl,"auto",$t,Ft]}],basis:[{basis:[pd,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Er,pd,"auto","initial","none",Ft]}],grow:[{grow:["",Er,$t,Ft]}],shrink:[{shrink:["",Er,$t,Ft]}],order:[{order:[nl,"first","last","none",$t,Ft]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:re()}],mx:[{mx:re()}],my:[{my:re()}],ms:[{ms:re()}],me:[{me:re()}],mt:[{mt:re()}],mr:[{mr:re()}],mb:[{mb:re()}],ml:[{ml:re()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[l,"screen",...oe()]}],"min-w":[{"min-w":[l,"screen","none",...oe()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",r,mh,Wl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,$t,gj]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",pj,Ft]}],"font-family":[{font:[Gxe,Ft,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,$t,Ft]}],"line-clamp":[{"line-clamp":[Er,"none",$t,gj]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",$t,Ft]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",$t,Ft]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[Er,"from-font","auto",$t,Wl]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Er,"auto",$t,Ft]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$t,Ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$t,Ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},nl,$t,Ft],radial:["",$t,Ft],conic:[nl,$t,Ft]},Xxe,Vxe]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:D()}],"gradient-via-pos":[{via:D()}],"gradient-to-pos":[{to:D()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Er,$t,Ft]}],"outline-w":[{outline:["",Er,mh,Wl]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",f,zm,qm]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",m,zm,qm]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Er,Wl]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",p,zm,qm]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Er,$t,Ft]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Er]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[$t,Ft]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[Er]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",$t,Ft]}],filter:[{filter:["","none",$t,Ft]}],blur:[{blur:Ce()}],brightness:[{brightness:[Er,$t,Ft]}],contrast:[{contrast:[Er,$t,Ft]}],"drop-shadow":[{"drop-shadow":["","none",g,zm,qm]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Er,$t,Ft]}],"hue-rotate":[{"hue-rotate":[Er,$t,Ft]}],invert:[{invert:["",Er,$t,Ft]}],saturate:[{saturate:[Er,$t,Ft]}],sepia:[{sepia:["",Er,$t,Ft]}],"backdrop-filter":[{"backdrop-filter":["","none",$t,Ft]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[Er,$t,Ft]}],"backdrop-contrast":[{"backdrop-contrast":[Er,$t,Ft]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Er,$t,Ft]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Er,$t,Ft]}],"backdrop-invert":[{"backdrop-invert":["",Er,$t,Ft]}],"backdrop-opacity":[{"backdrop-opacity":[Er,$t,Ft]}],"backdrop-saturate":[{"backdrop-saturate":[Er,$t,Ft]}],"backdrop-sepia":[{"backdrop-sepia":["",Er,$t,Ft]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",$t,Ft]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Er,"initial",$t,Ft]}],ease:[{ease:["linear","initial",N,$t,Ft]}],delay:[{delay:[Er,$t,Ft]}],animate:[{animate:["none",k,$t,Ft]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,$t,Ft]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:Oe()}],"skew-x":[{"skew-x":Oe()}],"skew-y":[{"skew-y":Oe()}],transform:[{transform:[$t,Ft,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:G()}],"translate-x":[{"translate-x":G()}],"translate-y":[{"translate-y":G()}],"translate-z":[{"translate-z":G()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$t,Ft]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$t,Ft]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Er,mh,Wl,gj]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eye=Ixe(Zxe);function p8(...e){return eye(yr(e))}function Un({className:e,...t}){return n.jsx("div",{"data-slot":"card",className:p8("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function MI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tye(...e){return t=>{let r=!1;const a=e.map(s=>{const i=MI(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<a.length;s++){const i=a[s];typeof i=="function"?i():MI(e[s],null)}}}}var rye=Symbol.for("react.lazy"),fg=t9[" use ".trim().toString()];function nye(e){return typeof e=="object"&&e!==null&&"then"in e}function g8(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===rye&&"_payload"in e&&nye(e._payload)}function aye(e){const t=iye(e),r=P.forwardRef((a,s)=>{let{children:i,...o}=a;g8(i)&&typeof fg=="function"&&(i=fg(i._payload));const l=P.Children.toArray(i),d=l.find(lye);if(d){const u=d.props.children,f=l.map(m=>m===d?P.Children.count(u)>1?P.Children.only(null):P.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...o,ref:s,children:P.isValidElement(u)?P.cloneElement(u,void 0,f):null})}return n.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var sye=aye("Slot");function iye(e){const t=P.forwardRef((r,a)=>{let{children:s,...i}=r;if(g8(s)&&typeof fg=="function"&&(s=fg(s._payload)),P.isValidElement(s)){const o=dye(s),l=cye(i,s.props);return s.type!==P.Fragment&&(l.ref=a?tye(a,o):o),P.cloneElement(s,l)}return P.Children.count(s)>1?P.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oye=Symbol("radix.slottable");function lye(e){return P.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oye}function cye(e,t){const r={...t};for(const a in t){const s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[a]=s):a==="style"?r[a]={...s,...i}:a==="className"&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function dye(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const RI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,FI=yr,uye=(e,t)=>r=>{var a;if(t?.variants==null)return FI(e,r?.class,r?.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const f=r?.[u],m=i?.[u];if(f===null)return null;const p=RI(f)||RI(m);return s[u][p]}),l=r&&Object.entries(r).reduce((u,f)=>{let[m,p]=f;return p===void 0||(u[m]=p),u},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,f)=>{let{class:m,className:p,...g}=f;return Object.entries(g).every(b=>{let[y,v]=b;return Array.isArray(v)?v.includes({...i,...l}[y]):{...i,...l}[y]===v})?[...u,m,p]:u},[]);return FI(e,o,d,r?.class,r?.className)},hye=uye("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function V0({className:e,variant:t,asChild:r=!1,...a}){const s=r?sye:"span";return n.jsx(s,{"data-slot":"badge",className:p8(hye({variant:t}),e),...a})}function fye({context:e,stores:t}){const r=P.useMemo(()=>{const s=new Date;s.setDate(s.getDate()-30);const i=e.salesData.filter(y=>new Date(y.date)>=s),o=i.length>0?i.length/30:0,l=e.productionData.filter(y=>new Date(y.date)>=s),d={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0};l.forEach(y=>{d.chicken+=y.chickenMomos?.final||0,d.chickenCheese+=y.chickenCheeseMomos?.final||0,d.veg+=y.vegMomos?.final||0,d.cheeseCorn+=y.cheeseCornMomos?.final||0,d.paneer+=y.paneerMomos?.final||0,d.vegKurkure+=y.vegKurkureMomos?.final||0,d.chickenKurkure+=y.chickenKurkureMomos?.final||0});const u=Object.fromEntries(Object.entries(d).map(([y,v])=>[y,l.length>0?v/30:0])),f=7,m=[];for(let y=1;y<=f;y++){const v=new Date;v.setDate(v.getDate()+y);const N=v.getDay(),k=N===0||N===6?1.3:1;m.push({date:v.toISOString().split("T")[0],dayName:v.toLocaleDateString("en-US",{weekday:"short"}),expectedDemand:Math.round(o*k*100),recommendedProduction:Math.round(o*k*110),isWeekend:N===0||N===6})}const p=t.map(y=>{const N=e.stockRequests.filter(_=>_.storeId===y.id&&_.status==="fulfilled").reduce((_,E)=>_+(E.fulfilledQuantities?Object.values(E.fulfilledQuantities).reduce((C,I)=>C+I,0):0),0),w=e.salesData.filter(_=>_.storeId===y.id&&new Date(_.date)>=s).length/30,A=w>0?N/(w*10):99;let S="low";return A<2?S="critical":A<4?S="high":A<7&&(S="medium"),{storeName:y.name,currentStock:N,avgDailySales:Math.round(w*10),daysUntilStockout:Math.round(A),riskLevel:S,recommendedOrder:Math.round(w*10*7)}}),g=Object.entries(u).map(([y,v])=>{const N=v,k=Math.round(N*1.15),w=N>0?85:0;return{product:y.replace(/([A-Z])/g," $1").trim(),current:Math.round(N),recommended:k,efficiency:w,status:N>=k*.9?"optimal":"increase_needed"}}).filter(y=>y.current>0||y.recommended>0),b=[];for(let y=0;y<6;y++){const v=new Date;v.setMonth(v.getMonth()-(5-y));const N=e.salesData.filter(k=>{const w=new Date(k.date);return w.getMonth()===v.getMonth()&&w.getFullYear()===v.getFullYear()}).reduce((k,w)=>k+(w.onlineSales||0)+(w.offlineSales||0),0);b.push({month:v.toLocaleDateString("en-US",{month:"short"}),sales:N})}return{forecast:m,storeRisks:p,optimalSchedule:g,monthlyTrend:b,avgDailyProductionByType:u}},[e,t]),a=s=>{switch(s){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:n.jsx(S2,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Predictive Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"AI-powered forecasting and recommendations"})]})]}),n.jsxs(Un,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(Or,{className:"h-5 w-5 text-purple-600"}),"7-Day Demand Forecast"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3",children:r.forecast.map(s=>n.jsxs("div",{className:`p-4 rounded-lg border-2 ${s.isWeekend?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:s.dayName}),n.jsx("p",{className:"text-sm mb-2",children:new Date(s.date).getDate()}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Expected"}),n.jsx("p",{className:"text-lg",children:s.expectedDemand})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-green-600",children:"Recommended"}),n.jsx("p",{className:"text-lg text-green-600",children:s.recommendedProduction})]})]})]},s.date))})]}),n.jsxs(Un,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(Nr,{className:"h-5 w-5 text-orange-600"}),"Stock-out Risk by Store"]}),n.jsx("div",{className:"space-y-3",children:r.storeRisks.map(s=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"text-sm",children:s.storeName}),n.jsxs(V0,{className:`${a(s.riskLevel)} border`,children:[s.riskLevel.toUpperCase()," RISK"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Current Stock"}),n.jsx("p",{className:"text-lg",children:s.currentStock})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Avg Daily Sales"}),n.jsx("p",{className:"text-lg",children:s.avgDailySales})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Days Until Stock-out"}),n.jsx("p",{className:`text-lg ${s.daysUntilStockout<3?"text-red-600":s.daysUntilStockout<7?"text-orange-600":"text-green-600"}`,children:s.daysUntilStockout})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Recommended Order"}),n.jsx("p",{className:"text-lg text-blue-600",children:s.recommendedOrder})]})]})]},s.storeName))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Un,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Weekly Demand Forecast"}),n.jsx(ya,{width:"100%",height:300,children:n.jsxs(vo,{data:r.forecast,children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{dataKey:"dayName",tick:{fontSize:12}}),n.jsx(Jn,{tick:{fontSize:12}}),n.jsx(mn,{}),n.jsx(Ga,{}),n.jsx(sn,{dataKey:"expectedDemand",fill:"#8b5cf6",name:"Expected"}),n.jsx(sn,{dataKey:"recommendedProduction",fill:"#10b981",name:"Recommended"})]})})]}),n.jsxs(Un,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"6-Month Sales Trend"}),n.jsx(ya,{width:"100%",height:300,children:n.jsxs(Ed,{data:r.monthlyTrend,children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{dataKey:"month",tick:{fontSize:12}}),n.jsx(Jn,{tick:{fontSize:12}}),n.jsx(mn,{}),n.jsx(Ga,{}),n.jsx(ys,{type:"monotone",dataKey:"sales",stroke:"#ec4899",strokeWidth:2,name:"Sales ()"})]})})]})]}),n.jsxs(Un,{className:"p-6",children:[n.jsxs("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[n.jsx(pn,{className:"h-5 w-5 text-blue-600"}),"Optimal Production Schedule"]}),n.jsx("div",{className:"space-y-3",children:r.optimalSchedule.map(s=>n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-sm capitalize",children:s.product}),n.jsx(V0,{className:s.status==="optimal"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:s.status==="optimal"?"OPTIMAL":"INCREASE NEEDED"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Current"}),n.jsxs("span",{children:[s.current,"/day"]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-purple-500",style:{width:`${s.current/s.recommended*100}%`}})})]}),n.jsx(d9,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"w-24 text-right",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Target"}),n.jsx("p",{className:"text-lg text-green-600",children:s.recommended})]})]})]},s.product))})]})]})}function mye({context:e,stores:t}){const[r,a]=P.useState("score"),[s,i]=P.useState("30days"),o=P.useMemo(()=>{const f=s==="7days"?7:s==="30days"?30:90,m=new Date;m.setDate(m.getDate()-f);const p=new Date;p.setDate(p.getDate()-f*2);const g=new Date(m),b=t.map(y=>{const v=e.salesData.filter(re=>re.storeId===y.id&&new Date(re.date)>=m).reduce((re,oe)=>re+(oe.onlineSales||0)+(oe.offlineSales||0),0),N=e.salesData.filter(re=>re.storeId===y.id&&new Date(re.date)>=p&&new Date(re.date)<g).reduce((re,oe)=>re+(oe.onlineSales||0)+(oe.offlineSales||0),0),k=N>0?(v-N)/N*100:v>0?100:0,w=e.stockRequests.filter(re=>re.storeId===y.id&&new Date(re.requestDate)>=m),A=w.length,S=w.filter(re=>re.status==="fulfilled"||re.status==="partially_fulfilled"),_=w.reduce((re,oe)=>re+Object.values(oe.requestedQuantities).reduce((Q,F)=>Q+F,0),0),E=S.reduce((re,oe)=>re+(oe.fulfilledQuantities?Object.values(oe.fulfilledQuantities).reduce((Q,F)=>Q+F,0):0),0),C=_>0?E/_*100:0,I=A>0?_/A:0,B=E>0?v/E*(C/100):0,M=Math.min(v/1e5*100,100),O=C,U=Math.max(0,Math.min(k+50,100)),ie=Math.min(B,100),X=M*.35+O*.25+U*.25+ie*.15;return{storeId:y.id,storeName:y.name,totalSales:v,totalRequests:A,fulfillmentRate:C,avgRequestSize:I,salesGrowth:k,efficiency:B,overallScore:X,rank:0}});return b.sort((y,v)=>v.overallScore-y.overallScore),b.forEach((y,v)=>{y.rank=v+1}),r==="sales"?b.sort((y,v)=>v.totalSales-y.totalSales):r==="efficiency"&&b.sort((y,v)=>v.efficiency-y.efficiency),b},[e,t,s,r]),l=P.useMemo(()=>{const f=o.slice(0,3);return[{metric:"Sales",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalSales/1e5*100,100)]))},{metric:"Fulfillment",...Object.fromEntries(f.map(m=>[m.storeName,m.fulfillmentRate]))},{metric:"Growth",...Object.fromEntries(f.map(m=>[m.storeName,Math.max(0,Math.min(m.salesGrowth+50,100))]))},{metric:"Efficiency",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.efficiency,100)]))},{metric:"Requests",...Object.fromEntries(f.map(m=>[m.storeName,Math.min(m.totalRequests/10*100,100)]))}]},[o]),d=f=>f===1?{icon:jj,color:"bg-yellow-100 text-yellow-800 border-yellow-300",label:" 1st"}:f===2?{icon:UE,color:"bg-gray-100 text-gray-800 border-gray-300",label:" 2nd"}:f===3?{icon:UE,color:"bg-orange-100 text-orange-800 border-orange-300",label:" 3rd"}:{icon:S2,color:"bg-blue-100 text-blue-800 border-blue-300",label:`#${f}`},u=o.map(f=>({name:f.storeName,sales:f.totalSales,score:f.overallScore}));return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:n.jsx(jj,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Store Performance Comparison"}),n.jsx("p",{className:"text-muted-foreground",children:"Compare and rank store performance metrics"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"7days",children:"Last 7 Days"}),n.jsx("option",{value:"30days",children:"Last 30 Days"}),n.jsx("option",{value:"90days",children:"Last 90 Days"})]}),n.jsxs("select",{value:r,onChange:f=>a(f.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"score",children:"Overall Score"}),n.jsx("option",{value:"sales",children:"Total Sales"}),n.jsx("option",{value:"efficiency",children:"Efficiency"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.slice(0,3).map((f,m)=>{const p=d(f.rank),g=p.icon;return n.jsxs(Un,{className:"p-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-bl-full"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(V0,{className:`${p.color} border text-lg px-3 py-1`,children:p.label}),n.jsx(g,{className:"h-8 w-8 text-purple-600"})]}),n.jsx("h3",{className:"text-xl mb-4",children:f.storeName}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Overall Score"}),n.jsxs("span",{className:"text-purple-600",children:[f.overallScore.toFixed(1),"/100"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Sales"}),n.jsxs("span",{children:["",f.totalSales.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Growth"}),n.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?n.jsx(zI,{className:"inline h-4 w-4"}):n.jsx(Y0,{className:"inline h-4 w-4"}),Math.abs(f.salesGrowth).toFixed(1),"%"]})]})]})]})]},f.storeId)})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Un,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Multi-dimensional Performance (Top 3)"}),n.jsx(ya,{width:"100%",height:350,children:n.jsxs(ble,{data:l,children:[n.jsx(yF,{}),n.jsx(ku,{dataKey:"metric",tick:{fontSize:12}}),n.jsx(Nu,{angle:90,domain:[0,100],tick:{fontSize:10}}),n.jsx(lc,{name:o[0]?.storeName,dataKey:o[0]?.storeName,stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),o[1]&&n.jsx(lc,{name:o[1].storeName,dataKey:o[1].storeName,stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6}),o[2]&&n.jsx(lc,{name:o[2].storeName,dataKey:o[2].storeName,stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),n.jsx(Ga,{})]})})]}),n.jsxs(Un,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Sales & Performance Score"}),n.jsx(ya,{width:"100%",height:350,children:n.jsxs(vo,{data:u,children:[n.jsx(Ha,{strokeDasharray:"3 3"}),n.jsx(ca,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:100}),n.jsx(Jn,{yAxisId:"left",tick:{fontSize:12}}),n.jsx(Jn,{yAxisId:"right",orientation:"right",tick:{fontSize:12}}),n.jsx(mn,{}),n.jsx(Ga,{}),n.jsx(sn,{yAxisId:"left",dataKey:"sales",fill:"#8b5cf6",name:"Sales ()"}),n.jsx(sn,{yAxisId:"right",dataKey:"score",fill:"#ec4899",name:"Score"})]})})]})]}),n.jsxs(Un,{className:"p-6",children:[n.jsx("h3",{className:"text-lg mb-4",children:"Detailed Performance Metrics"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-3 px-2",children:"Rank"}),n.jsx("th",{className:"text-left py-3 px-2",children:"Store"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Score"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Sales"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Growth"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Requests"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Fulfillment"}),n.jsx("th",{className:"text-right py-3 px-2",children:"Efficiency"})]})}),n.jsx("tbody",{children:o.map(f=>{const m=d(f.rank);return n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-2",children:n.jsx(V0,{className:`${m.color} border text-xs`,children:m.label})}),n.jsx("td",{className:"py-3 px-2",children:f.storeName}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsx("span",{className:"text-purple-600",children:f.overallScore.toFixed(1)})}),n.jsxs("td",{className:"text-right py-3 px-2",children:["",f.totalSales.toLocaleString()]}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsxs("span",{className:f.salesGrowth>=0?"text-green-600":"text-red-600",children:[f.salesGrowth>=0?"+":"",f.salesGrowth.toFixed(1),"%"]})}),n.jsx("td",{className:"text-right py-3 px-2",children:f.totalRequests}),n.jsx("td",{className:"text-right py-3 px-2",children:n.jsxs("span",{className:f.fulfillmentRate>=90?"text-green-600":f.fulfillmentRate>=70?"text-yellow-600":"text-red-600",children:[f.fulfillmentRate.toFixed(1),"%"]})}),n.jsx("td",{className:"text-right py-3 px-2",children:f.efficiency.toFixed(1)})]},f.storeId)})})]})})]})]})}function pye({context:e,productionHouses:t,onNavigateToManageItems:r}){const[a,s]=P.useState(new Date().toISOString().split("T")[0]),[i,o]=P.useState(null),[l,d]=P.useState([]),[u,f]=P.useState(!0),[m,p]=P.useState({}),g=async()=>{try{const k=hu(),{data:{session:w}}=await k.auth.getSession();return w?.access_token||null}catch(k){return console.error("Error getting fresh token:",k),null}};P.useEffect(()=>{(async()=>{const w=await g();if(!w){console.error("No access token available"),f(!1);return}try{const A=await Eg(w);d(A)}catch(A){console.error("Error loading production requests:",A)}finally{f(!1)}})()},[]),P.useEffect(()=>{const k=async()=>{const w=await g();if(!w)return;console.log(" Loading production house opening balances..."),console.log("  Production houses count:",t.length),console.log("  Inventory items count:",e.inventoryItems?.length||0);const A=new Date().toISOString().substring(0,7),S={};for(const _ of t){console.log(`  Fetching recalibration for ${_.name} (${_.id})...`);try{const E=await cl(w,_.id,"production_house");if(console.log(`  Recalibration response for ${_.name}:`,E),E?.record){const C=E.record.date.substring(0,7);if(console.log(`  Recalibration date: ${C}, Current month: ${A}`),C===A){const I={};E.record.items.forEach(B=>{const M=e.inventoryItems?.find(O=>O.id===B.itemId||O.name===B.itemId);if(console.log(`    Item ${B.itemId}: ${M?"Found":"NOT FOUND"}`,M),M){const O=M.name.replace(/_([a-z])/g,U=>U[1].toUpperCase());I[O]=B.actualQuantity,console.log(`    Mapped to ${O} = ${B.actualQuantity}`)}}),S[_.id]=I,console.log(` Loaded opening balance for ${_.name}:`,I)}else console.log(`   Recalibration month ${C} doesn't match current month ${A}`)}else console.log(`   No recalibration found for ${_.name}`)}catch(E){console.error(` Error fetching recalibration for ${_.name}:`,E)}}console.log(" Final opening balances:",S),p(S)};t.length>0&&e.inventoryItems&&e.inventoryItems.length>0?k():console.log(" Skipping opening balance load:",{productionHousesCount:t.length,inventoryItemsCount:e.inventoryItems?.length||0})},[t,e.inventoryItems]);const b=P.useMemo(()=>{if(u)return[];const k=[];return console.log(" Production Houses:",t),console.log(" Production Requests:",l),console.log(" Selected Date:",a),t.forEach(w=>{console.log(`
 Processing house: ${w.name} (${w.id})`);const A=e.productionData.filter(F=>F.productionHouseId===w.id&&F.date<=a),S=l?.filter(F=>{if(!F.deliveredAt||F.status!=="delivered")return!1;let J;if(F.deliveredAt.includes("/")){const V=F.deliveredAt.split(",")[0].split("/");J=`${V[2]}-${V[1].padStart(2,"0")}-${V[0].padStart(2,"0")}`}else F.deliveredAt.includes("T")?J=F.deliveredAt.split("T")[0]:J=F.deliveredAt.split(" ")[0];const L=e.stores.find(V=>V.id===F.storeId),D=L?.productionHouseId===w.id,Y=J<=a;return console.log(`     Request ${F.id}: storeId=${F.storeId}, store.productionHouseId=${L?.productionHouseId}, houseId=${w.id}, deliveredDate=${J}, isForThisHouse=${D}, isBeforeOrOnDate=${Y}, status=${F.status}`),D&&Y})||[];console.log(`   Total delivered requests for ${w.name}: ${S.length}`),S.forEach(F=>{console.log(`    - Request: chicken=${F.chickenMomos}, chickenCheese=${F.chickenCheeseMomos}, deliveredAt=${F.deliveredAt}`)});const _=e.productionData.find(F=>F.productionHouseId===w.id&&F.date===a),E=l?.filter(F=>{if(!F.deliveredAt||F.status!=="delivered")return!1;let J;if(F.deliveredAt.includes("/")){const D=F.deliveredAt.split(",")[0].split("/");J=`${D[2]}-${D[1].padStart(2,"0")}-${D[0].padStart(2,"0")}`}else F.deliveredAt.includes("T")?J=F.deliveredAt.split("T")[0]:J=F.deliveredAt.split(" ")[0];return e.stores.find(D=>D.id===F.storeId)?.productionHouseId===w.id&&J===a})||[],C={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0},I=m[w.id]||{},B={chickenMomo:"chicken",chickenCheeseMomo:"chickenCheese",vegMomo:"veg",cheeseCornMomo:"cheeseCorn",paneerMomo:"paneer",vegKurkureMomo:"vegKurkure",chickenKurkureMomo:"chickenKurkure",schezwanMomo:"schezwan"};Object.keys(I).forEach(F=>{const J=B[F]||F;J in C&&(C[J]=I[F],console.log(`   Applied opening balance: ${F} -> ${J} = ${I[F]}`))}),A.forEach(F=>{C.chicken+=F.chickenMomos?.final||0,C.chickenCheese+=F.chickenCheeseMomos?.final||0,C.veg+=F.vegMomos?.final||0,C.cheeseCorn+=F.cheeseCornMomos?.final||0,C.paneer+=F.paneerMomos?.final||0,C.vegKurkure+=F.vegKurkureMomos?.final||0,C.chickenKurkure+=F.chickenKurkureMomos?.final||0,C.schezwan+=F.schezwanMomos?.final||0});const M={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};S.forEach(F=>{M.chicken+=F.chickenMomos||0,M.chickenCheese+=F.chickenCheeseMomos||0,M.veg+=F.vegMomos||0,M.cheeseCorn+=F.cheeseCornMomos||0,M.paneer+=F.paneerMomos||0,M.vegKurkure+=F.vegKurkureMomos||0,M.chickenKurkure+=F.chickenKurkureMomos||0,M.schezwan+=F.schezwanMomos||0});const O={chicken:_?.chickenMomos?.final||0,chickenCheese:_?.chickenCheeseMomos?.final||0,veg:_?.vegMomos?.final||0,cheeseCorn:_?.cheeseCornMomos?.final||0,paneer:_?.paneerMomos?.final||0,vegKurkure:_?.vegKurkureMomos?.final||0,chickenKurkure:_?.chickenKurkureMomos?.final||0,schezwan:_?.schezwanMomos?.final||0},U={chicken:0,chickenCheese:0,veg:0,cheeseCorn:0,paneer:0,vegKurkure:0,chickenKurkure:0,schezwan:0};E.forEach(F=>{U.chicken+=F.chickenMomos||0,U.chickenCheese+=F.chickenCheeseMomos||0,U.veg+=F.vegMomos||0,U.cheeseCorn+=F.cheeseCornMomos||0,U.paneer+=F.paneerMomos||0,U.vegKurkure+=F.vegKurkureMomos||0,U.chickenKurkure+=F.chickenKurkureMomos||0,U.schezwan+=F.schezwanMomos||0});const ie={chicken:{produced:O.chicken,sent:U.chicken,available:Math.max(0,C.chicken-M.chicken),percentage:0},chickenCheese:{produced:O.chickenCheese,sent:U.chickenCheese,available:Math.max(0,C.chickenCheese-M.chickenCheese),percentage:0},veg:{produced:O.veg,sent:U.veg,available:Math.max(0,C.veg-M.veg),percentage:0},cheeseCorn:{produced:O.cheeseCorn,sent:U.cheeseCorn,available:Math.max(0,C.cheeseCorn-M.cheeseCorn),percentage:0},paneer:{produced:O.paneer,sent:U.paneer,available:Math.max(0,C.paneer-M.paneer),percentage:0},vegKurkure:{produced:O.vegKurkure,sent:U.vegKurkure,available:Math.max(0,C.vegKurkure-M.vegKurkure),percentage:0},chickenKurkure:{produced:O.chickenKurkure,sent:U.chickenKurkure,available:Math.max(0,C.chickenKurkure-M.chickenKurkure),percentage:0},schezwan:{produced:O.schezwan,sent:U.schezwan,available:Math.max(0,C.schezwan-M.schezwan),percentage:0}};Object.keys(ie).forEach(F=>{const J=ie[F];C[F]>0?J.percentage=J.available/C[F]*100:J.percentage=0});const X=Object.values(O).reduce((F,J)=>F+J,0),re=_?(_.wastage?.dough||0)+(_.wastage?.stuffing||0)+(_.wastage?.batter||0)+(_.wastage?.coating||0):0,oe=e.productionData.filter(F=>F.productionHouseId===w.id&&F.date===a&&F.approvalStatus==="approved").length,Q=e.productionData.filter(F=>F.productionHouseId===w.id&&F.date===a&&F.approvalStatus==="pending").length;k.push({productionHouseId:w.id,productionHouseName:w.name,date:a,stock:ie,totalProduced:X,totalWastage:re,approvedEntries:oe,pendingApproval:Q}),console.log(`   Stock entry created for ${w.name}:`,{totalProduced:X,totalWastage:re,availableStock:ie,hasOpeningBalance:Object.keys(I).length>0,openingBalance:I})}),console.log(" Final stocks array:",k),k},[e.productionData,e.stores,l,t,a,m]),y=i?b.filter(k=>k.productionHouseId===i):b,v={chicken:"Chicken Momos",chickenCheese:"Chicken Cheese Momos",veg:"Veg Momos",cheeseCorn:"Cheese Corn Momos",paneer:"Paneer Momos",vegKurkure:"Veg Kurkure Momos",chickenKurkure:"Chicken Kurkure Momos",schezwan:"Schezwan Momos"},N=k=>k>=80?{bg:"bg-purple-50",border:"border-purple-200",bar:"bg-purple-500",text:"text-purple-700"}:k>=60?{bg:"bg-pink-50",border:"border-pink-200",bar:"bg-pink-500",text:"text-pink-700"}:k>=40?{bg:"bg-green-50",border:"border-green-200",bar:"bg-green-500",text:"text-green-700"}:k>=20?{bg:"bg-yellow-50",border:"border-yellow-200",bar:"bg-yellow-500",text:"text-yellow-700"}:{bg:"bg-red-50",border:"border-red-200",bar:"bg-red-500",text:"text-red-700"};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(Un,{className:"p-4 bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(nB,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"Dynamic Inventory Items"}),n.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:["You can now add custom production items beyond the default 7 momo types! Manage all items from the ",n.jsx("strong",{children:'"Manage Items"'})," page in the navigation."]}),n.jsx("p",{className:"text-xs text-orange-600",children:" Items can be production house-specific or global (available to all facilities)"})]})]})}),n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl",children:"Production House Stock Status"}),n.jsx("p",{className:"text-muted-foreground",children:"Opening balance + This month produced - Sent to stores (delivered requests)"})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Or,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"date",value:a,onChange:k=>s(k.target.value),max:new Date().toISOString().split("T")[0],className:"px-3 py-2 border rounded-lg bg-background"})]}),n.jsxs("select",{value:i||"all",onChange:k=>o(k.target.value==="all"?null:k.target.value),className:"px-4 py-2 border rounded-lg bg-background",children:[n.jsx("option",{value:"all",children:"All Production Houses"}),t.map(k=>n.jsx("option",{value:k.id,children:k.name},k.id))]}),r&&(e.user?.role==="manager"||e.user?.role==="cluster_head")&&n.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg",children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Manage Items"})]})]})]}),y.map(k=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(Un,{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(dr,{className:"h-5 w-5 text-orange-600"}),n.jsx("p",{className:"text-sm text-orange-800",children:"Total Production"})]}),n.jsx("p",{className:"text-3xl text-orange-900 mb-1",children:k.totalProduced.toLocaleString()}),n.jsx("p",{className:"text-xs text-orange-700",children:"pieces"})]}),n.jsxs(Un,{className:"p-6 bg-gradient-to-br from-red-50 to-red-100 border-red-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(uc,{className:"h-5 w-5 text-red-600"}),n.jsx("p",{className:"text-sm text-red-800",children:"Total Wastage"})]}),n.jsx("p",{className:"text-3xl text-red-900 mb-1",children:k.totalWastage.toFixed(2)}),n.jsx("p",{className:"text-xs text-red-700",children:"kg"})]}),n.jsxs(Un,{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(pn,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-sm text-green-800",children:"Approved Entries"})]}),n.jsx("p",{className:"text-3xl text-green-900 mb-1",children:k.approvedEntries}),n.jsx("p",{className:"text-xs text-green-700",children:"records"})]}),n.jsxs(Un,{className:"p-6 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Or,{className:"h-5 w-5 text-yellow-600"}),n.jsx("p",{className:"text-sm text-yellow-800",children:"Pending Approval"})]}),n.jsx("p",{className:"text-3xl text-yellow-900 mb-1",children:k.pendingApproval}),n.jsx("p",{className:"text-xs text-yellow-700",children:"records"})]})]}),n.jsxs(Un,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Hn,{className:"h-5 w-5 text-orange-600"}),n.jsxs("h3",{className:"text-lg",children:[k.productionHouseName," - Stock Status"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(k.stock).map(([w,A])=>{const S=N(A.percentage);return n.jsxs("div",{className:`p-4 rounded-lg border-2 ${S.bg} ${S.border}`,children:[n.jsx("h4",{className:"text-sm mb-3",children:v[w]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"This Month Produced:"}),n.jsx("span",{className:S.text,children:A.produced})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"Sent to Stores:"}),n.jsx("span",{className:"text-red-600",children:A.sent})]}),n.jsxs("div",{className:"border-t pt-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"",children:"Stock Available:"}),n.jsx("span",{className:`text-lg ${S.text}`,children:A.available})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"flex justify-between text-xs",children:n.jsxs("span",{children:[A.percentage.toFixed(0),"% remaining"]})}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${S.bar} transition-all duration-300`,style:{width:`${Math.min(A.percentage,100)}%`}})})]})]})]})]},w)})})]})]},k.productionHouseId)),y.length===0&&n.jsxs(Un,{className:"p-12 text-center",children:[n.jsx(Hn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg mb-2",children:"No Production Data"}),n.jsx("p",{className:"text-muted-foreground",children:"No production data available for the selected date and production house"})]})]})}function $I({context:e,stores:t,onNavigateToManageItems:r}){const[a,s]=useState("dashboard");return n.jsx("div",{className:"min-h-screen bg-background p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl",children:"Advanced Inventory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Comprehensive inventory tracking, analytics, and reporting system"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:n.jsx(dr,{className:"h-6 w-6 text-white"})})})]}),n.jsxs(Tabs,{value:a,onValueChange:i=>s(i),className:"space-y-6",children:[n.jsxs(TabsList,{className:"grid grid-cols-7 w-full",children:[n.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-2",children:[n.jsx(xj,{className:"h-4 w-4"}),"Dashboard"]}),n.jsxs(TabsTrigger,{value:"stock-status",className:"flex items-center gap-2",children:[n.jsx(dr,{className:"h-4 w-4"}),"Stock"]}),n.jsxs(TabsTrigger,{value:"alerts",className:"flex items-center gap-2",children:[n.jsx(yj,{className:"h-4 w-4"}),"Alerts"]}),n.jsxs(TabsTrigger,{value:"requests",className:"flex items-center gap-2",children:[n.jsx(Gm,{className:"h-4 w-4"}),"Requests"]}),n.jsxs(TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[n.jsx(Fs,{className:"h-4 w-4"}),"Reports"]}),n.jsxs(TabsTrigger,{value:"predictive",className:"flex items-center gap-2",children:[n.jsx(S2,{className:"h-4 w-4"}),"Forecast"]}),n.jsxs(TabsTrigger,{value:"performance",className:"flex items-center gap-2",children:[n.jsx(jj,{className:"h-4 w-4"}),"Rankings"]})]}),n.jsx(TabsContent,{value:"dashboard",children:n.jsx(InventoryDashboard,{context:e,stores:t})}),n.jsx(TabsContent,{value:"stock-status",children:n.jsx(pye,{context:e,productionHouses:e.productionHouses,onNavigateToManageItems:r})}),n.jsx(TabsContent,{value:"alerts",children:n.jsx(InventoryAlerts,{context:e,stores:t})}),n.jsx(TabsContent,{value:"requests",children:n.jsx(EnhancedProductionRequests,{context:e,stores:t})}),n.jsx(TabsContent,{value:"reports",children:n.jsx(ReportsVisualization,{context:e,stores:t})}),n.jsx(TabsContent,{value:"predictive",children:n.jsx(fye,{context:e,stores:t})}),n.jsx(TabsContent,{value:"performance",children:n.jsx(mye,{context:e,stores:t})})]})]})})}function LI({context:e}){const[t,r]=P.useState([]),[a,s]=P.useState(!0),[i,o]=P.useState(!1),[l,d]=P.useState(null),[u,f]=P.useState(null),[m,p]=P.useState(null),[g,b]=P.useState({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),[y,v]=P.useState("all"),[N,k]=P.useState("all");P.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const O=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,{headers:{Authorization:`Bearer ${Zn}`}});if(!O.ok)throw new Error("Failed to load inventory items");const U=await O.json();r(U.items||[])}catch(O){console.error("Error loading items:",O),f(O instanceof Error?O.message:"Failed to load items")}finally{s(!1)}},A=async O=>{O.preventDefault(),f(null),p(null);try{const ie={name:g.displayName.toLowerCase().replace(/\s+/g,"_"),displayName:g.displayName,category:g.category,unit:g.unit,linkedEntityType:g.linkedEntityType,linkedEntityId:g.linkedEntityType==="global"?void 0:g.linkedEntityId,userId:e.user?.employeeId||"unknown"},X=l?`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${l}`:`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items`,re=await fetch(X,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify(ie)});if(!re.ok){const oe=await re.json();throw new Error(oe.error||"Failed to save item")}p(l?"Item updated successfully!":"Item created successfully!"),o(!1),d(null),b({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""}),await w()}catch(U){console.error("Error saving item:",U),f(U instanceof Error?U.message:"Failed to save item")}},S=O=>{d(O.id),b({displayName:O.displayName,category:O.category,unit:O.unit,linkedEntityType:O.linkedEntityType,linkedEntityId:O.linkedEntityId||""}),o(!0)},_=async O=>{if(confirm("Are you sure you want to delete this item?"))try{if(!(await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${Zn}`}})).ok)throw new Error("Failed to delete item");p("Item deleted successfully!"),await w()}catch(U){console.error("Error deleting item:",U),f(U instanceof Error?U.message:"Failed to delete item")}},E=async()=>{if(confirm("This will add the 7 default momo types as global items. Continue?"))try{if(s(!0),!(await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory-items/initialize-defaults`,{method:"POST",headers:{Authorization:`Bearer ${Zn}`}})).ok)throw new Error("Failed to initialize defaults");p("Default items initialized successfully!"),await w()}catch(O){console.error("Error initializing defaults:",O),f(O instanceof Error?O.message:"Failed to initialize defaults")}finally{s(!1)}},C=()=>{o(!1),d(null),b({displayName:"",category:"finished_product",unit:"pieces",linkedEntityType:"global",linkedEntityId:""})},I=t.filter(O=>!(y!=="all"&&O.category!==y||N!=="all"&&O.linkedEntityType!==N)),B=O=>{switch(O){case"finished_product":return"bg-purple-100 text-purple-800";case"raw_material":return"bg-blue-100 text-blue-800";case"sauce_chutney":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},M=O=>{switch(O){case"store":return n.jsx(Gi,{className:"w-4 h-4"});case"production_house":return n.jsx(Hn,{className:"w-4 h-4"});default:return n.jsx(dr,{className:"w-4 h-4"})}};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Inventory Items Master"}),n.jsx("p",{className:"text-gray-600",children:"Manage all inventory items for stores and production houses"})]}),n.jsxs("div",{className:"flex gap-3",children:[t.length===0&&n.jsx("button",{onClick:E,disabled:a,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50",children:"Initialize Defaults"}),n.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all",children:[n.jsx(qi,{className:"w-5 h-5"}),"Add New Item"]})]})]}),u&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-red-800",children:u}),n.jsx("button",{onClick:()=>f(null),className:"ml-auto",children:n.jsx(qr,{className:"w-4 h-4 text-red-600"})})]}),m&&n.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[n.jsx(bo,{className:"w-5 h-5 text-green-600"}),n.jsx("p",{className:"text-green-800",children:m}),n.jsx("button",{onClick:()=>p(null),className:"ml-auto",children:n.jsx(qr,{className:"w-4 h-4 text-green-600"})})]}),i&&n.jsxs(Un,{className:"p-6 border-2 border-purple-200",children:[n.jsx("h2",{className:"text-xl mb-4",children:l?"Edit Item":"Add New Item"}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Display Name *"}),n.jsx("input",{type:"text",value:g.displayName,onChange:O=>b({...g,displayName:O.target.value}),placeholder:"e.g., Schezwan Momo",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Category *"}),n.jsxs("select",{value:g.category,onChange:O=>b({...g,category:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"finished_product",children:"Finished Product"}),n.jsx("option",{value:"raw_material",children:"Raw Material"}),n.jsx("option",{value:"sauce_chutney",children:"Sauce/Chutney"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Unit *"}),n.jsxs("select",{value:g.unit,onChange:O=>b({...g,unit:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"pieces",children:"Pieces"}),n.jsx("option",{value:"kg",children:"Kilograms (kg)"}),n.jsx("option",{value:"liters",children:"Liters"}),n.jsx("option",{value:"grams",children:"Grams"}),n.jsx("option",{value:"ml",children:"Milliliters (ml)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Link To *"}),n.jsxs("select",{value:g.linkedEntityType,onChange:O=>b({...g,linkedEntityType:O.target.value,linkedEntityId:""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"global",children:"All (Global)"}),n.jsx("option",{value:"store",children:"Specific Store"}),n.jsx("option",{value:"production_house",children:"Specific Production House"})]})]}),g.linkedEntityType==="store"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Store *"}),n.jsxs("select",{value:g.linkedEntityId,onChange:O=>b({...g,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Select Store --"}),e.stores?.map(O=>n.jsx("option",{value:O.id,children:O.name},O.id))]})]}),g.linkedEntityType==="production_house"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Select Production House *"}),n.jsxs("select",{value:g.linkedEntityId,onChange:O=>b({...g,linkedEntityId:O.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Select Production House --"}),e.productionHouses?.map(O=>n.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{type:"button",onClick:C,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:l?"Update Item":"Add Item"})]})]})]}),n.jsx(Un,{className:"p-4",children:n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Category"}),n.jsxs("select",{value:y,onChange:O=>v(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:"All Categories"}),n.jsx("option",{value:"finished_product",children:"Finished Products"}),n.jsx("option",{value:"raw_material",children:"Raw Materials"}),n.jsx("option",{value:"sauce_chutney",children:"Sauces/Chutneys"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm mb-2 text-gray-700",children:"Filter by Type"}),n.jsxs("select",{value:N,onChange:O=>k(O.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"global",children:"Global Items"}),n.jsx("option",{value:"store",children:"Store Specific"}),n.jsx("option",{value:"production_house",children:"Production House Specific"})]})]})]})}),a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"mt-4 text-gray-600",children:"Loading items..."})]}):I.length===0?n.jsxs(Un,{className:"p-12 text-center",children:[n.jsx(dr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl text-gray-600 mb-2",children:"No items found"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first inventory item"}),t.length===0&&n.jsx("button",{onClick:E,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:shadow-lg",children:"Initialize Default Items"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(O=>n.jsxs(Un,{className:"p-4 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[M(O.linkedEntityType),n.jsx("h3",{className:"font-semibold text-gray-900",children:O.displayName})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>S(O),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:n.jsx(Li,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_(O.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:n.jsx(Rs,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(V0,{className:B(O.category),children:O.category.replace("_"," ").toUpperCase()}),n.jsxs("span",{className:"text-gray-500",children:[" ",O.unit]})]}),n.jsxs("div",{className:"text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Scope:"})," ",O.linkedEntityType==="global"?"All Entities":O.linkedEntityType==="store"?`Store: ${e.stores?.find(U=>U.id===O.linkedEntityId)?.name||"Unknown"}`:`Production House: ${e.productionHouses?.find(U=>U.id===O.linkedEntityId)?.name||"Unknown"}`]}),n.jsxs("div",{className:"text-xs text-gray-400 pt-2 border-t",children:["Created: ",new Date(O.createdAt).toLocaleDateString()]})]})]},O.id))}),n.jsx(Un,{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-purple-600",children:t.filter(O=>O.isActive).length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-blue-600",children:t.filter(O=>O.linkedEntityType==="global").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Global Items"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-green-600",children:t.filter(O=>O.linkedEntityType==="store").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Store Specific"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-2xl text-orange-600",children:t.filter(O=>O.linkedEntityType==="production_house").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Production House"})]})]})})]})}function BI(){const e=P.useRef(""),t=P.useRef(null);return P.useEffect(()=>{console.log(" Stock Request Reminder Scheduler initialized");const r=async()=>{const a=new Date,s=a.getHours(),i=a.toISOString().split("T")[0];if(s===15&&e.current!==i){console.log(" 3PM - Time to send stock request reminders!");try{const o=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/send-stock-request-reminders`,{method:"POST",headers:{Authorization:`Bearer ${Zn}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();console.log(" Stock request reminders sent successfully:",l),e.current=i}else console.error(" Failed to send stock request reminders:",o.statusText)}catch(o){console.error(" Error sending stock request reminders:",o)}}};return t.current=setInterval(r,900*1e3),r(),()=>{t.current&&clearInterval(t.current)}},[]),null}function gye({context:e}){const[t,r]=P.useState(!1),[a,s]=P.useState(!0),i=e.inventory.filter(l=>!l.storeId);if(!e.user?.storeId||i.length===0||!a)return null;const o=async()=>{const l=[...new Set(i.map(d=>d.date))].sort();if(confirm(`Found ${i.length} inventory items without a store assignment.

Dates: ${l.join(", ")}

Assign them ALL to your current store (${e.user?.storeId})?`)){r(!0);try{const d=e.user?.accessToken;if(!d)throw new Error("No access token");let u=0,f=0;for(const m of i)try{const p=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/inventory/${m.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({...m,storeId:e.user?.storeId})});p.ok?u++:(f++,console.error(`Failed to update item ${m.id}:`,await p.text()))}catch(p){f++,console.error(`Error updating item ${m.id}:`,p)}u>0?(alert(` Successfully assigned ${u} inventory items to your store!

Reloading page...`),window.location.reload()):alert(" Failed to update items. Please try again or contact support.")}catch(d){console.error("Error fixing legacy inventory:",d),alert("Error: "+(d instanceof Error?d.message:"Unknown error"))}finally{r(!1)}}};return n.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce",children:n.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-4 rounded-lg shadow-2xl border-4 border-yellow-300",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ja,{className:"w-6 h-6 animate-pulse"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-lg",children:"Legacy Data Found!"}),n.jsxs("p",{className:"text-sm text-yellow-100",children:[i.length," inventory items need store assignment"]})]}),n.jsx("button",{onClick:o,disabled:t,className:"ml-4 bg-white text-orange-600 px-4 py-2 rounded-lg font-bold hover:bg-yellow-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"w-4 h-4 animate-spin"}),"Fixing..."]}):"Fix Now"}),n.jsx("button",{onClick:()=>s(!1),className:"ml-2 text-yellow-100 hover:text-white",children:""})]})})})}function xye({context:e}){const[t,r]=P.useState(!1),[a,s]=P.useState(!1),[i,o]=P.useState(null),[l,d]=P.useState(null),[u,f]=P.useState(!1),[m,p]=P.useState(null),g=async()=>{r(!0),o(null);try{const N={exportDate:new Date().toISOString(),exportDateIST:Ag(new Date().toISOString()),version:"1.0",data:{inventory:e.inventory||[],overheads:e.overheads||[],fixedCosts:e.fixedCosts||[],sales:e.salesData||[],categorySalesData:e.categorySalesData||[],productionData:e.productionData||[],productionHouses:e.productionHouses||[],stockRequests:e.stockRequests||[],productionRequests:e.productionRequests||[],stores:e.stores||[],inventoryItems:e.inventoryItems||[]},metadata:{totalInventoryItems:(e.inventory||[]).length,totalOverheadItems:(e.overheads||[]).length,totalFixedCostItems:(e.fixedCosts||[]).length,totalSalesRecords:(e.salesData||[]).length,totalCategorySalesData:(e.categorySalesData||[]).length,totalProductionRecords:(e.productionData||[]).length,totalProductionHouses:(e.productionHouses||[]).length,totalStockRequests:(e.stockRequests||[]).length,totalProductionRequests:(e.productionRequests||[]).length,totalStores:(e.stores||[]).length,totalInventoryItemTypes:(e.inventoryItems||[]).length}},k=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),w=URL.createObjectURL(k),A=document.createElement("a");A.href=w,A.download=`bhandar-ims-backup-${Bn()}-${Date.now()}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(w),o({type:"success",message:`Backup created successfully! Downloaded ${Object.values(N.metadata).reduce((S,_)=>S+_,0)} total records.`})}catch(N){console.error("Export error:",N),o({type:"error",message:"Failed to export data. Please try again."})}finally{r(!1)}},b=N=>{const k=N.target.files?.[0];if(k){if(k.type!=="application/json"){d({type:"error",message:"Please select a valid JSON backup file."});return}p(k),f(!0),d(null)}},y=async()=>{if(!(!m||!e.user)){s(!0),d(null),f(!1);try{const N=await m.text(),k=JSON.parse(N);if(!k.data||!k.version)throw new Error("Invalid backup file format");let w={inventory:0,overheads:0,fixedCosts:0,sales:0,categorySalesData:0,productionData:0,productionHouses:0,stockRequests:0,productionRequests:0,stores:0,inventoryItems:0};if(k.data.inventory)for(const S of k.data.inventory)try{await e.addInventoryItem(S),w.inventory++}catch(_){console.error("Error importing inventory item:",_)}if(k.data.overheads)for(const S of k.data.overheads)try{await e.addOverheadItem(S),w.overheads++}catch(_){console.error("Error importing overhead:",_)}if(k.data.fixedCosts)for(const S of k.data.fixedCosts)try{await e.addFixedCostItem(S),w.fixedCosts++}catch(_){console.error("Error importing fixed cost:",_)}if(k.data.sales)for(const S of k.data.sales)try{await e.addSalesData(S),w.sales++}catch(_){console.error("Error importing sale:",_)}if(k.data.categorySalesData)for(const S of k.data.categorySalesData)try{await(void 0)(e.user.accessToken,S),w.categorySalesData++}catch(_){console.error("Error importing category sales data:",_)}if(k.data.productionData)for(const S of k.data.productionData)try{await e.addProductionData(S),w.productionData++}catch(_){console.error("Error importing production data:",_)}if(k.data.productionHouses)for(const S of k.data.productionHouses)try{await e.addProductionHouse(S),w.productionHouses++}catch(_){console.error("Error importing production house:",_)}if(k.data.stockRequests)for(const S of k.data.stockRequests)try{const{fulfilledQuantities:_,status:E,fulfilledBy:C,fulfilledByName:I,fulfillmentDate:B,notes:M,...O}=S;await e.createStockRequest(O),w.stockRequests++}catch(_){console.error("Error importing stock request:",_)}if(k.data.productionRequests)for(const S of k.data.productionRequests)try{await I2(e.user.accessToken,S),w.productionRequests++}catch(_){console.error("Error importing production request:",_)}if(k.data.stores)for(const S of k.data.stores)try{await A2(e.user.accessToken,S),w.stores++}catch(_){console.error("Error importing store:",_)}if(k.data.inventoryItems)for(const S of k.data.inventoryItems)try{await(void 0)(e.user.accessToken,S),w.inventoryItems++}catch(_){console.error("Error importing inventory item type:",_)}const A=Object.values(w).reduce((S,_)=>S+_,0);d({type:"success",message:`Successfully imported ${A} records! Page will reload in 3 seconds...`}),setTimeout(()=>{window.location.reload()},3e3)}catch(N){console.error("Import error:",N),d({type:"error",message:`Failed to import data: ${N instanceof Error?N.message:"Unknown error"}`})}finally{s(!1),p(null)}}},v=e.inventory.length+e.overheads.length+e.fixedCosts.length+e.salesData.length+e.categorySalesData.length+e.productionData.length+e.productionHouses.length+e.stockRequests.length+e.productionRequests.length+e.stores.length+e.inventoryItems.length;return n.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl shadow-lg p-6 text-white",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ph,{className:"w-8 h-8"}),n.jsx("h1",{className:"text-2xl font-bold",children:"Backup & Restore"})]}),n.jsx("p",{className:"text-purple-100",children:"Protect your data by creating regular backups. Export your data to JSON files and restore when needed."})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Z9,{className:"w-5 h-5 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Database"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Items"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.inventory.length})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Overhead Costs"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:e.overheads.length})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Fixed Costs"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.fixedCosts.length})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Sales Records"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.salesData.length})]}),n.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Category Sales Data"}),n.jsx("p",{className:"text-2xl font-bold text-pink-600",children:e.categorySalesData.length})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Data"}),n.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:e.productionData.length})]}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Houses"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:e.productionHouses.length})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Stock Requests"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.stockRequests.length})]}),n.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Production Requests"}),n.jsx("p",{className:"text-2xl font-bold text-teal-600",children:e.productionRequests.length})]}),n.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Stores"}),n.jsx("p",{className:"text-2xl font-bold text-cyan-600",children:e.stores.length})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Inventory Item Types"}),n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:e.inventoryItems.length})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("p",{className:"text-lg text-gray-900",children:[n.jsx("span",{className:"font-semibold",children:"Total Records:"})," ",v.toLocaleString()]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Os,{className:"w-5 h-5 text-green-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Data (Create Backup)"})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Backup Best Practices:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Create backups daily or after important data entry"}),n.jsx("li",{children:"Store backup files in multiple locations (Google Drive, external hard drive, etc.)"}),n.jsx("li",{children:"Name files with dates for easy identification"}),n.jsx("li",{children:"Test restoring from backups periodically"})]})]})]})}),n.jsx("button",{onClick:g,disabled:t||v===0,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg font-semibold",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Eo,{className:"w-5 h-5 animate-spin"}),"Creating Backup..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Os,{className:"w-5 h-5"}),"Download Backup (",v," records)"]})}),i&&n.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${i.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i.type==="success"?n.jsx(or,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):n.jsx(Nr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:`text-sm ${i.type==="success"?"text-green-800":"text-red-800"}`,children:i.message})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Zl,{className:"w-5 h-5 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import Data (Restore Backup)"})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-semibold mb-1",children:" Important Warning:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsxs("li",{children:["Importing will ",n.jsx("strong",{children:"ADD"})," data from the backup file to your current database"]}),n.jsx("li",{children:"This may create duplicate records if the same data already exists"}),n.jsx("li",{children:"Create a backup of your current data before importing"}),n.jsx("li",{children:"Only use backup files created by this system"})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("input",{type:"file",accept:".json",onChange:b,disabled:a,className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-400 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),m&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Selected file:"}),n.jsx("p",{className:"text-gray-900 font-medium",children:m.name}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(m.size/1024).toFixed(2)," KB"]})]})]}),l&&n.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-start gap-3 ${l.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.type==="success"?n.jsx(or,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):n.jsx(Nr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-800":"text-red-800"}`,children:l.message})]})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Nr,{className:"w-6 h-6 text-orange-600"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Confirm Import"})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsx("p",{className:"text-gray-700",children:"Are you sure you want to import data from this backup file?"}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Warning:"})," This will add all records from the backup file to your current database. Make sure you've created a backup of your current data first!"]})}),n.jsx("div",{className:"bg-gray-50 rounded p-3",children:n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:m?.name})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{f(!1),p(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:y,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Zl,{className:"w-4 h-4"}),"Import Data"]})]})]})}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl shadow-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Or,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:" Recommended Backup Schedule"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Daily:"})," At the end of each business day (especially after sales entry)"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Weekly:"})," Every Sunday for weekly records"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Monthly:"})," On the last day of each month before monthly reports"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-purple-600 font-bold",children:""}),n.jsxs("span",{children:[n.jsx("strong",{children:"Before Major Changes:"})," Always backup before bulk edits or deletions"]})]})]})]})]})})]})}function mS(){return"serviceWorker"in navigator&&"PushManager"in window}const yye=`
// Service Worker for Push Notifications
self.addEventListener('install', (event) => {
  console.log('Service Worker installed');
  self.skipWaiting();
});

self.addEventListener('activate', (event) => {
  console.log('Service Worker activated');
  event.waitUntil(clients.claim());
});

self.addEventListener('push', (event) => {
  console.log('Push notification received:', event);
  
  let notificationData = {
    title: 'Bhandar-IMS',
    body: 'You have a new notification',
    icon: '/icon-192x192.png',
    badge: '/badge-72x72.png',
    tag: 'bhandar-notification',
    requireInteraction: false,
  };

  if (event.data) {
    try {
      const data = event.data.json();
      notificationData = {
        ...notificationData,
        title: data.title || notificationData.title,
        body: data.message || data.body || notificationData.body,
        icon: data.icon || notificationData.icon,
        tag: data.tag || notificationData.tag,
        data: data,
      };
    } catch (e) {
      console.error('Error parsing push data:', e);
      notificationData.body = event.data.text();
    }
  }

  event.waitUntil(
    self.registration.showNotification(notificationData.title, {
      body: notificationData.body,
      icon: notificationData.icon,
      badge: notificationData.badge,
      tag: notificationData.tag,
      requireInteraction: notificationData.requireInteraction,
      data: notificationData.data,
    })
  );
});

self.addEventListener('notificationclick', (event) => {
  console.log('Notification clicked:', event);
  event.notification.close();
  event.waitUntil(
    clients.matchAll({ type: 'window', includeUncontrolled: true }).then((clientList) => {
      for (const client of clientList) {
        if (client.url.includes(self.registration.scope) && 'focus' in client) {
          return client.focus();
        }
      }
      if (clients.openWindow) {
        return clients.openWindow('/');
      }
    })
  );
});
`;async function vye(){if(!mS())return null;try{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return console.log(" Service Worker registered successfully from /sw.js"),e}catch{console.log(" /sw.js not found, using inline service worker");const t=new Blob([yye],{type:"application/javascript"}),r=URL.createObjectURL(t),a=await navigator.serviceWorker.register(r,{scope:"/"});return console.log(" Service Worker registered successfully (inline)"),a}}catch{return null}}function bye(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(r),s=new Uint8Array(a.length);for(let i=0;i<a.length;++i)s[i]=a.charCodeAt(i);return s}async function wye(e,t){try{const r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bye(t)});return console.log("Push subscription successful:",r),r}catch(r){return console.error("Failed to subscribe to push notifications:",r),null}}async function UI(e,t){try{if(!(await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify({subscription:e.toJSON(),userId:t})})).ok)throw new Error("Failed to send subscription to server");return console.log("Subscription sent to server successfully"),!0}catch(r){return console.error("Error sending subscription to server:",r),!1}}async function jye(e){try{return await e.pushManager.getSubscription()}catch(t){return console.error("Error getting existing subscription:",t),null}}async function Nye(e,t){if(!mS())return console.log(" Push notifications not supported in this browser"),!1;try{const r=await vye();if(!r)return console.log(" Service worker registration failed - push notifications unavailable"),!1;await navigator.serviceWorker.ready;const a=await jye(r);if(a)return console.log(" Push notifications already enabled"),await UI(a,e),!0;const s=Notification.permission;if(s==="denied")return console.log(" Push notifications blocked. To enable: Click  icon in address bar  Allow notifications"),!1;if(s==="default")return console.log(" Push notifications available. Click the notification bell to enable."),!1;if(s==="granted"){const i=await wye(r,t);return i?(await UI(i,e),console.log(" Push notifications enabled successfully"),!0):(console.log(" Failed to create push subscription"),!1)}return!1}catch(r){return console.log(" Push notifications unavailable:",r instanceof Error?r.message:"Unknown error"),!1}}const Nc="bhandar_cache_",kye=300*1e3,x8=3600*1e3,G0=1;function Sye(e){try{const t=`${Nc}${e}`,r=localStorage.getItem(t);if(!r)return null;const a=JSON.parse(r);return a.version!==G0||Date.now()-a.timestamp>x8?(localStorage.removeItem(t),null):a.data}catch(t){return console.error("Cache read error:",t),null}}function _ye(e){try{const t=`${Nc}${e}`,r=localStorage.getItem(t);if(!r)return!1;const a=JSON.parse(r);return Date.now()-a.timestamp<kye&&a.version===G0}catch{return!1}}function Eye(e,t){try{const r=`${Nc}${e}`,a={data:t,timestamp:Date.now(),version:G0};localStorage.setItem(r,JSON.stringify(a))}catch(r){if(r instanceof Error&&r.name==="QuotaExceededError"){y8();try{const a=`${Nc}${e}`,s={data:t,timestamp:Date.now(),version:G0};localStorage.setItem(a,JSON.stringify(s))}catch(a){console.error("Cache write error after cleanup:",a)}}else console.error("Cache write error:",r)}}function y8(){try{const e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(Nc))try{const s=localStorage.getItem(a);if(s){const i=JSON.parse(s);(e-i.timestamp>x8||i.version!==G0)&&t.push(a)}}catch{t.push(a)}}t.forEach(r=>localStorage.removeItem(r)),console.log(` Cleared ${t.length} old cache entries`)}catch(e){console.error("Cache cleanup error:",e)}}function Vr(e){try{const t=`${Nc}${e}`;localStorage.removeItem(t)}catch(t){console.error("Cache invalidation error:",t)}}function Cye(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(Nc)&&e.push(r)}e.forEach(t=>localStorage.removeItem(t)),console.log(` Invalidated all caches (${e.length} entries)`)}catch(e){console.error("Cache invalidation error:",e)}}function Aye(e){const t=new Map;return e.forEach(r=>{t.set(r,Sye(r))}),t}function Tye(e){e.forEach((t,r)=>{Eye(r,t)})}function Oye(){const[e,t]=P.useState("analytics"),[r,a]=P.useState(null),[s,i]=P.useState(null),[o,l]=P.useState(!0),[d,u]=P.useState(null),[f,m]=P.useState([]),[p,g]=P.useState([]),[b,y]=P.useState([]),[v,N]=P.useState([]),[k,w]=P.useState([]),[A,S]=P.useState([]),[_,E]=P.useState([]),[C,I]=P.useState(!1),[B,M]=P.useState(null),[O,U]=P.useState(!1),[ie,X]=P.useState([]),[re,oe]=P.useState(null),[Q,F]=P.useState([]),[J,L]=P.useState([]),[D,Y]=P.useState([]),[V,ee]=P.useState([]),[ge,ke]=P.useState([]),[Ce,ce]=P.useState([]),[me,Oe]=P.useState([]),G=hu(),Ye=new URLSearchParams(window.location.search).get("setup")==="cluster-head",ct=async()=>{try{const q=await fu();X(q)}catch(q){if(q instanceof Error&&(q.message==="Not authenticated"||q.message==="Unauthorized"))return;console.error("Error loading stores:",q)}},We=async()=>{try{const q=await ti();ee(q)}catch(q){if(q instanceof Error&&(q.message==="Not authenticated"||q.message==="Unauthorized"))return;console.error("Error loading employees:",q)}},Pe=async q=>{try{const W=await H5(q);W&&(ke(W.managedStoreIds||[]),ce(W.managedProductionHouseIds||[]),console.log(" Cluster assignments loaded:",{stores:W.managedStoreIds?.length||0,productionHouses:W.managedProductionHouseIds?.length||0}))}catch{console.log("No cluster assignments found (this is okay for new cluster heads)")}},Ne=async(q,W=!1)=>{const ae=["inventory","overheads","fixedCosts","salesData","categorySales","productionData","productionHouses","stockRequests","productionRequests","inventoryItems","onlineCashRecalibrations"];if(!W){const de=Aye(ae);if(de.get("inventory")){if(console.log(" Loading from cache - instant display!"),m(de.get("inventory")||[]),g(de.get("overheads")||[]),y(de.get("fixedCosts")||[]),N(de.get("salesData")||[]),w(de.get("categorySales")?.data||[]),E(de.get("productionData")||[]),F(de.get("productionHouses")||[]),L(de.get("stockRequests")||[]),Y(de.get("productionRequests")||[]),Oe(de.get("inventoryItems")||[]),S(de.get("onlineCashRecalibrations")||[]),ae.every(le=>_ye(le))){console.log(" Cache is fresh - skipping API calls");return}console.log(" Cache loaded, refreshing in background...")}}I(!0),M(null);try{console.log(" Starting loadData - fetching from API...");const[de,z,le,fe,De,Ve,Qe,Ke,Ge,Ct,Yt]=await Promise.all([vg(q),bg(q),gD(q),C2(q),Cg(q),wg(),e0(q),k5(q),Eg(q),vh(),D5(q)]);console.log(" Stock Requests API Response:",Ke),console.log(" Stock Requests count:",Ke?.length||0),console.log(" Sample stock request:",Ke?.[0]),console.log(" Loaded Inventory Items:",de.length),console.log(" Loaded Overhead Items:",z.length),console.log(" Loaded Fixed Cost Items:",le.length);const Xt=Array.from(new Map(de.map(ut=>[ut.id,ut])).values()),wr=Array.from(new Map(z.map(ut=>[ut.id,ut])).values()),nn=Array.from(new Map(le.map(ut=>[ut.id,ut])).values()),ln=Array.from(new Map(fe.map(ut=>[ut.id,ut])).values()),Ze=Array.from(new Map(Ve.map(ut=>[ut.id,ut])).values()),Lr=de.length-Xt.length,ue=z.length-wr.length,Ee=le.length-nn.length,Re=fe.length-ln.length,xt=Ve.length-Ze.length,Ot=Lr+ue+Ee+Re+xt;console.log(" After deduplication:"),console.log("Inventory: Before:",de.length," After:",Xt.length),console.log("Overheads: Before:",z.length," After:",wr.length),console.log("Fixed Costs: Before:",le.length," After:",nn.length),console.log("Sales: Before:",fe.length," After:",ln.length),Ot>0&&(sessionStorage.getItem("db_cleaned")||setTimeout(async()=>{try{const Yr=await G.auth.getUser(q),Nn=Yr.data?.user?.user_metadata?.role;if(Yr.data?.user&&Nn==="cluster_head"){console.log(" Silently cleaning duplicates in background..."),sessionStorage.setItem("db_cleaned","true");const Ma=await bD(q);console.log(` Cleaned ${Ma.removed} duplicates successfully`)}}catch(Yr){console.log("Auto-cleanup skipped:",Yr instanceof Error?Yr.message:"Unknown error")}},1500)),m(Xt),g(wr),y(nn),N(ln),w(De.data||[]),E(Ze),F(Qe),console.log(" Loaded Stock Requests from API:",Ke.length,Ke),L(Ke),Y(Ge),Oe(Ct),S(Yt);const ht=new Map;ht.set("inventory",Xt),ht.set("overheads",wr),ht.set("fixedCosts",nn),ht.set("salesData",ln),ht.set("categorySales",De),ht.set("productionData",Ze),ht.set("productionHouses",Qe),ht.set("stockRequests",Ke),ht.set("productionRequests",Ge),ht.set("inventoryItems",Ct),ht.set("onlineCashRecalibrations",Yt),Tye(ht),console.log(" Data cached for instant future loads")}catch(de){if(de instanceof Error&&(de.message==="Not authenticated"||de.message==="Unauthorized"))return;console.error("Error loading data:",de),M("Failed to load inventory data. Please refresh the page.")}finally{I(!1)}},tt=async()=>{try{const q=await vh();if(q.length===0){console.log(" No inventory items found, initializing defaults...");try{await n5();const W=await vh();Oe(W),console.log(` Initialized ${W.length} default inventory items`);return}catch(W){console.error("Error initializing default items:",W),Oe([]);return}}Oe(q),await He(q)}catch(q){console.error("Error loading inventory items:",q),Oe([])}},He=async q=>{const W=[{name:"chicken",displayName:"Chicken Momos",variations:["chicken momo","chicken momos"]},{name:"chickenCheese",displayName:"Chicken Cheese Momos",variations:["chicken cheese momo","chicken cheese momos","chicken cheese"]},{name:"veg",displayName:"Veg Momos",variations:["veg momo","veg momos","vegetable momos"]},{name:"cheeseCorn",displayName:"Cheese Corn Momos",variations:["cheese corn momo","cheese corn momos","corn cheese"]},{name:"paneer",displayName:"Paneer Momos",variations:["paneer momo","paneer momos"]},{name:"vegKurkure",displayName:"Veg Kurkure Momos",variations:["veg kurkure momo","veg kurkure momos","veg kurkure"]},{name:"chickenKurkure",displayName:"Chicken Kurkure Momos",variations:["chicken kurkure momo","chicken kurkure momos","chicken kurkure"]}];try{let ae=!1;for(const de of W){let z=q.find(le=>le.name.toLowerCase()===de.name.toLowerCase());z||(z=q.find(le=>{const fe=le.displayName.toLowerCase(),De=de.displayName.toLowerCase();return fe===De||fe.replace(/\s*momos?\s*/i,"").trim()===De.replace(/\s*momos?\s*/i,"").trim()?!0:de.variations.some(Ve=>fe.includes(Ve.toLowerCase()))})),z?z.name!==de.name&&(console.log(` Updating inventory item name: "${z.displayName}" from "${z.name}" to "${de.name}"`),await r5(z.id,{name:de.name,displayName:de.displayName}),ae=!0):(console.log(` Creating core inventory item: ${de.displayName}`),await t5({name:de.name,displayName:de.displayName,category:"finished_product",unit:"pieces",linkedEntityType:"global",createdBy:"system"}),ae=!0)}if(ae){const de=await vh();Oe(de)}}catch(ae){console.error("Error ensuring core momos exist:",ae)}};P.useEffect(()=>{sessionStorage.removeItem("logout_redirect_in_progress"),y8();const q=async()=>{try{const{data:{session:ae}}=await G.auth.getSession();if(!ae){l(!1);return}const{data:{session:de},error:z}=await G.auth.refreshSession();z||!de?(console.warn("Session refresh failed:",z?.message||"No session returned"),ae?.user?await W(ae):(await G.auth.signOut(),l(!1))):await W(de)}catch(ae){console.log("Session check error:",ae)}finally{l(!1)}},W=async ae=>{let de=null,z=ae.user.user_metadata?.designation||null;if(ae.user.user_metadata?.employeeId)try{const De=(await yl()).find(Ve=>Ve.employeeId===ae.user.user_metadata?.employeeId);De&&(de=De.storeId||null,z=De.designation||z)}catch(fe){console.error("Error fetching employee storeId on session check:",fe)}const le={email:ae.user.email||"",name:ae.user.user_metadata?.name||ae.user.email?.split("@")[0]||"User",role:ae.user.user_metadata?.role||"manager",employeeId:ae.user.user_metadata?.employeeId||null,accessToken:ae.access_token,storeId:de,designation:z};a(le),await Ne(ae.access_token),(le.role==="cluster_head"||le.role==="manager"||le.role==="audit")&&(await ct(),await We(),le.role==="cluster_head"&&await Pe(ae.access_token))};q()},[]),P.useEffect(()=>{r&&(async()=>{try{if(!mS()){console.log("Push notifications not supported on this device");return}const W=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/push/vapid-public-key`,{headers:{Authorization:`Bearer ${Zn}`}});if(!W.ok){console.log("Could not fetch VAPID key - push notifications disabled");return}const ae=await W.json();if(!ae.configured||!ae.publicKey){console.log(" Push notifications not configured. To enable, set VAPID_PUBLIC_KEY and VAPID_PRIVATE_KEY environment variables.");return}const de=r.employeeId||r.email;await Nye(de,ae.publicKey)&&console.log(" Push notifications enabled successfully for user:",de)}catch(W){console.log(" Push notifications setup skipped:",W instanceof Error?W.message:"Unknown error")}})()},[r]);const pt=async(q,W)=>{i(null);try{const{data:ae,error:de}=await G.auth.signInWithPassword({email:q,password:W});if(de){i(de.message);return}if(ae.user&&ae.session){let z=null,le=ae.user.user_metadata?.designation||null;if(ae.user.user_metadata?.employeeId)try{const Ve=(await yl()).find(Qe=>Qe.employeeId===ae.user.user_metadata?.employeeId);Ve&&(z=Ve.storeId||null,le=Ve.designation||le)}catch(De){console.error("Error fetching employee storeId:",De)}const fe={email:ae.user.email||"",name:ae.user.user_metadata?.name||ae.user.email?.split("@")[0]||"User",role:ae.user.user_metadata?.role||"manager",employeeId:ae.user.user_metadata?.employeeId||null,accessToken:ae.session.access_token,storeId:z,designation:le};a(fe),await Ne(ae.session.access_token),(fe.role==="cluster_head"||fe.role==="manager"||fe.role==="audit")&&(await ct(),await We())}}catch(ae){console.log("Login error:",ae),i("Failed to sign in. Please try again.")}},Vt=async(q,W,ae,de)=>{i(null);try{const z=await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify({email:q,password:W,name:ae,role:de,employeeId:de==="cluster_head"?"BM001":de==="audit"?"AUDIT001":null})}),le=await z.json();if(!z.ok){i(le.error||"Failed to create account");return}if(!le.user){i("Failed to create account");return}if(de==="cluster_head"||de==="audit")try{const fe=de==="cluster_head"?"BM001":"AUDIT001";await fetch(`https://${Pa}.supabase.co/functions/v1/make-server-c2dd9b9d/unified-employees`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zn}`},body:JSON.stringify({employeeId:fe,name:ae,email:q,role:de,employmentType:"fulltime",joiningDate:new Date().toISOString().split("T")[0],createdBy:"system",status:"active",authUserId:le.user.id})})}catch(fe){console.log("Error creating unified employee record:",fe)}await pt(q,W)}catch(z){console.log("Signup error:",z),i("Failed to create account. Please try again.")}},hr=async()=>{await G.auth.signOut(),a(null),m([]),g([]),y([]),N([]),t("sales"),Cye()},Jt=async()=>{r&&(console.log(" Manual refresh triggered"),await Ne(r.accessToken,!0))},kr={inventory:f,overheads:p,fixedCosts:b,salesData:v,categorySalesData:k,onlineCashRecalibrations:A,productionData:_,productionHouses:Q,stockRequests:J,productionRequests:D,stores:ie,managedStoreIds:ge,managedProductionHouseIds:Ce,inventoryItems:me,loadInventoryItems:tt,addInventoryItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId};console.log(" Sending inventory item to backend:",W);const ae=await cD(r.accessToken,W);console.log(" Received inventory item from backend:",ae),m([...f,ae]),Vr("inventory")}catch(W){throw console.error("Error adding inventory item:",W),W}},addOverheadItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ae=await hD(r.accessToken,W);g([...p,ae]),Vr("overheads")}catch(W){throw console.error("Error adding overhead item:",W),W}},addFixedCostItem:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ae=await xD(r.accessToken,W);y([...b,ae]),Vr("fixedCosts")}catch(W){throw console.error("Error adding fixed cost item:",W),W}},updateInventoryItem:async(q,W)=>{if(r)try{const ae={...W,storeId:r.storeId||W.storeId},de=await dD(r.accessToken,q,ae);m(f.map(z=>z.id===q?de:z)),Vr("inventory")}catch(ae){throw console.error("Error updating inventory item:",ae),ae}},updateOverheadItem:async(q,W)=>{if(r)try{const ae={...W,storeId:r.storeId||W.storeId},de=await fD(r.accessToken,q,ae);g(p.map(z=>z.id===q?de:z)),Vr("overheads")}catch(ae){throw console.error("Error updating overhead item:",ae),ae}},updateFixedCostItem:async(q,W)=>{if(r)try{const ae={...W,storeId:r.storeId||W.storeId},de=await yD(r.accessToken,q,ae);y(b.map(z=>z.id===q?de:z)),Vr("fixedCosts")}catch(ae){throw console.error("Error updating fixed cost item:",ae),ae}},deleteInventoryItem:async q=>{if(r)try{await uD(r.accessToken,q),m(f.filter(W=>W.id!==q)),Vr("inventory"),console.log(" Inventory item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),m(f.filter(ae=>ae.id!==q)),Vr("inventory");else throw console.error("Error deleting inventory item:",W),W}},deleteOverheadItem:async q=>{if(r)try{await mD(r.accessToken,q),g(p.filter(W=>W.id!==q)),Vr("overheads"),console.log(" Overhead item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),g(p.filter(ae=>ae.id!==q)),Vr("overheads");else throw console.error("Error deleting overhead item:",W),W}},deleteFixedCostItem:async q=>{if(r)try{await vD(r.accessToken,q),y(b.filter(W=>W.id!==q)),Vr("fixedCosts"),console.log(" Fixed cost item deleted successfully")}catch(W){if(W?.message?.includes("not found")||W?.message?.includes("already deleted"))console.log(" Item was already deleted, updating UI"),y(b.filter(ae=>ae.id!==q)),Vr("fixedCosts");else throw console.error("Error deleting fixed cost item:",W),W}},addSalesData:async q=>{if(r)try{console.log("Frontend - Current user:",r),console.log("Frontend - User role:",r.role),console.log("Frontend - Access token (first 50 chars):",r.accessToken.substring(0,50));const W={...q,storeId:r.storeId||q.storeId},ae=await wD(r.accessToken,W);N([...v,ae]),Vr("salesData"),Vr("categorySales")}catch(W){throw console.error("Error adding sales data:",W),W}},updateSalesData:async(q,W)=>{if(r)try{const ae={...W,storeId:r.storeId||W.storeId},de=await jD(r.accessToken,q,ae);N(v.map(z=>z.id===q?de:z)),Vr("salesData"),Vr("categorySales")}catch(ae){throw console.error("Error updating sales data:",ae),ae}},approveSalesData:async q=>{if(r)try{const W=await ND(r.accessToken,q);N(v.map(ae=>ae.id===q?W:ae)),Vr("salesData")}catch(W){throw console.error("Error approving sales data:",W),W}},requestSalesApproval:async(q,W,ae)=>{if(r)try{const de=await kD(r.accessToken,q,W,ae);N(v.map(z=>z.id===q?de:z)),Vr("salesData")}catch(de){throw console.error("Error requesting sales approval:",de),de}},approveDiscrepancy:async q=>{if(r)try{const W=await SD(r.accessToken,q);N(v.map(ae=>ae.id===q?W:ae)),Vr("salesData")}catch(W){throw console.error("Error approving discrepancy:",W),W}},rejectDiscrepancy:async(q,W)=>{if(r)try{const ae=await _D(r.accessToken,q,W);N(v.map(de=>de.id===q?ae:de)),Vr("salesData")}catch(ae){throw console.error("Error rejecting discrepancy:",ae),ae}},addProductionData:async q=>{if(r)try{const W={...q,storeId:r.storeId||q.storeId},ae=await ED(W);E([..._,ae]),Vr("productionData")}catch(W){throw console.error("Error adding production data:",W),W}},updateProductionData:async(q,W)=>{if(r)try{const ae={...W,storeId:r.storeId||W.storeId},de=await CD(q,ae);E(_.map(z=>z.id===q?de:z)),Vr("productionData")}catch(ae){throw console.error("Error updating production data:",ae),ae}},approveProductionData:async q=>{if(r)try{const W=await AD(q);E(_.map(ae=>ae.id===q?W:ae)),Vr("productionData")}catch(W){throw console.error("Error approving production data:",W),W}},addProductionHouse:async q=>{if(r)try{const W=await g5(r.accessToken,q);F([...Q,W]),Vr("productionHouses")}catch(W){throw console.error("Error creating production house:",W),W}},updateProductionHouse:async(q,W)=>{if(r)try{const ae=await x5(r.accessToken,q,W);F(Q.map(de=>de.id===q?ae:de)),Vr("productionHouses")}catch(ae){throw console.error("Error updating production house:",ae),ae}},updateProductionHouseInventory:async(q,W)=>{if(r)try{const ae=await y5(r.accessToken,q,W);F(Q.map(de=>de.id===q?ae:de))}catch(ae){throw console.error("Error updating production house inventory:",ae),ae}},deleteProductionHouse:async q=>{if(r)try{await j5(r.accessToken,q),F(Q.filter(W=>W.id!==q)),Vr("productionHouses")}catch(W){throw console.error("Error deleting production house:",W),W}},setProductionHouses:F,createStockRequest:async q=>{if(r)try{console.log(" Creating stock request:",q);const W=await S5(r.accessToken,q);console.log(" Stock request created successfully:",W),L([...J,W]),console.log(" Updated stock requests count:",J.length+1),Vr("stockRequests")}catch(W){throw console.error(" Error creating stock request:",W),W}},fulfillStockRequest:async(q,W,ae,de,z)=>{if(r)try{const le=await _5(r.accessToken,q,W,ae,de,z);L(J.map(De=>De.id===q?le:De));const fe=await e0(r.accessToken);F(fe),Vr("stockRequests"),Vr("productionHouses")}catch(le){throw console.error("Error fulfilling stock request:",le),le}},cancelStockRequest:async q=>{if(r)try{const W=await E5(r.accessToken,q);L(J.map(ae=>ae.id===q?W:ae)),Vr("stockRequests")}catch(W){throw console.error("Error cancelling stock request:",W),W}},isManager:r?.role==="manager",user:r};if(o)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(dr,{className:"w-12 h-12 text-[#B0A8D8] mx-auto mb-4 animate-pulse"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(Ye)return n.jsx(lxe,{});if(!r)return n.jsx(Xge,{onLogin:pt,onSignup:Vt,error:s});const we=r.role==="cluster_head",nt=r.role==="employee",it=r.role==="audit",jt=r.role==="employee"&&r.designation==="store_incharge",gt=r.designation==="production_incharge",H=jt||gt,se=r.role==="manager"&&r.designation!=="store_incharge"&&r.designation!=="production_incharge",ne=r.role==="manager",Z=gt||se||we;return console.log(" User Permissions:",{role:r.role,designation:r.designation,isClusterHead:we,isEmployee:nt,isManager:ne,isStoreIncharge:jt,isProductionIncharge:gt,isOperationsManager:se,isAnyIncharge:H,canViewProduction:Z}),console.log(" Current activeView:",e),it?n.jsx(Yge,{user:r,inventory:f,overheads:p,fixedCosts:b,salesData:v,categorySalesData:k,productionData:_,productionHouses:Q,stockRequests:J,productionRequests:D,employees:V,stores:ie,inventoryItems:me,onLogout:hr,onDataUpdate:Ne}):nt?n.jsxs(n.Fragment,{children:[n.jsx(BI,{}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center py-3",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[n.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),n.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",jt?"Store Incharge":gt?"Production Head":"Employee"]})]})}),n.jsx("button",{onClick:()=>U(!O),className:"lg:hidden flex items-center gap-2 px-3 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all border border-white/30",children:O?n.jsx(qr,{className:"w-5 h-5"}):n.jsx(WE,{className:"w-5 h-5"})}),n.jsxs("div",{className:"hidden lg:flex gap-2",children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="analytics"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsx("span",{children:"Analytics"})]}),H&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{children:"Expense"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="sales"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(jn,{className:"w-4 h-4"}),n.jsx("span",{children:"Sales"})]})]}),Z&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="production"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Hn,{className:"w-4 h-4"}),n.jsx("span",{children:"Production"})]}),H&&n.jsxs("button",{onClick:()=>t("stock-requests"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="stock-requests"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{children:"Stock Requests"})]}),ne&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("advanced-inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="advanced-inventory"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(xj,{className:"w-4 h-4"}),n.jsx("span",{children:"Inventory Analytics"})]}),n.jsxs("button",{onClick:()=>t("inventory-items"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="inventory-items"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{children:"Manage Items"})]})]}),n.jsxs("button",{onClick:()=>t("payroll"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="payroll"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Dn,{className:"w-4 h-4"}),n.jsx("span",{children:H?"Payroll":"My Payouts"})]}),n.jsxs("button",{onClick:()=>t("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="attendance"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(_n,{className:"w-4 h-4"}),n.jsx("span",{children:"Attendance"})]}),H&&n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all backdrop-blur-sm border-2 ${e==="export"?"bg-white text-purple-600 border-white shadow-lg":"bg-white/20 text-white border-white/30 hover:bg-white/30"}`,children:[n.jsx(Os,{className:"w-4 h-4"}),n.jsx("span",{children:"Export"})]}),H&&n.jsx(CI,{onNavigate:(q,W,ae)=>{q==="sales"&&(t("sales"),u(null)),q==="production"&&(t("production"),u(null)),q==="attendance"&&(t("employees"),u(null)),q==="production-requests"&&(console.log(" Production request notification clicked, requestId:",ae),u(null),setTimeout(()=>{u(ae||null),t("analytics")},0))}}),n.jsxs("button",{onClick:Jt,disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-green-500/90 text-white rounded-xl hover:bg-green-600 transition-all backdrop-blur-sm border-2 border-white/30 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[n.jsx(wo,{className:`w-4 h-4 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh"})]}),n.jsxs("button",{onClick:hr,className:"flex items-center gap-2 px-4 py-2 bg-red-500/90 text-white rounded-xl hover:bg-red-600 transition-all backdrop-blur-sm border-2 border-white/30",children:[n.jsx(gh,{className:"w-4 h-4"}),n.jsx("span",{children:"Logout"})]})]})]}),O&&n.jsxs("div",{className:"lg:hidden border-t border-white/20 py-4 space-y-2",children:[n.jsxs("button",{onClick:()=>{t("analytics"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="analytics"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),H&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("inventory"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Expense"})]}),n.jsxs("button",{onClick:()=>{t("sales"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="sales"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(jn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]})]}),Z&&n.jsxs("button",{onClick:()=>{t("production"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="production"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(Hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),H&&n.jsxs("button",{onClick:()=>{t("stock-requests"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="stock-requests"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Stock Requests"})]}),ne&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("advanced-inventory"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="advanced-inventory"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(xj,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory Analytics"})]}),n.jsxs("button",{onClick:()=>{t("inventory-items"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="inventory-items"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Manage Items"})]})]}),n.jsxs("button",{onClick:()=>{t("payroll"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="payroll"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(Dn,{className:"w-5 h-5"}),n.jsx("span",{children:H?"Payroll":"My Payouts"})]}),n.jsxs("button",{onClick:()=>{t("attendance"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="attendance"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(_n,{className:"w-5 h-5"}),n.jsx("span",{children:"Attendance"})]}),H&&n.jsxs("button",{onClick:()=>{t("export"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${e==="export"?"bg-white text-purple-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[n.jsx(Os,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{Jt(),U(!1)},disabled:C,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-500/90 text-white rounded-lg hover:bg-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(wo,{className:`w-5 h-5 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh Data"})]}),n.jsxs("button",{onClick:hr,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-500/90 text-white rounded-lg hover:bg-red-600 transition-all",children:[n.jsx(gh,{className:"w-5 h-5"}),n.jsx("span",{children:"Logout"})]})]})]})}),n.jsx("main",{className:"pb-6",children:e==="analytics"?n.jsx(x2,{context:kr,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory"&&H?n.jsx(Fj,{context:kr}):e==="sales"&&H?n.jsx(bP,{context:kr,selectedStoreId:re}):e==="production"&&Z?n.jsx(y2,{context:kr,selectedStoreId:re}):e==="payroll"?H?n.jsx(Lk,{userRole:"manager",selectedDate:new Date().toISOString().split("T")[0],userEmployeeId:r.employeeId,userName:r.name,selectedStoreId:r.storeId,isIncharge:!0,inchargeDesignation:r.designation}):n.jsx(_I,{employeeId:r.employeeId||""}):e==="attendance"?n.jsx(t8,{user:{employeeId:r.employeeId,name:r.name,email:r.email,role:r.role},isIncharge:H,inchargeDesignation:r.designation}):e==="export"&&H?n.jsx(SI,{userRole:"manager",selectedStoreId:r.storeId||null,currentUserId:r.email}):e==="stock-requests"&&H?n.jsx(AI,{context:kr,stores:ie}):e==="advanced-inventory"&&ne?n.jsx($I,{context:kr,stores:ie,onNavigateToManageItems:()=>t("inventory-items")}):e==="inventory-items"&&(ne||H)?(console.log(" Rendering InventoryItemsManagement:",{activeView:e,isManager:ne,isAnyIncharge:H}),n.jsx(LI,{context:kr})):(console.log(" Falling through to EmployeeDashboard:",{activeView:e,isManager:ne,isAnyIncharge:H}),n.jsx(_I,{employeeId:r.employeeId||""}))})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(BI,{}),n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-xl sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between items-center py-3",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[n.jsx("h1",{className:"text-xl sm:text-2xl text-white font-bold tracking-wide",children:"Bhandar-IMS"}),n.jsxs("p",{className:"text-xs text-white/90",children:[r.name,"  ",r.designation==="store_incharge"?"Store Incharge":r.designation==="production_incharge"?"Production Incharge":r.role==="manager"?"Operations Manager":"Cluster Head"]})]})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(CI,{onNavigate:(q,W,ae)=>{q==="sales"?(t("sales"),u(null)):q==="attendance"||q==="leave"?(t("employees"),u(null)):q==="production"?(t("production"),u(null)):q==="production-requests"&&(console.log(" Production request notification clicked (mobile), requestId:",ae),u(null),setTimeout(()=>{u(ae||null),t("analytics")},0))}}),n.jsx("button",{onClick:()=>U(!O),className:"lg:hidden flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all border border-white/30",children:O?n.jsx(qr,{className:"w-5 h-5"}):n.jsx(WE,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"hidden lg:flex gap-2 flex-wrap",children:[we?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Expense"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(jn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),Z&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Hn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),n.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Ui,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),n.jsxs("button",{onClick:()=>t("assets"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="assets"?"bg-white text-rose-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Assets"})]}),n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Os,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),n.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(ph,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>t("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="analytics"?"bg-white text-purple-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Analytics"})]}),n.jsxs("button",{onClick:()=>t("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="sales"?"bg-white text-pink-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(jn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Sales"})]}),n.jsxs("button",{onClick:()=>t("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="inventory"?"bg-white text-green-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(dr,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Expense"})]}),Z&&n.jsxs("button",{onClick:()=>t("production"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="production"?"bg-white text-amber-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Hn,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Production"})]}),n.jsxs("button",{onClick:()=>t("employees"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="employees"?"bg-white text-indigo-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Ui,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Employees"})]}),n.jsxs("button",{onClick:()=>t("export"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="export"?"bg-white text-yellow-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(Os,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Export"})]}),n.jsxs("button",{onClick:()=>t("backup"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 ${e==="backup"?"bg-white text-blue-600 shadow-lg font-semibold":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,children:[n.jsx(ph,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Backup"})]})]}),n.jsxs("button",{onClick:Jt,disabled:C,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-green-500 transition-all duration-300 transform hover:scale-105 border border-white/20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh data",children:[n.jsx(wo,{className:`w-4 h-4 ${C?"animate-spin":""}`}),n.jsx("span",{className:"hidden xl:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:hr,className:"flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-red-500 transition-all duration-300 transform hover:scale-105 border border-white/20",children:[n.jsx(gh,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]})]}),O&&n.jsxs("div",{className:"lg:hidden border-t border-gray-200 py-4 space-y-2",children:[we?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("analytics"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[n.jsx(pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),n.jsxs("button",{onClick:()=>{t("inventory"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory"})]}),n.jsxs("button",{onClick:()=>{t("sales"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[n.jsx(jn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]}),Z&&n.jsxs("button",{onClick:()=>{t("production"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),n.jsxs("button",{onClick:()=>{t("employees"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[n.jsx(Ui,{className:"w-5 h-5"}),n.jsx("span",{children:"Employees"})]}),n.jsxs("button",{onClick:()=>{t("assets"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="assets"?"bg-[#FFE4CC] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5EE]"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Assets"})]}),n.jsxs("button",{onClick:()=>{t("export"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Os,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{t("backup"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[n.jsx(ph,{className:"w-5 h-5"}),n.jsx("span",{children:"Backup"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{t("analytics"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="analytics"?"bg-[#D4A5FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F5F0FF]"}`,children:[n.jsx(pn,{className:"w-5 h-5"}),n.jsx("span",{children:"Analytics"})]}),n.jsxs("button",{onClick:()=>{t("sales"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="sales"?"bg-[#FFD4E5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF5F8]"}`,children:[n.jsx(jn,{className:"w-5 h-5"}),n.jsx("span",{children:"Sales"})]}),n.jsxs("button",{onClick:()=>{t("inventory"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="inventory"?"bg-[#C1E1C1] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F0FFF0]"}`,children:[n.jsx(dr,{className:"w-5 h-5"}),n.jsx("span",{children:"Inventory"})]}),Z&&n.jsxs("button",{onClick:()=>{t("production"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="production"?"bg-[#FFE4B5] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Hn,{className:"w-5 h-5"}),n.jsx("span",{children:"Production"})]}),n.jsxs("button",{onClick:()=>{t("employees"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="employees"?"bg-[#E6E6FA] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#F8F8FF]"}`,children:[n.jsx(Ui,{className:"w-5 h-5"}),n.jsx("span",{children:"Employees"})]}),n.jsxs("button",{onClick:()=>{t("export"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="export"?"bg-[#FFE5B4] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#FFF8DC]"}`,children:[n.jsx(Os,{className:"w-5 h-5"}),n.jsx("span",{children:"Export"})]}),n.jsxs("button",{onClick:()=>{t("backup"),U(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e==="backup"?"bg-[#B4D7FF] text-gray-800":"bg-gray-50 text-gray-700 hover:bg-[#E6F2FF]"}`,children:[n.jsx(ph,{className:"w-5 h-5"}),n.jsx("span",{children:"Backup"})]})]}),n.jsxs("button",{onClick:()=>{Jt(),U(!1)},disabled:C,className:"w-full flex items-center gap-3 px-4 py-3 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(wo,{className:`w-5 h-5 ${C?"animate-spin":""}`}),n.jsx("span",{children:"Refresh Data"})]}),n.jsxs("button",{onClick:hr,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[n.jsx(gh,{className:"w-5 h-5"}),n.jsx("span",{children:"Logout"})]})]})]})}),we&&ie.length>0&&n.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-50 border-b border-purple-100 px-4 py-6",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx(oxe,{stores:ie,selectedStoreId:re,onStoreChange:oe,showAllStores:!0})})}),B&&n.jsx("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-red-800",children:[n.jsx(Nr,{className:"w-5 h-5"}),n.jsx("p",{className:"text-sm",children:B}),n.jsx("button",{onClick:()=>r&&Ne(r.accessToken),className:"ml-auto text-sm text-red-600 hover:text-red-700 underline",children:"Retry"})]})}),C&&n.jsx("div",{className:"bg-blue-50 border-b border-blue-200 px-4 py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-2 text-blue-800",children:[n.jsx(dr,{className:"w-5 h-5 animate-pulse"}),n.jsx("p",{className:"text-sm",children:"Loading inventory data..."})]})}),n.jsx("main",{className:"pb-6",children:e==="sales"?n.jsx(bP,{context:kr,selectedStoreId:re}):e==="inventory"?r.role==="manager"?n.jsx(gz,{context:kr,selectedStoreId:re,employees:V}):n.jsx(Fj,{context:kr,selectedStoreId:re}):e==="analytics"?n.jsx(x2,{context:kr,selectedStoreId:re,highlightRequestId:d,onNavigateToManageItems:()=>{console.log(" App.tsx: Changing activeView to inventory-items"),t("inventory-items")}}):e==="export"?n.jsx(SI,{userRole:r.role,selectedStoreId:re,currentUserId:r.email}):e==="backup"?n.jsx(xye,{context:kr}):e==="employees"?n.jsx(sxe,{user:{role:r.role,email:r.email,employeeId:r.employeeId,name:r.name,storeId:r.storeId,accessToken:r.accessToken},selectedStoreId:re}):e==="assets"?n.jsx(hxe,{context:kr,stores:ie,employees:V,onRefreshStores:ct}):e==="production"&&Z?n.jsx(y2,{context:kr,selectedStoreId:re}):e==="stock-requests"?n.jsx(AI,{context:kr,stores:ie}):e==="advanced-inventory"?n.jsx($I,{context:kr,stores:ie,onNavigateToManageItems:()=>{console.log(" App.tsx (Manager): Changing activeView to inventory-items"),t("inventory-items")}}):e==="inventory-items"?(console.log(" Rendering InventoryItemsManagement (Manager section):",{activeView:e,isManager:ne}),n.jsx(LI,{context:kr})):n.jsx(wle,{context:kr})})]}),r&&e==="inventory"&&n.jsx(gye,{context:kr})]})}e9.createRoot(document.getElementById("root")).render(n.jsx(Oye,{}));
